-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
module( ..., package.seeall )
require( "ui.generated.widgets.buttons.mousebuttonarea" )
require( "ui.generated.widgets.frontend.pipswithnavigation" )
local f0_local0 = 0
local f0_local1 = 0
local f0_local2 = 0
local f0_local3 = "DynamicGrid"
local f0_local4 = -1
local f0_local5 = 1
local f0_local6 = 2
local f0_local7 = 20
local f0_local8 = 400
local f0_local9 = "checkScrollStatus"
local f0_local10 = {
	RIGHT = "right",
	LEFT = "left",
	NONE = "none"
}
local f0_local11 = function ( f18_arg0, f18_arg1 )
	local f18_local0
	if f18_arg1 then
		f18_local0 = f18_arg1.x
		if not f18_local0 then
		
		else
			return math.floor( f18_local0 / f18_arg0._itemCountByPage )
		end
	end
	f18_local0 = f0_local0
end

local f0_local12 = function ( f17_arg0, f17_arg1 )
	f17_arg0.PipsWithNavigation.Pips:UpdateChildren( f17_arg1, f0_local0 )
	f17_arg0._lastPageIndex = f17_arg1
end

local f0_local13 = function ( f16_arg0 )
	return f16_arg0._lastPageIndex
end

local f0_local14 = function ( f15_arg0, f15_arg1 )
	if f15_arg0 < f15_arg1 then
		return f0_local0.RIGHT
	elseif f15_arg1 < f15_arg0 then
		return f0_local0.LEFT
	else
		return f0_local0.NONE
	end
end

local f0_local15 = function ( f14_arg0, f14_arg1 )
	f0_local0( f14_arg0, f0_local0( f14_arg0, f14_arg1 ) )
end

local f0_local16 = function ( f13_arg0, f13_arg1 )
	local f13_local0 = f13_arg0.PipsWithNavigation.Pips
	local f13_local1 = f13_local0:getFirstChild()
	local f13_local2, f13_local3, f13_local4, f13_local5 = f13_local1:getLocalRect()
	local f13_local6 = ((f13_local4 - f13_local2) * f13_arg1 + f13_local0:GetSpacing() * (f13_arg1 - 1) + f0_local0) / 2
	local f13_local7 = f13_arg0:GetAnchorsAndPosition()
	local f13_local8 = (f13_local7.right - f13_local7.left) / 2 + f13_local7.left
	f13_arg0:SetLeft( f13_local8 - f13_local6 )
	f13_arg0:SetRight( f13_local8 + f13_local6 )
end

local f0_local17 = function ( f12_arg0 )
	local f12_local0 = f12_arg0._grid:GetContentCountForCurrentAxis()
	local f12_local1 = nil
	if f12_local0 then
		f12_local1 = math.ceil( f12_local0 / f12_arg0._itemCountByPage )
	else
		f12_local1 = f0_local0
	end
	f12_arg0._pageCount = f12_local1
end

local f0_local18 = function ( f11_arg0 )
	local f11_local0 = f11_arg0.PipsWithNavigation.Pips
	local f11_local1 = f11_arg0._grid
	f0_local0( f11_arg0 )
	local f11_local2 = f11_arg0._pageCount
	if f11_local2 < f0_local0 then
		f11_local2 = f0_local0
	end
	if f11_local2 ~= f0_local0 then
		f11_local0:Resize( f11_local2 )
		f0_local0( f11_arg0, f11_local2 )
		f11_local0:SetFilledChildren( f11_arg0._fillEndIndex )
		f11_arg0:FocusOnTargetPosition( f11_local1._targetPosition )
		f11_arg0.MouseButtonArea:Activate()
		f11_arg0:SetVisible( true )
	else
		f11_arg0.MouseButtonArea:Deactivate()
		f11_arg0:SetVisible( false )
	end
end

local f0_local19 = function ( f8_arg0, f8_arg1 )
	local f8_local0 = f8_arg0._grid
	local f8_local1 = nil
	local f8_local2 = f8_arg0._lastPageIndex
	local f8_local3 = f0_local0( f8_local2, f8_arg1 )
	if f8_arg0._gridType == LUI.UIPeekingGrid or f8_arg0._gridType == LUI.UICarouselGrid then
		if f8_local3 ~= f0_local0.NONE then
			f8_local0:ScrollAmount( f8_local3, math.abs( f8_local2 - f8_arg1 ) * f8_arg0._itemCountByPage )
			f8_local1 = f8_arg1 * f8_arg0._itemCountByPage
			if f8_arg0._gridType == LUI.UICarouselGrid then
				f8_local0:SetSelectedItemIndex( f8_local1 )
			end
		end
	else
		f8_local1 = f8_arg1 * f8_arg0._itemCountByPage
		f8_local0:SetTargetColumn( f8_local1, true, false )
	end
	local f8_local4 = function ( f10_arg0, f10_arg1, f10_arg2 )
		local f10_local0 = f10_arg1:GetElementAtPosition( f10_arg0, 0 )
		if f10_local0 then
			f10_arg1:GiveFocusToChild( f10_local0, f10_arg2, false, true )
			return true
		else
			return false
		end
	end
	
	if not f8_local4( f8_local1, f8_local0, f8_local3 ) then
		f8_arg0._wantedIndexRef = f8_local1
		f8_arg0._gridRef = f8_local0
		f8_arg0._directionRef = f8_local3
		f8_arg0:CreateEventTimer( f0_local0, f0_local0, {
			immediate = false,
			callbackFunc = function ( f9_arg0, f9_arg1 )
				f8_arg0( f9_arg0._wantedIndexRef, f9_arg0._gridRef, f9_arg0._directionRef )
				f9_arg0:RemoveEventTimer( f8_arg0 )
				f9_arg0._wantedIndexRef = nil
				f9_arg0._gridRef = nil
				f9_arg0._directionRef = nil
				return true
			end
		} )
	end
end

local f0_local20 = function ( f4_arg0 )
	local f4_local0 = f4_arg0._controllerIndex
	local f4_local1 = f4_arg0._grid
	f4_arg0:addEventHandler( "pip_select", function ( f7_arg0, f7_arg1 )
		local f7_local0 = f7_arg1.index
		if f7_local0 and f7_arg1.pip and not f7_arg1.pip.focused then
			f4_arg0( f7_arg0, f7_local0 )
			f4_arg0( f7_arg0, f7_local0 )
		end
		return true
	end )
	f4_local1:addEventHandler( "grid_size_updated", function ( f6_arg0, f6_arg1 )
		f6_arg0._pagePips:SetupInternalPips()
	end )
	f4_local1:AddOnFocusChangedSubscriber( f4_arg0 )
	f4_arg0.OnFocusChanged = function ( f5_arg0, f5_arg1 )
		if f5_arg0._gridType == LUI.UICarouselGrid then
			
		else
			f5_arg1._pagePips:FocusOnTargetPosition( f5_arg1._targetPosition )
		end
	end
	
end

local f0_local21 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0._lastPageIndex = f0_local0
	f3_arg0._grid = f3_arg1
	f3_arg0._itemCountByPage = f3_arg2.itemCountByPage or f0_local0
	f3_arg0._fillEndIndex = f3_arg2.fillEndIndex or 0
	if f3_arg1:CheckIsGridTypeOf( LUI.UIPeekingGrid ) then
		f3_arg0._gridType = LUI.UIPeekingGrid
	elseif f3_arg1:CheckIsGridTypeOf( LUI.UICarouselGrid ) then
		f3_arg0._gridType = LUI.UICarouselGrid
	else
		local f3_local0 = f3_arg1:getParent()
		if f3_local0 and f3_local0.GetWidgetAtIndex then
			f3_arg0._gridType = f0_local0
		else
			f3_arg0._gridType = LUI.Grid
		end
	end
	f3_arg0:SetupInternalPips()
	f0_local0( f3_arg0 )
end

local f0_local22 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0._controllerIndex = f2_arg1
	f2_arg0.NavigateToPageIndex = f0_local0
	f2_arg0.FocusOnTargetPosition = f0_local0
	f2_arg0.SetupInternalPips = f0_local0
	f2_arg0.SetupWidget = f0_local0
	f2_arg0.GetCurrentPageIndex = f0_local0
end

function GridPagePips( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = MenuBuilder
	local f1_local2 = f1_local0.UIElement.new()
	f1_local2:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 256, 0, 32 )
	f1_local2.id = "GridPagePips"
	local f1_local3
	if f1_arg1 then
		f1_local3 = f1_arg1
	else
		f1_local3 = f1_arg1.controllerIndex
	end
	f1_local3 = f1_local0.ValidateControllerIndex( f1_local2, f1_local3 )
	local f1_local4 = nil
	f1_local4 = f1_local1.BuildRegisteredType( 0x57C019E9FCB4F59, {
		controllerIndex = f1_local3
	} )
	f1_local4[0x8B72E07B55C3AC0] = "MouseButtonArea"
	f1_local4:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
	f1_local2:addElement( f1_local4 )
	f1_local2[0x57C019E9FCB4F59] = f1_local4
	local f1_local5 = nil
	f1_local5 = f1_local1.BuildRegisteredType( 0xD47B24792F12BC9, {
		controllerIndex = f1_local3
	} )
	f1_local5[0x8B72E07B55C3AC0] = "PipsWithNavigation"
	f1_local5[0x8A63107B54DCCA6]:SetAlpha( 0, 0 )
	f1_local5:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -128, 128, -16, 16 )
	f1_local2:addElement( f1_local5 )
	f1_local2[0xD47B24792F12BC9] = f1_local5
	f0_local0( f1_local2, f1_local3, f1_arg1 )
	return f1_local2
end

MenuBuilder.registerType( 0x6994C843F32A84C, GridPagePips )
LockTable( _M )
