-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
module( ..., package.seeall )
require( "ui.frontEnd.OperatorSelectButtonList" )
local f0_local0 = function ( f17_arg0, f17_arg1, f17_arg2 )
	assert( f17_arg0._factionRef and f17_arg0._operatorIndex )
	local f17_local0 = f17_arg2:GetOperatorInfo( f17_arg0._factionRef, f17_arg0._operatorIndex )
	assert( f17_local0 )
	f17_arg0:SetupContextualMenu( {
		title = Engine[0xED84C33EC5F01EA]( f17_local0.name )
	} )
	f17_arg0:AddContextualMenuAction( {
		button = "button_select",
		id = "operatorBio",
		actionName = Engine[0xED84C33EC5F01EA]( "LUA_MENU/OPERATOR_BIO" ),
		conditionFunction = function ()
			return OPERATOR.IsOperatorBioAvailable( f17_arg0, f17_arg0 )
		end,
		actionFunction = function ()
			OPERATOR.OpenOperatorBio( f17_arg0, f17_arg0 )
		end
	} )
	f17_arg0:AddContextualMenuAction( {
		button = "button_alt2",
		id = "operatorEditSkin",
		actionName = Engine[0xED84C33EC5F01EA]( "OPERATIONS/EDIT_SKIN_KBM" ),
		conditionFunction = function ()
			return OPERATOR.IsOperatorSubMenuAvailable( f17_arg0, f17_arg0, "OperatorCustomization" )
		end,
		actionFunction = function ()
			OPERATOR.OpenOperatorSubMenu( f17_arg0, f17_arg0, "OperatorCustomization" )
		end
	} )
	f17_arg0:AddContextualMenuAction( {
		id = "operatorPreview",
		actionName = Engine[0xED84C33EC5F01EA]( "MENU/VIEW_OPERATOR_BUNDLE" ),
		conditionFunction = function ()
			local f19_local0 = f17_arg0._isFocusedOperatorUnlocked
			local f19_local1 = Dvar[0x9E5BE3B4BBA4E0E]( "#x3cf763f815071797d" )
			local f19_local2 = f17_arg0.OperatorSelectChallengesLayout.BundleUpsellButton._bundleData
			local f19_local3
			if not f19_local0 then
				if f19_local1 then
					f19_local3 = f19_local1
				else
					f19_local3 = f19_local2
				end
			else
				f19_local3 = false
			end
			return f19_local3
		end,
		actionFunction = function ()
			f17_arg0.OperatorSelectChallengesLayout.BundleUpsellButton:processEvent( {
				name = "view_bundle"
			} )
		end,
		button = LUI.MouseCursorContextualMenuLayer.BUTTON_NONE
	} )
end

local f0_local1 = function ( f16_arg0 )
	local f16_local0 = f16_arg0._hidden and f16_arg0._newOperatorCount or f16_arg0._operatorCount
	f16_arg0:SetAnchorsAndPosition( 0, 1, 0, 1, 0, f16_local0 * 88 * _1080p + (f16_local0 - 1) * 6 * _1080p, 0, 124 * _1080p )
end

local f0_local2 = function ( f15_arg0 )
	f15_arg0.FactionName:SetAlpha( 1 )
	f15_arg0.Line:SetAlpha( 1 )
	if f15_arg0._hidden then
		f15_arg0.ItemsCollected:SetAlpha( 0 )
		if 0 < f15_arg0._newOperatorCount then
			f15_arg0:SetAlpha( 1 )
		else
			f15_arg0:SetAlpha( 0 )
		end
	elseif 1 <= f15_arg0._operatorCount then
		f15_arg0.ItemsCollected:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU/X_OF_Y", f15_arg0._numUnlocked, f15_arg0._operatorCount ) )
		f15_arg0.ItemsCollected:SetAlpha( 1 )
		f15_arg0:SetAlpha( 1 )
	else
		f15_arg0:SetAlpha( 0 )
	end
end

local f0_local3 = function ( f14_arg0 )
	f14_arg0.ItemsCollected:SetAlpha( 0 )
	f14_arg0.FactionName:SetAlpha( 0 )
	f14_arg0.Line:SetAlpha( 0 )
end

local f0_local4 = function ( f10_arg0, f10_arg1, f10_arg2, f10_arg3, f10_arg4, f10_arg5, f10_arg6, f10_arg7 )
	f10_arg0.FactionName:setText( Engine[0xED84C33EC5F01EA]( StringTable[0x2DCF0973239E909]( CSV.FactionTable.file, CSV.FactionTable.cols.ref, f10_arg2, CSV.FactionTable.cols.name ) ) )
	f10_arg0._menu = f10_arg7
	f10_arg0._factionIndex = f10_arg3
	f10_arg0._factionRef = f10_arg2
	f10_arg0._operatorCount = #f10_arg4
	f10_arg0._newOperatorCount = #f10_arg5
	local f10_local0 = f10_arg0.SetItemsHidden
	f10_arg0.SetItemsHidden = f10_arg0._SetItemsHidden
	f10_arg0._SetItemsHidden = nil
	if LUI.HasHideableItemsLogic( f10_arg0, f10_arg0._controllerIndex ) then
		LUI.RemoveHideableItemsLogic( f10_arg0, f10_arg0._controllerIndex, {
			resetState = false
		} )
	end
	f10_arg0.OperatorSelectButtonList:RemoveAllButtonsFromList()
	f10_arg0._hiddenIndices = {}
	local f10_local1 = {}
	local f10_local2 = {}
	local f10_local3 = 0
	for f10_local7, f10_local8 in ipairs( f10_arg4 ) do
		local f10_local9 = f10_arg0.OperatorSelectButtonList:AddButtonToList( f10_arg1, f10_local7 ~= f10_arg0._operatorCount )
		f10_local9:SetButtonData( {
			factionRef = f10_arg2,
			factionIndex = f10_arg3,
			operatorIndex = f10_local7,
			operatorRef = f10_local8.ref
		} )
		f10_local9:SetupIfNewItem( f10_arg1 )
		f10_local9:SetupHandlers( f10_arg7, f10_local8, f10_arg1 )
		f0_local0( f10_local9, f10_arg1, f10_arg7 )
		local f10_local10 = LUI.IsItemInArray( f10_arg5, f10_local8 )
		if f10_local10 then
			f10_local9:SetNewItemNotificationVisible( true )
		end
		if not f10_local10 then
			table.insert( f10_local1, f10_local9 )
			table.insert( f10_arg0._hiddenIndices, #f10_local2 + 1 )
		end
		table.insert( f10_local2, f10_local9 )
		if OPERATOR.IsUnlocked( f10_arg1, f10_local8.ref ) then
			f10_local3 = f10_local3 + 1
		end
	end
	LUI.AddHideableItemsLogic( f10_arg0, f10_arg0._controllerIndex, {
		items = f10_local1,
		hidden = f10_arg6,
		FocusNearestElement = function ()
			
		end,
		ShowElement = function ()
			
		end,
		HideElement = function ()
			
		end
	} )
	f10_arg0._SetItemsHidden = f10_arg0.SetItemsHidden
	f10_arg0.SetItemsHidden = f10_local0
	if f10_arg6 then
		f10_arg0.OperatorSelectButtonList:SetButtonsHidden( f10_arg0._hiddenIndices, true, true )
	end
	f10_arg0._hidden = f10_arg6
	f10_arg0._numUnlocked = f10_local3
	f0_local0( f10_arg0 )
	f0_local0( f10_arg0 )
end

local f0_local5 = function ( f9_arg0, f9_arg1, f9_arg2, f9_arg3, f9_arg4 )
	f9_arg0.FactionName:setText( "RANDOM" )
	f9_arg0._menu = f9_arg4
	f9_arg0._operatorCount = 1
	f9_arg0._newOperatorCount = 1
	f9_arg0._factionIndex = f9_arg3
	f9_arg0._factionRef = f9_arg2
	local f9_local0 = f9_arg0.SetItemsHidden
	f9_arg0.SetItemsHidden = f9_arg0._SetItemsHidden
	f9_arg0._SetItemsHidden = nil
	if LUI.HasHideableItemsLogic( f9_arg0, f9_arg0._controllerIndex ) then
		LUI.RemoveHideableItemsLogic( f9_arg0, f9_arg0._controllerIndex, {
			resetState = false
		} )
	end
	f9_arg0.OperatorSelectButtonList:RemoveAllButtonsFromList()
	f9_arg0._hiddenIndices = {}
	local f9_local1 = f9_arg0.OperatorSelectButtonList:AddRandomButtonToList( f9_arg1, false )
	f9_local1:SetButtonData( {
		factionRef = f9_arg2,
		factionIndex = f9_arg3
	} )
	f9_local1:SetupHandlers( f9_arg4, f9_arg1 )
	f9_arg0._hidden = false
	f9_arg0._numUnlocked = 1
	f0_local0( f9_arg0 )
	f0_local0( f9_arg0 )
	f0_local0( f9_arg0 )
end

local f0_local6 = function ( f8_arg0, f8_arg1, f8_arg2, f8_arg3 )
	if f8_arg0._hidden and not f8_arg1 then
		f8_arg0._hidden = f8_arg1
		if f8_arg3 then
			f0_local0( f8_arg0 )
		else
			f0_local0( f8_arg0 )
		end
		f8_arg0.OperatorSelectButtonList:SetButtonsHidden( f8_arg0._hiddenIndices, f8_arg1, f8_arg3 )
		f8_arg0:_SetItemsHidden( f8_arg1, f8_arg2, f8_arg3 )
	elseif not f8_arg0._hidden and f8_arg1 then
		f8_arg0._hidden = f8_arg1
		if f8_arg3 then
			f0_local0( f8_arg0 )
		else
			f0_local0( f8_arg0 )
		end
		f8_arg0.OperatorSelectButtonList:SetButtonsHidden( f8_arg0._hiddenIndices, f8_arg1, f8_arg3 )
		f8_arg0:_SetItemsHidden( f8_arg1, f8_arg2, f8_arg3 )
	end
end

local f0_local7 = function ( f7_arg0 )
	return 1 + (f7_arg0 - 1) * 2
end

local f0_local8 = function ( f4_arg0, f4_arg1, f4_arg2 )
	assert( f4_arg0.OperatorSelectButtonList )
	assert( f4_arg0.FactionName )
	f4_arg0.SetupButtonContainer = f0_local0
	f4_arg0.SetupRandomButtonContainer = f0_local0
	f4_arg0.SetItemsHidden = f0_local0
	if IsLanguageArabic() then
		ACTIONS.AnimateSequence( f4_arg0, "AR" )
	end
	local f4_local0 = function ( f5_arg0 )
		if f4_arg0._menu == nil then
			
		else
			
		end
		local f5_local0 = f4_arg0._menu
		local f5_local1 = LUI.FlowManager.GetScopedData( f4_arg0 )
		if f5_local1.operatorData.useEquippedOperatorFocusIndex then
			f5_local1.operatorData.useEquippedOperatorFocusIndex = false
			local f5_local2, f5_local3 = f5_local0:GetEquippedFactionAndOperatorIndex()
			local f5_local4 = f4_arg0
			local f5_local5 = f5_local3
		end
		local f5_local2, f5_local3 = f5_local0:GetFactionAndOperatorIndex( f5_local0:GetSelectedOperator() )
		local f5_local4 = f4_arg0._factionIndex - 1
		local f5_local6 = f4_arg0._hidden
		if f5_local1.operatorData.useSelectedOperatorIndexForFocus then
			f5_local1.operatorData.useSelectedOperatorIndexForFocus = false
			if f5_local2 ~= f5_local4 then
				local f5_local5 = f5_local0:GetMaxOperatorIndexInFaction( f5_local4 )
				if f5_local4 < f5_local2 then
					for f5_local7 = f5_local5, 1, -1 do
						if not f5_local6 or not f5_local0:IsOperatorHidden( f5_local4, f5_local7 ) then
							local f5_local10 = f4_arg0
							local f5_local11 = f5_local7
						end
					end
				else
					for f5_local7 = 1, f5_local5, 1 do
						if not f5_local6 or not f5_local0:IsOperatorHidden( f5_local4, f5_local7 ) then
							local f5_local10 = f4_arg0
							local f5_local11 = f5_local7
						end
					end
				end
				local f5_local7 = f4_arg0
				local f5_local9 = 1
			elseif not f5_local6 or not f5_local0:IsOperatorHidden( f5_local2, f5_local3 ) then
				local f5_local5 = f4_arg0
				local f5_local8 = f5_local3
			else
				local f5_local5 = f5_local0:GetMaxOperatorIndexInFaction( f5_local2 )
				local f5_local7 = {}
				for f5_local8 = 1, f5_local5, 1 do
					if not f5_local6 or not f5_local0:IsOperatorHidden( f5_local2, f5_local8 ) then
						table.insert( f5_local7, f5_local8 )
					end
				end
				if 0 < #f5_local7 then
					table.sort( f5_local7, function ( f6_arg0, f6_arg1 )
						return math.abs( f6_arg0 - f5_arg0 ) < math.abs( f6_arg1 - f5_arg0 )
					end )
					return f4_arg0( f5_local7[1] )
				end
				return f4_arg0( 1 )
			end
		end
		local f5_local5
		if f5_arg0 ~= nil then
			if f5_arg0.direction ~= "left" or f5_arg0.isWrap then
				f5_local5 = f5_arg0.isWrap
				if f5_local5 then
					if f5_arg0.direction ~= "right" then
						f5_local5 = false
					end
				else
					local f5_local7
					if f5_arg0 ~= nil then
						if f5_arg0.direction ~= "right" or f5_arg0.isWrap then
							f5_local7 = f5_arg0.isWrap
							if f5_local7 then
								if f5_arg0.direction ~= "left" then
									f5_local7 = false
								end
							else
								local f5_local8
								if not f5_local5 then
									f5_local8 = f5_local5
								elseif f5_local7 or f5_local4 >= f5_local2 then
									f5_local8 = false
								else
									f5_local8 = true
								end
								local f5_local9 = f5_local0:GetMaxOperatorIndexInFaction( f5_local4 )
								if f5_arg0 ~= nil and not f5_arg0.direction and f5_arg0.isWrap then
									f5_local8 = not f5_local8
								end
								if f5_local8 then
									for f5_local12 = f5_local9, 1, -1 do
										if not f5_local6 or not f5_local0:IsOperatorHidden( f5_local4, f5_local12 ) then
											return f4_arg0( f5_local12 )
										end
									end
								else
									for f5_local12 = 1, f5_local9, 1 do
										if not f5_local6 or not f5_local0:IsOperatorHidden( f5_local4, f5_local12 ) then
											return f4_arg0( f5_local12 )
										end
									end
								end
								return f4_arg0( 1 )
							end
						end
						f5_local7 = true
					else
						f5_local7 = false
					end
					local f5_local8
					if not f5_local5 then
						f5_local8 = f5_local5
					elseif f5_local7 or f5_local4 >= f5_local2 then
						f5_local8 = false
					else
						f5_local8 = true
					end
					local f5_local9 = f5_local0:GetMaxOperatorIndexInFaction( f5_local4 )
					if f5_arg0 ~= nil and not f5_arg0.direction and f5_arg0.isWrap then
						f5_local8 = not f5_local8
					end
					if f5_local8 then
						for f5_local12 = f5_local9, 1, -1 do
							if not f5_local6 or not f5_local0:IsOperatorHidden( f5_local4, f5_local12 ) then
								return f4_arg0( f5_local12 )
							end
						end
					else
						for f5_local12 = 1, f5_local9, 1 do
							if not f5_local6 or not f5_local0:IsOperatorHidden( f5_local4, f5_local12 ) then
								return f4_arg0( f5_local12 )
							end
						end
					end
					return f4_arg0( 1 )
				end
			end
			f5_local5 = true
		else
			f5_local5 = false
		end
		local f5_local7
		if f5_arg0 ~= nil then
			if f5_arg0.direction ~= "right" or f5_arg0.isWrap then
				f5_local7 = f5_arg0.isWrap
				if f5_local7 then
					if f5_arg0.direction ~= "left" then
						f5_local7 = false
					end
				else
					local f5_local8
					if not f5_local5 then
						f5_local8 = f5_local5
					elseif f5_local7 or f5_local4 >= f5_local2 then
						f5_local8 = false
					else
						f5_local8 = true
					end
					local f5_local9 = f5_local0:GetMaxOperatorIndexInFaction( f5_local4 )
					if f5_arg0 ~= nil and not f5_arg0.direction and f5_arg0.isWrap then
						f5_local8 = not f5_local8
					end
					if f5_local8 then
						for f5_local12 = f5_local9, 1, -1 do
							if not f5_local6 or not f5_local0:IsOperatorHidden( f5_local4, f5_local12 ) then
								return f4_arg0( f5_local12 )
							end
						end
					else
						for f5_local12 = 1, f5_local9, 1 do
							if not f5_local6 or not f5_local0:IsOperatorHidden( f5_local4, f5_local12 ) then
								return f4_arg0( f5_local12 )
							end
						end
					end
					return f4_arg0( 1 )
				end
			end
			f5_local7 = true
		else
			f5_local7 = false
		end
		local f5_local8
		if not f5_local5 then
			f5_local8 = f5_local5
		elseif f5_local7 or f5_local4 >= f5_local2 then
			f5_local8 = false
		else
			f5_local8 = true
		end
		local f5_local9 = f5_local0:GetMaxOperatorIndexInFaction( f5_local4 )
		if f5_arg0 ~= nil and not f5_arg0.direction and f5_arg0.isWrap then
			f5_local8 = not f5_local8
		end
		if f5_local8 then
			for f5_local12 = f5_local9, 1, -1 do
				if not f5_local6 or not f5_local0:IsOperatorHidden( f5_local4, f5_local12 ) then
					return f4_arg0( f5_local12 )
				end
			end
		else
			for f5_local12 = 1, f5_local9, 1 do
				if not f5_local6 or not f5_local0:IsOperatorHidden( f5_local4, f5_local12 ) then
					return f4_arg0( f5_local12 )
				end
			end
		end
		return f4_arg0( 1 )
	end
	
	f4_arg0.OperatorSelectButtonList:SetForceDefaultFocus( true )
	f4_arg0.OperatorSelectButtonList:SetDefaultFocus( f4_local0 )
	f4_arg0:SetGridChildDynamicSize( true, LUI.DIRECTION.horizontal )
end

function OperatorSelectButtonContainer( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 234 * _1080p, 0, 124 * _1080p )
	self.id = "OperatorSelectButtonContainer"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	self._sequenceLengths = self._sequenceLengths or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local LineMask = nil
	
	LineMask = LUI.UIImage.new()
	LineMask.id = "LineMask"
	LineMask:setImage( RegisterMaterial( "ui_default_white" ), 0 )
	LineMask:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -148, _1080p * -136 )
	self:addElement( LineMask )
	self.LineMask = LineMask
	
	local OperatorSelectButtonList = nil
	
	OperatorSelectButtonList = MenuBuilder.BuildRegisteredType( "OperatorSelectButtonList", {
		controllerIndex = f1_local1
	} )
	OperatorSelectButtonList.id = "OperatorSelectButtonList"
	OperatorSelectButtonList:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 234, 0, _1080p * 124 )
	self:addElement( OperatorSelectButtonList )
	self.OperatorSelectButtonList = OperatorSelectButtonList
	
	local ItemsCollected = nil
	
	ItemsCollected = LUI.UIStyledText.new()
	ItemsCollected.id = "ItemsCollected"
	ItemsCollected:SetRGBFromTable( SWATCHES.text.buttonTextDefault, 0 )
	ItemsCollected:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU/X_OF_Y" ), 0 )
	ItemsCollected:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_XSHeaderBold.font.File ) )
	ItemsCollected:SetFontSize( FONT_STYLES.fontStyle_XSHeaderBold.size )
	ItemsCollected:SetMinFontSize( FONT_STYLES.fontStyle_XSHeaderBold.minSize )
	ItemsCollected:SetWordWrap( true )
	ItemsCollected:SetLeading( -2 * _1080p, 0 )
	ItemsCollected:SetAlignment( LUI.Alignment.Right )
	ItemsCollected:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -54, 0, _1080p * -42, _1080p * -16 )
	self:addElement( ItemsCollected )
	self.ItemsCollected = ItemsCollected
	
	local FactionName = nil
	
	FactionName = LUI.UIStyledText.new()
	FactionName.id = "FactionName"
	FactionName:SetRGBFromTable( SWATCHES.text.buttonTextDefault, 0 )
	FactionName:setText( "", 0 )
	FactionName:setCaseStyle( LUI.CaseStyle.Uppercase )
	FactionName:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_SHeaderBold.font.File ) )
	FactionName:SetFontSize( FONT_STYLES.fontStyle_SHeaderBold.size )
	FactionName:SetMinFontSize( FONT_STYLES.fontStyle_SHeaderBold.minSize )
	FactionName:SetWordWrap( false )
	FactionName:SetLeading( -2 * _1080p, 0 )
	FactionName:SetAlignment( LUI.Alignment.Left )
	FactionName:SetAutoScroll( AUTOSCROLL.enabled )
	FactionName:SetAutoScrollStyle( LUI.UIStyledText.AutoScrollStyle.ScrollH )
	FactionName:SetStartupDelay( 1000 )
	FactionName:SetLineHoldTime( 600 )
	FactionName:SetAnimMoveTime( 600 )
	FactionName:SetAnimMoveSpeed( 50 )
	FactionName:SetEndDelay( 1000 )
	FactionName:SetCrossfadeTime( 400 )
	FactionName:SetFadeInTime( 300 )
	FactionName:SetFadeOutTime( 300 )
	FactionName:SetMaxVisibleLines( 1 )
	FactionName:SetAnchorsAndPosition( 0, 0, 0, 1, 0, _1080p * -35, _1080p * -43, _1080p * -17 )
	self:addElement( FactionName )
	self.FactionName = FactionName
	
	local Line = nil
	
	Line = LUI.UIImage.new()
	Line.id = "Line"
	Line:SetRGBFromTable( SWATCHES.highlight.vDefaultHighlight, 0 )
	Line:setImage( RegisterMaterial( "v_ui_elmnt_tech_bar_thin" ), 0 )
	Line:SetMask( self.LineMask )
	Line:setUseStencil( true )
	Line:SetAnchorsAndPosition( 0, 1, 1, 0, _1080p * -2, _1080p * 1918, _1080p * -140, _1080p * -136 )
	self:addElement( Line )
	self.Line = Line
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	self._sequenceLengths.DefaultSequence = 0
	local f1_local8 = nil
	ItemsCollected:RegisterAnimationSequence( "AR", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -41
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Text_Style_Horizontal_Alignment,
			value = LUI.Alignment.Left
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -234
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -203
		}
	} )
	FactionName:RegisterAnimationSequence( "AR", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -41
		}
	} )
	self._sequences.AR = function ()
		menu:AnimateSequence( "AR" )
		menu:AnimateSequence( "AR" )
	end
	
	self._sequenceLengths.AR = 0
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "OperatorSelectButtonContainer", OperatorSelectButtonContainer )
LockTable( _M )
