-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:01
MP_COMMON = MP_COMMON or {}
MP_COMMON.postShipFlags = {
	forcedWZControllerLayoutReset = 1,
	overkillSwap = 0
}
MP_COMMON.SetupOnline = function ()
	Dvar[0x8EA06EEDB58D872]( 0x62400405F9F3C0B, true )
	if Dvar[0x9E5BE3B4BBA4E0E]( 0xCC8C81329E0BDBF ) then
		Dvar[0x8EA06EEDB58D872]( 0xCC8C81329E0BDBF, false )
		Dvar[0x8EA06EEDB58D872]( 0x539B36C7ADB4813, true )
	end
end

MP_COMMON.SetupParty = function ( f15_arg0 )
	local f15_local0 = Engine[0x45B054C920178E9]()
	if not Lobby[0x63537242F1D48FF]() then
		Social[0x4CFFBE37F5E69BB]( f15_local0, f15_arg0 )
	end
end

MP_COMMON.StopGameLobbyAndWakePrivateParty = function ()
	Engine[0xB81A5136C5503E4]( "xstopparty", Engine[0x45B054C920178E9]() )
end

MP_COMMON.StartPrivateMatchLobbyDsRequired = function ( f13_arg0 )
	Dvar[0x2414681ECAB880F]( 0x2FFBD81B5FEF078, 2 )
	if BuiltInEsports[0x9894ED459E76619]() and f13_arg0 ~= "big" then
		f13_arg0 = "esports"
	end
	local f13_local0 = Dvar[0x54084D7CA2317BB]( 0xCEE007DC8631609 )
	if f13_local0 and f13_local0 ~= "" then
		f13_arg0 = f13_local0
	end
	Dvar[0xE3CB005036E0C0F]( 0xD59DD7C536C9DC, f13_arg0 )
	Engine[0xB81A5136C5503E4]( "xstartprivatematchlobby" )
end

MP_COMMON.StartPrivateMatchLobbyDsOptional = function ( f12_arg0 )
	Dvar[0x2414681ECAB880F]( 0x2FFBD81B5FEF078, 0 )
	Dvar[0xE3CB005036E0C0F]( 0xD59DD7C536C9DC, f12_arg0 )
	Engine[0xB81A5136C5503E4]( "xstartprivatematchlobby" )
end

MP_COMMON.IsPrivateMatchLobbyUsingDs = function ()
	return Dvar[0x22EAAB59AA27E9B]( 0x2FFBD81B5FEF078 ) ~= 0
end

MP_COMMON.SetupPrivateMatchParty = function ()
	Engine[0xB81A5136C5503E4]( "xsetupprivatematchparty" )
end

MP_COMMON.StartPrivateMatch = function ( f9_arg0 )
	CodcasterAnalyticsUtils.SendModifiedRulesTelemetry( f9_arg0 )
	Lobby[0x34DCEF780B7406B]( f9_arg0 )
end

MP_COMMON.SetupStreaming = function ( f8_arg0, f8_arg1 )
	Streaming[0xE493C1B436663F6]( true )
	f8_arg0:addElement( MP.GetGameModeMaterialStreamer() )
	f8_arg0:addElement( Lobby.GetMPMapMaterialStreamer() )
	f8_arg0:addElement( Lobby.GetMPMapPreloadStreamer( f8_arg1 ) )
	MP_COMMON.LoadStreamingModels( f8_arg1, LOADOUT.GetFavoriteLoadoutIndex( f8_arg1 ) )
end

MP_COMMON.LoadStreamingModels = function ( f7_arg0, f7_arg1, f7_arg2 )
	local f7_local0 = LOADOUT.GetLoadoutSquadMember( f7_arg0 )
	f7_local0 = f7_local0.loadouts
	if not f7_arg2 then
		local f7_local1 = {}
		for f7_local2 = 0, 1, 1 do
			local f7_local5 = f7_local0[f7_arg1].weaponSetups[f7_local2]
			local f7_local6 = WEAPON.GetWeaponModelNameFromPlayerData( f7_local5.weapon:get(), f7_local5, {
				includeCamos = true,
				includeAttachments = true,
				includeStickers = true,
				controllerIndex = f7_arg0
			} )
			if f7_local6 and 0 < #f7_local6 then
				table.insert( f7_local1, f7_local6 )
			end
		end
		local f7_local3 = WATCH.GetFullModelName( WATCH.GetEquippedWatch( f7_arg0 ) )
		if f7_local3 and 0 < #f7_local3 then
			table.insert( f7_local1, f7_local3 )
		end
		if 0 < #f7_local1 then
			FrontEndScene.RequestWeaponViewModels( f7_local1, f7_arg0 )
		end
	end
	local f7_local1 = {}
	local f7_local2 = {}
	for f7_local3 = 0, 1, 1 do
		local f7_local6, f7_local8 = OPERATOR.GetEquippedOperatorSkin( f7_arg0, f7_local3 )
		if f7_local6 and f7_local6 ~= "" then
			table.insert( f7_local1, f7_local6 )
		end
		if f7_local8 and f7_local8 ~= "" then
			table.insert( f7_local2, f7_local8 )
		end
	end
	if 0 < #f7_local1 and 0 < #f7_local2 then
		FrontEndScene.RequestBodyModels( f7_local1 )
		FrontEndScene.RequestHeadModels( f7_local2 )
	end
end

MP_COMMON.TriggerLeaveMainGamemodeMenu = function ( f6_arg0, f6_arg1 )
	local f6_local0 = true
	if CONDITIONS.ArePartiesEnabledInMainMenu() and Lobby[0x6957722EF74F5D2]() then
		f6_local0 = false
	end
	if Lobby.IsNotAloneInPrivateParty() and f6_local0 then
		if Engine[0x688D9FAA39ECE94]() then
			LUI.FlowManager.RequestPopupMenu( f6_arg0, "RateLimitedLeaveMainGamemodeMenuPopup", true, f6_arg1.controller, false, {
				rateLimitIntervalMS = 5000,
				rateLimitAttempts = 3,
				menu = f6_arg0
			} )
		else
			LUI.FlowManager.RequestPopupMenu( f6_arg0, "LeaveMainGamemodeMenuPopup", true, f6_arg1.controller, false, {
				menu = f6_arg0
			} )
		end
	else
		Lobby.LeaveMainGamemodeMenu( f6_arg0, f6_arg1.controller )
	end
	return true
end

MP_COMMON.RefreshDataForFirstController = function ()
	if 0 < Engine[0x70187FE84AE61FD]() then
		local f5_local0 = Engine[0x45B054C920178E9]()
		if f5_local0 and Engine[0xD2813B521711C11]( f5_local0 ) then
			Engine[0x404BD1F5B45E2F]()
		end
	end
end

MP_COMMON.IsMatchRulesCODCastingEnabled = function ( f4_arg0 )
	local f4_local0 = true
	if MatchRules[0x1A6D0B2E15DF8CF]() then
		f4_local0 = MatchRules[0x3A9F1F51625857F]( "commonOption", "codcasterEnabled" )
	end
	local f4_local1 = false
	if f4_arg0 then
		f4_local1 = 1 < Engine[0x70187FE84AE61FD]()
	end
	local f4_local2
	if f4_local0 then
		f4_local2 = f4_local0
	else
		f4_local2 = not f4_local1
	end
	return f4_local2
end

MP_COMMON.IsMatchRulesTeamAssignmentEnabled = function ()
	if MatchRules[0x1A6D0B2E15DF8CF]() then
		return MatchRules[0x3A9F1F51625857F]( "commonOption", "teamAssignmentAllowed" )
	else
		return true
	end
end

MP_COMMON.ValidatePlayerData = function ( f2_arg0, f2_arg1 )
	PERK.ValidatePlayerData( f2_arg0, f2_arg1 )
	MP_COMMON.ResetWZControllerLayout( f2_arg0, f2_arg1 )
	if CoD.IsDMZMatch() then
		DMZ.Validate( f2_arg0 )
	end
end

MP_COMMON.ResetWZControllerLayout = function ( f1_arg0, f1_arg1 )
	local f1_local0 = PLAYER_DATA.IO( f1_arg0, CoD.StatsGroup.NonGame, CoD.PlayMode.Core, f1_arg1 )
	local f1_local1 = MP_COMMON.postShipFlags.forcedWZControllerLayoutReset
	if f1_local0.postShipFlags[f1_local1]:get() < 1 then
		local f1_local2 = Engine[0x7B17D94988FD5D0]( "gpadBRButtonsConfig", f1_arg0 )
		if f1_local2 == "buttons_br_ping_lb" or f1_local2 == "buttons_br_ping_lb_alt" then
			Engine[0x23F1D3C77CE5C6]( Engine[0x7B17D94988FD5D0]( "gpadButtonsConfig", f1_arg0 ), f1_arg0, true )
		end
		f1_local0.postShipFlags[f1_local1]:set( 1 )
	end
end

