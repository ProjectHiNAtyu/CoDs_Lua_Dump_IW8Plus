-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
module( ..., package.seeall )
FenceInstall = LUI.Class( LUI.Fence )
FenceInstall.init = function ( f9_arg0, f9_arg1 )
	assert( type( f9_arg1 ) == "string" )
	FenceInstall.super.init( f9_arg0 )
	f9_arg0._packageName = f9_arg1
end

FenceInstall.Start = function ( f8_arg0 )
	assert( f8_arg0._packageName )
	DebugPrint( "FenceInstall.Start" )
end

FenceInstall.Stop = function ( f7_arg0 )
	DebugPrint( "FenceInstall.Stop" )
	LUI.FlowManager.RequestLeaveMenuByName( "FenceStreamingInstall", true )
	f7_arg0._openedPopup = false
end

FenceInstall.UpdateState = function ( f5_arg0 )
	if f5_arg0._state == LUI.Fence.STATE.pass then
		
	else
		
	end
	assert( f5_arg0._state ~= LUI.Fence.STATE.fail )
	f5_arg0._state = LUI.Fence.STATE.block
	local f5_local0, f5_local1 = Engine[0xF5323797F8FE058]()
	if f5_local0 == 1 and f5_local1 == 0 then
		f5_arg0._state = LUI.Fence.STATE.pass
	elseif not f5_arg0._openedPopup then
		local f5_local2 = f5_arg0
		LUI.FlowManager.RequestPopupMenu( nil, "FenceStreamingInstall", false, nil, false, {
			onCancel = function ()
				f5_arg0._state = LUI.Fence.STATE.fail
			end
		}, nil, true, true )
		f5_arg0._openedPopup = true
	end
end

function FenceStreamingInstall( f3_arg0, f3_arg1 )
	assert( f3_arg1 )
	f3_arg1.message = Engine[0xED84C33EC5F01EA]( "MENU/STREAMING_INSTALL_IN_PROGRESS" )
	local f3_local0 = MenuBuilder.BuildRegisteredType( "FenceDialogPopupWithProgress", f3_arg1 )
	local self = LUI.UITimer.new( {
		interval = 200,
		event = "update_streaming_bar"
	} )
	self.id = "timer"
	f3_local0:addElement( self )
	assert( f3_local0.SetProgress )
	self:registerEventHandler( "update_streaming_bar", function ( self, event )
		local f4_local0, f4_local1 = Engine[0xF5323797F8FE058]()
		f3_arg0:SetProgress( f4_local0 )
	end )
	return f3_local0
end

MenuBuilder.registerType( "FenceStreamingInstall", FenceStreamingInstall )
FenceMPInstall = LUI.Class( FenceInstall )
FenceMPInstall.init = function ( f2_arg0 )
	FenceMPInstall.super.init( f2_arg0, "mp" )
end

LUI.Fence.Register( "mpInstall", FenceMPInstall )
FenceSPInstall = LUI.Class( FenceInstall )
FenceSPInstall.init = function ( f1_arg0 )
	FenceSPInstall.super.init( f1_arg0, "sp" )
end

LUI.Fence.Register( "spInstall", FenceSPInstall )
LockTable( _M )
