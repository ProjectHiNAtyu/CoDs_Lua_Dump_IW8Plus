-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
LUI.TextChat = LUI.Class( LUI.UIElement )
LUI.TextChat.init = function ( f22_arg0, f22_arg1 )
	LUI.TextChat.super.init( f22_arg0 )
	f22_arg0.id = "TextChatLayer"
	assert( f22_arg1.controllerIndex )
	f22_arg0._controllerIndex = f22_arg1.controllerIndex
end

LUI.TextChat.InitLayer = function ( f21_arg0 )
	local f21_local0 = nil
	f21_local0 = MenuBuilder.BuildRegisteredType( "TextChat", {
		controllerIndex = f21_arg0._controllerIndex
	} )
	f21_local0.id = "chat"
	f21_local0:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
	f21_local0._controllerIndex = f21_arg0._controllerIndex
	f21_local0._currentState = TEXTCHAT.DefaultMinimizedState
	f21_local0._currentStyle = TEXTCHAT.IsInGameStyle() and TEXTCHAT.Styles.INGAME or TEXTCHAT.Styles.MENU
	f21_arg0:addElement( f21_arg0.chat )
end

LUI.TextChat.ClearLayer = function ( f20_arg0 )
	if f20_arg0.scoreboardModel then
		f20_arg0:UnsubscribeFromModel( f20_arg0.scoreboardModel )
		f20_arg0.scoreboardModel = nil
	end
	if f20_arg0.chat then
		f20_arg0.chat:closeTree()
		f20_arg0.chat = nil
	end
end

LUI.TextChat.GetLayer = function ()
	local f19_local0 = Engine[0xEE6F69FEA944B13]()
	return f19_local0.textChat
end

LUI.TextChat.SetupMenuForNoChat = function ( f18_arg0 )
	f18_arg0.chatMinimizedDisplayState = TEXTCHAT.DisplayStates.NONE
end

LUI.TextChat.SetupMenuForNoLine = function ( f17_arg0 )
	LUI.TextChat.SetupMenuForSingleLine( f17_arg0 )
end

LUI.TextChat.SetupMenuForSingleLine = function ( f16_arg0 )
	f16_arg0.chatMinimizedDisplayState = TEXTCHAT.DisplayStates.SINGLE_LINE
end

LUI.TextChat.Frame = function ( f14_arg0 )
	if not f14_arg0.chat then
		
	else
		
	end
	local f14_local0 = false
	local f14_local1 = LUI.FlowManager.GetVisibleMenu()
	if not f14_local1 and Engine[0x12586A3F4FB490E]() then
		f14_local0 = true
	elseif f14_local1 then
		if not f14_local0 then
			f14_local0 = not TEXTCHAT.IsChatVisibleInMenu( f14_local1 )
		end
	else
		local f14_local2 = Engine[0xEE6F69FEA944B13]()
		assert( f14_local2 )
		local f14_local3 = f14_local2.hudManager
		if f14_local3 then
			if not f14_arg0.scoreboardModel and Engine[0x9258F49F515F97B]() and DataSources.inGame.HUD.isScoreboardOpen then
				f14_arg0.scoreboardModel = f14_arg0:SubscribeToModel( DataSources.inGame.HUD.isScoreboardOpen:GetModel( f14_arg0._controllerIndex ), function ( f15_arg0 )
					f14_arg0.chat._hiddenDueToOverlay = DataModel[0x614D394F6F9A18D]( f15_arg0 )
				end, true )
			end
			if f14_local0 or not LUI.HudManager.ShouldBeVisible( f14_local3 ) then
				if LUI.HUD.IsChatAllowedInHUD() then
					f14_local0 = LUI.IsLastInputGamepad( f14_arg0._controllerIndex )
				else
					f14_local0 = true
				end
			else
				f14_local0 = false
			end
		end
	end
	if f14_arg0.chat.UpdateVisibilityState and (not TEXTCHAT.IsCurrentStateTyping( f14_arg0.chat ) or TEXTCHAT.IsCurrentStateNoInputs( f14_arg0.chat ) ~= f14_local0 or TEXTCHAT.ShouldChangeStyle( f14_arg0.chat )) then
		f14_arg0.chat:UpdateVisibilityState()
	end
	f14_arg0.chat.TextChatBody.TextChatEntriesList:CheckHideMessages()
	if Lobby[0x63537242F1D48FF]() and not Dvar[0x9E5BE3B4BBA4E0E]( 0xB1FD3A1B7FBD56D ) then
		Dvar[0x8EA06EEDB58D872]( 0xB1FD3A1B7FBD56D, true )
		TEXTCHAT.DisplayIntroMessage( f14_arg0 )
	end
end

LUI.TextChat.ShouldBeVisible = function ( f13_arg0 )
	local f13_local0 = f13_arg0._controllerIndex
	if not TEXTCHAT.IsTextChatAllowedNotRestricted( f13_local0 ) then
		return false
	elseif Engine[0xFB1B6E36ABE59B8]() and LUI.IsLastInputGamepad( f13_local0 ) and not Dvar[0x9E5BE3B4BBA4E0E]( 0x6D568A178558B1E ) then
		return false
	elseif IsCodcaster() or BuiltInEsports[0x9894ED459E76619]() then
		return false
	elseif CONDITIONS.InGame() and CONDITIONS.IsS5Reveal() and Game[0x28624DEF6F708C8]( f13_local0, "ui_reveal_mute_players" ) then
		return false
	end
	local f13_local1 = true
	local f13_local2 = Engine[0xEE6F69FEA944B13]()
	if f13_local2 and f13_local2.flowManager then
		if not LUI.FlowManager.IsStackEmpty() then
			return false
		end
		f13_local1 = not LUI.FlowManager.AreMainMenuFencedOut( f13_local2.flowManager )
	end
	if Engine[0x12586A3F4FB490E]() then
		local f13_local3 = Engine[0x45B054C920178E9]()
		if f13_local3 ~= f13_local0 then
			f13_local0 = f13_local3
		end
	elseif Engine[0x45B054C920178E9]() ~= f13_local0 then
		return false
	end
	return f13_local1
end

LUI.TextChat.TrapsInput = function ( f12_arg0, f12_arg1 )
	if not f12_arg0.chat then
		return false
	end
	local f12_local0, f12_local1 = LUI.TextChat.InputsTrappedOrInteresting( f12_arg0, f12_arg1 )
	local f12_local2
	if not f12_local0 then
		f12_local2 = f12_local0
	else
		f12_local2 = f12_local1
	end
	return f12_local2
end

LUI.TextChat.InputsTrappedOrInteresting = function ( f11_arg0, f11_arg1 )
	if Engine[0x74423E76DECE3E4]() then
		return false, false
	end
	local f11_local0 = false
	local f11_local1 = false
	if TEXTCHAT.IsCurrentStateTyping( f11_arg0.chat ) then
		f11_local0 = true
	elseif not TEXTCHAT.IsCurrentStateNoInputs( f11_arg0.chat ) then
		if f11_arg0.chat._currentStyle ~= TEXTCHAT.Styles.INGAME then
			f11_local1 = f11_arg1.button == "select"
		end
		if LUI.IsLastInputKeyboardMouse( f11_arg1.controller ) and not f11_local1 then
			if f11_arg1.button ~= "open_chat" and f11_arg1.button ~= "open_match_chat" and f11_arg1.button ~= "open_team_chat" and f11_arg1.button ~= "open_party_chat" then
				f11_local1 = false
			else
				f11_local1 = true
			end
		end
	end
	return f11_local0, f11_local1
end

local f0_local0 = function ( f10_arg0, f10_arg1 )
	if TEXTCHAT.IsCurrentStateNoInputs( f10_arg0 ) or not LUI.IsLastInputGamepad( f10_arg1.controller ) then
		return false
	end
	local f10_local0 = TEXTCHAT.IsCurrentStateOpened( f10_arg0 )
	if not f10_local0 and f10_arg0._currentStyle == TEXTCHAT.Styles.INGAME then
		return false
	elseif TEXTCHAT.IsChatInactive( f10_arg0 ) and f10_local0 then
		if f10_arg1.button == "secondary" then
			TEXTCHAT.SetExpandedInactiveState( f10_arg0, false )
		else
			return true
		end
	end
	local f10_local1 = f10_local0
	if f10_local0 and f10_arg1.down then
		if f10_arg1.button == "primary" and not Engine[0x575E9C5B9AAB6F4]() then
			f10_arg0.TextChatFooter.InputTextButton:openVirtualKeyboard( f10_arg1 )
		elseif f10_arg1.button == "secondary" or f10_arg1.button == "select" then
			f10_arg0.TextChatFooter.InputTextButton.TextEditOff()
			TEXTCHAT.SetTypingState( f10_arg0, false )
			Engine[0xC4146BA76D0F982]( SOUND_SETS.spMainMenu.detailClose )
		elseif f10_arg1.button == "shoulderr" then
			TEXTCHAT.SelectNextValidChannel( f10_arg0 )
		elseif f10_arg1.button == "shoulderl" then
			TEXTCHAT.SelectPreviousValidChannel( f10_arg0 )
		elseif f10_arg1.button == "rs_up" then
			f10_arg0.TextChatBody:processEvent( f10_arg1 )
		elseif f10_arg1.button == "rs_down" then
			f10_arg0.TextChatBody:processEvent( f10_arg1 )
		elseif f10_arg1.button == "up" then
			f10_arg0.TextChatBody:processEvent( f10_arg1 )
		elseif f10_arg1.button == "down" then
			f10_arg0.TextChatBody:processEvent( f10_arg1 )
		end
	end
	return f10_local1
end

local f0_local1 = function ( f9_arg0, f9_arg1 )
	if f9_arg1.button == "open_chat" or f9_arg1.button == "kp_enter" then
		if TEXTCHAT.IsChatTypeDisabled( f9_arg0, f9_arg0._currentLobbyChatType ) then
			TEXTCHAT.SelectNextValidChannel( f9_arg0 )
		end
		ChatChannel[0xDE0B3EA8DDC5A8D]( f9_arg0._controllerIndex, f9_arg0._chatID )
		TEXTCHAT.UpdateLastActiveLobbyChatType( f9_arg0._controllerIndex, f9_arg0._currentLobbyChatType )
		return LUI.TextChat.StartEditing( f9_arg1.controller )
	elseif f9_arg1.button == "open_match_chat" then
		if not TEXTCHAT.TryToChangeChannel( f9_arg0, Enum[0xEBC6725912C9693][0x241689C6BFC80DB] ) then
			
		else
			
		end
		return LUI.TextChat.StartEditing( f9_arg1.controller )
	elseif f9_arg1.button == "open_team_chat" then
		if not TEXTCHAT.TryToChangeChannel( f9_arg0, Enum[0xEBC6725912C9693][0xDDDB40E94530E30] ) then
			
		else
			
		end
		return LUI.TextChat.StartEditing( f9_arg1.controller )
	elseif f9_arg1.button == "open_party_chat" then
		if not TEXTCHAT.TryToChangeChannel( f9_arg0, Enum[0xEBC6725912C9693][0x7DBC6C7E698D90F] ) then
			
		else
			
		end
		return LUI.TextChat.StartEditing( f9_arg1.controller )
	elseif f9_arg1.button == "open_clan_chat" then
		if not TEXTCHAT.TryToChangeChannel( f9_arg0, Enum[0xEBC6725912C9693][0x3BC4679E96194E9] ) then
			
		else
			
		end
		return LUI.TextChat.StartEditing( f9_arg1.controller )
	elseif f9_arg1.key == "UPARROW" or f9_arg1.key == "DOWNARROW" then
		local f9_local0 = TEXTCHAT.IsCurrentStateOpened( f9_arg0 )
		if f9_local0 and f9_arg0.TextChatFooter.InputTextButton.TextChatAutocompleteListContainer and not f9_arg0.TextChatFooter.InputTextButton.TextChatAutocompleteListContainer:processEvent( f9_arg1 ) then
			f9_arg0.TextChatFooter.InputTextButton.TextChatAutocompleteListContainer:processEvent( {
				name = "gain_focus",
				controllerIndex = f9_arg1.controller
			} )
		end
		return f9_local0
	elseif f9_arg1.key == "MWHEELUP" or f9_arg1.key == "MWHEELDOWN" then
		local f9_local0 = TEXTCHAT.IsCurrentStateOpened( f9_arg0 )
		if f9_local0 then
			f9_arg0.TextChatBody:processEvent( f9_arg1 )
		end
		return f9_local0
	elseif f9_arg1.button == "secondary" and TEXTCHAT.IsCurrentExpandedInactive( f9_arg0 ) and TEXTCHAT.IsChatInactive( f9_arg0 ) then
		TEXTCHAT.SetExpandedInactiveState( f9_arg0, false )
		return true
	elseif not TEXTCHAT.IsInGameStyle() and TEXTCHAT.IsCurrentExpandedInactive( f9_arg0 ) and TEXTCHAT.IsChatInactive( f9_arg0 ) then
		return true
	else
		
	end
end

LUI.TextChat.processEvent = function ( f8_arg0, f8_arg1 )
	if f8_arg0.chat then
		if f8_arg1.name == "gamepad_button" then
			if f8_arg1.controller == f8_arg0._controllerIndex then
				if f8_arg1.qualifier == "gamepad" or f8_arg1.qualifier == "dpad" then
					return f0_local0( f8_arg0.chat, f8_arg1 )
				elseif f8_arg1.down and f8_arg1.qualifier == "keyboard" and not TEXTCHAT.IsCurrentStateNoInputs( f8_arg0.chat ) then
					return f0_local0( f8_arg0.chat, f8_arg1 )
				end
			elseif TEXTCHAT.IsCurrentStateOpened( f8_arg0.chat ) then
				return true
			end
		elseif f8_arg1.name == "pause" and TEXTCHAT.IsCurrentExpandedInactive( f8_arg0.chat ) then
			TEXTCHAT.SetExpandedInactiveState( f8_arg0.chat, false )
			return true
		else
			return LUI.TextChat.super.processEvent( f8_arg0, f8_arg1 )
		end
	else
		return false
	end
end

LUI.TextChat.StartEditing = function ( f7_arg0 )
	local f7_local0 = TEXTCHAT.GetChat()
	if not f7_local0 or CONDITIONS.IsMobileTextChatEnabled() then
		return false
	elseif TEXTCHAT.IsChatInactive( f7_local0 ) then
		TEXTCHAT.SetExpandedInactiveState( f7_local0, not TEXTCHAT.IsCurrentExpandedInactive( f7_local0 ) )
		return true
	else
		return f7_local0.TextChatFooter.InputTextButton:TryStartEditing( {
			controller = f7_arg0
		} )
	end
end

LUI.TextChat.RefreshChatState = function ()
	local f6_local0 = TEXTCHAT.GetChat()
	if f6_local0 then
		f6_local0:UpdateVisibilityState()
	end
end

LUI.TextChat.SetupLobbyChat = function ( f1_arg0 )
	f1_arg0._allMessagesByType = {}
	f1_arg0._lobbyChatIDs = {}
	f1_arg0._lobbyChatIDs[Enum[0xEBC6725912C9693][0x241689C6BFC80DB]] = Dvar[0x9E5BE3B4BBA4E0E]( 0xE653650E2F29038 ) and ChatChannel[0x92B8CF8FA5B2B9]( f1_arg0._controllerIndex ) or TEXTCHAT.INVALID_CHAT_ID
	f1_arg0._lobbyChatIDs[Enum[0xEBC6725912C9693][0x7DBC6C7E698D90F]] = ChatChannel[0xBAE6C9991A144BD]( f1_arg0._controllerIndex )
	for f1_local0 = Enum[0xEBC6725912C9693][0x3BC4679E96194E9], Enum[0xEBC6725912C9693][0xBB8481C813E8268], 1 do
		if (f1_local0 ~= Enum[0xEBC6725912C9693][0x241689C6BFC80DB] or Dvar[0x9E5BE3B4BBA4E0E]( 0xE653650E2F29038 )) and f1_arg0._lobbyChatIDs[f1_local0] == TEXTCHAT.INVALID_CHAT_ID then
			f1_arg0._chatInactive = true
		end
	end
	for f1_local0 = Enum[0xEBC6725912C9693][0x3BC4679E96194E9], Enum[0xEBC6725912C9693][0xBB8481C813E8268], 1 do
		local f1_local3 = f1_arg0._lobbyChatIDs[f1_local0]
		if f1_local3 and f1_local3 ~= TEXTCHAT.INVALID_CHAT_ID and TEXTCHAT.ChatChannels[f1_local0] then
			TEXTCHAT.ChatChannels[f1_local0].id = f1_local3
		end
	end
	if TEXTCHAT.LastActiveLobbyChatTypeIsValid( f1_arg0._controllerIndex, f1_arg0 ) then
		f1_arg0._currentLobbyChatType = DataSources.alwaysLoaded.textChat.lastActiveLobbyChatType:GetValue( f1_arg0._controllerIndex )
	else
		f1_arg0._currentLobbyChatType = TEXTCHAT.LobbyChatTypes.Lobby
	end
	if f1_arg0._currentLobbyChatType == TEXTCHAT.LobbyChatTypes.Team then
		f1_local0 = ChatChannel[0x423971C74C19F74]( f1_arg0._controllerIndex )
		if f1_local0 ~= TEXTCHAT.INVALID_CHAT_ID then
			f1_arg0._chatID = f1_local0
		else
			f1_arg0._currentLobbyChatType = TEXTCHAT.LobbyChatTypes.Lobby
			f1_arg0._chatID = f1_arg0._lobbyChatIDs[f1_arg0._currentLobbyChatType]
		end
	elseif f1_arg0._currentLobbyChatType == TEXTCHAT.LobbyChatTypes.Squad then
		local f1_local0 = ChatChannel[0x71B4064B78B5687]( f1_arg0._controllerIndex )
		if f1_local0 ~= TEXTCHAT.INVALID_CHAT_ID then
			f1_arg0._chatID = f1_local0
		else
			f1_arg0._currentLobbyChatType = TEXTCHAT.LobbyChatTypes.Lobby
			f1_arg0._chatID = f1_arg0._lobbyChatIDs[f1_arg0._currentLobbyChatType]
		end
	else
		f1_arg0._chatID = f1_arg0._lobbyChatIDs[f1_arg0._currentLobbyChatType]
	end
	if f1_arg0._chatID then
		ChatChannel[0xDE0B3EA8DDC5A8D]( f1_arg0._controllerIndex, f1_arg0._chatID )
		TEXTCHAT.UpdateLastActiveLobbyChatType( f1_arg0._controllerIndex, f1_arg0._currentLobbyChatType )
	end
	if TEXTCHAT.IsChatTypeDisabled( f1_arg0, f1_arg0._currentLobbyChatType ) then
		TEXTCHAT.SelectNextValidChannel( f1_arg0 )
	end
	if not CONDITIONS.IsMobileTextChatEnabled() then
		f1_arg0:SetChannelLabelByType( f1_arg0._currentLobbyChatType, nil )
	end
	local f1_local1 = TEXTCHAT.SortLobbyMessages( f1_arg0, f1_arg0._controllerIndex, f1_arg0._ourID, f1_arg0._allPlayersData, f1_arg0._allPlatformFriendsData, f1_arg0._allMessagesByType, TEXTCHAT.FetchAllLobbyMessages( f1_arg0, f1_arg0._controllerIndex, f1_arg0._lobbyChatIDs, f1_arg0._chatID ) )
	for f1_local2 = 1, #f1_local1, 1 do
		local f1_local5 = TEXTCHAT.MakeMessageDataFromTable( f1_arg0, f1_local1[f1_local2] )
		if TEXTCHAT.CanDisplayMessagefromSender( f1_local5 ) then
			table.insert( f1_arg0._allMessages, f1_local5 )
			TEXTCHAT.AddMessageToList( f1_arg0:DynamicList(), f1_local2, f1_local5, 0, true )
		end
	end
	f1_arg0:SetChannelLabelByType( f1_arg0._currentLobbyChatType, nil )
	f1_arg0:addEventHandler( "chat_message_received", function ( f4_arg0, f4_arg1 )
		return TEXTCHAT.ReceiveChatMessage( f4_arg0, f4_arg1, f4_arg0._controllerIndex, f4_arg1.channelId, f4_arg1.channelId, f4_arg1.id, function ( f5_arg0 )
			local f5_local0 = f5_arg0._allMessagesByType[f4_arg0.channelType]
			if f5_local0 == nil then
				f5_local0 = {}
				f5_arg0._allMessagesByType[f4_arg0.channelType] = f5_local0
			end
			local f5_local1 = #f5_local0
			if f4_arg0.id ~= (0 and f5_local0[#f5_local0].id or TEXTCHAT.INVALID_MESSAGE_ID) then
				local f5_local2 = TEXTCHAT.MakeMessageDataFromTable( f5_arg0, f4_arg0 )
				if not TEXTCHAT.CanDisplayMessagefromSender( f5_local2 ) then
					return false
				end
				local f5_local3 = TEXTCHAT.GetMessageFadeOutTimeInMs()
				if not Engine[0x7B17D94988FD5D0]( "inGameTextChatEnabled", f5_arg0._controllerIndex ) then
					if f5_arg0.lastMessageStartFadeTime and f5_arg0.lastMessageStartFadeTime > Engine[0x6991337AE950F99]() then
						f5_local3 = f5_arg0.lastMessageStartFadeTime
					else
						f5_local3 = -1
					end
				end
				f5_local2.startFadeTime = f5_local3
				TEXTCHAT.ApplyFormatAndColor( f5_arg0, f4_arg0.controllerIndex, f5_arg0._ourID, f5_arg0._allPlayersData, f5_arg0._allPlatformFriendsData, f5_local2, f4_arg0.channelType )
				if f4_arg0.channelType == Enum[0xEBC6725912C9693][0x7C61CC549527A1] then
					if Engine[0x73231DEDA97B69A]( f4_arg0.senderId ) and not Dvar[0x9E5BE3B4BBA4E0E]( 0x8F27ECC2940A47C ) then
						return false
					end
					local f5_local4 = Engine[0x73231DEDA97B69A]( f4_arg0.senderId )
					local f5_local5
					if f5_local4 then
						f5_local5 = f4_arg0.platformId
						if not f5_local5 then
						
						else
							local f5_local6 = ChatChannel[0xC2152F6200BCBD5]( f4_arg0.controllerIndex, f5_local5, f5_local4 )
							local f5_local7
							if not LUI.StringIsNilOrEmpty( f4_arg0.senderUsername ) then
								f5_local7 = f4_arg0.senderUsername
								if not f5_local7 then
								
								else
									if not TEXTCHAT.PrivateChatChannels[f5_local6] then
										TEXTCHAT.PrivateChatChannels[f5_local6] = {
											id = f5_local6,
											name = f5_local7
										}
									else
										TEXTCHAT.PrivateChatChannels[f5_local6].name = f5_local7
									end
									f5_arg0._replyTargetChatId = f4_arg0.channelId
								end
							end
							f5_local7 = f4_arg0.platformGamertag or ""
						end
					end
					f5_local5 = f4_arg0.senderId
				end
				if TEXTCHAT.IsTextChatOptionEnabled( f5_arg0._controllerIndex ) and CONDITIONS.IsTextChatEnabled( f5_arg0._controllerIndex ) then
					table.insert( f5_arg0._allMessages, f5_local2 )
					TEXTCHAT.AddMessageToList( f5_arg0:DynamicList(), 0, f5_local2, 0, true )
				end
				if TEXTCHAT.IsCurrentStateOpened( f5_arg0 ) then
					local f5_local4 = f5_arg0:DynamicList()
					if f5_local4:IsLastItemFocused() then
					
					else
						return true, f5_local2
					end
				end
				f5_arg0.TextChatBody.TextChatEntriesList:ScrollListToEnd()
			else
				return false
			end
		end
		 )
	end )
	f1_arg0:addEventHandler( "chat_message_sent", function ( f3_arg0, f3_arg1 )
		local f3_local0 = TEXTCHAT.MakeMessageDataFromTable( f3_arg0, f3_arg1 )
		TEXTCHAT.ApplyFormatAndColor( f3_arg0, f3_arg0._controllerIndex, f3_arg0._ourID, f3_arg0._allPlayersData, f3_arg0._allPlatformFriendsData, f3_local0, f3_local0.chatType )
		f3_arg0.lastMessageStartFadeTime = TEXTCHAT.GetMessageFadeOutTimeInMs()
		f3_local0.startFadeTime = f3_arg0.lastMessageStartFadeTime
		table.insert( f3_arg0._allMessages, f3_local0 )
		TEXTCHAT.AddMessageToList( f3_arg0:DynamicList(), 0, f3_local0, 0, true )
		if f3_arg1.channelType == Enum[0xEBC6725912C9693][0x7C61CC549527A1] then
			f3_arg0._replyTargetChatId = f3_arg1.channelId
		end
		if not f3_arg0._allMessagesByType[f3_local0.chatType] then
			f3_arg0._allMessagesByType[f3_local0.chatType] = {}
		end
		table.insert( f3_arg0._allMessagesByType[f3_local0.chatType], f3_local0 )
		f3_arg0.TextChatBody.TextChatEntriesList:ScrollListToEnd()
		if f3_local0.isMyPlayer and not CONDITIONS.InFrontend() then
			local f3_local1 = METRICS.GetTextChatMessageData( f3_arg0._controllerIndex, f3_arg1, f3_local0 )
			if f3_local1 then
				METRICS.TextChatUsageSendDLogEvent( f3_arg0._controllerIndex, f3_local1 )
			end
		end
		return true
	end )
	f1_arg0:addEventHandler( "text_channel_recovered", function ( f2_arg0, f2_arg1 )
		if f2_arg1.recoverySuccess then
			f1_arg0._lobbyChatIDs[f2_arg1.chatType] = f2_arg1.chatID
			TEXTCHAT.ChatChannels[f2_arg1.chatType].id = f2_arg1.chatID
			f1_arg0._chatID = f1_arg0._lobbyChatIDs[f1_arg0._currentLobbyChatType]
		else
			f1_arg0._chatInactive = true
		end
	end )
end

