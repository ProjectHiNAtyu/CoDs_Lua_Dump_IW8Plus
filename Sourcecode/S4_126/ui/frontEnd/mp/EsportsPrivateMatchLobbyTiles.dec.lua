-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
module( ..., package.seeall )
require( "ui.frontEnd.LobbyMembersHeader" )
require( "ui.frontEnd.mp.EsportsPrivateMatchLobbyHeader" )
require( "ui.frontEnd.mp.EsportsPrivateMatchLobbyList" )
local f0_local0 = _1080p * 620
local f0_local1 = _1080p * 27
local f0_local2 = 2
local f0_local3 = function ( f13_arg0, f13_arg1 )
	f13_arg0._maxTeamPlayersCount = {
		Team2 = 0,
		Codcaster = 0,
		Team1 = 0
	}
	f13_arg0.Team1Header.TeamName:setText( MP.GetTeamName( Teams.team1 ) )
	f13_arg0.Team2Header.TeamName:setText( MP.GetTeamName( Teams.team2 ) )
	f13_arg0.TeamCodcasterHeader.TeamName:setText( Engine[0xED84C33EC5F01EA]( "CODCASTER/CAPS" ) )
	f13_arg0:UpdateCodcasterListVisibility()
	f13_arg0:InitTeamList( f13_arg1 )
	f13_arg0:RefreshLobbyMemberGrid( f13_arg1 )
end

local f0_local4 = function ( f12_arg0, f12_arg1 )
	local f12_local0, f12_local1, f12_local2 = f12_arg0.PrivateMatchManagementLayer:GetAvailableSlots()
	f12_arg0:InitSourceDataTeam()
	for f12_local21, f12_local22 in pairs( f12_local0 ) do
		local f12_local23 = CountTableKeys( f12_local22 )
		for f12_local20 = 1, f12_local23, 1 do
			local f12_local6, f12_local7 = f12_arg0.PrivateMatchManagementLayer.GetEntryByValue( f12_local22, f12_local20 )
			if f12_local6 and f12_local7 then
				local f12_local8 = f12_arg0.PrivateMatchManagementLayer.GetPlayerData( f12_local6, f12_local2 )
				local f12_local9 = f12_local8.desiredTeam
				local f12_local10 = f12_arg0.PrivateMatchManagementLayer.GetNormalisedTeamIndex( f12_local9, f12_local1 )
				local f12_local11 = f12_arg0.PrivateMatchManagementLayer.currentTeamsLayout[f12_local10][f12_local6]
				local f12_local12
				if f12_local21 ~= f12_local1[1] and f12_local21 ~= f12_local1[2] then
					f12_local12 = false
				else
					f12_local12 = true
				end
				local f12_local13 = {
					level = f12_local8.rank + 1,
					baseRank = f12_local8.baseRank,
					seasonRank = f12_local8.seasonRank,
					rankIcon = PROGRESSION.GetRankIcon( f12_local8.rank ),
					name = f12_local8.gamertag,
					isPlayer = f12_local8.isMyPlayer,
					clientNum = f12_local8.memberIndex,
					teamIndex = f12_local9,
					xuid = f12_local8.xuid,
					isBot = f12_local8.isBot,
					isCodcaster = not f12_local12,
					difficulty = f12_local8.difficulty and f12_local8.difficulty or 0,
					normalisedTeam = f12_local10,
					playerTeamIndex = f12_local11
				}
				local f12_local14
				if f12_local12 then
					f12_local14 = "Team" .. f12_local21
					if not f12_local14 then
					
					else
						local f12_local15 = f12_arg0._sourceDataTeam[f12_local14]
						local f12_local16 = #f12_local15
						local f12_local17 = f12_local15[f12_local16]
						local f12_local18 = f12_local1[f12_local21]
						local f12_local19 = Teams.spectator
						f12_local18 = REG33 and Dvar[0x22EAAB59AA27E9B]( "#x3db5d3184a15d696d" ) - 1 or f12_arg0.PrivateMatchManagementLayer:GetTeamSize()
						f12_arg0._sourceDataTeam[f12_local14][f12_local16] = f12_local13
						if f12_local16 < f12_local18 then
							f12_arg0._sourceDataTeam[f12_local14][f12_local16 + 1] = f12_local17
						end
					end
				end
				f12_local14 = "Codcaster"
			end
		end
	end
	f12_local3 = f12_arg0.ListTeam1
	f12_local4 = f12_arg0.ListTeam2
	f12_local5 = f12_arg0.ListTeamCodcaster
	f12_local21 = f12_local3.List
	f12_local22 = f12_local4.List
	local f12_local23 = f12_local5.List
	local f12_local20 = f12_arg0._sourceDataTeam.Team1
	local f12_local24 = f12_arg0._sourceDataTeam.Team2
	local f12_local25 = f12_arg0._sourceDataTeam.Codcaster
	local f12_local7 = f12_arg0
	local f12_local26 = f12_arg0.RefreshTeamList
	local f12_local8 = f12_local21
	local f12_local9 = #f12_local20
	if f12_local20.isFreeSlot then
		
	else
		
	end
	f12_local26( f12_local7, f12_local8, f12_local9, true )
	f12_local7 = f12_arg0
	f12_local26 = f12_arg0.RefreshTeamList
	f12_local8 = f12_local22
	f12_local9 = #f12_local24
	if f12_local24.isFreeSlot then
		
	else
		
	end
	f12_local26( f12_local7, f12_local8, f12_local9, true )
	f12_local7 = f12_arg0
	f12_local26 = f12_arg0.RefreshTeamList
	f12_local8 = f12_local23
	f12_local9 = #f12_local25
	if f12_local25.isFreeSlot then
		
	else
		
	end
	f12_local26( f12_local7, f12_local8, f12_local9, true )
	f12_arg0:UpdateListScrollbarVisibility( f12_local3, f12_local21:GetMaxVisibleRows() )
	f12_arg0:UpdateListScrollbarVisibility( f12_local4, f12_local22:GetMaxVisibleRows() )
	f12_arg0:UpdateListScrollbarVisibility( f12_local5, f12_local23:GetMaxVisibleRows() )
	f12_arg0:UpdateCodcasterListVisibility()
end

local f0_local5 = function ( f10_arg0, f10_arg1, f10_arg2, f10_arg3 )
	return function ( f11_arg0, f11_arg1, f11_arg2 )
		assert( f10_arg0._sourceDataTeam )
		assert( f10_arg0._sourceDataTeam[f10_arg0] )
		assert( f10_arg0._sourceDataTeam[f10_arg0][f11_arg2 + 1] )
		local f11_local0 = f10_arg0._sourceDataTeam[f10_arg0][f11_arg2 + 1]
		local f11_local1 = f10_arg0._maxTeamPlayersCount[f10_arg0]
		local f11_local2 = f11_local0.isFreeSlot
		local f11_local3 = {}
		local f11_local4
		if f11_local2 then
			f11_local4 = f10_arg0
			if not f11_local4 then
			
			else
				f11_local3.x = f11_local4
				if f11_local2 then
					f11_local4 = f11_arg2 + 1
					if not f11_local4 then
					
					else
						f11_local3.y = f11_local4
						if f11_local1 < f11_arg2 + 1 then
							f11_local4 = "PlayerCard_"
							local f11_local5
							if f11_local2 then
								f11_local5 = "Empty_1"
							else
								f11_local5 = f11_local0.xuid
							end
							f11_arg0.id = f11_local4 .. f11_local5
							f11_arg0.CallingCard:setImage( RegisterMaterial( "ui_playercard_015" ), 0 )
							f11_arg0.Name:setText( "|CLAN| PlayerName", 0 )
							f11_arg0.Icon:setImage( RegisterMaterial( "icon_rank_53" ), 0 )
							f11_arg0.Level:setText( "99", 0 )
							f11_arg0:SetAnchorsAndPosition( 0, 1, 0, 1, 0, f10_arg0, 0, f10_arg0 )
							f11_arg0:SetStateLobby( f10_arg0.PrivateMatchManagementLayer, f11_local3, false )
							f10_arg0._maxTeamPlayersCount[f10_arg0] = f11_local1 + 1
						end
						if f11_local2 then
							f11_arg0:ClearBackgroundColor( false )
							f11_arg0:SetNoPlayer( Engine[0xED84C33EC5F01EA]( "MENU/AVAILABLE_SLOT" ) )
						else
							if f11_local0.teamIndex ~= Teams.spectator then
								f11_local4 = COLORBLIND_UTILS.GetCustomColorFromColorNameAndColorBlindType( f10_arg0, COLORBLIND_UTILS.CUSTOM_COLORS.ALLY, SWATCHES.highlight.vAllyHighlight )
								local f11_local5 = COLORBLIND_UTILS.GetCustomColorFromColorNameAndColorBlindType( f10_arg0, COLORBLIND_UTILS.CUSTOM_COLORS.ENEMY, SWATCHES.highlight.vEnemyHighlight )
								if CONDITIONS.IsTeamBasedGameType() then
									local f11_local6 = f11_arg0
									local f11_local7 = f11_arg0.SetBackgroundColor
									local f11_local8
									if f11_local0.normalisedTeam == 1 and not f11_local4 then
										f11_local8 = f11_local4
									else
										f11_local8 = f11_local5
									end
									f11_local7( f11_local6, f11_local8 )
								else
									local f11_local6 = f11_arg0
									local f11_local7 = f11_arg0.SetBackgroundColor
									local f11_local8
									if f11_local0.isPlayer and not f11_local4 then
										f11_local8 = f11_local4
									else
										f11_local8 = f11_local5
									end
									f11_local7( f11_local6, f11_local8 )
								end
							end
							f11_arg0:SetPlayerInfo( f10_arg0, f11_local0 )
						end
						f11_arg0:UpdateCoordinates( f11_local3 )
						f11_arg0:HidePlayerManagement()
					end
				end
				f11_local4 = f11_local0.playerTeamIndex
			end
		end
		f11_local4 = f11_local0.normalisedTeam
	end
	
end

local f0_local6 = function ( f9_arg0 )
	local f9_local0 = CODCASTER.LOBBY_LIST_SUPPORTED_GAME_TYPES[Dvar[0x54084D7CA2317BB]( "#x3a30c33efc8281eb1" )]
	local f9_local1 = f9_arg0._sourceDataTeam
	if f9_local1 then
		f9_local1 = 0 < #f9_arg0._sourceDataTeam.Codcaster
	end
	if f9_local0 and f9_local1 then
		f9_arg0.TeamCodcasterHeader.TeamName:SetVisibility( LUI.Visibility.Visible )
		f9_arg0.ListTeamCodcaster.List:SetVisibility( LUI.Visibility.Visible )
	else
		f9_arg0.TeamCodcasterHeader.TeamName:SetVisibility( LUI.Visibility.Hidden )
		f9_arg0.ListTeamCodcaster.List:SetVisibility( LUI.Visibility.Hidden )
	end
end

local f0_local7 = function ( f8_arg0, f8_arg1, f8_arg2 )
	local f8_local0 = f8_arg1.VerticalScrollbar
	local f8_local1 = f8_local0
	f8_local0 = f8_local0.SetVisibility
	local f8_local2
	if f8_arg2 < f8_arg1.List:GetNumChildren() then
		f8_local2 = LUI.Visibility.Visible
		if not f8_local2 then
		
		else
			f8_local0( f8_local1, f8_local2 )
		end
	end
	f8_local2 = LUI.Visibility.Hidden
end

local f0_local8 = function ( f7_arg0 )
	local f7_local0 = {
		isFreeSlot = true
	}
	f7_arg0._sourceDataTeam = {
		Team1 = {
			f7_local0
		},
		Team2 = {
			f7_local0
		},
		Codcaster = {
			f7_local0
		}
	}
end

local f0_local9 = function ( f6_arg0, f6_arg1 )
	f6_arg0.ListTeam1.List:SetNumChildren( 1 )
	f6_arg0.ListTeam1.List:SetRefreshChild( f0_local0( f6_arg0, f6_arg1, "Team1", 1 ) )
	f6_arg0.ListTeam2.List:SetNumChildren( 1 )
	f6_arg0.ListTeam2.List:SetRefreshChild( f0_local0( f6_arg0, f6_arg1, "Team2", 2 ) )
	f6_arg0.ListTeamCodcaster.List:SetNumChildren( 1 )
	f6_arg0.ListTeamCodcaster.List:SetRefreshChild( f0_local0( f6_arg0, f6_arg1, "Codcaster", 3 ) )
end

local f0_local10 = function ( f5_arg0, f5_arg1, f5_arg2, f5_arg3 )
	if f5_arg1:GetNumChildren() ~= f5_arg2 or f5_arg3 then
		f5_arg1:SetNumChildren( f5_arg2 )
		f5_arg1:RefreshContent()
	end
end

local f0_local11 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.SetLobbyMemberGrid = f0_local0
	f2_arg0.InitSourceDataTeam = f0_local0
	f2_arg0.InitTeamList = f0_local0
	f2_arg0.UpdateCodcasterListVisibility = f0_local0
	f2_arg0.UpdateListScrollbarVisibility = f0_local0
	f2_arg0.RefreshTeam = f0_local0
	f2_arg0.RefreshTeamList = f0_local0
	f2_arg0.RefreshLobbyMemberGrid = f0_local0
	f2_arg0.PrivateMatchManagementLayer = LUI.PrivateMatchManagementLayer:GetInstance()
	assert( f2_arg0.PrivateMatchManagementLayer, "PrivateMatchManagementLayer must be initialised!" )
	f0_local0( f2_arg0, f2_arg1 )
	f2_arg0:registerEventHandler( "team_update_required", function ( element, event )
		if CONDITIONS.IsArenaEvoGameType() then
			return 
		else
			f2_arg0( f2_arg0, event.controllerIndex )
		end
	end )
	local f2_local0 = LUI.DataSourceInGlobalModel.new( "frontEnd.lobby.isHostInManagementMode" )
	f2_arg0:SubscribeToModel( f2_local0:GetModel( f2_arg1 ), function ()
		f2_arg0.LobbyMembersHeader:ToggleChangeTeamPrompt( not f2_arg0:GetValue( f2_arg0 ) )
	end )
end

function EsportsPrivateMatchLobbyTiles( menu, controller )
	local self = LUI.UIVerticalStackedLayout.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 620 * _1080p, 0, 777 * _1080p )
	self.id = "EsportsPrivateMatchLobbyTiles"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local LobbyMembersHeader = nil
	
	LobbyMembersHeader = MenuBuilder.BuildRegisteredType( "LobbyMembersHeader", {
		controllerIndex = f1_local1
	} )
	LobbyMembersHeader.id = "LobbyMembersHeader"
	LobbyMembersHeader:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 620, 0, _1080p * 40 )
	self:addElement( LobbyMembersHeader )
	self.LobbyMembersHeader = LobbyMembersHeader
	
	local Team1Header = nil
	
	Team1Header = MenuBuilder.BuildRegisteredType( "EsportsPrivateMatchLobbyHeader", {
		controllerIndex = f1_local1
	} )
	Team1Header.id = "Team1Header"
	Team1Header:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 620, _1080p * 40, _1080p * 80 )
	self:addElement( Team1Header )
	self.Team1Header = Team1Header
	
	local ListTeam1 = nil
	
	ListTeam1 = MenuBuilder.BuildRegisteredType( "EsportsPrivateMatchLobbyList", {
		controllerIndex = f1_local1
	} )
	ListTeam1.id = "ListTeam1"
	ListTeam1:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 620, _1080p * 80, _1080p * 263 )
	self:addElement( ListTeam1 )
	self.ListTeam1 = ListTeam1
	
	local Space1 = nil
	
	Space1 = LUI.UIElement.new()
	Space1.id = "Space1"
	Space1:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 620, _1080p * 263, _1080p * 275 )
	self:addElement( Space1 )
	self.Space1 = Space1
	
	local Team2Header = nil
	
	Team2Header = MenuBuilder.BuildRegisteredType( "EsportsPrivateMatchLobbyHeader", {
		controllerIndex = f1_local1
	} )
	Team2Header.id = "Team2Header"
	Team2Header:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 620, _1080p * 275, _1080p * 315 )
	self:addElement( Team2Header )
	self.Team2Header = Team2Header
	
	local ListTeam2 = nil
	
	ListTeam2 = MenuBuilder.BuildRegisteredType( "EsportsPrivateMatchLobbyList", {
		controllerIndex = f1_local1
	} )
	ListTeam2.id = "ListTeam2"
	ListTeam2:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 620, _1080p * 315, _1080p * 498 )
	self:addElement( ListTeam2 )
	self.ListTeam2 = ListTeam2
	
	local Space2 = nil
	
	Space2 = LUI.UIElement.new()
	Space2.id = "Space2"
	Space2:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 620, _1080p * 498, _1080p * 510 )
	self:addElement( Space2 )
	self.Space2 = Space2
	
	local TeamCodcasterHeader = nil
	
	TeamCodcasterHeader = MenuBuilder.BuildRegisteredType( "EsportsPrivateMatchLobbyHeader", {
		controllerIndex = f1_local1
	} )
	TeamCodcasterHeader.id = "TeamCodcasterHeader"
	TeamCodcasterHeader:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 620, _1080p * 510, _1080p * 550 )
	self:addElement( TeamCodcasterHeader )
	self.TeamCodcasterHeader = TeamCodcasterHeader
	
	local ListTeamCodcaster = nil
	
	ListTeamCodcaster = MenuBuilder.BuildRegisteredType( "EsportsPrivateMatchLobbyList", {
		controllerIndex = f1_local1
	} )
	ListTeamCodcaster.id = "ListTeamCodcaster"
	ListTeamCodcaster:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 620, _1080p * 550, _1080p * 733 )
	self:addElement( ListTeamCodcaster )
	self.ListTeamCodcaster = ListTeamCodcaster
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "EsportsPrivateMatchLobbyTiles", EsportsPrivateMatchLobbyTiles )
LockTable( _M )
