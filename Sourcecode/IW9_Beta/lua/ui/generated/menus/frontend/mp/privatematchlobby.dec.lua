-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
module( ..., package.seeall )
require( "ui.generated.widgets.frontend.menutitle" )
require( "ui.generated.widgets.frontend.mp.playmenu.menutab" )
require( "ui.generated.widgets.frontend.social.socialpartywidget" )
require( "ui.generated.widgets.frontend.lobby.lobbymembersfooter" )
require( "ui.generated.widgets.frontend.cp.cpcheckpointwidget" )
local f0_local0 = nil
local f0_local1 = function ( f26_arg0, f26_arg1 )
	return f0_local0( f26_arg0, f26_arg1 )
end

LUI.FlowManager.RequestSetStack( "PrivateMatchLobby", {
	{
		name = "MainLockoutMenu"
	},
	{
		name = "MainMenu"
	},
	{
		name = "MPMainMenu"
	}
} )
MenuBuilder.registerType( "CPPrivateMatchLobby", f0_local1 )
LUI.FlowManager.RequestSetStack( "CPPrivateMatchLobby", {
	{
		name = "MainLockoutMenu"
	},
	{
		name = "MainMenu"
	},
	{
		name = "CPMainMenu"
	}
} )
MenuBuilder.registerType( "PrivateTournamentLobby", function ( f25_arg0, f25_arg1 )
	f25_arg1.isTournament = true
	return f0_local0( f25_arg0, f25_arg1 )
end )
LUI.FlowManager.RequestSetStack( "PrivateTournamentLobby", {
	{
		name = "MainLockoutMenu"
	},
	{
		name = "MainMenu"
	},
	{
		name = "MPMainMenu"
	}
} )
local f0_local2 = "frontEnd.MP.privateLobby"
local f0_local3 = function ()
	local f24_local0 = MP_COMMON.IsMatchRulesCODCastingEnabled( true )
	CODCASTER.SetCodcastingEnabled( f24_local0 )
	Lobby[0x2AC4DDCF8B7CCCA]( f24_local0 )
end

local f0_local4 = function ()
	if CONDITIONS.IsCoreMultiplayer() then
		f0_local0()
	elseif CONDITIONS.IsThirdGameMode() then
		Dvar[0xE3CB005036E0C0F]( 0x3BD81F4A278E5DC, "none" )
	end
	Dvar[0x8EA06EEDB58D872]( 0x85EF1ED1D39D3A3, true )
end

LUI.FlowManager.RegisterStackPushBehaviour( "PrivateMatchLobby", f0_local4 )
LUI.FlowManager.RegisterStackPushBehaviour( "CPPrivateMatchLobby", f0_local4 )
LUI.FlowManager.RegisterStackPopBehaviour( "PrivateMatchLobby", function ()
	WipeGlobalModelsAtPath( f0_local0 )
	Lobby[0x2AC4DDCF8B7CCCA]( false )
	CODCASTER.SetCodcastingEnabled( false )
	PRIVATE_MATCH.RemoveBotsByGameSetup()
end )
local f0_local5 = function ( f20_arg0, f20_arg1 )
	return function ( f21_arg0, f21_arg1 )
		if 0 < Lobby[0x5C3F0A14700EFD9]() then
			Lobby[0x94C721C0A23A515]( 0 )
		end
		if Lobby[0x18BBD42C62BEAF8]( f20_arg0 ) then
			Lobby[0x502F273847E8B58]( f20_arg0 )
		end
		Lobby.LeaveCustomGameLobby()
		local f21_local0 = LUI.FlowManager.GetScopedData( f20_arg0 )
		if not f21_local0.isTournament then
			CODCASTER.SetCodcastingEnabled( false )
			MLG.SetUsingMLGRules( false )
		end
		if Lobby[0x867E2628CAA1981]() and Lobby[0xE9670E0E1EF3730]() then
			Lobby[0x2E0D4E2CD0FA6DE]()
		end
		LUI.FlowManager.RequestLeaveMenu( f20_arg0, true, true )
	end
	
end

local f0_local6 = function ( f16_arg0, f16_arg1 )
	local f16_local0 = LUI.FlowManager.GetScopedData( f16_arg0 )
	if GameType.ActiveIsTeamBased() == false then
		local f16_local1 = Lobby[0xBA6AFCEBEAF0DC8]( Lobby.BotTeams.Friendly )
		local f16_local2 = Lobby[0xC52F14B86FAE1C7]( Lobby.BotTeams.FFA )
		if f16_local0.FFANum == nil or f16_local0.FFADifficulty == nil or f16_local0.FFANum ~= f16_local2 or f16_local0.FFADifficulty ~= f16_local1 then
			f16_local0.FFANum = f16_local2
			f16_local0.FFADifficulty = f16_local1
			PRIVATE_MATCH.RemoveBotsByGameSetup()
			local f16_local3 = f16_arg0:Wait( 100 )
			f16_local3.onComplete = function ()
				PRIVATE_MATCH.AddBot( Lobby.BotTeams.FFA, f16_arg0, f16_arg0 )
			end
			
			return 
		end
	end
	local f16_local1 = Lobby[0xC52F14B86FAE1C7]( Lobby.BotTeams.Friendly )
	local f16_local2 = Lobby[0xBA6AFCEBEAF0DC8]( Lobby.BotTeams.Friendly )
	local f16_local3 = Lobby[0xC52F14B86FAE1C7]( Lobby.BotTeams.Enemy )
	local f16_local4 = Lobby[0xBA6AFCEBEAF0DC8]( Lobby.BotTeams.Enemy )
	if f16_local0.friendlyNum == nil or f16_local0.enemyNum == nil then
		f16_local0.friendlyNum = f16_local1
		f16_local0.friendlyDifficulty = f16_local2
		f16_local0.enemyNum = f16_local3
		f16_local0.enemyDifficulty = f16_local4
		PRIVATE_MATCH.RemoveBot( Lobby.BotTeams.Friendly )
		PRIVATE_MATCH.RemoveBot( Lobby.BotTeams.Enemy )
		PRIVATE_MATCH.RemoveBot( 201 )
		local f16_local5 = f16_arg0:Wait( 100 )
		f16_local5.onComplete = function ()
			PRIVATE_MATCH.AddBot( Lobby.BotTeams.Enemy, f16_arg0, f16_arg0 )
			PRIVATE_MATCH.AddBot( Lobby.BotTeams.Friendly, f16_arg0, f16_arg0 )
		end
		
		return 
	end
	local f16_local5 = false
	local f16_local6 = false
	if f16_local0.friendlyNum ~= f16_local1 or f16_local0.friendlyDifficulty ~= f16_local2 then
		f16_local0.friendlyNum = f16_local1
		f16_local0.friendlyDifficulty = f16_local2
		PRIVATE_MATCH.RemoveBot( Lobby.BotTeams.Friendly )
		PRIVATE_MATCH.RemoveBot( 201 )
		f16_local5 = true
	end
	if f16_local0.enemyNum ~= f16_local3 or f16_local0.enemyDifficulty ~= f16_local4 then
		f16_local0.enemyNum = f16_local3
		f16_local0.enemyDifficulty = f16_local4
		PRIVATE_MATCH.RemoveBot( Lobby.BotTeams.Enemy )
		PRIVATE_MATCH.RemoveBot( 201 )
		f16_local6 = true
	end
	local f16_local7 = f16_arg0:Wait( 100 )
	f16_local7.onComplete = function ()
		if f16_arg0 then
			PRIVATE_MATCH.AddBot( Lobby.BotTeams.Friendly, f16_arg0, f16_arg0 )
		end
		if f16_arg0 then
			PRIVATE_MATCH.AddBot( Lobby.BotTeams.Enemy, f16_arg0, f16_arg0 )
		end
	end
	
end

local f0_local7 = function ( f15_arg0, f15_arg1 )
	MP_COMMON.SetupParty( "Opening PrivateMatchMenu" )
	MP_COMMON.SetupPrivateMatchParty()
	Lobby[0x2043FF221ED6A77]( f15_arg0._isCoreMultiplayer and PartyUIRoot.MP_PRIVATE_MATCH or PartyUIRoot.CP_PRIVATE_MATCH )
	Engine[0x569F3C409C4E3CD]( CoD.PresenceContext.LOBBY )
	if Lobby[0x6957722EF74F5D2]() and CONDITIONS.IsThirdGameMode( f15_arg0 ) then
		MP_COMMON.StartPrivateMatchLobbyDsOptional( "cp" )
	elseif CONDITIONS.IsNewPrivateMatchFlowEnabled() and Lobby[0x6957722EF74F5D2]() then
		if Engine[0x2DA54CF5D6B7F02]() then
			MP_COMMON.StartPrivateMatchLobbyDsOptional( "mp" )
		else
			MP_COMMON.StartPrivateMatchLobbyDsRequired( "mp" )
		end
	end
end

local f0_local8 = function ( f14_arg0, f14_arg1 )
	if Game[0x6DD1B6FF7A0A975]( f14_arg1 ) == true then
		if isAliensSolo() then
			PostGameFanfare:start()
		elseif CONDITIONS.ShowAARScoreboardAfterPrivateMatch() then
			Lobby.OpenAfterActionReport( f14_arg1, false, Engine[0xCA085C21FCBD7CA]() )
		end
		Game[0x16DC23DB3DC4FD1]( f14_arg1 )
	end
end

local f0_local9 = function ( menu, controller )
	menu.bindButton = LUI.UIBindButton.new()
	menu.bindButton.id = "selfBindButton"
	menu:addElement( menu.bindButton )
	menu.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_primary",
		priority = 2,
		helper_text = Engine[0xED84C33EC5F01EA]( 0x7D9DC9E3291E103 )
	} )
	menu.HelperBar:AddButtonHelperTextToElement( menu, {
		kbm_only = true,
		priority = 3,
		side = "left",
		button_ref = "button_alt1",
		helper_text = Engine[0xED84C33EC5F01EA]( 0x80851662F92019E )
	} )
	menu.bindButton:addEventHandler( "button_alt2", function ( f13_arg0, f13_arg1 )
		FRIENDS.HandleSocial( f13_arg1.controller )
	end )
end

local f0_local10 = function ( f11_arg0, f11_arg1, f11_arg2 )
	Dvar[0x8EA06EEDB58D872]( 0x85EF1ED1D39D3A3, true )
	PRIVATE_MATCH.SetupPrivateMatchGameType( Lobby.MatchmakingGameType.GAME_TYPE_MULTIPLAYER )
	local f11_local0 = LUI.FlowManager.GetScopedData( f11_arg0 )
	if f11_arg2.isTournament then
		f11_local0.isTournament = true
	end
end

local f0_local11 = function ( f8_arg0, f8_arg1 )
	local f8_local0 = f8_arg1.controller
	if not f8_local0 then
		f8_local0 = Engine[0x45B054C920178E9]()
	end
	PRIVATE_MATCH.SetupPrivateMatchTabs( f8_arg0, f8_local0, {
		firstTabName = 0xFDB576AE7ACC4A9,
		firstTabWidget = "PrivateMatchLobbyPlayMenu",
		leaveMenuFunction = function ( f10_arg0, f10_arg1 )
			local f10_local0 = nil
			if Lobby.IsOurPrivatePartyHostInLobby() then
				f10_local0 = Engine[0xED84C33EC5F01EA]( 0x3770EE4D0EBEC14 )
			else
				f10_local0 = Engine[0xED84C33EC5F01EA]( 0x3704312575A17C7 )
			end
			LUI.FlowManager.RequestPopupMenu( f8_arg0, "PopupYesNo", true, f10_arg1.controller, false, {
				yesAction = f8_arg0( f8_arg0, f8_arg0 ),
				message = f10_local0,
				actionSFX = SOUND_SETS.popups.privateSelect,
				popupSFX = SOUND_SETS.popups.privatePopup
			} )
			return true
		end,
		callbackFunc = function ( f9_arg0 )
			local f9_local0 = f9_arg0 == 0
			local f9_local1 = f9_arg0 == 2
			if f9_local0 and f8_arg0._isCoreMultiplayer then
				f8_arg0.HelperBar:AddButtonHelperTextToElement( f8_arg0, {
					kbm_only = true,
					priority = 3,
					side = "left",
					button_ref = "button_alt1",
					helper_text = Engine[0xED84C33EC5F01EA]( 0x80851662F92019E )
				} )
			elseif not f9_local1 then
				f8_arg0.HelperBar:RemoveButtonHelperTextFromElement( f8_arg0, "button_alt1", "left" )
			end
		end
	} )
	local f8_local1 = LUI.FlowManager.GetScopedData( f8_arg0 )
	PRIVATE_MATCH.SetDefaultMatchRules( {
		isTournament = f8_local1.isTournament
	} )
	if CONDITIONS.IsThirdGameMode() then
		CP.ClearWaveLoadout( f8_local0 )
		CP.ClearAllPickupMunitions( f8_local0 )
	end
end

local f0_local12 = function ( f6_arg0 )
	local self = LUI.UITimer.new( {
		interval = 500,
		event = "check_dmz"
	} )
	f6_arg0:addElement( self )
	self:registerEventHandler( "check_dmz", function ()
		if not MatchRules[0x1A6D0B2E15DF8CF]() then
			return 
		end
		local f7_local0 = MatchRules[0x3A9F1F51625857F]( "subGametype" )
		if f7_local0 == "dmz" and not f6_arg0._execDMZCFG then
			Engine[0xB81A5136C5503E4]( "exec br_dmz_offline.cfg" )
			f6_arg0._execDMZCFG = true
		elseif f7_local0 ~= "dmz" and f6_arg0._execDMZCFG then
			f6_arg0._execDMZCFG = false
		end
	end )
end

local f0_local13 = function ( f3_arg0, f3_arg1, f3_arg2 )
	assert( f3_arg0.MenuTitle )
	assert( f3_arg0.Tabs )
	assert( f3_arg0.HelperBar )
	f3_arg0._isCoreMultiplayer = CONDITIONS.IsCoreMultiplayer()
	f3_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0x69B2C76FB14FD41 ), Game[0x6DD1B6FF7A0A975]( f3_arg1 ) == true )
	LUI.DeferredFence.Attach( f3_arg0, f3_arg1, "CLIENT_CONNECT", LUI.DeferredFence.Criticality.LOW, LUI.DeferredFence.BackOutMethod.NONE, function ( f5_arg0, f5_arg1 )
		if f5_arg1.fenceState == LUI.Fence.FenceObjectState.PASSING then
			MP_COMMON.SetupStreaming( f3_arg0, f3_arg0 )
			GUNSMITH.InitLoadoutBaseWeaponPartsAttachment( f3_arg0 )
		end
	end )
	f0_local0( f3_arg0, f3_arg1 )
	PRIVATE_MATCH.SetupPrivateMatchMusic( f3_arg0, f3_arg1 )
	f0_local0( f3_arg0, f3_arg1 )
	f0_local0( f3_arg0, f3_arg1 )
	f3_arg0:addEventHandler( "menu_create", f0_local0 )
	if f3_arg2.isTournament then
		local f3_local0 = LUI.FlowManager.GetScopedData( f3_arg0 )
		if not f3_local0.matchmakerSettings then
			f3_local0.matchmakerSettings = LUI.DeepCopy( Lobby.DEFAULT_PRIVATE_TOURNAMENT )
		end
	end
	if Engine[0x2DA54CF5D6B7F02]() then
		f0_local0( f3_arg0 )
	end
	Streaming[0xE493C1B436663F6]( true )
	Lobby.PreloadViewHandsForLocalPlayer( f3_arg1 )
	f3_arg0.MenuTitle:SetupBackButton( f3_arg1 )
	f3_arg0.Tabs:SetAlignment( LUI.Alignment.Center )
	local f3_local0 = LUI.DataSourceInGlobalModel.new( "frontEnd.lobby.isPrivateMatchLobbySetup" )
	f3_arg0:SubscribeToModel( f3_local0:GetModel( f3_arg1 ), function ( f4_arg0 )
		if DataModel[0x614D394F6F9A18D]( f4_arg0 ) then
			local f4_local0 = LUI.FlowManager.GetScopedData( f3_arg0 )
			if f4_local0.modeInfo then
				if not Dvar[0x9E5BE3B4BBA4E0E]( 0x8653010D584AA6E ) then
					LUI.Commands.GameSetup.SetupMode:Execute( f3_arg0, f4_local0.modeInfo.ref, f4_local0.modeInfo.category, true )
				else
					LUI.Commands.GameSetup.SetupMode:Execute( f3_arg0, GameType.BundleGetName( f4_local0.modeInfo.bundle ), GameType.BundleGetCategory( f4_local0.modeInfo.bundle ), true )
				end
			end
		end
	end )
end

MenuBuilder.registerType( "PrivateMatchLobby", function ( menu, controller )
	local self = LUI.UIHorizontalNavigator.new()
	self.id = "PrivateMatchLobby"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	f0_local0( self, f1_local1, controller )
	self.HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	self.HelperBar.id = "HelperBar"
	self.HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
	self.HelperBar:setPriority( 10 )
	self:addElement( self.HelperBar )
	local f1_local2 = self
	local MenuTitle = nil
	
	MenuTitle = MenuBuilder.BuildRegisteredType( "MenuTitle", {
		controllerIndex = f1_local1
	} )
	MenuTitle.id = "MenuTitle"
	MenuTitle.MenuTitle:setText( Engine[0xED84C33EC5F01EA]( 0x69B2C76FB14FD41 ), 0 )
	MenuTitle:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 80 )
	self:addElement( MenuTitle )
	self.MenuTitle = MenuTitle
	
	local Tabs = nil
	
	Tabs = LUI.TabManager.new( {
		spacing = 0,
		wrap = true,
		tabHeight = _1080p * 80,
		buildTab = function ()
			return MenuBuilder.BuildRegisteredType( "MenuTab", {
				controllerIndex = menu
			} )
		end,
		controllerIndex = f1_local1
	} )
	Tabs.id = "Tabs"
	Tabs:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -497, _1080p * 497, 0, _1080p * 80 )
	self:addElement( Tabs )
	self.Tabs = Tabs
	
	local PartyWidget = nil
	
	PartyWidget = MenuBuilder.BuildRegisteredType( "SocialPartyWidget", {
		controllerIndex = f1_local1
	} )
	PartyWidget.id = "PartyWidget"
	PartyWidget:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1224, _1080p * 1824, _1080p * 94, _1080p * 264 )
	self:addElement( PartyWidget )
	self.PartyWidget = PartyWidget
	
	local LobbyMembersFooter = nil
	
	LobbyMembersFooter = MenuBuilder.BuildRegisteredType( "LobbyMembersFooter", {
		controllerIndex = f1_local1
	} )
	LobbyMembersFooter.id = "LobbyMembersFooter"
	LobbyMembersFooter:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 150 )
	self:addElement( LobbyMembersFooter )
	self.LobbyMembersFooter = LobbyMembersFooter
	
	local f1_local7 = nil
	if CONDITIONS.IsCpRaidMode() then
		f1_local7 = MenuBuilder.BuildRegisteredType( "CPCheckpointWidget", {
			controllerIndex = f1_local1
		} )
		f1_local7.id = "CPCheckpointWidget"
		f1_local7:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 543, _1080p * 943, _1080p * 826, _1080p * 1026 )
		self:addElement( f1_local7 )
		self.CPCheckpointWidget = f1_local7
	end
	f0_local0( self, f1_local1, controller )
	return self
end )
LUI.FlowManager.RegisterStackPushBehaviour( "PrivateMatchLobby", f0_local4 )
LockTable( _M )
