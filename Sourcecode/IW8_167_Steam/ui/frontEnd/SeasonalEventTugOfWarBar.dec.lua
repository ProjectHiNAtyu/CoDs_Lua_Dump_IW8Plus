-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 17-11-2025 01:22
module( ..., package.seeall )
local f0_local0 = 50
local f0_local1 = function ( f3_arg0, f3_arg1, f3_arg2, f3_arg3 )
	local f3_local0 = 0.5
	local f3_local1 = 2 * math.max( f3_arg1, f3_arg2 )
	if 0 < f3_local1 then
		f3_local0 = 0.5 + (f3_arg1 - f3_arg2) / f3_local1
	end
	local f3_local2 = LUI.EASING.outQuadratic
	f3_arg0.ToWBar:SetProgress( f3_local0, f3_arg3, f3_local2 )
	local f3_local3, f3_local4, f3_local5, f3_local6 = f3_arg0.ToWBar:getLocalRect()
	local f3_local7 = math.abs( f3_local3 - f3_local5 )
	f3_arg0.EffectBar:SetLeft( f3_local7 * (f3_local0 - 1), f3_arg3, f3_local2 )
	f3_arg0.EffectBar:SetRight( f3_local7 * f3_local0, f3_arg3, f3_local2 )
	if f0_local0 < f3_arg3 then
		f3_arg0._leftVal = 0
		f3_arg0._rightVal = 0
		local f3_local8 = 0
		local _textUpdateTimer = LUI.UITimer.new( {
			event = "update_text_values",
			interval = f0_local0
		} )
		_textUpdateTimer.id = "towTextUpdater"
		if f3_arg0._textUpdateTimer then
			f3_arg0._textUpdateTimer:closeTree()
			f3_arg0._textUpdateTimer = nil
		end
		f3_arg0:addElement( _textUpdateTimer )
		f3_arg0._textUpdateTimer = _textUpdateTimer
		
		f3_arg0:registerEventHandler( "update_text_values", function ( element, event )
			f3_arg0 = f3_arg0 + f3_arg0
			element._leftVal = math.ceil( LUI.Lerp( element._leftVal, f3_arg0, f3_arg0 / f3_arg0 ) )
			element._rightVal = math.ceil( LUI.Lerp( element._rightVal, f3_arg0, f3_arg0 / f3_arg0 ) )
			element.LeftVal:setText( FormatLargeNumberForCurrentLanguage( element._leftVal ), 0 )
			element.RightVal:setText( FormatLargeNumberForCurrentLanguage( element._rightVal ), 0 )
			if element._leftVal == f3_arg0 and element._rightVal == f3_arg0 and element._textUpdateTimer then
				element._textUpdateTimer:closeTree()
				element._textUpdateTimer = nil
			end
		end )
	end
	f3_arg0._leftVal = f3_arg1
	f3_arg0._rightVal = f3_arg2
	f3_arg0.LeftVal:setText( FormatLargeNumberForCurrentLanguage( f3_arg1 ), 0 )
	f3_arg0.RightVal:setText( FormatLargeNumberForCurrentLanguage( f3_arg2 ), 0 )
end

local f0_local2 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.EffectBar:SetMask( f2_arg0.Mask )
	f2_arg0.Mask:SetAlpha( 1 )
	f2_arg0.SetValues = f0_local0
	f2_arg0:SetValues( 0, 0, 0 )
end

function SeasonalEventTugOfWarBar( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1200 * _1080p, 0, 315 * _1080p )
	self.id = "SeasonalEventTugOfWarBar"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local DarkBG = nil
	
	DarkBG = LUI.UIImage.new()
	DarkBG.id = "DarkBG"
	DarkBG:SetRGBFromTable( SWATCHES.genericMenu.blackBackground, 0 )
	DarkBG:SetAlpha( 0.2, 0 )
	DarkBG:setImage( RegisterMaterial( "hud_bkgd_glow" ), 0 )
	DarkBG:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 52, _1080p * 1150, _1080p * 104, _1080p * 216 )
	self:addElement( DarkBG )
	self.DarkBG = DarkBG
	
	local ToWBar = nil
	
	ToWBar = MenuBuilder.BuildRegisteredType( "MPChallengeProgressBar", {
		controllerIndex = f1_local1
	} )
	ToWBar.id = "ToWBar"
	ToWBar.Overlay:SetRGBFromTable( SWATCHES.EventPromos.HvVRed, 0 )
	ToWBar.Fill:SetRGBFromTable( SWATCHES.EventPromos.HvVBlue, 0 )
	ToWBar:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -400, _1080p * 400, _1080p * 20.5, _1080p * -19.5 )
	self:addElement( ToWBar )
	self.ToWBar = ToWBar
	
	local LeftVal = nil
	
	LeftVal = LUI.UIText.new()
	LeftVal.id = "LeftVal"
	LeftVal:setText( "", 0 )
	LeftVal:SetFont( FONTS.GetFont( FONTS.MainBold.File ) )
	LeftVal:SetWordWrap( false )
	LeftVal:SetAlignment( LUI.Alignment.Center )
	LeftVal:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 65, _1080p * 335, _1080p * 73, _1080p * 123 )
	self:addElement( LeftVal )
	self.LeftVal = LeftVal
	
	local RightVal = nil
	
	RightVal = LUI.UIText.new()
	RightVal.id = "RightVal"
	RightVal:setText( "", 0 )
	RightVal:SetFont( FONTS.GetFont( FONTS.MainBold.File ) )
	RightVal:SetWordWrap( false )
	RightVal:SetAlignment( LUI.Alignment.Center )
	RightVal:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 865, _1080p * 1135, _1080p * 73, _1080p * 123 )
	self:addElement( RightVal )
	self.RightVal = RightVal
	
	local MiddleIndicator = nil
	
	MiddleIndicator = LUI.UIImage.new()
	MiddleIndicator.id = "MiddleIndicator"
	MiddleIndicator:SetAlpha( 0.55, 0 )
	MiddleIndicator:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -1, _1080p * 1, _1080p * -25.5, _1080p * 25.5 )
	self:addElement( MiddleIndicator )
	self.MiddleIndicator = MiddleIndicator
	
	local EffectBar = nil
	
	EffectBar = LUI.UIImage.new()
	EffectBar.id = "EffectBar"
	EffectBar:setImage( RegisterMaterial( "ui_seasonal_event_hvv_bareffect" ), 0 )
	EffectBar:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -480, _1080p * 480, _1080p * -63.5, _1080p * 64.5 )
	self:addElement( EffectBar )
	self.EffectBar = EffectBar
	
	local Mask = nil
	
	Mask = LUI.UIImage.new()
	Mask.id = "Mask"
	Mask:setImage( RegisterMaterial( "wdg_large_mask" ), 0 )
	Mask:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 197, _1080p * 1003, _1080p * 77, _1080p * 239 )
	self:addElement( Mask )
	self.Mask = Mask
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "SeasonalEventTugOfWarBar", SeasonalEventTugOfWarBar )
LockTable( _M )
