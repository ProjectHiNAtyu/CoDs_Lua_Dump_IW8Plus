-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 17-11-2025 01:22
module( ..., package.seeall )
local f0_local0 = 200
local f0_local1 = {
	EQUIPPED_WIDGET = 30 * _1080p,
	QUALITY_WITH_TEXT = 32 * _1080p,
	SEASON_WITH_TEXT = 32 * _1080p,
	FLAVOR_TEXT = 22 * _1080p
}
local f0_local2 = function ( f8_arg0 )
	local f8_local0
	if f8_arg0 == nil or 0 >= f8_arg0 then
		f8_local0 = false
	else
		f8_local0 = true
	end
	return f8_local0
end

local f0_local3 = function ( f7_arg0 )
	local f7_local0 = LOOT.GetTypeForID( f7_arg0 )
	local f7_local1
	if f7_local0 ~= LOOT.itemTypes.WATCH and f7_local0 ~= LOOT.itemTypes.CHARM and f7_local0 ~= LOOT.itemTypes.STICKER and f7_local0 ~= LOOT.itemTypes.VEHICLE_CAMO then
		f7_local1 = false
	else
		f7_local1 = true
	end
	return f7_local1
end

local f0_local4 = function ( f6_arg0, f6_arg1 )
	f6_arg0.Name:setText( ToUpperCase( Engine.CBBHFCGDIC( f6_arg1.name ) ) )
	f6_arg0.QualityWithText:UpdateQualityText( f6_arg1.rarity )
	f6_arg0.SeasonWithText:UpdateSeasonText( f6_arg1.season )
	local f6_local0 = f6_arg0.EquippedWidget
	local f6_local1 = f6_local0
	f6_local0 = f6_local0.SetAlpha
	local f6_local2
	if f6_arg1.isSelected then
		f6_local2 = 1
	else
		f6_local2 = 0
	end
	f6_local0( f6_local1, f6_local2 )
	f6_local0 = f6_arg0.NewItemNotification
	f6_local1 = f6_local0
	f6_local0 = f6_local0.SetAlpha
	if f6_arg1.isNew and not f6_arg1.isSelected then
		f6_local2 = 1
	else
		f6_local2 = 0
	end
	f6_local0( f6_local1, f6_local2 )
	if f6_arg1.season then
		f6_local0 = 0 < f6_arg1.season
	end
	local f6_local3 = f6_arg0.Name:GetCurrentAnchorsAndPositions()
	f6_local3 = f6_local3.bottom
	f6_local1 = 10 * _1080p
	f6_arg0.EquippedWidget:SetAlpha( 0 )
	f6_arg0.NewItemNotification:SetAlpha( 0 )
	if f6_arg1.isSelected then
		f6_arg0.EquippedWidget:SetAlpha( 1, f0_local0 )
	elseif f6_arg1.isNew then
		f6_arg0.NewItemNotification:SetAlpha( 1, f0_local0 )
	end
	if f6_arg1.isSelected or f6_arg1.isNew then
		f6_local2 = LAYOUT.GetElementHeight( f6_arg0.EquippedWidget )
		local f6_local4
		if f0_local0( f6_local2 ) and not f6_local2 then
			f6_local4 = f6_local2
		else
			f6_local4 = f0_local0.EQUIPPED_WIDGET
		end
		f6_arg0.EquippedWidget:SetTop( f6_local3 + f6_local1, f0_local0 )
		f6_arg0.EquippedWidget:SetBottom( f6_local3 + f6_local1 + f6_local4, f0_local0 )
		f6_arg0.NewItemNotification:SetTop( f6_local3 + f6_local1, f0_local0 )
		f6_arg0.NewItemNotification:SetBottom( f6_local3 + f6_local1 + f6_local4, f0_local0 )
		f6_local3 = f6_local3 + f6_local4 + f6_local1
	end
	f6_local2 = LAYOUT.GetElementHeight( f6_arg0.QualityWithText )
	local f6_local4
	if f0_local0( f6_local2 ) and not f6_local2 then
		f6_local4 = f6_local2
	else
		f6_local4 = f0_local0.QUALITY_WITH_TEXT
	end
	local f6_local5 = f6_local3 + f6_local1
	f6_arg0.QualityWithText:SetTop( f6_local5, f0_local0 )
	local f6_local6 = f6_local5 + f6_local4
	f6_arg0.QualityWithText:SetBottom( f6_local6, f0_local0 )
	local f6_local7 = 0
	if f6_arg1.season and 0 < f6_arg1.season then
		local f6_local8 = LAYOUT.GetElementHeight( f6_arg0.SeasonWithText )
		if f0_local0( f6_local8 ) and not f6_local8 then
			f6_local7 = f6_local8
		else
			f6_local7 = f0_local0.SEASON_WITH_TEXT
		end
		f6_arg0.SeasonWithText:UpdateSeasonText( f6_arg1.season )
		f6_arg0.SeasonWithText:SetAlpha( 1, f0_local0 )
		local f6_local9 = f6_local6 + f6_local1
		local f6_local10 = f6_local9 + f6_local7
		f6_arg0.SeasonWithText:SetTop( f6_local9, f0_local0 )
		f6_arg0.SeasonWithText:SetBottom( f6_local10, f0_local0 )
		f6_local7 = f6_local7 + f6_local1
	else
		f6_arg0.SeasonWithText:SetAlpha( 0, 0 )
	end
	local f6_local8
	if f6_arg1.rarity ~= nil and -1 < f6_arg1.rarity and not f6_local4 then
		f6_local8 = f6_local4
	else
		f6_local8 = 0
	end
	f6_local3 = f6_local3 + f6_local8 + f6_local7 + f6_local1
	if f6_arg1.isRandom == true and f6_arg1.lootType == LOOT.itemTypes.WATCH then
		f6_arg1.flavorOverride = Engine.CBBHFCGDIC( "CUSTOMIZE/RANDOM_WATCH" )
	end
	if f6_arg1.ref and f6_arg1.ref ~= "default" and not f6_arg1.isRandom and f0_local0( f6_arg1.lootID ) then
		f6_local8, f6_local9 = nil
		local f6_local10 = LOOT.GetTypeForID( f6_arg1.lootID )
		if f6_arg1.flavorOverride and 0 < #f6_arg1.flavorOverride then
			f6_local8 = f6_arg1.flavorOverride
		else
			if f6_local10 == LOOT.itemTypes.VEHICLE_CAMO then
				f6_local9 = VEHICLE.GetFlavorText( f6_arg1.ref )
			else
				f6_local9 = f6_arg1.storeFlavor
			end
			f6_local8 = Engine.CBBHFCGDIC( f6_local9 )
		end
		if f6_local8 ~= f6_local9 then
			f6_arg0.FlavorText:SetAlpha( 0 )
			f6_arg0.FlavorText:SetAlpha( 1, f0_local0 )
			f6_arg0.FlavorText:setText( f6_local8 )
		else
			f6_arg0.FlavorText:SetAlpha( 1 )
		end
		local f6_local11 = LAYOUT.GetTextHeightWithWrapping( f6_arg0.FlavorText, f6_local8 )
		local f6_local12
		if f0_local0( f6_local11 ) and not f6_local11 then
			f6_local12 = f6_local11
		else
			f6_local12 = f0_local0.FLAVOR_TEXT
		end
		local f6_local13 = LAYOUT.GetElementHeight( f6_arg0.FlavorText )
		local f6_local14
		if f0_local0( f6_local13 ) and not f6_local13 then
			f6_local14 = f6_local13
		else
			f6_local14 = f0_local0.FLAVOR_TEXT
		end
		f6_arg0.FlavorText:SetTop( f6_local3 + f6_local1, f0_local0 )
		f6_arg0.FlavorText:SetBottom( f6_local14 + f6_local3 + f6_local1, f0_local0 )
		f6_local3 = f6_local3 + f6_local12 + f6_local1
	else
		f6_arg0.FlavorText:SetAlpha( 0 )
		f6_arg0.FlavorText:setText( "" )
	end
	f6_local8 = ""
	if f6_arg1.lootType == LOOT.itemTypes.WATCH then
		f6_local8 = "CAS/WATCH_PREVIEW_PROMPT"
	elseif f6_arg1.lootType == LOOT.itemTypes.CHARM then
		f6_local8 = "LUA_MENU/PREVIEW_CHARM_PROMPT"
	elseif f6_arg1.lootType == LOOT.itemTypes.STICKER then
		f6_local8 = "LUA_MENU/PREVIEW_STICKER_PROMPT"
	end
	f6_local8 = Engine.CBBHFCGDIC( f6_local8 )
	f6_arg0.PromptPreview:setText( f6_local8 )
	local f6_local9 = LAYOUT.GetTextHeightWithWrapping( f6_arg0.PromptPreview, f6_local8 )
	local f6_local10 = 25 * _1080p
	f6_local3 = f6_local3 + f6_local10
	f6_arg0.DoubleNotchedBacker:SetBottom( f6_local3, f0_local0 )
	f6_local3 = f6_local3 + f6_local10
	f6_arg0.PromptPreview:SetTop( f6_local3, f0_local0 )
	f6_arg0.PromptPreview:SetBottom( f6_local3 + f6_local9, f0_local0 )
end

local f0_local5 = function ( f5_arg0, f5_arg1 )
	f5_arg0._curDim = f5_arg1
end

local f0_local6 = function ( f4_arg0, f4_arg1, f4_arg2 )
	f4_arg0.SetupDetails = f0_local0
	f4_arg0.InitializeDimensions = f0_local0
	if CONDITIONS.IsMagmaGameMode() then
		ACTIONS.AnimateSequence( f4_arg0, "WZSetup" )
	end
end

function LootDetails( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 540 * _1080p, 0, 245 * _1080p )
	self.id = "LootDetails"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local DoubleNotchedBacker = nil
	
	DoubleNotchedBacker = MenuBuilder.BuildRegisteredType( "DoubleNotchedBacker", {
		controllerIndex = f1_local1
	} )
	DoubleNotchedBacker.id = "DoubleNotchedBacker"
	DoubleNotchedBacker:SetAlpha( 0.75, 0 )
	DoubleNotchedBacker.WZWipPromptBackground:setImage( RegisterMaterial( "ui_mp_wz_bkg_button_4" ), 0 )
	DoubleNotchedBacker:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 245 )
	self:addElement( DoubleNotchedBacker )
	self.DoubleNotchedBacker = DoubleNotchedBacker
	
	local Name = nil
	
	Name = LUI.UIStyledText.new()
	Name.id = "Name"
	Name:SetRGBFromTable( SWATCHES.genericMenu.mainTitle, 0 )
	Name:setText( "", 0 )
	Name:SetFont( FONTS.GetFont( FONTS.MainBold.File ) )
	Name:SetWordWrap( false )
	Name:SetAlignment( LUI.Alignment.Left )
	Name:SetAutoScrollStyle( LUI.UIStyledText.AutoScrollStyle.ScrollH )
	Name:SetStartupDelay( 2000 )
	Name:SetLineHoldTime( 400 )
	Name:SetAnimMoveTime( 2000 )
	Name:SetAnimMoveSpeed( 150 )
	Name:SetEndDelay( 2000 )
	Name:SetCrossfadeTime( 400 )
	Name:SetFadeInTime( 300 )
	Name:SetFadeOutTime( 300 )
	Name:SetMaxVisibleLines( 1 )
	Name:SetAnchorsAndPosition( 0, 0, 0, 1, _1080p * 32, _1080p * -32, _1080p * 16, _1080p * 66 )
	self:addElement( Name )
	self.Name = Name
	
	local SeasonWithText = nil
	
	SeasonWithText = MenuBuilder.BuildRegisteredType( "SeasonWithText", {
		controllerIndex = f1_local1
	} )
	SeasonWithText.id = "SeasonWithText"
	SeasonWithText:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 34, _1080p * 194, _1080p * 151, _1080p * 183 )
	self:addElement( SeasonWithText )
	self.SeasonWithText = SeasonWithText
	
	local QualityWithText = nil
	
	QualityWithText = MenuBuilder.BuildRegisteredType( "QualityWithText", {
		controllerIndex = f1_local1
	} )
	QualityWithText.id = "QualityWithText"
	QualityWithText:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 34, _1080p * 194, _1080p * 113, _1080p * 145 )
	self:addElement( QualityWithText )
	self.QualityWithText = QualityWithText
	
	local EquippedWidget = nil
	
	EquippedWidget = MenuBuilder.BuildRegisteredType( "EquippedWidget", {
		controllerIndex = f1_local1
	} )
	EquippedWidget.id = "EquippedWidget"
	EquippedWidget:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 34, _1080p * 170, _1080p * 77, _1080p * 107 )
	self:addElement( EquippedWidget )
	self.EquippedWidget = EquippedWidget
	
	local NewItemNotification = nil
	
	NewItemNotification = MenuBuilder.BuildRegisteredType( "NewItemNotification", {
		controllerIndex = f1_local1
	} )
	NewItemNotification.id = "NewItemNotification"
	NewItemNotification:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 34, _1080p * 112, _1080p * 77, _1080p * 107 )
	self:addElement( NewItemNotification )
	self.NewItemNotification = NewItemNotification
	
	local FlavorText = nil
	
	FlavorText = LUI.UIStyledText.new()
	FlavorText.id = "FlavorText"
	FlavorText:SetRGBFromTable( SWATCHES.AAR.AARdescription, 0 )
	FlavorText:setText( "", 0 )
	FlavorText:SetFont( FONTS.GetFont( FONTS.BodyRegular.File ) )
	FlavorText:SetAlignment( LUI.Alignment.Left )
	FlavorText:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 32, _1080p * 494, _1080p * 195, _1080p * 217 )
	self:addElement( FlavorText )
	self.FlavorText = FlavorText
	
	local PromptPreview = nil
	
	PromptPreview = LUI.UIText.new()
	PromptPreview.id = "PromptPreview"
	PromptPreview:SetRGBFromTable( SWATCHES.AAR.XPText, 0 )
	PromptPreview:setText( Engine.CBBHFCGDIC( "CAS/WATCH_PREVIEW_PROMPT" ), 0 )
	PromptPreview:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	PromptPreview:SetAlignment( LUI.Alignment.Left )
	PromptPreview:SetVerticalAlignment( LUI.Alignment.Center )
	PromptPreview:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 34, _1080p * 378, _1080p * 253, _1080p * 277 )
	self:addElement( PromptPreview )
	self.PromptPreview = PromptPreview
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	local f1_local11 = nil
	DoubleNotchedBacker:RegisterAnimationSequence( "WZSetup", {
		{
			value = -9.255965339091385E+61,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.WZGlobalSwatches.WZBackground,
			child = self.DoubleNotchedBacker.Background
		}
	} )
	Name:RegisterAnimationSequence( "WZSetup", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.WZGlobalSwatches.WZText
		}
	} )
	FlavorText:RegisterAnimationSequence( "WZSetup", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.WZGlobalSwatches.WZDescription
		}
	} )
	PromptPreview:RegisterAnimationSequence( "WZSetup", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.WZGlobalSwatches.WZDescription
		}
	} )
	self._sequences.WZSetup = function ()
		menu:AnimateSequence( "WZSetup" )
		menu:AnimateSequence( "WZSetup" )
		menu:AnimateSequence( "WZSetup" )
		menu:AnimateSequence( "WZSetup" )
	end
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "LootDetails", LootDetails )
LockTable( _M )
