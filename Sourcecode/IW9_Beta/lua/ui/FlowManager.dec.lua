-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:01
LUI.FlowManager = LUI.Class( LUI.UIElement )
PushAndPopsTable = {}
DisableLetterbox = {}
DisableMousePointer = {}
FenceGroups = {}
FenceGroupFallbackMenu = {}
SavedMenuStates = {}
AlwaysVisible = {}
PresetStacks = {}
IgnoreFollowHostCallbacks = {}
PartyUIRoot = {
	EXGM_MAIN_MENU = 23,
	BR_TRIALS = 16,
	MAIN_MENU = 8,
	TOURNAMENT_LOADING = 18,
	LOCKOUT_MENU = 2,
	TOURNAMENT_MATCHMAKING = 19,
	MP_MAIN_MENU = 9,
	LP_MAIN_MENU = 30,
	TOURNAMENT_BRACKET = 20,
	GAMEMODE_NONE_MENUS_START = 1,
	SP_MAIN_MENU = 5,
	GAMEMODE_MP_MENUS_START = 7,
	EXGM_LOADOUT_CONFIRMATION_MENU = 28,
	GAMEMODE_WZ_MENUS_START = 45,
	BR_MAIN_MENU = 32,
	MP_SYSTEM_LINK_LOBBY = 14,
	GAMEMODE_MP_MENUS_END = 37,
	OPERATOR_SELECT_SCREEN = 26,
	GAMEMODE_CP_MENUS_START = 38,
	DMZ_MAIN_MENU = 22,
	CP_MAIN_MENU = 39,
	MP_SYSTEM_LINK = 13,
	MP_TRIALS = 15,
	CP_PRIVATE_MATCH = 40,
	CP_SYSTEM_LINK_LOBBY = 43,
	LOADOUT_SELECT_MENU = 21,
	MP_TRIAL_EVENT = 51,
	GAMEMODE_SP_MENUS_START = 4,
	WZ_TOURNAMENT_MATCHMAKING = 47,
	CP_PUBLIC_MATCH_LOBBY = 41,
	GAMEMODE_NONE_MENUS_END = 3,
	BATTLE_ROYALE_MENU_TUTORIAL = 35,
	GAMEMODE_SP_MENUS_END = 6,
	WZ_TOURNAMENT_BRACKET = 48,
	WZ_PRIVATE_MATCH_LOBBY = 49,
	MP_PUBLIC_MATCH_LOBBY = 12,
	FREE = 0,
	MP_PRIVATE_MATCH = 11,
	BATTLE_ROYALE_MENU_PUBLIC_LOBBY = 34,
	OB_MAIN_MENU = 24,
	MP_PRIVATE_TOURNAMENT_LOBBY = 17,
	GAMEMODE_WZ_MENUS_END = 50,
	PARTY_MATCHMAKING_LOBBY = 29,
	GAMEMODE_CP_MENUS_END = 44,
	LAST = 53,
	MISSION_SELECT = 25,
	WZ_TOURNAMENT_LOADING = 46,
	BR_TRIAL_EVENT = 52,
	DMZ_LOADOUT_CONFIRMATION_MENU = 27,
	BR_PRE_LOBBY_MENU = 33,
	PRE_LOBBY_MENU = 10,
	CP_SYSTEM_LINK = 42,
	BATTLE_ROYALE_MENU = 31,
	PAYBACK_ONBOARDING_LOBBY = 36
}
local f0_local0 = "LoadoutOverview"
local f0_local1 = "OptionsMenuLayout"
local f0_local2 = "GlobalPanelBase"
local f0_local3 = "ChannelPanelBase"
local f0_local4 = "BindingPreview"
local f0_local5 = "FiringRangeMenu"
local f0_local6 = "BrPauseMenu"
BR_MENUS_START = PartyUIRoot.BATTLE_ROYALE_MENU
BR_MENUS_END = PartyUIRoot.PAYBACK_ONBOARDING_LOBBY
LUI.FlowManager.IsBelowBlockingFence = false
LUI.FlowManager.FlowMenus = {
	[PartyUIRoot.LOCKOUT_MENU] = "MainLockoutMenu",
	[PartyUIRoot.MAIN_MENU] = "MainMenu",
	[PartyUIRoot.SP_MAIN_MENU] = "CampaignMenu",
	[PartyUIRoot.MP_MAIN_MENU] = "MPMainMenu",
	[PartyUIRoot.PRE_LOBBY_MENU] = "PrelobbyMainMenu",
	[PartyUIRoot.MP_PRIVATE_MATCH] = "PrivateMatchLobby",
	[PartyUIRoot.MP_PUBLIC_MATCH_LOBBY] = "MPPublicLobby",
	[PartyUIRoot.MP_SYSTEM_LINK] = "MPSystemLinkMenu",
	[PartyUIRoot.MP_SYSTEM_LINK_LOBBY] = "MPSystemLinkLobby",
	[PartyUIRoot.MP_TRIALS] = "TrialsMP",
	[PartyUIRoot.BR_TRIALS] = "TrialsBR",
	[PartyUIRoot.MP_PRIVATE_TOURNAMENT_LOBBY] = "PrivateTournamentLobby",
	[PartyUIRoot.TOURNAMENT_LOADING] = "TournamentLoadingScreen",
	[PartyUIRoot.TOURNAMENT_MATCHMAKING] = "TournamentMatchmaking",
	[PartyUIRoot.TOURNAMENT_BRACKET] = "ArenaTournament",
	[PartyUIRoot.LOADOUT_SELECT_MENU] = "<disabled>",
	[PartyUIRoot.DMZ_MAIN_MENU] = "DMZMainMenu",
	[PartyUIRoot.EXGM_MAIN_MENU] = "EXGMMainMenu",
	[PartyUIRoot.OB_MAIN_MENU] = "OBMainMenu",
	[PartyUIRoot.MISSION_SELECT] = "MissionSelect",
	[PartyUIRoot.OPERATOR_SELECT_SCREEN] = "OperatorSelectScreen",
	[PartyUIRoot.DMZ_LOADOUT_CONFIRMATION_MENU] = "DMZLoadoutConfirmationMenu",
	[PartyUIRoot.EXGM_LOADOUT_CONFIRMATION_MENU] = "EXGMLoadoutConfirmationMenu",
	[PartyUIRoot.PARTY_MATCHMAKING_LOBBY] = "PartyMatchmakingLobby",
	[PartyUIRoot.BATTLE_ROYALE_MENU] = "BattleRoyale",
	[PartyUIRoot.BR_MAIN_MENU] = "BRMainMenu",
	[PartyUIRoot.BR_PRE_LOBBY_MENU] = "BrPrelobbyMainMenu",
	[PartyUIRoot.BATTLE_ROYALE_MENU_PUBLIC_LOBBY] = "BRPublicLobby",
	[PartyUIRoot.BATTLE_ROYALE_MENU_TUTORIAL] = "LobbyWarzoneTutorial",
	[PartyUIRoot.LP_MAIN_MENU] = "LPMainMenu",
	[PartyUIRoot.CP_MAIN_MENU] = "CPMainMenu",
	[PartyUIRoot.CP_PRIVATE_MATCH] = "CPPrivateMatchLobby",
	[PartyUIRoot.CP_PUBLIC_MATCH_LOBBY] = "CPPublicMatchMenu",
	[PartyUIRoot.CP_SYSTEM_LINK] = "CPSystemLinkMenu",
	[PartyUIRoot.CP_SYSTEM_LINK_LOBBY] = "CPSystemLinkLobby",
	[PartyUIRoot.PAYBACK_ONBOARDING_LOBBY] = "PayBackOnBoardingLobby",
	[PartyUIRoot.WZ_TOURNAMENT_LOADING] = "WZTournamentLoadingScreen",
	[PartyUIRoot.WZ_TOURNAMENT_MATCHMAKING] = "WZTournamentMatchmaking",
	[PartyUIRoot.WZ_TOURNAMENT_BRACKET] = "WZArenaTournament",
	[PartyUIRoot.WZ_PRIVATE_MATCH_LOBBY] = "WarzonePrivateMatchLobby",
	[PartyUIRoot.MP_TRIAL_EVENT] = "TrialEventMP",
	[PartyUIRoot.BR_TRIAL_EVENT] = "TrialEventBR"
}
LUI.FlowManager.PremiumMenus = {
	nil,
	"CampaignMenu",
	"CampaignMenuOffline",
	"MPMainMenu",
	"MPSystemLinkMenu",
	"MPSystemLinkLobby",
	"CPMainMenu",
	"CPSystemLinkMenu"
}
LUI.FlowManager.AutoNavigationType = {
	TOURNAMENT = 4,
	PARTY_UI_ROOT = 3,
	GAME_MODE = 2,
	NONE = 1
}
LUI.FlowManager.RegisterStackPushBehaviour = function ( f142_arg0, f142_arg1 )
	assert( f142_arg1 )
	PushAndPopsTable[f142_arg0] = PushAndPopsTable[f142_arg0] or {}
	local f142_local0 = PushAndPopsTable[f142_arg0]
	f142_local0.pushFuncs = f142_local0.pushFuncs or {}
	table.insert( f142_local0.pushFuncs, f142_arg1 )
end

LUI.FlowManager.RegisterStackPopBehaviour = function ( f141_arg0, f141_arg1 )
	assert( f141_arg1 )
	PushAndPopsTable[f141_arg0] = PushAndPopsTable[f141_arg0] or {}
	local f141_local0 = PushAndPopsTable[f141_arg0]
	f141_local0.popFuncs = f141_local0.popFuncs or {}
	table.insert( f141_local0.popFuncs, f141_arg1 )
end

LUI.FlowManager.RegisterFenceGroup = function ( f140_arg0, f140_arg1, f140_arg2 )
	local f140_local0 = assert
	local f140_local1 = Engine[0x7AE6126734FCDB]()
	if not f140_local1 then
		f140_local1 = not FenceGroups[f140_arg0]
	end
	f140_local0( f140_local1 )
	FenceGroups[f140_arg0] = f140_arg1
	FenceGroupFallbackMenu[f140_arg0] = f140_arg2
end

LUI.FlowManager.RegisterIgnoreFollowHostCallback = function ( f139_arg0, f139_arg1 )
	IgnoreFollowHostCallbacks[f139_arg0] = f139_arg1
end

LUI.FlowManager.DisableLetterboxForMenu = function ( f138_arg0 )
	DisableLetterbox[f138_arg0] = true
end

LUI.FlowManager.AlwaysVisibleForMenu = function ( f137_arg0 )
	AlwaysVisible[f137_arg0] = true
end

LUI.FlowManager.RequestSetStack = function ( f136_arg0, f136_arg1 )
	assert( type( f136_arg0 ) == "string" )
	assert( type( f136_arg1 ) == "table" )
	PresetStacks[f136_arg0] = f136_arg1
end

LUI.FlowManager.DisableMousePointerForMenu = function ( f135_arg0 )
	DisableMousePointer[f135_arg0] = true
end

LUI.FlowManager.GetPerControllerPersistentData = function ( f134_arg0 )
	if not LUI.FlowManager._persistentData then
		LUI.FlowManager._persistentData = {}
	end
	if not LUI.FlowManager._persistentData[f134_arg0] then
		LUI.FlowManager._persistentData[f134_arg0] = {}
	end
	return LUI.FlowManager._persistentData[f134_arg0]
end

LUI.FlowManager.GetFlowManager = function ()
	local f133_local0 = Engine[0xEE6F69FEA944B13]()
	local f133_local1
	if f133_local0 then
		f133_local1 = f133_local0
	else
		f133_local1 = f133_local0.flowManager
	end
	return f133_local1
end

LUI.FlowManager.GetScopedData = function ( f132_arg0 )
	local f132_local0 = type( f132_arg0 )
	local f132_local1 = assert
	local f132_local2
	if f132_local0 ~= "string" and f132_local0 ~= "userdata" then
		f132_local2 = false
	else
		f132_local2 = true
	end
	f132_local1( f132_local2 )
	f132_local1 = Engine[0xEE6F69FEA944B13]()
	local f132_local3 = assert
	local f132_local4
	if f132_local1 then
		f132_local4 = f132_local1
	else
		f132_local4 = f132_local1.flowManager
	end
	f132_local3( f132_local4 )
	f132_local3 = f132_local1.flowManager
	if f132_local0 == "string" then
		return f132_local3:GetScopedDataFromMenuName( f132_arg0 )
	elseif f132_local0 == "userdata" then
		return f132_local3:GetScopedDataFromElement( f132_arg0 )
	else
		
	end
end

LUI.FlowManager.GetMainScopedData = function ()
	return LUI.FlowManager.GetScopedData( LUI.FlowManager.FlowMenus[PartyUIRoot.LOCKOUT_MENU] )
end

LUI.FlowManager.RequestAddMenu = function ( f130_arg0, f130_arg1, f130_arg2, f130_arg3, f130_arg4, f130_arg5 )
	assert( type( f130_arg0 ) == "string" )
	local f130_local0 = {
		name = "addmenu",
		menu = f130_arg0,
		exclusiveController = f130_arg1,
		controller = f130_arg2,
		replaceTop = f130_arg3,
		immediate = f130_arg5,
		data = f130_arg4
	}
	local f130_local1 = Engine[0xEE6F69FEA944B13]()
	LUI.UIRoot.BlockButtonInput( f130_local1, true, "RequestAddMenu " .. f130_arg0 )
	LUI.UIRoot.ProcessEvent( f130_local1, f130_local0 )
end

LUI.FlowManager.RequestSocialPopup = function ( f129_arg0 )
	NOTIFICATIONS.LinkToFilter( nil, f129_arg0, {
		value = "invitations",
		type = Enum[0xAB1CD948D041C60][0xC57E42946F6E08C]
	} )
end

LUI.FlowManager.RequestPopupMenu = function ( f128_arg0, f128_arg1, f128_arg2, f128_arg3, f128_arg4, f128_arg5, f128_arg6, f128_arg7, f128_arg8 )
	assert( f128_arg1 )
	local f128_local0 = {
		name = "popupmenu",
		menu = f128_arg1,
		isModal = f128_arg7,
		exclusiveController = f128_arg2,
		controller = f128_arg3,
		replaceTop = f128_arg4,
		data = f128_arg5
	}
	if f128_arg8 ~= nil then
		f128_local0.immediate = f128_arg8
	else
		f128_local0.immediate = true
	end
	local f128_local1 = Engine[0xEE6F69FEA944B13]()
	LUI.UIRoot.BlockButtonInput( f128_local1, true, "RequestPopupMenu " .. f128_arg1 )
	LUI.UIRoot.ProcessEvent( f128_local1, f128_local0 )
end

LUI.FlowManager.RequestErrorPopup = function ( f127_arg0, f127_arg1, f127_arg2 )
	if not LUI.FlowManager.IsInStack( "generic_error_popup" ) then
		LUI.FlowManager.RequestPopupMenu( nil, "generic_error_popup", true, f127_arg0, false, {
			title = f127_arg1,
			message = f127_arg2
		}, nil, false, true )
	end
end

LUI.FlowManager.RequestDevErrorPopup = function ( f126_arg0, f126_arg1 )
	if CONDITIONS.IsDevelopmentBuild() and not LUI.FlowManager.IsInStack( "error_popmenu" ) then
		Dvar[0xE3CB005036E0C0F]( 0xCEEF44E99C361E4, f126_arg0 )
		Dvar[0xE3CB005036E0C0F]( 0xC7FD770960649E9, f126_arg1 )
		DebugPrint( "Opening error popup for message: " .. tostring( f126_arg1 ) .. ", length: " .. tostring( #f126_arg1 ) )
		LUI.FlowManager.RequestPopupMenu( nil, "error_popmenu" )
	end
end

LUI.FlowManager.RequestLeaveMenu = function ( f125_arg0, f125_arg1, f125_arg2 )
	local f125_local0 = {
		name = "leavemenu",
		element = f125_arg0,
		immediate = f125_arg1,
		blockSound = f125_arg2
	}
	local f125_local1 = Engine[0xEE6F69FEA944B13]()
	LUI.UIRoot.BlockButtonInput( f125_local1, true, "RequestLeaveMenu" )
	LUI.UIRoot.ProcessEvent( f125_local1, f125_local0 )
end

LUI.FlowManager.RequestLeaveMenuByName = function ( f124_arg0, f124_arg1, f124_arg2 )
	assert( f124_arg0 )
	local f124_local0 = {
		name = "leavemenu",
		menu = f124_arg0,
		immediate = f124_arg1,
		blockSound = f124_arg2
	}
	LUI.UIRoot.BlockButtonInput( Engine[0xEE6F69FEA944B13](), true, "RequestLeaveMenuByName " .. f124_arg0 )
	local f124_local1 = Engine[0xEE6F69FEA944B13]()
	f124_local1:processEvent( f124_local0 )
end

LUI.FlowManager.RequestLeaveMenuByNameWithController = function ( f123_arg0, f123_arg1, f123_arg2, f123_arg3 )
	assert( f123_arg0 )
	local f123_local0 = {
		name = "leavemenu",
		menu = f123_arg0,
		immediate = f123_arg2,
		blockSound = f123_arg3,
		managerControllerIndex = f123_arg1
	}
	LUI.UIRoot.BlockButtonInput( Engine[0xEE6F69FEA944B13](), true, "RequestLeaveMenuByName " .. f123_arg0 )
	local f123_local1 = Engine[0xEE6F69FEA944B13]()
	f123_local1:processEvent( f123_local0 )
end

LUI.FlowManager.RequestRestoreMenu = function ( f122_arg0, f122_arg1, f122_arg2, f122_arg3 )
	local f122_local0 = {
		name = "restoreMenu",
		menu = f122_arg0
	}
	local f122_local1
	if f122_arg3 == nil then
		f122_local1 = true
	else
		f122_local1 = f122_arg3
	end
	f122_local0.immediate = f122_local1
	f122_local0.exclusiveController = f122_arg1
	f122_local0.controller = f122_arg2
	f122_local1 = Engine[0xEE6F69FEA944B13]()
	LUI.UIRoot.BlockButtonInput( f122_local1, true, "RequestRestoreMenu" )
	LUI.UIRoot.ProcessEvent( f122_local1, f122_local0 )
end

LUI.FlowManager.RequestCloseAllMenus = function ( f121_arg0, f121_arg1, f121_arg2 )
	LUI.UIRoot.ProcessEvent( Engine[0xEE6F69FEA944B13](), {
		name = "closeallmenus"
	} )
	if f121_arg0 then
		METRICS.RecordInGameDismissMenuUsage( f121_arg2, f121_arg0, f121_arg1 )
	end
end

LUI.FlowManager.IsInStack = function ( f120_arg0 )
	local f120_local0 = Engine[0xEE6F69FEA944B13]()
	local f120_local1 = assert
	local f120_local2
	if f120_local0 then
		f120_local2 = f120_local0
	else
		f120_local2 = f120_local0.flowManager
	end
	f120_local1( f120_local2 )
	return f120_local0.flowManager:StackContains( f120_arg0 )
end

LUI.FlowManager.IsAnyInStack = function ( f119_arg0 )
	local f119_local0 = Engine[0xEE6F69FEA944B13]()
	local f119_local1 = assert
	local f119_local2
	if f119_local0 then
		f119_local2 = f119_local0
	else
		f119_local2 = f119_local0.flowManager
	end
	f119_local1( f119_local2 )
	return f119_local0.flowManager:StackContainsAny( f119_arg0 )
end

LUI.FlowManager.PopMenuStackUpToMenu = function ( f118_arg0, f118_arg1 )
	if not LUI.FlowManager.IsInStack( f118_arg0 ) then
		return 
	end
	local f118_local0 = Engine[0xEE6F69FEA944B13]()
	local f118_local1 = assert
	local f118_local2
	if f118_local0 then
		f118_local2 = f118_local0
	else
		f118_local2 = f118_local0.flowManager
	end
	f118_local1( f118_local2 )
end

local f0_local7 = function ( f117_arg0 )
	if SavedMenuStates[f117_arg0] == nil then
		SavedMenuStates[f117_arg0] = {}
	end
	return SavedMenuStates[f117_arg0]
end

LUI.FlowManager.ClearSavedMenuStatesByControllerIndex = function ( f116_arg0, f116_arg1 )
	local f116_local0 = f0_local0( f116_arg0 )
	if f116_arg1 then
		f116_local0[f116_arg1] = nil
	end
end

LUI.FlowManager.IsTopMenuModal = function ()
	local f115_local0 = Engine[0xEE6F69FEA944B13]()
	local f115_local1 = assert
	local f115_local2
	if f115_local0 then
		f115_local2 = f115_local0
	else
		f115_local2 = f115_local0.flowManager
	end
	f115_local1( f115_local2 )
	f115_local1 = f115_local0.flowManager.menuInfoStack
	local f115_local3 = f115_local1[#f115_local1]
	if f115_local3 then
		f115_local2 = f115_local3
	else
		f115_local2 = f115_local3.isModal
	end
	return f115_local2
end

LUI.FlowManager.IsMenuOnTop = function ( f114_arg0 )
	local f114_local0 = Engine[0xEE6F69FEA944B13]()
	local f114_local1 = assert
	local f114_local2
	if f114_local0 then
		f114_local2 = f114_local0
	else
		f114_local2 = f114_local0.flowManager
	end
	f114_local1( f114_local2 )
	f114_local1 = f114_local0.flowManager:GetStackTop()
	local f114_local3
	if f114_local1 then
		f114_local3 = f114_local1
	else
		f114_local3 = f114_local1.name == f114_arg0
	end
	return f114_local3
end

LUI.FlowManager.GetCurrentMenu = function ( f113_arg0 )
	local f113_local0 = Engine[0xEE6F69FEA944B13]()
	local f113_local1 = assert
	local f113_local2
	if f113_local0 then
		f113_local2 = f113_local0
	else
		f113_local2 = f113_local0.flowManager
	end
	f113_local1( f113_local2 )
	if f113_arg0:getParent() then
		
	else
		
	end
	assert( "Error getting current menu. Most likely, the element has not been added to a menu yet." )
end

LUI.FlowManager.GetVisibleMenu = function ()
	local f112_local0 = Engine[0xEE6F69FEA944B13]()
	assert( f112_local0 )
	local f112_local1 = f112_local0.flowManager
	if f112_local1 and f112_local1.menuInfoStack then
		local f112_local2 = f112_local1.menuInfoStack[#f112_local1.menuInfoStack]
		if f112_local2 and f112_local2.menu then
			return f112_local2.menu
		end
	end
end

LUI.FlowManager.IsUsingWeaponOriginOffset = function ()
	local f111_local0 = LUI.FlowManager.GetVisibleMenu()
	if f111_local0 then
		if (f111_local0.id ~= "WeaponPreview" or f111_local0.id ~= "WeaponPreviewBase") and f111_local0.id ~= LOADOUT.GetGunsmithTabsMenuRef() and f111_local0.id ~= LOADOUT.GetAttachmentSelectMenuRef() then
			return true
		else
			return false
		end
	else
		return false
	end
end

LUI.FlowManager.GetMenuNameAtIndex = function ( f110_arg0 )
	local f110_local0 = LUI.FlowManager.GetMenuStack()
	if f110_local0 ~= nil and f110_arg0 < 0 then
		f110_arg0 = #f110_local0 + f110_arg0
	end
	assert( f110_local0[f110_arg0] )
	return f110_local0[f110_arg0].name
end

LUI.FlowManager.GetMenuStack = function ()
	local f109_local0 = Engine[0xEE6F69FEA944B13]()
	assert( f109_local0 )
	return f109_local0.flowManager.menuInfoStack
end

LUI.FlowManager.GetAllMenuNames = function ()
	local f108_local0 = Engine[0xEE6F69FEA944B13]()
	assert( f108_local0 )
	local f108_local1 = f108_local0.flowManager
	local f108_local2 = nil
	if f108_local1 and f108_local1.menuInfoStack then
		for f108_local3 = #f108_local1.menuInfoStack, 1, -1 do
			local f108_local6 = f108_local1.menuInfoStack[f108_local3].name
			if f108_local6 and f108_local6 ~= "" then
				if f108_local3 == #f108_local1.menuInfoStack and not f108_local6 then
					f108_local2 = f108_local6
				else
					f108_local2 = f108_local2 .. ";" .. f108_local6
				end
			end
		end
	end
	return f108_local2
end

LUI.FlowManager.GetMenuByName = function ( f107_arg0 )
	local f107_local0 = Engine[0xEE6F69FEA944B13]()
	assert( f107_local0 )
	local f107_local1 = f107_local0.flowManager
	if f107_local1 and f107_local1.menuInfoStack then
		for f107_local2 = #f107_local1.menuInfoStack, 1, -1 do
			local f107_local5 = f107_local1.menuInfoStack[f107_local2]
			if f107_arg0 == f107_local5.name then
				return f107_local5
			end
		end
	end
end

function ExecuteLUAFunction( f106_arg0 )
	local f106_local0 = _G
	for f106_local4 in string.gmatch( f106_arg0, "[^.]+" ) do
		f106_local0 = f106_local0[f106_local4]
	end
	f106_local1 = f106_local0
	...
	f106_local1()
end

function SetBRWeaponStatusInfoReactiveHUDType( f105_arg0 )
	GL_HACK.reactiveHUDType = tonumber( f105_arg0 )
end

function SaveMenuStack( f104_arg0 )
	assert( f104_arg0 )
	assert( f104_arg0.flowManager )
	local f104_local0 = {}
	for f104_local4, f104_local5 in ipairs( f104_arg0.flowManager.menuInfoStack ) do
		table.insert( f104_local0, CreateMenuInfoSaveData( f104_local5 ) )
	end
	return Table.Serialize( f104_local0 )
end

function RestoreMenuStack( f103_arg0, f103_arg1 )
	assert( f103_arg0 )
	assert( f103_arg0.flowManager )
	assert( f103_arg1 )
	local f103_local0 = f103_arg0.flowManager
	f103_local0:closeAllMenus()
	local f103_local1, f103_local2 = loadstring( f103_arg1 )
	if f103_local1 then
		local f103_local3, f103_local4 = pcall( f103_local1 )
		for f103_local8, f103_local9 in ipairs( f103_local4 ) do
			local f103_local10 = f103_local9.name
			assert( f103_local10 )
			if FenceGroups[f103_local10] then
				f103_local9.fenceGroup = LUI.FenceGroup.new( FenceGroups[f103_local10], Engine[0x45B054C920178E9]() )
			end
			f103_local9.scopedData = MakeScopedDataForMenuInfo( f103_local9 )
			f103_local0:PushMenuInfo( f103_local9 )
		end
	end
	f103_arg0:TryAddMouseCursor()
end

function IsMenuInStack( f102_arg0, f102_arg1 )
	assert( f102_arg0 )
	local f102_local0 = f102_arg0.flowManager
	if not f102_local0 then
		return false
	else
		return f102_local0:StackContains( f102_arg1 )
	end
end

function IsMenuOpenAndVisible( f101_arg0, f101_arg1 )
	assert( f101_arg0 )
	local f101_local0 = f101_arg0.flowManager
	if not f101_local0 then
		return false
	elseif f101_local0.menuInfoStack then
		for f101_local4, f101_local5 in ipairs( f101_local0.menuInfoStack ) do
			if f101_local5.name == f101_arg1 and f101_local5.menu ~= nil then
				return true
			elseif f101_local5.name == "FlyInPopup" and f101_local5.buildData.FlyInPopupName == f101_arg1 then
				return true
			end
		end
	end
	return false
end

function AnyActiveMenusInStack( f100_arg0 )
	assert( f100_arg0 )
	local f100_local0 = f100_arg0.flowManager
	if not f100_local0 then
		return false
	elseif f100_local0.menuInfoStack then
		for f100_local4, f100_local5 in ipairs( f100_local0.menuInfoStack ) do
			if f100_local5.menu then
				return true
			end
		end
	end
	return false
end

function GetVisibleMenu( f99_arg0 )
	assert( f99_arg0 )
	local f99_local0 = f99_arg0.flowManager
	if not f99_local0 then
		return ""
	elseif f99_local0.menuInfoStack then
		local f99_local1 = f99_local0.menuInfoStack[#f99_local0.menuInfoStack]
		if f99_local1 and f99_local1.menu then
			if f99_local1.menu.id then
				return f99_local1.menu.id
			elseif f99_local1.menu.name then
				return f99_local1.menu.name
			end
		end
	end
	return ""
end

function IsUsingWeaponOriginOffset( f98_arg0 )
	assert( f98_arg0 )
	local f98_local0 = f98_arg0.flowManager
	if not f98_local0 then
		return false
	elseif f98_local0.menuInfoStack then
		local f98_local1 = f98_local0.menuInfoStack[#f98_local0.menuInfoStack]
		if f98_local1 and f98_local1.menu then
			if f98_local1.menu.id ~= "WeaponPreview" and f98_local1.menu.id ~= LOADOUT.GetGunsmithTabsMenuRef() and f98_local1.menu.id ~= LOADOUT.GetAttachmentSelectMenuRef() then
				return true
			else
				return false
			end
		end
	end
	return false
end

function GetAllMenuNames()
	local f97_local0 = Engine[0xEE6F69FEA944B13]()
	assert( f97_local0 )
	local f97_local1 = f97_local0.flowManager
	local f97_local2 = nil
	if f97_local1 and f97_local1.menuInfoStack then
		for f97_local3 = #f97_local1.menuInfoStack, 1, -1 do
			local f97_local6 = f97_local1.menuInfoStack[f97_local3].name
			if f97_local6 and f97_local6 ~= "" then
				if f97_local3 == #f97_local1.menuInfoStack and not f97_local6 then
					f97_local2 = f97_local6
				else
					f97_local2 = f97_local2 .. ";" .. f97_local6
				end
			end
		end
	end
	return f97_local2
end

function GetLuiStreamerInfo( f96_arg0, f96_arg1 )
	if f96_arg0 and f96_arg0:getFirstChild() then
		
	else
		
	end
end

function GetLuiImageStreamersInfo()
	local f95_local0 = Engine[0xEE6F69FEA944B13]()
	assert( f95_local0 )
	local f95_local1 = {
		value = nil
	}
	local f95_local2 = f95_local0.flowManager
	if f95_local2 and f95_local2.menuInfoStack then
		for f95_local3 = #f95_local2.menuInfoStack, 1, -1 do
			local f95_local6 = f95_local2.menuInfoStack[f95_local3]
			GetLuiStreamerInfo( f95_local6.menu, f95_local1 )
			f95_local1.value = ";" .. f95_local6.name .. ": " .. f95_local1.value .. ";"
		end
	end
	return f95_local1.value
end

function PrintLuiStreamedImageInfo( f94_arg0, f94_arg1 )
	if f94_arg0 and f94_arg0:getFirstChild() then
		
	else
		
	end
end

function GetLuiStreamedImageList( f93_arg0 )
	local f93_local0 = Engine[0xEE6F69FEA944B13]()
	assert( f93_local0 )
	if f93_local0:getFirstChild() then
		
	else
		
	end
end

function GetAttachmentsReference( f92_arg0 )
	if CONDITIONS.InGame() then
		local f92_local0 = ""
		local f92_local1 = Game[0x7A240787D8A22FE]( f92_arg0, true )
		if f92_local1 and 0 < #f92_local1 then
			for f92_local2 = 1, #f92_local1, 1 do
				if f92_local1[f92_local2].ref then
					local f92_local5 = f92_local1[f92_local2].ref
					local f92_local6 = f92_local1[f92_local2].variantID
					if f92_local6 and 0 < f92_local6 then
						f92_local5 = f92_local5 .. "|" .. f92_local6
					end
					if f92_local0 ~= "" then
						local f92_local7 = f92_local0 .. ";" .. f92_local5
						if not f92_local7 then
							f92_local0 = f92_local7
						else
							f92_local0 = f92_local5
						end
					end
					f92_local0 = f92_local5
				end
			end
			return f92_local0
		end
	end
	return ""
end

function GetFrontsceneWeaponModelName( f91_arg0 )
	if Engine[0x12586A3F4FB490E]() then
		local f91_local0 = f91_arg0.flowManager
		if f91_local0 and f91_local0.menuInfoStack then
			local f91_local1 = f91_local0.menuInfoStack[#f91_local0.menuInfoStack]
			if f91_local1 and f91_local1.menu and f91_local1.menu.id == LOADOUT.GetAttachmentSelectMenuRef() then
				local f91_local2 = LUI.FlowManager.GetScopedData( f91_local1.menu )
				if f91_local2.loadoutIndex then
					local f91_local3 = ""
					local f91_local4 = LOADOUT.GetLoadoutSquadMember( Engine[0x45B054C920178E9]() )
					local f91_local5 = f91_local4.loadouts[f91_local2.loadoutIndex].weaponSetups[f91_local2.weaponSlot]
					return WEAPON.GetWeaponModelName( f91_local5.weapon:get(), WEAPON.GenerateWeaponTable( f91_local5 ), {
						includeStickers = true,
						includeCamos = true,
						includeAttachments = true
					} )
				end
			elseif f91_local1 and f91_local1.menu and f91_local1.menu.GetCurrentWeaponModelName then
				return f91_local1.menu:GetCurrentWeaponModelName()
			else
				local f91_local2 = ""
				local f91_local3 = Engine[0x45B054C920178E9]()
				local f91_local4 = LOADOUT.GetLoadoutSquadMember( f91_local3 )
				local f91_local6 = f91_local4.loadouts[LOADOUT.GetFavoriteLoadoutIndex( f91_local3 )].weaponSetups[WEAPON.PrimarySlot]
				return WEAPON.GetWeaponModelName( f91_local6.weapon:get(), WEAPON.GenerateWeaponTable( f91_local6 ), {
					includeStickers = true,
					includeCamos = true,
					includeAttachments = true
				} )
			end
		end
	end
	return ""
end

function IsTopSignInMenu( f90_arg0 )
	assert( f90_arg0 )
	if not CONDITIONS.IsSplitScreenEnabled() then
		return false
	end
	local f90_local0 = f90_arg0.flowManager
	if not f90_local0 then
		return false
	end
	local f90_local1 = false
	if not LUI.UIRoot.IsButtonInputBlocked( f90_arg0 ) and f90_local0.menuInfoStack then
		local f90_local2 = f90_local0.menuInfoStack[#f90_local0.menuInfoStack]
		if f90_local2 and f90_local2.menu and f90_local2.menu.isSignInMenu then
			local f90_local3 = LUI.FlowManager.GetScopedData( f90_local2.menu )
			if f90_local3 and f90_local3.focusedPage and 2 < f90_local3.focusedPage then
				
			else
				f90_local1 = true
			end
		end
	end
	return f90_local1
end

function CanSignoutSplitscreenPlayer( f89_arg0 )
	assert( f89_arg0 )
	local f89_local0 = f89_arg0.flowManager
	local f89_local1 = false
	if not LUI.UIRoot.IsButtonInputBlocked( f89_arg0 ) and f89_local0.menuInfoStack then
		local f89_local2 = f89_local0.menuInfoStack[#f89_local0.menuInfoStack]
		if f89_local2 and f89_local2.menu and f89_local2.menu.signoutSplitscreen ~= false then
			f89_local1 = true
		end
	end
	return f89_local1
end

function IsTopLocalSignInMenu( f88_arg0 )
	return false
end

LUI.FlowManager.closeAllMenusHandler = function ( f87_arg0, f87_arg1 )
	f87_arg0:closeAllMenus()
end

LUI.FlowManager.restoreMenuHandler = function ( f86_arg0, f86_arg1 )
	f86_arg0:restoreMenu( f86_arg1 )
	LUI.UIRoot.BlockButtonInput( f86_arg0.root, false, "RestoreMenuHandler" )
end

LUI.FlowManager.autoNavigationToMenuHandler = function ( f85_arg0, f85_arg1 )
	assert( f85_arg1 )
	assert( f85_arg1.menuId )
	LUI.FlowManager.RequestAutomaticNavigation( f85_arg1.menuId )
	LUI.UIRoot.BlockButtonInput( f85_arg0.root, false, "AutoNavigationToMenuHandler" )
end

LUI.FlowManager.addMenuHandler = function ( f84_arg0, f84_arg1 )
	f84_arg0:addMenu( f84_arg1 )
	LUI.UIRoot.BlockButtonInput( f84_arg0.root, false, "AddMenuHandler" )
end

LUI.FlowManager.popupMenuHandler = function ( f83_arg0, f83_arg1 )
	f83_arg1.isPopup = true
	f83_arg0:addMenuHandler( f83_arg1 )
end

LUI.FlowManager.leaveMenuHandler = function ( f82_arg0, f82_arg1 )
	f82_arg0:leaveMenu( f82_arg1 )
	LUI.UIRoot.BlockButtonInput( f82_arg0.root, false, "leaveMenu" )
end

LUI.FlowManager.closeAllMenus = function ( f81_arg0 )
	for f81_local0 = #f81_arg0.menuInfoStack, 1, -1 do
		local f81_local3 = f81_arg0.menuInfoStack[f81_local0]
		if not AlwaysVisible[f81_local3.name] then
			f81_arg0:CloseMenuInfo( f81_local3, false, false )
			f81_arg0:RemoveMenuInfo( f81_local3 )
		end
	end
end

LUI.FlowManager.closeFlyInPopup = function ( f80_arg0 )
	local f80_local0 = nil
	local f80_local1 = LUI.FlowManager.GetMenuByName( "FlyInPopup" )
	if f80_local1 then
		if f80_arg0 and f80_local1.menu.exitAnimation then
			f80_local1.menu:exitAnimation()
		else
			ACTIONS.LeaveMenu( f80_local1.buildData.widget )
		end
		f80_local0 = f80_local1.menu
		MobileFlyInPopupUtils.ResetCurrentFlyInPopup()
	end
	return f80_local0
end

LUI.FlowManager.restoreMenu = function ( f79_arg0, f79_arg1 )
	local f79_local0 = nil
	if f79_arg1.menuId ~= nil then
		f79_arg1.menu = LUI.FlowManager.FlowMenus[f79_arg1.menuId]
	end
	if not f79_arg0.IsInStack( f79_arg1.menu ) then
		f79_arg0:addMenu( f79_arg1 )
		return 
	end
	local f79_local1 = f79_arg0:GetStackTop()
	if f79_local1 and f79_local1.name == f79_arg1.menu then
		return 
	end
	local f79_local2 = nil
	for f79_local3 = #f79_arg0.menuInfoStack, 1, -1 do
		local f79_local6 = f79_arg0.menuInfoStack[f79_local3]
		if not f79_local6.isModal then
			if f79_local6.name ~= f79_arg1.menu then
				f79_arg0:CloseMenuInfo( f79_local6, false, false )
				f79_arg0:RemoveMenuInfo( f79_local6 )
			end
		end
	end
	f79_arg0:RefreshStack()
end

LUI.FlowManager.addMenu = function ( f78_arg0, f78_arg1 )
	local f78_local0 = f78_arg1.menu
	DebugPrintLogFileOnly( "INGAME MENU: Add Menu: " .. f78_local0 )
	for f78_local4, f78_local5 in ipairs( f78_arg0.menuInfoStack ) do
		if f78_local5.name == f78_local0 then
			if f78_local0 == "FlyInPopup" and f78_arg1.data.FlyInPopupName ~= nil then
				f78_local5.buildData.FlyInPopupName = f78_arg1.data.FlyInPopupName
			end
			DebugPrintLogFileOnly( "- Menu already exists." )
			return 
		end
	end
	if LUI.FlowManager.IsMenuUnreleased( f78_arg0, f78_local0 ) then
		DebugPrintLogFileOnly( "- Menu unreleased." )
		return 
	elseif DataSources.alwaysLoaded.flowManager.stackChanged then
		DataSources.alwaysLoaded.flowManager.stackChanged:SetValue( f78_arg1.controller, f78_arg1.name )
	end
	f78_local1 = f78_arg0.menuInfoStack[#f78_arg0.menuInfoStack]
	if f78_local1 and f78_arg1.replaceTop then
		DebugPrintLogFileOnly( "- Replace top menu." )
		f78_arg0:CloseMenuInfo( f78_local1, false, false )
		f78_arg0:RemoveMenuInfo( f78_local1 )
	end
	f78_local3 = f78_arg0:CreateMenuInfo( f78_local0, f78_arg1.data, f78_arg1.exclusiveController, f78_arg1.controller, LUI.UIRoot.GetTabName() )
	f78_local3.isPopup = f78_arg1.isPopup or f78_arg1.isModal
	f78_local3.isModal = f78_arg1.isModal
	if f78_local1 then
		f78_local3.previousMenuName = f78_local1.name
	end
	f78_arg0:PushMenuInfo( f78_local3 )
	f78_arg0:RefreshStack()
	DebugPrintLogFileOnly( "TEST_BOT: Opening " .. f78_local0 .. " menu." )
end

LUI.FlowManager.leaveMenu = function ( f77_arg0, f77_arg1 )
	DebugPrintLogFileOnly( "INGAME MENU: Leave Menu" )
	local f77_local0 = f77_arg0._controllerIndex
	if not f77_local0 then
		f77_local0 = Engine[0x45B054C920178E9]()
	end
	if f77_arg1.managerControllerIndex and f77_local0 ~= f77_arg1.managerControllerIndex then
		DebugPrintLogFileOnly( "- Incorrect controller trying to leave the menu." )
		return 
	end
	local f77_local1 = nil
	if f77_arg1.menuId ~= nil then
		f77_arg1.menu = LUI.FlowManager.FlowMenus[f77_arg1.menuId]
		DebugPrintLogFileOnly( "- Menu ID: " .. tostring( f77_arg1.menuId ) .. "." )
	end
	if DataSources.alwaysLoaded.flowManager.stackChanged then
		DataSources.alwaysLoaded.flowManager.stackChanged:SetValue( f77_arg1.controller, f77_arg1.name )
	end
	if f77_arg1.element or f77_arg1.menu then
		for f77_local2 = #f77_arg0.menuInfoStack, 1, -1 do
			local f77_local5 = f77_arg0.menuInfoStack[f77_local2]
			local f77_local6 = f77_arg1.element
			if f77_local6 then
				f77_local6 = f77_arg1.element:isDescendentOf( f77_local5.menu )
			end
			local f77_local7 = f77_arg1.menu
			if f77_local7 then
				f77_local7 = f77_local5.name == f77_arg1.menu
			end
			if f77_local6 or f77_local7 then
				f77_local1 = f77_local5
				break
			end
		end
		if f77_local1 then
			DebugPrintLogFileOnly( "- Leaving specific menu: " .. f77_local1.name .. "." )
		else
			if not f77_local1 then
				DebugPrintLogFileOnly( "- No menu to close." )
				return 
			end
			DebugPrintLogFileOnly( "TEST_BOT: Closing " .. f77_local1.name .. " menu." )
			f77_arg0:CloseMenuInfo( f77_local1, false, false )
			f77_arg0:RemoveMenuInfo( f77_local1 )
			if not f77_local1.isModal and not f77_arg1.blockSound then
				Engine[0xC4146BA76D0F982]( CoD.SFX.SelectBack )
			end
			f77_arg0:RefreshStack()
			local f77_local2 = f77_arg0.menuInfoStack[#f77_arg0.menuInfoStack]
			if f77_local2 then
				f77_local2.previousMenuName = f77_local1.name
				DebugPrintLogFileOnly( "TEST_BOT: Returning to " .. f77_local2.name .. " menu." )
			end
		end
	else
		DebugPrintLogFileOnly( "- Leaving top menu." )
		f77_local1 = f77_arg0:GetStackTop()
	end
	if not f77_local1 then
		DebugPrintLogFileOnly( "- No menu to close." )
		return 
	end
	DebugPrintLogFileOnly( "TEST_BOT: Closing " .. f77_local1.name .. " menu." )
	f77_arg0:CloseMenuInfo( f77_local1, false, false )
	f77_arg0:RemoveMenuInfo( f77_local1 )
	if not f77_local1.isModal and not f77_arg1.blockSound then
		Engine[0xC4146BA76D0F982]( CoD.SFX.SelectBack )
	end
	f77_arg0:RefreshStack()
	local f77_local2 = f77_arg0.menuInfoStack[#f77_arg0.menuInfoStack]
	if f77_local2 then
		f77_local2.previousMenuName = f77_local1.name
		DebugPrintLogFileOnly( "TEST_BOT: Returning to " .. f77_local2.name .. " menu." )
	end
end

LUI.FlowManager.GetScopedDataFromElement = function ( f76_arg0, f76_arg1 )
	if f76_arg1._scoped then
		return f76_arg1._scoped
	else
		local f76_local0 = f76_arg1:getParent()
		if not f76_local0 then
			DebugPrint( "Could not find scoped data for supplied LUI element, attempting to get scoped data from visible menu. The supplied LUI element is " .. tostring( f76_arg1.id ) )
			local f76_local1 = LUI.FlowManager.GetVisibleMenu()
			if f76_local1 then
				return f76_arg0:GetScopedDataFromElement( f76_local1 )
			elseif Engine[0x7AE6126734FCDB]() then
				return {}
			else
				DebugPrint( "Could not find scoped data for supplied LUI element and there is no visible menu. The supplied LUI element is " .. tostring( f76_arg1.id ) )
				return {}
			end
		else
			return f76_arg0:GetScopedDataFromElement( f76_local0 )
		end
	end
end

LUI.FlowManager.GetScopedDataFromMenuName = function ( f75_arg0, f75_arg1 )
	for f75_local0 = #f75_arg0.menuInfoStack, 1, -1 do
		local f75_local3 = f75_arg0.menuInfoStack[f75_local0]
		if f75_local3.name == f75_arg1 then
			return f75_local3.scopedData
		end
	end
	assert( false, "Could not find scoped data for menu named " .. f75_arg1 .. "." )
end

function CreateMenuInfoSaveData( f74_arg0 )
	local f74_local0 = {}
	for f74_local9, f74_local10 in pairs( f74_arg0 ) do
		if f74_local9 ~= "fenceGroup" and f74_local9 ~= "scopedData" then
			if f74_local9 == "menu" then
				
			end
			if f74_local9 == "buildData" then
				for f74_local7, f74_local8 in pairs( f74_local10 ) do
					if type( f74_local8 ) == "table" and f74_local8.__serializable == false then
						DebugPrint( "WARNING: Not saving buildData field \"" .. tostring( f74_local7 ) .. "\" for LUI Reload of menu \"" .. tostring( f74_arg0.name ) .. "\"" )
						f74_local10[f74_local7] = nil
					end
				end
			end
			f74_local0[f74_local9] = f74_local10
		end
	end
	return f74_local0
end

function MakeScopedDataForMenuInfo( f73_arg0 )
	local f73_local0 = {
		menuName = f73_arg0.name
	}
	for f73_local4, f73_local5 in pairs( f73_arg0.buildData ) do
		f73_local0[f73_local4] = f73_local5
	end
	if f73_arg0.controller then
		f73_local0.controllerIndex = f73_arg0.controller
		f73_local0.exclusiveController = f73_arg0.controller
		f73_local0.exclusiveControllerIndex = f73_arg0.controller
		f73_local0.isControllerExclusive = f73_arg0.isControllerExclusive
	end
	return f73_local0
end

LUI.FlowManager.CreateMenuInfo = function ( f69_arg0, f69_arg1, f69_arg2, f69_arg3, f69_arg4, f69_arg5 )
	local f69_local0 = f69_arg0
	local f69_local1 = {
		name = f69_arg1,
		tabName = f69_arg5
	}
	local f69_local2
	if not f69_arg2 then
		f69_local2 = f69_arg2
	else
		f69_local2 = {}
	end
	f69_local1.buildData = f69_local2
	f69_local1.controller = f69_arg4
	if not Engine[0x12586A3F4FB490E]() then
		f69_local1.controller = f69_arg0:getRootController()
	elseif not f69_arg4 then
		DebugPrint( "Warning: opening menu \"" .. f69_arg1 .. "\" for unspecified controllerIndex, defaulting to 0" )
		f69_local1.controller = 0
	end
	if f69_arg4 == nil or f69_arg3 ~= true then
		f69_local2 = false
	else
		f69_local2 = true
	end
	f69_local1.isControllerExclusive = f69_local2
	f69_local1.scopedData = MakeScopedDataForMenuInfo( f69_local1 )
	if FenceGroups[f69_arg1] then
		f69_local1.fenceGroup = LUI.FenceGroup.new( FenceGroups[f69_arg1], f69_local1.controller, f69_local1.buildData )
		f69_local1.fenceGroup.OnPass = function ( f72_arg0 )
			
		end
		
		f69_local1.fenceGroup.OnBlock = function ( f71_arg0 )
			
		end
		
		f69_local1.fenceGroup.OnFail = function ( f70_arg0 )
			DebugPrint( "Fencegroup failed for " .. f69_arg0 )
			if FenceGroupFallbackMenu[f69_arg0] then
				LUI.FlowManager.RequestAutomaticNavigation( FenceGroupFallbackMenu[f69_arg0] )
			elseif f69_arg0:StackContains( f69_arg0 ) then
				for f70_local0 = #f69_arg0.menuInfoStack, 1, -1 do
					local f70_local3 = f69_arg0.menuInfoStack[f70_local0]
					f69_arg0:CloseMenuInfo( f70_local3, true, false )
					f69_arg0:RemoveMenuInfo( f70_local3 )
					if f70_local3.name == f69_arg0 then
						
					end
				end
			else
				DebugPrint( "WARNING: Attempted to fail fencegroup for " .. f69_arg0 .. " but " .. f69_arg0 .. " is not in the stack." )
			end
		end
		
	end
	f69_arg0:CheckLeakedAllocatedElements()
	return f69_local1
end

LUI.FlowManager.IsMenuUnreleased = function ( f68_arg0, f68_arg1 )
	local f68_local0 = Dvar[0x54084D7CA2317BB]( 0x977B7BB7EB17556 )
	if f68_local0 and 0 < #f68_local0 then
		local f68_local1 = LUI.KeyValueSplit( string.gsub( f68_local0, "%s+", "" ), "," )
		local f68_local2 = f68_local1[f68_arg1]
		if f68_local2 and not Engine[0x15D98DF5F61904B]( 0, "lua_unreleased_menu", {
			unreleased_menu_name = f68_arg1,
			current_menu_stack = f68_arg0:MenuStackToString()
		} ) then
			DebugPrint( "Failed to write to blackbox, lua_unreleased_menu" )
		end
		return f68_local2
	else
		return false
	end
end

LUI.FlowManager.OpenMenuInfo = function ( f67_arg0, f67_arg1 )
	if f67_arg1.opening then
		return 
	elseif LUI.FlowManager.IsMenuUnreleased( f67_arg0, f67_arg1.name ) then
		return 
	end
	local f67_local0 = Engine[0xF3D71C800542A78]()
	if Engine[0x12586A3F4FB490E]() then
		PlayerData[0xC583B1BCF5C2AB3]()
	end
	assert( not f67_arg1.menu )
	LUI.ActiveScoped = f67_arg1.scopedData
	f67_arg1.opening = true
	f67_arg1.menu = MenuBuilder.buildMenu( f67_arg1.name, f67_arg1.scopedData )
	f67_arg1.opening = false
	for f67_local4, f67_local5 in ipairs( f67_arg0.menuInfoStack ) do
		if f67_local5.menu then
			f67_local5.menu:setPriority( f67_local4 )
		end
	end
	f67_arg0:addElement( f67_arg1.menu )
	f67_arg0:MobileUpdateSocialSidebarVisibility( f67_arg1, f67_arg1.controller )
	f67_arg1.menu:processEvent( {
		dispatchChildren = true,
		name = "menu_create",
		controller = f67_arg1.controller
	} )
	assert( f67_arg1.menu )
	if LAYOUT.ShouldSetupLetterboxOnCurrentPlatform() and not Engine[0xAD041992EB2AEC9]() and not DisableLetterbox[f67_arg1.name] then
		f67_arg1.menu:setupLetterboxElement()
	end
	if Engine[0x575E9C5B9AAB6F4]() then
		LAYOUT.UpdateFadeFrameForCurrentMenu( f67_arg1.menu, f67_arg1.controller )
	end
	LUI.ActiveScoped = nil
	f67_local1 = Engine[0xF3D71C800542A78]()
	Engine[0x15D98DF5F61904B]( 0, "lua_menu_info", {
		completed_menu = true,
		menu_name = f67_arg1.name,
		memory_delta_bytes = f67_local1 - f67_local0,
		init_free_bytes = f67_local0,
		post_free_bytes = f67_local1,
		in_game = Engine[0x12586A3F4FB490E]()
	} )
	f67_arg0:LogMenuChangeTo( f67_arg1.controller, f67_arg1.name )
end

LUI.FlowManager.CloseMenuInfo = function ( f66_arg0, f66_arg1, f66_arg2, f66_arg3 )
	local f66_local0 = f66_arg0._controllerIndex
	if not f66_local0 then
		f66_local0 = Engine[0x45B054C920178E9]()
	end
	local f66_local1 = f0_local0( f66_local0 )
	if not f66_arg3 then
		f66_local1[f66_arg1.name] = nil
	end
	if f66_arg1.menu then
		if f66_arg3 and not f66_local1[f66_arg1.name] then
			f66_local1[f66_arg1.name] = f66_arg1.menu:saveState()
		end
		if not f66_arg2 then
			f66_arg1.menu:processEvent( {
				name = "lose_focus"
			} )
			f66_arg1.menu:processEvent( {
				dispatchChildren = true,
				name = "menu_close",
				controller = f66_arg1.controller
			} )
		end
		f66_arg1.menu:closeTree()
		f66_arg1.menu = nil
		local f66_local2 = f66_arg0:GetTopMostOpenMenuInfo()
		if f66_local2 then
			f66_arg0:MobileUpdateSocialSidebarVisibility( f66_local2, f66_local2.controller )
			if Engine[0x575E9C5B9AAB6F4]() then
				LAYOUT.UpdateFadeFrameForCurrentMenu( f66_local2.menu, f66_local2.controller )
			end
		end
	end
end

LUI.FlowManager.GetStackVersion = function ( f65_arg0 )
	assert( f65_arg0.stackVersion )
	return f65_arg0.stackVersion
end

LUI.FlowManager.InsertMenuInfo = function ( f64_arg0, f64_arg1, f64_arg2 )
	assert( f64_arg2 )
	f64_arg0.stackVersion = f64_arg0.stackVersion + 1
	table.insert( f64_arg0.menuInfoStack, f64_arg1, f64_arg2 )
	if PushAndPopsTable[f64_arg2.name] and PushAndPopsTable[f64_arg2.name].pushFuncs and 0 < #PushAndPopsTable[f64_arg2.name].pushFuncs then
		for f64_local3, f64_local4 in ipairs( PushAndPopsTable[f64_arg2.name].pushFuncs ) do
			f64_local4()
		end
	end
	Engine[0xA0F090AEEC9C553]( true )
	if #f64_arg0.menuInfoStack == 1 then
		f64_arg0.root:processEvent( {
			name = "non_empty_menu_stack",
			controllerIndex = f64_arg0._controllerIndex
		} )
	end
	if CONDITIONS.IsDemoBuildOrDevBuildOrAreDevFeaturesEnabled() then
		f64_arg0:PrintStack()
	end
end

LUI.FlowManager.RemoveMenuInfo = function ( f63_arg0, f63_arg1 )
	assert( f63_arg1 )
	local f63_local0 = nil
	local f63_local1 = #f63_arg0.menuInfoStack
	if 1 <= f63_local1 and f63_arg0.menuInfoStack[f63_local1] ~= f63_arg1 then
		
	else
		
	end
	if 1 <= f63_local1 then
		if f63_arg1.fenceGroup then
			f63_arg1.fenceGroup:Abort()
		end
		if PushAndPopsTable[f63_arg1.name] and PushAndPopsTable[f63_arg1.name].popFuncs and 0 < #PushAndPopsTable[f63_arg1.name].popFuncs then
			for f63_local5, f63_local6 in ipairs( PushAndPopsTable[f63_arg1.name].popFuncs ) do
				f63_local6()
			end
		end
		f63_arg0.stackVersion = f63_arg0.stackVersion + 1
		table.remove( f63_arg0.menuInfoStack, f63_local1 )
	end
	if #f63_arg0.menuInfoStack == 0 then
		if Engine[0x74423E76DECE3E4]() and not Engine[0x12586A3F4FB490E]() then
			ACTIONS.ResumeGame( f63_arg0 )
		end
		f63_arg0.root:processEvent( {
			name = "empty_menu_stack",
			controllerIndex = f63_arg0._controllerIndex
		} )
		f63_arg0.root:RemoveMouseCursor()
	end
	if Engine[0x2DA54CF5D6B7F02]() then
		f63_arg0:PrintStack()
	end
	Engine[0xA0F090AEEC9C553]( 0 < #f63_arg0.menuInfoStack )
end

LUI.FlowManager.PushMenuInfo = function ( f62_arg0, f62_arg1 )
	f62_arg0:SetStack( f62_arg1 )
	if f62_arg1.isModal then
		f62_arg0:InsertMenuInfo( #f62_arg0.menuInfoStack + 1, f62_arg1 )
	else
		local f62_local0 = #f62_arg0.menuInfoStack + 1
		if 1 < f62_local0 and f62_arg0.menuInfoStack[f62_local0 - 1].isModal then
			
		else
			
		end
		f62_arg0:InsertMenuInfo( f62_local0, f62_arg1 )
	end
end

LUI.FlowManager.SetStack = function ( f61_arg0, f61_arg1 )
	assert( f61_arg1.name )
	local f61_local0 = PresetStacks[f61_arg1.name]
	if not f61_local0 then
		return 
	end
	local f61_local1 = f61_arg1.controller
	DebugPrint( "FlowManager: Rewriting menu stack for " .. f61_arg1.name )
	if Engine[0x2DA54CF5D6B7F02]() then
		local f61_local2 = ""
		for f61_local7, f61_local8 in ipairs( f61_arg0.menuInfoStack ) do
			local f61_local9 = f61_local2
			local f61_local6
			if 1 < f61_local7 then
				f61_local6 = " > "
			else
				f61_local6 = ""
			end
			f61_local2 = f61_local9 .. f61_local6 .. f61_local8.name
		end
		DebugPrint( "    Current stack: " .. f61_local2 )
		f61_local2 = ""
		for f61_local7, f61_local8 in ipairs( f61_local0 ) do
			local f61_local9 = f61_local2
			local f61_local6
			if 1 < f61_local7 then
				f61_local6 = " > "
			else
				f61_local6 = ""
			end
			f61_local2 = f61_local9 .. f61_local6 .. f61_local8.name
		end
		DebugPrint( "    Requesting: " .. f61_local2 .. " > " .. f61_arg1.name )
	end
	for f61_local5, f61_local7 in ipairs( f61_arg0.menuInfoStack ) do
		if #f61_local0 < f61_local5 or f61_local7.name ~= f61_local0[f61_local5].name then
			for f61_local8 = #f61_arg0.menuInfoStack, f61_local5, -1 do
				local f61_local10 = f61_arg0.menuInfoStack[f61_local8]
				if not f61_local10.isModal then
					f61_arg0:CloseMenuInfo( f61_local10 )
					f61_arg0:RemoveMenuInfo( f61_local10 )
				end
			end
		end
	end
	for f61_local5, f61_local7 in ipairs( f61_local0 ) do
		if #f61_arg0.menuInfoStack < f61_local5 or f61_local7.name ~= f61_arg0.menuInfoStack[f61_local5].name then
			f61_arg0:PushMenuInfo( f61_arg0:CreateMenuInfo( f61_local7.name, nil, f61_local7.exclusiveController, f61_local1 ) )
		end
	end
	DebugPrint( "Set stack complete" )
end

LUI.FlowManager.PrintStack = function ( f60_arg0 )
	DebugPrint( "----MENU STACK TOP----" )
	for f60_local0 = #f60_arg0.menuInfoStack, 1, -1 do
		local f60_local3 = f60_arg0.menuInfoStack[f60_local0]
		local f60_local4
		if f60_local3.menu then
			f60_local4 = "Opened"
		else
			f60_local4 = "Closed"
		end
		DebugPrint( f60_local0 .. ") " .. f60_local3.name .. " (" .. f60_local4 .. ")" )
	end
	DebugPrint( "---MENU STACK BOTTOM---" )
end

LUI.FlowManager.CheckLeakedAllocatedElements = function ( f59_arg0 )
	if Engine[0x2DA54CF5D6B7F02]() and CONDITIONS.InFrontend() and RequestMemoryLeakCheck then
		RequestMemoryLeakCheck()
	end
end

LUI.FlowManager.MenuStackToString = function ( f58_arg0 )
	local f58_local0 = "----MENU STACK TOP----"
	for f58_local1 = #f58_arg0.menuInfoStack, 1, -1 do
		local f58_local4 = f58_arg0.menuInfoStack[f58_local1]
		local f58_local5
		if f58_local4.menu then
			f58_local5 = "Opened"
		else
			f58_local5 = "Closed"
		end
		f58_local0 = f58_local0 .. f58_local1 .. ") " .. f58_local4.name .. " (" .. f58_local5 .. ")" .. "| "
	end
	return f58_local0 .. "---MENU STACK BOTTOM---"
end

LUI.FlowManager.StackContains = function ( f57_arg0, f57_arg1 )
	for f57_local3, f57_local4 in ipairs( f57_arg0.menuInfoStack ) do
		if f57_local4.name == f57_arg1 then
			return true
		end
	end
	return false
end

LUI.FlowManager.StackContainsAny = function ( f56_arg0, f56_arg1 )
	for f56_local6, f56_local7 in ipairs( f56_arg0.menuInfoStack ) do
		for f56_local3, f56_local4 in pairs( f56_arg1 ) do
			if f56_local7.name == f56_local4 then
				return true
			end
		end
	end
	return false
end

LUI.FlowManager.GetStackTop = function ( f55_arg0, f55_arg1 )
	local f55_local0 = #f55_arg0.menuInfoStack
	if not f55_arg1 and 1 <= f55_local0 and f55_arg0.menuInfoStack[f55_local0].isModal then
		
	else
		
	end
	if 1 <= f55_local0 then
		return f55_arg0.menuInfoStack[f55_local0]
	else
		return nil
	end
end

LUI.FlowManager.GetTopMostOpenMenuInfo = function ( f54_arg0 )
	if not f54_arg0 then
		f54_arg0 = LUI.FlowManager.GetFlowManager()
	end
	if f54_arg0 then
		local f54_local0 = #f54_arg0.menuInfoStack
		if 1 <= f54_local0 and not f54_arg0.menuInfoStack[f54_local0].menu then
			
		else
			
		end
		if 1 <= f54_local0 then
			return f54_arg0.menuInfoStack[f54_local0]
		end
	end
	return nil
end

LUI.FlowManager.IsStackEmpty = function ( f53_arg0 )
	if not f53_arg0 then
		f53_arg0 = LUI.FlowManager.GetFlowManager()
	end
	local f53_local0
	if f53_arg0 then
		f53_local0 = f53_arg0
	else
		f53_local0 = #f53_arg0.menuInfoStack == 0
	end
	return f53_local0
end

LUI.FlowManager.AreMainMenuFencedOut = function ( f52_arg0 )
	for f52_local3, f52_local4 in ipairs( f52_arg0.menuInfoStack ) do
		if (f52_local4.name == "MainMenuOffline" or f52_local4.name == "MainMenu") and f52_local4.fenced then
			return true
		end
	end
	return false
end

local f0_local8 = function ( f51_arg0, f51_arg1, f51_arg2 )
	if not false then
		
	else
		
	end
end

LUI.FlowManager.SetFirstTimeFlowCompletedForScreen = function ( f50_arg0, f50_arg1 )
	local f50_local0 = LUI.FlowManager._isScreenFirstTimeFlowCompleted or {}
	f50_local0[f50_arg0] = f50_arg1
	LUI.FlowManager._isScreenFirstTimeFlowCompleted = f50_local0
end

LUI.FlowManager.IsFirstTimeFlowForScreen = function ( f49_arg0 )
	local f49_local0 = LUI.FlowManager._isScreenFirstTimeFlowCompleted
	if not f49_local0 or f49_local0[f49_arg0] == nil then
		LUI.FlowManager.SetFirstTimeFlowCompletedForScreen( f49_arg0, false )
		return true
	else
		return f49_local0[f49_arg0] == false
	end
end

local f0_local9 = function ( f48_arg0 )
	if LUI.FlowManager.IsMenuOnTop( f0_local0 ) and CONDITIONS.InFrontend() then
		local f48_local0 = LUI.FlowManager.GetMenuNameAtIndex( -1 )
		GLOBAL_PANEL.CloseGlobalPanelNow()
		return f48_local0 == f48_arg0
	else
		return false
	end
end

local f0_local10 = function ( f47_arg0, f47_arg1 )
	local f47_local0 = Dvar[0x9E5BE3B4BBA4E0E]( 0xAC3DB553B77FE91 ) and f0_local0 or "OptionsMenuNewLayout"
	if LUI.FlowManager.IsFirstTimeFlowForScreen( f47_local0 ) then
		if LUI.FlowManager.IsMenuOnTop( GLOBAL_PANEL.NAME ) then
			local f47_local1 = LUI.FlowManager.GetMenuByName( GLOBAL_PANEL.NAME )
			f47_local1 = f47_local1.menu
			if f47_local1 then
				if f47_local1.GlobalPanel:GetCurrentTabIndex() ~= GLOBAL_PANEL.TAB_INDEX.OPTIONS then
					f47_local1.GlobalPanel:ChangeTab( GLOBAL_PANEL.TAB_INDEX.OPTIONS )
					return true
				elseif CONDITIONS.InGame() then
					LUI.FlowManager.RequestCloseAllMenus()
				else
					GLOBAL_PANEL.CloseGlobalPanel()
				end
			end
		elseif CONDITIONS.InGame() then
			f47_arg0:dispatchEventToRoot( {
				forcePause = true,
				name = "pause",
				immediate = true,
				controllerIndex = f47_arg1.controller,
				globalPanelTabIndex = GLOBAL_PANEL.TAB_INDEX.OPTIONS
			} )
			if Engine[0x74423E76DECE3E4]() then
				GAME.PauseGame()
			end
		else
			GLOBAL_PANEL.OpenGlobalPanel( f47_arg0, f47_arg1.controller, GLOBAL_PANEL.TAB_INDEX.OPTIONS )
		end
		return true
	elseif f0_local0( f47_local0 ) then
		return true
	elseif CONDITIONS.IsMenuInStack( f47_local0 ) then
		f47_arg0:dispatchEventToRoot( {
			name = "closing_quick_access_menu",
			controllerIndex = f47_arg1.controller
		} )
		if not LUI.FlowManager.IsMenuOnTop( f47_local0 ) then
			f0_local0( f47_arg0, f47_arg1, f47_local0 )
		end
	elseif not OSK[0x736AF74410E3002]() then
		f47_arg0:dispatchEventToRoot( {
			immediate = true,
			name = "opening_quick_access_menu"
		} )
		LUI.FlowManager.LeaveQuickMenus( false )
		ACTIONS.OpenOptionsMenu( f47_arg1.controller, nil, true )
		if Engine[0x74423E76DECE3E4]() and CONDITIONS.InGame() then
			GAME.PauseGame()
		end
	end
	return true
end

local f0_local11 = function ( f46_arg0, f46_arg1 )
	if Engine[0xD2813B521711C11]( f46_arg1.controller ) and CONDITIONS.IsSocialMenuEnable() then
		local f46_local0 = CODCASTER_CONDITIONS.IsCodcaster()
		if f46_local0 then
			f46_local0 = not CODCASTER_SETTINGS.GetSettingValue( f46_arg1.controller, "codcaster_socialshortcut" )
		end
		if CONDITIONS.InGame() then
			if f46_local0 then
				return false
			elseif LUI.FlowManager.IsMenuOnTop( GLOBAL_PANEL.NAME ) then
				local f46_local1 = LUI.FlowManager.GetMenuByName( GLOBAL_PANEL.NAME )
				f46_local1 = f46_local1.menu
				if f46_local1 and f46_local1.GlobalPanel:GetCurrentTabIndex() == GLOBAL_PANEL.TAB_INDEX.NOTIFICATIONS then
					LUI.FlowManager.RequestCloseAllMenus()
					return true
				end
			end
			LUI.FlowManager.RequestSocialPopup( f46_arg1.controller )
		elseif CONDITIONS.IsSocialEnabledInMainMenu( f46_arg0 ) and not f0_local0( SOCIAL_MENU_NAME ) then
			if FRIENDS.CanCloseSocial() then
				f46_arg0:dispatchEventToRoot( {
					name = "closing_quick_access_menu",
					controllerIndex = f46_arg1.controller
				} )
				FRIENDS.HandleSocial( f46_arg1.controller, true )
			elseif FRIENDS.CanOpenSocial( f46_arg1.controller ) then
				f46_arg0:dispatchEventToRoot( {
					immediate = true,
					name = "opening_quick_access_menu"
				} )
				LUI.FlowManager.LeaveQuickMenus( false )
				FRIENDS.HandleSocial( f46_arg1.controller, true )
			end
		end
		return true
	else
		return false
	end
end

local f0_local12 = function ( f45_arg0, f45_arg1 )
	if CONDITIONS.IsCIABuildEnabled() then
		return false
	elseif CONDITIONS.IsDMZGametype() or CONDITIONS.IsDMZMatch() then
		return false
	elseif not CONDITIONS.IsCoreMultiplayer() or CONDITIONS.InGame() and not CONDITIONS.IsClassChoiceAllowed( f45_arg0, f45_arg1.controller ) then
		return false
	end
	local f45_local0 = GL_HACK.IsIW9LoadoutMenuEnabled() and f0_local0 or "LoadoutSelect"
	if f0_local0( f45_local0 ) then
		return true
	elseif CONDITIONS.IsMenuInStack( f45_local0 ) and not CONDITIONS.IsMenuInStack( f0_local0 ) then
		if LUI.FlowManager.IsMenuOnTop( f45_local0 ) or CONDITIONS.InGame() then
			f45_arg0:dispatchEventToRoot( {
				name = "closing_quick_access_menu",
				controllerIndex = f45_arg1.controller
			} )
			local f45_local1 = f0_local0
			local f45_local2 = f45_arg0
			local f45_local3 = f45_arg1
			local f45_local4
			if CONDITIONS.InFrontend() and not f45_local0 then
				f45_local4 = f45_local0
			else
				f45_local4 = nil
			end
			f45_local1( f45_local2, f45_local3, f45_local4 )
		else
			ACTIONS.PopMenuStackUpToMenu( f45_local0 )
		end
	else
		if CONDITIONS.IsMenuInStack( f0_local0 ) then
			Engine[0x6055C55456F05DF]( "exit_firing_range", 1 )
			if Engine[0x3ECA657EE4C6C9]() then
				Engine[0x5F965FF5540EAC8]( true )
			end
			f0_local0( f45_arg0, f45_arg1, f0_local0 )
		end
		f45_arg0:dispatchEventToRoot( {
			immediate = true,
			name = "opening_quick_access_menu"
		} )
		LUI.FlowManager.LeaveQuickMenus( false )
		LUI.FlowManager.RequestAddMenu( f45_local0, true, f45_arg1.controller, nil, nil, true )
	end
	return true
end

local f0_local13 = function ( f44_arg0, f44_arg1 )
	local f44_local0 = Dvar[0x9E5BE3B4BBA4E0E]( 0xB32F268C08CD4E8 )
	Dvar[0x8EA06EEDB58D872]( 0xB32F268C08CD4E8, not f44_local0 )
	local f44_local1 = LUI.TelemetryLayer.GetLayer()
	if f44_local1 then
		f44_local1:processEvent( {
			name = "update_telemetry",
			id = "sound",
			value = OPTIONS.ValueToIndex( not f44_local0 ) - 1,
			controllerIndex = f44_arg1.controller
		} )
	end
	return true
end

local f0_local14 = function ( f43_arg0, f43_arg1 )
	local f43_local0 = Social[0xF12FC4AFD7A2A6D]( f43_arg1.controller )
	if Social[0x97E2C97762054B6]( f43_arg1.controller, f43_local0 ) then
		Social[0x4F9EEF9CB166118]( f43_arg1.controller, f43_local0, false )
	else
		Social[0x4F9EEF9CB166118]( f43_arg1.controller, f43_local0, true )
	end
	return true
end

local f0_local15 = function ( f42_arg0, f42_arg1 )
	Social[0x7FD640B7D8FD15E]( f42_arg1.controller )
end

local f0_local16 = function ( f41_arg0, f41_arg1 )
	if CONDITIONS.InFrontend() then
		if CONDITIONS.IsMenuInStack( f0_local0 ) then
			if LUI.FlowManager.IsMenuOnTop( f0_local0 ) then
				GLOBAL_PANEL.CloseGlobalPanel()
			else
				ACTIONS.PopMenuStackUpToMenu( f0_local0 )
				GLOBAL_PANEL.CloseGlobalPanel()
			end
		else
			local f41_local0 = f41_arg0:GetStackTop( true )
			if f41_local0 then
				GLOBAL_PANEL.OpenGlobalPanel( f41_local0, f41_arg1.controller )
			end
		end
		return true
	elseif CONDITIONS.InGame() then
		if CONDITIONS.IsMenuInStack( f0_local0 ) or CONDITIONS.IsMenuInStack( f0_local0 ) then
			if LUI.FlowManager.IsMenuOnTop( f0_local0 ) or LUI.FlowManager.IsMenuOnTop( f0_local0 ) then
				LUI.FlowManager.RequestCloseAllMenus()
				if Engine[0x74423E76DECE3E4]() then
					ACTIONS.ResumeGame()
				end
			else
				ACTIONS.PopMenuStackUpToMenu( f0_local0 )
			end
		else
			local f41_local0 = LUI.FlowManager.GetMenuStack()
			if f41_local0 and 0 < #f41_local0 then
				LUI.FlowManager.RequestCloseAllMenus()
			end
			f41_arg0:dispatchEventToRoot( {
				name = "pause",
				forcePause = true,
				immediate = true,
				controllerIndex = f41_arg1.controller
			} )
			if Engine[0x74423E76DECE3E4]() then
				GAME.PauseGame()
			end
		end
		return true
	else
		return false
	end
end

local f0_local17 = function ( f40_arg0, f40_arg1 )
	if CONDITIONS.IsOptionsSearchEnabled() and (CONDITIONS.InFrontend() or CONDITIONS.InGame() and not LUI.FlowManager.IsStackEmpty()) then
		LUI.FlowManager.RequestPopupMenu( element, "GlobalPanelOptionsSearch", true, f40_arg1.controller )
	end
end

local f0_local18 = function ( f39_arg0, f39_arg1 )
	if CONDITIONS.IsMenuInStack( f0_local0 ) then
		f39_arg0:dispatchEventToRoot( {
			name = "closing_quick_access_menu",
			controllerIndex = f39_arg1.controller
		} )
		f0_local0( f39_arg0, f39_arg1, f0_local0 )
	else
		ACTIONS.OpenBindingPreview( f39_arg1.controller )
	end
end

local f0_local19 = function ( f38_arg0, f38_arg1 )
	local f38_local0 = f38_arg0.root and f38_arg0.root:GetControllerIndex() or f38_arg1.controller
	if (CONDITIONS.InFrontend() or CONDITIONS.InGame() and not LUI.FlowManager.IsStackEmpty()) and CONDITIONS.IsChannelsEnabled( f38_local0 ) then
		if CONDITIONS.IsMenuInStack( f0_local0 ) then
			if LUI.FlowManager.IsMenuOnTop( f0_local0 ) then
				CHANNELS.CloseChannelPanel()
				if CONDITIONS.InFrontend() then
					GLOBAL_PANEL.CloseGlobalPanel()
				end
			else
				ACTIONS.PopMenuStackUpToMenu( f0_local0 )
				CHANNELS.CloseChannelPanel()
				if CONDITIONS.InFrontend() then
					GLOBAL_PANEL.CloseGlobalPanel()
				end
			end
		else
			local f38_local1 = f38_arg0:GetStackTop( true )
			if f38_local1 then
				local f38_local2 = LUI.FlowManager.GetPerControllerPersistentData( f38_local0 )
				local f38_local3 = f38_local2.lastSelectedChatID
				local f38_local4 = CHANNELS.GetChannelIDForChatID( f38_local0, f38_local3 )
				local f38_local5
				if not CHANNELS.IsValidPartyID( f38_local4 ) then
					f38_local5 = not TEXTCHAT.IsValidChatID( f38_local3 )
				else
					f38_local5 = false
				end
				if f38_local5 then
					if not LUI.FlowManager.IsMenuOnTop( f0_local0 ) then
						GLOBAL_PANEL.OpenGlobalPanel( f38_local1, f38_local0, GLOBAL_PANEL.TAB_INDEX.CHANNELS )
					end
				else
					CHANNELS.OpenChannelPanel( f38_local0, f38_local4, f38_local3, {
						openGlobalPanel = true,
						openedWithShortcut = true,
						defaultTabIndex = CHANNELS.TAB_ID.CHAT
					} )
				end
			end
		end
		return true
	else
		return false
	end
end

local f0_local20 = function ( f37_arg0, f37_arg1 )
	local f37_local0 = Engine[0xEE6F69FEA944B13]()
	assert( f37_local0 )
	if CONDITIONS.InFrontend() then
		local f37_local1 = true
		if IsMenuInStack( f37_local0, SOCIAL_MENU_NAME ) then
			f37_arg0:dispatchEventToRoot( {
				name = "closing_quick_access_menu",
				controllerIndex = f37_arg1.controller
			} )
			f0_local0( f37_arg0, f37_arg1, SOCIAL_MENU_NAME )
			f37_local1 = false
		end
		if IsMenuInStack( f37_local0, f0_local0 ) then
			f37_arg0:dispatchEventToRoot( {
				name = "closing_quick_access_menu",
				controllerIndex = f37_arg1.controller
			} )
			f0_local0( f37_arg0, f37_arg1, f0_local0 )
			f37_local1 = false
		end
		if IsMenuInStack( f37_local0, f0_local0 ) then
			f37_arg0:dispatchEventToRoot( {
				name = "closing_quick_access_menu",
				controllerIndex = f37_arg1.controller
			} )
			f0_local0( f37_arg0, f37_arg1, f0_local0 )
			f37_local1 = false
		end
		if IsMenuInStack( f37_local0, f0_local0 ) then
			Engine[0x6055C55456F05DF]( "exit_firing_range", 1 )
			if Engine[0x3ECA657EE4C6C9]() then
				Engine[0x5F965FF5540EAC8]( true )
			end
			f0_local0( f37_arg0, f37_arg1, f0_local0 )
		end
		if IsMenuInStack( f37_local0, f0_local0 ) then
			if f37_local1 then
				GLOBAL_PANEL.CloseGlobalPanel()
			else
				f0_local0( f37_arg0, f37_arg1, f0_local0 )
			end
		end
	else
		if IsMenuInStack( f37_local0, f0_local0 ) then
			local f37_local1 = LUI.FlowManager.GetScopedData( f0_local0 )
			if f37_local1.openedFromScriptRequest then
				return true
			end
		end
		LUI.FlowManager.RequestCloseAllMenus()
	end
	return true
end

local f0_local21 = function ( f36_arg0 )
	local f36_local0 = {
		quick_social = true,
		search_bar = true,
		keyboard_preview = true,
		global_panel = true,
		quick_options = true,
		quick_cac = true
	}
	if f36_local0[f36_arg0] and CONDITIONS.InGame() then
		if LUI.LoadingScreenManager then
			return LUI.LoadingScreenManager.IsGameLoading()
		else
			return not Game[0xA988866C889EAAD]()
		end
	else
		return false
	end
end

local f0_local22 = function ( f35_arg0, f35_arg1 )
	if CONDITIONS.IsBenchmarkMode() and not CONDITIONS.IsMuteSoundShortcut( f35_arg1 ) then
		return false
	elseif f35_arg1 == "quick_social" or f35_arg1 == "quick_options" or f35_arg1 == "global_panel" or f35_arg1 == "quick_cac" or f35_arg1 == "open_chat" or f35_arg1 == "search_bar" then
		local f35_local0 = f35_arg0:GetTopMostOpenMenuInfo()
		if f35_local0 and (not (not f35_local0.menu or not f35_local0.menu.isQuickAccessShortcutsDisabled) or f35_local0.isPopup and f35_local0.isModal) then
			return false
		end
	end
	if (f35_arg1 == "global_panel" or f35_arg1 == "open_chat" or f35_arg1 == "quick_options") and LUI.FlowManager.IsMenuOnTop( "MainLockoutMenu" ) then
		return false
	elseif f0_local0( f35_arg1 ) then
		return false
	elseif f35_arg1 == "quick_social" and not CONDITIONS.IsSocialShortcutAllowed() then
		return false
	end
	return true
end

local f0_local23 = function ( f34_arg0, f34_arg1 )
	if CONDITIONS.AreQuickAccessShortcutsEnabled() and f34_arg1.down and f0_local0( f34_arg0, f34_arg1.button ) then
		if f34_arg1.button == "mute_sound" then
			return f0_local0( f34_arg0, f34_arg1 )
		elseif f34_arg1.button == "mute_voicechat" then
			return f0_local0( f34_arg0, f34_arg1 )
		elseif f34_arg1.button == "mute_microphone" then
			return f0_local0( f34_arg0, f34_arg1 )
		elseif f34_arg1.button == "quick_action_notification" then
			f34_arg0:dispatchEventToRoot( {
				isPrimaryAction = false,
				name = "kbm_notification_prompt_answer"
			} )
		elseif f34_arg1.button == "quick_options" then
			return f0_local0( f34_arg0, f34_arg1 )
		elseif f34_arg1.button == "global_panel" then
			if LUI.ToastManager.HavePrimaryActionOnScreen() then
				f34_arg0:dispatchEventToRoot( {
					isPrimaryAction = true,
					name = "kbm_notification_prompt_answer"
				} )
			else
				return f0_local0( f34_arg0, f34_arg1 )
			end
		elseif f34_arg1.button == "quick_social" then
			return f0_local0( f34_arg0, f34_arg1 )
		elseif f34_arg1.button == "quick_cac" then
			return f0_local0( f34_arg0, f34_arg1 )
		elseif f34_arg1.button == "menu_dismiss" then
			return f0_local0( f34_arg0, f34_arg1 )
		elseif f34_arg1.button == "open_chat" then
			return f0_local0( f34_arg0, f34_arg1 )
		elseif f34_arg1.button == "search_bar" then
			return f0_local0( f34_arg0, f34_arg1 )
		elseif f34_arg1.button == "keyboard_preview" then
			return f0_local0( f34_arg0, f34_arg1 )
		end
	end
	return false
end

LUI.FlowManager.LeaveQuickMenus = function ( f33_arg0 )
	local f33_local0 = Engine[0xEE6F69FEA944B13]()
	assert( f33_local0 )
	local f33_local1
	if f33_arg0 == nil then
		f33_local1 = true
	else
		f33_local1 = f33_arg0
	end
	if f33_local1 then
		f33_local0:dispatchEventToRoot( {
			name = "closing_quick_access_menu"
		} )
	end
	if IsMenuInStack( f33_local0, SOCIAL_MENU_NAME ) then
		f0_local0( f33_local0.flowManager, nil, SOCIAL_MENU_NAME )
	end
	local f33_local2 = Dvar[0x9E5BE3B4BBA4E0E]( 0xAC3DB553B77FE91 ) and f0_local0 or "OptionsMenuNewLayout"
	if IsMenuInStack( f33_local0, f33_local2 ) then
		f0_local0( f33_local0.flowManager, nil, f33_local2 )
	end
	if IsMenuInStack( f33_local0, f0_local0 ) and not IsMenuInStack( f33_local0, f0_local0 ) then
		f0_local0( f33_local0.flowManager, nil, f0_local0 )
	end
end

LUI.FlowManager.init = function ( f30_arg0, f30_arg1, f30_arg2 )
	LUI.UIElement.init( f30_arg0 )
	f30_arg0.id = "flowManager"
	f30_arg0.root = f30_arg1
	f30_arg0._controllerIndex = f30_arg2
	f30_arg0.menuInfoStack = {}
	f30_arg0.stackVersion = 0
	f30_arg0.stackChangeTime = Engine[0x6991337AE950F99]()
	f30_arg0.stackChangeMenu = 0
	f30_arg0.isPartyUIRootDirty = false
	f30_arg0.isGameModeUIRootDirty = false
	f30_arg0.gameModeKey = Enum[0xAC7E3CE067D9A9F][0xC0D17BAD169557B]
	f30_arg0:registerEventHandler( "gamepad_button", function ( element, event )
		if f30_arg0( element, event ) then
			return true
		end
		local f32_local0 = f30_arg0:GetTopMostOpenMenuInfo()
		if f32_local0 then
			local f32_local1
			if f32_local0.controller and event.controller and f32_local0.controller ~= event.controller then
				f32_local1 = false
			else
				f32_local1 = true
			end
			if f32_local1 then
				return element:ForwardEventToTopMostOpenMenu( event )
			elseif not f32_local0.isControllerExclusive then
				if LUI.FlowManager.TabsBlockInput( f32_local0.menu, event ) then
					return false
				else
					return element:ForwardEventToTopMostOpenMenu( event )
				end
			end
		end
		return false
	end )
	if Engine[0x5EE05AD994388B6]() then
		f30_arg0:registerEventHandler( "mousemove", f30_arg0.ForwardMouseEventToTopMostOpenMenu )
		f30_arg0:registerEventHandler( "mousedown", f30_arg0.ForwardMouseEventToTopMostOpenMenu )
		f30_arg0:registerEventHandler( "mouseup", f30_arg0.ForwardMouseEventToTopMostOpenMenu )
	end
	local f30_local0 = Engine[0x7AE6126734FCDB]()
	local f30_local1 = f30_arg0
	local f30_local2 = f30_arg0.registerEventHandler
	local f30_local3 = "addmenu"
	local f30_local4
	if f30_local0 then
		f30_local4 = f30_arg0.addMenuHandler_TEL
		if not f30_local4 then
		
		else
			f30_local2( f30_local1, f30_local3, f30_local4 )
			f30_local1 = f30_arg0
			f30_local2 = f30_arg0.registerEventHandler
			f30_local3 = "popupmenu"
			if f30_local0 then
				f30_local4 = f30_arg0.popupMenuHandler_TEL
				if not f30_local4 then
				
				else
					f30_local2( f30_local1, f30_local3, f30_local4 )
					f30_local1 = f30_arg0
					f30_local2 = f30_arg0.registerEventHandler
					f30_local3 = "leavemenu"
					if f30_local0 then
						f30_local4 = f30_arg0.leaveMenuHandler_TEL
						if not f30_local4 then
						
						else
							f30_local2( f30_local1, f30_local3, f30_local4 )
							f30_local1 = f30_arg0
							f30_local2 = f30_arg0.registerEventHandler
							f30_local3 = "restoreMenu"
							if f30_local0 then
								f30_local4 = f30_arg0.restoreMenuHandler_TEL
								if not f30_local4 then
								
								else
									f30_local2( f30_local1, f30_local3, f30_local4 )
									f30_local1 = f30_arg0
									f30_local2 = f30_arg0.registerEventHandler
									f30_local3 = "auto_navigation_to_menu"
									if f30_local0 then
										f30_local4 = f30_arg0.autoNavigationToMenuHandler_TEL
										if not f30_local4 then
										
										else
											f30_local2( f30_local1, f30_local3, f30_local4 )
											f30_arg0:registerEventHandler( "closeallmenus", f30_arg0.closeAllMenusHandler )
											if Engine[0x9258F49F515F97B]() and not Engine[0x12586A3F4FB490E]() then
												f30_arg0:registerOmnvarHandler( "ui_options_menu", function ( f31_arg0, f31_arg1 )
													DebugPrint( "ui_options_menu omnvar handler called. Value is: " .. tostring( f31_arg1.value ) )
													f31_arg0:OpenMenuByScriptRequest( f31_arg1.value )
												end )
												f30_arg0:OpenMenuByScriptRequest( Game[0x28624DEF6F708C8]( f30_arg2, "ui_options_menu" ) )
											end
											if CONDITIONS.IsMobileOrMobileSim() then
												LUI.FlowManager.FlowMenus[PartyUIRoot.MP_MAIN_MENU] = "MainMenuMobile"
												LUI.FlowManager.FlowMenus[PartyUIRoot.BR_MAIN_MENU] = "MainMenuMobile"
												LUI.FlowManager.FlowMenus[PartyUIRoot.BATTLE_ROYALE_MENU_PUBLIC_LOBBY] = "MagellanLobby"
											end
										end
									end
									f30_local4 = f30_arg0.autoNavigationToMenuHandler
								end
							end
							f30_local4 = f30_arg0.restoreMenuHandler
						end
					end
					f30_local4 = f30_arg0.leaveMenuHandler
				end
			end
			f30_local4 = f30_arg0.popupMenuHandler
		end
	end
	f30_local4 = f30_arg0.addMenuHandler
end

LUI.FlowManager.GetGamemodeForUIRoot = function ( f29_arg0 )
	if f29_arg0 > PartyUIRoot.GAMEMODE_NONE_MENUS_START and f29_arg0 < PartyUIRoot.GAMEMODE_NONE_MENUS_END then
		return CoD.PlayMode.None
	elseif f29_arg0 > PartyUIRoot.GAMEMODE_SP_MENUS_START and f29_arg0 < PartyUIRoot.GAMEMODE_SP_MENUS_END then
		return CoD.PlayMode.SP
	elseif f29_arg0 > PartyUIRoot.GAMEMODE_MP_MENUS_START and f29_arg0 < PartyUIRoot.GAMEMODE_MP_MENUS_END then
		return CoD.PlayMode.Core
	elseif f29_arg0 > PartyUIRoot.GAMEMODE_CP_MENUS_START and f29_arg0 < PartyUIRoot.GAMEMODE_CP_MENUS_END then
		return CoD.PlayMode.Aliens
	elseif f29_arg0 > PartyUIRoot.GAMEMODE_WZ_MENUS_START and f29_arg0 < PartyUIRoot.GAMEMODE_WZ_MENUS_END then
		return CoD.PlayMode.Core
	else
		assert( "LUI.FlowManager.GetGamemodeForUIRoot invalid ui root " .. tostring( f29_arg0 ) )
	end
end

LUI.FlowManager.IsUIRootBRGamemode = function ( f28_arg0 )
	local f28_local0
	if (f28_arg0 < BR_MENUS_START or f28_arg0 > BR_MENUS_END) and (f28_arg0 <= PartyUIRoot.GAMEMODE_WZ_MENUS_START or f28_arg0 >= PartyUIRoot.GAMEMODE_WZ_MENUS_END) then
		f28_local0 = false
	else
		f28_local0 = true
	end
	return f28_local0
end

LUI.FlowManager.IsAutoNavigationActive = function ()
	local f27_local0 = Engine[0xEE6F69FEA944B13]()
	local f27_local1 = assert
	local f27_local2
	if f27_local0 then
		f27_local2 = f27_local0
	else
		f27_local2 = f27_local0.flowManager
	end
	f27_local1( f27_local2 )
	f27_local1 = f27_local0.flowManager
	local f27_local3 = f27_local1.isGameModeUIRootDirty
	if not f27_local3 then
		f27_local3 = f27_local1.isPartyUIRootDirty
	end
	return f27_local3
end

LUI.FlowManager.RequestAutomaticNavigation = function ( f26_arg0, f26_arg1 )
	DebugPrint( "RequestAutomaticNavigation to  " .. tostring( f26_arg0 ) )
	local f26_local0 = Engine[0xEE6F69FEA944B13]()
	local f26_local1 = assert
	local f26_local2
	if f26_local0 then
		f26_local2 = f26_local0
	else
		f26_local2 = f26_local0.flowManager
	end
	f26_local1( f26_local2 )
	f26_local1 = f26_local0.flowManager
	f26_local1.isGameModeUIRootDirty = true
	f26_local1._autoNavDestination = f26_arg0
	f26_local1._autoNavBuildData = f26_arg1
end

LUI.FlowManager.MarkUIRootDirty = function ( f25_arg0 )
	assert( f25_arg0 )
	DebugPrintLogFileOnly( "MarkUIRootDirty " .. f25_arg0 )
	local f25_local0 = Engine[0xEE6F69FEA944B13]()
	local f25_local1 = assert
	local f25_local2
	if f25_local0 then
		f25_local2 = f25_local0
	else
		f25_local2 = f25_local0.flowManager
	end
	f25_local1( f25_local2 )
	f25_local0.flowManager.isPartyUIRootDirty = true
end

LUI.FlowManager.AutomaticNavigationFrame = function ( f24_arg0 )
	local f24_local0 = PartyUIRoot.FREE
	local f24_local1 = LUI.FlowManager.AutoNavigationType.NONE
	local f24_local2 = {}
	local f24_local3 = {}
	local f24_local4 = f24_arg0._controllerIndex
	if not f24_local4 then
		f24_local4 = Engine[0x45B054C920178E9]()
	end
	if f24_arg0.isGameModeUIRootDirty then
		f24_local0 = f24_arg0._autoNavDestination
		f24_local1 = LUI.FlowManager.AutoNavigationType.GAME_MODE
		if f24_arg0._autoNavBuildData then
			f24_local2 = f24_arg0._autoNavBuildData
		end
	elseif f24_arg0.isPartyUIRootDirty then
		f24_local0 = Lobby[0x340158680AC50CB]()
		f24_local1 = LUI.FlowManager.AutoNavigationType.PARTY_UI_ROOT
	else
		local f24_local5 = Tournament[0xB06A385411B9B43]()
		if f24_local5 ~= PartyUIRoot.FREE then
			f24_local0 = f24_local5
			f24_local1 = LUI.FlowManager.AutoNavigationType.TOURNAMENT
			f24_local3.leaveLobby = true
			f24_local3.createPrivateParty = true
		end
	end
	if f24_local0 ~= PartyUIRoot.FREE then
		if Friends[0x46D7C4C8488282E]() or not Engine[0x8B495DC361731F7]( f24_local4 ) or not Engine[0xDA7A89CE2B1A2CA]( f24_local4 ) or CONDITIONS.IsMagmaGameMode() then
			if f24_local0 == PartyUIRoot.MP_PUBLIC_MATCH_LOBBY then
				f24_local0 = PartyUIRoot.BATTLE_ROYALE_MENU_PUBLIC_LOBBY
			elseif f24_local0 == PartyUIRoot.TOURNAMENT_LOADING or f24_local0 == PartyUIRoot.TOURNAMENT_MATCHMAKING or f24_local0 == PartyUIRoot.TOURNAMENT_BRACKET then
				f24_local0 = TOURNAMENT.GetUIRootForF2PFromPremiumIfF2PAllowed( f24_local0 )
			end
		end
		if f24_arg0:DoAutomaticNavigation( f24_local0, f24_local2, f24_local3 ) then
			if f24_local1 == LUI.FlowManager.AutoNavigationType.GAME_MODE then
				f24_arg0.isGameModeUIRootDirty = false
				f24_arg0._autoNavDestination = nil
				f24_arg0._autoNavBuildData = nil
			elseif f24_local1 == LUI.FlowManager.AutoNavigationType.PARTY_UI_ROOT then
				f24_arg0.isPartyUIRootDirty = false
			elseif f24_local1 == LUI.FlowManager.AutoNavigationType.TOURNAMENT then
				Tournament[0xB38329E392C08B9]()
			end
		else
			LUI.MouseCursorContextualMenuLayer.ForceCloseContextualMenu()
		end
	end
end

LUI.FlowManager.DoAutomaticNavigation = function ( f23_arg0, f23_arg1, f23_arg2, f23_arg3 )
	local f23_local0 = f23_arg3.leaveLobby
	local f23_local1 = f23_arg3.createPrivateParty
	if Engine[0x7B6EB1163EFAAE0]() then
		END_GAME.StopServerAndLeave( f23_arg0 )
		return false
	elseif not Engine[0x12586A3F4FB490E]() then
		return false
	elseif Lobby[0x9FF3CECE5278A72]() then
		return false
	elseif f23_local0 and Lobby[0xF1D2956B0C99DF6]() then
		if IsPrivateMatch() then
			Lobby.LeaveCustomGameLobby()
		elseif IsPublicMatch() then
			Lobby.LeavePublicLobby()
		end
		return false
	end
	local f23_local2 = Engine[0x45B054C920178E9]()
	if f23_local0 and IsSystemLink() then
		Engine[0x5DEE98AA6FB3C2]( f23_local2, CoD.LeavePartyMoveUI.NO, CoD.LeavePartyShowMessage.NO, "DoAutomaticNavigation systemlink" )
		Dvar[0x8EA06EEDB58D872]( 0x3DDB961100B5F47, false )
		return false
	elseif f23_local1 and not Lobby[0x63537242F1D48FF]() then
		Social[0x4CFFBE37F5E69BB]( f23_local2, "DoAutomaticNavigation" )
		return false
	end
	local f23_local3 = Engine[0xCFB814FF4C67F87]()
	if (f23_local3 ~= LUI.FlowManager.GetGamemodeForUIRoot( f23_arg1 ) or LUI.FlowManager.IsUIRootBRGamemode( f23_arg1 ) ~= CONDITIONS.IsMagmaGameMode() and not CONDITIONS.IsMobileOrMobileSim()) and f23_local3 ~= CoD.PlayMode.None then
		local f23_local4 = Engine[0x45B054C920178E9]()
		if GL_HACK.IsStoppingGamemodeBeforeMain() then
			Engine[0x5BEA42EE45B1EE0]()
		end
		f23_arg0:closeAllMenus()
		f23_arg0:addMenu( {
			menu = LUI.FlowManager.FlowMenus[PartyUIRoot.LOCKOUT_MENU],
			controller = f23_local4
		} )
		return false
	end
	local f23_local4 = LUI.FlowManager.FlowMenus[f23_arg1]
	if not f23_local4 then
		return true
	end
	for f23_local8, f23_local9 in pairs( IgnoreFollowHostCallbacks ) do
		if f23_arg0:StackContains( f23_local8 ) and f23_local9( f23_local4 ) then
			return true
		end
	end
	f23_local5 = f23_arg0:StackContains( f23_local4 )
	f23_local6 = false
	for f23_local7 = f23_arg1 + 1, PartyUIRoot.LAST, 1 do
		if f23_arg0:StackContains( LUI.FlowManager.FlowMenus[f23_local7] ) then
			f23_local6 = true
			break
		end
	end
	if f23_local5 and not f23_local6 then
		return true
	end
	DebugPrint( "LUI.FlowManager.FollowPartyHost to " .. f23_local4 )
	f23_arg0:closeAllMenus()
	f23_arg0:addMenu( {
		menu = f23_local4,
		controller = f23_local2,
		data = f23_arg2
	} )
	return false
end

LUI.FlowManager.OpenMenuByScriptRequest = function ( f19_arg0, f19_arg1 )
	assert( Engine[0x9258F49F515F97B]() )
	if not Game[0xA988866C889EAAD]() then
		
	else
		
	end
	local f19_local0 = nil
	f19_local0 = function ( f21_arg0 )
		local f21_local0 = f19_arg0:Wait( 16 )
		f21_local0.onComplete = function ()
			if f21_arg0.root.loadingScreenManager and f21_arg0.root.loadingScreenManager:ShouldBeVisible() then
				f21_arg0( f21_arg0 )
			else
				f21_arg0()
			end
		end
		
	end
	
	local f19_local1 = {
		nil,
		"TeamSelectMenu",
		nil,
		"LaunchChunkNewPhasePopup",
		"FieldUpgrades",
		[2] = LOADOUT.GetLoadoutMenuRef()
	}
	if f19_local1[f19_arg1] then
		local f19_local2 = f19_arg0.root:GetControllerIndex()
		DebugPrint( "Begining stall for loading." )
		f19_local0( function ()
			LUI.FlowManager.RequestAddMenu( f19_arg0, true, f19_arg0, false, {
				openedFromScriptRequest = true
			}, true )
			if f19_arg0 ~= "LaunchChunkNewPhasePopup" then
				if CONDITIONS.IsMagmaGameMode() then
					LUI.FlowManager.RequestSetStack( f19_arg0, {
						{
							name = f19_arg0
						}
					} )
				else
					LUI.FlowManager.RequestSetStack( f19_arg0, {
						{
							name = "MPPauseMenu"
						}
					} )
				end
			end
		end )
	end
	LUI.FlowManager.RequestCloseAllMenus()
end

LUI.FlowManager.ShouldBeVisible = function ( f18_arg0 )
	local f18_local0 = Engine[0x12586A3F4FB490E]()
	if not f18_local0 then
		f18_local0 = Game[0xA988866C889EAAD]()
	end
	return f18_local0
end

LUI.FlowManager.SetGameModeKey = function ( f17_arg0 )
	local f17_local0 = Engine[0xEE6F69FEA944B13]()
	local f17_local1 = assert
	local f17_local2
	if f17_local0 then
		f17_local2 = f17_local0
	else
		f17_local2 = f17_local0.flowManager
	end
	f17_local1( f17_local2 )
	f17_local0.flowManager.gameModeKey = f17_arg0
end

LUI.FlowManager.LogMenuChangeTo = function ( f16_arg0, f16_arg1, f16_arg2 )
	if f16_arg0.stackChangeMenu ~= f16_arg2 then
		local f16_local0 = Engine[0x6991337AE950F99]()
		local f16_local1 = f16_local0 - f16_arg0.stackChangeTime
		if f16_arg0.stackChangeMenu ~= 0 then
			Engine[0xCC15E38125CE143]( f16_arg1, f16_arg0.stackChangeMenu, f16_arg2, f16_local1 )
		end
		f16_arg0.stackChangeMenu = f16_arg2
		f16_arg0.stackChangeTime = f16_local0
	end
end

LUI.FlowManager.Frame = function ( f15_arg0 )
	f15_arg0:RefreshStack()
	f15_arg0:AutomaticNavigationFrame()
end

LUI.FlowManager.InitLayer = function ( f13_arg0 )
	if Engine[0x12586A3F4FB490E]() and not f13_arg0._partyRootSubscription then
		local f13_local0 = LUI.DataSourceInGlobalModel.new( "frontEnd.lobby.partyUIRoot" )
		f13_local0 = f13_local0:GetModel( 0 )
		local f13_local1 = Lobby[0x340158680AC50CB]()
		f13_arg0._partyRootSubscription = f13_arg0:SubscribeToModel( f13_local0, function ( f14_arg0 )
			local f14_local0 = Lobby[0x340158680AC50CB]()
			if f14_local0 > PartyUIRoot.LOCKOUT_MENU then
				LUI.FlowManager.MarkUIRootDirty( "party root subscription" )
				local f14_local1 = LUI.FlowManager.FlowMenus[f13_arg0]
				if not f14_local1 then
					f14_local1 = tostring( f13_arg0 )
				end
				local f14_local2 = LUI.FlowManager.FlowMenus[f14_local0]
				if not f14_local2 then
					f14_local2 = tostring( f14_local0 )
				end
				DebugPrintLogFileOnly( "PartyUIRoot changed from " .. f14_local1 .. " to " .. f14_local2 )
				f13_arg0 = f14_local0
			end
		end )
	end
end

LUI.FlowManager.ClearLayer = function ( f12_arg0 )
	f12_arg0:closeAllMenus()
	if f12_arg0._partyRootSubscription then
		f12_arg0:UnsubscribeFromModel( f12_arg0._partyRootSubscription )
		f12_arg0._partyRootSubscription = nil
	end
end

LUI.FlowManager.RefreshStack = function ( f11_arg0 )
	if DataSources.alwaysLoaded.flowManager.stackEmpty then
		DataSources.alwaysLoaded.flowManager.stackEmpty:SetValue( f11_arg0._controllerIndex, not AnyActiveMenusInStack( Engine[0xEE6F69FEA944B13]() ) )
	end
	if #f11_arg0.menuInfoStack == 0 then
		return 
	end
	for f11_local8, f11_local9 in ipairs( f11_arg0.menuInfoStack ) do
		if f11_local9.fenceGroup then
			f11_local9.fenceGroup:Frame( f11_arg0.gameModeKey )
		end
		local f11_local3 = f11_local9.fenceGroup
		if f11_local3 then
			f11_local3 = not f11_local9.fenceGroup:Passes()
		end
		f11_local9.fenced = f11_local3
		if f11_local9.fenced then
			for f11_local3 = f11_local8 + 1, #f11_arg0.menuInfoStack, 1 do
				local f11_local6 = f11_arg0.menuInfoStack[f11_local3]
				if f11_local6 then
					local f11_local7 = f11_local6.fenceGroup
					if f11_local7 then
						f11_local7:Reset()
					end
				end
			end
		end
	end
	f11_local0 = #f11_arg0.menuInfoStack
	for f11_local9, f11_local3 in ipairs( f11_arg0.menuInfoStack ) do
		if f11_local3.fenced then
			f11_local0 = f11_local9 - 1
			break
		end
	end
	f11_local1 = 1
	for f11_local3, f11_local4 in ipairs( f11_arg0.menuInfoStack ) do
		if not f11_local4.isPopup and (f11_local4.menu or f11_local3 <= f11_local0) then
			local f11_local5 = assert
			local f11_local6 = f11_local4.menu
			if not f11_local6 then
				f11_local6 = not f11_local4.fenced
			end
			f11_local5( f11_local6 )
			f11_local1 = f11_local3
		end
	end
	f11_local2 = f11_arg0:GetStackVersion()
	for f11_local4, f11_local5 in ipairs( f11_arg0.menuInfoStack ) do
		if f11_local2 ~= f11_arg0:GetStackVersion() then
			return f11_arg0:RefreshStack()
		elseif f11_local4 < f11_local1 then
			if f11_local5.menu and not AlwaysVisible[f11_local5.name] then
				f11_arg0:CloseMenuInfo( f11_local5, false, true )
			end
		end
		if not f11_local5.menu and (f11_local4 <= f11_local0 or f11_local5.isModal) then
			assert( not f11_local5.fenced )
			Engine[0x20F70AE94873E0B]( "(FlowManager OpenMenuInfo) " .. f11_local5.name, "widget" )
			f11_arg0:OpenMenuInfo( f11_local5 )
			Engine[0xFE34BB8C92CDBEE]( "(FlowManager OpenMenuInfo) " .. f11_local5.name, "widget" )
		end
	end
	f11_local8 = f11_arg0._controllerIndex
	if not f11_local8 then
		f11_local8 = Engine[0x45B054C920178E9]()
	end
	f11_local9 = f0_local0( f11_local8 )
	for f11_local13, f11_local6 in ipairs( f11_arg0.menuInfoStack ) do
		local f11_local7 = f11_local6.onTop == true
		local f11_local10 = f11_local6.menu
		if f11_local10 then
			f11_local10 = f11_local13 == #f11_arg0.menuInfoStack
		end
		f11_local6.onTop = f11_local10
		if f11_local13 > f11_local0 or f11_local0 >= #f11_arg0.menuInfoStack then
			f11_local10 = false
		else
			f11_local10 = true
		end
		LUI.FlowManager.IsBelowBlockingFence = f11_local10
		if f11_local6.menu then
			if f11_local6.onTop then
				if f11_local6.menu.popupActive then
					f11_local6.menu:processEvent( {
						dispatchChildren = true,
						name = "popup_inactive"
					} )
					f11_local6.menu.popupActive = nil
				end
				if not f11_local7 then
					if DisableMousePointer[f11_local6.name] then
						f11_arg0.root:RemoveMouseCursor()
					else
						f11_arg0.root:TryAddMouseCursor()
					end
					local f11_local11, f11_local12 = f11_local6.menu:restoreState( f11_local9[f11_local6.name], f11_local6.controller )
					if not LUI.IsLastInputMouseNavigation( f11_local6.controller ) then
						if not f11_local11 or f11_local12 == 0 then
							Engine[0x20F70AE94873E0B]( "(FlowManager gain_focus) " .. f11_local6.name, "widget" )
							f11_local6.menu:processEvent( {
								name = "gain_focus",
								controller = f11_local6.controller,
								focusType = FocusType.MenuFlow
							} )
							Engine[0xFE34BB8C92CDBEE]( "(FlowManager gain_focus) " .. f11_local6.name, "widget" )
						end
					else
						Engine[0xA1DAA3E8650282A]( f11_local6.controller )
						LUI.MouseCursorTooltipLayer.ForceCloseTooltip( f11_local6.controller )
					end
					LUI.MouseCursorContextualMenuLayer.ForceCloseContextualMenu()
					f11_local9[f11_local6.name] = nil
				end
			else
				if f11_local7 then
					f11_local9[f11_local6.name] = f11_local6.menu:saveState()
					f11_local6.menu:processEvent( {
						name = "lose_focus"
					} )
					f11_local6.menu:processEvent( {
						dispatchChildren = true,
						name = "popup_active"
					} )
				end
				f11_local6.menu.popupActive = true
			end
			if f11_local6.menu.isBelowBlockingFence ~= f11_local10 then
				f11_local6.menu.isBelowBlockingFence = f11_local10
				if f11_local10 then
					f11_local6.menu:processEvent( {
						name = "below_blocking_fence"
					} )
				else
					f11_local6.menu:processEvent( {
						name = "not_below_blocking_fence",
						isAutoNavigationActive = f11_arg0.IsAutoNavigationActive()
					} )
				end
			end
		end
	end
	LUI.DeferredFence.DeferredFenceUpdate()
end

LUI.FlowManager.processEvent = function ( f10_arg0, f10_arg1 )
	local f10_local0 = nil
	local f10_local1 = f10_arg0.m_eventHandlers[f10_arg1.name]
	if f10_local1 then
		f10_local0 = f10_local1( f10_arg0, f10_arg1 )
	else
		f10_local0 = LUI.UIElement.processEvent( f10_arg0, f10_arg1 )
	end
	if not f10_local0 and f10_arg0.IsNavigationEvent( f10_arg1 ) then
		f10_arg0:EnsureFocus( f10_arg1 )
	end
	return f10_local0
end

LUI.FlowManager.EnsureFocus = function ( f9_arg0, f9_arg1 )
	local f9_local0 = f9_arg0.menuInfoStack[#f9_arg0.menuInfoStack]
	if f9_local0 and f9_local0.menu and not f9_local0.menu:getFirstInFocus() then
		DebugPrint( "FlowManager: No child in focus, trying to restore focus.  This should probably only happen when using a mouse" )
		local f9_local1 = LUI.FlowManager.GetScopedData( f9_local0.menu )
		f9_local0.menu:processEvent( {
			fromEnsureFocus = true,
			name = "gain_focus",
			controller = f9_local1.controllerIndex,
			focusType = f9_arg1.name
		} )
		DebugPrint( "CheckRestoreFocus to " .. f9_local0.name )
	end
end

LUI.FlowManager.ForwardEventToTopMostOpenMenu = function ( f8_arg0, f8_arg1 )
	local f8_local0 = f8_arg0:GetTopMostOpenMenuInfo()
	if f8_local0 then
		return f8_local0.menu:processEvent( f8_arg1 )
	else
		return false
	end
end

LUI.FlowManager.ForwardMouseEventToTopMostOpenMenu = function ( f7_arg0, f7_arg1 )
	if LUI.FocusDebug ~= nil then
		LUI.FocusDebug.StartFocusChain( f7_arg0 )
	end
	local f7_local0 = f7_arg0:ForwardEventToTopMostOpenMenu( f7_arg1 )
	if LUI.FocusDebug ~= nil then
		LUI.FocusDebug.EndFocusChain( f7_arg0 )
	end
	if f7_arg1.name == "mousemove" then
		return true
	else
		return f7_local0
	end
end

LUI.FlowManager.IsNavigationEvent = function ( f6_arg0 )
	if f6_arg0.name == "gamepad_button" and f6_arg0.down and f6_arg0.qualifier ~= "mousewheel" and (f6_arg0.button == "up" or f6_arg0.button == "down" or f6_arg0.button == "left" or f6_arg0.button == "right" or f6_arg0.button == "primary") then
		return true
	else
		return false
	end
end

LUI.FlowManager.TabsBlockInput = function ( f5_arg0, f5_arg1 )
	local f5_local0 = LUI.FlowManager.FindTabsAtElement( f5_arg0 )
	if f5_local0 and f5_local0:IsControllerExclusive() then
		if f5_local0:IsControllerExclusiveGamepadInput( f5_arg1.button ) and not f5_local0:IsExpectedController( f5_arg1.controller ) then
			return true
		elseif not f5_local0:IsControllerExclusiveGamepadInput( f5_arg1.button ) then
			f5_local0:SetupExclusiveControllerData( {
				isControllerExclusive = true,
				controllerIndex = f5_arg1.controller
			} )
		end
	end
	return false
end

LUI.FlowManager.FindTabsAtElement = function ( f4_arg0 )
	if f4_arg0 then
		if f4_arg0._isTabs then
			return f4_arg0
		elseif f4_arg0:getFirstChild() then
			
		else
			
		end
	end
end

LUI.FlowManager.MobileUpdateSocialSidebarVisibility = function ( f3_arg0, f3_arg1 )
	if not CONDITIONS.MobileSocialBarCreateCondition() then
		return 
	end
	local f3_local0 = LUI.MobileSocialBarLayer.GetLayer()
	f3_local0:UpdateEnabledInMenu( f3_arg1 )
	local f3_local1
	if f3_arg1.isPopup ~= true or f3_arg1.name == "FlyInPopup" then
		f3_local1 = false
	else
		f3_local1 = true
	end
	DataSources.frontEnd.deactivateSocialBar:SetValue( f3_arg1.controller, f3_local1 )
	local f3_local2 = LUI.MobileSafeAreaPaddingFixed
	if f3_local0:IsEnabledInTopMenu() then
		f3_local2 = f3_local2 + LUI.MobileSocialBarLayer.DEFAULT_WIDTH
	end
	f3_arg0:SetLeft( f3_local2 )
end

LUI.FlowManager.OpenDrawerPopup = function ( f2_arg0, f2_arg1, f2_arg2 )
	if not f2_arg2 then
		f2_arg2 = {}
	end
	f2_arg2.controllerIndex = f2_arg0
	local f2_local0 = MenuBuilder.BuildRegisteredType( f2_arg1, f2_arg2 )
	f2_local0:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
	f2_arg2.widget = f2_local0
	LUI.FlowManager.RequestPopupMenu( nil, "DrawerPopup", false, f2_arg0, false, f2_arg2 )
end

LUI.FlowManager.OpenDrawer = function ( f1_arg0, f1_arg1, f1_arg2 )
	local f1_local0 = f1_arg2.parent
	if f1_local0 then
		f1_arg2.controllerIndex = f1_arg0
		local f1_local1 = MenuBuilder.BuildRegisteredType( f1_arg1, f1_arg2 )
		f1_local1:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
		f1_arg2.widget = f1_local1
		local f1_local2 = MenuBuilder.BuildRegisteredType( "DrawerPanelList", f1_arg2 )
		f1_local2:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
		f1_local2:SetupDrawerList( f1_arg0, f1_arg2 )
		f1_local0:addElement( f1_local2 )
	else
		LUI.FlowManager.OpenDrawerPopup( f1_arg0, f1_arg1, f1_arg2 )
	end
end

