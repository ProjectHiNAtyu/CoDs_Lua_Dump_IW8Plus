-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
PlayerCustomizationUtils = PlayerCustomizationUtils or {}
PlayerCustomizationUtils.MenuTypes = {
	CALLING_CARD_FRAMES = 1,
	EMBLEMS = 2,
	PLAYER_TITLE = 3,
	KILLCAM_VANITY = 4,
	CALLING_CARDS = 0
}
PlayerCustomizationUtils.TitleNoneRef = "s4_playercard_title_000"
PlayerCustomizationUtils.FrameNoneRef = "s4_playercard_frame_000"
PlayerCustomizationUtils.KillcamNoneRef = "s4_killcam_vanity_000"
PlayerCustomizationUtils.SpraysNoneRef = "none"
PlayerCustomizationUtils.IsNoneItem = function ( f55_arg0 )
	local f55_local0
	if f55_arg0 ~= PlayerCustomizationUtils.TitleNoneRef and f55_arg0 ~= PlayerCustomizationUtils.FrameNoneRef and f55_arg0 ~= PlayerCustomizationUtils.KillcamNoneRef and f55_arg0 ~= PlayerCustomizationUtils.SpraysNoneRef then
		f55_local0 = false
	else
		f55_local0 = true
	end
	return f55_local0
end

PlayerCustomizationUtils.CLAN_EMBLEM_REF = "clan_emblem"
PlayerCustomizationUtils.IsClanEmblem = function ( f54_arg0 )
	return f54_arg0 == PlayerCustomizationUtils.CLAN_EMBLEM_REF
end

PlayerCustomizationUtils.ShowClanEmblem = function ( f53_arg0, f53_arg1 )
	local f53_local0
	if f53_arg1 == PlayerCustomizationUtils.MenuTypes.EMBLEMS then
		f53_local0 = CLANS.IsInClan( f53_arg0 )
	else
		f53_local0 = false
	end
	return f53_local0
end

PlayerCustomizationUtils.GetClanEmblemData = function ( f52_arg0 )
	return {
		isUnlocked = true,
		season = 0,
		index = "-1",
		ref = PlayerCustomizationUtils.CLAN_EMBLEM_REF,
		name = CLANS.GetClanName( f52_arg0 ),
		rarity = LOOT.Rarity.LEGENDARY
	}
end

PlayerCustomizationUtils.SetupRadialMenuBindButton = function ( f50_arg0, f50_arg1, f50_arg2, f50_arg3, f50_arg4, f50_arg5 )
	assert( f50_arg5 )
	local f50_local0 = f50_arg1.BindButton
	if f50_local0 then
		f50_arg1:RemoveElement( f50_local0 )
		f50_arg1.BindButton = nil
	end
	local self = LUI.UIBindButton.new()
	f50_arg1.BindButton = self
	self.id = "BindButton"
	if f50_arg4 then
		self:addEventHandler( "button_alt1", f50_arg5.onButtonAlt1 )
	else
		local f50_local2 = function ( f51_arg0, f51_arg1 )
			local f51_local0 = f50_arg0:GetRadialButton()
			assert( f51_local0 )
			PlayerCustomizationUtils.ValidateRadialSelection( f51_arg0, f51_arg1, f50_arg0, f50_arg0, f50_arg0, f50_arg0, f51_local0, f50_arg0.onComplete )
		end
		
		f50_arg0:addEventHandler( "leftmousedown", f50_local2 )
		self:addEventHandler( "button_primary", f50_local2 )
	end
	self:addEventHandler( "button_secondary", f50_arg5.onButtonSecondary )
	f50_arg1:addElement( self )
end

PlayerCustomizationUtils.InitRadialMenu = function ( f48_arg0, f48_arg1, f48_arg2, f48_arg3 )
	assert( f48_arg0 )
	assert( f48_arg1 )
	assert( f48_arg3 )
	f48_arg0:SetHandleMouse( false )
	if f48_arg3.previewMode then
		local f48_local0 = f48_arg3.onRightMouseDown
		if f48_local0 then
			f48_arg0:SetHandleMouse( true )
			f48_arg0:addEventHandler( "rightmousedown", f48_local0 )
		end
		f48_arg1:AnimatePreviewMode()
	end
	local f48_local0 = f48_arg3.onOpeningQuickAccessMenu
	if f48_local0 then
		f48_arg0:registerEventHandler( "opening_quick_access_menu", f48_local0 )
	end
	f48_arg1:addAndCallEventHandler( "update_input_type", function ( f49_arg0, f49_arg1 )
		local f49_local0 = f49_arg1.controllerIndex
		if LUI.IsLastInputKeyboardMouse( f49_local0 ) then
			f49_arg0.CommandsLabel:setText( "" )
			f49_arg0.CommandsButton:setText( "" )
			f49_arg0:SetKeepSelectionWhileInDeadZone( false )
		else
			f49_arg0.CommandsLabel:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU/ROTATE" ) )
			f49_arg0.CommandsButton:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU/RADIAL_ROTATE_BUTTON" ) )
			f49_arg0:SetKeepSelectionWhileInDeadZone( true )
		end
		f49_arg0:SetupRadial( f49_local0, f48_arg0.previewMode, {
			hideTextOverride = f48_arg0.hideTextOverride,
			hideBackButtonOverride = f48_arg0.hideBackButtonOverride
		} )
	end, {
		controllerIndex = f48_arg2
	} )
	f48_arg1:SetDisableInfiniteOuterRadius( true )
end

PlayerCustomizationUtils.ValidateRadialSelection = function ( f47_arg0, f47_arg1, f47_arg2, f47_arg3, f47_arg4, f47_arg5, f47_arg6, f47_arg7 )
	if f47_arg2:GetHasEquipped() then
		return 
	else
		local f47_local0 = f47_arg5:GetSelectedIndex()
		if GESTURES.IsGimmeSlotActive( f47_local0, f47_arg4 ) then
			return 
		elseif f47_arg1.qualifier == "keyboard" and f47_local0 < 0 then
			return 
		else
			f47_arg2.BindButton:registerEventHandler( "button_secondary", nil )
			f47_arg3:EquipSelection( f47_arg4, f47_local0 )
			f47_arg2:SetHasEquipped( true )
			f47_arg5:AnimateEquip( f47_arg6, f47_arg7 )
		end
	end
end

PlayerCustomizationUtils.GetLootItemInfoFromRadialSetup = function ( f46_arg0, f46_arg1 )
	assert( f46_arg0 )
	local f46_local0 = f46_arg0[f46_arg1]:get()
	local f46_local1, f46_local2, f46_local3 = nil
	if f46_local0 > LOOT.emptyID then
		f46_local1 = LOOT.GetTypeForID( f46_local0 )
		if f46_local1 then
			f46_local2 = LOOT.GetItemRef( f46_local1, f46_local0 )
			f46_local3 = LOOT.GetItemImage( f46_local1, f46_local2 )
		end
	end
	return f46_local0, f46_local1, f46_local2, f46_local3
end

PlayerCustomizationUtils.SetRadialItemsGridData = function ( f45_arg0, f45_arg1, f45_arg2, f45_arg3 )
	assert( f45_arg2 )
	assert( #f45_arg1 == 0 )
	local f45_local0 = LOADOUT.GetCustomizationSetup( f45_arg0 )
	local f45_local1 = f45_local0.radial
	for f45_local2 = 0, #f45_local1 - 1, 1 do
		local f45_local5, f45_local6, f45_local7, f45_local8 = PlayerCustomizationUtils.GetLootItemInfoFromRadialSetup( f45_local1, f45_local2 )
		if f45_local8 and f45_local8 ~= "" then
			table.insert( f45_arg1, f45_local8 )
		end
	end
	f45_arg2:RemoveFocusFromChild()
	f45_arg2:SetNumChildren( #f45_arg1 )
	f45_arg2:SetRefreshChild( f45_arg3 )
	f45_arg2:RefreshContent()
end

PlayerCustomizationUtils.GetDataSourceForMenu = function ( f44_arg0, f44_arg1 )
	local f44_local0 = nil
	if PlayerCustomizationUtils.IsNonPlayerCardMenu( f44_arg0 ) then
		f44_local0 = "frontend.MP.customization"
	else
		f44_local0 = PlayercardUtils.PlayerCardModelPath
	end
	local f44_local1 = nil
	if f44_arg0 == PlayerCustomizationUtils.MenuTypes.CALLING_CARDS then
		f44_local1 = LUI.DataSourceInControllerModel.new( f44_local0 .. ".backgroundIndex" )
	elseif f44_arg0 == PlayerCustomizationUtils.MenuTypes.CALLING_CARD_FRAMES then
		f44_local1 = LUI.DataSourceInControllerModel.new( f44_local0 .. ".frameIndex" )
	elseif f44_arg0 == PlayerCustomizationUtils.MenuTypes.EMBLEMS then
		f44_local1 = LUI.DataSourceInControllerModel.new( f44_local0 .. ".emblemIndex" )
	elseif f44_arg0 == PlayerCustomizationUtils.MenuTypes.PLAYER_TITLE then
		f44_local1 = LUI.DataSourceInControllerModel.new( f44_local0 .. ".titleIndex" )
	elseif f44_arg0 == PlayerCustomizationUtils.MenuTypes.KILLCAM_VANITY then
		local f44_local2 = LUI.DataSourceFromPlayerData.new( LOADOUT.GetCustomizationStatsGroup(), CoD.PlayMode.Core )
		f44_local1 = f44_local2.customizationSetup.killcamTheme
	end
	return f44_local1
end

PlayerCustomizationUtils.IsNonPlayerCardMenu = function ( f43_arg0 )
	return f43_arg0 == PlayerCustomizationUtils.MenuTypes.KILLCAM_VANITY
end

PlayerCustomizationUtils.SetupElementData = function ( f42_arg0, f42_arg1, f42_arg2, f42_arg3, f42_arg4, f42_arg5, f42_arg6 )
	assert( f42_arg0 )
	assert( f42_arg1 )
	assert( f42_arg2 )
	assert( f42_arg3 )
	assert( f42_arg4 )
	assert( f42_arg5 )
	assert( f42_arg6 )
	local f42_local0 = f42_arg6.menuType
	local f42_local1 = f42_arg6.selections
	local f42_local2 = assert
	local f42_local3
	if not f42_local0 then
		f42_local3 = f42_local0
	else
		f42_local3 = f42_local1
	end
	f42_local2( f42_local3 )
	f42_local2 = PlayerCustomizationUtils.GetDataSourceForMenu( f42_local0, f42_arg1 )
	if f42_local2 then
		local f42_local4 = f42_local2
	else
		local f42_local4 = f42_local2:GetValue( f42_arg1 )
	end
	if PlayerCustomizationUtils.ShowClanEmblem( f42_arg1, f42_local0 ) then
		local f42_local5 = PlayerCustomizationUtils.GetClanEmblemData( f42_arg1 )
		table.insert( f42_arg2, 1, f42_local5 )
		table.insert( f42_arg3, 1, f42_local5 )
		if Engine[0xCFB24E159372CA1]( f42_arg1 ) == LOOT.EmblemType.CLAN then
			local f42_local4 = tonumber( f42_local5.index )
		end
	end
	local f42_local5 = {
		all = f42_arg2,
		equippedIndex = f42_local4,
		current = f42_arg3,
		favorites = f42_arg4,
		lootType = f42_arg5,
		dataSource = f42_local2,
		selections = f42_local1
	}
	f42_arg0:SetElementData( f42_local5 )
	return f42_local5
end

PlayerCustomizationUtils.SetupCustomizationMenu = function ( f34_arg0, f34_arg1, f34_arg2, f34_arg3, f34_arg4, f34_arg5, f34_arg6, f34_arg7 )
	local f34_local0 = f34_arg0:GetElementData()
	if not f34_local0 then
		f34_local0 = PlayerCustomizationUtils.SetupElementData( f34_arg0, f34_arg2, f34_arg3, f34_arg4, f34_arg5, f34_arg6, {
			menuType = f34_arg1
		} )
	end
	assert( f34_local0 )
	assert( f34_local0.dataSource )
	LOOT.SetupSortingBehavior( f34_arg0, f34_arg2, f34_arg6 )
	f34_arg0:FilterElementTable( f34_arg2 )
	f34_arg0:addEventHandler( "restore_focus", f34_arg7 )
	local f34_local1 = f34_arg0:GetBarracksCustomizationMenu()
	f34_local1:SetGridSnapOnWrapEnabled( true )
	f34_arg0:UpdateGrid()
	f34_arg0:FocusFunction()
	FrontEndScene.HideAllCharacters()
	Engine[0x685AE31DEDA30A4]( "squad_lobby" )
	if not PlayerCustomizationUtils.IsNonPlayerCardMenu( f34_arg1 ) then
		Playercard[0x2BB8FABC0D5D042]( f34_arg2 )
	end
	local f34_local2 = Engine[0x3B8CFB6758EF57C]()
	local f34_local3 = f34_arg0:GetEquippedElementLootID()
	local f34_local4 = f34_arg0:GetHelperBar()
	local f34_local5 = f34_arg0:GetBindButton()
	f34_arg0:addEventHandler( "menu_close", function ( f41_arg0, f41_arg1 )
		local f41_local0 = f34_arg0:GetEquippedIndex()
		local f41_local1 = f34_arg0._controllerIndex
		f34_arg0:SetValue( f41_local1, f41_local0 )
		if not PlayerCustomizationUtils.IsNonPlayerCardMenu( f34_arg0 ) then
			Playercard[0xE7F7308D27872C9]( f41_local1 )
		end
		METRICS.LootUsageSendDLogEvent( f34_arg0, {
			controllerIndex = f41_local1,
			startTime = f34_arg0,
			previousItemIDs = f34_arg0,
			newItemIDs = f34_arg0:GetEquippedElementLootID()
		} )
	end )
	if CONDITIONS.IsUserSignedInDemonware( f34_arg2 ) then
		f34_local5:addEventHandler( "button_right_trigger", function ( f40_arg0, f40_arg1 )
			f34_arg0:SetFavorite()
		end )
	end
	f34_arg0:addEventHandler( "update_input_type", function ( f39_arg0, f39_arg1 )
		PlayerCustomizationUtils.UpdateFavoriteAndSort( f39_arg0, f39_arg1.controllerIndex )
	end, {
		controllerIndex = f34_arg2
	} )
	if not IsLanguageArabic() then
		f34_local1:SetupNewItemPreviewNotificationLeftAlignment()
	end
	if CONDITIONS.IsBarracksCustomizationSortingEnabled() then
		f34_local5:addEventHandler( "button_alt1", function ( f37_arg0, f37_arg1 )
			if LUI.IsLastInputGamepad( f37_arg1.controller ) then
				f34_arg0:SetLootIDFromCurrentIndex()
			end
			local f37_local0 = MenuBuilder.BuildRegisteredType( "CustomizeSortingPopup", {
				controllerIndex = f34_arg0,
				menu = f34_arg0,
				type = f34_arg0
			} )
			LUI.FlowManager.RequestPopupMenu( nil, "FlyInPopup", true, f34_arg0, false, {
				flyInLeftNarrow = true,
				widget = f37_local0
			} )
			f37_local0:addEventHandler( "menu_close", function ( f38_arg0, f38_arg1 )
				f37_arg0._isComingFromFilterMenu = true
				f37_arg0:FilterElementTable( f37_arg0 )
				f37_arg0:UpdateGrid()
			end )
		end )
	end
	f34_local4.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_secondary",
		helper_text = Engine[0xED84C33EC5F01EA]( "MENU/BACK" )
	} )
	f34_local5:addEventHandler( "button_secondary", function ( f36_arg0, f36_arg1 )
		local f36_local0 = f36_arg1.controller or f34_arg0
		if CONDITIONS.InNewItemsMode( f36_local0 ) then
			ACTIONS.TurnOffNewItemsMode( f34_arg0, f36_local0 )
		else
			ACTIONS.LeaveMenu( f34_arg0 )
		end
	end )
	if PlayerCustomizationUtils.HasNewItems( f34_local0, f34_arg2, PlayerCustomizationUtils.ConstructMockedData( f34_arg0 ) ) then
		NewUnlockIndicatorUtils.PushButtonPrompt( f34_local4 )
		NewUnlockIndicatorUtils.SetupButtonHandler( f34_arg0, f34_local5, f34_arg2, function ( f35_arg0, f35_arg1 )
			ACTIONS.ToggleNewItemsMode( f35_arg0, f35_arg1 )
		end )
	end
end

PlayerCustomizationUtils.UpdateGrid = function ( f32_arg0, f32_arg1 )
	local f32_local0 = f32_arg0:GetBarracksCustomizationMenu()
	f32_local0:UpdateGrid( f32_arg1, f32_arg0:RefreshButtons(), function ()
		return PlayerCustomizationUtils.ConstructMockedData( f32_arg0 )
	end )
end

PlayerCustomizationUtils.EquipElement = function ( f31_arg0, f31_arg1 )
	local f31_local0 = f31_arg0:GetCurrentGridIndex()
	if not f31_local0 then
		return 
	end
	local f31_local1 = f31_arg0:GetElementData()
	local f31_local2 = f31_local1.current[f31_local0]
	local f31_local3 = tonumber( f31_local2.index )
	if f31_local1.equippedIndex ~= f31_local3 then
		f31_arg1( f31_local2, f31_local3 )
	end
end

PlayerCustomizationUtils.CanFavoriteItem = function ( f30_arg0 )
	if not CONDITIONS.IsBarracksCustomizationSortingEnabled() then
		return false
	end
	local f30_local0 = f30_arg0.ref
	assert( f30_local0 )
	local f30_local1 = f30_arg0.isUnlocked
	local f30_local2 = PlayerCustomizationUtils.IsNoneItem( f30_local0 )
	local f30_local3 = PlayerCustomizationUtils.IsClanEmblem( f30_local0 )
	local f30_local4
	if f30_local1 then
		f30_local4 = f30_local1
	elseif not f30_local2 then
		f30_local4 = not f30_local3
	else
		f30_local4 = false
	end
	return f30_local4
end

PlayerCustomizationUtils.SetupElementContextualMenu = function ( f28_arg0, f28_arg1, f28_arg2, f28_arg3 )
	local f28_local0
	if PlayerCustomizationUtils.IsClanEmblem( f28_arg2.ref ) then
		f28_local0 = f28_arg2.name
		if not f28_local0 then
		
		else
			f28_arg1:SetupContextualMenu( {
				title = f28_local0
			} )
			if f28_arg0.GetPreviewContextualAction ~= nil and not PlayerCustomizationUtils.IsNoneItem( f28_arg2.ref ) then
				f28_arg0:GetPreviewContextualAction( f28_arg1 )
			end
			if PlayerCustomizationUtils.CanFavoriteItem( f28_arg2 ) then
				local f28_local1 = {
					button = "button_right_trigger"
				}
				local f28_local2
				if f28_arg3 then
					f28_local2 = Engine[0xED84C33EC5F01EA]( "MENU/REMOVE_FROM_FAVORITES" )
					if not f28_local2 then
					
					else
						f28_local1.actionName = f28_local2
						f28_local1.actionFunction = function ()
							f28_arg0:SetFavorite()
						end
						
						f28_local1.id = f28_arg2.lootID
						f28_arg1:AddContextualMenuAction( f28_local1 )
					end
				end
				f28_local2 = Engine[0xED84C33EC5F01EA]( "MENU/ADD_TO_FAVORITES" )
			end
		end
	end
	f28_local0 = Engine[0xED84C33EC5F01EA]( f28_arg2.name )
end

PlayerCustomizationUtils.RefreshButtons = function ( f26_arg0, f26_arg1, f26_arg2, f26_arg3 )
	return function ( f27_arg0, f27_arg1, f27_arg2 )
		local f27_local0 = f26_arg0:GetContentIndex( f27_arg1, f27_arg2 )
		local f27_local1 = f26_arg0:GetElementData()
		local f27_local2 = f27_local1.current[f27_local0 + 1]
		local f27_local3
		if not f27_local1.equippedIndex or f27_local1.equippedIndex ~= tonumber( f27_local2.index ) then
			f27_local3 = f26_arg0.IsItemEquipped
			if f27_local3 then
				f27_local3 = f26_arg0:IsItemEquipped( f27_local2.ref )
			end
		else
			f27_local3 = true
		end
		local f27_local4 = f27_local1.favorites[f27_local2.ref]
		f27_arg0:RefreshButton( f26_arg0, f27_local2, f27_local3, f27_local4, f26_arg0 )
		PlayerCustomizationUtils.SetupElementContextualMenu( f26_arg0, f27_arg0, f27_local2, f27_local4 )
		if f26_arg0 then
			f27_arg0:SetNewItemNotificationVisible( f26_arg0[f27_local2.ref] or false )
		end
	end
	
end

local f0_local0 = function ( f25_arg0, f25_arg1 )
	return f25_arg1[f25_arg0.ref] == true
end

PlayerCustomizationUtils.SetFavorite = function ( f23_arg0, f23_arg1 )
	local f23_local0 = f23_arg0:GetCurrentGridIndex()
	if not f23_local0 then
		
	else
		
	end
	if not CONDITIONS.IsBarracksCustomizationSortingEnabled() then
		
	else
		
	end
	local f23_local1 = f23_arg0:GetElementData()
	local f23_local2 = f23_local1.current[f23_local0]
	local f23_local3 = f23_local2.ref
	assert( f23_local3 )
	if not PlayerCustomizationUtils.CanFavoriteItem( f23_local2 ) then
		
	else
		
	end
	local f23_local4, f23_local5 = LOOT.AddOrRemoveFavoriteItem( f23_local1.favorites, f23_local1.lootType, f23_local3, function ()
		local f24_local0 = ACTIONS.AnimateSequence
		local f24_local1 = f23_arg0:GetFavoritesPrompt()
		f24_local0( f24_local1.ClickableFavoritesPrompt, "Warning" )
	end )
	if not f23_local4 then
		return 
	else
		local f23_local6
		if f0_local0( f23_local2, f23_local5 ) then
			f23_local6 = Engine[0xED84C33EC5F01EA]( "LUA_MENU/ADD_FAV" )
			if not f23_local6 then
			
			else
				LOOT.ShowFavoriteNotification( f23_arg0, f23_local2, f23_local6, f23_arg1 )
				assert( f23_local5 )
				f23_arg0:SetFavoritesTable( f23_local5 )
				f23_arg0:UpdateGrid()
			end
		end
	end
	f23_local6 = Engine[0xED84C33EC5F01EA]( "LUA_MENU/REMOVE_FAV" )
end

PlayerCustomizationUtils.IsElementNew = function ( f22_arg0, f22_arg1, f22_arg2 )
	if PlayerCustomizationUtils.IsClanEmblem( f22_arg2.ref ) then
		return false
	end
	local f22_local0 = f22_arg2.lootID
	if not f22_local0 then
		f22_local0 = LOOT.GetItemID( f22_arg1, f22_arg2 )
	end
	return LOOT.IsNew( f22_arg0, f22_local0 )
end

PlayerCustomizationUtils.GetLockCounts = function ( f21_arg0, f21_arg1 )
	local f21_local0 = 0
	local f21_local1 = 0
	for f21_local5, f21_local6 in pairs( f21_arg0 ) do
		if f21_arg1 then
			f21_arg1( f21_local6 )
		end
		if f21_local6.hideInUI ~= "1" then
			if f21_local6.isUnlocked then
				f21_local0 = f21_local0 + 1
				f21_local1 = f21_local1 + 1
			end
			if not f21_local6.isPremium then
				f21_local1 = f21_local1 + 1
			end
		end
	end
	return f21_local0, f21_local1
end

PlayerCustomizationUtils.HasNewItems = function ( f20_arg0, f20_arg1, f20_arg2 )
	for f20_local3, f20_local4 in pairs( f20_arg0.current ) do
		if PlayerCustomizationUtils.IsElementNew( f20_arg1, f20_arg0.lootType, f20_local4 ) or f20_arg2 and f20_arg2[f20_local4.ref] then
			return true
		end
	end
	return false
end

PlayerCustomizationUtils.ConstructMockedData = function ( f19_arg0 )
	local f19_local0 = nil
	if CONDITIONS.IsGetMockNewItemsEnabled() then
		local f19_local1 = f19_arg0:GetEquippedRef()
		f19_local0 = {}
		for f19_local5, f19_local6 in pairs( f19_arg0._elementData.current ) do
			local f19_local7 = f19_local6.ref
			if f19_local5 % 2 == 0 and f19_local7 ~= f19_local1 then
				f19_local0[f19_local7] = true
			end
		end
	end
	return f19_local0
end

PlayerCustomizationUtils.MenuFocusFunction = function ( f18_arg0, f18_arg1, f18_arg2 )
	if LUI.IsLastInputMouseNavigation( f18_arg2 ) then
		f18_arg0:GridMouseSetActiveToDefaultFocusMenuCreate( f18_arg2 )
		return 
	else
		f18_arg0:FocusGridFromIndex( PlayerCustomizationUtils.GetGridIndexForCurrentElement( f18_arg1.current, f18_arg1.equippedIndex, "index" ), true )
	end
end

PlayerCustomizationUtils.RestoreMenuFocus = function ( f17_arg0, f17_arg1 )
	if f17_arg0._isComingFromFilterMenu and LUI.IsLastInputGamepad( f17_arg0._controllerIndex ) then
		local f17_local0 = PlayerCustomizationUtils.GetGridIndexForCurrentElement( f17_arg1, f17_arg0._currentSelectedLootID, "lootID" )
		local f17_local1 = f17_arg0:GetBarracksCustomizationMenu()
		f17_local1:FocusGridFromIndex( f17_local0, true, nil, nil, nil )
		f17_arg0._isComingFromFilterMenu = false
		return true
	else
		
	end
end

PlayerCustomizationUtils.GetGridIndexForCurrentElement = function ( f16_arg0, f16_arg1, f16_arg2 )
	if f16_arg1 then
		assert( type( f16_arg1 ) == "number" )
		for f16_local4, f16_local5 in pairs( f16_arg0 ) do
			local f16_local3 = f16_local5[f16_arg2]
			if PlayerCustomizationUtils.IsClanEmblem( f16_local5.ref ) or f16_local5.ref == PlayerCustomizationUtils.SpraysNoneRef then
				f16_local3 = 0
			end
			assert( f16_local3 )
			if type( f16_local3 ) == "string" then
				f16_local3 = tonumber( f16_local3 )
			end
			assert( type( f16_local3 ) == "number" )
			if f16_local3 == f16_arg1 then
				return f16_local4 - 1
			end
		end
	end
	return 0
end

PlayerCustomizationUtils.BasicElementSort = function ( f15_arg0, f15_arg1, f15_arg2, f15_arg3 )
	if f15_arg0[f15_arg2.ref] ~= f15_arg0[f15_arg3.ref] then
		local f15_local0 = f15_arg0[f15_arg2.ref]
		if f15_local0 then
			f15_local0 = not f15_arg0[f15_arg3.ref]
		end
		return f15_local0
	else
		local f15_local0 = LOOT.IsNew( f15_arg1, f15_arg2.lootID )
		local f15_local1 = LOOT.IsNew( f15_arg1, f15_arg3.lootID )
		if f15_local0 ~= f15_local1 then
			local f15_local2
			if f15_local0 then
				f15_local2 = f15_local0
			else
				f15_local2 = not f15_local1
			end
			return f15_local2
		elseif f15_arg2.isUnlocked ~= f15_arg3.isUnlocked then
			local f15_local2 = f15_arg2.isUnlocked
			if f15_local2 then
				f15_local2 = not f15_arg3.isUnlocked
			end
			return f15_local2
		else
			
		end
	end
end

PlayerCustomizationUtils.SortSeasons = function ( f14_arg0, f14_arg1, f14_arg2, f14_arg3, f14_arg4 )
	if f14_arg0.season ~= f14_arg1.season and f14_arg2 ~= LOOT.seasonsSortingOptions.NONE then
		if f14_arg2 == LOOT.seasonsSortingOptions.OLD_FIRST then
			return f14_arg0.season < f14_arg1.season
		elseif f14_arg2 == LOOT.seasonsSortingOptions.RECENT_FIRST then
			return f14_arg1.season < f14_arg0.season
		end
	end
	if f14_arg0.rarity ~= f14_arg1.rarity and f14_arg3 ~= LOOT.raritySortingOptions.NONE then
		if f14_arg4 == LOOT.raritySortingOptions.LOW_FIRST then
			return f14_arg0.rarity < f14_arg1.rarity
		elseif f14_arg4 == LOOT.raritySortingOptions.HIGH_FIRST then
			return f14_arg1.rarity < f14_arg0.rarity
		end
	end
	local f14_local0 = Engine[0xED84C33EC5F01EA]( f14_arg0.name )
	local f14_local1 = Engine[0xED84C33EC5F01EA]( f14_arg1.name )
	if f14_local0 ~= f14_local1 then
		return f14_local0 < f14_local1
	end
end

PlayerCustomizationUtils.UpdateFavoriteAndSort = function ( f13_arg0, f13_arg1 )
	local f13_local0 = f13_arg0:GetBarracksCustomizationMenu()
	f13_local0:UpdateFavoriteAndSort( f13_arg1, f13_arg0 )
end

PlayerCustomizationUtils.IsOnlineAndSignedIn = function ( f12_arg0 )
	local f12_local0 = Engine[0xBE5345D3926D620]()
	if f12_local0 then
		f12_local0 = Engine[0x2DE6F7A69111B92]( f12_arg0 )
		if f12_local0 then
			f12_local0 = Engine[0x5EA7EB683287036]( f12_arg0 )
		end
	end
	return f12_local0
end

PlayerCustomizationUtils.HandleClanInput = function ( f10_arg0, f10_arg1 )
	if not PlayerCustomizationUtils.IsOnlineAndSignedIn( f10_arg1 ) then
		
	else
		
	end
	Engine[0x8273C659C99F057]( f10_arg1, CoD.AntiCheat.Ban.FEATURE_BAN_GLOBAL_CLAN_TAG )
	local f10_local0 = Engine[0x4A0B35B087F99B0]( f10_arg1 ) or ""
	local f10_local1 = {
		isAscii = true,
		headerText = Engine[0xED84C33EC5F01EA]( "LUA_MENU/CUSTOM_CLAN_TAG" )
	}
	local f10_local2
	if f10_local0 ~= nil and f10_local0 ~= "" and not f10_local0 then
		f10_local2 = f10_local0
	else
		f10_local2 = Engine[0xED84C33EC5F01EA]( "CLANS/CUSTOM_TAG_HINT" )
	end
	f10_local1.hintText = f10_local2
	f10_local1.acceptCallbackFunc = function ( f11_arg0, f11_arg1 )
		local f11_local0 = f11_arg0:GetCurrentMenu()
		local f11_local1 = f11_local0.GenericEditBox:GetText()
		if f11_local1 ~= nil and f11_local1 ~= "" then
			Engine[0xEF205737D1A7BA4]( f11_arg1, f11_local1 )
			Engine[0xB81A5136C5503E4]( "uploadstats", f11_arg1 )
		end
		local f11_local2 = f10_arg0.OnClanInputAccept
		if f11_local2 then
			f11_local2( f10_arg0, f11_arg1 )
		end
	end
	
	f10_local1.maxLength = CLANS.CLANS_CLANTAG_LENGTH
	LUI.FlowManager.RequestPopupMenu( nil, "EditBoxPopup", true, f10_arg1, false, f10_local1 )
end

PlayerCustomizationUtils.ToggleClanType = function ( f9_arg0, f9_arg1, f9_arg2 )
	if not CONDITIONS.IsClansEnabled() then
		return 
	else
		local f9_local0 = CLANS.IsCustomClanTag( f9_arg0 ) and ClanTagType.CLAN or ClanTagType.DEFAULT
		if f9_local0 == ClanTagType.CLAN and not CLANS.IsInClan( f9_arg1 ) then
			return 
		else
			f9_arg0 = f9_local0
			Engine[0x83EEB60522A30A9]( f9_arg1, f9_local0 )
			Engine[0xC4146BA76D0F982]( SOUND_SETS.default.gainFocus )
			f9_arg2:UpdateClanTagType( f9_local0, true )
		end
	end
end

PlayerCustomizationUtils.UpdateEnableSwitchClanTag = function ( f8_arg0, f8_arg1, f8_arg2 )
	if not CONDITIONS.IsClansEnabled() then
		return 
	end
	local f8_local0
	if f8_arg0.currentClanTagType ~= ClanTagType.CLAN and 0 >= #(Clans[0x798165264495B93]( f8_arg1 ) or {}) then
		f8_local0 = false
	else
		f8_local0 = true
	end
	f8_arg0.switchClanTagEnabled = f8_local0
	local f8_local1 = f8_arg2
	local f8_local2 = f8_arg2.SetSwitchClanTagPromptAlpha
	local f8_local3
	if f8_local0 then
		f8_local3 = 1
	else
		f8_local3 = 0
	end
	f8_local2( f8_local1, f8_local3 )
end

PlayerCustomizationUtils.SetGamerTag = function ( f7_arg0, f7_arg1 )
	local f7_local0 = Engine[0x5A049446C78B2A4]( f7_arg1 )
	if f7_local0 ~= nil then
		f7_arg0:setText( f7_local0 )
	end
end

local f0_local1 = function ( f6_arg0, f6_arg1 )
	local f6_local0 = 0
	if 0 < f6_arg1.unlockLevel then
		f6_local0 = Challenge.GetLevelForOptions( f6_arg0, Challenge.BuildChallengeOptionsFromInfo( f6_arg1.aeKind, f6_arg1.challengeItemID, f6_arg1.season ) )
	end
	return f6_arg1.unlockLevel <= f6_local0
end

local f0_local2 = function ( f5_arg0, f5_arg1 )
	local f5_local0, f5_local1 = nil
	for f5_local5, f5_local6 in ipairs( f5_arg1 ) do
		f5_local0, f5_local1 = Challenge.GetChallengeAndTierForLoot( f5_arg0, f5_local6.challenges, f5_local6.lootMap )
		if f5_local0 then
			return f5_local0, f5_local1
		end
	end
	return f5_local0, f5_local1
end

local f0_local3 = function ( f4_arg0, f4_arg1 )
	if f4_arg0 and f4_arg1 then
		for f4_local6, f4_local7 in pairs( f4_arg0 ) do
			for f4_local3, f4_local4 in ipairs( f4_local7 ) do
				if f4_local4.lootID == f4_arg1 then
					return tonumber( f4_local4.level ) + 1
				end
			end
		end
	end
end

local f0_local4 = function ( f3_arg0, f3_arg1 )
	local f3_local0, f3_local1 = nil
	f3_local0 = f0_local0( PROGRESSION.GetClanNextRankUnlocks( 1, 1, true ), f3_arg1 )
	if f3_local0 then
		return f3_local0, Engine[0xED84C33EC5F01EA]( "CLANS/CLANS" )
	end
	f3_local0 = f0_local0( PROGRESSION.GetNextRankUnlocks( 1, 1, true ), f3_arg1 )
	if f3_local0 then
		return f3_local0, Engine[0xED84C33EC5F01EA]( "LUA_MENU/MILITARY" )
	end
	f3_local0 = f0_local0( PROGRESSION.GetSeasonNextRankUnlocks( 1, 1, true, SEASON.GetCurrentSeason(), true ), f3_arg1 )
	if f3_local0 then
		return f3_local0, Engine[0xED84C33EC5F01EA]( "MPUI/PRESTIGE" )
	end
	local f3_local2 = {}
	local f3_local3 = StringTable[0xFD4E49A34DD43AE]( CSV.operators.file )
	for f3_local4 = 0, f3_local3 - 1, 1 do
		local f3_local7 = CSV.ReadRow( CSV.operators, f3_local4 )
		if f3_local7.unlockedInPrivate == "1" then
			table.insert( f3_local2, f3_local7 )
		end
	end
	for f3_local8, f3_local7 in ipairs( f3_local2 ) do
		f3_local0 = OPERATOR.GetOperatorLevelForUnlock( OPERATOR.GetOperatorLevelUnlocks( f3_local7.ref ), f3_arg1 )
		if f3_local0 then
			return f3_local0, Engine[0xED84C33EC5F01EA]( f3_local7.name )
		end
	end
	return f3_local0, f3_local1
end

PlayerCustomizationUtils.GetUnlockData = function ( f2_arg0, f2_arg1, f2_arg2, f2_arg3, f2_arg4 )
	local f2_local0 = {}
	local f2_local1 = f2_arg2[f2_arg1]
	if f2_local1 then
		assert( f2_local1.unlockType )
		f2_local0.unlockType = f2_local1.unlockType
		f2_local0.unlockMethod = f2_local1.unlockMethod
		f2_local0.hide = false
		if not f2_local1.unlockType then
			f2_local0.hide = true
		elseif f2_local1.unlockType == LOOT.unlockTypes.LEVEL then
			local f2_local2, f2_local3 = f0_local0( f2_arg0, f2_arg1 )
			if f2_local2 and f2_local3 then
				f2_local0.level = f2_local2
				f2_local0.progressionType = f2_local3
			else
				f2_local0.hide = true
			end
		elseif f2_local1.unlockType == LOOT.unlockTypes.CHALLENGE then
			local f2_local2, f2_local3 = f0_local0( f2_arg1, f2_arg3 )
			if f2_local2 and f0_local0( f2_arg0, f2_local2 ) then
				f2_local2.displayTier = f2_local3
				f2_local0.challengeData = f2_local2
			else
				f2_local0.hide = true
			end
			if f2_local0.unlockMethod and #f2_local0.unlockMethod == 0 then
				f2_local0.unlockMethod = "LOOT_MP/UNLOCK_CHALLENGE"
			end
		elseif f2_local1.unlockType == LOOT.unlockTypes.PURCHASE then
			if f2_arg4 and f2_arg4[f2_arg1] then
				f2_local0.battlepassSeason = tostring( SEASON.GetCurrentSeason() )
				f2_local0.battlepassTier = f2_arg4[f2_arg1]
			elseif f2_local0.unlockMethod and LUI.Contains( f2_local0.unlockMethod, "LOOT_MP/UNLOCK_BUNDLE" ) then
				if not STORE.BundleContainsLoot( f2_arg0, f2_arg1 ) then
					f2_local0.hide = true
				end
			else
				f2_local0.hide = true
			end
		end
	end
	return f2_local0
end

PlayerCustomizationUtils.GetChallengesAndLootMapData = function ( f1_arg0 )
	local f1_local0 = {}
	local f1_local1, f1_local2 = Challenge.GetChallengesAndProgress( f1_arg0, AEKinds.S4_AE_KIND_ACCOUNT_CHALLENGE )
	local f1_local3, f1_local4 = Challenge.GetChallengesAndProgress( f1_arg0, AEKinds.S4_AE_KIND_SEASONAL_CHALLENGE )
	local f1_local5, f1_local6 = Challenge.GetChallengesAndProgress( f1_arg0, AEKinds.S4_AE_KIND_MISC_UNLOCK )
	return {
		{
			challenges = f1_local1,
			lootMap = f1_local2
		},
		{
			challenges = f1_local3,
			lootMap = f1_local4
		},
		{
			challenges = f1_local5,
			lootMap = f1_local6
		}
	}
end

