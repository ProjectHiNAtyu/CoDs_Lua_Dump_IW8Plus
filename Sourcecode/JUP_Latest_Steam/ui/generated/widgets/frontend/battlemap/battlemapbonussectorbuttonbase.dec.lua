-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
module( ..., package.seeall )
local f0_local0 = 6
local f0_local1 = 0
local f0_local2 = nil
f0_local2 = function ( f14_arg0, f14_arg1 )
	f14_arg0.NewWeaponIndicator:Play()
	local f14_local0 = f14_arg0:Wait( f14_arg1 )
	f14_local0.onComplete = function ()
		f14_arg0( f14_arg0, f14_arg0 )
	end
	
end

local f0_local3 = function ( f13_arg0, f13_arg1 )
	local f13_local0 = BATTLEPASS.GetFinalSectorPercentProgress( f13_arg1 )
	if f13_arg0.RadialCompleteProgress then
		f13_arg0.RadialCompleteProgress:SetProgress( f13_local0, nil, nil, true )
	end
	f13_arg0.FinalPercent:setText( Engine[0xED84C33EC5F01EA]( 0x4348825FE0CF6E9, f13_local0 * 100 ) )
end

local f0_local4 = function ( f12_arg0, f12_arg1, f12_arg2 )
	local f12_local0 = f12_arg0._bundle[0x32311E4EB4BA8E8]
	if not String.IsNilOrEmpty( f12_local0 ) then
		f12_arg0.Border:setImage( RegisterMaterial( f12_local0 ) )
	end
	if f12_arg0._sectorType == BATTLEMAP.SectorType.FINAL then
		f12_arg0.SectorID:SetVisible( false )
		f12_arg0.SectorBacker:SetVisible( false )
		f12_arg0.FinalPercent:SetVisible( true )
		local f12_local1 = ACTIONS.AnimateSequence
		local f12_local2 = f12_arg0
		local f12_local3
		if f12_arg0._isBPComplete then
			f12_local3 = "Enable"
		else
			f12_local3 = "Disable"
		end
		f12_local1( f12_local2, f12_local3 )
		ACTIONS.AnimateSequence( f12_arg0, "FinalSector" )
		f0_local0( f12_arg0, f12_arg1 )
	elseif f12_arg0._sectorType == BATTLEMAP.SectorType.BLACK_CELL then
		f12_arg0.SectorID:SetVisible( false )
		f12_arg0.SectorBacker:SetVisible( false )
		f12_arg0.FinalPercent:SetVisible( false )
		if f12_arg0.Text then
			f12_arg0.Text:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xB685E73C6BEBB83 ) ) )
		end
		local f12_local1 = ACTIONS.AnimateSequence
		local f12_local2 = f12_arg0
		local f12_local3
		if f12_arg0._isBlackCellOwned then
			f12_local3 = "Enable"
		else
			f12_local3 = "Disable"
		end
		f12_local1( f12_local2, f12_local3 )
		ACTIONS.AnimateSequence( f12_arg0, "InstantLocked" )
	else
		f12_arg0.SectorID:SetVisible( true )
		f12_arg0.SectorBacker:SetVisible( true )
		f12_arg0.FinalPercent:SetVisible( false )
		if f12_arg0.Text then
			f12_arg0.Text:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xACCC241184D277A ) ) )
		end
		local f12_local1 = ACTIONS.AnimateSequence
		local f12_local2 = f12_arg0
		local f12_local3
		if f12_arg0._isPremium then
			f12_local3 = "Enable"
		else
			f12_local3 = "Disable"
		end
		f12_local1( f12_local2, f12_local3 )
		if f12_arg0._sectorType == BATTLEMAP.SectorType.INSTANT then
			f12_local1 = ACTIONS.AnimateSequence
			f12_local2 = f12_arg0
			if f12_arg0._isPremium then
				f12_local3 = "InstantCompleted"
			else
				f12_local3 = "InstantLocked"
			end
			f12_local1( f12_local2, f12_local3 )
		end
	end
end

local f0_local5 = function ( f11_arg0 )
	local f11_local0 = f11_arg0._bundle[0xBB1F7EEF03C9500]
	if not String.IsNilOrEmpty( f11_local0 ) then
		f11_arg0.Border:setImage( RegisterMaterial( f11_local0 ) )
	end
	ACTIONS.AnimateSequence( f11_arg0, "GradientSelectLoop" )
	if f11_arg0._sectorType == BATTLEMAP.SectorType.INSTANT then
		if f11_arg0._isPremium then
			ACTIONS.AnimateSequence( f11_arg0, "InstantCompletedOver" )
		else
			local f11_local1 = SWATCHES[0xAE02465B3F418FB][0xA735F974387D384]
			f11_arg0.HVT:SetAlpha( 0.9 )
			f11_arg0.Border:SetRGB( f11_local1 )
			f11_arg0.Map:SetRGB( SWATCHES[0xAE02465B3F418FB][0x4866D27404B45BD] )
			f11_arg0.Map:SetAlpha( 0.7, 150 )
		end
	elseif f11_arg0._sectorType == BATTLEMAP.SectorType.FINAL then
		ACTIONS.AnimateSequence( f11_arg0, "FinalSectorOver" )
	end
	local f11_local1 = LAYOUT.GetTextWidth( f11_arg0.SectorID )
	f11_arg0.SectorBacker:SetLeft( f11_arg0._isPremium and f11_arg0._sectorBackerLeft or f11_arg0._lockLeft )
	f11_arg0.SectorBacker:SetRight( f11_arg0._sectorIdLeft )
	f11_arg0.SectorBacker:SetRight( f11_arg0._sectorIdLeft + f11_local1 + f0_local0, 300, LUI.EASING.outCubic )
end

local f0_local6 = function ( f10_arg0 )
	ACTIONS.AnimateSequence( f10_arg0, "UnlockSector" )
	if f10_arg0.Overlay then
		f10_arg0.Overlay:SetRGB( f10_arg0._isPremium and SWATCHES[0xAE02465B3F418FB][0x5C8B52A2FF6F708] or SWATCHES[0xAE02465B3F418FB][0x9853FA0F469126B] )
	end
end

local f0_local7 = function ( f9_arg0, f9_arg1 )
	f9_arg0._isBPComplete = true
	f0_local0( f9_arg0, f9_arg1, true )
	ACTIONS.AnimateSequence( f9_arg0, "CompleteGlow" )
	if f9_arg0.Overlay then
		f9_arg0.Overlay:SetRGB( f9_arg0._isPremium and SWATCHES[0xAE02465B3F418FB][0x5C8B52A2FF6F708] or SWATCHES[0xAE02465B3F418FB][0x9853FA0F469126B] )
	end
end

local f0_local8 = function ( f4_arg0, f4_arg1, f4_arg2, f4_arg3, f4_arg4, f4_arg5 )
	f4_arg0._index = f4_arg2
	f4_arg0._bundle = f4_arg3
	f4_arg0._isPremium = f4_arg4
	f4_arg0._isBPComplete = f4_arg5
	f4_arg0._isBlackCellOwned = false
	f4_arg0.SectorID:setText( BATTLEMAP.GetSectorDisplayName( f4_arg2 - 1 ) )
	local f4_local0 = f4_arg3[0x5565F5840C0FF4D]
	if not String.IsNilOrEmpty( f4_local0 ) then
		f4_arg0.SectorMask:setImage( RegisterMaterial( f4_local0 ) )
	end
	local f4_local1 = f4_arg3[0x8B19946AE405D35]
	if not String.IsNilOrEmpty( f4_local1 ) then
		f4_arg0.FocusShadow:setImage( RegisterMaterial( f4_local1 ) )
	end
	local f4_local2 = SEASON.GetCurrentSeason()
	f4_arg0._sectorType = BATTLEMAP.GetSectorType( f4_arg2, f4_local2 )
	local f4_local3 = BATTLEMAP.GetSectorUnlockData( f4_local2, f4_arg2 )
	local f4_local4 = f4_local3[BATTLEMAP.NUM_UNLOCKS_PER_SECTOR]
	local f4_local5 = RegisterMaterial( f4_local4.lootImage )
	if f4_local4 then
		if f4_arg0._sectorType == BATTLEMAP.SectorType.FINAL then
			ACTIONS.AnimateSequence( f4_arg0, "HVT_Final" )
			f4_arg0.HVT:setImage( f4_local5 )
			if f4_arg0.HVTBracketLeft and f4_arg0.HVTBracketRight then
				f4_arg0.HVTBracketRight:SetVisible( false )
				f4_arg0.HVTBracketLeft:SetVisible( false )
			end
		else
			local f4_local6 = Engine[0x5B4AB50CF5D1DDD]( f4_local5 )
			if 1 < f4_local6 then
				ACTIONS.AnimateSequence( f4_arg0, "HVT_2x1" )
			elseif f4_local6 < 1 then
				ACTIONS.AnimateSequence( f4_arg0, "HVT_1x2" )
			else
				ACTIONS.AnimateSequence( f4_arg0, "HVT_1x1" )
			end
			f4_arg0.HVT:setImage( f4_local5 )
			if f4_arg0.HVTBracketLeft and f4_arg0.HVTBracketRight then
				if f4_local4.lootType == LOOT.itemTypes.OPERATOR or f4_local4.lootType == LOOT.itemTypes.OPERATOR_SKIN then
					f4_arg0.HVTBracketRight:SetVisible( true )
					f4_arg0.HVTBracketLeft:SetVisible( true )
				else
					f4_arg0.HVTBracketRight:SetVisible( false )
					f4_arg0.HVTBracketLeft:SetVisible( false )
				end
			end
		end
		if (not (f4_local4.lootType ~= LOOT.itemTypes.WEAPON or WEAPON.IsVariant( f4_arg1, f4_local4.lootID ) ~= false) or f4_local4.lootType == LOOT.itemTypes.OPERATOR) and not CONDITIONS.IsMobileOrMobileSim() then
			f4_arg0.NewWeaponIndicator:SetVisible( true )
			f0_local0( f4_arg0, 3000 )
		end
	end
	f0_local0( f4_arg0, f4_arg1, true )
	f4_arg0:addEventHandler( "button_over", function ( f8_arg0, f8_arg1 )
		f4_arg0( f8_arg0 )
		if f8_arg0.menu and f8_arg0.menu.UpdateFocusSector then
			f8_arg0.menu._canClaim = false
			f8_arg0.menu:UpdateFocusSector( f8_arg0._index, f4_arg0, f8_arg0 )
		end
	end )
	f4_arg0:addEventHandler( "button_up", function ( f7_arg0, f7_arg1 )
		f4_arg0( f7_arg0, f4_arg0 )
		f7_arg0:setPriority( f4_arg0 )
		if f7_arg0.menu then
			f7_arg0.menu:UpdateFocusReticleVisibility( false )
		end
	end )
	f4_arg0:addEventHandler( "button_over_active", function ( f6_arg0, f6_arg1 )
		if f6_arg0.menu and f6_arg0.menu.UpdateFocusSector then
			f6_arg0.menu:UpdateFocusSector( f6_arg0._index, f4_arg0, f6_arg0 )
		end
	end )
	f4_arg0:addEventHandler( "button_active", function ( f5_arg0, f5_arg1 )
		if f5_arg0.menu and f5_arg0.menu.UpdateFocusReticleVisibility then
			f5_arg0.menu:UpdateFocusReticleVisibility( false )
		end
	end )
end

local f0_local9 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0.SetupSector = f0_local0
	f3_arg0.UnlockSector = f0_local0
	f3_arg0.PlayComplete = f0_local0
	local f3_local0 = f3_arg0.Lock:GetAnchorsAndPosition()
	f3_arg0._lockLeft = f3_local0.left
	f3_local0 = f3_arg0.SectorBacker:GetAnchorsAndPosition()
	f3_arg0._sectorBackerLeft = f3_local0.left
	f3_local0 = f3_arg0.SectorID:GetAnchorsAndPosition()
	f3_arg0._sectorIdLeft = f3_local0.left
	f3_arg0:setActionSFX( nil )
	f3_arg0:setActionDisabledSFX( nil )
	f3_arg0:setGainFocusSFX( SOUND_SETS.battlePass.bpHighlight )
	f3_arg0:setGainFocusGamepadSFX( SOUND_SETS.battlePass.bpHighlight )
end

local f0_local10 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PostLoadShared = f0_local0
end

function BattleMapBonusSectorButtonBase( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = f1_local0.UIButton.new()
	f1_local1:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 416, 0, 288 )
	f1_local1.id = "BattleMapBonusSectorButtonBase"
	local f1_local2
	if f1_arg1 then
		f1_local2 = f1_arg1
	else
		f1_local2 = f1_arg1.controllerIndex
	end
	f0_local0( f1_local1, f1_local0.ValidateControllerIndex( f1_local1, f1_local2 ), f1_arg1 )
	return f1_local1
end

MenuBuilder.registerType( 0x66B1A3380503DBD, BattleMapBonusSectorButtonBase )
LockTable( _M )
