-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:15
module( ..., package.seeall )
local f0_local0 = function ( f11_arg0, f11_arg1 )
	f11_arg0._introVideo = f11_arg1
	f11_arg0.TutorialVideo.Mask:SetAlpha( 1 )
	f11_arg0._endFlag = false
	f11_arg0.TutorialVideo:AnimateSequence( "MaskFadeOut" )
	Engine[0xFCF332AA8AC9B0F]( f11_arg1, VideoPlaybackFlags.MUTE )
end

local f0_local1 = function ( f10_arg0, f10_arg1 )
	local f10_local0 = OPERATOR.IsUnlocked( f10_arg0._controllerIndex, f10_arg1.ref )
	f0_local0( f10_arg0, f10_arg1.introVideo )
	f10_arg0.OperatorCard:SetupCardDetails( f10_arg1 )
	f10_arg0.SquadName:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x830785DE390B8E0, OPERATOR.GetFactionName( f10_arg1.ref ), f10_arg1.name ) ) )
	f10_arg0.Bloodtype:SetupBloodDetails( f10_arg1.bloodType )
	f10_arg0.FactionIcon:setImage( RegisterMaterial( f10_arg1.factionIcon ) )
end

local f0_local2 = function ( f9_arg0, f9_arg1 )
	if not f9_arg0._activeButton or f9_arg0._activeButton ~= f9_arg1 then
		if f9_arg0._activeButton then
			f9_arg0._activeButton:LoseButtonFocus()
		end
		f9_arg0._activeButton = f9_arg1
		f0_local0( f9_arg0, f9_arg1._operatorData )
	end
end

local f0_local3 = function ( f7_arg0 )
	f7_arg0.OperatorGrid:SetRefreshChild( function ( f8_arg0, f8_arg1, f8_arg2 )
		local f8_local0 = f8_arg1 + f8_arg2 * f7_arg0.OperatorGrid:GetNumColumns()
		if f8_local0 == nil then
			return 
		elseif not f7_arg0._operatorList then
			return 
		else
			f8_arg0:Setup( f7_arg0._controllerIndex, f7_arg0._operatorList[f8_local0 + 1], f7_arg0 )
		end
	end )
end

local f0_local4 = function ( f3_arg0, f3_arg1, f3_arg2 )
	assert( f3_arg0.OperatorCard )
	assert( f3_arg2.operatorRef )
	assert( f3_arg2.operatorList )
	f3_arg0._controllerIndex = f3_arg1
	f3_arg0.OnChildFocused = f0_local0
	f3_arg0._initialSelectedOperatorRef = f3_arg2.operatorRef
	f3_arg0._operatorList = f3_arg2.operatorList
	f3_arg0._menu = f3_arg2.currentMenu
	f0_local0( f3_arg0 )
	f3_arg0.OperatorGrid:SetNumChildren( #f3_arg0._operatorList )
	f3_arg0.OperatorGrid:RefreshContent()
	f3_arg0:AddGamepadEventCallback( "button_secondary", function ( f6_arg0, f6_arg1 )
		Engine[0x3DACD106DDC0D71]()
		ACTIONS.LeaveMenu( f6_arg0 )
	end )
	f3_arg0:AddGamepadEventCallback( "button_right_stick", function ( f5_arg0, f5_arg1 )
		if f5_arg0._menu then
			local f5_local0 = LUI.FlowManager.GetScopedData( f5_arg0._menu )
			if not f5_local0.operatorData then
				f5_local0.operatorData = {}
			end
			f5_local0.operatorData.useSelectedOperatorIndexForFocus = true
			OPERATOR.PlayFullscreenIntroVideo( f5_arg0, f5_arg0._introVideo, f5_arg1.controller )
		end
	end )
	local f3_local0 = function ()
		local f4_local0 = 0
		for f4_local1 = 1, #f3_arg0._operatorList, 1 do
			if f3_arg0._initialSelectedOperatorRef == f3_arg0._operatorList[f4_local1].ref then
				f4_local0 = f4_local1 - 1
				break
			end
		end
		return f3_arg0.OperatorGrid:GetPositionForIndex( f4_local0 )
	end
	
	if IsLanguageChinese() or IsLanguageArabic() then
		ACTIONS.AnimateSequence( f3_arg0, "LargeText" )
	end
	f3_arg0.OperatorGrid:SetDefaultFocus( f3_local0 )
	f3_arg0.OperatorGrid:GainFocus()
end

local f0_local5 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PostLoadShared = f0_local0
end

function OperatorBioBase( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "OperatorBioBase"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f0_local0( self, LUI.ValidateControllerIndex( self, f1_local1 ), controller )
	return self
end

MenuBuilder.registerType( "OperatorBioBase", OperatorBioBase )
LockTable( _M )
