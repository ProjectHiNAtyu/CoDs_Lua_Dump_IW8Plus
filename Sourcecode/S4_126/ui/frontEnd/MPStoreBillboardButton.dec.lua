-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
module( ..., package.seeall )
require( "ui.frontEnd.TimerRibbon" )
local f0_local0 = function ( f14_arg0, f14_arg1, f14_arg2, f14_arg3 )
	if f14_arg1.titleImage and 0 < #f14_arg1.titleImage then
		f14_arg0.ItemTitle:SetAlpha( 1 )
		f14_arg0.ItemTitle:setImage( RegisterMaterial( f14_arg1.titleImage ) )
	else
		f14_arg0.ItemTitle:SetAlpha( 0 )
	end
	local f14_local0 = Engine[0xF35D89342CF7712]()
	local f14_local1
	if f14_local0 ~= 0 and f14_local0 ~= 1 then
		f14_local1 = false
	else
		f14_local1 = true
	end
	if f14_arg1.fetchingDataFailed then
		f14_arg0.ItemName:SetAlpha( 1 )
		f14_arg0.ItemName:setText( Engine[0xED84C33EC5F01EA]( "STORE/FETCHING_STORE_DATA_FAILED" ) )
	elseif f14_arg1.name and not f14_local1 then
		if f14_arg1.emptyCategory then
			f14_arg0.Vignette:SetVisible( false )
			f14_arg0.ItemName:SetAlpha( 0 )
		else
			f14_arg0.Vignette:SetVisible( true )
			f14_arg0.ItemName:SetAlpha( 1 )
			f14_arg0.ItemName:setText( Engine[0xED84C33EC5F01EA]( f14_arg1.name ) )
		end
	else
		f14_arg0.Vignette:SetVisible( false )
		f14_arg0.ItemName:SetAlpha( 0 )
	end
	if f14_arg1.emptyCategory then
		f14_arg0.SoldOutMessage:SetAlpha( 1 )
	else
		f14_arg0.SoldOutMessage:SetAlpha( 0 )
	end
	if f14_arg1.asset and 0 < #f14_arg1.asset then
		f14_arg0.ItemImage:SetAlpha( 1 )
		f14_arg0.ItemImage:setImage( RegisterMaterial( f14_arg1.asset ) )
	else
		assert( false, "Missing Image Asset for item ID " .. f14_arg1.id )
		f14_arg0.ItemImage:SetAlpha( 0 )
	end
	if f14_arg2[tostring( f14_arg1.id )] and not f14_arg3 then
		f14_arg0.HotItemNotification:SetAlpha( 1 )
	else
		f14_arg0.HotItemNotification:SetAlpha( 0 )
	end
	local f14_local2 = (f14_arg1.purchaseEnd or 0) - tonumber( Engine[0x3B8CFB6758EF57C]() )
	if not f14_arg3 and 0 < f14_local2 and f14_local2 < STORE.LimitedTimeWarningThreshold then
		f14_arg0.TimerRibbon:SetEndEpoch( f14_arg1.purchaseEnd )
		local f14_local3 = LAYOUT.GetElementWidth( f14_arg0.TimerRibbon.Backer )
		local f14_local4 = f14_arg0.TimerRibbon:GetCurrentAnchorsAndPositions()
		local f14_local5 = f14_local4.right - f14_local3
		f14_arg0.TimerRibbon:SetLeft( f14_local5 )
		f14_arg0.TimerRibbon:SetAlpha( 1 )
		f14_arg0.ItemName:SetRight( f14_local5 - 8 * _1080p )
	else
		f14_arg0.TimerRibbon:SetAlpha( 0 )
		f14_arg0.ItemName:SetRight( -15 * _1080p )
	end
	f14_arg0._itemId = f14_arg1.id
end

local f0_local1 = function ( f11_arg0, f11_arg1, f11_arg2 )
	f11_arg0.UpdateButton = f0_local0
	f11_arg0:addEventHandler( "gain_focus", function ( f13_arg0, f13_arg1 )
		ACTIONS.AnimateSequence( f11_arg0, "ButtonOver" )
		f11_arg0:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -164, _1080p * 164, -4, _1080p * 124, 200, LUI.EASING.outQuadratic )
		f11_arg0.ItemTitle:SetScale( 0.1, 200, LUI.EASING.outQuadratic )
		f11_arg0.ItemImage:SetScale( 0.1, 200, LUI.EASING.outQuadratic )
		if CONDITIONS.IsMTXDebugOverlayEnabled() and f11_arg0._itemId then
			f11_arg0:dispatchEventToRoot( {
				dispatchChildren = true,
				name = "updateMTXOverlay",
				immediate = true,
				data = {
					{
						infoId = MTXDebugOverlayUtils.StoreBundleInfoIds.BUNDLE_ID,
						infoValue = f11_arg0._itemId
					},
					{
						infoId = MTXDebugOverlayUtils.StoreBundleInfoIds.BUNDLE_NAME,
						infoValue = StringTable[0x2DCF0973239E909]( CSV.bundleIDs.file, CSV.bundleIDs.cols.id, f11_arg0._itemId, CSV.bundleIDs.cols.bundleRef )
					}
				}
			} )
		end
	end )
	f11_arg0:addEventHandler( "lose_focus", function ( f12_arg0, f12_arg1 )
		ACTIONS.AnimateSequence( f11_arg0, "ButtonUp" )
		f11_arg0:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -162, _1080p * 162, 0, _1080p * 120, 100, LUI.EASING.outQuadratic )
		f11_arg0.ItemTitle:SetScale( 0, 200 )
		f11_arg0.ItemImage:SetScale( 0, 200 )
	end )
	f11_arg0:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -162, _1080p * 162, 0, _1080p * 120 )
	ACTIONS.AnimateSequence( f11_arg0, "ButtonUp" )
	if IsLanguageArabic() then
		ACTIONS.AnimateSequence( f11_arg0, "AR" )
	end
end

function MPStoreBillboardButton( menu, controller )
	local self = LUI.UIButton.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 328 * _1080p, 0, 128 * _1080p )
	self.id = "MPStoreBillboardButton"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	self._sequenceLengths = self._sequenceLengths or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local Mask = nil
	
	Mask = LUI.UIImage.new()
	Mask.id = "Mask"
	Mask:setImage( RegisterMaterial( "stencil_mask" ), 0 )
	Mask:SetAnchorsAndPosition( 0, 0, 0, 0, _1080p * 3, _1080p * -3, _1080p * 3, _1080p * -3 )
	self:addElement( Mask )
	self.Mask = Mask
	
	local ItemImage = nil
	
	ItemImage = LUI.UIImage.new()
	ItemImage.id = "ItemImage"
	ItemImage:SetMask( self.Mask )
	ItemImage:setUseStencil( true )
	ItemImage:SetAnchorsAndPosition( 0, 0, 0, 0, _1080p * 1, _1080p * -1, _1080p * -18, _1080p * 39 )
	self:addElement( ItemImage )
	self.ItemImage = ItemImage
	
	local Vignette = nil
	
	Vignette = LUI.UIImage.new()
	Vignette.id = "Vignette"
	Vignette:SetVisibility( LUI.Visibility.Hidden )
	Vignette:SetRGBFromTable( SWATCHES.highlight.vOffBlack, 0 )
	Vignette:SetAlpha( 0.5, 0 )
	Vignette:setImage( RegisterMaterial( "widg_gradient_bottom_to_top" ), 0 )
	Vignette:SetAnchorsAndPosition( 0, 0, 0, 0, _1080p * 4, _1080p * -4, _1080p * 3, _1080p * -3 )
	self:addElement( Vignette )
	self.Vignette = Vignette
	
	local ItemTitle = nil
	
	ItemTitle = LUI.UIImage.new()
	ItemTitle.id = "ItemTitle"
	ItemTitle:SetHorizontalPivot( LUI.HorizontalPivot.Left )
	ItemTitle:SetVerticalPivot( LUI.VerticalPivot.Top )
	ItemTitle:setImage( RegisterMaterial( "icon_empty_x" ), 0 )
	ItemTitle:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 16, _1080p * 164, _1080p * 13, _1080p * 87 )
	self:addElement( ItemTitle )
	self.ItemTitle = ItemTitle
	
	local ItemName = nil
	
	ItemName = LUI.UIStyledText.new()
	ItemName.id = "ItemName"
	ItemName:SetRGBFromTable( SWATCHES.text.vTextOffWhite, 0 )
	ItemName:setText( "", 0 )
	ItemName:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_SHeader.font.File ) )
	ItemName:SetFontSize( FONT_STYLES.fontStyle_SHeader.size )
	ItemName:SetMinFontSize( FONT_STYLES.fontStyle_SHeader.minSize )
	ItemName:SetTextShrinkingDisabled( true )
	ItemName:SetWordWrap( false )
	ItemName:SetAlignment( LUI.Alignment.Left )
	ItemName:SetVerticalAlignment( LUI.Alignment.Center )
	ItemName:SetOptOutRightToLeftAlignmentFlip( true )
	ItemName:SetAutoScroll( AUTOSCROLL.enabled_default )
	ItemName:SetAutoScrollStyle( LUI.UIStyledText.AutoScrollStyle.ScrollH )
	ItemName:SetShadowRGBFromInt( 0, 0 )
	ItemName:SetOutlineRGBFromInt( 0, 0 )
	ItemName:SetEllipsesEnabled( true )
	ItemName:SetMaxVisibleLines( 1 )
	ItemName:SetAnchorsAndPosition( 0, 0, 1, 0, _1080p * 15, _1080p * -15, _1080p * -34, _1080p * -10 )
	self:addElement( ItemName )
	self.ItemName = ItemName
	
	local HotItemNotification = nil
	
	HotItemNotification = LUI.UIImage.new()
	HotItemNotification.id = "HotItemNotification"
	HotItemNotification:SetAlpha( 0, 0 )
	HotItemNotification:setImage( RegisterMaterial( "hot_item_fireball_atlas" ), 0 )
	HotItemNotification:SetAnchorsAndPosition( 1, 0, 1, 0, _1080p * -45, _1080p * -15, _1080p * -45, _1080p * -15 )
	self:addElement( HotItemNotification )
	self.HotItemNotification = HotItemNotification
	
	local SoldOutMessage = nil
	
	SoldOutMessage = LUI.UIStyledText.new()
	SoldOutMessage.id = "SoldOutMessage"
	SoldOutMessage:SetRGBFromTable( SWATCHES.text.vTextOffWhite, 0 )
	SoldOutMessage:SetAlpha( 0, 0 )
	SoldOutMessage:setText( Engine[0xED84C33EC5F01EA]( "STORE/STORE_COMING_SOON" ), 0 )
	SoldOutMessage:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_XSBodyText.font.File ) )
	SoldOutMessage:SetFontSize( FONT_STYLES.fontStyle_XSBodyText.size )
	SoldOutMessage:SetMinFontSize( FONT_STYLES.fontStyle_XSBodyText.minSize )
	SoldOutMessage:SetWordWrap( false )
	SoldOutMessage:SetTracking( FONT_STYLES.fontStyle_XSBodyText.tracking * _1080p, 0 )
	SoldOutMessage:SetLeading( FONT_STYLES.fontStyle_XSBodyText.leading * _1080p, 0 )
	SoldOutMessage:SetAlignment( LUI.Alignment.Left )
	SoldOutMessage:SetOptOutRightToLeftAlignmentFlip( true )
	SoldOutMessage:SetEllipsesEnabled( true )
	SoldOutMessage:SetAnchorsAndPosition( 0, 0, 1, 0, _1080p * 15, _1080p * -15, _1080p * -39, _1080p * -15 )
	self:addElement( SoldOutMessage )
	self.SoldOutMessage = SoldOutMessage
	
	local TimerRibbon = nil
	
	TimerRibbon = MenuBuilder.BuildRegisteredType( "TimerRibbon", {
		controllerIndex = f1_local1
	} )
	TimerRibbon.id = "TimerRibbon"
	TimerRibbon.Text:setText( "1d 11h 56m", 0 )
	TimerRibbon:SetAnchorsAndPosition( 1, 0, 1, 0, _1080p * -99, _1080p * -10, _1080p * -34, _1080p * -10 )
	self:addElement( TimerRibbon )
	self.TimerRibbon = TimerRibbon
	
	local NewItemNotification = nil
	
	NewItemNotification = LUI.UIImage.new()
	NewItemNotification.id = "NewItemNotification"
	NewItemNotification:SetRGBFromTable( SWATCHES.genericMenu.newIndicator, 0 )
	NewItemNotification:SetAlpha( 0, 0 )
	NewItemNotification:SetPixelGridEnabled( true )
	NewItemNotification:SetPixelGridContrast( 0.2, 0 )
	NewItemNotification:SetPixelGridBlockWidth( 1, 0 )
	NewItemNotification:SetPixelGridBlockHeight( 1, 0 )
	NewItemNotification:SetPixelGridGutterWidth( 1, 0 )
	NewItemNotification:SetPixelGridGutterHeight( 1, 0 )
	NewItemNotification:setImage( RegisterMaterial( "v_ui_icon_new_indicator" ), 0 )
	NewItemNotification:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -38, _1080p * -10, _1080p * 10, _1080p * 38 )
	self:addElement( NewItemNotification )
	self.NewItemNotification = NewItemNotification
	
	local Focus = nil
	
	Focus = LUI.UIBorder.new( {
		borderThicknessLeft = _1080p * 5,
		borderThicknessRight = _1080p * 5,
		borderThicknessTop = _1080p * 4,
		borderThicknessBottom = _1080p * 4
	} )
	Focus.id = "Focus"
	Focus:SetBorderThicknessLeft( _1080p * 5, 0 )
	Focus:SetBorderThicknessRight( _1080p * 5, 0 )
	Focus:SetBorderThicknessTop( _1080p * 4, 0 )
	Focus:SetBorderThicknessBottom( _1080p * 4, 0 )
	Focus:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * -1, _1080p * 329, _1080p * -1, _1080p * 129 )
	self:addElement( Focus )
	self.Focus = Focus
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	self._sequenceLengths.DefaultSequence = 0
	local f1_local13 = nil
	ItemName:RegisterAnimationSequence( "ButtonOver", {
		{
			duration = 200,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.text.buttonTextHighlighted,
			easing = LUI.EASING.inOutQuadratic
		}
	} )
	Focus:RegisterAnimationSequence( "ButtonOver", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ButtonOver = function ()
		menu:AnimateSequence( "ButtonOver" )
		menu:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_SHeaderBold.font.File ) )
		menu:SetFontSize( FONT_STYLES.fontStyle_SHeaderBold.size )
		menu:SetMinFontSize( FONT_STYLES.fontStyle_SHeaderBold.minSize )
		menu:AnimateSequence( "ButtonOver" )
	end
	
	self._sequenceLengths.ButtonOver = 200
	local f1_local14 = nil
	ItemName:RegisterAnimationSequence( "ButtonUp", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.text.vTextOffWhite
		}
	} )
	Focus:RegisterAnimationSequence( "ButtonUp", {
		{
			value = 0,
			duration = 150,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ButtonUp = function ()
		menu:AnimateSequence( "ButtonUp" )
		menu:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_SHeader.font.File ) )
		menu:SetFontSize( FONT_STYLES.fontStyle_SHeader.size )
		menu:SetMinFontSize( FONT_STYLES.fontStyle_SHeader.minSize )
		menu:AnimateSequence( "ButtonUp" )
	end
	
	self._sequenceLengths.ButtonUp = 150
	self._sequences.Locked = function ()
		
	end
	
	self._sequenceLengths.Locked = 0
	self._sequences.ButtonOverDisabled = function ()
		
	end
	
	self._sequenceLengths.ButtonOverDisabled = 0
	self._sequences.ButtonUpDisabled = function ()
		
	end
	
	self._sequenceLengths.ButtonUpDisabled = 0
	local f1_local15 = nil
	ItemName:RegisterAnimationSequence( "AR", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Tracking,
			value = 0 * _1080p
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -38
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * -8
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -35
		}
	} )
	self._sequences.AR = function ()
		menu:AnimateSequence( "AR" )
	end
	
	self._sequenceLengths.AR = 0
	local f1_local16 = nil
	ItemImage:RegisterAnimationSequence( "CategoryEmpty", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Color_OP,
			value = COLOR_OP.saturation
		}
	} )
	self._sequences.CategoryEmpty = function ()
		menu:AnimateSequence( "CategoryEmpty" )
	end
	
	self._sequenceLengths.CategoryEmpty = 0
	local f1_local17 = nil
	ItemImage:RegisterAnimationSequence( "CategoryNotEmpty", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Color_OP,
			value = COLOR_OP.none
		}
	} )
	self._sequences.CategoryNotEmpty = function ()
		menu:AnimateSequence( "CategoryNotEmpty" )
	end
	
	self._sequenceLengths.CategoryNotEmpty = 0
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "MPStoreBillboardButton", MPStoreBillboardButton )
LockTable( _M )
