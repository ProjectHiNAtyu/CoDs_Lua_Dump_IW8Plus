-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
module( ..., package.seeall )
local f0_local0 = 2.5
local f0_local1 = 2
local f0_local2 = 204
local f0_local3 = 336
local f0_local4 = 16
local f0_local5 = 275
local f0_local6 = 150
local f0_local7 = 0x91E7752F9EE6B5C
local f0_local8 = 0.3
local f0_local9 = function ( f4_arg0, f4_arg1, f4_arg2, f4_arg3, f4_arg4, f4_arg5, f4_arg6, f4_arg7, f4_arg8, f4_arg9, f4_arg10, f4_arg11 )
	local f4_local0
	if f4_arg7 then
		f4_local0 = f4_arg0._upButtons
		if not f4_local0 then
		
		else
			local f4_local1 = f4_arg0._firstButton and #f4_local0 + 1 or #f4_local0
			local f4_local2 = f4_arg1 * f0_local0
			local f4_local3 = f4_arg2 / f0_local0 + f0_local0
			local f4_local4 = nil
			f4_local4 = MenuBuilder.BuildRegisteredType( "GunsmithProgressionOverviewButton", {
				controllerIndex = f4_arg0._controllerIndex,
				weaponRef = f4_arg6
			} )
			f4_local4.id = "GunsmithProgressionOverviewButton" .. #f4_local0 + 1
			f4_local4:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * f4_local2, _1080p * (f0_local0 + f4_local2), _1080p * f4_local3, _1080p * (f0_local0 + f4_local3) )
			f4_arg0:addElement( f4_local4 )
			local f4_local5 = WEAPON.GetName( f4_arg6 )
			if f4_arg8 then
				f4_local5 = Engine[0xED84C33EC5F01EA]( f0_local0 ) .. f4_local5
			end
			f4_local4:SetNameAndLevel( f4_local5, f4_arg4 + 1 )
			f4_local4.Image:setImage( RegisterMaterial( WEAPON.GetProgressionImage( f4_arg6 ) ) )
			f4_local4.Class:setText( Engine[0xED84C33EC5F01EA]( WEAPON.GetWeaponClassName( f4_arg6 ) ) )
			f4_local4.Percent:setText( Engine[0xED84C33EC5F01EA]( 0x4348825FE0CF6E9, math.floor( f4_arg4 / f4_arg5 * 100 ) ) )
			if f4_arg11.isLeftAvailable == nil then
				f4_local4.BottomLines:SetAlpha( 0 )
			end
			if f4_arg11.isRightAvailable == nil then
				f4_local4.TopLines:SetAlpha( 0 )
			end
			if f4_local0[#f4_local0] then
				if f4_arg10 then
					if not f4_arg8 then
						ACTIONS.AnimateSequence( f4_local0[#f4_local0].TopLines, "Unlocked" )
						ACTIONS.AnimateSequence( f4_local0[#f4_local0].BottomLines, "Unlocked" )
					else
						f4_local0[#f4_local0].TopLines.UnlockLevel:setText( Engine[0xED84C33EC5F01EA]( 0xEE5996CF2B4FC93, f4_arg10 ) )
						f4_local0[#f4_local0].BottomLines.UnlockLevel:setText( Engine[0xED84C33EC5F01EA]( 0xEE5996CF2B4FC93, f4_arg10 ) )
					end
				end
			elseif f4_arg0._firstButton and f4_arg10 then
				if not f4_arg8 then
					ACTIONS.AnimateSequence( f4_arg0._firstButton.TopLines, "Unlocked" )
					ACTIONS.AnimateSequence( f4_arg0._firstButton.BottomLines, "Unlocked" )
				end
				if f4_arg7 then
					f4_arg0._firstButton.BottomLines.UnlockLevel:setText( Engine[0xED84C33EC5F01EA]( 0xEE5996CF2B4FC93, f4_arg10 ) )
				else
					f4_arg0._firstButton.TopLines.UnlockLevel:setText( Engine[0xED84C33EC5F01EA]( 0xEE5996CF2B4FC93, f4_arg10 ) )
				end
			end
			f4_local4:addEventHandler( "button_over", function ( f8_arg0, f8_arg1 )
				f4_arg0:dispatchEventToParent( {
					unlockLevel = 0,
					name = "progression_button_over",
					isOverview = true,
					weaponRef = f4_arg0
				} )
			end )
			f4_local4:addEventHandler( "button_over_disable", function ( f7_arg0, f7_arg1 )
				f4_arg0:dispatchEventToParent( {
					unlockLevel = 0,
					name = "progression_button_over",
					isOverview = true,
					weaponRef = f4_arg0
				} )
			end )
			f4_local4:addEventHandler( "button_action", function ( f6_arg0, f6_arg1 )
				f4_arg0:dispatchEventToParent( {
					menuType = 2,
					name = "progression_switch_menus"
				} )
			end )
			f4_local4:SetButtonDisabled( f4_arg8 )
			f4_local4.Pips:SetRefreshChild( function ( f5_arg0, f5_arg1, f5_arg2 )
				local f5_local0 = f4_arg0.Pips:GetContentIndex( f5_arg1, f5_arg2 )
				local f5_local1 = f4_arg0[f5_local0 + 1]
				if not MatchRules[0x722F56788C744E9]( f5_local1.ref, f4_arg0 ) and f5_local1.unlocked then
					if f5_local0 + 1 == #f4_arg0 then
						ACTIONS.AnimateSequence( f5_arg0, "FinalComplete" )
						ACTIONS.AnimateSequence( f4_arg0, "Complete" )
					else
						ACTIONS.AnimateSequence( f5_arg0, "Complete" )
					end
				end
			end )
			f4_local4.Pips:SetNumChildren( f4_arg3 )
			f4_local4:SetupHorizontalLine( f4_arg3 )
			if not f4_arg0._firstButton then
				f4_arg0._firstButton = f4_local4
				f4_local4:processEvent( {
					name = "gain_focus"
				} )
				f4_arg0._firstButtonIsUp = f4_arg7
			else
				table.insert( f4_local0, f4_local4 )
			end
		end
	end
	f4_local0 = f4_arg0._downButtons
end

local f0_local10 = function ( f3_arg0 )
	for f3_local0 = 1, #f3_arg0._upButtons, 1 do
		f3_arg0._upButtons[f3_local0].navigation = {}
		if f3_local0 < #f3_arg0._upButtons then
			f3_arg0._upButtons[f3_local0].navigation.right = f3_arg0._upButtons[f3_local0 + 1]
		end
		if 1 < f3_local0 then
			f3_arg0._upButtons[f3_local0].navigation.left = f3_arg0._upButtons[f3_local0 - 1]
		end
		local f3_local3 = f3_arg0._upButtons[f3_local0].navigation
		local f3_local4 = f3_arg0._downButtons
		local f3_local5
		if f3_local0 <= #f3_arg0._downButtons and not f3_local0 then
			f3_local5 = f3_local0
		else
			f3_local5 = #f3_arg0._downButtons
		end
		f3_local3.up = f3_local4[f3_local5]
	end
	for f3_local0 = 1, #f3_arg0._downButtons, 1 do
		f3_arg0._downButtons[f3_local0].navigation = {}
		if f3_local0 < #f3_arg0._downButtons then
			f3_arg0._downButtons[f3_local0].navigation.right = f3_arg0._downButtons[f3_local0 + 1]
		end
		if 1 < f3_local0 then
			f3_arg0._downButtons[f3_local0].navigation.left = f3_arg0._downButtons[f3_local0 - 1]
		end
		local f3_local3 = f3_arg0._downButtons[f3_local0].navigation
		local f3_local4 = f3_arg0._upButtons
		local f3_local5
		if f3_local0 <= #f3_arg0._upButtons and not f3_local0 then
			f3_local5 = f3_local0
		else
			f3_local5 = #f3_arg0._upButtons
		end
		f3_local3.down = f3_local4[f3_local5]
	end
	f3_arg0._firstButton.navigation = {}
	if f3_arg0._upButtons[1] then
		f3_arg0._upButtons[1].navigation.left = f3_arg0._firstButton
		if #f3_arg0._downButtons <= #f3_arg0._upButtons then
			f3_arg0._firstButton.navigation.right = f3_arg0._upButtons[1]
		end
		f3_arg0._firstButton.navigation.down = f3_arg0._upButtons[1]
	end
	if f3_arg0._downButtons[1] then
		f3_arg0._downButtons[1].navigation.left = f3_arg0._firstButton
		if #f3_arg0._upButtons < #f3_arg0._downButtons then
			f3_arg0._firstButton.navigation.right = f3_arg0._downButtons[1]
		end
		f3_arg0._firstButton.navigation.up = f3_arg0._downButtons[1]
	end
end

local f0_local11 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.CreateNewOverviewButton = f0_local0
	f2_arg0.SetupNavigation = f0_local0
	f2_arg0._downButtons = {}
	f2_arg0._upButtons = {}
	f2_arg0._controllerIndex = f2_arg1
	f2_arg0._firstButton = nil
end

function GunsmithProgressionOverview( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "GunsmithProgressionOverview"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local WeaponMasterySubtitle = nil
	
	WeaponMasterySubtitle = LUI.UIStyledText.new()
	WeaponMasterySubtitle.id = "WeaponMasterySubtitle"
	WeaponMasterySubtitle:SetRGBFromTable( SWATCHES.IW9StyleGuide.styleGuideCool01, 0 )
	WeaponMasterySubtitle:SetAlpha( 0.2, 0 )
	WeaponMasterySubtitle:setText( Engine[0xED84C33EC5F01EA]( 0xA86A4906E9B9DB1 ), 0 )
	WeaponMasterySubtitle:setCaseStyle( LUI.CaseStyle.Uppercase )
	WeaponMasterySubtitle:SetFont( FONTS.GetFont( FONTS.SecondaryRegular.File ) )
	WeaponMasterySubtitle:SetFontSize( 20 * _PT )
	WeaponMasterySubtitle:SetMinFontSize( 20 * _PT )
	WeaponMasterySubtitle:SetWordWrap( false )
	WeaponMasterySubtitle:SetAlignment( LUI.Alignment.Right )
	WeaponMasterySubtitle:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -588, _1080p * -88, _1080p * 206.8, _1080p * 236.8 )
	self:addElement( WeaponMasterySubtitle )
	self.WeaponMasterySubtitle = WeaponMasterySubtitle
	
	local WeaponMasteryPercent = nil
	
	WeaponMasteryPercent = LUI.UIStyledText.new()
	WeaponMasteryPercent.id = "WeaponMasteryPercent"
	WeaponMasteryPercent:SetRGBFromTable( SWATCHES.IW9StyleGuide.styleGuideCool01, 0 )
	WeaponMasteryPercent:SetAlpha( 0.2, 0 )
	WeaponMasteryPercent:setText( "", 0 )
	WeaponMasteryPercent:SetFont( FONTS.GetFont( FONTS.PrimaryBlack.File ) )
	WeaponMasteryPercent:SetFontSize( 90 * _PT )
	WeaponMasteryPercent:SetMinFontSize( 90 * _PT )
	WeaponMasteryPercent:SetWordWrap( false )
	WeaponMasteryPercent:SetAlignment( LUI.Alignment.Right )
	WeaponMasteryPercent:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -588, _1080p * -88, _1080p * 108.8, _1080p * 198.8 )
	self:addElement( WeaponMasteryPercent )
	self.WeaponMasteryPercent = WeaponMasteryPercent
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "GunsmithProgressionOverview", GunsmithProgressionOverview )
LockTable( _M )
