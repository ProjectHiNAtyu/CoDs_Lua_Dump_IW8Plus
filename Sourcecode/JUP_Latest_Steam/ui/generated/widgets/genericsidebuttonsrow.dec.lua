-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:02
module( ..., package.seeall )
require( "ui.generated.widgets.genericsidebutton" )
local f0_local0 = 3
local f0_local1 = 2000
local f0_local2 = 150
local f0_local3 = 300
local f0_local4 = "checkScrollStatus"
local f0_local5 = "DynamicGrid"
local f0_local6 = {
	Left = "left",
	Right = "right"
}
local f0_local7 = function ( f20_arg0 )
	return f20_arg0._step
end

local f0_local8 = function ( f19_arg0 )
	return f19_arg0._minIndex
end

local f0_local9 = function ( f18_arg0 )
	return f18_arg0._maxIndex
end

local f0_local10 = function ( f17_arg0, f17_arg1 )
	if f17_arg1 then
		local f17_local0, f17_local1, f17_local2, f17_local3 = f17_arg0:getCurrentGlobalRect()
		local f17_local4, f17_local5, f17_local6, f17_local7 = f17_arg1:getCurrentGlobalRect()
		if f17_local0 == nil or f17_local1 == nil or f17_local2 == nil or f17_local3 == nil or f17_local4 == nil or f17_local5 == nil or f17_local6 == nil or f17_local7 == nil then
			return false
		end
		local f17_local8 = f17_local4 + (f17_local6 - f17_local4) / 2
		local f17_local9 = f17_local5 + (f17_local7 - f17_local5) / 2
		local f17_local10
		if f17_local0 >= f17_local8 or f17_local8 >= f17_local2 then
			f17_local10 = false
		else
			f17_local10 = true
		end
		return f17_local10
	else
		return false
	end
end

local f0_local11 = function ( f16_arg0, f16_arg1 )
	local f16_local0, f16_local1, f16_local2 = nil
	if f16_arg1 == f0_local0.Left then
		f16_local0 = f16_arg0:GetMaximumIndex()
		f16_local1 = f16_arg0:GetMinimumIndex()
		f16_local2 = -1
	else
		f16_local0 = f16_arg0:GetMinimumIndex()
		f16_local1 = f16_arg0:GetMaximumIndex()
		f16_local2 = 1
	end
	local f16_local3, f16_local4, f16_local5 = nil
	for f16_local6 = f16_local0, f16_local1, f16_local2 do
		local f16_local9 = f16_arg0._grid:GetElementAtPosition( f16_local6, 0 )
		if f16_local9 and not f0_local0( f16_arg0._grid, f16_local9 ) then
			f16_local9 = nil
		end
		if f16_local4 then
			if not f16_local9 then
				f16_local5 = f16_local6 - f16_local2
				break
			end
		elseif f16_local9 then
			f16_local4 = f16_local6
		end
		f16_local3 = f16_local9
	end
	if not f16_local5 then
		f16_local5 = f16_local1
	end
	return f16_local3, f16_local5
end

local f0_local12 = function ( f15_arg0 )
	f15_arg0.SideButtonPrevious:HideButton()
end

local f0_local13 = function ( f14_arg0 )
	f14_arg0.SideButtonNext:HideButton()
end

local f0_local14 = function ( f13_arg0 )
	f13_arg0:KillScrollWatch()
	f13_arg0:HideNextSideButton()
	f13_arg0:HidePreviousSideButton()
	f13_arg0:SetMouseFocusBlocker( true )
end

local f0_local15 = function ( f12_arg0 )
	f12_arg0:RemoveEventTimer( f0_local0 )
end

local f0_local16 = function ( f10_arg0, f10_arg1, f10_arg2 )
	local f10_local0 = f10_arg0:GetStep()
	local f10_local1 = f10_arg0._grid
	if f10_arg0._gridType == LUI.UIPeekingGrid then
		f10_local1._forceFocusOnEdge = true
		if f10_local1._targetPosition then
			local f10_local2
			if f10_arg2 == f0_local0.Left then
				f10_local2 = f0_local0.Right
				if not f10_local2 then
				
				else
					local f10_local3, f10_local4 = f10_arg0:GetLastElementWeCanSeeOnDirection( f10_local2 )
					f10_local1._targetPosition.x = f10_local4
				end
			end
			f10_local2 = f0_local0.Left
		end
		f10_local1:ScrollAmount( f10_arg2, f10_local0 )
		f10_local1._forceFocusOnEdge = false
	else
		local f10_local5, f10_local2 = nil
		if f10_local1._horizontalAlignment == LUI.Alignment.Center then
			local f10_local3 = Math.Round( f10_local1:GetTargetColumn() )
			if f10_arg2 == f0_local0.Left then
				local f10_local4 = f10_local3 - f10_local0
				if not f10_local4 then
					f10_local2 = f10_local4
				end
			end
			f10_local2 = f10_local3 + f10_local0
		else
			if f10_local1._horizontalAlignment == LUI.Alignment.Right then
				local f10_local3 = f0_local0.Right
				if not f10_local3 then
					f10_local5 = f10_local3
				end
			end
			f10_local5 = f0_local0.Left
		end
		f10_local1:SetTargetColumn( f10_local2, true, false )
	end
	local f10_local5 = f10_local1:Wait( f0_local0 )
	f10_local5.onComplete = function ()
		local f11_local0 = f10_arg0._gridType == f10_arg0
		local f11_local1 = nil
		if f11_local0 then
			local f11_local2 = f10_arg0:GetCurrentMenu()
			if f11_local2 then
				f11_local1 = f11_local2._currentFocusGridIndex
			end
		end
		if not f11_local1 then
			f11_local1 = f10_arg0:GetCurrentActiveIndex()
		end
		local f11_local2, f11_local3 = f10_arg0:GetLastElementWeCanSeeOnDirection( f10_arg0.Left )
		if not (f10_arg0 ~= f10_arg0.Left or f11_local3 > f11_local1) or f10_arg0 == f10_arg0.Right and f11_local1 <= f11_local3 then
			local f11_local4 = {
				y = 0,
				x = f11_local3
			}
			local f11_local5 = f10_arg0
			local f11_local6 = nil
			if f11_local0 then
				local f11_local7 = f11_local5:getParent()
				if f11_local7 and f11_local7.GetWidgetAtIndex then
					local f11_local8 = f11_local7:GetWidgetAtIndex( f11_local3 )
					if f11_local8 and f11_local8.StreakGrid then
						f11_local6 = f11_local8.StreakGrid
						f11_local4 = {
							x = 0,
							y = 0
						}
					end
				end
			end
			if not f11_local6 then
				f11_local6 = f11_local5
			end
			f11_local6:SetDefaultFocus( f11_local4 )
			if not f11_local6._skipArrowsActiveStateOnGrid then
				f11_local6:TouchMouseSetActiveToDefaultFocus( f10_arg0 )
			end
			if f11_local0 then
				f11_local6:processEventNoDispatch( {
					name = "mouseenter"
				} )
			else
				f11_local6:RemoveFocusFromChild( true )
			end
		end
		f10_arg0:UpdateScrolling()
	end
	
	f10_arg0:AddScrollWatch()
end

local f0_local17 = function ( f7_arg0, f7_arg1, f7_arg2 )
	f7_arg0._grid = f7_arg1
	local f7_local0 = nil
	if f7_arg2.forcedAxis then
		f7_local0 = f7_arg1:GetContentCount( f7_arg2.forcedAxis )
	else
		f7_local0 = f7_arg1:GetContentCountForCurrentAxis()
	end
	if not f7_local0 then
		f7_arg0._erroneousSetup = true
	end
	if f7_arg1:CheckIsGridTypeOf( LUI.UIPeekingGrid ) then
		f7_arg0._gridType = LUI.UIPeekingGrid
	elseif f7_arg1:CheckIsGridTypeOf( LUI.UICarouselGrid ) then
		f7_arg0._gridType = LUI.UICarouselGrid
	else
		local f7_local1 = f7_arg1:getParent()
		if f7_local1 and f7_local1.GetWidgetAtIndex then
			f7_arg0._gridType = f0_local0
		else
			f7_arg0._gridType = LUI.Grid
		end
	end
	f7_arg0._step = f7_arg2.sideArrowsStep or f0_local0
	f7_arg0._maxIndex = f7_local0 - 1
	f7_arg0._minIndex = 0
	f7_arg0._previousArrowHitboxOnArrowIcon = f7_arg2.sideArrowsPreviousArrowHitboxOnArrowIcon or false
	f7_arg0._nextArrowHitboxOnArrowIcon = f7_arg2.sideArrowsNextArrowHitboxOnArrowIcon or false
	f7_arg0._previousArrowOffset = f7_arg2.sideArrowsPreviousArrowOffset or 0
	f7_arg0._nextArrowOffset = f7_arg2.sideArrowsNextArrowOffset or 0
	local f7_local1 = f7_arg0.SideButtonPrevious
	local f7_local2 = f7_arg0.SideButtonNext
	f7_local1:replaceEventHandler( "button_action", function ( f9_arg0, f9_arg1 )
		local f9_local0 = f9_arg0:getParent()
		f9_local0:SetGridOnButtonAction( f9_arg1.controller, f7_arg0.Left )
	end )
	f7_local2:replaceEventHandler( "button_action", function ( f8_arg0, f8_arg1 )
		local f8_local0 = f8_arg0:getParent()
		f8_local0:SetGridOnButtonAction( f8_arg1.controller, f7_arg0.Right )
	end )
	if f7_arg0._previousArrowHitboxOnArrowIcon then
		f7_local1:SetLeft( f7_arg0._previousArrowInitialPosition.left )
		f7_local1:SetRight( 0 )
	end
	if f7_arg0._nextArrowHitboxOnArrowIcon then
		f7_local2:SetRight( -f7_arg0._nextArrowInitialPosition.left )
		f7_local2:SetLeft( 0 )
	end
	if f7_arg0._previousArrowOffset ~= 0 then
		local f7_local3
		if f7_arg0._previousArrowHitboxOnArrowIcon then
			f7_local3 = f7_local1:GetAnchorsAndPosition()
			if not f7_local3 then
			
			else
				f7_local1:SetLeft( f7_local3.left + f7_arg0._previousArrowOffset )
				f7_local1:SetRight( f7_local3.right + f7_arg0._previousArrowOffset )
			end
		end
		f7_local3 = f7_arg0._previousButtonInitialPosition
	end
	if f7_arg0._nextArrowOffset ~= 0 then
		local f7_local3
		if f7_arg0._nextArrowHitboxOnArrowIcon then
			f7_local3 = f7_local2:GetAnchorsAndPosition()
			if not f7_local3 then
			
			else
				f7_local2:SetLeft( f7_local3.left + f7_arg0._nextArrowOffset )
				f7_local2:SetRight( f7_local3.right + f7_arg0._nextArrowOffset )
			end
		end
		f7_local3 = f7_arg0._nextButtonInitialPosition
	end
	if f7_arg0._currentMenu then
		f7_arg0._currentMenu:processEvent( {
			name = "side_arrows_setup_finish",
			sideArrows = f7_arg0
		} )
	end
end

local f0_local18 = function ( f6_arg0 )
	f6_arg0:SetMouseFocusBlocker( false )
	local f6_local0 = f6_arg0._grid
	local f6_local1, f6_local2 = f6_local0:GetColumnBoundaries()
	local f6_local3 = f6_local0:CheckIsGridTypeOf( LUI.UIPeekingGrid )
	local f6_local4 = f6_local0:CheckIsGridTypeOf( LUI.UICarouselGrid )
	if not (f6_local3 or f6_local1 ~= 0 or f6_local4) or f6_local3 and f6_local0:IsOnLeftEdge() then
		f6_arg0:HidePreviousSideButton()
	else
		f6_arg0.SideButtonPrevious:ShowButton()
	end
	if not (f6_local3 or f6_local2 ~= f6_local0:GetNumColumns() or f6_local4) or f6_local3 and f6_local0:IsOnRightEdge() then
		f6_arg0:HideNextSideButton()
	else
		f6_arg0.SideButtonNext:ShowButton()
	end
end

local f0_local19 = function ( f4_arg0 )
	if f4_arg0._blockMouseMove then
		
	else
		
	end
	f4_arg0._scrollWatchTimeAccumulation = 0
	f4_arg0:UpdateSideButtons()
	f4_arg0:KillScrollWatch()
	f4_arg0:CreateEventTimer( f0_local0, f0_local0, {
		immediate = false,
		callbackFunc = function ( f5_arg0, f5_arg1 )
			local f5_local0 = f5_arg0._scrollWatchTimeAccumulation + f4_arg0
			if f4_arg0 <= f5_local0 then
				f5_arg0:KillScrollWatch()
				f5_local0 = 0
			end
			f5_arg0._scrollWatchTimeAccumulation = f5_local0
			f5_arg0:UpdateSideButtons()
			return true
		end
	} )
end

local f0_local20 = function ( f3_arg0 )
	f3_arg0.SideButtonPrevious:ShowButtonForGamepad()
	f3_arg0.SideButtonNext:ShowButtonForGamepad()
end

local f0_local21 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0._controllerIndex = f2_arg1
	f2_arg0._previousButtonInitialPosition = f2_arg0.SideButtonPrevious:GetAnchorsAndPosition()
	f2_arg0._nextButtonInitialPosition = f2_arg0.SideButtonNext:GetAnchorsAndPosition()
	f2_arg0._previousArrowInitialPosition = f2_arg0.SideButtonPrevious.Arrow:GetAnchorsAndPosition()
	f2_arg0._nextArrowInitialPosition = f2_arg0.SideButtonNext.Arrow:GetAnchorsAndPosition()
	f2_arg0.HidePreviousSideButton = f0_local0
	f2_arg0.HideNextSideButton = f0_local0
	f2_arg0.DisableSideButtons = f0_local0
	f2_arg0.SetupSideButtons = f0_local0
	f2_arg0.UpdateSideButtons = f0_local0
	f2_arg0.GetMinimumIndex = f0_local0
	f2_arg0.GetMaximumIndex = f0_local0
	f2_arg0.GetLastElementWeCanSeeOnDirection = f0_local0
	f2_arg0.AddScrollWatch = f0_local0
	f2_arg0.GetStep = f0_local0
	f2_arg0.KillScrollWatch = f0_local0
	f2_arg0.SetGridOnButtonAction = f0_local0
	f2_arg0.ShowSideButtonsForGamepad = f0_local0
	f2_arg0.SideButtonPrevious:HideButton()
	f2_arg0.SideButtonNext:HideButton()
end

function GenericSideButtonsRow( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = MenuBuilder
	local f1_local2 = f1_local0.UIElement.new()
	f1_local2:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1830, 0, 72 )
	f1_local2.id = "GenericSideButtonsRow"
	local f1_local3
	if f1_arg1 then
		f1_local3 = f1_arg1
	else
		f1_local3 = f1_arg1.controllerIndex
	end
	f1_local3 = f1_local0.ValidateControllerIndex( f1_local2, f1_local3 )
	local f1_local4 = nil
	f1_local4 = f1_local1.BuildRegisteredType( 0xC9B4D314B81AC4D, {
		controllerIndex = f1_local3
	} )
	f1_local4[0x8B72E07B55C3AC0] = "SideButtonPrevious"
	f1_local4:SetAlpha( 0, 0 )
	f1_local4:SetAnchorsAndPosition( 0, 1, 0, 0, -400, 0, 0, 0 )
	f1_local2:addElement( f1_local4 )
	f1_local2[0x379757E6500E933] = f1_local4
	local f1_local5 = nil
	f1_local5 = f1_local1.BuildRegisteredType( 0xC9B4D314B81AC4D, {
		controllerIndex = f1_local3
	} )
	f1_local5[0x8B72E07B55C3AC0] = "SideButtonNext"
	f1_local5:SetAlpha( 0, 0 )
	f1_local5:SetYRotation( 180, 0 )
	f1_local5:SetAnchorsAndPosition( 1, 0, 0, 0, 0, 400, 0, 0 )
	f1_local2:addElement( f1_local5 )
	f1_local2[0xD09035211C9ABF3] = f1_local5
	f0_local0( f1_local2, f1_local3, f1_arg1 )
	return f1_local2
end

MenuBuilder.registerType( 0xB28C903855ECA06, GenericSideButtonsRow )
LockTable( _M )
