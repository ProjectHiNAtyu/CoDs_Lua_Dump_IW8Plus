-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
module( ..., package.seeall )
require( "ui.generated.widgets.colorchoice" )
require( "ui.generated.widgets.frontend.codcaster.codcastergenericbutton" )
local f0_local0 = 6
local f0_local1 = 3
local f0_local2 = {}
local f0_local3 = {
	{
		handle = true,
		name = "Locked",
		animations = {
			nil,
			"DefaultSequence",
			"Locked"
		},
		condition = function ( f26_arg0, f26_arg1, f26_arg2 )
			local f26_local0 = f26_arg2.dataSources
			local f26_local1 = f26_local0.isDisabled
			if f26_local1 and f26_local1:GetValue( f26_arg1 ) then
				return true
			end
			local f26_local2 = f26_local0.lockedColor:GetValue( f26_arg1 )
			local f26_local3
			if f26_local2 then
				f26_local3 = f26_local2
			else
				f26_local3 = f26_local2 == f26_arg0._color
			end
			return f26_local3
		end
	},
	{
		handle = true,
		name = "Selected",
		animations = {
			nil,
			"DefaultSequence",
			"Selected"
		},
		condition = function ( f25_arg0, f25_arg1, f25_arg2 )
			if f25_arg0._isSelected ~= nil then
				return f25_arg0._isSelected
			end
			local f25_local0 = f25_arg2.dataSources.selectedColor:GetValue( f25_arg1 )
			local f25_local1
			if f25_local0 then
				f25_local1 = f25_local0
			else
				f25_local1 = f25_local0 == f25_arg0._color
			end
			return f25_local1
		end
	},
	{
		name = "Normal",
		handle = true,
		stateAnimation = "DefaultSequence",
		animate = true,
		condition = function ( f24_arg0, f24_arg1, f24_arg2 )
			return true
		end
	}
}
local f0_local4 = function ( f19_arg0, f19_arg1, f19_arg2, f19_arg3, f19_arg4 )
	f19_arg2:registerEventHandler( "button_action", function ( element, event )
		f19_arg0.selectedColor:SetValue( event.controller, element._color )
	end )
	f19_arg2:SubscribeToModelThroughElement( f19_arg2, "color", function ( f21_arg0 )
		local f21_local0 = DataModel[0x614D394F6F9A18D]( f21_arg0 )
		if f21_local0 then
			f19_arg0._color = f21_local0
			f19_arg0.Color:SetRGBFromInt( f21_local0 )
			if not f19_arg0._hasSetupVisualStates then
				f19_arg0._hasSetupVisualStates = true
				CodcasterVisualStates.SetupHandler( f19_arg0, f19_arg0, f19_arg0, {
					dataSources = {
						selectedColor = f19_arg0.selectedColor,
						lockedColor = f19_arg0.lockedColor,
						editedColor = f19_arg0.editedColor,
						isDisabled = f19_arg0.isDisabled
					}
				}, {
					onState = function ( f22_arg0, f22_arg1, f22_arg2 )
						f22_arg0:SetButtonDisabled( CodcasterVisualStates.GetCurrentVisualState( f22_arg0 ) == "Locked" )
					end
				} )
			end
		end
	end )
	f19_arg2:SubscribeToModelThroughElement( f19_arg2, "index", function ( f20_arg0 )
		f19_arg0._index = DataModel[0x614D394F6F9A18D]( f20_arg0 )
	end )
	local f19_local0 = f19_arg2:getParent()
	f19_local0:SetGridChildDataSource( f19_arg2, f19_arg3, f19_arg4 )
end

local f0_local5 = function ( f17_arg0, f17_arg1 )
	local f17_local0 = f17_arg1.controller
	local f17_local1 = f17_arg0:GetDataSource()
	local f17_local2 = DataSources.frontEnd.codcaster.teamSettings.pointers.teamDataSource
	local f17_local3 = Engine[0xED84C33EC5F01EA]( 0xD918B1305800EE9 )
	local f17_local4 = f17_local1.editedColor:GetValue( f17_local0 )
	if not f17_local4 then
		f17_local4 = GetIntForColor( COLORS.white )
	end
	OSK[0xC1C15C14B75864C]( f17_local0, f17_local3, f17_local4, f0_local0, true, false, false, function ( f18_arg0, f18_arg1, f18_arg2 )
		local f18_local0 = nil
		if f18_arg1 and f18_arg1 ~= "" then
			f18_arg1 = "#" .. f18_arg1
			if COLORS_UTILS.IsStringHexCode( f18_arg1 ) then
				f18_local0 = COLORS_UTILS.HexToRGB( f18_arg1 )
			end
		end
		if f18_local0 and f18_local0 ~= COLORS.black then
			local f18_local1 = "codcaster_team_" .. Engine[0xCA1EEE77E761DD8]( f17_arg0.teamId:GetValue( f18_arg0 ) ) .. "_" .. f17_arg0.identifier:GetValue( f18_arg0 )
			local f18_local2 = GetIntForColor( f18_local0 )
			f17_arg0.editedColor:SetValue( f18_arg0, f18_local2 )
			f17_arg0.selectedColor:SetValue( f18_arg0, CODCASTER.INVALID_COLOR )
			CODCASTER_SETTINGS.SetSettingValue( f18_arg0, f18_local1, f18_local2, CODCASTER_SETTINGS.SETTINGS_CHANGE_ORIGIN.TEAM_IDENTITY_MENU )
		elseif f18_arg2 ~= f17_arg0 then
			local f18_local3 = Engine[0xED84C33EC5F01EA]( 0x5985ECB4D2E69A )
			LUI.FlowManager.RequestErrorPopup( f18_arg0, f18_local3, f18_local3 )
		end
	end, CoD.KeyboardInputTypes.Normal )
end

local f0_local6 = function ( f15_arg0, f15_arg1, f15_arg2 )
	f15_arg0:SubscribeToModel( f15_arg2:GetModel( f15_arg1 ), function ( f16_arg0 )
		local f16_local0 = DataModel[0x614D394F6F9A18D]( f16_arg0 )
		f15_arg0.EditButton:SetButtonDisabled( f16_local0 )
		local f16_local1 = ACTIONS.AnimateSequence
		local f16_local2 = f15_arg0
		local f16_local3
		if f16_local0 then
			f16_local3 = "Locked"
		else
			f16_local3 = "Normal"
		end
		f16_local1( f16_local2, f16_local3 )
	end )
end

local f0_local7 = function ( f14_arg0, f14_arg1 )
	local f14_local0 = f14_arg1.up
	local f14_local1 = f14_arg1.down
	local f14_local2 = f14_arg1.index
	if CODCASTER_CONDITIONS.IsTeamSettingsCustomColorsEnabled() then
		f14_arg0.EditButton.id = f14_arg0.EditButton.id .. f14_local2
		f14_arg0.navigation = {
			up = f14_local0,
			down = f14_arg0.EditButton
		}
		f14_arg0.ColorsList.navigation = {
			up = f14_local0,
			down = f14_arg0.EditButton
		}
		f14_arg0.EditButton.navigation = {
			up = f14_arg0.ColorsList,
			right = f14_arg0.EditColorPreview,
			down = f14_local1
		}
		f14_arg0.EditColorPreview.navigation = {
			up = f14_arg0.ColorsList,
			left = f14_arg0.EditButton,
			down = f14_local1
		}
	end
end

local f0_local8 = function ( f6_arg0, f6_arg1, f6_arg2 )
	f6_arg0.SubscribeToDisableDatasource = f0_local0
	f6_arg0.SetupNavigation = f0_local0
	EsportsUtils.SetupAdvancedDataSourceGrid( f6_arg0.ColorsList )
	f6_arg0.ColorsList:SetRefreshChild( function ( f13_arg0, f13_arg1, f13_arg2 )
		f6_arg0( f6_arg0, f6_arg0:GetDataSource(), f13_arg0, f13_arg1, f13_arg2 )
	end )
	f6_arg0.ColorsList:SetGridDataSourceThroughElement( f6_arg0, "list" )
	f6_arg0.ColorsList:SetSharedSaveData( f0_local0 )
	if CODCASTER_CONDITIONS.IsTeamSettingsCustomColorsEnabled() then
		f6_arg0.EditButton:SetDataSourceThroughElement( f6_arg0, nil )
		f6_arg0.EditButton:PrepareOnButtonAction( f0_local0 )
	end
	f6_arg0:SubscribeToModelThroughElement( f6_arg0, "selectedColor", function ( f12_arg0 )
		local f12_local0 = DataModel[0x614D394F6F9A18D]( f12_arg0 )
		if f12_local0 and f12_local0 ~= CODCASTER.INVALID_COLOR then
			local f12_local1 = f6_arg0:GetDataSource()
			CODCASTER_SETTINGS.SetSettingValue( f6_arg0, "codcaster_team_" .. Engine[0xCA1EEE77E761DD8]( DataSources.frontEnd.codcaster.teamSettings.pointers.teamDataSource.teamId:GetValue( f6_arg0 ) ) .. "_" .. f12_local1.identifier:GetValue( f6_arg0 ), f12_local0, CODCASTER_SETTINGS.SETTINGS_CHANGE_ORIGIN.TEAM_IDENTITY_MENU )
		end
	end, true )
	f6_arg0:SubscribeToModelThroughElement( f6_arg0, "lockedColor", function ( f11_arg0 )
		local f11_local0 = DataModel[0x614D394F6F9A18D]( f11_arg0 )
		if f11_local0 then
			local f11_local1 = f6_arg0:GetDataSource()
			if f11_local1.selectedColor:GetValue( f6_arg0 ) == f11_local0 then
				local f11_local2 = f11_local1.list:GetDataSourceAtIndex( 0, f6_arg0 )
				local f11_local3 = f11_local2.color:GetValue( f6_arg0 )
				local f11_local4 = nil
				if f11_local3 ~= f11_local0 then
					f11_local4 = f11_local3
				else
					local f11_local5 = f11_local1.list:GetDataSourceAtIndex( 1, f6_arg0 )
					f11_local4 = f11_local5.color:GetValue( f6_arg0 )
				end
				local f11_local5 = f11_local1.isDisabled
				if not f11_local5 or not f11_local5:GetValue( f6_arg0 ) then
					f11_local1.selectedColor:SetValue( f6_arg0, f11_local4 )
				end
			end
		end
	end, true )
	if CODCASTER_CONDITIONS.IsTeamSettingsCustomColorsEnabled() then
		f6_arg0:SubscribeToModelThroughElement( f6_arg0, "editedColor", function ( f10_arg0 )
			local f10_local0 = DataModel[0x614D394F6F9A18D]( f10_arg0 )
			if not f10_local0 then
				f10_local0 = GetIntForColor( COLORS.white )
			end
			f6_arg0.EditColorPreview.Color:SetRGBFromInt( f10_local0, 0 )
			f6_arg0.HexCodeLabel:setText( Engine[0xED84C33EC5F01EA]( 0xCA82498EDA25A4A, Engine[0x7D3158A9539A355]( COLORS_UTILS.RGBToHex( GetColorTableFromIntColor( f10_local0 ) ) ) ) )
		end )
		f6_arg0.EditColorPreview:registerEventHandler( "button_action", function ( element, event )
			local f9_local0 = f6_arg0:GetDataSource()
			local f9_local1 = "codcaster_team_" .. Engine[0xCA1EEE77E761DD8]( DataSources.frontEnd.codcaster.teamSettings.pointers.teamDataSource.teamId:GetValue( f6_arg0 ) ) .. "_" .. f9_local0.identifier:GetValue( f6_arg0 )
			local f9_local2 = f9_local0.editedColor:GetValue( f6_arg0 )
			if not f9_local2 then
				f9_local2 = GetIntForColor( COLORS.white )
			end
			f9_local0.editedColor:SetValue( f6_arg0, f9_local2 )
			f9_local0.selectedColor:SetValue( f6_arg0, CODCASTER.INVALID_COLOR )
			CODCASTER_SETTINGS.SetSettingValue( f6_arg0, f9_local1, f9_local2, CODCASTER_SETTINGS.SETTINGS_CHANGE_ORIGIN.TEAM_IDENTITY_MENU )
		end )
		f6_arg0:SubscribeToModelThroughElement( f6_arg0, nil, function ( f7_arg0 )
			local f7_local0 = f6_arg0:GetDataSource()
			local f7_local1 = f7_local0.isDisabled
			if f7_local1 then
				f6_arg0:SubscribeToDisableDatasource( f6_arg0, f7_local1 )
			end
			if not f6_arg0.EditColorPreview._isVisualStateSetup then
				CodcasterVisualStates.SetupHandler( f6_arg0.EditColorPreview, f6_arg0, f6_arg0, {
					dataSources = {
						selectedColor = f7_local0.selectedColor,
						lockedColor = f7_local0.lockedColor,
						editedColor = f7_local0.editedColor,
						isDisabled = f7_local0.isDisabled
					}
				}, {
					preState = function ( f8_arg0, f8_arg1, f8_arg2 )
						local f8_local0 = f8_arg2.dataSources.selectedColor:GetValue( f8_arg1 )
						local f8_local1 = f8_local0 == CODCASTER.INVALID_COLOR
						local f8_local2 = f7_arg0.editedColor:GetValue( f8_arg1 )
						local f8_local3 = f8_local2 ~= nil
						if not f8_local1 and f8_local3 then
							f8_arg0._isSelected = f8_local2 == f8_local0
						else
							local f8_local4
							if f8_local1 then
								f8_local4 = f8_local1
							else
								f8_local4 = f8_local3
							end
							f8_arg0._isSelected = f8_local4
						end
					end
				} )
				f6_arg0.EditColorPreview._isVisualStateSetup = true
			end
		end )
	end
end

function CodCasterTeamColorSelector( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 796 * _1080p, 0, 160 * _1080p )
	self.id = "CodCasterTeamColorSelector"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	self._sequenceLengths = self._sequenceLengths or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local ColorsList = nil
	
	ColorsList = LUI.UIDataSourceGrid.new( {
		maxVisibleColumns = 15,
		maxVisibleRows = 1,
		controllerIndex = f1_local1,
		buildChild = function ()
			return MenuBuilder.BuildRegisteredType( "ColorChoice", {
				controllerIndex = menu
			} )
		end,
		spacingX = _1080p * -1,
		spacingY = _1080p * -1,
		columnWidth = _1080p * 54,
		rowHeight = _1080p * 54
	} )
	ColorsList.id = "ColorsList"
	ColorsList:SetMaxVisibleColumns( 15 )
	ColorsList:SetRowSpacing( -1 )
	ColorsList:setUseStencil( true )
	ColorsList:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 813, _1080p * 47, _1080p * 101 )
	self:addElement( ColorsList )
	self.ColorsList = ColorsList
	
	local f1_local4 = nil
	if CODCASTER_CONDITIONS.IsTeamSettingsCustomColorsEnabled() then
		f1_local4 = MenuBuilder.BuildRegisteredType( "CodcasterGenericButton", {
			controllerIndex = f1_local1
		} )
		f1_local4.id = "EditButton"
		f1_local4.Label:SetLeft( 0, 0 )
		f1_local4.Label:SetRight( _1080p * 238, 0 )
		f1_local4.Label:setText( Engine[0xED84C33EC5F01EA]( 0xD918B1305800EE9 ), 0 )
		f1_local4.Label:SetAlignment( LUI.Alignment.Left )
		f1_local4:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 7, _1080p * 245, _1080p * 110, _1080p * 142 )
		self:addElement( f1_local4 )
		self.EditButton = f1_local4
	end
	local f1_local5 = nil
	if CODCASTER_CONDITIONS.IsTeamSettingsCustomColorsEnabled() then
		f1_local5 = MenuBuilder.BuildRegisteredType( "ColorChoice", {
			controllerIndex = f1_local1
		} )
		f1_local5.id = "EditColorPreview"
		f1_local5:SetScale( -0.3, 0 )
		f1_local5:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 252, _1080p * 302, _1080p * 101, _1080p * 151 )
		self:addElement( f1_local5 )
		self.EditColorPreview = f1_local5
	end
	local ColorTypeTitle = nil
	
	ColorTypeTitle = LUI.UIText.new()
	ColorTypeTitle.id = "ColorTypeTitle"
	ColorTypeTitle:setText( Engine[0xED84C33EC5F01EA]( 0xEF5F0EC047B2865 ), 0 )
	ColorTypeTitle:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_SHeader.font.File ) )
	ColorTypeTitle:SetFontSize( FONT_STYLES.fontStyle_SHeader.size )
	ColorTypeTitle:SetMinFontSize( FONT_STYLES.fontStyle_SHeader.minSize )
	ColorTypeTitle:SetWordWrap( false )
	ColorTypeTitle:SetAlignment( LUI.Alignment.Left )
	ColorTypeTitle:SetVerticalAlignment( LUI.Alignment.Bottom )
	ColorTypeTitle:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 7, _1080p * 788, _1080p * 22, _1080p * 46 )
	self:addElement( ColorTypeTitle )
	self.ColorTypeTitle = ColorTypeTitle
	
	local f1_local7 = nil
	if CODCASTER_CONDITIONS.IsTeamSettingsCustomColorsEnabled() then
		f1_local7 = LUI.UIText.new()
		f1_local7.id = "HexCodeLabel"
		f1_local7:setText( Engine[0xED84C33EC5F01EA]( 0xCA82498EDA25A4A ), 0 )
		f1_local7:SetFont( FONTS.GetFont( FONTS.PrimaryRegular.File ) )
		f1_local7:SetFontSize( 18 * _PT )
		f1_local7:SetMinFontSize( 18 * _PT )
		f1_local7:SetWordWrap( false )
		f1_local7:SetAlignment( LUI.Alignment.Left )
		f1_local7:SetVerticalAlignment( LUI.Alignment.Middle )
		f1_local7:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 306, _1080p * 680, _1080p * 114, _1080p * 138 )
		self:addElement( f1_local7 )
		self.HexCodeLabel = f1_local7
	end
	self._sequences.DefaultSequence = function ()
		
	end
	
	self._sequenceLengths.DefaultSequence = 0
	local f1_local8 = nil
	if f1_local4 then
		f1_local4:RegisterAnimationSequence( "Locked", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.RGB,
				value = SWATCHES.genericMenu.locked
			}
		} )
	end
	ColorTypeTitle:RegisterAnimationSequence( "Locked", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.genericButton.lockedText
		}
	} )
	if f1_local7 then
		f1_local7:RegisterAnimationSequence( "Locked", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.RGB,
				value = SWATCHES.genericButton.lockedText
			}
		} )
	end
	self._sequences.Locked = function ()
		if menu then
			menu:AnimateSequence( "Locked" )
		end
		menu:AnimateSequence( "Locked" )
		if menu then
			menu:AnimateSequence( "Locked" )
		end
	end
	
	self._sequenceLengths.Locked = 0
	local f1_local9 = nil
	if f1_local4 then
		f1_local4:RegisterAnimationSequence( "Normal", {
			{
				value = 16777215,
				duration = 0,
				property = TWEEN_PROPERTY.RGB
			}
		} )
	end
	ColorTypeTitle:RegisterAnimationSequence( "Normal", {
		{
			value = 13817037,
			duration = 0,
			property = TWEEN_PROPERTY.RGB
		}
	} )
	if f1_local7 then
		f1_local7:RegisterAnimationSequence( "Normal", {
			{
				value = 13817037,
				duration = 0,
				property = TWEEN_PROPERTY.RGB
			}
		} )
	end
	self._sequences.Normal = function ()
		if menu then
			menu:AnimateSequence( "Normal" )
		end
		menu:AnimateSequence( "Normal" )
		if menu then
			menu:AnimateSequence( "Normal" )
		end
	end
	
	self._sequenceLengths.Normal = 0
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "CodCasterTeamColorSelector", CodCasterTeamColorSelector )
LockTable( _M )
