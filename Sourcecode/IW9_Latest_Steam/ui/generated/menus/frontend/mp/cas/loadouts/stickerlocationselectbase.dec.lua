-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:49
module( ..., package.seeall )
local f0_local0 = {
	[LOADOUT.STICKER_1_SLOT] = "iw9_placement_sticker_1",
	[LOADOUT.STICKER_2_SLOT] = "iw9_placement_sticker_2",
	[LOADOUT.STICKER_3_SLOT] = "iw9_placement_sticker_3"
}
local f0_local1 = function ( f4_arg0, f4_arg1, f4_arg2, f4_arg3, f4_arg4, f4_arg5 )
	local f4_local0 = f4_arg4.weapon:get()
	local f4_local1 = WEAPON.GetMaxStickerSlotsForWeapon( f4_local0 )
	f4_arg0.StickerLocationButtonGrid:SetRefreshChild( function ( f6_arg0, f6_arg1, f6_arg2 )
		local f6_local0 = f4_arg0.StickerLocationButtonGrid:GetContentIndex( f6_arg1, f6_arg2 )
		local f6_local1 = WEAPON.GetEquippedStickerForIndex( f4_arg0, f6_local0 + LOADOUT.STICKER_1_SLOT )
		local f6_local2, f6_local3 = nil
		if f6_local1 then
			local f6_local4
			if f6_local1 == WEAPON.StickerNoneValue then
				f6_local4 = Engine[0xED84C33EC5F01EA]( 0x582A97E6B28D01C )
				if not f6_local4 then
				
				else
					local f6_local5
					if f6_local1 == WEAPON.StickerNoneValue then
						f6_local5 = "customization_empty_slot"
					else
						f6_local5 = WEAPON.GetStickerImage( f6_local1 )
					end
					local f6_local6 = {
						removeTextBacker = true,
						localizeSubHeader = false,
						removeEquipBanner = true,
						localizeHeader = false,
						imageSize = "1x1",
						buttonData = {
							header = f6_local4,
							subHeader = Engine[0xED84C33EC5F01EA]( 0xC9E58620BF2744A, f6_local0 + 1 ),
							image = f6_local5
						},
						primaryActionText = Engine[0xED84C33EC5F01EA]( 0x7D9DC9E3291E103 )
					}
					if f6_arg0.SetupButton then
						f6_arg0:SetupButton( f6_local6 )
					end
				end
			end
			f6_local4 = Engine[0xED84C33EC5F01EA]( WEAPON.GetStickerName( f6_local1 ) )
		end
		f6_arg0:addEventHandler( "button_action", function ( f7_arg0, f7_arg1 )
			LUI.FlowManager.RequestAddMenu( GUNSMITH.GetStickerSelectMenuRef(), true, f6_arg0, nil, {
				weaponSlot = f6_arg0,
				loadoutIndex = f6_arg0,
				slotIndex = f6_arg0,
				forShowcase = f6_arg0
			}, true )
		end )
	end )
	f4_arg0.StickerLocationButtonGrid:SetNumChildren( f4_local1 )
	f4_arg0.StickerLocationButtonGrid:RefreshContent()
	local f4_local2 = WEAPON.GetWeaponClass( f4_local0 )
	if CONDITIONS.IsWeaponPreviewEnabled() then
		f4_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			side = "left",
			button_ref = "button_l3",
			priority = 2,
			helper_text = Engine[0xED84C33EC5F01EA]( 0xCBEAF62674E5E75 )
		} )
		f4_arg0:AddGamepadEventCallback( "button_left_stick", function ( f5_arg0, f5_arg1 )
			local f5_local0 = {}
			local f5_local1 = f5_arg1.controller or f4_arg0
			f5_local0.weaponTable = WEAPON.GenerateWeaponTable( f4_arg0 )
			LUI.FlowManager.RequestAddMenu( "WeaponPreview", true, f5_local1, nil, f5_local0, true )
		end )
	end
end

local f0_local2 = function ( f3_arg0, f3_arg1, f3_arg2 )
	assert( f3_arg0.MenuTitle )
	assert( f3_arg0.StickerLocationButtonGrid )
	f3_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0xEE24641D65B47E9 ) )
	if Engine[0x2DA54CF5D6B7F02]() then
		if not f3_arg2.loadoutIndex then
			DebugPrint( "WARNING: Missing \"loadoutIndex\" option for WeaponCustomize menu. Only OK after a MyChanges." )
			f3_arg2.loadoutIndex = 0
		end
		if not f3_arg2.weaponSlot then
			DebugPrint( "WARNING: Missing \"weaponSlot\" option for WeaponCustomize menu. Only OK after a MyChanges." )
			f3_arg2.weaponSlot = 0
		end
	end
	assert( f3_arg2.loadoutIndex )
	assert( f3_arg2.weaponSlot )
	WEAPON.GetStickers()
	f3_arg0.weaponModel = WEAPON.GetWeaponModel( f3_arg1, FrontEndScene.ClientWeapons.Preview, CSV.weaponOffsets.attachmentFile )
	f3_arg0:addElement( f3_arg0.weaponModel )
	local f3_local0 = LOADOUT.GetFrontendLoadoutWithShowcase( f3_arg1, f3_arg2.loadoutIndex, f3_arg2.forShowcase )
	local f3_local1 = f3_local0.weaponSetups[f3_arg2.weaponSlot]
	local f3_local2 = WEAPON.GetWeaponClass( f3_local1.weapon:get() )
	if CONDITIONS.InFrontend() and WEAPON.IsBulletWeapon( f3_local2 ) and not f3_arg2.ignoreXCam then
		GUNSMITH.SetWeaponPreviewCameraPosition( f3_arg1, ATTACHMENT.charmTag, {
			weaponClass = f3_local2,
			category = ATTACHMENT.stickerCategory
		} )
	end
	f3_arg2.ignoreXCam = false
	local f3_local3 = WEAPON.GetMaxStickerSlotsForWeapon( f3_local1.weapon:get() )
	if CONDITIONS.InFrontend() then
		local f3_local4 = WEAPON.GenerateWeaponTable( f3_local1 )
		local f3_local5 = WEAPON.GetEquippedStickers( f3_local1 )
		if f3_local5 ~= nil then
			for f3_local6 = LOADOUT.STICKER_1_SLOT, #f3_local5, 1 do
				local f3_local9 = f3_local5[f3_local6]
				if String.IsNilOrEmpty( f3_local9 ) or f3_local9 == WEAPON.StickerNoneValue then
					f3_local4.stickers[f3_local6] = f0_local0[f3_local6]
				else
					f3_local4.stickers[f3_local6] = f3_local9
				end
			end
		end
		local f3_local6 = WEAPON.GetWeaponModelName( f3_local4.weapon, f3_local4, {
			includeCamos = true,
			includeAttachments = true,
			includeStickers = true,
			controllerIndex = f3_arg1
		} )
		FrontEndScene.RequestWeaponViewModels( {
			f3_local6
		}, f3_arg1 )
		WEAPON.SetModelIfLoaded( f3_arg1, f3_arg0.weaponModel, f3_local6 )
	end
	f0_local0( f3_arg0, f3_arg1, f3_arg2.loadoutIndex, f3_arg2.weaponSlot, f3_local1, f3_arg2.forShowcase )
end

local f0_local3 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PostLoadShared = f0_local0
end

function StickerLocationSelectBase( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "StickerLocationSelectBase"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "StickerLocationSelectBase", StickerLocationSelectBase )
LockTable( _M )
