-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
BR_SANDBOX = BR_SANDBOX or {}
BR_SANDBOX.DEFAULT_NUM_ATTRACTION_STARS = 3
BR_SANDBOX.EMPTY_TIME_NUM_FOR_STARS = 0
BR_SANDBOX.attractionTypes = {
	RACE = 1,
	GULAG = 3,
	KOTH = 2,
	NONE = 0
}
BR_SANDBOX.attractionTypeData = {
	[BR_SANDBOX.attractionTypes.NONE] = {
		anim = "Hide"
	},
	[BR_SANDBOX.attractionTypes.RACE] = {
		anim = "InitRacingNoLaps",
		altAnim = "InitRacingLaps",
		csvStateData = CSV.brAttractionsRaceStates,
		csvLocationData = CSV.brAttractionsRaceLocations
	},
	[BR_SANDBOX.attractionTypes.KOTH] = {
		anim = "InitKoth",
		csvStateData = CSV.brAttractionsKothStates
	},
	[BR_SANDBOX.attractionTypes.GULAG] = {
		anim = "Hide"
	}
}
BR_SANDBOX.attractionStates = {
	RACE = {
		COUNTDOWN = 4,
		SPLIT_NEG = 10,
		OUT_OF_VEHICLE = 13,
		RUNNING_BLANK = 6,
		SHOW_RECORD = 17,
		LAP_2 = 8,
		STOP = 2,
		RECORD_SET = 14,
		FINISH_SPLIT = 16,
		LAP_3 = 9,
		SPLIT_POS = 11,
		GO = 5,
		GET_TO_START = 1,
		NEW_RECORD = 15,
		BACKUP = 3,
		OUT_OF_BOUNDS = 12,
		ENTER_VEHICLE = 0,
		LAP_1 = 7
	},
	KOTH = {
		ON_SITE_CONTESTED = 4,
		OFF_SITE_TIME_RUN_BEST = 3,
		OFF_SITE_TIME_PAUSED_PLAYER = 2,
		OFF_SITE_NO_TIME = 0,
		ON_SITE_TIME_RUN = 5,
		ON_SITE_TIME_RUN_PLAYER = 6,
		ON_SITE_TIME_RUN_BEST = 7,
		OFF_SITE_TIME_PAUSED = 1
	}
}
BR_SANDBOX.GetUnpackedAttractionData = function ( f3_arg0 )
	local f3_local0 = 8
	local f3_local1 = nil
	local f3_local2 = {}
	local f3_local3 = DataSources.inGame.player.BRData.sandbox.attractionDataPacked:GetValue( f3_arg0 )
	f3_local2.type = MP.ExtractBitsFromBitPositionInValue( f3_local3, f3_local0, 1 )
	f3_local2.location = MP.ExtractBitsFromBitPositionInValue( f3_local3, f3_local0, 9 )
	f3_local2.state = MP.ExtractBitsFromBitPositionInValue( f3_local3, f3_local0, 17 )
	f3_local2.numStarsToEarn = MP.ExtractBitsFromBitPositionInValue( f3_local3, 2, 25 )
	return f3_local2
end

BR_SANDBOX.GetUnpackedBestAttractionData = function ( f2_arg0 )
	local f2_local0 = 8
	local f2_local1 = nil
	local f2_local2 = {}
	local f2_local3 = MP.ExtractBitsFromBitPositionInValue( DataSources.inGame.player.BRData.sandbox.attractionBestDataPacked:GetValue( f2_arg0 ), f2_local0, 1 ) - 1
	if f2_local3 > BR.INVALID_CLIENT_NUM then
		f2_local2.recordHolderName = Game.DEAIDCJCEH( f2_local3 )
	end
	return f2_local2
end

BR_SANDBOX.GetAttractionCSVData = function ( f1_arg0 )
	local f1_local0 = BR_SANDBOX.GetUnpackedAttractionData( f1_arg0 )
	local f1_local1 = BR_SANDBOX.attractionTypeData[f1_local0.type]
	local f1_local2 = CSV.brAttractions
	local f1_local3 = CSV.ReadRow( f1_local2, StringTable.BJJBBCJGEJ( f1_local2.file, f1_local2.cols.index, f1_local0.type ) )
	local f1_local4 = {
		icon = f1_local3.icon,
		title = f1_local3.title,
		anim = f1_local1.anim
	}
	if f1_local1.csvLocationData then
		f1_local2 = f1_local1.csvLocationData
		f1_local3 = CSV.ReadRow( f1_local2, StringTable.BJJBBCJGEJ( f1_local2.file, f1_local2.cols.index, f1_local0.location ) )
		if f1_local3.title and f1_local3.title ~= "" then
			f1_local4.title = f1_local3.title
		end
		if f1_local3.icon and f1_local3.icon ~= "" then
			f1_local4.icon = f1_local3.icon
		end
		if f1_local0.type == BR_SANDBOX.attractionTypes.RACE then
			local f1_local5 = tonumber( f1_local3.maxLaps )
			if f1_local5 and 0 < f1_local5 then
				f1_local4.numMaxLaps = f1_local5
				f1_local4.anim = f1_local1.altAnim
			end
			local f1_local6 = tonumber( f1_local3.numMaxStars )
			if not f1_local6 then
				f1_local6 = BR_SANDBOX.DEFAULT_NUM_ATTRACTION_STARS
			end
			if f1_local6 and 0 < f1_local6 then
				f1_local4.numMaxStars = f1_local6
			end
			f1_local4.numStarsToEarn = f1_local0.numStarsToEarn
			assert( f1_local4.numStarsToEarn <= f1_local4.numMaxStars )
			for f1_local7 = 1, f1_local4.numMaxStars, 1 do
				local f1_local10 = "timeToBeat" .. f1_local7 .. "Star"
				local f1_local11 = f1_local3[f1_local10]
				local f1_local12
				if not f1_local11 or f1_local11 == "" then
					f1_local12 = BR_SANDBOX.EMPTY_TIME_NUM_FOR_STARS
					if not f1_local12 then
					
					else
						assert( f1_local12 )
						f1_local4[f1_local10] = f1_local12
					end
				end
				f1_local12 = tonumber( f1_local11 )
			end
		end
	end
	return f1_local4
end

