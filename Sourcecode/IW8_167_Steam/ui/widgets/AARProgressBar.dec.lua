-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 17-11-2025 01:22
module( ..., package.seeall )
local f0_local0 = 100
local f0_local1 = 240
local f0_local2 = function ( f11_arg0, f11_arg1, f11_arg2 )
	assert( f11_arg0.NextRank )
	assert( f11_arg0.CurrentRank )
	f11_arg2 = LUI.clamp( f11_arg2, 0, 1 )
	f11_arg0.MatchXPProgressBar.Mask:SetRightAnchor( 1 - f11_arg2, 0 )
	f11_arg0.Playhead:SetRightAnchor( 1 - f11_arg2, 0 )
	f11_arg0.curFillRate = f11_arg2
end

local f0_local3 = function ( f10_arg0, f10_arg1, f10_arg2 )
	assert( f10_arg1, "AARProgressBar->InitRankWidget(): rankWidget with id of " .. tostring( f10_arg1.id ) .. " is nil but expected never to be" )
	f10_arg2 = tonumber( f10_arg2 )
	if f10_arg2 then
		local f10_local0 = PROGRESSION.GetPlayerProgressionData( {
			_combinedRankNum = f10_arg2
		} )
		local f10_local1 = f10_local0._rankIcon
		if f10_local1 and f10_local1 ~= "" then
			f10_arg1.Icon:setImage( RegisterMaterial( f10_local1 ) )
		end
		f10_arg1:UpdateRank( f10_local0._rankDisplay )
	end
end

local f0_local4 = function ( f9_arg0, f9_arg1, f9_arg2, f9_arg3 )
	f0_local0( f9_arg1, f9_arg0.CurrentRank, f9_arg2 )
	f0_local0( f9_arg1, f9_arg0.NextRank, f9_arg3 )
end

local f0_local5 = function ( f8_arg0, f8_arg1, f8_arg2 )
	local f8_local0 = AAR.GetDebugMatchInfoPackageString( f8_arg1 )
	local f8_local1
	if f8_arg0.curFillRate == nil then
		f8_local1 = "current fill rate is nil"
	else
		f8_local1 = "pass-in fill rate " .. f8_arg2 .. " is smaller than current fill rate " .. f8_arg0.curFillRate
	end
	local f8_local2 = f8_arg0:getParent()
	assert( false, f8_local1 .. "\n" .. f8_local0 .. "\n" .. "------------- AAR Parade Menu Info:" .. " \n currentRank " .. tostring( currentRank ) .. " \n currentXP " .. tostring( f8_local2.currentXP ) .. " \n currentDisplayType " .. tostring( f8_local2.currentDisplayType ) .. " \n finalXP " .. tostring( f8_local2.finalXP ) .. " \n finalSeasonXP " .. tostring( f8_local2.finalSeasonXP ) .. " \n earnedTotalXP " .. tostring( f8_local2.earnedTotalXP ) .. " \n earnedSeasonXP " .. tostring( f8_local2.earnedSeasonXP ) .. " \n earnedTypeXP " .. tostring( f8_local2.earnedTypeXP ) .. " \n nextXP " .. tostring( f8_local2.currentXP + f8_local2.earnedTypeXP ) .. " \n rankMinXP " .. tostring( PROGRESSION.GetMilitaryRankMinXP( f8_local2.currentRank ) ) .. " \n rankMaxXP " .. tostring( PROGRESSION.GetMilitaryRankMaxXP( f8_local2.currentRank ) ) )
end

local f0_local6 = function ( f6_arg0, f6_arg1, f6_arg2 )
	assert( f6_arg0.NextRank )
	assert( f6_arg0.CurrentRank )
	local f6_local0 = f6_arg2.type
	local f6_local1 = f6_arg2.fillRate
	local f6_local2 = f6_arg2.earnedXP
	local f6_local3 = f6_arg2.curRank
	local f6_local4 = f6_arg2.nextRank
	local f6_local5 = f6_arg2.hideIndicator
	local f6_local6 = f6_arg2.reachMaxRank
	local f6_local7 = PROGRESSION.GetPlayerProgressionData( {
		_combinedRankNum = f6_local3
	} )
	if f6_local6 then
		f6_arg0.NextRank.Icon:SetAlpha( 0 )
		f6_arg0.NextRank.NextText:setText( "" )
		f6_arg0.NextRank.CurrentText:setText( "" )
		f6_arg0.NextRank.NextText:SetAlpha( 0 )
		f6_arg0.NextRank.CurrentText:SetAlpha( 0 )
		ACTIONS.AnimateSequence( f6_arg0.NextRank, "UpdateRank" )
		if f6_local3 then
			local f6_local8 = f6_local7._rankIcon
			if f6_local8 and f6_local8 ~= "" then
				f6_arg0.CurrentRank.Icon:setImage( RegisterMaterial( f6_local8 ) )
			end
			f6_arg0.CurrentRank.NextText:setText( f6_local7._rankDisplay )
			ACTIONS.AnimateSequence( f6_arg0.CurrentRank, "UpdateRank" )
		end
		f6_local1 = 1
		f6_arg0.MatchXPProgressBar.Mask:SetRightAnchor( 1 - f6_local1, 0 )
		f6_arg0.MatchXPProgressBar.Mask:SetRightAnchor( 1 - f6_local1, 0 )
		f6_arg0.Playhead:SetRightAnchor( 1 - f6_local1, 0 )
		f6_arg0.Playhead:SetRightAnchor( 1 - f6_local1, 0 )
	end
	f6_local1 = LUI.clamp( f6_local1, 0, 1 )
	if f6_arg0.curFillRate == nil or f6_local1 < f6_arg0.curFillRate then
		f0_local0( f6_arg0, f6_arg1, f6_local1 )
		local f6_local8 = f0_local0
	end
	local f6_local8 = (f6_local1 - f6_arg0.curFillRate) * 10 * f0_local0
	if f6_local8 == 0 then
		f6_local8 = 1
	end
	f6_arg0:InitProgressBarRank( f6_arg1, f6_local3, f6_local4 )
	f6_arg0.MatchXPProgressBar.Mask:SetRightAnchor( 1 - f6_arg0.curFillRate, 0 )
	f6_arg0.MatchXPProgressBar.Mask:SetRightAnchor( 1 - f6_local1, f6_local8, LUI.EASING.inOutQuartic )
	f6_arg0.Playhead:SetRightAnchor( 1 - f6_arg0.curFillRate, 0 )
	f6_arg0.Playhead:SetRightAnchor( 1 - f6_local1, f6_local8, LUI.EASING.inOutQuartic )
	if 1 < f6_local8 then
		Engine.BJDBIAGIDA( SOUND_SETS.aarrewards.progressBar )
		local f6_local9 = 0.1
		local f6_local10 = f6_local8 - f6_local8 * 0.1
		if f6_local10 <= 0 then
			f6_local10 = 1
		else
			
		end
		local f6_local11 = f6_arg0:Wait( f6_local10 )
		f6_local11.onComplete = function ()
			Engine.BJDBIAGIDA( SOUND_SETS.aarrewards.progressStop )
			if f6_arg0 == 1 then
				ACTIONS.AnimateSequence( f6_arg0, "Complete" )
			end
		end
		
	end
	f6_arg0.curFillRate = f6_local1
	return f6_local8 + f0_local0
end

local f0_local7 = function ( f5_arg0, f5_arg1, f5_arg2 )
	local f5_local0 = f5_arg0.ToNextRankXP
	local f5_local1 = f5_local0
	f5_local0 = f5_local0.SetAlpha
	local f5_local2
	if f5_arg2 then
		f5_local2 = 0
	else
		f5_local2 = 1
	end
	f5_local0( f5_local1, f5_local2 )
end

function PostLoadFunc( f4_arg0, f4_arg1, f4_arg2 )
	f4_arg0.InitProgressBar = f0_local0
	f4_arg0.InitProgressBarRank = f0_local0
	f4_arg0.UpdateFill = f0_local0
	f4_arg0.InitProgressBarWidgetVisibility = f0_local0
end

function AARProgressBar( menu, controller )
	local self = LUI.UIVerticalNavigator.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1500 * _1080p, 0, 76 * _1080p )
	self.id = "AARProgressBar"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local Frame = nil
	
	Frame = MenuBuilder.BuildRegisteredType( "AARProgressBarFrame", {
		controllerIndex = f1_local1
	} )
	Frame.id = "Frame"
	Frame:SetAnchorsAndPosition( 0, 0, 0, 1, _1080p * -5, _1080p * 5, 0, _1080p * 60 )
	self:addElement( Frame )
	self.Frame = Frame
	
	local CurrentRank = nil
	
	CurrentRank = MenuBuilder.BuildRegisteredType( "AARProgressRank", {
		controllerIndex = f1_local1
	} )
	CurrentRank.id = "CurrentRank"
	CurrentRank:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * -84, _1080p * -20, _1080p * -24, _1080p * 100 )
	self:addElement( CurrentRank )
	self.CurrentRank = CurrentRank
	
	local NextRank = nil
	
	NextRank = MenuBuilder.BuildRegisteredType( "AARProgressRank", {
		controllerIndex = f1_local1
	} )
	NextRank.id = "NextRank"
	NextRank:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * 20, _1080p * 84, _1080p * -24, _1080p * 100 )
	self:addElement( NextRank )
	self.NextRank = NextRank
	
	local MatchXPProgressBar = nil
	
	MatchXPProgressBar = MenuBuilder.BuildRegisteredType( "AARProgressBarFillAlt", {
		controllerIndex = f1_local1
	} )
	MatchXPProgressBar.id = "MatchXPProgressBar"
	MatchXPProgressBar:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1500, _1080p * 21, _1080p * 51 )
	self:addElement( MatchXPProgressBar )
	self.MatchXPProgressBar = MatchXPProgressBar
	
	local ToNextRankXP = nil
	
	ToNextRankXP = LUI.UIText.new()
	ToNextRankXP.id = "ToNextRankXP"
	ToNextRankXP:SetRGBFromTable( SWATCHES.AAR.XPText, 0 )
	ToNextRankXP:setText( "", 0 )
	ToNextRankXP:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	ToNextRankXP:SetWordWrap( false )
	ToNextRankXP:SetAlignment( LUI.Alignment.Right )
	ToNextRankXP:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -200, 0, _1080p * -24, _1080p * -6 )
	self:addElement( ToNextRankXP )
	self.ToNextRankXP = ToNextRankXP
	
	local Playhead = nil
	
	Playhead = MenuBuilder.BuildRegisteredType( "AARPlayhead", {
		controllerIndex = f1_local1
	} )
	Playhead.id = "Playhead"
	Playhead:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 0, 0, _1080p * 76 )
	self:addElement( Playhead )
	self.Playhead = Playhead
	
	local Lightning = nil
	
	Lightning = LUI.UIImage.new()
	Lightning.id = "Lightning"
	Lightning:SetAlpha( 0, 0 )
	Lightning:setImage( RegisterMaterial( "aar_lightning" ), 0 )
	Lightning:SetBlendMode( BLEND_MODE.addWithAlpha )
	Lightning:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -6, _1080p * 5, _1080p * 16, _1080p * 56 )
	self:addElement( Lightning )
	self.Lightning = Lightning
	
	local EllipseGlow = nil
	
	EllipseGlow = LUI.UIImage.new()
	EllipseGlow.id = "EllipseGlow"
	EllipseGlow:SetRGBFromTable( SWATCHES.genericButton.textFocus, 0 )
	EllipseGlow:SetAlpha( 0, 0 )
	EllipseGlow:setImage( RegisterMaterial( "ui_generic_glow" ), 0 )
	EllipseGlow:SetBlendMode( BLEND_MODE.addWithAlpha )
	EllipseGlow:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -10, _1080p * 9, _1080p * -34, _1080p * 106 )
	self:addElement( EllipseGlow )
	self.EllipseGlow = EllipseGlow
	
	local BarGlow = nil
	
	BarGlow = LUI.UIImage.new()
	BarGlow.id = "BarGlow"
	BarGlow:SetRGBFromTable( SWATCHES.genericButton.textFocus, 0 )
	BarGlow:SetAlpha( 0, 0 )
	BarGlow:setImage( RegisterMaterial( "ui_generic_glow_square" ), 0 )
	BarGlow:SetBlendMode( BLEND_MODE.addWithAlpha )
	BarGlow:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -6, _1080p * 5, _1080p * 14, _1080p * 58 )
	self:addElement( BarGlow )
	self.BarGlow = BarGlow
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	Lightning:RegisterAnimationSequence( "Complete", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -6
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Right
		},
		{
			value = 1,
			duration = 17,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.outCubic
		},
		{
			value = 0,
			duration = 17,
			property = TWEEN_PROPERTY.Right
		},
		{
			duration = 17,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -6
		},
		{
			duration = -61,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -270,
			easing = LUI.EASING.outCubic
		},
		{
			value = 0,
			duration = -61,
			property = TWEEN_PROPERTY.Right,
			easing = LUI.EASING.outCubic
		},
		{
			value = 1,
			duration = -61,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.snap
		},
		{
			value = 0,
			duration = 33,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.inCubic
		}
	} )
	EllipseGlow:RegisterAnimationSequence( "Complete", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 16
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 56
		},
		{
			duration = 17,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -50,
			easing = LUI.EASING.outCubic
		},
		{
			duration = 17,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 30,
			easing = LUI.EASING.outCubic
		},
		{
			duration = 17,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -54,
			easing = LUI.EASING.outCubic
		},
		{
			duration = 17,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 126,
			easing = LUI.EASING.outCubic
		},
		{
			value = 5.29462817E-315,
			duration = 33,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.outCubic
		},
		{
			duration = 33,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -24
		},
		{
			duration = 33,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 96
		},
		{
			value = 0,
			duration = -45,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.inCubic
		},
		{
			duration = -61,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -80,
			easing = LUI.EASING.inCubic
		},
		{
			duration = -61,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 152,
			easing = LUI.EASING.inCubic
		}
	} )
	BarGlow:RegisterAnimationSequence( "Complete", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -15
		},
		{
			value = 5.297218497E-315,
			duration = 50,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.outCubic
		},
		{
			duration = 50,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -355
		},
		{
			value = 0,
			duration = 183,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.inCubic
		},
		{
			duration = 183,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -1039,
			easing = LUI.EASING.outCubic
		}
	} )
	self._sequences.Complete = function ()
		menu:AnimateSequence( "Complete" )
		menu:AnimateSequence( "Complete" )
		menu:AnimateSequence( "Complete" )
	end
	
	PostLoadFunc( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "AARProgressBar", AARProgressBar )
LockTable( _M )
