-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
PreNavChecks = PreNavChecks or {}
LUI.PreNavObject = LUI.Class()
LUI.PreNavObject.objectTypes = {}
LUI.PreNavObject.Register = function ( f22_arg0, f22_arg1 )
	LUI.PreNavObject.objectTypes[f22_arg0] = f22_arg1
end

LUI.PreNavObject.Instantiate = function ( f21_arg0, f21_arg1, f21_arg2, f21_arg3 )
	local f21_local0 = LUI.PreNavObject.objectTypes[f21_arg0].new( f21_arg1, f21_arg2, f21_arg3 )
	f21_local0._name = f21_arg0
	return f21_local0
end

LUI.PreNavObject.init = function ( f20_arg0 )
	
end

LUI.PreNavGroup = LUI.Class()
LUI.PreNavGroup.init = function ( f19_arg0, f19_arg1, f19_arg2, f19_arg3 )
	f19_arg0._preNavList = {}
	for f19_local3, f19_local4 in ipairs( f19_arg1 ) do
		table.insert( f19_arg0._preNavList, LUI.PreNavObject.Instantiate( f19_local4, f19_arg0, f19_arg2, f19_arg3 ) )
	end
end

PreNavChecks.PerformPreNavChecks = function ( f18_arg0, f18_arg1, f18_arg2 )
	local f18_local0 = false
	for f18_local5, f18_local6 in ipairs( f18_arg0._preNavList ) do
		local f18_local7 = f18_local6.IsNavigationAllowed
		local f18_local8 = f18_arg1
		local f18_local4
		if f18_arg2 then
			f18_local4 = f18_arg2
		else
			f18_local4 = f18_arg2[f18_local6._name]
		end
		f18_local0 = f18_local7( f18_local8, f18_local4 )
		if f18_local0 == false then
			if CONDITIONS.InPrivatePartyAndNotHost() then
			
			else
				Engine[0xB81A5136C5503E4]( "xstopmatchmaking PreNavChecks.PerformPreNavChecks 0" )
				if LUI.FlowManager.IsAutoNavigationActive() then
					LUI.FlowManager.ResetAutomaticNavigation( "PreNav failed" )
					break
				else
					Engine[0xCB5324D2064305]( f18_local0 )
					return f18_local0
				end
			end
			Engine[0x5DEE98AA6FB3C2]( f18_arg1, CoD.LeavePartyMoveUI.NO, CoD.LeavePartyShowMessage.NO, "Failed Prenav Check" )
		end
	end
	Engine[0xCB5324D2064305]( f18_local0 )
	return f18_local0
end

PremiumNavCheck = LUI.Class( LUI.PreNavObject )
PremiumNavCheck.init = function ( f17_arg0 )
	PremiumNavCheck.super.init( f17_arg0 )
end

PremiumNavCheck.IsNavigationAllowed = function ( f16_arg0 )
	local f16_local0 = GameInstall[0x37F59297B471D9A]()
	if GameInstall[0x18809AE3656D481]( f16_local0, f16_arg0 ) then
		return true
	elseif PLAY_MENU.IsGameModeFreeTrial( f16_local0 ) then
		return true
	else
		local f16_local1 = GameInstall[0xA106AEABEC1F79B]( f16_local0 )
		Engine[0x5DEE98AA6FB3C2]( f16_arg0, CoD.LeavePartyMoveUI.NO, CoD.LeavePartyShowMessage.NO, "PremiumNavCheck Fail" )
		LUI.FlowManager.RequestPopupMenu( nil, "BlockedPremiumMenuPopup", true, f16_arg0, false, {
			entitlement = f16_local1
		} )
		return false
	end
end

LUI.PreNavObject.Register( "premium", PremiumNavCheck )
PremiumPartyNavCheck = LUI.Class( LUI.PreNavObject )
PremiumPartyNavCheck.init = function ( f15_arg0 )
	PremiumPartyNavCheck.super.init( f15_arg0 )
end

PremiumPartyNavCheck.IsNavigationAllowed = function ( f14_arg0 )
	local f14_local0 = Lobby[0x6957722EF74F5D2]()
	if f14_local0 then
		f14_local0 = Lobby.IsNotAloneInPrivateParty()
	end
	if not f14_local0 then
		return true
	elseif Lobby[0x918CFC897096203]() and Engine[0xCBCF315DE9B8AC6]() then
		return true
	elseif not Engine[0xF668A3B8E44ED0A]() then
		return true
	elseif PLAY_MENU.IsGameModeFreeTrial( GameInstall[0x37F59297B471D9A]() ) then
		return true
	else
		LUI.FlowManager.RequestPopupMenu( nil, "OpeningMenuWithNonPremiumPartyMembersWarning", true, f14_arg0, false, {} )
		return false
	end
end

LUI.PreNavObject.Register( "premiumPartyMembers", PremiumPartyNavCheck )
ScenarioMissingNavCheck = LUI.Class( LUI.PreNavObject )
ScenarioMissingNavCheck.init = function ( f13_arg0 )
	ScenarioMissingNavCheck.super.init( f13_arg0 )
end

ScenarioMissingNavCheck.IsNavigationAllowed = function ( f12_arg0 )
	local f12_local0 = GameInstall[0x37F59297B471D9A]()
	if FILE_MANAGEMENT.ShowPopupIfMissingDLC( f12_arg0, GameInstall[0x6B89459E3972855]( f12_local0 ), f12_local0 ) then
		return false
	else
		return true
	end
end

LUI.PreNavObject.Register( "scenarioMissing", ScenarioMissingNavCheck )
ScenarioMissingPartyNavCheck = LUI.Class( LUI.PreNavObject )
ScenarioMissingPartyNavCheck.init = function ( f11_arg0 )
	ScenarioMissingPartyNavCheck.super.init( f11_arg0 )
end

ScenarioMissingPartyNavCheck.IsNavigationAllowed = function ( f10_arg0 )
	local f10_local0 = Lobby[0x6957722EF74F5D2]()
	if f10_local0 then
		f10_local0 = Lobby.IsNotAloneInPrivateParty()
	end
	if not f10_local0 then
		return true
	end
	for f10_local4, f10_local5 in ipairs( Engine[0x3ECF4CC1433258]( GameInstall[0x6B89459E3972855]( GameInstall[0x37F59297B471D9A]() ) ) ) do
		if not Engine[0x9547D3F49D0BAFE]( f10_local5 ) then
			LUI.FlowManager.RequestPopupMenu( nil, "PopupScenarioMissingPartyMembersWarning", true, f10_arg0, false, {} )
			return false
		end
	end
	return true
end

LUI.PreNavObject.Register( "scenarioMissingPartyMembers", ScenarioMissingPartyNavCheck )
PartyMembersMaxSize = LUI.Class( LUI.PreNavObject )
PartyMembersMaxSize.init = function ( f9_arg0 )
	PartyMembersMaxSize.super.init( f9_arg0 )
end

PartyMembersMaxSize.IsNavigationAllowed = function ( f8_arg0 )
	local f8_local0 = Lobby[0x6957722EF74F5D2]()
	if f8_local0 then
		f8_local0 = Lobby.IsNotAloneInPrivateParty()
	end
	if not f8_local0 then
		return true
	end
	local f8_local1 = Engine[0x2634E2AA518C252]()
	local f8_local2 = Engine[0x7024E7C50CD3F2F]( CoD.PlayMode.Core )
	local f8_local3 = GameInstall[0x37F59297B471D9A]()
	if f8_local3 == 0x94AEAE0CA9F0779 or f8_local3 == 0xC54C0E0B95F79FD then
		f8_local2 = 1
	elseif f8_local3 == 0x25098EAC88F7B49 then
		f8_local2 = 4
	end
	if f8_local2 < f8_local1 then
		LUI.FlowManager.RequestPopupMenu( nil, "OpeningMenuWithHighPrivatePartyMemberCountWarning", true, f8_arg0, false, {
			currentCount = f8_local1,
			maxCount = f8_local2
		} )
		return false
	end
	return true
end

LUI.PreNavObject.Register( "partyMembersMaxSize", PartyMembersMaxSize )
SplitscreenAllowed = LUI.Class( LUI.PreNavObject )
SplitscreenAllowed.init = function ( f7_arg0 )
	SplitscreenAllowed.super.init( f7_arg0 )
end

SplitscreenAllowed.IsNavigationAllowed = function ( f5_arg0, f5_arg1 )
	local f5_local0 = {
		[0x25098EAC88F7B49] = true,
		[0xC54C0E0B95F79FD] = true,
		[0x94AEAE0CA9F0779] = true,
		[0x50244F91DDD936B] = true
	}
	local f5_local1 = f5_local0[GameInstall[0x37F59297B471D9A]()]
	if not f5_local1 then
		if f5_arg1 then
			f5_local1 = f5_arg1
		else
			f5_local1 = f5_arg1.force
		end
	end
	if f5_local1 then
		if 1 < Engine[0x70187FE84AE61FD]() then
			LUI.FlowManager.RequestPopupMenu( nil, "OpeningMenuWithSplitscreenWarning", true, f5_arg0, false, {
				yesAction = function ()
					f5_arg0 = Lobby.KickSplitScreenPlayerAndGetActiveController( f5_arg0 )
					if Engine[0x71D9671B0095515]() then
						LUI.FlowManager.RequestPopupMenu( nil, "OpeningMenuWithSplitscreenPartyMemberWarning", true, f5_arg0, false )
					end
					if f5_arg0 and f5_arg0.retryFunc then
						f5_arg0:retryFunc()
					end
				end
			} )
			return false
		elseif Engine[0x71D9671B0095515]() then
			LUI.FlowManager.RequestPopupMenu( nil, "OpeningMenuWithSplitscreenPartyMemberWarning", true, f5_arg0, false )
			return false
		end
	end
	return true
end

LUI.PreNavObject.Register( "splitscreenAllowed", SplitscreenAllowed )
IsUserSMSChallenged = LUI.Class( LUI.PreNavObject )
IsUserSMSChallenged.init = function ( f4_arg0 )
	IsUserSMSChallenged.super.init( f4_arg0 )
end

IsUserSMSChallenged.IsNavigationAllowed = function ( f3_arg0 )
	local f3_local0 = CoD.GetClientPlatform()
	if not PHONE_VERIFICATION.PlatformSupportSMSChallenge( f3_local0 ) or PHONE_VERIFICATION.ShouldIgnoreSMSChallenge() or CROSS_LAUNCH.IsLuaGameModeHashSP() then
		return true
	else
		local f3_local1 = PHONE_VERIFICATION.PLATFORM_DATA[f3_local0].smsChallengeData
		if f3_local1.IsUserChallenged( f3_arg0 ) or Dvar[0x9E5BE3B4BBA4E0E]( 0x3FE1728C4DF0D0C ) then
			LUI.FlowManager.RequestPopupMenu( nil, "SMSVerificationMenu", false, f3_arg0, false, {
				screen = f3_local1.screen,
				url = f3_local1.GetSMSUrl( f3_arg0 )
			}, nil, true, true )
			return false
		else
			return true
		end
	end
end

LUI.PreNavObject.Register( "isUserSMSChallenged", IsUserSMSChallenged )
function PopupScenarioMissingPartyMembersWarning( f1_arg0, f1_arg1 )
	local f1_local0 = MenuBuilder.BuildRegisteredType( "PopupMessageAndButtons", {
		controllerIndex = f1_arg1.controllerIndex,
		title = Engine[0xED84C33EC5F01EA]( 0xB7CC88A30D3FF0C ),
		message = Engine[0xED84C33EC5F01EA]( 0xDC51BB853904AF ),
		buttons = {
			{
				label = Engine[0xED84C33EC5F01EA]( 0xC6D515BE207B9A5 ),
				action = function ()
					
				end
			}
		}
	} )
	f1_local0.id = "PopupScenarioMissingPartyMembersWarning"
	return f1_local0
end

MenuBuilder.registerType( "PopupScenarioMissingPartyMembersWarning", PopupScenarioMissingPartyMembersWarning )
