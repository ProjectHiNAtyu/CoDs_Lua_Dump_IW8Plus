-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:52
module( ..., package.seeall )
local f0_local0 = 320 * _1080p
local f0_local1 = 240 * _1080p
local f0_local2 = 640 * _1080p
local f0_local3 = 480 * _1080p
function AnimateWindow( f3_arg0, f3_arg1 )
	assert( f3_arg0.window )
	assert( f3_arg0.fadeOut )
	if f3_arg0._lastState == f3_arg1 then
		
	else
		
	end
	f3_arg0._lastState = f3_arg1
	if f3_arg1 == KillstreakConnectionState.INACTIVE then
		f3_arg0.window:processEvent( {
			name = "killstreak_connection_inactive"
		} )
		f3_arg0.fadeOut:SetAlpha( 0 )
		f3_arg0.window:SetAlpha( 0 )
	elseif f3_arg1 == KillstreakConnectionState.READY then
		f3_arg0.window:processEvent( {
			name = "killstreak_connection_ready"
		} )
		f3_arg0.fadeOut:SetAlpha( 0 )
		f3_arg0.window:SetAlpha( 1 )
		f3_arg0.window:SetAnchorsAndPosition( 0, 1, 0, 1, 0, f0_local0, 0, f0_local0, 0 )
	else
		if f3_arg1 == KillstreakConnectionState.CONNECTING then
			local f3_local0 = 150
			local f3_local1 = 100
			local f3_local2 = 150
			local f3_local3 = 150
			f3_arg0.window:processEvent( {
				name = "killstreak_connection_connecting"
			} )
			f3_arg0.fadeOut:SetAlpha( 0 )
			f3_arg0.window:SetAlpha( 1 )
			f3_arg0.window:SetAnchorsAndPosition( 0, 1, 0, 1, 0, f0_local0, 0, f0_local0, 0 )
			local f3_local4 = f3_arg0.window:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -f0_local0 / 2, f0_local0 / 2, -f0_local0 / 2, f0_local0 / 2, f3_local0 )
			if f3_local4 then
				f3_local4.onComplete = function ()
					local f6_local0 = f3_arg0.window:Wait( f3_arg0 )
					f6_local0.onComplete = function ()
						f6_local0.window:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -640, 640, -360, 360, f6_local0 )
						f6_local0.fadeOut:SetAlpha( 1, f6_local0 )
					end
					
				end
				
			end
		end
		if f3_arg1 == KillstreakConnectionState.CONNECTED then
			local f3_local0 = 100
			f3_arg0.window:processEvent( {
				name = "killstreak_connection_connected"
			} )
			f3_arg0.fadeOut:SetAlpha( 0, f3_local0 )
			f3_arg0.window:SetAlpha( 0 )
			f3_arg0.window:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -640, 640, -360, 360, 0 )
		elseif f3_arg1 == KillstreakConnectionState.DISCONNECTING then
			f3_arg0.window:processEvent( {
				name = "killstreak_connection_disconnecting"
			} )
			f3_arg0.fadeOut:SetAlpha( 0 )
			f3_arg0.window:SetAlpha( 1 )
			local f3_local0 = f3_arg0.window:Wait( 100 )
			f3_local0.onComplete = function ()
				local f4_local0 = f3_arg0.window:SetAnchorsAndPosition( 0, 1, 0, 1, 0, f3_arg0, 0, f3_arg0, 150 )
				if f4_local0 then
					f4_local0.onComplete = function ()
						f4_local0.window:SetAlpha( 0, 150 )
					end
					
				end
			end
			
		end
	end
end

function KillstreakConnection( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "KillstreakConnection"
	self.window = MenuBuilder.BuildRegisteredType( "KillstreakConnectionWindow" )
	self:addElement( self.window )
	self.fadeOut = LUI.UIImage.new()
	self.fadeOut:SetAnchorsAndPosition( 0, 0, 0, 0, -640, 640, -360, 360 )
	self.fadeOut:SetRGBFromInt( 0 )
	self.fadeOut.id = "fadeOut"
	self:addElement( self.fadeOut )
	assert( controller.controllerIndex )
	self:SubscribeToModel( DataSources.inGame.MP.scorestreakHuds.connectionState:GetModel( controller.controllerIndex ), function ( f2_arg0 )
		AnimateWindow( menu, DataModel.JJEHAEBDF( menu ) )
	end )
	return self
end

MenuBuilder.registerType( "KillstreakConnection", KillstreakConnection )
LockTable( _M )
