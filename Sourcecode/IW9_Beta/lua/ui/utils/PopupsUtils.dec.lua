-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:01
PopupsUtils = PopupsUtils or {}
local f0_local0 = 20
local f0_local1 = 10
PopupsUtils.PopupYesActionAttempts = {
	nil,
	0,
	0,
	0
}
PopupsUtils.typeOfPopup = {
	POPUP_OK = 0,
	POPUP_YESNOCANCEL = 2,
	POPUP_BUTTONS_ONLY = 5,
	POPUP_IMAGE = 4,
	POPUP_MULTIPLE_BUTTONS = 3,
	POPUP_NO_BUTTONS = 6,
	POPUP_YESNO = 1
}
local f0_local2 = hashset( {
	string.lower( Engine[0xED84C33EC5F01EA]( 0x78C2C5FE58603AC ) ),
	string.lower( Engine[0xED84C33EC5F01EA]( 0x3956F54E845F7DE ) ),
	string.lower( Engine[0xED84C33EC5F01EA]( 0x5C021A8F6CC0045 ) ),
	string.lower( Engine[0xED84C33EC5F01EA]( 0x1B666071E863518 ) ),
	string.lower( Engine[0xED84C33EC5F01EA]( 0xC6D515BE207B9A5 ) )
}, string.lower( Engine[0xED84C33EC5F01EA]( 0x4E76830223A336F ) ) )
local f0_local3 = function ( f16_arg0, f16_arg1 )
	f16_arg0.GenericPopup:SetTop( f0_local0, 0 )
end

local f0_local4 = function ( f15_arg0, f15_arg1, f15_arg2 )
	f15_arg0.GenericPopup.Title:setText( f15_arg1 )
	local f15_local0 = f15_arg0.GenericPopup.Title:GetAnchorsAndPosition()
	local f15_local1 = LAYOUT.GetTextWidth( f15_arg0.GenericPopup.Title, f15_arg2.controllerIndex )
	if not CONDITIONS.IsUsingMobileLayout() then
		f15_arg0.GenericPopup.TextHighlight:SetRight( f15_local0.left + f15_local1 + f0_local0 )
	end
end

local f0_local5 = function ( f14_arg0, f14_arg1 )
	local f14_local0 = f14_arg0:GetCurrentFont()
	local f14_local1, f14_local2, f14_local3, f14_local4 = f14_arg0:getLocalRect()
	local f14_local5, f14_local6, f14_local7, f14_local8 = f14_arg0:GetAnchorData()
	local f14_local9 = assert
	local f14_local10
	if (f14_local6 ~= 0 or f14_local8 ~= 1) and (f14_local6 ~= 1 or f14_local8 ~= 0) then
		f14_local10 = false
	else
		f14_local10 = true
	end
	f14_local9( f14_local10 )
	f14_local11, f14_local10, f14_local12, f14_local13 = GetTextDimensions( f14_arg1, f14_local0, math.abs( f14_local2 - f14_local4 ) )
	return f14_local12 - f14_local11
end

local f0_local6 = function ( f13_arg0, f13_arg1 )
	local f13_local0 = f13_arg0.GenericPopup.Message
	local f13_local1, f13_local2, f13_local3, f13_local4 = f13_local0:getLocalRect()
	local f13_local5 = LAYOUT.GetTextHeight( f13_local0, f13_arg1.controllerIndex )
	local f13_local6, f13_local7, f13_local8, f13_local9 = f13_arg0.GenericPopup.Buttons:getLocalRect()
	if f13_local7 < f13_local2 + f13_local5 then
		f13_arg0.GenericPopup.Buttons:SetTop( f13_local2 + f13_local5, 0 )
		f13_arg1.messageHeight = f13_local5
	end
end

local f0_local7 = function ( f11_arg0 )
	local bindButton = LUI.UIBindButton.new()
	bindButton.id = "selfBindButton"
	f11_arg0:addElement( bindButton )
	f11_arg0.bindButton = bindButton
	
	f11_arg0.bindButton:addEventHandler( "button_secondary", function ( f12_arg0, f12_arg1 )
		ACTIONS.LeaveMenu( f12_arg0 )
	end )
end

local f0_local8 = function ( f10_arg0, f10_arg1 )
	local f10_local0 = 0
	local f10_local1 = f10_arg0.GenericPopup.Title:GetAnchorsAndPosition()
	local f10_local2 = f10_local1.bottom - f10_local1.top
	local f10_local3 = nil
	if f10_arg1.messageHeight ~= 0 then
		f10_local3 = f10_arg1.messageHeight
	else
		local f10_local4 = f10_arg0.GenericPopup.Message:GetAnchorsAndPosition()
		f10_local3 = f10_local4.bottom - f10_local4.top
	end
	f10_local0 = f10_local1.top + f10_local2 + f10_local3 + (f10_arg0.GenericPopup.Buttons:GetRowHeight() + f10_arg0.GenericPopup.Buttons:GetSpacingY()) * #f10_arg1.buttons
	local f10_local5, f10_local6, f10_local7, f10_local8 = f10_arg0.GenericPopup:getLocalRect()
	local f10_local9 = math.abs( f10_local8 - f10_local6 )
	local f10_local10, f10_local11, f10_local12, f10_local13 = f10_arg0:getLocalRect()
	local f10_local14 = f10_local13 - f10_local11
	if f10_local9 < f10_local0 then
		f10_arg0.GenericPopup:setHeight( f10_local0 + f0_local0, 0 )
		return 
	else
		
	end
end

local f0_local9 = function ( f5_arg0, f5_arg1 )
	if f5_arg1.typeOfPopup == PopupsUtils.typeOfPopup.POPUP_OK then
		local f5_local0 = {}
		local f5_local1 = {}
		local f5_local2 = f5_arg1.label
		if not f5_local2 then
			f5_local2 = Engine[0xED84C33EC5F01EA]( 0x3956F54E845F7DE )
		end
		f5_local1.label = f5_local2
		f5_local1.action = f5_arg1.action or function ( f9_arg0 )
			
		end
		
		f5_local0[1] = f5_local1
		f5_arg1.buttons = f5_local0
	elseif f5_arg1.typeOfPopup == PopupsUtils.typeOfPopup.POPUP_YESNO or f5_arg1.typeOfPopup == PopupsUtils.typeOfPopup.POPUP_YESNOCANCEL then
		local f5_local0 = {}
		local f5_local1 = {}
		local f5_local2 = f5_arg1.yesLabel
		if not f5_local2 then
			f5_local2 = Engine[0xED84C33EC5F01EA]( 0xD0FAE1882F3E336 )
		end
		f5_local1.label = f5_local2
		f5_local1.action = function ( f8_arg0, f8_arg1 )
			if f5_arg0.yesAction then
				f5_arg0.yesAction( f8_arg0, f8_arg1 )
			end
		end
		
		f5_local1.actionSFX = f5_arg1.actionSFX
		f5_local0[1] = f5_local1
		f5_local1 = {}
		f5_local2 = f5_arg1.noLabel
		if not f5_local2 then
			f5_local2 = Engine[0xED84C33EC5F01EA]( 0x1B666071E863518 )
		end
		f5_local1.label = f5_local2
		f5_local1.action = f5_arg1.noAction or function ( f7_arg0 )
			
		end
		
		f5_local0[2] = f5_local1
		f5_arg1.buttons = f5_local0
		if f5_arg1.typeOfPopup == PopupsUtils.typeOfPopup.POPUP_YESNOCANCEL then
			f5_local0 = table.insert
			f5_local2 = f5_arg1.buttons
			local f5_local3 = {}
			local f5_local4 = f5_arg1.cancelLabel
			if not f5_local4 then
				f5_local4 = Engine[0xED84C33EC5F01EA]( 0xDF4B921D6190715 )
			end
			f5_local3.label = f5_local4
			f5_local3.action = f5_arg1.cancelAction or function ( f6_arg0 )
				
			end
			
			f5_local0( f5_local2, f5_local3 )
		elseif CONDITIONS.IsUsingMobileLayout() then
			f5_arg0.GenericPopup.Buttons = f5_arg0.GenericPopup.YesNoButtons
			f5_arg1.isYesNoHorizontal = true
		end
	elseif f5_arg1.typeOfPopup == PopupsUtils.typeOfPopup.POPUP_NO_BUTTONS then
		f5_arg1.buttons = {}
	end
	PopupsUtils.SetupPopupButtons( f5_arg0.GenericPopup.Buttons, f5_arg1 )
end

PopupsUtils.SetupPopupButtons = function ( f2_arg0, f2_arg1 )
	f2_arg0:SetNumChildren( #f2_arg1.buttons )
	f2_arg0:SetRefreshChild( function ( f3_arg0, f3_arg1, f3_arg2 )
		local f3_local0 = 0
		if f2_arg0.isYesNoHorizontal then
			local f3_local1 = f3_arg1 + 1
			if not f3_local1 then
				f3_local0 = f3_local1
			end
		end
		f3_local0 = f3_arg2 + 1
	end )
end

PopupsUtils.SetupPopup = function ( f1_arg0, f1_arg1 )
	local f1_local0 = f1_arg1.title
	if not f1_local0 then
		f1_local0 = Engine[0xED84C33EC5F01EA]( 0x1CCA5C59ECE1EA6 )
	end
	local f1_local1 = f1_arg1.message or ""
	f1_arg1.isYesNoHorizontal = false
	f1_arg1.messageHeight = 0
	if IsLanguageArabic() then
		f1_arg1.message:setHeight( 36 )
	end
	if f1_arg1.MapLoadErrors ~= nil then
		f0_local0( f1_arg0, f1_arg1 )
	end
	if f1_arg1.buttonsClosePopup == nil then
		f1_arg1.buttonsClosePopup = true
	end
	f0_local0( f1_arg0, f1_local0, f1_arg1 )
	f1_arg0.GenericPopup.Message:setText( f1_local1 )
	if f1_arg1.useDevFont then
		f1_arg0.GenericPopup.Message:SetFont( FONTS.GetFont( FONTS.Dev.File ) )
		f1_arg0.GenericPopup.Message:SetRGBFromTable( COLORS.white, 0 )
	end
	if f1_arg1.textAlignment then
		f1_arg0.GenericPopup.Message:SetAlignment( f1_arg1.textAlignment )
	end
	f0_local0( f1_arg0, f1_arg1 )
	f0_local0( f1_arg0, f1_arg1 )
	f0_local0( f1_arg0, f1_arg1 )
end

