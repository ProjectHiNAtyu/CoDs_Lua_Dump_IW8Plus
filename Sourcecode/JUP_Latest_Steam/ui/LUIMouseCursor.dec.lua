-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
LUI.UIMouseCursor = LUI.Class( LUI.UIElement )
LUI.UIMouseCursor.priority = 1000
LUI.UIMouseCursor.mouseTimeout = 3000
LUI.UIMouseCursor.cinematicHideDelay = 2000
local f0_local0 = function ( f13_arg0, f13_arg1 )
	if CONDITIONS.InFrontend() then
		local f13_local0 = LUI.FlowManager.GetTopMostOpenMenuInfo()
		if f13_local0 and f13_local0.menu and f13_local0.menu._shouldCursorBeHiddenDuringCinematics ~= nil and f13_local0.menu._shouldCursorBeHiddenDuringCinematics == true then
			return 
		end
	end
	local f13_local0 = f13_arg0.lastMoveTime + LUI.UIMouseCursor.cinematicHideDelay <= Engine[0x6991337AE950F99]()
	local f13_local1 = Engine[0xB63308D00984B0A]()
	if f13_local1 and not f13_arg0.hiddenInCinematic and f13_local0 then
		f13_arg0:SetAlpha( 0 )
		f13_arg0.hiddenInCinematic = true
		if Engine[0x3ECA657EE4C6C9]() then
			Engine[0x5F965FF5540EAC8]( false )
		end
	elseif (not f13_local0 or not f13_local1) and f13_arg0.hiddenInCinematic then
		f13_arg0:SetAlpha( f13_arg0.showCursor )
		f13_arg0.hiddenInCinematic = false
		if Engine[0x3ECA657EE4C6C9]() then
			Engine[0x5F965FF5540EAC8]( f13_arg0.showCursor == 1 )
		end
	end
end

MouseCursorType = {
	CURSOR_TYPE_ARROW_NORMAL = {
		id = 0,
		material = 0x7CB1873354650DD
	},
	CURSOR_TYPE_ARROW_ACTIVE = {
		id = 1,
		material = 0x210AC0BFD3EEAC8
	},
	CURSOR_TYPE_ARROW_CONTEXTUAL = {
		id = 2,
		material = 0x1C0C0BC9681129
	},
	CURSOR_TYPE_IBEAM = {
		id = 3,
		material = 0xBD973C77A6BB160
	},
	CURSOR_TYPE_MOVE_HOVER = {
		id = 4,
		material = 0x918E3C0920E57C
	},
	CURSOR_TYPE_MOVE_CLICK = {
		id = 5,
		material = 0xB8A3440748E8EEA
	},
	CURSOR_TYPE_WIN_ARROW = {
		id = 6
	},
	CURSOR_TYPE_WIN_HAND = {
		id = 7
	},
	CURSOR_TYPE_WIN_IBEAM = {
		id = 8
	},
	CURSOR_TYPE_WIN_SIZEALL = {
		id = 9
	},
	CURSOR_TYPE_ARROW_CLOSE = {
		id = 10,
		material = 0xC67231D788EB47A
	}
}
LUI.UIMouseCursor.UpdateMouseCursor = function ( f12_arg0, f12_arg1 )
	local f12_local0 = MouseCursorType.CURSOR_TYPE_ARROW_NORMAL
	if f12_arg0 then
		local f12_local1 = LUI.MouseCursorContextualMenuLayer.GetLayer()
		local f12_local2
		if f12_local1 then
			f12_local2 = f12_local1
		else
			f12_local2 = f12_local1:AnyValidContextualDataConditions( f12_arg0, f12_arg1, nil )
		end
		local f12_local3 = false
		if CONDITIONS.IsMobileOrMobileSim() then
			f12_local3 = f12_arg0.handleTouchInput
		else
			f12_local3 = f12_arg0.handleMouseButton
		end
		if f12_local2 then
			f12_local0 = MouseCursorType.CURSOR_TYPE_ARROW_CONTEXTUAL
		elseif f12_arg0._mouseCursorTypeOverride then
			f12_local0 = f12_arg0._mouseCursorTypeOverride
		elseif f12_local3 then
			f12_local0 = MouseCursorType.CURSOR_TYPE_ARROW_ACTIVE
		end
	end
	local f12_local1 = Engine[0xEE6F69FEA944B13]()
	f12_local1 = f12_local1.cursor
	if f12_local1 then
		f12_local1._controllerIndex = f12_arg1
		f12_local1:SetMouseCursorController( f12_arg1 )
		if f12_local1._currentCursorType ~= f12_local0 then
			f12_local1._currentCursorType = f12_local0
			if Engine[0x3ECA657EE4C6C9]() then
				Engine[0x4D9D0802A4A54A3]( f12_local0.id )
			else
				local f12_local2 = RegisterMaterial
				local f12_local4 = f12_local0.material
				if not f12_local4 then
					f12_local4 = MouseCursorType.CURSOR_TYPE_ARROW_NORMAL.material
				end
				f12_local1:setImage( f12_local2( f12_local4 ) )
			end
		end
	end
end

LUI.UIMouseCursor.SetMouseVisibility = function ( f11_arg0 )
	local f11_local0 = Engine[0xEE6F69FEA944B13]()
	f11_local0 = f11_local0.cursor
	if f11_local0 then
		if f11_arg0 then
			f11_arg0 = f11_local0.showCursor == 1
		end
		local f11_local1 = f11_local0
		local f11_local2 = f11_local0.SetAlpha
		local f11_local3
		if f11_arg0 then
			f11_local3 = 1
		else
			f11_local3 = 0
		end
		f11_local2( f11_local1, f11_local3 )
		if Engine[0x3ECA657EE4C6C9]() then
			Engine[0x5F965FF5540EAC8]( f11_arg0 )
		end
	end
end

LUI.UIMouseCursor.ResetShowCusorVariable = function ()
	local f10_local0 = Engine[0xEE6F69FEA944B13]()
	f10_local0 = f10_local0.cursor
	if f10_local0 then
		f10_local0.showCursor = 0
	end
end

LUI.UIMouseCursor.ShowMouseCursorOnActivity = function ( f9_arg0 )
	local f9_local0 = Engine[0xEE6F69FEA944B13]()
	f9_local0 = f9_local0.cursor
	if f9_local0 then
		f9_local0.showMouseCursorOnActivity = f9_arg0
	end
end

LUI.UIMouseCursor.SetAndUpdateEventMouseCursorTypes = function ( f6_arg0, f6_arg1, f6_arg2, f6_arg3 )
	LUI.UIMouseCursor.UpdateMouseCursorTypes( f6_arg0, f6_arg1, f6_arg2, f6_arg3 )
	f6_arg0:addEventHandler( "leftmousedown", function ( f8_arg0, f8_arg1 )
		local f8_local0 = f8_arg0._mouseCursorTypeDown
		if f8_local0 then
			f8_arg0:OverrideMouseCursorType( f8_local0 )
			LUI.UIMouseCursor.UpdateMouseCursor( f8_arg0, f6_arg0 )
		end
	end )
	f6_arg0:addEventHandler( "leftmouseup", function ( f7_arg0, f7_arg1 )
		local f7_local0 = f7_arg0._mouseCursorTypeUp
		if f7_local0 then
			f7_arg0:OverrideMouseCursorType( f7_local0 )
			LUI.UIMouseCursor.UpdateMouseCursor( f7_arg0, f6_arg0 )
		end
	end )
end

LUI.UIMouseCursor.UpdateMouseCursorTypes = function ( f5_arg0, f5_arg1, f5_arg2, f5_arg3 )
	f5_arg0:UpdateMouseCursorTypes( f5_arg2, f5_arg3 )
	local f5_local0 = f5_arg0
	local f5_local1 = f5_arg0.OverrideMouseCursorType
	local f5_local2
	if f5_arg0.m_leftMouseDown and not f5_arg3 then
		f5_local2 = f5_arg3
	else
		f5_local2 = f5_arg2
	end
	f5_local1( f5_local0, f5_local2 )
	LUI.UIMouseCursor.UpdateMouseCursor( f5_arg0, f5_arg1 )
end

LUI.UIMouseCursor.ResetMouseCursorTypes = function ( f4_arg0, f4_arg1 )
	f4_arg0:UpdateMouseCursorTypes( nil, nil )
	f4_arg0:OverrideMouseCursorType( nil )
	LUI.UIMouseCursor.UpdateMouseCursor( f4_arg0, f4_arg1 )
end

LUI.UIMouseCursor.init = function ( f1_arg0, f1_arg1 )
	LUI.UIMouseCursor.super.init( f1_arg0 )
	f1_arg0.id = "UIMouseCursor"
	f1_arg0:SetupMouseCursor()
	f1_arg0:SetAnchorsAndPosition( 0, 1, 0, 1, -32, 32, -32, 32 )
	f1_arg0:setImage( RegisterMaterial( 0x7CB1873354650DD ) )
	f1_arg0:setPriority( LUI.UIMouseCursor.priority )
	f1_arg0.lastMoveTime = Engine[0x6991337AE950F99]()
	f1_arg0.showCursor = 0
	f1_arg0.hiddenInCinematic = false
	f1_arg0.showMouseCursorOnActivity = true
	f1_arg0:SetAlpha( 0 )
	f1_arg0._controllerIndex = f1_arg1.controllerIndex
	local f1_local0 = function ()
		f1_arg0.lastMoveTime = Engine[0x6991337AE950F99]()
		if f1_arg0.showCursor == 0 and f1_arg0.showMouseCursorOnActivity then
			f1_arg0.showCursor = 1
			f1_arg0:SetAlpha( 1 )
			if Engine[0x3ECA657EE4C6C9]() then
				Engine[0x5F965FF5540EAC8]( true )
			end
		end
		if f1_arg0.hiddenInCinematic then
			f1_arg0:SetAlpha( f1_arg0.showCursor )
			f1_arg0.hiddenInCinematic = false
			if Engine[0x3ECA657EE4C6C9]() then
				Engine[0x5F965FF5540EAC8]( f1_arg0.showCursor == 1 )
			end
		end
	end
	
	f1_arg0:replaceEventHandler( "mousedown", f1_local0 )
	f1_arg0:SubscribeToModel( DataModel[0x40E824FE270E174]( DataModel[0x4DF5CFBC1771947]( f1_arg0._controllerIndex ), "cursor.notify" ), f1_local0, true )
	local self = LUI.UITimer.new( {
		interval = 1000,
		broadcastToRoot = false,
		disposable = false,
		event = {
			name = "update_mouse"
		},
		eventTarget = f1_arg0
	} )
	self.id = "updateTimer"
	f1_arg0:addElement( self )
	f1_arg0:registerEventHandler( "update_mouse", f0_local0 )
	f1_arg0:SubscribeToInputTypeModel( f1_arg0._controllerIndex, function ( f2_arg0, f2_arg1 )
		if CONDITIONS.IsGamepad( f2_arg1._controllerIndex ) and f2_arg1.showCursor == 1 then
			f2_arg1:SetAlpha( 0, 400 )
			f2_arg1.showCursor = 0
			if Engine[0x3ECA657EE4C6C9]() then
				Engine[0x5F965FF5540EAC8]( false )
			end
		else
			f2_arg1:SetAlpha( f2_arg1.showCursor )
			if Engine[0x3ECA657EE4C6C9]() then
				Engine[0x5F965FF5540EAC8]( f2_arg1.showCursor == 1 )
			end
		end
	end )
end

