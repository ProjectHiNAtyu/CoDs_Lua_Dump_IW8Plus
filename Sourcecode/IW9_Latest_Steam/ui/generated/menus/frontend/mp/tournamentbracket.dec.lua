-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
module( ..., package.seeall )
require( "ui.generated.widgets.genericbutton" )
require( "ui.generated.widgets.frontend.lobby.lobbymembers" )
require( "ui.generated.widgets.frontend.menutitle" )
require( "ui.generated.widgets.frontend.mp.mpplayerdetails" )
LUI.FlowManager.RegisterFenceGroup( "TournamentBracket", {
	nil,
	"tournament"
} )
LUI.FlowManager.RequestSetStack( "TournamentBracket", {
	{
		name = "MainLockoutMenu"
	},
	{
		name = "MainMenu"
	},
	{
		name = "MPMainMenu"
	}
} )
local f0_local0 = "frontEnd.mp.tournamentbracket"
local f0_local1 = function ()
	WipeGlobalModelsAtPath( f0_local0 )
end

function LeaveTournament( f8_arg0, f8_arg1 )
	assert( f8_arg1.TournamentBracket )
	local f8_local0 = {
		title = Engine[0xED84C33EC5F01EA]( 0x1CCA5C59ECE1EA6 )
	}
	local f8_local1 = Tournament[0x43F20AA8E089BF8]()
	if f8_local1 ~= MP.TournamentParticipationStatus.ELIMINATED and f8_local1 ~= MP.TournamentParticipationStatus.VICTORIOUS then
		Engine[0xC4146BA76D0F982]( SOUND_SETS.prestige.prestigeCancel )
	end
	if Lobby[0x63537242F1D48FF]() and not Lobby[0x6957722EF74F5D2]() then
		f8_local0.message = Engine[0xED84C33EC5F01EA]( 0x3770EE4D0EBEC14 )
	else
		f8_local0.message = Engine[0xED84C33EC5F01EA]( 0x3704312575A17C7 )
	end
	f8_local0.yesAction = function ( f10_arg0, f10_arg1 )
		Tournament[0xF8B2F41CC5CF158]()
		Engine[0x5DEE98AA6FB3C2]( f10_arg1, CoD.LeavePartyMoveUI.YES, CoD.LeavePartyShowMessage.NO, "TournamentBracket LeaveTournament" )
		LUI.FlowManager.RequestLeaveMenu( f8_arg0.TournamentBracket, true, true )
	end
	
	f8_local0.noAction = function ()
		
	end
	
	local f8_local2 = MenuBuilder.BuildRegisteredType( "PopupYesNo", f8_local0 )
	f8_local2.id = "LeaveTournament"
	return f8_local2
end

MenuBuilder.registerType( "LeaveTournament", LeaveTournament )
function UpdateBracket( f7_arg0 )
	local f7_local0 = Tournament[0xBC16030F3F31FF4]()
	for f7_local1 = 1, f7_local0 + 1, 1 do
		local f7_local4 = 2 * 2 ^ (f7_local0 - f7_local1)
		for f7_local5 = 1, f7_local4, 1 do
			local f7_local8 = f7_local1 - 1
			local f7_local9 = (f7_local5 - 1) / 2
			local f7_local10 = (f7_local5 - 1) % 2
			local f7_local11 = Tournament[0x10ED0BFB4EB6AFE]( f7_local8, f7_local9, f7_local10 )
			if 0 <= f7_local11 then
				local f7_local12 = Engine[0xED84C33EC5F01EA]( Tournament[0xB85D61851DF0085]( f7_local11 ) ) .. ":" .. Tournament[0xECEE048BFFCC94E]( f7_local8, f7_local9, f7_local10 )
				if f7_local11 == Tournament[0xC54AB658C88AAB1]() then
					f7_local12 = "->" .. f7_local12
				end
				f7_arg0.bracketList.roundList[f7_local1].teamButton[f7_local5].Text:setText( f7_local12, 0 )
			else
				f7_arg0.bracketList.roundList[f7_local1].teamButton[f7_local5].Text:setText( "" )
			end
			if Tournament[0x1DDEE0C61545CC2]( f7_local8, f7_local9 ) then
				f7_arg0.bracketList.roundList[f7_local1].teamButton[f7_local5].Text:SetRGBFromTable( COLORS.HighlightBlue )
			else
				f7_arg0.bracketList.roundList[f7_local1].teamButton[f7_local5].Text:SetRGBFromTable( COLORS.white )
			end
		end
	end
	local f7_local1 = Tournament[0x43F20AA8E089BF8]()
	if f7_local1 == 0 then
		f7_arg0.ReadyButton.Text:setText( "NOT PARTICIPATING" )
	elseif f7_local1 == 1 then
		if Tournament[0xCE7845EC09BA110]() then
			f7_arg0.ReadyButton.Text:setText( "READY UP (READY)" )
		else
			f7_arg0.ReadyButton.Text:setText( "READY UP (NOT READY)" )
		end
	elseif f7_local1 == 2 then
		f7_arg0.ReadyButton.Text:setText( "ELIMINATED" )
	elseif f7_local1 == 3 then
		f7_arg0.ReadyButton.Text:setText( "VICTORIOUS" )
	end
end

local f0_local2 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0:SetAlpha( 0, 0 )
	f2_arg0:SetAlpha( 1, 400, LUI.EASING.outQuadratic )
	f2_arg0.menuModelPath = f0_local0
	DebugPrint( "TournamentBracket - PostLoadFunc" )
	local f2_local0 = _1080p * 35
	
	local bracketList = LUI.UIHorizontalList.new()
	bracketList:SetAnchorsAndPosition( 0, 1, 0, 1, 100 * _1080p, 200 * _1080p, 600 * _1080p, 700 * _1080p )
	bracketList:SetAlignment( LUI.Alignment.Left )
	bracketList:SetSpacing( f2_local0 )
	bracketList.id = "bracketList"
	bracketList:SetNoWrap( true )
	f2_arg0:addElement( bracketList )
	f2_arg0.bracketList = bracketList
	
	local f2_local2 = Tournament[0xBC16030F3F31FF4]()
	bracketList.roundList = {}
	for f2_local3 = 1, f2_local2 + 1, 1 do
		local f2_local6 = 40 * _1080p
		local f2_local7 = f2_local6 + 40 * _1080p
		local f2_local8 = LUI.UIVerticalList.new( {
			verticalAlignment = LUI.Alignment.Middle
		} )
		f2_local8:SetAnchorsAndPosition( 0, 1, 0, 1, 0 * _1080p, 250 * _1080p, 0 * _1080p, 40 * _1080p )
		f2_local8:SetSpacing( f2_local7 * 2 ^ (f2_local3 - 1) - f2_local6 )
		f2_local8.id = "roundList" .. f2_local3
		f2_local8:SetNoWrap( true )
		bracketList:addElement( f2_local8 )
		bracketList.roundList[f2_local3] = f2_local8
		local f2_local9 = 2 * 2 ^ (f2_local2 - f2_local3)
		f2_local8.teamButton = {}
		for f2_local10 = 1, f2_local9, 1 do
			local f2_local13 = MenuBuilder.BuildRegisteredType( "GenericButton", {
				controllerIndex = f2_arg1
			} )
			f2_local13:SetAnchorsAndPosition( 0, 1, 0, 1, 0 * _1080p, 250 * _1080p, 0 * _1080p, f2_local6 )
			f2_local13.id = "teamButton" .. f2_local3 .. "-" .. f2_local10
			f2_local13.roundIndex = f2_local3 - 1
			f2_local13.matchIndex = (f2_local10 - 1) / 2
			f2_local13.Text:SetAlignment( LUI.Alignment.Left )
			f2_local13:addEventHandler( "button_action", function ( f6_arg0 )
				Tournament[0x92A47F581B2CF0B]( f6_arg0.roundIndex, f6_arg0.matchIndex )
			end )
			f2_local8:addElement( f2_local13 )
			f2_local8.teamButton[f2_local10] = f2_local13
		end
	end
	f2_arg0.ReadyButton:addEventHandler( "button_action", function ( f5_arg0 )
		if Tournament[0xCE7845EC09BA110]() then
			Tournament[0x4BA9CB370A7D174]( 0 )
		else
			Tournament[0x4BA9CB370A7D174]( 1 )
		end
	end )
	f2_arg0:AddGamepadEventCallback( "button_secondary", function ( f4_arg0, f4_arg1 )
		local f4_local0 = f4_arg1.controller or f2_arg0
		if not Lobby.AreWePrivatePartyHost() then
			LUI.FlowManager.RequestPopupMenu( nil, "LeaveTournament", true, f4_local0, false, {
				TournamentBracket = f4_arg0
			} )
		else
			Tournament[0xF8B2F41CC5CF158]()
			ACTIONS.LeaveMenu( f4_arg0 )
		end
		return true
	end )
	if not Lobby[0x63537242F1D48FF]() then
		Social[0x4CFFBE37F5E69BB]( f2_arg1, "Opened TournamentBracket" )
	end
	f2_arg0.ReadyButton.navigation = {}
	f2_arg0.ReadyButton.navigation.down = f2_arg0.bracketList
	f2_arg0.ReadyButton.navigation.left = f2_arg0.LobbyMembers
	f2_arg0.ReadyButton.navigation.right = f2_arg0.LobbyMembers
	f2_arg0.bracketList.navigation = {}
	f2_arg0.bracketList.navigation.up = f2_arg0.ReadyButton
	f2_arg0.bracketList.navigation.left = f2_arg0.LobbyMembers
	f2_arg0.bracketList.navigation.right = f2_arg0.LobbyMembers
	f2_arg0.LobbyMembers.navigation = {}
	f2_arg0.LobbyMembers.navigation.left = f2_arg0.ReadyButton
	f2_arg0.LobbyMembers.navigation.right = f2_arg0.ReadyButton
	local f2_local3 = LUI.UITimer.new( {
		interval = 1000,
		event = {
			name = "refreshBracket"
		}
	} )
	f2_local3.id = "RefreshBracketTimer"
	f2_arg0:addElement( f2_local3 )
	f2_arg0:registerEventHandler( "refreshBracket", function ( element, event )
		UpdateBracket( element )
	end )
	f2_arg0:processEvent( {
		name = "refreshBracket"
	} )
end

function TournamentBracket( menu, controller )
	local self = LUI.UIHorizontalNavigator.new()
	self.id = "TournamentBracket"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	self.HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	self.HelperBar.id = "HelperBar"
	if CONDITIONS.IsMobileOrMobileSim() then
		self.HelperBar:SetAnchorsAndPosition( 1, 0, 0, 0, _1080p * -120, 0, 0, 0 )
	else
		self.HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
	end
	self.HelperBar:setPriority( 10 )
	self:addElement( self.HelperBar )
	local f1_local2 = self
	local ReadyButton = nil
	
	ReadyButton = MenuBuilder.BuildRegisteredType( "GenericButton", {
		controllerIndex = f1_local1
	} )
	ReadyButton.id = "ReadyButton"
	ReadyButton.Text:SetRight( 0, 0 )
	ReadyButton.Text:SetLeft( _1080p * 20, 0 )
	ReadyButton.Text:SetTop( _1080p * 1, 0 )
	ReadyButton.Text:setText( ToUpperCase( "READY" ), 0 )
	ReadyButton.Text:SetAlignment( LUI.Alignment.Left )
	ReadyButton:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 130, _1080p * 550, _1080p * 185, _1080p * 223 )
	self:addElement( ReadyButton )
	self.ReadyButton = ReadyButton
	
	local LobbyMembers = nil
	
	LobbyMembers = MenuBuilder.BuildRegisteredType( "LobbyMembers", {
		controllerIndex = f1_local1
	} )
	LobbyMembers.id = "LobbyMembers"
	LobbyMembers:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -589, _1080p * -96, _1080p * 215, _1080p * 859 )
	self:addElement( LobbyMembers )
	self.LobbyMembers = LobbyMembers
	
	local MenuTitle = nil
	
	MenuTitle = MenuBuilder.BuildRegisteredType( "MenuTitle", {
		controllerIndex = f1_local1
	} )
	MenuTitle.id = "MenuTitle"
	MenuTitle.MenuTitle:setText( ToUpperCase( "Tournament Bracket" ), 0 )
	MenuTitle:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1020, 0, _1080p * 100 )
	self:addElement( MenuTitle )
	self.MenuTitle = MenuTitle
	
	local FrontendCameraMover = nil
	
	FrontendCameraMover = MenuBuilder.BuildRegisteredType( "FrontendCameraMover", {
		controllerIndex = f1_local1
	} )
	FrontendCameraMover.id = "FrontendCameraMover"
	FrontendCameraMover:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -300, _1080p * 200, _1080p * -400, _1080p * 400 )
	self:addElement( FrontendCameraMover )
	self.FrontendCameraMover = FrontendCameraMover
	
	local f1_local7 = nil
	if CONDITIONS.InFrontendPublicMP() then
		f1_local7 = MenuBuilder.BuildRegisteredType( "MPPlayerDetails", {
			controllerIndex = f1_local1
		} )
		f1_local7.id = "MPPlayerDetails"
		f1_local7:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1404, _1080p * 1824, _1080p * 54, _1080p * 114 )
		self:addElement( f1_local7 )
		self.MPPlayerDetails = f1_local7
	end
	self.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_secondary",
		priority = 1,
		helper_text = Engine[0xED84C33EC5F01EA]( 0xC6D515BE207B9A5 )
	} )
	self.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_primary",
		priority = 2,
		helper_text = Engine[0xED84C33EC5F01EA]( 0x7D9DC9E3291E103 )
	} )
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "TournamentBracket", TournamentBracket )
LUI.FlowManager.RegisterStackPopBehaviour( "TournamentBracket", f0_local1 )
LockTable( _M )
