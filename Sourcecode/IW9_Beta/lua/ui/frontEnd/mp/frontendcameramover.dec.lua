-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
module( ..., package.seeall )
local f0_local0 = 200
local f0_local1 = function ( f7_arg0, f7_arg1 )
	if not LUI.IsLastInputKeyboardMouse( f7_arg1.controller ) then
		return 
	else
		f7_arg0:SetVelocity( 250 )
		f7_arg0._paning = true
		f7_arg0._initialX = f7_arg1.x
		f7_arg0._initialY = f7_arg1.y
	end
end

local f0_local2 = function ( f6_arg0, f6_arg1 )
	f6_arg0._paning = false
	f6_arg0._initialX = nil
	f6_arg0._initialY = nil
end

local f0_local3 = function ( f5_arg0, f5_arg1 )
	if f5_arg0._paning then
		if LUI.UIElement.IsMouseHidden( f5_arg1 ) then
			f0_local0( f5_arg0, f5_arg1 )
			return 
		end
		local f5_local0, f5_local1 = f5_arg1.root:PixelsToUnits( f5_arg1.x, f5_arg1.y )
		local f5_local2, f5_local3 = f5_arg1.root:PixelsToUnits( f5_arg0._initialX, f5_arg0._initialY )
		local f5_local4 = f5_local0 - f5_local2
		local f5_local5 = f5_local1 - f5_local3
		local f5_local6 = f5_local4 / f0_local0
		local f5_local7 = f5_local5 / f0_local0
		f5_local6 = LUI.clamp( f5_local6, -1, 1 )
		f5_local7 = LUI.clamp( f5_local7, -1, 1 )
		if f5_local6 ~= 0 and math.abs( f5_local7 / f5_local6 ) < 1 then
			f5_local7 = 0
		end
		f5_arg0:SetPanMouse( f5_local6, -f5_local7 )
		f5_arg0._initialX = f5_arg1.x
		f5_arg0._initialY = f5_arg1.y
	end
end

local f0_local4 = function ( f4_arg0, f4_arg1 )
	if not LUI.IsLastInputKeyboardMouse( f4_arg1.controller ) then
		return 
	else
		f0_local0( f4_arg0, {
			controller = f4_arg1.controller,
			root = f4_arg1.root,
			x = f4_arg1.x,
			y = f4_arg1.y
		} )
	end
end

function FrontendCameraMover( f1_arg0, f1_arg1 )
	if not f1_arg1 then
		f1_arg1 = {}
	end
	local self = LUI.UIElement.new()
	self.id = "FrontendCameraMover"
	self:SetupFrontendCameraMover( f1_arg1 )
	self.closeTree = function ( f3_arg0 )
		f3_arg0:ResetCamera()
		LUI.UIElement.closeTree( f3_arg0 )
	end
	
	if f1_arg1.enableWheelZoom then
		self:SetHandleMouse( true )
		self:addEventHandler( "gamepad_button", function ( f2_arg0, f2_arg1 )
			if f2_arg1.qualifier == "mousewheel" then
				local f2_local0 = 0
				if f2_arg1.button == "up" then
					f2_local0 = 1
				elseif f2_arg1.button == "down" then
					f2_local0 = -1
				end
				f2_arg0:SetZoomWheel( f2_local0 )
			end
		end )
	end
	if f1_arg1.useMousePan then
		self:SetHandleMouse( true )
		self:addEventHandler( "mousemove", f0_local0 )
		self:addEventHandler( "leftmousedown", f0_local0 )
		self:addEventHandler( "leftmouseup", f0_local0 )
		self:addEventHandler( "mouse_capture_lost", f0_local0 )
	end
	self.controllerIndex = f1_arg1.controllerIndex
	return self
end

MenuBuilder.registerType( "FrontendCameraMover", FrontendCameraMover )
LockTable( _M )
