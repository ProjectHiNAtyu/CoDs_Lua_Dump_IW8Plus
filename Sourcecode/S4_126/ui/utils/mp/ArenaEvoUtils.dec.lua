-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
ARENA_EVO = ARENA_EVO or {}
ARENA_EVO.MAX_MATCHES_PER_SERIES = 12
ARENA_EVO.MAX_TEAMS = 8
ARENA_EVO.DEFAULT_ATTACHMENT_COST = 100
ARENA_EVO.MAX_TEAM_SCORE = 12
ARENA_EVO.FULL_ARMOR_PURCHASE_THRESHOLD = 0.66
ARENA_EVO.ENABLE_ROUND_STATUS = false
ARENA_EVO.MOD_CARD_ENABLED = CONDITIONS.IsArenaEvoModCardsEnabled()
ARENA_EVO.TEAM_SCORE_PER_CLIENT = 6
ARENA_EVO.CH_ENTRY_DIMENSIONS_ALL = {
	{
		620 * _1080p,
		39 * _1080p
	},
	{
		620 * _1080p,
		60 * _1080p
	},
	{
		620 * _1080p,
		73 * _1080p
	}
}
ARENA_EVO.MAX_LOBBY_SIZE = {
	nil,
	8,
	16,
	24
}
ARENA_EVO.TEAM_SIZE_KEYS = {
	nil,
	"LUA_MENU_MP/SOLOS",
	"LUA_MENU_MP/DUOS",
	"LUA_MENU_MP/TRIOS"
}
ARENA_EVO.TEAMS = {
	nil,
	"ARENA_EVO/TEAM_ALPHA",
	"ARENA_EVO/TEAM_BRAVO",
	"ARENA_EVO/TEAM_CHARLIE",
	"ARENA_EVO/TEAM_DELTA",
	"ARENA_EVO/TEAM_ECHO",
	"ARENA_EVO/TEAM_FOXTROT",
	"ARENA_EVO/TEAM_GAMMA",
	"ARENA_EVO/TEAM_HOTEL"
}
ARENA_EVO.TEST_MODE_DATA = {
	scores = {}
}
ARENA_EVO.MATCH_RESULT = {
	LOSS = 2,
	DRAW = 0,
	WIN = 1
}
ARENA_EVO.PlayerCardState = {
	Bot = 3,
	Player = 2,
	Empty = 1
}
ARENA_EVO.UI_STATE = {
	RESULTS = 0,
	INTRO_WELCOME = 9,
	NEW_MATCH = 1,
	INTRO_USE_BUY_STATIONS = 13,
	WAITING_FOR_PLAYERS = 4,
	INTRO_LETS_GET_YOU_AN_OPPONENT = 14,
	INTRO_LOSE_THEM_AND_YOURE_OUT = 11,
	INTRO_BE_THE_LAST_TEAM = 12,
	INTRO_YOUR_TEAM_HAS_LIVES = 10,
	PLAYING = 6,
	NEW_ROUND = 7,
	UNINITIALIZED = 4294967295
}
ARENA_EVO.arenaEvoWeaponUpgradeCSV = "mp/upgradetable_arena_evo.csv"
ARENA_EVO.LoadWeaponUpgradeData = function ()
	local f20_local0 = StringTable[0xFD4E49A34DD43AE]( ARENA_EVO.arenaEvoWeaponUpgradeCSV )
	local f20_local1 = StringTable[0x902DE64B4266322]( ARENA_EVO.arenaEvoWeaponUpgradeCSV )
	local f20_local2 = {}
	local f20_local3 = {
		upgrades = {},
		rarities = {}
	}
	f20_local3.upgrades.s4_me_fists = {}
	f20_local3.rarities.s4_me_fists = {}
	f20_local3.upgrades.s4_knifestab = {}
	f20_local3.rarities.s4_knifestab = {}
	f20_local3.upgrades.none = {}
	f20_local3.rarities.none = {}
	f20_local3.upgrades.s4_la_walpha2 = {}
	f20_local3.rarities.s4_la_walpha2 = {}
	f20_local3.upgrades.s4_gw_flima35 = {}
	f20_local3.rarities.s4_gw_flima35 = {}
	f20_local3.upgrades.s4_mg_streak = {}
	f20_local3.rarities.s4_mg_streak = {}
	f20_local3.upgrades.s4_la_m1bravo = {}
	f20_local3.rarities.s4_la_m1bravo = {}
	f20_local3.upgrades.s4_la_mkilo1 = {}
	f20_local3.rarities.s4_la_mkilo1 = {}
	f20_local3.upgrades.s4_la_palpha42 = {}
	f20_local3.rarities.s4_la_palpha42 = {}
	f20_local3.upgrades.s4_la_palpha = {}
	f20_local3.rarities.s4_la_palpha = {}
	for f20_local4 = 1, f20_local1, 2 do
		local f20_local7 = StringTable[0x2077452C28AB2FC]( ARENA_EVO.arenaEvoWeaponUpgradeCSV, 0, f20_local4 )
		f20_local2[f20_local4] = f20_local7
		f20_local3.upgrades[f20_local7] = {}
		f20_local3.rarities[f20_local7] = {}
	end
	local f20_local4 = nil
	for f20_local5 = 1, f20_local0, 1 do
		for f20_local9 = 1, f20_local1, 1 do
			if f20_local9 % 2 == 1 then
				f20_local4 = f20_local2[f20_local9]
				f20_local3.upgrades[f20_local4][f20_local5] = StringTable[0x2077452C28AB2FC]( ARENA_EVO.arenaEvoWeaponUpgradeCSV, f20_local5, f20_local9 )
			end
			local f20_local12 = StringTable[0x2077452C28AB2FC]( ARENA_EVO.arenaEvoWeaponUpgradeCSV, f20_local5, f20_local9 )
			if f20_local12 and f20_local12 ~= "" then
				f20_local3.rarities[f20_local4][f20_local5] = tonumber( f20_local12 ) - 1
			end
		end
	end
	ARENA_EVO.WeaponUpgradeData = f20_local3
end

ARENA_EVO.GetWeaponRarityAtRank = function ( f19_arg0, f19_arg1 )
	assert( ARENA_EVO.WeaponUpgradeData.rarities[f19_arg0] ~= nil, "Trying to get upgrade information for weapon " .. f19_arg0 .. " which isn't present in upgradetable_arena_evo.csv" )
	local f19_local0 = ARENA_EVO.WeaponUpgradeData.rarities[f19_arg0][f19_arg1]
	if not f19_local0 then
		f19_local0 = 0
	end
	return f19_local0
end

ARENA_EVO.GetWeaponUpgradeAtRank = function ( f18_arg0, f18_arg1 )
	assert( ARENA_EVO.WeaponUpgradeData.upgrades[f18_arg0] ~= nil, "Trying to get upgrade information for weapon " .. f18_arg0 .. " which isn't present in upgradetable_arena_evo.csv" )
	local f18_local0 = ARENA_EVO.WeaponUpgradeData.upgrades[f18_arg0][f18_arg1]
	if not f18_local0 then
		f18_local0 = nil
	end
	return f18_local0
end

ARENA_EVO.HasUpgradeAtRank = function ( f17_arg0, f17_arg1 )
	assert( ARENA_EVO.WeaponUpgradeData.upgrades[f17_arg0] ~= nil, "Trying to get upgrade information for weapon " .. f17_arg0 .. " which isn't present in upgradetable_arena_evo.csv" )
	local f17_local0 = ARENA_EVO.WeaponUpgradeData.upgrades[f17_arg0][f17_arg1]
	if f17_local0 then
		if ARENA_EVO.WeaponUpgradeData.upgrades[f17_arg0][f17_arg1] == "none" or ARENA_EVO.WeaponUpgradeData.upgrades[f17_arg0][f17_arg1] == "" then
			f17_local0 = false
		else
			f17_local0 = true
		end
	end
	return f17_local0
end

ARENA_EVO.UpdateFullWeaponNameToCorrectRank = function ( f16_arg0, f16_arg1 )
	local f16_local0 = LUI.Split( f16_arg0, "+" )
	local f16_local1 = WEAPON.StripSuffix( f16_local0[1], "_mp" )
	if ARENA_EVO.WeaponUpgradeData.upgrades[f16_local1] then
		for f16_local11, f16_local12 in ipairs( ARENA_EVO.WeaponUpgradeData.upgrades[f16_local1] ) do
			if f16_local12 then
				if f16_local12 == "none" then
					
				end
				local f16_local5 = ARENA_EVO.WeaponUpgradeData.rarities[f16_local1][f16_local11]
				if f16_local5 then
					f16_local5 = ARENA_EVO.WeaponUpgradeData.rarities[f16_local1][f16_local11] - 1
				end
				if f16_local5 and f16_arg1 < f16_local5 then
					for f16_local9, f16_local10 in ipairs( f16_local0 ) do
						if f16_local10 == f16_local12 then
							f16_local0[f16_local9] = nil
						end
					end
				end
			end
			local f16_local13 = ""
			for f16_local11, f16_local12 in ipairs( f16_local0 ) do
				f16_local13 = f16_local13 .. "+" .. f16_local12
			end
			return f16_local13
		end
	else
		return f16_arg0
	end
end

ARENA_EVO.GetWeaponRankFromFullName = function ( f15_arg0, f15_arg1 )
	local f15_local0 = LUI.Split( ARENA_EVO.UpdateFullWeaponNameToCorrectRank( f15_arg0, f15_arg1 ), "+" )
	local f15_local1 = WEAPON.StripSuffix( f15_local0[1], "_mp" )
	local f15_local2 = 0
	assert( ARENA_EVO.WeaponUpgradeData.upgrades[f15_local1] ~= nil, "Trying to get upgrade information for a weapon that isn't present in upgradetable_arena_evo.csv" )
	for f15_local7, f15_local8 in ipairs( f15_local0 ) do
		for f15_local6 = f15_local2 + 1, #ARENA_EVO.WeaponUpgradeData.upgrades[f15_local1], 1 do
			if f15_local8 == ARENA_EVO.GetWeaponUpgradeAtRank( f15_local1, f15_local6 ) then
				f15_local2 = f15_local6
			end
		end
	end
	return f15_local2
end

ARENA_EVO.GetCurrentWeaponNameStripped = function ( f14_arg0 )
	return WEAPON.StripSuffix( Game[0x83A9582F97A9E41]( f14_arg0 ), "_mp" )
end

ARENA_EVO.GetModCards = function ()
	local f13_local0 = CSV.modCards
	local f13_local1 = {}
	local f13_local2 = StringTable[0xFD4E49A34DD43AE]( f13_local0.file )
	for f13_local3 = 0, f13_local2 - 1, 1 do
		local f13_local6 = CSV.ReadRow( CSV.modCards, f13_local3 )
		f13_local6.displayString = Engine[0xED84C33EC5F01EA]( f13_local6.name )
		table.insert( f13_local1, f13_local6 )
	end
	return f13_local1
end

ARENA_EVO.GetTeamCount = function ()
	return 8
end

ARENA_EVO.GetTeamSize = function ( f11_arg0 )
	local f11_local0 = nil
	if IsPrivateMatch() and not Engine[0x12586A3F4FB490E]() then
		local f11_local1 = Game[0x28624DEF6F708C8]( f11_arg0, "ui_squadSize" )
		if not f11_local1 then
			f11_local0 = f11_local1
		else
			f11_local0 = 2
		end
	else
		local f11_local1 = Dvar[0x22EAAB59AA27E9B]( "#x3acded9dbd574bf5c" )
		if not f11_local1 then
			f11_local0 = f11_local1
		else
			f11_local0 = 2
		end
	end
	return f11_local0
end

ARENA_EVO.GetPlayerTeamIndex = function ( f10_arg0 )
	if CONDITIONS.InFrontend() then
		return ARENA_EVO.TEST_MODE_DATA.playerTeamIndex
	end
	local f10_local0 = Game[0x28624DEF6F708C8]( f10_arg0, "ui_arena_player_team" )
	local f10_local1
	if 0 < f10_local0 and not f10_local0 then
		f10_local1 = f10_local0
	else
		f10_local1 = nil
	end
	return f10_local1
end

ARENA_EVO.PlayerHasTeamIndex = function ( f9_arg0 )
	return ARENA_EVO.GetPlayerTeamIndex( f9_arg0 ) ~= nil
end

ARENA_EVO.GetSpectatedTeamIndex = function ( f8_arg0 )
	if CONDITIONS.InFrontend() then
		return ARENA_EVO.TEST_MODE_DATA.playerTeamIndex
	else
		return ARENA_EVO.GetTeamIndex( f8_arg0, DataSources.inGame.currentPlayerStateClientNum:GetValue( f8_arg0 ) )
	end
end

ARENA_EVO.GetPlayerOrSpectatedTeamIndex = function ( f7_arg0 )
	if CONDITIONS.IsSpectating( f7_arg0 ) and Game[0x28624DEF6F708C8]( f7_arg0, "ui_arena_evo_spectating_arena" ) == true then
		return ARENA_EVO.GetSpectatedTeamIndex( f7_arg0 )
	else
		return ARENA_EVO.GetPlayerTeamIndex( f7_arg0 )
	end
end

ARENA_EVO.IsTeamEliminated = function ( f6_arg0, f6_arg1 )
	if CONDITIONS.InFrontend() then
		return ARENA_EVO.TEST_MODE_DATA.scores[f6_arg1] == -1
	else
		return Game[0x28624DEF6F708C8]( f6_arg0, "ui_arena_score" .. tostring( f6_arg1 ) ) == -1
	end
end

ARENA_EVO.IsIntroState = function ( f5_arg0 )
	local f5_local0
	if f5_arg0 ~= ARENA_EVO.UI_STATE.INTRO_WELCOME and f5_arg0 ~= ARENA_EVO.UI_STATE.INTRO_YOUR_TEAM_HAS_LIVES and f5_arg0 ~= ARENA_EVO.UI_STATE.INTRO_LOSE_THEM_AND_YOURE_OUT and f5_arg0 ~= ARENA_EVO.UI_STATE.INTRO_BE_THE_LAST_TEAM then
		f5_local0 = false
	else
		f5_local0 = true
	end
	return f5_local0
end

ARENA_EVO.GetTeamIndex = function ( f4_arg0, f4_arg1 )
	if f4_arg1 == Game[0x51CB5C434C63793]() then
		return ARENA_EVO.GetPlayerTeamIndex( f4_arg0 )
	end
	local f4_local0 = Game[0xB0ED497A72E2B73]( f4_arg1 )
	local f4_local1
	if 0 < f4_local0 then
		f4_local1 = f4_local0
	else
		f4_local1 = false
	end
	return f4_local1
end

ARENA_EVO.GetPlayerStatsForRoundEndHUD = function ( f3_arg0 )
	local f3_local0 = assert
	local f3_local1 = CONDITIONS.InFrontend()
	if not f3_local1 then
		f3_local1 = CONDITIONS.IsArenaEvoGameType()
	end
	f3_local0( f3_local1 )
	f3_local0 = 0
	local f3_local2 = 0
	f3_local1 = 0
	local f3_local3 = 0
	local f3_local4 = 0
	local f3_local5 = 0
	if CONDITIONS.InGame() then
		f3_local0 = Game[0x28624DEF6F708C8]( f3_arg0, "ui_arena_evo_stat_extra_lives" )
		f3_local2 = Game[0x28624DEF6F708C8]( f3_arg0, "ui_arena_evo_stat_eliminations" )
		f3_local3 = Game[0x28624DEF6F708C8]( f3_arg0, "ui_arena_evo_stat_total_cash" )
		f3_local1 = Game[0x28624DEF6F708C8]( f3_arg0, "ui_arena_evo_stat_ekia" )
		f3_local4 = Game[0x28624DEF6F708C8]( f3_arg0, "ui_arena_evo_stat_placement_bonus_xp" )
		f3_local5 = Game[0x28624DEF6F708C8]( f3_arg0, "ui_arena_evo_stat_total_xp" )
	else
		f3_local0 = 999
		f3_local2 = 999
		f3_local1 = 999
		f3_local3 = 999
		f3_local4 = 999
		f3_local5 = 999
	end
	local f3_local6 = {
		Engine[0xED84C33EC5F01EA]( "ARENA_EVO/STAT_EXTRA_LIVES_RECEIVED", f3_local0 ),
		Engine[0xED84C33EC5F01EA]( "ARENA_EVO/STAT_TEAM_ELIMINATIONS", f3_local2 ),
		Engine[0xED84C33EC5F01EA]( "ARENA_EVO/STAT_EKIA", f3_local1 ),
		[1] = Engine[0xED84C33EC5F01EA]( "ARENA_EVO/STAT_TOTAL_CASH", f3_local3 )
	}
	if 0 < f3_local4 then
		table.insert( f3_local6, Engine[0xED84C33EC5F01EA]( "ARENA_EVO/STAT_PLACEMENT_BONUS", f3_local4 ) )
	end
	if 0 < f3_local5 then
		table.insert( f3_local6, Engine[0xED84C33EC5F01EA]( "ARENA_EVO/STAT_TOTAL_EARNED", f3_local5 ) )
	end
	return f3_local6
end

ARENA_EVO.GetTeamName = function ( f2_arg0 )
	assert( ARENA_EVO.TEAMS[f2_arg0] )
	return Engine[0xED84C33EC5F01EA]( ARENA_EVO.TEAMS[f2_arg0] )
end

ARENA_EVO.GetMaximumScore = function ()
	local f1_local0 = Engine[0x45B054C920178E9]()
	local f1_local1 = ARENA_EVO.MAX_TEAM_SCORE
	if IsPrivateMatch() and not Engine[0x12586A3F4FB490E]() then
		local f1_local2 = Game[0x28624DEF6F708C8]( f1_local0, "ui_squadSize" )
		if f1_local2 then
			f1_local1 = ARENA_EVO.TEAM_SCORE_PER_CLIENT * f1_local2
		end
	else
		f1_local1 = Dvar[0x22EAAB59AA27E9B]( "#x32ae7460af7e83048" )
	end
	return f1_local1
end

