-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 17-11-2025 01:22
module( ..., package.seeall )
local f0_local0 = function ( f7_arg0, f7_arg1, f7_arg2 )
	if f7_arg0._currentPage == #f7_arg1.panelData and f7_arg2 then
		f7_arg1.confirmButton.action( f7_arg0, controllerIndex )
	elseif f7_arg0._currentPage == 1 and not f7_arg2 then
		ACTIONS.LeaveMenu( f7_arg0 )
	else
		local f7_local0 = f7_arg0._currentPage
		local f7_local1
		if f7_arg2 then
			f7_local1 = 1
		else
			f7_local1 = -1
		end
		f7_arg0._currentPage = f7_local0 + f7_local1
		f7_arg0.TutorialDetailPanel:UpdateDetails( f7_arg1.panelData[f7_arg0._currentPage] )
	end
	if f7_arg2 and f7_arg0._pagesRead < #f7_arg1.panelData and f7_arg0._pagesRead < f7_arg0._currentPage then
		f7_arg0._pagesRead = f7_arg0._pagesRead + 1
		f7_arg0.GenericButton:StartTimer( f7_arg1.waitTime, true )
		f7_arg0._buttonsActive = false
	end
	if f7_arg0._pagePips then
		for f7_local0 = 1, #f7_arg0._pagePips, 1 do
			f7_arg0._pagePips[f7_local0]:SetRGBFromTable( SWATCHES.Popups.bodyTxt, 0 )
		end
		f7_arg0._pagePips[f7_arg0._currentPage]:SetRGBFromTable( SWATCHES.Popups.buttonTxt, 0 )
	end
	if f7_arg0._currentPage == 1 then
		f7_arg0.ButtonHelperBar.ButtonHelperText:PushButtonPrompt( {
			clickable = true,
			priority = 4294967295,
			side = "left",
			button_ref = "button_secondary",
			helper_text = Engine.CBBHFCGDIC( "MENU/EXIT" )
		} )
	else
		f7_arg0.ButtonHelperBar.ButtonHelperText:PushButtonPrompt( {
			clickable = true,
			priority = 4294967295,
			side = "left",
			button_ref = "button_secondary",
			helper_text = Engine.CBBHFCGDIC( "LUA_MENU/BACK" )
		} )
	end
end

local f0_local1 = function ( f3_arg0, f3_arg1, f3_arg2 )
	assert( f3_arg2.panelData )
	local f3_local0 = {
		f3_arg0.Panel1,
		f3_arg0.Panel2,
		f3_arg0.Panel3
	}
	f3_arg0._currentPage = 1
	f3_arg0._pagesRead = 1
	f3_arg0._buttonsActive = false
	if f3_arg2.title then
		f3_arg0.Title:SetAlpha( 1 )
		f3_arg0.Title:setText( ToUpperCase( Engine.CBBHFCGDIC( f3_arg2.title ) ) )
	else
		f3_arg0.Title:SetAlpha( 0 )
	end
	if f3_arg2.modeIcon then
		f3_arg0.ModeIcon:SetAlpha( 1 )
		f3_arg0.ModeIcon:setImage( RegisterMaterial( f3_arg2.modeIcon ) )
	else
		f3_arg0.ModeIcon:SetAlpha( 0 )
	end
	f3_arg0.TutorialDetailPanel:UpdateDetails( f3_arg2.panelData[f3_arg0._currentPage] )
	f3_arg0.GenericButton:addEventHandler( "button_action", function ( f6_arg0, f6_arg1 )
		f3_arg0( f3_arg0, f3_arg0, true )
	end )
	f3_arg0.bindButton:addEventHandler( "button_secondary", function ( f5_arg0, f5_arg1 )
		if f3_arg0._buttonsActive then
			f3_arg0( f3_arg0, f3_arg0, false )
		end
	end )
	f3_arg0:addEventHandler( "timer_complete", function ( f4_arg0, f4_arg1 )
		f3_arg0._buttonsActive = true
	end )
	f3_arg0.GenericButton:StartTimer( f3_arg2.waitTime, true )
	if 1 < #f3_arg2.panelData then
		local pageList = LUI.UIHorizontalList.new()
		pageList:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -200, _1080p * 200, _1080p * 366, _1080p * 382 )
		pageList:SetAlignment( LUI.Alignment.Center )
		pageList:SetSpacing( _1080p * 8 )
		pageList.id = "PageList"
		pageList:SetNoWrap( true )
		f3_arg0:addElement( pageList )
		f3_arg0.pageList = pageList
		
		f3_arg0._pagePips = {}
		for f3_local2 = 1, #f3_arg2.panelData, 1 do
			local f3_local5 = LUI.UIImage.new()
			f3_local5.id = "PagePip" .. f3_local2
			f3_local5:SetRGBFromTable( SWATCHES.Popups.bodyTxt, 0 )
			f3_local5:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 0, _1080p * 16, _1080p * 0, _1080p * 16 )
			table.insert( f3_arg0._pagePips, f3_local5 )
			f3_arg0.pageList:addElement( f3_local5 )
		end
		f3_arg0._pagePips[1]:SetRGBFromTable( SWATCHES.Popups.buttonTxt, 0 )
	end
	f3_arg0.ButtonHelperBar.ButtonHelperText:PushButtonPrompt( {
		clickable = true,
		priority = 4294967295,
		side = "left",
		button_ref = "button_secondary",
		helper_text = Engine.CBBHFCGDIC( "MENU/EXIT" )
	} )
	ACTIONS.ScaleFullscreen( f3_arg0.Darkener )
end

function TutorialPopup( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "TutorialPopup"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local Darkener = nil
	
	Darkener = LUI.UIImage.new()
	Darkener.id = "Darkener"
	Darkener:SetRGBFromTable( SWATCHES.genericMenu.blackBackground, 0 )
	Darkener:SetAlpha( 0.8, 0 )
	self:addElement( Darkener )
	self.Darkener = Darkener
	
	local GenericPopupWindow = nil
	
	GenericPopupWindow = MenuBuilder.BuildRegisteredType( "GenericPopupWindow", {
		controllerIndex = f1_local1
	} )
	GenericPopupWindow.id = "GenericPopupWindow"
	GenericPopupWindow:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -864, _1080p * 864, _1080p * -400, _1080p * 400 )
	self:addElement( GenericPopupWindow )
	self.GenericPopupWindow = GenericPopupWindow
	
	local TutorialDetailPanel = nil
	
	TutorialDetailPanel = MenuBuilder.BuildRegisteredType( "TutorialDetailPanel", {
		controllerIndex = f1_local1
	} )
	TutorialDetailPanel.id = "TutorialDetailPanel"
	TutorialDetailPanel:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -863, _1080p * 863, _1080p * -399, _1080p * 399 )
	self:addElement( TutorialDetailPanel )
	self.TutorialDetailPanel = TutorialDetailPanel
	
	local ButtonHelperBar = nil
	
	ButtonHelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	ButtonHelperBar.id = "ButtonHelperBar"
	ButtonHelperBar.Background:SetAlpha( 0, 0 )
	ButtonHelperBar:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -863, _1080p * 879, _1080p * 400, _1080p * 460 )
	self:addElement( ButtonHelperBar )
	self.ButtonHelperBar = ButtonHelperBar
	
	local Title = nil
	
	Title = LUI.UIText.new()
	Title.id = "Title"
	Title:SetRGBFromTable( SWATCHES.genericButton.textDefault, 0 )
	Title:setText( "TITLE", 0 )
	Title:SetFont( FONTS.GetFont( FONTS.MainLight.File ) )
	Title:SetAlignment( LUI.Alignment.Center )
	Title:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -713, _1080p * 713, _1080p * -369, _1080p * -309 )
	self:addElement( Title )
	self.Title = Title
	
	local GenericButton = nil
	
	GenericButton = MenuBuilder.BuildRegisteredType( "TimedButton", {
		controllerIndex = f1_local1
	} )
	GenericButton.id = "GenericButton"
	GenericButton.Text:setText( Engine.CBBHFCGDIC( "LUA_MENU/CONTINUE" ), 0 )
	GenericButton.Text:SetAlignment( LUI.Alignment.Center )
	GenericButton:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -210, _1080p * 210, _1080p * 307, _1080p * 345 )
	self:addElement( GenericButton )
	self.GenericButton = GenericButton
	
	local ModeIcon = nil
	
	ModeIcon = LUI.UIImage.new()
	ModeIcon.id = "ModeIcon"
	ModeIcon:setImage( RegisterMaterial( "icon_mp_mode_war" ), 0 )
	ModeIcon:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 108, _1080p * 209, _1080p * 154, _1080p * 254 )
	self:addElement( ModeIcon )
	self.ModeIcon = ModeIcon
	
	self.addButtonHelperFunction = function ( f2_arg0, f2_arg1 )
		f2_arg0:AddButtonHelperText( {
			side = "left",
			button_ref = "button_primary",
			priority = 1,
			helper_text = Engine.CBBHFCGDIC( "LUA_MENU/SELECT" )
		} )
	end
	
	self:addEventHandler( "menu_create", self.addButtonHelperFunction )
	
	local bindButton = LUI.UIBindButton.new()
	bindButton.id = "selfBindButton"
	self:addElement( bindButton )
	self.bindButton = bindButton
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "TutorialPopup", TutorialPopup )
LockTable( _M )
