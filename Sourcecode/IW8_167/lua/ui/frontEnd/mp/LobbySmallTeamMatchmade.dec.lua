-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
module( ..., package.seeall )
local f0_local0 = {
	Enemy = 2,
	Friendly = 1
}
local f0_local1 = function ( f12_arg0, f12_arg1 )
	assert( f12_arg0.LobbyTeamDetails )
	if not f12_arg0.lobbyMemberGrid then
		f12_arg0.lobbyMemberGrid = MenuBuilder.BuildRegisteredType( "LobbyMemberGrid", {
			modelPath = Lobby.AllMembersPath,
			controllerIndex = f12_arg1
		} )
		f12_arg0.lobbyMemberGrid:setPriority( -100 )
		f12_arg0:addElement( f12_arg0.lobbyMemberGrid )
		f12_arg0.lobbyMemberGrid:processEvent( {
			name = "gain_focus"
		} )
	end
	f12_arg0:SetClientCharacterData( f12_arg1 )
end

local f0_local2 = function ( f11_arg0, f11_arg1 )
	assert( f11_arg0.LobbyTeamDetails )
	assert( f11_arg0.currentTeamView )
	assert( f11_arg0.LobbyTeamDetails.LobbyTeamSwitcher )
	f11_arg0.LobbyTeamDetails.LobbyTeamSwitcher.m_requireFocusType = FocusType.MouseOver
	FrontEndScene.HideAllCharacters()
	local f11_local0, f11_local1 = nil
	local f11_local2 = Lobby.GetLocalClientTeam( f11_arg1 )
	local f11_local3 = MP.GetFactionReference( f11_local2 )
	local f11_local4 = MP.GetFactionReference( Teams.axis )
	local f11_local5 = MP.GetFactionReference( Teams.allies )
	local f11_local6 = MP.GetTeamLogo( Teams.allies, f11_local2, f11_local5, true )
	if f11_arg0.currentTeamView == f0_local0.Enemy then
		if f11_local2 == Teams.allies then
			f11_arg0.LobbyTeamDetails.SuperfactionName:setText( Engine.CBEAHDFCFC( MP.GetTeamName( Teams.axis ) ) )
			f11_local6 = MP.GetTeamLogo( Teams.axis, f11_local2, f11_local4, true )
			Engine.BJDBIAGIDA( CoD.SFX.LobbyTextAllegiance )
		else
			f11_arg0.LobbyTeamDetails.SuperfactionName:setText( Engine.CBEAHDFCFC( MP.GetTeamName( Teams.allies ) ) )
			f11_local6 = MP.GetTeamLogo( Teams.allies, f11_local2, f11_local5, true )
			Engine.BJDBIAGIDA( CoD.SFX.LobbyTextCoalition )
		end
		f11_local0 = "LUA_MENU/VIEW_YOUR_TEAM"
		f11_local1 = "LUA_MENU/ENEMY_TEAM"
	else
		f11_arg0.LobbyTeamDetails.SuperfactionName:setText( Engine.CBEAHDFCFC( MP.GetTeamName( f11_local2 ) ) )
		f11_local6 = MP.GetTeamLogo( f11_local2, f11_local2, f11_local3, true )
		f11_local0 = "LUA_MENU/VIEW_ENEMY_TEAM"
		f11_local1 = "LUA_MENU/YOUR_TEAM"
		local f11_local7 = Engine.BJDBIAGIDA
		local f11_local8
		if f11_local2 == Teams.allies then
			f11_local8 = CoD.SFX.LobbyTextCoalition
			if not f11_local8 then
			
			else
				f11_local7( f11_local8 )
			end
		end
		f11_local8 = CoD.SFX.LobbyTextAllegiance
	end
	f11_arg0.LobbyTeamDetails.FactionIcon:setImage( RegisterMaterial( f11_local6 ) )
	local f11_local7 = f11_arg0.LobbyTeamDetails.LobbyTeamSwitcher.StyledLabel
	local f11_local8 = f11_local7
	f11_local7 = f11_local7.setText
	local f11_local9 = Engine.CBBHFCGDIC
	local f11_local10
	if f11_arg0.currentTeamView == f0_local0.Enemy then
		f11_local10 = "LUA_MENU/VIEW_YOUR_TEAM"
	else
		f11_local10 = "LUA_MENU/VIEW_ENEMY_TEAM"
	end
	f11_local7( f11_local8, f11_local9( f11_local10 ) )
	f11_arg0.LobbyTeamDetails.TeamSwitchName:setText( Engine.CBBHFCGDIC( f11_local0 ) )
	f11_arg0.LobbyTeamDetails.TeamViewName:setText( Engine.CBBHFCGDIC( f11_local1 ) )
	f11_local7 = f11_arg0.LobbyTeamDetails:GetCurrentAnchorsAndPositions()
	f11_local7 = f11_local7.right
	local f11_local11 = LAYOUT.GetElementWidth( f11_arg0.LobbyTeamDetails.FactionIcon ) / 2
	f11_local8 = LAYOUT.GetTextWidth( f11_arg0.LobbyTeamDetails.SuperfactionName )
	f11_local9 = LAYOUT.GetTextWidth( f11_arg0.LobbyTeamDetails.TeamSwitchName )
	local f11_local12 = LAYOUT.GetTextWidth( f11_arg0.LobbyTeamDetails.TeamViewName )
	if f11_local9 < f11_local8 and not f11_local8 then
		f11_local10 = f11_local8
	else
		f11_local10 = f11_local9
	end
	if f11_local12 >= f11_local10 or not f11_local10 then
		f11_local10 = f11_local12
	end
	f11_arg0.LobbyTeamDetails:SetLeft( -f11_local10 - f11_local11 + f11_local7 )
end

Lobby.DumpStreamingRequests = function ( f10_arg0, f10_arg1 )
	assert( #f10_arg0 == #f10_arg1 )
	DebugPrint( "" )
	DebugPrint( "Streaming Request Start..................................." )
	for f10_local0 = 1, #f10_arg0, 1 do
		DebugPrint( "Body: " .. f10_arg0[f10_local0] .. ", " .. "Head: " .. f10_arg1[f10_local0] )
	end
	DebugPrint( "Streaming Request End..................................." )
	DebugPrint( "" )
end

local f0_local3 = function ( f9_arg0, f9_arg1 )
	local f9_local0 = Lobby.GetLocalClientTeam( f9_arg1 )
	local f9_local1 = nil
	if f9_arg0.currentTeamView == f0_local0.Friendly then
		f9_local1 = f9_local0
	elseif f9_local0 == Teams.allies then
		f9_local1 = Teams.axis
	else
		f9_local1 = Teams.allies
	end
	f9_arg0._clientCharacterMap = Lobby.UpdateClientCharacters( f9_arg1, {
		widget = f9_arg0,
		teamFilter = f9_local1
	} )
end

local f0_local4 = function ( f2_arg0, f2_arg1, f2_arg2 )
	Engine.DHFCHIIJCA( "squad_lobby" )
	f2_arg0.SetClientCharacterData = f0_local0
	f2_arg0.SwitchTeamView = f0_local0
	f2_arg0.currentTeamView = f0_local0.Friendly
	f2_arg0:SetClientCharacterData( f2_arg1 )
	f2_arg0:SwitchTeamView( f2_arg1 )
	f2_arg0:registerEventHandler( "lobby_member_on_over", function ( element, event )
		element:SetDataSource( event.dataSource, event.controller )
		return true
	end )
	f2_arg0._focusArrow = Lobby.BuildFocusArrowWidget( f2_arg0, f2_arg1 )
	f2_arg0:SubscribeToModelThroughElement( f2_arg0, "memberIndex", function ()
		Lobby.UpdateFocusArrow( f2_arg0, f2_arg0._focusArrow, f2_arg0, f2_arg0.clientCharacterData )
	end )
	
	local bindButton = LUI.UIBindButton.new()
	bindButton.id = "bindButton"
	f2_arg0:addElement( bindButton )
	f2_arg0.bindButton = bindButton
	
	local f2_local1 = function ( f6_arg0, f6_arg1 )
		if f2_arg0.currentTeamView ~= f2_arg0.Friendly then
			f2_arg0.currentTeamView = f2_arg0.Friendly
			f2_arg0:SwitchTeamView( f2_arg0 )
		end
		if f2_arg0._focusArrow then
			f2_arg0._focusArrow:SetAlpha( 1, 250 )
		end
	end
	
	local f2_local2 = function ( f5_arg0, f5_arg1 )
		if f2_arg0.currentTeamView ~= f2_arg0.Enemy then
			f2_arg0.currentTeamView = f2_arg0.Enemy
			f2_arg0:SwitchTeamView( f2_arg0 )
		end
		if f2_arg0._focusArrow then
			f2_arg0._focusArrow:SetAlpha( 0, 100 )
		end
	end
	
	local f2_local3 = function ( f4_arg0, f4_arg1 )
		if f2_arg0.currentTeamView == f2_arg0.Friendly then
			f2_arg0( f4_arg0, f4_arg1 )
		else
			f2_arg0( f4_arg0, f4_arg1 )
		end
		Engine.BJDBIAGIDA( CoD.SFX.MouseClick )
	end
	
	f2_arg0.bindButton:addEventHandler( "button_alt1", f2_local3 )
	f2_arg0.LobbyTeamDetails.LobbyTeamSwitcher:addEventHandler( "leftmouseup", f2_local3 )
	local f2_local4 = LUI.UITimer.new( {
		interval = 1000,
		event = "update_lobby"
	} )
	f2_local4.id = "lobbyTimer"
	f2_arg0:addElement( f2_local4 )
	f2_arg0:registerEventHandler( "update_lobby", function ( element, event )
		f2_arg0( element, f2_arg0 )
	end )
	OPERATOR.ShowGhostTeaser( f2_arg1, f2_arg0 )
end

function LobbySmallTeamMatchmade( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "LobbySmallTeamMatchmade"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local LobbyTeamDetails = nil
	
	LobbyTeamDetails = MenuBuilder.BuildRegisteredType( "LobbyTeamDetails", {
		controllerIndex = f1_local1
	} )
	LobbyTeamDetails.id = "LobbyTeamDetails"
	LobbyTeamDetails:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -445, _1080p * -96, _1080p * 193, _1080p * 316 )
	self:addElement( LobbyTeamDetails )
	self.LobbyTeamDetails = LobbyTeamDetails
	
	local LobbyMap = nil
	
	LobbyMap = MenuBuilder.BuildRegisteredType( "LobbyMap", {
		controllerIndex = f1_local1
	} )
	LobbyMap.id = "LobbyMap"
	LobbyMap:SetAnchorsAndPosition( 0, 1, 1, 0, _1080p * 96, _1080p * 526, _1080p * -231, _1080p * -101 )
	self:addElement( LobbyMap )
	self.LobbyMap = LobbyMap
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "LobbySmallTeamMatchmade", LobbySmallTeamMatchmade )
LockTable( _M )
