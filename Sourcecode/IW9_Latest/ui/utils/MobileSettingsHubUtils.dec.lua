-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:15
MobileSettingsHubUtils = MobileSettingsHubUtils or {}
MobileSettingsHubUtils.TUTORIAL_STATE = {
	TIPS_HUD_CUSTOMIZER_ENTRY = 1,
	OFF = 2,
	TIPS_CONTROL_SET_SELECTION = 0
}
MobileSettingsHubUtils.TUTORIAL_TIPS = {
	[MobileSettingsHubUtils.TUTORIAL_STATE.TIPS_CONTROL_SET_SELECTION] = 0xD4178FC35CCA291,
	[MobileSettingsHubUtils.TUTORIAL_STATE.TIPS_HUD_CUSTOMIZER_ENTRY] = 0x1CB35CBAB3C895D
}
local f0_local0 = "MobileSettingsHub"
MobileSettingsHubUtils.MORE_MENU_LIST_KEYS = {
	Delete = "DELETE",
	Duplicate = "DUPLICATE",
	Restore = "RESTORE",
	Rename = "RENAME",
	Desync = "DESYNC",
	Sync = "SYNC",
	Broadcast = "BROADCAST"
}
local f0_local1 = {
	[MobileSettingsHubUtils.MORE_MENU_LIST_KEYS.Restore] = {
		textReference = 0xC5AC4FEBD8A35DC,
		ShouldShow = function ( f29_arg0 )
			return true
		end
	},
	[MobileSettingsHubUtils.MORE_MENU_LIST_KEYS.Rename] = {
		textReference = 0x14ABBEBC56F2134,
		ShouldShow = function ( f28_arg0 )
			return not UXPUtils.CheckIsBuildInStand( f28_arg0 )
		end
	},
	[MobileSettingsHubUtils.MORE_MENU_LIST_KEYS.Broadcast] = {
		textReference = 0x4013C89316BB3C1,
		ShouldShow = function ( f27_arg0 )
			local f27_local0 = CONDITIONS.IsUXPFileSyncEnabled()
			if f27_local0 then
				f27_local0 = UXPUtils.CanUXPShare( f27_arg0 )
			end
			return f27_local0
		end
	},
	[MobileSettingsHubUtils.MORE_MENU_LIST_KEYS.Duplicate] = {
		textReference = 0xD2ACAABCCEC6E47,
		ShouldShow = function ( f26_arg0 )
			return UXPUtils.ShouldShowDuplicateInContextList( f26_arg0 )
		end
	},
	[MobileSettingsHubUtils.MORE_MENU_LIST_KEYS.Delete] = {
		textReference = 0x67016B72ADC0861,
		ShouldShow = function ( f25_arg0 )
			return not UXPUtils.CheckIsBuildInStand( f25_arg0 )
		end
	},
	[MobileSettingsHubUtils.MORE_MENU_LIST_KEYS.Sync] = {
		textReference = 0xF3689D67C1297C1,
		ShouldShow = function ( f24_arg0 )
			return UXPUtils.CanUXPSync( f24_arg0 )
		end
	},
	[MobileSettingsHubUtils.MORE_MENU_LIST_KEYS.Desync] = {
		textReference = 0x54949740BBD8892,
		ShouldShow = function ( f23_arg0 )
			return UXPUtils.CanUXPDesync( f23_arg0 )
		end
	}
}
MobileSettingsHubUtils.SaveOpenSettingsHubFrom = function ( f22_arg0 )
	if not f22_arg0 then
		f22_arg0 = -1
	end
	local f22_local0 = LUI.FlowManager.GetScopedData( f0_local0 )
	assert( f22_local0, "[MobileSettingsHubUtils] Get scopedData fail!" )
	if not f22_local0.lastMenuName then
		f22_local0.lastMenuName = LUI.FlowManager.GetMenuNameAtIndex( f22_arg0 )
	end
end

MobileSettingsHubUtils.BackToSettingsHub = function ( f21_arg0, f21_arg1 )
	if CONDITIONS.IsMenuInStack( f0_local0 ) then
		LUI.FlowManager.RequestRestoreMenu( f0_local0, nil, f21_arg1 )
	else
		ACTIONS.LeaveMenu( f21_arg0:GetCurrentMenu() )
	end
end

MobileSettingsHubUtils.BackToWhereSettingsHubFrom = function ( f20_arg0, f20_arg1 )
	if LUI.FlowManager.IsInStack( f0_local0 ) then
		local f20_local0 = LUI.FlowManager.GetScopedData( f0_local0 )
		if f20_local0 and f20_local0.lastMenuName and CONDITIONS.IsMenuInStack( f20_local0.lastMenuName ) then
			LUI.FlowManager.RequestRestoreMenu( f20_local0.lastMenuName, nil, f20_arg1 )
		end
	else
		ACTIONS.LeaveMenu( f20_arg0:GetCurrentMenu() )
	end
end

MobileSettingsHubUtils.CalcTextWidth = function ( f19_arg0 )
	local f19_local0 = f19_arg0:getText()
	local f19_local1 = f19_arg0:GetCurrentFont()
	local f19_local2, f19_local3, f19_local4, f19_local5 = f19_arg0:getLocalRect()
	local f19_local6, f19_local7, f19_local8, f19_local9 = GetTextDimensions( f19_local0, f19_local1, math.abs( f19_local5 - f19_local3 ) )
	return math.abs( f19_local8 - f19_local6 )
end

MobileSettingsHubUtils.CopyAnchorsAndPosition = function ( f18_arg0, f18_arg1 )
	local f18_local0 = f18_arg0:GetAnchorsAndPosition()
	f18_arg1:SetAnchorsAndPosition( f18_local0.leftAnchor, f18_local0.rightAnchor, f18_local0.topAnchor, f18_local0.bottomAnchor, f18_local0.left, f18_local0.right, f18_local0.top, f18_local0.bottom )
end

MobileSettingsHubUtils.ShowRestoreUXPPopup = function ( f16_arg0, f16_arg1, f16_arg2 )
	UI_CUSTOMIZATION.PopupYesNo( f16_arg0, Engine[0xED84C33EC5F01EA]( 0x58CCDC463E438F5 ), Engine[0xED84C33EC5F01EA]( 0x10B2B2BB01B4E4E ), function ( f17_arg0 )
		UXPUtils.EraseLayoutParent( f16_arg0 )
		UXPUtils.EraseLayoutField( f16_arg0 )
		UXPUtils.ErasePreviewImage( f16_arg0 )
		UI_CUSTOMIZATION.ResetUXPOptions( f16_arg0, f16_arg0, UI_CUSTOMIZATION.GetAllUXPOptionsIdDict() )
		UXPUtils.WriteUXPFileImmediately( f16_arg0 )
		UI_CUSTOMIZATION.MarkShouldReloadOnUsingUXP()
		if f16_arg0 then
			f16_arg0()
		end
		UXPDlogUtils.RecordUXPRestored()
		ACTIONS.LeaveMenu( f17_arg0 )
	end, nil, Engine[0xED84C33EC5F01EA]( 0xC5AC4FEBD8A35DC ), Engine[0xED84C33EC5F01EA]( 0x10AA0598557C1E4 ) )
end

MobileSettingsHubUtils.GetSettingsMenuId = function ()
	return "MobileSettingsControls"
end

MobileSettingsHubUtils.RegisterTutorial = function ( f12_arg0, f12_arg1 )
	if not Dvar[0x9E5BE3B4BBA4E0E]( 0xBF0B036011A31F4 ) then
		
	else
		
	end
	f12_arg0:SetNotifyOnLayoutInit( true )
	f12_arg0:addEventHandler( "layout_initialized", function ( f14_arg0, f14_arg1 )
		local f14_local0, f14_local1, f14_local2, f14_local3 = f14_arg0:getCurrentGlobalRect()
		f14_arg0:dispatchEventToCurrentMenu( {
			name = "register_tutorial_tips",
			tutorialTag = f12_arg0,
			target = f14_arg0
		} )
	end )
	f12_arg0:addEventHandler( "button_action", function ( f13_arg0, f13_arg1 )
		f13_arg0:dispatchEventToCurrentMenu( {
			name = "close_tutorial_tips",
			tutorialTag = f12_arg0
		} )
	end )
end

local f0_local2 = function ( f11_arg0 )
	local f11_local0 = {
		displayTime = 3000,
		success = true,
		header = Engine[0xED84C33EC5F01EA]( 0x105DD2980419A2B ),
		controllerIndex = f11_arg0
	}
	local f11_local1 = Engine[0xEE6F69FEA944B13]()
	f11_local1:ProcessEvent( {
		name = "send_toast_notification",
		immediate = true,
		options = f11_local0
	} )
end

MobileSettingsHubUtils.RenameUXP = function ( f9_arg0, f9_arg1, f9_arg2 )
	if not Dvar[0x9E5BE3B4BBA4E0E]( 0x7298380DBA69011 ) then
		
	else
		
	end
	OSK[0xC1C15C14B75864C]( f9_arg0, Engine[0xED84C33EC5F01EA]( 0x4F8707F02481C99 ), UXPUtils.QueryUXPDisplayName( f9_arg1 ), UXPUtils.MAX_UXP_NAME_LEN, false, true, false, function ( f10_arg0, f10_arg1, f10_arg2 )
		if not f10_arg1 or f10_arg1 == "" or f10_arg2 ~= Enum[0xA163D545F5F9533][0x8C9129210B7358E] then
			if f10_arg2 == Enum[0xA163D545F5F9533][0x2DADCC86BD1CDFC] then
				f9_arg0( f10_arg0 )
			end
			return 
		end
		UXPUtils.RenameUXP( f9_arg0, f10_arg1 )
		UXPDlogUtils.RecordUXPRenamed()
		if f9_arg0 then
			f9_arg0( f10_arg1 )
		end
	end )
end

MobileSettingsHubUtils.GetMoreListInfo = function ( f8_arg0 )
	return f0_local0[f8_arg0]
end

MobileSettingsHubUtils.OpenEditor = function ( f7_arg0 )
	URI.QueueURI( "./MobileVirtualGamepadEditor?scheme=" .. UI_CUSTOMIZATION.DefaultScheme, f7_arg0 )
end

MobileSettingsHubUtils.AddMoreMenuBtnLogic = function ( f3_arg0, f3_arg1, f3_arg2, f3_arg3, f3_arg4 )
	f3_arg0._isDisplayingMoreMenu = false
	f3_arg0:addEventHandler( "button_action", function ( f6_arg0, f6_arg1 )
		local f6_local0 = {}
		for f6_local4, f6_local5 in ipairs( f3_arg0 ) do
			local f6_local6 = MobileSettingsHubUtils.GetMoreListInfo( f6_local5 )
			if f6_local6.ShouldShow( f3_arg0( f6_arg0 ) ) then
				table.insert( f6_local0, f6_local5 )
			end
		end
		f6_arg0._isDisplayingMoreMenu = true
		f6_local1, f6_local2, f6_local3, f6_local4 = f6_arg0:getCurrentGlobalRect()
		f6_arg0:dispatchEventToCurrentMenu( {
			name = "show_uxp_more_list",
			keyList = f6_local0,
			targetL = f6_local1,
			targetR = f6_local3,
			targetT = f6_local2,
			targetB = f6_local4,
			preferUpper = f3_arg0
		} )
	end )
	f3_arg0:registerEventHandler( "click_uxp_more_list", function ( element, event )
		if element._isDisplayingMoreMenu then
			f3_arg0[event.key]( element )
		end
	end )
	f3_arg0:registerEventHandler( "on_more_list_hide", function ( element, event )
		element._isDisplayingMoreMenu = false
	end )
end

MobileSettingsHubUtils.CalcWidthBaseOnFixedHeight = function ( f2_arg0 )
	local f2_local0 = Engine[0xEE6F69FEA944B13]()
	return f2_arg0 / f2_local0:getHeight() * f2_local0:getWidth()
end

MobileSettingsHubUtils.CalcHeightBaseOnFixedWidth = function ( f1_arg0 )
	local f1_local0 = Engine[0xEE6F69FEA944B13]()
	return f1_arg0 / f1_local0:getWidth() * f1_local0:getHeight()
end

