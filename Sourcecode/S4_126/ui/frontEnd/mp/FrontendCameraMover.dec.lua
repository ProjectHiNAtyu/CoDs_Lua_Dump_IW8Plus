-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
module( ..., package.seeall )
local f0_local0 = 200
local f0_local1 = function ( f8_arg0, f8_arg1 )
	if not LUI.IsLastInputKeyboardMouse( f8_arg1.controller ) then
		return 
	else
		f8_arg0:SetVelocity( 250 )
		f8_arg0._paning = true
		f8_arg0._initialX = f8_arg1.x
		f8_arg0._initialY = f8_arg1.y
	end
end

local f0_local2 = function ( f7_arg0, f7_arg1 )
	f7_arg0._paning = false
	f7_arg0._initialX = nil
	f7_arg0._initialY = nil
end

local f0_local3 = function ( f6_arg0, f6_arg1 )
	if f6_arg0._paning then
		if LUI.UIElement.IsMouseHidden( f6_arg1 ) then
			f0_local0( f6_arg0, f6_arg1 )
			return 
		end
		local f6_local0, f6_local1 = f6_arg1.root:PixelsToUnits( f6_arg1.x, f6_arg1.y )
		local f6_local2, f6_local3 = f6_arg1.root:PixelsToUnits( f6_arg0._initialX, f6_arg0._initialY )
		local f6_local4 = f6_local0 - f6_local2
		local f6_local5 = f6_local1 - f6_local3
		local f6_local6 = f6_local4 / f0_local0
		local f6_local7 = f6_local5 / f0_local0
		f6_local6 = LUI.clamp( f6_local6, -1, 1 )
		f6_local7 = LUI.clamp( f6_local7, -1, 1 )
		if f6_local6 ~= 0 and math.abs( f6_local7 / f6_local6 ) < 1 then
			f6_local7 = 0
		end
		f6_arg0:SetPanMouse( f6_local6, -f6_local7 )
		f6_arg0._initialX = f6_arg1.x
		f6_arg0._initialY = f6_arg1.y
	end
end

local f0_local4 = function ( f5_arg0, f5_arg1 )
	if not LUI.IsLastInputKeyboardMouse( f5_arg1.controller ) then
		return 
	elseif not f5_arg1.insideWindow then
		return 
	elseif UseMouseMoveEventOptimizedSystem then
		f5_arg0:PreMouseMoveEvent( f5_arg1 )
	else
		f5_arg0:applyElementTransform()
	end
	local f5_local0, f5_local1 = ProjectRootCoordinate( f5_arg1.rootName, f5_arg1.x, f5_arg1.y )
	f0_local0( f5_arg0, {
		controller = f5_arg1.controller,
		root = f5_arg1.root,
		x = f5_local0,
		y = f5_local1
	} )
	if UseMouseMoveEventOptimizedSystem then
		f5_arg0:PostMouseMoveEvent( f5_arg1 )
	else
		f5_arg0:undoElementTransform()
	end
end

function FrontendCameraMover( f1_arg0, f1_arg1 )
	if not f1_arg1 then
		f1_arg1 = {}
	end
	local self = LUI.UIElement.new()
	self.id = "FrontendCameraMover"
	self:SetupFrontendCameraMover( f1_arg1 )
	self.closeTree = function ( f4_arg0 )
		f4_arg0:ResetCamera()
		LUI.UIElement.closeTree( f4_arg0 )
	end
	
	if f1_arg1.enableWheelZoom then
		self:SetHandleMouse( true )
		self:addEventHandler( "gamepad_button", function ( f3_arg0, f3_arg1 )
			if f3_arg1.qualifier == "mousewheel" then
				local f3_local0 = 0
				if f3_arg1.button == "up" then
					f3_local0 = 1
				elseif f3_arg1.button == "down" then
					f3_local0 = -1
				end
				f3_arg0:SetZoomWheel( f3_local0 )
			end
		end )
	end
	if f1_arg1.useMousePan then
		self:SetHandleMouse( true )
		self:addEventHandler( "mousemove", f0_local0 )
		self:addEventHandler( "leftmousedown", f0_local0 )
		self:addEventHandler( "leftmouseup", f0_local0 )
		self:addEventHandler( "mouse_capture_lost", f0_local0 )
		self:addEventHandler( "gamepad_button", function ( f2_arg0, f2_arg1 )
			if f2_arg1.down and f2_arg1.qualifier == "keyboard" and f2_arg0._paning then
				f1_arg0( f2_arg0, f2_arg1 )
				f2_arg0.m_leftMouseDown = nil
			end
		end )
	end
	self.controllerIndex = f1_arg1.controllerIndex
	return self
end

MenuBuilder.registerType( "FrontendCameraMover", FrontendCameraMover )
LockTable( _M )
