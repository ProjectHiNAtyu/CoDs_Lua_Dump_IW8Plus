-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
module( ..., package.seeall )
require( "ui.generated.widgets.spmenubutton" )
local f0_local0 = function ( f7_arg0 )
	return function ( f8_arg0, f8_arg1, f8_arg2 )
		local f8_local0 = f7_arg0._mapTable[1 + f7_arg0.MapList:GetContentIndex( f8_arg1, f8_arg2 )]
		local f8_local1, f8_local2 = nil
		if not Dvar[0x9E5BE3B4BBA4E0E]( 0x5933EFE2016FFFA ) then
			f8_local1 = f8_local0.name
			if f8_local0.string and f8_local0.string ~= "" then
				f8_local2 = Engine[0xED84C33EC5F01EA]( f8_local0.string )
			else
				f8_local2 = f8_local1
			end
		else
			f8_local1 = MapInfo.BundleGetName( f8_local0 )
			f8_local2 = MapInfo.BundleGetDisplayName( mapBundle )
			if not f8_local2 or f8_local2 == "" then
				f8_local2 = f8_local1
			end
		end
		if f8_arg0.Text then
			f8_arg0.Text:setText( f8_local2 )
		end
		f8_arg0:addEventHandler( "button_action", function ( f9_arg0, f9_arg1 )
			if Engine[0x12586A3F4FB490E]() and (f8_arg0 ~= nil or f8_arg0 ~= "") then
				local f9_local0 = f8_arg0
				local f9_local1 = Engine[0xCFB814FF4C67F87]()
				if f9_local1 ~= CoD.PlayMode.None and f9_local1 ~= CoD.PlayMode.SP then
					local f9_local2 = Engine[0x45B054C920178E9]()
					LUI.FlowManager.RequestCloseAllMenus()
					LUI.FlowManager.RequestAddMenu( "MainMenu", false, f9_local2, false, {
						spMap = "spmap " .. f9_local0
					} )
				else
					LUI.FlowManager.RequestPopupMenu( nil, "FakeLoadingScreenOverlay", true, 0, false, {
						onLoadCompleteFunc = function ()
							Engine[0x7C75E608EA39B5C]( "spmap " .. f9_arg0 )
						end
					} )
				end
			end
		end )
	end
	
end

local f0_local1 = function ( f6_arg0, f6_arg1 )
	f6_arg0._mapTable = {}
	if not Dvar[0x9E5BE3B4BBA4E0E]( 0x5933EFE2016FFFA ) then
		local f6_local0 = MapInfo.spLevels.GetFile()
		local f6_local1 = StringTable[0xFD4E49A34DD43AE]( f6_local0 )
		for f6_local2 = 0, f6_local1 - 1, 1 do
			table.insert( f6_arg0._mapTable, CSV.ReadRowWithFile( MapInfo.spLevels, f6_local0, f6_local2 ) )
		end
	else
		f6_arg0._mapTable = Game[0x545EAEA81EB310E]( Enum[0xAC7E3CE067D9A9F][0x8D93E07B5793C56] )
	end
	f6_arg0.MapList:SetRefreshChild( f0_local0( f6_arg0 ) )
	f6_arg0.MapList:SetNumChildren( #f6_arg0._mapTable )
	f6_arg0.MapList:RefreshContent()
end

local f0_local2 = function ( f5_arg0, f5_arg1, f5_arg2 )
	assert( f5_arg0.MapList )
	f0_local0( f5_arg0, f5_arg1 )
end

function SPDevMapSelection( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "SPDevMapSelection"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	self.HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	self.HelperBar.id = "HelperBar"
	self.HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
	self.HelperBar:setPriority( 10 )
	self:addElement( self.HelperBar )
	local f1_local2 = self
	local WorldMask = nil
	
	WorldMask = LUI.UIImage.new()
	WorldMask.id = "WorldMask"
	WorldMask:SetRGBFromInt( 0, 0 )
	WorldMask:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1920, 0, _1080p * 1080 )
	self:addElement( WorldMask )
	self.WorldMask = WorldMask
	
	local Label = nil
	
	Label = LUI.UIText.new()
	Label.id = "Label"
	Label:setText( Engine[0xED84C33EC5F01EA]( 0x1EFCD60508E87DA ), 0 )
	Label:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_XLHeaderBold.font.File ) )
	Label:SetFontSize( FONT_STYLES.fontStyle_XLHeaderBold.size )
	Label:SetMinFontSize( FONT_STYLES.fontStyle_XLHeaderBold.minSize )
	Label:SetWordWrap( false )
	Label:SetAlignment( LUI.Alignment.Left )
	Label:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 201.24, _1080p * 911.24, _1080p * 95.61, _1080p * 201.61 )
	self:addElement( Label )
	self.Label = Label
	
	local MapList = nil
	
	MapList = LUI.UIGrid.new( {
		maxVisibleColumns = 1,
		maxVisibleRows = 6,
		controllerIndex = f1_local1,
		buildChild = function ()
			return MenuBuilder.BuildRegisteredType( "SPMenuButton", {
				controllerIndex = menu
			} )
		end,
		refreshChild = function ( f3_arg0, f3_arg1, f3_arg2 )
			
		end,
		columnWidth = _1080p * 430,
		rowHeight = _1080p * 100
	} )
	MapList.id = "MapList"
	MapList:SetMaxVisibleRows( 6 )
	MapList:setUseStencil( true )
	MapList:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 203.24, _1080p * 635.24, _1080p * 201.61, _1080p * 815.61 )
	self:addElement( MapList )
	self.MapList = MapList
	
	self.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_secondary",
		helper_text = Engine[0xED84C33EC5F01EA]( 0x4010B35574F3A9F )
	} )
	if not self.bindButton then
		local f1_local6 = LUI.UIBindButton.new()
		f1_local6.id = "selfBindButton"
		self:addElement( f1_local6 )
		self.bindButton = f1_local6
	end
	self.bindButton:addEventHandler( "button_secondary", function ( f2_arg0, f2_arg1 )
		local f2_local0 = f2_arg1.controller or menu
		ACTIONS.LeaveMenu( menu )
	end )
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "SPDevMapSelection", SPDevMapSelection )
LockTable( _M )
