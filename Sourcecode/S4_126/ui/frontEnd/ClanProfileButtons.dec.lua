-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
module( ..., package.seeall )
local f0_local0 = function ( f27_arg0, f27_arg1, f27_arg2, f27_arg3, f27_arg4 )
	if not f27_arg0[f27_arg2] then
		local f27_local0 = MenuBuilder.BuildRegisteredType( "GenericButton", {
			controllerIndex = f27_arg1
		} )
		f27_local0.id = f27_arg2
		f27_local0:SetText( ToUpperCase( Engine[0xED84C33EC5F01EA]( f27_arg3 ) ) )
		f27_local0:SetCentered()
		f27_arg0:addElement( f27_local0 )
		f27_arg0[f27_arg2] = f27_local0
	end
	f27_arg0[f27_arg2]:addEventHandler( "button_action", f27_arg4 )
	table.insert( f27_arg0._buttons, f27_arg2 )
end

local f0_local1 = function ( f26_arg0 )
	for f26_local3, f26_local4 in ipairs( f26_arg0._buttons ) do
		if f26_arg0[f26_local4] then
			f26_arg0:RemoveElement( f26_arg0[f26_local4] )
			f26_arg0[f26_local4]:closeTree()
			f26_arg0[f26_local4] = nil
		end
	end
	f26_arg0._buttons = {}
end

local f0_local2 = function ( f25_arg0 )
	for f25_local3, f25_local4 in ipairs( f25_arg0._buttons ) do
		f25_arg0[f25_local4]:SetButtonDisabled( true )
	end
end

local f0_local3 = function ( f24_arg0, f24_arg1 )
	LUI.FlowManager.RequestLeaveMenuByName( "FenceDialogPopup", true, true )
	local f24_local0 = LUI.FlowManager.RequestPopupMenu
	local f24_local1 = f24_arg0
	local f24_local2 = "MessagePopup"
	local f24_local3 = true
	local f24_local4 = f24_arg0._controllerIndex
	local f24_local5 = false
	local f24_local6 = {
		headerText = Engine[0xED84C33EC5F01EA]( "MENU/ERROR" )
	}
	local f24_local7
	if f24_arg1 then
		f24_local7 = Engine[0xED84C33EC5F01EA]( f24_arg1 )
		if not f24_local7 then
		
		else
			f24_local6.messageText = f24_local7
			f24_local0( f24_local1, f24_local2, f24_local3, f24_local4, f24_local5, f24_local6 )
		end
	end
	f24_local7 = Engine[0xED84C33EC5F01EA]( "CLANS/CLAN_GENERIC_ERROR" )
end

local f0_local4 = function ( f22_arg0 )
	if CONDITIONS.IsClansMemberListEnabled() then
		f22_arg0:AddButton( f22_arg0._controllerIndex, "MemberListButton", "CLANS/MEMBER_LIST", function ( f23_arg0, f23_arg1 )
			LUI.FlowManager.RequestAddMenu( "ClanMembersMenu", true, f22_arg0._controllerIndex, false, {
				clanData = f22_arg0._clanData
			}, true, true )
		end )
	end
end

local f0_local5 = function ( f18_arg0 )
	f18_arg0:AddButton( f18_arg0._controllerIndex, "JoinClanButton", "CLANS/JOIN_CLAN", function ( f19_arg0, f19_arg1 )
		local f19_local0 = f18_arg0._controllerIndex
		local f19_local1 = function ()
			assert( f19_arg0._clanPrivacyLevel == CLANS.ClanPrivacyLevel.OPEN )
			if Clans[0xB70126A1DC6D1E7]( f19_arg0._controllerIndex, f19_arg0._clanID ) then
				LUI.FlowManager.RequestPopupMenu( nil, "FenceDialogPopup", true, f19_arg0._controllerIndex, false, {
					controllerIndex = f19_arg0._controllerIndex,
					message = Engine[0xED84C33EC5F01EA]( "CLANS/JOINING_CLAN" )
				} )
			else
				f19_arg0:ShowErrorPopup()
			end
		end
		
		local f19_local2 = {
			confirmAction = function ()
				if Clans[0xC866075E314B4EC]( f19_arg0, Clans[0x43F567012B7061]( f19_arg0 ) ) then
					LUI.FlowManager.RequestPopupMenu( nil, "FenceDialogPopup", true, f19_arg0, false, {
						controllerIndex = f19_arg0,
						message = Engine[0xED84C33EC5F01EA]( "CLANS/LEAVING_CLAN" )
					} )
				else
					f19_arg0:ShowErrorPopup()
				end
			end,
			joinNowAction = f19_local1
		}
		f18_arg0._leaveCurrentClanCallback = f19_local1
		CLANS.TryChangeClans( f18_arg0, f19_local0, f19_local2 )
	end )
end

local f0_local6 = function ( f16_arg0 )
	f16_arg0:AddButton( f16_arg0._controllerIndex, "SendClanRequestButton", "CLANS/REQUEST_TO_JOIN", function ( f17_arg0, f17_arg1 )
		if Clans[0xB70126A1DC6D1E7]( f16_arg0._controllerIndex, f16_arg0._clanID ) then
			f16_arg0._requestedToJoinClan = true
			f16_arg0:DisableButtons()
		else
			f16_arg0:ShowErrorPopup()
		end
	end )
end

local f0_local7 = function ( f14_arg0 )
	f14_arg0:AddButton( f14_arg0._controllerIndex, "RevokeJoinRequestButton", "CLANS/REVOKE_REQUEST", function ( f15_arg0, f15_arg1 )
		if Clans[0x43737490A9E02C3]( f14_arg0._controllerIndex, f14_arg0._clanID ) then
			f14_arg0._requestedToJoinClan = false
			f14_arg0:SetupForClanProfile( f14_arg0._clanData )
			f14_arg0:dispatchEventToRoot( {
				name = "send_toast_notification",
				immediate = true,
				options = {
					icon = "v_ui_icon_clan",
					displayTime = 3000,
					description = Engine[0xED84C33EC5F01EA]( "CLANS/REQUEST_REVOKED" )
				}
			} )
		else
			f14_arg0:ShowErrorPopup()
		end
	end )
end

local f0_local8 = function ( f10_arg0 )
	f10_arg0:AddButton( f10_arg0._controllerIndex, "AcceptInviteButton", "CLANS/ACCEPT_INVITE", function ( f11_arg0, f11_arg1 )
		local f11_local0 = f10_arg0._controllerIndex
		local f11_local1 = function ()
			if Clans[0x34056C95B38D8C]( f11_arg0._controllerIndex, f11_arg0._clanID ) then
				f11_arg0:dispatchEventToRoot( {
					name = "send_toast_notification",
					immediate = true,
					options = {
						icon = "v_ui_icon_clan",
						displayTime = 3000,
						description = Engine[0xED84C33EC5F01EA]( "CLANS/INVITE_ACCEPTED" )
					}
				} )
			else
				f11_arg0:ShowErrorPopup()
			end
		end
		
		local f11_local2 = {
			confirmAction = function ()
				if Clans[0xC866075E314B4EC]( f11_arg0, Clans[0x43F567012B7061]( f11_arg0 ) ) then
					LUI.FlowManager.RequestPopupMenu( nil, "FenceDialogPopup", true, f11_arg0, false, {
						controllerIndex = f11_arg0,
						message = Engine[0xED84C33EC5F01EA]( "CLANS/LEAVING_CLAN" )
					} )
				else
					f11_arg0:ShowErrorPopup()
				end
			end,
			joinNowAction = f11_local1
		}
		f10_arg0._leaveCurrentClanCallback = f11_local1
		CLANS.TryChangeClans( f10_arg0, f11_local0, f11_local2 )
	end )
end

local f0_local9 = function ( f8_arg0 )
	f8_arg0:AddButton( f8_arg0._controllerIndex, "DeclineInviteButton", "CLANS/DECLINE_INVITE", function ( f9_arg0, f9_arg1 )
		Clans[0xB1BC2B6E31D61BC]( f8_arg0._controllerIndex, f8_arg0._clanID )
		f8_arg0:dispatchEventToRoot( {
			name = "send_toast_notification",
			immediate = true,
			options = {
				icon = "v_ui_icon_clan",
				displayTime = 3000,
				description = Engine[0xED84C33EC5F01EA]( "CLANS/INVITE_DECLINED" )
			}
		} )
		f8_arg0._isInvitedToClan = false
		f8_arg0:SetupForClanProfile( f8_arg0._clanData )
	end )
end

local f0_local10 = function ( f7_arg0, f7_arg1 )
	f7_arg0._clanData = f7_arg1
	f7_arg0._clanID = f7_arg1.clanId
	f7_arg0._clanPrivacyLevel = f7_arg1.clanPrivacyLevel
	f7_arg0:RemoveButtons()
	if f7_arg0._isInvitedToClan == nil then
		f7_arg0._isInvitedToClan = CLANS.HasPendingInviteForClan( f7_arg0._controllerIndex, f7_arg0._clanID )
	end
	if f7_arg0._requestedToJoinClan == nil then
		f7_arg0._requestedToJoinClan = CLANS.HasPendingRequestForClan( f7_arg0._controllerIndex, f7_arg0._clanID )
	end
	if f7_arg0._clanID ~= Clans[0x43F567012B7061]( f7_arg0._controllerIndex ) then
		if f7_arg0._isInvitedToClan then
			f7_arg0:AddAcceptInviteButton()
			f7_arg0:AddDeclineInviteButton()
		else
			if f7_arg0._clanPrivacyLevel == CLANS.ClanPrivacyLevel.OPEN then
				f7_arg0:AddJoinClanButton()
			end
			if f7_arg0._requestedToJoinClan then
				f7_arg0:AddRevokeJoinRequestButton()
			elseif f7_arg0._clanPrivacyLevel == CLANS.ClanPrivacyLevel.BY_REQUEST then
				f7_arg0:AddSendJoinRequestButton()
			end
		end
	end
	f7_arg0:processEvent( {
		name = "gain_focus"
	} )
end

local f0_local11 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.AddButton = f0_local0
	f2_arg0.RemoveButtons = f0_local0
	f2_arg0.DisableButtons = f0_local0
	f2_arg0.ShowErrorPopup = f0_local0
	f2_arg0.AddJoinClanButton = f0_local0
	f2_arg0.AddSendJoinRequestButton = f0_local0
	f2_arg0.AddRevokeJoinRequestButton = f0_local0
	f2_arg0.AddAcceptInviteButton = f0_local0
	f2_arg0.AddDeclineInviteButton = f0_local0
	f2_arg0.AddMemberListButton = f0_local0
	f2_arg0.SetupForClanProfile = f0_local0
	f2_arg0._controllerIndex = f2_arg1
	f2_arg0._buttons = {}
	CLANS.AddClanEventHandlers( f2_arg0, {
		[CLANS.ClanEvents.INITIALIZED] = function ( f6_arg0 )
			if f6_arg0.success == true or f6_arg0.success == 1 then
				LUI.FlowManager.RequestRestoreMenu( "SocialMenu", true, f2_arg0._controllerIndex )
			else
				f2_arg0:ShowErrorPopup( CLANS.GetClanErrorMessageRaw( f6_arg0.error ) )
			end
		end,
		[CLANS.ClanEvents.REQUESTS_UPDATED] = function ( f5_arg0 )
			if f5_arg0.success == true or f5_arg0.success == 1 then
				if f2_arg0._clanPrivacyLevel ~= CLANS.ClanPrivacyLevel.BY_REQUEST then
					f2_arg0._clanData.clanPrivacyLevel = CLANS.ClanPrivacyLevel.BY_REQUEST
					f2_arg0._requestedToJoinClan = true
				end
				LUI.FlowManager.RequestLeaveMenuByName( "FenceDialogPopup", true, true )
				f2_arg0:SetupForClanProfile( f2_arg0._clanData )
				f2_arg0:dispatchEventToRoot( {
					name = "send_toast_notification",
					immediate = true,
					options = {
						icon = "v_ui_icon_clan",
						displayTime = 3000,
						description = Engine[0xED84C33EC5F01EA]( "CLANS/REQUEST_SENT" )
					}
				} )
			end
		end,
		[CLANS.ClanEvents.LEFT_CLAN_ACTIVE] = function ( f4_arg0 )
			if f2_arg0._leaveCurrentClanCallback then
				LUI.FlowManager.RequestLeaveMenuByName( "FenceDialogPopup", true, true )
				f2_arg0:_leaveCurrentClanCallback()
				f2_arg0._leaveCurrentClanCallback = nil
			end
		end
	} )
	CLANS.AddClanInviteErrorEventHandlers( f2_arg0, f2_arg1, function ()
		LUI.FlowManager.RequestLeaveMenuByName( "FenceDialogPopup", true, true )
	end )
end

function ClanProfileButtons( menu, controller )
	local self = LUI.UIVerticalList.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 800 * _1080p, 0, 60 * _1080p )
	self.id = "ClanProfileButtons"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	self:SetSpacing( 10 * _1080p )
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "ClanProfileButtons", ClanProfileButtons )
LockTable( _M )
