-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
LUI.UIMouseCursor = LUI.Class( LUI.UIElement )
LUI.UIMouseCursor.priority = 1000
LUI.UIMouseCursor.mouseTimeout = 3000
LUI.UIMouseCursor.cinematicHideDelay = 2000
local f0_local0 = function ( f8_arg0, f8_arg1 )
	if CONDITIONS.InFrontend() then
		local f8_local0 = LUI.FlowManager.GetTopMostOpenMenuInfo()
		if f8_local0 and f8_local0.menu and f8_local0.menu._shouldCursorBeHiddenDuringCinematics ~= nil and f8_local0.menu._shouldCursorBeHiddenDuringCinematics == true then
			f8_arg0.hiddenInCinematic = false
			return 
		end
	end
	local f8_local0 = f8_arg0.lastMoveTime + LUI.UIMouseCursor.cinematicHideDelay <= Engine[0x6991337AE950F99]()
	local f8_local1 = Engine[0xB63308D00984B0A]()
	if f8_local1 and not f8_arg0.hiddenInCinematic and f8_local0 then
		f8_arg0:SetAlpha( 0 )
		f8_arg0.hiddenInCinematic = true
		if Engine[0x3ECA657EE4C6C9]() then
			Engine[0x5F965FF5540EAC8]( false )
		end
	elseif (not f8_local0 or not f8_local1) and f8_arg0.hiddenInCinematic then
		f8_arg0:SetAlpha( f8_arg0.showCursor )
		f8_arg0.hiddenInCinematic = false
		if Engine[0x3ECA657EE4C6C9]() then
			Engine[0x5F965FF5540EAC8]( f8_arg0.showCursor == 1 )
		end
	end
end

MouseCursorType = {
	CURSOR_TYPE_ARROW_NORMAL = {
		id = 0,
		material = 0x7CB1873354650DD
	},
	CURSOR_TYPE_ARROW_ACTIVE = {
		id = 1,
		material = 0x210AC0BFD3EEAC8
	},
	CURSOR_TYPE_ARROW_UNAVAILABLE = {
		id = 2
	},
	CURSOR_TYPE_ARROW_INACTIVE = {
		id = 3
	},
	CURSOR_TYPE_ARROW_CONTEXTUAL = {
		id = 4,
		material = 0x1C0C0BC9681129
	},
	CURSOR_TYPE_ROTATION_NORMAL = {
		id = 5,
		material = 0x8CB311FCA9ED574
	},
	CURSOR_TYPE_ROTATION_ACTIVE = {
		id = 6
	},
	CURSOR_TYPE_ROTATION_UNAVAILABLE = {
		id = 7
	},
	CURSOR_TYPE_ARROW_PANFOURWAYS = {
		id = 8,
		material = 0x71114F6E17061AD
	},
	CURSOR_TYPE_IBEAM = {
		id = 9,
		material = 0xDC62AB4D375A4A7
	},
	CURSOR_TYPE_WIN_ARROW = {
		id = 10
	},
	CURSOR_TYPE_WIN_HAND = {
		id = 11
	},
	CURSOR_TYPE_WIN_IBEAM = {
		id = 12
	},
	CURSOR_TYPE_WIN_SIZEALL = {
		id = 13
	},
	CURSOR_TYPE_ARROW_CLOSE = {
		id = 14,
		material = 0xC67231D788EB47A
	}
}
LUI.UIMouseCursor.UpdateMouseCursor = function ( f7_arg0, f7_arg1 )
	local f7_local0 = MouseCursorType.CURSOR_TYPE_ARROW_NORMAL
	if f7_arg0 then
		local f7_local1 = LUI.MouseCursorContextualMenuLayer.GetLayer()
		local f7_local2
		if f7_local1 then
			f7_local2 = f7_local1
		else
			f7_local2 = f7_local1:AnyValidContextualDataConditions( f7_arg0, f7_arg1, nil )
		end
		local f7_local3 = false
		if CONDITIONS.IsMobileOrMobileSim() then
			f7_local3 = f7_arg0.handleTouchInput
		else
			f7_local3 = f7_arg0.handleMouseButton
		end
		if f7_local2 then
			f7_local0 = MouseCursorType.CURSOR_TYPE_ARROW_CONTEXTUAL
		elseif f7_arg0._mouseCursorTypeOverride then
			f7_local0 = f7_arg0._mouseCursorTypeOverride
		elseif f7_local3 then
			f7_local0 = MouseCursorType.CURSOR_TYPE_ARROW_ACTIVE
		end
	end
	local f7_local1 = Engine[0xEE6F69FEA944B13]()
	f7_local1 = f7_local1.cursor
	if f7_local1 then
		f7_local1._controllerIndex = f7_arg1
		f7_local1:SetMouseCursorController( f7_arg1 )
		if f7_local1._currentCursorType ~= f7_local0 then
			f7_local1._currentCursorType = f7_local0
			if Engine[0x3ECA657EE4C6C9]() then
				Engine[0x4D9D0802A4A54A3]( f7_local0.id )
			else
				local f7_local2 = RegisterMaterial
				local f7_local4 = f7_local0.material
				if not f7_local4 then
					f7_local4 = MouseCursorType.CURSOR_TYPE_ARROW_NORMAL.material
				end
				f7_local2 = f7_local2( f7_local4 )
				assert( f7_local2, "Cursor material " .. tostring( f7_local0.material ) .. " invalid or not loaded" )
				f7_local1:setImage( f7_local2 )
			end
		end
	end
end

LUI.UIMouseCursor.SetMouseVisibility = function ( f6_arg0 )
	local f6_local0 = Engine[0xEE6F69FEA944B13]()
	f6_local0 = f6_local0.cursor
	if f6_local0 then
		if f6_arg0 then
			f6_arg0 = f6_local0.showCursor == 1
		end
		local f6_local1 = f6_local0
		local f6_local2 = f6_local0.SetAlpha
		local f6_local3
		if f6_arg0 then
			f6_local3 = 1
		else
			f6_local3 = 0
		end
		f6_local2( f6_local1, f6_local3 )
		if Engine[0x3ECA657EE4C6C9]() then
			Engine[0x5F965FF5540EAC8]( f6_arg0 )
		end
	end
end

LUI.UIMouseCursor.ResetShowCusorVariable = function ()
	local f5_local0 = Engine[0xEE6F69FEA944B13]()
	f5_local0 = f5_local0.cursor
	if f5_local0 then
		f5_local0.showCursor = 0
	end
end

LUI.UIMouseCursor.ShowMouseCursorOnActivity = function ( f4_arg0 )
	local f4_local0 = Engine[0xEE6F69FEA944B13]()
	f4_local0 = f4_local0.cursor
	if f4_local0 then
		f4_local0.showMouseCursorOnActivity = f4_arg0
	end
end

LUI.UIMouseCursor.init = function ( f1_arg0, f1_arg1 )
	LUI.UIMouseCursor.super.init( f1_arg0 )
	f1_arg0.id = "UIMouseCursor"
	f1_arg0:SetupMouseCursor()
	f1_arg0:SetAnchorsAndPosition( 0, 1, 0, 1, -32, 32, -32, 32 )
	f1_arg0:setImage( RegisterMaterial( 0x7CB1873354650DD ) )
	f1_arg0:setPriority( LUI.UIMouseCursor.priority )
	f1_arg0.lastMoveTime = Engine[0x6991337AE950F99]()
	f1_arg0.showCursor = 0
	f1_arg0.hiddenInCinematic = false
	f1_arg0.showMouseCursorOnActivity = true
	f1_arg0:SetAlpha( 0 )
	local f1_local0 = function ()
		f1_arg0.lastMoveTime = Engine[0x6991337AE950F99]()
		if f1_arg0.showCursor == 0 and f1_arg0.showMouseCursorOnActivity then
			f1_arg0.showCursor = 1
			f1_arg0:SetAlpha( 1 )
			if Engine[0x3ECA657EE4C6C9]() then
				Engine[0x5F965FF5540EAC8]( true )
			end
		end
		if f1_arg0.hiddenInCinematic then
			f1_arg0:SetAlpha( f1_arg0.showCursor )
			f1_arg0.hiddenInCinematic = false
			if Engine[0x3ECA657EE4C6C9]() then
				Engine[0x5F965FF5540EAC8]( f1_arg0.showCursor == 1 )
			end
		end
	end
	
	f1_arg0:registerEventHandler( "mousedown", f1_local0 )
	f1_arg0:SubscribeToModel( DataModel[0x40E824FE270E174]( DataModel[0x4DF5CFBC1771947]( f1_arg1.controllerIndex ), "cursor.notify" ), f1_local0, true )
	local self = LUI.UITimer.new( {
		interval = 1000,
		broadcastToRoot = false,
		disposable = false,
		event = {
			name = "update_mouse"
		},
		eventTarget = f1_arg0
	} )
	self.id = "updateTimer"
	f1_arg0:addElement( self )
	f1_arg0:registerEventHandler( "update_mouse", f0_local0 )
	f1_arg0:registerEventHandler( "update_input_type", function ( element, event )
		if LUI.IsLastInputGamepad( event.controllerIndex ) and element.showCursor == 1 then
			element:SetAlpha( 0, 400 )
			element.showCursor = 0
			if Engine[0x3ECA657EE4C6C9]() then
				Engine[0x5F965FF5540EAC8]( false )
			end
		else
			element:SetAlpha( element.showCursor )
			if Engine[0x3ECA657EE4C6C9]() then
				Engine[0x5F965FF5540EAC8]( element.showCursor == 1 )
			end
		end
	end )
end

