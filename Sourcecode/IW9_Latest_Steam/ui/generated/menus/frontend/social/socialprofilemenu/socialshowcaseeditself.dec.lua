-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
module( ..., package.seeall )
require( "ui.generated.widgets.genericpanelbuttonwithicon" )
require( "ui.generated.widgets.buttondescriptiontext" )
require( "ui.generated.widgets.frontend.social.socialprofilemenu.socialshowcaseplayerdetailbutton" )
require( "ui.generated.widgets.frontend.social.socialprofilemenu.socialshowcasecallingcardshowcasepreviewbutton" )
require( "ui.generated.widgets.frontend.menutitle" )
local f0_local0 = 1
local f0_local1 = {
	CALLING_CARD_SHOWCASE = 2,
	EMBLEM = 3,
	WEAPON = 1,
	OPERATOR = 0,
	CLAN_TAG = 5,
	CALLING_CARD = 4
}
local f0_local2 = {
	[f0_local1.OPERATOR] = {
		{
			menuTitleRef = 0x2567E6A6F5075A4,
			menuName = "PrivateMatchLobby"
		},
		{
			menuTitleRef = 0x41DBDB7EECE8510,
			menuName = "OperatorCustomization"
		},
		{
			menuTitleRef = 0xAF4CD69940F391F,
			menuName = "OperatorCustomizationCategory"
		},
		{
			menuTitleRef = 0xEE8489CA2DA1307,
			menuName = "LPMainMenu"
		}
	},
	[f0_local1.WEAPON] = {
		{
			menuTitleRef = 0x2567E6A6F5075A4,
			menuName = "PrivateMatchLobby"
		},
		{
			menuTitleRef = 0xCD850654D9372AC,
			menuName = "WeaponTabs"
		},
		{
			menuTitleRef = 0xC19D2A5DCF4877A,
			menuName = "GunsmithTabsMenu"
		},
		{
			menuTitleRef = 0xEE8489CA2DA1307,
			menuName = "LPMainMenu"
		}
	},
	[f0_local1.CALLING_CARD_SHOWCASE] = {
		{
			menuTitleRef = 0xB2B4638301B426D,
			menuName = "CallingCardSelect"
		}
	},
	[f0_local1.EMBLEM] = {
		{
			menuTitleRef = 0x8BC854FE846B8EA,
			menuName = "EmblemSelectMenu"
		}
	},
	[f0_local1.CALLING_CARD] = {
		{
			menuTitleRef = 0xB2B4638301B426D,
			menuName = "CallingCardSelect"
		}
	},
	[f0_local1.CLAN_TAG] = {}
}
local f0_local3 = function ( f22_arg0 )
	f22_arg0:SetFocusable( true )
	f22_arg0:SetHandleMouse( true )
	f22_arg0:SetHandleTouchInput( true )
	if not f22_arg0._buttonDisabledMenuTitleRef then
		f22_arg0:SetButtonDisabled( false )
	end
end

local f0_local4 = function ( f21_arg0, f21_arg1 )
	f21_arg0:SetFocusable( false )
	f21_arg0:SetHandleMouse( false )
	f21_arg0:SetHandleTouchInput( false )
	f21_arg0:SetButtonDisabled( true )
	if f21_arg0.Highlight then
		f21_arg0.Highlight:closeTree()
	end
	if f21_arg0:isInFocus() then
		f21_arg0:processEvent( {
			name = "lose_focus",
			controller = f21_arg1
		} )
	end
end

local f0_local5 = function ( f20_arg0, f20_arg1 )
	PLAYER_DATA.EditClanTag( f20_arg0, f20_arg1 )
end

local f0_local6 = function ( f18_arg0, f18_arg1 )
	local f18_local0 = f18_arg0:Wait( 0, true )
	f18_local0.onComplete = function ()
		f18_arg0._isEditingCallingCardShowcase = true
		ACTIONS.AnimateSequence( f18_arg0, "CallingCardShowcaseEdit" )
		f18_arg0.Darken:SetVisibility( LUI.Visibility.Visible )
		f18_arg0.CompareButton:SetAlpha( 0.5 )
		f18_arg0.WorldBlur:SetBlurStrength( 1.5 )
		f18_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0xD0DFB538A530E65 ) )
		f18_arg0( f18_arg0.CallingCardButton.CallingCard1 )
		f18_arg0( f18_arg0.CallingCardButton.CallingCard2 )
		f18_arg0( f18_arg0.CallingCardButton.CallingCard3 )
		f18_arg0.CallingCardButton:SetEditingCallingCardShowcase( true )
		local f19_local0 = f18_arg0.ActionsGrid:GetNumChildren()
		for f19_local1 = 0, f19_local0 - 1, 1 do
			local f19_local4 = f18_arg0.ActionsGrid:GetPositionForIndex( f19_local1 )
			f18_arg0( f18_arg0.ActionsGrid:GetElementAtPosition( f19_local4.x, f19_local4.y ), f18_arg0 )
		end
		if not LUI.IsLastInputMouseNavigation( f18_arg0 ) then
			local f19_local1 = f18_arg0.CallingCardButton.CallingCard1
			if f18_arg0._scoped.callingCardToFocus == 2 then
				f19_local1 = f18_arg0.CallingCardButton.CallingCard2
			elseif f18_arg0._scoped.callingCardToFocus == 3 then
				f19_local1 = f18_arg0.CallingCardButton.CallingCard3
			end
			f18_arg0._scoped.callingCardToFocus = nil
			f19_local1:processEvent( {
				name = "gain_focus",
				controller = f18_arg0
			} )
		end
	end
	
end

local f0_local7 = function ( f16_arg0, f16_arg1 )
	local f16_local0 = f16_arg0:Wait( 0, true )
	f16_local0.onComplete = function ()
		f16_arg0._isEditingCallingCardShowcase = false
		ACTIONS.AnimateSequence( f16_arg0, "DefaultSequence" )
		f16_arg0.Darken:SetVisibility( LUI.Visibility.Hidden )
		f16_arg0.CompareButton:SetAlpha( 1 )
		f16_arg0.WorldBlur:SetBlurStrength( 0 )
		f16_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0xA6C1E5E6BCFBFE7 ) )
		f16_arg0( f16_arg0.CallingCardButton.CallingCard1, f16_arg0 )
		f16_arg0( f16_arg0.CallingCardButton.CallingCard2, f16_arg0 )
		f16_arg0( f16_arg0.CallingCardButton.CallingCard3, f16_arg0 )
		f16_arg0.CallingCardButton:SetEditingCallingCardShowcase( false )
		local f17_local0 = f16_arg0.ActionsGrid:GetNumChildren()
		for f17_local1 = 0, f17_local0 - 1, 1 do
			local f17_local4 = f16_arg0.ActionsGrid:GetPositionForIndex( f17_local1 )
			f16_arg0( f16_arg0.ActionsGrid:GetElementAtPosition( f17_local4.x, f17_local4.y ) )
		end
		if not LUI.IsLastInputMouseNavigation( f16_arg0 ) then
			ACTIONS.GainFocus( f16_arg0, "ActionsGrid" )
		end
	end
	
end

local f0_local8 = {
	{
		targetMenu = "SocialShowcaseOperatorSelect",
		id = f0_local1.OPERATOR,
		label = Engine[0xED84C33EC5F01EA]( 0xA078981E6469AB4 )
	},
	{
		targetMenu = "SocialShowcaseWeaponSelect",
		id = f0_local1.WEAPON,
		label = Engine[0xED84C33EC5F01EA]( 0x2AFEFFD0AE448C8 )
	},
	{
		id = f0_local1.CALLING_CARD_SHOWCASE,
		label = Engine[0xED84C33EC5F01EA]( 0x5B22F0F39237163 ),
		targetFunction = f0_local6
	},
	{
		targetMenu = "EmblemSelectMenu",
		id = f0_local1.EMBLEM,
		label = Engine[0xED84C33EC5F01EA]( 0x12940BBB5A431A4 )
	},
	{
		targetMenu = "CallingCardSelect",
		id = f0_local1.CALLING_CARD,
		label = Engine[0xED84C33EC5F01EA]( 0x69F2CD40F2A4C51 )
	},
	{
		id = f0_local1.CLAN_TAG,
		label = Engine[0xED84C33EC5F01EA]( 0x6BC8FE51267F79 ),
		targetFunction = f0_local5
	}
}
local f0_local9 = function ( f12_arg0, f12_arg1, f12_arg2 )
	local f12_local0 = f12_arg0.ActionsGrid
	local f12_local1 = function ( f13_arg0, f13_arg1, f13_arg2 )
		local f13_local0 = f12_arg0[f12_arg0:GetContentIndex( f13_arg1, f13_arg2 ) + 1]
		f13_arg0.Title:setText( f13_local0.label )
		local f13_local1 = {}
		for f13_local5, f13_local6 in ipairs( LUI.FlowManager.GetMenuStack() ) do
			f13_local1[f13_local6.name] = true
		end
		f13_local2 = nil
		for f13_local7, f13_local8 in ipairs( f12_arg0[f13_local0.id] ) do
			if f13_local1[f13_local8.menuName] then
				f13_local2 = f13_local8.menuTitleRef
				break
			end
		end
		f13_arg0._buttonDisabledMenuTitleRef = f13_local2
		f13_arg0:SetButtonDisabled( f13_arg0._buttonDisabledMenuTitleRef ~= nil )
		if not f13_arg0._eventHandlersAdded then
			f13_arg0:addEventHandler( "button_action", function ( f15_arg0, f15_arg1 )
				if f13_arg0.targetMenu then
					f13_arg0.hideGlobalPanel = true
					LUI.FlowManager.RequestAddMenu( f13_arg0.targetMenu, true, f13_arg0, false, f13_arg0, true )
				elseif f13_arg0.targetFunction then
					f13_arg0:targetFunction( f13_arg0 )
				end
			end )
			f13_arg0:addEventHandler( "gain_focus", function ( f14_arg0, f14_arg1 )
				local f14_local0 = ""
				if f13_arg0._buttonDisabledMenuTitleRef then
					f14_local0 = Engine[0xED84C33EC5F01EA]( 0x23FD3406D00EDF0, Engine[0xED84C33EC5F01EA]( f13_arg0._buttonDisabledMenuTitleRef ), f13_arg0.label )
				end
				f13_arg0.ButtonDisabledText.Description:setText( f14_local0 )
				if f14_local0 == "" then
					ACTIONS.AnimateSequence( f13_arg0.ButtonDisabledText, "Default" )
				else
					ACTIONS.AnimateSequence( f13_arg0.ButtonDisabledText, "Update" )
				end
				return true
			end )
			f13_arg0._eventHandlersAdded = true
		end
	end
	
	f12_local0:SetNumChildren( #f0_local0 )
	f12_local0:SetRefreshChild( f12_local1 )
end

local f0_local10 = function ( f10_arg0, f10_arg1, f10_arg2, f10_arg3 )
	f10_arg1:addEventHandler( "button_action", function ( f11_arg0, f11_arg1 )
		if f10_arg0._isEditingCallingCardShowcase then
			f10_arg0._scoped.isEditingCallingCardShowcase = true
			f10_arg0._scoped.callingCardToFocus = f10_arg0 + 1
			LUI.FlowManager.RequestAddMenu( "CallingCardSelect", true, f10_arg0, false, {
				returnOnEquip = true,
				hideGlobalPanel = true,
				showcaseIndex = f10_arg0,
				equipped = f10_arg0._equippedShowcaseCallingCards[f10_arg0 + 1]
			}, true )
		end
	end )
end

local f0_local11 = function ( f9_arg0, f9_arg1, f9_arg2 )
	local f9_local0 = f9_arg0.CompareButton
	local f9_local1 = f9_arg0.CallingCardButton
	f0_local0( f9_local0, f9_arg1 )
	f0_local0( f9_local1, f9_arg1 )
	f0_local0( f9_arg0, f9_local1.CallingCard1, f9_arg1, 0 )
	f0_local0( f9_arg0, f9_local1.CallingCard2, f9_arg1, 1 )
	f0_local0( f9_arg0, f9_local1.CallingCard3, f9_arg1, 2 )
	f9_local0:SetPlayerDetails( f9_arg2 )
	local f9_local2 = Social[0x3F036D81D04EA45]( f9_arg1 )
	f9_local1:SetCallingCardShowcase( f9_local2[1], f9_local2[2], f9_local2[3] )
end

local f0_local12 = function ( f8_arg0, f8_arg1 )
	SHOWCASE.ShowOperatorModelForController( f8_arg0, f8_arg1, "social" )
end

local f0_local13 = function ( f5_arg0, f5_arg1, f5_arg2 )
	SHOWCASE.CheckForInitiatlizedStats( f5_arg1 )
	f5_arg0.menuIndex = f0_local0
	f5_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0xA6C1E5E6BCFBFE7 ) )
	f5_arg0.MenuTitle:SetupBackButton( f5_arg1 )
	f5_arg0.MenuTitle:DisableLine()
	f5_arg0._equippedShowcaseCallingCards = Social[0x3F036D81D04EA45]( f5_arg1 )
	if SOCIAL.CanUseOperatorsInBackground() and not CONDITIONS.IsMobileOrMobileSim() then
		SOCIAL.SetBackgroundPresenceImage( f5_arg0 )
	end
	f0_local0( f5_arg0, f5_arg1, PlayercardUtils.PlayerDataFromDataSource( f5_arg1 ) )
	f0_local0( f5_arg0, f5_arg1, f5_arg2 )
	f0_local0( f5_arg0, f5_arg1 )
	CLIENTCHARACTER.HidePets( {
		FrontEndScene.ClientCharacters.WestGoodBoy,
		FrontEndScene.ClientCharacters.EastGoodGirl
	} )
	f5_arg0:AddGamepadEventCallback( "button_secondary", function ( f6_arg0, f6_arg1 )
		local f6_local0 = f6_arg1.controller or f5_arg0
		if f6_arg0._isEditingCallingCardShowcase then
			f5_arg0( f6_arg0, f6_local0 )
			Engine[0xC4146BA76D0F982]( SOUND_SETS.default.back )
		else
			SHOWCASE.ValidateShowcaseEquippedItems( f6_local0 )
			if LUI.FlowManager.IsInStack( BATTLEMAP.BP_SECTOR_PREVIEW_REF ) then
				local f6_local1 = BATTLEMAP.GetBaseMenuScopedData()
				if f6_local1.setFrontendSection and f6_local1.rewardData then
					f5_arg0._controllerIndex = f6_local0
					Engine[0x685AE31DEDA30A4]( BATTLEMAP.SectionForLootType( f6_local1.rewardData.lootRef, f6_local1.rewardData.lootType ) )
					BATTLEMAP.UpdateBattleMapModel( f5_arg0, f6_local1.rewardData, false )
					f6_local1.isFromSocial = true
					local f6_local2 = f5_arg0:Wait( 100 )
					f6_local2.onComplete = function ()
						if f6_arg0.fromGlobalPanel then
							MenuUtils.BackToGlobalPanel( f6_arg0, f6_arg0, GLOBAL_PANEL.TAB_INDEX.PLAYER )
						end
						ACTIONS.LeaveMenu( f6_arg0 )
					end
					
				end
			else
				if f5_arg0.fromGlobalPanel then
					MenuUtils.BackToGlobalPanel( f6_arg0, f6_local0, GLOBAL_PANEL.TAB_INDEX.PLAYER )
				end
				ACTIONS.LeaveMenu( f6_arg0 )
			end
		end
	end )
	if f5_arg0._scoped.isEditingCallingCardShowcase then
		f5_arg0._scoped.isEditingCallingCardShowcase = false
		f0_local0( f5_arg0, f5_arg1 )
	else
		f0_local0( f5_arg0, f5_arg1 )
	end
end

local f0_local14 = function ()
	if SOCIAL.CanUseOperatorsInBackground() and not CONDITIONS.IsMobileOrMobileSim() then
		Engine[0x805D0407BF691DA]()
	end
end

function SocialShowcaseEditSelf( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "SocialShowcaseEditSelf"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local ActionsGrid = nil
	
	ActionsGrid = LUI.UIGrid.new( {
		maxVisibleRows = 7,
		maxVisibleColumns = 1,
		controllerIndex = f1_local1,
		buildChild = function ()
			return MenuBuilder.BuildRegisteredType( "GenericPanelButtonWithIcon", {
				controllerIndex = menu
			} )
		end,
		refreshChild = function ( f2_arg0, f2_arg1, f2_arg2 )
			
		end,
		spacingX = _1080p * 1,
		spacingY = _1080p * 5,
		columnWidth = _1080p * 512,
		rowHeight = _1080p * 56
	} )
	ActionsGrid.id = "ActionsGrid"
	ActionsGrid:SetMaxVisibleRows( 7 )
	ActionsGrid:SetRowSpacing( 5 )
	ActionsGrid:setUseStencil( true )
	ActionsGrid:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 75.49, _1080p * 596.49, _1080p * 540, _1080p * 985 )
	self:addElement( ActionsGrid )
	self.ActionsGrid = ActionsGrid
	
	local ButtonDisabledText = nil
	
	ButtonDisabledText = MenuBuilder.BuildRegisteredType( "ButtonDescriptionText", {
		controllerIndex = f1_local1
	} )
	ButtonDisabledText.id = "ButtonDisabledText"
	ButtonDisabledText:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 75, _1080p * 596, _1080p * 920, _1080p * 952 )
	self:addElement( ButtonDisabledText )
	self.ButtonDisabledText = ButtonDisabledText
	
	local EditLabel = nil
	
	EditLabel = LUI.UIStyledText.new()
	EditLabel.id = "EditLabel"
	EditLabel:SetRGBFromTable( SWATCHES.genericButton.description, 0 )
	EditLabel:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x1C3B0AAFBF200F ) ), 0 )
	EditLabel:SetFont( FONTS.GetFont( FONTS.SecondaryRegular.File ) )
	EditLabel:SetFontSize( 20 * _PT )
	EditLabel:SetMinFontSize( 20 * _PT )
	EditLabel:SetWordWrap( true )
	EditLabel:SetAlignment( LUI.Alignment.Left )
	EditLabel:SetDecodeUpdatesPerLetter( 4 )
	EditLabel:SetDecodeUseSystemTime( false )
	EditLabel:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 78, _1080p * 578, _1080p * 507, _1080p * 527 )
	self:addElement( EditLabel )
	self.EditLabel = EditLabel
	
	local LineTop = nil
	
	LineTop = LUI.UIImage.new()
	LineTop.id = "LineTop"
	LineTop:SetAlpha( 0.17, 0 )
	LineTop:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 75, _1080p * 587, _1080p * 531, _1080p * 532 )
	self:addElement( LineTop )
	self.LineTop = LineTop
	
	local CompareButton = nil
	
	CompareButton = MenuBuilder.BuildRegisteredType( "SocialShowcasePlayerDetailButton", {
		controllerIndex = f1_local1
	} )
	CompareButton.id = "CompareButton"
	CompareButton:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1399, _1080p * 1827, _1080p * 171.5, _1080p * 506.5 )
	self:addElement( CompareButton )
	self.CompareButton = CompareButton
	
	local WorldBlur = nil
	
	WorldBlur = MenuBuilder.BuildRegisteredType( "WorldBlur", {
		worldBlur = 2,
		controllerIndex = f1_local1
	} )
	WorldBlur.id = "WorldBlur"
	WorldBlur:SetAnchorsAndPosition( 0, 0, 0, 0, _1080p * -2, _1080p * -2, 0, 0 )
	self:addElement( WorldBlur )
	self.WorldBlur = WorldBlur
	
	local Darken = nil
	
	Darken = LUI.UIImage.new()
	Darken.id = "Darken"
	ACTIONS.ScaleFullscreen( Darken )
	Darken:SetRGBFromTable( SWATCHES.genericMenu.blackBackground, 0 )
	Darken:SetAlpha( 0.5, 0 )
	Darken:SetAnchorsAndPosition( 0, 0, 0, 0, _1080p * -2, _1080p * -2, 0, 0 )
	self:addElement( Darken )
	self.Darken = Darken
	
	local CallingCardButton = nil
	
	CallingCardButton = MenuBuilder.BuildRegisteredType( "SocialShowcaseCallingCardShowcasePreviewButton", {
		controllerIndex = f1_local1
	} )
	CallingCardButton.id = "CallingCardButton"
	CallingCardButton:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1399, _1080p * 1827, _1080p * 522.5, _1080p * 949.5 )
	self:addElement( CallingCardButton )
	self.CallingCardButton = CallingCardButton
	
	local MenuTitle = nil
	
	MenuTitle = MenuBuilder.BuildRegisteredType( "MenuTitle", {
		controllerIndex = f1_local1
	} )
	MenuTitle.id = "MenuTitle"
	MenuTitle:SetScale( 0, 0 )
	MenuTitle.MenuTitle:setText( ToUpperCase( "" ), 0 )
	MenuTitle.ModeTitle:setText( "", 0 )
	MenuTitle:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1920, 0, _1080p * 80 )
	self:addElement( MenuTitle )
	self.MenuTitle = MenuTitle
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "SocialShowcaseEditSelf", SocialShowcaseEditSelf )
LUI.FlowManager.RegisterStackPopBehaviour( "SocialShowcaseEditSelf", f0_local14 )
LockTable( _M )
