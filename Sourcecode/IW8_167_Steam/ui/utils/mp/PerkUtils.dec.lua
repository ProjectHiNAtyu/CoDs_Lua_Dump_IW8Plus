-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 17-11-2025 01:22
Cac = Cac or {}
PERK = PERK or {}
Cac.perkNoneValue = "specialty_null"
PERK.perkOverkill = "specialty_twoprimaries"
PERK.perkIncludesOverkill = "perkpackage_munitions"
PERK.perkMunitions = "specialty_munitions"
PERK.perkMunitions2 = "specialty_munitions_2"
PERK.perkPointman = "specialty_strategist"
PERK.perkKillchain = "specialty_heavy_metal"
PERK.perkDoubleTime = "specialty_hustle"
PERK.perkHardline = "specialty_hardline"
PERK.PERK_PACKAGE_STATES = {
	NoPackage = 0,
	Upgrade1Selected = 3,
	SelectUpgrade = 2,
	Upgrade2Selected = 4,
	ReadyToUpgrade = 1
}
PERK.PERK_TYPES = {
	FIRST = "1",
	SEDOND = "2",
	THIRD = "3"
}
PERK.GetImage = function ( f29_arg0 )
	return StringTable.DIFCHIGDFB( CSV.perks.file, CSV.perks.cols.ref, f29_arg0, CSV.perks.cols.image )
end

PERK.GetProgressionImage = function ( f28_arg0 )
	return StringTable.DIFCHIGDFB( CSV.perks.file, CSV.perks.cols.ref, f28_arg0, CSV.perks.cols.progressionImage )
end

PERK.GetBWImage = function ( f27_arg0 )
	return StringTable.DIFCHIGDFB( CSV.perks.file, CSV.perks.cols.ref, f27_arg0, CSV.perks.cols.BWImage )
end

PERK.GetModel = function ( f26_arg0 )
	return StringTable.DIFCHIGDFB( CSV.perks.file, CSV.perks.cols.ref, f26_arg0, CSV.perks.cols.model )
end

PERK.GetSourceModel = function ( f25_arg0 )
	local f25_local0 = StringTable.DIFCHIGDFB( CSV.perks.file, CSV.perks.cols.ref, f25_arg0, CSV.perks.cols.sourceModel )
	if f25_local0 == nil or f25_local0 == "" then
		return "tag_origin"
	else
		return f25_local0
	end
end

PERK.GetSpecialistModel = function ( f24_arg0 )
	return StringTable.DIFCHIGDFB( CSV.perks.file, CSV.perks.cols.ref, f24_arg0, CSV.perks.cols.specialistModel )
end

PERK.IsPointmanActive = function ( f23_arg0 )
	if Engine.DDJFBBJAIG() then
		return nil
	end
	local f23_local0 = #DataSources.inGame.player.perkListOmnvars
	for f23_local1 = 1, f23_local0, 1 do
		local f23_local4 = DataSources.inGame.player.perkListOmnvars[f23_local1]:GetValue( f23_arg0 )
		if f23_local4 and 0 <= f23_local4 and StringTable.DIFCHIGDFB( CSV.perks.file, CSV.perks.cols.index, f23_local4, CSV.perks.cols.ref ) == PERK.perkPointman then
			return true
		end
	end
	return false
end

PERK.SubscribeToChanges = function ( f22_arg0, f22_arg1, f22_arg2 )
	local f22_local0 = #DataSources.inGame.player.perkListOmnvars
	for f22_local1 = 1, f22_local0, 1 do
		f22_arg0:SubscribeToModel( DataSources.inGame.player.perkListOmnvars[f22_local1]:GetModel( f22_arg1 ), f22_arg2 )
	end
end

PERK.IsPerkOverkill = function ( f21_arg0 )
	local f21_local0
	if f21_arg0 ~= PERK.perkOverkill and f21_arg0 ~= PERK.perkIncludesOverkill and f21_arg0 ~= PERK.perkMunitions and f21_arg0 ~= PERK.perkMunitions2 then
		f21_local0 = false
	else
		f21_local0 = true
	end
	return f21_local0
end

PERK.FixOverkillKillchainPerkSwap = function ( f20_arg0, f20_arg1, f20_arg2 )
	local f20_local0 = PlayerData.BFFBGAJGD( f20_arg0, f20_arg1, CoD.PlayMode.Core, f20_arg2 )
	f20_local0 = f20_local0.squadMembers.loadouts
	for f20_local1 = 0, #f20_local0 - 1, 1 do
		local f20_local4 = f20_local0[f20_local1]
		local f20_local5 = f20_local4.loadoutPerks[0]:get()
		local f20_local6 = f20_local4.loadoutPerks[1]:get()
		local f20_local7 = PERK.IsPerkOverkill( f20_local5 )
		local f20_local8 = f20_local6 == PERK.perkKillchain
		if f20_local8 and f20_local7 then
			f20_local4.loadoutPerks[0]:set( PERK.perkKillchain )
			f20_local4.loadoutPerks[1]:set( PERK.perkMunitions2 )
		end
		if f20_local8 then
			f20_local4.loadoutPerks[1]:set( PERK.perkHardline )
		end
		if f20_local7 then
			f20_local4.loadoutPerks[0]:set( PERK.perkDoubleTime )
			f20_local4.loadoutPerks[1]:set( PERK.perkMunitions2 )
		end
	end
end

PERK.ValidatePlayerData = function ( f19_arg0, f19_arg1 )
	local f19_local0 = PlayerData.BFFBGAJGD( f19_arg0, CoD.StatsGroup.NonGame, CoD.PlayMode.Core, f19_arg1 )
	local f19_local1 = MP_COMMON.postShipFlags.overkillSwap
	if f19_local0.postShipFlags[f19_local1]:get() < 1 then
		PERK.FixOverkillKillchainPerkSwap( f19_arg0, CoD.StatsGroup.RankedLoadouts, f19_arg1 )
		PERK.FixOverkillKillchainPerkSwap( f19_arg0, CoD.StatsGroup.PrivateLoadouts, f19_arg1 )
		if CONDITIONS.AreWZLoadoutsEnabled() then
			PERK.FixOverkillKillchainPerkSwap( f19_arg0, CoD.StatsGroup.WZRankedLoadouts, f19_arg1 )
			PERK.FixOverkillKillchainPerkSwap( f19_arg0, CoD.StatsGroup.WZPrivateLoadouts, f19_arg1 )
		end
		f19_local0.postShipFlags[f19_local1]:set( 1 )
	end
end

Cac.GetPerkFullImage = function ( f18_arg0 )
	return StringTable.DIFCHIGDFB( CSV.perks.file, CSV.perks.cols.ref, f18_arg0, CSV.perks.cols.fullImage )
end

Cac.GetTraitManufacturersImage = function ( f17_arg0 )
	return StringTable.DIFCHIGDFB( CSV.perks.file, CSV.perks.cols.ref, f17_arg0, CSV.perks.cols.manufacturersImage )
end

PERK.GetName = function ( f16_arg0 )
	return Engine.CBBHFCGDIC( StringTable.DIFCHIGDFB( CSV.perks.file, CSV.perks.cols.ref, f16_arg0, CSV.perks.cols.name ) )
end

Cac.GetPerkIndex = function ( f15_arg0 )
	return tonumber( StringTable.DIFCHIGDFB( CSV.perks.file, CSV.perks.cols.ref, f15_arg0, CSV.perks.cols.index ) )
end

PERK.GetPerkPatchNotes = function ( f14_arg0 )
	return StringTable.DIFCHIGDFB( CSV.perks.file, CSV.perks.cols.ref, f14_arg0, CSV.perks.cols.patchNotes )
end

Cac.GetPerkDesc = function ( f13_arg0 )
	if CONDITIONS.IsMagmaGameMode() then
		return Engine.CBBHFCGDIC( StringTable.DIFCHIGDFB( CSV.perks.file, CSV.perks.cols.ref, f13_arg0, CSV.perks.cols.brDesc ) )
	elseif not CONDITIONS.IsThirdGameMode() then
		return Engine.CBBHFCGDIC( StringTable.DIFCHIGDFB( CSV.perks.file, CSV.perks.cols.ref, f13_arg0, CSV.perks.cols.desc ) )
	else
		return Engine.CBBHFCGDIC( StringTable.DIFCHIGDFB( CSV.perks.file, CSV.perks.cols.ref, f13_arg0, CSV.perks.cols.cpDesc ) )
	end
end

Cac.GetIsPerkDisabledForBR = function ( f12_arg0 )
	local f12_local0 = StringTable.DIFCHIGDFB( CSV.perks.file, CSV.perks.cols.ref, f12_arg0, CSV.perks.cols.brDisabled )
	if f12_local0 and f12_local0 ~= "" then
		return tonumber( f12_local0 ) == 1
	else
		return false
	end
end

Cac.IsPerkInUse = function ( f11_arg0 )
	local f11_local0
	if f11_arg0 == Cac.perkNoneValue or f11_arg0 == "" then
		f11_local0 = false
	else
		f11_local0 = true
	end
	return f11_local0
end

Cac.IsPerkSlotInUse = function ( f10_arg0, f10_arg1 )
	return Cac.IsPerkInUse( f10_arg1.perk:GetValue( f10_arg0 ) ), Cac.IsPerkInUse( f10_arg1.extraPerk:GetValue( f10_arg0 ) )
end

Cac.GetPerkSlot = function ( f9_arg0, f9_arg1 )
	local f9_local0 = nil
	if f9_arg1 == 0 then
		f9_local0 = f9_arg0.perkSlotOne
	elseif f9_arg1 == 1 then
		f9_local0 = f9_arg0.perkSlotTwo
	else
		f9_local0 = f9_arg0.perkSlotThree
	end
	return f9_local0
end

Cac.GetNumPerksEquipped = function ( f8_arg0, f8_arg1 )
	local f8_local0 = f8_arg1.perk:GetValue( f8_arg0 )
	if Cac.IsPerkInUse( f8_arg1.extraPerk:GetValue( f8_arg0 ) ) then
		return 2
	elseif Cac.IsPerkInUse( f8_local0 ) then
		return 1
	else
		return 0
	end
end

Cac.GetPerkSlotDataSourceByEquippedRef = function ( f7_arg0, f7_arg1, f7_arg2 )
	if f7_arg1.perkSlotOne.perk:GetValue( f7_arg0 ) == f7_arg2 then
		return f7_arg1.perkSlotOne, false
	elseif f7_arg1.perkSlotOne.extraPerk:GetValue( f7_arg0 ) == f7_arg2 then
		return f7_arg1.perkSlotOne, true
	elseif f7_arg1.perkSlotTwo.perk:GetValue( f7_arg0 ) == f7_arg2 then
		return f7_arg1.perkSlotTwo, false
	elseif f7_arg1.perkSlotTwo.extraPerk:GetValue( f7_arg0 ) == f7_arg2 then
		return f7_arg1.perkSlotTwo, true
	elseif f7_arg1.perkSlotThree.perk:GetValue( f7_arg0 ) == f7_arg2 then
		return f7_arg1.perkSlotThree, false
	elseif f7_arg1.perkSlotThree.extraPerk:GetValue( f7_arg0 ) == f7_arg2 then
		return f7_arg1.perkSlotThree, true
	else
		return nil, false
	end
end

Cac.GetPerkSlotDataSourceByIndex = function ( f6_arg0, f6_arg1, f6_arg2 )
	local f6_local0 = {
		f6_arg1.perkSlotOne,
		f6_arg1.perkSlotTwo,
		f6_arg1.perkSlotThree
	}
	assert( f6_arg2 < #f6_local0 )
	return f6_local0[f6_arg2 + 1]
end

Cac.GetPerkSlotName = function ( f5_arg0 )
	local f5_local0 = {
		nil,
		"LUA_MENU_MP/PERK_SLOT_ONE_SHORT_CAPS",
		"LUA_MENU_MP/PERK_SLOT_TWO_SHORT_CAPS",
		"LUA_MENU_MP/PERK_SLOT_THREE_SHORT_CAPS"
	}
	assert( f5_arg0 < #f5_local0 )
	return Engine.CBBHFCGDIC( f5_local0[f5_arg0 + 1] )
end

Cac.GetPerkSlotNumber = function ( f4_arg0 )
	return StringTable.DIFCHIGDFB( CSV.menuPerks.file, CSV.menuPerks.cols.ref, f4_arg0, CSV.menuPerks.cols.slot )
end

Cac.GetPerkSlotColor = function ( f3_arg0 )
	local f3_local0 = {
		SWATCHES.CAC.perkSlotOne,
		SWATCHES.CAC.perkSlotTwo,
		SWATCHES.CAC.perkSlotThree
	}
	assert( f3_arg0 < #f3_local0 )
	return GetIntForColor( f3_local0[f3_arg0 + 1] )
end

Cac.GetNonePerkInfoDataSource = function ()
	local f2_local0 = "frontEnd.MP.CAC." .. Cac.perkNoneValue
	return {
		ref = LUI.DataSourceInGlobalModel.new( f2_local0 .. "ref", Cac.perkNoneValue ),
		desc = LUI.DataSourceInGlobalModel.new( f2_local0 .. "desc", Cac.GetPerkDesc( Cac.perkNoneValue ) ),
		name = LUI.DataSourceInGlobalModel.new( f2_local0 .. "name", PERK.GetImage( Cac.perkNoneValue ) ),
		image = LUI.DataSourceInGlobalModel.new( f2_local0 .. "image", Cac.GetPerkDesc( Cac.perkNoneValue ) )
	}
end

Cac.ClearPerk = function ( f1_arg0, f1_arg1 )
	f1_arg1:SetValue( f1_arg0, Cac.perkNoneValue )
end

