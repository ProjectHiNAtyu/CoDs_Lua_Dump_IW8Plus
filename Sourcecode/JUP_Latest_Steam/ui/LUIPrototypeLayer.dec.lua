-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
LUI.PrototypeLayer = LUI.Class( LUI.UIElement )
local f0_local0 = function ( f11_arg0 )
	f11_arg0._buttonDownStartTime = nil
	f11_arg0._lastUsedBind = nil
	f11_arg0._lastUsedButton = nil
end

local f0_local1 = function ( f10_arg0 )
	f10_arg0:ExpandModalHUDList()
	LUI.UIRoot.SetLuiLayerKeycatch( f10_arg0, f10_arg0._controllerIndex, true )
end

local f0_local2 = function ( f9_arg0 )
	f9_arg0:CollapseModalHUDList()
	LUI.UIRoot.SetLuiLayerKeycatch( f9_arg0, f9_arg0._controllerIndex, false )
end

local f0_local3 = function ( f8_arg0 )
	local f8_local0 = f8_arg0._buttonDownStartTime
	if f8_local0 then
		f8_local0 = f8_arg0._buttonDownStartTime + f8_arg0._buttonTapThreshold < Engine[0x6991337AE950F99]()
	end
	if f8_local0 and not LUI.PrototypeLayer.ModalKillstreakList:IsInUse() then
		f0_local0( LUI.PrototypeLayer.ModalKillstreakList )
		f8_arg0:ReleaseButtonHold()
	end
end

LUI.PrototypeLayer.GetInstance = function ( f7_arg0 )
	local f7_local0 = Engine[0xEE6F69FEA944B13]()
	return f7_local0.prototypeLayer
end

LUI.PrototypeLayer.init = function ( f6_arg0, f6_arg1 )
	f6_arg0._controllerIndex = f6_arg1.controllerIndex
	f6_arg0._buttonTapThreshold = Engine[0x71064756040882C]()
	f6_arg0.CheckIfButtonWasHeld = f0_local0
	f6_arg0.ReleaseButtonHold = f0_local0
	LUI.PrototypeLayer.super.init( f6_arg0 )
	f6_arg0.id = "PrototypeLayer"
end

LUI.PrototypeLayer.InitLayer = function ( f5_arg0 )
	
end

LUI.PrototypeLayer.ShouldBeVisible = function ( f4_arg0 )
	return Engine[0x2DA54CF5D6B7F02]()
end

LUI.PrototypeLayer.ClearLayer = function ( f3_arg0, f3_arg1 )
	local f3_local0 = f3_arg0:getParent()
	LUI.UIRoot.SetLuiLayerKeycatch( f3_arg0, f3_arg0._controllerIndex, false )
	LUI.UIRoot.SetLuiLayerKeycatch( LUI.PrototypeLayer.ModalKillstreakList, f3_arg0._controllerIndex, false )
	f3_arg0:closeChildren()
end

LUI.PrototypeLayer.TrapsInput = function ( f2_arg0, f2_arg1 )
	if LUI.PrototypeLayer.WeaponInspectStatsHUD and Dvar[0x9E5BE3B4BBA4E0E]( 0x10F5608A44E15A1 ) then
		local f2_local0
		if f2_arg1.button ~= "left" and f2_arg1.button ~= "right" and f2_arg1.button ~= "down" and f2_arg1.button ~= "up" then
			f2_local0 = false
		else
			f2_local0 = true
		end
		local f2_local1
		if f2_arg1.button ~= "rs_left" and f2_arg1.button ~= "rs_right" and f2_arg1.button ~= "rs_down" and f2_arg1.button ~= "rs_up" then
			f2_local1 = false
		else
			f2_local1 = true
		end
		local f2_local2 = LUI.PrototypeLayer
		local f2_local3
		if f2_arg1.name == "gamepad_button" and f2_arg1.qualifier == "dpad" and f2_arg1.button == "left" then
			f2_local3 = f2_arg1.down
		else
			f2_local3 = false
		end
		f2_local2.openWeaponInspectStats = f2_local3
		f2_local2 = LUI.PrototypeLayer
		if f2_arg1.name == "gamepad_button" and f2_arg1.qualifier ~= "dpad" and not f2_local0 and not f2_local1 then
			f2_local3 = f2_arg1.down
		else
			f2_local3 = false
		end
		f2_local2.closeWeaponInspectStats = f2_local3
		if LUI.PrototypeLayer.closeWeaponInspectStats and LUI.PrototypeLayer.isWeaponInspectOpen then
			ACTIONS.AnimateSequence( LUI.PrototypeLayer.WeaponInspectStatsHUD, "Hide" )
			LUI.PrototypeLayer.isWeaponInspectOpen = false
			if LUI.MPHUD_T10.HudScreenWidget ~= nil then
				LUI.MPHUD_T10.HudScreenWidget.WeaponStatusInfo:SetAlpha( 1, 100 )
				LUI.MPHUD_T10.HudScreenWidget.StreakList:SetAlpha( 1, 100 )
				LUI.MPHUD_T10.HudScreenWidget.Minimap:SetAlpha( 1, 100 )
				LUI.MPHUD_T10.HudScreenWidget.MatchStatusScores:SetAlpha( 1, 100 )
			end
			LUI.PrototypeLayer.weaponInspectTimer = 0
		end
	end
	if LUI.PrototypeLayer.ModalKillstreakList and STREAK.UsingModalStreakPrototype() then
		if f2_arg1.down then
			if f2_arg1.button == "right" and f2_arg1.qualifier == "dpad" then
				f2_arg0._buttonDownStartTime = Engine[0x6991337AE950F99]()
				f2_arg0._lastUseButton = "killstreak"
			end
			if f2_arg1.button == "primary" and LUI.PrototypeLayer.ModalKillstreakList:IsInUse() and LUI.PrototypeLayer.ModalKillstreakList:GetFocusedItemIndex() then
				local f2_local0 = LUI.PrototypeLayer.ModalKillstreakList:GetFocusedItemModel()
				f2_local0 = f2_local0[0x2BFC2BDEE3D2DA6]:GetModel( f2_arg0._controllerIndex )
				if f2_local0[0x4E26318FAAA79F7]( f2_local0 ) then
					LUI.PrototypeLayer.ModalKillstreakList:UseSelectedKillstreak()
					LUI.PrototypeLayer.ModalKillstreakList:GetNextAvailableItem()
					return 
				end
			end
			if f2_arg1.button == "secondary" and LUI.PrototypeLayer.ModalKillstreakList:IsInUse() then
				f0_local0( LUI.PrototypeLayer.ModalKillstreakList )
				return 
			elseif f2_arg1.button == "rs_up" and LUI.PrototypeLayer.ModalKillstreakList:IsInUse() then
				LUI.PrototypeLayer.ModalKillstreakList:GetPreviousAvailableItem()
				return 
			elseif not (f2_arg1.button ~= "down" or f2_arg1.qualifier ~= "dpad") or LUI.PrototypeLayer.ModalKillstreakList:IsInUse() and f2_arg1.button == "rs_down" then
				LUI.PrototypeLayer.ModalKillstreakList:GetNextAvailableItem()
				return 
			end
		elseif f2_arg1.down == false then
			if f2_arg1.button == "right" and f2_arg1.qualifier == "dpad" and LUI.PrototypeLayer.ModalKillstreakList:GetFocusedItemIndex() then
				local f2_local0 = LUI.PrototypeLayer.ModalKillstreakList:GetFocusedItemModel()
				f2_local0 = f2_local0[0x2BFC2BDEE3D2DA6]:GetModel( f2_arg0._controllerIndex )
				if f2_local0[0x4E26318FAAA79F7]( f2_local0 ) then
					if f2_arg0._buttonDownStartTime and f2_arg0._buttonDownStartTime + f2_arg0._buttonTapThreshold > Engine[0x6991337AE950F99]() then
						LUI.PrototypeLayer.ModalKillstreakList:UseSelectedKillstreak()
						LUI.PrototypeLayer.ModalKillstreakList:GetNextAvailableItem()
					elseif f2_arg0._buttonDownStartTime and f2_arg0._buttonDownStartTime + f2_arg0._buttonTapThreshold <= Engine[0x6991337AE950F99]() then
						return 
					end
				end
			end
			f2_arg0:ReleaseButtonHold()
		end
	end
end

LUI.PrototypeLayer.Frame = function ( f1_arg0 )
	if STREAK.UsingModalStreakPrototype() and (f1_arg0._lastUsedBind == "actionslot4" or f1_arg0._lastUseButton == "killstreak") then
		f1_arg0:CheckIfButtonWasHeld()
	end
end

