-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
module( ..., package.seeall )
local f0_local0 = 100
local f0_local1 = function ( f19_arg0, f19_arg1 )
	f19_arg0._parentMap = f19_arg1
end

local f0_local2 = function ( f18_arg0, f18_arg1 )
	local f18_local0 = MP.GetUnpackedPayloadPercentData( f18_arg1 )
	local f18_local1
	if f18_arg0 == MP.PAYLOAD_PATH_ID.PATH_A then
		f18_local1 = f18_local0.pathAPercentComplete
		if not f18_local1 then
		
		else
			return f18_local1 == 10000
		end
	end
	f18_local1 = f18_local0.pathBPercentComplete
end

local f0_local3 = function ( f17_arg0, f17_arg1, f17_arg2 )
	local f17_local0 = MP.GetUnpackedPayloadGlobalData( f17_arg0._controllerIndex )
	local f17_local1 = f17_arg1._id
	local f17_local2 = MP.PAYLOAD_PATH_ID.PATH_A
	f17_arg1.teammatesOnPath:setText( ToUpperCase( Engine.CBBHFCGDIC( "BR_PAYLOAD/NUM_TEAMMATES_ON_PATH", REG18 and f17_local0.pathATeamNum or f17_local0.pathBTeamNum ) ) )
	if f17_arg0._curSpawnChoice == f17_arg1._name then
		f17_local2 = not f0_local0( f17_arg1._id, f17_arg0._controllerIndex )
		f17_arg1.prompt:setText( ToUpperCase(), Engine.CBBHFCGDIC( f17_arg0._spawnChoiceTable[f17_arg2].name .. "_PRESS", LUI.IsLastInputGamepad( f17_arg0._controllerIndex ) ) )
		local f17_local3 = f17_arg1
		local f17_local4 = f17_arg1.GainFocus
		local f17_local5 = f17_arg0._parentMap
		if f17_local5 then
			f17_local5 = f17_arg0._parentMap:IsPayloadSpawnChoiceShowing()
		end
		f17_local4( f17_local3, f17_local5, f17_local2 )
	else
		f17_arg1.prompt:setText( ToUpperCase( Engine.CBBHFCGDIC( f17_arg0._spawnChoiceTable[f17_arg2].name ) ) )
		f17_arg1:LoseFocus( f0_local0( f17_arg1._id, f17_arg0._controllerIndex ) )
	end
end

local f0_local4 = function ( f16_arg0, f16_arg1 )
	local f16_local0 = f16_arg1._id
	local f16_local1 = MP.PAYLOAD_PATH_ID.PATH_A
	f16_local1 = f16_arg0.SpawnChoiceGrid:GetElementAtPosition( REG8 and MP.PAYLOAD_PATH_ID.PATH_B or MP.PAYLOAD_PATH_ID.PATH_A, 0 )
	f16_arg0._curSpawnChoice = f16_local1._name
	f16_arg0.SpawnChoiceGrid:RefreshContent()
end

local f0_local5 = function ( f15_arg0 )
	if CONDITIONS.IsWZPayloadMini() then
		local f15_local0 = f15_arg0.SpawnChoiceGrid:GetElementAtPosition( 0, 0 )
		if not f0_local0( f15_local0._id, f15_arg0._controllerIndex ) then
			Engine.EBHIFJCGBH( "spawn_choice_path", f15_local0._id )
			return 
		end
	end
	local f15_local0 = MP.GetUnpackedPayloadClientData( f15_arg0._controllerIndex )
	local f15_local1 = f15_arg0.SpawnChoiceGrid:GetElementAtPosition( f15_local0.currentPlayerPath, 0 )
	local f15_local2 = f15_arg0.SpawnChoiceGrid:GetNumChildren()
	local f15_local3 = false
	for f15_local4 = 0, f15_local2 - 1, 1 do
		local f15_local7 = f15_arg0.SpawnChoiceGrid:GetElementAtPosition( f15_local4, 0 )
		if f15_arg0._curSpawnChoice == f15_local7._name and not f15_local3 then
			f15_local3 = true
			if f0_local0( f15_local7._id, f15_arg0._controllerIndex ) then
				f0_local0( f15_arg0, f15_local7 )
			end
			if f15_local7._name ~= f15_local1._name and not f0_local0( f15_local1._id, f15_arg0._controllerIndex ) then
				f0_local0( f15_arg0, f15_local7 )
			else
				f15_arg0.SpawnChoiceGrid:RefreshContent()
			end
		end
	end
end

local f0_local6 = function ( f4_arg0, f4_arg1, f4_arg2 )
	assert( f4_arg0.SpawnChoiceGrid )
	f4_arg0.ShowGrid = f0_local0
	f4_arg0.SetParentMap = f0_local0
	f4_arg0._controllerIndex = f4_arg1
	f4_arg0._spawnChoiceTable = {}
	f4_arg0._spawnChoiceTable[MP.PAYLOAD_PATH_ID.PATH_A] = {}
	f4_arg0._spawnChoiceTable[MP.PAYLOAD_PATH_ID.PATH_A].id = 0
	f4_arg0._spawnChoiceTable[MP.PAYLOAD_PATH_ID.PATH_A].name = "BR_PAYLOAD/PATH_A_SPAWN"
	f4_arg0._spawnChoiceTable[MP.PAYLOAD_PATH_ID.PATH_B] = {}
	f4_arg0._spawnChoiceTable[MP.PAYLOAD_PATH_ID.PATH_B].id = 1
	f4_arg0._spawnChoiceTable[MP.PAYLOAD_PATH_ID.PATH_B].name = "BR_PAYLOAD/PATH_B_SPAWN"
	f4_arg0.SpawnChoiceGrid:SetRefreshChild( function ( f14_arg0, f14_arg1, f14_arg2 )
		local f14_local0 = f4_arg0.SpawnChoiceGrid:GetContentIndex( f14_arg1, f14_arg2 )
		f14_arg0._name = f4_arg0._spawnChoiceTable[f14_local0].name
		f14_arg0._id = f4_arg0._spawnChoiceTable[f14_local0].id
		f4_arg0( f4_arg0, f14_arg0, f14_arg1 )
	end )
	f4_arg0.SpawnChoiceGrid:SetNumChildren( #f4_arg0._spawnChoiceTable + 1 )
	local f4_local0 = f4_arg0.SpawnChoiceGrid:GetElementAtPosition( 0, 0 )
	f4_arg0._curSpawnChoice = f4_local0._name
	f4_arg0.SpawnChoiceGrid:RefreshContent()
	f4_arg0:SubscribeToModel( DataSources.inGame.player.inKillCam:GetModel( f4_arg1 ), function ()
		if not DataModel.JJEHAEBDF( DataSources.inGame.player.inKillCam:GetModel( f4_arg0 ) ) then
			f4_arg0._killCamEndingTime = Game.CAIAFFIDE()
		end
	end )
	local f4_local1 = function ()
		local f12_local0 = "spawn_choice_path"
		local f12_local1 = f4_arg0.SpawnChoiceGrid:GetNumChildren()
		for f12_local2 = 0, f12_local1 - 1, 1 do
			local f12_local5 = f4_arg0.SpawnChoiceGrid:GetElementAtPosition( f12_local2, 0 )
			if f4_arg0._curSpawnChoice == f12_local5._name and not f4_arg0( f12_local5._id, f4_arg0._controllerIndex ) then
				Engine.EBHIFJCGBH( f12_local0, f12_local5._id )
				return 
			end
		end
	end
	
	local f4_local2 = function ( f11_arg0 )
		local f11_local0 = f4_arg0.SpawnChoiceGrid:GetNumChildren()
		local f11_local1
		if f11_arg0 then
			f11_local1 = 0
		else
			f11_local1 = f11_local0 - 1
		end
		local f11_local2 = f4_arg0.SpawnChoiceGrid:GetElementAtPosition( f11_local1, 0 )
		return f4_arg0._curSpawnChoice == f11_local2._name
	end
	
	local f4_local3 = function ( f10_arg0 )
		if f4_arg0( f10_arg0 ) then
			local f10_local0 = f4_arg0.SpawnChoiceGrid:GetNumChildren()
			for f10_local1 = 0, f10_local0 - 1, 1 do
				local f10_local4 = f4_arg0.SpawnChoiceGrid:GetElementAtPosition( f10_local1, 0 )
				if f4_arg0._curSpawnChoice == f10_local4._name and f4_arg0( f10_local4._id, f4_arg0 ) then
					f4_arg0( f4_arg0, f10_local4 )
				end
			end
			return 
		else
			local f10_local0
			if f10_arg0 then
				f10_local0 = 1
			else
				f10_local0 = 0
			end
			local f10_local1 = f4_arg0.SpawnChoiceGrid:GetElementAtPosition( f10_local0, 0 )
			local f10_local2
			if f10_arg0 then
				f10_local2 = f10_local0 - 1
				if not f10_local2 then
				
				else
					local f10_local3 = f4_arg0.SpawnChoiceGrid:GetElementAtPosition( f10_local2, 0 )
					if not f4_arg0( f10_local3._id, f4_arg0 ) then
						f4_arg0( f4_arg0, f10_local1 )
					end
				end
			end
			f10_local2 = f10_local0 + 1
		end
	end
	
	local f4_local4 = function ()
		f4_arg0( true )
	end
	
	local f4_local5 = function ()
		f4_arg0( false )
	end
	
	f4_arg0:addEventHandler( "gamepad_button", function ( f7_arg0, f7_arg1 )
		if not CONDITIONS.IsWZPayloadSpawnChoiceShowing( f4_arg0 ) then
			return 
		else
			local f7_local0
			if f7_arg1.qualifier ~= "keyboard" or f7_arg1.button ~= "gostand" and f7_arg1.button ~= "activate" then
				f7_local0 = false
			else
				f7_local0 = true
			end
		end
		local f7_local1
		if f7_arg1.button ~= "alt1" and f7_arg1.button ~= "primary" then
			f7_local1 = false
		else
			f7_local1 = true
		end
		local f7_local2 = f7_arg0._parentMap
		if f7_local2 then
			f7_local2 = f7_arg0._parentMap:IsPayloadSpawnChoiceShowing()
		end
		local f7_local3 = f4_arg0._killCamEndingTime + f4_arg0 < Game.CAIAFFIDE()
		if f7_arg1.button == "left" or f7_arg1.button == "move_left" then
			f4_arg0()
		elseif f7_arg1.button == "right" or f7_arg1.button == "move_right" then
			f4_arg0()
		elseif (f7_local1 or f7_local0) and f7_local2 and f7_local3 then
			f4_arg0()
		end
	end )
	f4_arg0:addEventHandler( "path_button_over", function ( f6_arg0, f6_arg1 )
		if not CONDITIONS.IsWZPayloadSpawnChoiceShowing( f4_arg0 ) then
			return 
		elseif f6_arg1.element._id == MP.PAYLOAD_PATH_ID.PATH_A then
			f4_arg0()
		else
			f4_arg0()
		end
	end )
	f4_arg0:addEventHandler( "path_button_clicked", function ( f5_arg0, f5_arg1 )
		if not CONDITIONS.IsWZPayloadSpawnChoiceShowing( f4_arg0 ) or f4_arg0( f5_arg1.element._id, f4_arg0 ) then
			return 
		end
		local f5_local0 = f5_arg0._parentMap
		if f5_local0 then
			f5_local0 = f5_arg0._parentMap:IsPayloadSpawnChoiceShowing()
		end
		if f5_local0 and f4_arg0._killCamEndingTime + f4_arg0 < Game.CAIAFFIDE() then
			f4_arg0()
		end
	end )
end

function WZPayloadSpawnChoiceGrid( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 880 * _1080p, 0, 65 * _1080p )
	self.id = "WZPayloadSpawnChoiceGrid"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local GradientR = nil
	
	GradientR = LUI.UIImage.new()
	GradientR.id = "GradientR"
	GradientR:SetRGBFromInt( 16750080, 0 )
	GradientR:SetAlpha( 0.45, 0 )
	GradientR:SetPixelGridEnabled( true )
	GradientR:SetPixelGridContrast( 0.5, 0 )
	GradientR:SetPixelGridBlockWidth( 2, 0 )
	GradientR:SetPixelGridBlockHeight( 2, 0 )
	GradientR:SetPixelGridGutterWidth( 1, 0 )
	GradientR:SetPixelGridGutterHeight( 1, 0 )
	GradientR:setImage( RegisterMaterial( "ui_mp_br_squad_widget_backer_gradient" ), 0 )
	GradientR:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -441, _1080p * -1, 0, _1080p * 66 )
	self:addElement( GradientR )
	self.GradientR = GradientR
	
	local GradientL = nil
	
	GradientL = LUI.UIImage.new()
	GradientL.id = "GradientL"
	GradientL:SetRGBFromInt( 16750080, 0 )
	GradientL:SetAlpha( 0.45, 0 )
	GradientL:SetZRotation( 180, 0 )
	GradientL:SetPixelGridEnabled( true )
	GradientL:SetPixelGridContrast( 0.5, 0 )
	GradientL:SetPixelGridBlockWidth( 2, 0 )
	GradientL:SetPixelGridBlockHeight( 2, 0 )
	GradientL:SetPixelGridGutterWidth( 1, 0 )
	GradientL:SetPixelGridGutterHeight( 1, 0 )
	GradientL:setImage( RegisterMaterial( "ui_mp_br_squad_widget_backer_gradient" ), 0 )
	GradientL:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 439, 0, _1080p * 66 )
	self:addElement( GradientL )
	self.GradientL = GradientL
	
	local SpawnChoiceGrid = nil
	
	SpawnChoiceGrid = LUI.UIGrid.new( {
		scrollingThresholdX = 1,
		buildArrowsLabel = false,
		maxVelocity = 5000,
		adjustSizeToContent = false,
		scrollingThresholdY = 1,
		wrapX = true,
		maxVisibleColumns = 2,
		maxVisibleRows = 1,
		wrapY = true,
		arrowsVerticalOffset = 0,
		springCoefficient = 400,
		controllerIndex = f1_local1,
		buildChild = function ()
			return MenuBuilder.BuildRegisteredType( "WZPayloadSpawnChoiceEntity", {
				controllerIndex = menu
			} )
		end,
		refreshChild = function ( f2_arg0, f2_arg1, f2_arg2 )
			
		end,
		spacingX = _1080p * -40,
		spacingY = _1080p * -40,
		columnWidth = _1080p * 350,
		rowHeight = _1080p * 65,
		horizontalAlignment = LUI.Alignment.Center,
		verticalAlignment = LUI.Alignment.Top
	} )
	SpawnChoiceGrid.id = "SpawnChoiceGrid"
	SpawnChoiceGrid:setUseStencil( false )
	SpawnChoiceGrid:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -350, _1080p * 350, 0, _1080p * 65 )
	self:addElement( SpawnChoiceGrid )
	self.SpawnChoiceGrid = SpawnChoiceGrid
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "WZPayloadSpawnChoiceGrid", WZPayloadSpawnChoiceGrid )
LockTable( _M )
