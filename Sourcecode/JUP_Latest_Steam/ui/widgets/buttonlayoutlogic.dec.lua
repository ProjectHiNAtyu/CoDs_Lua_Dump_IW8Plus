-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:02
local f0_local0 = "options.buttonLayout"
local f0_local1 = SWATCHES[0x3E789DB0A12E313][0xF046B6ADEBDABE2]
local f0_local2 = SWATCHES[0x91C92D7BD2A93C4][0xE24310977B6DEEB]
local f0_local3 = {
	[{DPAD_DOWN}] = "dPadDown",
	[{BUTTON_BACK}] = "select",
	[{BUTTON_START}] = "start",
	[{DPAD_UP}] = "dPadUp",
	[{BUTTON_RTRIG}] = "rightTrigger",
	[{BUTTON_RSHLDR}] = "rightShoulder",
	[{DPAD}] = "dPad",
	[{DPAD_LEFT}] = "dPadLeft",
	[{BUTTON_RSTICK}] = "rightStick",
	[{BUTTON_Y}] = "altTwo",
	[{BUTTON_LSHLDR}] = "leftShoulder",
	[{BUTTON_B}] = "secondary",
	[{BUTTON_LTRIG}] = "leftTrigger",
	[{DPAD_RIGHT}] = "dPadRight",
	[{BUTTON_A}] = "primary",
	[{BUTTON_X}] = "altOne",
	[{BUTTON_LSTICK}] = "leftStick"
}
local f0_local4 = {
	MENU/USE_EQUIPMENT = "OPTIONS/USE_EQUIPMENT",
	LUA_MENU_MP/PING_WHEEL = "OPTIONS/SWITCH_EQUIPMENT",
	MENU/THROW_SPECIAL_GRENADE = "LUA_MENU_MP/PING_WHEEL"
}
local f0_local5 = {
	MENU/USE_EQUIPMENT = "OPTIONS/USE_EQUIPMENT",
	MENU/THROW_SPECIAL_GRENADE = "OPTIONS/SWITCH_EQUIPMENT"
}
local f0_local6 = function ( f10_arg0, f10_arg1, f10_arg2 )
	if f10_arg2.gameMode or not CONDITIONS.IsSingleplayer() then
		local f10_local0 = f10_arg2.gameMode == BINDING.GAME_MODE.SP
	end
	local f10_local1 = f10_arg0.name
	local f10_local2 = f10_arg0.leftTrigger
	local f10_local3 = f10_arg0.leftShoulder
	local f10_local4 = f10_arg0.rightTrigger
	local f10_local5 = f10_arg0.rightShoulder
	local f10_local6 = f10_arg0.cfg
	if f10_arg1 then
		local f10_local7 = f10_local2
		f10_local2 = f10_local3
		f10_local3 = f10_local7
		f10_local7 = f10_local4
		f10_local4 = f10_local5
		f10_local5 = f10_local7
		f10_local1 = f10_local1 .. "_alt"
		f10_local6 = f10_local6 .. "_alt"
	end
	return {
		cfg = f10_local6,
		layoutName = f10_local1,
		leftTrigger = f10_local2,
		leftShoulder = f10_local3,
		rightTrigger = f10_local4,
		rightShoulder = f10_local5
	}
end

local f0_local7 = function ( f9_arg0, f9_arg1 )
	for f9_local3, f9_local4 in ipairs( f9_arg0 ) do
		if f9_arg1 == f9_local4 then
			return f9_local3
		end
	end
end

LUI.AddButtonLayoutLogic = function ( f1_arg0, f1_arg1, f1_arg2 )
	WipeControllerModelsAtPath( f0_local0 )
	local f1_local0 = CSV.buttonLayouts
	local f1_local1 = OPTIONS.buttonLayoutStrings
	local f1_local2 = OPTIONS.GetButtonLayoutLabels
	local f1_local3 = CSV.ReadRow( f1_local0, StringTable[0x8073B436CDE1BF]( f1_local0.file, f1_local0.cols.cfg, "buttons_default" ) )
	local f1_local4 = LUI.DataSourceInControllerModel.FindModel( f1_arg0, f1_arg1 )
	f1_arg0.tableData = {}
	local f1_local5 = function ( f6_arg0, f6_arg1, f6_arg2, f6_arg3 )
		local f6_local0 = StringTable[0x2DCF0973239E909]( CSV.stickLayouts.file, CSV.stickLayouts.cols.cfg, Engine[0x7B17D94988FD5D0]( "gpadSticksConfig", f6_arg2 ), CSV.stickLayouts.cols.swapStickButtons ) == "1"
		local f6_local1 = f1_arg0
		local f6_local2
		if f6_arg3.gameMode ~= BINDING.GAME_MODE.BR and f6_arg3.gameMode ~= BINDING.GAME_MODE.DMZ then
			f6_local2 = false
		else
			f6_local2 = true
		end
		f6_local1.isBR = f6_local2
		if f6_arg3.gameMode or not CONDITIONS.IsSingleplayer() then
			f6_local1 = f6_arg3.gameMode == CoD.PlayMode.SP
		end
		local f6_local3 = string.match( Engine[0x7B17D94988FD5D0]( "gpadButtonsConfig", f6_arg2 ), "_alt$" ) ~= nil
		local f6_local4 = Engine[0x7B17D94988FD5D0]( "bumperPingEnabled", f6_arg2 )
		local f6_local5 = Engine[0x80D47E015737857]( f6_arg2 )
		local f6_local6
		if f6_arg1 == 1 then
			f6_local6 = f6_local5
		else
			f6_local6 = false
		end
		local f6_local7 = f6_arg1
		if 1 < f6_local7 and f6_local5 then
			f6_local7 = f6_local7 - 1
		end
		local f6_local8 = CSV.ReadRow( f1_arg0, f6_local7 )
		local f6_local9 = f1_arg0 .. "." .. f6_arg1
		local f6_local10 = f6_arg3
		if not f6_arg0.tableData[f6_local9] then
			f6_arg0.tableData[f6_local9] = {}
		end
		local f6_local11 = f6_local8.leftStick
		local f6_local12 = f6_local8.rightStick
		local f6_local13 = function ( f8_arg0, f8_arg1, f8_arg2, f8_arg3 )
			if f8_arg0.tableData[f8_arg1][f8_arg2] then
				f8_arg0.tableData[f8_arg1][f8_arg2]:SetValue( f6_arg0, f8_arg3 )
			else
				f8_arg0.tableData[f8_arg1][f8_arg2] = LUI.DataSourceInControllerModel.new( f8_arg1 .. "." .. f8_arg2, f8_arg3 )
			end
		end
		
		local f6_local14 = f1_arg0( f6_local8, f6_local3, f6_local10 )
		if not f6_local6 then
			if f6_local0 then
				f6_local11 = f6_local8.rightStick
				f6_local12 = f6_local8.leftStick
			end
			local f6_local15 = function ( f7_arg0 )
				local f7_local0 = LUI.FlowManager.GetVisibleMenu()
				if f7_local0 and (f7_local0.id == "ButtonLayout" or f7_local0.id == "BRButtonLayout") then
					return nil
				else
					local f7_local1 = f6_arg0( f6_arg0, f6_arg0, f6_arg0 )
					if f6_arg0[f7_arg0] == (f6_arg0 and f6_arg0[f7_local1[f7_arg0]] or f7_local1[f7_arg0]) then
						return f6_arg0
					else
						return f6_arg0
					end
				end
			end
			
			for f6_local29, f6_local21 in pairs( f6_local8 ) do
				if f6_local29 ~= "index" then
					local f6_local19 = string.find( string.lower( f6_local29 ), "trigger" )
					if not f6_local19 then
						f6_local19 = string.find( string.lower( f6_local29 ), "shoulder" )
					end
					local f6_local20 = f6_local14[f6_local29]
					if not f6_local20 then
						f6_local21 = f6_local20
					else
						
					end
					if f6_local4 and f1_arg0[f6_local21] then
						f6_local21 = f1_arg0[f6_local21]
					end
					f6_local20 = f6_local13
					local f6_local22 = f6_arg0
					local f6_local23 = f6_local9
					local f6_local24 = f6_local29
					local f6_local25
					if f6_local29 == "cfg" and not f6_local21 then
						f6_local25 = f6_local21
					else
						f6_local25 = Engine[0xED84C33EC5F01EA]( f6_local21 )
					end
					f6_local20( f6_local22, f6_local23, f6_local24, f6_local25 )
					f6_local20 = f6_local13
					f6_local22 = f6_arg0
					f6_local23 = f6_local9
					f6_local24 = f6_local29 .. "Color"
					if not f6_local19 or not f6_local15( f6_local29 ) then
						local f6_local26 = f1_arg0[f6_local29]
						local f6_local27 = f1_arg0
						local f6_local28 = f1_arg0
					end
					f6_local20( f6_local22, f6_local23, f6_local24, f6_local26 and f6_local27 or f6_local28 )
				end
			end
		else
			local f6_local15 = {}
			local f6_local16 = OPTIONS.GetSettingListFromId( 0x6F85F4044F2A033 )
			local f6_local17
			if f6_local16 then
				f6_local17 = f6_local16
			else
				f6_local17 = OPTIONS.GetOptionsDataFromGeneratedFiles( f6_arg2, f6_local16 )
			end
			if f6_local17 then
				for f6_local19, f6_local20 in pairs( f6_local17 ) do
					if f6_local20.type == "GamepadSwapButton" then
						local f6_local30 = "BUTTON_SWAP"
						f6_local15[f1_arg0[Engine[0xA79C63520FCD69F]( f6_arg2, f6_local30, f6_local20.action, 0, Enum[0xBE2AEDCA764E49A][0xD15B33F9D01BDA8] )]] = f1_arg0[Engine[0x436F53E8B99D080]( f6_arg2, f6_local30, f6_local20.action, 0 )]
					end
				end
			end
			local f6_local18
			if f6_local15.leftShoulder == nil then
				f6_local18 = "leftShoulder"
			else
				f6_local18 = f6_local15.leftShoulder
			end
			f6_local15.leftShoulder = f6_local18
			if f6_local15.rightShoulder == nil then
				f6_local18 = "rightShoulder"
			else
				f6_local18 = f6_local15.rightShoulder
			end
			f6_local15.rightShoulder = f6_local18
			if f6_local15.leftTrigger == nil then
				f6_local18 = "leftTrigger"
			else
				f6_local18 = f6_local15.leftTrigger
			end
			f6_local15.leftTrigger = f6_local18
			if f6_local15.rightTrigger == nil then
				f6_local18 = "rightTrigger"
			else
				f6_local18 = f6_local15.rightTrigger
			end
			f6_local15.rightTrigger = f6_local18
			if f6_local15.dPadUp == nil then
				f6_local18 = "dPadUp"
			else
				f6_local18 = f6_local15.dPadUp
			end
			f6_local15.dPadUp = f6_local18
			f6_local13( f6_arg0, f6_local9, "cfg", f6_local14.cfg )
			f6_local13( f6_arg0, f6_local9, "name", Engine[0xED84C33EC5F01EA]( f6_local8.name ) )
			f6_local13( f6_arg0, f6_local9, "dPad", Engine[0xED84C33EC5F01EA]( f6_local8.dPad ) )
			f6_local18 = f6_local13
			local f6_local21 = f6_arg0
			local f6_local19 = f6_local9
			local f6_local20 = "dPadColor"
			local f6_local30 = f1_arg0.dPad
			local f6_local22 = f6_local8.dPad
			f6_local18( f6_local21, f6_local19, f6_local20, REG40 and f1_arg0 or f1_arg0 )
			f6_local13( f6_arg0, f6_local9, "start", Engine[0xED84C33EC5F01EA]( f6_local8.start ) )
			f6_local18 = f6_local13
			f6_local21 = f6_arg0
			f6_local19 = f6_local9
			f6_local20 = "startColor"
			f6_local30 = f1_arg0.start
			f6_local22 = f6_local8.start
			f6_local18( f6_local21, f6_local19, f6_local20, REG43 and f1_arg0 or f1_arg0 )
			f6_local13( f6_arg0, f6_local9, "select", Engine[0xED84C33EC5F01EA]( f6_local8.select ) )
			f6_local18 = f6_local13
			f6_local21 = f6_arg0
			f6_local19 = f6_local9
			f6_local20 = "selectColor"
			f6_local30 = f1_arg0.select
			f6_local22 = f6_local8.select
			f6_local18( f6_local21, f6_local19, f6_local20, REG46 and f1_arg0 or f1_arg0 )
			f6_local18 = f6_local13
			f6_local21 = f6_arg0
			f6_local19 = f6_local9
			f6_local20 = "dPadUpColor"
			f6_local30 = f1_arg0.dPadUp
			f6_local22 = f6_local8.dPadUp
			f6_local18( f6_local21, f6_local19, f6_local20, REG49 and f1_arg0 or f1_arg0 )
			for f6_local19, f6_local20 in pairs( f6_local15 ) do
				f6_local30 = f1_arg0[f6_local19]
				if f6_local4 and f1_arg0[f6_local30] then
					f6_local30 = f1_arg0[f6_local30]
				end
				f6_local13( f6_arg0, f6_local9, f6_local20, Engine[0xED84C33EC5F01EA]( f6_local30 ) )
				f6_local22 = f6_local13
				local f6_local24 = f6_arg0
				local f6_local25 = f6_local9
				local f6_local31 = f6_local20 .. "Color"
				local f6_local32
				if f6_local19 == f6_local20 then
					f6_local32 = f1_arg0
					if not f6_local32 then
					
					else
						f6_local22( f6_local24, f6_local25, f6_local31, f6_local32 )
					end
				end
				f6_local32 = f1_arg0
			end
		end
	end
	
	local f1_local6 = function ( f5_arg0, f5_arg1, f5_arg2, f5_arg3 )
		local f5_local0 = #f1_arg0( f5_arg2 )
		for f5_local1 = 0, f5_local0, 1 do
			f1_arg0( f5_arg0, f5_local1, f5_arg2, f1_arg0 )
		end
		if not f5_arg1 then
			f5_arg1 = OPTIONS_DATA.optionsDataList.button_layout.value( f5_arg2 )
		end
		local f5_local1 = f5_arg0.tableData[f1_arg0 .. "." .. f5_arg1 - 1]
		if f5_local1 then
			f5_arg0:SetDataSource( f5_local1, f5_arg2 )
			Engine[0x23F1D3C77CE5C6]( f5_local1.cfg:GetValue( f5_arg2 ), f5_arg2, false )
		end
		f5_arg0:SetAlpha( 1 )
	end
	
	local f1_local7 = function ( f4_arg0, f4_arg1, f4_arg2, f4_arg3 )
		f1_arg0:SetDataSource( f4_arg0.tableData[f1_arg0 .. "." .. f4_arg1 - 1], f4_arg2 )
		f4_arg0:SetAlpha( 1 )
	end
	
	f1_arg0:registerEventHandler( "buttonLayout_updated", function ( element, event )
		f1_arg0( element, event.index, event.controller, event.isBR )
	end )
	f1_arg0:registerEventHandler( "update_button_layout_visual", function ( element, event )
		f1_arg0( element, event.index, event.controller, event.isBR )
	end )
end

