-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
module( ..., package.seeall )
require( "ui.generated.widgets.frontend.weapons.loadout.loadoutbutton" )
local f0_local0 = function ( f8_arg0, f8_arg1, f8_arg2 )
	assert( f8_arg2.ref )
	local f8_local0 = function ()
		f8_arg0:dispatchEventToParent( {
			name = "preview_horn"
		} )
	end
	
	local f8_local1 = nil
	if not (not f8_arg2.isTrack or f8_arg2.lootID == 1) or not f8_arg2.isTrack then
		f8_local1 = {
			prompt = 0x21E44BE45534168,
			text = f8_arg2.isTrack and 0x77F77E94F53C52F or 0xAF8F29F99F8C8A9,
			callback = f8_local0
		}
	end
	local f8_local2 = {
		removeEquipBanner = true,
		imageSize = "Empty",
		buttonData = {},
		doubleAction = f8_local1
	}
	f8_arg0.LoadoutButton:SetHeaderText( Engine[0xED84C33EC5F01EA]( f8_arg2.name or "" ) )
	f8_arg0.LoadoutButton:SetPrimaryPromptText( 0xCA07A93FADF9E95 )
	f8_arg0.LoadoutButton:SetupButton( f8_local2 )
	f8_arg0.LoadoutButton:SetButtonDisabled( not f8_arg2.isUnlocked )
	f8_arg0.LoadoutButton:SetEquipped( f8_arg2.isSelected )
	local f8_local3 = f8_arg0.Favorite
	local f8_local4 = f8_local3
	f8_local3 = f8_local3.SetAlpha
	local f8_local5
	if f8_arg2.isFavorite then
		f8_local5 = 1
	else
		f8_local5 = 0
	end
	f8_local3( f8_local4, f8_local5 )
	f8_local3 = f8_arg0.FavoriteBacker
	f8_local4 = f8_local3
	f8_local3 = f8_local3.SetAlpha
	if f8_arg2.isFavorite then
		f8_local5 = 1
	else
		f8_local5 = 0
	end
	f8_local3( f8_local4, f8_local5 )
	f8_arg0._itemData = f8_arg2
end

function PostLoadFunc( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.UpdateLootButton = f0_local0
	f2_arg0:addEventHandler( "button_over", function ( f7_arg0, f7_arg1 )
		f7_arg0:dispatchEventToParent( {
			name = "loot_button_over",
			itemData = f2_arg0._itemData
		} )
	end )
	f2_arg0:addEventHandler( "button_over_disable", function ( f6_arg0, f6_arg1 )
		f6_arg0:dispatchEventToParent( {
			name = "loot_button_over",
			itemData = f2_arg0._itemData
		} )
	end )
	f2_arg0:registerEventHandler( "button_up", function ()
		f2_arg0._itemData.isNew = false
		if f2_arg0:GetCurrentMenu() then
			f2_arg0:dispatchEventToCurrentMenu( {
				name = "loot_button_up",
				itemData = f2_arg0._itemData
			} )
		end
	end )
	f2_arg0:addEventHandler( "button_disable", function ( f4_arg0, f4_arg1 )
		f4_arg0:dispatchEventToParent( {
			name = "loot_button_up",
			itemData = f2_arg0._itemData
		} )
	end )
	f2_arg0:addEventHandler( "button_action", function ( f3_arg0, f3_arg1 )
		f3_arg0:dispatchEventToParent( {
			name = "loot_button_action",
			itemData = f2_arg0._itemData
		} )
	end )
end

function VehicleLootButton( menu, controller )
	local self = LUI.UIButton.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 336 * _1080p, 0, 64 * _1080p )
	self.id = "VehicleLootButton"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local LoadoutButton = nil
	
	LoadoutButton = MenuBuilder.BuildRegisteredType( "LoadoutButton", {
		controllerIndex = f1_local1
	} )
	LoadoutButton.id = "LoadoutButton"
	LoadoutButton:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 336, 0, _1080p * 64 )
	self:addElement( LoadoutButton )
	self.LoadoutButton = LoadoutButton
	
	local Favorite = nil
	
	Favorite = LUI.UIImage.new()
	Favorite.id = "Favorite"
	Favorite:SetRGBFromTable( SWATCHES.IW9StyleGuide.styleGuideCool01, 0 )
	Favorite:SetAlpha( 0, 0 )
	Favorite:setImage( RegisterMaterial( 0xBB035355B6B1B21 ), 0 )
	Favorite:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -26, _1080p * -3, _1080p * 2, _1080p * 25 )
	self:addElement( Favorite )
	self.Favorite = Favorite
	
	local FavoriteBacker = nil
	
	FavoriteBacker = LUI.UIImage.new()
	FavoriteBacker.id = "FavoriteBacker"
	FavoriteBacker:SetRGBFromTable( SWATCHES.IW9StyleGuide.styleGuideCool05, 0 )
	FavoriteBacker:SetAlpha( 0, 0 )
	FavoriteBacker:setImage( RegisterMaterial( 0x22C836C5BA66C08 ), 0 )
	FavoriteBacker:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -29, 0, 0, _1080p * 29 )
	self:addElement( FavoriteBacker )
	self.FavoriteBacker = FavoriteBacker
	
	PostLoadFunc( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "VehicleLootButton", VehicleLootButton )
LockTable( _M )
