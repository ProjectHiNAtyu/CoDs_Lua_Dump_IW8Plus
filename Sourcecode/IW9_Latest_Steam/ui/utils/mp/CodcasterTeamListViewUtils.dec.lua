-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
CodcasterTeamListViewUtils = CodcasterTeamListViewUtils or {}
CodcasterTeamListViewUtils.UpdateHeaderInfo = function ( f15_arg0, f15_arg1, f15_arg2 )
	local f15_local0 = f15_arg0:GetDataSource()
	if not f15_local0 then
		return nil
	end
	local f15_local1 = f15_local0.count:GetValue( f15_arg1 )
	if f15_local1 <= 0 then
		f15_local1 = CODCASTER.MAX_PORTRAIT_DATA_VIEW_LIST_COUNT
	end
	local f15_local2
	if not f15_arg2 or f15_arg2:GetValue( f15_arg1 ) ~= CODCASTER.TEAM_LIST_TYPE.PLAYER_LIST then
		f15_local2 = not f15_arg2
	else
		f15_local2 = true
	end
	local f15_local3 = nil
	if f15_local2 then
		f15_local3 = f15_local0.name:GetValue( f15_arg1 )
	elseif f15_local1 <= 3 then
		f15_local3 = f15_local0.shortName:GetValue( f15_arg1 )
	else
		f15_local3 = f15_local0.name:GetValue( f15_arg1 )
	end
	return f15_local1, f15_local2, f15_local3
end

CodcasterTeamListViewUtils.InitHeader = function ( f8_arg0, f8_arg1, f8_arg2, f8_arg3 )
	local f8_local0, f8_local1, f8_local2, f8_local3 = f8_arg0:getLocalRect()
	f8_arg0._right = f8_local2
	f8_arg0._left = f8_local0
	local f8_local4 = function ( f14_arg0, f14_arg1 )
		if not f14_arg0.element then
			return 
		else
			f8_arg0.TeamListHeader:UpdateTeamHeaderInfo( CodcasterTeamListViewUtils.UpdateHeaderInfo( f8_arg0, f14_arg0.controllerIndex, f8_arg0 ) )
		end
	end
	
	f8_arg0:SubscribeToModelThroughElement( f8_arg0, "count", PackedFunctionWrapper( {
		element = f8_arg0,
		controllerIndex = f8_arg1
	}, f8_local4 ) )
	f8_arg0:SubscribeToModelThroughElement( f8_arg0, "name", PackedFunctionWrapper( {
		element = f8_arg0,
		controllerIndex = f8_arg1
	}, f8_local4 ) )
	f8_arg0:SubscribeToModelThroughElement( f8_arg0, "logoTeamHeader", function ( f13_arg0 )
		local f13_local0 = DataModel[0x614D394F6F9A18D]( f13_arg0 )
		if f13_local0 then
			f8_arg0.TeamListHeader:SetTeamLogo( f13_local0 )
		end
	end )
	f8_arg0:SubscribeToModelThroughElement( f8_arg0, "teamHeaderOffset", function ( f12_arg0 )
		local f12_local0 = DataModel[0x614D394F6F9A18D]( f12_arg0 )
		if f12_local0 then
			f8_arg0.TeamListHeader:ApplyLogoOffset( f12_local0 )
		end
	end )
	f8_arg0:SubscribeToModelThroughElement( f8_arg0, "colors.primary", function ( f11_arg0 )
		local f11_local0 = DataModel[0x614D394F6F9A18D]( f11_arg0 )
		if f11_local0 then
			f8_arg0.TeamListHeader:SetTeamHeaderColorBG( f11_local0 )
		end
	end )
	f8_arg0:SubscribeToModelThroughElement( f8_arg0, "colors.secondary", function ( f10_arg0 )
		local f10_local0 = DataModel[0x614D394F6F9A18D]( f10_arg0 )
		if f10_local0 then
			f8_arg0.TeamListHeader:SetSecondaryColor( f10_local0, EsportsConditions.CanColorTeamLogo( f8_arg0 ) )
		end
	end )
	f8_arg0:SubscribeToModelThroughElement( f8_arg0, "isFirst", function ( f9_arg0 )
		f8_arg0.TeamListHeader:SetAnimateSequence( DataModel[0x614D394F6F9A18D]( f9_arg0 ) )
	end )
	f8_arg0.TeamListHeader:SetupHandler( f8_arg2, f8_arg1, {
		dataSources = {
			teamCount = f8_arg3.count,
			countdownTime = DataSources.inGame.MP.match.countdownTime,
			matchInProgress = DataSources.inGame.MP.isMatchInProgress,
			postGameState = DataSources.inGame.MP.match.postGameState,
			isFirst = f8_arg3.isFirst
		},
		events = {
			"codcaster_hidelayer" .. CODCASTER.EVENT_TYPES.SETTING_CHANGED,
			"codcaster_dataview" .. CODCASTER.EVENT_TYPES.SETTING_CHANGED
		}
	} )
end

CodcasterTeamListViewUtils.SetupTeamListElement = function ( f2_arg0, f2_arg1, f2_arg2, f2_arg3, f2_arg4 )
	f2_arg0:SubscribeToModel( f2_arg2.isFirst:GetModel( f2_arg1 ), function ( f7_arg0 )
		local f7_local0 = DataModel[0x614D394F6F9A18D]( f7_arg0 )
		local f7_local1 = f2_arg0
		local f7_local2
		if f7_local0 then
			f7_local2 = Teams.allies
			if not f7_local2 then
			
			else
				f7_local1.teamId = f7_local2
				f7_local1 = ACTIONS.AnimateSequence
				local f7_local3 = f2_arg0
				local f7_local4
				if f7_local0 then
					f7_local4 = "LeftTeam"
				else
					f7_local4 = "RightTeam"
				end
				f7_local1( f7_local3, f7_local4 )
			end
		end
		f7_local2 = Teams.axis
	end )
	local f2_local0 = function ( f5_arg0 )
		local f5_local0 = f2_arg0.count:GetValue( f2_arg0 )
		local f5_local1 = f2_arg0.maxIndex:GetValue( f2_arg0 )
		if f5_local0 == 0 then
			f2_arg0:SetVisibility( LUI.Visibility.Hidden )
		else
			f2_arg0:SetVisibility( LUI.Visibility.Visible )
		end
		CODCASTER.RefreshPlayers( f2_arg0, f2_arg0, f2_arg0.teamId )
		for f5_local2 = 1, math.max( f5_local0, f5_local1 + 1 ), 1 do
			f2_arg0:SubscribeToModel( CODCASTER.playersDataSources[f2_arg0.teamId][f5_local2].isConnected.GetModel( REG7.isConnected, f2_arg0 ), function ( f6_arg0 )
				f5_arg0:RefreshContent()
			end, false )
		end
		if f2_arg0 then
			f2_arg0:SetNumRows( f5_local0 )
			f2_arg0:SetNumColumns( 1 )
		else
			f2_arg0:SetNumColumns( f5_local0 )
			f2_arg0:SetNumRows( 1 )
		end
		f2_arg0:RefreshContent()
	end
	
	f2_arg0:SubscribeToModel( f2_arg2.count:GetModel( f2_arg1 ), f2_local0 )
	f2_arg0:SubscribeToModel( f2_arg2.maxIndex:GetModel( f2_arg1 ), f2_local0 )
	f2_arg3:SetRefreshChild( function ( f4_arg0, f4_arg1, f4_arg2 )
		local f4_local0 = CODCASTER.GetConnectedPlayers( f2_arg0, f2_arg0.teamId )
		if f4_local0 then
			local f4_local1
			if f2_arg0 and not f4_arg2 then
				f4_local1 = f4_arg2
			else
				f4_local1 = f4_arg1
			end
			f4_arg0:SetDataSource( f4_local0[f4_local1], f2_arg0 )
		end
	end )
	
	local timer = LUI.UITimer.new( {
		interval = 20,
		event = "teamListUpdate"
	} )
	f2_arg0:registerEventHandler( "teamListUpdate", function ( element, event )
		local f3_local0 = element:getParent()
		if f3_local0.UpdateBannerWidth then
			f3_local0:UpdateBannerWidth( f2_arg0 )
		end
	end )
	f2_arg0:addElement( timer )
	f2_arg0.timer = timer
	
end

CodcasterTeamListViewUtils.UpdateAnimationPreResize = function ( f1_arg0, f1_arg1, f1_arg2, f1_arg3, f1_arg4 )
	local f1_local0 = "SmallSize"
	local f1_local1, f1_local2, f1_local3, f1_local4 = f1_arg0:getLocalRect()
	local f1_local5 = f1_arg2.isFirst:GetValue( f1_arg1 )
	local f1_local6 = f1_arg2.count:GetValue( f1_arg1 )
	if not f1_local6 then
		return 
	elseif f1_local6 <= 0 then
		f1_local6 = CODCASTER.MAX_PORTRAIT_DATA_VIEW_LIST_COUNT
	end
	local f1_local7
	if f1_arg4 then
		f1_local7 = CODCASTER.PLAYER_LIST_WIDTH
		if not f1_local7 then
		
		else
			if f1_local5 then
				f1_local1 = f1_local3 - f1_local7
			else
				f1_local3 = f1_local1 + f1_local7
			end
			if f1_arg3 then
				local f1_local8 = 0
			else
				local f1_local8 = RESIZE_ANIMATION_DURATION
			end
			f1_arg0:SetLeft( f1_local1 )
			f1_arg0:SetRight( f1_local3 )
		end
	end
	f1_local7 = f1_local6 * CODCASTER.PORTRAIT_WIDTH
end

