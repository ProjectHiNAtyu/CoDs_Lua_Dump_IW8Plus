-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
module( ..., package.seeall )
require( "ui.widgets.GenericExpanderExpandWidget" )
local f0_local0 = function ( f24_arg0, f24_arg1, f24_arg2 )
	assert( f24_arg1 )
	if f24_arg2 then
		if f24_arg1.ArrowButton:IsMouseInsideElement( f24_arg0 ) or f24_arg1.ExpandButton:IsMouseInsideElement( f24_arg0 ) then
			ACTIONS.AnimateSequenceIfItExists( f24_arg1, "ArrowOver" )
		else
			ACTIONS.AnimateSequenceIfItExists( f24_arg1, "ArrowActive" )
		end
		if f24_arg1:IsExpanded() then
			ACTIONS.AnimateSequenceIfItExists( f24_arg1, "ButtonOver" )
		end
	else
		ACTIONS.AnimateSequenceIfItExists( f24_arg1, "ArrowUp" )
		ACTIONS.AnimateSequenceIfItExists( f24_arg1.ExpandButton, "UnFocusedKBM" )
		if f24_arg1:IsExpanded() then
			ACTIONS.AnimateSequenceIfItExists( f24_arg1, "ButtonUp" )
		end
	end
end

local f0_local1 = function ( f14_arg0, f14_arg1, f14_arg2 )
	f14_arg0.ExpandButton:setActionSFX( nil )
	f14_arg0.expandSFX = CoD.SFX.DropdownOpen
	f14_arg0.collapseSFX = CoD.SFX.DropdownCollapse
	f14_arg0.ArrowButton:addEventHandler( "leftmouseup", function ( f23_arg0, f23_arg1 )
		f23_arg0:dispatchEventToParent( {
			name = "toggle_expander"
		} )
		if f14_arg0.IsExpanded and f14_arg0:IsExpanded() then
			ACTIONS.AnimateSequenceIfItExists( f14_arg0, "ButtonOver" )
		else
			ACTIONS.AnimateSequenceIfItExists( f14_arg0, "ButtonUp" )
		end
	end )
	f14_arg0.ArrowButton:addEventHandler( "mouseenter", function ( f22_arg0, f22_arg1 )
		if not f14_arg0.InnerWidget.isActive then
			f14_arg0:dispatchEventToParent( {
				name = "update_grid_list_focus_active",
				child = f14_arg0,
				focusType = FocusType.MouseOver
			} )
		end
		f14_arg0( f22_arg1.controller, f14_arg0, true )
		f14_arg0.ExpandButton:processEvent( {
			isArrowOver = true,
			name = "button_over"
		} )
		ACTIONS.AnimateSequenceIfItExists( f14_arg0.ExpandButton, "FocusedKBM" )
	end )
	f14_arg0.ArrowButton:addEventHandler( "mouseleave", function ( f21_arg0, f21_arg1 )
		if not f14_arg0.ExpandButton:IsMouseInsideElement( f14_arg0 ) then
			f14_arg0( f21_arg1.controller, f14_arg0, false )
			f14_arg0.ExpandButton:processEvent( {
				isArrowOver = false,
				name = "button_up"
			} )
			ACTIONS.AnimateSequenceIfItExists( f14_arg0.ExpandButton, "UnFocusedKBM" )
		else
			f14_arg0( f21_arg1.controller, f14_arg0, true )
		end
	end )
	f14_arg0:addEventHandler( "mouseleave", function ( f20_arg0, f20_arg1 )
		local f20_local0 = f20_arg0.ExpandButton
		if f20_local0 then
			f20_local0 = f20_arg0.ExpandButton.Background
		end
		if f20_local0 and f20_local0._lastState ~= "ButtonUp" then
			f20_local0._lastState = "ButtonUp"
			ACTIONS.AnimateSequence( f20_local0, "ButtonUp" )
			f20_arg0.ExpandButton._isFocused = false
		end
		f14_arg0( f20_arg1.controller, f20_arg0, false )
	end )
	f14_arg0.ExpandButton:addEventHandler( "button_over", function ( f19_arg0, f19_arg1 )
		if LUI.IsLastInputMouseNavigation( f14_arg0 ) and not f19_arg1.isArrowOver then
			f14_arg0( f14_arg0, f14_arg0, true )
		end
	end )
	f14_arg0.ExpandButton:addEventHandler( "button_up", function ( f18_arg0, f18_arg1 )
		if LUI.IsLastInputMouseNavigation( f14_arg0 ) then
			f14_arg0( f14_arg0, f14_arg0, f14_arg0.ArrowButton:IsMouseInsideElement( f14_arg0 ) )
		end
	end )
	f14_arg0:addEventHandler( "gain_focus", function ( f17_arg0, f17_arg1 )
		f17_arg0.ExpandButton:UpdatePrompt( f17_arg1.controllerIndex or f14_arg0, true )
		if not LUI.IsLastInputMouseNavigation( f17_arg1.controllerIndex or f14_arg0 ) then
			f14_arg0.ExpandButton:processEvent( {
				name = "button_over"
			} )
		end
	end )
	f14_arg0:addEventHandler( "lose_focus", function ( f16_arg0, f16_arg1 )
		f16_arg0.ExpandButton:UpdatePrompt( f16_arg1.controllerIndex or f14_arg0, false )
		if not LUI.IsLastInputMouseNavigation( f16_arg1.controllerIndex or f14_arg0 ) then
			f14_arg0.ExpandButton:processEvent( {
				name = "button_up"
			} )
		end
	end )
	if IsLanguageArabic() then
		ACTIONS.AnimateSequence( f14_arg0, "AR" )
	end
	f14_arg0:addAndCallEventHandler( "update_input_type", function ( f15_arg0, f15_arg1 )
		if LUI.IsLastInputMouseNavigation( f15_arg1.controllerIndex or f14_arg0 ) then
			ACTIONS.AnimateSequence( f15_arg0, "Mouse" )
			f15_arg0.ArrowButton:SetHandleMouse( true )
		else
			ACTIONS.AnimateSequence( f15_arg0, "Gamepad" )
			f15_arg0.ArrowButton:SetHandleMouse( false )
		end
	end )
end

function GenericExpander( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 370 * _1080p, 0, 88 * _1080p )
	self.id = "GenericExpander"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	self._sequenceLengths = self._sequenceLengths or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local DummyInnerWidget = nil
	
	DummyInnerWidget = LUI.UIImage.new()
	DummyInnerWidget.id = "DummyInnerWidget"
	DummyInnerWidget:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 50 )
	self:addElement( DummyInnerWidget )
	self.DummyInnerWidget = DummyInnerWidget
	
	local ExpandButton = nil
	
	ExpandButton = MenuBuilder.BuildRegisteredType( "GenericExpanderExpandWidget", {
		controllerIndex = f1_local1
	} )
	ExpandButton.id = "ExpandButton"
	ExpandButton.ExpandMe:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU/EXPANDER_ADVANCED" ), 0 )
	ExpandButton:SetAnchorsAndPosition( 0, 0, 1, 0, _1080p * 30, 0, _1080p * -28, 0 )
	self:addElement( ExpandButton )
	self.ExpandButton = ExpandButton
	
	local DummyChildrenContainer = nil
	
	DummyChildrenContainer = LUI.UIImage.new()
	DummyChildrenContainer.id = "DummyChildrenContainer"
	DummyChildrenContainer:SetRGBFromInt( 16711680, 0 )
	DummyChildrenContainer:SetAnchorsAndPosition( 0, 0, 0, 1, _1080p * 30, 0, _1080p * 59, _1080p * 59 )
	self:addElement( DummyChildrenContainer )
	self.DummyChildrenContainer = DummyChildrenContainer
	
	local ArrowButton = nil
	
	ArrowButton = LUI.UIImage.new()
	ArrowButton.id = "ArrowButton"
	ArrowButton:SetRGBFromTable( SWATCHES.highlight.vDefaultHighlight, 0 )
	ArrowButton:SetAlpha( 0, 0 )
	ArrowButton:setImage( RegisterMaterial( "v_ui_elmnt_tech_gradient_top_to_bottom" ), 0 )
	ArrowButton:SetAnchorsAndPosition( 0, 1, 0, 0, 0, _1080p * 30, _1080p * 60, 0 )
	self:addElement( ArrowButton )
	self.ArrowButton = ArrowButton
	
	local Arrow = nil
	
	Arrow = LUI.UIImage.new()
	Arrow.id = "Arrow"
	Arrow:SetAlpha( 0.5, 0 )
	Arrow:SetZRotation( -90, 0 )
	Arrow:setImage( RegisterMaterial( "v_ui_elmnt_tech_arrow_up" ), 0 )
	Arrow:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 2, _1080p * 28, _1080p * 60, _1080p * 86 )
	self:addElement( Arrow )
	self.Arrow = Arrow
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	self._sequenceLengths.DefaultSequence = 0
	local f1_local8 = nil
	ExpandButton:RegisterAnimationSequence( "AR", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Left
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -30
		}
	} )
	DummyChildrenContainer:RegisterAnimationSequence( "AR", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Left
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 60
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -30
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 60
		}
	} )
	ArrowButton:RegisterAnimationSequence( "AR", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Left_Anchor
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Right_Anchor
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Right
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -30
		}
	} )
	Arrow:RegisterAnimationSequence( "AR", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -25
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -5
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Left_Anchor
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Right_Anchor
		},
		{
			value = -38,
			duration = 0,
			property = TWEEN_PROPERTY.Z_Rotation
		}
	} )
	self._sequences.AR = function ()
		menu:AnimateSequence( "AR" )
		menu:AnimateSequence( "AR" )
		menu:AnimateSequence( "AR" )
		menu:AnimateSequence( "AR" )
	end
	
	self._sequenceLengths.AR = 0
	local f1_local9 = nil
	ArrowButton:RegisterAnimationSequence( "Gamepad", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	Arrow:RegisterAnimationSequence( "Gamepad", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.Gamepad = function ()
		menu:AnimateSequence( "Gamepad" )
		menu:AnimateSequence( "Gamepad" )
	end
	
	self._sequenceLengths.Gamepad = 0
	local f1_local10 = nil
	ArrowButton:RegisterAnimationSequence( "Mouse", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	Arrow:RegisterAnimationSequence( "Mouse", {
		{
			value = 5.29462817E-315,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.Mouse = function ()
		menu:AnimateSequence( "Mouse" )
		menu:AnimateSequence( "Mouse" )
	end
	
	self._sequenceLengths.Mouse = 0
	local f1_local11 = nil
	Arrow:RegisterAnimationSequence( "Expanded", {
		{
			value = 180,
			duration = 0,
			property = TWEEN_PROPERTY.Z_Rotation
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 74
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 100
		}
	} )
	self._sequences.Expanded = function ()
		menu:AnimateSequence( "Expanded" )
	end
	
	self._sequenceLengths.Expanded = 0
	local f1_local12 = nil
	Arrow:RegisterAnimationSequence( "Collapse", {
		{
			value = 4294967206,
			duration = 0,
			property = TWEEN_PROPERTY.Z_Rotation
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 63
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 83
		}
	} )
	self._sequences.Collapse = function ()
		menu:AnimateSequence( "Collapse" )
	end
	
	self._sequenceLengths.Collapse = 0
	local f1_local13 = nil
	Arrow:RegisterAnimationSequence( "ArrowOver", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.genericButton.textFocus
		}
	} )
	self._sequences.ArrowOver = function ()
		menu:AnimateSequence( "ArrowOver" )
	end
	
	self._sequenceLengths.ArrowOver = 0
	local f1_local14 = nil
	Arrow:RegisterAnimationSequence( "ArrowUp", {
		{
			value = 5.29462817E-315,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 16777215,
			duration = 0,
			property = TWEEN_PROPERTY.RGB
		}
	} )
	self._sequences.ArrowUp = function ()
		menu:AnimateSequence( "ArrowUp" )
	end
	
	self._sequenceLengths.ArrowUp = 0
	local f1_local15 = nil
	ArrowButton:RegisterAnimationSequence( "ButtonUp", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ButtonUp = function ()
		menu:AnimateSequence( "ButtonUp" )
	end
	
	self._sequenceLengths.ButtonUp = 0
	local f1_local16 = nil
	ArrowButton:RegisterAnimationSequence( "ButtonOver", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.highlight.vDefaultHighlight
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 59
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 30
		},
		{
			value = -2.353438278207885E-185,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * -1
		}
	} )
	self._sequences.ButtonOver = function ()
		menu:AnimateSequence( "ButtonOver" )
	end
	
	self._sequenceLengths.ButtonOver = 0
	local f1_local17 = nil
	Arrow:RegisterAnimationSequence( "ArrowActive", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 16777215,
			duration = 0,
			property = TWEEN_PROPERTY.RGB
		}
	} )
	self._sequences.ArrowActive = function ()
		menu:AnimateSequence( "ArrowActive" )
	end
	
	self._sequenceLengths.ArrowActive = 0
	local f1_local18 = nil
	Arrow:RegisterAnimationSequence( "CollapseAR", {
		{
			value = -38,
			duration = 0,
			property = TWEEN_PROPERTY.Z_Rotation
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 83
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 63
		}
	} )
	self._sequences.CollapseAR = function ()
		menu:AnimateSequence( "CollapseAR" )
	end
	
	self._sequenceLengths.CollapseAR = 0
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "GenericExpander", GenericExpander )
LockTable( _M )
