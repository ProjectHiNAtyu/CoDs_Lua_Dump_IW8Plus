-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 02-09-2025 10:42
module( ..., package.seeall )
local f0_local0 = "%02d"
local f0_local1 = 100
local f0_local2 = 24 * 3600
local f0_local3 = function ( f18_arg0, f18_arg1 )
	local f18_local0 = math.floor( f18_arg1 / f0_local0 % 30 )
	local f18_local1 = math.floor( f18_arg1 / f0_local0 % 24 )
	local f18_local2 = math.floor( f18_arg1 / 60 % 60 )
	local f18_local3 = f18_arg1 % 60
	f18_arg0.Days.Value:setText( string.format( f0_local0, f18_local0 ), 0 )
	f18_arg0.Hours.Value:setText( string.format( f0_local0, f18_local1 ), 0 )
	f18_arg0.Mins.Value:setText( string.format( f0_local0, f18_local2 ), 0 )
	f18_arg0.Secs.Value:setText( string.format( f0_local0, f18_local3 ), 0 )
end

local f0_local4 = function ( f17_arg0, f17_arg1 )
	local f17_local0 = MLG.GetGameBattleIntermissionTimeLeft()
	if f17_local0 ~= nil then
		return math.ceil( f17_local0 / 1000 ) - f17_arg1
	else
		return Engine.CCEJJCCDEG( f17_arg0 )
	end
end

local f0_local5 = function ( f15_arg0 )
	return function ()
		local f16_local0 = f15_arg0( Engine.BAHGDJFBEF( f15_arg0.targetEpochDate, GAMEBATTLES.GetNoshowTime() ), 0 )
		f15_arg0( f15_arg0, f16_local0 )
		if f16_local0 <= 0 then
			f15_arg0:dispatchEventToRoot( {
				dispatchChildren = true,
				name = "no_show_countdown_stop",
				immediate = not Lobby.DFFFFJHCEH()
			} )
			f15_arg0:StopCountdown()
		else
			f15_arg0.CountdownTween = f15_arg0:Wait( f15_arg0 )
			f15_arg0.CountdownTween.onComplete = f15_arg0:UpdateNoShowCountdown()
		end
	end
	
end

local f0_local6 = function ( f14_arg0 )
	f14_arg0:StopCountdown()
	ACTIONS.AnimateSequence( f14_arg0, "StartNoShowCountdown" )
	ACTIONS.AnimateSequence( f14_arg0, "NoShowCountdown" )
	local f14_local0 = f0_local0( f14_arg0 )
	f14_local0()
	f14_arg0.CountdownTweenRunning = true
end

local f0_local7 = function ( f12_arg0 )
	return function ()
		local f13_local0 = f12_arg0( f12_arg0.targetEpochDate, GAMEBATTLES.GetNoshowTime() )
		f12_arg0( f12_arg0, f13_local0 )
		if f13_local0 <= 0 then
			f12_arg0:StartNoShowCountdown()
		else
			f12_arg0.CountdownTween = f12_arg0:Wait( f12_arg0 )
			f12_arg0.CountdownTween.onComplete = f12_arg0:UpdateMatchCountdown()
		end
	end
	
end

local f0_local8 = function ( f11_arg0, f11_arg1 )
	f11_arg0.targetEpochDate = f11_arg1
	f11_arg0:StopCountdown()
	local f11_local0 = f0_local0( f11_arg0 )
	f11_local0()
	f11_arg0.CountdownTweenRunning = true
end

local f0_local9 = function ( f9_arg0 )
	return function ()
		local f10_local0 = f9_arg0( f9_arg0.intermissionEndTime, 0 )
		f9_arg0( f9_arg0, f10_local0 )
		if f10_local0 <= 0 then
			f9_arg0:dispatchEventToRoot( {
				dispatchChildren = true,
				name = "no_show_countdown_stop",
				immediate = not Lobby.DFFFFJHCEH()
			} )
			f9_arg0:StopCountdown()
		else
			f9_arg0.CountdownTween = f9_arg0:Wait( f9_arg0 )
			f9_arg0.CountdownTween.onComplete = f9_arg0:UpdateIntermissionCountdown()
		end
	end
	
end

local f0_local10 = function ( f8_arg0, f8_arg1 )
	ACTIONS.AnimateSequence( f8_arg0, "StartNoShowCountdown" )
	ACTIONS.AnimateSequence( f8_arg0, "NoShowCountdown" )
	if f8_arg1 and MLG.GetGameBattleIntermissionTimeLeft() == nil then
		Lobby.EBBJJFGGIH( true )
		MLG.StartGameBattleIntermission( GAMEBATTLES.GetIntermissionTime() )
	end
	f8_arg0.intermissionEndTime = Engine.BAHGDJFBEF( Engine.DCJHCAFIIA(), GAMEBATTLES.GetIntermissionTime() )
	local f8_local0 = f0_local0( f8_arg0 )
	f8_local0()
	f8_arg0.CountdownTweenRunning = true
end

local f0_local11 = function ( f6_arg0 )
	if f6_arg0.targetEpochDate then
		if f6_arg0.CountdownTweenRunning then
			f6_arg0.CountdownTween.onComplete = function ()
				
			end
			
		end
		f6_arg0.CountdownTweenRunning = false
	end
end

local f0_local12 = function ( f5_arg0, f5_arg1, f5_arg2 )
	f5_arg0.targetEpochDate = nil
	f5_arg0.intermissionEndTime = nil
	f5_arg0.StartCountdownToTargetEpochDate = f0_local0
	f5_arg0.StartNoShowCountdown = f0_local0
	f5_arg0.StopCountdown = f0_local0
	f5_arg0.UpdateMatchCountdown = f0_local0
	f5_arg0.UpdateNoShowCountdown = f0_local0
	f5_arg0.StartIntermissionCountdown = f0_local0
	f5_arg0.UpdateIntermissionCountdown = f0_local0
end

function GameBattlesCountdown( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 320 * _1080p, 0, 60 * _1080p )
	self.id = "GameBattlesCountdown"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local Secs = nil
	
	Secs = MenuBuilder.BuildRegisteredType( "GameBattlesCountdownElement", {
		controllerIndex = f1_local1
	} )
	Secs.id = "Secs"
	Secs.Title:setText( Engine.CBBHFCGDIC( "MLG_GAMEBATTLES/SECONDS_SHORT" ), 0 )
	Secs.Value:setText( "05", 0 )
	Secs:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 240, _1080p * 320, 0, _1080p * 60 )
	self:addElement( Secs )
	self.Secs = Secs
	
	local Mins = nil
	
	Mins = MenuBuilder.BuildRegisteredType( "GameBattlesCountdownElement", {
		controllerIndex = f1_local1
	} )
	Mins.id = "Mins"
	Mins.Title:setText( Engine.CBBHFCGDIC( "MLG_GAMEBATTLES/MINUTES_SHORT" ), 0 )
	Mins.Value:setText( "44", 0 )
	Mins:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 160, _1080p * 240, 0, _1080p * 60 )
	self:addElement( Mins )
	self.Mins = Mins
	
	local Hours = nil
	
	Hours = MenuBuilder.BuildRegisteredType( "GameBattlesCountdownElement", {
		controllerIndex = f1_local1
	} )
	Hours.id = "Hours"
	Hours.Title:setText( Engine.CBBHFCGDIC( "MLG_GAMEBATTLES/HOURS_SHORT" ), 0 )
	Hours.Value:setText( "07", 0 )
	Hours:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 80, _1080p * 160, 0, _1080p * 60 )
	self:addElement( Hours )
	self.Hours = Hours
	
	local Days = nil
	
	Days = MenuBuilder.BuildRegisteredType( "GameBattlesCountdownElement", {
		controllerIndex = f1_local1
	} )
	Days.id = "Days"
	Days.Title:setText( Engine.CBBHFCGDIC( "MLG_GAMEBATTLES/DAYS_SHORT" ), 0 )
	Days.Value:setText( "28", 0 )
	Days:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 80, 0, _1080p * 60 )
	self:addElement( Days )
	self.Days = Days
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	Secs:RegisterAnimationSequence( "NoShowCountdown", {
		{
			value = 16777215,
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			child = self.Secs.BackgroundHighlight
		},
		{
			duration = 500,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.HUD.inactive,
			easing = LUI.EASING.inQuadratic,
			child = self.Secs.BackgroundHighlight
		},
		{
			value = 16777215,
			duration = 500,
			property = TWEEN_PROPERTY.RGB,
			easing = LUI.EASING.outQuadratic,
			child = self.Secs.BackgroundHighlight
		}
	} )
	Mins:RegisterAnimationSequence( "NoShowCountdown", {
		{
			value = 16777215,
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			child = self.Mins.BackgroundHighlight
		},
		{
			duration = 500,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.HUD.inactive,
			easing = LUI.EASING.inQuadratic,
			child = self.Mins.BackgroundHighlight
		},
		{
			value = 16777215,
			duration = 500,
			property = TWEEN_PROPERTY.RGB,
			easing = LUI.EASING.outQuadratic,
			child = self.Mins.BackgroundHighlight
		}
	} )
	self._sequences.NoShowCountdown = function ()
		menu:AnimateLoop( "NoShowCountdown" )
		menu:AnimateLoop( "NoShowCountdown" )
	end
	
	Secs:RegisterAnimationSequence( "StartNoShowCountdown", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 160
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 240
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Top
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 80
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Left_Anchor
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Right_Anchor
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Top_Anchor
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Bottom_Anchor
		}
	} )
	Mins:RegisterAnimationSequence( "StartNoShowCountdown", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 80
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 160
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Top
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 80
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Left_Anchor
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Right_Anchor
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Top_Anchor
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Bottom_Anchor
		}
	} )
	Hours:RegisterAnimationSequence( "StartNoShowCountdown", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	Days:RegisterAnimationSequence( "StartNoShowCountdown", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.StartNoShowCountdown = function ()
		menu:AnimateSequence( "StartNoShowCountdown" )
		menu:AnimateSequence( "StartNoShowCountdown" )
		menu:AnimateSequence( "StartNoShowCountdown" )
		menu:AnimateSequence( "StartNoShowCountdown" )
	end
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "GameBattlesCountdown", GameBattlesCountdown )
LockTable( _M )
