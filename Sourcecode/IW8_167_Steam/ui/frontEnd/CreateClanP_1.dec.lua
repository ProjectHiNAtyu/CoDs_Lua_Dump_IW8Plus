-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 17-11-2025 01:21
module( ..., package.seeall )
local f0_local0 = 150
local f0_local1 = function ( f29_arg0 )
	local f29_local0 = not f29_arg0.ClanNameInput:IsPastFirstInteraction()
	local f29_local1 = not f29_arg0.ClanTagInput:IsPastFirstInteraction()
	local f29_local2 = false
	if f29_local0 and f29_local1 then
		local f29_local3 = f29_arg0.ClanNameInput.TextEdit:getText()
		local f29_local4 = CLANS.IsValidClanTag( f29_arg0._controllerIndex, f29_arg0.ClanTagInput.TextEdit:getText() )
		local f29_local5 = CLANS.IsValidClanName( f29_arg0._controllerIndex, f29_local3 )
		if f29_local4.valid and f29_local5.valid then
			f29_local2 = true
		end
		if not f29_local4.valid then
			CLANS.DispatchClanNotification( f29_arg0, Engine.CBBHFCGDIC( "CLANS/INVALID_CLAN_TAG" ), f29_local4.error )
		end
		if not f29_local5.valid then
			CLANS.DispatchClanNotification( f29_arg0, Engine.CBBHFCGDIC( "CLANS/INVALID_CLAN_NAME" ), f29_local5.error )
		end
	end
	return f29_local2
end

local f0_local2 = function ( f28_arg0 )
	if f28_arg0._ctNameDebounceTimer ~= nil then
		f28_arg0._ctNameDebounceTimer:closeTree()
		f28_arg0._ctNameDebounceTimer = nil
	end
end

local f0_local3 = function ( f26_arg0 )
	if f26_arg0._ctNameDebounceTimer ~= nil then
		f26_arg0._ctNameDebounceTimer:closeTree()
		f26_arg0._ctNameDebounceTimer = nil
	end
	f26_arg0._ctNameDebounceTimer = LUI.UITimer.new( {
		event = "ct_debounce_name_typing",
		interval = f0_local0
	} )
	f26_arg0._ctNameDebounceTimer.id = "ctNameDebounceTimer"
	f26_arg0:addElement( f26_arg0._ctNameDebounceTimer )
	f26_arg0:addAndCallEventHandler( "ct_debounce_name_typing", function ( f27_arg0, f27_arg1 )
		local f27_local0 = f26_arg0.ClanNameInput.TextEdit:getText()
		local f27_local1 = false
		local f27_local2 = ""
		if 0 < #f27_local0 then
			local f27_local3 = CLANS.IsValidClanName( f26_arg0._controllerIndex, f27_local0 )
			f27_local1 = f27_local3.valid
			f27_local2 = f27_local3.error
		else
			f27_local1 = true
		end
		if f27_local1 then
			ACTIONS.AnimateSequence( f26_arg0.ClanNameInput, "Valid" )
			f26_arg0.ErrorLabel:setText( "" )
		else
			ACTIONS.AnimateSequence( f26_arg0.ClanNameInput, "Error" )
			f26_arg0.ErrorLabel:setText( f27_local2 )
		end
	end )
end

local f0_local4 = function ( f20_arg0 )
	f20_arg0.ClanNameInput:SetupTextEdit( {
		_maxStringLength = CLANS.MAX_NAME_LENGTH,
		_defaultInputString = Engine.CBBHFCGDIC( "LUA_MENU/SAMPLE_CLAN_NAME" )
	} )
	f20_arg0.ClanNameInput.buttonActionCallbackFunc = function ()
		if Engine.HDGDBCJFG() or LUI.IsLastInputGamepad( f20_arg0._controllerIndex ) then
			f20_arg0.ClanNameInput:SetTextEditOff()
			local f24_local0 = OSK.CBJGJDGFC
			f24_local0( f20_arg0._controllerIndex, Engine.CBBHFCGDIC( "LUA_MENU/CLAN_NAME" ), "", CLANS.MAX_NAME_LENGTH, true, true, true, function ( f25_arg0, f25_arg1, f25_arg2 )
				if f25_arg1 then
					f24_local0.ClanNameInput.TextEdit:setTextEditText( f25_arg1 )
				end
				f24_local0.ClanNameInput:SetTextEditOff()
			end, CoD.KeyboardInputTypes.Normal )
		end
		f20_arg0( f20_arg0 )
	end
	
	f20_arg0.ClanNameInput.textEditCompleteCallbackFunc = function ( f22_arg0, f22_arg1 )
		if LUI.IsLastInputKeyboardMouse( f20_arg0._controllerIndex ) then
			f20_arg0.ClanNameInput:SetTextEditOff()
			f20_arg0( f20_arg0 )
			
		else
			return function ( f23_arg0, f23_arg1 )
				local f23_local0 = FocusType.MouseOver
				if Engine.HDGDBCJFG() or LUI.IsLastInputGamepad( f22_arg0._controllerIndex ) then
					f23_local0 = FocusType.Gamepad
				end
				local f23_local1 = f23_arg0:getParent()
				f23_local1:FocusNextElement( f23_arg0, "down", f23_local0, f23_arg1._qualifier, f22_arg0._controllerIndex )
			end
			
		end
	end
	
	f20_arg0.ClanNameInput.isTypingCallbackFunc = function ( f21_arg0, f21_arg1 )
		f20_arg0.ClanNameInput.TextEdit:setTextEditText( f21_arg1 )
	end
	
end

local f0_local5 = function ( f19_arg0 )
	if f19_arg0._ctTagDebounceTimer ~= nil then
		f19_arg0._ctTagDebounceTimer:closeTree()
		f19_arg0._ctTagDebounceTimer = nil
	end
end

local f0_local6 = function ( f17_arg0 )
	if f17_arg0._ctTagDebounceTimer ~= nil then
		f17_arg0._ctTagDebounceTimer:closeTree()
		f17_arg0._ctTagDebounceTimer = nil
	end
	f17_arg0._ctTagDebounceTimer = LUI.UITimer.new( {
		event = "ct_debounce_tag_typing",
		interval = f0_local0
	} )
	f17_arg0._ctTagDebounceTimer.id = "ctTagDebounceTimer"
	f17_arg0:addElement( f17_arg0._ctTagDebounceTimer )
	f17_arg0:addAndCallEventHandler( "ct_debounce_tag_typing", function ( f18_arg0, f18_arg1 )
		local f18_local0 = f17_arg0.ClanTagInput.TextEdit:getText()
		local f18_local1 = false
		local f18_local2 = ""
		if 0 < #f18_local0 then
			local f18_local3 = CLANS.IsValidClanTag( f17_arg0._controllerIndex, f18_local0 )
			f18_local1 = f18_local3.valid
			f18_local2 = f18_local3.error
		else
			f18_local1 = true
		end
		if f18_local1 then
			ACTIONS.AnimateSequence( f17_arg0.ClanTagInput, "Valid" )
			f17_arg0.ErrorLabel:setText( "" )
		else
			ACTIONS.AnimateSequence( f17_arg0.ClanTagInput, "Error" )
			f17_arg0.ErrorLabel:setText( f18_local2 )
		end
	end )
end

local f0_local7 = function ( f11_arg0 )
	f11_arg0.ClanTagInput:SetupTextEdit( {
		_maxStringLength = CLANS.MAX_TAG_LENGTH,
		_defaultInputString = Engine.CBBHFCGDIC( "LUA_MENU/SAMPLE_CLAN_TAG" )
	} )
	f11_arg0.ClanTagInput.buttonActionCallbackFunc = function ()
		if Engine.HDGDBCJFG() or LUI.IsLastInputGamepad( f11_arg0._controllerIndex ) then
			f11_arg0.ClanTagInput:SetTextEditOff()
			local f15_local0 = OSK.CBJGJDGFC
			f15_local0( f11_arg0._controllerIndex, Engine.CBBHFCGDIC( "LUA_MENU/CLAN_TAG" ), "", CLANS.MAX_TAG_LENGTH, true, true, true, function ( f16_arg0, f16_arg1, f16_arg2 )
				if f16_arg1 then
					f15_local0.ClanTagInput.TextEdit:setTextEditText( f16_arg1 )
				end
				f15_local0.ClanTagInput:SetTextEditOff()
			end, CoD.KeyboardInputTypes.Normal )
		end
		f11_arg0( f11_arg0 )
	end
	
	f11_arg0.ClanTagInput.textEditCompleteCallbackFunc = function ( f13_arg0, f13_arg1 )
		if LUI.IsLastInputKeyboardMouse( f11_arg0._controllerIndex ) then
			f11_arg0.ClanTagInput:SetTextEditOff()
			f11_arg0( f11_arg0 )
			
		else
			return function ( f14_arg0, f14_arg1 )
				local f14_local0 = FocusType.MouseOver
				if Engine.HDGDBCJFG() or LUI.IsLastInputGamepad( f13_arg0._controllerIndex ) then
					f14_local0 = FocusType.Gamepad
				end
				local f14_local1 = f14_arg0:getParent()
				f14_local1:FocusNextElement( f14_arg0, "down", f14_local0, f14_arg1._qualifier, f13_arg0._controllerIndex )
			end
			
		end
	end
	
	f11_arg0.ClanTagInput.isTypingCallbackFunc = function ( f12_arg0, f12_arg1 )
		f11_arg0.ClanTagInput.TextEdit:setTextEditText( f12_arg1 )
	end
	
end

local f0_local8 = function ( f10_arg0 )
	ACTIONS.LeaveMenu( f10_arg0 )
end

local f0_local9 = function ( f9_arg0 )
	if Engine.HDGDBCJFG() or LUI.IsLastInputGamepad( f9_arg0._controllerIndex ) then
		f9_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			side = "left",
			button_ref = "button_primary",
			priority = 2,
			helper_text = Engine.CBBHFCGDIC( "LUA_MENU/SELECT" )
		} )
	else
		f9_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
			button_ref = "button_primary"
		} )
	end
end

local f0_local10 = function ( f7_arg0 )
	local _bindButton = LUI.UIBindButton.new()
	_bindButton.id = "selfBindButton"
	f7_arg0:addElement( _bindButton )
	f7_arg0._bindButton = _bindButton
	
	f7_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_secondary",
		priority = 1,
		helper_text = Engine.CBBHFCGDIC( "LUA_MENU/BACK" )
	} )
	f7_arg0._bindButton:addEventHandler( "button_secondary", function ( f8_arg0, f8_arg1 )
		f7_arg0( f7_arg0 )
	end )
	f7_arg0:addAndCallEventHandler( "update_input_type", f7_arg0.UpdateInputType, {
		controllerIndex = f7_arg0._controllerIndex
	} )
end

local f0_local11 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0._controllerIndex = f2_arg1
	f2_arg0.UpdateInputType = f0_local0
	f2_arg0._submittedClanName = ""
	f2_arg0._submittedClanTag = ""
	f0_local0( f2_arg0 )
	f0_local0( f2_arg0 )
	f2_arg0.ContinueButton:registerEventHandler( "button_action", function ( element, event )
		if f2_arg0( f2_arg0 ) then
			local f5_local0 = f2_arg0.ClanNameInput.TextEdit:getText()
			local f5_local1 = f2_arg0.ClanTagInput.TextEdit:getText()
			f2_arg0._submittedClanName = f5_local0
			f2_arg0._submittedClanTag = f5_local1
			Clans2.CAECAECGBH( f2_arg0, f5_local1 )
			f2_arg0.tagValidationStarted = true
			local f5_local2 = f2_arg0:Wait( CLANS.CLAN_EVENT_WAIT_TIME )
			f5_local2.onComplete = function ()
				if element.tagValidationStarted then
					element.tagValidationStarted = false
					CLANS.DispatchClanNotification( element, Engine.CBBHFCGDIC( "LUA_MENU/CLAN_TAG_VALIDATION_FAILED" ), "" )
					DebugPrint( "Clan Tag ( " .. element .. " ) is already taken" )
				end
			end
			
		end
		LUI.FlowManager.RequestPopupMenu( f2_arg0, "PopupOK", true, event.controller, false, {
			message = Engine.CBBHFCGDIC( "CLANS/INVALID_CLAN_NAME_TAG" )
		} )
	end )
	ACTIONS.AnimateSequence( f2_arg0.ContinueButton, "CenterText" )
	f2_arg0:addEventHandler( CLANS.CLAN_EVENTS.CHECK_TAG_AVAILABILITY, function ( f4_arg0, f4_arg1 )
		if CONDITIONS.IsMenuInStack( "ClanTagUsedPopup" ) then
			return 
		elseif not f4_arg1.tagAvailable then
			LUI.FlowManager.RequestPopupMenu( f2_arg0, "ClanTagUsedPopup", true, f2_arg0, false, {
				clanTag = f2_arg0._submittedClanTag
			} )
		else
			LUI.FlowManager.RequestLeaveMenu( f2_arg0, false, true )
			LUI.FlowManager.RequestAddMenu( "CreateClanP_2", true, f2_arg0, false, {
				clanName = f2_arg0._submittedClanName,
				clanTag = f2_arg0._submittedClanTag
			}, false )
		end
		f2_arg0.tagValidationStarted = false
	end )
	f2_arg0:registerEventHandler( CLANS.CLAN_EVENTS.CLAN_TAG_FROM_POPUP, function ( element, event )
		f2_arg0.ClanTagInput:SetDefaultInputString( event.options.clanTag )
	end )
	f0_local0( f2_arg0 )
	f2_arg0.MenuTitle:SetTitle( Engine.CBBHFCGDIC( "CLANS/CREATE_A_CLAN" ) )
	ACTIONS.ScaleStretchAnchorFullscreen( f2_arg0.TabBacker )
	LAYOUT.AddAspectRatioFadeFrameWithOptions( f2_arg0, f2_arg1, {
		addScreenDarkener = true,
		addWorldBlur = true
	} )
end

function CreateClanP_1( menu, controller )
	local self = LUI.UIVerticalNavigator.new()
	self.id = "CreateClanP_1"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	self.HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	self.HelperBar.id = "HelperBar"
	self.HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
	self.HelperBar:setPriority( 10 )
	self:addElement( self.HelperBar )
	local f1_local2 = self
	local ChooseClanTagHeader = nil
	
	ChooseClanTagHeader = LUI.UIText.new()
	ChooseClanTagHeader.id = "ChooseClanTagHeader"
	ChooseClanTagHeader:setText( ToUpperCase( Engine.CBBHFCGDIC( "LUA_MENU/CHOOSE_CLAN_TAG" ) ), 0 )
	ChooseClanTagHeader:SetFont( FONTS.GetFont( FONTS.MainBold.File ) )
	ChooseClanTagHeader:SetAlignment( LUI.Alignment.Center )
	ChooseClanTagHeader:SetVerticalAlignment( LUI.Alignment.Center )
	ChooseClanTagHeader:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -250, _1080p * 250, _1080p * 257, _1080p * 307 )
	self:addElement( ChooseClanTagHeader )
	self.ChooseClanTagHeader = ChooseClanTagHeader
	
	local ClanTagDescription = nil
	
	ClanTagDescription = LUI.UIText.new()
	ClanTagDescription.id = "ClanTagDescription"
	ClanTagDescription:setText( Engine.CBBHFCGDIC( "LUA_MENU/CLAN_TAG_DESC" ), 0 )
	ClanTagDescription:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	ClanTagDescription:SetAlignment( LUI.Alignment.Center )
	ClanTagDescription:SetVerticalAlignment( LUI.Alignment.Center )
	ClanTagDescription:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -754, _1080p * 754, _1080p * 421, _1080p * 457 )
	self:addElement( ClanTagDescription )
	self.ClanTagDescription = ClanTagDescription
	
	local ClanNameLabel = nil
	
	ClanNameLabel = LUI.UIText.new()
	ClanNameLabel.id = "ClanNameLabel"
	ClanNameLabel:setText( ToUpperCase( Engine.CBBHFCGDIC( "LUA_MENU/CLAN_NAME" ) ), 0 )
	ClanNameLabel:SetFont( FONTS.GetFont( FONTS.MainBold.File ) )
	ClanNameLabel:SetAlignment( LUI.Alignment.Left )
	ClanNameLabel:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -383, _1080p * -200, _1080p * 598, _1080p * 634 )
	self:addElement( ClanNameLabel )
	self.ClanNameLabel = ClanNameLabel
	
	local ClanTagLabel = nil
	
	ClanTagLabel = LUI.UIText.new()
	ClanTagLabel.id = "ClanTagLabel"
	ClanTagLabel:setText( ToUpperCase( Engine.CBBHFCGDIC( "LUA_MENU/CLAN_TAG" ) ), 0 )
	ClanTagLabel:SetFont( FONTS.GetFont( FONTS.MainBold.File ) )
	ClanTagLabel:SetAlignment( LUI.Alignment.Left )
	ClanTagLabel:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -383, _1080p * -221, _1080p * 660, _1080p * 696 )
	self:addElement( ClanTagLabel )
	self.ClanTagLabel = ClanTagLabel
	
	local ClanNameInput = nil
	
	ClanNameInput = MenuBuilder.BuildRegisteredType( "ClanInput", {
		controllerIndex = f1_local1
	} )
	ClanNameInput.id = "ClanNameInput"
	ClanNameInput:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -200, _1080p * 200, _1080p * 598, _1080p * 634 )
	self:addElement( ClanNameInput )
	self.ClanNameInput = ClanNameInput
	
	local ClanTagInput = nil
	
	ClanTagInput = MenuBuilder.BuildRegisteredType( "ClanInput", {
		controllerIndex = f1_local1
	} )
	ClanTagInput.id = "ClanTagInput"
	ClanTagInput:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -200, _1080p * 200, _1080p * 660, _1080p * 696 )
	self:addElement( ClanTagInput )
	self.ClanTagInput = ClanTagInput
	
	local ContinueButton = nil
	
	ContinueButton = MenuBuilder.BuildRegisteredType( "MPMenuButton", {
		controllerIndex = f1_local1
	} )
	ContinueButton.id = "ContinueButton"
	ContinueButton.Text:setText( ToUpperCase( Engine.CBBHFCGDIC( "LUA_MENU/CONTINUE" ) ), 0 )
	ContinueButton.Description:setText( ToUpperCase( "" ), 0 )
	ContinueButton:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -200, _1080p * 200, _1080p * 774, _1080p * 814 )
	self:addElement( ContinueButton )
	self.ContinueButton = ContinueButton
	
	local TabBacker = nil
	
	TabBacker = MenuBuilder.BuildRegisteredType( "TabBacker", {
		controllerIndex = f1_local1
	} )
	TabBacker.id = "TabBacker"
	TabBacker:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 160 )
	self:addElement( TabBacker )
	self.TabBacker = TabBacker
	
	local MenuTitle = nil
	
	MenuTitle = MenuBuilder.BuildRegisteredType( "MenuTitle", {
		controllerIndex = f1_local1
	} )
	MenuTitle.id = "MenuTitle"
	MenuTitle.MenuTitle:setText( "PRIMARY WEAPON SELECT", 0 )
	MenuTitle.Line:SetLeft( 0, 0 )
	MenuTitle:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1024, 0, _1080p * 100 )
	self:addElement( MenuTitle )
	self.MenuTitle = MenuTitle
	
	local f1_local12 = nil
	if CONDITIONS.InFrontend() then
		f1_local12 = MenuBuilder.BuildRegisteredType( "LobbyMembersFooter", {
			controllerIndex = f1_local1
		} )
		f1_local12.id = "LobbyMembersFooter"
		f1_local12:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 150 )
		self:addElement( f1_local12 )
		self.LobbyMembersFooter = f1_local12
	end
	local f1_local13 = nil
	if CONDITIONS.IsUserSignedInDemonware( f1_local1 ) then
		f1_local13 = MenuBuilder.BuildRegisteredType( "MPPlayerDetails", {
			controllerIndex = f1_local1
		} )
		f1_local13.id = "MPPlayerDetails"
		f1_local13:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -596, _1080p * -96, _1080p * 54, _1080p * 114 )
		self:addElement( f1_local13 )
		self.MPPlayerDetails = f1_local13
	end
	local ErrorLabel = nil
	
	ErrorLabel = LUI.UIText.new()
	ErrorLabel.id = "ErrorLabel"
	ErrorLabel:SetRGBFromTable( SWATCHES.genericMenu.failed, 0 )
	ErrorLabel:setText( "", 0 )
	ErrorLabel:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	ErrorLabel:SetAlignment( LUI.Alignment.Center )
	ErrorLabel:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -250, _1080p * 250, _1080p * 727, _1080p * 745 )
	self:addElement( ErrorLabel )
	self.ErrorLabel = ErrorLabel
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "CreateClanP_1", CreateClanP_1 )
LockTable( _M )
