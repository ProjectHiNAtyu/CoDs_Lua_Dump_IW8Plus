-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
module( ..., package.seeall )
local f0_local0 = 600
local f0_local1 = 400 * _1080p
local f0_local2 = 328 * _1080p
local f0_local3 = 256 * _1080p
local f0_local4 = 20 * _1080p
local f0_local5 = 70 * _1080p
local f0_local6 = 3000
local f0_local7 = function ( f67_arg0, f67_arg1 )
	f67_arg0.BillboardArrows:SetAlpha( f67_arg1 )
end

local f0_local8 = function ( f66_arg0, f66_arg1 )
	local f66_local0 = LUI.FlowManager.GetScopedData( f66_arg0 )
	local f66_local1 = f66_local0._selectedColumn or 1
	if f66_local0.previewBundleID then
		if STORE.IsBundleOwned( f66_arg0._controllerIndex, tonumber( f66_local0.previewBundleID ) ) then
			f66_local1 = f66_arg1
		end
		f66_local0.previewBundleID = nil
	end
	f66_arg0.BillboardGrid:SetNumColumns( f66_arg1 + 2 )
	f66_arg0.BillboardGrid:RefreshContent()
	f66_arg0.BillboardGrid:SetTargetColumn( f66_local1, false, true )
	local f66_local2 = LUI.IsLastInputKeyboardMouse( f66_arg0._controllerIndex )
	if 1 < f66_arg1 then
		f66_arg0.PipsWithNavigation.Pips:Resize( f66_arg1 )
		f66_arg0.PipsWithNavigation.Pips:UpdateChildren( f66_local1 - 1, 0 )
		f66_arg0.PipsWithNavigation:SetAlpha( 1 )
		f66_arg0.BillboardFocusArea:SetArrowsState( f66_local2 )
		if not f66_local2 then
			f0_local0( f66_arg0, 1 )
		end
	else
		f66_arg0.PipsWithNavigation:SetAlpha( 0 )
		f66_arg0.BillboardFocusArea:SetArrowsState( false )
		if not f66_local2 then
			f0_local0( f66_arg0, 0 )
		end
	end
	f66_arg0.BillboardGrid._selectedColumn = f66_local1
end

local f0_local9 = function ( f65_arg0 )
	if f65_arg0._storeEmpty then
		if f65_arg0._lowestAvailableTime ~= "9999999999" and f65_arg0._lowestTimeDvar ~= "" then
			local f65_local0, f65_local1, f65_local2 = STORE.GetCategoryTimeLeft( f65_arg0._lowestTimeDvar )
			local f65_local3 = Engine.CBBHFCGDIC( "LUA_MENU/STORE_EMPTY", f65_local1 )
			ACTIONS.AnimateSequence( f65_arg0.StoreEmpty, "Big" )
			f65_arg0.StoreEmpty:SetupEventBanner( f65_local3, 15 )
		end
	else
		f65_arg0.StoreEmpty:SetAlpha( 0 )
	end
end

local f0_local10 = function ( f64_arg0 )
	f64_arg0._storeEmpty = true
	f64_arg0._lowestAvailableTime = "9999999999"
	f64_arg0._lowestTimeDvar = ""
	for f64_local0 = 1, #f64_arg0._allCategoryData, 1 do
		local f64_local3 = f64_arg0._allCategoryData[f64_local0]
		if f64_local3.timerPubVar then
			local f64_local4 = Dvar.DHEEJCCJBH( f64_local3.timerPubVar )
			if not f64_local4 or 0 >= #f64_local4 or not f64_local4 then
				f64_local4 = Engine.DEIDGHDBHD()
			end
			if 0 < Engine.CCEJJCCDEG( tostring( f64_local4 ) ) and f64_local4 < f64_arg0._lowestAvailableTime then
				f64_arg0._lowestAvailableTime = f64_local4
				f64_arg0._lowestTimeDvar = f64_local3.timerPubVar
			end
		end
		if not f64_local3.items[1].emptyCategory and not f64_local3.items[1].usesFirstPartyStore then
			f64_arg0._storeEmpty = false
		end
	end
	f0_local0( f64_arg0 )
end

local f0_local11 = function ( f63_arg0, f63_arg1, f63_arg2 )
	local f63_local0 = {}
	local f63_local1 = f63_arg2.items[1] or {}
	if f63_arg2.idPubVar and f63_local1.layoutOnlyItem then
		local f63_local2 = Dvar.DHEEJCCJBH( f63_arg2.idPubVar ) or ""
		if f63_arg2.justForYou and f63_arg0._recommendations then
			f63_arg0.recommendationData = {
				items = f63_arg0._recommendations,
				isEnabled = true
			}
			f63_local2 = STORE.FormatRecommendationItems( f63_arg0._recommendations .. "," .. f63_local2 )
		end
		local f63_local3 = split( f63_local2, "," )
		local f63_local4 = 0
		for f63_local5 = 1, #f63_local3, 1 do
			local f63_local8 = tonumber( f63_local3[f63_local5] )
			if STORE.BundleAvailable( f63_arg1, f63_local8 ) then
				local f63_local9 = LUI.DeepCopy( f63_local1 )
				f63_local9.emptyCategory = false
				f63_local9.id = f63_local8
				local f63_local10 = CSV.ReadRow( {
					file = CSV.bundleIDs.file,
					cols = CSV.bundleIDs.cols
				}, StringTable.BJJBBCJGEJ( CSV.bundleIDs.file, CSV.bundleIDs.cols.id, f63_local3[f63_local5] ) )
				f63_local9.name = f63_local10.name
				f63_local9.asset = f63_local10.image
				f63_local9.description = STORE.GetBundleDescription( f63_local9.id, f63_arg0._totalCP )
				f63_local9.rarity = f63_local10.rarity
				f63_local9.bundleType = f63_local10.bundleType
				f63_local9.titleImage = f63_local10.titleImage
				f63_local9.currencyID = tonumber( f63_local10.currencyID )
				f63_local9.currencyAmount = tonumber( f63_local10.currencyAmount )
				local f63_local11
				if 0 < #f63_local10.firstPartyProductID then
					f63_local11 = f63_local10.firstPartyProductID
					if not f63_local11 then
					
					else
						f63_local9.firstPartyProductID = f63_local11
						table.insert( f63_local0, f63_local9 )
						f63_local4 = f63_local4 + 1
					end
				end
				f63_local11 = nil
			end
			if f63_local4 == f63_arg2.numItemsShown then
				break
			end
		end
	end
	if #f63_local0 == 0 then
		local f63_local2 = LUI.DeepCopy( f63_local1 )
		if not f63_local2.usesFirstPartyStore then
			f63_local2.emptyCategory = true
			f63_local2.titleImage = nil
			local f63_local3
			if CONDITIONS.IsMagmaGameMode() then
				f63_local3 = "wz_store_billboard_placeholder"
			else
				f63_local3 = "mw_store_billboard_placeholder"
			end
			f63_local2.asset = f63_local3
		end
		table.insert( f63_local0, f63_local2 )
	end
	f63_arg2.items = f63_local0
end

local f0_local12 = function ( f55_arg0 )
	return function ( f56_arg0, f56_arg1, f56_arg2 )
		f55_arg0._scrollDirection = {
			LEFT = 1,
			RIGHT = 2
		}
		local f56_local0 = {
			{
				columnChange = 4294967295,
				resetScrollTimer = f55_arg0._gridRightScrollTimerHolder,
				scrollTimerHolder = f55_arg0._gridLeftScrollTimerHolder
			},
			{
				columnChange = 1,
				resetScrollTimer = f55_arg0._gridLeftScrollTimerHolder,
				scrollTimerHolder = f55_arg0._gridRightScrollTimerHolder
			}
		}
		f55_arg0.ChangeSelection = function ( f61_arg0, f61_arg1 )
			Engine.BJDBIAGIDA( SOUND_SETS.storefront.triggerNavigation )
			if f61_arg1 and f56_arg0.DisableAutoScrollTimer then
				f56_arg0.DisableAutoScrollTimer()
			end
			if not f56_arg0._selectedCategory or not f56_arg0 or not f56_arg0[f56_arg0._selectedCategory] or not f56_arg0[f56_arg0._selectedCategory].items then
				
			end
			local f61_local0 = #f56_arg0[f56_arg0._selectedCategory].items
			if 1 < f61_local0 then
				f56_arg0.PipsWithNavigation.Pips:Resize( f61_local0 )
				local f61_local1 = f56_arg0[f61_arg0]
				local f61_local2 = 0
				local f61_local3 = f61_local0
				if f61_arg0 == f56_arg0.RIGHT then
					f61_local2 = f61_local0 + 1
					f61_local3 = 1
				end
				f61_local1.resetScrollTimer:Wait( 1, true )
				if f61_arg0 == f56_arg0.LEFT then
					f56_arg0._gridRightWaitTweenActive = false
				else
					f56_arg0._gridLeftWaitTweenActive = false
				end
				if not (f61_arg0 ~= f56_arg0.LEFT or not f56_arg0._gridLeftWaitTweenActive) or f61_arg0 == f56_arg0.RIGHT and f56_arg0._gridRightWaitTweenActive then
					f61_local1.scrollTimerHolder:Wait( 1, true )
					f56_arg0.BillboardGrid:SetTargetColumn( f61_local3, false, true )
					f56_arg0.BillboardGrid._selectedColumn = f61_local3
					if f61_arg0 == f56_arg0.LEFT then
						f56_arg0._gridLeftWaitTweenActive = false
					else
						f56_arg0._gridRightWaitTweenActive = false
					end
				end
				local f61_local4 = f56_arg0.BillboardGrid._selectedColumn + f61_local1.columnChange
				f56_arg0.BillboardGrid._selectedColumn = f61_local4
				f56_arg0.BillboardGrid:SetTargetColumn( f61_local4, false, false )
				if f61_local4 == f61_local2 then
					f61_local4 = f61_local3
					if f61_arg0 == f56_arg0.LEFT then
						f56_arg0._gridLeftWaitTweenActive = true
					else
						f56_arg0._gridRightWaitTweenActive = true
					end
					local f61_local5 = f61_local1.scrollTimerHolder:Wait( f56_arg0 )
					f61_local5.onComplete = function ()
						f61_arg0.BillboardGrid:SetTargetColumn( f61_arg0, false, true )
						f61_arg0.BillboardGrid._selectedColumn = f61_arg0
						if f61_arg0 == f61_arg0.LEFT then
							f61_arg0._gridLeftWaitTweenActive = false
						else
							f61_arg0._gridRightWaitTweenActive = false
						end
					end
					
				end
				f56_arg0.PipsWithNavigation.Pips:UpdateChildren( f61_local4 - 1, 0 )
			end
		end
		
		local f56_local1 = function ()
			local f60_local0 = #f56_arg0[f56_arg0._selectedCategory].items
			local f60_local1 = f56_arg0.BillboardGrid._selectedColumn
			if f60_local1 == 0 then
				f60_local1 = f60_local0
			elseif f60_local0 < f60_local1 then
				f60_local1 = 1
			end
			local f60_local2 = f56_arg0[f56_arg0._selectedCategory]
			local f60_local3 = f60_local2.items[f60_local1]
			if QUARTERMASTER.itemData.sessionId ~= nil then
				QUARTERMASTER.RecordMenuBrowseEvent( f56_arg0._controllerIndex, false )
			end
			QUARTERMASTER.BeginMenuBrowseEvent( f60_local2, f60_local3 )
		end
		
		local f56_local2 = function ( f59_arg0, f59_arg1 )
			f56_arg0( f56_arg0.LEFT, true )
			if 1 < #f56_arg0[f56_arg0._selectedCategory].items then
				f56_arg0()
			end
			return true
		end
		
		local f56_local3 = function ( f58_arg0, f58_arg1 )
			f56_arg0( f56_arg0.RIGHT, true )
			if 1 < #f56_arg0[f56_arg0._selectedCategory].items then
				f56_arg0()
			end
			return true
		end
		
		local f56_local4 = function ( f57_arg0, f57_arg1 )
			if f57_arg1.down and f57_arg1.qualifier == "mousewheel" then
				if f57_arg1.button == "up" then
					f56_arg0( f57_arg0, f57_arg1 )
				else
					f56_arg0( f57_arg0, f57_arg1 )
				end
			end
		end
		
		f55_arg0.bindButton:addEventHandler( "button_left_trigger", f56_local2 )
		f55_arg0.bindButton:addEventHandler( "button_right_trigger", f56_local3 )
		f55_arg0.BillboardFocusArea:SetLeftNavigationHandler( f56_local2 )
		f55_arg0.BillboardFocusArea:SetRightNavigationHandler( f56_local3 )
		f55_arg0.BillboardFocusArea:SetGamepadButtonHandler( f56_local4 )
	end
	
end

local f0_local13 = function ( f54_arg0, f54_arg1, f54_arg2, f54_arg3 )
	local f54_local0, f54_local1 = STORE.GetIndexForBundle( f54_arg1, f54_arg0._controllerIndex )
	if f54_local0 and f54_local1 then
		local f54_local2 = f54_arg0.categoryButtonsContainer:GetElementAtIndex( f54_local0 )
		if f54_local2 then
			f54_arg0.categoryButtonsContainer:processEvent( {
				name = "lose_focus"
			} )
			f54_local2:processEvent( {
				name = "gain_focus"
			} )
			f54_arg0.BillboardGrid._selectedColumn = f54_local1
			f54_arg0.BillboardGrid:SetTargetColumn( f54_local1, false, true )
			if f54_arg2 then
				f54_local2:processEvent( {
					name = "button_action"
				} )
			end
		end
	else
		LUI.FlowManager.RequestPopupMenu( f54_arg0, "PopupOK", true, controllerIndex, false, {
			message = Engine.CBBHFCGDIC( "LUA_MENU/BUNDLE_NOT_AVAILABLE" )
		} )
	end
end

local f0_local14 = function ( f53_arg0, f53_arg1 )
	local f53_local0 = STORE.GetCategoryIndex( f53_arg0._controllerIndex, f53_arg1 )
	if f53_local0 and f53_arg0.categoryButtonsContainer then
		local f53_local1 = f53_arg0.categoryButtonsContainer:GetElementAtIndex( f53_local0 )
		if f53_local1 then
			f53_arg0.categoryButtonsContainer:processEvent( {
				name = "lose_focus"
			} )
			f53_local1:processEvent( {
				name = "gain_focus"
			} )
			return 
		end
	end
end

local f0_local15 = function ( f4_arg0, f4_arg1, f4_arg2 )
	f4_arg0.FocusBundleByID = function ( f52_arg0, f52_arg1, f52_arg2, f52_arg3 )
		f4_arg0( f4_arg0, f52_arg1, f52_arg2, f52_arg3 )
	end
	
	f4_arg0.FocusButtonByName = function ( f51_arg0, f51_arg1 )
		f4_arg0( f4_arg0, f51_arg1 )
	end
	
	
	local bindButton = LUI.UIBindButton.new()
	bindButton.id = "bindButton"
	f4_arg0:addElement( bindButton )
	f4_arg0.bindButton = bindButton
	
	ACTIONS.AnimateSequence( f4_arg0.BillboardArrows, "Intro" )
	ACTIONS.ScaleFullscreen( f4_arg0.Background )
	Engine.DHFCHIIJCA( "quartermaster" )
	f4_arg0:addElement( LOOT.GetLootFlareMaterialStreamer() )
	f4_arg0._controllerIndex = f4_arg1
	local f4_local1 = BATTLEPASS.GetCurrentCPRewards( f4_arg1 )
	f4_arg0._totalCP = f4_local1.totalCP
	if QUARTERMASTER.itemData then
		QUARTERMASTER.itemData = {}
	end
	f4_arg0._itemsFocused = false
	f4_arg0.BackButtonOverride = function ( f50_arg0, f50_arg1 )
		local f50_local0 = LUI.FlowManager.GetScopedData( f50_arg0 )
		if f50_local0.useStandaloneStore then
			LUI.FlowManager.RequestLeaveMenu( f50_arg0 )
		elseif f4_arg0._itemsFocused and f4_arg0.container then
			f4_arg0.container:processEvent( {
				name = "lose_focus"
			} )
			f4_arg0._categoryWidget:processEvent( {
				name = "gain_focus"
			} )
			f4_arg0._itemsFocused = false
		else
			local f50_local1
			if f50_arg1.qualifier == "keyboard" or f50_arg1.qualifier == "gamepad" then
				f50_local1 = false
			else
				f50_local1 = true
			end
			local f50_local2
			if f50_local1 then
				f50_local2 = FocusType.MouseOver
				if not f50_local2 then
				
				else
					local f50_local3 = f50_arg0:getParent()
					f50_local3.Tabs:FocusTab( f50_arg1.controller or f4_arg0, 0, f50_local2 )
				end
			end
			f50_local2 = FocusType.Gamepad
		end
		return false
	end
	
	f4_arg0:addEventHandler( "menu_create", function ( f49_arg0, f49_arg1 )
		local f49_local0 = LUI.FlowManager.GetScopedData( f49_arg0 )
		if f49_local0._selectedCategory then
			local f49_local1 = f4_arg0.categoryButtonsContainer:GetElementAtIndex( f49_local0._selectedCategory )
			f4_arg0._categoryWidget = f49_local1
			f4_arg0._itemsFocused = true
			f49_local1:processEvent( {
				name = "gain_focus"
			} )
			f4_arg0.categoryButtonsContainer:processEvent( {
				name = "lose_focus"
			} )
		end
	end )
	local f4_local2 = function ( f48_arg0 )
		local self = LUI.UIHorizontalList.new()
		self:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 616, _1080p * 1790, _1080p * 216, _1080p * 800 )
		self:SetSpacing( 8 * _1080p )
		f48_arg0.container = self
		f48_arg0:addElement( self )
	end
	
	local f4_local3 = function ()
		if f4_arg0.container then
			f4_arg0.container:closeTree()
			f4_arg0.container = nil
		end
		f4_arg0.ContainerBuilder = f4_arg0
		f4_arg0( f4_arg0 )
	end
	
	f4_arg0._gridLeftScrollTimerHolder = LUI.UIElement.new()
	f4_arg0:addElement( f4_arg0._gridLeftScrollTimerHolder )
	f4_arg0._gridLeftWaitTweenActive = false
	f4_arg0._gridRightScrollTimerHolder = LUI.UIElement.new()
	f4_arg0:addElement( f4_arg0._gridRightScrollTimerHolder )
	f4_arg0._gridRightWaitTweenActive = false
	local f4_local4 = {
		default = {
			categoryButtonContainer = {
				widgetType = "MPDepotMenuVerticalButtons",
				anchors = {
					top = 0,
					bot = 1,
					left = 0,
					right = 1
				},
				positions = {
					left = _1080p * 130,
					right = _1080p * 590,
					top = _1080p * 216,
					bot = _1080p * 503
				}
			},
			categoryButton = {
				widgetType = "MPMenuButton",
				anchors = {
					top = 0,
					bot = 1,
					left = 0,
					right = 1
				},
				positions = {
					top = 0,
					left = 0,
					right = _1080p * 460,
					bot = _1080p * 40
				},
				events = {
					nil,
					"button_over",
					"button_action"
				}
			},
			storeCustomizations = {
				pre = {
					f4_local3
				}
			}
		},
		[StoreItemLayout.BILLBOARD_LIST] = {
			categoryButtonContainer = {
				widgetType = "MPDepotMenuHorizontalButtons",
				anchors = {
					top = 5.29462817E-315,
					bot = 5.29462817E-315,
					left = 0,
					right = 0
				},
				positions = {
					left = f0_local0,
					right = -f0_local0,
					top = _1080p * 256,
					bot = _1080p * 440
				}
			},
			categoryButton = {
				widgetType = "MPBillboardMenuButton",
				anchors = {
					top = 5.29462817E-315,
					bot = 5.29462817E-315,
					left = 5.29462817E-315,
					right = 5.29462817E-315
				},
				positions = {
					left = _1080p * -164,
					right = _1080p * 164,
					top = _1080p * -92,
					bot = _1080p * 92
				},
				events = {
					nil,
					"button_over",
					"button_action",
					"gain_focus"
				},
				buttonCustomizations = {}
			},
			storeCustomizations = {
				pre = {
					f0_local0( f4_arg0 ),
					function ( f45_arg0, f45_arg1, f45_arg2 )
						f4_arg0.BillboardGrid._disableMouseWheel = true
						if LUI.IsLastInputKeyboardMouse( f4_arg0 ) then
							f4_arg0.BillboardGrid:SetAlpha( 1 )
						end
						f4_arg0.BillboardFocusArea:SetBackgroundLeftMouseHandler( function ( f46_arg0, f46_arg1 )
							f45_arg0.BillboardCategoryButtonAction( f46_arg0._element, f46_arg1, f46_arg0._categoryData, f45_arg0 )
							return true
						end )
					end
				},
				post = {
					function ( f43_arg0, f43_arg1, f43_arg2 )
						f4_arg0.categoryButtonsContainer:SetNotifyOnLayoutInit( true )
						f4_arg0.categoryButtonsContainer:registerEventHandler( "layout_initialized", function ( element, event )
							if not f43_arg0._selectedCategory then
								f43_arg0:processEvent( {
									name = "lose_focus"
								} )
								element:processEvent( {
									name = "gain_focus"
								} )
							end
						end )
					end,
					function ( f41_arg0, f41_arg1, f41_arg2 )
						f4_arg0:registerAndCallEventHandler( "update_input_type", function ( f42_arg0, f42_arg1 )
							if f42_arg0.BillboardFocusArea:isInFocus() then
								f42_arg0:processEvent( {
									name = "lose_focus"
								} )
								f42_arg0.categoryButtonsContainer:processEvent( {
									name = "gain_focus"
								} )
							end
							local f42_local0
							if LUI.IsLastInputKeyboardMouse( f42_arg1.controllerIndex ) then
								f42_local0 = 0
							else
								f42_local0 = 1
							end
							f41_arg0( f42_arg0, f42_local0 )
						end, {
							controllerIndex = f4_arg0
						} )
					end
				}
			}
		}
	}
	local f4_local5 = function ( f40_arg0 )
		local f40_local0 = f4_arg0[f40_arg0]
		local f40_local1
		if not f40_local0 then
			f40_local1 = f40_local0
		else
			f40_local1 = f4_arg0.default
		end
		return f40_local1
	end
	
	local f4_local6 = function ( f39_arg0, f39_arg1, f39_arg2, f39_arg3 )
		if f39_arg0 then
			for f39_local3, f39_local4 in ipairs( f39_arg0 ) do
				f39_local4( f39_arg1, f39_arg2, f39_arg3 )
			end
		end
	end
	
	local f4_local7 = function ( f37_arg0, f37_arg1 )
		f37_arg0.Name:setText( Engine.CBBHFCGDIC( f37_arg1.name ) )
		if f37_arg0.Owned.Text then
			local f37_local0 = Loot.DEBEIFJEEG( f4_arg0, f37_arg1.id )
			if 0 < f37_local0 then
				f37_arg0.Owned.Text:setText( f37_local0 )
				f37_arg0.Owned:SetAlpha( 1 )
			else
				f37_arg0.Owned.Text:setText( "" )
				f37_arg0.Owned:SetAlpha( 0 )
			end
		end
		f37_arg0:registerEventHandler( "button_action", function ( element, event )
			LUI.FlowManager.RequestAddMenu( "PurchaseItemMenu", true, f37_arg0, false, {
				crateID = f37_arg0.id
			} )
		end )
	end
	
	local f4_local8 = function ()
		if f4_arg0.container then
			f4_arg0.container:closeTree()
			f4_arg0.container = nil
		end
	end
	
	local f4_local9 = {
		{
			nil,
			"ItemAtom",
			"ItemTall"
		},
		{
			nil,
			"Item2x1Wide",
			"Item2x2Square"
		},
		{
			nil,
			"Item3x1Wide"
		}
	}
	local f4_local10 = {}
	local f4_local11 = function ( f35_arg0, f35_arg1, f35_arg2, f35_arg3, f35_arg4 )
		if not f4_arg0[f35_arg4] then
			local f35_local0 = 1
			local f35_local1 = 1
			if f35_arg1[f35_arg3 + 1] then
				
			else
				
			end
			if f35_arg2 == 1 and f35_arg0[f35_arg2 + 1][f35_arg3] == f35_arg4 then
				f35_local1 = f35_local1 + 1
			end
			f4_arg0[f35_arg4] = {
				width = f35_local0,
				height = f35_local1
			}
		end
	end
	
	local f4_local12 = {}
	local f4_local13 = function ( f34_arg0, f34_arg1, f34_arg2 )
		if not f4_arg0[f34_arg2] then
			f4_arg0[f34_arg2] = {
				row = f34_arg0,
				column = f34_arg1
			}
		end
	end
	
	local f4_local14 = _1080p * 350 + _1080p * 10
	local f4_local15 = {
		{
			{
				posL = 0,
				anchorL = 0,
				anchorT = 0,
				posB = 0,
				posT = 0,
				anchorB = 1,
				anchorR = 1,
				posR = 0
			},
			{
				anchorL = 0,
				anchorT = 0,
				posB = 0,
				posT = 0,
				anchorB = 1,
				anchorR = 1,
				posL = f4_local14,
				posR = f4_local14
			},
			{
				anchorL = 0,
				anchorT = 0,
				posB = 0,
				posT = 0,
				anchorB = 1,
				anchorR = 1,
				posL = 2 * f4_local14,
				posR = 2 * f4_local14
			}
		},
		{
			{
				posL = 0,
				anchorL = 0,
				anchorT = 0,
				anchorB = 1,
				anchorR = 1,
				posR = 0,
				posT = f4_local14,
				posB = f4_local14
			},
			{
				anchorL = 0,
				anchorT = 0,
				anchorB = 1,
				anchorR = 1,
				posL = f4_local14,
				posR = f4_local14,
				posT = f4_local14,
				posB = f4_local14
			},
			{
				anchorL = 0,
				anchorT = 0,
				anchorB = 1,
				anchorR = 1,
				posL = 2 * f4_local14,
				posR = 2 * f4_local14,
				posT = f4_local14,
				posB = f4_local14
			}
		}
	}
	local f4_local16 = {}
	local f4_local17 = function ( f33_arg0 )
		for f33_local0 = 1, #f33_arg0.items, 1 do
			local f33_local3 = f33_arg0.items[f33_local0]
			local f33_local4 = nil
			local f33_local5 = f33_local3.order
			local f33_local6 = f4_arg0[f33_local5]
			local f33_local7 = f4_arg0[f33_local6.width][f33_local6.height]
			local f33_local8 = f4_arg0[f33_local5]
			local f33_local9 = f4_arg0[f33_local8.row][f33_local8.column]
			f33_local4 = MenuBuilder.BuildRegisteredType( f33_local7, {
				controllerIndex = f4_arg0
			} )
			f33_local4.id = tostring( f33_local3.id )
			f4_arg0( f33_local4, f33_local3 )
			f4_arg0.container:addElement( f33_local4 )
			local f33_local10 = 0
			local f33_local11 = 0
			if 1 < f33_local6.width then
				f33_local10 = f4_arg0 * (f33_local6.width - 1)
			end
			if 1 < f33_local6.height then
				f33_local11 = f4_arg0 * (f33_local6.height - 1)
			end
			f33_local4:SetAnchorsAndPosition( f33_local9.anchorL, f33_local9.anchorR, f33_local9.anchorT, f33_local9.anchorB, f33_local9.posL, f33_local9.posR + f33_local6.width * f4_arg0 + f33_local10, f33_local9.posT, f33_local9.posB + f33_local6.height * f4_arg0 + f33_local11 )
			f4_arg0[f33_local5] = f33_local4
		end
	end
	
	local f4_local18 = {}
	local f4_local19 = function ( f32_arg0, f32_arg1, f32_arg2, f32_arg3, f32_arg4 )
		local f32_local0, f32_local1, f32_local2, f32_local3 = nil
		if not f4_arg0[f32_arg4] then
			f4_arg0[f32_arg4] = {}
			if f32_arg1[f32_arg3 - 1] and f32_arg1[f32_arg3 - 1] ~= f32_arg4 then
				f4_arg0[f32_arg4].left = f32_arg1[f32_arg3 - 1]
			end
			if f32_arg2 == 1 then
				local f32_local4 = f32_arg0[f32_arg2 + 1]
				if f32_local4[f32_arg3] ~= f32_arg4 and not f32_local3 then
					f4_arg0[f32_arg4].down = f32_local4[f32_arg3]
				end
			elseif f32_arg2 == 2 then
				local f32_local4 = f32_arg0[f32_arg2 - 1]
				if f32_local4[f32_arg3] ~= f32_arg4 and not f32_local2 then
					f4_arg0[f32_arg4].up = f32_local4[f32_arg3]
				end
			end
			if f32_arg1[f32_arg3 + 1] then
				
			else
				
			end
		end
	end
	
	local f4_local20 = function ()
		for f31_local0 = 1, #f4_arg0, 1 do
			local f31_local3 = f4_arg0[f31_local0]
			local f31_local4 = f4_arg0[f31_local0]
			f31_local3.navigation = {}
			if f31_local4.left then
				f31_local3.navigation.left = f4_arg0[f31_local4.left]
			end
			if f31_local4.right then
				f31_local3.navigation.right = f4_arg0[f31_local4.right]
			end
			if f31_local4.up then
				f31_local3.navigation.up = f4_arg0[f31_local4.up]
			end
			if f31_local4.down then
				f31_local3.navigation.down = f4_arg0[f31_local4.down]
			end
		end
	end
	
	local f4_local21 = function ( f30_arg0 )
		f4_arg0 = {}
		f4_arg0 = {}
		f4_arg0 = {}
		f4_arg0 = {}
		for f30_local0 = 1, #f30_arg0, 1 do
			local f30_local3 = f30_arg0[f30_local0]
			for f30_local7, f30_local8 in ipairs( f30_local3 ) do
				f4_arg0( f30_local0, f30_local7, f30_local8 )
				f4_arg0( f30_arg0, f30_local3, f30_local0, f30_local7, f30_local8 )
				f4_arg0( f30_arg0, f30_local3, f30_local0, f30_local7, f30_local8 )
			end
		end
	end
	
	local f4_local22 = {
		button_over = {
			default = function ( f29_arg0, f29_arg1, f29_arg2, f29_arg3 )
				f4_arg0()
				local self = LUI.UIHorizontalList.new()
				self:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 616, _1080p * 1790, _1080p * 253, _1080p * 800 )
				self:SetSpacing( 8 * _1080p )
				f4_arg0.container = self
				f4_arg0:addElement( self )
				for f29_local1 = 1, #f29_arg2.items, 1 do
					local f29_local4 = f29_arg2.items[f29_local1]
					local f29_local5 = nil
					if f29_arg2.layoutType == StoreItemLayout.COMPACT then
						f29_local5 = MenuBuilder.BuildRegisteredType( "ItemCompact", {
							controllerIndex = f4_arg0
						} )
					elseif f29_arg2.layoutType == StoreItemLayout.TALL then
						f29_local5 = MenuBuilder.BuildRegisteredType( "ItemTall", {
							controllerIndex = f4_arg0
						} )
					else
						assert( false, "Unknown item layout type!" )
					end
					f29_local5.id = tostring( f29_local4.id )
					f4_arg0( f29_local5, f29_local4 )
					f4_arg0.container:addElement( f29_local5 )
				end
			end,
			[StoreItemLayout.SQUARES] = function ( f26_arg0, f26_arg1, f26_arg2, f26_arg3 )
				f4_arg0()
				local self = LUI.UIGrid.new( {
					scrollingThresholdX = 1,
					buildArrowsLabel = false,
					maxVelocity = 5000,
					wrapX = true,
					adjustSizeToContent = false,
					scrollingThresholdY = 1,
					maxVisibleColumns = 4,
					maxVisibleRows = 2,
					wrapY = true,
					springCoefficient = 400,
					controllerIndex = f4_arg0,
					buildChild = function ()
						return MenuBuilder.BuildRegisteredType( "ItemSquare", {
							controllerIndex = f26_arg0
						} )
					end,
					refreshChild = function ( f27_arg0, f27_arg1, f27_arg2 )
						local f27_local0 = f26_arg0.items[f27_arg1 + 1 + f27_arg2 * 4]
						if not f27_local0 then
							f27_local0 = f26_arg0.items[2]
						end
						if f27_local0 then
							f26_arg0( f27_arg0, f27_local0 )
						end
					end,
					spacingX = _1080p * 2,
					spacingY = _1080p * 2,
					columnWidth = _1080p * 300,
					rowHeight = _1080p * 300,
					horizontalAlignment = LUI.Alignment.Left,
					verticalAlignment = LUI.Alignment.Top
				} )
				self.id = "container"
				self:setUseStencil( true )
				self:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 584, _1080p * 1790, _1080p * 239, _1080p * 841 )
				f4_arg0.container = self
				f4_arg0:addElement( self )
				self:SetNumChildren( 8 )
			end,
			[StoreItemLayout.CUSTOM] = function ( f25_arg0, f25_arg1, f25_arg2, f25_arg3 )
				f4_arg0()
				f4_arg0( Engine.GetLayoutData( f25_arg2.layoutName ) )
				local self = LUI.UIElement.new()
				self:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 616, _1080p * 1790, _1080p * 216, _1080p * 800 )
				self:SetSpacing( 8 * _1080p )
				self.custom = true
				self.elements = f4_arg0
				f4_arg0.container = self
				f4_arg0:addElement( self )
				f4_arg0( f25_arg2 )
				f4_arg0()
			end,
			[StoreItemLayout.BILLBOARD_LIST] = function ( f23_arg0, f23_arg1, f23_arg2, f23_arg3 )
				local f23_local0 = f23_arg2.items
				if QUARTERMASTER.itemData and QUARTERMASTER.itemData.sessionId ~= nil and f23_arg2.categoryIndex ~= QUARTERMASTER.itemData.category_index then
					QUARTERMASTER.RecordMenuBrowseEvent( f4_arg0, false )
				end
				QUARTERMASTER.BeginMenuBrowseEvent( f23_arg2, f23_local0[1] )
				f4_arg0.BillboardFocusArea:SetCurrentCategoryData( f23_arg0, f23_arg2 )
				local f23_local1 = function ( f24_arg0, f24_arg1, f24_arg2 )
					local f24_local0 = f24_arg1
					if f24_arg1 == 0 then
						f24_local0 = #f23_arg0.items
					elseif f24_arg1 == #f23_arg0.items + 1 then
						f24_local0 = 1
					end
					local f24_local1 = f23_arg0.items[f24_local0]
					if not f24_local1.usesFirstPartyStore then
						f24_local1.usesFirstPartyStore = false
					end
					f24_arg0:UpdateBillboard( f24_local1, f24_local1.usesFirstPartyStore )
				end
				
				f4_arg0.BillboardGrid:SetAlpha( 1 )
				f4_arg0.BillboardGrid:SetRefreshChild( f23_local1 )
				f4_arg0.BillboardGrid:SetNumRows( 1 )
				local f23_local2 = f23_arg2.categoryIndex - 1
				local f23_local3 = f23_local2 * f4_arg0
				local f23_local4 = f23_local2 * f4_arg0
				local f23_local5 = (f4_arg0 - f4_arg0) / 2
				if f4_arg0.categoryButtonsContainer._currentActiveButton ~= f23_arg0 then
					f4_arg0( f4_arg0, #f23_local0 )
				end
				f4_arg0.BillboardFocusArea:SetCurrentCategoryData( f23_arg0, f23_arg2 )
				local f23_local6 = LUI.FlowManager.GetScopedData( f4_arg0 )
				f23_local6._selectedColumn = 1
				f4_arg0._selectedCategory = f23_arg2.categoryIndex
				f4_arg0:dispatchEventToChildren( {
					name = "categoryTimerUpdate"
				} )
				if f4_arg0.DisableAutoScrollTimer then
					f4_arg0.DisableAutoScrollTimer()
				end
			end
		},
		button_action = {
			default = function ( f22_arg0, f22_arg1, f22_arg2, f22_arg3 )
				f22_arg0:processEvent( {
					name = "lose_focus"
				} )
				f4_arg0.container:processEvent( {
					name = "gain_focus"
				} )
				f4_arg0._itemsFocused = true
				f4_arg0._categoryWidget = f22_arg0
				local f22_local0 = LUI.FlowManager.GetScopedData( f4_arg0 )
				f22_local0._selectedCategory = f4_arg0.categoryButtonsContainer:GetIndexForElement( f22_arg0 )
			end,
			[StoreItemLayout.CUSTOM] = function ( f21_arg0, f21_arg1, f21_arg2, f21_arg3 )
				f21_arg0:processEvent( {
					name = "lose_focus"
				} )
				f4_arg0.container.elements[1]:processEvent( {
					name = "gain_focus"
				} )
				f4_arg0._itemsFocused = true
				f4_arg0._categoryWidget = f21_arg0
				local f21_local0 = LUI.FlowManager.GetScopedData( f4_arg0 )
				f21_local0._selectedCategory = f4_arg0.categoryButtonsContainer:GetIndexForElement( f21_arg0 )
			end,
			[StoreItemLayout.BILLBOARD_LIST] = function ( f20_arg0, f20_arg1, f20_arg2, f20_arg3 )
				local f20_local0 = f4_arg0.BillboardGrid._selectedColumn or 1
				if f20_local0 == 0 then
					f20_local0 = #f20_arg2.items
				elseif f20_local0 == #f20_arg2.items + 1 then
					f20_local0 = 1
				end
				local f20_local1 = LUI.FlowManager.GetScopedData( f4_arg0 )
				f20_local1._selectedColumn = f20_local0
				local f20_local2 = f20_arg2.items[f20_local0]
				f20_local1._selectedCategory = f20_arg2.categoryIndex
				if not f20_local2.usesFirstPartyStore then
					if f20_local2.emptyCategory then
						return 
					end
					QUARTERMASTER.CoalesceBrowseData()
					QUARTERMASTER.RecordMenuBrowseEvent( f4_arg0, true )
					STORE.MarkItemSeen( f4_arg0, f20_local2.id )
					f4_arg0.BillboardGrid:RefreshContent()
					if f20_local2.firstPartyProductID then
						if STORE.IsGameUpsellBundle( f20_local2.id ) then
							LUI.FlowManager.RequestPopupMenu( f4_arg0, "StoreGameUpsellPopup", true, f4_arg0, false, {
								defaultProductId = f20_local2.firstPartyProductID
							} )
						else
							InGameStore.SelectProduct( f4_arg0, f20_local2.firstPartyProductID, InGameStorePurchaseType.BROWSE )
						end
						return 
					end
					local f20_local3 = {
						bundleID = f20_local2.id,
						rarity = f20_local2.rarity,
						description = f20_local2.description,
						bundleType = f20_local2.bundleType,
						titleImage = f20_local2.titleImage,
						currencyID = f20_local2.currencyID,
						currencyAmount = f20_local2.currencyAmount,
						startPurchaseImmediately = f4_arg0._startPurchaseImmediately
					}
					if not f20_arg2.justForYou then
						f20_local3.timerPubVar = f20_arg2.timerPubVar
					end
					f20_local1.previewBundleID = f20_local2.id
					LUI.FlowManager.RequestAddMenu( "StoreBundlePreview", true, f4_arg0, false, f20_local3 )
				else
					QUARTERMASTER.RecordMenuBrowseEvent( f4_arg0, true )
					local f20_local3 = STORE.GoToStore
					local f20_local4 = f4_arg0
					local f20_local5 = f4_arg0:GetCurrentMenu()
					f20_local3( f20_local4, f20_local5.id, f20_arg0.id )
				end
			end
		},
		gain_focus = {
			[StoreItemLayout.BILLBOARD_LIST] = function ( f19_arg0, f19_arg1, f19_arg2, f19_arg3 )
				f19_arg0:ScaleButtonUp()
				if f4_arg0.categoryButtonsContainer then
					if f4_arg0.categoryButtonsContainer._currentActiveButton and f4_arg0.categoryButtonsContainer._currentActiveButton ~= f19_arg0 then
						ACTIONS.AnimateSequence( f4_arg0.categoryButtonsContainer._currentActiveButton, "ButtonUp" )
						f4_arg0.categoryButtonsContainer._currentActiveButton:ScaleButtonDown()
					end
					f4_arg0.categoryButtonsContainer._currentActiveButton = f19_arg0
				end
			end
		}
	}
	f4_arg0.BillboardCategoryButtonAction = f4_local22.button_action[StoreItemLayout.BILLBOARD_LIST]
	local f4_local23 = function ( f17_arg0, f17_arg1, f17_arg2, f17_arg3 )
		return function ( f18_arg0, f18_arg1 )
			assert( f17_arg0[f17_arg0], string.format( "No handlers for event %s", f17_arg0 ) )
			local f18_local0 = f17_arg0[f17_arg0][f17_arg0]
			if f18_local0 then
				f18_local0( f18_arg0, f18_arg1, f17_arg0, f17_arg0 )
			elseif f17_arg0[f17_arg0].default then
				f18_local0 = f17_arg0[f17_arg0].default( f18_arg0, f18_arg1, f17_arg0, f17_arg0 )
			else
				return false
			end
		end
		
	end
	
	local f4_local24 = function ( f16_arg0, f16_arg1, f16_arg2, f16_arg3 )
		local f16_local0 = f16_arg2.events
		if f16_local0 then
			for f16_local4, f16_local5 in ipairs( f16_local0 ) do
				local f16_local6 = f4_arg0( f16_local5, f16_arg1, f16_arg3, f16_arg2 )
				if f16_local6 then
					f16_arg0:addEventHandler( f16_local5, f16_local6 )
				end
			end
		end
	end
	
	local f4_local25 = function ( f15_arg0 )
		local f15_local0 = f4_arg0( f15_arg0 )
		f15_local0 = f15_local0.categoryButtonContainer
		
		local categoryButtonsContainer = MenuBuilder.BuildRegisteredType( f15_local0.widgetType, {
			controllerIndex = f4_arg0,
			storeMenu = f4_arg0
		} )
		categoryButtonsContainer.id = "categoryButtonsContainer"
		local f15_local2 = f15_local0.anchors
		local f15_local3 = f15_local0.positions
		categoryButtonsContainer:SetAnchorsAndPosition( f15_local2.left, f15_local2.right, f15_local2.top, f15_local2.bot, f15_local3.left, f15_local3.right, f15_local3.top, f15_local3.bot )
		f4_arg0:addElement( categoryButtonsContainer )
		f4_arg0.categoryButtonsContainer = categoryButtonsContainer
		
	end
	
	local f4_local26 = function ( f13_arg0, f13_arg1 )
		local f13_local0 = f4_arg0( f13_arg0 )
		f13_local0 = f13_local0.categoryButton
		local f13_local1 = MenuBuilder.BuildRegisteredType( f13_local0.widgetType, {
			controllerIndex = f4_arg0
		} )
		local f13_local2 = Engine.CBBHFCGDIC( f13_arg1.name )
		f13_local1.id = f13_local2
		f13_local1.Text:setText( ToUpperCase( f13_local2 ) )
		local f13_local3 = f13_local0.anchors
		local f13_local4 = f13_local0.positions
		f13_local1:SetAnchorsAndPosition( f13_local3.left, f13_local3.right, f13_local3.top, f13_local3.bot, f13_local4.left, f13_local4.right, f13_local4.top, f13_local4.bot )
		f13_local1:setPriority( f13_arg1.categoryIndex - #f13_arg1 - 1 )
		if f13_arg1.asset then
			f13_local1.ItemImage:setImage( RegisterMaterial( f13_arg1.asset ) )
		end
		f4_arg0.categoryButtonsContainer:addElement( f13_local1 )
		f13_local1:registerEventHandler( "categoryTimerUpdate", function ( element, event )
			local f14_local0 = f13_arg0.items[1]
			if not f14_local0.usesFirstPartyStore then
				if f13_arg0.justForYou then
					if f13_arg0.categoryIndex == f13_arg0._selectedCategory then
						if f14_local0.emptyCategory then
							ACTIONS.AnimateSequence( f13_arg0.NoMoreItemsMessage, "Message" )
							f13_arg0.NoMoreItemsMessage.Title:setText( Engine.CBBHFCGDIC( "MENU/BUNDLE_BUY_THROUGH_MESSAGE" ) )
							f13_arg0.NoMoreItemsMessage:SetAlpha( 1 )
							ACTIONS.AnimateSequence( element, "CategoryEmpty" )
						else
							f13_arg0.NoMoreItemsMessage:SetAlpha( 0 )
							ACTIONS.AnimateSequence( element, "CategoryNotEmpty" )
						end
					end
				else
					local f14_local1, f14_local2, f14_local3 = STORE.GetCategoryTimeLeft( f13_arg0.timerPubVar )
					if not f13_arg0._timerValue and f14_local3 ~= "" then
						f13_arg0._timerValue = f14_local3
					end
					local f14_local4 = Dvar.DHEEJCCJBH( f13_arg0.idPubVar ) or ""
					if not f13_arg0._idPubVarString and f14_local4 ~= "" then
						f13_arg0._idPubVarString = f14_local4
					end
					local f14_local5 = f14_local1 <= 0
					if f13_arg0.categoryIndex == f13_arg0._selectedCategory then
						if f14_local0.emptyCategory then
							ACTIONS.AnimateSequence( f13_arg0.NoMoreItemsMessage, "Message" )
							f13_arg0.NoMoreItemsMessage.Title:setText( Engine.CBBHFCGDIC( "MENU/BUNDLE_BUY_THROUGH_MESSAGE" ) )
							f13_arg0.NoMoreItemsMessage:SetAlpha( 1 )
						elseif f14_local0.emptyCategory then
							ACTIONS.AnimateSequence( f13_arg0.NoMoreItemsMessage, "Message" )
							f13_arg0.NoMoreItemsMessage.Title:setText( Engine.CBBHFCGDIC( "MENU/BUNDLE_BUY_THROUGH_MESSAGE" ) )
							f13_arg0.NoMoreItemsMessage:SetAlpha( 1 )
						else
							f13_arg0.NoMoreItemsMessage:SetAlpha( 0 )
						end
					end
					if f14_local0.emptyCategory then
						ACTIONS.AnimateSequence( element, "CategoryEmpty" )
					else
						ACTIONS.AnimateSequence( element, "CategoryNotEmpty" )
					end
					if not (not f13_arg0._timerValue or f13_arg0._timerValue == f14_local3) or f13_arg0._idPubVarString and f13_arg0._idPubVarString ~= f14_local4 then
						f13_arg0( f13_arg0, f13_arg0, f13_arg0 )
						f13_arg0( f13_arg0 )
						if f13_arg0.categoryIndex == f13_arg0._selectedCategory then
							f13_arg0( f13_arg0, #f13_arg0.items )
						end
						f13_arg0._timerValue = f14_local3
						f13_arg0._idPubVarString = f13_arg0.idPubVarString
					end
				end
			elseif f13_arg0.categoryIndex == f13_arg0._selectedCategory then
				f13_arg0.NoMoreItemsMessage:SetAlpha( 0 )
			end
			if element.NewItemNotification and STORE.CategoryHasNewItems( f13_arg0, f13_arg0 ) then
				element.NewItemNotification:SetAlpha( 1 )
			else
				element.NewItemNotification:SetAlpha( 0 )
			end
		end )
		return f13_local1
	end
	
	local f4_local27 = Engine.EHGIGBJJC( Store.EHGIGBJJC() )
	local f4_local28 = STORE.GetCategoryData( f4_arg1 )
	f4_arg0._allCategoryData = f4_local28
	if CONDITIONS.PostSeasonAndMagma() then
		TrimForCortezCategory( f4_arg0 )
	end
	f4_arg0._recommendations = STORE.CheckForPersonalRecommendations( f4_arg1 )
	f4_arg0._categoryIndex = nil
	f4_arg0._currentButton = nil
	if not f4_arg0._recommendations then
		f4_arg0.recommendationData = {
			isEnabled = false
		}
	end
	for f4_local29 = 1, #f4_local28, 1 do
		local f4_local32 = f4_local28[f4_local29]
		f4_local32.items = f4_local32.items or {}
		f0_local0( f4_arg0, f4_arg1, f4_local32 )
	end
	f0_local0( f4_arg0 )
	f4_arg0.StoreEmpty:registerEventHandler( "categoryTimerUpdate", function ( element, event )
		f4_arg0( f4_arg0 )
	end )
	local f4_local29 = f4_local27.layoutType
	local f4_local30 = f4_local5( f4_local29 )
	QUARTERMASTER.RecordStoreEnterEvent( f4_arg1, f4_local29, f4_arg0.recommendationData )
	f4_local25( f4_local29 )
	if f4_local30.storeCustomizations then
		f4_local6( f4_local30.storeCustomizations.pre, f4_local28, f4_local30 )
	end
	for f4_local31 = 1, #f4_local28, 1 do
		local f4_local34 = f4_local28[f4_local31]
		f4_local34.categoryIndex = f4_local31
		if f4_local34.name then
			local f4_local35 = f4_local26( f4_local34.layoutType or f4_local29, f4_local34 )
			f4_local24( f4_local35, f4_local34.layoutType or f4_local29, f4_local30.categoryButton, f4_local34 )
			f4_local6( f4_local30.categoryButton.buttonCustomizations, f4_local34, f4_local30, {
				categoryButton = f4_local35
			} )
			f4_local35:addEventHandler( "button_over", function ( f11_arg0, f11_arg1 )
				f4_arg0._currentButton = f11_arg0
				f4_arg0._categoryIndex = f4_arg0
			end )
		end
	end
	if f4_local30.storeCustomizations then
		f4_local6( f4_local30.storeCustomizations.post, f4_local28, f4_local30, {
			buttonToFocus = f4_arg2.buttonToFocus
		} )
	end
	f4_arg0.BillboardGrid:SetNumRows( 1 )
	f4_arg0.BillboardGrid:SetNumColumns( 0 )
	local f4_local31 = LUI.UITimer.new( {
		interval = 1000,
		event = "categoryTimerUpdate"
	} )
	f4_local31.id = "timer"
	f4_arg0:addElement( f4_local31 )
	local f4_local33 = LUI.UITimer.new( {
		event = "autoScrollTimerUpdate",
		interval = f0_local0
	} )
	f4_local33.id = "autoScrollTimer"
	f4_arg0:addElement( f4_local33 )
	f4_arg0._autoScrollEnabled = true
	f4_arg0:registerEventHandler( "autoScrollTimerUpdate", function ( element, event )
		if f4_arg0.ChangeSelection and f4_arg0._autoScrollEnabled then
			f4_arg0.ChangeSelection( f4_arg0._scrollDirection.RIGHT, false )
		end
	end )
	f4_arg0._autoScrollEnabledTimerHolder = LUI.UIElement.new()
	f4_arg0:addElement( f4_arg0._autoScrollEnabledTimerHolder )
	f4_arg0.DisableAutoScrollTimer = function ()
		f4_arg0._autoScrollEnabled = false
		local f8_local0 = f4_arg0._autoScrollEnabledTimerHolder:Wait( Dvar.CFHDGABACF( "NLONMPSRPP" ), true )
		f8_local0.onComplete = function ()
			f8_local0._autoScrollEnabled = true
		end
		
	end
	
	f4_arg0.bindButton:addEventHandler( "button_left_stick", function ( f7_arg0, f7_arg1 )
		if Dvar.IBEGCHEFE( "OLNMSNSTKS" ) then
			LUI.FlowManager.RequestPopupMenu( f4_arg0, "CreatorCodePopup", true, f4_arg0, false )
		end
	end )
	f4_arg0.bindButton:addEventHandler( "button_alt1", function ( f6_arg0, f6_arg1 )
		f4_arg0._startPurchaseImmediately = true
		f4_arg0.BillboardCategoryButtonAction( f4_arg0._currentButton, f6_arg1, f4_arg0._allCategoryData[f4_arg0._categoryIndex], f4_arg0 )
	end )
	f4_arg0:addEventHandler( "gamepad_button", function ( f5_arg0, f5_arg1 )
		if f5_arg1.controller ~= f4_arg0 and (f5_arg1.button == "primary" or f5_arg1.button == "alt1" or f5_arg1.button == "left_trigger" or f5_arg1.button == "right_trigger" or f5_arg1.button == "left" or f5_arg1.button == "right") then
			return true
		else
			
		end
	end )
end

function MPStoreBillboardList( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "MPStoreBillboardList"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local Background = nil
	
	Background = LUI.UIImage.new()
	Background.id = "Background"
	Background:SetRGBFromInt( 0, 0 )
	Background:SetAlpha( 0.9, 0 )
	Background:setImage( RegisterMaterial( "widg_gradient_bottom_to_top" ), 0 )
	self:addElement( Background )
	self.Background = Background
	
	local BillboardGrid = nil
	
	BillboardGrid = LUI.UIGrid.new( {
		scrollingThresholdX = 1,
		maxVisibleRows = 1,
		maxVelocity = 5000,
		adjustSizeToContent = false,
		scrollingThresholdY = 1,
		wrapX = true,
		maxVisibleColumns = 1,
		wrapY = false,
		arrowsVerticalOffset = 0,
		buildArrowsLabel = false,
		springCoefficient = 400,
		controllerIndex = f1_local1,
		buildChild = function ()
			return MenuBuilder.BuildRegisteredType( "StoreBillboardItem", {
				controllerIndex = menu
			} )
		end,
		refreshChild = function ( f2_arg0, f2_arg1, f2_arg2 )
			
		end,
		primaryAxis = LUI.DIRECTION.horizontal,
		spacingX = _1080p * 0,
		spacingY = _1080p * 0,
		columnWidth = _1080p * 1920,
		rowHeight = _1080p * 580,
		horizontalAlignment = LUI.Alignment.Left,
		verticalAlignment = LUI.Alignment.Top
	} )
	BillboardGrid.id = "BillboardGrid"
	BillboardGrid:SetAlpha( 0, 0 )
	BillboardGrid:setUseStencil( true )
	BillboardGrid:SetAnchorsAndPosition( 0, 0, 0.5, 0.5, 0, 0, _1080p * -290, _1080p * 290 )
	self:addElement( BillboardGrid )
	self.BillboardGrid = BillboardGrid
	
	local Overlay = nil
	
	Overlay = LUI.UIImage.new()
	Overlay.id = "Overlay"
	Overlay:SetRGBFromInt( 0, 0 )
	Overlay:SetAlpha( 0.8, 0 )
	Overlay:setImage( RegisterMaterial( "widg_gradient_bottom_to_top" ), 0 )
	Overlay:SetAnchorsAndPosition( 0, 0, 0.5, 0.5, 0, 0, _1080p * 100, _1080p * 290 )
	self:addElement( Overlay )
	self.Overlay = Overlay
	
	local BillboardFocusArea = nil
	
	BillboardFocusArea = MenuBuilder.BuildRegisteredType( "BillboardFocusArea", {
		controllerIndex = f1_local1
	} )
	BillboardFocusArea.id = "BillboardFocusArea"
	BillboardFocusArea:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -960, _1080p * 960, _1080p * -290, _1080p * 290 )
	self:addElement( BillboardFocusArea )
	self.BillboardFocusArea = BillboardFocusArea
	
	local BillboardArrows = nil
	
	BillboardArrows = MenuBuilder.BuildRegisteredType( "BillboardArrows", {
		controllerIndex = f1_local1
	} )
	BillboardArrows.id = "BillboardArrows"
	BillboardArrows:SetAnchorsAndPosition( 0, 0, 0.5, 0.5, 0, 0, _1080p * -290, _1080p * 290 )
	self:addElement( BillboardArrows )
	self.BillboardArrows = BillboardArrows
	
	local PipsWithNavigation = nil
	
	PipsWithNavigation = MenuBuilder.BuildRegisteredType( "PipsWithNavigation", {
		controllerIndex = f1_local1
	} )
	PipsWithNavigation.id = "PipsWithNavigation"
	PipsWithNavigation:SetAlpha( 0, 0 )
	PipsWithNavigation:SetScale( 0.5, 0 )
	PipsWithNavigation:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -128, _1080p * 128, _1080p * 200, _1080p * 232 )
	self:addElement( PipsWithNavigation )
	self.PipsWithNavigation = PipsWithNavigation
	
	local NoMoreItemsMessage = nil
	
	NoMoreItemsMessage = MenuBuilder.BuildRegisteredType( "NoMoreItemsMessage", {
		controllerIndex = f1_local1
	} )
	NoMoreItemsMessage.id = "NoMoreItemsMessage"
	NoMoreItemsMessage:SetAlpha( 0, 0 )
	NoMoreItemsMessage:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -512, _1080p * 512, _1080p * -40, _1080p * 40 )
	self:addElement( NoMoreItemsMessage )
	self.NoMoreItemsMessage = NoMoreItemsMessage
	
	local StoreEmpty = nil
	
	StoreEmpty = MenuBuilder.BuildRegisteredType( "EventBanner", {
		controllerIndex = f1_local1
	} )
	StoreEmpty.id = "StoreEmpty"
	StoreEmpty:SetAlpha( 0, 0 )
	StoreEmpty.Backer:SetRGBFromTable( SWATCHES.Store.NoItemBGAlt, 0 )
	StoreEmpty.Node:SetRGBFromTable( SWATCHES.Store.NoItemTimer, 0 )
	StoreEmpty:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 246, _1080p * 196, _1080p * 230 )
	self:addElement( StoreEmpty )
	self.StoreEmpty = StoreEmpty
	
	local CategoryLine = nil
	
	CategoryLine = LUI.UIImage.new()
	CategoryLine.id = "CategoryLine"
	CategoryLine:SetRGBFromTable( SWATCHES.genericMenu.CategoryHeader, 0 )
	CategoryLine:setImage( RegisterMaterial( "widg_gradient_left_to_right" ), 0 )
	CategoryLine:SetAnchorsAndPosition( 0, 0, 0.5, 0.5, 0, _1080p * -700, _1080p * 240, _1080p * 241 )
	self:addElement( CategoryLine )
	self.CategoryLine = CategoryLine
	
	local CategoryText = nil
	
	CategoryText = LUI.UIStyledText.new()
	CategoryText.id = "CategoryText"
	CategoryText:SetRGBFromTable( SWATCHES.genericMenu.CategoryHeader, 0 )
	CategoryText:setText( ToUpperCase( Engine.CBBHFCGDIC( "MENU/CATEGORIES" ) ), 0 )
	CategoryText:SetFont( FONTS.GetFont( FONTS.MainBold.File ) )
	CategoryText:SetWordWrap( false )
	CategoryText:SetAlignment( LUI.Alignment.Left )
	CategoryText:SetOptOutRightToLeftAlignmentFlip( true )
	CategoryText:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, _1080p * 70, _1080p * 570, _1080p * 209, _1080p * 239 )
	self:addElement( CategoryText )
	self.CategoryText = CategoryText
	
	local SupportingCreatorCode = nil
	
	SupportingCreatorCode = MenuBuilder.BuildRegisteredType( "SupportingCreatorCode", {
		controllerIndex = f1_local1
	} )
	SupportingCreatorCode.id = "SupportingCreatorCode"
	SupportingCreatorCode:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1162, _1080p * 1522, _1080p * 172, _1080p * 196 )
	self:addElement( SupportingCreatorCode )
	self.SupportingCreatorCode = SupportingCreatorCode
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "MPStoreBillboardList", MPStoreBillboardList )
LockTable( _M )
