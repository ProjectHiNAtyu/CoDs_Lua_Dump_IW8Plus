-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
MenuUtils = MenuUtils or {}
MenuUtils.MenusBlockingConnectionPopups = {
	nil,
	"LeaveGamePopup",
	"LeavePublicMPLobbyPopup",
	"LeavePrivateMPLobbyPopup",
	"MPPauseMenu"
}
MenuUtils.FENCEDLCTIMER = 5000
MenuUtils.AddHelperBarButtonPrompts = function ( f11_arg0, f11_arg1, f11_arg2 )
	local self = f11_arg0._bindButton
	if not self then
		self = LUI.UIBindButton.new()
		f11_arg0._bindButton = self
		f11_arg0:addElement( self )
		assert( f11_arg1 )
		self.id = f11_arg1
	end
	local f11_local1 = f11_arg0.ButtonHelperBar
	assert( f11_local1 )
	local f11_local2 = f11_local1.ButtonHelperText
	assert( f11_local2 )
	assert( f11_arg2 )
	for f11_local6, f11_local7 in ipairs( f11_arg2 ) do
		local f11_local8 = f11_local7.helper_text
		assert( f11_local8 )
		local f11_local9 = f11_local7.button_ref
		assert( f11_local9 )
		local f11_local10 = f11_local7.side
		local f11_local11 = f11_local7.gamepad_only
		assert( f11_local11 ~= nil )
		f11_local2:PushButtonPrompt( {
			helper_text = f11_local8,
			button_ref = f11_local9,
			side = f11_local10,
			gamepad_only = f11_local11
		} )
		local f11_local12 = f11_local7.EventCallback
		if f11_local12 then
			self:addEventHandler( f11_local9, f11_local12 )
		end
	end
end

MenuUtils.AddDismissPauseMenuKBMHandler = function ( f9_arg0 )
	f9_arg0:addEventHandler( "gamepad_button", function ( f10_arg0, f10_arg1 )
		if f10_arg1.down and f10_arg1.button == "dismiss_pause_menu" and not Engine[0x12586A3F4FB490E]() then
			if Engine[0x74423E76DECE3E4]() then
				ACTIONS.ResumeGame( f10_arg0 )
			end
			local f10_local0 = Engine[0xEE6F69FEA944B13]()
			f10_local0 = f10_local0.flowManager:GetStackTop()
			LUI.FlowManager.RequestCloseAllMenus( f10_local0.name, true, f10_arg1.controller, true )
			return true
		else
			return false
		end
	end )
end

MenuUtils.CanShowConnectionPopups = function ()
	local f8_local0 = true
	local f8_local1 = Engine[0xEE6F69FEA944B13]()
	f8_local1 = f8_local1.flowManager:GetStackTop()
	if f8_local1 then
		for f8_local5, f8_local6 in ipairs( MenuUtils.MenusBlockingConnectionPopups ) do
			if f8_local6 == f8_local1.name then
				f8_local0 = false
				break
			end
		end
	end
	return f8_local0
end

MenuUtils.GetOrdinalPlacment = function ( f7_arg0 )
	local f7_local0 = ""
	if f7_arg0 < 100 then
		if f7_arg0 == 11 or f7_arg0 == 12 or f7_arg0 == 13 then
			f7_local0 = "MP/FOURTH_PLACE"
		elseif f7_arg0 % 10 == 1 then
			f7_local0 = "MP/FIRST_PLACE"
		elseif f7_arg0 % 10 == 2 then
			f7_local0 = "MP/SECOND_PLACE"
		elseif f7_arg0 % 10 == 3 then
			f7_local0 = "MP/THIRD_PLACE"
		else
			f7_local0 = "MP/FOURTH_PLACE"
		end
	elseif 100 <= f7_arg0 then
		if f7_arg0 % 100 == 11 or f7_arg0 % 100 == 12 or f7_arg0 % 100 == 13 then
			f7_local0 = "MP/FOURTH_PLACE"
		elseif f7_arg0 % 100 == 1 then
			f7_local0 = "MP/FIRST_PLACE"
		elseif f7_arg0 % 100 == 2 then
			f7_local0 = "MP/SECOND_PLACE"
		elseif f7_arg0 % 100 == 3 then
			f7_local0 = "MP/THIRD_PLACE"
		else
			f7_local0 = "MP/FOURTH_PLACE"
		end
	end
	return Engine[0xED84C33EC5F01EA]( f7_local0, f7_arg0 )
end

MenuUtils.GetOrdinalNumber = function ( f6_arg0, f6_arg1 )
	local f6_local0
	if f6_arg1 then
		f6_local0 = "_FEM"
	else
		f6_local0 = ""
	end
	if f6_arg0 == 1 then
		return Engine[0xED84C33EC5F01EA]( "MP/FIRST_PLACE" .. f6_local0, f6_arg0 )
	elseif f6_arg0 == 2 then
		return Engine[0xED84C33EC5F01EA]( "MP/SECOND_PLACE" .. f6_local0, f6_arg0 )
	elseif f6_arg0 == 3 then
		return Engine[0xED84C33EC5F01EA]( "MP/THIRD_PLACE" .. f6_local0, f6_arg0 )
	else
		return Engine[0xED84C33EC5F01EA]( "MP/FOURTH_PLACE" .. f6_local0, f6_arg0 )
	end
end

MenuUtils.IsSceneTransitioning = function ()
	return #Dvar[0x54084D7CA2317BB]( "#x3d0538ecf9605f053" ) ~= 0
end

MenuUtils.SetupSceneChangeCallback = function ( f3_arg0, f3_arg1 )
	local f3_local0 = assert
	local f3_local1
	if f3_arg1 then
		f3_local1 = f3_arg1
	else
		f3_local1 = type( f3_arg1 ) == "function"
	end
	f3_local0( f3_local1 )
	f3_arg0._sceneTimer = LUI.UITimer.new( {
		interval = 50,
		event = "check_scene_transition"
	} )
	f3_arg0:addElement( f3_arg0._sceneTimer )
	f3_arg0:registerEventHandler( "check_scene_transition", function ( element, event )
		if not MenuUtils.IsSceneTransitioning() and Engine[0x283B38F2501D924]() then
			element._sceneTimer:closeTree()
			element._sceneTimer = nil
			f3_arg0()
		end
		return true
	end )
end

MenuUtils.WaitForEntitySystem = function ( f1_arg0, f1_arg1 )
	local f1_local0 = assert
	local f1_local1
	if f1_arg1 then
		f1_local1 = f1_arg1
	else
		f1_local1 = type( f1_arg1 ) == "function"
	end
	f1_local0( f1_local1 )
	f1_arg0._entitySystemTimer = LUI.UITimer.new( {
		interval = -28,
		event = "check_entity_system_allocated"
	} )
	f1_arg0:addElement( f1_arg0._entitySystemTimer )
	f1_arg0:registerEventHandler( "check_entity_system_allocated", function ( element, event )
		if Engine[0x283B38F2501D924]() then
			element._entitySystemTimer:closeTree()
			element._entitySystemTimer = nil
			f1_arg0()
		end
		return true
	end )
end

