-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
MP_COMMON = MP_COMMON or {}
MP_COMMON.postShipFlags = {
	forcedWZControllerLayoutReset = 1,
	overkillSwap = 0
}
MP_COMMON.SetupOnline = function ()
	Dvar.DHEGHJJJHI( "LTSNLQNRKO", true )
	if Dvar.IBEGCHEFE( "LOMTKQTRTM" ) then
		Dvar.DHEGHJJJHI( "LOMTKQTRTM", false )
		Engine.EBIDFIDHIE( "set remove_mlg_rules 1" )
	end
end

MP_COMMON.SetupParty = function ()
	local f13_local0 = Engine.IJEBHJIJF()
	if not Lobby.GFFECBCCF() then
		Engine.DAGFFDGFII( "xstartprivateparty", f13_local0 )
	end
end

MP_COMMON.StopGameLobbyAndWakePrivateParty = function ()
	Engine.DAGFFDGFII( "xstopparty", Engine.IJEBHJIJF() )
end

MP_COMMON.SetupPrivateMatch = function ()
	if not Engine.DAFGFCFHJI() then
		Engine.DAGFFDGFII( "xstartprivatematch" )
	end
end

MP_COMMON.SetupStreaming = function ( f10_arg0, f10_arg1 )
	Streaming.BDDBGGIC( true )
	f10_arg0:addElement( MP.GetGameModeMaterialStreamer() )
	f10_arg0:addElement( Lobby.GetMPMapMaterialStreamer() )
	f10_arg0:addElement( Lobby.GetMPMapPreloadStreamer( f10_arg1 ) )
	MP_COMMON.LoadStreamingModels( f10_arg1, LOADOUT.GetFavoriteLoadoutIndex( f10_arg1 ) )
end

MP_COMMON.LoadStreamingModels = function ( f9_arg0, f9_arg1, f9_arg2 )
	local f9_local0 = PlayerData.BFFBGAJGD( f9_arg0, LOADOUT.GetLoadoutStatsGroup() )
	f9_local0 = f9_local0.squadMembers.loadouts
	if not f9_arg2 then
		local f9_local1 = {}
		for f9_local2 = 0, 1, 1 do
			local f9_local5 = f9_local0[f9_arg1].weaponSetups[f9_local2]
			local f9_local6 = WEAPON.GetWeaponModelNameFromPlayerData( f9_local5.weapon:get(), f9_local5, {
				includeCamos = true,
				includeAttachments = true,
				includeStickers = true,
				controllerIndex = f9_arg0
			} )
			if f9_local6 and 0 < #f9_local6 then
				table.insert( f9_local1, f9_local6 )
			end
		end
		local f9_local3 = WATCH.GetFullModelName( WATCH.GetEquippedWatch( f9_arg0 ) )
		if f9_local3 and 0 < #f9_local3 then
			table.insert( f9_local1, f9_local3 )
		end
		if 0 < #f9_local1 then
			FrontEndScene.RequestWeaponViewModels( f9_local1, f9_arg0 )
		end
	end
	local f9_local1 = {}
	local f9_local2 = {}
	for f9_local3 = 0, 1, 1 do
		local f9_local6, f9_local8 = OPERATOR.GetEquippedOperatorSkin( f9_arg0, f9_local3 )
		if f9_local6 and f9_local6 ~= "" then
			table.insert( f9_local1, f9_local6 )
		end
		if f9_local8 and f9_local8 ~= "" then
			table.insert( f9_local2, f9_local8 )
		end
	end
	if 0 < #f9_local1 and 0 < #f9_local2 then
		FrontEndScene.RequestBodyModels( f9_local1 )
		FrontEndScene.RequestHeadModels( f9_local2 )
	end
end

MP_COMMON.ShouldShowLeaveMenuConfirmPopupIfHost = function ()
	local f8_local0 = true
	if CONDITIONS.ArePartiesEnabledInMainMenu() and Lobby.BGIADHIHAG() then
		f8_local0 = false
	end
	return f8_local0
end

MP_COMMON.TriggerLeaveMainGamemodeMenu = function ( f7_arg0, f7_arg1 )
	Lobby.LeaveCommonMPMainMenu( f7_arg0, f7_arg1.controller )
	return true
end

MP_COMMON.LeavePartyAndStayInMenu = function ( f6_arg0, f6_arg1 )
	LUI.FlowManager.RequestPopupMenu( f6_arg0, "LeavePrivatePartyConfirmPopup", true, f6_arg1.controller, false, {
		menu = f6_arg0
	} )
	return true
end

MP_COMMON.RefreshDataForFirstController = function ()
	if 0 < Engine.JEDFGECDJ() then
		local f5_local0 = Engine.IJEBHJIJF()
		if f5_local0 and Engine.CDCCDDJAJJ( f5_local0 ) then
			Engine.BJGGCHBAGJ()
		end
	end
end

MP_COMMON.IsMatchRulesCODCastingEnabled = function ( f4_arg0 )
	local f4_local0 = true
	if MatchRules.EAIEFBHGJ() then
		f4_local0 = MatchRules.BIJEDCBCBH( "commonOption", "codcasterEnabled" )
	end
	local f4_local1 = false
	if f4_arg0 then
		f4_local1 = 1 < Engine.JEDFGECDJ()
	end
	local f4_local2
	if f4_local0 then
		f4_local2 = f4_local0
	else
		f4_local2 = not f4_local1
	end
	return f4_local2
end

MP_COMMON.IsMatchRulesTeamAssignmentEnabled = function ()
	if MatchRules.EAIEFBHGJ() then
		return MatchRules.BIJEDCBCBH( "commonOption", "teamAssignmentAllowed" )
	else
		return true
	end
end

MP_COMMON.ValidatePlayerData = function ( f2_arg0, f2_arg1 )
	PERK.ValidatePlayerData( f2_arg0, f2_arg1 )
	MP_COMMON.ResetWZControllerLayout( f2_arg0, f2_arg1 )
end

MP_COMMON.ResetWZControllerLayout = function ( f1_arg0, f1_arg1 )
	local f1_local0 = PlayerData.BFFBGAJGD( f1_arg0, CoD.StatsGroup.NonGame, CoD.PlayMode.Core, f1_arg1 )
	local f1_local1 = MP_COMMON.postShipFlags.forcedWZControllerLayoutReset
	if f1_local0.postShipFlags[f1_local1]:get() < 1 then
		local f1_local2 = Engine.BECCFCBIAA( "gpadBRButtonsConfig", f1_arg0 )
		if f1_local2 == "buttons_br_ping_lb" or f1_local2 == "buttons_br_ping_lb_alt" then
			Engine.CBCIHEGADA( Engine.BECCFCBIAA( "gpadButtonsConfig", f1_arg0 ), f1_arg0, true )
		end
		f1_local0.postShipFlags[f1_local1]:set( 1 )
	end
end

