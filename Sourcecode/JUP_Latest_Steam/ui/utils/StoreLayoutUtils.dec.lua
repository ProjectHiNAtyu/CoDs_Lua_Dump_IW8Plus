-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:02
StoreLayoutUtils = StoreLayoutUtils or {}
StoreLayoutUtils.TRANSITION_DURATIONS = {
	TRANSITION_DURATION = 200,
	SNAP = 0
}
StoreLayoutUtils.BUNDLE_BUTTON_DEFAULT_KBM_VIEW_PROMPT = 0x908817112D77DCC
StoreLayoutUtils.BUNDLE_BUTTON_DEFAULT_GAMEPAD_VIEW_PROMPT = 0x5685178F1B6C665
StoreLayoutUtils.CustomBundles = {
	MyBundles = {
		[0x725EE6B9383E87E] = true,
		icon = 0xA783D5F195D8927,
		name = Engine[0xED84C33EC5F01EA]( 0x769F50E03C14D30 ),
		onClickCallback = function ( f70_arg0 )
			LUI.FlowManager.RequestAddMenu( "MyBundleSelect", false, f70_arg0, false )
			Engine[0xC4146BA76D0F982]( SOUND_SETS.default.action )
		end
	},
	Search = {
		[0x725EE6B9383E87E] = true,
		name = Engine[0xED84C33EC5F01EA]( 0x5CC7EF8E79C3D89 ),
		onClickCallback = function ( f69_arg0 )
			
		end
	},
	Wishlist = {
		[0x725EE6B9383E87E] = true,
		background = 0x882B6A4C86233B6,
		[0x5D3A4189172A6E5] = 0x516288E20E12A77,
		[0x17C7CA4B25A7F1E] = 0xC9648FB451FD1BD,
		icon = 0xF16481C81725032,
		name = Engine[0xED84C33EC5F01EA]( 0x25474FAA372B082 ),
		onClickCallback = function ( f68_arg0 )
			LUI.FlowManager.RequestAddMenu( "WishlistSelect", false, f68_arg0, false, {
				categoryName = STORE.WishlistCategoryName
			} )
		end
	},
	Creator = {
		[0x725EE6B9383E87E] = true,
		name = Engine[0xED84C33EC5F01EA]( 0x513BA2FB1EDCEB7 ),
		onClickCallback = function ( f67_arg0 )
			
		end
	},
	EventPlus = {
		[0x725EE6B9383E87E] = true,
		name = Engine[0xED84C33EC5F01EA]( 0x513BA2FB1EDCEB7 ),
		onClickCallback = function ( f66_arg0 )
			SEASONAL_EVENT.OpenEventPlusMenu( f66_arg0 )
		end
	},
	BattlePass = {
		[0x725EE6B9383E87E] = true,
		name = Engine[0xED84C33EC5F01EA]( 0x513BA2FB1EDCEB7 ),
		onClickCallback = function ( f65_arg0 )
			local f65_local0 = StoreLayoutUtils.CustomBundles.BattlePass
			local f65_local1
			if BATTLEMAP.UseJUPBattleMapDesign() then
				f65_local1 = "JupBattlePassPurchasePopup"
			else
				f65_local1 = "BattlePassPurchasePopup"
			end
			LUI.FlowManager.RequestAddMenu( f65_local1, true, f65_arg0, false, {
				fromStore = true,
				categoryName = f65_local0.categoryName,
				categoryRowIndex = f65_local0.categoryRowIndex,
				categoryButtonIndex = f65_local0.categoryButtonIndex
			}, true )
		end
	},
	BlackCell = {
		[0x725EE6B9383E87E] = true,
		name = Engine[0xED84C33EC5F01EA]( 0x513BA2FB1EDCEB7 ),
		onClickCallback = function ( f64_arg0 )
			local f64_local0 = StoreLayoutUtils.CustomBundles.BlackCell
			local f64_local1
			if BATTLEMAP.UseJUPBattleMapDesign() then
				f64_local1 = "JupBattlePassPurchasePopup"
			else
				f64_local1 = "BattlePassPurchasePopup"
			end
			LUI.FlowManager.RequestAddMenu( f64_local1, true, f64_arg0, false, {
				fromStore = true,
				categoryName = f64_local0.categoryName,
				categoryRowIndex = f64_local0.categoryRowIndex,
				categoryButtonIndex = f64_local0.categoryButtonIndex
			}, true )
		end
	},
	CDL = {
		[0x725EE6B9383E87E] = true,
		background = 0xE875E55722C64A1,
		[0x5D3A4189172A6E5] = 0xA6761044D5A4328,
		[0x17C7CA4B25A7F1E] = 0x7AD18D031EC4D80,
		name = Engine[0xED84C33EC5F01EA]( 0xEE5EB3CB49BDA94 ),
		onClickCallback = function ( f63_arg0 )
			LUI.FlowManager.RequestAddMenu( "StoreCDLMenu", false, f63_arg0, false )
		end
	},
	QR = {
		[0x725EE6B9383E87E] = true,
		background = 0x610D1F07E52DCF3,
		[0x5D3A4189172A6E5] = 0x8031FF8259E926F,
		[0x17C7CA4B25A7F1E] = 0x23A2F6CD18E7DB5,
		name = Engine[0xED84C33EC5F01EA]( 0x3928F1ECE535E5F ),
		onClickCallback = function ( f62_arg0 )
			LUI.FlowManager.RequestAddMenu( "CodeConductMore", true, f62_arg0, nil, {
				configCODShop = true
			}, true )
		end
	},
	ComingSoon = {
		[0x725EE6B9383E87E] = true,
		name = Engine[0xED84C33EC5F01EA]( 0x2AA9CE0F99CCD0 ),
		onClickCallback = function ( f61_arg0 )
			
		end
	}
}
StoreLayoutUtils.Row = {}
StoreLayoutUtils.Row.GetButtons = function ( f60_arg0 )
	return f60_arg0._buttons
end

StoreLayoutUtils.Row.AttachBaseFunctions = function ( f48_arg0, f48_arg1, f48_arg2 )
	f48_arg0.PopulateBundles = function ( f59_arg0, f59_arg1, f59_arg2, f59_arg3, f59_arg4 )
		StoreLayoutUtils.Row.PopulateBundles( f59_arg0, f59_arg1, f59_arg0.AnchorLeft, f59_arg2, f59_arg3, f59_arg4, f48_arg0 )
	end
	
	f48_arg0.GetButton = function ( f58_arg0, f58_arg1 )
		local f58_local0 = StoreLayoutUtils.Row.GetButtons( f58_arg0 )
		return f58_local0[f58_arg1]
	end
	
	f48_arg0.GetCategoryName = function ( f57_arg0 )
		return f57_arg0._categoryName
	end
	
	f48_arg0.GetButtonForSkuID = function ( f56_arg0, f56_arg1 )
		local f56_local0 = #StoreLayoutUtils.Row.GetButtons( f56_arg0 )
		for f56_local1 = 1, f56_local0, 1 do
			local f56_local4 = f56_arg0:GetButton( f56_local1 )
			if STORE.Bundles.HasSKU( f56_local4:GetBundle(), f56_arg1 ) then
				return f56_local4
			end
		end
		return nil
	end
	
	f48_arg0.GainFocusClosestToWidget = function ( f55_arg0, f55_arg1 )
		if f55_arg1._typeName == 0xD799705276B2EF7 then
			local f55_local0 = f55_arg0:GetButton( 1 )
			f55_local0:processEvent( {
				name = "gain_focus",
				controller = f48_arg0
			} )
			return f55_arg0:GetButton( 1 )
		end
		local f55_local0, f55_local1 = f55_arg1:GetCenter()
		local f55_local2 = 100000
		local f55_local3 = 1
		for f55_local7, f55_local8 in ipairs( StoreLayoutUtils.Row.GetButtons( f55_arg0 ) ) do
			local f55_local9, f55_local10 = f55_local8:GetCenter()
			local f55_local11 = math.abs( f55_local9 - f55_local0 )
			if f55_local11 < f55_local2 then
				f55_local2 = f55_local11
				f55_local3 = f55_local7
			end
		end
		f55_local4 = f55_arg0:GetButton( f55_local3 )
		f55_local4:processEvent( {
			name = "gain_focus",
			controller = f48_arg0
		} )
		return f55_arg0:GetButton( f55_local3 )
	end
	
	f48_arg0.GainFocus = function ( f54_arg0, f54_arg1, f54_arg2 )
		local f54_local0
		if not f54_arg2 then
			f54_local0 = f54_arg2
		else
			f54_local0 = StoreLayoutUtils.TRANSITION_DURATIONS.TRANSITION_DURATION
		end
		local f54_local1 = #StoreLayoutUtils.Row.GetButtons( f54_arg0 )
		if f54_local1 < f54_arg1 then
			f54_arg1 = 1
		elseif f54_arg1 < 1 then
			f54_arg1 = f54_local1
		end
		local f54_local2 = f54_arg0:GetButton( f54_arg1 )
		f54_local2:processEvent( {
			name = "gain_focus",
			controller = f48_arg0
		} )
		StoreLayoutUtils.Row.AnimateAndGoToButtonIndex( f54_arg0, f48_arg0, f54_arg0._windowSize, f54_arg1, f54_local0 )
	end
	
	f48_arg0.LoseFocus = function ( f53_arg0, f53_arg1 )
		local f53_local0 = StoreLayoutUtils.Row.GetButtons( f53_arg0 )
		f53_local0[f53_arg1]:processEvent( {
			name = "lose_focus"
		} )
	end
	
	f48_arg0.LoseFocusRow = function ( f52_arg0, f52_arg1 )
		if f52_arg0.ToggleArrows then
			f52_arg0:ToggleArrows( false )
		end
		f52_arg0._isSelected = false
	end
	
	f48_arg0.GainFocusRow = function ( f51_arg0, f51_arg1 )
		if f51_arg0.ToggleArrows then
			f51_arg0:ToggleArrows( LUI.IsLastInputKeyboardMouse( f51_arg1 ) )
		end
		f51_arg0._isSelected = true
	end
	
	f48_arg0:addEventHandler( "lose_focus", function ( f50_arg0, f50_arg1 )
		return true
	end )
	f48_arg0.CanInterractWithButton = function ( f49_arg0, f49_arg1 )
		local f49_local0 = f49_arg0._windowSize
		local f49_local1 = f49_arg0._currentHeadIndex
		local f49_local2
		if not (f49_local1 + f49_local0 <= f49_arg1) and not (f49_arg1 < f49_local1) then
			f49_local2 = LUI.IsLastInputMouseNavigation( f48_arg0 )
			if not f49_local2 then
			
			else
				return f49_local2
			end
		end
		f49_local2 = not LUI.IsLastInputMouseNavigation( f48_arg0 )
	end
	
end

StoreLayoutUtils.Row.AnimateBundleButtons = function ( f47_arg0, f47_arg1, f47_arg2, f47_arg3 )
	local f47_local0 = f47_arg0[f47_arg2]:GetAnchorsAndPosition()
	local f47_local1 = f47_local0.right - f47_local0.left
	local f47_local2 = f47_local0.left
	local f47_local3 = f47_arg1:GetAnchorsAndPosition()
	f47_local2 = f47_local2 - f47_local3.left
	for f47_local6, f47_local7 in ipairs( f47_arg0 ) do
		local f47_local8 = f47_local7:GetAnchorsAndPosition()
		local f47_local9 = f47_local8.left
		local f47_local10 = f47_local8.left - f47_local2
		f47_local7:SetLeft( f47_local10, f47_arg3, LUI.EASING.inOutQuadratic )
		f47_local7:SetRight( f47_local10 + f47_local1, f47_arg3, LUI.EASING.inOutQuadratic )
	end
end

StoreLayoutUtils.Row.PopulateBundles = function ( f46_arg0, f46_arg1, f46_arg2, f46_arg3, f46_arg4, f46_arg5, f46_arg6 )
	f46_arg0._buttons = {}
	f46_arg0._currentHeadIndex = 1
	f46_arg0._categoryName = f46_arg3
	local f46_local0 = f46_arg2:GetAnchorsAndPosition()
	f46_local0 = f46_local0.left
	for f46_local4, f46_local5 in ipairs( f46_arg5 ) do
		local f46_local6 = MenuBuilder.BuildRegisteredType( f46_arg6, {
			controllerIndex = f46_arg1
		} )
		f46_local6.id = f46_arg6 .. f46_local4
		f46_local6:SetupBundleButton( f46_arg1, f46_arg3, f46_arg4, f46_local4, f46_local5 )
		f46_arg0:addElement( f46_local6 )
		local f46_local7 = f46_local6:GetAnchorsAndPosition()
		local f46_local8 = f46_local7.right - f46_local7.left
		f46_local6:SetLeft( f46_local0 )
		f46_local6:SetRight( f46_local0 + f46_local8 )
		f46_local0 = f46_local0 + f46_local8 + 16
		table.insert( f46_arg0._buttons, f46_local6 )
	end
	StoreLayoutUtils.Row.AnimateAndGoToButtonIndex( f46_arg0, f46_arg1, f46_arg0._windowSize, 1, StoreLayoutUtils.TRANSITION_DURATIONS.SNAP )
end

StoreLayoutUtils.Row.SetupArrowEvents = function ( f42_arg0, f42_arg1, f42_arg2, f42_arg3 )
	f42_arg0._windowSize = f42_arg3
	f42_arg0.ToggleArrows = function ( f45_arg0, f45_arg1 )
		local f45_local0 = #StoreLayoutUtils.Row.GetButtons( f45_arg0 )
		f45_arg0.Left:setActionDisabledSFX( nil )
		f45_arg0.Right:setActionDisabledSFX( nil )
		local f45_local1 = f45_arg0.Left
		local f45_local2 = f45_local1
		f45_local1 = f45_local1.SetButtonDisabled
		local f45_local3
		if f45_arg1 and f45_arg0._currentHeadIndex ~= 1 then
			f45_local3 = false
		else
			f45_local3 = true
		end
		f45_local1( f45_local2, f45_local3 )
		f45_local1 = f45_arg0.Left
		f45_local2 = f45_local1
		f45_local1 = f45_local1.SetVisible
		if f45_arg1 then
			f45_local3 = f45_arg1
		else
			f45_local3 = f45_arg0._currentHeadIndex ~= 1
		end
		f45_local1( f45_local2, f45_local3 )
		f45_local1 = f45_arg0.Left
		f45_local2 = f45_local1
		f45_local1 = f45_local1.SetHandleMouse
		if f45_arg1 then
			f45_local3 = f45_arg1
		else
			f45_local3 = f45_arg0._currentHeadIndex ~= 1
		end
		f45_local1( f45_local2, f45_local3 )
		f45_local1 = f45_arg0.Right
		f45_local2 = f45_local1
		f45_local1 = f45_local1.SetButtonDisabled
		if f45_arg1 and f45_local0 > f45_arg0._currentHeadIndex + f42_arg0 - 1 then
			f45_local3 = false
		else
			f45_local3 = true
		end
		f45_local1( f45_local2, f45_local3 )
		f45_local1 = f45_arg0.Right
		f45_local2 = f45_local1
		f45_local1 = f45_local1.SetVisible
		if f45_arg1 then
			f45_local3 = f45_arg1
		else
			f45_local3 = f45_arg0._currentHeadIndex + f42_arg0 - 1 < f45_local0
		end
		f45_local1( f45_local2, f45_local3 )
		f45_local1 = f45_arg0.Right
		f45_local2 = f45_local1
		f45_local1 = f45_local1.SetHandleMouse
		if f45_arg1 then
			f45_local3 = f45_arg1
		else
			f45_local3 = f45_arg0._currentHeadIndex + f42_arg0 - 1 < f45_local0
		end
		f45_local1( f45_local2, f45_local3 )
	end
	
	f42_arg1:setPriority( 100 )
	f42_arg2:setPriority( 100 )
	f42_arg1:addEventHandler( "button_action", function ( f44_arg0, f44_arg1 )
		local f44_local0 = f44_arg0:getParent()
		StoreLayoutUtils.Row.AnimateAndGoToButtonIndex( f44_local0, f44_arg1.controller, f42_arg0, f44_local0._currentHeadIndex - f42_arg0, StoreLayoutUtils.TRANSITION_DURATIONS.TRANSITION_DURATION )
	end )
	f42_arg2:addEventHandler( "button_action", function ( f43_arg0, f43_arg1 )
		local f43_local0 = f43_arg0:getParent()
		StoreLayoutUtils.Row.AnimateAndGoToButtonIndex( f43_local0, f43_arg1.controller, f42_arg0, f43_local0._currentHeadIndex + f42_arg0, StoreLayoutUtils.TRANSITION_DURATIONS.TRANSITION_DURATION )
	end )
end

StoreLayoutUtils.Row.AnimateAndGoToButtonIndex = function ( f41_arg0, f41_arg1, f41_arg2, f41_arg3, f41_arg4 )
	local f41_local0 = StoreLayoutUtils.Row.GetButtons( f41_arg0 )
	local f41_local1 = math.floor( (f41_arg3 - 1) / f41_arg2 ) + 1
	local f41_local2 = f41_arg0._currentHeadIndex
	if f41_local1 == 1 then
		f41_arg0._currentHeadIndex = 1
	else
		f41_arg0._currentHeadIndex = (f41_local1 - 1) * f41_arg2 + 1
	end
	for f41_local10, f41_local11 in ipairs( f41_local0 ) do
		local f41_local6
		if math.min( f41_local2, f41_arg0._currentHeadIndex ) > f41_local10 or f41_local10 > math.max( f41_local2, f41_arg0._currentHeadIndex ) + f41_arg2 then
			f41_local6 = false
		else
			f41_local6 = true
		end
		local f41_local7 = f41_local11
		local f41_local8 = f41_local11.SetAlpha
		local f41_local9
		if f41_local6 then
			f41_local9 = 1
		else
			f41_local9 = 0
		end
		f41_local8( f41_local7, f41_local9 )
	end
	if f41_local2 ~= f41_arg0._currentHeadIndex then
		StoreLayoutUtils.Row.AnimateBundleButtons( f41_local0, f41_arg0.AnchorLeft, f41_arg0._currentHeadIndex, f41_arg4 )
	end
	f41_arg0:ToggleArrows( LUI.IsLastInputKeyboardMouse( f41_arg1 ) )
end

StoreLayoutUtils.Event = {}
StoreLayoutUtils.Event.RowFocusChanged = "store_row_focus_changed"
StoreLayoutUtils.Event.RowButtonFocusChanged = "store_row_button_focus_changed"
StoreLayoutUtils.Event.RowButtonWishlistClicked = "store_row_button_wishlist_clicked"
StoreLayoutUtils.Event.RefreshRowButtonLayout = "store_row_button_refresh_layout"
StoreLayoutUtils.Event.RowWheelChanged = "store_row_wheel_changed"
StoreLayoutUtils.Event.RowButtonClicked = "store_row_button_clicked"
StoreLayoutUtils.Event.RowButtonAltClicked = "store_row_button_alt_clicked"
StoreLayoutUtils.Event.PreviewBundleButtonFocusedKBM = "preview_bundle_button_focused_kbm"
StoreLayoutUtils.Button = {}
StoreLayoutUtils.Button.AttachBaseFunctions = function ( f31_arg0, f31_arg1 )
	f31_arg0.SetupBundleButton = StoreLayoutUtils.Button.SetupBundleButton
	f31_arg0.GetIndex = function ( f40_arg0 )
		return f40_arg0._buttonIndex
	end
	
	f31_arg0.GetRowIndex = function ( f39_arg0 )
		return f39_arg0._rowIndex
	end
	
	f31_arg0.GetCategoryName = function ( f38_arg0 )
		return f38_arg0._categoryName
	end
	
	f31_arg0.GetBundle = function ( f37_arg0 )
		return f37_arg0._bundle
	end
	
	f31_arg0.SetupTacticalBuildIndicators = function ( f36_arg0, f36_arg1 )
		local f36_local0 = f31_arg0.TracerIcon
		if f36_local0 then
			f36_local0 = f31_arg0.TracerAnimation
			if f36_local0 then
				f36_local0 = f31_arg0.DismembermentIcon
			end
		end
		local f36_local1
		if f36_local0 then
			f36_local1 = f36_local0
		else
			f36_local1 = STORE.UI.GetFirstWeaponDisplayData( f31_arg0, f36_arg1 )
		end
		local f36_local2
		if f36_local0 then
			if not f36_local1.hasTracerData then
				f36_local2 = not f36_local1.hasDismembermentData
			else
				f36_local2 = false
			end
		else
			f36_local2 = true
		end
		local f36_local3
		if not f36_arg1[0x725EE6B9383E87E] then
			f36_local3 = STORE.UI.CanShowMediaGalleryLayout( f36_arg1 )
		else
			f36_local3 = false
		end
		if f36_local3 and f36_local2 then
			ACTIONS.AnimateSequence( f31_arg0, "HideItemAmountAndTacticalBuildIndicators" )
			if f31_arg0.TracerAnimation then
				f31_arg0.TracerAnimation:closeTree()
				f31_arg0.TracerAnimation = nil
			end
			if f31_arg0.TracerIcon then
				f31_arg0.TracerIcon:closeTree()
				f31_arg0.TracerIcon = nil
			end
			if f31_arg0.DismembermentIcon then
				f31_arg0.DismembermentIcon:closeTree()
				f31_arg0.DismembermentIcon = nil
			end
			return 
		elseif f36_local3 then
			ACTIONS.AnimateSequence( f31_arg0, "HideItemAmount" )
		elseif f36_local2 then
			ACTIONS.AnimateSequence( f31_arg0, "HideTacticalBuildIndicators" )
			if f31_arg0.TracerAnimation then
				f31_arg0.TracerAnimation:closeTree()
				f31_arg0.TracerAnimation = nil
			end
			if f31_arg0.TracerIcon then
				f31_arg0.TracerIcon:closeTree()
				f31_arg0.TracerIcon = nil
			end
			if f31_arg0.DismembermentIcon then
				f31_arg0.DismembermentIcon:closeTree()
				f31_arg0.DismembermentIcon = nil
			end
			return 
		end
		local f36_local4 = CONDITIONS.ShouldStoreShowVfx()
		f31_arg0.TracerAnimation:SetVisible( f36_local1.hasTracerData and f36_local4 )
		f31_arg0.TracerIcon:SetVisible( f36_local1.hasTracerData and f36_local4 )
		f31_arg0.DismembermentIcon:SetVisible( f36_local1.hasDismembermentData and f36_local4 )
		f31_arg0.TracerAnimation:setImage( f36_local1.tracerAnimation )
		f31_arg0.TracerIcon:setImage( f36_local1.tracerIcon )
		if f36_local1.tracerColor then
			f31_arg0.TracerIcon:SetRGB( f36_local1.tracerColor )
		end
		f31_arg0.DismembermentIcon:setImage( f36_local1.dismembermentIcon )
		if f36_local1.dismembermentColor then
			f31_arg0.DismembermentIcon:SetRGB( f36_local1.dismembermentColor )
		end
		if f36_local1.hasTracerData and f36_local1.hasDismembermentData then
			ACTIONS.AnimateSequence( f31_arg0, "RepositionToShowTracerAndDismemberment" )
		end
	end
	
	local f31_local0 = function ( f35_arg0 )
		if f35_arg0._hasDMZBonusEffect then
			LUI.UIElement.RefreshAnimation( f35_arg0, "OnFocusedDMZBonusEffectWithNoProTune" )
		elseif f35_arg0._hasReactiveEffect then
			LUI.UIElement.RefreshAnimation( f35_arg0, "OnFocusedReactiveWithNoProTune" )
		else
			LUI.UIElement.RefreshAnimation( f35_arg0, "HideOnFocusedBonusEffects" )
		end
	end
	
	f31_arg0.RefreshWishlistPrompt = function ( f34_arg0 )
		STORE.Wishlist.UpdatePrompt( f31_arg0, f34_arg0.WishlistPrompt, f34_arg0._bundle, f34_arg0:isInFocus() )
	end
	
	f31_arg0.GainFocusAnimationState = function ( f33_arg0 )
		f31_arg0( f33_arg0 )
		LUI.UIElement.RefreshAnimation( f33_arg0, "Focused" )
		f33_arg0:SetActive()
		f33_arg0:RefreshWishlistPrompt()
	end
	
	f31_arg0.LoseFocusAnimationState = function ( f32_arg0 )
		f31_arg0( f32_arg0 )
		LUI.UIElement.RefreshAnimation( f32_arg0, "Unfocused" )
		f32_arg0:RemoveActive( {
			controller = f31_arg0
		} )
		f32_arg0:RefreshWishlistPrompt()
	end
	
end

StoreLayoutUtils.Button.PlayUniqueSFX = function ( f29_arg0 )
	if not f29_arg0 or f29_arg0[0x725EE6B9383E87E] then
		
	end
	if STORE.Bundles.GetScriptBundleID( f29_arg0 ) == "iw9_store_3023_the_throwback_pack_09_weapon_audio" then
		Engine[0xC4146BA76D0F982]( SOUND_SETS.uniqueBundleOverrides.classicMW2BtnFocusedKBM )
	elseif STORE.Bundles.GetScriptBundleID( f29_arg0 ) == "iw9_store_4017_classic_call_of_duty_music_pack" then
		CoD.MusicPack.Preview( CoD.MusicPack.GetIndexByLootID( 30575 ) )
	end
	WEAPON.PlayRandomGunscreenVO( STORE.Bundles.GetLootIdByFilter( f29_arg0, function ( f30_arg0 )
		return LOOT.GetTypeForID( f30_arg0 ) == LOOT.itemTypes.GUN_SCREEN
	end ), WEAPON.AliasVO.Audio_Preview )
end

StoreLayoutUtils.Button.SetupDiscountTag = function ( f28_arg0, f28_arg1, f28_arg2 )
	if not f28_arg0.DiscountPercentText and STORE.Bundles.IsDiscounted( f28_arg2 ) then
		local f28_local0 = MenuBuilder.BuildRegisteredType( 0xD707AEFC7D99A6D, {
			controllerIndex = f28_arg1
		} )
		f28_local0[0x8B72E07B55C3AC0] = "DiscountPercentText"
		f28_local0:SetAnchorsAndPosition( 1, 0, 0, 1, -107, 1, -2, 30 )
		f28_arg0:addElement( f28_local0 )
		f28_arg0[0x98E42B55754C470] = f28_local0
		f28_arg0.DiscountPercentText.Text:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x80B52A25515CD0B, STORE.Bundles.DiscountedPercentageString( f28_arg1, f28_arg2 ) ) ) )
	end
end

StoreLayoutUtils.Button.SetupBundleButton = function ( f26_arg0, f26_arg1, f26_arg2, f26_arg3, f26_arg4, f26_arg5 )
	f26_arg0._bundle = f26_arg5
	f26_arg0._categoryName = f26_arg2
	f26_arg0._rowIndex = f26_arg3
	f26_arg0._buttonIndex = f26_arg4
	f26_arg0._hasDMZBonusEffect = false
	f26_arg0._hasReactiveEffect = false
	f26_arg0._onClickCallback = function ()
		
	end
	
	if f26_arg5[0x725EE6B9383E87E] then
		f26_arg0._onClickCallback = f26_arg5.onClickCallback
	end
	if f26_arg0.MW3Tag then
		f26_arg0.MW3Tag:SetVisible( false )
	end
	if f26_arg0.MW3Border then
		f26_arg0.MW3Border:SetVisible( false )
	end
	if not f26_arg5[0x725EE6B9383E87E] then
		f26_arg0._hasDMZBonusEffect = STORE.UI.HasDMZBonusEffect( f26_arg1, f26_arg5, true )
		f26_arg0._hasReactiveEffect = STORE.UI.HasReactiveEffect( f26_arg1, f26_arg5 )
		local f26_local0
		if not Dvar[0x9E5BE3B4BBA4E0E]( 0xCE5F0695913AF96 ) and not STORE.UI.IsCerberusBundle( f26_arg5 ) then
			f26_local0 = STORE.UI.IsJupiterGameBundle( f26_arg1, f26_arg5 )
			if not f26_local0 then
				f26_local0 = string.match( STORE.Bundles.GetScriptBundleID( f26_arg5 ), "jup_" )
			end
		else
			f26_local0 = false
		end
		f26_arg0._hasMW3Tag = f26_local0
		if f26_arg0._hasMW3Tag then
			if f26_arg0.MW3Tag then
				f26_arg0.MW3Tag:SetVisible( true )
			end
			if f26_arg0.MW3Border then
				f26_arg0.MW3Border:SetVisible( true )
			end
		end
		f26_arg0.Background:setImage( RegisterMaterial( STORE.Bundles.GetBackgroundImage( f26_arg5 ) ) )
		f26_arg0:RefreshWishlistPrompt()
		if STORE.Bundles.IsFree( f26_arg1, f26_arg5 ) then
			ACTIONS.AnimateSequence( f26_arg0, "FreeTheme" )
		end
		if f26_arg0.LocalizedTitle then
			f26_arg0.LocalizedTitle:setText( ToUpperCase( STORE.Bundles.GetName( f26_arg5 ) ) )
			if IsLanguageRightToLeft( GetCurrentLanguage() ) then
				f26_arg0.LocalizedTitle:SetOptOutRightToLeftAlignmentFlip( LAYOUT.GetTextWidth( f26_arg0.LocalizedTitle ) <= LAYOUT.GetElementWidth( f26_arg0.LocalizedTitle ) )
			end
		end
		if f26_arg0.Description then
			f26_arg0.Description:setText( STORE.Bundles.GetDescription( f26_arg5 ) )
		end
		if f26_arg0.Price then
			f26_arg0.Price:UpdatePrice( f26_arg5 )
		end
		StoreLayoutUtils.Button.SetupDiscountTag( f26_arg0, f26_arg1, f26_arg5 )
		if not f26_arg0.LimitedTimeCPTag and STORE.UI.IsBundleWithCPBonus( f26_arg0._bundle ) then
			f26_local0 = MenuBuilder.BuildRegisteredType( 0x5252A83918F6334, {
				controllerIndex = f26_arg1
			} )
			f26_local0[0x8B72E07B55C3AC0] = "LimitedTimeCPTag"
			f26_local0[0xA04F4EF1995407E]:SetRGB( SWATCHES[0x91C3BEF076F8580][0x1BB47CB194B7A45], 0 )
			f26_local0[0xA04F4EF1995407E]:setText( Engine[0xED84C33EC5F01EA]( 0xB9542493D8B1D2B ), 0 )
			f26_local0[0xA04F4EF1995407E]:SetAlignment( LUI.Alignment.Left )
			f26_local0[0xA04F4EF1995407E]:SetAlpha( 1, 0 )
			f26_local0[0xA04F4EF1995407E]:SetBackingColorFromSwatch( SWATCHES[0x91C3BEF076F8580][0x1BB47CB194B7A45], 0 )
			f26_local0:SetAnchorsAndPosition( 0, 1, 0, 1, 18, 60, 5, 32 )
			f26_arg0:addElement( f26_local0 )
			f26_arg0[0xD333970A4528C85] = f26_local0
			f26_arg0.LimitedTimeCPTag:SetAnimationSequence( "Left" )
		end
		if f26_arg0.PurchaseText then
			if STORE.Bundles.IsFree( f26_arg1, f26_arg5 ) then
				f26_arg0.PurchaseText:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x46F7490BBDCE346 ) ) )
			else
				f26_local0 = "[{"
				local self
				if CONDITIONS.ShouldStoreSwitchPurchasePreviewButtons() then
					self = "ui_alt1"
				else
					self = "ui_primary"
				end
				f26_arg0.PurchaseText:setText( f26_local0 .. self .. "}] " .. ToUpperCase( Engine[0xED84C33EC5F01EA]( String.IsNilOrEmpty( f26_arg5[0x5B90C0DE92808F1] ) and 0xE578F9430F37FE6 or f26_arg5[0x5B90C0DE92808F1] ) ) )
			end
		end
		f26_local0 = StoreCollection.GetCollection( f26_arg1, f26_arg5 )
		if f26_local0 then
			if not f26_arg0[0x8609F57374C6EFA] then
				local self = nil
				self = MenuBuilder.BuildRegisteredType( 0x5C1EB855B110489, {
					controllerIndex = f26_arg1
				} )
				self[0x8B72E07B55C3AC0] = "CollectionProgress"
				self:SetAnchorsAndPosition( 1, 0, 1, 0, -151, -10, -72, -40 )
				f26_arg0:addElement( self )
				f26_arg0[0x8609F57374C6EFA] = self
			end
			f26_arg0.CollectionProgress:SetupForButton( f26_local0 )
		end
		if not f26_arg0.StoreRowTagBonusEffectDMZ and f26_arg0._hasDMZBonusEffect then
			if CONDITIONS.ShouldStoreShowDmzTag() then
				local self = MenuBuilder.BuildRegisteredType( "StoreRowTagBonusEffectDMZButton", {
					controllerIndex = f26_arg1
				} )
				self[0x8B72E07B55C3AC0] = "StoreRowTagBonusEffectDMZ"
				self:SetAnchorsAndPosition( 1, 0, 1, 0, -100, -12, -95, -63 )
				f26_arg0:addElement( self )
				f26_arg0[0xB05F638B057BC5F] = self
			end
		elseif not f26_arg0.StoreRowTagBonusEffectGeneric and f26_arg0._hasReactiveEffect then
			local self = LUI.UIText.new()
			self[0x8B72E07B55C3AC0] = "StoreRowTagBonusEffectGeneric"
			self:SetRGB( SWATCHES[0x2B125210C0B2BB1][0xF5C0139BA6F896C], 0 )
			self:SetAlpha( 0.72, 0 )
			self:SetBlendMode( BLEND_MODE.addWithAlpha )
			self:setText( Engine[0xED84C33EC5F01EA]( 0x22BF21B5C0D768C ), 0 )
			self:setCaseStyle( LUI.CaseStyle.Uppercase )
			self:SetFont( FONTS.GetFont( FONTS.SecondaryMedium.File ) )
			self:SetFontSize( 18 * _PT )
			self:SetMinFontSize( 18 * _PT )
			self:SetWordWrap( false )
			self:SetTracking( -0.4, 0 )
			self:SetAlignment( LUI.Alignment.Right )
			self:SetVerticalAlignment( LUI.Alignment.Middle )
			self:SetBackingType( 1 )
			self:SetBackingWidget( "StoreRowTagBonusEffectGenericBacker", f26_arg1 )
			self:SetBackingElementFitText( 1, 160 )
			self:SetBackingIgnoreParentColor( true )
			self:SetBackingLeftPadding( 28 )
			self:SetBackingRightPadding( 6 )
			self:SetBackingTopPadding( 4 )
			self:SetAnchorsAndPosition( 1, 0, 1, 0, -178, -18, -98, -72 )
			f26_arg0:addElement( self )
			f26_arg0[0x87F499D36C6B9D1] = self
		end
		if f26_arg0.ZombiesTag and STORE.Bundles.ContainsZombieItems( f26_arg5 ) then
			ACTIONS.AnimateSequence( f26_arg0, "ZombiesTheme" )
			local self = 6
			local f26_local2 = 28
			if f26_arg0.StoreRowTagBonusEffectDMZ then
				local f26_local3 = f26_arg0.StoreRowTagBonusEffectDMZ:GetAnchorsAndPosition()
				f26_arg0.ZombiesTag:SetBottom( f26_local3.top - self )
				f26_arg0.ZombiesTag:SetTop( f26_local3.top - self - f26_local2 )
			elseif f26_arg0.StoreRowTagBonusEffectGeneric then
				local f26_local3 = f26_arg0.StoreRowTagBonusEffectGeneric:GetAnchorsAndPosition()
				f26_arg0.ZombiesTag:SetBottom( f26_local3.top - self )
				f26_arg0.ZombiesTag:SetTop( f26_local3.top - self - f26_local2 )
			end
		end
		if f26_arg0.PartySkinBundleTag then
			if PARTY.ContainsPartySkin( f26_arg5 ) then
				LAYOUT.SetWidth( f26_arg0.PartySkinBundleTag, f26_arg0.PartySkinBundleTag:GetContentWidth( f26_arg1 ) )
				ACTIONS.AnimateSequence( f26_arg0, "IsPartySkinBundle" )
				local self = nil
				if f26_arg0.ZombiesTag and f26_arg0.ZombiesTag:IsVisible() then
					self = f26_arg0.ZombiesTag:GetAnchorsAndPosition()
				elseif f26_arg0.StoreRowTagBonusEffectDMZ then
					self = f26_arg0.StoreRowTagBonusEffectDMZ:GetAnchorsAndPosition()
				elseif f26_arg0.StoreRowTagBonusEffectGeneric then
					self = f26_arg0.StoreRowTagBonusEffectGeneric:GetAnchorsAndPosition()
				end
				if self then
					local f26_local2 = 5
					local f26_local3 = LAYOUT.GetElementHeight( f26_arg0.PartySkinBundleTag )
					ACTIONS.AnimateSequence( f26_arg0, "ShortenTitle" )
					f26_arg0.PartySkinBundleTag:SetBottom( self.top - f26_local2 )
					f26_arg0.PartySkinBundleTag:SetTop( self.top - f26_local2 - f26_local3 )
				end
			else
				f26_arg0.PartySkinBundleTag:closeTree()
				f26_arg0.PartySkinBundleTag = nil
			end
		end
		if f26_arg0.WishlistPrompt then
			f26_arg0.WishlistPrompt:SetBackerStyle( LUI.Alignment.Left )
		end
		StoreLayoutUtils.Button.SetupContextualMenuOnBundleButtons( f26_arg0, f26_arg1 )
	end
end

StoreLayoutUtils.Button.SetupWishlistPrompt = function ( f22_arg0, f22_arg1 )
	if STORE.Bundles.IsOwned( f22_arg0._controllerIndex, f22_arg1 ) then
		
	else
		
	end
	f22_arg0.WishlistPrompt:SetVisible( true )
	f22_arg0.WishlistPrompt:SetBackerStyle( LUI.Alignment.Left )
	STORE.Wishlist.UpdatePrompt( f22_arg0._controllerIndex, f22_arg0.WishlistPrompt, f22_arg1, f22_arg0.isActive )
	f22_arg0:addEventHandler( "gain_focus", function ( f25_arg0, f25_arg1 )
		STORE.Wishlist.UpdatePrompt( f25_arg0._controllerIndex, f25_arg0.WishlistPrompt, f25_arg0._bundle, true )
	end )
	f22_arg0:addEventHandler( "lose_focus", function ( f24_arg0, f24_arg1 )
		STORE.Wishlist.UpdatePrompt( f24_arg0._controllerIndex, f24_arg0.WishlistPrompt, f24_arg0._bundle, false )
	end )
	f22_arg0:AddGamepadEventCallback( "button_alt2", function ( f23_arg0, f23_arg1 )
		STORE.Wishlist.TogglePrompt( f23_arg0._controllerIndex, f23_arg0.WishlistPrompt, f23_arg0._bundle, true )
		return true
	end, {
		requireFocus = true
	} )
end

StoreLayoutUtils.Button.SetupEvents = function ( f9_arg0, f9_arg1 )
	f9_arg0._controllerIndex = f9_arg1
	f9_arg0:addEventHandler( "gain_focus", function ( f21_arg0, f21_arg1 )
		local f21_local0 = f21_arg0:getParent()
		if not f21_local0:CanInterractWithButton( f21_arg0._buttonIndex ) then
			return 
		end
		StoreLayoutUtils.Button.PlayUniqueSFX( f21_arg0._bundle )
		f21_arg0:dispatchEventToRoot( {
			focused = true,
			name = StoreLayoutUtils.Event.RowButtonFocusChanged,
			rowIndex = f21_arg0._rowIndex,
			button = f21_arg0
		} )
		f21_arg0:RefreshWishlistPrompt()
		if f9_arg0.PartySkinBundleTag then
			ACTIONS.AnimateSequence( f9_arg0.PartySkinBundleTag, "Focus" )
		end
	end )
	f9_arg0:addEventHandler( "lose_focus", function ( f20_arg0, f20_arg1 )
		WEAPON.StopGunscreenVO()
		CoD.MusicPack.StopPreview()
		f20_arg0:dispatchEventToRoot( {
			focused = false,
			name = StoreLayoutUtils.Event.RowButtonFocusChanged,
			rowIndex = f20_arg0._rowIndex,
			button = f20_arg0
		} )
		f20_arg0:RefreshWishlistPrompt()
		if f9_arg0.PartySkinBundleTag then
			ACTIONS.AnimateSequence( f9_arg0.PartySkinBundleTag, "Unfocus" )
		end
	end )
	if f9_arg0.PrimaryButton then
		f9_arg0.PrimaryButton:addEventHandler( "mouseup", function ( f19_arg0, f19_arg1 )
			local f19_local0 = f19_arg0:getParent()
			if f19_local0 and f19_local0:getParent() then
				local f19_local1 = f19_local0:getParent()
				if not f19_local1:CanInterractWithButton( f19_local0._buttonIndex ) then
				
				elseif f19_local0._bundle[0x725EE6B9383E87E] then
					f19_local0._onClickCallback( f9_arg0 )
					return true
				else
					f19_local0:processEvent( {
						name = StoreLayoutUtils.Event.RowButtonClicked
					} )
					Engine[0xC4146BA76D0F982]( SOUND_SETS.storefront.viewBundle )
					return true
				end
			end
			return false
		end )
	end
	if f9_arg0.SecondaryButton then
		f9_arg0.SecondaryButton:addEventHandler( "mouseup", function ( f18_arg0, f18_arg1 )
			local f18_local0 = f18_arg0:getParent()
			if f18_local0._bundle[0x725EE6B9383E87E] then
				return true
			else
				STORE.Popups.OpenPurchaseConfirmationPopup( f18_arg0, f9_arg0, f18_local0._bundle, nil, {
					categoryName = f18_local0:GetCategoryName(),
					categoryRowIndex = f18_local0:GetRowIndex(),
					categoryButtonIndex = f18_local0:GetIndex()
				} )
				Engine[0xC4146BA76D0F982]( SOUND_SETS.storefront.purchaseBundle )
				return true
			end
		end )
	end
	f9_arg0:registerEventHandler( "mouseup", function ( element, event )
		local f17_local0 = event.inside
		if f17_local0 then
			f17_local0 = f9_arg0:IsPositionInside( event.x, event.y )
		end
		if element:getParent() then
			local f17_local1 = element:getParent()
			if not f17_local1:CanInterractWithButton( element._buttonIndex ) or element._lastState == "Unfocused" or not f17_local0 then
			
			elseif element._bundle[0x725EE6B9383E87E] then
				element._onClickCallback( event.controller )
				return 
			else
				element:processEvent( {
					name = StoreLayoutUtils.Event.RowButtonClicked
				} )
			end
		end
		return 
	end )
	f9_arg0:registerEventHandler( StoreLayoutUtils.Event.RefreshRowButtonLayout, function ( element, event )
		if element._bundle[0x725EE6B9383E87E] then
			return 
		else
			f9_arg0:RefreshWishlistPrompt()
		end
	end )
	f9_arg0:registerEventHandler( StoreLayoutUtils.Event.RowButtonClicked, function ( element, event )
		if element._bundle[0x725EE6B9383E87E] then
			element._onClickCallback( event.controller or f9_arg0 )
			return 
		elseif CONDITIONS.IsSony() then
			InGameStore.ShowStoreIcon( false )
		end
		local f15_local0 = {
			categoryName = element:GetCategoryName(),
			categoryRowIndex = element:GetRowIndex(),
			categoryButtonIndex = element:GetIndex()
		}
		Engine[0xC4146BA76D0F982]( SOUND_SETS.storefront.viewBundle )
		STORE.OpenProductPreviewMenu( f9_arg0, element._bundle, nil, nil, nil, f15_local0 )
	end )
	f9_arg0:registerEventHandler( StoreLayoutUtils.Event.RowButtonAltClicked, function ( element, event )
		if element._bundle[0x725EE6B9383E87E] then
			return true
		else
			local f14_local0 = {
				categoryName = element:GetCategoryName(),
				categoryRowIndex = element:GetRowIndex(),
				categoryButtonIndex = element:GetIndex()
			}
			Engine[0xC4146BA76D0F982]( SOUND_SETS.storefront.purchaseBundle )
			STORE.Popups.OpenPurchaseConfirmationPopup( element, f9_arg0, element._bundle, nil, f14_local0 )
		end
	end )
	f9_arg0:registerEventHandler( "gamepad_button", function ( element, event )
		if not CONDITIONS.IsMouseWheelEvent( event ) then
			return 
		else
			element:dispatchEventToRoot( {
				name = StoreLayoutUtils.Event.RowWheelChanged,
				event = event,
				rowIndex = element._rowIndex
			} )
		end
	end )
	local f9_local0 = function ( f12_arg0, f12_arg1 )
		if not f12_arg0.ViewText then
			return 
		else
			f12_arg0.ViewText:setText( StoreLayoutUtils.Button.GetPrimaryPromptForBundle( f12_arg0._bundle, f12_arg1 ) )
		end
	end
	
	if CONDITIONS.IsStoreWishlistEnabled() then
		f9_arg0:AddGamepadEventCallback( "button_alt2", function ( f11_arg0, f11_arg1 )
			if f11_arg0:isInFocus() then
				f11_arg0:dispatchEventToRoot( {
					name = StoreLayoutUtils.Event.RowButtonWishlistClicked
				} )
			end
		end )
	end
	f9_arg0:SubscribeToInputTypeModel( f9_arg1, function ( f10_arg0, f10_arg1 )
		local f10_local0 = f10_arg1._controllerIndex
		if LUI.IsKBMActiveInputMethodForPrompts( f10_local0 ) and f10_arg1._sequences and f10_arg1._sequences.KBM then
			ACTIONS.AnimateSequence( f10_arg1, "KBM" )
		elseif f10_arg1._sequences and f10_arg1._sequences.Gamepad then
			ACTIONS.AnimateSequence( f10_arg1, "Gamepad" )
		end
		f9_arg0( f10_arg1, f10_local0 )
	end )
end

StoreLayoutUtils.Button.SetupContextualMenuOnBundleButtons = function ( f2_arg0, f2_arg1 )
	local f2_local0 = f2_arg0._bundle
	if not f2_local0 then
		
	else
		
	end
	f2_arg0:AddContextualMenuAction( {
		id = "viewBundle",
		actionName = Engine[0xED84C33EC5F01EA]( 0xC5039C1061CBDE7 ),
		actionFunction = function ()
			f2_arg0:processEvent( {
				name = StoreLayoutUtils.Event.RowButtonClicked
			} )
		end
	} )
	f2_arg0:AddContextualMenuAction( {
		id = "purchase",
		button = "button_alt1",
		actionName = STORE.Bundles.IsFree( f2_arg1, f2_local0 ) and Engine[0xED84C33EC5F01EA]( 0x46F7490BBDCE346 ) or Engine[0xED84C33EC5F01EA]( 0xA738B4649527664 ),
		actionFunction = function ()
			f2_arg0:processEvent( {
				name = StoreLayoutUtils.Event.RowButtonAltClicked
			} )
		end
	} )
	f2_arg0:AddContextualMenuAction( {
		button = "button_alt2",
		id = "addToWishlist",
		actionName = Engine[0xED84C33EC5F01EA]( 0xBF46163EA10F946 ),
		conditionFunction = function ()
			local f6_local0 = CONDITIONS.IsStoreWishlistEnabled()
			if f6_local0 then
				f6_local0 = not STORE.Wishlist.IsWishlisted( f2_arg0, f2_arg0 )
			end
			return f6_local0
		end,
		actionFunction = function ()
			STORE.Wishlist.TogglePrompt( f2_arg0._controllerIndex, f2_arg0[0xC172D0FE6BC5550], f2_arg0, true )
		end
	} )
	f2_arg0:AddContextualMenuAction( {
		button = "button_alt2",
		id = "removeFromWishlist",
		actionName = Engine[0xED84C33EC5F01EA]( 0xA7AC90D9663A94F ),
		conditionFunction = function ()
			local f4_local0 = CONDITIONS.IsStoreWishlistEnabled()
			if f4_local0 then
				f4_local0 = STORE.Wishlist.IsWishlisted( f2_arg0, f2_arg0 )
			end
			return f4_local0
		end,
		actionFunction = function ()
			STORE.Wishlist.TogglePrompt( f2_arg0._controllerIndex, f2_arg0[0xC172D0FE6BC5550], f2_arg0, true )
		end
	} )
end

StoreLayoutUtils.Button.GetPrimaryPromptForBundle = function ( f1_arg0, f1_arg1 )
	local f1_local0 = LUI.IsKBMActiveInputMethodForPrompts( f1_arg1 )
	local f1_local1
	if f1_arg0 then
		f1_local1 = f1_arg0[0x5D3A4189172A6E5]
		if not f1_local1 then
		
		else
			local f1_local2
			if f1_arg0 then
				f1_local2 = f1_arg0[0x17C7CA4B25A7F1E]
				if not f1_local2 then
				
				else
					local f1_local3
					if f1_local0 and not f1_local1 then
						f1_local3 = f1_local1
					else
						f1_local3 = f1_local2
					end
					return ToUpperCase( Engine[0xED84C33EC5F01EA]( f1_local3 ) )
				end
			end
			f1_local2 = StoreLayoutUtils.BUNDLE_BUTTON_DEFAULT_GAMEPAD_VIEW_PROMPT
		end
	end
	f1_local1 = StoreLayoutUtils.BUNDLE_BUTTON_DEFAULT_KBM_VIEW_PROMPT
end

