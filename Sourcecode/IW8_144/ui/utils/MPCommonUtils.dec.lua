-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 27-09-2025 22:41
MP_COMMON = MP_COMMON or {}
MP_COMMON.postShipFlags = {
	forcedWZControllerLayoutReset = 1,
	overkillSwap = 0
}
MP_COMMON.SetupOnline = function ()
	Dvar.DHEGHJJJHI( "LTSNLQNRKO", true )
	if Dvar.IBEGCHEFE( "LOMTKQTRTM" ) then
		Dvar.DHEGHJJJHI( "LOMTKQTRTM", false )
		Engine.EBIDFIDHIE( "set remove_mlg_rules 1" )
	end
end

MP_COMMON.SetupParty = function ()
	local f11_local0 = Engine.IJEBHJIJF()
	if not Lobby.GFFECBCCF() then
		Engine.DAGFFDGFII( "xstartprivateparty", f11_local0 )
	end
end

MP_COMMON.StopGameLobbyAndWakePrivateParty = function ()
	Engine.DAGFFDGFII( "xstopparty", Engine.IJEBHJIJF() )
end

MP_COMMON.SetupPrivateMatch = function ()
	if not Engine.DAFGFCFHJI() then
		Engine.DAGFFDGFII( "xstartprivatematch" )
	end
end

MP_COMMON.SetupStreaming = function ( f8_arg0, f8_arg1 )
	Streaming.BDDBGGIC( true )
	f8_arg0:addElement( MP.GetGameModeMaterialStreamer() )
	f8_arg0:addElement( Lobby.GetMPMapMaterialStreamer() )
	f8_arg0:addElement( Lobby.GetMPMapPreloadStreamer( f8_arg1 ) )
	MP_COMMON.LoadStreamingModels( f8_arg1, LOADOUT.GetFavoriteLoadoutIndex( f8_arg1 ) )
end

MP_COMMON.LoadStreamingModels = function ( f7_arg0, f7_arg1, f7_arg2 )
	local f7_local0 = PlayerData.BFFBGAJGD( f7_arg0, LOADOUT.GetLoadoutStatsGroup() )
	f7_local0 = f7_local0.squadMembers.loadouts
	if not f7_arg2 then
		local f7_local1 = {}
		for f7_local2 = 0, 1, 1 do
			local f7_local5 = f7_local0[f7_arg1].weaponSetups[f7_local2]
			local f7_local6 = WEAPON.GetWeaponModelNameFromPlayerData( f7_local5.weapon:get(), f7_local5, {
				includeCamos = true,
				includeAttachments = true,
				includeStickers = true,
				controllerIndex = f7_arg0
			} )
			if f7_local6 and 0 < #f7_local6 then
				table.insert( f7_local1, f7_local6 )
			end
		end
		local f7_local3 = WATCH.GetFullModelName( WATCH.GetEquippedWatch( f7_arg0 ) )
		if f7_local3 and 0 < #f7_local3 then
			table.insert( f7_local1, f7_local3 )
		end
		if 0 < #f7_local1 then
			FrontEndScene.RequestWeaponViewModels( f7_local1, f7_arg0 )
		end
	end
	local f7_local1 = {}
	local f7_local2 = {}
	for f7_local3 = 0, 1, 1 do
		local f7_local6, f7_local8 = OPERATOR.GetEquippedOperatorSkin( f7_arg0, f7_local3 )
		if f7_local6 and f7_local6 ~= "" then
			table.insert( f7_local1, f7_local6 )
		end
		if f7_local8 and f7_local8 ~= "" then
			table.insert( f7_local2, f7_local8 )
		end
	end
	if 0 < #f7_local1 and 0 < #f7_local2 then
		FrontEndScene.RequestBodyModels( f7_local1 )
		FrontEndScene.RequestHeadModels( f7_local2 )
	end
end

MP_COMMON.TriggerLeaveMainGamemodeMenu = function ( f6_arg0, f6_arg1 )
	local f6_local0 = true
	if CONDITIONS.ArePartiesEnabledInMainMenu() and Lobby.BGIADHIHAG() then
		f6_local0 = false
	end
	if Lobby.IsNotAloneInPrivateParty() and f6_local0 then
		if Engine.BAHIIBFDDG() then
			LUI.FlowManager.RequestPopupMenu( f6_arg0, "RateLimitedLeaveCommonMPMainMenuPopup", true, f6_arg1.controller, false, {
				rateLimitIntervalMS = 5000,
				rateLimitAttempts = 3,
				menu = f6_arg0
			} )
		else
			LUI.FlowManager.RequestPopupMenu( f6_arg0, "LeaveCommonMPMainMenuPopup", true, f6_arg1.controller, false, {
				menu = f6_arg0
			} )
		end
	else
		Lobby.LeaveCommonMPMainMenu( f6_arg0, f6_arg1.controller )
	end
	return true
end

MP_COMMON.RefreshDataForFirstController = function ()
	if 0 < Engine.JEDFGECDJ() then
		local f5_local0 = Engine.IJEBHJIJF()
		if f5_local0 and Engine.CDCCDDJAJJ( f5_local0 ) then
			Engine.BJGGCHBAGJ()
		end
	end
end

MP_COMMON.IsMatchRulesCODCastingEnabled = function ( f4_arg0 )
	local f4_local0 = true
	if MatchRules.EAIEFBHGJ() then
		f4_local0 = MatchRules.BIJEDCBCBH( "commonOption", "codcasterEnabled" )
	end
	local f4_local1 = false
	if f4_arg0 then
		f4_local1 = 1 < Engine.JEDFGECDJ()
	end
	local f4_local2
	if f4_local0 then
		f4_local2 = f4_local0
	else
		f4_local2 = not f4_local1
	end
	return f4_local2
end

MP_COMMON.IsMatchRulesTeamAssignmentEnabled = function ()
	if MatchRules.EAIEFBHGJ() then
		return MatchRules.BIJEDCBCBH( "commonOption", "teamAssignmentAllowed" )
	else
		return true
	end
end

MP_COMMON.ValidatePlayerData = function ( f2_arg0, f2_arg1 )
	PERK.ValidatePlayerData( f2_arg0, f2_arg1 )
	MP_COMMON.ResetWZControllerLayout( f2_arg0, f2_arg1 )
end

MP_COMMON.ResetWZControllerLayout = function ( f1_arg0, f1_arg1 )
	local f1_local0 = PlayerData.BFFBGAJGD( f1_arg0, CoD.StatsGroup.NonGame, CoD.PlayMode.Core, f1_arg1 )
	local f1_local1 = MP_COMMON.postShipFlags.forcedWZControllerLayoutReset
	if f1_local0.postShipFlags[f1_local1]:get() < 1 then
		local f1_local2 = Engine.BECCFCBIAA( "gpadBRButtonsConfig", f1_arg0 )
		if f1_local2 == "buttons_br_ping_lb" or f1_local2 == "buttons_br_ping_lb_alt" then
			Engine.CBCIHEGADA( Engine.BECCFCBIAA( "gpadButtonsConfig", f1_arg0 ), f1_arg0, true )
		end
		f1_local0.postShipFlags[f1_local1]:set( 1 )
	end
end

