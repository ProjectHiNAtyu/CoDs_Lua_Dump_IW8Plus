-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
module( ..., package.seeall )
require( "ui.inGame.MobileTurretAmmo" )
require( "ui.widgets.GenericProgressBar" )
require( "ui.inGame.HUDPromptWithLabel" )
require( "ui.inGame.ReticleTurretMobile" )
local f0_local0 = function ( f4_arg0, f4_arg1, f4_arg2 )
	local f4_local0 = 256
	f4_arg0:SubscribeToModel( DataSources.inGame.MP.scorestreakHuds.countdown:GetModel( f4_arg1 ), function ()
		f4_arg0.TimeMeter.Fill:SetRight( math.floor( f4_arg0 * DataSources.inGame.MP.scorestreakHuds.countdown:GetValue( f4_arg0 ) * 0.01 ) * _1080p )
	end )
	assert( f4_arg0.InstructionZoom )
	assert( f4_arg0.InstructionFire )
	assert( f4_arg0.InstructionExit )
	f4_arg0:registerAndCallEventHandler( "empty_menu_stack", function ()
		HUDUtils.UpdateInstructionPrompts( f4_arg0, {
			FireInstruction = f4_arg0.InstructionFire,
			ExitInstruction = f4_arg0.InstructionExit,
			ZoomInstruction = f4_arg0.InstructionZoom
		} )
	end )
end

function MobileTurretControls( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "MobileTurretControls"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	self._sequenceLengths = self._sequenceLengths or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local MobileTurretAmmo = nil
	
	MobileTurretAmmo = MenuBuilder.BuildRegisteredType( "MobileTurretAmmo", {
		controllerIndex = f1_local1
	} )
	MobileTurretAmmo.id = "MobileTurretAmmo"
	MobileTurretAmmo:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, _1080p * 564, _1080p * 864, _1080p * -204, _1080p * -54 )
	self:addElement( MobileTurretAmmo )
	self.MobileTurretAmmo = MobileTurretAmmo
	
	local TimeMeter = nil
	
	TimeMeter = MenuBuilder.BuildRegisteredType( "GenericProgressBar", {
		controllerIndex = f1_local1
	} )
	TimeMeter.id = "TimeMeter"
	TimeMeter.Fill:SetRGBFromTable( SWATCHES.CAC.weaponMeterMain, 0 )
	TimeMeter:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, _1080p * -128, _1080p * 128, _1080p * -139, _1080p * -145 )
	self:addElement( TimeMeter )
	self.TimeMeter = TimeMeter
	
	local InstructionExit = nil
	
	InstructionExit = MenuBuilder.BuildRegisteredType( "HUDPromptWithLabel", {
		controllerIndex = f1_local1
	} )
	InstructionExit.id = "InstructionExit"
	InstructionExit.Prompt.ActionIcon:setText( StripFromPattern( LocalizeString( "[F]" ), "%^." ), 0 )
	InstructionExit.Prompt.KBMButtonPrompt.KeyString:setText( StripFromPattern( LocalizeString( "[F]" ), "%^." ), 0 )
	InstructionExit.Instruction:setText( Engine[0xED84C33EC5F01EA]( "KILLSTREAKS_HINTS/INSTRUCTION_EXIT" ), 0 )
	InstructionExit.Instruction:SetAlignment( LUI.Alignment.Left )
	InstructionExit.Instruction:SetShadowMinDistance( -0.2, 0 )
	InstructionExit.Instruction:SetShadowMaxDistance( 0.2, 0 )
	InstructionExit.Instruction:SetShadowUOffset( -0.002, 0 )
	InstructionExit.Instruction:SetShadowVOffset( -0.002, 0 )
	InstructionExit.Instruction:SetShadowRGBFromTable( SWATCHES.HUD.HUDShadow, 0 )
	InstructionExit:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, _1080p * -100, _1080p * 100, _1080p * -116, _1080p * -92 )
	self:addElement( InstructionExit )
	self.InstructionExit = InstructionExit
	
	local InstructionFire = nil
	
	InstructionFire = MenuBuilder.BuildRegisteredType( "HUDPromptWithLabel", {
		controllerIndex = f1_local1
	} )
	InstructionFire.id = "InstructionFire"
	InstructionFire.Prompt.ActionIcon:setText( StripFromPattern( LocalizeString( "[F]" ), "%^." ), 0 )
	InstructionFire.Prompt.KBMButtonPrompt.KeyString:setText( StripFromPattern( LocalizeString( "[F]" ), "%^." ), 0 )
	InstructionFire.Instruction:setText( Engine[0xED84C33EC5F01EA]( "KILLSTREAKS_HINTS/INSTRUCTION_FIRE" ), 0 )
	InstructionFire.Instruction:SetAlignment( LUI.Alignment.Left )
	InstructionFire.Instruction:SetShadowMinDistance( -0.2, 0 )
	InstructionFire.Instruction:SetShadowMaxDistance( 0.2, 0 )
	InstructionFire.Instruction:SetShadowUOffset( -0.002, 0 )
	InstructionFire.Instruction:SetShadowVOffset( -0.002, 0 )
	InstructionFire.Instruction:SetShadowRGBFromTable( SWATCHES.HUD.HUDShadow, 0 )
	InstructionFire:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, _1080p * 300, _1080p * 500, _1080p * -116, _1080p * -92 )
	self:addElement( InstructionFire )
	self.InstructionFire = InstructionFire
	
	local InstructionZoom = nil
	
	InstructionZoom = MenuBuilder.BuildRegisteredType( "HUDPromptWithLabel", {
		controllerIndex = f1_local1
	} )
	InstructionZoom.id = "InstructionZoom"
	InstructionZoom.Prompt.ActionIcon:setText( StripFromPattern( LocalizeString( "[F]" ), "%^." ), 0 )
	InstructionZoom.Prompt.KBMButtonPrompt.KeyString:setText( StripFromPattern( LocalizeString( "[F]" ), "%^." ), 0 )
	InstructionZoom.Instruction:setText( Engine[0xED84C33EC5F01EA]( "KILLSTREAKS_HINTS/INSTRUCTION_ZOOM" ), 0 )
	InstructionZoom.Instruction:SetAlignment( LUI.Alignment.Left )
	InstructionZoom.Instruction:SetShadowMinDistance( -0.2, 0 )
	InstructionZoom.Instruction:SetShadowMaxDistance( 0.2, 0 )
	InstructionZoom.Instruction:SetShadowUOffset( -0.002, 0 )
	InstructionZoom.Instruction:SetShadowVOffset( -0.002, 0 )
	InstructionZoom.Instruction:SetShadowRGBFromTable( SWATCHES.HUD.HUDShadow, 0 )
	InstructionZoom:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, _1080p * -500, _1080p * -300, _1080p * -116, _1080p * -92 )
	self:addElement( InstructionZoom )
	self.InstructionZoom = InstructionZoom
	
	local TimeLabel = nil
	
	TimeLabel = LUI.UIStyledText.new()
	TimeLabel.id = "TimeLabel"
	TimeLabel:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU/TIME" ), 0 )
	TimeLabel:SetFont( FONTS.GetFont( FONTS.MainBold.File ) )
	TimeLabel:SetFontSize( 24 * _PT )
	TimeLabel:SetMinFontSize( 16 * _PT )
	TimeLabel:SetWordWrap( true )
	TimeLabel:SetAlignment( LUI.Alignment.Center )
	TimeLabel:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, _1080p * -128, _1080p * 128, _1080p * -178, _1080p * -154 )
	self:addElement( TimeLabel )
	self.TimeLabel = TimeLabel
	
	local ReticleTurretMobile = nil
	
	ReticleTurretMobile = MenuBuilder.BuildRegisteredType( "ReticleTurretMobile", {
		controllerIndex = f1_local1
	} )
	ReticleTurretMobile.id = "ReticleTurretMobile"
	ReticleTurretMobile:SetAlpha( 0, 0 )
	ReticleTurretMobile:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -32, _1080p * 32, _1080p * -16, _1080p * 16 )
	self:addElement( ReticleTurretMobile )
	self.ReticleTurretMobile = ReticleTurretMobile
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	self._sequenceLengths.DefaultSequence = 0
	local f1_local10 = nil
	MobileTurretAmmo:RegisterAnimationSequence( "Spectate", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 379
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 679
		}
	} )
	TimeMeter:RegisterAnimationSequence( "Spectate", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	InstructionExit:RegisterAnimationSequence( "Spectate", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	InstructionFire:RegisterAnimationSequence( "Spectate", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	InstructionZoom:RegisterAnimationSequence( "Spectate", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	TimeLabel:RegisterAnimationSequence( "Spectate", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.Spectate = function ()
		menu:AnimateSequence( "Spectate" )
		menu:AnimateSequence( "Spectate" )
		menu:AnimateSequence( "Spectate" )
		menu:AnimateSequence( "Spectate" )
		menu:AnimateSequence( "Spectate" )
		menu:AnimateSequence( "Spectate" )
	end
	
	self._sequenceLengths.Spectate = 0
	f0_local0( self, f1_local1, controller )
	if CONDITIONS.IsSpectating( f1_local1 ) then
		ACTIONS.AnimateSequence( self, "Spectate", controller )
	end
	if CONDITIONS.InKillCam() then
		ACTIONS.AnimateSequence( self, "Spectate", controller )
	end
	return self
end

MenuBuilder.registerType( "MobileTurretControls", MobileTurretControls )
LockTable( _M )
