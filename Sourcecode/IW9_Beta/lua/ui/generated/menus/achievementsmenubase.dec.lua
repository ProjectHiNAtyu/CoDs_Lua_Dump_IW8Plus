-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
module( ..., package.seeall )
local f0_local0 = function ( f6_arg0 )
	local f6_local0 = 0
	local f6_local1 = 0
	for f6_local5, f6_local6 in pairs( f6_arg0._achievements ) do
		if f6_local6.isCompleted then
			f6_local0 = f6_local0 + f6_local6.score
		end
		f6_local1 = f6_local1 + f6_local6.score
	end
	return LUI.Round( f6_local0 / f6_local1, 2 )
end

local f0_local1 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0x6267D023F0ABFAE ) )
	local f3_local0 = CSV.pcAchievements
	local f3_local1 = BuiltInAchievements[0x4226E6C6A70C253]()
	local f3_local2 = {}
	if f3_local1 then
		for f3_local3 = 0, f3_local1 - 1, 1 do
			local f3_local6 = BuiltInAchievements[0xF27F45F33AB6D6]( f3_local3 )
			local f3_local7 = StringTable[0x2077452C28AB2FC]( f3_local0.file, f3_local6, f3_local0.cols.id )
			if not BuiltInAchievements[0xE89EEFAD5BD6DEE]( f3_local7 ) then
				local f3_local8 = {
					id = f3_local7,
					gameMode = StringTable[0x2077452C28AB2FC]( f3_local0.file, f3_local6, f3_local0.cols.gameMode ),
					name = StringTable[0x2077452C28AB2FC]( f3_local0.file, f3_local6, f3_local0.cols.name ),
					description = StringTable[0x2077452C28AB2FC]( f3_local0.file, f3_local6, f3_local0.cols.description ),
					image = StringTable[0x2077452C28AB2FC]( f3_local0.file, f3_local6, f3_local0.cols.image ),
					score = StringTable[0x2077452C28AB2FC]( f3_local0.file, f3_local6, f3_local0.cols.score )
				}
				if BuiltInAchievements[0x2711E67947D673]( f3_local8.id ) then
					f3_local8.isCompleted = true
				end
				f3_local2[f3_local3 + 1] = f3_local8
			end
		end
	end
	f3_arg0._achievements = f3_local2
	f3_arg0.AchievementsList:SetNumChildren( #f3_local2 )
	f3_arg0.AchievementsList:SetRefreshChild( function ( f5_arg0, f5_arg1, f5_arg2 )
		local f5_local0 = f3_arg0._achievements[f3_arg0.AchievementsList:GetContentIndex( f5_arg1, f5_arg2 ) + 1]
		f5_arg0.Name:setText( Engine[0xED84C33EC5F01EA]( f5_local0.name ) )
		f5_arg0.Description:setText( Engine[0xED84C33EC5F01EA]( f5_local0.description ) )
		f5_arg0.GameMode:setText( Engine[0xED84C33EC5F01EA]( f5_local0.gameMode ) )
		if f5_local0.image then
			f5_arg0.Image:setImage( RegisterMaterial( f5_local0.image ) )
		end
		if f5_local0.isCompleted then
			ACTIONS.AnimateSequence( f5_arg0, "Completed" )
		else
			ACTIONS.AnimateSequence( f5_arg0, "Idle" )
		end
	end )
	f3_arg0.TotalScore:SetScore( f0_local0( f3_arg0 ) )
	if Engine[0x9258F49F515F97B]( f3_arg0 ) then
		f3_arg0.Background:SetAlpha( 0 )
	else
		f3_arg0.Background:SetAlpha( 1 )
	end
	ACTIONS.ScaleFullscreen( f3_arg0.Background )
	ACTIONS.ScaleFullscreen( f3_arg0.Darken )
	if f3_arg0.TabBacker then
		ACTIONS.ScaleStretchAnchorFullscreen( f3_arg0.TabBacker )
	end
	f3_arg0:addEventHandler( "gamepad_button", function ( f4_arg0, f4_arg1 )
		if CONDITIONS.ButtonSecondary( f4_arg0, f4_arg1 ) and f4_arg1.down then
			ACTIONS.LeaveMenu( f4_arg0 )
		end
	end )
	if not CONDITIONS.IsMobileOrMobileSim() then
		f3_arg0.MenuTitle:SetupBackButton( f3_arg1 )
	end
end

local f0_local2 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PostLoadShared = f0_local0
end

function AchievementsMenuBase( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "AchievementsMenuBase"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "AchievementsMenuBase", AchievementsMenuBase )
LockTable( _M )
