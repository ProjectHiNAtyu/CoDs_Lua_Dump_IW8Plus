-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
GROUPS.CommonDataProviders = GROUPS.CommonDataProviders or {}
GROUPS.CommonDataProviders.InstanceMembers = function ( f23_arg0, f23_arg1, f23_arg2 )
	return f23_arg0:Instance( "Members", f23_arg1, f23_arg2 )
end

GROUPS.CommonDataProviders.InstanceOfficers = function ( f22_arg0, f22_arg1, f22_arg2 )
	return f22_arg0:Instance( "Officers", f22_arg1, f22_arg2 )
end

GROUPS.CommonDataProviders.InstanceBanned = function ( f21_arg0, f21_arg1, f21_arg2 )
	return f21_arg0:Instance( "Banned", f21_arg1, f21_arg2 )
end

local f0_local0 = LUI.Class()
f0_local0.init = function ( f20_arg0, f20_arg1, f20_arg2, f20_arg3 )
	f20_arg0.label = f20_arg2
	f20_arg0.provider = LUI.AsyncPagedDataProviderWithFilter.new( f20_arg1, f20_arg2 )
	f20_arg0.provider:SetMinimumWaitBetweenFetchCallsMs( f20_arg3 )
end

setmetatable( {}, {
	__mode = "v"
} )
f0_local0.Reset = function ( f19_arg0 )
	if f19_arg0.provider then
		f19_arg0.provider:ChangeOwner( nil )
		f19_arg0.provider = nil
		f0_local0[f19_arg0.label] = nil
	end
end

local f0_local1 = function ( f18_arg0 )
	if f18_arg0 == "Officers" or f18_arg0 == "Members" then
		return Dvar[0x22EAAB59AA27E9B]( 0x9345969DAD2F1B3 )
	elseif f18_arg0 == "Banned" then
		return Dvar[0x22EAAB59AA27E9B]( 0x11DB1DD76B95FC )
	else
		return nil
	end
end

GROUPS.CommonDataProviders.Instance = function ( f17_arg0, f17_arg1, f17_arg2, f17_arg3 )
	if not f0_local0[f17_arg1] then
		if f17_arg3 then
			return nil
		end
		local f17_local0 = f0_local0( f17_arg1 )
		assert( f17_local0 )
		if f17_local0 then
			f0_local0[f17_arg1] = f0_local0.new( f17_arg2, f17_arg1, f17_local0 )
		end
	elseif f17_arg2 then
		f0_local0[f17_arg1].provider:ChangeOwner( f17_arg2 )
	end
	return f0_local0[f17_arg1]
end

local f0_local2 = function ( f16_arg0 )
	if f16_arg0 == "Officers" then
		return GROUPS.SocialGroupMemberRoles.OFFICER
	elseif f16_arg0 == "Members" then
		return GROUPS.SocialGroupMemberRoles.MEMBER
	else
		return nil
	end
end

f0_local0.SetupDataFetch = function ( f14_arg0, f14_arg1 )
	local f14_local0 = f14_arg1.controllerIndex
	if not f14_arg1.groupId then
		local f14_local1 = f14_arg1.groupDetails
		local f14_local2 = f14_arg1.groupDetails.groupId
		local f14_local3 = nil
	end
	local f14_local4 = f14_local1 and f14_local2 or f14_local3
	local f14_local5 = f14_arg1.isLocalGroup
	local f14_local6 = f14_arg1.spinnerFunc
	if not f14_local6 then
		f14_local6 = GROUPS.CommonDataProviders.SpinnerFunc
	end
	local f14_local7 = f14_arg1.filterFunc
	if not f14_local7 then
		f14_local7 = GROUPS.CommonDataProviders.FilterFunc
	end
	local f14_local8 = f14_arg1.fetchFunc or nil
	if not f14_local8 then
		local f14_local9 = f14_arg1.role
		if not f14_local9 then
			f14_local9 = f0_local0( f14_arg0.label )
		end
		if f14_local9 then
			f14_local8 = GROUPS.CommonDataProviders.GetFetchMembersFuncByRole( f14_local0, f14_arg0.provider, f14_local9, f14_local4, f14_local5 )
		else
			f14_local8 = GROUPS.CommonDataProviders.GetFetchBannedFunc( f14_local0, f14_arg0.provider, f14_local4 )
		end
	end
	if f14_arg1.window then
		f14_arg0.provider:ChangeOwner( f14_arg1.window )
		f14_arg1.window:addEventHandler( "on_close", function ( f15_arg0, f15_arg1 )
			f14_arg0.provider:ChangeOwner( nil )
		end )
	end
	f14_arg0.provider:SetFetchRequest( f14_local8 )
	f14_arg0.provider:SetSpinner( f14_local6 )
	f14_arg0.provider:SetFilterFunc( f14_local7 )
	return f14_arg0
end

GROUPS.CommonDataProviders.SpinnerFunc = function ( f13_arg0, f13_arg1 )
	if f13_arg1 then
		ACTIONS.AnimateSequence( f13_arg0, "Loading" )
	else
		ACTIONS.AnimateSequence( f13_arg0, "LoadFinished" )
	end
end

GROUPS.CommonDataProviders.FilterFunc = function ( f12_arg0, f12_arg1 )
	if f12_arg1.forceHide then
		return false
	else
		local f12_local0 = LUI.FlowManager.GetScopedData( f12_arg0 )
		if f12_local0._searchText and not string.find( string.lower( f12_arg1.crossplayNameWithHash ), f12_local0._searchText, 1, true ) then
			return false
		elseif f12_local0._isRecentlyOnlineRequired and not f12_arg1.isOnline and not f12_arg1.fakeRecent then
			return false
		else
			return true
		end
	end
end

GROUPS.CommonDataProviders.GetFetchMembersFuncByRole = function ( f9_arg0, f9_arg1, f9_arg2, f9_arg3, f9_arg4 )
	return function ( f10_arg0, f10_arg1, f10_arg2 )
		local f10_local0 = LUI.FlowManager.GetScopedData( f10_arg0 )
		return GROUPS.FetchGroupMembers( f10_arg0, f9_arg0, f9_arg0, f9_arg0, f10_arg1, f10_local0.currentSorting, f9_arg0, function ( f11_arg0, f11_arg1, f11_arg2 )
			f10_arg0( f10_arg0, f11_arg1, f11_arg2 )
		end
		 )
	end
	
end

GROUPS.CommonDataProviders.GetFetchBannedFunc = function ( f6_arg0, f6_arg1, f6_arg2 )
	return function ( f7_arg0, f7_arg1, f7_arg2 )
		local f7_local0 = LUI.FlowManager.GetScopedData( f7_arg0 )
		return GROUPS.FetchGroupBannedPlayers( f7_arg0, f6_arg0, f6_arg0, f7_arg1, function ( f8_arg0, f8_arg1, f8_arg2 )
			f7_arg0( f7_arg0.currentDataProvider, f8_arg1, f8_arg2 )
		end
		 )
	end
	
end

GROUPS.CommonDataProviders.KickHandleFunc = function ( f3_arg0 )
	local f3_local0 = function ( f4_arg0 )
		local f4_local0 = f4_arg0:SearchForAvailableItem( function ( f5_arg0 )
			return f5_arg0.xuid == f4_arg0
		end )
		if f4_local0 and not f4_local0.forceHide then
			f4_local0.forceHide = true
			f4_arg0:UpdateDataFiltering()
			return true
		else
			return false
		end
	end
	
	local f3_local1 = f3_local0
	local f3_local2 = GROUPS.CommonDataProviders:InstanceOfficers()
	f3_local1( f3_local2.provider )
	f3_local1 = f3_local0
	f3_local2 = GROUPS.CommonDataProviders:InstanceMembers()
	return f3_local1( f3_local2.provider )
end

GROUPS.CommonDataProviders.RoleChangeHandleFunc = function ( f1_arg0, f1_arg1 )
	local f1_local0 = function ( f2_arg0 )
		return f2_arg0.xuid == f1_arg0.xuid
	end
	
	local f1_local1 = GROUPS.CommonDataProviders:InstanceOfficers()
	f1_local1 = f1_local1.provider:SearchForAvailableItem( f1_local0 )
	local f1_local2 = GROUPS.CommonDataProviders:InstanceMembers()
	f1_local2 = f1_local2.provider:SearchForAvailableItem( f1_local0 )
	if f1_local2 then
		GROUPS.SetRoleAndCardTypeForMember( f1_local2, f1_arg1.role )
	end
	if f1_arg1.role == GROUPS.SocialGroupMemberRoles.MEMBER then
		f1_local1.forceHide = true
	elseif f1_local1 == nil then
		f1_local1 = LUI.ShallowCopy( f1_local2 )
		local f1_local3 = GROUPS.CommonDataProviders:InstanceOfficers()
		f1_local3.provider:InsertLocalItem( f1_local1 )
	else
		f1_local1.forceHide = false
		GROUPS.SetRoleAndCardTypeForMember( f1_local1, f1_arg1.role )
	end
	local f1_local3 = GROUPS.CommonDataProviders:InstanceOfficers()
	f1_local3.provider:UpdateDataFiltering()
end

