-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
LUI.NotificationManager = LUI.Class( LUI.UIElement )
local f0_local0 = function ( f21_arg0, f21_arg1 )
	local f21_local0 = Notifications[0x903DB0549EE8B23]( f21_arg0._controllerIndex, "friend_request_sent", Enum[0xD6D88DF3D233121][0x956D7BF9004A70B], f21_arg1.xuidString )
	if f21_local0 then
		Notifications[0x4E2D9573CAC224C]( Table.GetKeys( f21_local0 ) )
	end
end

local f0_local1 = function ( f20_arg0 )
	if f20_arg0 and f20_arg0 == NOTIFICATIONS.CHANNEL_INVITE_RECEIVED_ID then
		return Engine[0x2AFF3A853910DFB]()
	else
		return false
	end
end

local f0_local2 = function ( f19_arg0 )
	local f19_local0 = {}
	Engine[0xD344B7DE66AFA81]( "Gathering valid notifications" )
	for f19_local4, f19_local5 in pairs( f19_arg0 ) do
		if NOTIFICATIONS.IsValidType( f19_local5.id ) and not f0_local0( f19_local5.id ) then
			table.insert( f19_local0, f19_local5 )
		end
	end
	Engine[0xC99CAB76F12E539]()
	return f19_local0
end

local f0_local3 = function ( f17_arg0 )
	Engine[0xD344B7DE66AFA81]( "Sorting notifications" )
	table.sort( f17_arg0, function ( f18_arg0, f18_arg1 )
		return f18_arg1.creationTime < f18_arg0.creationTime
	end )
	Engine[0xC99CAB76F12E539]()
	return f17_arg0
end

local f0_local4 = function ( f16_arg0, f16_arg1 )
	local f16_local0 = {}
	local f16_local1 = {}
	local f16_local2 = {}
	for f16_local7, f16_local8 in pairs( f16_arg0 ) do
		local f16_local9 = NOTIFICATIONS.GetNotificationClusterID( f16_local8 )
		if f16_local9 ~= nil and not Table.IsItemIndexInArray( f16_arg1, f16_local9 ) then
			local f16_local6 = f16_local8.id .. f16_local9
			if f16_local0[f16_local6] == nil then
				f16_local0[f16_local6] = {
					notification = f16_local8,
					index = f16_local7
				}
				f16_local0[f16_local6].notification.clusterCount = 0
				table.insert( f16_local1, f16_local8 )
			else
				f16_local0[f16_local6].notification.clusterCount = f16_local0[f16_local6].notification.clusterCount + 1
			end
			f16_local8.clusterCount = f16_local0[f16_local6].notification.clusterCount
			f16_local2[f16_local8.handle] = f16_local0[f16_local6].index
		end
		table.insert( f16_local1, f16_local8 )
		f16_local2[f16_local8.handle] = f16_local7
	end
	return f16_local1, f16_local2
end

LUI.NotificationManager.GetInstance = function ()
	local f15_local0 = Engine[0xEE6F69FEA944B13]()
	assert( f15_local0 )
	local f15_local1 = f15_local0.notificationManager
	assert( f15_local1 )
	return f15_local1
end

LUI.NotificationManager.init = function ( f14_arg0, f14_arg1 )
	LUI.NotificationManager.super.init( f14_arg0 )
	f14_arg0.id = "NotificationManager"
	assert( f14_arg1.controllerIndex )
	f14_arg0._controllerIndex = f14_arg1.controllerIndex
	f14_arg0._orderedNotifications = {}
	f14_arg0._handleToIndex = {}
	f14_arg0._expandedClusters = {}
end

LUI.NotificationManager.InitLayer = function ( f13_arg0 )
	f13_arg0:registerEventHandler( NOTIFICATIONS.FriendRequestAcceptedEvent, f0_local0 )
end

LUI.NotificationManager.ShouldBeVisible = function ( f12_arg0 )
	return true
end

LUI.NotificationManager.ClearLayer = function ( f11_arg0 )
	
end

LUI.NotificationManager.GetLayer = function ()
	local f10_local0 = Engine[0xEE6F69FEA944B13]()
	return f10_local0.notificationManager
end

LUI.NotificationManager.ResetClusters = function ( f9_arg0 )
	f9_arg0._expandedClusters = {}
end

LUI.NotificationManager.RefreshNotifications = function ( f8_arg0, f8_arg1 )
	local f8_local0 = f0_local0( Notifications[0xC2B21B6E7D0D061]( f8_arg1 ) )
	f0_local0( f8_local0 )
	f8_arg0._orderedNotifications, f8_arg0._handleToIndex = f0_local0( f8_local0, f8_arg0._expandedClusters )
	return f8_arg0._orderedNotifications
end

LUI.NotificationManager.GetNotifications = function ( f7_arg0 )
	return f7_arg0._orderedNotifications
end

LUI.NotificationManager.GetNotificationIndexByHandle = function ( f6_arg0, f6_arg1 )
	return f6_arg0._handleToIndex[f6_arg1]
end

LUI.NotificationManager.GetNotificationByHandle = function ( f5_arg0, f5_arg1 )
	return f5_arg0:GetNotificationByIndex( f5_arg0:GetNotificationIndexByHandle( f5_arg1 ) )
end

LUI.NotificationManager.GetNotificationByIndex = function ( f4_arg0, f4_arg1 )
	return f4_arg0._orderedNotifications[f4_arg1]
end

LUI.NotificationManager.GetNotificationCount = function ( f3_arg0 )
	return #f3_arg0._orderedNotifications
end

LUI.NotificationManager.ExpandCluster = function ( f2_arg0, f2_arg1 )
	if not Table.IsItemIndexInArray( f2_arg0._expandedClusters, f2_arg1.clusterID ) then
		table.insert( f2_arg0._expandedClusters, f2_arg1.clusterID )
		f2_arg0:dispatchEventToRoot( {
			name = NOTIFICATIONS.ClusterEvent
		} )
	end
end

LUI.NotificationManager.CollapseCluster = function ( f1_arg0, f1_arg1 )
	Table.RemoveSingleItemFromArray( f1_arg0._expandedClusters, f1_arg1 )
	f1_arg0:dispatchEventToRoot( {
		name = NOTIFICATIONS.ClusterEvent
	} )
end

