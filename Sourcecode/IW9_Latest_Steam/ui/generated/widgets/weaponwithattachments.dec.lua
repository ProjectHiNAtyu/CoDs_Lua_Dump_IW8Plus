-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
module( ..., package.seeall )
require( "ui.generated.widgets.receiverwithattachments" )
local f0_local0 = function ( f7_arg0, f7_arg1, f7_arg2 )
	f7_arg0.Receiver:SetAlpha( 0 )
	local f7_local0 = RegisterMaterial( f7_arg2 )
	if 1 < Engine[0x5B4AB50CF5D1DDD]( f7_local0 ) then
		f7_arg0.Icon:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -128, _1080p * 128, _1080p * -64, _1080p * 64 )
	else
		f7_arg0.Icon:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -64, _1080p * 64, _1080p * -64, _1080p * 64 )
	end
	if f7_arg2 == "white" then
		f7_arg0.Icon:SetAlpha( 0 )
	else
		f7_arg0.Icon:SetAlpha( 1 )
		f7_arg0.Icon:setImage( f7_local0 )
	end
end

local f0_local1 = function ( f6_arg0, f6_arg1, f6_arg2, f6_arg3 )
	if not WEAPON.IsBulletWeapon( WEAPON.GetWeaponClass( f6_arg3.weapon ) ) then
		local f6_local0 = WEAPON.GetBWImage( f6_arg3.weapon )
		local f6_local1 = WEAPON.GetVariantOverridenIcon( f6_arg3.weapon, f6_arg3.variantID )
		if f6_local1 and 0 < #f6_local1 then
			f6_local0 = f6_local1
		end
		f6_arg0.Receiver:SetAlpha( 0 )
		f0_local0( f6_arg0, f6_arg1, f6_local0 )
		return 
	else
		f6_arg0:PerformUpdate( f6_arg1, {
			isInteractive = f6_arg2,
			attachmentsData = DYN_ATTACHMENT.GetDynamicAttachmentsTable( WEAPON.GetWeaponModelName( f6_arg3.weapon, f6_arg3, {
				includeStickers = true,
				includeAttachments = true,
				keepAkimbo = true,
				showSWhiskeyMag = true,
				includeCamos = true,
				controllerIndex = f6_arg1
			} ) ),
			weaponRef = f6_arg3.weapon
		} )
	end
end

local f0_local2 = function ( f5_arg0, f5_arg1, f5_arg2, f5_arg3 )
	f5_arg0:UpdateWithWeaponTable( f5_arg1, f5_arg2, WEAPON.GetModification( f5_arg1, WEAPON.GetBlueprintBaseRefbyID( f5_arg3 ), f5_arg3 ) )
end

local f0_local3 = function ( f4_arg0, f4_arg1, f4_arg2 )
	local f4_local0 = f4_arg2.isInteractive
	local f4_local1 = f4_arg2.attachmentsData
	local f4_local2 = f4_arg2.weaponRef
	local f4_local3 = f4_arg2.weaponFullName
	if f4_local2 == nil or #f4_local2 == 0 or f4_local2 == "none" then
		return 
	elseif WEAPON.GetDynamicWeaponEnableValue( f4_local2 ) and DYN_ATTACHMENT.IsDynamicAttachmentIconsEnabled() then
		f4_arg0.Receiver:SetAlpha( 1 )
		f4_arg0.Icon:SetAlpha( 0 )
		f4_arg0.Receiver:PerformUpdate( f4_arg1, f4_local0, f4_local1, f4_local2 )
		local f4_local4 = WEAPON.GetDynamicWeaponAnimationSeq( f4_local2 )
		if f4_local4 and 0 < #f4_local4 then
			DYN_ATTACHMENT.PlayDynamicAttachmentAnimation( f4_arg0, nil, f4_local4, "Receiver", true )
		end
	else
		f4_arg0.Receiver:SetAlpha( 0 )
		f4_local2 = WEAPON.StripSuffix( f4_local2, "_mp" )
		local f4_local4 = WEAPON.GetBWImage( f4_local2 )
		local f4_local5 = WEAPON.GetWeaponVariantID( f4_local2, f4_local3 )
		if f4_local5 and 0 < tonumber( f4_local5 ) and WEAPON.GetBaseRef( f4_local2 ) then
			local f4_local6 = Engine[0x756D55D24F7B53]( f4_local2 )
			f4_local6 = f4_local6[tonumber( f4_local5 )]
			if f4_local6 and f4_local6[0x6DDC9E0081A8540] ~= "" then
				f4_local4 = f4_local6[0x6DDC9E0081A8540]
			end
		end
		f0_local0( f4_arg0, f4_arg1, f4_local4 )
	end
end

function PostLoadFunc( f3_arg0, f3_arg1 )
	assert( f3_arg0.Receiver )
	f3_arg0.PerformUpdate = f0_local0
	f3_arg0.UpdateWithWeaponTable = f0_local0
	f3_arg0.UpdateWithLootID = f0_local0
	f3_arg0.UpdateRegularIcon = f0_local0
	f3_arg0:SetMouseFocusBlocker( true )
end

States = {
	[0xAD14C6E7156B923] = function ( f2_arg0, f2_arg1 )
		f2_arg0._sequences = {
			DefaultSequence = DefaultSequence,
			arMike4 = arMike4,
			default = default,
			arKilo47 = arKilo47,
			piGolf21 = piGolf21,
			piDecho = piDecho,
			piPapa320 = piPapa320,
			piMike1911 = piMike1911,
			piCpapa = piCpapa,
			smAugolf = smAugolf,
			smMpapa5 = smMpapa5,
			smBeta = smBeta,
			smMpapa7 = smMpapa7,
			smPapa90 = smPapa90,
			smUzulu = smUzulu,
			arAsierra12 = arAsierra12,
			arFalima = arFalima,
			arFalpha = arFalpha,
			arKilo433 = arKilo433,
			arMcharlie = arMcharlie,
			arScharlie = arScharlie,
			shCharlie725 = shCharlie725,
			shDpapa12 = shDpapa12,
			shOscar12 = shOscar12,
			shRomeo870 = shRomeo870,
			lmLima86 = lmLima86,
			lmPkilo = lmPkilo,
			lmKilo121 = lmKilo121,
			lmMgolf34 = lmMgolf34,
			snAlpha50 = snAlpha50,
			snHdromeo = snHdromeo,
			snDelta = snDelta,
			snKilo98 = snKilo98,
			snMike14 = snMike14,
			snSbeta = snSbeta,
			snCrossbow = snCrossbow,
			arSierra552 = arSierra552,
			smSmgolf45 = smSmgolf45,
			shMike26 = shMike26,
			snSksierra = snSksierra,
			piMike9 = piMike9,
			lmMgolf36 = lmMgolf36,
			lmMkilo3 = lmMkilo3,
			smVictor = smVictor,
			arGalima = arGalima,
			meKnife = meKnife,
			snXmike109 = snXmike109,
			meKalisticks = meKalisticks,
			arAnovember94 = arAnovember94,
			smCharlie9 = smCharlie9,
			lmSierrax = lmSierrax
		}
		f2_arg0._sequenceLengths = {
			default = 0,
			smAugolf = 0,
			snCrossbow = 0,
			piGolf21 = 0,
			arSierra552 = 0,
			lmMgolf34 = 0,
			arAsierra12 = 0,
			piPapa320 = 0,
			shRomeo870 = 0,
			arFalima = 0,
			piMike1911 = 0,
			smBeta = 0,
			arKilo433 = 0,
			lmLima86 = 0,
			arKilo47 = 0,
			shDpapa12 = 0,
			arScharlie = 0,
			snAlpha50 = 0,
			snKilo98 = 0,
			snMike14 = 0,
			lmKilo121 = 0,
			shOscar12 = 0,
			shMike26 = 0,
			lmMgolf36 = 0,
			arMcharlie = 0,
			smPapa90 = 0,
			smVictor = 0,
			arGalima = 0,
			meKnife = 0,
			snXmike109 = 0,
			DefaultSequence = 0,
			meKalisticks = 0,
			arAnovember94 = 0,
			piMike9 = 0,
			smMpapa7 = 0,
			lmSierrax = 0,
			arMike4 = 0,
			arFalpha = 0,
			snHdromeo = 0,
			shCharlie725 = 0,
			lmPkilo = 0,
			smCharlie9 = 0,
			snSksierra = 0,
			snSbeta = 0,
			smMpapa5 = 0,
			piDecho = 0,
			smUzulu = 0,
			snDelta = 0,
			piCpapa = 0,
			smSmgolf45 = 0,
			lmMkilo3 = 0
		}
	end
}
function WeaponWithAttachments( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 256 * _1080p, 0, 128 * _1080p )
	self.id = "WeaponWithAttachments"
	self.__states = States
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local Icon = nil
	
	Icon = LUI.UIImage.new()
	Icon.id = "Icon"
	Icon:setImage( RegisterMaterial( 0x3214ADB8B9E14F6 ), 0 )
	self:addElement( Icon )
	self.Icon = Icon
	
	local Receiver = nil
	
	Receiver = MenuBuilder.BuildRegisteredType( "ReceiverWithAttachments", {
		controllerIndex = f1_local1
	} )
	Receiver.id = "Receiver"
	Receiver:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
	self:addElement( Receiver )
	self.Receiver = Receiver
	
	PostLoadFunc( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "WeaponWithAttachments", WeaponWithAttachments )
LockTable( _M )
