-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
module( ..., package.seeall )
require( "ui.generated.widgets.dynamiclist" )
require( "ui.generated.widgets.buttonhelperbar" )
require( "ui.generated.widgets.buttonpromptcontainerhorizontal" )
require( "ui.generated.widgets.genericeditbox" )
require( "ui.generated.widgets.globalpanelsubheader" )
require( "ui.generated.widgets.scrollbar.verticalminimalscrollbar" )
require( "ui.generated.widgets.genericpanelbuttonwithicon" )
local f0_local0 = ButtonMap.button_alt2
local f0_local1 = "button_alt2"
local f0_local2 = 45
local f0_local3 = 35
local f0_local4 = 56
local f0_local5 = 40
local f0_local6 = function ( f11_arg0, f11_arg1, f11_arg2, f11_arg3 )
	if f11_arg0.isSearch or f11_arg0.isSearch ~= f11_arg1 then
		if f11_arg1 and f11_arg0.isSearch ~= f11_arg1 then
			local f11_local0 = f11_arg0.DynamicList:GetAnchorsAndPosition()
			f11_arg0.DynamicList:SetBottom( f11_local0.bottom - f0_local0, 0 )
			f11_arg0.Scrollbar:SetBottom( f11_local0.bottom - f0_local0, 0 )
			f11_arg0.DynamicList._elementPool._pool = {}
		elseif f11_arg1 == false and f11_arg0.isSearch and f11_arg0.isSearch ~= f11_arg1 then
			local f11_local0 = f11_arg0.DynamicList:GetAnchorsAndPosition()
			f11_arg0.DynamicList:SetBottom( f11_local0.bottom + f0_local0, 0 )
			f11_arg0.Scrollbar:SetBottom( f11_local0.bottom + f0_local0, 0 )
			f11_arg0.DynamicList._elementPool._pool = {}
			if f11_arg0.Path:GetVisibility() ~= LUI.Visibility.Hidden then
				f11_arg0.Path:SetVisibility( LUI.Visibility.Hidden )
			end
		end
		f11_arg0.isSearch = f11_arg1
		f11_arg0.DynamicList:RemoveAllWidgets( true )
		if f11_arg0.isSearch then
			SEARCH.AddListWidget( f11_arg0, "Header", {
				text = Engine[0xED84C33EC5F01EA]( 0x57395A17562E874 ),
				height = f0_local0
			}, false )
		end
		local f11_local0 = ipairs
		local f11_local1
		if f11_arg1 and not f11_arg2 then
			f11_local1 = f11_arg2
		else
			f11_local1 = f11_arg0._panelButtons
		end
		for f11_local8, f11_local9 in f11_local0( f11_local1 ) do
			if f11_arg0._panelButtons and f11_local9.isHeader then
				SEARCH.AddListWidget( f11_arg0, "Header", {
					text = f11_local9.name,
					height = f0_local0
				}, false )
			end
			local f11_local3 = SEARCH.AddListWidget
			local f11_local4 = f11_arg0
			local f11_local5 = "Button"
			local f11_local6 = {
				buttonData = f11_local9
			}
			local f11_local7
			if f11_arg1 then
				f11_local7 = f0_local0
				if not f11_local7 then
				
				else
					f11_local6.height = f11_local7
					f11_local3( f11_local4, f11_local5, f11_local6 )
				end
			end
			f11_local7 = f0_local0
		end
		if f11_arg0.isSearch and f11_arg3 and 0 < #f11_arg3 then
			SEARCH.AddListWidget( f11_arg0, "Header", {
				text = Engine[0xED84C33EC5F01EA]( 0x69F8E9A6C59962C ),
				height = f0_local0
			}, false )
			for f11_local8, f11_local9 in ipairs( f11_arg3 ) do
				SEARCH.AddListWidget( f11_arg0, "Button", {
					buttonData = f11_local9,
					height = f0_local0
				} )
			end
		end
		f11_arg0.DynamicList:RefreshGrid()
	end
end

local f0_local7 = function ( f10_arg0, f10_arg1 )
	f10_arg0.OptionsHeader.MenuPrompt:SetVisible( f10_arg1 )
end

local f0_local8 = function ( f9_arg0, f9_arg1, f9_arg2, f9_arg3 )
	if f9_arg2.id == "patch_notes" then
		local f9_local0 = LUI.WebViewManager.Instance()
		f9_local0:OpenPatchNote()
		return 
	elseif f9_arg0.isSearch then
		OPTIONS.GoToSetting( f9_arg2, f9_arg1, f9_arg2.path )
	else
		OPTIONS.ButtonAction( f9_arg1, f9_arg2, f9_arg3 )
	end
end

local f0_local9 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0._controllerIndex = f2_arg1
	f2_arg0.isSearch = nil
	f2_arg0.ButtonAction = f0_local0
	f2_arg0._panelButtons, f2_arg0.mapData = OPTIONS.GetSettingsTabsData( f2_arg1 )
	local f2_local0 = f2_arg0.mapData[OPTIONS.TabIds.FILE_MANAGEMENT]
	local f2_local1
	if not f2_local0 then
		f2_local1 = f2_local0
	else
		f2_local1 = LUI.WebViewManager.PatchNoteEnabled()
	end
	local f2_local2
	if f2_local0 then
		f2_local2 = #f2_arg0._panelButtons
		if not f2_local2 then
		
		else
			if f2_local1 and CONDITIONS.InFrontend() then
				table.insert( f2_arg0._panelButtons, f2_local2, {
					id = "more_header",
					isHeader = true,
					name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x47399967890F857 ) )
				} )
				if LUI.WebViewManager.PatchNoteEnabled() then
					table.insert( f2_arg0._panelButtons, {
						id = "patch_notes",
						icon = "icon_section_patch_notes",
						name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xC04677754961C15 ) )
					} )
				end
			end
			f2_arg0.UpdateSearchPanel = f0_local0
			f2_arg0.UpdatePromptVisibility = f0_local0
			SEARCH.SetupEditBox( f2_arg0, f2_arg0.SearchBox, f2_arg1 )
			SEARCH.SetupEditBoxFocus( f2_arg0, f2_arg0.SearchBox, f2_arg0.DynamicList )
			f2_arg0.SearchBox:processEvent( {
				name = "menu_create"
			} )
			f2_arg0.SearchBox:AddTooltipData( f2_arg1, {
				isMouseOnly = true,
				tooltipDescription = Engine[0xED84C33EC5F01EA]( 0x73F5876ED4273DF ),
				orientation = LUI.ORIENTATION.down
			} )
			SEARCH.SetupSearchList( f2_arg0, f2_arg0.DynamicList, f2_arg1 )
			f2_arg0:UpdateSearchPanel( false, nil, nil )
			f2_arg0.OptionsHeader:SetMenuPrompt( Engine[0xED84C33EC5F01EA]( 0x6863657034D920A ), OPTIONS.OpenBootAcessibilityMenu, f0_local0, true )
			f2_arg0.ButtonHelperBar.ButtonHelperText:PushButtonPrompt( {
				side = "left",
				priority = 0,
				gamepad_only = true,
				button_ref = "button_start",
				helper_text = Engine[0xED84C33EC5F01EA]( 0xF2F6A0A4A145692 ),
				container = f2_arg0.ButtonPromptContainer
			} )
			if CONDITIONS.IsSplitscreen() then
				f2_arg0.DynamicList:SetAnchorsAndPosition( 0.5, 0.5, 0, 0, -256, 256, 260, -118 )
				f2_arg0.Scrollbar:SetAnchorsAndPosition( 0.5, 0.5, 0, 0, 294, 310, 260, -150 )
				f2_arg0.Path:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, -210, 256, -156, -132 )
				f2_arg0:SubscribeToModel( DataSources.inGame.numberOfSplitScreenPlayersInMenus:GetModel(), function ( f8_arg0 )
					if CONDITIONS.IsSplitScreenMenuInUse() then
						f2_arg0.OptionsHeader:TogglePrompt( false )
					else
						f2_arg0.OptionsHeader:SetMenuPrompt( Engine[0xED84C33EC5F01EA]( 0x6863657034D920A ), AccessibilityActionFunc, f2_arg0, true )
					end
				end )
			else
				f2_arg0.DynamicList:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, -256, 256, 258, 961 )
				f2_arg0.Scrollbar:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, 294, 310, 258, 930 )
				f2_arg0.Path:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, -210, 256, 924, 948 )
			end
			f2_arg0:registerEventHandler( "update_path", function ( element, event )
				if element.Path then
					if event.path and event.path ~= "" then
						element.Path:setText( event.path )
						if element.Path:GetVisibility() ~= LUI.Visibility.Visible then
							element.Path:SetVisibility( LUI.Visibility.Visible )
						end
					elseif element.Path:GetVisibility() ~= LUI.Visibility.Hidden then
						element.Path:SetVisibility( LUI.Visibility.Hidden )
					end
				end
			end )
			local f2_local3 = f2_arg0:Wait( 1 )
			f2_local3.onComplete = function ()
				f2_arg0.DynamicList.Grid:UpdateScrolling()
				f2_arg0.Scrollbar:SetAlpha( 1, 0 )
			end
			
			f2_arg0.SearchBox:addEventHandler( "lose_focus", function ( f5_arg0, f5_arg1 )
				if LUI.IsLastInputGamepad( f2_arg0 ) and f2_arg0.DynamicList:GetNumChildren() <= 1 then
					f2_arg0:UpdateSearchPanel( false, nil, nil )
				end
			end )
			f2_arg0:addEventHandler( "on_edit_box_trailing_change", function ( f4_arg0, f4_arg1 )
				if not f4_arg1 then
					return 
				end
				local f4_local0 = nil
				if f4_arg1.isGamepad then
					local f4_local1 = f4_arg1.searchTextGamepadAction
					if f4_local1 then
						f4_local0 = f4_local1 ~= f2_arg0
					else
						f4_local0 = not f4_arg1.isVisible
					end
				else
					f4_local0 = true
				end
				f2_arg0( f4_arg0, f4_local0 )
			end )
			f2_arg0:addEventHandler( "menu_close", function ( f3_arg0, f3_arg1 )
				if f3_arg0.SearchBox:IsTextEditActive() then
					f3_arg0.SearchBox:TextEditOff()
				end
			end )
		end
	end
	f2_local2 = #f2_arg0._panelButtons + 1
end

function GlobalPanelOptions( f1_arg0, f1_arg1 )
	local f1_local0 = ACTIONS
	local f1_local1 = LUI
	local f1_local2 = MenuBuilder
	local f1_local3 = f1_local1.UIElement.new()
	f1_local3:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 620, 0, 1080 )
	f1_local3.id = "GlobalPanelOptions"
	local f1_local4
	if f1_arg1 then
		f1_local4 = f1_arg1
	else
		f1_local4 = f1_arg1.controllerIndex
	end
	f1_local4 = f1_local1.ValidateControllerIndex( f1_local3, f1_local4 )
	local f1_local5 = nil
	f1_local5 = f1_local1.UIImage.new()
	f1_local5[0x8B72E07B55C3AC0] = "Background"
	f1_local5:SetRGB( 0, 0 )
	f1_local5:SetAlpha( 0.4, 0 )
	f1_local5:Setup9SliceImage( 20, 20, 0.3, 0.3 )
	f1_local5:SetAnchorsAndPosition( 0.5, 0.5, 0, 0, -309, 309, 106, 0 )
	f1_local3:addElement( f1_local5 )
	f1_local3[0xD4176E7CA246EDD] = f1_local5
	local f1_local6 = nil
	f1_local6 = f1_local1.UIImage.new()
	f1_local6[0x8B72E07B55C3AC0] = "SubheaderBacker"
	f1_local6:SetRGB( SWATCHES[0xEAF2060ABE5269B][0x25ECFAC112DE22C], 0 )
	f1_local6:SetAnchorsAndPosition( 0, 1, 0, 1, 1.45, 619.45, 106, 146 )
	f1_local3:addElement( f1_local6 )
	f1_local3[0x7A9F708A29B6E28] = f1_local6
	local f1_local7 = nil
	f1_local7 = f1_local1.UIImage.new()
	f1_local7[0x8B72E07B55C3AC0] = "SubHeaderBackerDividerLine"
	f1_local7:SetRGB( SWATCHES[0xEAF2060ABE5269B][0x25ECBAC112DDB60], 0 )
	f1_local7:SetAlpha( 0.15, 0 )
	f1_local7:SetAnchorsAndPosition( 0, 1, 0, 1, 1, 619, 146, 147 )
	f1_local3:addElement( f1_local7 )
	f1_local3[0x90CC84604042373] = f1_local7
	local f1_local8 = nil
	f1_local8 = f1_local2.BuildRegisteredType( 0xE912B67EAB866DA, {
		controllerIndex = f1_local4
	} )
	f1_local8[0x8B72E07B55C3AC0] = "DynamicList"
	f1_local8:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, -256, 256, 258, 961 )
	f1_local3:addElement( f1_local8 )
	f1_local3[0xE912B67EAB866DA] = f1_local8
	local f1_local9 = nil
	f1_local9 = f1_local1.UIStyledText.new()
	f1_local9[0x8B72E07B55C3AC0] = "Path"
	f1_local9:SetVisible( false )
	f1_local9:SetRGB( SWATCHES[0x3E789DB0A12E313][0xF046B6ADEBDABE2], 0 )
	f1_local9:setText( ToUpperCase( "" ), 0 )
	f1_local9:SetFont( FONTS.GetFont( FONTS.SecondaryRegular.File ) )
	f1_local9:SetFontSize( 18 * _PT )
	f1_local9:SetMinFontSize( 28 * _PT )
	f1_local9:SetWordWrap( false )
	f1_local9:SetAlignment( f1_local1.Alignment.Right )
	f1_local9:SetAutoScroll( AUTOSCROLL.enabled )
	f1_local9:SetAutoScrollStyle( f1_local1.UIStyledText.AutoScrollStyle.ScrollH )
	f1_local9:SetStartupDelay( 1000 )
	f1_local9:SetLineHoldTime( 400 )
	f1_local9:SetAnimMoveTime( 150 )
	f1_local9:SetAnimMoveSpeed( 50 )
	f1_local9:SetEndDelay( 1000 )
	f1_local9:SetCrossfadeTime( 400 )
	f1_local9:SetFadeInTime( 300 )
	f1_local9:SetFadeOutTime( 300 )
	f1_local9:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, -210, 256, 924, 948 )
	f1_local3:addElement( f1_local9 )
	f1_local3[0x3C52D0DEBD70676] = f1_local9
	local f1_local10 = nil
	f1_local10 = f1_local2.BuildRegisteredType( 0x8608EBDC1924A2E, {
		controllerIndex = f1_local4
	} )
	f1_local10[0x8B72E07B55C3AC0] = "ButtonHelperBar"
	f1_local10:SetAlpha( 0, 0 )
	f1_local10:SetAnchorsAndPosition( 0, 0, 1, 0, 22, -22, -82, -22 )
	f1_local3:addElement( f1_local10 )
	f1_local3[0x8608EBDC1924A2E] = f1_local10
	local f1_local11 = nil
	f1_local11 = f1_local2.BuildRegisteredType( 0x5339A49D65C4D76, {
		controllerIndex = f1_local4
	} )
	f1_local11[0x8B72E07B55C3AC0] = "ButtonPromptContainer"
	f1_local11:SetAnchorsAndPosition( 0, 1, 1, 0, 22, 122, -53, -22 )
	f1_local3:addElement( f1_local11 )
	f1_local3[0x9FA8F81DF68D5DA] = f1_local11
	local f1_local12 = nil
	f1_local12 = f1_local2.BuildRegisteredType( 0x518F12AB3BE8C3, {
		controllerIndex = f1_local4
	} )
	f1_local12[0x8B72E07B55C3AC0] = "SearchBox"
	f1_local12:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, -256, 256, 187, 242 )
	f1_local3:addElement( f1_local12 )
	f1_local3[0xD026D805F638DA6] = f1_local12
	local f1_local13 = nil
	f1_local13 = f1_local2.BuildRegisteredType( 0x2C2F4B683B220CF, {
		controllerIndex = f1_local4
	} )
	f1_local13[0x8B72E07B55C3AC0] = "OptionsHeader"
	f1_local13[0xA04F4EF1995407E]:setText( Engine[0xED84C33EC5F01EA]( 0xDE7B3C94B0B0F67 ), 0 )
	f1_local13:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, -256, 256, 111, 143 )
	f1_local3:addElement( f1_local13 )
	f1_local3[0x9814F942F588880] = f1_local13
	local f1_local14 = nil
	f1_local14 = f1_local2.BuildRegisteredType( 0x12A2D6C64C313D0, {
		controllerIndex = f1_local4
	} )
	f1_local14[0x8B72E07B55C3AC0] = "Scrollbar"
	f1_local14:SetAlpha( 0, 0 )
	f1_local14:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, 294, 310, 257.5, 930.5 )
	f1_local3:addElement( f1_local14 )
	f1_local3[0xF0042112D8663D9] = f1_local14
	f0_local0( f1_local3, f1_local4, f1_arg1 )
	f1_local0.AnimateSequenceByElement( f1_local3, {
		elementPath = "SearchBox",
		sequenceName = "Search",
		elementName = "SearchBox"
	} )
	return f1_local3
end

MenuBuilder.registerType( 0x2322C84D1EB5B2, GlobalPanelOptions )
LockTable( _M )
