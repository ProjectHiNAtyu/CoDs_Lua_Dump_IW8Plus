-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:04
module( ..., package.seeall )
require( "ui.generated.widgets.ingame.mp.warmode.warmodescoreboardobjective" )
local f0_local0 = {
	AttackerLose = 3,
	Running = 1,
	AttackerWin = 2,
	Pending = 0
}
local f0_local1 = function ( f8_arg0, f8_arg1 )
	if Game[0x28624DEF6F708C8]( f8_arg0, "ui_wm_axis_attacking" ) then
		return f8_arg1 == Teams.axis
	else
		return f8_arg1 == Teams.allies
	end
end

local f0_local2 = function ( f7_arg0 )
	local f7_local0 = tostring( f7_arg0 )
	if #f7_local0 < 1 then
		f7_local0 = "00"
	elseif #f7_local0 == 1 then
		f7_local0 = "0" .. f7_local0
	elseif 2 < #f7_local0 then
		f7_local0 = string.sub( f7_local0, 1, 2 )
	end
	if IsLanguageArabic() then
		f7_local0 = string.reverse( f7_local0 )
	end
	return f7_local0
end

local f0_local3 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0._controllerIndex = f2_arg1
	local f2_local0 = Dvar[0x54084D7CA2317BB]( 0xF237DA69BB64EF6 )
	local f2_local1 = Engine[0x6093D047200548]( 0x50E1A20314A6124 )
	if f2_local1 then
		local f2_local2 = nil
		for f2_local6, f2_local7 in ipairs( f2_local1[0xA3E000C89FADF95] ) do
			if f2_local7[0xA52B5700033C38A] == f2_local0 then
				f2_local2 = f2_local7
				break
			end
		end
		if f2_local2 and f2_local2[0x4B2823C092DB371] and 0 <= #f2_local2[0x4B2823C092DB371] then
			f2_local4 = f0_local0( f2_arg1, Game[0x395DE1E9756DA1F]( Game[0x51CB5C434C63793]( f2_arg1 ) ) )
			for f2_local12, f2_local13 in ipairs( f2_local2[0x4B2823C092DB371] ) do
				local f2_local8
				if f2_local4 then
					f2_local8 = f2_local13[0xA31296C0C1B6029]
					if not f2_local8 then
					
					else
						local f2_local9
						if f2_local4 then
							f2_local9 = f2_local13[0xBFF4CC56C2092F0]
							if not f2_local9 then
							
							else
								local f2_local10
								if f2_local4 then
									f2_local10 = f2_local13[0x3623576BB595FA6]
									if not f2_local10 then
									
									else
										local f2_local11 = "Objective"
										f2_arg0["Objective" .. f2_local12].ObjectiveText:setText( Engine[0xED84C33EC5F01EA]( f2_local8 ) )
										f2_local11 = "Objective"
										f2_arg0["Objective" .. f2_local12].Icon:setImage( RegisterMaterial( f2_local9 ) )
										f2_local11 = "Objective"
										f2_arg0["Objective" .. f2_local12]._icon = f2_local9
										f2_local11 = "Objective"
										f2_arg0["Objective" .. f2_local12]._secondIcon = f2_local10
									end
								end
								f2_local10 = f2_local13[0x9C32FE88A8D34DF]
							end
						end
						f2_local9 = f2_local13[0xF02AFFD00E83217]
					end
				end
				f2_local8 = f2_local13[0x3E7CBD51A99A08C]
			end
		end
	end
	local f2_local2 = function ( f6_arg0, f6_arg1 )
		local f6_local0 = DataModel[0x614D394F6F9A18D]( f6_arg0 )
		if f6_local0 and f6_arg1.state ~= f2_arg0.Pending then
			local f6_local1 = f2_arg0( math.floor( f6_local0 / 1000 / 60 ) )
			local f6_local2 = f2_arg0( math.floor( f6_local0 / 1000 % 60 ) )
			if IsLanguageArabic() then
				f6_arg1.Countdown:setText( Engine[0x7D3158A9539A355]( f6_local2 .. ":" .. f6_local1 ) )
			else
				f6_arg1.Countdown:setText( Engine[0x7D3158A9539A355]( f6_local1 .. ":" .. f6_local2 ) )
			end
		end
	end
	
	local f2_local3 = function ( f5_arg0, f5_arg1 )
		local f5_local0 = DataModel[0x614D394F6F9A18D]( f5_arg0 )
		f5_arg1.state = f5_local0
		if f5_local0 == f2_arg0.Pending then
			ACTIONS.AnimateSequence( f5_arg1, 0xC845E2AADD1EB03 )
		elseif f5_local0 == f2_arg0.Running then
			ACTIONS.AnimateSequence( f5_arg1, 0xFE745D0E69A4AD1 )
		else
			local f5_local1 = f2_arg0( f2_arg0, Game[0x395DE1E9756DA1F]( Game[0x51CB5C434C63793]( f2_arg0 ) ) )
			if not (f5_local0 ~= f2_arg0.AttackerWin or not f5_local1) or f5_local0 == f2_arg0.AttackerLose and not f5_local1 then
				f5_arg1:SetSuccess()
			else
				f5_arg1:SetLost()
			end
		end
	end
	
	local f2_local4 = function ( f4_arg0, f4_arg1 )
		if DataModel[0x614D394F6F9A18D]( f4_arg0 ) and f4_arg1._secondIcon then
			f4_arg1.Icon:setImage( RegisterMaterial( f4_arg1._secondIcon ) )
		elseif f4_arg1._icon then
			f4_arg1.Icon:setImage( RegisterMaterial( f4_arg1._icon ) )
		end
	end
	
	local f2_local5 = f2_arg0.Objective1
	local f2_local7 = f2_local5
	f2_local5 = f2_local5.SubscribeToModel
	local f2_local12 = LUI.DataSourceFromOmnvar.new( "ui_wm_objective_state_0" )
	f2_local5( f2_local7, f2_local12:GetModel( f2_arg1 ), f2_local3 )
	f2_local5 = f2_arg0.Objective2
	f2_local7 = f2_local5
	f2_local5 = f2_local5.SubscribeToModel
	f2_local12 = LUI.DataSourceFromOmnvar.new( "ui_wm_objective_state_1" )
	f2_local5( f2_local7, f2_local12:GetModel( f2_arg1 ), f2_local3 )
	f2_local5 = f2_arg0.Objective3
	f2_local7 = f2_local5
	f2_local5 = f2_local5.SubscribeToModel
	f2_local12 = LUI.DataSourceFromOmnvar.new( "ui_wm_objective_state_2" )
	f2_local5( f2_local7, f2_local12:GetModel( f2_arg1 ), f2_local3 )
	f2_local5 = f2_arg0.Objective1
	f2_local7 = f2_local5
	f2_local5 = f2_local5.SubscribeToModel
	f2_local12 = LUI.DataSourceFromOmnvar.new( "ui_wm_objective_complete_time_0" )
	f2_local5( f2_local7, f2_local12:GetModel( f2_arg1 ), f2_local2 )
	f2_local5 = f2_arg0.Objective2
	f2_local7 = f2_local5
	f2_local5 = f2_local5.SubscribeToModel
	f2_local12 = LUI.DataSourceFromOmnvar.new( "ui_wm_objective_complete_time_1" )
	f2_local5( f2_local7, f2_local12:GetModel( f2_arg1 ), f2_local2 )
	f2_local5 = f2_arg0.Objective3
	f2_local7 = f2_local5
	f2_local5 = f2_local5.SubscribeToModel
	f2_local12 = LUI.DataSourceFromOmnvar.new( "ui_wm_objective_complete_time_2" )
	f2_local5( f2_local7, f2_local12:GetModel( f2_arg1 ), f2_local2 )
	f2_local5 = f2_arg0.Objective1
	f2_local7 = f2_local5
	f2_local5 = f2_local5.SubscribeToModel
	f2_local12 = LUI.DataSourceFromOmnvar.new( "ui_wm_objective_phase_0" )
	f2_local5( f2_local7, f2_local12:GetModel( f2_arg1 ), f2_local4 )
	f2_local5 = f2_arg0.Objective2
	f2_local7 = f2_local5
	f2_local5 = f2_local5.SubscribeToModel
	f2_local12 = LUI.DataSourceFromOmnvar.new( "ui_wm_objective_phase_1" )
	f2_local5( f2_local7, f2_local12:GetModel( f2_arg1 ), f2_local4 )
	f2_local5 = f2_arg0.Objective3
	f2_local7 = f2_local5
	f2_local5 = f2_local5.SubscribeToModel
	f2_local12 = LUI.DataSourceFromOmnvar.new( "ui_wm_objective_phase_2" )
	f2_local5( f2_local7, f2_local12:GetModel( f2_arg1 ), f2_local4 )
	f2_local5 = function ( f3_arg0, f3_arg1 )
		local f3_local0 = DataModel[0x614D394F6F9A18D]( f3_arg0 )
		if f3_local0 then
			local f3_local1 = f2_arg0.ProgressBacker:GetAnchorsAndPosition()
			local f3_local2 = (f3_local1.right - f3_local1.left) * f3_local0
			f2_arg0.ProgressBar:SetLeft( f3_local1.left )
			f2_arg0.ProgressBar:SetRight( f3_local1.left + f3_local2 )
			f3_local1 = f2_arg0.ProgressIndicator:GetAnchorsAndPosition()
			local f3_local3 = f3_local1.right - f3_local1.left
			f2_arg0.ProgressIndicator:SetLeft( f3_local2 - f3_local3 / 2 )
			f2_arg0.ProgressIndicator:SetRight( f3_local2 + f3_local3 / 2 )
		end
	end
	
	f2_local12 = f2_arg0
	local f2_local6 = f2_arg0.SubscribeToModel
	local f2_local13 = LUI.DataSourceFromOmnvar.new( "ui_wm_objective_progress_total" )
	f2_local6( f2_local12, f2_local13:GetModel( f2_arg1 ), f2_local5 )
end

function WarModeScoreboardObjectiveOverview( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = MenuBuilder
	local f1_local2 = f1_local0.UIElement.new()
	f1_local2:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1056, 0, 91 )
	f1_local2.id = "WarModeScoreboardObjectiveOverview"
	local f1_local3
	if f1_arg1 then
		f1_local3 = f1_arg1
	else
		f1_local3 = f1_arg1.controllerIndex
	end
	f1_local3 = f1_local0.ValidateControllerIndex( f1_local2, f1_local3 )
	local f1_local4 = nil
	f1_local4 = f1_local0.UIImage.new()
	f1_local4[0x8B72E07B55C3AC0] = "ProgressBacker"
	f1_local4:SetRGB( 3947580, 0 )
	f1_local4:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1056, 69, 72 )
	f1_local2:addElement( f1_local4 )
	f1_local2[0x2399ED23133DD26] = f1_local4
	local f1_local5 = nil
	f1_local5 = f1_local1.BuildRegisteredType( 0x2E6C9815E5FAE8B, {
		controllerIndex = f1_local3
	} )
	f1_local5[0x8B72E07B55C3AC0] = "Objective1"
	f1_local5:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 350, 0, 60 )
	f1_local2:addElement( f1_local5 )
	f1_local2[0x4B2403C092D434B] = f1_local5
	local f1_local6 = nil
	f1_local6 = f1_local1.BuildRegisteredType( 0x2E6C9815E5FAE8B, {
		controllerIndex = f1_local3
	} )
	f1_local6[0x8B72E07B55C3AC0] = "Objective2"
	f1_local6[0xD4176E7CA246EDD]:SetRight( 13, 0 )
	f1_local6[0xD4176E7CA246EDD]:SetLeft( -23, 0 )
	f1_local6[0xD4176E7CA246EDD]:setImage( RegisterMaterial( 0xEDD2E689F218F64 ), 0 )
	f1_local6[0x9568C2DDFE55A5C]:SetRight( 348, 0 )
	f1_local6:SetAnchorsAndPosition( 0, 1, 0, 1, 352, 702, 0, 60 )
	f1_local2:addElement( f1_local6 )
	f1_local2[0x4B2413C092D44FE] = f1_local6
	local f1_local7 = nil
	f1_local7 = f1_local1.BuildRegisteredType( 0x2E6C9815E5FAE8B, {
		controllerIndex = f1_local3
	} )
	f1_local7[0x8B72E07B55C3AC0] = "Objective3"
	f1_local7[0xD4176E7CA246EDD]:SetRight( 2, 0 )
	f1_local7[0xD4176E7CA246EDD]:SetLeft( -12, 0 )
	f1_local7[0xD4176E7CA246EDD]:setImage( RegisterMaterial( 0xEDD2F689F219117 ), 0 )
	f1_local7[0x9568C2DDFE55A5C]:SetRight( 352, 0 )
	f1_local7:SetAnchorsAndPosition( 0, 1, 0, 1, 704, 1054, 0, 60 )
	f1_local2:addElement( f1_local7 )
	f1_local2[0x4B2423C092D46B1] = f1_local7
	local f1_local8 = nil
	f1_local8 = f1_local0.UIImage.new()
	f1_local8[0x8B72E07B55C3AC0] = "ProgressBar"
	f1_local8:SetRGB( SWATCHES[0x31408192FB5B5C6][0xFD9E74D5791520F], 0 )
	f1_local8:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 300, 69, 72 )
	f1_local2:addElement( f1_local8 )
	f1_local2[0x1B657F2A152DBDF] = f1_local8
	local f1_local9 = nil
	f1_local9 = f1_local0.UIImage.new()
	f1_local9[0x8B72E07B55C3AC0] = "ProgressIndicator"
	f1_local9:setImage( RegisterMaterial( 0x3BAB0300CC50DFE ), 0 )
	f1_local9:SetAnchorsAndPosition( 0, 1, 0, 1, 295, 307, 75, 87 )
	f1_local2:addElement( f1_local9 )
	f1_local2[0x349C13AADBEC4D3] = f1_local9
	f0_local0( f1_local2, f1_local3, f1_arg1 )
	return f1_local2
end

MenuBuilder.registerType( 0xEF1BB258A1B9B84, WarModeScoreboardObjectiveOverview )
LockTable( _M )
