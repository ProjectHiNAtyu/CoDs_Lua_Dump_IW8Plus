-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
module( ..., package.seeall )
require( "ui.generated.widgets.frontend.menutitle" )
require( "ui.generated.widgets.frontend.social.socialpartyplayerlist" )
require( "ui.generated.widgets.genericbutton" )
local f0_local0 = function ( f10_arg0, f10_arg1 )
	if f10_arg1 and 0 < #f10_arg1 then
		f10_arg0.MenuTitle:SetAlpha( 1 )
		f10_arg0.MenuTitle:SetTitle( f10_arg1 )
	end
end

local f0_local1 = function ( f9_arg0, f9_arg1 )
	f9_arg0.PresenceText:setText( f9_arg1 )
end

local f0_local2 = function ( f8_arg0, f8_arg1 )
	f8_arg0._areWeHost = FRIENDS.AreWeHost( f8_arg1.party )
	f8_arg0._isMyParty = f8_arg1.myParty
	local f8_local0, f8_local1 = FRIENDS.SplitPlayersToFriendsAndNonFriends( f8_arg1.party )
	local f8_local2 = f8_arg1.myParty and f8_arg1.party or f8_local0
	local f8_local3
	if f8_arg1.myParty or 0 >= #f8_local2 or 0 >= #f8_local1 then
		f8_local3 = false
	else
		f8_local3 = true
	end
	f8_arg0.SocialPartyPlayerList:SetupPlayerGrid( f8_local2 )
	f8_arg0:UpdatePartyOptionsList( f8_arg1 )
	if f8_local3 then
		f8_arg0.OtherPartyMembers:setText( Engine[0xED84C33EC5F01EA]( #f8_local1 and 0x79F2AA769FC33B7 or 0xB632DC82A19637C, #f8_local1 ) )
		local f8_local4 = math.min( f8_arg0.SocialPartyPlayerList.PlayersGrid:GetVerticalContentSize(), f8_arg0.SocialPartyPlayerList.PlayersGrid:GetRowVisibleSize() )
		local f8_local5, f8_local6, f8_local7, f8_local8 = f8_arg0.SocialPartyPlayerList.PlayersGrid:getCurrentGlobalRect()
		f8_arg0.OtherPartyMembers:SetTop( f8_local6 + f8_local4 + 10 )
	end
	f8_arg0.OtherPartyMembers:SetVisible( f8_local3 )
end

local f0_local3 = function ( f7_arg0, f7_arg1 )
	if f7_arg0._isMyParty then
		f7_arg0.PartyInviteButton:SetButtonDisabled( not SOCIAL.CanInvitePlayersToParty( f7_arg1 ) )
		ACTIONS.GainFocus( f7_arg0, f7_arg0.PartyInviteButton.id, f7_arg0._controllerIndex )
		f7_arg0.PartyInviteButton.navigation = {}
		f7_arg0.SocialPartyPlayerList.navigation = {}
		if not f7_arg0.PartyInviteButton:IsDisabled() then
			f7_arg0.PartyInviteButton.navigation.down = f7_arg0.SocialPartyPlayerList.PlayersGrid
			f7_arg0.SocialPartyPlayerList.navigation.up = f7_arg0.PartyInviteButton
		end
	else
		local f7_local0 = f7_arg0.PartyInviteButton:GetAnchorsAndPosition()
		f7_arg0.PartyInviteButton:closeTree()
		f7_arg0.PartyInviteButton = nil
		ACTIONS.GainFocus( f7_arg0, f7_arg0.SocialPartyPlayerList.id, f7_arg0._controllerIndex )
		f7_arg0.SocialPartyPlayerList:SetTopAnchor( f7_local0.topAnchor )
		f7_arg0.SocialPartyPlayerList:SetTop( f7_local0.top )
	end
end

local f0_local4 = function ( f5_arg0, f5_arg1 )
	assert( f5_arg1 )
	assert( f5_arg1.ButtonHelperText )
	if f5_arg0._areWeHost then
		f5_arg1.ButtonHelperText:PushButtonPrompt( {
			priority = 4,
			side = "left",
			ignoreTooltipPrompt = true,
			ignoreButtonBackground = true,
			useTextButtons = true,
			button_ref = "button_alt1",
			helper_text = Engine[0xED84C33EC5F01EA]( 0xEB37110B419152B )
		} )
	end
	if f5_arg0._isMyParty then
		f5_arg1.ButtonHelperText:PushButtonPrompt( {
			priority = 3,
			side = "left",
			ignoreTooltipPrompt = true,
			ignoreButtonBackground = true,
			useTextButtons = true,
			button_ref = "button_alt2",
			helper_text = Engine[0xED84C33EC5F01EA]( 0xEC125040F4F4C6D )
		} )
	end
	f5_arg0:addEventHandler( "gamepad_button", function ( f6_arg0, f6_arg1 )
		if f6_arg1.down and f6_arg1.button == "right_stick" then
			
		else
			
		end
		if f5_arg0._areWeHost and f6_arg1.down and f6_arg1.button == "alt1" then
			LUI.FlowManager.RequestPopupMenu( nil, "PartyPrivacyPopup", true, f5_arg0._controllerIndex, false, {
				controllerIndex = f5_arg0._controllerIndex,
				areWeHost = f5_arg0._areWeHost
			} )
		end
		if f5_arg0._isMyParty and f6_arg1.down and f6_arg1.button == "alt2" then
			ACTIONS.LeaveParty( f5_arg0, f5_arg0.controllerIndex )
		end
	end )
end

local f0_local5 = function ( f4_arg0 )
	ACTIONS.LeaveMenu( f4_arg0 )
end

local f0_local6 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0._controllerIndex = f2_arg1
	f2_arg0.SetPartyDetails = f0_local0
	f2_arg0.UpdatePartyOptionsList = f0_local0
	f2_arg0.SetMenuTitle = f0_local0
	f2_arg0.SetPartyPresence = f0_local0
	f2_arg0.RegisterButtons = f0_local0
	f2_arg0.OnLeaveParty = f0_local0
	f2_arg0._areWeHost = false
	f2_arg0._isMyParty = false
	f2_arg0.PartyInviteButton:SetText( Engine[0xED84C33EC5F01EA]( 0xA546DFC5C35ACC6 ) )
	f2_arg0.PartyInviteButton:addEventHandler( "button_action", function ( f3_arg0, f3_arg1 )
		SOCIAL.OpenQuickInvitesPopup( f2_arg0, LUI.SocialQuickInvitesPopup.MenuIds.PARTY_INVITE )
	end )
end

function SocialPartyPresencePopup( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -320 * _1080p, 320 * _1080p, -540 * _1080p, 540 * _1080p )
	self.id = "SocialPartyPresencePopup"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local OtherPartyMembers = nil
	
	OtherPartyMembers = LUI.UIText.new()
	OtherPartyMembers.id = "OtherPartyMembers"
	OtherPartyMembers:setText( " SOCIAL/EXTRA_PARTY_MEMBERS_COUNT", 0 )
	OtherPartyMembers:SetFont( FONTS.GetFont( FONTS.PrimaryRegular.File ) )
	OtherPartyMembers:SetFontSize( 28 * _PT )
	OtherPartyMembers:SetMinFontSize( 28 * _PT )
	OtherPartyMembers:SetWordWrap( false )
	OtherPartyMembers:SetAlignment( LUI.Alignment.Left )
	OtherPartyMembers:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 63.5, _1080p * 458.5, _1080p * 902, _1080p * 926 )
	self:addElement( OtherPartyMembers )
	self.OtherPartyMembers = OtherPartyMembers
	
	local f1_local4, PresenceText = nil
	
	PresenceText = LUI.UIText.new()
	PresenceText.id = "PresenceText"
	PresenceText:setText( Engine[0xED84C33EC5F01EA]( 0x4A9EC3380BF21EF ), 0 )
	PresenceText:SetFont( FONTS.GetFont( FONTS.PrimaryRegular.File ) )
	PresenceText:SetFontSize( 28 * _PT )
	PresenceText:SetMinFontSize( 28 * _PT )
	PresenceText:SetWordWrap( false )
	PresenceText:SetAlignment( LUI.Alignment.Left )
	PresenceText:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 146.5, _1080p * 541.5, _1080p * 100, _1080p * 124 )
	self:addElement( PresenceText )
	self.PresenceText = PresenceText
	
	local MenuTitle = nil
	
	MenuTitle = MenuBuilder.BuildRegisteredType( "MenuTitle", {
		controllerIndex = f1_local1
	} )
	MenuTitle.id = "MenuTitle"
	MenuTitle:SetAlpha( 0, 0 )
	MenuTitle.MenuTitle:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xF23D94ED988D693 ) ), 0 )
	MenuTitle:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1020, 0, _1080p * 100 )
	self:addElement( MenuTitle )
	self.MenuTitle = MenuTitle
	
	local SocialPartyPlayerList = nil
	
	SocialPartyPlayerList = MenuBuilder.BuildRegisteredType( "SocialPartyPlayerList", {
		controllerIndex = f1_local1
	} )
	SocialPartyPlayerList.id = "SocialPartyPlayerList"
	SocialPartyPlayerList:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 64.5, _1080p * 615.5, _1080p * 255.74, _1080p * 866.74 )
	self:addElement( SocialPartyPlayerList )
	self.SocialPartyPlayerList = SocialPartyPlayerList
	
	local PartyInviteButton = nil
	
	PartyInviteButton = MenuBuilder.BuildRegisteredType( "GenericButton", {
		controllerIndex = f1_local1
	} )
	PartyInviteButton.id = "PartyInviteButton"
	PartyInviteButton.Text:SetLeft( _1080p * 20, 0 )
	PartyInviteButton.Text:SetTop( _1080p * 1, 0 )
	PartyInviteButton.Text:setText( ToUpperCase( "" ), 0 )
	PartyInviteButton.Text:SetAlignment( LUI.Alignment.Center )
	PartyInviteButton:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 65.5, _1080p * 576.5, _1080p * 170, _1080p * 234 )
	self:addElement( PartyInviteButton )
	self.PartyInviteButton = PartyInviteButton
	
	local PresenceImage = nil
	
	PresenceImage = LUI.UIFixedAspectRatioImage.new()
	PresenceImage.id = "PresenceImage"
	PresenceImage:setImage( RegisterMaterial( 0xB7D88CD2AC1BA88 ), 0 )
	PresenceImage:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 63.5, _1080p * 127.5, _1080p * 85, _1080p * 149 )
	self:addElement( PresenceImage )
	self.PresenceImage = PresenceImage
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "SocialPartyPresencePopup", SocialPartyPresencePopup )
LockTable( _M )
