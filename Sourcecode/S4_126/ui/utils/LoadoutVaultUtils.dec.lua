-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
LOADOUTVAULT = LOADOUTVAULT or {}
LOADOUTVAULT.VaultCount = 30
LOADOUTVAULT.VaultCountWarningAt = 25
LOADOUTVAULT.VaultCache = {}
LOADOUTVAULT.LoadoutSource = {
	game = "game",
	vanity_code = "vanity_code",
	unused = "unused"
}
LOADOUTVAULT.CopyResult = {
	Success = 1,
	Fail = 3,
	Add = 2,
	None = 0
}
LOADOUTVAULT.Status = {
	AlreadyContains = 1,
	AlmostFull = 2,
	FullWarning = 3,
	FullError = 4
}
LOADOUTVAULT.SchemeSortingOptions = {
	Complete = "scheme_complete",
	Incomplete = "scheme_incomplete"
}
LOADOUTVAULT.ItemsSortingOptions = {
	Lethals = "items_lethals",
	Weapons = "items_weapons",
	Perks = "items_perks",
	Tacticals = "items_tacticals",
	Attachments = "items_attachments",
	None = "items_none"
}
LOADOUTVAULT.DlogLoadoutSharingSource = {
	POTG = 3,
	ActiveLoadout = 0,
	PlayerDetails = 5,
	FinalKillcam = 2,
	Killcam = 1,
	MVP = 4
}
local f0_local0 = "none"
local f0_local1 = "specialty_null"
local f0_local2 = 30
local f0_local3 = function ( f45_arg0, f45_arg1, f45_arg2, f45_arg3 )
	f45_arg0:dispatchEventToRoot( {
		name = "send_toast_notification",
		immediate = true,
		options = {
			iconScale = 4.667263495923649E-62,
			displayTime = 3000,
			icon = "cac_equip_fill",
			iconColor = SWATCHES.genericMenu.title,
			header = f45_arg2,
			description = f45_arg3,
			controllerIndex = f45_arg1,
			type = LUI.ToastManager.NotificationType.LoadoutOptions
		}
	} )
end

local f0_local4 = function ( f44_arg0 )
	f44_arg0.name:set( "" )
	f44_arg0.source:set( LOADOUTVAULT.LoadoutSource.unused )
	for f44_local8, f44_local9 in ddlpairs( f44_arg0.weaponSetups ) do
		f44_local9.camo:set( "none" )
		f44_local9.reticle:set( "none" )
		f44_local9.weapon:set( "none" )
		f44_local9.lootItemID:set( 0 )
		f44_local9.variantID:set( 0 )
		f44_local9.paintJobID:set( 0 )
		f44_local9.blueprintName:set( "" )
		f44_local9.cosmeticAttachment:set( "none" )
		for f44_local3, f44_local4 in ddlpairs( f44_local9.attachmentSetup ) do
			f44_local4.attachment:set( "none" )
			f44_local4.variantID:set( 0 )
		end
		for f44_local3, f44_local4 in ddlpairs( f44_local9.sticker ) do
			f44_local4:set( "none" )
		end
	end
	for f44_local8, f44_local9 in ddlpairs( f44_arg0.equipmentSetups ) do
		f44_local9.equipment:set( "none" )
		f44_local9.extraCharge:set( false )
	end
	for f44_local8, f44_local9 in ddlpairs( f44_arg0.loadoutPerks ) do
		f44_local9:set( "specialty_null" )
	end
end

local f0_local5 = function ( f43_arg0, f43_arg1 )
	f43_arg1.name:set( f43_arg0.name:get() )
	for f43_local0 = 0, WEAPON.SecondarySlot, 1 do
		local f43_local3 = f43_arg0.weaponSetups[f43_local0]
		local f43_local4 = f43_arg1.weaponSetups[f43_local0]
		f43_local4.weapon:set( f43_local3.weapon:get() )
		f43_local4.lootItemID:set( f43_local3.lootItemID:get() )
		f43_local4.variantID:set( f43_local3.variantID:get() )
		for f43_local8, f43_local9 in ddlpairs( f43_local4.attachmentSetup ) do
			local f43_local10 = f43_local3.attachmentSetup[f43_local8]
			f43_local9.attachment:set( f43_local10.attachment:get() )
			f43_local9.variantID:set( f43_local10.variantID:get() )
		end
		f43_local4.camo:set( "none" )
		f43_local4.reticle:set( "none" )
		f43_local4.paintJobID:set( 0 )
		f43_local4.blueprintName:set( "" )
		f43_local4.cosmeticAttachment:set( "none" )
		for f43_local8, f43_local9 in ddlpairs( f43_local4.sticker ) do
			f43_local9:set( "none" )
		end
	end
	for f43_local11, f43_local3 in ddlpairs( f43_arg1.equipmentSetups ) do
		local f43_local4 = f43_arg0.equipmentSetups[f43_local11]
		f43_local3.equipment:set( f43_local4.equipment:get() )
		f43_local3.extraCharge:set( f43_local4.extraCharge:get() )
	end
	for f43_local11, f43_local3 in ddlpairs( f43_arg1.loadoutPerks ) do
		f43_local3:set( f43_arg0.loadoutPerks[f43_local11]:get() )
	end
end

local f0_local6 = function ( f42_arg0, f42_arg1 )
	f42_arg1.authorName:set( f42_arg0.authorName:get() )
	f42_arg1.source:set( f42_arg0.source:get() )
	f42_arg1.authorXuidHigh:set( f42_arg0.authorXuidHigh:get() )
	f42_arg1.authorXuidLow:set( f42_arg0.authorXuidLow:get() )
end

local f0_local7 = function ( f41_arg0 )
	for f41_local0 = 0, LOADOUTVAULT.VaultCount - 1, 1 do
		if LOADOUTVAULT.IsLoadoutEmpty( f41_arg0[f41_local0] ) then
			return f41_local0
		end
	end
	return -1
end

local f0_local8 = function ( f40_arg0 )
	for f40_local0 = f0_local0( f40_arg0 ) + 1, LOADOUTVAULT.VaultCount - 1, 1 do
		if not LOADOUTVAULT.IsLoadoutEmpty( f40_arg0[f40_local0] ) then
			f0_local0( f40_arg0[f40_local0], f40_arg0[f40_local3] )
			f0_local0( f40_arg0[f40_local0], f40_arg0[f40_local3] )
			f0_local0( f40_arg0[f40_local0] )
			local f40_local3 = f0_local0( f40_arg0 )
		end
	end
end

local f0_local9 = function ( f33_arg0 )
	local f33_local0 = function ( f34_arg0, f34_arg1 )
		local f34_local0 = f34_arg0.weaponCustomizationPublic[f34_arg1].lootItemID:get()
		local f34_local1 = LOOT.GetItemRef( LOOT.itemTypes.WEAPON, f34_local0 )
		local f34_local2 = WEAPON.GetVariantID( WEAPON.GetVariantRef( f34_local0 ) )
		return {
			lootItemID = f34_arg0.weaponCustomizationPublic[f34_arg1].lootItemID,
			camo = f34_arg0.weaponCustomizationPublic[f34_arg1].weaponCamo,
			attachmentSetup = f34_arg0.weaponCustomizationPublic[f34_arg1].attachmentSetup,
			cosmeticAttachment = f34_arg0.weaponCustomizationPublic[f34_arg1].cosmeticAttachment,
			sticker = f34_arg0.weaponCustomizationPublic[f34_arg1].sticker,
			weapon = {
				get = function ()
					return f34_arg0
				end
				
			},
			variantID = {
				get = function ()
					return f34_arg0
				end
				
			},
			blueprintName = {
				get = function ()
					return ""
				end
				
			},
			reticle = {
				get = function ()
					return ""
				end
				
			},
			paintJobID = {
				get = function ()
					return ""
				end
				
			}
		}
	end
	
	return {
		name = f33_arg0.loadoutPublic.name,
		equipmentSetups = f33_arg0.loadoutPublic.equipmentSetups,
		loadoutPerks = f33_arg0.loadoutPublic.perks,
		weaponSetups = {
			[0] = f33_local0( f33_arg0, 0 ),
			[1] = f33_local0( f33_arg0, 1 )
		}
	}
end

LOADOUTVAULT.IsLoadoutEmpty = function ( f32_arg0 )
	return f32_arg0.source:get() == LOADOUTVAULT.LoadoutSource.unused
end

LOADOUTVAULT.AddToVaultByPlayerLoadoutIndex = function ( f31_arg0, f31_arg1, f31_arg2, f31_arg3, f31_arg4, f31_arg5 )
	return LOADOUTVAULT.AddToVault( f31_arg0, f31_arg1, LOADOUT.GetLoadoutPlayerData( f31_arg1, f31_arg2 ), f31_arg3, f31_arg4, f31_arg5, false, LOADOUTVAULT.DlogLoadoutSharingSource.ActiveLoadout )
end

LOADOUTVAULT.ShowStatusNotification = function ( f30_arg0, f30_arg1, f30_arg2, f30_arg3 )
	if f30_arg2 == LOADOUTVAULT.Status.AlreadyContains then
		f0_local0( f30_arg0, f30_arg1, Engine[0xED84C33EC5F01EA]( "LOADOUT_VAULT/ALREADY_IN_VAULT" ), Engine[0xED84C33EC5F01EA]( "LOADOUT_VAULT/ALREADY_IN_VAULT_DESC", f30_arg3 ) )
	elseif f30_arg2 == LOADOUTVAULT.Status.AlmostFull then
		local f30_local0 = f0_local0
		local f30_local1 = f30_arg0
		local f30_local2 = f30_arg1
		local f30_local3 = Engine[0xED84C33EC5F01EA]
		local f30_local4 = "LOADOUT_VAULT/ALMOST_FULL_WARNING_HEADER"
		local f30_local5
		if not f30_arg3 then
			f30_local5 = f30_arg3
		else
			f30_local5 = "?"
		end
		f30_local0( f30_local1, f30_local2, f30_local3( f30_local4, f30_local5, LOADOUTVAULT.VaultCount ), Engine[0xED84C33EC5F01EA]( "LOADOUT_VAULT/ALMOST_FULL_WARNING_DESCRIPTION" ) )
	elseif f30_arg2 == LOADOUTVAULT.Status.FullWarning then
		f0_local0( f30_arg0, f30_arg1, Engine[0xED84C33EC5F01EA]( "LOADOUT_VAULT/VAULT_FULL_WARNING_HEADER", LOADOUTVAULT.VaultCount, LOADOUTVAULT.VaultCount ), Engine[0xED84C33EC5F01EA]( "LOADOUT_VAULT/VAULT_FULL_WARNING_DESCRIPTION" ) )
	elseif f30_arg2 == LOADOUTVAULT.Status.FullError then
		f0_local0( f30_arg0, f30_arg1, Engine[0xED84C33EC5F01EA]( "LOADOUT_VAULT/FULL_ERROR_HEADER" ), Engine[0xED84C33EC5F01EA]( "LOADOUT_VAULT/FULL_ERROR_DESCRIPTION" ) )
	end
end

LOADOUTVAULT.ShowVaultAddedNotification = function ( f29_arg0, f29_arg1, f29_arg2 )
	f0_local0( f29_arg0, f29_arg1, Engine[0xED84C33EC5F01EA]( "LOADOUT_VAULT/ADDED_TO_VAULT_HEADER" ), f29_arg2 )
end

LOADOUTVAULT.ShowVaultRemovedNotification = function ( f28_arg0, f28_arg1, f28_arg2 )
	f0_local0( f28_arg0, f28_arg1, Engine[0xED84C33EC5F01EA]( "LOADOUT_VAULT/REMOVED_FROM_VAULT_HEADER" ), f28_arg2 )
end

LOADOUTVAULT.CheckVaultCapacityAndDisplayWarning = function ( f27_arg0, f27_arg1 )
	local f27_local0 = PlayerData[0x8B73907B55C4D71]( f27_arg1, CoD.StatsGroup.NonGame )
	local f27_local1 = f0_local0( f27_local0.loadoutVault )
	if f27_local1 == -1 then
		LOADOUTVAULT.ShowStatusNotification( f27_arg0, f27_arg1, LOADOUTVAULT.Status.FullWarning )
	elseif f27_local1 >= LOADOUTVAULT.VaultCountWarningAt then
		LOADOUTVAULT.ShowStatusNotification( f27_arg0, f27_arg1, LOADOUTVAULT.Status.AlmostFull, f27_local1 )
	end
end

LOADOUTVAULT.GetFavoriteLoadoutFromXUID = function ( f26_arg0 )
	assert( type( f26_arg0 ) == "string" )
	return f0_local0( Engine[0x2F0D66C7418B3F2]( f26_arg0 ) )
end

LOADOUTVAULT.GetFavoriteLoadoutFromClientNumber = function ( f25_arg0 )
	assert( type( f25_arg0 ) == "number" )
	return f0_local0( Game[0xA94DFB39FE6E58]( f25_arg0 ) )
end

local f0_local10 = function ( f24_arg0, f24_arg1 )
	if Engine[0x6DB3E72E3D9EF74]( Friends[0x5065E759595C457]( f24_arg0 ) ) == ClientPlatformSessionFamily.PLATFORM_FAMILY_XBOX then
		local f24_local0, f24_local1 = Social[0xB68FED5CF4DF261]( f24_arg0 )
		f24_arg1.authorXuidHigh:set( f24_local0 )
		f24_arg1.authorXuidLow:set( f24_local1 )
	else
		f24_arg1.authorXuidHigh:set( 0 )
		f24_arg1.authorXuidLow:set( 0 )
	end
end

local f0_local11 = function ( f23_arg0, f23_arg1, f23_arg2 )
	f0_local0( Social[0xB20F725229105CA]( f23_arg0, f23_arg1 ), f23_arg2 )
end

LOADOUTVAULT.AddToVault = function ( f22_arg0, f22_arg1, f22_arg2, f22_arg3, f22_arg4, f22_arg5, f22_arg6, f22_arg7 )
	local f22_local0, f22_local1 = LOADOUTVAULT.ContainsLoadout( f22_arg1, f22_arg2 )
	if f22_local0 then
		LOADOUTVAULT.ShowStatusNotification( f22_arg0, f22_arg1, LOADOUTVAULT.Status.AlreadyContains, Engine[0x7D3158A9539A355]( f22_local1.name:get() ) )
		return f22_local1
	else
		local f22_local2 = PlayerData[0x8B73907B55C4D71]( f22_arg1, CoD.StatsGroup.NonGame )
		f22_local2 = f22_local2.loadoutVault
		local f22_local3 = f0_local0( f22_local2 )
		if 0 <= f22_local3 then
			local f22_local4 = f22_local2[f22_local3]
			f0_local0( f22_arg2, f22_local4 )
			local f22_local5 = f22_local4.authorName
			local f22_local6 = f22_local5
			f22_local5 = f22_local5.set
			local f22_local7
			if not f22_arg3 then
				f22_local7 = f22_arg3
			else
				f22_local7 = ""
			end
			f22_local5( f22_local6, f22_local7 )
			f22_local5 = f22_local4.source
			f22_local6 = f22_local5
			f22_local5 = f22_local5.set
			if not f22_arg4 then
				f22_local7 = f22_arg4
			else
				f22_local7 = LOADOUTVAULT.LoadoutSource.game
			end
			f22_local5( f22_local6, f22_local7 )
			if f22_arg6 == nil or f22_arg6 then
				f22_local4.name:set( Engine[0x73CE20BAEF909FB]( Engine[0xED84C33EC5F01EA]( "LOADOUT_VAULT/SAVED_LOADOUT" ), f0_local0 ) )
			end
			if f22_arg2.authorXuidHigh ~= nil and f22_arg2.authorXuidLow ~= nil then
				f0_local0( f22_arg2.authorXuidHigh:get(), f22_arg2.authorXuidLow:get(), f22_local4 )
			elseif f22_arg5 then
				f0_local0( f22_arg5, f22_local4 )
			else
				f22_local4.authorXuidHigh:set( 0 )
				f22_local4.authorXuidLow:set( 0 )
			end
			LOADOUTVAULT.CheckVaultCapacityAndDisplayWarning( f22_arg0, f22_arg1 )
			LOADOUTVAULT.ShowVaultAddedNotification( f22_arg0, f22_arg1, f22_local4.name:get() )
			if CONDITIONS.IsLoadoutSharingTelemetryEnabled() and f22_arg7 then
				LOADOUTVAULT.SendCopySchemeEvent( f22_arg1, f22_arg3, f22_local4.name:get(), f22_arg7 )
			end
			return f22_local4
		else
			LOADOUTVAULT.ShowStatusNotification( f22_arg0, f22_arg1, LOADOUTVAULT.Status.FullError )
			return nil
		end
	end
end

LOADOUTVAULT.AreLoadoutSchemesEqual = function ( f21_arg0, f21_arg1 )
	for f21_local0 = 0, 1, 1 do
		if f21_arg0.equipmentSetups[f21_local0].equipment:get() ~= f21_arg1.equipmentSetups[f21_local0].equipment:get() then
			return false
		elseif f21_arg0.equipmentSetups[f21_local0].extraCharge:get() ~= f21_arg1.equipmentSetups[f21_local0].extraCharge:get() then
			return false
		end
	end
	for f21_local0 = 0, 2, 1 do
		if f21_arg0.loadoutPerks[f21_local0]:get() ~= f21_arg1.loadoutPerks[f21_local0]:get() then
			return false
		end
	end
	for f21_local0 = 0, 1, 1 do
		local f21_local3 = WEAPON.GenerateWeaponTable( f21_arg0.weaponSetups[f21_local0] )
		local f21_local4 = WEAPON.GenerateWeaponTable( f21_arg1.weaponSetups[f21_local0] )
		if f21_local3.weapon ~= f21_local4.weapon then
			return false
		elseif f21_local3.variantID ~= f21_local4.variantID then
			return false
		elseif f21_local3.lootID ~= f21_local4.lootID then
			return false
		end
		for f21_local8, f21_local9 in ipairs( f21_local3.attachments ) do
			if f21_local4.attachments[f21_local8] == nil or not LUI.AreTableContentsEqual( f21_local9, f21_local4.attachments[f21_local8] ) then
				return false
			end
		end
		for f21_local8, f21_local9 in ipairs( f21_local4.attachments ) do
			if f21_local3.attachments[f21_local8] == nil or not LUI.AreTableContentsEqual( f21_local9, f21_local3.attachments[f21_local8] ) then
				return false
			end
		end
	end
	return true
end

LOADOUTVAULT.ContainsLoadout = function ( f20_arg0, f20_arg1 )
	local f20_local0 = PlayerData[0x8B73907B55C4D71]( f20_arg0, CoD.StatsGroup.NonGame )
	f20_local0 = f20_local0.loadoutVault
	for f20_local1 = 0, LOADOUTVAULT.VaultCount - 1, 1 do
		local f20_local4 = f20_local0[f20_local1]
		if not LOADOUTVAULT.IsLoadoutEmpty( f20_local4 ) and LOADOUTVAULT.AreLoadoutSchemesEqual( f20_arg1, f20_local4 ) then
			return true, f20_local4
		end
	end
	return false
end

LOADOUTVAULT.GetActiveLoadoutIndex = function ( f19_arg0, f19_arg1 )
	for f19_local0 = 0, LOADOUT.DefaultClassCount - 1, 1 do
		local f19_local3 = f19_arg0[f19_local0]
		if f19_local3 and LOADOUTVAULT.AreLoadoutSchemesEqual( f19_local3, f19_arg1 ) then
			return f19_local0
		end
	end
end

LOADOUTVAULT.RemoveFromVault = function ( f18_arg0, f18_arg1, f18_arg2 )
	local f18_local0 = assert
	local f18_local1
	if 0 > f18_arg2 or f18_arg2 >= LOADOUTVAULT.VaultCount then
		f18_local1 = false
	else
		f18_local1 = true
	end
	f18_local0( f18_local1 )
	f18_local0 = PlayerData[0x8B73907B55C4D71]( f18_arg1, CoD.StatsGroup.NonGame )
	f18_local0 = f18_local0.loadoutVault
	f0_local0( f18_local0[f18_arg2] )
	f0_local0( f18_local0 )
end

LOADOUTVAULT.EmptyVault = function ( f17_arg0, f17_arg1 )
	local f17_local0 = PlayerData[0x8B73907B55C4D71]( f17_arg1, CoD.StatsGroup.NonGame )
	f17_local0 = f17_local0.loadoutVault
	for f17_local1 = 0, LOADOUTVAULT.VaultCount - 1, 1 do
		if not LOADOUTVAULT.IsLoadoutEmpty( f17_local0[f17_local1] ) then
			f0_local0( f17_local0[f17_local1] )
		end
	end
end

LOADOUTVAULT.IsVaultEmpty = function ( f16_arg0 )
	local f16_local0 = PlayerData[0x8B73907B55C4D71]( f16_arg0, CoD.StatsGroup.NonGame )
	f16_local0 = f16_local0.loadoutVault
	for f16_local1 = 0, LOADOUTVAULT.VaultCount - 1, 1 do
		if not LOADOUTVAULT.IsLoadoutEmpty( f16_local0[f16_local1] ) then
			return false
		end
	end
	return true
end

LOADOUTVAULT.DoesVaultContainCompleteLoadout = function ( f15_arg0 )
	local f15_local0 = PlayerData[0x8B73907B55C4D71]( f15_arg0, CoD.StatsGroup.NonGame )
	f15_local0 = f15_local0.loadoutVault
	for f15_local1 = 0, LOADOUTVAULT.VaultCount - 1, 1 do
		if not LOADOUTVAULT.IsLoadoutEmpty( f15_local0[f15_local1] ) then
			local f15_local4, f15_local5 = LOADOUTVAULT.IsLoadoutComplete( f15_arg0, f15_local0[f15_local1] )
			if f15_local4 then
				return true
			end
		end
	end
	return false
end

LOADOUTVAULT.ReplaceActiveLoadoutFromVault = function ( f14_arg0, f14_arg1, f14_arg2, f14_arg3 )
	if LOADOUTVAULT.IsLoadoutComplete( f14_arg1, f14_arg2 ) then
		f0_local0( f14_arg2, f14_arg3 )
		f0_local0( f14_arg0, f14_arg1, Engine[0xED84C33EC5F01EA]( "LOADOUT_VAULT/ADDED_TO_ACTIVE" ), f14_arg2.name:get() )
		LOADOUTVAULT.SendEquipEvent( f14_arg1, f14_arg2 )
	end
end

LOADOUTVAULT.GetLoadoutsVaultPlayerData = function ( f13_arg0 )
	local f13_local0 = PlayerData[0x8B73907B55C4D71]( f13_arg0, CoD.StatsGroup.NonGame )
	return f13_local0.loadoutVault
end

LOADOUTVAULT.GetLoadoutVaultPlayerData = function ( f12_arg0, f12_arg1 )
	local f12_local0 = LOADOUTVAULT.GetLoadoutsVaultPlayerData( f12_arg0 )
	return f12_local0[f12_arg1]
end

LOADOUTVAULT.GetTotalLoadoutItems = function ( f10_arg0 )
	local f10_local0 = 7
	local f10_local1 = function ( f11_arg0 )
		local f11_local0 = 0
		for f11_local4, f11_local5 in ipairs( f11_arg0.attachments ) do
			if f11_local5.ref and f11_local5.ref ~= "none" then
				f11_local0 = f11_local0 + 1
			end
		end
		return f11_local0
	end
	
	return f10_local0 + f10_local1( WEAPON.GenerateWeaponTable( f10_arg0.weaponSetups[WEAPON.PrimarySlot] ), true ) + f10_local1( WEAPON.GenerateWeaponTable( f10_arg0.weaponSetups[WEAPON.SecondarySlot] ), false )
end

LOADOUTVAULT.WeaponHasAttachmentsEquipped = function ( f9_arg0 )
	if not f9_arg0 or not f9_arg0.attachments then
		return false
	end
	local f9_local0 = 0
	for f9_local4, f9_local5 in ipairs( f9_arg0.attachments ) do
		if f9_local5.ref ~= "none" then
			return true
		end
	end
	return false
end

LOADOUTVAULT.IsLoadoutComplete = function ( f7_arg0, f7_arg1 )
	local f7_local0 = assert
	local f7_local1
	if f7_arg1 then
		f7_local1 = f7_arg1
	else
		f7_local1 = f7_arg1.name:get()
	end
	f7_local0( f7_local1, "Incorrect Loadout Data in Arguments" )
	f7_local0 = {}
	local f7_local2 = f7_arg1.weaponSetups[WEAPON.PrimarySlot]
	f7_local1 = f7_arg1.weaponSetups[WEAPON.SecondarySlot]
	local f7_local3 = {
		f7_arg1.loadoutPerks[0]:get(),
		f7_arg1.loadoutPerks[1]:get(),
		[1] = f7_arg1.loadoutPerks[2]:get()
	}
	local f7_local4 = f7_arg1.equipmentSetups[0].equipment:get()
	local f7_local5 = f7_arg1.equipmentSetups[1].equipment:get()
	local f7_local6 = false
	local f7_local7 = function ( f8_arg0 )
		local f8_local0 = LOADOUTVAULT.VaultCache[f8_arg0.weapon .. "-" .. f8_arg0.lootID]
		local f8_local1
		if f8_local0 then
			f8_local1 = f8_local0.unlocked
			if not f8_local1 then
				if 0 < f8_arg0.variantID then
					f8_local1 = LOOT.IsUnlockedWithID( f7_arg0, f8_arg0.lootID )
					if not f8_local1 then
					
					else
						if not f8_local0 then
							LOADOUTVAULT.VaultCache[f8_arg0.weapon .. "-" .. f8_arg0.lootID] = {
								unlocked = f8_local1,
								attachments = {}
							}
							f8_local0 = LOADOUTVAULT.VaultCache[f8_arg0.weapon .. "-" .. f8_arg0.lootID]
						end
						f7_arg0 = f7_arg0 or not f8_local1
						if not f8_local1 then
							f7_arg0.weapons = f7_arg0.weapons or {}
							local f8_local2 = f7_arg0.weapons
							local f8_local3 = f8_arg0.weapon
							local f8_local4
							if 0 < f8_arg0.variantID then
								f8_local4 = f8_arg0.lootID
								if not f8_local4 then
								
								else
									f8_local2[f8_local3] = f8_local4
								end
							end
							f8_local4 = LOOT.GetBaseWeaponItemID( f8_arg0.weapon )
						end
						local f8_local2 = nil
						if 0 < f8_arg0.variantID then
							f8_local2 = WEAPON.GetModificationAttachments( f7_arg0, f8_arg0.weapon, f8_arg0.lootID )
						end
						for f8_local8, f8_local9 in ipairs( f8_arg0.attachments ) do
							if f8_local9.ref and f8_local9.ref ~= "none" then
								local f8_local6 = f8_local0.attachments[f8_local9.ref]
								local f8_local7
								if f8_local6 then
									f8_local7 = f8_local6.unlocked
									if not f8_local7 then
										if f8_local2 then
											f8_local7 = f8_local2[f8_local9.ref]
											if not f8_local7 then
											
											else
												if not f8_local6 then
													f8_local0.attachments[f8_local9.ref] = {
														unlocked = f8_local7
													}
												end
												f7_arg0 = f7_arg0 or not f8_local7
												if not f8_local7 then
													f7_arg0.attachments = f7_arg0.attachments or {}
													f7_arg0.attachments[f8_arg0.weapon] = f7_arg0.attachments[f8_arg0.weapon] or {}
													f7_arg0.attachments[f8_arg0.weapon][f8_local9.ref] = LOOT.GetItemID( LOOT.itemTypes.ATTACHMENT, f8_local9.ref, {
														weaponRef = f8_arg0.weapon
													} )
												end
											end
										end
										f8_local7 = LOOT.IsUnlocked( f7_arg0, LOOT.itemTypes.ATTACHMENT, f8_local9.ref, {
											weaponRef = f8_arg0.weapon
										} )
									end
								else
									if f8_local2 then
										f8_local7 = f8_local2[f8_local9.ref]
										if not f8_local7 then
										
										else
											if not f8_local6 then
												f8_local0.attachments[f8_local9.ref] = {
													unlocked = f8_local7
												}
											end
											f7_arg0 = f7_arg0 or not f8_local7
											if not f8_local7 then
												f7_arg0.attachments = f7_arg0.attachments or {}
												f7_arg0.attachments[f8_arg0.weapon] = f7_arg0.attachments[f8_arg0.weapon] or {}
												f7_arg0.attachments[f8_arg0.weapon][f8_local9.ref] = LOOT.GetItemID( LOOT.itemTypes.ATTACHMENT, f8_local9.ref, {
													weaponRef = f8_arg0.weapon
												} )
											end
										end
									end
									f8_local7 = LOOT.IsUnlocked( f7_arg0, LOOT.itemTypes.ATTACHMENT, f8_local9.ref, {
										weaponRef = f8_arg0.weapon
									} )
								end
								if not f8_local6 then
									f8_local0.attachments[f8_local9.ref] = {
										unlocked = f8_local7
									}
								end
								f7_arg0 = f7_arg0 or not f8_local7
								if not f8_local7 then
									f7_arg0.attachments = f7_arg0.attachments or {}
									f7_arg0.attachments[f8_arg0.weapon] = f7_arg0.attachments[f8_arg0.weapon] or {}
									f7_arg0.attachments[f8_arg0.weapon][f8_local9.ref] = LOOT.GetItemID( LOOT.itemTypes.ATTACHMENT, f8_local9.ref, {
										weaponRef = f8_arg0.weapon
									} )
								end
							end
						end
					end
				end
				if f8_arg0.variantID == 0 then
					f8_local1 = LOOT.IsUnlocked( f7_arg0, LOOT.itemTypes.WEAPON, f8_arg0.weapon )
				else
					f8_local1 = false
				end
			end
		else
			if 0 < f8_arg0.variantID then
				f8_local1 = LOOT.IsUnlockedWithID( f7_arg0, f8_arg0.lootID )
				if not f8_local1 then
				
				else
					if not f8_local0 then
						LOADOUTVAULT.VaultCache[f8_arg0.weapon .. "-" .. f8_arg0.lootID] = {
							unlocked = f8_local1,
							attachments = {}
						}
						f8_local0 = LOADOUTVAULT.VaultCache[f8_arg0.weapon .. "-" .. f8_arg0.lootID]
					end
					f7_arg0 = f7_arg0 or not f8_local1
					if not f8_local1 then
						f7_arg0.weapons = f7_arg0.weapons or {}
						local f8_local2 = f7_arg0.weapons
						local f8_local3 = f8_arg0.weapon
						local f8_local4
						if 0 < f8_arg0.variantID then
							f8_local4 = f8_arg0.lootID
							if not f8_local4 then
							
							else
								f8_local2[f8_local3] = f8_local4
							end
						end
						f8_local4 = LOOT.GetBaseWeaponItemID( f8_arg0.weapon )
					end
					local f8_local2 = nil
					if 0 < f8_arg0.variantID then
						f8_local2 = WEAPON.GetModificationAttachments( f7_arg0, f8_arg0.weapon, f8_arg0.lootID )
					end
					for f8_local8, f8_local9 in ipairs( f8_arg0.attachments ) do
						if f8_local9.ref and f8_local9.ref ~= "none" then
							local f8_local6 = f8_local0.attachments[f8_local9.ref]
							local f8_local7
							if f8_local6 then
								f8_local7 = f8_local6.unlocked
								if not f8_local7 then
									if f8_local2 then
										f8_local7 = f8_local2[f8_local9.ref]
										if not f8_local7 then
										
										else
											if not f8_local6 then
												f8_local0.attachments[f8_local9.ref] = {
													unlocked = f8_local7
												}
											end
											f7_arg0 = f7_arg0 or not f8_local7
											if not f8_local7 then
												f7_arg0.attachments = f7_arg0.attachments or {}
												f7_arg0.attachments[f8_arg0.weapon] = f7_arg0.attachments[f8_arg0.weapon] or {}
												f7_arg0.attachments[f8_arg0.weapon][f8_local9.ref] = LOOT.GetItemID( LOOT.itemTypes.ATTACHMENT, f8_local9.ref, {
													weaponRef = f8_arg0.weapon
												} )
											end
										end
									end
									f8_local7 = LOOT.IsUnlocked( f7_arg0, LOOT.itemTypes.ATTACHMENT, f8_local9.ref, {
										weaponRef = f8_arg0.weapon
									} )
								end
							else
								if f8_local2 then
									f8_local7 = f8_local2[f8_local9.ref]
									if not f8_local7 then
									
									else
										if not f8_local6 then
											f8_local0.attachments[f8_local9.ref] = {
												unlocked = f8_local7
											}
										end
										f7_arg0 = f7_arg0 or not f8_local7
										if not f8_local7 then
											f7_arg0.attachments = f7_arg0.attachments or {}
											f7_arg0.attachments[f8_arg0.weapon] = f7_arg0.attachments[f8_arg0.weapon] or {}
											f7_arg0.attachments[f8_arg0.weapon][f8_local9.ref] = LOOT.GetItemID( LOOT.itemTypes.ATTACHMENT, f8_local9.ref, {
												weaponRef = f8_arg0.weapon
											} )
										end
									end
								end
								f8_local7 = LOOT.IsUnlocked( f7_arg0, LOOT.itemTypes.ATTACHMENT, f8_local9.ref, {
									weaponRef = f8_arg0.weapon
								} )
							end
							-- ERROR: Infinite loop detected
						end
					end
				end
			end
			if f8_arg0.variantID == 0 then
				f8_local1 = LOOT.IsUnlocked( f7_arg0, LOOT.itemTypes.WEAPON, f8_arg0.weapon )
			else
				f8_local1 = false
			end
		end
		if not f8_local0 then
			LOADOUTVAULT.VaultCache[f8_arg0.weapon .. "-" .. f8_arg0.lootID] = {
				unlocked = f8_local1,
				attachments = {}
			}
			f8_local0 = LOADOUTVAULT.VaultCache[f8_arg0.weapon .. "-" .. f8_arg0.lootID]
		end
		f7_arg0 = f7_arg0 or not f8_local1
		if not f8_local1 then
			f7_arg0.weapons = f7_arg0.weapons or {}
			local f8_local2 = f7_arg0.weapons
			local f8_local3 = f8_arg0.weapon
			local f8_local4
			if 0 < f8_arg0.variantID then
				f8_local4 = f8_arg0.lootID
				if not f8_local4 then
				
				else
					f8_local2[f8_local3] = f8_local4
				end
			end
			f8_local4 = LOOT.GetBaseWeaponItemID( f8_arg0.weapon )
		end
		local f8_local2 = nil
		if 0 < f8_arg0.variantID then
			f8_local2 = WEAPON.GetModificationAttachments( f7_arg0, f8_arg0.weapon, f8_arg0.lootID )
		end
		for f8_local8, f8_local9 in ipairs( f8_arg0.attachments ) do
			if f8_local9.ref and f8_local9.ref ~= "none" then
				local f8_local6 = f8_local0.attachments[f8_local9.ref]
				local f8_local7
				if f8_local6 then
					f8_local7 = f8_local6.unlocked
					if not f8_local7 then
						if f8_local2 then
							f8_local7 = f8_local2[f8_local9.ref]
							if not f8_local7 then
							
							else
								-- ERROR: Infinite loop detected
							end
						end
						f8_local7 = LOOT.IsUnlocked( f7_arg0, LOOT.itemTypes.ATTACHMENT, f8_local9.ref, {
							weaponRef = f8_arg0.weapon
						} )
					end
				else
					-- ERROR: Infinite loop detected
				end
				-- ERROR: Infinite loop detected
			end
		end
	end
	
	f7_local7( WEAPON.GenerateWeaponTable( f7_local2 ) )
	f7_local7( WEAPON.GenerateWeaponTable( f7_local1 ) )
	for f7_local12, f7_local13 in ipairs( f7_local3 ) do
		local f7_local14 = LOADOUTVAULT.VaultCache[f7_local13]
		local f7_local11
		if f7_local14 then
			f7_local11 = f7_local14.unlocked
			if not f7_local11 then
			
			else
				if not f7_local14 then
					LOADOUTVAULT.VaultCache[f7_local13] = {
						unlocked = f7_local11
					}
				end
				if not f7_local6 then
					f7_local6 = not f7_local11
				end
				if not f7_local11 then
					f7_local0.perks = f7_local0.perks or {}
					f7_local0.perks[f7_local13] = LOOT.GetItemID( LOOT.itemTypes.PERK, f7_local13 )
				end
			end
		end
		f7_local11 = LOOT.IsUnlocked( f7_arg0, LOOT.itemTypes.PERK, f7_local13 )
	end
	f7_local8 = LOADOUTVAULT.VaultCache[f7_local4]
	if f7_local8 then
		f7_local9 = f7_local8.unlocked
		if not f7_local9 then
		
		else
			if not f7_local8 then
				LOADOUTVAULT.VaultCache[f7_local4] = {
					unlocked = f7_local9
				}
			end
			if not f7_local6 then
				f7_local6 = not f7_local9
			end
			if not f7_local9 then
				f7_local0.equipment = f7_local0.equipment or {}
				f7_local0.equipment[f7_local4] = LOOT.GetItemID( LOOT.itemTypes.EQUIPMENT, f7_local4 )
				f7_local0.lethals = f7_local0.lethals or {}
				f7_local0.lethals[f7_local4] = LOOT.GetItemID( LOOT.itemTypes.EQUIPMENT, f7_local4 )
			end
			f7_local10 = LOADOUTVAULT.VaultCache[f7_local5]
			if f7_local10 then
				f7_local12 = f7_local10.unlocked
				if not f7_local12 then
				
				else
					if not f7_local10 then
						LOADOUTVAULT.VaultCache[f7_local5] = {
							unlocked = f7_local12
						}
					end
					if not f7_local6 then
						f7_local6 = not f7_local12
					end
					if not f7_local12 then
						f7_local0.equipment = f7_local0.equipment or {}
						f7_local0.equipment[f7_local5] = LOOT.GetItemID( LOOT.itemTypes.EQUIPMENT, f7_local5 )
						f7_local0.tacticals = f7_local0.tacticals or {}
						f7_local0.tacticals[f7_local5] = LOOT.GetItemID( LOOT.itemTypes.EQUIPMENT, f7_local5 )
					end
					return not f7_local6, f7_local0
				end
			end
			f7_local12 = LOOT.IsUnlocked( f7_arg0, LOOT.itemTypes.EQUIPMENT, f7_local5 )
		end
	end
	f7_local9 = LOOT.IsUnlocked( f7_arg0, LOOT.itemTypes.EQUIPMENT, f7_local4 )
end

LOADOUTVAULT.IsLoadoutValid = function ( f6_arg0 )
	if f6_arg0 == nil then
		return false
	elseif LUI.IsStringNilOrEmpty( f6_arg0.weaponSetups[WEAPON.PrimarySlot].weapon:get() ) or LUI.IsStringNilOrEmpty( f6_arg0.weaponSetups[WEAPON.SecondarySlot].weapon:get() ) then
		return false
	elseif f6_arg0.equipmentSetups[0].equipment:get() == f0_local0 or f6_arg0.equipmentSetups[1].equipment:get() == f0_local0 then
		return false
	elseif f6_arg0.loadoutPerks[0]:get() == f0_local0 or f6_arg0.loadoutPerks[1]:get() == f0_local0 or f6_arg0.loadoutPerks[2]:get() == f0_local0 then
		return false
	else
		return true
	end
end

LOADOUTVAULT.GetLoadoutXUID = function ( f5_arg0 )
	if f5_arg0 and f5_arg0.authorXuidHigh and f5_arg0.authorXuidLow then
		return Social[0xB20F725229105CA]( f5_arg0.authorXuidHigh:get(), f5_arg0.authorXuidLow:get() )
	else
		
	end
end

LOADOUTVAULT.RenameLoadout = function ( f3_arg0, f3_arg1, f3_arg2 )
	local f3_local0 = LOADOUTVAULT.GetLoadoutVaultPlayerData( f3_arg1, f3_arg2 )
	local f3_local1 = {
		maxLength = 20,
		headerText = Engine[0xED84C33EC5F01EA]( "MENU/RENAME" )
	}
	local f3_local2 = f3_local0.name:get()
	if not f3_local2 then
		f3_local2 = Engine[0xED84C33EC5F01EA]( "CAS/ENTER_NAME_HINT" )
	end
	f3_local1.hintText = f3_local2
	f3_local1.acceptCallbackFunc = function ( f4_arg0, f4_arg1 )
		local f4_local0 = f4_arg0:GetCurrentMenu()
		local f4_local1 = f4_local0.GenericEditBox:GetText()
		if f4_local1 ~= nil and f4_local1 ~= "" then
			local f4_local2 = OSK[0xD6AD1A0C00C462F]( f4_arg1, f4_local1 )
			if f4_local2 and 0 < #f4_local2 then
				LUI.FlowManager.RequestPopupMenu( nil, "MessagePopup", true, f4_arg1, false, {
					headerText = Engine[0xED84C33EC5F01EA]( "MENU/ERROR" ),
					messageText = Engine[0xED84C33EC5F01EA]( f4_local2 )
				}, nil, nil, true )
			else
				f3_arg0.name:set( Engine[0x73CE20BAEF909FB]( f4_local1, f3_arg0 ) )
				f4_arg0:dispatchEventToRoot( {
					name = "refresh_loadouts"
				} )
				f4_arg0:dispatchEventToRoot( {
					name = "send_toast_notification",
					immediate = true,
					options = {
						iconScale = 4.667263495923649E-62,
						displayTime = 3000,
						icon = "cac_equip_fill",
						iconColor = SWATCHES.genericMenu.title,
						header = Engine[0xED84C33EC5F01EA]( "LOADOUT_VAULT/SCHEME_RENAMED" ),
						description = f3_arg0.name:get(),
						controllerIndex = f4_arg1,
						type = LUI.ToastManager.NotificationType.LoadoutOptions
					}
				} )
			end
		end
	end
	
	LUI.FlowManager.RequestPopupMenu( nil, "EditBoxPopup", true, f3_arg1, false, f3_local1, nil, true )
end

LOADOUTVAULT.SendEquipEvent = function ( f2_arg0, f2_arg1 )
	if not CONDITIONS.IsLoadoutSharingTelemetryEnabled() then
		return 
	end
	local f2_local0 = {
		scheme_name = f2_arg1.name:get(),
		scheme_author = f2_arg1.authorName:get()
	}
	for f2_local1 = 0, WEAPON.SecondarySlot, 1 do
		local f2_local4 = f2_arg1.weaponSetups[f2_local1]
		local f2_local5 = WEAPON.StripSuffix( f2_local4.weapon:get() or "", "_mp" )
		local f2_local6 = f2_local4.variantID:get()
		if f2_local6 and 0 < f2_local6 then
			f2_local5 = f2_local5 .. "|" .. tostring( f2_local6 )
		end
		local f2_local7 = {}
		for f2_local13, f2_local14 in ddlpairs( f2_local4.attachmentSetup ) do
			local f2_local15 = f2_local14.attachment:get()
			if f2_local15 ~= "" and f2_local15 ~= "none" then
				local f2_local11 = f2_local15
				local f2_local12 = f2_local14.variantID:get()
				if f2_local12 and 0 < f2_local12 then
					f2_local11 = f2_local11 .. "|" .. tostring( f2_local12 )
				end
				table.insert( f2_local7, f2_local11 )
			end
		end
		table.sort( f2_local7 )
		f2_local8 = f2_local5
		if 0 < #f2_local7 then
			f2_local8 = f2_local8 .. "+" .. table.concat( f2_local7, "+" )
		end
		if f2_local1 == 0 then
			f2_local0.primary_weapon = f2_local8
		else
			f2_local0.secondary_weapon = f2_local8
		end
	end
	for f2_local16, f2_local4 in ddlpairs( f2_arg1.equipmentSetups ) do
		local f2_local5 = f2_local4.equipment:get() or ""
		if f2_local4.extraCharge:get() ~= 0 then
			f2_local5 = f2_local5 .. "|" .. tostring( f2_local4.extraCharge:get() )
		end
		if f2_local16 == 0 then
			f2_local0.primary_equipment = f2_local5
		end
		if f2_local16 == 1 then
			f2_local0.secondary_equipment = f2_local5
		end
	end
	for f2_local16, f2_local4 in ddlpairs( f2_arg1.loadoutPerks ) do
		local f2_local5 = f2_local4:get()
		if f2_local16 == 0 then
			f2_local0.perk_1 = f2_local5
		end
		if f2_local16 == 1 then
			f2_local0.perk_2 = f2_local5
		end
		if f2_local16 == 2 then
			f2_local0.perk_3 = f2_local5
		end
	end
	Engine[0x15D98DF5F61904B]( f2_arg0, "dlog_event_loadout_vault_equip_scheme", f2_local0 )
end

LOADOUTVAULT.SendCopySchemeEvent = function ( f1_arg0, f1_arg1, f1_arg2, f1_arg3 )
	if not CONDITIONS.IsLoadoutSharingTelemetryEnabled() then
		return 
	end
	local f1_local0 = Engine[0x15D98DF5F61904B]
	local f1_local1 = f1_arg0
	local f1_local2 = "dlog_event_loadout_sharing_scheme_copied"
	local f1_local3 = {}
	local f1_local4
	if not f1_arg1 then
		f1_local4 = f1_arg1
	else
		f1_local4 = ""
	end
	f1_local3.scheme_author = f1_local4
	if not f1_arg2 then
		f1_local4 = f1_arg2
	else
		f1_local4 = ""
	end
	f1_local3.scheme_name = f1_local4
	f1_local3.source = f1_arg3
	f1_local0( f1_local1, f1_local2, f1_local3 )
end

