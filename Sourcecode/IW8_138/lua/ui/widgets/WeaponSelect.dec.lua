-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 02-09-2025 10:42
module( ..., package.seeall )
local f0_local0 = function ( f58_arg0, f58_arg1 )
	if LOOT.HideLootBreadcrumbsCondition( true ) then
		return 
	end
	local f58_local0 = f58_arg0.Tabs:GetTabAtIndex( f58_arg1 )
	if not f58_local0:IsEnabled() then
		return 
	end
	local f58_local1 = WEAPON.GetNewWeaponIDsByClass( f58_arg0._controllerIndex, f58_arg0.tabsData[f58_arg1].classRef )
	if f58_local0.NewItemSmallIcon then
		local f58_local2 = f58_local0.NewItemSmallIcon
		local f58_local3 = f58_local2
		f58_local2 = f58_local2.UpdateAlpha
		local f58_local4
		if 0 < #f58_local1 and not f58_arg0._isRestricted then
			f58_local4 = 1
		else
			f58_local4 = 0
		end
		f58_local2( f58_local3, f58_local4, 0, true )
	end
end

local f0_local1 = function ( f57_arg0, f57_arg1, f57_arg2 )
	local f57_local0 = {}
	table.insert( f57_local0, f57_arg0._otherSelectedModel )
	table.insert( f57_local0, f57_arg0._equippedWatchModel )
	local f57_local1 = LUI.FlowManager.GetScopedData( f57_arg0 )
	local f57_local2 = nil
	for f57_local3 = f57_arg2 - 1, f57_arg2 + 1, 1 do
		local f57_local6
		if #f57_arg0._currentWeapons < f57_local3 then
			f57_local6 = 1
		elseif f57_local3 == 0 then
			f57_local6 = #f57_arg0._currentWeapons
		end
		local f57_local7 = assert
		local f57_local8
		if 0 >= f57_local6 or f57_local6 > #f57_arg0._currentWeapons then
			f57_local8 = false
		else
			f57_local8 = true
		end
		f57_local7( f57_local8 )
		local f57_local9 = WEAPON.GetWeaponModelNameFromRef( f57_arg0._currentWeapons[f57_local6].ref )
		DYN_ATTACHMENT.SetupWeaponAttachmentStreamer( f57_arg0, DYN_ATTACHMENT.GetDynamicAttachmentsTable( f57_local9 ), false )
		if not LUI.IsItemInArray( f57_local0, f57_local9 ) then
			if f57_local6 == f57_arg2 then
				f57_local2 = f57_local9
			else
				table.insert( f57_local0, f57_local9 )
			end
		end
	end
	if f57_local2 then
		table.insert( f57_local0, f57_local2 )
	end
	if 0 < #f57_local0 then
		FrontEndScene.RequestWeaponViewModels( f57_local0, f57_arg1 )
	end
end

local f0_local2 = function ( f56_arg0, f56_arg1 )
	for f56_local3, f56_local4 in ipairs( f56_arg0:GetBuiltChildren() ) do
		f56_local4:SetHandleMouse( f56_arg1 )
	end
end

local f0_local3 = function ( f55_arg0, f55_arg1, f55_arg2 )
	local f55_local0 = {}
	for f55_local1 = f55_arg2 - 1, f55_arg2 + 1, 1 do
		if 1 <= f55_local1 and f55_local1 <= #f55_arg0.tabsData and f55_local1 ~= f55_arg2 then
			local f55_local4 = WEAPON.GetWeaponModelNameFromRef( f55_arg0.tabsData[f55_local1].weaponData[1].ref )
			if not LUI.IsItemInArray( f55_local0, f55_local4 ) then
				table.insert( f55_local0, f55_local4 )
			end
		end
	end
	if not LUI.IsItemInArray( f55_local0, f55_arg0._otherSelectedModel ) then
		table.insert( f55_local0, f55_arg0._otherSelectedModel )
		table.insert( f55_local0, f55_arg0._equippedWatchModel )
	end
	if 0 < #f55_local0 then
		FrontEndScene.RequestWeaponViewModels( f55_local0, f55_arg1 )
	end
end

local f0_local4 = function ( f54_arg0, f54_arg1, f54_arg2, f54_arg3 )
	if f54_arg2.isBlueprint then
		return WEAPON.GetWeaponModelName( f54_arg2.weaponData.ref, f54_arg2.weaponData.blueprint, {
			includeAttachments = true,
			controllerIndex = f54_arg1
		} )
	else
		return WEAPON.GetWeaponModelNameFromRef( f54_arg2.weaponData.ref )
	end
end

local f0_local5 = function ( f51_arg0, f51_arg1, f51_arg2, f51_arg3, f51_arg4, f51_arg5 )
	local f51_local0 = f0_local0( f51_arg0, f51_arg1, f51_arg2, f51_arg5.weaponSetups[f51_arg4] )
	if f51_arg0._currentWeaponModel then
		local f51_local1 = function ()
			assert( f51_arg0._nextWeaponModel )
			f51_arg0._currentWeaponModel = f51_arg0._nextWeaponModel
			f51_arg0._nextWeaponModel = nil
			f51_arg0:SetWeaponModel( f51_arg0._currentWeaponModel )
			if f51_arg0.hidden then
				f51_arg0:SetAnchorsAndPosition( 0, 0, 0, 1, _1080p * -302, _1080p * 779, _1080p * 290, _1080p * 740, 0 )
				f51_arg0.hidden = false
			end
		end
		
		f51_arg0._nextWeaponModel = f51_local0
		assert( f51_arg0._nextWeaponModel )
		if Streaming.DACIGAEDAE( {
			f51_arg0._nextWeaponModel
		}, f51_arg1 ) then
			f51_local1()
		else
			local f51_local2 = nil
			local f51_local3 = function ()
				local f52_local0 = WEAPON.GenerateWeaponTable( f51_arg0.weaponSetups[f51_arg0] )
				if f51_arg0._nextWeaponModel then
					if Streaming.DACIGAEDAE( {
						f51_arg0._nextWeaponModel
					}, f51_arg0 ) then
						f51_arg0()
					else
						local f52_local1 = f51_arg0:Wait( 100, true )
						f52_local1.onComplete = f51_arg0
						f51_arg0:SetAnchorsAndPosition( 0, 0, 0, 1, _1080p * -302, _1080p * 779, _1080p * 1500, _1080p * 1500, 0 )
						f51_arg0.hidden = true
					end
				end
			end
			
			f51_local3()
		end
	end
	f51_arg3:SetWeaponModel( f51_local0 )
	f51_arg0._currentWeaponModel = f51_local0
	f51_arg0._nextWeaponModel = nil
end

local f0_local6 = function ( f50_arg0, f50_arg1 )
	local f50_local0 = -0.6
	local f50_local1 = 0.6
	local f50_local2 = -0.6
	local f50_local3 = 0.6
	local f50_local4 = 3500
	local f50_local5 = ""
	local f50_local6 = WEAPON.GetWeaponClass( f50_arg1 )
	if f50_arg0.weaponSlot == WEAPON.PrimarySlot then
		f50_local5 = "loadout_showcase_p"
	else
		f50_local5 = WEAPON.GetGunTableSecondPositionScene( f50_arg1 )
		if f50_local5 == "loadout_showcase_s" then
			local f50_local7 = -0.3
			local f50_local8 = 0.3
			local f50_local9 = -0.3
			f50_local3 = 0.3
			f50_local2 = f50_local9
			f50_local1 = f50_local8
			f50_local0 = f50_local7
			f50_local4 = 4500
		end
	end
	if f50_arg0._currentCamera ~= f50_local5 then
		f50_arg0._currentCamera = f50_local5
		Engine.DHFCHIIJCA( f50_arg0._currentCamera )
	end
	f50_arg0.FrontendCameraMover:SetLimits( f50_local0, f50_local1, f50_local2, f50_local3 )
	f50_arg0.FrontendCameraMover:SetSwayValues( f50_local4, 0.06, 0.1 )
end

local f0_local7 = function ( f49_arg0 )
	local f49_local0
	if f49_arg0 then
		f49_local0 = f49_arg0
	else
		if not f49_arg0.disabled then
			f49_local0 = f49_arg0.weaponData.isUnlocked
			if f49_local0 then
				if f49_arg0.weaponData.isGunsmithDisabled == "1" then
					f49_local0 = false
				else
					f49_local0 = true
				end
			else
				return f49_local0
			end
		end
		f49_local0 = false
	end
	return f49_local0
end

local f0_local8 = function ( f47_arg0, f47_arg1, f47_arg2, f47_arg3, f47_arg4 )
	return function ( f48_arg0, f48_arg1 )
		if Engine.DDJFBBJAIG() then
			f47_arg0( f47_arg0, f47_arg0.weaponData.ref )
		end
		local f48_local0 = f47_arg0.weaponData.isUnlocked
		f47_arg0.InfoPanel.ItemName:setText( ToUpperCase( f47_arg0.weaponName ) )
		f47_arg0.InfoPanel:SetEquipped( f47_arg0._isSelected )
		local f48_local1 = LOOT.GetItemID( LOOT.itemTypes.WEAPON, f47_arg0.weaponData.ref )
		local f48_local2 = false
		if not LOOT.HideLootBreadcrumbsCondition( true ) then
			f48_local2 = Loot.HDJCADADF( f47_arg0, f48_local1 )
		end
		local f48_local3 = CONDITIONS.AreRestrictionsActive( f47_arg0 )
		if f48_local3 then
			f48_local3 = MatchRules.CADFFHGJAE( f47_arg0.weaponData.ref )
		end
		local f48_local4 = {
			newDesc = f47_arg0.desc,
			isUnlocked = f48_local0,
			isNew = f48_local2,
			isRestricted = f48_local3
		}
		if not f48_local0 then
			local f48_local5 = WEAPON.GetChallengeUnlockRow( f48_local1 )
			if f48_local5 and 0 <= f48_local5 then
				local f48_local6 = CSV.ReadRow( CSV.gunChallenges, f48_local5 )
				local f48_local7 = Gunsmith.CIJGBIFEIF( f47_arg0, f48_local6.id )
				f48_local4.challengeInfo = {
					lootID = f48_local1,
					challengeID = f48_local6.id,
					progress = f48_local7.progress
				}
			else
				f48_local4.unlockText = f47_arg0.weaponData.unlockCriteria
				f48_local4.unlockRank = PROGRESSION.GetUnlockRank( f48_local1 )
			end
		end
		if f47_arg0.isAlreadyEquipped then
			f48_local4.isOverkill = true
			local f48_local5 = Engine.CBBHFCGDIC
			local f48_local7 = "LUA_MENU/WEAPON_CONFLICT"
			local f48_local8
			if f47_arg0.weaponSlot == 0 then
				f48_local8 = "LUA_MENU/SECONDARY"
			else
				f48_local8 = "LUA_MENU/PRIMARY"
			end
			f48_local4.unlockText = f48_local5( f48_local7, f48_local8 )
			f48_local4.isUnlocked = false
		end
		if CONDITIONS.UsingWZLoadouts() then
			f48_local4.weaponRef = f47_arg0.weaponData.ref
			f48_local4.selected = f47_arg0.equippedWeapon == f47_arg0.weaponData.ref
			f47_arg0.WZWipSnipeBackgroundSceneOverlay:UpdateSnipeOverlay( {
				weaponRef = f47_arg0.weaponData.ref,
				useGunsmithSetup = not Engine.DDJFBBJAIG()
			} )
		end
		f47_arg0.InfoPanel:UpdateDescription( f48_local4 )
		if Engine.DDJFBBJAIG() then
			local f48_local5 = f47_arg0( f47_arg0 )
			local f48_local6 = f47_arg0.InfoPanel.ActionPrompt
			local f48_local8 = f48_local6
			f48_local6 = f48_local6.SetAlpha
			local f48_local9
			if f48_local5 then
				f48_local9 = 1
			else
				f48_local9 = 0
			end
			f48_local6( f48_local8, f48_local9 )
		end
		if f47_arg0.isBlueprint then
			local f48_local5 = f47_arg0.weaponData.blueprint
			if f48_local5 then
				local f48_local6 = ATTACHMENT.GetStatsForAttachments( f47_arg0.weaponData.ref, f48_local5.attachments )
				f47_arg0.WeaponAttributes:Setup( f48_local5, f47_arg0 )
			end
		else
			f47_arg0.WeaponAttributes:Setup( {
				weapon = f47_arg0.weaponData.ref
			}, f47_arg0 )
		end
		f47_arg0.currentSelection = {
			weapon = f47_arg0.weaponData.ref,
			blueprint = f47_arg0.weaponData.blueprint
		}
		if Engine.DDJFBBJAIG() then
			f47_arg0( f47_arg0, f47_arg0, f47_arg0.gridIndex, f47_arg0 )
			f47_arg0( f47_arg0, f47_arg0, f47_arg0, f47_arg0.weaponModel, f47_arg0.weaponSlot, f47_arg0 )
		end
		local f48_local5 = LUI.FlowManager.GetScopedData( f47_arg0 )
		f48_local5.previousFocusedButton = f47_arg0
		if f47_arg0._isSelected then
			f47_arg0.InfoPanel.NewItemNotification:SetAlpha( 0 )
		else
			f47_arg0.InfoPanel.NewItemNotification:UpdateBreadcrumbByID( f47_arg0, f48_local1, true )
		end
		f47_arg0.ComparisonString:setText( Engine.CBBHFCGDIC( "WEAPON/COMPARISON", WEAPON.GetName( f47_arg0.equippedWeapon ) ) )
		if f47_arg0.BundleUpsellButton then
			if Dvar.IBEGCHEFE( "LTSNLQNRKO" ) and Dvar.IBEGCHEFE( "NKRLMNTNRS" ) and not CONDITIONS.AreRestrictionsActive( f47_arg0 ) and f48_local5.bundleVariants[f47_arg0.weaponData.ref] and f48_local5.bundleVariants[f47_arg0.weaponData.ref][1] then
				f47_arg0.BundleUpsellButton:SetupUpsellButtonWithBundleID( f47_arg0, f48_local5.bundleVariants[f47_arg0.weaponData.ref][1].bundleID )
			else
				f47_arg0.BundleUpsellButton:HideButton()
			end
		end
		if f47_arg0.MasterChallenges then
			if GUNSMITH.AreMasterChallengesEnabled( f47_arg0, f47_arg0.weaponData.ref ) then
				f47_arg0.MasterChallenges:SetAlpha( 1 )
				f47_arg0.MasterChallenges:Setup( f47_arg0.weaponData.ref )
			else
				f47_arg0.MasterChallenges:SetAlpha( 0 )
			end
		end
	end
	
end

local f0_local9 = function ( f46_arg0, f46_arg1, f46_arg2 )
	local f46_local0 = f46_arg2._loadoutPlayerData.loadoutPerks[0]:get()
	local f46_local1 = f46_arg2._loadoutPlayerData.loadoutPerks[1]:get()
	local f46_local2 = f46_arg2._loadoutPlayerData.loadoutPerks[2]:get()
	if not PERK.IsPerkOverkill( f46_local0 ) and not PERK.IsPerkOverkill( f46_local1 ) then
		local f46_local3 = PERK.IsPerkOverkill( f46_local2 )
	end
	if f46_arg2.equippedWeapon ~= f46_arg0.weaponData.ref then
		f46_arg2:dispatchEventToRoot( {
			name = "send_toast_notification",
			immediate = true,
			options = {
				iconScale = 4.667263495923649E-62,
				displayTime = 3000,
				icon = "cac_equip_fill",
				iconColor = SWATCHES.genericMenu.notificationHighlight,
				header = Engine.CBBHFCGDIC( "LUA_MENU/WEAPON_EQUIPPED" ),
				description = Engine.CBBHFCGDIC( f46_arg0.weaponData.name ),
				type = LUI.ToastManager.NotificationType.WeaponEquipped,
				controllerIndex = f46_arg1
			}
		} )
	end
	if f46_arg0.isBlueprint then
		WEAPON.EquipModification( f46_arg2._loadoutPlayerData.weaponSetups[f46_arg2.weaponSlot], f46_arg0.weaponData.blueprint )
	else
		WEAPON.EquipBaseWeapon( f46_arg2._loadoutPlayerData.weaponSetups[f46_arg2.weaponSlot], f46_arg0.weaponData.ref )
	end
end

local f0_local10 = function ( f45_arg0, f45_arg1, f45_arg2 )
	f0_local0( f45_arg2, controllerindex, f45_arg0, f45_arg0._loadoutPlayerData )
	GUNSMITH.OpenGunsmith( f45_arg1, f45_arg0.loadoutIndex, f45_arg0.weaponSlot, true )
end

local f0_local11 = function ( f44_arg0, f44_arg1, f44_arg2 )
	local f44_local0
	if not f44_arg2 then
		f44_local0 = f44_arg2
	else
		f44_local0 = {}
	end
	f44_local0.weaponTable = WEAPON.GenerateWeaponTableFromRef( f44_arg0.currentSelection.weapon )
	LUI.FlowManager.RequestAddMenu( "WeaponPreview", true, f44_arg1, nil, f44_local0, true )
end

local f0_local12 = function ( f40_arg0, f40_arg1, f40_arg2 )
	f40_arg1:SetupContextualMenu( {
		title = f40_arg1.weaponName
	} )
	f40_arg1:AddContextualMenuAction( {
		id = "equipAndGunsmith",
		actionName = Engine.CBBHFCGDIC( "LUA_MENU/TO_GUNSMITH_CONTEXTUAL_MENU" ),
		actionFunction = function ()
			f40_arg0( f40_arg0, f40_arg0, f40_arg0 )
		end,
		conditionFunction = function ()
			return f40_arg0( f40_arg0 )
		end
	} )
	if CONDITIONS.InFrontend( self ) then
		f40_arg1:AddContextualMenuAction( {
			id = "previewWeapon",
			actionName = Engine.CBBHFCGDIC( "CAS/PREVIEW_WEAPON" ),
			actionFunction = function ()
				f40_arg0( f40_arg0, f40_arg0, nil )
			end
		} )
	end
end

local f0_local13 = function ( f35_arg0, f35_arg1, f35_arg2, f35_arg3, f35_arg4, f35_arg5 )
	assert( f35_arg2.WeaponButton.BlueprintIndicator )
	local f35_local0 = 1 - f35_arg0.weaponSlot
	local f35_local1 = f35_arg5.weaponSetups[f35_arg0.weaponSlot]
	local f35_local2 = f35_arg5.weaponSetups[f35_local0]
	local f35_local3 = f35_local1.weapon:get()
	local f35_local4 = f35_local2.weapon:get()
	local f35_local5 = f35_arg2.WeaponButton
	f35_local5.lootID = LOOT.GetItemID( LOOT.itemTypes.WEAPON, f35_arg3.ref )
	f35_local5.isNew = f35_local5.NewItemNotification:UpdateBreadcrumbByID( f35_arg1, f35_local5.lootID, true )
	local f35_local6 = f35_local4 == f35_arg3.ref
	local f35_local7
	if f35_local3 ~= f35_arg3.ref then
		f35_local7 = f35_local6
	else
		f35_local7 = true
	end
	local f35_local8 = f35_local5
	local f35_local9 = f35_local5.SetButtonDisabled
	local f35_local10
	if f35_arg3.isUnlocked then
		f35_local10 = f35_local6
	else
		f35_local10 = true
	end
	f35_local9( f35_local8, f35_local10 )
	if f35_arg2.BlueprintButton then
		f35_arg2.BlueprintButton:SetButtonDisabled( f35_local6 )
	end
	f35_local5.isAlreadyEquipped = f35_local6
	f35_local5:SetSelected( f35_local7 )
	f35_arg3.unlockRow = 0
	f35_local5.weaponData = f35_arg3
	if f35_arg2.BlueprintButton then
		f35_arg2.BlueprintButton.weaponData = f35_arg3
	end
	f35_local5.gridIndex = f35_arg4
	f35_local5.desc = WEAPON.GetDesc( f35_local5.weaponData.ref )
	f35_local5.className = WEAPON.GetWeaponClassName( f35_local5.weaponData.ref )
	f35_local9 = f35_arg0.blueprintsByWeapon[f35_arg3.ref]
	local f35_local11 = f35_arg0.blueprintsByWeapon[f35_arg3.ref] and #f35_arg0.blueprintsByWeapon[f35_arg3.ref] or 0
	local f35_local12 = f35_arg2
	f35_local8 = f35_arg2.SetBlueprintActive
	local f35_local13 = f35_arg3.ref
	local f35_local14
	if f35_local9 then
		f35_local14 = f35_local9
	else
		f35_local14 = CONDITIONS.AreWeaponVariantsEnabled( f35_arg1 )
	end
	f35_local8( f35_local12, f35_local13, f35_local14, f35_local11 - 1 )
	f35_local8 = WEAPON.GetNewArmoryIDsByWeapon( f35_arg1, f35_local5.weaponData.ref )
	if f35_local8 and f35_arg2.BlueprintButton and f35_arg2.BlueprintButton.NewItemSmallIcon then
		f35_local10 = f35_arg2.BlueprintButton.NewItemSmallIcon
		f35_local13 = f35_local10
		f35_local10 = f35_local10.UpdateAlpha
		if 0 < #f35_local8 then
			f35_local14 = 1
		else
			f35_local14 = 0
		end
		f35_local10( f35_local13, f35_local14, 0, true )
	end
	if f35_arg2.BlueprintStoreButton then
		f35_local10 = LUI.FlowManager.GetScopedData( f35_arg0 )
		f35_local12 = STORE.AreAnyBundlesNew( f35_arg1, f35_local10.bundleVariants[f35_arg3.ref] )
		f35_local13 = f35_arg2.BlueprintStoreButton.NewItemSmallIcon
		local f35_local15 = f35_local13
		f35_local13 = f35_local13.UpdateAlpha
		local f35_local16
		if f35_local12 then
			f35_local16 = 1
		else
			f35_local16 = 0
		end
		f35_local13( f35_local15, f35_local16, 0, true )
	end
	f35_local10 = ""
	if f35_local7 then
		if f35_local3 == f35_arg3.ref then
			f35_local10 = GUNSMITH.GetCustomModName( f35_local1.blueprintName:get() )
			f35_local5.weaponData.blueprint = WEAPON.GenerateWeaponTable( f35_local1 )
		elseif f35_local4 == f35_arg3.ref then
			f35_local10 = GUNSMITH.GetCustomModName( f35_local2.blueprintName:get() )
			f35_local5.weaponData.blueprint = WEAPON.GenerateWeaponTable( f35_local2 )
		end
	end
	f35_local5.isBlueprint = 0 < #f35_local10
	if f35_local5.isBlueprint then
		f35_local5.weaponName = Engine.CBBHFCGDIC( "CAS/BLUEPRINT_AND_WEAPON", f35_arg3.name, Engine.JCBDICCAH( f35_local10 ) )
	else
		f35_local5.weaponName = Engine.CBBHFCGDIC( f35_arg3.name )
	end
	f35_local5.Text:setText( f35_local5.weaponName )
	f35_local5.ClassName:setText( WEAPON.GetSubClass( f35_arg3.ref ) )
	f35_local5.WeaponIcon:setImage( RegisterMaterial( WEAPON.GetBWImage( f35_local5.weaponData.ref ) ) )
	if CONDITIONS.UsingWZLoadouts() then
		f35_local5.WZWipSnipeIcon:UpdateSnipeIcon( {
			weaponRef = f35_arg3.ref,
			selected = f35_arg0.equippedWeapon == f35_local5.weaponData.ref
		} )
	end
	if f35_local5.WeaponLevelBar then
		f35_local5.WeaponLevelBar:Setup( f35_arg1, f35_local5.weaponData.ref )
	end
	if CONDITIONS.UsingWZLoadouts() and PROGRESSION.IsWeaponMaxLevel( f35_arg1, f35_local5.weaponData.ref ) then
		f35_local5.WeaponLevel:setText( Engine.CBBHFCGDIC( "LUA_MENU/MAX_LEVEL_NUMBER", PROGRESSION.GetWeaponLevel( f35_arg1, f35_local5.weaponData.ref ) ) )
	else
		f35_local5.WeaponLevel:setText( Engine.CBBHFCGDIC( "LUA_MENU/OPERATOR_FACTION_LEVEL", PROGRESSION.GetWeaponLevel( f35_arg1, f35_local5.weaponData.ref ) ) )
	end
	f0_local0( f35_arg0, f35_local5, f35_arg1 )
	if not f35_local5.handlersAdded then
		f35_local5:addEventHandler( "button_over", f0_local0( f35_arg0, f35_local5, f35_arg1, f35_arg5, f35_local3 ) )
		f35_local5:addEventHandler( "tab_changed", f0_local0( f35_arg0, f35_local5, f35_arg1, f35_arg5, f35_local3 ) )
		f35_local5:addEventHandler( "button_over_disable", f0_local0( f35_arg0, f35_local5, f35_arg1, f35_arg5, f35_local3 ) )
		f35_local5:addEventHandler( "lose_focus", function ( f39_arg0 )
			if f35_arg0.isNew then
				f35_arg0.NewItemNotification:ClearBreadcrumbByID( f35_arg0, f39_arg0.lootID, true )
				f35_arg0:UpdateTabBreadcrumb( f35_arg0._currentTabIndex )
			end
			if f35_arg0.isNew and f35_arg0._currentTabIndex ~= f35_arg0._lastTabIndex then
				f35_arg0:UpdateTabBreadcrumb( f35_arg0._lastTabIndex )
				f35_arg0._lastTabIndex = f35_arg0._currentTabIndex
			end
		end )
		f35_local5:addEventHandler( "button_action", function ( f38_arg0 )
			DYN_ATTACHMENT.UpdateLoadoutWeaponStreamedImages( f38_arg0, f35_arg0, DYN_ATTACHMENT.StreamedImageAction.REMOVE )
			f35_arg0( f38_arg0, controllerindex, f35_arg0, f35_arg0 )
			if CONDITIONS.InGame() then
				Engine.EBHIFJCGBH( "equip_item_ingame", 1 )
			end
			DYN_ATTACHMENT.UpdateLoadoutWeaponStreamedImages( f38_arg0, f35_arg0, DYN_ATTACHMENT.StreamedImageAction.ADD )
			LUI.FlowManager.RequestLeaveMenu( f35_arg0, true )
		end )
		f35_local5.handlersAdded = true
		if f35_arg2.BlueprintButton then
			f35_arg2.BlueprintButton:addEventHandler( "button_over", f0_local0( f35_arg0, f35_local5, f35_arg1, f35_arg5, f35_local3 ) )
			f35_arg2.BlueprintButton:addEventHandler( "button_action", function ( f37_arg0 )
				LUI.FlowManager.RequestAddMenu( "WeaponLocker", true, f35_arg0, false, {
					selectingForWeapon = true,
					weaponSlot = f35_arg0.weaponSlot,
					loadoutIndex = f35_arg0.loadoutIndex,
					weaponRef = f37_arg0.weaponData.ref,
					hideTabs = true
				} )
			end )
		end
		if f35_arg2.BlueprintStoreButton then
			f35_arg2.BlueprintStoreButton:addEventHandler( "button_over", f0_local0( f35_arg0, f35_local5, f35_arg1, f35_arg5, f35_local3 ) )
			f35_arg2.BlueprintStoreButton:addEventHandler( "button_action", function ( f36_arg0, f36_arg1 )
				LUI.FlowManager.RequestAddMenu( "WeaponLocker", true, f36_arg1.controller, false, {
					blueprintStore = true,
					weaponRef = f35_arg0.weaponData.ref,
					weaponSlot = f35_arg0.weaponSlot
				}, true )
			end )
		end
	end
	if CONDITIONS.AreRestrictionsActive( f35_arg1 ) then
		f35_arg0._isRestricted = f35_arg3.isRestricted
		if f35_arg0._isRestricted then
			ACTIONS.AnimateSequence( f35_local5, "ShowRestriction" )
			f35_local5:SetButtonDisabled( true )
		else
			ACTIONS.AnimateSequence( f35_local5, "HideRestriction" )
			f35_local5:SetButtonDisabled( false )
		end
	end
	return f35_local5
end

local f0_local14 = function ( f34_arg0, f34_arg1, f34_arg2, f34_arg3, f34_arg4 )
	local f34_local0 = f34_arg0.WeaponsGrid:GetFocusPositionIndex()
	f34_arg0._currentWeapons = f34_arg4
	f34_arg0.WeaponsGrid._shouldFocus = false
	f34_arg0.WeaponsGrid:SetNumChildren( #f34_arg4 )
	local f34_local1 = 0
	for f34_local5, f34_local6 in ipairs( f34_arg4 ) do
		if f34_arg0.equippedWeapon == f34_local6.ref then
			f34_local1 = f34_local5
			break
		end
	end
	f34_local2 = f34_arg0.WeaponsGrid:GetPositionForIndex( f34_local1, {
		relativePosition = false
	} )
	f34_local2.y = f34_local2.y and f34_local2.y or f34_local2.y - 1
	if LUI.IsLastInputMouseNavigation( f34_arg1 ) then
		Engine.BJDBIAGIDA( SOUND_SETS.default.tabHighlight )
	end
	f34_arg0.WeaponsGrid:SetFocusedPosition( f34_local2, true )
	f34_arg0.WeaponsGrid:RefreshContent()
	f34_local3 = f34_arg0.WeaponsGrid:GetElementAtPosition( f34_local2.x, f34_local2.y )
	if Engine.DDJFBBJAIG() then
		f0_local0( f34_arg0, f34_arg1, f34_arg2, f34_arg3 )
	end
	if f34_local3 then
		f34_local3:processEvent( {
			name = "tab_changed"
		} )
	end
	if f34_local0 == f34_local1 then
		f34_local4 = CoD.SFX.MouseOver
		if f34_local3 and f34_local3.WeaponButton and f34_local3.WeaponButton.gainFocusSFX then
			if LUI.IsLastInputGamepad( f34_arg1 ) then
				f34_local4 = f34_local3.WeaponButton.gainFocusGamepadSFX
			elseif LUI.IsLastInputKeyboardMouse( f34_arg1 ) then
				f34_local4 = f34_local3.WeaponButton.gainFocusSFX
			end
		end
		Engine.BJDBIAGIDA( f34_local4 )
		if f34_local3 and not f34_local3.WeaponButton.disabled then
			ACTIONS.AnimateSequence( f34_local3.WeaponButton, "ProgressBarOver" )
		end
	end
end

local f0_local15 = function ( f33_arg0, f33_arg1 )
	local f33_local0 = LUI.FlowManager.GetScopedData( f33_arg0 )
	local f33_local1 = {
		weaponFilterType = f33_local0.weaponFilterType,
		weaponSortingByTitleType = f33_local0.weaponSortingByTitleType,
		weaponSortingByWeaponDataType = f33_local0.weaponSortingByWeaponDataType
	}
	if LUI.IsLastInputGamepad( f33_arg1 ) then
		f33_arg0.WZWipSortPrompt:UpdateText( f33_local1, "LUA_MENU/PAD_LEFT_TRIGGER_BUTTON" )
	else
		f33_arg0.WZWipSortPrompt:UpdateText( f33_local1, "INPUT/KB_LEFT_TRIGGER_BUTTON" )
	end
end

local f0_local16 = function ( f32_arg0 )
	local f32_local0 = {}
	for f32_local4, f32_local5 in pairs( LUI.GAME_SOURCE_ID ) do
		f32_local0[f32_local5] = 0
	end
	for f32_local4, f32_local5 in pairs( f32_arg0._weaponTable[f32_arg0.tabsData[f32_arg0._currentTabIndex].classRef] ) do
		for f32_local6, f32_local7 in pairs( LUI.GAME_SOURCE_ID ) do
			if f32_local5.gameSourceID == f32_local7 then
				f32_local0[f32_local7] = f32_local0[f32_local7] + 1
			end
		end
	end
	return f32_local0
end

local f0_local17 = function ( f31_arg0 )
	local f31_local0 = LUI.FlowManager.GetScopedData( f31_arg0 )
	if f31_local0.weaponFilterType and f31_local0.weaponFilterType == LOOT.weaponFilterOptions.ALL then
		local f31_local1 = #f31_arg0.tabsData
		for f31_local2 = 1, f31_local1, 1 do
			if f31_local2 ~= f31_arg0._currentTabIndex then
				local f31_local5 = f31_arg0.Tabs:GetTabAtIndex( f31_local2 )
				f31_local5:Enable()
			end
		end
		return 
	else
		if not f31_local0.weaponFilterType then
			return 
		end
		local f31_local1 = {}
		local f31_local2 = #f31_arg0.tabsData
		for f31_local3 = 1, f31_local2, 1 do
			f31_local1[f31_local3] = false
		end
		for f31_local3 = 1, f31_local2, 1 do
			for f31_local10, f31_local11 in pairs( f31_arg0._weaponTable[f31_arg0.tabsData[f31_local3].classRef] ) do
				if f31_local0.weaponFilterType == LOOT.weaponFilterOptions.COLD_WAR and f31_local11.gameSourceID == LUI.GAME_SOURCE_ID.COLD_WAR then
					f31_local1[f31_local3] = true
				end
				if f31_local0.weaponFilterType == LOOT.weaponFilterOptions.MODERN_WARFARE and f31_local11.gameSourceID == LUI.GAME_SOURCE_ID.MODERN_WARFARE then
					f31_local1[f31_local3] = true
				end
			end
		end
		for f31_local3 = 1, f31_local2, 1 do
			if f31_local3 ~= f31_arg0._currentTabIndex then
				local f31_local7 = f31_arg0.Tabs:GetTabAtIndex( f31_local3 )
				if f31_local1[f31_local3] then
					f31_local7:Enable()
				else
					f31_local7:Disable()
				end
			end
		end
	end
end

local f0_local18 = function ( f30_arg0, f30_arg1 )
	local f30_local0 = {}
	local f30_local1 = LUI.FlowManager.GetScopedData( f30_arg0 )
	for f30_local5, f30_local6 in pairs( f30_arg0._weaponTable[f30_arg0.tabsData[f30_arg0._currentTabIndex].classRef] ) do
		if f30_local1.weaponFilterType == LOOT.weaponFilterOptions.COLD_WAR then
			if f30_local6.gameSourceID == LUI.GAME_SOURCE_ID.COLD_WAR then
				table.insert( f30_local0, f30_local6 )
			end
		end
		if f30_local1.weaponFilterType == LOOT.weaponFilterOptions.MODERN_WARFARE then
			if f30_local6.gameSourceID == LUI.GAME_SOURCE_ID.MODERN_WARFARE then
				table.insert( f30_local0, f30_local6 )
			end
		end
		table.insert( f30_local0, f30_local6 )
	end
	f30_arg0._currentWeapons = f30_local0
	f30_local2 = {}
	f30_local3 = f30_local1.weaponSortingByWeaponDataType == LOOT.weaponSortByWeaponDataOptions.HIGHEST_LEVEL_FIRST
	f30_local4 = f30_local1.weaponSortingByWeaponDataType == LOOT.weaponSortByWeaponDataOptions.LOWEST_LEVEL_FIRST
	if not f30_local3 then
		f30_local5 = f30_local3
	else
		f30_local5 = f30_local4
	end
	f30_local6 = f30_local1.weaponSortingByWeaponDataType == LOOT.weaponSortByWeaponDataOptions.NEWEST_FIRST
	local f30_local7 = f30_local1.weaponSortingByWeaponDataType == LOOT.weaponSortByWeaponDataOptions.UNLOCKED_FIRST
	local f30_local8 = f30_local1.weaponSortingByWeaponDataType == LOOT.weaponSortByWeaponDataOptions.LOCKED_FIRST
	local f30_local9
	if not f30_local7 then
		f30_local9 = f30_local7
	else
		f30_local9 = f30_local8
	end
	if f30_local5 then
		table.insert( f30_local2, {
			sortFunc = MenuUtils.SortLevel,
			sortFuncParams = {
				controllerIndex = f30_arg1,
				sortByHighestLevelFirst = f30_local3
			}
		} )
	elseif f30_local6 then
		table.insert( f30_local2, {
			sortFunc = MenuUtils.SortNew,
			sortFuncParams = {
				controllerIndex = f30_arg1
			}
		} )
	elseif f30_local9 then
		table.insert( f30_local2, {
			sortFunc = MenuUtils.SortUnlocks,
			sortFuncParams = {
				sortByUnlockedFirst = f30_local7
			}
		} )
	end
	table.insert( f30_local2, {
		sortFunc = MenuUtils.SortByDisplayOrder
	} )
	MenuUtils.SortTableViaOptions( f30_arg0._currentWeapons, f30_local2 )
	f30_local2 = {}
	if f30_local1.weaponSortingByTitleType ~= LOOT.weaponSortByTitleOptions.OFF then
		table.insert( f30_local2, {
			sortFunc = MenuUtils.SortGameTypeFirst,
			sortFuncParams = {
				gameSourceID = LOOT.weaponSortGameSourceID[f30_local1.weaponSortingByTitleType]
			}
		} )
	end
	if f30_local2 ~= {} then
		MenuUtils.SortTableViaOptions( f30_arg0._currentWeapons, f30_local2 )
	end
	f0_local0( f30_arg0 )
	f0_local0( f30_arg0, f30_arg1 )
end

local f0_local19 = function ( f23_arg0, f23_arg1, f23_arg2 )
	f23_arg0.bindButton:addEventHandler( "button_secondary", function ( f29_arg0, f29_arg1 )
		ACTIONS.LeaveMenu( f23_arg0 )
	end )
	f23_arg0.bindButton:addEventHandler( "button_alt2", function ( f28_arg0, f28_arg1 )
		local f28_local0 = LUI.FlowManager.GetScopedData( f23_arg0 )
		local f28_local1 = f28_local0.previousFocusedButton
		if f23_arg0( f28_local1 ) then
			f23_arg0( f23_arg0, f23_arg0, f28_local1 )
		end
	end )
	if CONDITIONS.InFrontend( f23_arg0 ) then
		f23_arg0:addAndCallEventHandler( "update_input_type", function ( f27_arg0, f27_arg1 )
			if LUI.IsLastInputGamepad( f27_arg1.controllerIndex ) then
				f27_arg0:AddButtonHelperTextToElement( f27_arg0.HelperBar, {
					side = "left",
					button_ref = "button_r3",
					priority = 2,
					helper_text = Engine.CBBHFCGDIC( "CAS/PREVIEW_WEAPON" )
				} )
				f27_arg0.InfoPanel.SecondActionPrompt:SetAlpha( 0 )
			else
				f27_arg0:RemoveButtonHelperTextFromElement( f27_arg0.HelperBar, "button_r3", "left" )
				f27_arg0.InfoPanel.SecondActionPrompt:SetAlpha( 1 )
			end
		end, {
			controllerIndex = f23_arg1
		} )
		f23_arg0.bindButton:addEventHandler( "button_right_stick", function ( f26_arg0, f26_arg1 )
			f23_arg0( f26_arg0:getParent(), f23_arg0, f23_arg0 )
		end )
	end
	if CONDITIONS.UsingWZLoadouts() then
		f23_arg0.HelperBar:AddButtonHelperTextToElement( f23_arg0, {
			kbm_only = true,
			priority = 4,
			side = "left",
			button_ref = "button_left_trigger",
			helper_text = Engine.CBBHFCGDIC( "LUA_MENU/SORT_FILTER" )
		} )
		f23_arg0.bindButton:addEventHandler( "button_left_trigger", function ( f24_arg0, f24_arg1 )
			local f24_local0 = {
				data = {}
			}
			LOOT.SetupSortingBehavior( f24_local0.data, f23_arg0._controllerIndex, LOOT.itemTypes.WEAPON )
			f24_local0.numWeaponsByGameType = f23_arg0( f23_arg0, f23_arg0 )
			f24_local0.controllerIndex = f23_arg0
			f24_local0.type = LOOT.itemTypes.WEAPON
			local f24_local1 = MenuBuilder.BuildRegisteredType( "WZCustomizeFilteringSortingPopup", f24_local0 )
			LUI.FlowManager.RequestPopupMenu( nil, "FlyInPopup", true, f23_arg0, false, {
				flyInLeftNarrow = true,
				disableQuickAccessShortcuts = false,
				widget = f24_local1
			} )
			f24_local1:addEventHandler( "menu_close", function ( f25_arg0, f25_arg1 )
				local f25_local0 = LUI.FlowManager.GetScopedData( f24_arg0 )
				local f25_local1 = {}
				LOOT.SetupSortingBehavior( f25_local1, f24_arg0, LOOT.itemTypes.WEAPON )
				local f25_local2 = f25_local1.weaponFilterType
				if not f25_local2 then
					f25_local2 = LOOT.weaponFilterOptions.ALL
				end
				f25_local0.weaponFilterType = f25_local2
				f25_local2 = f25_local1.weaponSortingByTitleType
				if not f25_local2 then
					f25_local2 = LOOT.weaponSortByTitleOptions.OFF
				end
				f25_local0.weaponSortingByTitleType = f25_local2
				f25_local2 = f25_local1.weaponSortingByWeaponDataType
				if not f25_local2 then
					f25_local2 = LOOT.weaponSortByWeaponDataOptions.NONE
				end
				f25_local0.weaponSortingByWeaponDataType = f25_local2
			end )
		end )
	end
end

local f0_local20 = function ( f22_arg0, f22_arg1 )
	if Engine.DDJFBBJAIG() then
		FrontEndScene.SetExclusiveWeaponModels( {
			FrontEndScene.ClientWeapons.GunTablePrimary,
			FrontEndScene.ClientWeapons.GunTableSecondary,
			FrontEndScene.ClientWeapons.Watch
		} )
		local f22_local0 = MenuBuilder.BuildRegisteredType( "FrontendCameraMover", {
			enableSway = true,
			controllerIndex = f22_arg1
		} )
		f22_local0:SetSwayValues( 2000, 0.1, 0.1 )
		f22_arg0.FrontendCameraMover = f22_local0
		f22_arg0:addElement( f22_local0 )
	end
end

local f0_local21 = function ( f21_arg0 )
	local f21_local0 = LUI.FlowManager.GetScopedData( f21_arg0 )
	local f21_local1 = {}
	LOOT.SetupSortingBehavior( f21_local1, f21_arg0._controllerIndex, LOOT.itemTypes.WEAPON )
	local f21_local2 = f21_local1.weaponFilterType
	if not f21_local2 then
		f21_local2 = LOOT.weaponFilterOptions.ALL
	end
	f21_local0.weaponFilterType = f21_local2
	f21_local2 = f21_local1.weaponSortingByTitleType
	if not f21_local2 then
		f21_local2 = LOOT.weaponSortByTitleOptions.OFF
	end
	f21_local0.weaponSortingByTitleType = f21_local2
	f21_local2 = f21_local1.weaponSortingByWeaponDataType
	if not f21_local2 then
		f21_local2 = LOOT.weaponSortByWeaponDataOptions.NONE
	end
	f21_local0.weaponSortingByWeaponDataType = f21_local2
	ACTIONS.AnimateSequence( f21_arg0.WZWipSortPrompt, "WZWipWeaponSelectSortPromptSetup" )
end

local f0_local22 = function ( f13_arg0, f13_arg1, f13_arg2 )
	if f13_arg2.streamedImageTable and 0 < #f13_arg2.streamedImageTable then
		DYN_ATTACHMENT.SetupWidgetStreamer( f13_arg0, f13_arg2.streamedImageTable )
	end
	f0_local0( f13_arg0, f13_arg1 )
	if Engine.DDJFBBJAIG() then
		MenuUtils.SetupSceneChangeCallback( f13_arg0, function ()
			local f20_local0 = WATCH.GetEquippedWatch( f13_arg0 )
			local f20_local1 = WEAPON.GetWeaponModel( f13_arg0, FrontEndScene.ClientWeapons.Watch, CSV.weaponOffsets.watchFile )
			f13_arg0:addElement( f20_local1 )
			WATCH.SetWatchModelIfLoaded( f13_arg0, f13_arg0, f20_local1, f20_local0 )
		end )
	end
	assert( f13_arg0.Tabs )
	assert( f13_arg0.WeaponsGrid )
	assert( f13_arg0.InfoPanel )
	assert( f13_arg0.WeaponAttributes )
	assert( f13_arg0.bindButton )
	f13_arg0._controllerIndex = f13_arg1
	f13_arg0.UpdateTabBreadcrumb = f0_local0
	if IsLanguageChinese() then
		ACTIONS.AnimateSequence( f13_arg0, "CHT" )
	end
	if Engine.DDJFBBJAIG() then
		ACTIONS.AnimateSequence( f13_arg0, "Frontend" )
	elseif CONDITIONS.IsSplitscreen( f13_arg0 ) and CONDITIONS.InGame( f13_arg0 ) then
		ACTIONS.AnimateSequence( f13_arg0, "SplitScreen" )
	else
		ACTIONS.AnimateSequence( f13_arg0, "InGame" )
	end
	f13_arg0.InfoPanel:SetupPanel( f13_arg0.InfoPanel:GetCurrentAnchorsAndPositions() )
	if (f13_arg0.BundleUpsellButton or CONDITIONS.IsBlueprintStoreEnabled()) and Engine.DDJFBBJAIG() then
		local f13_local0 = LUI.FlowManager.GetScopedData( f13_arg0 )
		f13_local0.bundleVariants = WEAPON.GetPriorityVariants( f13_arg1, {
			excludeOwned = true,
			useBaseRefKeys = true
		} )
		f13_local0.bundleVariants = WEAPON.GetAllVariantsInStore( f13_arg1, {
			excludeOwned = true,
			useBaseRefKeys = true,
			variantsTable = f13_local0.bundleVariants
		} )
	end
	if Engine.BHICADFIHA() then
		if not f13_arg2.loadoutIndex then
			DebugPrint( "WARNING: Missing \"loadoutIndex\" option for WeaponSelect menu. Only OK after a MyChanges." )
			f13_arg2.loadoutIndex = 0
		end
		if not f13_arg2.weaponSlot then
			DebugPrint( "WARNING: Missing \"weaponSlot\" option for WeaponSelect menu. Only OK after a MyChanges." )
			f13_arg2.weaponSlot = 0
		end
	end
	assert( f13_arg2.loadoutIndex )
	assert( f13_arg2.weaponSlot )
	f13_arg0.MenuTitle:SetTitle( f13_arg2.weaponSlot and Engine.CBBHFCGDIC( "LUA_MENU/PRIMARY_WEAPON_SELECT" ) or Engine.CBBHFCGDIC( "LUA_MENU/SECONDARY_WEAPON_SELECT" ) )
	f0_local0( f13_arg0, f13_arg1, f13_arg2 )
	f13_arg0.loadoutIndex = f13_arg2.loadoutIndex
	f13_arg0.weaponSlot = f13_arg2.weaponSlot
	f13_arg0.blueprintsByWeapon = WEAPON.GetModificationsByWeaponWithBaseWeapon( f13_arg1 )
	local f13_local0 = PlayerData.BFFBGAJGD( f13_arg1, LOADOUT.GetLoadoutStatsGroup() )
	f13_local0 = f13_local0.squadMembers.loadouts[f13_arg0.loadoutIndex]
	f13_arg0._loadoutPlayerData = f13_local0
	f13_arg0.equippedWeapon = f13_local0.weaponSetups[f13_arg0.weaponSlot].weapon:get()
	local f13_local1 = f13_local0.loadoutPerks[0]:get()
	local f13_local2 = f13_local0.loadoutPerks[1]:get()
	local f13_local3 = f13_local0.loadoutPerks[2]:get()
	local f13_local4 = PERK.IsPerkOverkill( f13_local1 )
	if not f13_local4 then
		f13_local4 = PERK.IsPerkOverkill( f13_local2 )
		if not f13_local4 then
			f13_local4 = PERK.IsPerkOverkill( f13_local3 )
		end
	end
	local f13_local5
	if f13_arg0.weaponSlot == WEAPON.SecondarySlot then
		f13_local5 = f13_local4
	else
		f13_local5 = false
	end
	local f13_local6
	if f13_local5 then
		f13_local6 = WEAPON.PrimarySlot
		if not f13_local6 then
		
		else
			if Engine.DDJFBBJAIG() then
				f0_local0( f13_arg0, f13_arg0.equippedWeapon )
				local weaponModel = WEAPON.GetWeaponModel( f13_arg1, f13_arg2.weaponSlot )
				f13_arg0:addElement( weaponModel )
				f13_arg0.weaponModel = weaponModel
				
				local f13_local8 = f13_local0.weaponSetups[1 - f13_arg0.weaponSlot]
				f13_arg0._otherSelectedModel = WEAPON.GetWeaponModelNameFromPlayerData( f13_local8.weapon:get(), f13_local8, {
					includeCamos = true,
					includeAttachments = true,
					includeStickers = true,
					controllerIndex = f13_arg1
				} )
				f13_arg0._equippedWatchModel = WATCH.GetFullModelName( WATCH.GetEquippedWatch( f13_arg1 ) )
			end
			local weaponModel = BATTLEPASS.GetLootTierMap()
			f13_arg0._weaponTable = {}
			local f13_local9 = {}
			for f13_local8 = 0, StringTable.BFHCAIIDA( CSV.weapons.file ), 1 do
				local f13_local12 = CSV.ReadRow( CSV.weapons, f13_local8 )
				local f13_local13 = tonumber( f13_local12.displayOrder )
				if f13_local13 then
					f13_local13 = 0 <= tonumber( f13_local12.displayOrder )
				end
				local f13_local14 = Engine.BHICADFIHA()
				if not f13_local14 then
					if #f13_local12.UIShowDvar ~= 0 then
						f13_local14 = Dvar.IBEGCHEFE( f13_local12.UIShowDvar )
					else
						f13_local14 = true
					end
				end
				if f13_local13 and f13_local14 then
					local f13_local15 = MatchRules.CADFFHGJAE( f13_local12.ref )
					if not CONDITIONS.InGame() or not f13_local15 then
						if not f13_arg0._weaponTable[f13_local12.menuClass] then
							f13_arg0._weaponTable[f13_local12.menuClass] = {}
						end
						f13_local12.isUnlocked = PROGRESSION.IsUnlocked( f13_arg1, LOOT.itemTypes.WEAPON, f13_local12.ref )
						local f13_local16
						if f13_local12.isUnlocked or f13_local12.hiddenWhenLocked ~= "1" then
							f13_local16 = false
						else
							f13_local16 = true
						end
						local f13_local17 = LOOT.GetItemID( LOOT.itemTypes.WEAPON, f13_local12.ref )
						local f13_local18 = not LOOT.IsItemRefEquippableForMode( LOOT.itemTypes.WEAPON, f13_local12.ref )
						local f13_local19
						if not f13_local16 then
							f13_local19 = f13_local16
						else
							f13_local19 = f13_local18
						end
						if not f13_local12.isUnlocked then
							local f13_local20 = weaponModel[f13_local17]
							if f13_local20 then
								f13_local12.unlockCriteria = Engine.CBBHFCGDIC( "BATTLEPASS/LOCKED_INCOMPLETE_WITH_BATTLEPASS", f13_local20 )
							else
								f13_local12.unlockCriteria = PROGRESSION.GetUnlockText( f13_arg1, LOOT.itemTypes.WEAPON, f13_local12.ref )
							end
						end
						if not f13_local19 then
							if CONDITIONS.UsingWZLoadouts() then
								f13_local12.lootID = f13_local17
								f13_local12.gameSourceID = LOOT.GetGameSourceIDFromItemID( f13_local17 )
							end
							f13_local12.isRestricted = f13_local15
							if f13_local15 then
								if not f13_local9[f13_local12.menuClass] then
									f13_local9[f13_local12.menuClass] = {}
								end
								table.insert( f13_local9[f13_local12.menuClass], f13_local12 )
							end
							table.insert( f13_arg0._weaponTable[f13_local12.menuClass], f13_local12 )
						end
					end
				end
			end
			for f13_local21, f13_local12 in pairs( f13_arg0._weaponTable ) do
				table.sort( f13_local12, function ( f19_arg0, f19_arg1 )
					return tonumber( f19_arg0.displayOrder ) < tonumber( f19_arg1.displayOrder )
				end )
			end
			for f13_local21, f13_local12 in pairs( f13_local9 ) do
				table.sort( f13_local12, function ( f18_arg0, f18_arg1 )
					return tonumber( f18_arg0.displayOrder ) < tonumber( f18_arg1.displayOrder )
				end )
			end
			for f13_local21, f13_local12 in pairs( f13_local9 ) do
				for f13_local16, f13_local17 in pairs( f13_local12 ) do
					table.insert( f13_arg0._weaponTable[f13_local21], f13_local17 )
				end
			end
			f13_arg0.WeaponsGrid:SetRefreshChild( function ( f17_arg0, f17_arg1, f17_arg2 )
				f13_arg0( f13_arg0, f13_arg0, f17_arg0, f13_arg0._currentWeapons[f17_arg2 + 1], f17_arg2 + 1, f13_arg0 )
			end )
			if CONDITIONS.UsingWZLoadouts() then
				f0_local0( f13_arg0 )
				ACTIONS.AnimateSequence( f13_arg0.InfoPanel, "WZWipWeaponSelectSetup" )
				if IsLanguageArabic() then
					ACTIONS.AnimateSequence( f13_arg0.InfoPanel, "WZAR" )
				else
					f13_arg0.InfoPanel.NewItemNotification:SetupLeftAlignment()
				end
			end
			f13_local8 = {}
			for f13_local10 = 0, StringTable.BFHCAIIDA( CSV.weaponClasses.file ), 1 do
				local f13_local13 = CSV.ReadRow( CSV.weaponClasses, f13_local10 )
				if f13_local13.showInMenus == "1" and tonumber( f13_local13.slot ) == f13_local6 + 1 and f13_arg0._weaponTable[f13_local13.ref] then
					local f13_local14
					if f13_local13.isWZOnly == "1" then
						f13_local14 = not CONDITIONS.UsingWZLoadouts()
					else
						f13_local14 = false
					end
					if not f13_local14 then
						if not CONDITIONS.InGame() or not MatchRules.DEJJEDIGDE( f13_local13.ref ) then
							local f13_local16 = {
								classRef = f13_local13.ref,
								name = Engine.CBBHFCGDIC( f13_local13.pluralName ),
								focusFunction = function ( f16_arg0, f16_arg1, f16_arg2 )
									f13_arg0._lastTabIndex = f13_arg0._currentTabIndex
									f13_arg0._currentTabIndex = f16_arg2 + 1
									if not f13_arg0._lastTabIndex then
										f13_arg0._lastTabIndex = f13_arg0._currentTabIndex
									end
									if CONDITIONS.UsingWZLoadouts() then
										f13_arg0( f13_arg0, f16_arg1 )
										f13_arg0( f13_arg0, f16_arg1, f13_arg0 + 1, f13_arg0, f13_arg0._currentWeapons )
									else
										f13_arg0( f13_arg0, f16_arg1, f13_arg0 + 1, f13_arg0, f13_arg0._weaponTable[f13_arg0.ref] )
									end
								end,
								weaponData = f13_arg0._weaponTable[f13_local13.ref]
							}
							if f13_local13.ref == WEAPON.GetWeaponClass( f13_arg0.equippedWeapon ) then
								f13_local16.hasDefaultFocus = true
							end
							table.insert( f13_local8, f13_local16 )
						end
					end
				end
			end
			f13_arg0.tabsData = f13_local8
			f13_arg0.Tabs:SetTabs( f13_local8 )
			f13_arg0.Tabs:SetAlignment( LUI.Alignment.Left )
			for f13_local10 = 1, #f13_local8, 1 do
				f13_arg0:UpdateTabBreadcrumb( f13_local10 )
			end
			f13_arg0:addAndCallEventHandler( "update_input_type", function ( f15_arg0, f15_arg1 )
				if Engine.DDJFBBJAIG() then
					if LUI.IsLastInputKeyboardMouse( f15_arg1.controllerIndex ) then
						f15_arg0.InfoPanel.ActionPrompt:setText( Engine.CBBHFCGDIC( "LUA_MENU/TO_GUNSMITH_PROMPT" ), 0 )
					else
						f15_arg0.InfoPanel.ActionPrompt:setText( Engine.CBBHFCGDIC( "LUA_MENU/TO_GUNSMITH_PROMPT" ), 0 )
					end
					if CONDITIONS.UsingWZLoadouts() then
						f13_arg0( f15_arg0, f15_arg1.controllerIndex )
					end
				end
			end, {
				controllerIndex = f13_arg1
			} )
			if CONDITIONS.InGame() and not CONDITIONS.IsThirdGameMode() then
				f13_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
					clickable = true,
					priority = 5,
					ignoreTooltip = false,
					side = "left",
					kbmTooltipPromptOverload = "button_dismiss_pause_menu",
					button_ref = "button_start",
					helper_text = Engine.CBBHFCGDIC( "LUA_MENU/DISMISS_MENU" )
				} )
				f13_arg0.bindButton:addEventHandler( "button_start", function ( f14_arg0, f14_arg1 )
					LUI.FlowManager.RequestCloseAllMenus()
				end )
			end
			ACTIONS.ScaleStretchAnchorFullscreen( f13_arg0.TabBacker )
			if not f13_arg0.InGameMenuBackground then
				LAYOUT.AddAspectRatioFadeFrame( f13_arg0, f13_arg1 )
			end
			if f13_arg0.InGameMenuBackground then
				ACTIONS.ScaleFullscreen( f13_arg0.InGameMenuBackground )
			end
			if CONDITIONS.InGame() then
				ACTIONS.ScaleFullscreen( f13_arg0.Vignette )
			end
			if f13_arg0.BundleUpsellButton then
				f13_arg0.BundleUpsellButton:SetUpsellMenu( "WeaponSelect" )
			end
		end
	end
	f13_local6 = f13_arg0.weaponSlot
end

function WeaponSelect( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "WeaponSelect"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	self.HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	self.HelperBar.id = "HelperBar"
	self.HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
	self.HelperBar:setPriority( 10 )
	self:addElement( self.HelperBar )
	local f1_local2 = self
	local f1_local3 = nil
	if CONDITIONS.InGame( self ) then
		f1_local3 = MenuBuilder.BuildRegisteredType( "InGameMenuBackground", {
			controllerIndex = f1_local1
		} )
		f1_local3.id = "InGameMenuBackground"
		f1_local3:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
		self:addElement( f1_local3 )
		self.InGameMenuBackground = f1_local3
	end
	local f1_local4 = nil
	if CONDITIONS.UsingWZLoadouts() then
		f1_local4 = MenuBuilder.BuildRegisteredType( "WZSnipeBackgroundSceneOverlay", {
			controllerIndex = f1_local1
		} )
		f1_local4.id = "WZWipSnipeBackgroundSceneOverlay"
		f1_local4:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
		self:addElement( f1_local4 )
		self.WZWipSnipeBackgroundSceneOverlay = f1_local4
	end
	local Vignette = nil
	
	Vignette = LUI.UIImage.new()
	Vignette.id = "Vignette"
	Vignette:SetRGBFromTable( SWATCHES.genericMenu.blackBackground, 0 )
	Vignette:SetAlpha( 0.5, 0 )
	Vignette:setImage( RegisterMaterial( "widg_gradient_left_to_right" ), 0 )
	Vignette:SetAnchorsAndPosition( 0, 0, 0, 0, _1080p * -185, _1080p * -1058, 0, 0 )
	self:addElement( Vignette )
	self.Vignette = Vignette
	
	local TabBacker = nil
	
	TabBacker = MenuBuilder.BuildRegisteredType( "TabBacker", {
		controllerIndex = f1_local1
	} )
	TabBacker.id = "TabBacker"
	TabBacker:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 160 )
	self:addElement( TabBacker )
	self.TabBacker = TabBacker
	
	local MenuTitle = nil
	
	MenuTitle = MenuBuilder.BuildRegisteredType( "MenuTitle", {
		controllerIndex = f1_local1
	} )
	MenuTitle.id = "MenuTitle"
	MenuTitle.MenuTitle:setText( "", 0 )
	MenuTitle.Line:SetLeft( 0, 0 )
	MenuTitle:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1020, 0, _1080p * 100 )
	self:addElement( MenuTitle )
	self.MenuTitle = MenuTitle
	
	local WeaponsGrid = nil
	
	WeaponsGrid = LUI.UIGrid.new( {
		scrollingThresholdX = 0,
		buildArrowsLabel = false,
		maxVelocity = 5000,
		adjustSizeToContent = false,
		scrollingThresholdY = 0,
		wrapX = false,
		maxVisibleColumns = 1,
		wrapY = true,
		arrowsVerticalOffset = 0,
		forcePrimaryAxisScrolling = true,
		springCoefficient = 400,
		maxVisibleRows = SubtractForSplitscreen( 4, 2 ),
		controllerIndex = f1_local1,
		buildChild = function ()
			return MenuBuilder.BuildRegisteredType( "WeaponButtonGroup", {
				controllerIndex = menu
			} )
		end,
		refreshChild = function ( f11_arg0, f11_arg1, f11_arg2 )
			
		end,
		spacingX = _1080p * 10,
		spacingY = _1080p * 10,
		columnWidth = _1080p * 532,
		rowHeight = _1080p * 162,
		horizontalAlignment = LUI.Alignment.Left,
		verticalAlignment = LUI.Alignment.Top
	} )
	WeaponsGrid.id = "WeaponsGrid"
	WeaponsGrid:setUseStencil( true )
	WeaponsGrid:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -838, _1080p * -312, _1080p * 213, _1080p * 898 )
	self:addElement( WeaponsGrid )
	self.WeaponsGrid = WeaponsGrid
	
	local WeaponAttributes = nil
	
	WeaponAttributes = MenuBuilder.BuildRegisteredType( "WeaponAttributes", {
		controllerIndex = f1_local1
	} )
	WeaponAttributes.id = "WeaponAttributes"
	WeaponAttributes:SetAnchorsAndPosition( 0, 1, 1, 0, _1080p * 720, _1080p * 1154, _1080p * -261, _1080p * -101 )
	self:addElement( WeaponAttributes )
	self.WeaponAttributes = WeaponAttributes
	
	local f1_local10 = nil
	if not Engine.DDJFBBJAIG() then
		f1_local10 = MenuBuilder.BuildRegisteredType( "InGameMenuTimerStatus", {
			controllerIndex = f1_local1
		} )
		f1_local10.id = "InGameMenuTimerStatus"
		f1_local10:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 820, _1080p * 1220, _1080p * 54, _1080p * 104 )
		self:addElement( f1_local10 )
		self.InGameMenuTimerStatus = f1_local10
	end
	local f1_local11 = nil
	if CONDITIONS.InFrontendPublicMP( self ) then
		f1_local11 = MenuBuilder.BuildRegisteredType( "MPPlayerDetails", {
			controllerIndex = f1_local1
		} )
		f1_local11.id = "MPPlayerDetails"
		f1_local11:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -596, _1080p * -96, _1080p * 54, _1080p * 114 )
		self:addElement( f1_local11 )
		self.MPPlayerDetails = f1_local11
	end
	local VWeaponScrollbar = nil
	
	VWeaponScrollbar = MenuBuilder.BuildRegisteredType( "VerticalMinimalScrollbar", {
		controllerIndex = f1_local1
	} )
	VWeaponScrollbar.id = "VWeaponScrollbar"
	VWeaponScrollbar:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 108, _1080p * 216, _1080p * 891 )
	self:addElement( VWeaponScrollbar )
	self.VWeaponScrollbar = VWeaponScrollbar
	
	local InfoPanel = nil
	InfoPanel = MenuBuilder.BuildRegisteredType( "PerkInfoPanel", {
		controllerIndex = f1_local1
	} )
	InfoPanel.id = "InfoPanel"
	if CONDITIONS.InFrontendOrWaveMode( self ) then
		InfoPanel.ActionPrompt:setText( Engine.CBBHFCGDIC( "LUA_MENU/TO_GUNSMITH_PROMPT" ), 0 )
	end
	if CONDITIONS.InFrontendOrWaveMode( self ) then
		InfoPanel.SecondActionPrompt:setText( Engine.CBBHFCGDIC( "CAS/PREVIEW_WEAPON_PROMPT" ), 0 )
	end
	InfoPanel:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 720, _1080p * 1246, _1080p * 216, _1080p * 306 )
	self:addElement( InfoPanel )
	self.InfoPanel = InfoPanel
	
	local Tabs = nil
	
	Tabs = LUI.TabManager.new( {
		spacing = 4,
		wrap = true,
		tabHeight = _1080p * 52,
		buildTab = function ()
			return MenuBuilder.BuildRegisteredType( "SubMenuTab", {
				controllerIndex = menu
			} )
		end,
		controllerIndex = f1_local1
	} )
	Tabs.id = "Tabs"
	Tabs:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 996, _1080p * 108, _1080p * 160 )
	self:addElement( Tabs )
	self.Tabs = Tabs
	
	local ArrowUp = nil
	
	ArrowUp = MenuBuilder.BuildRegisteredType( "NavigationArrow", {
		controllerIndex = f1_local1
	} )
	ArrowUp.id = "ArrowUp"
	ArrowUp:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -743, _1080p * -711, _1080p * 898, _1080p * 930 )
	self:addElement( ArrowUp )
	self.ArrowUp = ArrowUp
	
	local ArrowDown = nil
	
	ArrowDown = MenuBuilder.BuildRegisteredType( "NavigationArrow", {
		controllerIndex = f1_local1
	} )
	ArrowDown.id = "ArrowDown"
	ArrowDown.Arrow:SetZRotation( 180, 0 )
	ArrowDown:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -575, _1080p * -543, _1080p * 898, _1080p * 930 )
	self:addElement( ArrowDown )
	self.ArrowDown = ArrowDown
	
	local ListCount = nil
	
	ListCount = LUI.UIText.new()
	ListCount.id = "ListCount"
	ListCount:SetRGBFromTable( SWATCHES.text.primaryText, 0 )
	ListCount:setText( "", 0 )
	ListCount:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	ListCount:SetAlignment( LUI.Alignment.Center )
	ListCount:SetVerticalAlignment( LUI.Alignment.Center )
	ListCount:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -711, _1080p * -575, _1080p * 905, _1080p * 925 )
	self:addElement( ListCount )
	self.ListCount = ListCount
	
	local f1_local18 = nil
	if CONDITIONS.InFrontend( self ) then
		f1_local18 = MenuBuilder.BuildRegisteredType( "LobbyMembersFooter", {
			controllerIndex = f1_local1
		} )
		f1_local18.id = "LobbyMembersFooter"
		f1_local18:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 150 )
		self:addElement( f1_local18 )
		self.LobbyMembersFooter = f1_local18
	end
	local ComparisonString = nil
	
	ComparisonString = LUI.UIStyledText.new()
	ComparisonString.id = "ComparisonString"
	ComparisonString:SetRGBFromTable( SWATCHES.genericButton.description, 0 )
	ComparisonString:setText( "", 0 )
	ComparisonString:SetFont( FONTS.GetFont( FONTS.BodyRegular.File ) )
	ComparisonString:SetAlignment( LUI.Alignment.Left )
	ComparisonString:SetAnchorsAndPosition( 0, 1, 1, 0, _1080p * 753, _1080p * 1135, _1080p * -284, _1080p * -267 )
	self:addElement( ComparisonString )
	self.ComparisonString = ComparisonString
	
	local f1_local20 = nil
	if Engine.DDJFBBJAIG() then
		f1_local20 = MenuBuilder.BuildRegisteredType( "CDLRestrictionTag", {
			controllerIndex = f1_local1
		} )
		f1_local20.id = "CDLRestrictionTag"
		f1_local20.CDLInfo:SetAlpha( 1, 0 )
		f1_local20:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1508, _1080p * 1824, _1080p * 124, _1080p * 154 )
		self:addElement( f1_local20 )
		self.CDLRestrictionTag = f1_local20
	end
	local f1_local21 = nil
	if Engine.DDJFBBJAIG() then
		f1_local21 = MenuBuilder.BuildRegisteredType( "BundleUpsellButton", {
			controllerIndex = f1_local1
		} )
		f1_local21.id = "BundleUpsellButton"
		f1_local21:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1340, _1080p * 1790, _1080p * 775, _1080p * 979 )
		self:addElement( f1_local21 )
		self.BundleUpsellButton = f1_local21
	end
	local f1_local22 = nil
	if CONDITIONS.InFrontendPublic( self ) then
		f1_local22 = MenuBuilder.BuildRegisteredType( "WeaponMasterSummary", {
			controllerIndex = f1_local1
		} )
		f1_local22.id = "MasterChallenges"
		f1_local22:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1272, _1080p * 1824, _1080p * 216, _1080p * 396 )
		self:addElement( f1_local22 )
		self.MasterChallenges = f1_local22
	end
	local f1_local23 = nil
	if CONDITIONS.UsingWZLoadouts() then
		f1_local23 = MenuBuilder.BuildRegisteredType( "SortPrompt", {
			controllerIndex = f1_local1
		} )
		f1_local23.id = "WZWipSortPrompt"
		f1_local23:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 130, _1080p * 260, _1080p * 170, _1080p * 194 )
		self:addElement( f1_local23 )
		self.WZWipSortPrompt = f1_local23
	end
	self._sequences.DefaultSequence = function ()
		
	end
	
	local f1_local24 = nil
	WeaponsGrid:RegisterAnimationSequence( "Frontend", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 654
		}
	} )
	WeaponAttributes:RegisterAnimationSequence( "Frontend", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 720
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1154
		}
	} )
	InfoPanel:RegisterAnimationSequence( "Frontend", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 720
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1246
		}
	} )
	self._sequences.Frontend = function ()
		menu:AnimateSequence( "Frontend" )
		menu:AnimateSequence( "Frontend" )
		menu:AnimateSequence( "Frontend" )
	end
	
	local f1_local25 = nil
	WeaponsGrid:RegisterAnimationSequence( "InGame", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -843
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -274
		}
	} )
	ArrowUp:RegisterAnimationSequence( "InGame", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -764
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -732
		}
	} )
	ArrowDown:RegisterAnimationSequence( "InGame", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -596
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -564
		}
	} )
	ListCount:RegisterAnimationSequence( "InGame", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -732
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -596
		}
	} )
	self._sequences.InGame = function ()
		menu:AnimateSequence( "InGame" )
		menu:AnimateSequence( "InGame" )
		menu:AnimateSequence( "InGame" )
		menu:AnimateSequence( "InGame" )
	end
	
	local f1_local26 = nil
	ListCount:RegisterAnimationSequence( "CountArabic", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 898
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 928
		}
	} )
	self._sequences.CountArabic = function ()
		menu:AnimateSequence( "CountArabic" )
	end
	
	local f1_local27 = nil
	WeaponsGrid:RegisterAnimationSequence( "SplitScreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 170
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 556
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -843
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -315
		}
	} )
	WeaponAttributes:RegisterAnimationSequence( "SplitScreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 720
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 400
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1246
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 540
		}
	} )
	if not Engine.DDJFBBJAIG() then
		f1_local10:RegisterAnimationSequence( "SplitScreen", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Left,
				value = _1080p * 760
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Right,
				value = _1080p * 1160
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Top,
				value = _1080p * 34
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Bottom,
				value = _1080p * 84
			}
		} )
	end
	VWeaponScrollbar:RegisterAnimationSequence( "SplitScreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 170
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 499
		}
	} )
	InfoPanel:RegisterAnimationSequence( "SplitScreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 720
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1246
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 170
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 262
		}
	} )
	ArrowUp:RegisterAnimationSequence( "SplitScreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 529
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 561
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -754
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -722
		}
	} )
	ArrowDown:RegisterAnimationSequence( "SplitScreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 529
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 561
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -586
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -554
		}
	} )
	ListCount:RegisterAnimationSequence( "SplitScreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 536
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 556
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -722
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -586
		}
	} )
	self._sequences.SplitScreen = function ()
		menu:AnimateSequence( "SplitScreen" )
		menu:AnimateSequence( "SplitScreen" )
		if not Engine.DDJFBBJAIG() then
			menu:AnimateSequence( "SplitScreen" )
		end
		menu:AnimateSequence( "SplitScreen" )
		menu:AnimateSequence( "SplitScreen" )
		menu:AnimateSequence( "SplitScreen" )
		menu:AnimateSequence( "SplitScreen" )
		menu:AnimateSequence( "SplitScreen" )
	end
	
	local f1_local28 = nil
	ComparisonString:RegisterAnimationSequence( "CHT", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -304
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * -286
		}
	} )
	self._sequences.CHT = function ()
		menu:AnimateSequence( "CHT" )
	end
	
	if Engine.DDJFBBJAIG() then
		f1_local21:addEventHandler( "button_over", function ( f3_arg0, f3_arg1 )
			local f3_local0 = f3_arg1.controller or menu
			ACTIONS.AnimateSequenceByElement( menu, {
				elementPath = "self.BundleUpsellButton",
				sequenceName = "ButtonOver",
				elementName = "BundleUpsellButton"
			} )
		end )
		f1_local21:addEventHandler( "button_up", function ( f2_arg0, f2_arg1 )
			local f2_local0 = f2_arg1.controller or menu
			ACTIONS.AnimateSequenceByElement( menu, {
				elementPath = "self.BundleUpsellButton",
				sequenceName = "ButtonUp",
				elementName = "BundleUpsellButton"
			} )
		end )
	end
	local f1_local29 = LUI.UIScrollbar.new
	local f1_local30 = {
		direction = LUI.DIRECTION.vertical,
		eventListener = VWeaponScrollbar,
		startCap = VWeaponScrollbar.startCap,
		endCap = VWeaponScrollbar.endCap,
		sliderArea = VWeaponScrollbar.sliderArea
	}
	local f1_local31 = VWeaponScrollbar.sliderArea
	if f1_local31 then
		f1_local31 = VWeaponScrollbar.sliderArea.slider
	end
	f1_local30.slider = f1_local31
	f1_local31 = VWeaponScrollbar.sliderArea
	if f1_local31 then
		f1_local31 = VWeaponScrollbar.sliderArea.fixedSizeSlider
	end
	f1_local30.fixedSizeSlider = f1_local31
	WeaponsGrid:AddScrollbar( f1_local29( f1_local30 ) )
	WeaponsGrid:AddArrow( ArrowUp )
	WeaponsGrid:AddArrow( ArrowDown )
	WeaponsGrid:AddItemNumbers( ListCount )
	self.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_secondary",
		helper_text = Engine.CBBHFCGDIC( "MENU/BACK" )
	} )
	self.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_primary",
		priority = 1,
		helper_text = Engine.CBBHFCGDIC( "LUA_MENU/EQUIP" )
	} )
	
	local bindButton = LUI.UIBindButton.new()
	bindButton.id = "selfBindButton"
	self:addElement( bindButton )
	self.bindButton = bindButton
	
	f0_local0( self, f1_local1, controller )
	if CONDITIONS.IsArabic( self ) then
		ACTIONS.AnimateSequence( self, "CountArabic" )
	end
	return self
end

MenuBuilder.registerType( "WeaponSelect", WeaponSelect )
LockTable( _M )
