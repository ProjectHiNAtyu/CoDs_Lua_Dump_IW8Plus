-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
module( ..., package.seeall )
require( "ui.widgets.PlayMenuButton" )
require( "ui.frontEnd.mp.IntensityButton" )
local f0_local0 = 10 * _1080p
local f0_local1 = 40 * _1080p
local f0_local2 = 5 * _1080p
local f0_local3 = function ( f18_arg0, f18_arg1, f18_arg2 )
	local f18_local0 = MP.GetLastQuickplayFilter( f18_arg1 )
	local f18_local1 = Dvar[0x9E5BE3B4BBA4E0E]( "#x3495c7dcb91b6750e" )
	if f18_local1 then
		f18_local1 = f18_local0 == MP.PLAYLIST_FILTER_MODE.CDLRules
	end
	local f18_local2
	if f18_local0 then
		if f18_local1 then
			f18_local2 = f18_local1
		else
			f18_local2 = not f18_arg0.CDLFilteredDataSource
		end
	else
		f18_local2 = true
	end
	if f18_local2 then
		MP.SetLastQuickplayFilter( f18_arg1, MP.PLAYLIST_FILTER_MODE.normal )
		f18_local0 = MP.PLAYLIST_FILTER_MODE.normal
		MLG.SetUsingMLGRules( false )
		Lobby[0xDA79B8D0B79405A]( false )
		MatchRules[0xE859FDA0484D3DE]()
	end
	if f18_local0 == MP.PLAYLIST_FILTER_MODE.normal then
		assert( f18_arg0.normalFilteredDataSource )
		f18_arg0:SetDataSource( f18_arg0.normalFilteredDataSource, f18_arg1 )
	elseif f18_local1 then
		f18_arg0:SetDataSource( f18_arg0.CDLFilteredDataSource, f18_arg1 )
	else
		assert( f18_arg0.hardcoreFilteredDataSource )
		f18_arg0:SetDataSource( f18_arg0.hardcoreFilteredDataSource, f18_arg1 )
	end
	if not f18_arg0:IsDisabled() then
		local f18_local3 = f18_arg0:GetDataSource()
		f18_arg0.FilteredLabel:setText( ToUpperCase( f18_local3.name:GetValue( f18_arg1 ) ) )
	else
		f18_arg0.FilteredLabel:setText( "" )
	end
	local f18_local3 = function ()
		local f20_local0, f20_local1, f20_local2, f20_local3, f20_local4, f20_local5, f20_local6, f20_local7 = LAYOUT.GetAnchorsAndPositionsFromElement( f18_arg0.FilteredLabel )
		local f20_local8 = LAYOUT.GetTextWidth( f18_arg0.FilteredLabel )
		local f20_local9 = f20_local5
		local f20_local10 = f20_local5 - f20_local8
		f18_arg0.FilteredLabel:SetAnchorsAndPosition( f20_local0, f20_local1, f20_local2, f20_local3, f20_local10, f20_local9, f20_local6, f20_local7 )
		f20_local0, f20_local1, f20_local2, f20_local3, f20_local4, f20_local5, f20_local6, f20_local7 = LAYOUT.GetAnchorsAndPositionsFromElement( f18_arg0.Intensity )
		f20_local8 = f18_arg0.Intensity:GetTextWidth()
		if not f18_arg0._defaultIntensityLabelPosition then
			f18_arg0._defaultIntensityLabelPosition = f18_arg0.Intensity:GetCurrentAnchorsAndPositions()
		end
		local f20_local11 = f20_local10 - (f18_arg0 and f18_arg0 or f18_arg0)
		local f20_local12 = f20_local11 - f20_local8
		local f20_local13
		if f18_arg0 then
			f20_local13 = 0
		else
			f20_local13 = f18_arg0
		end
		f18_arg0.Intensity:SetAnchorsAndPosition( f20_local0, f20_local1, f20_local2, f20_local3, f20_local12, f20_local11, f18_arg0._defaultIntensityLabelPosition.top + f20_local13, f18_arg0._defaultIntensityLabelPosition.bottom + f20_local13 )
	end
	
	local f18_local4 = LUI.DataSourceInGlobalModel.new( "frontEnd.lobby.quickplayIntensity" )
	f18_arg0:SubscribeToModel( f18_local4:GetModel( f18_arg1 ), function ()
		local f19_local0 = f18_arg0:GetValue( f18_arg0 )
		if f19_local0 then
			local f19_local1 = MP.GetIntensityNameFromPref( f19_local0 )
			ACTIONS.AnimateSequence( f18_arg0, f19_local1 )
			f18_arg0.Intensity:SetText( MP.GetIntensityStringFromName( f19_local1, true ), false )
			f18_arg0()
		end
	end )
	f18_arg0:SetNewItemNotificationVisible( f18_arg2 )
end

local f0_local4 = function ( f14_arg0, f14_arg1, f14_arg2 )
	local f14_local0 = function ()
		local f15_local0 = Lobby.TryNavigateToLobby
		f15_local0( function ()
			local f16_local0 = function ()
				if Playlist[0x55D7805DA008136]( f16_local0.index:GetValue( f16_local0 ), PlaylistUtils.USE_FILTERED_PLAYLIST_ID ) then
					LUI.FlowManager.RequestAddMenu( "MPPublicLobby", false, f16_local0, false, {
						openFromPlaylist = true
					} )
				end
			end
			
			if LOADOUT.MATCHRULES.ShouldShowLoadoutRestrictedPopup( f15_local0 ) then
				LUI.FlowManager.RequestPopupMenu( nil, "CDLInvalidLoadout", true, f15_local0, false, {
					confirmAction = f16_local0
				} )
			else
				f16_local0()
			end
		end )
	end
	
	if PlaylistUtils.CheckIfAllLocked( f14_arg2, f14_arg1, false ) then
		LUI.FlowManager.RequestPopupMenu( nil, "PlaylistMatchmakingFilterLockedPopup", true, f14_arg1, false, {
			dataSource = f14_arg2,
			controllerIndex = f14_arg1
		} )
	else
		if not PlaylistUtils.AtLeastOneGameModeFiltered( f14_arg2, f14_arg1, false ) then
			PlaylistUtils.SelectAll( f14_arg2, f14_arg1, true, false, false )
		end
		local f14_local1 = PlaylistUtils.ValidateSelection( f14_arg2, f14_arg1 )
		local f14_local2 = f14_local1.invalidPlaylists
		local f14_local3 = f14_local1.numFiltered
		local f14_local4 = f14_local1.requiresCrossplay
		local f14_local5 = f14_local1.maxPlayerPlaylists
		local f14_local6 = f14_local1.nonF2PPlaylists
		if Lobby.IsSplitScreenEnabled() and Playlist[0x19EE05D6FC32B3E]( f14_arg2.index:GetValue( f14_arg1 ) ) then
			LUI.FlowManager.RequestPopupMenu( nil, "SplitScreenPopups", true, f14_arg1, false, {
				isSplitScreenWarning = true,
				controllerIndex = f14_arg1,
				text = Engine[0xED84C33EC5F01EA]( "LUA_MENU/CDL_CAPS" )
			} )
		elseif 0 < #f14_local2 then
			LUI.FlowManager.RequestPopupMenu( nil, "RemovePlayersMatchmakingPopup", false, f14_arg1, false, {
				filtered = true,
				invalidPlaylists = f14_local2
			} )
		elseif 0 < #f14_local5 and Lobby.IsSplitScreenEnabled() then
			LUI.FlowManager.RequestPopupMenu( nil, "SplitScreenPopups", true, f14_arg1, false, {
				maxPlayerPlaylists = f14_local5,
				controllerIndex = f14_arg1,
				acceptFunc = f14_local0,
				dataSource = f14_arg2
			} )
		elseif not Engine[0x4093E2CC78AFD4A]( f14_arg1 ) and f14_local4 then
			LUI.FlowManager.RequestPopupMenu( nil, "LPCEnableCrossplayPopup", true, f14_arg1, false, {
				controllerIndex = f14_arg1,
				onAccept = f14_local0,
				crossplayRecommended = Engine[0x836C8AD984F14F6]()
			} )
		elseif 0 < #f14_local6 and not Engine[0xD5F5C76D9442FFE]() then
			LUI.FlowManager.RequestPopupMenu( nil, "RemovePlayersMatchmakingPopup", false, f14_arg1, false, {
				subscription = true,
				invalidPlaylists = f14_local6
			} )
		else
			f14_local0()
		end
		if LUI.IsLastInputMouseNavigation( f14_arg1 ) then
			return true
		end
	end
end

local f0_local5 = function ( f7_arg0, f7_arg1, f7_arg2 )
	f7_arg0.SetupButton = f0_local0
	f7_arg0:SetIsContractible( false )
	f7_arg0.AccordionButton.Background.BackgroundImage:setImage( RegisterMaterial( "v_ui_img_buttonBg_quickPlay" ), 0 )
	f7_arg0:addEventHandler( "accordion_over", function ( f13_arg0, f13_arg1 )
		ACTIONS.AnimateSequence( f7_arg0, "ExpandedButtonOver" )
	end )
	f7_arg0:addEventHandler( "accordion_up", function ( f12_arg0, f12_arg1 )
		ACTIONS.AnimateSequence( f7_arg0, "ExpandedButtonUp" )
	end )
	f7_arg0:addEventHandler( "disable", function ( f11_arg0, f11_arg1 )
		f7_arg0.Text:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( "LUA_MENU_MP/BUTTON_DISABLED_NOT_HOST" ) ) )
	end )
	f7_arg0:addEventHandler( "enable", function ( f10_arg0, f10_arg1 )
		local f10_local0 = f7_arg0:GetDataSource()
		f7_arg0.Text:setText( ToUpperCase( f10_local0.name:GetValue( f7_arg0 ) ) )
	end )
	f7_arg0:addEventHandler( "button_action", function ( f9_arg0, f9_arg1 )
		f7_arg0( f7_arg0, f9_arg1.controller or f7_arg0, f7_arg0:GetDataSource() )
		return true
	end )
	f7_arg0:addEventHandler( "lose_focus", function ( f8_arg0, f8_arg1 )
		f8_arg0:dispatchEventToParent( f8_arg1 )
	end )
	if IsLanguageTraditionalChinese() then
		ACTIONS.AnimateSequence( f7_arg0, "CHT" )
	elseif IsLanguageArabic() then
		ACTIONS.AnimateSequence( f7_arg0, "AR" )
	end
	f7_arg0.Intensity:SetFocusable( false )
end

function QuickPlayButton( f1_arg0, f1_arg1 )
	local f1_local0 = MenuBuilder.BuildRegisteredType( "PlayMenuButton", f1_arg1 )
	f1_local0:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 400 * _1080p, 0, 128 * _1080p )
	f1_local0.id = "QuickPlayButton"
	f1_local0._animationSets = f1_local0._animationSets or {}
	f1_local0._sequences = f1_local0._sequences or {}
	f1_local0._sequenceLengths = f1_local0._sequenceLengths or {}
	local f1_local1
	if f1_arg1 then
		f1_local1 = f1_arg1
	else
		f1_local1 = f1_arg1.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( f1_local0, f1_local1 )
	local f1_local2 = f1_local0
	f1_local0.AccordionButton.Background.BackgroundImage:SetVisibility( LUI.Visibility.Visible )
	f1_local0.AccordionButton.Background.BackgroundImage:setImage( RegisterMaterial( "v_ui_img_buttonbg_quickplay" ), 0 )
	f1_local0.AccordionButton.Background.Darkening:SetVisibility( LUI.Visibility.Visible )
	f1_local0.Text:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( "LUA_MENU/QUICK_PLAY" ) ), 0 )
	f1_local0.Description:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU/QUICK_PLAY_DESC" ), 0 )
	f1_local0.DisabledText:setText( Engine[0xED84C33EC5F01EA]( "MENU/LOCKED" ), 0 )
	local Intensity = nil
	
	Intensity = MenuBuilder.BuildRegisteredType( "IntensityButton", {
		controllerIndex = f1_local1
	} )
	Intensity.id = "Intensity"
	Intensity.Backer:SetAlpha( 0.75, 0 )
	Intensity.Text:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU_MP/INTENSITY_ALL" ), 0 )
	Intensity:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -250, _1080p * -150, _1080p * 3, _1080p * 31 )
	f1_local0:addElement( Intensity )
	f1_local0.Intensity = Intensity
	
	local FilteredLabel = nil
	
	FilteredLabel = LUI.UIStyledText.new()
	FilteredLabel.id = "FilteredLabel"
	FilteredLabel:SetRGBFromTable( SWATCHES.text.buttonTextDefault, 0 )
	FilteredLabel:SetAlpha( 0.6, 0 )
	FilteredLabel:SetUseForceOpacityMode( true )
	FilteredLabel:setText( "FilteredLabel", 0 )
	FilteredLabel:setCaseStyle( LUI.CaseStyle.Uppercase )
	FilteredLabel:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_XSHeaderBold.font.File ) )
	FilteredLabel:SetFontSize( FONT_STYLES.fontStyle_XSHeaderBold.size )
	FilteredLabel:SetMinFontSize( FONT_STYLES.fontStyle_XSHeaderBold.minSize )
	FilteredLabel:SetWordWrap( false )
	FilteredLabel:SetTracking( 1 * _1080p, 0 )
	FilteredLabel:SetAlignment( LUI.Alignment.Right )
	FilteredLabel:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -163, _1080p * -8, _1080p * 5, _1080p * 29 )
	f1_local0:addElement( FilteredLabel )
	f1_local0.FilteredLabel = FilteredLabel
	
	f1_local0._sequences.DefaultSequence = function ()
		
	end
	
	f1_local0._sequenceLengths.DefaultSequence = 0
	local f1_local5 = nil
	Intensity:RegisterAnimationSequence( "all", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.vIntensity.vIntensityAll,
			child = f1_local0.Intensity.Backer
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Text,
			value = Engine[0xED84C33EC5F01EA]( "LUA_MENU_MP/INTENSITY_ALL" ),
			child = f1_local0.Intensity.Text
		},
		{
			value = 1.9035983709236353E+185,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha,
			child = f1_local0.Intensity.Backer
		}
	} )
	f1_local0._sequences.all = function ()
		f1_arg0:AnimateSequence( "all" )
	end
	
	f1_local0._sequenceLengths.all = 0
	local f1_local6 = nil
	Intensity:RegisterAnimationSequence( "low", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.vIntensity.vIntensityTactical,
			child = f1_local0.Intensity.Backer
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Text,
			value = Engine[0xED84C33EC5F01EA]( "LUA_MENU_MP/INTENSITY_PREF_LOW" ),
			child = f1_local0.Intensity.Text
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha,
			child = f1_local0.Intensity.Backer
		}
	} )
	f1_local0._sequences.low = function ()
		f1_arg0:AnimateSequence( "low" )
	end
	
	f1_local0._sequenceLengths.low = 0
	local f1_local7 = nil
	Intensity:RegisterAnimationSequence( "medium", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.vIntensity.vIntensityStandard,
			child = f1_local0.Intensity.Backer
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Text,
			value = Engine[0xED84C33EC5F01EA]( "LUA_MENU_MP/INTENSITY_PREF_MEDIUM" ),
			child = f1_local0.Intensity.Text
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha,
			child = f1_local0.Intensity.Backer
		}
	} )
	f1_local0._sequences.medium = function ()
		f1_arg0:AnimateSequence( "medium" )
	end
	
	f1_local0._sequenceLengths.medium = 0
	local f1_local8 = nil
	Intensity:RegisterAnimationSequence( "high", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Text,
			value = Engine[0xED84C33EC5F01EA]( "LUA_MENU_MP/INTENSITY_PREF_HIGH" ),
			child = f1_local0.Intensity.Text
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.vIntensity.vIntensityBlitz,
			child = f1_local0.Intensity.Backer
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha,
			child = f1_local0.Intensity.Backer
		}
	} )
	f1_local0._sequences.high = function ()
		f1_arg0:AnimateSequence( "high" )
	end
	
	f1_local0._sequenceLengths.high = 0
	f0_local0( f1_local0, f1_local1, f1_arg1 )
	return f1_local0
end

MenuBuilder.registerType( "QuickPlayButton", QuickPlayButton )
LockTable( _M )
