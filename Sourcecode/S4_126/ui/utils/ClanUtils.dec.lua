-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
CLANS = CLANS or {}
CLANS.INVALID_CLAN_ID = "0"
CLANS.MAX_NUM_CLAN_MEMBERS = 100
CLANS.MAX_DESC_LENGTH = 255
CLANS.MAX_ANNOUNCEMENT_LENGTH = 255
CLANS.MAX_CLAN_LABELS = 3
CLANS.CLANS_MAX_JOINED_CLANS = 1
CLANS.CLANS_MAX_MEMBERS = 250
CLANS.CLANS_CLANTAG_LENGTH = 5
CLANS.CLANS_MAX_NAME_LENGTH = 28
CLANS.MAX_DIGITS_IN_CLAN_NAME = 6
CLAN_TIER_COLOR_TOKEN_DEFAULT = "^3"
CLANS.ClansNotification = "clans_notification"
CLANS.ClanEvents = {
	KICKED = "clans_kicked_from_clan",
	INVITE_CANCELED = "clans_invite_canceled",
	USER_UPDATED = "clans_user_updated",
	PROMOTED_TO_OFFICER = "clans_promoted_to_officer",
	PROMOTED_TO_OWNER = "clans_promoted_to_owner",
	INVITE_SENT = "clans_invite_sent",
	DELETED = "clans_deleted",
	INVITE_ACCEPTED = "clans_invite_accepted",
	MEMBER_REMOVED = "clans_member_removed",
	CREATION_FAILED = "clans_creation_failed",
	INFO_UPDATED = "clans_info_updated",
	GETINFO_FAILURE = "clans_getinfo_failure",
	CREATED = "clans_created",
	INVITES_UPDATED = "clans_invites_updated",
	INITIALIZED = "clans_initialized_clan",
	LEFT_CLAN_ACTIVE = "clans_left_clan_active",
	CLAN_DATA_LOADED = "clans_clan_data_loaded",
	PRIVACY_UPDATED = "clans_privacy_updated",
	NAME_UPDATED = "clans_name_updated",
	GETINFO_SUCCESS = "clans_getinfo_success",
	TAG_UPDATED = "clans_tag_updated",
	MEMBER_UNBANNED = "clans_member_unbanned",
	DEMOTED_TO_MEMBER = "clans_demoted_to_member",
	PROMOTED_TO_ADMIN = "clans_promoted_to_admin",
	INVITE_RECEIVED = "clans_invite_received",
	MEMBER_ADDED = "clans_member_added",
	MAX_OWNED = "clans_max_clans_owned",
	DEMOTED_TO_ADMIN = "clans_demoted_to_admin",
	LEFT_CLAN_INACTIVE = "clans_left_clan_inactive",
	REQUESTS_UPDATED = "clans_requests_updated",
	SEARCH_TAGS_UPDATED = "clans_search_tags_updated",
	DEMOTED_TO_OFFICER = "clans_demoted_to_officer",
	MEMBER_BANNED = "clans_member_banned"
}
CLANS.ClanFailureReason = {
	MAX_OUTGOING_PROPOSALS_FOR_USER_ERROR = 10,
	STRUCTURED_DATA_INVALID_SCHEMA_VERSION_ERROR = 19,
	TAG_IN_USE_ERROR = 16,
	MAX_OWNERSHIPS_FOR_USER_ERROR = 9,
	TAG_NOT_AVAILABLE_ERROR = 17,
	UNKNOWN_ERROR = 1,
	MAX_PROPOSALS_FOR_CLAN_ERROR = 7,
	MAX_MEMBERS_IN_CLAN_ERROR = 6,
	PROFANITY_ERROR = 15,
	NO_SUCH_CLAN_ERROR = 2,
	INVALID_PAGE_TOKEN_ERROR = 5,
	STRUCTURED_DATA_SCHEMA_IDENTIFIER_NOT_FOUND_ERROR = 18,
	MEMBER_PROPOSAL_REJECTED_ERROR = 11,
	TAG_IS_PROFANE_ERROR = 13,
	STRUCTURED_DATA_INVALID_CONTEXT_SCHEMA_ERROR = 21,
	STRUCTURED_DATA_MISSING_CONTEXT_CONFIG_ERROR = 20,
	STRUCTURED_DATA_FAILED_TO_UPDATE_ERROR = 23,
	STRUCTURED_DATA_MAX_OWNERS_EXCEEDED_ERROR = 24,
	INVALID_REQUEST_ERROR = 4,
	STRUCTURED_DATA_NOT_FOUND = 25,
	MAX_MEMBERSHIPS_FOR_USER_ERROR = 8,
	USER_IS_BANNED_ERROR = 12,
	STRUCTURED_DATA_INVALID_PAYLOAD_ERROR = 22,
	GENERIC_CLAN_ERROR = 0,
	NAME_IS_PROFANE_ERROR = 14,
	PERMISSION_DENIED_ERROR = 3
}
CLANS.ClanFailureReasonLocalizationKey = {
	[CLANS.ClanFailureReason.GENERIC_CLAN_ERROR] = "CLANS/CLAN_GENERIC_ERROR",
	[CLANS.ClanFailureReason.UNKNOWN_ERROR] = "CLANS/UNKNOWN_ERROR",
	[CLANS.ClanFailureReason.NO_SUCH_CLAN_ERROR] = "CLANS/NO_SUCH_CLAN_ERROR",
	[CLANS.ClanFailureReason.PERMISSION_DENIED_ERROR] = "CLANS/PERMISSION_DENIED_ERROR",
	[CLANS.ClanFailureReason.INVALID_REQUEST_ERROR] = "CLANS/INVALID_REQUEST_ERROR",
	[CLANS.ClanFailureReason.INVALID_PAGE_TOKEN_ERROR] = "CLANS/INVALID_PAGE_TOKEN_ERROR",
	[CLANS.ClanFailureReason.MAX_MEMBERS_IN_CLAN_ERROR] = "CLANS/MAX_MEMBERS_IN_CLAN_ERROR",
	[CLANS.ClanFailureReason.MAX_PROPOSALS_FOR_CLAN_ERROR] = "CLANS/MAX_PROPOSALS_FOR_CLAN_ERROR",
	[CLANS.ClanFailureReason.MAX_MEMBERSHIPS_FOR_USER_ERROR] = "CLANS/CLAN_MEMBERSHIP_LIMIT",
	[CLANS.ClanFailureReason.MAX_OWNERSHIPS_FOR_USER_ERROR] = "CLANS/CLAN_LIMIT",
	[CLANS.ClanFailureReason.MAX_OUTGOING_PROPOSALS_FOR_USER_ERROR] = "CLANS/MAX_OUTGOING_PROPOSALS_FOR_USER_ERROR",
	[CLANS.ClanFailureReason.USER_IS_BANNED_ERROR] = "CLANS/USER_IS_BANNED_ERROR",
	[CLANS.ClanFailureReason.NAME_IS_PROFANE_ERROR] = "CLANS/CLAN_NAME_VULGAR",
	[CLANS.ClanFailureReason.TAG_IN_USE_ERROR] = "CLANS/CLAN_TAG_TAKEN",
	[CLANS.ClanFailureReason.TAG_IS_PROFANE_ERROR] = "CLANS/CLAN_TAG_VULGAR"
}
CLANS.DEFAULT_CLAN_EMBLEM_DATA = {
	foregroundShapeId = 0,
	backgroundShapeId = 0,
	backgroundColorId = 0,
	foregroundColorId = 0
}
CLANS.OnlineClanQuickmatchState = {
	PLAYING_WITH_QM_ON = 6,
	WAITING_FOR_MATCH_START = 3,
	STARTING_MATCH = 6,
	NOT_IN_QM = 0,
	WAITING_TO_JOIN_PARTY = 1,
	REJOINING = 8,
	JOINING_PARTY = 2,
	PLAYING_WITH_QM_ON_FULL = 7,
	WAITING_TO_START_MATCH = 4
}
CLANS.OnlineClanQuickmatchStateString = {
	[CLANS.OnlineClanQuickmatchState.NOT_IN_QM] = "",
	[CLANS.OnlineClanQuickmatchState.WAITING_TO_JOIN_PARTY] = "CLANS/WAITING",
	[CLANS.OnlineClanQuickmatchState.JOINING_PARTY] = "",
	[CLANS.OnlineClanQuickmatchState.WAITING_FOR_MATCH_START] = "CLANS/SEARCHING",
	[CLANS.OnlineClanQuickmatchState.WAITING_TO_START_MATCH] = "",
	[CLANS.OnlineClanQuickmatchState.STARTING_MATCH] = "CLANS/STARTING",
	[CLANS.OnlineClanQuickmatchState.PLAYING_WITH_QM_ON] = "CLANS/IN_GAME",
	[CLANS.OnlineClanQuickmatchState.PLAYING_WITH_QM_ON_FULL] = "CLANS/IN_GAME",
	[CLANS.OnlineClanQuickmatchState.REJOINING] = ""
}
CLANS.ClanLabelKeys = {
	nil,
	"label01",
	"label02",
	"label03",
	"label05",
	"label04",
	"label06",
	"label07",
	"label08",
	"label09",
	"label10"
}
CLANS.ClanLabelStrings = {
	label07 = "CLANS/LABEL07",
	label03 = "CLANS/LABEL03",
	label02 = "CLANS/LABEL02",
	label08 = "CLANS/LABEL08",
	label09 = "CLANS/LABEL09",
	label01 = "CLANS/LABEL01",
	label06 = "CLANS/LABEL06",
	label10 = "CLANS/LABEL10",
	label04 = "CLANS/LABEL04",
	label05 = "CLANS/LABEL05"
}
CLANS.ClanPrivacyLevel = {
	OPEN = 1,
	BY_REQUEST = 2,
	INVALID = 0,
	INVITE_ONLY = 3
}
CLANS.ClanPrivacyLevelStrings = {
	[CLANS.ClanPrivacyLevel.INVALID] = "",
	[CLANS.ClanPrivacyLevel.OPEN] = "CLANS/CLAN_PRIVACY_OPTION_OPEN",
	[CLANS.ClanPrivacyLevel.BY_REQUEST] = "CLANS/CLAN_PRIVACY_OPTION_REQUEST",
	[CLANS.ClanPrivacyLevel.INVITE_ONLY] = "CLANS/CLAN_PRIVACY_OPTION_INVITE"
}
CLANS.ClanSearchTabIDs = {
	SUGGESTED = 0,
	ALL_CLANS = 1,
	INBOX = 2
}
CLANS.ClanMembersFilter = {
	ALL = 0,
	OFFICERS_ONLY = 1,
	NO_OFFICERS = 2,
	EXCLUDE_OWNER = 4
}
CLANS.DataSourceIDs = {
	INVITATION_COUNT = 0,
	REQUEST_COUNT = 2,
	OUTGOING_INVITATION_COUNT = 1
}
CLANS.LeaderboardTier = {
	STANDARD_TIER = 0,
	COMMON_TIER = 1,
	ULTRA_TIER = 5,
	LEGENDARY_TIER = 4,
	RARE_TIER = 2,
	EPIC_TIER = 3
}
CLANS.IsCustomClanTag = function ( f52_arg0 )
	return f52_arg0 ~= ClanTagType.CLAN
end

CLANS.GetClanErrorMessageRaw = function ( f51_arg0 )
	local f51_local0 = CLANS.ClanFailureReasonLocalizationKey[f51_arg0]
	if not f51_local0 then
		f51_local0 = "CLANS/CLAN_GENERIC_ERROR"
	end
	return f51_local0
end

CLANS.GetClanErrorMessage = function ( f50_arg0 )
	return Engine[0xED84C33EC5F01EA]( CLANS.GetClanErrorMessageRaw( f50_arg0 ) )
end

CLANS.AddClanEventHandlers = function ( f48_arg0, f48_arg1 )
	f48_arg0:addEventHandler( CLANS.ClansNotification, function ( f49_arg0, f49_arg1 )
		local f49_local0 = f49_arg1.options
		if f48_arg0[f49_local0.genEventName] and f49_local0 then
			f48_arg0[f49_local0.genEventName]( f49_local0 )
		end
	end )
end

CLANS.AddClanRankChangeEventHandlers = function ( f47_arg0, f47_arg1 )
	CLANS.AddClanEventHandlers( f47_arg0, {
		[CLANS.ClanEvents.PROMOTED_TO_OWNER] = f47_arg1,
		[CLANS.ClanEvents.PROMOTED_TO_ADMIN] = f47_arg1,
		[CLANS.ClanEvents.DEMOTED_TO_ADMIN] = f47_arg1,
		[CLANS.ClanEvents.PROMOTED_TO_OFFICER] = f47_arg1,
		[CLANS.ClanEvents.DEMOTED_TO_OFFICER] = f47_arg1,
		[CLANS.ClanEvents.DEMOTED_TO_MEMBER] = f47_arg1
	} )
end

CLANS.AddClanInviteErrorEventHandlers = function ( f45_arg0, f45_arg1, f45_arg2 )
	local f45_local0 = function ( f46_arg0 )
		if f46_arg0.success == false or f46_arg0.success == 0 then
			LUI.FlowManager.RequestPopupMenu( nil, "MessagePopup", true, f45_arg0, false, {
				headerText = Engine[0xED84C33EC5F01EA]( "MENU/ERROR" ),
				messageText = CLANS.GetClanErrorMessage( f46_arg0.error )
			} )
			if f45_arg0 then
				f45_arg0( f45_arg0, f45_arg0 )
			end
		end
	end
	
	CLANS.AddClanEventHandlers( f45_arg0, {
		[CLANS.ClanEvents.INVITE_ACCEPTED] = f45_local0,
		[CLANS.ClanEvents.INVITE_SENT] = f45_local0
	} )
end

CLANS.SetupPlayerGridCountFunction = function ( f43_arg0 )
	f43_arg0:SetCountFunction( function ()
		local f44_local0 = f43_arg0:GetNumRows()
		local f44_local1 = f43_arg0._targetPosition and LUI.clamp( math.floor( 1 + f43_arg0._targetPosition.y ), 0, f44_local0 ) or 0
		if 0 < f44_local1 then
			return f44_local1, f44_local0
		else
			return 0, 0
		end
	end )
end

CLANS.SetupPlayerGrid = function ( f42_arg0, f42_arg1 )
	f42_arg0.tabID = f42_arg1
	FRIENDS.SetupMeasureRowForPlayerCardLayout( f42_arg0 )
	CLANS.SetupPlayerGridCountFunction( f42_arg0 )
	FRIENDS.SetupPlayerGridScrollbar( f42_arg0 )
	f42_arg0:SetActiveStateCorrectionHack()
end

CLANS.IsValidClan = function ( f41_arg0 )
	if not f41_arg0 then
		return false
	end
	local f41_local0 = type( f41_arg0 ) == "string"
	assert( f41_local0, "Clan ID must be a string to support uint64" )
	local f41_local1
	if f41_local0 then
		f41_local1 = f41_local0
	elseif f41_arg0 == CLANS.INVALID_CLAN_ID or 0 >= #f41_arg0 then
		f41_local1 = false
	else
		f41_local1 = true
	end
	return f41_local1
end

CLANS.IsInClan = function ( f40_arg0 )
	return CLANS.IsValidClan( Clans[0x43F567012B7061]( f40_arg0 ) )
end

CLANS.IsInQuickMatch = function ( f39_arg0 )
	local f39_local0
	if not Dvar[0x9E5BE3B4BBA4E0E]( "#x3adc1eeffa3b72adf" ) or CLANS.OnlineClanQuickmatchState.NOT_IN_QM >= DataSources.frontEnd.lobby.clanQuickMatchState:GetValue( f39_arg0 ) then
		f39_local0 = false
	else
		f39_local0 = true
	end
	return f39_local0
end

CLANS.GetClanDetails = function ( f38_arg0, f38_arg1 )
	if not f38_arg1 then
		f38_arg1 = Clans[0x43F567012B7061]( f38_arg0 )
	end
	if CLANS.IsValidClan( f38_arg1 ) then
		return Clans[0xBAF6E7E287BB61F]( f38_arg0, f38_arg1 )
	else
		return nil
	end
end

CLANS.GetClanName = function ( f37_arg0 )
	local f37_local0 = CLANS.GetClanDetails( f37_arg0 )
	if f37_local0 then
		return f37_local0.clanName
	else
		return ""
	end
end

CLANS.HasPendingInviteForClan = function ( f36_arg0, f36_arg1 )
	for f36_local3, f36_local4 in ipairs( Clans[0xDFC442228614023]( f36_arg0 ) ) do
		if f36_local4.clanId == f36_arg1 then
			return true
		end
	end
	return false
end

CLANS.HasPendingRequestForClan = function ( f35_arg0, f35_arg1 )
	for f35_local3, f35_local4 in ipairs( Clans[0xFA27A170E628181]( f35_arg0 ) ) do
		if f35_local4.clanId == f35_arg1 then
			return true
		end
	end
	return false
end

CLANS.PlayerHasRequestToJoinMyClan = function ( f34_arg0, f34_arg1, f34_arg2 )
	local f34_local0
	if f34_arg2 then
		f34_local0 = f34_arg2
	else
		f34_local0 = Clans[0xF5F1D611AEC6B59]( f34_arg0, f34_arg2 )
	end
	local f34_local1 = false
	if f34_local0 then
		for f34_local5, f34_local6 in ipairs( f34_local0 ) do
			if f34_local6.xuid == f34_arg1 then
				f34_local1 = true
				break
			end
		end
	end
	return f34_local1
end

CLANS.PlayerHasInviteToJoinMyClan = function ( f33_arg0, f33_arg1, f33_arg2 )
	local f33_local0
	if f33_arg2 then
		f33_local0 = f33_arg2
	else
		f33_local0 = Clans[0x2195D99EF06A2A5]( f33_arg0, f33_arg2 )
	end
	local f33_local1 = false
	if f33_local0 then
		for f33_local5, f33_local6 in ipairs( f33_local0 ) do
			if f33_local6.xuid == f33_arg1 then
				f33_local1 = true
				break
			end
		end
	end
	return f33_local1
end

CLANS.IsPlayerBannedFromMyClan = function ( f32_arg0, f32_arg1 )
	local f32_local0 = Clans[0x5536A2EC54D8BCF]( f32_arg0 )
	local f32_local1 = false
	if f32_local0 then
		for f32_local5, f32_local6 in ipairs( f32_local0 ) do
			if f32_local6.xuid == f32_arg1 then
				f32_local1 = true
				break
			end
		end
	end
	return f32_local1
end

CLANS.CanManageClanInvites = function ( f31_arg0, f31_arg1 )
	local f31_local0 = Engine[0x29DFACECF20DE0E]( f31_arg0 )
	local f31_local1 = OnlineClanRole.INVALID_CLAN_ROLE
	if CLANS.IsValidClan( f31_arg1 ) then
		f31_local1 = Clans[0xADB1DEE75D4529]( f31_arg0, f31_arg1, f31_local0 )
	end
	local f31_local2
	if f31_local1 then
		f31_local2 = f31_local1
	else
		f31_local2 = OnlineClanRole.OFFICER <= f31_local1
	end
	return f31_local2
end

CLANS.CanChangeClanQuickMatchSettings = function ( f30_arg0 )
	local f30_local0 = Clans[0x43F567012B7061]( f30_arg0 )
	local f30_local1 = Engine[0x29DFACECF20DE0E]( f30_arg0 )
	local f30_local2 = OnlineClanRole.INVALID_CLAN_ROLE
	if CLANS.IsValidClan( f30_local0 ) then
		f30_local2 = Clans[0xADB1DEE75D4529]( f30_arg0, f30_local0, f30_local1 )
	end
	local f30_local3
	if f30_local2 then
		f30_local3 = f30_local2
	else
		f30_local3 = OnlineClanRole.ADMIN <= f30_local2
	end
	return f30_local3
end

CLANS.IsClanQuickMatchHardcoreEnabled = function ()
	local f29_local0 = Dvar[0x9E5BE3B4BBA4E0E]( "#x33495f3fe5a192851" )
	if f29_local0 then
		f29_local0 = CONDITIONS.IsHardcoreModeEnabled()
	end
	return f29_local0
end

CLANS.IsClanQuickMatchCDLEnabled = function ()
	local f28_local0 = Dvar[0x9E5BE3B4BBA4E0E]( "#x3556dd9f3bcd5cfa8" )
	if f28_local0 then
		f28_local0 = Dvar[0x9E5BE3B4BBA4E0E]( "#x3495c7dcb91b6750e" )
		if f28_local0 then
			f28_local0 = Dvar[0x9E5BE3B4BBA4E0E]( "#x375e4f84388599eb6" )
		end
	end
	return f28_local0
end

CLANS.GetOutgoingInvitesCount = function ( f27_arg0 )
	return DataSources.alwaysLoaded.social.clanOutgoingInvitationCount:GetValue( f27_arg0 )
end

CLANS.GetIncomingRequestsCount = function ( f26_arg0 )
	return DataSources.alwaysLoaded.social.clanRequestCount:GetValue( f26_arg0 )
end

CLANS.SubscribeToClanDataSource = function ( f24_arg0, f24_arg1, f24_arg2, f24_arg3 )
	local f24_local0 = {
		[CLANS.DataSourceIDs.INVITATION_COUNT] = DataSources.alwaysLoaded.social.clanInvitationCount,
		[CLANS.DataSourceIDs.OUTGOING_INVITATION_COUNT] = DataSources.alwaysLoaded.social.clanOutgoingInvitationCount,
		[CLANS.DataSourceIDs.REQUEST_COUNT] = DataSources.alwaysLoaded.social.clanRequestCount
	}
	local f24_local1 = f24_local0[f24_arg2]
	assert( f24_local1 )
	if f24_local1 then
		f24_arg0:SubscribeToModel( f24_local1:GetModel( f24_arg1 ), function ( f25_arg0 )
			f24_arg0( f24_arg0:GetValue( f24_arg0 ) )
		end )
	end
end

CLANS.IsClanInactive = function ( f23_arg0 )
	return f23_arg0.numClanMembers <= 1
end

CLANS.GetClanSearchScopedData = function ()
	if CONDITIONS.IsMenuInStack( "ClanBrowserMenu" ) then
		return LUI.FlowManager.GetScopedData( "ClanBrowserMenu" )
	else
		assert( false, "GetClanSearchScopedData called when ClanBrowserMenu not in stack" )
		return {}
	end
end

CLANS.ClearClanSearchScopedData = function ()
	if CONDITIONS.IsMenuInStack( "ClanBrowserMenu" ) then
		local f21_local0 = LUI.FlowManager.GetScopedData( "ClanBrowserMenu" )
		f21_local0.lastSearchResults = nil
		f21_local0.lastSuggestedSearchResults = nil
	end
end

CLANS.OpenClanOwnerProfile = function ( f20_arg0, f20_arg1, f20_arg2 )
	local f20_local0 = {}
	if f20_arg2 then
		f20_local0 = Social[0x9CA9F1423A7342A]( f20_arg1, f20_arg2 )
	end
	if f20_local0 then
		f20_local0.selectedTab = FRIENDS.TabIDs.CLANS
		f20_local0.controllerIndex = f20_arg1
		f20_local0.isClans = true
		f20_local0.isPartyMember = false
		f20_local0.playerDetailActionType = FRIENDS.PlayerDetailActionType.CLAN_MEMBER_EXTERNAL
		LUI.FlowManager.RequestLeaveMenuByName( "PlayerDetailMenu" )
		LUI.FlowManager.RequestAddMenu( "PlayerDetailMenu", true, f20_arg1, false, f20_local0 )
	end
end

CLANS.TryChangeClans = function ( f18_arg0, f18_arg1, f18_arg2 )
	if CLANS.IsInClan( f18_arg1 ) then
		assert( f18_arg2.confirmAction )
		if Clans[0xADB1DEE75D4529]( f18_arg1, Clans[0x43F567012B7061]( f18_arg1 ), Engine[0x29DFACECF20DE0E]( f18_arg1 ) ) == OnlineClanRole.OWNER then
			LUI.FlowManager.RequestPopupMenu( nil, "MessagePopup", true, f18_arg1, false, {
				headerText = Engine[0xED84C33EC5F01EA]( "MENU/ERROR" ),
				messageText = Engine[0xED84C33EC5F01EA]( "CLANS/CHANGE_CLAN_TRANSFER_OWNERSHIP_DESC" )
			} )
		end
		LUI.FlowManager.RequestPopupMenu( nil, "GenericConfirmPopup", true, f18_arg1, false, {
			title = Engine[0xED84C33EC5F01EA]( "CLANS/JOIN_CLAN" ),
			message = Engine[0xED84C33EC5F01EA]( "CLANS/CHANGE_CLAN_CONFIRM_DESC" ),
			buttons = {
				{
					label = Engine[0xED84C33EC5F01EA]( "LUA_MENU_MP/CONFIRM" ),
					action = f18_arg2.confirmAction
				},
				{
					label = Engine[0xED84C33EC5F01EA]( "LUA_MENU/CANCEL" ),
					action = f18_arg2.cancelAction or function ()
						
					end
					
				}
			}
		}, nil, true, true )
		return 
	else
		assert( f18_arg2.joinNowAction )
		f18_arg2.joinNowAction( f18_arg0 )
	end
end

CLANS.SetupClanEmblemDataSourceHandlers = function ( f15_arg0, f15_arg1 )
	local f15_local0 = f15_arg0.Emblem
	local f15_local1 = f15_arg0.ClanEmblem
	assert( f15_local0 )
	assert( f15_local1 )
	if not f15_local0 or not f15_local1 then
		
	end
	f15_local0:SubscribeToModelThroughElement( f15_arg0, "emblemType", function ()
		local f17_local0 = f15_arg0:GetDataSource()
		if f17_local0 then
			f17_local0 = f15_arg0:GetDataSource()
			f17_local0 = f17_local0.emblemType
		end
		assert( f17_local0 )
		if f17_local0 then
			local f17_local1 = f17_local0:GetValue( f15_arg0 )
			if f17_local1 == LOOT.EmblemType.CLAN then
				f15_arg0:SetVisible( true )
				f15_arg0:SetVisible( false )
			else
				f15_arg0:SetVisible( false )
				f15_arg0:SetVisible( true )
			end
			f15_arg0._emblemType = f17_local1
		end
	end )
	local f15_local2 = function ()
		local f16_local0 = f15_arg0:GetDataSource()
		if f16_local0 then
			f16_local0 = f15_arg0:GetDataSource()
			f16_local0 = f16_local0.emblemData
		end
		assert( f16_local0 )
		if f16_local0 then
			local f16_local1 = {
				foregroundShapeId = f16_local0.foregroundShapeId:GetValue( f15_arg0 ),
				backgroundShapeId = f16_local0.backgroundShapeId:GetValue( f15_arg0 ),
				foregroundColorId = f16_local0.foregroundColorId:GetValue( f15_arg0 ),
				backgroundColorId = f16_local0.backgroundColorId:GetValue( f15_arg0 )
			}
			if f16_local1.foregroundShapeId and f16_local1.backgroundShapeId and f16_local1.foregroundColorId and f16_local1.backgroundColorId then
				f15_arg0:SetupClanEmblemData( f16_local1 )
				f15_arg0:SetVisible( f15_arg0._emblemType == LOOT.EmblemType.CLAN )
			else
				f15_arg0:SetVisible( false )
			end
		end
	end
	
	f15_local1:SubscribeToModelThroughElement( f15_arg0, "emblemData.foregroundShapeId", f15_local2 )
	f15_local1:SubscribeToModelThroughElement( f15_arg0, "emblemData.backgroundShapeId", f15_local2 )
	f15_local1:SubscribeToModelThroughElement( f15_arg0, "emblemData.foregroundColorId", f15_local2 )
	f15_local1:SubscribeToModelThroughElement( f15_arg0, "emblemData.backgroundColorId", f15_local2 )
end

CLANS.UnbanPlayerFromClan = function ( f14_arg0, f14_arg1, f14_arg2, f14_arg3 )
	if Clans[0x3CC261C2286EC06]( f14_arg1, f14_arg2 ) then
		local f14_local0 = {
			icon = "v_ui_icon_clan",
			displayTime = 3000
		}
		local f14_local1
		if f14_arg3 then
			f14_local1 = f14_arg3
		else
			f14_local1 = Engine[0x7D3158A9539A355]( f14_arg3 )
		end
		f14_local0.header = f14_local1
		f14_local0.description = Engine[0xED84C33EC5F01EA]( "CLANS/USER_IS_UNBANNED" )
		f14_arg0:dispatchEventToRoot( {
			name = "send_toast_notification",
			immediate = true,
			options = f14_local0
		} )
	else
		f14_arg0:dispatchEventToRoot( {
			name = "send_toast_notification",
			immediate = true,
			options = {
				icon = "hud_info_alert",
				displayTime = 3000,
				description = Engine[0xED84C33EC5F01EA]( "CLANS/FAILED_BAN" )
			}
		} )
	end
end

MenuBuilder.registerType( "RemoveClanMemberPopup", function ( f11_arg0, f11_arg1 )
	assert( f11_arg1.memberXUID )
	local f11_local0 = f11_arg1.ban or false
	local f11_local1 = {}
	local f11_local2 = Engine[0xED84C33EC5F01EA]
	local f11_local3
	if f11_local0 then
		f11_local3 = "CLANS/BAN"
	else
		f11_local3 = "CLANS/KICK"
	end
	f11_local1.headerText = f11_local2( f11_local3 )
	f11_local2 = Engine[0xED84C33EC5F01EA]
	if f11_local0 then
		f11_local3 = "CLANS/BAN_DESC"
	else
		f11_local3 = "CLANS/KICK_DESC"
	end
	f11_local1.messageText = f11_local2( f11_local3 )
	f11_local1.controllerIndex = f11_arg1.controllerIndex
	f11_local1.yesAction = function ( f13_arg0, f13_arg1 )
		Clans[0x8BDA2D89E63993B]( f13_arg1, f11_arg0.memberXUID, f11_arg0 )
		local f13_local0 = {
			icon = "v_ui_icon_clan",
			displayTime = 3000
		}
		local f13_local1 = f11_arg0.gamertag
		if f13_local1 then
			f13_local1 = Engine[0x7D3158A9539A355]( f11_arg0.gamertag )
		end
		f13_local0.header = f13_local1
		f13_local1 = Engine[0xED84C33EC5F01EA]
		local f13_local2
		if f11_arg0 then
			f13_local2 = "CLANS/PLAYER_BANNED"
		else
			f13_local2 = "CLANS/PLAYER_KICKED"
		end
		f13_local0.description = f13_local1( f13_local2 )
		f13_arg0:dispatchEventToRoot( {
			name = "send_toast_notification",
			immediate = true,
			options = f13_local0
		} )
		LUI.FlowManager.RequestLeaveMenuByName( "ClanMemberChangeRank", true, true )
	end
	
	f11_local1.noAction = function ()
		
	end
	
	f11_local2 = MenuBuilder.BuildRegisteredType( "PopupYesNo", f11_local1 )
	f11_local2.id = "RemoveClanMemberPopup"
	return f11_local2
end )
MenuBuilder.registerType( "UnbanClanMemberPopup", function ( f8_arg0, f8_arg1 )
	assert( f8_arg1.memberXUID )
	local f8_local0 = MenuBuilder.BuildRegisteredType( "PopupYesNo", {
		headerText = Engine[0xED84C33EC5F01EA]( "CLANS/UNBAN" ),
		messageText = Engine[0xED84C33EC5F01EA]( "CLANS/UNBAN_DESC" ),
		controllerIndex = f8_arg1.controllerIndex,
		yesAction = function ( f10_arg0, f10_arg1 )
			local f10_local0 = f8_arg0.gamertag
			if not f10_local0 then
				f10_local0 = f8_arg0.fullName
			end
			CLANS.UnbanPlayerFromClan( f10_arg0, f8_arg0.controllerIndex, f8_arg0.memberXUID, f10_local0 )
		end,
		noAction = function ()
			
		end
	} )
	f8_local0.id = "UnbanClanMemberPopup"
	return f8_local0
end )
CLANS.ClanRoleChangedToast = function ( f7_arg0, f7_arg1, f7_arg2 )
	if not f7_arg2 then
		f7_arg2 = ""
	end
	local f7_local0 = {
		clans_promoted_to_owner = {
			icon = "v_ui_icon_clan",
			displayTime = 3000,
			header = Engine[0xED84C33EC5F01EA]( "CLANS/PROMOTION" ),
			description = Engine[0xED84C33EC5F01EA]( "CLANS/PROMOTED_TO_OWNER" )
		},
		clans_promoted_to_admin = {
			icon = "v_ui_icon_clan",
			displayTime = 3000,
			header = Engine[0xED84C33EC5F01EA]( "CLANS/PROMOTION" ),
			description = Engine[0xED84C33EC5F01EA]( "CLANS/PROMOTED_TO_ADMIN" )
		},
		clans_promoted_to_officer = {
			icon = "v_ui_icon_clan",
			displayTime = 3000,
			header = Engine[0xED84C33EC5F01EA]( "CLANS/PROMOTION" ),
			description = Engine[0xED84C33EC5F01EA]( "CLANS/PROMOTED_TO_OFFICER" )
		},
		clans_demoted_to_officer = {
			icon = "v_ui_icon_clan",
			displayTime = 3000,
			header = Engine[0xED84C33EC5F01EA]( "CLANS/DEMOTION" ),
			description = Engine[0xED84C33EC5F01EA]( "CLANS/DEMOTED_TO_OFFICER" )
		},
		clans_demoted_to_member = {
			icon = "v_ui_icon_clan",
			displayTime = 3000,
			header = Engine[0xED84C33EC5F01EA]( "CLANS/DEMOTION" ),
			description = Engine[0xED84C33EC5F01EA]( "CLANS/DEMOTED_TO_MEMBER" )
		},
		clans_kicked_from_clan = {
			icon = "v_ui_icon_clan",
			displayTime = 3000,
			description = Engine[0xED84C33EC5F01EA]( "CLANS/KICKED_DESC" )
		}
	}
	f7_arg0:processEvent( {
		name = "send_toast_notification",
		immediate = true,
		options = f7_local0[f7_arg1]
	} )
end

CLANS.ValidateStringUGC = function ( f6_arg0, f6_arg1 )
	if not f6_arg0 or #f6_arg0 == 0 then
		return false
	elseif not Engine[0xF69AA31FB8B1CFD]( f6_arg0 ) then
		LUI.FlowManager.RequestPopupMenu( nil, "ClanRestrictionPopup", true, f6_arg1, false, {
			controllerIndex = f6_arg1,
			message = Engine[0xED84C33EC5F01EA]( "CLANS/DIGITS_RESTRICTION_ERROR", CLANS.MAX_DIGITS_IN_CLAN_NAME )
		} )
		return false
	else
		local f6_local0 = OSK[0xD6AD1A0C00C462F]( f6_arg1, f6_arg0 )
		if f6_local0 and 0 < #f6_local0 then
			LUI.FlowManager.RequestPopupMenu( nil, "ClanRestrictionPopup", true, f6_arg1, false, {
				controllerIndex = f6_arg1,
				message = Engine[0xED84C33EC5F01EA]( f6_local0 )
			} )
			return false
		else
			return true
		end
	end
end

CLANS.OpenEditAnnouncementPopup = function ( f4_arg0, f4_arg1 )
	local f4_local0 = {
		isClearable = true,
		headerText = Engine[0xED84C33EC5F01EA]( "CLANS/EDIT_ANNOUNCEMENT" )
	}
	local f4_local1
	if 0 < #string.gsub( f4_arg0.clanAnnouncement, "%s+", "" ) then
		f4_local1 = f4_arg0.clanAnnouncement
		if not f4_local1 then
		
		else
			f4_local0.hintText = f4_local1
			f4_local0.maxLength = CLANS.MAX_ANNOUNCEMENT_LENGTH
			f4_local0.acceptCallbackFunc = function ( f5_arg0, f5_arg1 )
				local f5_local0 = Clans[0x43F567012B7061]( f5_arg1 )
				local f5_local1 = f5_arg0:GetCurrentMenu()
				local f5_local2 = f5_local1.GenericEditBox:GetText()
				if #f5_local2 == 0 or CLANS.ValidateStringUGC( f5_local2, f5_arg1 ) then
					local f5_local3 = Clans[0x2BFB606D193C9B7]
					local f5_local4 = f5_arg1
					local f5_local5 = f5_local0
					local f5_local6
					if 0 < #f5_local2 and not f5_local2 then
						f5_local6 = f5_local2
					else
						f5_local6 = " "
					end
					f5_local3( f5_local4, f5_local5, f5_local6 )
					Engine[0x15D98DF5F61904B]( f5_arg1, "clan_profile_updated", {
						announcement_updated = true
					} )
					
				else
					return true
				end
			end
			
			LUI.FlowManager.RequestAddMenu( "EditBoxPopup", true, f4_arg1, false, f4_local0, true, true )
		end
	end
	f4_local1 = Engine[0xED84C33EC5F01EA]( "CLANS/CLAN_ANNOUNCEMENT_HINT" )
end

CLANS.GetLeaderboardTierColor = function ( f3_arg0 )
	if f3_arg0 == CLANS.LeaderboardTier.STANDARD_TIER then
		return SWATCHES.vClanTiers.tier1, CLAN_TIER_COLOR_TOKEN_DEFAULT
	elseif f3_arg0 == CLANS.LeaderboardTier.COMMON_TIER then
		return SWATCHES.vClanTiers.tier2, LOOT.qualities[2].token
	elseif f3_arg0 == CLANS.LeaderboardTier.RARE_TIER then
		return SWATCHES.vClanTiers.tier3, LOOT.qualities[3].token
	elseif f3_arg0 == CLANS.LeaderboardTier.EPIC_TIER then
		return SWATCHES.vClanTiers.tier4, LOOT.qualities[4].token
	elseif f3_arg0 == CLANS.LeaderboardTier.LEGENDARY_TIER then
		return SWATCHES.vClanTiers.tier5, LOOT.qualities[5].token
	elseif f3_arg0 == CLANS.LeaderboardTier.ULTRA_TIER then
		return SWATCHES.vClanTiers.tier6, LOOT.qualities[6].token
	else
		return SWATCHES.vClanTiers.tier1, CLAN_TIER_COLOR_TOKEN_DEFAULT
	end
end

CLANS.GetClanTagFormattedAndTierColorized = function ( f2_arg0, f2_arg1 )
	local f2_local0 = CLANS.GetLeaderboardTierColor
	local f2_local1
	if f2_arg1 and not f2_arg1 then
		f2_local1 = f2_arg1
	else
		f2_local1 = CLANS.LeaderboardTier.STANDARD_TIER
	end
	local f2_local0, f2_local2 = f2_local0( f2_local1 )
	return "[" .. f2_local2 .. f2_arg0 .. "^7" .. "]"
end

CLANS.GetFormattedAndColorizedTagAndName = function ( f1_arg0, f1_arg1, f1_arg2 )
	local f1_local0 = CLANS.GetLeaderboardTierColor
	local f1_local1
	if f1_arg2 and not f1_arg2 then
		f1_local1 = f1_arg2
	else
		f1_local1 = CLANS.LeaderboardTier.STANDARD_TIER
	end
	local f1_local0, f1_local2 = f1_local0( f1_local1 )
	f1_local1 = f1_local2 .. f1_arg0 .. "^7"
	local f1_local3 = Engine[0xED84C33EC5F01EA]
	local f1_local4 = "CLANS/TAG_NAME_FORMATTED"
	local f1_local5 = Engine[0x7D3158A9539A355]( f1_local1 )
	return f1_local3( f1_local4, Engine[0x7D3158A9539A355]( f1_arg1 ) )
end

