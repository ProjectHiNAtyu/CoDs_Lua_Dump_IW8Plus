-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
module( ..., package.seeall )
require( "ui.generated.widgets.frontend.systemlinklobbybuttons" )
require( "ui.generated.widgets.frontend.lobby.lobbymembers" )
require( "ui.generated.widgets.frontend.mp.lobby.lobbymap" )
require( "ui.generated.widgets.frontend.cp.soclassic.sostarrequirementssmall" )
require( "ui.generated.widgets.frontend.mp.cdlrestrictiontag" )
require( "ui.generated.widgets.frontend.lobby.privatematchlobbybuttonshorizontal" )
local f0_local0 = nil
local f0_local1 = function ( f15_arg0, f15_arg1 )
	if f0_local0 then
		WipeGlobalModelsAtPath( f0_local0 )
	end
end

local f0_local2 = function ( f12_arg0, f12_arg1 )
	if Lobby[0x77E4C9387EBF70E]() then
		local f12_local0 = MP_COMMON.IsMatchRulesCODCastingEnabled( false )
		CODCASTER.SetCodcastingEnabled( f12_local0 )
		local f12_local1 = Lobby[0x2AC4DDCF8B7CCCA]
		local f12_local2
		if f12_local0 then
			f12_local2 = f12_local0
		else
			f12_local2 = CanCodcast()
		end
		f12_local1( f12_local2 )
		f12_arg0.CDLRestrictionTag:UpdateVisibility( f12_arg1 )
	else
		local f12_local0 = LUI.DataSourceInGlobalModel.new( "frontEnd.lobby.isCodCastingEnabled" )
		f12_arg0:SubscribeToModel( f12_local0:GetModel( f12_arg1 ), function ()
			CODCASTER.SetCodcastingEnabled( f12_arg0:GetValue( f12_arg0 ) )
		end, true )
		local f12_local1 = LUI.DataSourceInGlobalModel.new( "frontEnd.lobby.areMLGRulesEnabled" )
		f12_arg0:SubscribeToModel( f12_local1:GetModel( f12_arg1 ), function ()
			f12_arg0.CDLRestrictionTag:UpdateVisibility( f12_arg0 )
		end )
	end
	EsportsUtils.InitializeLobby()
	if not CONDITIONS.IsNewPrivateMatchUIEnabled() then
		EsportsUtils.SetupLobbyButtons( f12_arg1, f12_arg0.SystemLinkLobbyButtons )
	else
		EsportsUtils.SetupLobbyButtons( f12_arg1, f12_arg0.HorizontalButtons )
	end
end

local f0_local3 = function ( f11_arg0, f11_arg1 )
	if not f11_arg0 then
		f11_arg0 = Engine[0x45B054C920178E9]()
	end
	local f11_local0 = nil
	local f11_local1 = Lobby.GetLocalPlayerDataSource( f11_arg0 )
	if f11_local1 then
		f11_local0 = f11_local1.desiredTeam:GetValue( f11_arg0, {
			defaultValue = 0
		} )
	end
	if not f11_local0 then
		f11_local0 = Lobby.GetLocalClientTeam( f11_arg0 )
	end
	local f11_local2 = Lobby.GetSuperFactionIndexFromTeam( f11_local0 )
	if Engine[0xCA085C21FCBD7CA]() then
		f11_local2 = OPERATOR.GetSelectedOperatorIndex( f11_arg0 )
	end
	if not f11_local2 then
		f11_local2 = OPERATOR.SuperFaction.WEST
	end
	local f11_local3, f11_local4 = OPERATOR.GetEquippedOperatorSkin( f11_arg0, f11_local2 )
	FrontEndScene.RequestBodyModels( {
		f11_local3
	} )
	FrontEndScene.RequestHeadModels( {
		f11_local4
	} )
	local f11_local5, f11_local6 = OPERATOR.GetWeaponDataFromLoadout( f11_arg0 )
	local f11_local7 = OPERATOR.ValidateAccessoryModel( OPERATOR.GetWeaponAccessoryModelFromLoadout( f11_arg0 ), f11_local3 )
	FrontEndScene.RequestWeaponWorldModels( {
		f11_local5,
		f11_local6,
		f11_local7
	} )
	OPERATOR.UpdateClientCharacter( self, f11_arg0, f11_arg1, {
		showCharacter = true,
		bodyModel = f11_local3,
		headModel = f11_local4,
		primaryWeaponModel = f11_local5,
		secondaryWeaponModel = f11_local6,
		accessoryModel = f11_local7,
		operatorPose = Lobby.GetWalkAnimationForIndex( f11_local3, f11_local4, f11_arg1 + 1, f11_local5 )
	} )
	local f11_local8 = Lobby.GetPetIndexForCharacter( f11_arg1 )
	if f11_local8 then
		OPERATOR.UpdatePet( f11_arg0, f11_local8, {
			executionPet = OPERATOR.GetPetForEquippedOperator( f11_arg0, f11_local2 ),
			element = self
		} )
	end
end

local f0_local4 = function ()
	f0_local0( Engine[0xF13D4623D3F6D4E]( 0 ), FrontEndScene.ClientCharacters.LocalSquadMember )
	if 1 < Engine[0x70187FE84AE61FD]() then
		f0_local0( Engine[0xF13D4623D3F6D4E]( 1 ), FrontEndScene.ClientCharacters.Lobby1 )
	else
		FrontEndScene.HideAllLobbyCharactersPastIndex( 2 )
	end
end

local f0_local5 = function ( f7_arg0, f7_arg1, f7_arg2 )
	PRIVATE_MATCH.DisplayDevCheatWarning( f7_arg0 )
	f7_arg0.Cleanup = f0_local0
	if f7_arg0.SystemLinkLobbyButtons then
		f0_local0 = f7_arg0.SystemLinkLobbyButtons.widgetModelPath
	end
	f7_arg0:setPriority( -1 )
	if CONDITIONS.IsCoreMultiplayer() then
		f0_local0( f7_arg0, f7_arg1 )
	end
	if CONDITIONS.IsThirdGameMode() then
		CP.ClearAllPickupMunitions( f7_arg1 )
	end
	FrontEndScene.HideAllCharacters()
	Engine[0x685AE31DEDA30A4]( "squad_lobby" )
	if Dvar[0x9E5BE3B4BBA4E0E]( 0x902FC06439C5DD8 ) == true and Engine[0x2DA54CF5D6B7F02]() then
		SetupDebugTournamentScene( f7_arg0, f7_arg1 )
	end
	LUI.DeferredFence.Attach( f7_arg0, f7_arg1, "CLIENT_CONNECT", LUI.DeferredFence.Criticality.LOW, LUI.DeferredFence.BackOutMethod.NONE, function ( f8_arg0, f8_arg1 )
		if f8_arg1.fenceState == LUI.Fence.FenceObjectState.PASSING then
			local self = LUI.UITimer.new( {
				interval = 1000,
				event = "update_lobby"
			} )
			self.id = "lobbyTimer"
			f7_arg0:addElement( self )
			f7_arg0:registerEventHandler( "update_lobby", function ( element, event )
				f8_arg0( element, f8_arg0 )
			end )
		end
	end )
end

States = {
	[0xAD14C6E7156B923] = function ( f3_arg0, f3_arg1 )
		local f3_local0 = function ( f6_arg0, f6_arg1 )
			
		end
		
		if f3_arg0.SystemLinkLobbyButtons then
			f3_arg0.SystemLinkLobbyButtons:RegisterAnimationSequence( "ShowPlayerInfo", {
				{
					value = 0,
					duration = 0,
					property = TWEEN_PROPERTY.Left_Anchor
				},
				{
					value = 1,
					duration = 0,
					property = TWEEN_PROPERTY.Right_Anchor
				},
				{
					duration = 0,
					property = TWEEN_PROPERTY.Left,
					value = _1080p * -1235
				},
				{
					duration = 0,
					property = TWEEN_PROPERTY.Right,
					value = _1080p * -776
				}
			} )
		end
		if f3_arg0.LobbyMembers then
			f3_arg0.LobbyMembers:RegisterAnimationSequence( "ShowPlayerInfo", {
				{
					value = 0,
					duration = 0,
					property = TWEEN_PROPERTY.Left_Anchor
				},
				{
					value = 1,
					duration = 0,
					property = TWEEN_PROPERTY.Right_Anchor
				},
				{
					duration = 0,
					property = TWEEN_PROPERTY.Left,
					value = _1080p * 633
				},
				{
					duration = 0,
					property = TWEEN_PROPERTY.Right,
					value = _1080p * 1243
				}
			} )
		end
		local f3_local1 = function ( f5_arg0, f5_arg1 )
			if f5_arg0.SystemLinkLobbyButtons then
				f5_arg0.SystemLinkLobbyButtons:AnimateSequence( "ShowPlayerInfo" )
			end
			if f5_arg0.LobbyMembers then
				f5_arg0.LobbyMembers:AnimateSequence( "ShowPlayerInfo" )
			end
		end
		
		if f3_arg0.SystemLinkLobbyButtons then
			f3_arg0.SystemLinkLobbyButtons:RegisterAnimationSequence( "HidePlayerInfo", {
				{
					value = 0,
					duration = 0,
					property = TWEEN_PROPERTY.Left_Anchor
				},
				{
					value = 1,
					duration = 0,
					property = TWEEN_PROPERTY.Right_Anchor
				},
				{
					duration = 0,
					property = TWEEN_PROPERTY.Left,
					value = _1080p * 96
				},
				{
					duration = 0,
					property = TWEEN_PROPERTY.Right,
					value = _1080p * 556
				}
			} )
		end
		if f3_arg0.LobbyMembers then
			f3_arg0.LobbyMembers:RegisterAnimationSequence( "HidePlayerInfo", {
				{
					value = 5.29462817E-315,
					duration = 0,
					property = TWEEN_PROPERTY.Left_Anchor
				},
				{
					value = 5.29462817E-315,
					duration = 0,
					property = TWEEN_PROPERTY.Right_Anchor
				},
				{
					duration = 0,
					property = TWEEN_PROPERTY.Left,
					value = _1080p * 230
				},
				{
					duration = 0,
					property = TWEEN_PROPERTY.Right,
					value = _1080p * 840
				}
			} )
		end
		f3_arg0._sequences = {
			DefaultSequence = f3_local0,
			ShowPlayerInfo = f3_local1,
			HidePlayerInfo = function ( f4_arg0, f4_arg1 )
				if f4_arg0.SystemLinkLobbyButtons then
					f4_arg0.SystemLinkLobbyButtons:AnimateSequence( "HidePlayerInfo" )
				end
				if f4_arg0.LobbyMembers then
					f4_arg0.LobbyMembers:AnimateSequence( "HidePlayerInfo" )
				end
			end
		}
		f3_arg0._sequenceLengths = {
			DefaultSequence = 0,
			HidePlayerInfo = 0,
			ShowPlayerInfo = 0
		}
	end
}
function SystemLinkLobbyPlayMenu( menu, controller )
	local self = LUI.UIHorizontalNavigator.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "SystemLinkLobbyPlayMenu"
	self.__states = States
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = nil
	if CONDITIONS.IsLaunchChunk() then
		f1_local2 = LUI.UIImage.new()
		f1_local2.id = "LCBackground"
		f1_local2:setImage( RegisterMaterial( 0x24D768416C90657 ), 0 )
		self:addElement( f1_local2 )
		self.LCBackground = f1_local2
	end
	local Vignette = nil
	
	Vignette = LUI.UIImage.new()
	Vignette.id = "Vignette"
	ACTIONS.ScaleStretchAnchorFullscreen( Vignette )
	Vignette:SetRGBFromTable( SWATCHES.genericMenu.blackBackground, 0 )
	Vignette:setImage( RegisterMaterial( 0x3A8F29C0EC8E46E ), 0 )
	Vignette:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -346, 0 )
	self:addElement( Vignette )
	self.Vignette = Vignette
	
	local f1_local4 = nil
	if not CONDITIONS.IsNewPrivateMatchUIEnabled() then
		f1_local4 = MenuBuilder.BuildRegisteredType( "SystemLinkLobbyButtons", {
			controllerIndex = f1_local1
		} )
		f1_local4.id = "SystemLinkLobbyButtons"
		f1_local4:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 556, _1080p * 216, _1080p * 393 )
		self:addElement( f1_local4 )
		self.SystemLinkLobbyButtons = f1_local4
	end
	local f1_local5 = nil
	if not CONDITIONS.IsLaunchChunk() then
		f1_local5 = MenuBuilder.BuildRegisteredType( "LobbyMembers", {
			controllerIndex = f1_local1
		} )
		f1_local5.id = "LobbyMembers"
		f1_local5:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * 230, _1080p * 840, _1080p * 216, _1080p * 826 )
		self:addElement( f1_local5 )
		self.LobbyMembers = f1_local5
	end
	local LobbyMap = nil
	
	LobbyMap = MenuBuilder.BuildRegisteredType( "LobbyMap", {
		controllerIndex = f1_local1
	} )
	LobbyMap.id = "LobbyMap"
	LobbyMap:SetAnchorsAndPosition( 1, 0, 1, 0, _1080p * -518, _1080p * -88, _1080p * -324, _1080p * -120 )
	self:addElement( LobbyMap )
	self.LobbyMap = LobbyMap
	
	local f1_local7 = nil
	if Engine[0xCA085C21FCBD7CA]() and CONDITIONS.AreSpecOpsStarsEnabled() then
		f1_local7 = MenuBuilder.BuildRegisteredType( "SOStarRequirementsSmall", {
			controllerIndex = f1_local1
		} )
		f1_local7.id = "StarRequirements"
		f1_local7:SetAnchorsAndPosition( 1, 0, 1, 0, _1080p * -518, _1080p * -88, _1080p * -250, _1080p * -120 )
		self:addElement( f1_local7 )
		self.StarRequirements = f1_local7
	end
	local CDLRestrictionTag = nil
	
	CDLRestrictionTag = MenuBuilder.BuildRegisteredType( "CDLRestrictionTag", {
		controllerIndex = f1_local1
	} )
	CDLRestrictionTag.id = "CDLRestrictionTag"
	CDLRestrictionTag:SetAlpha( 0, 0 )
	CDLRestrictionTag:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 446, _1080p * 173, _1080p * 203 )
	self:addElement( CDLRestrictionTag )
	self.CDLRestrictionTag = CDLRestrictionTag
	
	local f1_local9 = nil
	if CONDITIONS.IsNewPrivateMatchUIEnabled() then
		f1_local9 = MenuBuilder.BuildRegisteredType( "PrivateMatchLobbyButtonsHorizontal", {
			controllerIndex = f1_local1
		} )
		f1_local9.id = "HorizontalButtons"
		f1_local9:SetAnchorsAndPosition( 0, 1, 1, 0, _1080p * 88, _1080p * 2008, _1080p * -324, _1080p * -120 )
		self:addElement( f1_local9 )
		self.HorizontalButtons = f1_local9
	end
	if not CONDITIONS.IsNewPrivateMatchUIEnabled() then
		f1_local4:addEventHandler( "gain_focus", function ( f2_arg0, f2_arg1 )
			local f2_local0 = f2_arg1.controller or menu
			ACTIONS.AnimateSequence( menu, "HidePlayerInfo", menu )
		end )
	end
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "SystemLinkLobbyPlayMenu", SystemLinkLobbyPlayMenu )
LockTable( _M )
