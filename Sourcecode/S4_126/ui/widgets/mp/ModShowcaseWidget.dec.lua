-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
module( ..., package.seeall )
local f0_local0 = 100
local f0_local1 = 600
local f0_local2 = 600
local f0_local3 = 500
local f0_local4 = 75
local f0_local5 = 200
local f0_local6 = function ( f19_arg0 )
	if f19_arg0._modCardTimer then
		f19_arg0._modCardTimer:Dispose()
		f19_arg0._modCardTimer = nil
	end
	if f19_arg0._displayTimer then
		f19_arg0._displayTimer:Dispose()
		f19_arg0._displayTimer = nil
	end
	f19_arg0._lastRandomModCardIndex = 0
	f19_arg0._shuffleTimer = 0
	f19_arg0._shuffleCount = 0
	f19_arg0.ModCardLabel:SetAlpha( 0 )
	f19_arg0.ModCardSpinnerLabel1:SetAlpha( 0 )
	f19_arg0.ModCardSpinnerLabel2:SetAlpha( 0 )
	f19_arg0.SelectedModCardLabel:SetAlpha( 0 )
	f19_arg0:SetAlpha( 1 )
end

local f0_local7 = function ( f17_arg0 )
	if f17_arg0._modCardTimer then
		f17_arg0._modCardTimer:Dispose()
		f17_arg0._modCardTimer = nil
		local self = LUI.UITimer.new( {
			event = "update_widget",
			interval = f0_local0
		} )
		self.id = "displayTimer"
		f17_arg0:addElement( self )
		f17_arg0:registerEventHandler( "update_widget", function ( element, event )
			f17_arg0.ModCardLabel:SetAlpha( 0, f17_arg0, LUI.EASING.linear )
			f17_arg0.ModCardSpinnerLabel1:SetAlpha( 0, f17_arg0, LUI.EASING.linear )
			f17_arg0.ModCardSpinnerLabel2:SetAlpha( 0, f17_arg0, LUI.EASING.linear )
			f17_arg0.SelectedModCardLabel:SetAlpha( 1, f17_arg0, LUI.EASING.linear )
			f17_arg0._displayTimer:Dispose()
			f17_arg0._displayTimer = nil
		end )
		f17_arg0._displayTimer = self
	end
end

local f0_local8 = function ( f14_arg0 )
	local f14_local0 = (f14_arg0._lastRandomModCardIndex + math.random( #f14_arg0._modCardSpinnerItems - 1 ) - 1) % #f14_arg0._modCardSpinnerItems + 1
	local f14_local1 = f14_arg0._shuffleCount % 2 and f14_arg0.ModCardSpinnerLabel1 or f14_arg0.ModCardSpinnerLabel2
	f14_arg0._shuffleCount = f14_arg0._shuffleCount + 1
	f14_arg0._lastRandomModCardIndex = f14_local0
	f14_arg0._shuffleTimer = f14_arg0._shuffleTimer + f0_local0
	if f0_local0 < f14_arg0._shuffleTimer then
		f14_local1:setText( f14_arg0._modCards[f14_arg0._selectedModCard].displayString )
		f14_arg0.SelectedModCardLabel:setText( f14_arg0._modCards[f14_arg0._selectedModCard].displayString )
		f14_local1:SetAlpha( 0 )
		f14_local1:SetBottom( f0_local0 )
		f14_local1:SetAlpha( 1, f0_local0, LUI.EASING.linear )
		f14_local1:SetBottom( 0, f0_local0, LUI.EASING.linear )
		local f14_local2 = f14_arg0:Wait( f0_local0 - 50 )
		f14_local2.onComplete = function ()
			Engine[0xC4146BA76D0F982]( SOUND_SETS.default.action )
		end
		
		f0_local0( f14_arg0 )
	else
		f14_local1:setText( f14_arg0._modCardSpinnerItems[f14_local0] )
		f14_local1:SetAlpha( 0 )
		f14_local1:SetBottom( f0_local0 )
		f14_local1:SetAlpha( 1, f0_local0, LUI.EASING.linear )
		f14_local1:SetBottom( -f0_local0, f0_local0 * 2, LUI.EASING.linear )
		local f14_local2 = f14_arg0:Wait( f0_local0 )
		f14_local2.onComplete = function ()
			f14_arg0:SetAlpha( 1 )
			f14_arg0:SetAlpha( 0, f14_arg0, LUI.EASING.linear )
		end
		
	end
	Engine[0xC4146BA76D0F982]( SOUND_SETS.mpMainMenu.move )
end

local f0_local9 = function ( f11_arg0 )
	local f11_local0 = f11_arg0:Wait( f0_local0 )
	f11_local0.onComplete = function ()
		f11_arg0( f11_arg0 )
		f11_arg0.ModCardLabel:SetAlpha( 1, f11_arg0, LUI.EASING.linear )
		local self = LUI.UITimer.new( {
			event = "update_widget",
			interval = f11_arg0
		} )
		self.id = "modCardTimer"
		f11_arg0:addElement( self )
		f11_arg0:registerEventHandler( "update_widget", function ( element, event )
			self( element )
		end )
		f11_arg0._modCardTimer = self
		f11_arg0( f11_arg0 )
	end
	
end

local f0_local10 = function ( f10_arg0 )
	f0_local0( f10_arg0 )
	f10_arg0.SelectedModCardLabel:SetAlpha( 1 )
	f10_arg0.SelectedModCardLabel:setText( f10_arg0._modCards[f10_arg0._selectedModCard].displayString )
end

local f0_local11 = function ( f9_arg0 )
	f9_arg0._selectedModCard = math.random( #f9_arg0._modCards )
end

local f0_local12 = function ( f8_arg0, f8_arg1 )
	f8_arg0._selectedModCard = f8_arg1
end

local f0_local13 = function ( f7_arg0 )
	f7_arg0:SetAlpha( 0 )
end

local f0_local14 = function ( f6_arg0 )
	local f6_local0 = {}
	for f6_local1 = 1, #f6_arg0._modCards, 1 do
		if 0 < (Dvar[0x22EAAB59AA27E9B]( Engine[0xE95D388486C8013]( "#x336339467cdad1bb7", f6_arg0._modCards[f6_local1].ref ) ) or tonumber( f6_arg0._modCards[f6_local1].oddsMultiplier )) then
			table.insert( f6_local0, f6_arg0._modCards[f6_local1].displayString )
		end
	end
	return f6_local0
end

local f0_local15 = function ( f5_arg0, f5_arg1, f5_arg2 )
	f5_arg0._controllerIndex = f5_arg1
	f5_arg0._selectedModCard = 0
	f0_local0( f5_arg0 )
	f5_arg0._modCards = ARENA_EVO.GetModCards( f5_arg0 )
	f5_arg0._modCardSpinnerItems = f0_local0( f5_arg0 )
	f5_arg0.SetRandomMod = f0_local0
	f5_arg0.SetMod = f0_local0
	f5_arg0.Hide = f0_local0
	f5_arg0.StartModCardShuffle = f0_local0
	f5_arg0.ShowImmediately = f0_local0
end

function ModShowcaseWidget( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1000 * _1080p, 0, 600 * _1080p )
	self.id = "ModShowcaseWidget"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	self._sequenceLengths = self._sequenceLengths or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine[0x12586A3F4FB490E]() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1, "Missing controllerIndex!" )
	local f1_local2 = self
	local ModCardSpinnerLabel1 = nil
	
	ModCardSpinnerLabel1 = LUI.UIStyledText.new()
	ModCardSpinnerLabel1.id = "ModCardSpinnerLabel1"
	ModCardSpinnerLabel1:setText( "SPINNER LABEL 1", 0 )
	ModCardSpinnerLabel1:setCaseStyle( LUI.CaseStyle.Uppercase )
	ModCardSpinnerLabel1:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_MHeaderBold.font.File ) )
	ModCardSpinnerLabel1:SetFontSize( FONT_STYLES.fontStyle_MHeaderBold.size )
	ModCardSpinnerLabel1:SetMinFontSize( FONT_STYLES.fontStyle_MHeaderBold.minSize )
	ModCardSpinnerLabel1:SetWordWrap( false )
	ModCardSpinnerLabel1:SetAlignment( LUI.Alignment.Left )
	ModCardSpinnerLabel1:SetVerticalAlignment( LUI.Alignment.Center )
	ModCardSpinnerLabel1:SetSDFRenderingEnabled( true )
	ModCardSpinnerLabel1:SetShadowMinDistance( -0.1, 0 )
	ModCardSpinnerLabel1:SetShadowMaxDistance( 0.1, 0 )
	ModCardSpinnerLabel1:SetShadowRGBFromTable( SWATCHES.HUD.vHUDShadow, 0 )
	ModCardSpinnerLabel1:SetAnchorsAndPosition( 0.5, 0.5, 0, 0, _1080p * 5, _1080p * 400, _1080p * 390, 0 )
	self:addElement( ModCardSpinnerLabel1 )
	self.ModCardSpinnerLabel1 = ModCardSpinnerLabel1
	
	local ModCardSpinnerLabel2 = nil
	
	ModCardSpinnerLabel2 = LUI.UIStyledText.new()
	ModCardSpinnerLabel2.id = "ModCardSpinnerLabel2"
	ModCardSpinnerLabel2:setText( "SPINNER LABEL 2", 0 )
	ModCardSpinnerLabel2:setCaseStyle( LUI.CaseStyle.Uppercase )
	ModCardSpinnerLabel2:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_MHeaderBold.font.File ) )
	ModCardSpinnerLabel2:SetFontSize( FONT_STYLES.fontStyle_MHeaderBold.size )
	ModCardSpinnerLabel2:SetMinFontSize( FONT_STYLES.fontStyle_MHeaderBold.minSize )
	ModCardSpinnerLabel2:SetWordWrap( false )
	ModCardSpinnerLabel2:SetAlignment( LUI.Alignment.Left )
	ModCardSpinnerLabel2:SetVerticalAlignment( LUI.Alignment.Center )
	ModCardSpinnerLabel2:SetSDFRenderingEnabled( true )
	ModCardSpinnerLabel2:SetShadowRGBFromTable( SWATCHES.HUD.vHUDShadow, 0 )
	ModCardSpinnerLabel2:SetAnchorsAndPosition( 0.5, 0.5, 0, 0, _1080p * 5, _1080p * 400, _1080p * 390, 0 )
	self:addElement( ModCardSpinnerLabel2 )
	self.ModCardSpinnerLabel2 = ModCardSpinnerLabel2
	
	local ModCardLabel = nil
	
	ModCardLabel = LUI.UIStyledText.new()
	ModCardLabel.id = "ModCardLabel"
	ModCardLabel:setText( Engine[0xED84C33EC5F01EA]( "ARENA_EVO/MOD_CARD" ), 0 )
	ModCardLabel:setCaseStyle( LUI.CaseStyle.Uppercase )
	ModCardLabel:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_MHeaderBold.font.File ) )
	ModCardLabel:SetFontSize( FONT_STYLES.fontStyle_MHeaderBold.size )
	ModCardLabel:SetMinFontSize( FONT_STYLES.fontStyle_MHeaderBold.minSize )
	ModCardLabel:SetWordWrap( false )
	ModCardLabel:SetAlignment( LUI.Alignment.Right )
	ModCardLabel:SetVerticalAlignment( LUI.Alignment.Center )
	ModCardLabel:SetSDFRenderingEnabled( true )
	ModCardLabel:SetShadowRGBFromTable( SWATCHES.HUD.HUDShadow, 0 )
	ModCardLabel:SetAnchorsAndPosition( 0.5, 0.5, 0, 0, _1080p * -302, _1080p * -6, _1080p * 470, _1080p * -80 )
	self:addElement( ModCardLabel )
	self.ModCardLabel = ModCardLabel
	
	local SelectedModCardLabel = nil
	
	SelectedModCardLabel = LUI.UIStyledText.new()
	SelectedModCardLabel.id = "SelectedModCardLabel"
	SelectedModCardLabel:SetRGBFromTable( SWATCHES.HUD.vHUDDefault, 0 )
	SelectedModCardLabel:setText( "SELECTED MOD", 0 )
	SelectedModCardLabel:setCaseStyle( LUI.CaseStyle.Uppercase )
	SelectedModCardLabel:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_MHeaderBold.font.File ) )
	SelectedModCardLabel:SetFontSize( FONT_STYLES.fontStyle_MHeaderBold.size )
	SelectedModCardLabel:SetMinFontSize( FONT_STYLES.fontStyle_MHeaderBold.minSize )
	SelectedModCardLabel:SetWordWrap( false )
	SelectedModCardLabel:SetAlignment( LUI.Alignment.Left )
	SelectedModCardLabel:SetVerticalAlignment( LUI.Alignment.Center )
	SelectedModCardLabel:SetSDFRenderingEnabled( true )
	SelectedModCardLabel:SetShadowMinDistance( -0.1, 0 )
	SelectedModCardLabel:SetShadowMaxDistance( 0.1, 0 )
	SelectedModCardLabel:SetShadowRGBFromTable( SWATCHES.HUD.vHUDShadow, 0 )
	SelectedModCardLabel:SetAnchorsAndPosition( 0.5, 0.5, 0, 0, _1080p * -833, _1080p * -397, _1080p * 14, _1080p * -537 )
	self:addElement( SelectedModCardLabel )
	self.SelectedModCardLabel = SelectedModCardLabel
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	self._sequenceLengths.DefaultSequence = 0
	local f1_local7 = nil
	SelectedModCardLabel:RegisterAnimationSequence( "TeamScoresUp", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 112
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Top
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 500
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * -576
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Text_Style_Horizontal_Alignment,
			value = LUI.Alignment.Left
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.TeamScoresUp = function ()
		menu:AnimateSequence( "TeamScoresUp" )
		menu:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_SHeaderBold.font.File ) )
		menu:SetFontSize( FONT_STYLES.fontStyle_SHeaderBold.size )
		menu:SetMinFontSize( FONT_STYLES.fontStyle_SHeaderBold.minSize )
	end
	
	self._sequenceLengths.TeamScoresUp = 0
	local f1_local8 = nil
	SelectedModCardLabel:RegisterAnimationSequence( "TeamScoresCollapsed", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -833
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -397
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 14
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * -537
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Text_Style_Horizontal_Alignment,
			value = LUI.Alignment.Left
		}
	} )
	self._sequences.TeamScoresCollapsed = function ()
		menu:AnimateSequence( "TeamScoresCollapsed" )
	end
	
	self._sequenceLengths.TeamScoresCollapsed = 0
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "ModShowcaseWidget", ModShowcaseWidget )
LockTable( _M )
