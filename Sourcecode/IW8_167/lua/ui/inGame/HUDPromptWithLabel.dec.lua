-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
module( ..., package.seeall )
local f0_local0 = function ( f19_arg0 )
	return f19_arg0._vehicleRef
end

local f0_local1 = function ( f18_arg0, f18_arg1 )
	f18_arg0._vehicleRef = f18_arg1
end

local f0_local2 = function ( f17_arg0, f17_arg1 )
	assert( f17_arg0.Prompt )
	assert( f17_arg0.PromptAlternateKbm )
	if f17_arg1 then
		f17_arg0.Prompt:SetProgress( f17_arg1 )
		f17_arg0.PromptAlternateKbm:SetProgress( f17_arg1 )
	end
end

local f0_local3 = function ( f16_arg0 )
	assert( f16_arg0.Prompt )
	assert( f16_arg0.PromptAlternateKbm )
	f16_arg0.Prompt:SetButtonPromptToHold()
	f16_arg0.PromptAlternateKbm:SetButtonPromptToHold()
end

local f0_local4 = function ( f15_arg0 )
	assert( f15_arg0.Prompt )
	assert( f15_arg0.PromptAlternateKbm )
	f15_arg0.Prompt:SetButtonPromptToPress()
	f15_arg0.PromptAlternateKbm:SetButtonPromptToPress()
end

local f0_local5 = function ( f14_arg0, f14_arg1 )
	if not (not CONDITIONS.IsCapturingFootage( self ) and (not Engine.ECHCFGDDDF() or not CODCASTER.CanCODCast() or not CODCASTER.IsCODCaster())) or CONDITIONS.IsSpectating( f14_arg0._controllerIndex ) and CONDITIONS.IsBRGameType( self ) then
		f14_arg0.InstructionAlternateKbm:SetAlpha( 0 )
		f14_arg0.PromptAlternateKbm:SetAlpha( 0 )
		f14_arg0.Instruction:SetAlpha( 0 )
		f14_arg0.Prompt:SetAlpha( 0 )
	elseif f14_arg1 then
		if f14_arg0.useAlternateKbmLayout then
			f14_arg0.InstructionAlternateKbm:SetAlpha( 1 )
			f14_arg0.PromptAlternateKbm:SetAlpha( 1 )
			f14_arg0.Instruction:SetAlpha( 0 )
			f14_arg0.Prompt:SetAlpha( 0 )
		else
			f14_arg0.InstructionAlternateKbm:SetAlpha( 0 )
			f14_arg0.PromptAlternateKbm:SetAlpha( 0 )
			f14_arg0.Instruction:SetAlpha( 1 )
			f14_arg0.Prompt:SetAlpha( 1 )
		end
	else
		f14_arg0.InstructionAlternateKbm:SetAlpha( 0 )
		f14_arg0.PromptAlternateKbm:SetAlpha( 0 )
		f14_arg0.Instruction:SetAlpha( 0 )
		f14_arg0.Prompt:SetAlpha( 0 )
	end
	f14_arg0.isVisible = f14_arg1
end

local f0_local6 = function ( f13_arg0 )
	local f13_local0 = f13_arg0.Prompt:GetCurrentAnchorsAndPositions()
	local f13_local1 = f13_arg0.Instruction:GetCurrentAnchorsAndPositions()
	local f13_local2 = f13_local1.right - f13_local1.left
	local f13_local3 = f13_arg0.Prompt.KBMButtonPrompt:GetCurrentAnchorsAndPositions()
	local f13_local4 = f13_local3.right - f13_local3.left
	local f13_local5 = f13_local0.right - f13_local0.left
	if not CONDITIONS.IsGamepadEnabled( f13_arg0 ) then
		f13_local2 = 300
		local f13_local6 = f13_arg0.Instruction:getHorizontalAlignment() == LUI.Alignment.Right
		local f13_local7 = f13_arg0.Prompt.KBMButtonPrompt
		local f13_local8 = f13_local7
		f13_local7 = f13_local7.SetAnchorsAndPosition
		local f13_local9
		if f13_local6 then
			f13_local9 = 1
		else
			f13_local9 = 0
		end
		local f13_local10
		if f13_local6 then
			f13_local10 = 0
		else
			f13_local10 = 1
		end
		local f13_local11 = f13_local3.topAnchor
		local f13_local12 = f13_local3.bottomAnchor
		local f13_local13
		if f13_local6 then
			f13_local13 = -f13_local4
			if not f13_local13 then
			
			else
				local f13_local14
				if f13_local6 then
					f13_local14 = 0
				else
					f13_local14 = f13_local4
				end
				f13_local7( f13_local8, f13_local9, f13_local10, f13_local11, f13_local12, f13_local13, f13_local14, f13_local3.top, f13_local3.bottom )
				f13_local7 = f13_arg0.Prompt
				f13_local8 = f13_local7
				f13_local7 = f13_local7.SetAnchorsAndPosition
				if f13_local6 then
					f13_local9 = 1
				else
					f13_local9 = 0
				end
				if f13_local6 then
					f13_local10 = 0
				else
					f13_local10 = 1
				end
				f13_local11 = f13_local0.topAnchor
				f13_local12 = f13_local0.bottomAnchor
				if f13_local6 then
					f13_local13 = -f13_local5
					if not f13_local13 then
					
					else
						if f13_local6 then
							f13_local14 = 0
						else
							f13_local14 = f13_local5
						end
						f13_local7( f13_local8, f13_local9, f13_local10, f13_local11, f13_local12, f13_local13, f13_local14, f13_local0.top, f13_local0.bottom )
						f13_local7 = f13_arg0.Instruction
						f13_local8 = f13_local7
						f13_local7 = f13_local7.SetAnchorsAndPosition
						if f13_local6 then
							f13_local9 = 1
						else
							f13_local9 = 0
						end
						if f13_local6 then
							f13_local10 = 0
						else
							f13_local10 = 1
						end
						f13_local11 = f13_local1.topAnchor
						f13_local12 = f13_local1.bottomAnchor
						if f13_local6 then
							f13_local13 = -f13_local4 - f13_arg0.padding - f13_local2
							if not f13_local13 then
							
							else
								if f13_local6 then
									f13_local14 = -f13_local4 - f13_arg0.padding
									if not f13_local14 then
									
									else
										f13_local7( f13_local8, f13_local9, f13_local10, f13_local11, f13_local12, f13_local13, f13_local14, f13_local1.top, f13_local1.bottom )
									end
								end
								f13_local14 = f13_local4 + f13_arg0.padding + f13_local2
							end
						end
						f13_local13 = f13_local4 + f13_arg0.padding
					end
				end
				f13_local13 = 0
			end
		end
		f13_local13 = 0
	elseif CONDITIONS.IsGamepadEnabled( f13_arg0 ) and not f13_arg0.Prompt.ActionIcon:getHorizontalAlignment() == LUI.Alignment.Right then
		local f13_local6 = f13_arg0.Prompt.ActionIcon:GetCurrentAnchorsAndPositions()
		local f13_local7 = (f13_local0.left + f13_local0.right) / 2
		f13_arg0.Instruction:SetAnchorsAndPosition( f13_local1.leftAnchor, f13_local1.rightAnchor, f13_local1.topAnchor, f13_local1.bottomAnchor, f13_local7 + f13_local6.right + f13_arg0.padding, f13_local7 + f13_local6.right + f13_arg0.padding + f13_local2, f13_local1.top, f13_local1.bottom )
	end
end

local f0_local7 = function ( f12_arg0, f12_arg1, f12_arg2 )
	assert( f12_arg0.Instruction )
	assert( f12_arg0.Prompt )
	assert( f12_arg0.InstructionAlternateKbm )
	assert( f12_arg0.PromptAlternateKbm )
	if f12_arg1 then
		f12_arg0.Instruction:setText( f12_arg1 )
		f12_arg0.InstructionAlternateKbm:setText( f12_arg1 )
	end
	if f12_arg2 then
		f12_arg0.Prompt:SetText( f12_arg2 )
		f12_arg0.PromptAlternateKbm:SetText( f12_arg2 )
	end
	f12_arg0:UpdateInstructionPosition()
	local f12_local0
	if not CONDITIONS.IsGamepadEnabled( f12_arg0 ) then
		f12_local0 = f12_arg0.alternateKbmLayout
	else
		f12_local0 = false
	end
	f12_arg0.useAlternateKbmLayout = f12_local0
	f0_local0( f12_arg0, true )
end

local f0_local8 = function ( f11_arg0, f11_arg1 )
	assert( f11_arg0.Instruction )
	assert( f11_arg0.InstructionAlternateKbm )
	if f11_arg1 then
		f11_arg0.Instruction:setText( f11_arg1 )
		f11_arg0.InstructionAlternateKbm:setText( f11_arg1 )
	end
	f11_arg0:UpdateInstructionPosition()
end

local f0_local9 = function ( f10_arg0, f10_arg1, f10_arg2 )
	f10_arg0:UpdateInstruction( f10_arg1, f10_arg2 )
	local f10_local0 = f10_arg0.Prompt.ActionIcon:GetCurrentAnchorsAndPositions()
	f10_arg0.Prompt.ActionIcon:SetAlignment( LUI.Alignment.Right )
	f10_arg0.Prompt.ActionIcon:SetAnchorsAndPosition( 1, 0, f10_local0.topAnchor, f10_local0.bottomAnchor, f10_local0.left - f10_local0.right, 0, f10_local0.top, f10_local0.bottom )
	f10_arg0.FitMultiplePromptsInLabel( f10_arg0.Prompt.ActionIcon )
	f10_arg0.Prompt.Shadow:SetAlpha( 0 )
end

local f0_local10 = function ( f9_arg0 )
	assert( f9_arg0 )
	local f9_local0 = 25
	local f9_local1 = 7
	local f9_local2 = f9_arg0:GetCurrentAnchorsAndPositions()
	local f9_local3 = math.max( LAYOUT.GetTextWidth( f9_arg0 ) + f9_local1, f9_local0 ) - math.abs( f9_local2.right - f9_local2.left )
	f9_arg0:SetAnchorsAndPosition( f9_local2.leftAnchor, f9_local2.rightAnchor, f9_local2.topAnchor, f9_local2.bottomAnchor, f9_local2.left - f9_local3 * f9_local2.leftAnchor, f9_local2.right + f9_local3 * f9_local2.rightAnchor, f9_local2.top, f9_local2.bottom, 0.1 )
end

local f0_local11 = function ( f7_arg0, f7_arg1, f7_arg2 )
	f7_arg0.UpdateInstruction = f0_local0
	f7_arg0.UpdateInstructionWithMultiplePrompts = f0_local0
	f7_arg0.SetProgress = f0_local0
	f7_arg0.SetButtonPromptToHold = f0_local0
	f7_arg0.SetButtonPromptToPress = f0_local0
	f7_arg0.SetVisibilityPrompt = f0_local0
	f7_arg0.FitMultiplePromptsInLabel = f0_local0
	f7_arg0.UpdateInstructionPosition = f0_local0
	f7_arg0.UpdateInstructionText = f0_local0
	f7_arg0.SetVehicleRef = f0_local0
	f7_arg0.GetVehicleRef = f0_local0
	f7_arg0.isVisible = true
	f7_arg0.padding = 5
	f7_arg0.alternateKbmLayout = false
	f7_arg0.useAlternateKbmLayout = false
	f7_arg0.Prompt.KBMButtonPrompt.KeyString.onDirectiveInvalidated = function ( f8_arg0 )
		f7_arg0.Prompt.KBMButtonPrompt:DirectiveInvalidated( f8_arg0 )
		if f7_arg0.isVisible then
			f7_arg0:UpdateInstructionPosition()
		end
	end
	
	if not f7_arg0._controllerIndex then
		f7_arg0._controllerIndex = f7_arg1
	end
	if IsLanguageChinese() or IsLanguageJapanese() then
		ACTIONS.AnimateSequence( f7_arg0, "ZHJP" )
	elseif IsLanguageKorean() then
		ACTIONS.AnimateSequence( f7_arg0, "KOR" )
	end
end

function HUDPromptWithLabel( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 200 * _1080p, 0, 24 * _1080p )
	self.id = "HUDPromptWithLabel"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local Prompt = nil
	
	Prompt = MenuBuilder.BuildRegisteredType( "HUDPrompt", {
		controllerIndex = f1_local1
	} )
	Prompt.id = "Prompt"
	Prompt.ActionIcon:setText( StripColorMarkers( MarkLocalized( "[F]" ) ), 0 )
	Prompt.KBMButtonPrompt.KeyString:setText( StripColorMarkers( MarkLocalized( "[F]" ) ), 0 )
	Prompt:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -27, _1080p * -3, _1080p * -12, _1080p * 12 )
	self:addElement( Prompt )
	self.Prompt = Prompt
	
	local Instruction = nil
	
	Instruction = LUI.UIStyledText.new()
	Instruction.id = "Instruction"
	Instruction:SetRGBFromTable( SWATCHES.HUD.HUDMain, 0 )
	Instruction:setText( "", 0 )
	Instruction:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	Instruction:SetWordWrap( false )
	Instruction:SetAlignment( LUI.Alignment.Left )
	Instruction:SetShadowMinDistance( -0.2, 0 )
	Instruction:SetShadowMaxDistance( 0.2, 0 )
	Instruction:SetShadowUOffset( -0.002, 0 )
	Instruction:SetShadowVOffset( -0.002, 0 )
	Instruction:SetShadowRGBFromTable( SWATCHES.HUD.HUDShadow, 0 )
	Instruction:SetAnchorsAndPosition( 0.5, 0.5, 0, 0, _1080p * 5, _1080p * 160, 0, 0 )
	self:addElement( Instruction )
	self.Instruction = Instruction
	
	local InstructionAlternateKbm = nil
	
	InstructionAlternateKbm = LUI.UIStyledText.new()
	InstructionAlternateKbm.id = "InstructionAlternateKbm"
	InstructionAlternateKbm:SetRGBFromTable( SWATCHES.HUD.HUDMain, 0 )
	InstructionAlternateKbm:setText( "", 0 )
	InstructionAlternateKbm:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	InstructionAlternateKbm:SetWordWrap( false )
	InstructionAlternateKbm:SetAlignment( LUI.Alignment.Center )
	InstructionAlternateKbm:SetShadowMinDistance( -0.2, 0 )
	InstructionAlternateKbm:SetShadowMaxDistance( 0.2, 0 )
	InstructionAlternateKbm:SetShadowUOffset( -0.002, 0 )
	InstructionAlternateKbm:SetShadowVOffset( -0.002, 0 )
	InstructionAlternateKbm:SetShadowRGBFromTable( SWATCHES.HUD.HUDShadow, 0 )
	InstructionAlternateKbm:SetAnchorsAndPosition( 0.5, 0.5, 0, 0, _1080p * -100, _1080p * 100, _1080p * 8, _1080p * 8 )
	self:addElement( InstructionAlternateKbm )
	self.InstructionAlternateKbm = InstructionAlternateKbm
	
	local PromptAlternateKbm = nil
	
	PromptAlternateKbm = MenuBuilder.BuildRegisteredType( "HUDPrompt", {
		controllerIndex = f1_local1
	} )
	PromptAlternateKbm.id = "PromptAlternateKbm"
	PromptAlternateKbm.ActionIcon:setText( StripColorMarkers( MarkLocalized( "[F]" ) ), 0 )
	PromptAlternateKbm.KBMButtonPrompt.KeyString:setText( StripColorMarkers( MarkLocalized( "[F]" ) ), 0 )
	PromptAlternateKbm:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -12, _1080p * 12, _1080p * -26, _1080p * -2 )
	self:addElement( PromptAlternateKbm )
	self.PromptAlternateKbm = PromptAlternateKbm
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	local f1_local7 = nil
	InstructionAlternateKbm:RegisterAnimationSequence( "ZHJP", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 12
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 8
		}
	} )
	self._sequences.ZHJP = function ()
		menu:AnimateSequence( "ZHJP" )
	end
	
	local f1_local8 = nil
	InstructionAlternateKbm:RegisterAnimationSequence( "KOR", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 10
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 10
		}
	} )
	self._sequences.KOR = function ()
		menu:AnimateSequence( "KOR" )
	end
	
	local f1_local9 = nil
	PromptAlternateKbm:RegisterAnimationSequence( "ProgressKBM", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -30
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * -6
		}
	} )
	self._sequences.ProgressKBM = function ()
		menu:AnimateSequence( "ProgressKBM" )
	end
	
	local f1_local10 = nil
	Instruction:RegisterAnimationSequence( "AR", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -15
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 140
		}
	} )
	InstructionAlternateKbm:RegisterAnimationSequence( "AR", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -115
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 85
		}
	} )
	self._sequences.AR = function ()
		menu:AnimateSequence( "AR" )
		menu:AnimateSequence( "AR" )
	end
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "HUDPromptWithLabel", HUDPromptWithLabel )
LockTable( _M )
