-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
BASE_PURCHASE_MENU = BASE_PURCHASE_MENU or {}
BASE_PURCHASE_MENU.OPEN_MENU_VALUE = {
	EQUIPMENT = 3,
	REDEPLOY = 8,
	REGULAR = 1,
	LOADOUTS = 7,
	PERKS = 4,
	KILLSTREAKS = 5,
	RESET = 0,
	VEHICLES = 6,
	WEAPONS = 2
}
BASE_PURCHASE_MENU.PURCHASE_RESPONSE_VALUE = {
	ALREADY_RESPAWNING = 14,
	NO_TOKEN = 11,
	DUPE_FU = 5,
	FU_IN_USE = 6,
	NO_MORE_RESPAWN = 9,
	SUCCESS = 1,
	LOC_SEL = 16,
	NO_RES_TARGET = 12,
	EQUIP_NO_ROOM = 7,
	FORCE_EXIT = 2,
	ALREADY_RESPAWNED = 15,
	AMMO_NO_ROOM = 8,
	BAD_RES_TARGET = 13,
	RESET = 0,
	NO_MONEY = 3,
	DUPE_KS = 4,
	DUPE_TOKEN = 10
}
BASE_PURCHASE_MENU.GULAG_CLOSED_VAL = 0
BASE_PURCHASE_MENU.PURCHASE_RESPONSE_DATA = {
	[BASE_PURCHASE_MENU.PURCHASE_RESPONSE_VALUE.RESET] = {},
	[BASE_PURCHASE_MENU.PURCHASE_RESPONSE_VALUE.SUCCESS] = {},
	[BASE_PURCHASE_MENU.PURCHASE_RESPONSE_VALUE.FORCE_EXIT] = {},
	[BASE_PURCHASE_MENU.PURCHASE_RESPONSE_VALUE.NO_MONEY] = {
		errorString = "MP_BR_INGAME/PLUNDER_BOX_ERROR_NO_MONEY"
	},
	[BASE_PURCHASE_MENU.PURCHASE_RESPONSE_VALUE.DUPE_KS] = {
		errorString = "MP_BR_INGAME/PLUNDER_BOX_ERROR_DUPE_KS"
	},
	[BASE_PURCHASE_MENU.PURCHASE_RESPONSE_VALUE.DUPE_FU] = {
		errorString = "MP_BR_INGAME/PLUNDER_BOX_ERROR_DUPE_FU"
	},
	[BASE_PURCHASE_MENU.PURCHASE_RESPONSE_VALUE.FU_IN_USE] = {
		errorString = "MP_BR_INGAME/PLUNDER_BOX_ERROR_FU_IN_USE"
	},
	[BASE_PURCHASE_MENU.PURCHASE_RESPONSE_VALUE.EQUIP_NO_ROOM] = {
		errorString = "MP_BR_INGAME/PLUNDER_BOX_ERROR_EQUIP_NO_ROOM"
	},
	[BASE_PURCHASE_MENU.PURCHASE_RESPONSE_VALUE.AMMO_NO_ROOM] = {
		errorString = "MP_BR_INGAME/PLUNDER_BOX_ERROR_AMMO_NO_ROOM"
	},
	[BASE_PURCHASE_MENU.PURCHASE_RESPONSE_VALUE.NO_MORE_RESPAWN] = {
		errorString = "MP_BR_INGAME/PLUNDER_BOX_ERROR_NO_MORE_RESPAWN"
	},
	[BASE_PURCHASE_MENU.PURCHASE_RESPONSE_VALUE.DUPE_TOKEN] = {
		errorString = "MP_BR_INGAME/PLUNDER_BOX_ERROR_DUPE_TOKEN"
	},
	[BASE_PURCHASE_MENU.PURCHASE_RESPONSE_VALUE.NO_TOKEN] = {
		errorString = "MP_BR_INGAME/PLUNDER_BOX_ERROR_NO_TOKEN"
	},
	[BASE_PURCHASE_MENU.PURCHASE_RESPONSE_VALUE.NO_RES_TARGET] = {
		errorString = "MP_BR_INGAME/PLUNDER_BOX_ERROR_NO_REZ_TARGET"
	},
	[BASE_PURCHASE_MENU.PURCHASE_RESPONSE_VALUE.BAD_RES_TARGET] = {
		errorString = "MP_BR_INGAME/PLUNDER_BOX_ERROR_BAD_REZ_TARGET"
	},
	[BASE_PURCHASE_MENU.PURCHASE_RESPONSE_VALUE.ALREADY_RESPAWNING] = {
		errorString = "MP_BR_INGAME/PLUNDER_BOX_ERROR_ALREADY_RESPAWNING"
	},
	[BASE_PURCHASE_MENU.PURCHASE_RESPONSE_VALUE.ALREADY_RESPAWNED] = {
		errorString = "MP_BR_INGAME/PLUNDER_BOX_ERROR_ALREADY_RESPAWNED"
	},
	[BASE_PURCHASE_MENU.PURCHASE_RESPONSE_VALUE.LOC_SEL] = {}
}
BASE_PURCHASE_MENU.sounds = {
	MENU_CLOSE = "ui_buy_crate_close_window",
	MENU_OPEN = "ui_buy_crate_open_window",
	PURCHASE_DENY = "ui_select_purchase_deny",
	PURCHASE_CONFIRM = "ui_select_purchase_confirm"
}
BASE_PURCHASE_MENU.itemTypes = {
	EQUIPMENT = "equipment",
	KILLSTREAK = "killstreak",
	SPECIAL = "special",
	LOADOUTS = "loadouts",
	PERK = "perk",
	FIELD_UPGRADE = "fieldupgrade",
	TOKEN = "respawn_token",
	WEAPON = "weapon",
	REVIVE = "teamrevive",
	VEHICLE = "vehicle"
}
BASE_PURCHASE_MENU.DEFAULT_TRANSLATED_DATA_TABLE = {
	file = nil,
	cols = CSV.brKioskPurchases.cols,
	ref = CSV.brKioskPurchases.cols.ref,
	name = CSV.brKioskPurchases.cols.title,
	desc = CSV.brKioskPurchases.cols.desc,
	icon = CSV.brKioskPurchases.cols.icon
}
BASE_PURCHASE_MENU.itemData = {
	[BASE_PURCHASE_MENU.itemTypes.KILLSTREAK] = {
		purchaseNotify = "base_item_purchase",
		translatedDataTable = {
			file = CSV.streaks.file,
			cols = CSV.streaks.cols,
			ref = CSV.streaks.cols.ref,
			name = CSV.streaks.cols.name,
			desc = CSV.streaks.cols.desc,
			icon = CSV.streaks.cols.icon
		}
	},
	[BASE_PURCHASE_MENU.itemTypes.FIELD_UPGRADE] = {
		purchaseNotify = "base_item_purchase",
		translatedDataTable = {
			file = CSV.supers.file,
			cols = CSV.supers.cols,
			ref = CSV.supers.cols.ref,
			name = CSV.supers.cols.uiName,
			desc = CSV.supers.cols.uiDesc,
			icon = CSV.supers.cols.uiImageSmall
		}
	},
	[BASE_PURCHASE_MENU.itemTypes.SPECIAL] = {
		purchaseNotify = "base_item_purchase",
		translatedDataTable = BASE_PURCHASE_MENU.DEFAULT_TRANSLATED_DATA_TABLE
	},
	[BASE_PURCHASE_MENU.itemTypes.REVIVE] = {
		purchaseNotify = "base_team_revive",
		translatedDataTable = BASE_PURCHASE_MENU.DEFAULT_TRANSLATED_DATA_TABLE
	},
	[BASE_PURCHASE_MENU.itemTypes.VEHICLE] = {
		purchaseNotify = "base_item_purchase",
		translatedDataTable = {
			file = CSV.vehicles.file,
			cols = CSV.vehicles.cols,
			ref = CSV.vehicles.cols.scrRef,
			name = CSV.vehicles.cols.name,
			desc = CSV.vehicles.cols.desc,
			icon = CSV.vehicles.cols.image
		}
	},
	[BASE_PURCHASE_MENU.itemTypes.WEAPON] = {
		purchaseNotify = "base_item_purchase",
		translatedDataTable = {
			file = CSV.MPWeapons.file,
			cols = CSV.MPWeapons.cols,
			ref = CSV.MPWeapons.cols.asset,
			name = CSV.MPWeapons.cols.name,
			desc = CSV.MPWeapons.cols.desc,
			icon = CSV.MPWeapons.cols.image
		}
	},
	[BASE_PURCHASE_MENU.itemTypes.PERK] = {
		purchaseNotify = "base_item_purchase",
		translatedDataTable = {
			file = CSV.perks.file,
			cols = CSV.perks.cols,
			ref = CSV.perks.cols.ref,
			name = CSV.perks.cols.name,
			desc = CSV.perks.cols.desc,
			icon = CSV.perks.cols.image
		}
	},
	[BASE_PURCHASE_MENU.itemTypes.EQUIPMENT] = {
		purchaseNotify = "base_item_purchase",
		translatedDataTable = {
			file = CSV.MPEquipment.file,
			cols = CSV.MPEquipment.cols,
			ref = CSV.MPEquipment.cols.ref,
			name = CSV.MPEquipment.cols.nameRef,
			desc = CSV.MPEquipment.cols.desc,
			icon = CSV.MPEquipment.cols.image
		}
	},
	[BASE_PURCHASE_MENU.itemTypes.LOADOUTS] = {
		purchaseNotify = "loadout_purchase",
		translatedDataTable = {}
	}
}
BASE_PURCHASE_MENU.SUBTYPE_LABELS = {
	[BASE_PURCHASE_MENU.OPEN_MENU_VALUE.WEAPONS] = Engine[0xED84C33EC5F01EA]( "MP/BASE_KIOSK_WEAPONS" ),
	[BASE_PURCHASE_MENU.OPEN_MENU_VALUE.KILLSTREAKS] = Engine[0xED84C33EC5F01EA]( "MP/BASE_KIOSK_SUPPORT" ),
	[BASE_PURCHASE_MENU.OPEN_MENU_VALUE.EQUIPMENT] = Engine[0xED84C33EC5F01EA]( "MP/BASE_KIOSK_EQUIPMENT" ),
	[BASE_PURCHASE_MENU.OPEN_MENU_VALUE.PERKS] = Engine[0xED84C33EC5F01EA]( "MP/BASE_KIOSK_PERKS" ),
	[BASE_PURCHASE_MENU.OPEN_MENU_VALUE.VEHICLES] = Engine[0xED84C33EC5F01EA]( "MP/BASE_KIOSK_VEHICLES" ),
	[BASE_PURCHASE_MENU.OPEN_MENU_VALUE.LOADOUTS] = Engine[0xED84C33EC5F01EA]( "MP/BASE_KIOSK_LOADOUTS" ),
	[BASE_PURCHASE_MENU.OPEN_MENU_VALUE.REDEPLOY] = Engine[0xED84C33EC5F01EA]( "MP/BASE_KIOSK_REDEPLOY" )
}
BASE_PURCHASE_MENU.DEFAULT_KIOSK_ITEMS_FILENAME = "mp/s4baseKioskPurchases.csv"
local f0_local0 = function ( f24_arg0, f24_arg1 )
	if f24_arg0 then
		for f24_local3, f24_local4 in pairs( f24_arg0 ) do
			if f24_local4 == f24_arg1 then
				return true
			end
		end
	end
	return false
end

local f0_local1 = function ( f23_arg0, f23_arg1 )
	if not f23_arg0.desc or f23_arg0.desc == "" then
		f23_arg0.desc = StringTable[0x2DCF0973239E909]( BASE_PURCHASE_MENU.DEFAULT_TRANSLATED_DATA_TABLE.file, BASE_PURCHASE_MENU.DEFAULT_TRANSLATED_DATA_TABLE.ref, f23_arg0.ref, BASE_PURCHASE_MENU.DEFAULT_TRANSLATED_DATA_TABLE.desc )
		DebugPrint( "ERROR - BASE_PURCHASE_MENU.GetTabItemsForTabNum - Item " .. f23_arg0.ref .. " missing description from " .. f23_arg1 .. ". Using BASE_PURCHASE_MENU.DEFAULT_TRANSLATED_DATA_TABLE." )
	end
	if not f23_arg0.name or f23_arg0.name == "" then
		f23_arg0.name = StringTable[0x2DCF0973239E909]( BASE_PURCHASE_MENU.DEFAULT_TRANSLATED_DATA_TABLE.file, BASE_PURCHASE_MENU.DEFAULT_TRANSLATED_DATA_TABLE.ref, f23_arg0.ref, BASE_PURCHASE_MENU.DEFAULT_TRANSLATED_DATA_TABLE.name )
		DebugPrint( "ERROR - BASE_PURCHASE_MENU.GetTabItemsForTabNum - Item " .. f23_arg0.ref .. " missing name from " .. f23_arg1 .. ". Using BASE_PURCHASE_MENU.DEFAULT_TRANSLATED_DATA_TABLE." )
	end
	if not f23_arg0.icon or f23_arg0.icon == "" then
		f23_arg0.icon = StringTable[0x2DCF0973239E909]( BASE_PURCHASE_MENU.DEFAULT_TRANSLATED_DATA_TABLE.file, BASE_PURCHASE_MENU.DEFAULT_TRANSLATED_DATA_TABLE.ref, f23_arg0.ref, BASE_PURCHASE_MENU.DEFAULT_TRANSLATED_DATA_TABLE.icon )
		DebugPrint( "ERROR - BASE_PURCHASE_MENU.GetTabItemsForTabNum - Item " .. f23_arg0.ref .. " missing icon from " .. f23_arg1 .. ". Using BASE_PURCHASE_MENU.DEFAULT_TRANSLATED_DATA_TABLE." )
	end
end

BASE_PURCHASE_MENU.InitKioskDvarData = function ( f22_arg0 )
	BASE_PURCHASE_MENU.currentWeaponSet = Game[0x28624DEF6F708C8]( f22_arg0, "ui_arena_evo_loadout_select" ) or 1
	BASE_PURCHASE_MENU.weaponSetRefs = MP.ParseCommaStringDvar( Engine[0xE95D388486C8013]( "#x351135a76ec19122f", BASE_PURCHASE_MENU.currentWeaponSet ) )
	BASE_PURCHASE_MENU.disabledItemRefs = MP.ParseCommaStringDvar( "#x33488facb6817e5fa" )
	BASE_PURCHASE_MENU.removeItemRefs = MP.ParseCommaStringDvar( "#x3f77a7b9be5281b50" )
	local f22_local0 = Dvar[0x54084D7CA2317BB]( "#x365c055cc86f97665" )
	local f22_local1
	if f22_local0 then
		f22_local1 = f22_local0
	else
		f22_local1 = f22_local0 ~= ""
	end
	local f22_local2 = CSV.brKioskPurchases
	local f22_local3
	if not f22_local1 then
		f22_local3 = BASE_PURCHASE_MENU.DEFAULT_KIOSK_ITEMS_FILENAME
		if not f22_local3 then
		
		else
			f22_local2.file = f22_local3
			BASE_PURCHASE_MENU.DEFAULT_TRANSLATED_DATA_TABLE.file = CSV.brKioskPurchases.file
		end
	end
	f22_local3 = f22_local0
end

BASE_PURCHASE_MENU.CheckKioskWeaponSet = function ( f21_arg0 )
	local f21_local0 = Game[0x28624DEF6F708C8]( f21_arg0, "ui_arena_evo_loadout_select" ) or 1
	if f21_local0 ~= BASE_PURCHASE_MENU.currentWeaponSet then
		BASE_PURCHASE_MENU.currentWeaponSet = f21_local0
		BASE_PURCHASE_MENU.weaponSetRefs = MP.ParseCommaStringDvar( Engine[0xE95D388486C8013]( "#x351135a76ec19122f", BASE_PURCHASE_MENU.currentWeaponSet ) )
	end
end

BASE_PURCHASE_MENU.GetKioskSubType = function ( f20_arg0 )
	return BASE_PURCHASE_MENU.SUBTYPE_LABELS[f20_arg0]
end

BASE_PURCHASE_MENU.GetItemFromIndex = function ( f19_arg0 )
	local f19_local0 = CSV.brKioskPurchases
	local f19_local1 = -1
	local f19_local2, f19_local3 = nil
	if CONDITIONS.IsArenaEvoGameType() then
		local f19_local4 = StringTable[0x8073B436CDE1BF]( f19_local0.file, CSV.brKioskPurchases.cols.index, f19_arg0 )
		if f19_local4 and 0 <= f19_local4 then
			local f19_local5 = CSV.ReadRow( f19_local0, f19_local4 )
			if f19_local5 then
				local f19_local6 = f19_local5.type
				if not f19_local6 then
					f19_local2 = f19_local6
				else
					f19_local2 = BASE_PURCHASE_MENU.itemTypes.WEAPON
				end
				if BASE_PURCHASE_MENU.itemData[f19_local2] then
					f19_local6 = BASE_PURCHASE_MENU.itemData[f19_local2].translatedDataTable
					if not f19_local6 then
						f19_local0 = f19_local6
					end
				end
				f19_local0 = nil
			end
			if not f19_local1 or f19_local1 < 0 then
				f19_local0 = CSV.brKioskPurchases
				f19_local1 = f19_local4
				f19_local3 = f19_local5
			end
		end
	else
		f19_local1 = StringTable[0x8073B436CDE1BF]( f19_local0.file, CSV.brKioskPurchases.cols.index, f19_arg0 )
	end
	if f19_local1 and 0 <= f19_local1 then
		local f19_local4
		if not f19_local3 then
			f19_local4 = f19_local3
		else
			f19_local4 = CSV.ReadRow( f19_local0, f19_local1 )
		end
		if CONDITIONS.IsArenaEvoGameType() and f19_local0 ~= CSV.brKioskPurchases then
			if not f19_local4.type then
				f19_local4.type = f19_local2
			end
			if not f19_local4.title then
				local f19_local5 = f19_local4.name
				if not f19_local5 then
					f19_local5 = f19_local4.nameRef
				end
				f19_local4.title = f19_local5
			end
			if not f19_local4.icon then
				f19_local4.icon = f19_local4.image
			end
		end
		f0_local0( f19_local4, f19_local0.file )
		return f19_local4
	else
		
	end
end

BASE_PURCHASE_MENU.PurchaseMenuOpen = function ( f18_arg0 )
	return Game[0x28624DEF6F708C8]( f18_arg0, "ui_base_open_purchase_menu" ) ~= BASE_PURCHASE_MENU.OPEN_MENU_VALUE.RESET
end

local f0_local2 = function ( f17_arg0 )
	local f17_local0 = Game[0x7F3101B17A29E1A]( f17_arg0 )
	local f17_local1 = nil
	if f17_local0.primaryWeaponRef then
		f17_local1 = f17_local0.primaryWeaponRef
	end
	local f17_local2 = nil
	if f17_local0.secondaryWeaponRef then
		f17_local2 = f17_local0.secondaryWeaponRef
	end
	return f17_local1, f17_local2
end

local f0_local3 = function ( f16_arg0, f16_arg1 )
	assert( CONDITIONS.IsArenaEvoGameType() )
	local f16_local0 = DataSources.inGame.player.perkListCount:GetValue( f16_arg0 )
	for f16_local1 = 1, f16_local0, 1 do
		local f16_local4 = DataSources.inGame.player.perkList:GetDataSourceAtIndex( f16_local1 - 1, f16_arg0 )
		if f16_arg1 == f16_local4.ref:GetValue( f16_arg0 ) then
			return false, Engine[0xED84C33EC5F01EA]( "MP_BR_INGAME/WEAPON_EQUIPPED" )
		end
	end
	if 6 <= f16_local0 then
		return false, Engine[0xED84C33EC5F01EA]( "MP_BR_INGAME/MAX_PERKS" )
	end
	return true
end

local f0_local4 = function ( f15_arg0, f15_arg1 )
	assert( CONDITIONS.IsArmsRaceGameType() )
	local f15_local0 = DataSources.inGame.player.perkListCount:GetValue( f15_arg0 )
	for f15_local1 = 1, f15_local0, 1 do
		local f15_local4 = DataSources.inGame.player.perkList:GetDataSourceAtIndex( f15_local1 - 1, f15_arg0 )
		local f15_local5 = f15_local4.ref:GetValue( f15_arg0 )
		if f15_arg1 == f15_local4.ref:GetValue( f15_arg0 ) then
			return false, Engine[0xED84C33EC5F01EA]( "MP_BR_INGAME/WEAPON_EQUIPPED" )
		end
	end
	if 6 <= f15_local0 then
		return false, Engine[0xED84C33EC5F01EA]( "MP_BR_INGAME/MAX_PERKS" )
	end
	return true
end

local f0_local5 = function ( f11_arg0, f11_arg1 )
	assert( CONDITIONS.IsArenaEvoGameType() )
	local f11_local0 = {
		nil,
		"s4_la_walpha2_mp",
		"flamethrower",
		"loadout",
		"lmg_streak"
	}
	local f11_local1 = function ( f14_arg0 )
		if f14_arg0 == "uav" then
			return 0
		elseif f14_arg0 == "s4_la_walpha2_mp" then
			return 1
		elseif f14_arg0 == "flamethrower" then
			return 2
		elseif f14_arg0 == "loadout" then
			return 3
		elseif f14_arg0 == "lmg_streak" then
			return 4
		else
			
		end
	end
	
	local f11_local2 = function ( f13_arg0 )
		return LUI.IsItemInArray( f11_arg0, f13_arg0 )
	end
	
	local f11_local3 = function ()
		for f12_local3, f12_local4 in ipairs( f11_arg0 ) do
			if Game[0x28624DEF6F708C8]( f11_arg0, "ui_arena_evo_active_killstreak", f11_arg0( f12_local4 ) ) == 1 then
				return f12_local4
			end
		end
	end
	
	local f11_local4 = f11_local1( f11_arg1 )
	local f11_local5
	if f11_arg1 ~= "uav" then
		if f11_local4 then
			f11_local5 = f11_local4
		elseif Game[0x28624DEF6F708C8]( f11_arg0, "ui_arena_evo_active_killstreak", f11_local4 ) ~= 1 then
			f11_local5 = false
		else
			f11_local5 = true
		end
	else
		f11_local5 = false
	end
	local f11_local6
	if f11_arg1 ~= "flamethrower" or Game[0x28624DEF6F708C8]( f11_arg0, "ui_arena_evo_killstreak_max_flamethrowers" ) ~= 1 then
		f11_local6 = false
	else
		f11_local6 = true
	end
	local f11_local7
	if f11_arg1 ~= "uav" or Game[0x28624DEF6F708C8]( f11_arg0, "ui_arena_evo_killstreak_max_uavs" ) ~= 1 then
		f11_local7 = false
	else
		f11_local7 = true
	end
	if f11_local6 then
		return false, Engine[0xED84C33EC5F01EA]( "LUA_MENU/NOT_AVAILABLE", name )
	elseif f11_local7 then
		return false, Engine[0xED84C33EC5F01EA]( "MP_BR_INGAME/PURCHASE_DENY_MAX_LIVES", name )
	elseif f11_local5 then
		return false, Engine[0xED84C33EC5F01EA]( "MP_BR_INGAME/WEAPON_EQUIPPED" )
	elseif f11_local2( f11_arg1 ) then
		local f11_local8 = f11_local3()
		if f11_local8 then
			local f11_local9 = CSV.brKioskPurchases
			return false, Engine[0xED84C33EC5F01EA]( "MP_BR_INGAME/KILLSTREAK_CONFLICT", StringTable[0x2DCF0973239E909]( f11_local9.file, f11_local9.cols.ref, f11_local8, f11_local9.cols.title ) )
		end
	end
	return true
end

local f0_local6 = function ( f7_arg0, f7_arg1 )
	assert( CONDITIONS.IsArmsRaceGameType() )
	local f7_local0 = {
		nil,
		"uav",
		"s4_la_walpha2_mp",
		"glide_bomb",
		"precision_airstrike",
		"white_phosphorus",
		"loadout"
	}
	local f7_local1 = function ( f10_arg0 )
		if f10_arg0 == "uav" then
			return 0
		elseif f10_arg0 == "s4_la_walpha2_mp" then
			return 1
		elseif f10_arg0 == "glide_bomb" then
			return 2
		elseif f10_arg0 == "precision_airstrike" then
			return 3
		elseif f10_arg0 == "white_phosphorus" then
			return 4
		elseif f10_arg0 == "loadout" then
			return 5
		else
			
		end
	end
	
	local f7_local2 = 0
	for f7_local6, f7_local7 in ipairs( f7_local0 ) do
		if Game[0x28624DEF6F708C8]( f7_arg0, "ui_arena_evo_active_killstreak", f7_local1( f7_local7 ) ) == 1 then
			f7_local2 = f7_local2 + 1
		end
	end
	f7_local3 = function ( f9_arg0 )
		return LUI.IsItemInArray( f7_arg0, f9_arg0 )
	end
	
	f7_local4 = function ()
		for f8_local3, f8_local4 in ipairs( f7_arg0 ) do
			if Game[0x28624DEF6F708C8]( f7_arg0, "ui_arena_evo_active_killstreak", f7_arg0( f8_local4 ) ) == 1 then
				return f8_local4
			end
		end
	end
	
	f7_local5 = f7_local1( f7_arg1 )
	if f7_local5 then
		f7_local6 = f7_local5
	else
		f7_local6 = Game[0x28624DEF6F708C8]( f7_arg0, "ui_arena_evo_active_killstreak", f7_local5 ) == 1
	end
	if f7_local6 then
		return false, Engine[0xED84C33EC5F01EA]( "MP_BR_INGAME/WEAPON_EQUIPPED" )
	elseif f7_local3( f7_arg1 ) and 1 <= f7_local2 then
		return false, Engine[0xED84C33EC5F01EA]( "MP_ARM/PURCHASE_DENY_MAX_KILLSTREAKS" )
	else
		return true
	end
end

local f0_local7 = function ( f6_arg0, f6_arg1 )
	assert( CONDITIONS.IsArmsRaceGameType() )
	if f6_arg1 ~= "motorcycle" then
		return true
	elseif Game[0x28624DEF6F708C8]( f6_arg0, "ui_motorcycle_summonable" ) then
		return true
	else
		return false, Engine[0xED84C33EC5F01EA]( "MP_ARM/MOTO_PURCHASE_DENY" )
	end
end

local f0_local8 = function ( f5_arg0, f5_arg1 )
	assert( CONDITIONS.IsArenaEvoGameType() )
	if f5_arg1 == DataSources.inGame.player.primaryEquipment.ref:GetValue( f5_arg0 ) or f5_arg1 == DataSources.inGame.player.secondaryEquipment.ref:GetValue( f5_arg0 ) then
		return false, Engine[0xED84C33EC5F01EA]( "MP_BR_INGAME/WEAPON_EQUIPPED" )
	else
		return true
	end
end

local f0_local9 = function ( f4_arg0, f4_arg1 )
	assert( CONDITIONS.IsArmsRaceGameType() )
	if f4_arg1 == DataSources.inGame.player.primaryEquipment.ref:GetValue( f4_arg0 ) or f4_arg1 == DataSources.inGame.player.secondaryEquipment.ref:GetValue( f4_arg0 ) or f4_arg1 == DataSources.inGame.player.super.superMeterRef:GetValue( f4_arg0 ) and 1 <= DataSources.inGame.player.super.superMeterProgress:GetValue( f4_arg0 ) then
		return false, Engine[0xED84C33EC5F01EA]( "MP_BR_INGAME/WEAPON_EQUIPPED" )
	else
		return true
	end
end

local f0_local10 = function ( f3_arg0, f3_arg1, f3_arg2 )
	assert( CONDITIONS.IsArmsRaceGameType() )
	local f3_local0 = Game[0x28624DEF6F708C8]( f3_arg0, "ui_base_equipped_loadout" ) or -1
	if 0 <= f3_local0 and f3_local0 == f3_arg1 then
		return false, Engine[0xED84C33EC5F01EA]( "MP_BR_INGAME/WEAPON_EQUIPPED" )
	elseif 0 and Engine[0x77DA0DE401A96D0]( f3_arg2, f3_arg1 ) or false then
		return true, Engine[0xED84C33EC5F01EA]( "MP_BR_INGAME/FREE" )
	else
		return true
	end
end

BASE_PURCHASE_MENU.GetTabItemsForTabNum = function ( f1_arg0, f1_arg1, f1_arg2 )
	local f1_local0 = {}
	local f1_local1 = CSV.brKioskPurchases
	local f1_local2 = StringTable[0xFD4E49A34DD43AE]( f1_local1.file )
	local f1_local3 = Game[0x28624DEF6F708C8]( f1_arg0, "ui_base_current_cash" )
	local f1_local4, f1_local5 = nil
	if CONDITIONS.IsArenaEvoGameType() or CONDITIONS.IsArmsRaceGameType() then
		f1_local4, f1_local5 = f0_local0( f1_arg0 )
	end
	for f1_local6 = 0, f1_local2 - 1, 1 do
		local f1_local9 = CSV.ReadRow( f1_local1, f1_local6 )
		local f1_local10 = f1_local9.type
		local f1_local11 = f1_local9.tabNum
		local f1_local12
		if f1_local11 then
			f1_local12 = f1_local11
		elseif f1_local11 == "" or tonumber( f1_local11 ) ~= f1_arg1 then
			f1_local12 = false
		else
			f1_local12 = true
		end
		local f1_local13 = f1_local12
		if f1_arg2 == BASE_PURCHASE_MENU.OPEN_MENU_VALUE.WEAPONS then
			if f1_local13 then
				f1_local13 = f1_local10 == BASE_PURCHASE_MENU.itemTypes.WEAPON
			end
		elseif f1_arg2 == BASE_PURCHASE_MENU.OPEN_MENU_VALUE.KILLSTREAKS then
			if f1_local13 then
				if f1_local10 ~= BASE_PURCHASE_MENU.itemTypes.KILLSTREAK and f1_local10 ~= BASE_PURCHASE_MENU.itemTypes.SPECIAL then
					f1_local13 = false
				else
					f1_local13 = true
				end
			end
		elseif f1_arg2 == BASE_PURCHASE_MENU.OPEN_MENU_VALUE.EQUIPMENT then
			if f1_local13 then
				f1_local13 = f1_local10 == BASE_PURCHASE_MENU.itemTypes.EQUIPMENT
			end
		elseif f1_arg2 == BASE_PURCHASE_MENU.OPEN_MENU_VALUE.PERKS then
			if f1_local13 then
				f1_local13 = f1_local10 == BASE_PURCHASE_MENU.itemTypes.PERK
			end
		elseif f1_arg2 == BASE_PURCHASE_MENU.OPEN_MENU_VALUE.VEHICLES then
			if f1_local13 then
				f1_local13 = f1_local10 == BASE_PURCHASE_MENU.itemTypes.VEHICLE
			end
		elseif f1_arg2 == BASE_PURCHASE_MENU.OPEN_MENU_VALUE.LOADOUTS then
			if f1_local13 then
				f1_local13 = f1_local10 == BASE_PURCHASE_MENU.itemTypes.LOADOUTS
			end
		elseif f1_arg2 == BASE_PURCHASE_MENU.OPEN_MENU_VALUE.REDEPLOY and f1_local13 then
			f1_local13 = f1_local10 == BASE_PURCHASE_MENU.itemTypes.REDEPLOY
		end
		if f1_local13 then
			local f1_local14 = {
				controllerIndex = f1_arg0,
				itemType = f1_local10,
				index = f1_local9.index,
				ref = f1_local9.ref,
				slotLabel = f1_local9.slotLabel,
				baseCost = tonumber( f1_local9.cost ) or 0,
				cost = f1_local14.baseCost
			}
			local f1_local15
			if 0 < f1_local14.cost then
				f1_local15 = f1_local14.cost
				if not f1_local15 then
				
				else
					f1_local14.displayCost = f1_local15
					f1_local14.canAfford = f1_local14.cost <= f1_local3
					f1_local14.purchaseAllowed = not f0_local0( BASE_PURCHASE_MENU.disabledItemRefs, f1_local14.ref )
					if CONDITIONS.IsArenaEvoGameType() and f1_local14.itemType == BASE_PURCHASE_MENU.itemTypes.WEAPON then
						f1_local15 = Game[0x28624DEF6F708C8]( f1_arg0, "ui_arena_weapon_rank_" .. WEAPON.GetBaseRef( f1_local14.ref ) )
						if f1_local15 and 0 <= f1_local15 then
							f1_local14.cost = 0
							f1_local14.displayCost = Engine[0xED84C33EC5F01EA]( "MP_BR_INGAME/FREE" )
							f1_local14.canAfford = f1_local14.cost <= f1_local3
						end
					end
					if CONDITIONS.IsArmsRaceGameType() and f1_local14.itemType == BASE_PURCHASE_MENU.itemTypes.WEAPON then
						f1_local15 = Game[0x28624DEF6F708C8]( f1_arg0, "ui_arena_weapon_rank_" .. WEAPON.GetBaseRef( f1_local14.ref ) )
						if f1_local15 and 0 <= f1_local15 then
							f1_local14.cost = 0
							f1_local14.displayCost = Engine[0xED84C33EC5F01EA]( "MP_BR_INGAME/FREE" )
							f1_local14.canAfford = f1_local14.cost <= f1_local3
						end
					end
					f1_local15 = f0_local0( BASE_PURCHASE_MENU.removeItemRefs, f1_local14.ref )
					if CONDITIONS.IsArenaEvoGameType() then
						if not f1_local15 and f1_local10 == BASE_PURCHASE_MENU.itemTypes.WEAPON and not Dvar[0x22EAAB59AA27E9B]( "#x3f67cd36a01365a02" ) then
							f1_local15 = not f0_local0( BASE_PURCHASE_MENU.weaponSetRefs, f1_local14.ref )
						end
						if f1_local14.ref == f1_local4 or f1_local14.ref == f1_local5 then
							f1_local14.purchaseAllowed = false
							f1_local14.displayCost = Engine[0xED84C33EC5F01EA]( "MP_BR_INGAME/WEAPON_EQUIPPED" )
						elseif f1_local14.ref == "arena_evo_loot_extra_life" and ARENA_EVO.PlayerHasTeamIndex( f1_arg0 ) then
							if Game[0x28624DEF6F708C8]( f1_arg0, "ui_arena_score" .. ARENA_EVO.GetPlayerTeamIndex( f1_arg0 ) ) >= ARENA_EVO.GetMaximumScore() then
								f1_local14.purchaseAllowed = false
								f1_local14.displayCost = Engine[0xED84C33EC5F01EA]( "MP_BR_INGAME/PURCHASE_DENY_MAX_LIVES" )
							end
						elseif f1_local14.ref == "arena_evo_loot_armor" then
							if Game[0x28624DEF6F708C8]( f1_arg0, "ui_light_armor_health" ) == 1 then
								f1_local14.purchaseAllowed = false
								f1_local14.displayCost = Engine[0xED84C33EC5F01EA]( "MP_BR_INGAME/PURCHASE_DENY_ARMOR_PURCHASE" )
							end
						elseif f1_local14.ref == "brloot_armor_plate_full" then
							local f1_local16 = Game[0x28624DEF6F708C8]( f1_arg0, "ui_light_armor_health" )
							if f1_local16 >= ARENA_EVO.FULL_ARMOR_PURCHASE_THRESHOLD then
								f1_local14.purchaseAllowed = false
								local f1_local17 = Engine[0xED84C33EC5F01EA]
								local f1_local18
								if f1_local16 == 1 then
									f1_local18 = "MP_BR_INGAME/PURCHASE_DENY_ARMOR_PURCHASE"
								else
									f1_local18 = "MP_BR_INGAME/PURCHASE_DENY_FULL_ARMOR_PURCHASE"
								end
								f1_local14.displayCost = f1_local17( f1_local18 )
							end
						elseif f1_local14.itemType == BASE_PURCHASE_MENU.itemTypes.KILLSTREAK then
							local f1_local16, f1_local17 = f0_local0( f1_arg0, f1_local14.ref )
							if not f1_local16 then
								f1_local14.purchaseAllowed = false
								f1_local14.displayCost = f1_local17
							end
						elseif f1_local14.itemType == BASE_PURCHASE_MENU.itemTypes.PERK then
							local f1_local16, f1_local17 = f0_local0( f1_arg0, f1_local14.ref )
							if not f1_local16 then
								f1_local14.purchaseAllowed = false
								f1_local14.displayCost = f1_local17
							end
						elseif f1_local14.itemType == BASE_PURCHASE_MENU.itemTypes.EQUIPMENT then
							local f1_local16, f1_local17 = f0_local0( f1_arg0, f1_local14.ref )
							if not f1_local16 then
								f1_local14.purchaseAllowed = false
								f1_local14.displayCost = f1_local17
							end
						end
					end
					if CONDITIONS.IsArmsRaceGameType() then
						if f1_local14.ref == f1_local4 or f1_local14.ref == f1_local5 then
							f1_local14.purchaseAllowed = false
							f1_local14.displayCost = Engine[0xED84C33EC5F01EA]( "MP_BR_INGAME/WEAPON_EQUIPPED" )
						elseif f1_local14.ref == "s4_base_loot_armor" then
							if Game[0x28624DEF6F708C8]( f1_arg0, "ui_light_armor_health" ) == 1 then
								f1_local14.purchaseAllowed = false
								f1_local14.displayCost = Engine[0xED84C33EC5F01EA]( "MP_BR_INGAME/PURCHASE_DENY_ARMOR_PURCHASE" )
							end
						elseif f1_local14.ref == "brloot_armor_plate_full" then
							local f1_local16 = Game[0x28624DEF6F708C8]( f1_arg0, "ui_light_armor_health" )
							if f1_local16 >= ARENA_EVO.FULL_ARMOR_PURCHASE_THRESHOLD then
								f1_local14.purchaseAllowed = false
								local f1_local17 = Engine[0xED84C33EC5F01EA]
								local f1_local18
								if f1_local16 == 1 then
									f1_local18 = "MP_BR_INGAME/PURCHASE_DENY_ARMOR_PURCHASE"
								else
									f1_local18 = "MP_BR_INGAME/PURCHASE_DENY_FULL_ARMOR_PURCHASE"
								end
								f1_local14.displayCost = f1_local17( f1_local18 )
							end
						elseif f1_local14.itemType == BASE_PURCHASE_MENU.itemTypes.KILLSTREAK then
							local f1_local16, f1_local17 = f0_local0( f1_arg0, f1_local14.ref )
							if not f1_local16 then
								f1_local14.purchaseAllowed = false
								f1_local14.displayCost = f1_local17
							end
						elseif f1_local14.itemType == BASE_PURCHASE_MENU.itemTypes.PERK then
							local f1_local16, f1_local17 = f0_local0( f1_arg0, f1_local14.ref )
							if not f1_local16 then
								f1_local14.purchaseAllowed = false
								f1_local14.displayCost = f1_local17
							end
						elseif f1_local14.itemType == BASE_PURCHASE_MENU.itemTypes.EQUIPMENT then
							local f1_local16, f1_local17 = f0_local0( f1_arg0, f1_local14.ref )
							if not f1_local16 then
								f1_local14.purchaseAllowed = false
								f1_local14.displayCost = f1_local17
							end
						elseif f1_local14.itemType == BASE_PURCHASE_MENU.itemTypes.VEHICLE then
							local f1_local16, f1_local17 = f0_local0( f1_arg0, f1_local14.ref )
							if not f1_local16 then
								f1_local14.purchaseAllowed = false
								f1_local14.displayCost = f1_local17
							end
						end
						if f1_local14.itemType == BASE_PURCHASE_MENU.itemTypes.LOADOUTS then
							local f1_local16 = BASE_PURCHASE_MENU.itemData[f1_local10]
							local f1_local17 = LOADOUT.GetLoadoutsPlayerData( f1_arg0 )
							local f1_local19 = Game[0x28624DEF6F708C8]( f1_arg0, "ui_base_purchased_loadouts" ) or 0
							if 0 < #f1_local17 then
								local f1_local18 = LOADOUT.BaseLoadoutCount
								if Engine[0x836C8AD984F14F6]() then
									f1_local18 = f1_local18 + LOADOUT.ExtraSonyLoadoutCount
								end
								for f1_local23, f1_local24 in ddlpairs( f1_local17 ) do
									local f1_local25 = LUI.DeepCopy( f1_local14 )
									f1_local25.ref = "custom" .. f1_local23 + 1
									f1_local25.name = f1_local24.name:get()
									f1_local25.purchaseNotify = f1_local16.purchaseNotify
									f1_local25.loadoutIndex = f1_local23 + 1
									f1_local25.loadout = f1_local24
									local f1_local26, f1_local27 = f0_local0( f1_arg0, f1_local23, f1_local19 )
									if not f1_local26 or f1_local27 then
										f1_local25.purchaseAllowed = f1_local26
										f1_local25.displayCost = f1_local27
									end
									table.insert( f1_local0, f1_local25 )
									f1_local18 = f1_local18 - 1
									if f1_local18 == 0 then
										break
									end
								end
							end
						end
					end
					local f1_local16 = BASE_PURCHASE_MENU.itemData[f1_local10]
					local f1_local17 = tonumber( f1_local9.useAltDesc ) or 0
					if f1_local16 then
						if f1_local16.purchaseNotify then
							f1_local14.purchaseNotify = f1_local16.purchaseNotify
						end
						if f1_local16.translatedDataTable and 0 < CountTableKeys( f1_local16.translatedDataTable ) then
							if f1_local17 then
								f1_local14.desc = f1_local9.desc
							else
								f1_local14.desc = StringTable[0x2DCF0973239E909]( f1_local16.translatedDataTable.file, f1_local16.translatedDataTable.ref, f1_local14.ref, f1_local16.translatedDataTable.desc )
							end
							f1_local14.name = StringTable[0x2DCF0973239E909]( f1_local16.translatedDataTable.file, f1_local16.translatedDataTable.ref, f1_local14.ref, f1_local16.translatedDataTable.name )
							f1_local14.icon = StringTable[0x2DCF0973239E909]( f1_local16.translatedDataTable.file, f1_local16.translatedDataTable.ref, f1_local14.ref, f1_local16.translatedDataTable.icon )
							if CONDITIONS.IsArenaEvoGameType() or CONDITIONS.IsArmsRaceGameType() then
								f0_local0( f1_local14, f1_local16.translatedDataTable.file )
							end
						end
					end
					if CONDITIONS.IsArenaEvoGameType() and f1_local14.itemType == BASE_PURCHASE_MENU.itemTypes.KILLSTREAK and f1_local14.ref ~= "v2_rocket" then
						f1_local14.descLocalized = (f1_local14.desc and Engine[0xED84C33EC5F01EA]( f1_local14.desc ) or "") .. Engine[0xED84C33EC5F01EA]( "ARENA_EVO_LOOT/KILLSTREAK_DESC_SUFFIX" )
					end
					if f1_local10 ~= BASE_PURCHASE_MENU.itemTypes.REVIVE and f1_local10 ~= BASE_PURCHASE_MENU.itemTypes.LOADOUTS and not f1_local15 then
						table.insert( f1_local0, f1_local14 )
					end
				end
			end
			f1_local15 = Engine[0xED84C33EC5F01EA]( "MP_BR_INGAME/FREE" )
		end
	end
	if CONDITIONS.IsArenaEvoGameType() then
		table.sort( f1_local0, function ( f2_arg0, f2_arg1 )
			return f2_arg0.baseCost < f2_arg1.baseCost
		end )
	end
	return f1_local0
end

