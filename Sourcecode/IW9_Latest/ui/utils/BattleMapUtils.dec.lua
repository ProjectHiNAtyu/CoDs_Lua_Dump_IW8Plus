-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
BATTLEMAP = BATTLEMAP or {}
BATTLEMAP.NUM_BASE_SECTORS = 20
BATTLEMAP.NUM_UNLOCKS_PER_SECTOR = 5
BATTLEMAP.CLAIM_SECTOR_ENABLED = true
BATTLEMAP.BONUS_SECTOR_INDEX = 1
BATTLEMAP.FIRST_SECTOR_INDEX = 2
local f0_local0 = BATTLEMAP
local f0_local1
if CONDITIONS.IsMobileOrMobileSim() then
	f0_local1 = 22
else
	f0_local1 = 21
end
f0_local0.FINAL_SECTOR = f0_local1
f0_local0 = BATTLEMAP
if CONDITIONS.IsMobileOrMobileSim() then
	f0_local1 = 23
else
	f0_local1 = 22
end
f0_local0.BLACK_CELL = f0_local1
BATTLEMAP.LIMITED_TIME_SECTOR = 23
BATTLEMAP.EVENT_SECTOR = 24
BATTLEMAP.BP_SECTOR_PREVIEW_REF = "BPSectorPreview"
BATTLEMAP.AUTO_TOGGLE_BLACKCELL_ON_MAP = false
BATTLEMAP.CLIENT_CHARACTER_ANIM_TREE = "client_character"
BATTLEMAP.POPUP_TOKEN_SPEND_EVENT = "trigger_token_claim"
f0_local0 = 23
f0_local1 = 6
local f0_local2 = 63
local f0_local3 = CONDITIONS.IsMobileOrMobileSim() and 0xC0552047B0D0B0E or 0x410C960010AEAE1
BATTLEMAP.LIST_BUNDLE = "battlemaplist:battlemap_list"
BATTLEMAP.NavigationMap = {
	Left_Bottom = "leftDown",
	Right_Bottom = "rightDown",
	Right_Top = "rightUp",
	Top = "up",
	Left_Top = "leftUp",
	Bottom = "down"
}
BATTLEMAP.SectorType = {
	FINAL = "Final",
	EVENT = "Event",
	START = "Start",
	BASE = "Base",
	LIMITED_TIME = "LimitedTime",
	INSTANT = "Instant",
	BLACK_CELL = "BlackCell",
	FACTION = "Faction"
}
BATTLEMAP.SectorState = {
	COMPLETED = 2,
	LOCKED = 3,
	UNKNOWN = 4,
	ACTIVE = 1
}
BATTLEMAP.FactionType = {
	TASK_FORCE_141 = "TaskForce141",
	SHADOW_COMPANY = "ShadowCompany",
	NONE = "None"
}
BATTLEMAP.FactionTypeByInt = {
	BATTLEMAP.FactionType.TASK_FORCE_141,
	BATTLEMAP.FactionType.SHADOW_COMPANY
}
BATTLEMAP.OnboardingStates = {
	TOOLTIPS = 4,
	MAP_BOOT = 2,
	SPEND_SELECTION = 5,
	END_ONBOARDING = 6,
	INITIAL_TRYPTICH = 3,
	MAP_TRYPTICH = 1
}
BATTLEMAP.ToolTipStates = {
	AUTO_SWITCH = 1
}
BATTLEMAP.SectorMapState = {
	CLOSE = 10,
	COMPLETE = 4,
	FIXING_UP = 9,
	UNLOCK_WAIT = 2,
	PREVIEW = 6,
	PURCHASE_PASS = 5,
	NORMAL = 0,
	TOKEN_UNLOCK = 8,
	ONBOARDING = 7,
	INTRO = 1,
	UNLOCK = 3
}
BATTLEMAP.SectorPreviewState = {
	UNLOCK_INDIVIDUAL_WAIT = 4,
	UNLOCK_HVT = 3,
	FIXING_UP = 5,
	UNLOCK_INDIVIDUAL = 2,
	PREVIEW_OUTRO = 1,
	UNLOCK_SECTOR_WAIT = 6,
	NORMAL = 0,
	UNLOCK_SECTOR = 7
}
BATTLEMAP.BattlePassStates = {
	UNLOCK_SINGLE_WAIT = 1,
	SPEND_SELECTION = 13,
	UNLOCK_SECTOR_WAIT = 4,
	CLOSE_MAP = 11,
	COMPLETE = 7,
	PURCHASE_PASS = 8,
	UNLOCK_SECTOR = 5,
	ONBOARDING = 12,
	UNLOCK_SECTOR_DELAY = 6,
	TOKEN_CELEBRATION = 16,
	MAP_SETUP = 17,
	JUMPSCARE = 20,
	HAUNTING_INTRO = 21,
	BP_CHALLENGE_ONBOARDING = 19,
	UNLOCK_HVT = 3,
	ENTER_SECTOR = 15,
	NORMAL = 0,
	MAP_BOOT = 14,
	FIX_UP = 10,
	UNLOCK_SINGLE = 2,
	MAP_FORCE_SELECTION = 18,
	PURCHASE_BLACK_CELL = 9
}
BATTLEMAP.RewardStates = {
	LOCKED = 1,
	PROGRESSING = 3,
	COUNT = 4,
	UNLOCKED = 5,
	CLAIMED = 2,
	UNKNOWN = 0
}
BATTLEMAP.SectorTagState = {
	LOCKED = 4,
	COMPLETED_FREE = 3,
	BONUS = 5,
	OLYMPUS = 6,
	COMPLETED_PREMIUM = 2,
	ACTIVE = 1
}
BATTLEMAP.TokenMenuState = {
	PURCHASING = 2,
	CLAIMING = 1
}
BATTLEMAP.PurchaseButtonStates = {
	BUY_BLACK_CELL = 3,
	COMPLETE = 4,
	BUY_TOKENS = 1,
	FIX_UP = 0,
	BUY_BATTLE_PASS = 2
}
BATTLEMAP.BATTLEMAP_SCENES = {
	battle_pass_vehicle = 3,
	battle_pass_character = 1,
	battle_pass_items = 4,
	battle_pass_weapon = 2,
	none = 0
}
BATTLEMAP.TokenBalanceUserStates = {
	AEUserState.IW9__BATTLEMAP_TOKEN_COUNT_S1,
	AEUserState.IW9__BATTLEMAP_TOKEN_COUNT_S2,
	AEUserState.IW9__BATTLEMAP_TOKEN_COUNT_S3,
	AEUserState.IW9__BATTLEMAP_TOKEN_COUNT_S4,
	AEUserState.IW9__BATTLEMAP_TOKEN_COUNT_S5,
	AEUserState.IW9__BATTLEMAP_TOKEN_COUNT_S6
}
BATTLEMAP.AutoSpendTokenBalanceUserStates = {
	AEUserState.IW9__BATTLEMAP_AUTOSPEND_TOKEN_COUNT_S1,
	AEUserState.IW9__BATTLEMAP_AUTOSPEND_TOKEN_COUNT_S2,
	AEUserState.IW9__BATTLEMAP_AUTOSPEND_TOKEN_COUNT_S3,
	AEUserState.IW9__BATTLEMAP_AUTOSPEND_TOKEN_COUNT_S4,
	AEUserState.IW9__BATTLEMAP_AUTOSPEND_TOKEN_COUNT_S5,
	AEUserState.IW9__BATTLEMAP_AUTOSPEND_TOKEN_COUNT_S6
}
BATTLEMAP.TokenMaxAvailableUserStates = {
	AEUserState.IW9__BATTLEMAP_TOKEN_MAX_AVAILABLE_S1,
	AEUserState.IW9__BATTLEMAP_TOKEN_MAX_AVAILABLE_S2,
	AEUserState.IW9__BATTLEMAP_TOKEN_MAX_AVAILABLE_S3,
	AEUserState.IW9__BATTLEMAP_TOKEN_MAX_AVAILABLE_S4,
	AEUserState.IW9__BATTLEMAP_TOKEN_MAX_AVAILABLE_S5,
	AEUserState.IW9__BATTLEMAP_TOKEN_MAX_AVAILABLE_S6
}
BATTLEMAP.ButtonHighlightColors = {
	UNCLAIMED_FREE = SWATCHES[0xAE02465B3F418FB][0x524456DF57E10E6],
	UNCLAIMED_PREMIUM = SWATCHES[0xAE02465B3F418FB][0x524456DF57E10E6],
	CLAIMED_FREE = SWATCHES[0xAE02465B3F418FB][0xC5A1ED35FC8F0D5],
	CLAIMED_PREMIUM = SWATCHES[0xAE02465B3F418FB][0x5C8B82A2FF6FC21],
	LOCKED = SWATCHES[0xEAF2060ABE5269B][0x25ECEAC112DE079],
	INSTANT_BONUS = SWATCHES[0xAE02465B3F418FB][0xA735F974387D384],
	FINAL_BONUS = SWATCHES[0xAE02465B3F418FB][0x5C8B82A2FF6FC21]
}
BATTLEMAP.SectorsToFlipFocusButton = {
	[5.32150281E-315] = true,
	[5.31729353E-315] = true,
	[5.32053144E-315] = true,
	[5.32085523E-315] = true,
	[5.32117902E-315] = true,
	[5.3218266E-315] = true,
	[5.322150393E-315] = true
}
BATTLEMAP.SectorsToReduceMapMetadataHeight = {
	[5.322150393E-315] = true,
	[5.322474184E-315] = true
}
local f0_local4 = function ( f177_arg0 )
	if not PROJECT[0x5A05E13AC947C99][0x317B81C19978F66] or not PROJECT[0x5A05E13AC947C99][0x317B81C19978F66][f177_arg0] then
		if not PROJECT[0x5A05E13AC947C99][0x317B81C19978F66] then
			PROJECT[0x5A05E13AC947C99][0x317B81C19978F66] = {}
		end
		if not PROJECT[0x5A05E13AC947C99][0x317B81C19978F66][f177_arg0] then
			PROJECT[0x5A05E13AC947C99][0x317B81C19978F66][f177_arg0] = {}
		end
		local f177_local0 = BATTLEMAP.GetSeasonBundle( f177_arg0 )
		for f177_local4, f177_local5 in ipairs( f177_local0[0x8C959E160CAD874] ) do
			table.insert( PROJECT[0x5A05E13AC947C99][0x317B81C19978F66][f177_arg0], Engine[0x6093D047200548]( "battlemapsector:" .. f177_local5[0xE03357C933EFDCA] ) )
		end
	end
	return PROJECT[0x5A05E13AC947C99][0x317B81C19978F66][f177_arg0]
end

BATTLEMAP.GetBattleMapSectorRewards = function ( f176_arg0 )
	if not PROJECT[0x5A05E13AC947C99][0xA17EF9745C5F4AF] then
		PROJECT[0x5A05E13AC947C99][0xA17EF9745C5F4AF] = {}
	end
	if not PROJECT[0x5A05E13AC947C99][0xA17EF9745C5F4AF][f176_arg0] then
		PROJECT[0x5A05E13AC947C99][0xA17EF9745C5F4AF][f176_arg0] = Engine[0x6093D047200548]( "battlemapreward:" .. f176_arg0 )
	end
	return PROJECT[0x5A05E13AC947C99][0xA17EF9745C5F4AF][f176_arg0]
end

local f0_local5 = function ( f175_arg0, f175_arg1 )
	local f175_local0 = assert
	local f175_local1
	if f175_arg0 == nil or 0 >= f175_arg0 then
		f175_local1 = false
	else
		f175_local1 = true
	end
	f175_local0( f175_local1, "SectorIndex value should be valid and greater than 0." )
	f175_local0 = assert
	if f175_arg1 == nil or 0 >= f175_arg1 then
		f175_local1 = false
	else
		f175_local1 = true
	end
	f175_local0( f175_local1, "Season value should be valid and greater than 0." )
	f175_local0 = f0_local0( f175_arg1 )
	f175_local0 = f175_local0[f175_arg0]
	local f175_local2
	if f175_local0 then
		f175_local2 = f175_local0[0xACC083D56797E6]
		if not f175_local2 then
		
		else
			return tostring( f175_local2 )
		end
	end
	f175_local2 = 0
end

local f0_local6 = function ( f174_arg0, f174_arg1 )
	for f174_local3, f174_local4 in ipairs( f0_local0( f174_arg1 ) ) do
		if f174_local4[0xACC083D56797E6] == f174_arg0 then
			return f174_local3
		end
	end
	return -1
end

local f0_local7 = function ( f173_arg0, f173_arg1, f173_arg2 )
	local f173_local0 = assert
	local f173_local1
	if f173_arg0 then
		f173_local1 = f173_arg0
	elseif type( f173_arg0 ) ~= "number" or 0 > f173_arg0 then
		f173_local1 = false
	else
		f173_local1 = true
	end
	f173_local0( f173_local1 )
	if not f173_arg2 then
		f173_local0 = f173_arg2
	else
		f173_local0 = SEASON.GetCurrentSeason()
	end
	local f173_local2 = assert
	local f173_local3
	if f173_local0 then
		f173_local3 = f173_local0
	else
		f173_local3 = 0 < f173_local0
	end
	f173_local2( f173_local3, "Attempt to get battle map user state value outside of active season. season=" .. tostring( f173_local0 ) )
	if f173_local0 <= 0 then
		return 0
	else
		f173_local2 = f173_arg1[f173_local0]
		if f173_local2 then
			f173_local1 = OnlineProgression[0x82011D283698AA4]( f173_arg0, {
				f173_local2
			} )
			return tonumber( f173_local1[f173_local2] )
		else
			return 0
		end
	end
end

local f0_local8 = function ( f172_arg0, f172_arg1, f172_arg2 )
	local f172_local0 = assert
	local f172_local1
	if f172_arg0 then
		f172_local1 = f172_arg0
	elseif type( f172_arg0 ) ~= "number" or 0 > f172_arg0 then
		f172_local1 = false
	else
		f172_local1 = true
	end
	f172_local0( f172_local1 )
	f172_local0 = assert
	if f172_arg1 then
		f172_local1 = f172_arg1
	elseif type( f172_arg1 ) ~= "number" or 0 >= f172_arg1 then
		f172_local1 = false
	else
		f172_local1 = true
	end
	f172_local0( f172_local1 )
	f172_local0 = assert
	if f172_arg2 then
		f172_local1 = f172_arg2
	else
		f172_local1 = type( f172_arg2 ) == "table"
	end
	f172_local0( f172_local1 )
	if BATTLEMAP.GetTokenBalance( f172_arg0 ) <= 0 then
		f172_arg2.errorCode = BATTLEPASS.SpendTokenError.BALANCE_ZERO
		return false
	else
		local f172_local2 = BATTLEMAP.GetSectorType( f172_arg0, f172_arg1 )
		if f172_local2 == BATTLEMAP.SectorType.INSTANT or f172_local2 == BATTLEMAP.SectorType.FINAL then
			f172_arg2.errorCode = BATTLEPASS.SpendTokenError.SECTOR_TYPE_INVALID
			return false
		elseif BATTLEMAP.GetSectorState( f172_arg0, f172_arg1 ) ~= BATTLEMAP.SectorState.ACTIVE then
			f172_arg2.errorCode = BATTLEPASS.SpendTokenError.SECTOR_INACTIVE
			return false
		else
			return true
		end
	end
end

BATTLEMAP.GetNumRewardsRemaining = function ( f171_arg0, f171_arg1 )
	local f171_local0 = BATTLEMAP.NUM_BASE_SECTORS * BATTLEMAP.NUM_UNLOCKS_PER_SECTOR
	return math.floor( f171_local0 - f171_local0 * BATTLEMAP.GetSeasonProgressionPercent( f171_arg0, f171_arg1 ) )
end

local f0_local9 = function ( f170_arg0, f170_arg1, f170_arg2, f170_arg3 )
	local f170_local0 = assert
	local f170_local1
	if f170_arg0 then
		f170_local1 = f170_arg0
	elseif type( f170_arg0 ) ~= "number" or 0 > f170_arg0 then
		f170_local1 = false
	else
		f170_local1 = true
	end
	f170_local0( f170_local1 )
	f170_local0 = assert
	if f170_arg1 == nil or 0 >= f170_arg1 then
		f170_local1 = false
	else
		f170_local1 = true
	end
	f170_local0( f170_local1, "Battlepass season the player is spending his tokens on." )
	f170_local0 = assert
	if f170_arg2 then
		f170_local1 = f170_arg2
	elseif type( f170_arg2 ) ~= "number" or 0 >= f170_arg2 then
		f170_local1 = false
	else
		f170_local1 = true
	end
	f170_local0( f170_local1 )
	f170_local0 = assert
	if f170_arg3 then
		f170_local1 = f170_arg3
	else
		f170_local1 = type( f170_arg3 ) == "table"
	end
	f170_local0( f170_local1 )
	f170_local0 = BATTLEMAP.GetTokenBalance( f170_arg0 )
	if f170_local0 == 0 then
		f170_arg3.errorCode = BATTLEPASS.SpendTokenError.BALANCE_ZERO
		return false
	elseif f170_local0 < f170_arg2 then
		f170_arg3.errorCode = BATTLEPASS.SpendTokenError.NOT_ENOUGH_TOKENS
		return false
	elseif f170_arg1 ~= SEASON.GetCurrentSeason() then
		f170_arg3.errorCode = BATTLEPASS.SpendTokenError.INVALID_SEASON
		return false
	else
		return true
	end
end

BATTLEMAP.GetNumRewardsRemainingInSector = function ( f169_arg0, f169_arg1, f169_arg2 )
	local f169_local0 = BATTLEMAP.GetSectorProgress( f169_arg0, f169_arg1, f169_arg2 )
	local f169_local1 = 0
	for f169_local5, f169_local6 in ipairs( f169_local0 ) do
		if not f169_local6 then
			f169_local1 = f169_local1 + 1
		end
	end
	return f169_local1
end

BATTLEMAP.CanSpendTokenMaxSector = function ( f168_arg0, f168_arg1, f168_arg2 )
	if not f0_local0( f168_arg0, f168_arg1, f168_arg2 ) then
		return false
	else
		local f168_local0 = BATTLEMAP.GetTokenBalance( f168_arg0 )
		local f168_local1 = BATTLEMAP.GetSectorProgress( f168_arg0, f168_arg1 )
		local f168_local2 = BATTLEMAP.GetNumRewardsRemainingInSector( f168_arg0, f168_arg1 )
		if f168_local0 < f168_local2 then
			f168_arg2.errorCode = BATTLEPASS.SpendTokenError.NOT_ENOUGH_TOKENS
			return false
		else
			f168_arg2.tokensRequired = f168_local2
			return true
		end
	end
end

local f0_local10 = function ( f167_arg0, f167_arg1, f167_arg2, f167_arg3 )
	local f167_local0 = assert
	local f167_local1
	if f167_arg0 then
		f167_local1 = f167_arg0
	elseif type( f167_arg0 ) ~= "number" or 0 > f167_arg0 then
		f167_local1 = false
	else
		f167_local1 = true
	end
	f167_local0( f167_local1 )
	f167_local0 = assert
	if f167_arg1 then
		f167_local1 = f167_arg1
	elseif type( f167_arg1 ) ~= "number" or 0 >= f167_arg1 then
		f167_local1 = false
	else
		f167_local1 = true
	end
	f167_local0( f167_local1 )
	f167_local0 = assert
	if f167_arg2 then
		f167_local1 = f167_arg2
	elseif type( f167_arg2 ) ~= "number" or 0 >= f167_arg2 then
		f167_local1 = false
	else
		f167_local1 = true
	end
	f167_local0( f167_local1 )
	f167_local0 = assert
	if f167_arg3 then
		f167_local1 = f167_arg3
	else
		f167_local1 = type( f167_arg3 ) == "table"
	end
	f167_local0( f167_local1 )
	if not f0_local0( f167_arg0, f167_arg1, f167_arg3 ) then
		return false
	end
	f167_local0 = BATTLEMAP.GetSectorProgress( f167_arg0, f167_arg1 )
	if f167_local0[f167_arg2] then
		f167_arg3.errorCode = BATTLEPASS.SpendTokenError.REWARD_CLAIMED
		return false
	end
	local f167_local2 = BATTLEMAP.GetSectorRewards( SEASON.GetCurrentSeason(), f167_arg1 )
	if f167_local2 then
		f167_local1 = f167_local2
	else
		f167_local1 = f167_local2[f167_arg2]
	end
	local f167_local3
	if f167_local1 then
		f167_local3 = f167_local1
	else
		f167_local3 = Engine[0x6093D047200548]( "battlemapreward:" .. f167_local1[0x3E3665069C49994] )
	end
	if f167_local3 and BATTLEMAP.IsRewardHVT( f167_local3 ) then
		for f167_local7, f167_local8 in ipairs( f167_local2 ) do
			if f167_arg2 ~= f167_local7 and not f167_local0[f167_local7] then
				f167_arg3.errorCode = BATTLEPASS.SpendTokenError.REWARD_HVT_LAST
				return false
			end
		end
	end
	return true
end

local f0_local11 = function ( f166_arg0, f166_arg1 )
	local f166_local0 = assert
	local f166_local1
	if f166_arg0 then
		f166_local1 = f166_arg0
	else
		f166_local1 = type( f166_arg0 ) == "table"
	end
	f166_local0( f166_local1 )
	f166_local0 = assert
	if f166_arg1 then
		f166_local1 = f166_arg1
	else
		f166_local1 = type( f166_arg1 ) == "table"
	end
	f166_local0( f166_local1 )
	if not f166_arg0 then
		DebugPrint( "BATTLEPASS DEBUG - SpendToken validation has no Post Conditions" )
		return false
	end
	f166_local0 = f166_arg0.controllerIndex
	if not f166_local0 then
		DebugPrint( "BATTLEPASS DEBUG - Missing ControllerIndex in Post Conditions" )
		return false
	elseif f166_arg0.sectorProgress and f166_arg0.sectorIndex then
		local f166_local2 = BATTLEMAP.GetSectorProgress( f166_local0, f166_arg0.sectorIndex )
		for f166_local5, f166_local6 in ipairs( f166_local2 ) do
			if f166_arg0.sectorProgress[f166_local5] ~= f166_local2[f166_local5] then
				f166_arg1.errorCode = BATTLEPASS.SpendTokenError.POST_UNEXPECTED_PROGRESS
				return false
			end
		end
	end
	if f166_arg0.tokenBalance and f166_arg0.tokenBalance ~= BATTLEMAP.GetTokenBalance( f166_local0 ) then
		f166_arg1.errorCode = BATTLEPASS.SpendTokenError.POST_UNEXPECTED_BALANCE
		return false
	elseif f166_arg0.totalClaimedRewards then
		f166_local2, f166_local1 = BATTLEMAP.GetNumberOfCompleteSectorsAndRewards( f166_local0 )
		if f166_arg0.totalClaimedRewards ~= f166_local1 then
			f166_arg1.errorCode = BATTLEPASS.SpendTokenError.POST_UNEXPECTED_PROGRESS
			return false
		end
	end
	return true
end

local f0_local12 = function ( f161_arg0, f161_arg1, f161_arg2, f161_arg3 )
	local f161_local0 = assert
	local f161_local1
	if f161_arg0 then
		f161_local1 = f161_arg0
	else
		f161_local1 = type( f161_arg0 ) == "userdata"
	end
	f161_local0( f161_local1 )
	f161_local0 = assert
	if f161_arg1 then
		f161_local1 = f161_arg1
	else
		f161_local1 = type( f161_arg1 ) == "table"
	end
	f161_local0( f161_local1 )
	f161_local0 = assert
	if f161_arg2 then
		f161_local1 = f161_arg2
	else
		f161_local1 = type( f161_arg2 ) == "function"
	end
	f161_local0( f161_local1 )
	f161_local0 = assert
	if f161_arg3 then
		f161_local1 = f161_arg3
	else
		f161_local1 = type( f161_arg3 ) == "table"
	end
	f161_local0( f161_local1 )
	f161_local0 = "battlemapTokenSpendTimer"
	local f161_local2 = "battlemap_token_spend_wait"
	f161_local1 = 100
	if f161_arg0[f161_local0] then
		
	else
		
	end
	local self = LUI.UITimer.new( {
		interval = f161_local1,
		event = f161_local2,
		eventTarget = f161_arg0
	} )
	self.id = f161_local0
	self.Respond = function ( f165_arg0 )
		f165_arg0:closeTree()
		f161_arg0[f161_arg0] = nil
		if f165_arg0.onComplete and f165_arg0.response then
			f165_arg0.onComplete( f165_arg0.response )
		end
	end
	
	self.postConditions = f161_arg1
	self.onComplete = f161_arg2
	self.response = f161_arg3
	self:registerEventHandler( f161_local2, function ( self, event )
		local f164_local0 = Dvar[0x22EAAB59AA27E9B]( 0xD7A740F8792A8CF ) or 5000
		if not self._totalWaitTime then
			self._totalWaitTime = 0
		else
			assert( self.interval )
			self._totalWaitTime = self._totalWaitTime + self.interval
		end
		if f164_local0 <= self._totalWaitTime then
			f161_arg0.success = false
			if not self._challengeUpdated then
				f161_arg0.errorCode = BATTLEPASS.SpendTokenError.TIMEOUT_CHALLENGE
			elseif not self._userStateUpdated then
				f161_arg0.errorCode = BATTLEPASS.SpendTokenError.TIMEOUT_USER_STATE
			end
			self:Respond()
		end
	end )
	self:registerEventHandler( "updated_challenge", function ( self, event )
		if event.kind == AEKinds.IW9_AE_KIND_BATTLEMAP_SECTOR.ID then
			OnlineProgression[0xE826BFCAE818EF0]( event.controller )
			self._challengeUpdated = true
		end
	end )
	self:registerEventHandler( "user_state_updated", function ( self, event )
		self._userStateUpdated = event.success
		if not self._userStateUpdated then
			self.response.errorCode = BATTLEPASS.SpendTokenError.USER_STATE_UPDATE_FAILED
			self.response.success = false
			self:Respond()
		else
			self.response.success = f161_arg0( self.postConditions, self.response )
			self:Respond()
		end
	end )
	f161_arg0:addElement( self )
	f161_arg0[f161_local0] = self
end

BATTLEMAP.SpendTokenSingle = function ( f160_arg0, f160_arg1, f160_arg2, f160_arg3, f160_arg4 )
	local f160_local0 = assert
	local f160_local1
	if f160_arg0 then
		f160_local1 = f160_arg0
	else
		f160_local1 = type( f160_arg0 ) == "userdata"
	end
	f160_local0( f160_local1, "'element' required to spend token" )
	f160_local0 = assert
	if f160_arg1 then
		f160_local1 = f160_arg1
	elseif type( f160_arg1 ) ~= "number" or 0 > f160_arg1 then
		f160_local1 = false
	else
		f160_local1 = true
	end
	f160_local0( f160_local1, "'controllerIndex required to spend token" )
	f160_local0 = assert
	if f160_arg2 == nil or 0 >= f160_arg2 then
		f160_local1 = false
	else
		f160_local1 = true
	end
	f160_local0( f160_local1, "SectorIndex value should be valid and greater than 0." )
	f160_local0 = assert
	if f160_arg3 == nil or 0 >= f160_arg3 then
		f160_local1 = false
	else
		f160_local1 = true
	end
	f160_local0( f160_local1, "RewardIndex value should be valid and greater than 0." )
	f160_local0 = assert
	if f160_arg4 then
		f160_local1 = f160_arg4
	else
		f160_local1 = type( f160_arg4 ) == "function"
	end
	f160_local0( f160_local1, "'onComplete' function required to spend token" )
	f160_local0 = {
		errorCode = BATTLEPASS.SpendTokenError.NONE,
		success = f0_local0( f160_arg1, f160_arg2, f160_arg3, f160_local0 )
	}
	if not f160_local0.success then
		f160_arg4( f160_local0 )
		return 
	else
		local f160_local2 = BATTLEMAP.GetSectorProgress( f160_arg1, f160_arg2 )
		f160_local2[f160_arg3] = true
		f0_local0( f160_arg0, {
			sectorIndex = f160_arg2,
			controllerIndex = f160_arg1,
			sectorProgress = f160_local2,
			tokenBalance = BATTLEMAP.GetTokenBalance( f160_arg1 ) - 1
		}, f160_arg4, f160_local0 )
		Challenges[0x636D3BF423FD414]( f160_arg1, AEGameEvents.iw9_battlemap_token_spend.eventID, 2, AEGameEventKeys.iw9_battlemap_sector_ae_id.keyID, tonumber( f0_local0( f160_arg2, SEASON.GetCurrentSeason() ) ), AEGameEventKeys.iw9_battlemap_sector_reward_id.keyID, f160_arg3 )
	end
end

BATTLEMAP.SpendTokenMaxSector = function ( f159_arg0, f159_arg1, f159_arg2, f159_arg3 )
	local f159_local0 = assert
	local f159_local1
	if f159_arg0 then
		f159_local1 = f159_arg0
	else
		f159_local1 = type( f159_arg0 ) == "userdata"
	end
	f159_local0( f159_local1, "'element' required to spend token" )
	f159_local0 = assert
	if f159_arg1 then
		f159_local1 = f159_arg1
	elseif type( f159_arg1 ) ~= "number" or 0 > f159_arg1 then
		f159_local1 = false
	else
		f159_local1 = true
	end
	f159_local0( f159_local1, "'controllerIndex required to spend token" )
	f159_local0 = assert
	if f159_arg2 == nil or 0 >= f159_arg2 then
		f159_local1 = false
	else
		f159_local1 = true
	end
	f159_local0( f159_local1, "SectorIndex value should be valid and greater than 0." )
	f159_local0 = assert
	if f159_arg3 then
		f159_local1 = f159_arg3
	else
		f159_local1 = type( f159_arg3 ) == "function"
	end
	f159_local0( f159_local1, "'onComplete' function required to spend token" )
	f159_local0 = {
		errorCode = BATTLEPASS.SpendTokenError.NONE,
		success = f0_local0( f159_arg1, f159_arg2, f159_local0 )
	}
	if not f159_local0.success then
		f159_arg3( f159_local0 )
		return 
	end
	local f159_local2 = BATTLEMAP.GetTokenBalance( f159_arg1 )
	f159_local1 = BATTLEMAP.GetSectorProgress( f159_arg1, f159_arg2 )
	local f159_local3 = BATTLEMAP.GetSectorRewards( SEASON.GetCurrentSeason(), f159_arg2 )
	local f159_local4 = 0
	local f159_local5 = {}
	local f159_local6 = {}
	for f159_local12, f159_local13 in ipairs( f159_local1 ) do
		if not f159_local13 then
			f159_local4 = f159_local4 + 1
			local f159_local10
			if f159_local3 then
				f159_local10 = f159_local3
			else
				f159_local10 = f159_local3[f159_local12]
			end
			local f159_local11
			if f159_local10 then
				f159_local11 = f159_local10
			else
				f159_local11 = Engine[0x6093D047200548]( "battlemapreward:" .. f159_local10[0x3E3665069C49994] )
			end
			if f159_local11 then
				if BATTLEMAP.IsRewardHVT( f159_local11 ) then
					table.insert( f159_local6, f159_local12 )
				else
					table.insert( f159_local5, f159_local12 )
				end
			end
		end
	end
	f0_local0( f159_arg0, {
		sectorIndex = f159_arg2,
		controllerIndex = f159_arg1,
		sectorProgress = f159_local1,
		tokenBalance = f159_local2
	}, f159_arg3, f159_local0 )
	Challenges[0x636D3BF423FD414]( f159_arg1, AEGameEvents.iw9_battlemap_token_spend.eventID, 2, AEGameEventKeys.iw9_battlemap_sector_ae_id.keyID, tonumber( f0_local0( f159_arg2, SEASON.GetCurrentSeason() ) ), AEGameEventKeys.iw9_battlemap_sector_spend_max.keyID, 1 )
end

BATTLEMAP.SpendTokens = function ( f156_arg0, f156_arg1, f156_arg2, f156_arg3, f156_arg4 )
	local f156_local0 = assert
	local f156_local1
	if f156_arg0 then
		f156_local1 = f156_arg0
	else
		f156_local1 = type( f156_arg0 ) == "userdata"
	end
	f156_local0( f156_local1, "'element' required to spend token" )
	f156_local0 = assert
	if f156_arg1 then
		f156_local1 = f156_arg1
	elseif type( f156_arg1 ) ~= "number" or 0 > f156_arg1 then
		f156_local1 = false
	else
		f156_local1 = true
	end
	f156_local0( f156_local1, "'controllerIndex required to spend token" )
	f156_local0 = assert
	if f156_arg2 == nil or 0 >= f156_arg2 then
		f156_local1 = false
	else
		f156_local1 = true
	end
	f156_local0( f156_local1, "Battlepass season the player is spending his tokens on." )
	f156_local0 = assert
	if f156_arg3 == nil or 0 >= f156_arg3 then
		f156_local1 = false
	else
		f156_local1 = true
	end
	f156_local0( f156_local1, "Token amount should be valid and greater than 0." )
	f156_local0 = assert
	if f156_arg4 then
		f156_local1 = f156_arg4
	else
		f156_local1 = type( f156_arg4 ) == "function"
	end
	f156_local0( f156_local1, "'onComplete' function required to spend token" )
	f156_local0 = {
		errorCode = BATTLEPASS.SpendTokenError.NONE,
		success = f0_local0( f156_arg1, f156_arg2, f156_arg3, f156_local0 )
	}
	if not f156_local0.success then
		f156_arg4( f156_local0 )
	end
	local f156_local2 = math.min( f156_arg3, BATTLEMAP.GetNumRewardsRemaining( f156_arg1, f156_arg2 ) )
	f156_local1, f156_local3 = BATTLEMAP.GetNumberOfCompleteSectorsAndRewards( f156_arg1 )
	local f156_local4 = {
		totalClaimedRewards = f156_local3 + f156_local2,
		controllerIndex = f156_arg1,
		tokenBalance = BATTLEMAP.GetTokenBalance( f156_arg1 ) - f156_local2
	}
	f156_arg0:registerEventHandler( "updated_challenge", function ( element, event )
		if event.kind == AEKinds.IW9_AE_KIND_BATTLEMAP_SECTOR.ID then
			OnlineProgression[0xE826BFCAE818EF0]( event.controller )
		end
	end )
	f156_arg0:registerEventHandler( "user_state_updated", function ( element, event )
		if event.success then
			f156_arg0.success = f156_arg0( f156_arg0, f156_arg0 )
			f156_arg0( f156_arg0 )
		else
			f156_arg0.errorCode = BATTLEPASS.SpendTokenError.USER_STATE_UPDATE_FAILED
			f156_arg0.success = false
			f156_arg0( f156_arg0 )
		end
	end )
	local f156_local5 = f0_local0( BATTLEMAP.GetActiveSectorIndex( f156_arg1, f156_arg2 ), f156_arg2 )
	Challenges[0x636D3BF423FD414]( f156_arg1, AEGameEvents.iw9_battlemap_token_spend.eventID, 3, AEGameEventKeys.iw9_battlemap_batch_spend.keyID, 1, AEGameEventKeys.iw9_value.keyID, f156_arg3, AEGameEventKeys.iw9_season.keyID, f156_arg2 )
end

BATTLEMAP.GetSpendTokenErrorMessage = function ( f155_arg0 )
	local f155_local0 = assert
	local f155_local1
	if f155_arg0 then
		f155_local1 = f155_arg0
	else
		f155_local1 = type( f155_arg0 ) == "number"
	end
	f155_local0( f155_local1 )
	f155_local0 = tostring( f155_arg0 )
	if Engine[0x2DA54CF5D6B7F02]() then
		for f155_local4, f155_local5 in pairs( BATTLEPASS.SpendTokenError ) do
			if f155_arg0 == f155_local5 then
				f155_local0 = Engine[0x7D3158A9539A355]( f155_local4 )
				break
			end
		end
	end
	return Engine[0xED84C33EC5F01EA]( 0x45ECECF34147ACF, f155_local0 )
end

BATTLEMAP.GetBattleMapTokenProduct = function ( f154_arg0, f154_arg1 )
	return {
		assets = {
			{
				uri = "ui_bp_aar_season_icon_gold",
				type = MobileStoreUtils.AssetTypes.Icon
			}
		},
		prices = {
			{
				currencyId = LOOT.CurrencyIDs.COD_POINTS,
				displayText = tostring( f154_arg0 ),
				price = f154_arg0,
				storeId = Enum[0xDFBB3683680DB53][0xA8BDBD8E17B835C]
			}
		},
		title = Engine[0xED84C33EC5F01EA]( "LUA_MENU_MOBILE/BATTLEPASS_TOKENS", f154_arg1 )
	}
end

BATTLEMAP.GetToggleAutoSpendErrorMessage = function ( f153_arg0 )
	local f153_local0 = assert
	local f153_local1
	if f153_arg0 then
		f153_local1 = f153_arg0
	else
		f153_local1 = type( f153_arg0 ) == "number"
	end
	f153_local0( f153_local1 )
	f153_local0 = tostring( f153_arg0 )
	if Engine[0x2DA54CF5D6B7F02]() then
		for f153_local4, f153_local5 in pairs( BATTLEPASS.ToggleAutoSpendError ) do
			if f153_arg0 == f153_local5 then
				f153_local0 = Engine[0x7D3158A9539A355]( f153_local4 )
				break
			end
		end
	end
	return Engine[0xED84C33EC5F01EA]( 0x638BDC2788B3A19, f153_local0 )
end

BATTLEMAP.GetDebugStateMessage = function ( f152_arg0, f152_arg1 )
	local f152_local0 = assert
	local f152_local1
	if f152_arg0 then
		f152_local1 = f152_arg0
	else
		f152_local1 = type( f152_arg0 ) == "number"
	end
	f152_local0( f152_local1 )
	f152_local0 = tostring( f152_arg0 )
	if Engine[0x2DA54CF5D6B7F02]() then
		local f152_local2 = pairs
		local f152_local3
		if not f152_arg1 then
			f152_local3 = f152_arg1
		else
			f152_local3 = BATTLEMAP.BattlePassStates
		end
		for f152_local4, f152_local5 in f152_local2( f152_local3 ) do
			if f152_arg0 == f152_local5 then
				f152_local0 = f152_local4
				break
			end
		end
	end
	return f152_local0
end

BATTLEMAP.GetSeasonBundle = function ( f151_arg0 )
	local f151_local0 = assert
	local f151_local1
	if f151_arg0 == nil or 0 >= f151_arg0 then
		f151_local1 = false
	else
		f151_local1 = true
	end
	f151_local0( f151_local1, "Season value should be valid and greater than 0." )
	if not BATTLEMAP.LIST_SCRIPT_BUNDLE then
		BATTLEMAP.LIST_SCRIPT_BUNDLE = Engine[0x6093D047200548]( BATTLEMAP.LIST_BUNDLE )
	end
	if BATTLEMAP.LIST_SCRIPT_BUNDLE then
		f151_local0 = BATTLEMAP.LIST_SCRIPT_BUNDLE[0x4C7E5C07CB4DCC][f151_arg0]
		if not BATTLEMAP.BATTLEMAP_SECTOR_DATA then
			BATTLEMAP.BATTLEMAP_SECTOR_DATA = {}
		end
		if BATTLEMAP.BATTLEMAP_SECTOR_DATA[f151_arg0] then
			return BATTLEMAP.BATTLEMAP_SECTOR_DATA[f151_arg0]
		end
		local f151_local2 = Engine[0x6093D047200548]( "battlemap:" .. f151_local0[0xBFEEEA048FE1D77] )
		assert( f151_local2[0x8DFD5E2759BA3F8] == f151_arg0 )
		if f151_local2[0x8DFD5E2759BA3F8] == f151_arg0 then
			BATTLEMAP.BATTLEMAP_SECTOR_DATA[f151_arg0] = f151_local2
		end
		return f151_local2
	else
		
	end
end

BATTLEMAP.GetSector = function ( f150_arg0, f150_arg1 )
	local f150_local0 = assert
	local f150_local1
	if f150_arg0 == nil or 0 >= f150_arg0 then
		f150_local1 = false
	else
		f150_local1 = true
	end
	f150_local0( f150_local1, "Season value should be valid and greater than 0." )
	f150_local0 = assert
	if f150_arg1 == nil or 0 >= f150_arg1 then
		f150_local1 = false
	else
		f150_local1 = true
	end
	f150_local0( f150_local1, "SectorIndex value should be valid and greater than 0." )
	f150_local0 = BATTLEMAP.GetSeasonBundle( f150_arg0 )
	return f150_local0[0x8C959E160CAD874][f150_arg1]
end

BATTLEMAP.GetSectorUINavigation = function ( f149_arg0, f149_arg1 )
	local f149_local0 = assert
	local f149_local1
	if f149_arg0 == nil or 0 >= f149_arg0 then
		f149_local1 = false
	else
		f149_local1 = true
	end
	f149_local0( f149_local1, "Season value should be valid and greater than 0." )
	f149_local0 = assert
	if f149_arg1 == nil or 0 >= f149_arg1 then
		f149_local1 = false
	else
		f149_local1 = true
	end
	f149_local0( f149_local1, "SectorIndex value should be valid and greater than 0." )
	f149_local0 = BATTLEMAP.GetSector( f149_arg0, f149_arg1 )
	return f149_local0[0x6AF9B3B8AA0426D]
end

BATTLEMAP.GetSectorRewards = function ( f148_arg0, f148_arg1 )
	local f148_local0 = assert
	local f148_local1
	if f148_arg0 == nil or 0 >= f148_arg0 then
		f148_local1 = false
	else
		f148_local1 = true
	end
	f148_local0( f148_local1, "Season value should be valid and greater than 0." )
	f148_local0 = assert
	if f148_arg1 == nil or 0 >= f148_arg1 then
		f148_local1 = false
	else
		f148_local1 = true
	end
	f148_local0( f148_local1, "SectorIndex value should be valid and greater than 0." )
	f148_local0 = f0_local0( f148_arg0 )
	f148_local0 = f148_local0[f148_arg1]
	local f148_local2
	if f148_local0 then
		f148_local2 = f148_local0
	else
		f148_local2 = f148_local0[0xC1A3B9118385]
	end
	return f148_local2
end

BATTLEMAP.IsRewardHVT = function ( f147_arg0 )
	local f147_local0 = assert
	local f147_local1
	if f147_arg0 then
		f147_local1 = f147_arg0
	else
		f147_local1 = type( f147_arg0 ) == "table"
	end
	f147_local0( f147_local1 )
	return f147_arg0[0x4A1C56BD037FC89]
end

BATTLEMAP.IsReward = function ( f146_arg0, f146_arg1 )
	if not CONDITIONS.IsBattlePassEnabled() then
		return false
	elseif BATTLEMAP.LootIdToSectorIndex then
		return BATTLEMAP.LootIdToSectorIndex[tonumber( f146_arg1 )] ~= nil
	end
	BATTLEMAP.LootIdToSectorIndex = {}
	local f146_local0 = SEASON.GetCurrentSeason()
	local f146_local1 = BATTLEMAP.GetSeasonBundle( f146_local0 )
	for f146_local2 = 1, #f146_local1[0x8C959E160CAD874], 1 do
		local f146_local5 = BATTLEMAP.GetSectorRewards( f146_local0, f146_local2 )
		for f146_local6 = 1, BATTLEMAP.NUM_UNLOCKS_PER_SECTOR, 1 do
			if f146_local5[f146_local6] then
				local f146_local9 = BATTLEMAP.GetBattleMapSectorRewards( f146_local5[f146_local6][0x3E3665069C49994] )
				for f146_local13, f146_local14 in ipairs( f146_local9[0x43EB98C952E0F8B] ) do
					if f146_local14[0x28887F70BF5EBA] ~= nil then
						BATTLEMAP.LootIdToSectorIndex[f146_local14[0x28887F70BF5EBA]] = f146_local2
					end
				end
			end
		end
	end
	return BATTLEMAP.LootIdToSectorIndex[f146_arg1] ~= nil
end

BATTLEMAP.GetStickDirection = function ( f145_arg0 )
	if f145_arg0 < 60 and 0 <= f145_arg0 then
		return BATTLEMAP.NavigationMap.Right_Top
	elseif f145_arg0 < 120 and 60 <= f145_arg0 then
		return BATTLEMAP.NavigationMap.Top
	elseif f145_arg0 <= 180 and 120 <= f145_arg0 then
		return BATTLEMAP.NavigationMap.Left_Top
	elseif -180 <= f145_arg0 and f145_arg0 <= -120 then
		return BATTLEMAP.NavigationMap.Left_Bottom
	elseif -120 < f145_arg0 and f145_arg0 <= -60 then
		return BATTLEMAP.NavigationMap.Bottom
	elseif -60 < f145_arg0 and f145_arg0 <= 0 then
		return BATTLEMAP.NavigationMap.Right_Bottom
	else
		
	end
end

BATTLEMAP.GetSectorType = function ( f144_arg0, f144_arg1, f144_arg2 )
	local f144_local0 = assert
	local f144_local1
	if f144_arg0 then
		f144_local1 = f144_arg0
	elseif type( f144_arg0 ) ~= "number" or 0 > f144_arg0 then
		f144_local1 = false
	else
		f144_local1 = true
	end
	f144_local0( f144_local1 )
	f144_local0 = assert
	if f144_arg1 == nil or 0 >= f144_arg1 then
		f144_local1 = false
	else
		f144_local1 = true
	end
	f144_local0( f144_local1, "SectorIndex value should be valid and greater than 0." )
	f144_local0 = assert
	if f144_arg2 and (type( f144_arg2 ) ~= "number" or 0 > f144_arg2) then
		f144_local1 = false
	else
		f144_local1 = true
	end
	f144_local0( f144_local1 )
	if not f144_arg2 then
		f144_local0 = f144_arg2
	else
		f144_local0 = SEASON.GetCurrentSeason()
	end
	local f144_local2 = BATTLEMAP.GetSector( f144_local0, f144_arg1 )
	f144_local1 = f0_local0( f144_local0 )
	f144_local1 = f144_local1[f144_arg1]
	local f144_local3
	if f144_local1 then
		f144_local3 = f144_local1
	else
		f144_local3 = f144_local1[0x79439EF7BFA9C2D]
	end
	return f144_local3
end

BATTLEMAP.CanGetSectorState = function ( f143_arg0 )
	local f143_local0
	if f143_arg0 == BATTLEMAP.SectorType.INSTANT or f143_arg0 == BATTLEMAP.SectorType.FINAL or f143_arg0 == BATTLEMAP.SectorType.BLACK_CELL then
		f143_local0 = false
	else
		f143_local0 = true
	end
	return f143_local0
end

local f0_local13 = function ( f142_arg0, f142_arg1 )
	local f142_local0 = f0_local0( f142_arg1 )
	f142_local0 = f142_local0[f142_arg0]
	local f142_local1 = {}
	local f142_local2
	if f142_local0 then
		f142_local2 = f142_local0
	else
		f142_local2 = f142_local0[0x418C74CAAECCED3]
	end
	f142_local1.challengeID = f142_local2
	if f142_local0 then
		f142_local2 = f142_local0
	else
		f142_local2 = f142_local0[0xC4F27A0353771A0]
	end
	f142_local1.challengeKind = f142_local2
	return f142_local1
end

BATTLEMAP.GetSectorState = function ( f141_arg0, f141_arg1, f141_arg2 )
	local f141_local0 = assert
	local f141_local1
	if f141_arg0 then
		f141_local1 = f141_arg0
	elseif type( f141_arg0 ) ~= "number" or 0 > f141_arg0 then
		f141_local1 = false
	else
		f141_local1 = true
	end
	f141_local0( f141_local1 )
	f141_local0 = assert
	if f141_arg1 == nil or 0 >= f141_arg1 then
		f141_local1 = false
	else
		f141_local1 = true
	end
	f141_local0( f141_local1, "SectorIndex value should be valid and greater than 0." )
	f141_local0 = assert
	if f141_arg2 and (type( f141_arg2 ) ~= "number" or 0 > f141_arg2) then
		f141_local1 = false
	else
		f141_local1 = true
	end
	f141_local0( f141_local1 )
	if not f141_arg2 then
		f141_local0 = f141_arg2
	else
		f141_local0 = SEASON.GetCurrentSeason()
	end
	local f141_local2 = BATTLEMAP.GetSectorType( f141_arg0, f141_arg1, f141_local0 )
	f141_local1 = BATTLEMAP.SectorState.UNKNOWN
	assert( f141_local2 ~= BATTLEMAP.SectorType.INSTANT, "Cannot get sector state for instant grat sector" )
	if f141_local2 == BATTLEMAP.SectorType.INSTANT then
		return f141_local1
	end
	local f141_local3 = nil
	if f141_local2 == BATTLEMAP.SectorType.FACTION then
		local f141_local4 = f0_local0( f141_arg1, f141_local0 )
		f141_local3 = OnlineChallenges[0x1EEE6570EF4BB8B]( f141_arg0, f141_local4.challengeID )
	else
		f141_local3 = BATTLEMAP.GetSectorChallengeProgress( f141_arg0, f141_arg1, f141_local0 )
	end
	if f141_local3 then
		if f141_local2 == BATTLEMAP.SectorType.LIMITED_TIME then
			if f141_local3.progress then
				local f141_local4 = f141_local3.progress.state
				if f141_local4 == Challenge.State.INACTIVE then
					f141_local1 = BATTLEMAP.SectorState.LOCKED
				elseif f141_local4 == Challenge.State.IN_PROGRESS then
					f141_local1 = BATTLEMAP.SectorState.ACTIVE
				elseif f141_local4 == Challenge.State.FINISHED then
					f141_local1 = BATTLEMAP.SectorState.COMPLETED
				end
			end
		elseif f141_local3.status == Challenge.State.INACTIVE then
			f141_local1 = BATTLEMAP.SectorState.LOCKED
		elseif f141_local3.status == Challenge.State.IN_PROGRESS or f141_local3.status == Challenge.State.FINISHED then
			f141_local1 = BATTLEMAP.SectorState.ACTIVE
			if f141_local3.progress and f141_local3.progress.default and f141_local3.progress.default_target then
				local f141_local4 = f141_local3.progress.default
				local f141_local5 = f141_local3.progress.default_target
				if f141_local5 ~= 0 and f141_local4 == f141_local5 then
					f141_local1 = BATTLEMAP.SectorState.COMPLETED
				end
			end
		end
	end
	if f141_local2 == BATTLEMAP.SectorType.FACTION then
		local f141_local4
		if f141_local1 == BATTLEMAP.SectorState.COMPLETED or SEASONAL_EVENT.HasSeasonalEventTabActive() and "versus" == SEASONAL_EVENT.GetCurrentSeasonalEventName() then
			f141_local4 = false
		else
			f141_local4 = true
		end
		if f141_local4 then
			local f141_local5 = BATTLEMAP.SectorState.LOCKED
			if not f141_local5 then
				f141_local1 = f141_local5
			elseif f141_local1 == BATTLEMAP.SectorState.UNKNOWN then
				local f141_local5 = BATTLEMAP.SectorState.ACTIVE
				if not f141_local5 then
					f141_local1 = f141_local5
				else
					
				end
			end
		end
		elseif f141_local1 == BATTLEMAP.SectorState.UNKNOWN then
			local f141_local5 = BATTLEMAP.SectorState.ACTIVE
			if not f141_local5 then
				f141_local1 = f141_local5
			else
				
			end
	end
	return f141_local1
end

BATTLEMAP.GetBlackCellUniqueRewards = function ( f140_arg0 )
	if not BATTLEMAP.BLACK_CELL_UNIQUE_REWARDS then
		BATTLEMAP.BLACK_CELL_UNIQUE_REWARDS = {}
		local f140_local0 = SEASON.GetCurrentSeason()
		for f140_local1 = 1, BATTLEMAP.NUM_BASE_SECTORS + 1, 1 do
			for f140_local7, f140_local8 in ipairs( BATTLEMAP.GetSectorUnlockData( f140_arg0, f140_local0, f140_local1 ) ) do
				if f140_local8.blackCellLootID then
					table.insert( BATTLEMAP.BLACK_CELL_UNIQUE_REWARDS, f140_local8 )
				end
			end
		end
	end
	return BATTLEMAP.BLACK_CELL_UNIQUE_REWARDS
end

local f0_local14 = function ( f139_arg0, f139_arg1, f139_arg2 )
	if not Dvar[0x9E5BE3B4BBA4E0E]( 0x59F15DDED5895DE ) then
		return false
	else
		local f139_local0
		if f139_arg1 then
			f139_local0 = f139_arg1
		else
			f139_local0 = 0 <= f139_arg1
		end
	end
	if BATTLEMAP.AreAllBaseSectorsComplete( f139_arg0, f139_arg2 ) or not f139_local0 or (BATTLEMAP.GetSectorState( f139_arg0, f139_arg1, f139_arg2 ) ~= BATTLEMAP.SectorState.ACTIVE) or (f139_arg2 < Dvar[0x22EAAB59AA27E9B]( 0xECED89360812B14 )) or BATTLEMAP.IsSectorActive( f139_arg0, f139_arg1 ) then
		return 
	end
	local f139_local1 = Battlepass[0xD2A39FED2CEFEC7]( f139_arg0, f0_local0( f139_arg1, f139_arg2 ) )
	if not f139_local1 then
		local f139_local2 = debug.getInfo( 2 )
		DebugPrint( "Did not successfully activate sector: " .. f139_local2.source .. " : " .. f139_local2.currentline )
	end
	return f139_local1
end

BATTLEMAP.SetSectorActive = function ( f138_arg0, f138_arg1, f138_arg2 )
	if not f138_arg2 then
		f138_arg2 = SEASON.GetCurrentSeason()
	end
	local f138_local0 = BATTLEMAP.GetActiveSectorIndex( f138_arg0 )
	f0_local0( f138_arg0, f138_arg1, f138_arg2 )
end

BATTLEMAP.CanActivateCurrentSector = function ( f137_arg0, f137_arg1, f137_arg2 )
	if not f137_arg2 then
		f137_arg2 = SEASON.GetCurrentSeason()
	end
	local f137_local0 = BATTLEMAP.IsSectorActive( f137_arg0, f137_arg1, f137_arg2 )
	local f137_local1 = BATTLEMAP.GetSectorType( f137_arg0, f137_arg1 )
	local f137_local2
	if f137_local0 or f137_local1 == BATTLEMAP.SectorType.BASE or f137_local1 == BATTLEMAP.SectorType.INSTANT or f137_local1 == BATTLEMAP.SectorType.FINAL or BATTLEMAP.GetSectorState( f137_arg0, f137_arg1, f137_arg2 ) ~= BATTLEMAP.SectorState.ACTIVE then
		f137_local2 = false
	else
		f137_local2 = true
	end
	return f137_local2
end

BATTLEMAP.IsSectorActive = function ( f136_arg0, f136_arg1, f136_arg2 )
	return BATTLEMAP.GetActiveSectorIndex( f136_arg0 ) == f136_arg1
end

BATTLEMAP.GetActiveSectorIndex = function ( f135_arg0 )
	if not Dvar[0x9E5BE3B4BBA4E0E]( 0x59F15DDED5895DE ) then
		return 2
	end
	assert( f135_arg0 )
	local f135_local0 = Dvar[0x22EAAB59AA27E9B]( 0x1EF9B867531FEA1 )
	local f135_local1 = f0_local0( Battlepass[0x3BFDA647C1A763B]( f135_arg0 ), f135_local0 )
	if f135_local1 == -1 then
		if not BATTLEPASS.IsOwned( f135_arg0, f135_local0 ) then
			f135_local1 = 2
		elseif BATTLEMAP.GetSeasonProgressionPercent( f135_arg0, f135_local0 ) == 1 then
			f135_local1 = BATTLEMAP.FINAL_SECTOR + 1
		else
			f135_local1 = 2
		end
	end
	assert( -1 < f135_local1 )
	return f135_local1
end

BATTLEMAP.GetSectorProgressFromBitField = function ( f134_arg0, f134_arg1 )
	local f134_local0 = {}
	for f134_local1 = 1, f134_arg0, 1 do
		f134_local0[f134_local1] = 0 < BitwiseOperators.band( BitwiseOperators.lshift( 1, f134_local1 - 1 ), f134_arg1 )
	end
	return f134_local0
end

local f0_local15 = function ( f133_arg0, f133_arg1, f133_arg2, f133_arg3 )
	assert( f133_arg1, "AAR Data for reward delta was invalid" )
	assert( f133_arg2, "AAR Data Index for reward delta was invalid" )
	local f133_local0 = SEASON.GetCurrentSeason()
	if f133_arg1 == nil or f133_arg2 == nil then
		return nil
	end
	local f133_local1 = f133_arg1[f133_arg2]
	if not Dvar[0x9E5BE3B4BBA4E0E]( 0x278407261BE585C ) then
		assert( f133_local1, "sectorAARData was nil. Some data was invalid in AAR!" )
		if f133_local1 == nil then
			return nil
		end
	end
	local f133_local2 = f0_local0( f133_local1.sectorAEID, f133_local0 )
	local f133_local3 = f133_local1.progress
	local f133_local4 = BATTLEMAP.GetSectorProgressBitfield( f133_arg0, f133_local2, f133_local0 )
	local f133_local5 = BitwiseOperators.band( BitwiseOperators.bxor( f133_local3, f133_local4 ), f133_local4 )
	local f133_local6 = {}
	if not f133_arg3 or not (f133_arg3 + 1) then
		local f133_local7 = 1
	end
	for f133_local8 = 1, BATTLEMAP.NUM_UNLOCKS_PER_SECTOR, 1 do
		if 0 < BitwiseOperators.band( BitwiseOperators.lshift( 1, f133_local8 - 1 ), f133_local5 ) then
			f133_local6[f133_local7] = f133_local8
			local f133_local7 = f133_local7 + 1
		end
	end
	return f133_local6
end

local f0_local16 = function ( f132_arg0 )
	for f132_local3, f132_local4 in ipairs( f132_arg0 ) do
		if f132_local4 == false then
			return f132_local3
		end
	end
	return -1
end

local f0_local17 = function ( f131_arg0, f131_arg1, f131_arg2 )
	return f0_local0( BATTLEMAP.GetSectorProgress( f131_arg0, f131_arg1, f131_arg2 ) )
end

local f0_local18 = function ( f130_arg0, f130_arg1, f130_arg2, f130_arg3 )
	table.insert( f130_arg0, {
		sector = f130_arg1,
		reward = f130_arg2,
		progress = f130_arg3
	} )
end

BATTLEMAP.TranslateAutospendAARData = function ( f129_arg0, f129_arg1, f129_arg2, f129_arg3 )
	local f129_local0 = {}
	assert( f129_arg1, "No AAR data was valid for Translate Auto spend AAR data" )
	if f129_arg1 == nil then
		return {}
	end
	local f129_local1 = AAR.GetNumEarnedBattlepassTokens( f129_arg2, f129_arg3 )
	local f129_local2 = SEASON.GetCurrentSeason()
	local f129_local3 = f0_local0( f129_arg1[0].sectorAEID, f129_local2 )
	local f129_local4 = f0_local0( BATTLEMAP.GetSectorProgressFromBitField( BATTLEMAP.NUM_UNLOCKS_PER_SECTOR, f129_arg1[0].progress ) )
	f0_local0( f129_local0, f129_local3, f129_local4, BATTLEMAP.GetPercentToNextToken( f129_arg0, f129_arg2 ) )
	if f129_local1 == 0 then
		f0_local0( f129_local0, f129_local3, f129_local4, BATTLEMAP.GetPercentToNextToken( f129_arg0, f129_arg3 ) )
	else
		local f129_local5 = 0
		local f129_local6 = f0_local0( f129_arg0, f129_arg1, f129_local5 )
		if f129_local6 and not Table.IsEmpty( f129_local6 ) then
			for f129_local7 = 1, f129_local1, 1 do
				f0_local0( f129_local0, f0_local0( f129_arg1[f129_local5].sectorAEID, f129_local2 ), f129_local6[f129_local7], 1 )
				if f129_local6[f129_local7] == BATTLEMAP.NUM_UNLOCKS_PER_SECTOR then
					f129_local5 = f129_local5 + 1
					if not Dvar[0x9E5BE3B4BBA4E0E]( 0x278407261BE585C ) and not f0_local0( f129_arg0, f129_arg1, f129_local5, f129_local7 ) then
						return {}
					end
				end
			end
		end
		f0_local0( f129_local0, f0_local0( f129_arg1[f129_local5].sectorAEID, f129_local2 ), f0_local0( f129_arg0, BATTLEMAP.GetActiveSectorIndex( f129_arg0 ), f129_local2 ), BATTLEMAP.GetPercentToNextToken( f129_arg0, f129_arg3 ) )
	end
	return f129_local0
end

BATTLEMAP.CanUseNewBattlepassActivation = function ()
	return Dvar[0x9E5BE3B4BBA4E0E]( 0x59F15DDED5895DE )
end

BATTLEMAP.ShowSeasonProgression = function ()
	return Dvar[0x9E5BE3B4BBA4E0E]( 0x72B3D3629492B15 )
end

BATTLEMAP.GetNextRewardFromActiveSector = function ( f126_arg0 )
	local f126_local0 = BATTLEMAP.GetActiveSectorIndex( f126_arg0 )
	local f126_local1 = SEASON.GetCurrentSeason()
	for f126_local8, f126_local9 in ipairs( BATTLEMAP.GetSectorProgress( f126_arg0, f126_local0, f126_local1 ) ) do
		if f126_local9 == false then
			local f126_local5 = BATTLEMAP.GetSectorRewards( f126_local1, f126_local0 )
			local f126_local6
			if f126_local5 then
				f126_local6 = f126_local5
			else
				f126_local6 = f126_local5[f126_local8]
			end
			local f126_local7
			if f126_local6 then
				f126_local7 = f126_local6
			else
				f126_local7 = Engine[0x6093D047200548]( "battlemapreward:" .. f126_local6[0x3E3665069C49994] )
			end
			return f126_local7
		end
	end
	return nil
end

BATTLEMAP.GetSectorProgress = function ( f125_arg0, f125_arg1, f125_arg2 )
	local f125_local0 = assert
	local f125_local1
	if f125_arg0 then
		f125_local1 = f125_arg0
	elseif type( f125_arg0 ) ~= "number" or 0 > f125_arg0 then
		f125_local1 = false
	else
		f125_local1 = true
	end
	f125_local0( f125_local1 )
	f125_local0 = assert
	if f125_arg1 == nil or 0 >= f125_arg1 then
		f125_local1 = false
	else
		f125_local1 = true
	end
	f125_local0( f125_local1, "SectorIndex value should be valid and greater than 0." )
	f125_local0 = assert
	if f125_arg2 and (type( f125_arg2 ) ~= "number" or 0 > f125_arg2) then
		f125_local1 = false
	else
		f125_local1 = true
	end
	f125_local0( f125_local1 )
	if not f125_arg2 then
		f125_local0 = f125_arg2
	else
		f125_local0 = SEASON.GetCurrentSeason()
	end
	local f125_local2 = BATTLEMAP.GetSectorRewards( f125_local0, f125_arg1 )
	if f125_local2 then
		f125_local1 = #f125_local2
		if not f125_local1 then
		
		else
			return BATTLEMAP.GetSectorProgressFromBitField( f125_local1, BATTLEMAP.GetSectorProgressBitfield( f125_arg0, f125_arg1, f125_arg2 ) )
		end
	end
	f125_local1 = 0
end

BATTLEMAP.GetSectorProgressBitfield = function ( f124_arg0, f124_arg1, f124_arg2 )
	local f124_local0 = assert
	local f124_local1
	if f124_arg0 then
		f124_local1 = f124_arg0
	elseif type( f124_arg0 ) ~= "number" or 0 > f124_arg0 then
		f124_local1 = false
	else
		f124_local1 = true
	end
	f124_local0( f124_local1 )
	f124_local0 = assert
	if f124_arg1 == nil or 0 >= f124_arg1 then
		f124_local1 = false
	else
		f124_local1 = true
	end
	f124_local0( f124_local1, "SectorIndex value should be valid and greater than 0." )
	f124_local0 = assert
	if f124_arg2 and (type( f124_arg2 ) ~= "number" or 0 > f124_arg2) then
		f124_local1 = false
	else
		f124_local1 = true
	end
	f124_local0( f124_local1 )
	if not f124_arg2 then
		f124_local0 = f124_arg2
	else
		f124_local0 = SEASON.GetCurrentSeason()
	end
	local f124_local2 = BATTLEMAP.GetSectorChallengeProgress( f124_arg0, f124_arg1, f124_local0 )
	f124_local1 = 0
	if not f124_local2 or not f124_local2.progress then
		return f124_local1
	end
	local f124_local3 = "default"
	if BATTLEMAP.GetSectorType( f124_arg0, f124_arg1 ) == BATTLEMAP.SectorType.LIMITED_TIME then
		f124_local3 = "progress"
	end
	return f124_local2.progress[f124_local3]
end

BATTLEMAP.GetSectorChallengeProgress = function ( f123_arg0, f123_arg1, f123_arg2 )
	local f123_local0 = assert
	local f123_local1
	if f123_arg0 then
		f123_local1 = f123_arg0
	elseif type( f123_arg0 ) ~= "number" or 0 > f123_arg0 then
		f123_local1 = false
	else
		f123_local1 = true
	end
	f123_local0( f123_local1 )
	f123_local0 = assert
	if f123_arg1 == nil or 0 >= f123_arg1 then
		f123_local1 = false
	else
		f123_local1 = true
	end
	f123_local0( f123_local1, "SectorIndex value should be valid and greater than 0." )
	f123_local0 = assert
	if f123_arg2 and (type( f123_arg2 ) ~= "number" or 0 > f123_arg2) then
		f123_local1 = false
	else
		f123_local1 = true
	end
	f123_local0( f123_local1 )
	if not f123_arg2 then
		f123_local0 = f123_arg2
	else
		f123_local0 = SEASON.GetCurrentSeason()
	end
	local f123_local2 = f0_local0( f123_arg1, f123_local0 )
	f123_local1 = OnlineChallenges[0x1EEE6570EF4BB8B]( f123_arg0, f123_local2 )
	if not f123_local1 then
		DebugPrint( "DEBUG BATTLEPASS: Challenge progress not found" .. ". controllerIndex=" .. tostring( f123_arg0 ) .. ", sectorIndex=" .. tostring( f123_arg1 ) .. ", season=" .. tostring( f123_local0 ) .. ", sectorAEID=" .. tostring( f123_local2 ) )
	end
	local f123_local3
	if not f123_local1 then
		f123_local3 = f123_local1
	else
		f123_local3 = {}
	end
	return f123_local3
end

BATTLEMAP.GetLimitedTimeSectorChallengeDesc = function ( f122_arg0, f122_arg1, f122_arg2 )
	local f122_local0 = assert
	local f122_local1
	if f122_arg0 then
		f122_local1 = f122_arg0
	elseif type( f122_arg0 ) ~= "number" or 0 > f122_arg0 then
		f122_local1 = false
	else
		f122_local1 = true
	end
	f122_local0( f122_local1 )
	f122_local0 = assert
	if f122_arg2 then
		f122_local1 = f122_arg2
	elseif type( f122_arg2 ) ~= "number" or 0 >= f122_arg2 then
		f122_local1 = false
	else
		f122_local1 = true
	end
	f122_local0( f122_local1 )
	f122_local0 = assert
	if f122_arg1 then
		f122_local1 = f122_arg1
	elseif type( f122_arg1 ) == "table" then
		f122_local1 = f122_arg1[f122_arg2]
	else
		f122_local1 = false
	end
	f122_local0( f122_local1 )
	f122_local0 = f122_arg1[f122_arg2].linkedChallengeID
	if not f122_local0 or f122_local0 == 0 then
		DebugPrint( "DEBUG BATTLEPASS: Limited time sector missing linked challenge ID" )
		return ""
	else
		local f122_local2 = f122_arg1[f122_arg2].linkedChallengeKind
		if not f122_local2 or #f122_local2 == 0 then
			DebugPrint( "DEBUG BATTLEPASS: Limited time sector missing aeKind for linked challenge" )
			return ""
		else
			f122_local1 = 0
			if not AEKinds[f122_local2] then
				DebugPrint( "DEBUG BATTLEPASS: Limited time sector aeKind for challenge invalid, aeKindName=" .. f122_local2 )
				return ""
			else
				return Challenge.GetDescLocalizedByID( f122_arg0, f122_local0, AEKinds[f122_local2].ID )
			end
		end
	end
end

BATTLEMAP.GetLimitedTimeSectorChallengeProgress = function ( f121_arg0, f121_arg1, f121_arg2 )
	local f121_local0 = assert
	local f121_local1
	if f121_arg0 then
		f121_local1 = f121_arg0
	elseif type( f121_arg0 ) ~= "number" or 0 > f121_arg0 then
		f121_local1 = false
	else
		f121_local1 = true
	end
	f121_local0( f121_local1 )
	f121_local0 = assert
	if f121_arg2 then
		f121_local1 = f121_arg2
	elseif type( f121_arg2 ) ~= "number" or 0 >= f121_arg2 then
		f121_local1 = false
	else
		f121_local1 = true
	end
	f121_local0( f121_local1 )
	f121_local0 = assert
	if f121_arg1 then
		f121_local1 = f121_arg1
	elseif type( f121_arg1 ) == "table" then
		f121_local1 = f121_arg1[f121_arg2]
	else
		f121_local1 = false
	end
	f121_local0( f121_local1 )
	f121_local0 = f121_arg1[f121_arg2].linkedChallengeID
	if not f121_local0 or f121_local0 == 0 then
		DebugPrint( "DEBUG BATTLEPASS: Limited time sector missing linked challenge ID" )
		return {}
	end
	local f121_local2 = OnlineChallenges[0x1EEE6570EF4BB8B]( f121_arg0, f121_local0 )
	if not f121_local2 then
		DebugPrint( "DEBUG BATTLEPASS: Challenge progress not found, aeID=" .. tostring( f121_local0 ) )
		return {}
	end
	f121_local1 = ""
	if f121_local2.progress and f121_local2.progress.default then
		f121_local1 = "default"
	elseif f121_local2.progress and f121_local2.progress.progress then
		f121_local1 = "progress"
	else
		DebugPrint( "DEBUG BATTLEPASS: Challenge progress key unknown, aeID=" .. tostring( f121_local0 ) )
		return {}
	end
	return {
		amount = f121_local2.progress[f121_local1],
		target = f121_local2.progress[f121_local1 .. "_target"]
	}
end

BATTLEMAP.IsSectorComplete = function ( f120_arg0, f120_arg1, f120_arg2 )
	local f120_local0 = assert
	local f120_local1
	if f120_arg0 then
		f120_local1 = f120_arg0
	elseif type( f120_arg0 ) ~= "number" or 0 > f120_arg0 then
		f120_local1 = false
	else
		f120_local1 = true
	end
	f120_local0( f120_local1 )
	f120_local0 = assert
	if f120_arg1 == nil or 0 >= f120_arg1 then
		f120_local1 = false
	else
		f120_local1 = true
	end
	f120_local0( f120_local1, "SectorIndex value should be valid and greater than 0." )
	f120_local0 = assert
	if f120_arg2 and (type( f120_arg2 ) ~= "number" or 0 > f120_arg2) then
		f120_local1 = false
	else
		f120_local1 = true
	end
	f120_local0( f120_local1 )
	if not f120_arg2 then
		f120_local0 = f120_arg2
	else
		f120_local0 = SEASON.GetCurrentSeason()
	end
	for f120_local4, f120_local5 in ipairs( BATTLEMAP.GetSectorProgress( f120_arg0, f120_arg1, f120_local0 ) ) do
		if not f120_local5 then
			return false
		end
	end
	return true
end

BATTLEMAP.GetTokenBalance = function ( f119_arg0, f119_arg1 )
	local f119_local0 = assert
	local f119_local1
	if f119_arg0 then
		f119_local1 = f119_arg0
	elseif type( f119_arg0 ) ~= "number" or 0 > f119_arg0 then
		f119_local1 = false
	else
		f119_local1 = true
	end
	f119_local0( f119_local1 )
	f119_local0 = f0_local0
	f119_local1 = f119_arg0
	local f119_local2 = BATTLEMAP.TokenBalanceUserStates
	local f119_local3
	if not f119_arg1 then
		f119_local3 = f119_arg1
	else
		f119_local3 = SEASON.GetCurrentSeason()
	end
	f119_local0 = f119_local0( f119_local1, f119_local2, f119_local3 )
	if CONDITIONS.IsConsoleGame() and GL_HACK.IsUsingTokenHack() then
		local f119_local4 = DataSources.alwaysLoaded.lockoutMenuCheck
		f119_local1 = DataSources.alwaysLoaded.currentPlayerTokenCount
		if f119_local1 then
			f119_local2 = f119_local1:GetValue( f119_arg0 )
			if f119_local4 then
				f119_local3 = f119_local4
			else
				f119_local3 = f119_local4:GetValue( f119_arg0 ) == true
			end
			local f119_local5
			if f119_local2 then
				f119_local5 = f119_local2
			else
				f119_local5 = f119_local2 ~= 0
			end
			if f119_local3 and f119_local5 and f119_local0 == 0 then
				return f119_local2
			end
			f119_local1:SetValue( f119_arg0, f119_local0 )
		end
	end
	return f119_local0
end

BATTLEMAP.GetAutoSpendTokenBalance = function ( f118_arg0, f118_arg1 )
	local f118_local0 = assert
	local f118_local1
	if f118_arg0 then
		f118_local1 = f118_arg0
	elseif type( f118_arg0 ) ~= "number" or 0 > f118_arg0 then
		f118_local1 = false
	else
		f118_local1 = true
	end
	f118_local0( f118_local1 )
	if not f118_arg1 then
		f118_local0 = f118_arg1
	else
		f118_local0 = SEASON.GetCurrentSeason()
	end
	local f118_local2 = assert
	local f118_local3
	if f118_local0 then
		f118_local3 = f118_local0
	elseif type( f118_local0 ) ~= "number" or 0 >= f118_local0 then
		f118_local3 = false
	else
		f118_local3 = true
	end
	f118_local2( f118_local3, "Battlemap autospend balance requires season 1 or later" )
	return f0_local0( f118_arg0, BATTLEMAP.AutoSpendTokenBalanceUserStates, f118_local0 )
end

BATTLEMAP.GetTokenMaxAvailable = function ( f117_arg0, f117_arg1 )
	local f117_local0 = assert
	local f117_local1
	if f117_arg0 then
		f117_local1 = f117_arg0
	elseif type( f117_arg0 ) ~= "number" or 0 > f117_arg0 then
		f117_local1 = false
	else
		f117_local1 = true
	end
	f117_local0( f117_local1 )
	f117_local0 = assert
	if f117_arg1 and (type( f117_arg1 ) ~= "number" or 0 >= f117_arg1) then
		f117_local1 = false
	else
		f117_local1 = true
	end
	f117_local0( f117_local1, "Season value should be valid and greater than 0 if provided." )
	if not f117_arg1 then
		f117_local0 = f117_arg1
	else
		f117_local0 = SEASON.GetCurrentSeason()
	end
	return f0_local0( f117_arg0, BATTLEMAP.TokenMaxAvailableUserStates, f117_local0 )
end

BATTLEMAP.GetRewardMaxAvailable = function ( f116_arg0 )
	local f116_local0 = assert
	local f116_local1
	if f116_arg0 then
		f116_local1 = f116_arg0
	elseif type( f116_arg0 ) ~= "number" or 0 > f116_arg0 then
		f116_local1 = false
	else
		f116_local1 = true
	end
	f116_local0( f116_local1 )
	f116_local0 = SEASON.GetCurrentSeason()
	local f116_local2 = BATTLEMAP.GetSeasonBundle( f116_local0 )
	f116_local1 = 0
	for f116_local3 = 1, #f116_local2[0x8C959E160CAD874], 1 do
		for f116_local9, f116_local10 in ipairs( BATTLEMAP.GetSectorProgress( f116_arg0, f116_local3, f116_local0 ) ) do
			if f116_local10 == false then
				f116_local1 = f116_local1 + 1
			end
		end
	end
	return f116_local1
end

BATTLEMAP.GetTokenGrindScale = function ( f115_arg0 )
	local f115_local0
	if not f115_arg0 then
		f115_local0 = f115_arg0
	else
		f115_local0 = SEASON.GetCurrentSeason()
	end
	local f115_local1 = assert
	local f115_local2
	if f115_local0 then
		f115_local2 = f115_local0
	elseif type( f115_local0 ) ~= "number" or 0 >= f115_local0 then
		f115_local2 = false
	else
		f115_local2 = true
	end
	f115_local1( f115_local2, "Battlemap requires season 1 or later" )
	if not BATTLEMAP.TOKEN_GRIND_SCALE then
		BATTLEMAP.TOKEN_GRIND_SCALE = {}
	end
	if BATTLEMAP.TOKEN_GRIND_SCALE[f115_local0] then
		return BATTLEMAP.TOKEN_GRIND_SCALE[f115_local0]
	end
	f115_local1 = BATTLEMAP.GetSeasonBundle( f115_local0 )
	local f115_local3
	if f115_local1 then
		f115_local3 = f115_local1
	else
		f115_local3 = f115_local1[0xD6963D8E0CB76CD]
	end
	if f115_local3 then
		f115_local2 = f115_local3
	else
		f115_local2 = Engine[0x6093D047200548]( "battlemaptokengrind:" .. f115_local3 )
	end
	BATTLEMAP.TOKEN_GRIND_SCALE[f115_arg0] = f115_local2
	return f115_local2
end

BATTLEMAP.GetRewardProgressGrindScale = function ( f114_arg0 )
	local f114_local0
	if not f114_arg0 then
		f114_local0 = f114_arg0
	else
		f114_local0 = SEASON.GetCurrentSeason()
	end
	local f114_local1 = assert
	local f114_local2
	if f114_local0 then
		f114_local2 = f114_local0
	elseif type( f114_local0 ) ~= "number" or 0 >= f114_local0 then
		f114_local2 = false
	else
		f114_local2 = true
	end
	f114_local1( f114_local2, "Battlemap requires season 1 or later" )
	if not BATTLEMAP.PROGRESS_GRIND_SCALE then
		BATTLEMAP.PROGRESS_GRIND_SCALE = {}
	end
	if BATTLEMAP.PROGRESS_GRIND_SCALE[f114_local0] then
		return BATTLEMAP.PROGRESS_GRIND_SCALE[f114_local0]
	end
	f114_local1 = BATTLEMAP.GetSeasonBundle( f114_local0 )
	local f114_local3
	if f114_local1 then
		f114_local3 = f114_local1
	else
		f114_local3 = f114_local1[0xD6963D8E0CB76CD]
	end
	if f114_local3 then
		f114_local2 = f114_local3
	else
		f114_local2 = Engine[0x6093D047200548]( "battlemaptokengrind:" .. f114_local3 )
	end
	BATTLEMAP.PROGRESS_GRIND_SCALE[f114_arg0] = f114_local2
	return f114_local2
end

BATTLEMAP.GetTokenIndexMax = function ()
	if not BATTLEMAP.TOKEN_INDEX_MAX then
		local f113_local0 = BATTLEMAP.GetTokenGrindScale( SEASON.GetCurrentSeason() )
		local f113_local1
		if f113_local0 then
			f113_local1 = f113_local0
		else
			f113_local1 = f113_local0[0x3933746819C1761]
			if f113_local1 then
				f113_local1 = #f113_local0[0x3933746819C1761]
			end
		end
		BATTLEMAP.TOKEN_INDEX_MAX = f113_local1
	end
	return BATTLEMAP.TOKEN_INDEX_MAX
end

BATTLEMAP.GetRewardProgressIndexMax = function ()
	if not BATTLEMAP.REWARD_INDEX_MAX then
		local f112_local0 = BATTLEMAP.GetRewardProgressGrindScale( SEASON.GetCurrentSeason() )
		local f112_local1
		if f112_local0 then
			f112_local1 = f112_local0
		else
			f112_local1 = f112_local0[0x3933746819C1761]
			if f112_local1 then
				f112_local1 = #f112_local0[0x3933746819C1761]
			end
		end
		BATTLEMAP.REWARD_INDEX_MAX = f112_local1
	end
	return BATTLEMAP.REWARD_INDEX_MAX
end

BATTLEMAP.GetTokenIndexForXP = function ( f111_arg0 )
	local f111_local0 = assert
	local f111_local1
	if f111_arg0 then
		f111_local1 = f111_arg0
	elseif type( f111_arg0 ) ~= "number" or 0 > f111_arg0 then
		f111_local1 = false
	else
		f111_local1 = true
	end
	f111_local0( f111_local1, "Battlemap XP value must be 0 or greater" )
	f111_local0 = 0
	local f111_local2 = BATTLEMAP.GetTokenGrindScale( SEASON.GetCurrentSeason() )
	for f111_local5, f111_local6 in ipairs( f111_local2[0x3933746819C1761] ) do
		if f111_arg0 < tonumber( f111_local6[0x8F14807B58DDF35] ) then
			return f111_local0
		end
		f111_local0 = f111_local5
	end
	return f111_local0
end

BATTLEMAP.GetRewardProgressIndexForXP = function ( f110_arg0 )
	local f110_local0 = assert
	local f110_local1
	if f110_arg0 then
		f110_local1 = f110_arg0
	elseif type( f110_arg0 ) ~= "number" or 0 > f110_arg0 then
		f110_local1 = false
	else
		f110_local1 = true
	end
	f110_local0( f110_local1, "Battlemap XP value must be 0 or greater" )
	f110_local0 = 0
	local f110_local2 = BATTLEMAP.GetRewardProgressGrindScale( SEASON.GetCurrentSeason() )
	for f110_local5, f110_local6 in ipairs( f110_local2[0x3933746819C1761] ) do
		if f110_arg0 < tonumber( f110_local6[0x8F14807B58DDF35] ) then
			return f110_local0
		end
		f110_local0 = f110_local5
	end
	return f110_local0
end

BATTLEMAP.GetXPForTokenIndex = function ( f109_arg0 )
	local f109_local0 = assert
	local f109_local1
	if f109_arg0 then
		f109_local1 = f109_arg0
	elseif type( f109_arg0 ) ~= "number" or 0 >= f109_arg0 then
		f109_local1 = false
	else
		f109_local1 = true
	end
	f109_local0( f109_local1, "Token index must be greater than 0" )
	f109_local0 = BATTLEMAP.GetTokenGrindScale( SEASON.GetCurrentSeason() )
	if f109_local0 and f109_local0[0x3933746819C1761] then
		assert( f109_arg0 <= #f109_local0[0x3933746819C1761], "Token index out of range. tokenIndex=" .. f109_arg0 )
		local f109_local2 = f109_local0[0x3933746819C1761][f109_arg0][0x8F14807B58DDF35]
		if f109_local2 then
			f109_local1 = f109_local2
		else
			f109_local1 = tonumber( f109_local2 ) or 0
		end
		return f109_local1
	else
		return 0
	end
end

BATTLEMAP.GetXPForRewardIndex = function ( f108_arg0 )
	local f108_local0 = assert
	local f108_local1
	if f108_arg0 then
		f108_local1 = f108_arg0
	elseif type( f108_arg0 ) ~= "number" or 0 >= f108_arg0 then
		f108_local1 = false
	else
		f108_local1 = true
	end
	f108_local0( f108_local1, "Token index must be greater than 0" )
	f108_local0 = BATTLEMAP.GetRewardProgressGrindScale( SEASON.GetCurrentSeason() )
	if f108_local0 and f108_local0[0x3933746819C1761] then
		assert( f108_arg0 <= #f108_local0[0x3933746819C1761], "Token index out of range. tokenIndex=" .. f108_arg0 )
		local f108_local2 = f108_local0[0x3933746819C1761][f108_arg0][0x8F14807B58DDF35]
		if f108_local2 then
			f108_local1 = f108_local2
		else
			f108_local1 = tonumber( f108_local2 ) or 0
		end
		return f108_local1
	else
		return 0
	end
end

BATTLEMAP.GetPercentToNextToken = function ( f107_arg0, f107_arg1 )
	local f107_local0 = assert
	local f107_local1
	if f107_arg0 then
		f107_local1 = f107_arg0
	elseif type( f107_arg0 ) ~= "number" or 0 > f107_arg0 then
		f107_local1 = false
	else
		f107_local1 = true
	end
	f107_local0( f107_local1 )
	f107_local0 = assert
	if f107_arg1 then
		f107_local1 = f107_arg1
	elseif type( f107_arg1 ) ~= "number" or 0 > f107_arg1 then
		f107_local1 = false
	else
		f107_local1 = true
	end
	f107_local0( f107_local1, "Battlemap XP value must be 0 or greater" )
	if BATTLEMAP.GetTokenMaxAvailable( f107_arg0 ) == 0 then
		return 0
	end
	f107_local0 = BATTLEMAP.GetTokenIndexForXP( f107_arg1 )
	if f107_local0 >= BATTLEMAP.GetTokenIndexMax() then
		return 0
	end
	local f107_local2 = BATTLEMAP.GetXPForTokenIndex( f107_local0 )
	f107_local1 = f107_local2
	if f107_local0 < BATTLEMAP.GetTokenIndexMax() then
		f107_local1 = BATTLEMAP.GetXPForTokenIndex( f107_local0 + 1 )
	end
	assert( 0 < f107_local1 )
	local f107_local3 = assert
	local f107_local4
	if f107_local2 > f107_arg1 or f107_arg1 > f107_local1 then
		f107_local4 = false
	else
		f107_local4 = true
	end
	f107_local3( f107_local4 )
	return (f107_arg1 - f107_local2) / (f107_local1 - f107_local2)
end

BATTLEMAP.GetPercentToNextReward = function ( f106_arg0, f106_arg1 )
	local f106_local0 = assert
	local f106_local1
	if f106_arg0 then
		f106_local1 = f106_arg0
	elseif type( f106_arg0 ) ~= "number" or 0 > f106_arg0 then
		f106_local1 = false
	else
		f106_local1 = true
	end
	f106_local0( f106_local1 )
	f106_local0 = assert
	if f106_arg1 then
		f106_local1 = f106_arg1
	elseif type( f106_arg1 ) ~= "number" or 0 > f106_arg1 then
		f106_local1 = false
	else
		f106_local1 = true
	end
	f106_local0( f106_local1, "Battlemap XP value must be 0 or greater" )
	if BATTLEMAP.GetRewardMaxAvailable( f106_arg0 ) == 0 then
		return 0
	end
	f106_local0 = BATTLEMAP.GetRewardProgressIndexForXP( f106_arg1 )
	if f106_local0 >= BATTLEMAP.GetRewardProgressIndexMax() then
		return 0
	end
	local f106_local2 = BATTLEMAP.GetXPForRewardIndex( f106_local0 )
	f106_local1 = f106_local2
	if f106_local0 < BATTLEMAP.GetRewardProgressIndexMax() then
		f106_local1 = BATTLEMAP.GetXPForRewardIndex( f106_local0 + 1 )
	end
	assert( 0 < f106_local1 )
	local f106_local3 = assert
	local f106_local4
	if f106_local2 > f106_arg1 or f106_arg1 > f106_local1 then
		f106_local4 = false
	else
		f106_local4 = true
	end
	f106_local3( f106_local4 )
	return (f106_arg1 - f106_local2) / (f106_local1 - f106_local2)
end

BATTLEMAP.OnboardingGrantToken = function ( f100_arg0, f100_arg1, f100_arg2 )
	local f100_local0 = assert
	local f100_local1
	if f100_arg0 then
		f100_local1 = f100_arg0
	else
		f100_local1 = type( f100_arg0 ) == "userdata"
	end
	f100_local0( f100_local1 )
	f100_local0 = assert
	if f100_arg1 then
		f100_local1 = f100_arg1
	elseif type( f100_arg1 ) ~= "number" or 0 > f100_arg1 then
		f100_local1 = false
	else
		f100_local1 = true
	end
	f100_local0( f100_local1 )
	f100_local0 = assert
	if f100_arg2 then
		f100_local1 = f100_arg2
	else
		f100_local1 = type( f100_arg2 ) == "function"
	end
	f100_local0( f100_local1 )
	local f100_local2 = tonumber( StringTable[0x2DCF0973239E909]( CSV.aeManualAchievementIDs.file, CSV.aeManualAchievementIDs.cols.ref, "IW9_BATTLEPASS_ONBOARDING_ACHIEVEMENT_ID", CSV.aeManualAchievementIDs.cols.id ) )
	assert( f100_local2, "Battlepass onboarding achievement id is missing" )
	f100_local1 = function ()
		local f102_local0 = "bp_onboarding_user_state_timer"
		local f102_local1 = "bp_onboarding_user_state_timer_event"
		local self = LUI.UITimer.new( {
			interval = -28,
			event = f102_local1,
			eventTarget = f100_arg0
		} )
		self.id = "bp_onboarding_user_state_timer"
		self.onComplete = f100_arg0
		self.Close = function ( f105_arg0 )
			f102_local0[f102_local0] = nil
			f105_arg0:closeTree()
		end
		
		self:registerEventHandler( f102_local1, function ( self, event )
			if not self._totalWaitTime then
				self._totalWaitTime = 0
			else
				assert( self.interval )
				self._totalWaitTime = self._totalWaitTime + self.interval
			end
			if 10000 <= self._totalWaitTime then
				self:Close()
				f102_local0( false )
			end
		end )
		self:registerEventHandler( "user_state_updated", function ( self, event )
			self:Close()
			f102_local0( event.success )
		end )
		f100_arg0:addElement( self )
		f100_arg0[f102_local0] = self
	end
	
	local f100_local3 = OnlineChallenges[0x6AE20EF4832FEF]( f100_arg1, f100_local2, AEKinds.IW9_AE_KIND_BATTLEPASS.ID, AEGameEvents.iw9_battlemap_onboarding.eventID, 1, AEGameEventKeys.iw9_season.keyID, SEASON.GetCurrentSeason() )
	if f100_local3 then
		f100_arg0:registerEventHandler( "OnAchievementActivated", function ( element, event )
			if event.kind == AEKinds.IW9_AE_KIND_BATTLEPASS.ID and f100_arg0 == event.id then
				element:deregisterEventHandler( f100_arg0 )
				if event.success then
					OnlineProgression[0xE826BFCAE818EF0]( f100_arg0 )
					f100_arg0()
				end
			end
		end )
	end
	return f100_local3
end

BATTLEMAP.CheckRequestTokenBalance = function ( f98_arg0, f98_arg1, f98_arg2 )
	local f98_local0 = DataSources.alwaysLoaded.battlepassShouldRequestTokens
	if f98_local0 and f98_local0:GetValue( f98_arg1 ) then
		OnlineProgression[0xE826BFCAE818EF0]( f98_arg1 )
		f98_local0:SetValue( f98_arg1, false )
		f98_arg0:registerEventHandler( "user_state_updated", function ( element, event )
			if event.success then
				f98_arg0()
			end
			element:deregisterEventHandler( "user_state_updated" )
		end )
	end
end

BATTLEMAP.GetSectorDisplayName = function ( f97_arg0, f97_arg1, f97_arg2 )
	if f97_arg1 then
		if f97_arg0 == 0 then
			return Engine[0xED84C33EC5F01EA]( 0x3B55F90214BA52B )
		elseif f97_arg0 == BATTLEMAP.FINAL_SECTOR then
			return Engine[0xED84C33EC5F01EA]( 0xCCD8151440EC108 )
		elseif f97_arg0 == BATTLEMAP.BLACK_CELL then
			return Engine[0xED84C33EC5F01EA]( 0xA155DE722C18B7E )
		end
	end
	if f97_arg0 == BATTLEMAP.LIMITED_TIME_SECTOR then
		f97_arg0 = 0
	end
	local f97_local0
	if f97_arg2 and not f97_arg2 then
		f97_local0 = f97_arg2
	else
		f97_local0 = SEASON.GetCurrentSeason()
	end
	return Engine[0x7D3158A9539A355]( string.char( string.byte( "A" ) + f97_local0 - 1 ) .. f97_arg0 )
end

local f0_local19 = function ( f95_arg0, f95_arg1, f95_arg2 )
	if not BATTLEMAP.STREAMING_SECTOR_ASSETS then
		BATTLEMAP.STREAMING_SECTOR_ASSETS = {}
	end
	if not BATTLEMAP.STREAMING_SECTOR_ASSETS[f95_arg1] then
		BATTLEMAP.STREAMING_SECTOR_ASSETS[f95_arg1] = {}
	end
	local f95_local0 = BATTLEMAP.GetSectorRewards( f95_arg1, f95_arg2 )
	if not BATTLEMAP.STREAMING_SECTOR_ASSETS[f95_arg1][f95_arg2] then
		BATTLEMAP.STREAMING_SECTOR_ASSETS[f95_arg1][f95_arg2] = {}
		for f95_local1 = 1, BATTLEMAP.NUM_UNLOCKS_PER_SECTOR, 1 do
			if f95_local0[f95_local1] then
				local f95_local4 = BATTLEMAP.GetBattleMapSectorRewards( f95_local0[f95_local1][0x3E3665069C49994] )
				local f95_local5 = tonumber( f95_local4[0x43EB98C952E0F8B][1][0x28887F70BF5EBA] )
				local f95_local6 = LOOT.GetTypeForID( f95_local5 )
				local f95_local7 = LOOT.GetItemRef( f95_local5 )
				local f95_local8 = f95_local4[0x43EB98C952E0F8B][1][0x4E90D9E0484ACD2]
				if String.IsNilOrEmpty( f95_local8 ) and not String.IsNilOrEmpty( f95_local7 ) then
					local f95_local9 = function ()
						local f96_local0 = nil
						if Dvar[0x9E5BE3B4BBA4E0E]( 0x8E6C20FE1BA6370 ) then
							local f96_local1, f96_local2 = pcall( LOOT.GetItemImage, f95_arg0, f95_arg0, f95_arg0 )
							if not f96_local1 then
								assert( f96_local1, "LOOT.GetItemImage error lootType:" .. tostring( f95_arg0 ) .. ", lootRef:" .. tostring( f95_arg0 ) .. ", unlockLootId:" .. tostirng( f95_arg0 ) )
							end
							f96_local0 = f96_local2
						elseif f95_arg0 == LOOT.itemTypes.CURRENCY_PACK then
							f96_local0 = 0x7DB798C35C53E98
						else
							f96_local0 = LOOT.GetItemImage( f95_arg0, f95_arg0, f95_arg0 )
						end
						return f96_local0
					end
					
					if f95_local6 == LOOT.itemTypes.OPERATOR then
						local f95_local10 = OPERATOR.GetTorso( f95_local7 )
						if not f95_local10 then
							f95_local8 = f95_local10
						end
					end
					f95_local8 = f95_local9()
				end
				local f95_local9, f95_local10 = nil
				for f95_local15, f95_local16 in ipairs( f95_local4[0x43EB98C952E0F8B] ) do
					if f95_local16[0x298D7E844F0DE30] then
						local f95_local14 = f95_local16[0x4E90D9E0484ACD2]
						if not f95_local14 then
						
						else
							f95_local9 = LOOT.GetItemImageByID( f95_local16[0x28887F70BF5EBA] )
						end
						f95_local9 = f95_local14
					end
				end
				f95_local11 = f95_local4[0x43EB98C952E0F8B][1][0x6A7F6B5686DF581]
				f95_local12 = {
					lootImage = f95_local8,
					blackCellLootImage = f95_local9
				}
				if String.IsNilOrEmpty( f95_local11 ) and not f95_local8 then
					f95_local13 = f95_local8
				else
					f95_local13 = f95_local11
				end
				f95_local12.mapOverride = f95_local13
				if String.IsNilOrEmpty( f95_local10 ) and not f95_local9 then
					f95_local13 = f95_local9
				else
					f95_local13 = f95_local10
				end
				f95_local12.blackCellMapOverride = f95_local13
				f95_local12.modelXAnim = f95_local4[0x55F119793EAA4DF]
				BATTLEMAP.STREAMING_SECTOR_ASSETS[f95_arg1][f95_arg2][f95_local1] = f95_local12
			end
		end
	end
	return BATTLEMAP.STREAMING_SECTOR_ASSETS[f95_arg1][f95_arg2]
end

local f0_local20 = function ( f94_arg0, f94_arg1 )
	local f94_local0 = 0
	for f94_local5, f94_local6 in ipairs( f94_arg0 ) do
		if f94_arg1 == LOOT.itemTypes.CURRENCY_PACK then
			local f94_local4 = tonumber( StringTable[0x2DCF0973239E909]( CSV.currencyPacksTable.file, CSV.currencyPacksTable.cols.id, f94_local6[0x28887F70BF5EBA], CSV.currencyPacksTable.cols.count ) )
			if f94_local4 then
				f94_local0 = f94_local0 + f94_local4
			end
		end
	end
	return f94_local0
end

BATTLEMAP.IsRewardOwned = function ( f93_arg0, f93_arg1, f93_arg2, f93_arg3 )
	local f93_local0 = BATTLEMAP.GetSectorType( f93_arg0, f93_arg2 )
	if f93_local0 == BATTLEMAP.SectorType.INSTANT then
		return BATTLEPASS.IsOwned( f93_arg0, f93_arg1 )
	elseif f93_local0 == BATTLEMAP.SectorType.FINAL then
		return BATTLEMAP.GetSectorState( f93_arg0, f93_arg2, f93_arg1 ) == BATTLEMAP.SectorState.COMPLETED
	elseif f93_local0 == BATTLEMAP.SectorType.BLACK_CELL then
		return BATTLEPASS.IsBlackCellOwned( f93_arg0, f93_arg1 )
	else
		return f93_arg3
	end
end

BATTLEMAP.GetSectorUnlockData = function ( f90_arg0, f90_arg1, f90_arg2 )
	local f90_local0 = {}
	local f90_local1 = BATTLEMAP.GetSectorRewards( f90_arg1, f90_arg2 )
	local f90_local2 = BATTLEMAP.GetSectorProgress( f90_arg0, f90_arg2, f90_arg1 )
	local f90_local3 = BATTLEMAP.GetSectorType( f90_arg0, f90_arg2, f90_arg1 )
	local f90_local4 = true
	if not BATTLEMAP.SECTOR_UNLOCK_DATA then
		BATTLEMAP.SECTOR_UNLOCK_DATA = {}
	end
	if not BATTLEMAP.SECTOR_UNLOCK_DATA[f90_arg1] then
		BATTLEMAP.SECTOR_UNLOCK_DATA[f90_arg1] = {}
	end
	if not BATTLEMAP.SECTOR_UNLOCK_DATA[f90_arg1][f90_arg2] then
		BATTLEMAP.SECTOR_UNLOCK_DATA[f90_arg1][f90_arg2] = {}
		for f90_local5 = 1, BATTLEMAP.NUM_UNLOCKS_PER_SECTOR, 1 do
			if f90_local1 and f90_local1[f90_local5] then
				local f90_local8 = BATTLEMAP.GetBattleMapSectorRewards( f90_local1[f90_local5][0x3E3665069C49994] )
				local f90_local9 = GL_HACK.GetCorrectLootID( f90_arg1, f90_arg2, tonumber( f90_local8[0x43EB98C952E0F8B][1][0x28887F70BF5EBA] ) )
				local f90_local10 = LOOT.GetTypeForID( f90_local9 )
				local f90_local11 = LOOT.GetItemRef( f90_local9 )
				local f90_local12 = f90_local8[0x43EB98C952E0F8B][1][0x4BF36E7EED39F1C]
				local f90_local13 = f90_local8[0x43EB98C952E0F8B][1][0x4E90D9E0484ACD2]
				if String.IsNilOrEmpty( f90_local13 ) and not String.IsNilOrEmpty( f90_local11 ) then
					local f90_local14 = function ()
						local f92_local0 = nil
						if Dvar[0x9E5BE3B4BBA4E0E]( 0x8E6C20FE1BA6370 ) then
							local f92_local1, f92_local2 = pcall( LOOT.GetItemImage, f90_arg0, f90_arg0, f90_arg0 )
							if not f92_local1 then
								assert( f92_local1, " LOOT.GetItemImage error lootType:" .. tostring( f90_arg0 ) .. ", lootRef:" .. tostring( f90_arg0 ) .. ", unlockLootId:" .. tostirng( f90_arg0 ) )
							end
							f92_local0 = f92_local2
						elseif f90_arg0 == LOOT.itemTypes.CURRENCY_PACK then
							f92_local0 = 0x7DB798C35C53E98
						else
							f92_local0 = LOOT.GetItemImage( f90_arg0, f90_arg0, f90_arg0 )
						end
						return f92_local0
					end
					
					if f90_local10 == LOOT.itemTypes.OPERATOR then
						local f90_local15 = OPERATOR.GetTorso( f90_local11 )
						if not f90_local15 then
							f90_local13 = f90_local15
						end
					end
					f90_local13 = f90_local14()
				end
				local f90_local14 = BATTLEMAP.IsRewardOwned( f90_arg0, f90_arg1, f90_arg2, f90_local2[f90_local5] )
				if f90_local5 < BATTLEMAP.NUM_UNLOCKS_PER_SECTOR and not f90_local14 then
					f90_local4 = false
				end
				local f90_local15, f90_local16, f90_local17, f90_local18, f90_local19, f90_local20, f90_local21, f90_local22, f90_local23, f90_local24, f90_local25, f90_local26 = nil
				for f90_local27 = 2, #f90_local8[0x43EB98C952E0F8B], 1 do
					local f90_local30 = f90_local8[0x43EB98C952E0F8B][f90_local27]
					if not f90_local15 and f90_local30[0x298D7E844F0DE30] then
						f90_local15 = f90_local30[0x28887F70BF5EBA]
						local f90_local31 = f90_local30[0x4E90D9E0484ACD2]
						if not f90_local31 then
							f90_local16 = f90_local31
						else
							f90_local16 = LOOT.GetItemImageByID( f90_local15 )
						end
						f90_local17 = f90_local30[0x6A7F6B5686DF581]
						f90_local18 = LOOT.GetItemName( LOOT.GetTypeForID( f90_local30[0x28887F70BF5EBA] ), LOOT.GetItemRef( f90_local30[0x28887F70BF5EBA] ), f90_local30[0x28887F70BF5EBA] )
						f90_local19 = f90_local30[0x4BF36E7EED39F1C]
						if not CONDITIONS.IsMobileOrMobileSim() then
							break
						end
					end
					if CONDITIONS.IsMobileOrMobileSim() then
						local f90_local31 = f90_local30[0x28887F70BF5EBA]
						local f90_local32 = LOOT.GetTypeForID( f90_local31 )
						local f90_local33 = LOOT.IsItemAvailableForCurrentProjectFromLootId( f90_local32, f90_local31 )
						local f90_local34 = LOOT.GetItemAvailableProjectsArrayFromLootId( f90_local32, f90_local31 )
						local f90_local35
						if f90_local34 then
							f90_local35 = f90_local34
						elseif #f90_local34 == 1 then
							f90_local35 = f90_local33
						else
							f90_local35 = false
						end
						if not f90_local20 and f90_local35 then
							local f90_local36 = LOOT.GetItemRef( f90_local31 )
							f90_local22 = f90_local36
							f90_local21 = f90_local32
							f90_local20 = f90_local31
							f90_local23 = LOOT.GetItemName( f90_local32, f90_local36, f90_local31 )
							local f90_local37 = f90_local30[0x4E90D9E0484ACD2]
							if not f90_local37 then
								f90_local24 = f90_local37
							else
								f90_local24 = LOOT.GetItemImageByID( f90_local20 )
							end
							f90_local25 = f90_local30[0x6A7F6B5686DF581]
							f90_local26 = f90_local30[0x4BF36E7EED39F1C]
						end
						if f90_local15 and f90_local20 then
							break
						end
					end
				end
				local f90_local27 = f90_local8[0x43EB98C952E0F8B][1][0x6A7F6B5686DF581]
				local f90_local28 = f90_local8[0x43EB98C952E0F8B][1][0x154672176D36953]
				local f90_local29 = f90_local8[0x43EB98C952E0F8B][1][0x1875646949A66C7]
				local f90_local38, f90_local30 = nil
				if f90_local3 == BATTLEMAP.SectorType.LIMITED_TIME then
					f90_local38 = f90_local8[0x237D708001D7846]
					f90_local30 = f90_local8[0x9314B8B6FD92AC1]
				end
				local f90_local31 = nil
				if Dvar[0x9E5BE3B4BBA4E0E]( 0x8E6C20FE1BA6370 ) then
					local f90_local32, f90_local33 = pcall( LOOT.GetItemName, f90_local10, f90_local11, f90_local9 )
					if not f90_local32 then
						assert( f90_local32, "LOOT.GetItemName error lootType:" .. tostring( f90_local10 ) .. ", lootRef:" .. tostring( f90_local11 ) .. ", unlockLootId:" .. tostirng( f90_local9 ) )
						f90_local33 = ""
					end
					f90_local31 = f90_local33
				else
					f90_local31 = LOOT.GetItemName( f90_local10, f90_local11, f90_local9 )
				end
				local f90_local32 = function ( f91_arg0, f91_arg1 )
					local f91_local0 = f91_arg0
					if String.IsNilOrEmpty( f91_arg0 ) then
						if String.IsNilOrEmpty( f91_arg1 ) then
							f91_local0 = 0xC0A944FD8921418
						else
							f91_local0 = f91_arg1
						end
					end
					return f91_local0
				end
				
				local f90_local33 = {
					lootID = f90_local9,
					lootType = f90_local10,
					lootRef = f90_local11,
					lootName = f90_local31,
					lootNameOverride = f90_local12,
					lootImage = f90_local13,
					isOwned = f90_local14,
					isFree = f90_local8[0xBEBFE18E2D7346B],
					rewardRef = f90_local1[f90_local5][0x3E3665069C49994]
				}
				local f90_local34
				if f90_local5 >= BATTLEMAP.NUM_UNLOCKS_PER_SECTOR then
					if f90_local5 == BATTLEMAP.NUM_UNLOCKS_PER_SECTOR then
						f90_local34 = f90_local4
					else
						f90_local34 = false
					end
				else
					f90_local34 = true
				end
				f90_local33.isUnlocked = f90_local34
				f90_local34 = f90_local8[0x4A1C56BD037FC89]
				if not f90_local34 then
					f90_local34 = f90_local5 == BATTLEMAP.NUM_UNLOCKS_PER_SECTOR
				end
				f90_local33.isHVT = f90_local34
				f90_local33.isChase = f90_local8[0x55EC55EBC7E91CD]
				f90_local33.modelName = f90_local8[0x2B9125D5FFE831F]
				f90_local33.bgModelName = f90_local8[0x6344311B59287BA]
				f90_local33.blackcellModelName = f90_local8[0x3083DDB85D3878E]
				f90_local33.blackcellbgModelName = f90_local8[0xD386F778F28CDE3]
				f90_local34 = f90_local8[0x1416E80A3F9F9F6]
				if not f90_local34 then
					f90_local34 = 0
				end
				f90_local33.rotationOffset = f90_local34
				f90_local34 = {}
				local f90_local35 = f90_local8[0x69C7ADAFC4640C4]
				if not f90_local35 then
					f90_local35 = 0
				end
				f90_local34.x = f90_local35
				f90_local35 = f90_local8[0xE1695DE4C7EE517]
				if not f90_local35 then
					f90_local35 = 0
				end
				f90_local34.y = f90_local35
				f90_local35 = f90_local8[0xC083CBD15FAC56A]
				if not f90_local35 then
					f90_local35 = 0
				end
				f90_local34.z = f90_local35
				f90_local33.bgOffset = f90_local34
				f90_local33.unlockVfx = f90_local8[0xCF604821145CB4F]
				f90_local33.unlockVfxFree = f90_local8[0xE062E56C14C3E6D]
				f90_local33.ambientVfx = f90_local8[0xC48FBF2096CCE91]
				f90_local33.visionSetLocked = f90_local8[0x8A06B1D25958159]
				f90_local33.visionSetUnlocked = f90_local8[0x61BCA5BDA28B656]
				f90_local33.rotationUpperLimit = f90_local8[0xBDF5C8CC0C37187]
				f90_local33.rotationLowerLimit = f90_local8[0xA4F9A4E9D855BC]
				f90_local33.sectorIndex = f90_arg2
				f90_local33.sectorRewardIndex = f90_local5
				f90_local33.hudOutline = f90_local8[0xAF718F456E0B383]
				f90_local33.blackCellLootID = f90_local15
				f90_local33.blackCellLootName = f90_local18
				f90_local33.blackCellLootImage = String.IsNilOrEmpty( f90_local16 ) and 0xC0A944FD8921418 or f90_local16
				f90_local33.blackCellLootNameOverride = f90_local19
				f90_local33.mobileLootID = f90_local20
				f90_local33.mobileLootRef = f90_local22
				f90_local33.mobileLootType = f90_local21
				f90_local33.mobileLootName = f90_local23
				f90_local33.mobileLootImage = f90_local24
				f90_local33.mobileLootNameOverride = f90_local26
				if String.IsNilOrEmpty( f90_local25 ) and not f90_local24 then
					f90_local34 = f90_local24
				else
					f90_local34 = f90_local25
				end
				f90_local33.mobileMapOverride = f90_local34
				if String.IsNilOrEmpty( f90_local27 ) and not f90_local13 then
					f90_local34 = f90_local13
				else
					f90_local34 = f90_local27
				end
				f90_local33.mapOverride = f90_local34
				f90_local33.blackCellMapOverride = f90_local32( f90_local17, f90_local16 )
				f90_local33.aarRenderImage = String.IsNilOrEmpty( f90_local28 ) and 0xC0A944FD8921418 or f90_local28
				f90_local33.aarRenderMask = String.IsNilOrEmpty( f90_local29 ) and 0x8FE1BA59554C5AF or f90_local29
				f90_local33.modelXAnim = f90_local8[0x55F119793EAA4DF]
				f90_local33.currencyPackAmount = f0_local0( f90_local8[0x43EB98C952E0F8B], f90_local10 )
				f90_local33.linkedChallengeID = f90_local38
				f90_local33.linkedChallengeKind = f90_local30
				BATTLEMAP.SECTOR_UNLOCK_DATA[f90_arg1][f90_arg2][f90_local5] = f90_local33
			end
		end
	else
		for f90_local5 = 1, BATTLEMAP.NUM_UNLOCKS_PER_SECTOR, 1 do
			local f90_local8 = BATTLEMAP.IsRewardOwned( f90_arg0, f90_arg1, f90_arg2, f90_local2[f90_local5] )
			if f90_local5 < BATTLEMAP.NUM_UNLOCKS_PER_SECTOR and not f90_local8 then
				f90_local4 = false
			end
			if f90_local1[f90_local5] then
				local f90_local9 = BATTLEMAP.SECTOR_UNLOCK_DATA[f90_arg1][f90_arg2][f90_local5]
				local f90_local10
				if f90_local5 >= BATTLEMAP.NUM_UNLOCKS_PER_SECTOR then
					if f90_local5 == BATTLEMAP.NUM_UNLOCKS_PER_SECTOR then
						f90_local10 = f90_local4
					else
						f90_local10 = false
					end
				else
					f90_local10 = true
				end
				f90_local9.isUnlocked = f90_local10
				f90_local9.isOwned = f90_local8
			end
		end
	end
	return BATTLEMAP.SECTOR_UNLOCK_DATA[f90_arg1][f90_arg2]
end

BATTLEMAP.GetUnlockableDataByRewardIndex = function ( f89_arg0, f89_arg1, f89_arg2, f89_arg3 )
	if not BATTLEMAP.SECTOR_UNLOCK_DATA then
		BATTLEMAP.SECTOR_UNLOCK_DATA = {}
	end
	if not BATTLEMAP.SECTOR_UNLOCK_DATA[f89_arg1] then
		BATTLEMAP.SECTOR_UNLOCK_DATA[f89_arg1] = {}
	end
	if not BATTLEMAP.SECTOR_UNLOCK_DATA[f89_arg1][f89_arg2] then
		local f89_local0 = BATTLEMAP.GetSectorUnlockData( f89_arg0, f89_arg1, f89_arg2 )
	end
	return BATTLEMAP.SECTOR_UNLOCK_DATA[f89_arg1][f89_arg2][f89_arg3]
end

local f0_local21 = function ( f88_arg0, f88_arg1, f88_arg2, f88_arg3 )
	local f88_local0 = SEASON.GetCurrentSeason()
	local f88_local1 = BATTLEMAP.CanGetSectorState( BATTLEMAP.GetSectorType( f88_arg0, f88_arg1, f88_local0 ) )
	for f88_local7, f88_local8 in ipairs( BATTLEMAP.GetSectorUnlockData( f88_arg0, f88_local0, f88_arg1 ) ) do
		local f88_local9 = SEASON.GetCurrentSeason()
		local f88_local6 = 1
		if f88_local1 then
			f88_local8.tierIndex = f88_arg3
			f88_local8.tierPosition = f88_local6
			f88_local8.rewardType = BATTLEPASS.REWARD_TYPE.NORMAL
			f88_arg3 = f88_arg3 + 1
		end
		table.insert( f88_arg2, f88_local8 )
		if Dvar[0x9E5BE3B4BBA4E0E]( 0x49D6A9B706B9809 ) and f88_local8.blackCellLootID then
			local f88_local5 = Table.ShallowCopy( f88_local8 )
			f88_local6 = f88_local6 + 1
			f88_local5.tierPosition = f88_local6
			f88_local5.isChase = false
			f88_local5.lootID = f88_local8.blackCellLootID
			f88_local5.lootImage = f88_local8.blackCellLootImage
			f88_local5.modelName = f88_local8.blackcellModelName
			f88_local5.bgModelName = f88_local8.blackcellbgModelName
			f88_local5.mapOverride = f88_local8.blackCellMapOverride
			f88_local5.sectorRewardIndex = f88_local8.sectorRewardIndex
			f88_local5.rewardType = BATTLEPASS.REWARD_TYPE.BLACKCELL
			table.insert( f88_arg2, f88_local5 )
		end
		if Dvar[0x9E5BE3B4BBA4E0E]( 0x454713D8EF05419 ) and f88_local8.mobileLootID then
			local f88_local5 = Table.ShallowCopy( f88_local8 )
			f88_local5.tierPosition = f88_local6 + 1
			f88_local5.isChase = false
			f88_local5.lootID = f88_local8.mobileLootID
			f88_local5.lootType = f88_local8.mobileLootType
			f88_local5.lootImage = f88_local8.mobileLootImage
			f88_local5.mapOverride = f88_local8.mobileMapOverride
			f88_local5.sectorRewardIndex = f88_local8.sectorRewardIndex
			f88_local5.rewardType = BATTLEPASS.REWARD_TYPE.MOBILE
			table.insert( f88_arg2, f88_local5 )
		end
	end
	return f88_arg3
end

local f0_local22 = function ( f87_arg0, f87_arg1 )
	local f87_local0 = nil
	local f87_local1 = true
	local f87_local2 = false
	for f87_local6, f87_local7 in ipairs( f87_arg0 ) do
		if f87_local7 == f87_arg1 then
			f87_local0 = f87_local6
		end
	end
	f87_local3 = #f87_arg0
	f87_local4 = f87_local3 / 2
	if f87_local3 % 2 == 0 then
		if f87_arg1 == f87_arg0[f87_local4 + 1] then
			f87_local1 = false
			f87_local2 = true
		end
	elseif f87_arg1 == f87_arg0[math.ceil( f87_local4 )] then
		f87_local1 = false
		f87_local2 = false
	end
	return f87_local1, f87_local2, f87_local0
end

local f0_local23 = function ( f86_arg0 )
	local f86_local0 = {}
	local f86_local1 = {}
	for f86_local2 = 1, #f86_arg0, 1 do
		if f86_arg0[f86_local2].tierIndex then
			local f86_local5 = f86_arg0[f86_local2].tierIndex
			if f86_local1[f86_local5] == nil then
				f86_local1[f86_local5] = true
			end
			if f86_local1[f86_local5] == true then
				f86_local0[f86_local5] = {}
			end
		end
	end
	for f86_local2 = 1, #f86_arg0, 1 do
		if f86_arg0[f86_local2].tierIndex then
			local f86_local5 = f86_arg0[f86_local2].tierIndex
			if f86_local0[f86_local5] ~= nil then
				table.insert( f86_local0[f86_local5], f86_local2 )
			end
		end
	end
	return f86_local0
end

local f0_local24 = function ( f85_arg0 )
	local f85_local0 = f0_local0( f85_arg0 )
	for f85_local1 = 1, #f85_arg0, 1 do
		local f85_local4 = f85_arg0[f85_local1].tierIndex
		if f85_local0[f85_local4] then
			local f85_local5, f85_local6, f85_local7 = f0_local0( f85_local0[f85_local4], f85_local1 )
			f85_arg0[f85_local1].blackCellGroupData = {
				indexInGroup = f85_local7,
				groupLength = #f85_local0[f85_local4],
				hideTierNumber = f85_local5,
				alignLeft = f85_local6
			}
		end
	end
end

BATTLEMAP.MobileBuildLinearRewardsData = function ( f84_arg0, f84_arg1 )
	local f84_local0
	if not f84_arg1 then
		f84_local0 = f84_arg1
	else
		f84_local0 = SEASON.GetCurrentSeason()
	end
	if not BATTLEMAP.LINEAR_UNLOCK_DATA then
		BATTLEMAP.LINEAR_UNLOCK_DATA = {}
	end
	if not BATTLEMAP.LINEAR_UNLOCK_DATA[f84_local0] then
		BATTLEMAP.LINEAR_UNLOCK_DATA[f84_local0] = {}
		local f84_local1 = 1
		if Dvar[0x9E5BE3B4BBA4E0E]( 0x49D6A9B706B9809 ) then
			f84_local1 = f0_local0( f84_arg0, BATTLEMAP.BLACK_CELL, BATTLEMAP.LINEAR_UNLOCK_DATA[f84_local0], f84_local1 )
		end
		for f84_local2 = BATTLEMAP.BONUS_SECTOR_INDEX, BATTLEMAP.FINAL_SECTOR, 1 do
			f84_local1 = f0_local0( f84_arg0, f84_local2, BATTLEMAP.LINEAR_UNLOCK_DATA[f84_local0], f84_local1 )
		end
		f0_local0( BATTLEMAP.LINEAR_UNLOCK_DATA[f84_local0] )
	end
end

BATTLEMAP.MobileRebuildLinearRewardsData = function ( f83_arg0, f83_arg1 )
	local f83_local0
	if not f83_arg1 then
		f83_local0 = f83_arg1
	else
		f83_local0 = SEASON.GetCurrentSeason()
	end
	BATTLEMAP.LINEAR_UNLOCK_DATA = {}
	BATTLEMAP.SECTOR_UNLOCK_DATA = {}
	BATTLEMAP.MobileBuildLinearRewardsData( f83_arg0, f83_local0 )
end

BATTLEMAP.MobileGetLinearRewardsData = function ( f82_arg0, f82_arg1 )
	local f82_local0
	if not f82_arg1 then
		f82_local0 = f82_arg1
	else
		f82_local0 = SEASON.GetCurrentSeason()
	end
	BATTLEMAP.MobileBuildLinearRewardsData( f82_arg0, f82_arg1 )
	return BATTLEMAP.LINEAR_UNLOCK_DATA[f82_local0]
end

BATTLEMAP.MobileGetRewardDataAtPosition = function ( f81_arg0, f81_arg1, f81_arg2 )
	local f81_local0
	if not f81_arg1 then
		f81_local0 = f81_arg1
	else
		f81_local0 = SEASON.GetCurrentSeason()
	end
	if not BATTLEMAP.LINEAR_UNLOCK_DATA or not BATTLEMAP.LINEAR_UNLOCK_DATA[f81_local0] then
		BATTLEMAP.MobileGetLinearRewardsData( f81_arg0, f81_arg1 )
	end
	if not f81_arg2 or f81_arg2 < 0 or #BATTLEMAP.LINEAR_UNLOCK_DATA[f81_local0] < f81_arg2 then
		return nil
	else
		return BATTLEMAP.LINEAR_UNLOCK_DATA[f81_local0][f81_arg2]
	end
end

BATTLEMAP.MobileGetRewardDataAtTierIndex = function ( f80_arg0, f80_arg1, f80_arg2 )
	local f80_local0 = assert
	local f80_local1
	if f80_arg2 then
		f80_local1 = f80_arg2
	elseif 0 >= f80_arg2 or f80_arg2 > 100 then
		f80_local1 = false
	else
		f80_local1 = true
	end
	f80_local0( f80_local1, "Tier Index must be within 1 to 100 range" )
	if not f80_arg1 then
		f80_local0 = f80_arg1
	else
		f80_local0 = SEASON.GetCurrentSeason()
	end
	if not BATTLEMAP.LINEAR_UNLOCK_DATA or not BATTLEMAP.LINEAR_UNLOCK_DATA[f80_local0] then
		BATTLEMAP.MobileGetLinearRewardsData( f80_arg0, f80_arg1 )
	end
	for f80_local4, f80_local5 in ipairs( BATTLEMAP.LINEAR_UNLOCK_DATA[f80_local0] ) do
		if f80_local5.tierIndex and f80_local5.tierIndex == f80_arg2 and f80_local5.tierPosition and f80_local5.tierPosition == 1 then
			return f80_local5
		end
	end
	return nil
end

BATTLEMAP.MobileGetLinearRewardCount = function ( f79_arg0, f79_arg1 )
	local f79_local0
	if not f79_arg1 then
		f79_local0 = f79_arg1
	else
		f79_local0 = SEASON.GetCurrentSeason()
	end
	if not BATTLEMAP.LINEAR_UNLOCK_DATA or not BATTLEMAP.LINEAR_UNLOCK_DATA[f79_local0] then
		BATTLEMAP.MobileGetLinearRewardsData( f79_arg0, f79_arg1 )
	end
	return #BATTLEMAP.LINEAR_UNLOCK_DATA[f79_local0]
end

local f0_local25 = function ( f78_arg0, f78_arg1, f78_arg2 )
	local f78_local0
	if not f78_arg1 then
		f78_local0 = f78_arg1
	else
		f78_local0 = SEASON.GetCurrentSeason()
	end
	if not BATTLEMAP.LINEAR_UNLOCK_DATA or not BATTLEMAP.LINEAR_UNLOCK_DATA[f78_local0] then
		BATTLEMAP.MobileGetLinearRewardsData( f78_arg0, f78_arg1 )
	end
	for f78_local4, f78_local5 in ipairs( BATTLEMAP.LINEAR_UNLOCK_DATA[f78_local0] ) do
		if f78_arg2( f78_local5 ) then
			return f78_local4
		end
	end
	return -1
end

BATTLEMAP.MobileGetRewardPositionByLegacyData = function ( f76_arg0, f76_arg1, f76_arg2, f76_arg3, f76_arg4 )
	return f0_local0( f76_arg0, f76_arg1, function ( f77_arg0 )
		local f77_local0
		if f77_arg0.lootID ~= f76_arg0 or f77_arg0.sectorIndex ~= f76_arg0 or f77_arg0.sectorRewardIndex ~= f76_arg0 then
			f77_local0 = false
		else
			f77_local0 = true
		end
		return f77_local0
	end
	 )
end

BATTLEMAP.MobileGetRewardPositionByTier = function ( f74_arg0, f74_arg1, f74_arg2, f74_arg3 )
	return f0_local0( f74_arg0, f74_arg1, function ( f75_arg0 )
		local f75_local0
		if f75_arg0.lootID ~= f74_arg0 or f75_arg0.tierIndex ~= f74_arg0 then
			f75_local0 = false
		else
			f75_local0 = true
		end
		return f75_local0
	end
	 )
end

BATTLEMAP.MobileGetProgressingRewardPosition = function ( f72_arg0, f72_arg1 )
	local f72_local0 = BATTLEMAP.GetProgressingRewardIndex( f72_arg0, f72_arg1 )
	local f72_local1 = BATTLEMAP.GetActiveSectorIndex( f72_arg0 )
	return f0_local0( f72_arg0, f72_arg1, function ( f73_arg0 )
		local f73_local0 = f73_arg0.tierPosition
		if f73_local0 then
			f73_local0 = f73_arg0.tierPosition == 1
		end
		local f73_local1
		if f73_arg0.sectorIndex ~= f72_arg0 or f73_arg0.sectorRewardIndex ~= f72_arg0 then
			f73_local1 = false
		else
			f73_local1 = true
		end
		local f73_local2
		if f73_local0 then
			f73_local2 = f73_local0
		else
			f73_local2 = f73_local1
		end
		return f73_local2
	end
	 )
end

BATTLEMAP.MobileGetProgressingTier = function ( f71_arg0, f71_arg1 )
	local f71_local0
	if not f71_arg1 then
		f71_local0 = f71_arg1
	else
		f71_local0 = SEASON.GetCurrentSeason()
	end
	local f71_local1 = BATTLEMAP.MobileGetProgressingRewardPosition( f71_arg0, f71_local0 )
	if f71_local1 == -1 then
		return 1
	else
		return BATTLEMAP.LINEAR_UNLOCK_DATA[f71_local0][f71_local1].tierIndex
	end
end

BATTLEMAP.MobileGetRewardedPositionsOnTier = function ( f70_arg0, f70_arg1, f70_arg2 )
	local f70_local0
	if not f70_arg1 then
		f70_local0 = f70_arg1
	else
		f70_local0 = SEASON.GetCurrentSeason()
	end
	if not BATTLEMAP.LINEAR_UNLOCK_DATA or not BATTLEMAP.LINEAR_UNLOCK_DATA[f70_local0] then
		BATTLEMAP.MobileGetLinearRewardsData( f70_arg0, f70_arg1 )
	end
	local f70_local1 = 0
	for f70_local5, f70_local6 in ipairs( BATTLEMAP.LINEAR_UNLOCK_DATA[f70_local0] ) do
		if f70_local6.tierIndex and f70_local6.tierIndex == f70_arg2 then
			f70_local1 = f70_local1 + 1
		end
	end
	return f70_local1
end

BATTLEMAP.MobileGetRewardState = function ( f69_arg0, f69_arg1, f69_arg2 )
	local f69_local0 = BATTLEPASS.IsOwned( f69_arg0, f69_arg1 )
	local f69_local1 = BATTLEPASS.IsBlackCellOwned( f69_arg0, f69_arg1 )
	local f69_local2 = BATTLEMAP.MobileGetRewardDataAtPosition( f69_arg0, f69_arg1, f69_arg2 )
	local f69_local3 = f69_local2.rewardType
	local f69_local4 = f69_local2.isFree
	if BATTLEMAP.IsRewardOwned( f69_arg0, f69_arg1, f69_local2.sectorIndex, f69_local2.isOwned ) then
		if f69_local3 == BATTLEPASS.REWARD_TYPE.BLACKCELL then
			local f69_local5
			if f69_local1 then
				f69_local5 = BATTLEMAP.RewardStates.CLAIMED
				if not f69_local5 then
				
				else
					return f69_local5
				end
			end
			f69_local5 = BATTLEMAP.RewardStates.UNLOCKED
		else
			local f69_local5
			if f69_local0 or f69_local4 then
				f69_local5 = BATTLEMAP.RewardStates.CLAIMED
				if not f69_local5 then
				
				else
					return f69_local5
				end
			end
			f69_local5 = BATTLEMAP.RewardStates.UNLOCKED
		end
	elseif BATTLEMAP.MobileGetProgressingTier( f69_arg0, f69_arg1 ) == f69_local2.tierIndex then
		return BATTLEMAP.RewardStates.PROGRESSING
	else
		return BATTLEMAP.RewardStates.LOCKED
	end
end

BATTLEMAP.GetProgressingRewardIndex = function ( f68_arg0, f68_arg1 )
	local f68_local0 = BATTLEMAP.GetActiveSectorIndex( f68_arg0 )
	for f68_local1 = 1, BATTLEMAP.NUM_UNLOCKS_PER_SECTOR, 1 do
		local f68_local4 = BATTLEMAP.GetUnlockableDataByRewardIndex( f68_arg0, f68_arg1, f68_local0, f68_local1 )
		if not f68_local4.isOwned then
			return f68_local1
		end
	end
end

BATTLEMAP.GetRewardDetailsName = function ( f67_arg0, f67_arg1 )
	local f67_local0 = BATTLEPASS.GetLootNameFromRewardData( f67_arg0, f67_arg1 )
	if f67_arg1.lootType == LOOT.itemTypes.FEATURE then
		f67_local0 = Engine[0xED84C33EC5F01EA]( 0xFEE8302484FE1FA )
	end
	return f67_local0
end

BATTLEMAP.MobileGetDetailsTagData = function ( f66_arg0, f66_arg1, f66_arg2 )
	local f66_local0 = f66_arg1.lootID
	local f66_local1 = LOOT.GetTypeForID( f66_local0 )
	local f66_local2 = LOOT.GetItemRef( f66_local0 )
	local f66_local3 = ItemDetailsUtils.GetRewardDetailsTagData( f66_arg0, f66_local0 )
	local f66_local4
	if not f66_arg2 then
		f66_local4 = f66_arg2
	else
		f66_local4 = SEASON.GetCurrentSeason()
	end
	local f66_local5 = BATTLEMAP.GetSectorType( f66_arg0, f66_arg1.sectorIndex, f66_local4 )
	local f66_local6 = f66_arg1.rewardType
	local f66_local7 = nil
	if f66_local5 == BATTLEMAP.SectorType.BLACK_CELL or f66_local6 == BATTLEPASS.REWARD_TYPE.BLACKCELL then
		f66_local7 = 0xA155DE722C18B7E
	elseif f66_local5 == BATTLEMAP.SectorType.INSTANT then
		f66_local7 = 0xE1C5115E961D1B5
	elseif f66_local5 == BATTLEMAP.SectorType.FINAL then
		f66_local7 = 0xD5023EB94B2A7CA
	elseif f66_arg1.isFree then
		f66_local7 = 0x2B343CB4509BF4
	end
	if f66_local7 then
		table.insert( f66_local3, 1, Engine[0xED84C33EC5F01EA]( f66_local7 ) )
	end
	return f66_local3
end

BATTLEMAP.IsRewardFree = function ( f65_arg0, f65_arg1, f65_arg2, f65_arg3 )
	local f65_local0 = BATTLEMAP.GetSectorRewards( f65_arg1, f65_arg2 )
	if not BATTLEMAP.SECTOR_UNLOCK_DATA then
		BATTLEMAP.SECTOR_UNLOCK_DATA = {}
	end
	if not BATTLEMAP.SECTOR_UNLOCK_DATA[f65_arg1] then
		BATTLEMAP.SECTOR_UNLOCK_DATA[f65_arg1] = {}
	end
	if not BATTLEMAP.SECTOR_UNLOCK_DATA[f65_arg1][f65_arg2] then
		if f65_local0[f65_arg3] then
			local f65_local1 = BATTLEMAP.GetBattleMapSectorRewards( f65_local0[f65_arg3][0x3E3665069C49994] )
			return f65_local1[0xBEBFE18E2D7346B]
		else
			
		end
	else
		return BATTLEMAP.SECTOR_UNLOCK_DATA[f65_arg1][f65_arg2][f65_arg3].isFree
	end
end

BATTLEMAP.GetNumberOfCompleteSectorsAndRewards = function ( f64_arg0, f64_arg1 )
	local f64_local0 = 0
	local f64_local1 = 0
	for f64_local2 = 1, BATTLEMAP.NUM_BASE_SECTORS, 1 do
		local f64_local5 = BATTLEMAP.GetSectorProgress( f64_arg0, f64_local2 + 1, f64_arg1 )
		local f64_local6 = true
		for f64_local10, f64_local11 in ipairs( f64_local5 ) do
			if f64_local11 then
				f64_local1 = f64_local1 + 1
			else
				f64_local6 = false
			end
		end
		if f64_local6 then
			f64_local0 = f64_local0 + 1
		end
	end
	return f64_local0, f64_local1
end

local f0_local26 = function ( f63_arg0, f63_arg1 )
	local f63_local0
	if LOOT.GetTypeForID( f63_arg0 ) ~= LOOT.itemTypes.CURRENCY_PACK or LOOT.GetCurrencyID( f63_arg0 ) ~= LOOT.CurrencyIDs.COD_POINTS then
		f63_local0 = false
	else
		f63_local0 = true
	end
	local f63_local1
	if f63_local0 and not f63_arg1 then
		f63_local1 = f63_arg1
	else
		f63_local1 = 0
	end
	return f63_local1
end

BATTLEMAP.IsItemShownInSeasonRecap = function ( f62_arg0, f62_arg1 )
	local f62_local0
	if not f62_arg1 then
		f62_local0 = f62_arg1
	else
		f62_local0 = LOOT.GetTypeForID( f62_arg0 )
	end
	local f62_local1 = f62_local0 == LOOT.itemTypes.FEATURE
	local f62_local2
	if f62_local0 ~= LOOT.itemTypes.CURRENCY_PACK or LOOT.GetCurrencyID( f62_arg0 ) ~= LOOT.CurrencyIDs.TROPHY then
		f62_local2 = false
	else
		f62_local2 = true
	end
	local f62_local3
	if not f62_local1 then
		f62_local3 = not f62_local2
	else
		f62_local3 = false
	end
	return f62_local3
end

local f0_local27 = function ( f61_arg0, f61_arg1 )
	if not f61_arg0[f61_arg1] then
		f61_arg0[f61_arg1] = 0
	end
	f61_arg0[f61_arg1] = f61_arg0[f61_arg1] + 1
end

BATTLEMAP.GetUpsellRewardInfoForCurrentSeason = function ( f60_arg0, f60_arg1, f60_arg2 )
	return BATTLEMAP.GetUpsellRewardInfo( f60_arg0, SEASON.GetCurrentSeason(), f60_arg1, f60_arg2, 0, true, true )
end

BATTLEMAP.GetUpsellRewardInfo = function ( f59_arg0, f59_arg1, f59_arg2, f59_arg3, f59_arg4, f59_arg5, f59_arg6 )
	local f59_local0 = f59_arg1 < SEASON.GetCurrentSeason()
	local f59_local1 = BATTLEMAP.GetActiveSectorIndex( f59_arg0 )
	local f59_local2 = BATTLEMAP.GetNumRewardsRemainingInSector( f59_arg0, f59_local1, f59_arg1 )
	local f59_local3 = 0
	local f59_local4 = 0
	local f59_local5
	if not f59_arg4 then
		f59_local5 = f59_arg4
	else
		f59_local5 = 0
	end
	if f59_local2 < f59_local5 then
		f59_local4 = f59_local5 - f59_local2
		f59_local3 = f59_local2
	else
		f59_local3 = f59_local5
	end
	local f59_local6 = {
		unclaimedCoDPoints = 0,
		unclaimedBlackCellCodPointsThroughRefund = 0,
		freeRewards = 0,
		unclaimedBlackCellRewards = 0,
		unclaimedBlackCellCoDPoints = 0,
		unclaimedRewards = 0,
		unclaimedRewardsTable = {},
		unclaimedBlackCellRewardCountsByType = {},
		unclaimedBlackCellRewardsTable = {}
	}
	if not f59_arg5 then
		local f59_local7 = f59_arg5
	else
		local f59_local7 = BATTLEMAP.AreAllBaseSectorsComplete( f59_arg0, f59_arg1 )
	end
	local f59_local8 = BATTLEMAP.GetSeasonBundle( f59_arg1 )
	for f59_local9 = 1, #f59_local8[0x8C959E160CAD874], 1 do
		local f59_local12 = BATTLEMAP.GetSectorType( f59_arg0, f59_local9, f59_arg1 )
		if f59_local12 ~= BATTLEMAP.SectorType.EVENT and f59_local12 ~= BATTLEMAP.SectorType.LIMITED_TIME then
			for f59_local21, f59_local22 in ipairs( BATTLEMAP.GetSectorUnlockData( f59_arg0, f59_arg1, f59_local9 ) ) do
				local f59_local17 = false
				local f59_local18 = false
				local f59_local23 = LOOT.GetTypeForID( f59_local22.lootID )
				if not f59_local0 or BATTLEMAP.IsItemShownInSeasonRecap( f59_local22.lootID, f59_local23 ) then
					local f59_local16 = LOOT.GetTypeForID( f59_local22.blackCellLootID )
					if f59_local12 == BATTLEMAP.SectorType.INSTANT then
						if not f59_arg2 then
							f59_local6.unclaimedCoDPoints = f59_local6.unclaimedCoDPoints + f0_local0( f59_local22.lootID, f59_local22.currencyPackAmount )
							f59_local6.unclaimedRewards = f59_local6.unclaimedRewards + 1
							f59_local17 = true
						end
						if not f59_arg3 and f59_local22.blackCellLootID then
							f0_local0( f59_local6.unclaimedBlackCellRewardCountsByType, f59_local16 )
							f59_local18 = true
						end
					elseif f59_local12 == BATTLEMAP.SectorType.FINAL then
						if f59_local7 then
							if not f59_arg3 and f59_local22.blackCellLootID then
								f0_local0( f59_local6.unclaimedBlackCellRewardCountsByType, f59_local16 )
								f59_local18 = true
							end
							if not f59_arg2 then
								f59_local6.unclaimedCoDPoints = f59_local6.unclaimedCoDPoints + f0_local0( f59_local22.lootID, f59_local22.currencyPackAmount )
								f59_local6.unclaimedRewards = f59_local6.unclaimedRewards + 1
								f59_local17 = true
							end
						end
					elseif f59_local12 == BATTLEMAP.SectorType.BLACK_CELL then
						if not f59_arg3 then
							local f59_local19 = f59_local22.lootType
							f59_local6.unclaimedBlackCellCoDPoints = f59_local6.unclaimedBlackCellCoDPoints + f0_local0( f59_local22.lootID, f59_local22.currencyPackAmount )
							if f59_local23 == LOOT.itemTypes.OPERATOR or f59_local23 == LOOT.itemTypes.OPERATOR_SKIN then
								f59_local19 = LOOT.itemTypes.OPERATOR
							end
							f59_local18 = true
							f0_local0( f59_local6.unclaimedBlackCellRewardCountsByType, f59_local19 )
						end
					else
						local f59_local19 = f59_local22.isUnlocked and f59_local22.isOwned or f59_arg6
						local f59_local20 = false
						if not f59_local22.isFree or not f59_local19 or f59_local22.isFree and f59_arg6 then
							if not f59_local19 then
								if f59_local9 == f59_local1 and 0 < f59_local3 then
									f59_local3 = f59_local3 - 1
									f59_local20 = true
								elseif 0 < f59_local4 then
									f59_local4 = f59_local4 - 1
									f59_local20 = true
								end
							end
							if f59_local20 and f59_local9 == BATTLEMAP.BONUS_SECTOR_INDEX + BATTLEMAP.NUM_BASE_SECTORS and f59_local22.isHVT then
								local f59_local7 = true
							end
							if f59_local19 or f59_local20 then
								if not f59_arg2 or f59_local20 then
									f59_local6.unclaimedCoDPoints = f59_local6.unclaimedCoDPoints + f0_local0( f59_local22.lootID, f59_local22.currencyPackAmount )
									f59_local6.unclaimedRewards = f59_local6.unclaimedRewards + 1
									f59_local17 = true
								end
								if not f59_arg3 and f59_local22.blackCellLootID then
									f59_local18 = true
									f0_local0( f59_local6.unclaimedBlackCellRewardCountsByType, f59_local16 )
								end
							end
						end
						if f59_local22.isFree and (f59_local19 or f59_local20) then
							f59_local6.freeRewards = f59_local6.freeRewards + 1
						end
					end
				end
				if f59_local17 then
					if not f59_local6.unclaimedRewardsTable[f59_local9] then
						f59_local6.unclaimedRewardsTable[f59_local9] = {}
					end
					f59_local6.unclaimedRewardsTable[f59_local9][f59_local22.sectorRewardIndex] = f59_local22
				end
				if f59_local18 then
					if not f59_local6.unclaimedBlackCellRewardsTable[f59_local9] then
						f59_local6.unclaimedBlackCellRewardsTable[f59_local9] = {}
					end
					f59_local6.unclaimedBlackCellRewardsTable[f59_local9][f59_local22.sectorRewardIndex] = f59_local22
				end
			end
		end
	end
	if f59_arg2 and not f59_arg3 then
		local f59_local10 = BATTLEPASS.GetBattlepassIDBundleForRef( BATTLEPASS.GetPurchaseRef() )
		f59_local6.unclaimedBlackCellCodPointsThroughRefund = f59_local10[0x7384DAB3F540BAA]
	end
	for f59_local24, f59_local12 in pairs( f59_local6.unclaimedBlackCellRewardsTable ) do
		for f59_local15, f59_local21 in pairs( f59_local12 ) do
			f59_local6.unclaimedBlackCellRewards = f59_local6.unclaimedBlackCellRewards + 1
		end
	end
	return f59_local6
end

BATTLEMAP.AreAllBaseSectorsComplete = function ( f58_arg0, f58_arg1 )
	if not f58_arg1 then
		f58_arg1 = SEASON.GetCurrentSeason()
	end
	local f58_local0, f58_local1 = BATTLEMAP.GetNumberOfCompleteSectorsAndRewards( f58_arg0, f58_arg1 )
	return f58_local0 == BATTLEMAP.NUM_BASE_SECTORS
end

BATTLEMAP.GetSeasonProgressionPercent = function ( f57_arg0, f57_arg1 )
	local f57_local0, f57_local1 = BATTLEMAP.GetNumberOfCompleteSectorsAndRewards( f57_arg0, f57_arg1 )
	return f57_local1 / BATTLEMAP.NUM_BASE_SECTORS * BATTLEMAP.NUM_UNLOCKS_PER_SECTOR
end

BATTLEMAP.IsBattlemapComplete = function ( f56_arg0, f56_arg1 )
	return BATTLEMAP.GetSeasonProgressionPercent( f56_arg0, f56_arg1 ) == 1
end

BATTLEMAP.GetBaseMenuScopedData = function ()
	if CONDITIONS.IsMobileOrMobileSim() then
		return LUI.FlowManager.GetScopedData( "MobileBattlepassMenu" )
	else
		return LUI.FlowManager.GetMainScopedData()
	end
end

BATTLEMAP.GetBattlePassTabMenuName = function ()
	if BATTLEMAP.UseBattleMapLandingScreen() then
		return "BattlePassLanding"
	else
		return BATTLEMAP.GetBattlePassMenuName()
	end
end

BATTLEMAP.GetBattlePassMenuName = function ()
	if BATTLEMAP.UseV2BattleMapDesign() then
		return "BPMap"
	else
		return "BattleMapMenu"
	end
end

local f0_local28 = "BattlePassMenu"
BATTLEMAP.GetBattlePassMenuIndexAndTabMenu = function ( f52_arg0 )
	return MAINMENUTABS.GetTabIndexAndMenu( f52_arg0, f0_local0 )
end

BATTLEMAP.RestoreFocusToBattlePassTab = function ( f51_arg0 )
	local f51_local0, f51_local1 = BATTLEMAP.GetBattlePassMenuIndexAndTabMenu( f51_arg0 )
	if f51_local1 then
		local f51_local2 = LUI.FlowManager.GetScopedData( f51_local1.name )
		f51_local2.activeTabIndex = f51_local0
		LUI.FlowManager.ClearSavedMenuStatesByControllerIndex( f51_arg0, f51_local1.name )
	end
end

BATTLEMAP.OpenBattleMap = function ( f50_arg0 )
	local f50_local0, f50_local1 = BATTLEMAP.GetBattlePassMenuIndexAndTabMenu( f50_arg0 )
	if f50_local1 then
		LUI.FlowManager.RequestRestoreMenu( f50_local1.name, true, f50_arg0, true )
		local f50_local2 = LUI.FlowManager.FindTabsAtElement( f50_local1.menu )
		if f50_local2 then
			f50_local2:FocusTab( f50_arg0, f50_local0, LUI.IsLastInputKeyboardMouse( f50_arg0 ) and FocusType.MouseOver or FocusType.Gamepad, {
				rebuildWidget = true
			} )
		end
	end
end

BATTLEMAP.OpenTokenPurchaseMenu = function ( f49_arg0, f49_arg1 )
	LUI.FlowManager.RequestAddMenu( BATTLEPASS.GetBattlePassTokenPurchaseMenuRef(), true, f49_arg1, false, {
		menuState = BATTLEMAP.TokenMenuState.PURCHASING,
		fromMapPopup = f49_arg0.id == "BPMap"
	}, true )
end

BATTLEMAP.IsChaseReward = function ( f48_arg0, f48_arg1 )
	local f48_local0
	if not f48_arg1.isOwned then
		f48_local0 = not f48_arg1.isUnlocked
	else
		f48_local0 = false
	end
	local f48_local1 = f48_arg1.isChase
	if f48_local1 then
		f48_local1 = f48_local0
	end
	return f48_local1
end

BATTLEMAP.SendBattleMapNavDlogEvent = function ( f47_arg0, f47_arg1, f47_arg2, f47_arg3 )
	local f47_local0 = CoD.GetUTC()
	local f47_local1 = Engine[0x15D98DF5F61904B]
	local f47_local2 = f47_arg1
	local f47_local3 = "dlog_event_bp_ui_nav_interaction"
	local f47_local4 = {
		season = SEASON.GetCurrentSeason()
	}
	local f47_local5
	if not CONDITIONS.IsMobileOrMobileSim() then
		f47_local5 = STORE.UI.DoesPlayerOwnsVaultEdition( f47_arg1 )
	else
		f47_local5 = false
	end
	f47_local4.blackcell_player_b = f47_local5
	f47_local4.old_cp_balance = f47_arg0._oldCPBalance or 0
	f47_local4.new_cp_balance = DataSources.frontEnd.MP.commerce.premiumCurrency:GetValue( f47_arg1 ) or 0
	f47_local4.screen_id = f47_arg0.id
	f47_local4.screen_name = f47_arg2
	f47_local4.time_spent = f47_local0 - f47_arg0.menuEnterTime
	f47_local4.action = f47_arg3
	f47_local1( f47_local2, f47_local3, f47_local4 )
end

BATTLEMAP.CurrentSectorState = {}
BATTLEMAP.SetLastSectorState = function ( f46_arg0, f46_arg1, f46_arg2, f46_arg3 )
	BATTLEMAP.CurrentSectorState[f46_arg0] = BATTLEMAP.CurrentSectorState[f46_arg0] or {}
	BATTLEMAP.CurrentSectorState[f46_arg0][f46_arg2] = BATTLEMAP.CurrentSectorState[f46_arg0][f46_arg2] or {}
	BATTLEMAP.CurrentSectorState[f46_arg0][f46_arg2][f46_arg1] = f46_arg3
end

BATTLEMAP.GetLastSectorState = function ( f45_arg0, f45_arg1, f45_arg2 )
	if not BATTLEMAP.CurrentSectorState[f45_arg0] then
		return nil
	elseif not BATTLEMAP.CurrentSectorState[f45_arg0][f45_arg2] then
		return nil
	else
		return BATTLEMAP.CurrentSectorState[f45_arg0][f45_arg2][f45_arg1]
	end
end

BATTLEMAP.GetBattlemapModels = function ( f44_arg0 )
	local f44_local0, f44_local1 = nil
	local f44_local2 = f44_arg0.lootRef
	local f44_local3 = f44_arg0.lootType
	if f44_local3 == LOOT.itemTypes.OPERATOR or f44_local3 == LOOT.itemTypes.OPERATOR_EXECUTION or f44_local3 == LOOT.itemTypes.OPERATOR_SKIN then
		f44_local0 = CLIENT_MODEL.battlePassModels.CHARACTER
		f44_local1 = CLIENT_MODEL.battlePassModels.CHARACTER_BG
	elseif f44_local3 == LOOT.itemTypes.WEAPON or f44_local3 == LOOT.itemTypes.CAMO then
		local f44_local4 = WEAPON.GetWeaponClass( f44_local2 )
		if f44_local4 == WEAPON.pistolClass or f44_local4 == WEAPON.MELEEClass2 then
			local f44_local5 = CLIENT_MODEL.battlePassModels.WEAPON_DETAIL
			if not f44_local5 then
				f44_local0 = f44_local5
			end
		end
		f44_local0 = CLIENT_MODEL.battlePassModels.WEAPON
	elseif f44_local3 == LOOT.itemTypes.VEHICLE_CAMO then
		f44_local0 = CLIENT_MODEL.battlePassModels.VEHICLE
		f44_local1 = CLIENT_MODEL.battlePassModels.ITEMS_BG
	else
		f44_local0 = CLIENT_MODEL.battlePassModels.ITEMS
		f44_local1 = CLIENT_MODEL.battlePassModels.ITEMS_BG
	end
	return f44_local0, f44_local1
end

BATTLEMAP.UseV2BattleMapDesign = function ()
	return Dvar[0x1FAB6D9A30481F8]( 0x1C28EB7741B27D2 ) and Dvar[0x9E5BE3B4BBA4E0E]( 0x1C28EB7741B27D2 ) or false
end

BATTLEMAP.UseBattleMapLandingScreen = function ()
	return Dvar[0x9E5BE3B4BBA4E0E]( 0x9C606F7567A0327 )
end

BATTLEMAP.SendBattlemapSectorUpdateToServer = function ( f41_arg0, f41_arg1, f41_arg2, f41_arg3, f41_arg4 )
	local f41_local0 = f41_arg0
	local f41_local1 = "+"
	local f41_local2 = tostring( f41_arg1 )
	local f41_local3 = "+"
	local f41_local4
	if f41_arg2 and not f41_arg2 then
		f41_local4 = f41_arg2
	else
		f41_local4 = "none"
	end
	f41_local0 = f41_local0 .. f41_local1 .. f41_local2 .. f41_local3 .. f41_local4
	if f41_arg3 then
		f41_local0 = f41_local0 .. "+" .. f41_arg3
	else
		f41_local0 = f41_local0 .. "+" .. "-1"
	end
	if f41_arg4 then
		f41_local0 = f41_local0 .. "+" .. "1"
	end
	Engine[0x90FF5F1FFE3CE9E]( "battlemap_sector_update", f41_local0 )
end

BATTLEMAP.SectionForLootType = function ( f40_arg0, f40_arg1 )
	if f40_arg1 == LOOT.itemTypes.OPERATOR or f40_arg1 == LOOT.itemTypes.OPERATOR_EXECUTION or f40_arg1 == LOOT.itemTypes.OPERATOR_SKIN then
		return "battle_pass_character"
	elseif f40_arg1 == LOOT.itemTypes.WEAPON or f40_arg1 == LOOT.itemTypes.CAMO then
		return "battle_pass_weapon"
	elseif f40_arg1 == LOOT.itemTypes.VEHICLE_CAMO then
		return "battle_pass_vehicle"
	else
		return "battle_pass_items"
	end
end

local f0_local29 = function ( f39_arg0, f39_arg1 )
	local f39_local0 = assert
	local f39_local1
	if f39_arg0 then
		f39_local1 = f39_arg0
	elseif type( f39_arg0 ) ~= "number" or 0 > f39_arg0 then
		f39_local1 = false
	else
		f39_local1 = true
	end
	f39_local0( f39_local1 )
	f39_local0 = assert
	if f39_arg1 then
		f39_local1 = f39_arg1
	elseif type( f39_arg1 ) ~= "number" or 1 > f39_arg1 then
		f39_local1 = false
	else
		f39_local1 = true
	end
	f39_local0( f39_local1 )
	f39_local0 = PLAYER_DATA.IO( f39_arg0, CoD.StatsGroup.NonGame )
	return f39_local0.battlePassBreadCrumbs[f39_arg1 - 1]
end

local f0_local30 = function ( f38_arg0, f38_arg1, f38_arg2 )
	local f38_local0 = assert
	local f38_local1
	if f38_arg0 then
		f38_local1 = f38_arg0
	elseif type( f38_arg0 ) ~= "number" or 0 > f38_arg0 then
		f38_local1 = false
	else
		f38_local1 = true
	end
	f38_local0( f38_local1 )
	f38_local0 = assert
	if f38_arg1 then
		f38_local1 = f38_arg1
	elseif type( f38_arg1 ) ~= "number" or 1 > f38_arg1 then
		f38_local1 = false
	else
		f38_local1 = true
	end
	f38_local0( f38_local1 )
	f38_local0 = assert
	if f38_arg2 then
		f38_local1 = f38_arg2
	elseif type( f38_arg2 ) ~= "number" or 1 > f38_arg2 then
		f38_local1 = false
	else
		f38_local1 = true
	end
	f38_local0( f38_local1 )
	f38_local0 = f0_local0( f38_arg0, f38_arg1 )
	f38_local0:set( Bit.SetBit( f38_local0:get(), f38_arg2 ) )
	ACTIONS.UploadStats( nil, f38_arg0 )
end

local f0_local31 = function ( f37_arg0, f37_arg1, f37_arg2 )
	local f37_local0 = assert
	local f37_local1
	if f37_arg0 then
		f37_local1 = f37_arg0
	elseif type( f37_arg0 ) ~= "number" or 0 > f37_arg0 then
		f37_local1 = false
	else
		f37_local1 = true
	end
	f37_local0( f37_local1 )
	f37_local0 = assert
	if f37_arg1 then
		f37_local1 = f37_arg1
	elseif type( f37_arg1 ) ~= "number" or 1 > f37_arg1 then
		f37_local1 = false
	else
		f37_local1 = true
	end
	f37_local0( f37_local1 )
	f37_local0 = assert
	if f37_arg2 then
		f37_local1 = f37_arg2
	elseif type( f37_arg2 ) ~= "number" or 1 > f37_arg2 then
		f37_local1 = false
	else
		f37_local1 = true
	end
	f37_local0( f37_local1 )
	f37_local0 = f0_local0( f37_arg0, f37_arg1 )
	f37_local0:set( Bit.ClearBit( f37_local0:get(), f37_arg2 ) )
	ACTIONS.UploadStats( nil, f37_arg0 )
end

BATTLEMAP.IsSectorRewardNew = function ( f36_arg0, f36_arg1, f36_arg2 )
	local f36_local0 = assert
	local f36_local1
	if f36_arg0 then
		f36_local1 = f36_arg0
	elseif type( f36_arg0 ) ~= "number" or 0 > f36_arg0 then
		f36_local1 = false
	else
		f36_local1 = true
	end
	f36_local0( f36_local1 )
	f36_local0 = assert
	if f36_arg1 then
		f36_local1 = f36_arg1
	elseif type( f36_arg1 ) ~= "number" or 1 > f36_arg1 then
		f36_local1 = false
	else
		f36_local1 = true
	end
	f36_local0( f36_local1 )
	f36_local0 = assert
	if f36_arg2 then
		f36_local1 = f36_arg2
	elseif type( f36_arg2 ) ~= "number" or 1 > f36_arg2 then
		f36_local1 = false
	else
		f36_local1 = true
	end
	f36_local0( f36_local1 )
	if f0_local0 < f36_arg1 then
		return false
	else
		f36_local0 = f0_local0( f36_arg0, f36_arg1 )
		return Bit.GetBit( f36_local0:get(), f36_arg2 ) == 1
	end
end

BATTLEMAP.SetSectorRewardAsNew = function ( f35_arg0, f35_arg1, f35_arg2 )
	local f35_local0 = assert
	local f35_local1
	if f35_arg0 then
		f35_local1 = f35_arg0
	elseif type( f35_arg0 ) ~= "number" or 0 > f35_arg0 then
		f35_local1 = false
	else
		f35_local1 = true
	end
	f35_local0( f35_local1 )
	f35_local0 = assert
	if f35_arg1 then
		f35_local1 = f35_arg1
	elseif type( f35_arg1 ) ~= "number" or 1 > f35_arg1 then
		f35_local1 = false
	else
		f35_local1 = true
	end
	f35_local0( f35_local1 )
	f35_local0 = assert
	if f35_arg2 then
		f35_local1 = f35_arg2
	elseif type( f35_arg2 ) ~= "number" or 1 > f35_arg2 then
		f35_local1 = false
	else
		f35_local1 = true
	end
	f35_local0( f35_local1 )
	f0_local0( f35_arg0, f35_arg1, f35_arg2 )
end

BATTLEMAP.ClearSectorRewardNewStatus = function ( f34_arg0, f34_arg1, f34_arg2 )
	local f34_local0 = assert
	local f34_local1
	if f34_arg0 then
		f34_local1 = f34_arg0
	elseif type( f34_arg0 ) ~= "number" or 0 > f34_arg0 then
		f34_local1 = false
	else
		f34_local1 = true
	end
	f34_local0( f34_local1 )
	f34_local0 = assert
	if f34_arg1 then
		f34_local1 = f34_arg1
	elseif type( f34_arg1 ) ~= "number" or 1 > f34_arg1 then
		f34_local1 = false
	else
		f34_local1 = true
	end
	f34_local0( f34_local1 )
	f34_local0 = assert
	if f34_arg2 then
		f34_local1 = f34_arg2
	elseif type( f34_arg2 ) ~= "number" or 1 > f34_arg2 then
		f34_local1 = false
	else
		f34_local1 = true
	end
	f34_local0( f34_local1 )
	f0_local0( f34_arg0, f34_arg1, f34_arg2 )
end

BATTLEMAP.IsSectorNew = function ( f33_arg0, f33_arg1 )
	local f33_local0 = assert
	local f33_local1
	if f33_arg0 then
		f33_local1 = f33_arg0
	elseif type( f33_arg0 ) ~= "number" or 0 > f33_arg0 then
		f33_local1 = false
	else
		f33_local1 = true
	end
	f33_local0( f33_local1 )
	f33_local0 = assert
	if f33_arg1 then
		f33_local1 = f33_arg1
	elseif type( f33_arg1 ) ~= "number" or 1 > f33_arg1 then
		f33_local1 = false
	else
		f33_local1 = true
	end
	f33_local0( f33_local1 )
	f33_local0 = f0_local0( f33_arg0, f33_arg1 )
	return Bit.GetBit( f33_local0:get(), f0_local0 ) == 1
end

BATTLEMAP.SetSectorAsNew = function ( f32_arg0, f32_arg1 )
	local f32_local0 = assert
	local f32_local1
	if f32_arg0 then
		f32_local1 = f32_arg0
	elseif type( f32_arg0 ) ~= "number" or 0 > f32_arg0 then
		f32_local1 = false
	else
		f32_local1 = true
	end
	f32_local0( f32_local1 )
	f32_local0 = assert
	if f32_arg1 then
		f32_local1 = f32_arg1
	elseif type( f32_arg1 ) ~= "number" or 1 > f32_arg1 then
		f32_local1 = false
	else
		f32_local1 = true
	end
	f32_local0( f32_local1 )
	f0_local0( f32_arg0, f32_arg1, f0_local0 )
end

BATTLEMAP.ClearSectorNewStatus = function ( f31_arg0, f31_arg1 )
	local f31_local0 = assert
	local f31_local1
	if f31_arg0 then
		f31_local1 = f31_arg0
	elseif type( f31_arg0 ) ~= "number" or 0 > f31_arg0 then
		f31_local1 = false
	else
		f31_local1 = true
	end
	f31_local0( f31_local1 )
	f31_local0 = assert
	if f31_arg1 then
		f31_local1 = f31_arg1
	elseif type( f31_arg1 ) ~= "number" or 1 > f31_arg1 then
		f31_local1 = false
	else
		f31_local1 = true
	end
	f31_local0( f31_local1 )
	f0_local0( f31_arg0, f31_arg1, f0_local0 )
end

BATTLEMAP.ClearAllBattlePassBreadCrumbs = function ( f30_arg0 )
	local f30_local0 = assert
	local f30_local1
	if f30_arg0 then
		f30_local1 = f30_arg0
	elseif type( f30_arg0 ) ~= "number" or 0 > f30_arg0 then
		f30_local1 = false
	else
		f30_local1 = true
	end
	f30_local0( f30_local1 )
	for f30_local0 = 1, f0_local0, 1 do
		local f30_local3 = f0_local0( f30_arg0, f30_local0 )
		f30_local3:set( 0 )
	end
	ACTIONS.UploadStats( nil, f30_arg0 )
end

BATTLEMAP.SetAllBattlePassBreadCrumbs = function ( f29_arg0 )
	local f29_local0 = assert
	local f29_local1
	if f29_arg0 then
		f29_local1 = f29_arg0
	elseif type( f29_arg0 ) ~= "number" or 0 > f29_arg0 then
		f29_local1 = false
	else
		f29_local1 = true
	end
	f29_local0( f29_local1 )
	for f29_local0 = 1, f0_local0, 1 do
		local f29_local3 = f0_local0( f29_arg0, f29_local0 )
		f29_local3:set( f0_local0 )
	end
	ACTIONS.UploadStats( nil, f29_arg0 )
end

BATTLEMAP.UpdateClaimPips = function ( f28_arg0, f28_arg1 )
	if not f28_arg1 then
		f28_arg1 = 0
	end
	for f28_local3, f28_local4 in ipairs( f28_arg0 ) do
		f28_local4:SetVisible( f28_local3 <= f28_arg1 )
	end
end

BATTLEMAP.GetMinimapFocusColor = function ( f27_arg0, f27_arg1, f27_arg2, f27_arg3, f27_arg4 )
	local f27_local0
	if not f27_arg4 then
		f27_local0 = f27_arg4
	else
		f27_local0 = SEASON.GetCurrentSeason()
	end
	local f27_local1 = BATTLEMAP.GetSectorType( f27_arg0, f27_arg1, f27_local0 )
	if f27_local1 == BATTLEMAP.SectorType.LIMITED_TIME and BATTLEMAP.IsLimitedTimeClassified() then
		return SWATCHES.IW9BPSector.LockedMiniFocus
	elseif f27_local1 == BATTLEMAP.SectorType.INSTANT then
		return SWATCHES.IW9BPSector.InstantMiniFocus
	elseif f27_local1 == BATTLEMAP.SectorType.FINAL then
		return SWATCHES.IW9BPSector.FinalMiniFocus
	elseif f27_local1 == BATTLEMAP.SectorType.BLACK_CELL then
		return SWATCHES.IW9BPSector.BlackCellMiniFocus
	else
		local f27_local2 = BATTLEMAP.GetSectorState( f27_arg0, f27_arg1, f27_local0 )
		if f27_local2 == BATTLEMAP.SectorState.ACTIVE then
			return SWATCHES.IW9BPSector.ActiveMiniFocus
		elseif f27_local2 == BATTLEMAP.SectorState.COMPLETED then
			return SWATCHES.IW9BPSector.CompleteMiniFocus
		else
			return SWATCHES.IW9BPSector.LockedMiniFocus
		end
	end
end

local f0_local32 = 200
local f0_local33 = function ( f26_arg0 )
	f26_arg0.BattlePassPurchaseButton:SetAlpha( 1 )
	f26_arg0.InspectPanel.BPTokenProgress:SetAlpha( 1 )
	f26_arg0.InspectPanel.AutoToggle:SetAlpha( 1 )
	f26_arg0.InspectPanel.SectorTagList:SetAlpha( 1 )
	f26_arg0.InspectPanel.MinimapTopo:setPriority( 0 )
	f26_arg0.InspectPanel.MinimapRadial:setPriority( 0 )
	f26_arg0.InspectPanel.SectorID:setPriority( 0 )
end

local f0_local34 = function ( f25_arg0 )
	f25_arg0.InspectPanel.BPTokenProgress:SetAlpha( 0.2 )
	f25_arg0.InspectPanel.AutoToggle:SetAlpha( 0.2 )
	f25_arg0.InspectPanel.SectorTagList:SetAlpha( 0.2 )
	f25_arg0.InspectPanel.BPTokenProgress:setPriority( 6 )
	f25_arg0.InspectPanel.BPTokenProgress:SetAlpha( 0.2 )
	f25_arg0.InspectPanel.MinimapTopo:setPriority( 99 )
	f25_arg0.InspectPanel.MinimapRadial:setPriority( 99 )
	f25_arg0.InspectPanel.SectorID:setPriority( 99 )
end

local f0_local35 = function ( f24_arg0 )
	f24_arg0.BattlePassPurchaseButton:SetAlpha( 0.2 )
	f24_arg0.InspectPanel.BPTokenProgress:setPriority( 99 )
end

local f0_local36 = function ( f22_arg0, f22_arg1 )
	local f22_local0 = {
		{
			tooltip = Onboarding.Tips.BattlePass.AUTO_SWITCH,
			widget = f22_arg0.InspectPanel.AutoToggle
		}
	}
	if f22_arg0._toolTipCount == BATTLEMAP.ToolTipStates.AUTO_SWITCH then
		f0_local0( f22_arg0 )
	end
	TIP.CreateTips( f22_local0[f22_arg0._toolTipCount].tooltip( f22_arg1, f22_local0[f22_arg0._toolTipCount].widget ) )
	f22_arg0:addEventHandler( "completed_onboarding_state", function ( f23_arg0, f23_arg1 )
		f22_arg0._toolTipCount = f22_arg0._toolTipCount + 1
		local f23_local0 = f22_arg0[f22_arg0._toolTipCount]
		if f23_local0 then
			TIP.CreateTips( f23_local0.tooltip( f22_arg0, f23_local0.widget ) )
		end
		if f22_arg0._toolTipCount == #f22_arg0 + 1 then
			f22_arg0( f22_arg0 )
			BATTLEMAP.DoOnboarding( f22_arg0, f22_arg0 )
		end
	end )
end

BATTLEMAP.DoOnboarding = function ( f19_arg0, f19_arg1 )
	f19_arg0.isOnboarding = not Onboarding.BattlePass.WasCompleted( f19_arg1 )
	local f19_local0 = function ()
		if not String.IsNilOrEmpty( f19_arg0._onboardingPopup ) then
			ACTIONS.LeaveMenuByName( f19_arg0._onboardingPopup )
			f19_arg0._onboardingPopup = nil
		end
		BATTLEMAP.DoOnboarding( f19_arg0, f19_arg0 )
	end
	
	local f19_local1 = nil
	f19_local1 = function ()
		DebugPrint( "DEBUG BATTLEPASS-ONBOARDING: " .. BATTLEMAP.GetDebugStateMessage( f19_arg0._onboardingState, BATTLEMAP.OnboardingStates ) )
		if f19_arg0._onboardingState == BATTLEMAP.OnboardingStates.MAP_TRYPTICH then
			f19_arg0._onboardingPopup = "BattlePassHelpPopup"
			LUI.FlowManager.RequestPopupMenu( nil, f19_arg0._onboardingPopup, true, f19_arg0, false, {
				isOnboarding = true,
				onboardingState = f19_arg0._onboardingState,
				backButtonCallback = f19_arg0
			}, nil, false, true )
		elseif f19_arg0._onboardingState == BATTLEMAP.OnboardingStates.MAP_BOOT then
			f19_arg0:UpdateMapState( f19_arg0, BATTLEMAP.BattlePassStates.MAP_BOOT )
		elseif f19_arg0._onboardingState == BATTLEMAP.OnboardingStates.INITIAL_TRYPTICH then
			f19_arg0._onboardingPopup = "BattlePassHelpPopup"
			LUI.FlowManager.RequestPopupMenu( nil, f19_arg0._onboardingPopup, true, f19_arg0, false, {
				isOnboarding = true,
				onboardingState = f19_arg0._onboardingState,
				backButtonCallback = f19_arg0
			}, nil, nil, true )
		elseif f19_arg0._onboardingState == BATTLEMAP.OnboardingStates.TOOLTIPS then
			if not f19_arg0._toolTipCount or f19_arg0._toolTipCount <= 0 then
				f19_arg0._toolTipCount = 1
				f19_arg0( f19_arg0, f19_arg0 )
			end
		elseif f19_arg0._onboardingState == BATTLEMAP.OnboardingStates.SPEND_SELECTION then
			if f19_arg0._isHauntingEvent then
				Onboarding.BattlePass.MarkPlayerSeenBPEventIntro( f19_arg0 )
			end
			f19_arg0._onboardingPopup = "BPAutoSwitchPopup"
			LUI.FlowManager.RequestPopupMenu( nil, f19_arg0._onboardingPopup, false, f19_arg0 or 0, false, {
				isAutoSpendOn = true,
				showTooltips = true,
				shouldSelectOption = true,
				backButtonCallBack = f19_arg0
			}, nil, nil, true )
			f19_arg0:UpdateMapState( f19_arg0, BATTLEMAP.BattlePassStates.SPEND_SELECTION )
		elseif f19_arg0._onboardingState == BATTLEMAP.OnboardingStates.END_ONBOARDING then
			f19_arg0._onboardingState = nil
			f19_arg0.isOnboarding = false
			Onboarding.BattlePass.MarkCompleted( f19_arg0 )
			f19_arg0:UpdateMapState( f19_arg0, BATTLEMAP.BattlePassStates.NORMAL )
		end
	end
	
	if not f19_arg0._onboardingState then
		local f19_local2
		if f19_arg0.isOnboarding then
			f19_local2 = 1
		else
			f19_local2 = BATTLEMAP.OnboardingStates.END_ONBOARDING
		end
		f19_arg0._onboardingState = f19_local2
	else
		f19_arg0._onboardingState = f19_arg0._onboardingState + 1
	end
	f19_local1()
end

BATTLEMAP.GetAdjacentSectorNames = function ( f18_arg0, f18_arg1 )
	if not f18_arg0 then
		return nil
	end
	local f18_local0 = BATTLEMAP.GetSeasonBundle( SEASON.GetCurrentSeason() )
	local f18_local1 = f18_local0[0x8C959E160CAD874][f18_arg0][0x334EF3B1FAF5F83]
	local f18_local2 = {}
	for f18_local6, f18_local7 in ipairs( f18_local1 ) do
		local f18_local8 = String.Split( f18_local7[0xE03357C933EFDCA], "_" )
		local f18_local9 = String.Split( f18_local8[#f18_local8], "sector" )
		local f18_local10 = f18_local9[1]
		if f18_arg1 then
			table.insert( f18_local2, tonumber( f18_local10 ) )
		else
			table.insert( f18_local2, BATTLEMAP.GetSectorDisplayName( tonumber( f18_local10 ) ) )
		end
	end
	return f18_local2
end

BATTLEMAP.PreStreamBattleMapAssets = function ( f17_arg0, f17_arg1 )
	FrontEndScene.EnableStreaming()
	BATTLEMAP.ClearBattleMapStreamedImages()
	if not BATTLEMAP.ImagesToStream then
		BATTLEMAP.ImagesToStream = {}
	end
	local f17_local0 = SEASON.GetCurrentSeason()
	table.insert( BATTLEMAP.ImagesToStream, RegisterMaterial( 0xE192DC05AEE7FA6 ) )
	table.insert( BATTLEMAP.ImagesToStream, RegisterMaterial( 0x7341DC6E8A397B0 ) )
	table.insert( BATTLEMAP.ImagesToStream, RegisterMaterial( 0xB3077ADE012ED5D ) )
	if f17_arg1 then
		table.insert( BATTLEMAP.ImagesToStream, RegisterMaterial( 0xF1FF85D949AF4E6 ) )
		table.insert( BATTLEMAP.ImagesToStream, RegisterMaterial( 0x3FAE934FD696F22 ) )
	else
		table.insert( BATTLEMAP.ImagesToStream, RegisterMaterial( 0x404138C626111E1 ) )
		table.insert( BATTLEMAP.ImagesToStream, RegisterMaterial( 0xD7D09C0EA063999 ) )
	end
	local f17_local1 = f0_local0( f17_local0 )
	local f17_local2 = {}
	for f17_local12, f17_local13 in ipairs( f17_local1 ) do
		if not String.IsNilOrEmpty( f17_local13[0x5565F5840C0FF4D] ) then
			table.insert( BATTLEMAP.ImagesToStream, RegisterMaterial( f17_local13[0x5565F5840C0FF4D] ) )
		end
		if not f17_arg1 then
			if not String.IsNilOrEmpty( f17_local13[0x8B19946AE405D35] ) then
				table.insert( BATTLEMAP.ImagesToStream, RegisterMaterial( f17_local13[0x8B19946AE405D35] ) )
			end
			if not String.IsNilOrEmpty( f17_local13[0xB53F31FB63AE14F] ) then
				table.insert( BATTLEMAP.ImagesToStream, RegisterMaterial( f17_local13[0xB53F31FB63AE14F] ) )
			end
		end
		local f17_local6 = f0_local0( f17_arg0, f17_local0, f17_local12 )
		if f17_local6 then
			for f17_local10, f17_local11 in ipairs( f17_local6 ) do
				if not String.IsNilOrEmpty( f17_local11.mapOverride ) then
					table.insert( BATTLEMAP.ImagesToStream, RegisterMaterial( f17_local11.mapOverride ) )
				end
				if not String.IsNilOrEmpty( f17_local11.blackCellMapOverride ) then
					table.insert( BATTLEMAP.ImagesToStream, RegisterMaterial( f17_local11.blackCellMapOverride ) )
				end
				if not f17_arg1 then
					if not String.IsNilOrEmpty( f17_local11.lootImage ) then
						table.insert( BATTLEMAP.ImagesToStream, RegisterMaterial( f17_local11.lootImage ) )
					end
					if not String.IsNilOrEmpty( f17_local11.blackCellLootImage ) then
						table.insert( BATTLEMAP.ImagesToStream, RegisterMaterial( f17_local11.blackCellLootImage ) )
					end
				end
				if not String.IsNilOrEmpty( f17_local11.modelXAnim ) then
					table.insert( f17_local2, f17_local11.modelXAnim )
				end
			end
		end
	end
	if Dvar[0x9E5BE3B4BBA4E0E]( 0xE61CDA81AA4760F ) ~= true and 0 < #f17_local2 and not f17_arg1 then
		f17_local3 = Engine[0xEE6F69FEA944B13]()
		f17_local3 = f17_local3.flowManager:GetStackTop()
		f17_local3 = f17_local3.menu
		if f17_local3 then
			STREAMING.RequestModels( f17_arg0, {
				requesterWidget = f17_local3,
				modelType = STREAMING.ModelTypes.Animation,
				models = f17_local2
			} )
		end
	end
	Streaming[0x2D189901DAA9563]( BATTLEMAP.ImagesToStream )
end

BATTLEMAP.ClearBattleMapStreamedImages = function ()
	if BATTLEMAP.ImagesToStream and 0 < #BATTLEMAP.ImagesToStream then
		Streaming[0x6FFD2DD54385156]( BATTLEMAP.ImagesToStream )
		BATTLEMAP.ImagesToStream = {}
	end
end

BATTLEMAP.UpdateBackButton = function ( f15_arg0, f15_arg1 )
	f15_arg0:dispatchEventToRoot( {
		name = "update_menu_title_back_state",
		isDisabled = MAINMENUTABS.ShouldDisableBackingFromBPMenu()
	} )
end

BATTLEMAP.RestoreBackButton = function ( f14_arg0, f14_arg1 )
	f14_arg0:dispatchEventToRoot( {
		name = "restore_menu_title_back_state"
	} )
end

BATTLEMAP.OpenPreviewMenu = function ( f13_arg0, f13_arg1, f13_arg2 )
	assert( f13_arg1 )
	local f13_local0 = LOOT.GetTypeForID( f13_arg1 )
	if f13_local0 == LOOT.itemTypes.OPERATOR_SKIN then
		OPERATOR.OpenPreviewMenu( f13_arg0, f13_arg1, nil, f13_arg2, BATTLEMAP.BP_SECTOR_PREVIEW_REF )
	elseif f13_local0 == LOOT.itemTypes.WEAPON then
		local f13_local1 = WEAPON.GenerateWeaponTableFromID( f13_arg0, f13_arg1 )
		if 0 < tonumber( f13_local1.variantID ) then
			f13_local1.lootName = WEAPON.GetLootWeaponName( f13_local1.weapon, f13_local1.lootID )
		end
		LUI.FlowManager.RequestAddMenu( GUNSMITH.GetWeaponPreviewMenuRef(), true, f13_arg0, false, {
			storeBundlePreview = true,
			weaponTable = f13_local1,
			sectorData = f13_arg2
		}, true )
	elseif f13_local0 == LOOT.itemTypes.GUN_SCREEN and WEAPON.IsGunscreenVO( f13_arg1 ) then
		local f13_local1 = LUI.FlowManager.GetMainScopedData()
		if f13_local1.focusedButton and f13_local1.focusedButton.AudioIcon then
			WEAPON.PlayRandomGunscreenVOWithSprite( f13_local1.focusedButton, f13_local1.focusedButton.AudioIcon, f13_arg1, WEAPON.AliasVO.Audio_Preview )
		else
			WEAPON.PlayRandomGunscreenVO( f13_arg1, WEAPON.AliasVO.Audio_Preview )
		end
	end
end

BATTLEMAP.GetFirstWeaponInSector = function ( f12_arg0, f12_arg1 )
	for f12_local0 = 1, BATTLEMAP.NUM_UNLOCKS_PER_SECTOR, 1 do
		local f12_local3 = f12_arg1[f12_local0]
		if f12_local3.lootType == LOOT.itemTypes.WEAPON then
			local f12_local4 = WEAPON.GenerateWeaponTableFromID( f12_arg0, f12_local3.lootID )
			return WEAPON.GetWeaponModelName( f12_local4.weapon, f12_local4, {
				includeCamos = true,
				includeAttachments = true,
				includeStickers = true,
				controllerIndex = f12_arg0
			} )
		end
	end
end

BATTLEMAP.IsLimitedTimeEnabled = function ()
	return CONDITIONS.IsDvarBoolEnabled( 0x4F20A214F61ED96 )
end

BATTLEMAP.IsLimitedTimeClassified = function ()
	local f10_local0 = Dvar[0x22EAAB59AA27E9B]( 0x26552C414950A03 )
	local f10_local1
	if f10_local0 and f10_local0 > 0 and CoD.GetUTC() > f10_local0 then
		f10_local1 = false
	else
		f10_local1 = true
	end
	return f10_local1
end

BATTLEMAP.GetBPEventData = function ()
	local f9_local0 = Dvar[0x54084D7CA2317BB]( 0xA890C83261E167E )
	if String.IsNilOrEmpty( f9_local0 ) then
		return 
	elseif not PROJECT[0x5A05E13AC947C99][0x602824086F81F2D] then
		PROJECT[0x5A05E13AC947C99][0x602824086F81F2D] = SEASONAL_EVENT.LoadEventData( Engine[0x6093D047200548]( SEASONAL_EVENT.SCRIPT_BUNDLE_PREFIX .. f9_local0 ), true )
	end
	return PROJECT[0x5A05E13AC947C99][0x602824086F81F2D]
end

BATTLEMAP.HasEventStarted = function ()
	local f8_local0 = BATTLEMAP.GetBPEventData()
	if not f8_local0 then
		return false
	else
		local f8_local1
		if f8_local0.times.period ~= SEASONAL_EVENT.EVENT_PERIODS.ONGOING and f8_local0.times.period ~= SEASONAL_EVENT.EVENT_PERIODS.ENDING_SOON and f8_local0.times.period ~= SEASONAL_EVENT.EVENT_PERIODS.POST_END then
			f8_local1 = false
		else
			f8_local1 = true
		end
	end
	return f8_local1
end

BATTLEMAP.HasEventEnded = function ()
	local f7_local0 = BATTLEMAP.GetBPEventData()
	if not f7_local0 then
		return true
	else
		return f7_local0.times.period == SEASONAL_EVENT.EVENT_PERIODS.POST_END
	end
end

BATTLEMAP.CheckIfBattlePassBreadCrumbsNeedSetting = function ( f6_arg0 )
	local f6_local0 = SEASON.GetCurrentSeason()
	if Engine[0x603A26F08AB3858]( f6_arg0 ) and not Onboarding.BattlePass.DoesPlayerHaveBattlePassBreadCrumbsSet( f6_arg0, f6_local0 ) then
		BATTLEMAP.SetAllBattlePassBreadCrumbs( f6_arg0 )
		Onboarding.BattlePass.MarkBattlePassBreadCrumbsSet( f6_arg0, f6_local0 )
	end
end

BATTLEMAP.GetRandomJumpscare = function ()
	local f5_local0 = Engine[0x6093D047200548]( "jumpscare:jumpscare_list" )
	if f5_local0 and f5_local0[0xE920B4B0361C94E] then
		return f5_local0[0xE920B4B0361C94E][math.random( 1, #f5_local0[0xE920B4B0361C94E] )]
	else
		
	end
end

BATTLEMAP.SetBattlePassJumpScaresEnabled = function ( f4_arg0, f4_arg1 )
	local f4_local0 = PLAYER_DATA.IO( f4_arg0, CoD.StatsGroup.NonGame )
	local f4_local1 = f4_local0.bpJumpScaresDisabled
	local f4_local2 = f4_local1
	f4_local1 = f4_local1.set
	local f4_local3
	if f4_arg1 then
		f4_local3 = 0
	else
		f4_local3 = 1
	end
	f4_local1( f4_local2, f4_local3 )
	ACTIONS.UploadStats( nil, f4_arg0 )
end

BATTLEMAP.AreBattlePassJumpScaresEnabled = function ( f3_arg0 )
	local f3_local0 = PLAYER_DATA.IO( f3_arg0, CoD.StatsGroup.NonGame )
	return f3_local0.bpJumpScaresDisabled:get() == 0
end

BATTLEMAP.HasLimitedTimeSector = function ( f2_arg0 )
	local f2_local0
	if not f2_arg0 then
		f2_local0 = f2_arg0
	else
		f2_local0 = SEASON.GetCurrentSeason()
	end
	local f2_local1 = BATTLEMAP.GetSectorRewards( f2_local0, BATTLEMAP.LIMITED_TIME_SECTOR + 1 )
	local f2_local2
	if f2_local1 then
		f2_local2 = f2_local1
	else
		f2_local2 = f2_local1[BATTLEMAP.NUM_UNLOCKS_PER_SECTOR] ~= nil
	end
	return f2_local2
end

BATTLEMAP.UpdateBattleMapModel = function ( f1_arg0, f1_arg1, f1_arg2 )
	local f1_local0
	if f1_arg2 then
		f1_local0 = f1_arg1.blackcellModelName
		if not f1_local0 then
		
		else
			local f1_local1
			if f1_arg2 then
				f1_local1 = f1_arg1.blackcellbgModelName
				if not f1_local1 then
				
				else
					local f1_local2, f1_local3 = BATTLEMAP.GetBattlemapModels( f1_arg1, f1_arg2 )
					if f1_local2 and f1_local3 then
						if f1_arg0.KillCurrentVFX then
							f1_arg0:KillCurrentVFX()
						end
						f1_arg0._currentModel = f1_local2
						if not String.IsNilOrEmpty( f1_arg1.modelXAnim ) and f1_local2.index then
							STREAMING.RequestModels( f1_arg0._controllerIndex, {
								requesterWidget = f1_arg0,
								modelType = STREAMING.ModelTypes.Animation,
								models = {
									f1_arg1.modelXAnim
								}
							} )
							ClientModel[0x2EF393F1650E09B]( f1_local2.index, BATTLEMAP.CLIENT_CHARACTER_ANIM_TREE, f1_arg1.modelXAnim )
						end
						CLIENT_MODEL.HideAllBattlePassModels()
						CLIENT_MODEL.SetAssetType( f1_local2, Enum[0x4D1082DFC9AF660][0x912D6AEFE9657E7] )
						CLIENT_MODEL.SetAssetType( f1_local3, Enum[0x4D1082DFC9AF660][0x912D6AEFE9657E7] )
						local f1_local4
						if f1_arg1.lootType ~= LOOT.itemTypes.OPERATOR and f1_arg1.lootType ~= LOOT.itemTypes.OPERATOR_SKIN and f1_arg1.lootType ~= LOOT.itemTypes.OPERATOR_EXECUTION then
							f1_local4 = false
						else
							f1_local4 = true
						end
						CLIENT_MODEL.SetModel( f1_local2, f1_local0, f1_local4 )
						CLIENT_MODEL.SetModel( f1_local3, f1_local1 )
						if f1_local2.angles then
							ClientModel[0xEFA1738E096A743]( f1_local2.index, {
								xAngle = f1_local2.angles.xAngle,
								yAngle = f1_local2.angles.yAngle + f1_arg1.rotationOffset,
								zAngle = f1_local2.angles.xAngle
							} )
						end
						if f1_local3.origin then
							ClientModel[0x9C89C00DF9B85ED]( f1_local3.index, {
								xPosition = f1_local3.origin.xPosition + f1_arg1.bgOffset.x,
								yPosition = f1_local3.origin.yPosition + f1_arg1.bgOffset.y,
								zPosition = f1_local3.origin.zPosition + f1_arg1.bgOffset.z
							} )
						end
					end
				end
			end
			f1_local1 = f1_arg1.bgModelName
		end
	end
	f1_local0 = f1_arg1.modelName
end

