-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:15
MOBILE_LUCKYDRAW = MOBILE_LUCKYDRAW or {}
MOBILE_LUCKYDRAW.LogError = function ( f71_arg0 )
	DebugPrint( f71_arg0 )
end

MOBILE_LUCKYDRAW.IsDrawEventActive = function ( f70_arg0 )
	if not CONDITIONS.IsMobile() then
		return false
	else
		local f70_local0 = MOBILE_LUCKYDRAW.DataUtils.GetEventIdByCurrentDrawId( f70_arg0 )
		if f70_local0 == nil or f70_local0 == ONLINE_EVENTS.InvalidEntry then
			return false
		else
			return f70_local0 == ONLINE_EVENTS.CurrentActiveEventId
		end
	end
end

MOBILE_LUCKYDRAW.GetCurrentTime = function ()
	return CONDITIONS.IsMobile() and Events[0x49FC972008AE526]() or CoD.GetUTC()
end

local f0_local0 = {
	nil,
	"mw_store_title_balkan_blue_lightning_unit",
	"mw_store_title_anime_express",
	"mw_store_title_avant_garde",
	"mw_store_title_akimbo_pack_anime",
	"mgl_ui_lucky_draw_logo_test"
}
local f0_local1 = {
	nil,
	"ld_placeholder_operator",
	"ld_placeholder_vehicle",
	"ld_placeholder_weapon"
}
MOBILE_LUCKYDRAW.ITEM_LOOT_IMAGE_DIMENSIONS = {
	square = {
		width = 428 * _1080p,
		height = 428 * _1080p
	},
	card = {
		width = 512 * _1080p,
		height = 128 * _1080p
	},
	wide = {
		width = 512 * _1080p,
		height = 256 * _1080p
	},
	operator = {
		width = 300 * _1080p,
		height = 400 * _1080p
	},
	vehicleLarge = {
		width = 710 * _1080p,
		height = 400 * _1080p
	},
	vehicleMedium = {
		width = 635 * _1080p,
		height = 357 * _1080p
	},
	bounds = {
		width = 600 * _1080p,
		height = 600 * _1080p
	}
}
MOBILE_LUCKYDRAW.ITEM_CUSTOM_IMAGE_DIMENSIONS = {
	default = {
		width = 848 * _1080p,
		height = 644 * _1080p
	},
	operator = {
		width = 848 * _1080p,
		height = 1064 * _1080p
	}
}
MOBILE_LUCKYDRAW.IS_FROM_SPIN_CONFIRMATION = false
MOBILE_LUCKYDRAW.ITEM_CUSTOM_IMAGE_OFFSETS = {
	default = {
		celebrationScreen = 0,
		infoPanel = -403 * _1080p
	},
	operator = {
		celebrationScreen = 0,
		infoPanel = -388 * _1080p
	}
}
local f0_local2 = {}
if CONDITIONS.IsMobileOrMobileSim() then
	f0_local2 = {
		[Enum[0xDD1B172906C060B][0x98865C7BD1F3959]] = "Unknown",
		[Enum[0xDD1B172906C060B][0x9FE06E3408E53D0]] = "Success",
		[Enum[0xDD1B172906C060B][0xE110F4940A61D11]] = "Invalid_Request",
		[Enum[0xDD1B172906C060B][0x19E24E4853D17C8]] = "Draw_Not_Found",
		[Enum[0xDD1B172906C060B][0x14086CC17854970]] = "Draw_Complete",
		[Enum[0xDD1B172906C060B][0xD3E38912FCB0716]] = "Insufficient_Funds",
		[Enum[0xDD1B172906C060B][0x5EC78C747462BB0]] = "Already_Owned",
		[Enum[0xDD1B172906C060B][0x2A25DCF95A5EBD7]] = "Product_Not_Found",
		[Enum[0xDD1B172906C060B][0xD9FE0B397262AFD]] = "Spin_Failure"
	}
end
MOBILE_LUCKYDRAW.SCENE_DATAS = {
	bundleOverview = {
		transition = "lucky_draw",
		background = 0x68D1319FB7E9852
	},
	rewardShowcase = {
		transition = "lucky_draw_showcase",
		background = 0xA537C8D9676E297
	}
}
local f0_local3 = FrontEndScene.ClientWeapons.MTXPreview
local f0_local4 = FrontEndScene.ClientCharacters.MTXPreview
local f0_local5 = "mtx_preview_update"
local f0_local6 = "weapon"
MOBILE_LUCKYDRAW.Request3DVFXFor2DItem = function ( f68_arg0, f68_arg1, f68_arg2, f68_arg3 )
	ClientWeapon[0x59B77D6F41ED417]( f0_local0, false )
	FrontEndScene.SetCharacterVisible( f0_local0, false )
	local f68_local0
	if f68_arg3 then
		f68_local0 = MOBILE_LUCKYDRAW.SCENE_DATAS.rewardShowcase
		if not f68_local0 then
		
		else
			Engine[0x90FF5F1FFE3CE9E]( f0_local0, f0_local0 .. "," .. f68_local0.transition .. "," .. f68_arg2 .. "," .. Engine[0x51968F9BE4A326]() )
		end
	end
	f68_local0 = MOBILE_LUCKYDRAW.SCENE_DATAS.bundleOverview
end

MOBILE_LUCKYDRAW.Setup3DItemViewer = function ( f67_arg0, f67_arg1, f67_arg2 )
	MobileItemPreview.BuildViewer( f67_arg0, f67_arg1, f67_arg2, {
		allowRotation = true,
		displayRarityVFX = true
	}, "MobileLuckyDrawMenu" )
end

MOBILE_LUCKYDRAW.GetItemCustomImageOptions = function ( f66_arg0, f66_arg1, f66_arg2 )
	local f66_local0, f66_local1 = nil
	if f66_arg0 == LOOT.itemTypes.OPERATOR or f66_arg0 == LOOT.itemTypes.OPERATOR_SKIN then
		f66_local0 = MOBILE_LUCKYDRAW.ITEM_CUSTOM_IMAGE_DIMENSIONS.operator
		f66_local1 = f66_arg1
	else
		f66_local0 = MOBILE_LUCKYDRAW.ITEM_CUSTOM_IMAGE_DIMENSIONS.default
		f66_local1 = f66_arg2
	end
	return f66_local0, f66_local1
end

MOBILE_LUCKYDRAW.GetItemData = function ( f65_arg0, f65_arg1, f65_arg2, f65_arg3 )
	local f65_local0 = nil
	local f65_local1 = ""
	local f65_local2 = ""
	if f65_arg0 then
		if f65_arg0.isEdgeItem then
			f65_local1 = f65_arg0.name
			f65_local0 = f65_arg0.assets[MobileStoreUtils.AssetTypes.Icon].uri
		else
			f65_local0 = LOOT.GetItemImageByID( f65_arg2 )
			f65_local1 = LOOT.GetItemNameByID( f65_arg2 )
		end
	end
	return MobileStoreUtils.GetItemDescription( f65_arg0 ), f65_local1, f65_local0
end

MOBILE_LUCKYDRAW.RARITY_BACKGROUNDS = {
	nil,
	"mgl_ui_bg_lucky_draw_uncommon",
	"mgl_ui_bg_lucky_draw_rare",
	"mgl_ui_bg_lucky_draw_epic",
	"mgl_ui_bg_lucky_draw_legendary"
}
MOBILE_LUCKYDRAW.RARITY_FLARES = {
	nil,
	"mgl_ui_vfx_uncommon",
	"mgl_ui_vfx_rare",
	"mgl_ui_vfx_epic",
	"mgl_ui_vfx_legendary"
}
MOBILE_LUCKYDRAW.RARITY_SOUNDS = {
	nil,
	0x5A4668F8A3E5A81,
	0x3C6147C75E0C347,
	0x86999E7540B5226,
	0xC39954147B10DF4
}
MOBILE_LUCKYDRAW.TrackDrawAttempted = function ( f64_arg0, f64_arg1, f64_arg2 )
	local f64_local0 = f64_arg2.spinCost.currencyId:GetValue( f64_arg0 )
	Engine[0x15D98DF5F61904B]( 0, "dlog_event_fe_lucky_draw_attempted", {
		source = f64_arg1,
		draw_id = f64_arg2.id:GetValue( f64_arg0 ),
		spin_index = f64_arg2.currentSpin:GetValue( f64_arg0 ),
		cost = f64_arg2.spinCost.price:GetValue( f64_arg0 ),
		currency = f64_local0,
		player_currency = Commerce[0xFCE51EA6B7B00CC]( f64_arg0, f64_local0 )
	} )
end

MOBILE_LUCKYDRAW.DataUtils = {
	GetAssetDataOfType = function ( f63_arg0, f63_arg1 )
		assert( f63_arg0 )
		local f63_local0 = #f63_arg0
		for f63_local1 = 1, f63_local0, 1 do
			if f63_arg0[f63_local1].type == f63_arg1 then
				return f63_arg0[f63_local1].uri
			end
		end
		return nil
	end,
	GetCurrentDraw = function ( f62_arg0 )
		local f62_local0 = DataSources.frontEnd.luckyDraw.currentDrawId:GetValue( f62_arg0 )
		if f62_local0 then
			return MOBILE_LUCKYDRAW.DataUtils.GetDrawById( f62_local0, f62_arg0 )
		else
			return nil
		end
	end,
	GetDrawAtIndex = function ( f61_arg0, f61_arg1 )
		local f61_local0 = DataSources.frontEnd.luckyDraw.draws:GetDataSourceAtIndex( f61_arg0, f61_arg1 )
		return {
			id = f61_local0.id:GetValue( f61_arg1 ),
			title = f61_local0.title:GetValue( f61_arg1 ),
			description = f61_local0.description:GetValue( f61_arg1 ),
			isNew = f61_local0.isNew:GetValue( f61_arg1 ),
			assetCount = f61_local0.assetCount:GetValue( f61_arg1 ),
			productCount = f61_local0.productCount:GetValue( f61_arg1 ),
			assets = MOBILE_LUCKYDRAW.DataUtils.GetAssets( f61_local0, f61_arg1 ),
			products = MOBILE_LUCKYDRAW.DataUtils.GetProducts( f61_local0, f61_arg1 ),
			spinCost = MOBILE_LUCKYDRAW.DataUtils.GetSpinCostTable( f61_local0, f61_arg1 ),
			schedule = MOBILE_LUCKYDRAW.DataUtils.GetScheduleTable( f61_local0, f61_arg1 )
		}
	end,
	GetDrawById = function ( f60_arg0, f60_arg1 )
		local f60_local0 = MobileStoreUtils.GetDatasourceIndexFromId( f60_arg1, "frontEnd.luckyDraw.drawCount", "frontEnd.luckyDraw.draws^.id", f60_arg0 )
		if f60_local0 then
			return MOBILE_LUCKYDRAW.DataUtils.GetDrawAtIndex( f60_local0 )
		else
			return nil
		end
	end,
	GetDrawIdAtIndex = function ( f59_arg0, f59_arg1 )
		if f59_arg0 then
			local f59_local0 = DataSources.frontEnd.luckyDraw.draws:GetDataSourceAtIndex( f59_arg0, f59_arg1 )
			return f59_local0.id:GetValue( f59_arg1 )
		else
			return nil
		end
	end,
	GetAssetTable = function ( f58_arg0, f58_arg1 )
		return {
			uri = f58_arg0.uri:GetValue( f58_arg1 ),
			type = f58_arg0.type:GetValue( f58_arg1 )
		}
	end,
	GetAssets = function ( f57_arg0, f57_arg1 )
		local f57_local0 = {}
		local f57_local1 = f57_arg0.assetCount:GetValue( f57_arg1 )
		if f57_local1 == nil then
			return f57_local0
		end
		for f57_local2 = 0, f57_local1 - 1, 1 do
			table.insert( f57_local0, MOBILE_LUCKYDRAW.DataUtils.GetAssetTable( f57_arg0.assets:GetDataSourceAtIndex( f57_local2, f57_arg1 ) ) )
		end
		return f57_local0
	end,
	GetProductItemTable = function ( f56_arg0, f56_arg1 )
		local f56_local0, f56_local1 = nil
		if f56_arg0.subClassName and f56_arg0.className then
			f56_local0 = f56_arg0.className:GetValue( f56_arg1 )
			f56_local1 = f56_arg0.subClassName:GetValue( f56_arg1 )
		end
		return {
			id = f56_arg0.id:GetValue( f56_arg1 ),
			name = f56_arg0.name:GetValue( f56_arg1 ),
			description = f56_arg0.description:GetValue( f56_arg1 ),
			rarity = f56_arg0.rarity:GetValue( f56_arg1 ),
			isEdgeItem = f56_arg0.isEdgeItem:GetValue( f56_arg1 ),
			assetCount = f56_arg0.assetCount:GetValue( f56_arg1 ),
			assets = MOBILE_LUCKYDRAW.DataUtils.GetAssets( f56_arg0, f56_arg1 ),
			className = f56_local0,
			subClassName = f56_local1
		}
	end,
	GetProductItems = function ( f55_arg0, f55_arg1 )
		local f55_local0 = {}
		local f55_local1 = f55_arg0.itemCount:GetValue( f55_arg1 )
		if f55_local1 == nil then
			return f55_local0
		end
		for f55_local2 = 0, f55_local1 - 1, 1 do
			table.insert( f55_local0, MOBILE_LUCKYDRAW.DataUtils.GetProductItemTable( f55_arg0.items:GetDataSourceAtIndex( f55_local2, f55_arg1 ) ) )
		end
		return f55_local0
	end,
	GetProductTable = function ( f54_arg0, f54_arg1 )
		return {
			id = f54_arg0.productId:GetValue( f54_arg1 ),
			layoutId = f54_arg0.layoutId:GetValue( f54_arg1 ),
			name = f54_arg0.name:GetValue( f54_arg1 ),
			description = f54_arg0.description:GetValue( f54_arg1 ),
			isNew = f54_arg0.isNew:GetValue( f54_arg1 ),
			isOwned = f54_arg0.isOwned:GetValue( f54_arg1 ),
			isWon = f54_arg0.isWon:GetValue( f54_arg1 ),
			rarity = f54_arg0.rarity:GetValue( f54_arg1 ),
			dropRate = f54_arg0.dropRate:GetValue( f54_arg1 ),
			assetCount = f54_arg0.assetCount:GetValue( f54_arg1 ),
			assets = MOBILE_LUCKYDRAW.DataUtils.GetAssets( f54_arg0, f54_arg1 ),
			items = MOBILE_LUCKYDRAW.DataUtils.GetProductItems( f54_arg0, f54_arg1 )
		}
	end,
	HasOwnedProducts = function ( f53_arg0, f53_arg1, f53_arg2 )
		for f53_local0 = 0, f53_arg2 - 1, 1 do
			local f53_local3 = f53_arg1:GetDataSourceAtIndex( f53_local0, f53_arg0 )
			if f53_local3.isOwned:GetValue( f53_arg0 ) then
				return true
			end
		end
		return false
	end,
	GetProducts = function ( f52_arg0, f52_arg1 )
		local f52_local0 = {}
		local f52_local1 = f52_arg0.productCount:GetValue( f52_arg1 )
		if f52_local1 == nil then
			return f52_local0
		end
		for f52_local2 = 0, f52_local1 - 1, 1 do
			table.insert( f52_local0, MOBILE_LUCKYDRAW.DataUtils.GetProductTable( f52_arg0.products:GetDataSourceAtIndex( f52_local2, f52_arg1 ) ) )
		end
		return f52_local0
	end,
	GetSpinCostTable = function ( f51_arg0, f51_arg1 )
		return {
			price = f51_arg0.spinCost.price:GetValue( f51_arg1 ),
			currencyId = f51_arg0.spinCost.currencyId:GetValue( f51_arg1 ),
			displayText = f51_arg0.spinCost.displayText:GetValue( f51_arg1 )
		}
	end,
	GetScheduleTable = function ( f50_arg0, f50_arg1 )
		return {
			startTime = f50_arg0.schedule.startTime:GetValue( f50_arg1 ),
			endTime = f50_arg0.schedule.endTime:GetValue( f50_arg1 )
		}
	end,
	IsChaseItem = function ( f49_arg0 )
		local f49_local0
		if f49_arg0 ~= 1 and f49_arg0 ~= 2 then
			f49_local0 = false
		else
			f49_local0 = true
		end
		return f49_local0
	end,
	GetEdgeItem = function ( f48_arg0, f48_arg1, f48_arg2 )
		for f48_local0 = 0, f48_arg2 - 1, 1 do
			local f48_local3 = f48_arg1:GetDataSourceAtIndex( f48_local0, f48_arg0 )
			if f48_local3.isEdgeItem:GetValue( f48_arg0 ) == true then
				return f48_local3
			end
		end
		return nil
	end,
	GetNonEdgeItem = function ( f47_arg0, f47_arg1, f47_arg2 )
		for f47_local0 = 0, f47_arg2 - 1, 1 do
			local f47_local3 = f47_arg1:GetDataSourceAtIndex( f47_local0, f47_arg0 )
			if f47_local3.isEdgeItem:GetValue( f47_arg0 ) == false then
				return f47_local3
			end
		end
		assert( nil )
		return nil
	end,
	GetWonProductCount = function ( f46_arg0, f46_arg1, f46_arg2 )
		local f46_local0 = 0
		for f46_local1 = 0, f46_arg2 - 1, 1 do
			local f46_local4 = f46_arg1:GetDataSourceAtIndex( f46_local1, f46_arg0 )
			if f46_local4.isWon:GetValue( f46_arg0 ) then
				f46_local0 = f46_local0 + 1
			end
		end
		return f46_local0
	end,
	GetEventIdByCurrentDrawId = function ( f45_arg0 )
		local f45_local0 = MobileStoreUtils.GetDatasourceIndexFromId( f45_arg0, "frontEnd.luckyDraw.drawCount", "frontEnd.luckyDraw.draws^.id", DataSources.frontEnd.luckyDraw.currentDrawId:GetValue( f45_arg0 ) )
		if f45_local0 then
			local f45_local1 = DataSources.frontEnd.luckyDraw.draws:GetDataSourceAtIndex( f45_local0, f45_arg0 )
			return f45_local1.eventId:GetValue( f45_arg0 )
		else
			return ONLINE_EVENTS.InvalidEntry
		end
	end,
	ImportLuckyDrawDummyData = function ( f43_arg0, f43_arg1, f43_arg2, f43_arg3 )
		for f43_local4, f43_local5 in pairs( f43_arg0 ) do
			if type( f43_local5 ) == "table" then
				if f43_local5[1] ~= nil then
					local f43_local3 = LUI.DataSourceFromList.new( #f43_local5 )
					f43_local3:SetCachingEnabled( true )
					f43_local3.MakeDataSourceAtIndex = function ( f44_arg0, f44_arg1, f44_arg2 )
						local f44_local0 = {}
						MOBILE_LUCKYDRAW.DataUtils.ImportLuckyDrawDummyData( f43_arg0[f44_arg1 + 1], f43_arg0 .. f44_arg1, f44_arg2, f44_local0 )
						return f44_local0
					end
					
					f43_arg3[f43_local4] = f43_local3
				else
					f43_arg3[f43_local4] = {}
					local f43_local3 = f43_arg1
					f43_arg3[f43_local4] = MOBILE_LUCKYDRAW.DataUtils.ImportLuckyDrawDummyData( f43_local5, f43_arg1 .. "." .. f43_local4, f43_arg2, f43_arg3[f43_local4] )
				end
			else
				local f43_local3 = LUI.DataSourceInGlobalModel.new( f43_arg1 .. "." .. f43_local4 )
				f43_local3:SetValue( f43_arg2, f43_local5 )
				f43_arg3[f43_local4] = f43_local3
			end
		end
		return f43_arg3
	end,
	GetNextDrawIdAfterExpiration = function ( f42_arg0, f42_arg1 )
		local f42_local0 = MOBILE_LUCKYDRAW.GetCurrentTime()
		local f42_local1 = DataSources.frontEnd.luckyDraw.drawCount:GetValue( f42_arg0 )
		for f42_local2 = f42_arg1 + 1, f42_local1 - 1, 1 do
			local f42_local5 = DataSources.frontEnd.luckyDraw.draws:GetDataSourceAtIndex( f42_local2, f42_arg0 )
			if f42_local0 < f42_local5.schedule.endTime:GetValue( f42_arg0 ) then
				return f42_local5.id:GetValue( f42_arg0 )
			end
		end
		for f42_local2 = f42_arg1 - 1, 0, -1 do
			local f42_local5 = DataSources.frontEnd.luckyDraw.draws:GetDataSourceAtIndex( f42_local2, f42_arg0 )
			if f42_local0 < f42_local5.schedule.endTime:GetValue( f42_arg0 ) then
				return f42_local5.id:GetValue( f42_arg0 )
			end
		end
		return nil
	end,
	GetSortedProducts = function ( f40_arg0, f40_arg1, f40_arg2 )
		local f40_local0 = {}
		for f40_local1 = 0, f40_arg2 - 1, 1 do
			table.insert( f40_local0, f40_arg1:GetDataSourceAtIndex( f40_local1, f40_arg0 ) )
		end
		table.sort( f40_local0, function ( f41_arg0, f41_arg1 )
			return f41_arg0.layoutId:GetValue( f40_arg0 ) < f41_arg1.layoutId:GetValue( f40_arg0 )
		end )
		return f40_local0
	end,
	GetProductById = function ( f39_arg0, f39_arg1, f39_arg2 )
		local f39_local0 = nil
		for f39_local1 = 0, f39_arg1.productCount:GetValue( f39_arg0 ), 1 do
			local f39_local4 = f39_arg1.products:GetDataSourceAtIndex( f39_local1, f39_arg0 )
			if f39_local4.productId:GetValue( f39_arg0 ) == f39_arg2 then
				f39_local0 = f39_local4
				break
			end
		end
		return f39_local0
	end,
	GetDrawIndexFromTabIndex = function ( f38_arg0, f38_arg1 )
		assert( 0 <= f38_arg1 )
		local f38_local0 = DataSources.frontEnd.luckyDraw.drawCount:GetValue( f38_arg0 )
		for f38_local1 = 0, f38_local0 - 1, 1 do
			local f38_local4 = DataSources.frontEnd.luckyDraw.draws:GetDataSourceAtIndex( f38_local1, f38_arg0 )
			local f38_local5 = f38_local4.schedule.endTime:GetValue( f38_arg0 )
			local f38_local6 = f38_local4.schedule.startTime:GetValue( f38_arg0 )
			local f38_local7 = MOBILE_LUCKYDRAW.GetCurrentTime()
			if f38_local7 < f38_local5 and f38_local6 <= f38_local7 then
				if f38_arg1 == 0 then
					return f38_local1
				end
				f38_arg1 = f38_arg1 - 1
			end
		end
		return nil
	end,
	GetTabIndexFromDrawId = function ( f37_arg0, f37_arg1 )
		if #f37_arg0 <= 0 then
			MobileStoreUtils.LogError( "ERROR - MobileLuckyDrawUtils.GetTabIndexFromDrawId - #tabsArray is " .. #f37_arg0 .. ", the returned tabIndex is nil" )
			return nil
		end
		for f37_local0 = 1, #f37_arg0 - 1, 1 do
			if f37_arg1 == f37_arg0[f37_local0].id then
				return f37_local0
			end
		end
	end,
	GetItemTypeLabel = function ( f36_arg0 )
		local f36_local0 = LOOT.GetTypeData()
		f36_local0 = f36_local0[f36_arg0]
		if not f36_local0 then
			return ""
		else
			local f36_local1 = f36_local0.typeNameLoc
			if not f36_local1 then
				return ""
			else
				return Engine[0xED84C33EC5F01EA]( f36_local1 )
			end
		end
	end,
	GetSelectedItemTacticalBuildData = function ( f35_arg0, f35_arg1 )
		local f35_local0 = MOBILE_LUCKYDRAW.DataUtils.GetNonEdgeItem( f35_arg0, f35_arg1.items, f35_arg1.itemCount:GetValue( f35_arg0 ) )
		local f35_local1 = f35_local0.id:GetValue( f35_arg0 )
		if LOOT.GetTypeForID( f35_local1 ) == LOOT.itemTypes.WEAPON and f35_local1 ~= nil then
			return WEAPON.GetWeaponBlueprintTacticalBuildDataByLootID( f35_arg0, f35_local1 )
		else
			return nil
		end
	end
}
MOBILE_LUCKYDRAW.ORIGIN_PATHS = {
	deepLink = "deeplink",
	luckyDraw = "luckydraw menu",
	main = "mainmenu"
}
MOBILE_LUCKYDRAW.CurrentOriginPath = ""
MOBILE_LUCKYDRAW.GetExpiredDrawPopupInfo = function ( f34_arg0, f34_arg1 )
	return Engine[0xEB2A2834B76AEA4]( Engine[0xED84C33EC5F01EA]( 0x7A65A3B514BEBA8 ) ), Engine[0xED84C33EC5F01EA]( 0xDF4D2A029C04126, Engine[0x7D3158A9539A355]( f34_arg1.title:GetValue( f34_arg0 ) ) ), Engine[0xEB2A2834B76AEA4]( Engine[0xED84C33EC5F01EA]( 0x3D56476A25DFD86 ) )
end

MOBILE_LUCKYDRAW.HandleDeeplink = function ( f33_arg0, f33_arg1, f33_arg2 )
	local f33_local0 = nil
	local f33_local1 = MobileStoreUtils.GetDatasourceIndexFromId( f33_arg0, "frontEnd.luckyDraw.drawCount", "frontEnd.luckyDraw.draws^.id", f33_arg1 )
	local f33_local2 = URI.State.originPath[#URI.State.originPath]
	if f33_local2 then
		f33_local2 = "deeplink: " .. f33_local2
	else
		f33_local2 = MOBILE_LUCKYDRAW.ORIGIN_PATHS.deepLink
	end
	MOBILE_LUCKYDRAW.CurrentOriginPath = f33_local2
	if f33_local1 then
		f33_local0 = DataSources.frontEnd.luckyDraw.draws:GetDataSourceAtIndex( f33_local1, f33_arg0 )
	end
	if f33_local0 then
		if f33_local0.schedule.endTime:GetValue( f33_arg0 ) > MOBILE_LUCKYDRAW.GetCurrentTime() then
			f33_arg2._shouldSkipSetActiveTab = true
		else
			MOBILE_LUCKYDRAW.HandleExpiredDeeplink( f33_arg0, f33_local0, f33_local2 )
		end
	else
		MOBILE_LUCKYDRAW.HandleInvalidDeeplink( f33_arg0, f33_local2 )
	end
end

MOBILE_LUCKYDRAW.HandleExpiredDeeplink = function ( f32_arg0, f32_arg1, f32_arg2 )
	local f32_local0, f32_local1, f32_local2 = MOBILE_LUCKYDRAW.GetExpiredDrawPopupInfo( f32_arg0, f32_arg1 )
	LUI.FlowManager.RequestPopupMenu( nil, "MobileGenericPopupWindow", true, f32_arg0, false, {
		title = f32_local0,
		message = f32_local1,
		label = f32_local2,
		typeOfPopup = PopupsUtils.typeOfPopup.POPUP_OK
	}, nil, true, true )
	MOBILE_LUCKYDRAW.CurrentOriginPath = "Expired " .. f32_arg2
end

MOBILE_LUCKYDRAW.HandleInvalidDeeplink = function ( f31_arg0, f31_arg1 )
	MOBILE_LUCKYDRAW.CurrentOriginPath = "Invalid " .. f31_arg1
	LUI.FlowManager.RequestPopupMenu( nil, "MobileGenericPopupWindow", true, f31_arg0, false, {
		title = Engine[0xEB2A2834B76AEA4]( Engine[0xED84C33EC5F01EA]( 0x12D224EC3DE75E6 ) ),
		message = Engine[0xED84C33EC5F01EA]( 0xDE752270FC38302 ),
		label = Engine[0xEB2A2834B76AEA4]( Engine[0xED84C33EC5F01EA]( 0x1B38A071E843C6D ) ),
		typeOfPopup = PopupsUtils.typeOfPopup.POPUP_OK
	}, nil, true, true )
end

MOBILE_LUCKYDRAW.SetActiveTab = function ( f30_arg0, f30_arg1, f30_arg2, f30_arg3, f30_arg4, f30_arg5 )
	TAB.UpdateBuiltWidget( f30_arg1, f30_arg2, f30_arg3, f30_arg4, {
		stretchToContainer = true,
		buildPriority = 4294967295,
		controllerIndex = f30_arg0
	} )
	f30_arg1.activeTabWidget:LoadDrawContent( f30_arg5, f30_arg0, true )
end

MOBILE_LUCKYDRAW.LuckyDrawsData = {}
MOBILE_LUCKYDRAW.GenerateLuckyDrawProducts = function ( f29_arg0 )
	local f29_local0 = {}
	for f29_local1 = 1, f29_arg0, 1 do
		local f29_local4 = f0_local0[math.random( 1, #f0_local0 )]
		local f29_local5 = {
			{
				format = "png",
				uri = f29_local4,
				type = MobileStoreUtils.AssetTypes.Image
			},
			{
				format = "png",
				uri = f29_local4,
				type = MobileStoreUtils.AssetTypes.Icon
			}
		}
		if math.random( 0, 1 ) == 1 then
			table.insert( f29_local5, {
				uri = "https://telescope.callofduty.com/ts-mobile/mgl/store/test/testVideoPlayer.html",
				format = "url",
				type = MobileStoreUtils.AssetTypes.Video
			} )
		end
		local f29_local6 = {
			{
				description = "Item 1 description",
				name = "Item 1",
				isEdgeItem = false,
				id = 1,
				rarity = math.random( 0, 4 ),
				assetCount = #f29_local5,
				assets = f29_local5
			}
		}
		if math.random( 0, 1 ) == 1 then
			table.insert( f29_local6, MOBILE_LUCKYDRAW.GenerateEdgeItem() )
		end
		table.insert( f29_local0, {
			productId = f29_local1,
			layoutId = f29_local1,
			name = "Item " .. f29_local1,
			description = "description text " .. f29_local1,
			assetCount = #f29_local5,
			assets = f29_local5,
			isNew = math.random( 0, 1 ) == 1,
			isOwned = math.random( 0, 1 ) == 1,
			isWon = math.random( 0, 1 ) == 1,
			rarity = math.random( 0, 4 ),
			dropRate = math.random( 1, 9 ) * 0.005,
			itemCount = #f29_local6,
			items = f29_local6
		} )
	end
	return f29_local0
end

MOBILE_LUCKYDRAW.GenerateEdgeItem = function ( f28_arg0 )
	return {
		description = "Rip and Tear Event",
		assetCount = 2,
		name = "headshots",
		isEdgeItem = true,
		id = 1000,
		assets = {
			{
				uri = "mgl_ui_mobile_test_edge_item_placeholder",
				format = "png",
				type = MobileStoreUtils.AssetTypes.Image
			},
			{
				uri = "mgl_ui_mobile_test_edge_item_placeholder",
				format = "png",
				type = MobileStoreUtils.AssetTypes.Icon
			}
		},
		rarity = math.random( 0, 4 )
	}
end

MOBILE_LUCKYDRAW.GenerateLuckyDraws = function ( f27_arg0 )
	local f27_local0 = {}
	local f27_local1 = 10
	for f27_local2 = 1, f27_arg0, 1 do
		local f27_local5 = MOBILE_LUCKYDRAW.GenerateLuckyDrawProducts( f27_local1 )
		local f27_local6 = {
			{
				format = "png",
				uri = f0_local0[math.random( 1, #f0_local0 )],
				type = MobileStoreUtils.AssetTypes.Image
			},
			{
				uri = "https://telescope.callofduty.com/ts-mobile/mgl/store/test/testVideoPlayer.html",
				format = "url",
				type = MobileStoreUtils.AssetTypes.Video
			}
		}
		if math.random( 0, 1 ) == 1 then
			table.insert( f27_local6, {
				uri = "mgl_ui_bg_login",
				format = "png",
				type = MobileStoreUtils.AssetTypes.Background
			} )
		end
		local f27_local7 = table.insert
		local f27_local8 = f27_local0
		local f27_local9 = {
			description = "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. ",
			isNew = false,
			id = f27_local2,
			title = "LD Title " .. f27_local2,
			spinCost = {
				currencyId = 20,
				displayText = "100",
				price = -28
			}
		}
		local f27_local10 = {
			startTime = 1659397748
		}
		local f27_local11
		if f27_local2 == 1 then
			f27_local11 = CoD.GetUTC() + 20
			if not f27_local11 then
			
			else
				f27_local10.endTime = f27_local11
				f27_local9.schedule = f27_local10
				f27_local9.assetCount = #f27_local6
				f27_local9.assets = f27_local6
				f27_local9.productCount = f27_local1
				f27_local9.products = f27_local5
				f27_local7( f27_local8, f27_local9 )
			end
		end
		f27_local11 = CoD.GetUTC() + 3600
	end
	return f27_local0
end

MOBILE_LUCKYDRAW.GetAssetForLuckyDrawCelebration = function ( f26_arg0, f26_arg1, f26_arg2 )
	local f26_local0 = {}
	assert( f26_arg2 == 1 )
	local f26_local1 = 0
	local f26_local2 = f26_arg2 - 1
	f26_local1 = f26_local1 + 1
	if f26_local1 >?= f26_local2 then
		return f26_local0
	else
		local f26_local3 = f26_arg1:GetDataSourceAtIndex( f26_local1, f26_arg0 )
		local f26_local4 = f26_local3.type:GetValue( f26_arg0 )
		f26_local0[1] = f26_local3.uri:GetValue( f26_arg0 )
		return "icon_commendation_headshots_shotgun"
	end
end

MOBILE_LUCKYDRAW.UpdateSpinCost = function ( f25_arg0, f25_arg1 )
	local f25_local0 = f25_arg0:GetDataSource()
	if f25_arg0._product then
		f25_arg0._product.price = f25_local0.spinCost.price:GetValue( f25_arg1 )
		f25_arg0._product.displayText = f25_local0.spinCost.displayText:GetValue( f25_arg1 )
	end
end

MOBILE_LUCKYDRAW.MakeUrlSubstringValid = function ( f24_arg0, f24_arg1, f24_arg2 )
	if String.IsNilOrEmpty( f24_arg0 ) then
		MOBILE_LUCKYDRAW.LogError( "ERROR - MOBILE_LUCKYDRAW.MakeUrlSubstringValid: URL substring is nil or empty" )
		return ""
	elseif f24_arg1 then
		f24_arg0 = f24_arg0:gsub( "", "" )
	end
	if f24_arg2 then
		f24_arg0 = f24_arg0:gsub( " ", "%%20" )
	end
	return f24_arg0
end

MOBILE_LUCKYDRAW.OpenVideoPlayer = function ( f23_arg0 )
	if String.IsNilOrEmpty( f23_arg0 ) then
		MOBILE_LUCKYDRAW.LogError( "ERROR - MOBILE_LUCKYDRAW.OpenVideoPlayer - Video URL is nil or empty, Video Player will not open" )
		return 
	else
		Web[0x78877DD0F38670C]( f23_arg0 )
	end
end

MOBILE_LUCKYDRAW.IsValidImage = function ( f22_arg0 )
	if LUI.StringIsNilOrEmpty( f22_arg0 ) or f22_arg0 == CoD.ERROR_TEXTURE then
		return false
	end
	local f22_local0 = GetMaterialAtlasInfo( f22_arg0 )
	local f22_local1
	if 0 >= f22_local0.rows or 0 >= f22_local0.columns then
		f22_local1 = false
	else
		f22_local1 = true
	end
	return f22_local1
end

local f0_local7 = 300 * _1080p
MOBILE_LUCKYDRAW.TestPurchaseCelebration = function ( f21_arg0, f21_arg1, f21_arg2 )
	local f21_local0 = MOBILE_PURCHASE.ShowPurchaseCelebration
	local f21_local1 = {}
	local f21_local2 = {
		title = "Ghost Condemned",
		type = 4,
		image = "mgl_ui_lucky_draw_logo_placeholder",
		currencyId = 20,
		spinAgainPrice = 600,
		luckyDrawId = -4151,
		displayText = "600 CoD Points",
		price = 600,
		canSpinAgain = f21_arg2,
		items = {
			{
				name = "Cool Item Name",
				image = "ld_award10",
				type = 31
			}
		},
		rarity = {
			type = f21_arg0
		}
	}
	local f21_local3
	if f21_arg1 then
		f21_local3 = 1
	else
		f21_local3 = 3
	end
	f21_local2.layoutId = f21_local3
	f21_local1.product = f21_local2
	f21_local0( f21_local1 )
end

MOBILE_LUCKYDRAW.ShowPurchaseConfirmationPopup = function ( f19_arg0 )
	assert( f19_arg0.product )
	Engine[0x15D98DF5F61904B]( 0, "dlog_event_fe_lucky_draw_confirmation_appeared", {
		draw_id = f19_arg0.product.luckyDrawId,
		spin_index = f19_arg0.product.currentSpin
	} )
	LUI.FlowManager.RequestPopupMenu( nil, "MobileGenericPopupWindow", true, f19_arg0.controllerIndex, false, {
		title = Engine[0xEB2A2834B76AEA4]( Engine[0xED84C33EC5F01EA]( 0xE8A13F591FAFFBE ) ),
		message = Engine[0xED84C33EC5F01EA]( 0xC5AFEB14B183C7A, Engine[0x7D3158A9539A355]( f19_arg0.product.price ) ),
		label = Engine[0xEB2A2834B76AEA4]( Engine[0xED84C33EC5F01EA]( 0xE8A13F591FAFFBE ) ),
		customContent = {
			type = "MobileLuckyDrawPurchaseConfirmationPopupContent",
			product = f19_arg0.product
		},
		action = function ( f20_arg0 )
			if f19_arg0.onComplete then
				f19_arg0.onComplete()
			end
			ACTIONS.LeaveMenu( f20_arg0 )
		end,
		customExitFunction = f19_arg0.onCancel
	}, nil, true, true )
end

local f0_local8 = nil
local f0_local9 = function ( f18_arg0, f18_arg1 )
	if f0_local0 ~= nil then
		MOBILE_LUCKYDRAW.IS_FROM_SPIN_CONFIRMATION = false
		f0_local0.SpinButton:SetButtonDisabled( true )
		f0_local0._productID = f18_arg0
		f0_local0:PlaySpinAnimations( f18_arg1, f18_arg0 )
	end
end

MOBILE_LUCKYDRAW.RegisterSpinPurchaseEvent = function ( f16_arg0 )
	local f16_local0 = Engine[0xEE6F69FEA944B13]()
	assert( f16_local0 ~= nil, "Root element is unavaulable, cannot add an event handler for commerce_transaction_updated" )
	if f16_local0 ~= nil then
		f0_local0 = f16_arg0
		f16_local0:registerEventHandlerIfFree( "luckydraw_spin", function ( f17_arg0, f17_arg1 )
			local f17_local0 = f17_arg1.productId
			local f17_local1 = f17_arg1.transactionId
			local f17_local2 = f17_arg1.transactionStatus
			local f17_local3 = f17_arg1.spinId
			local f17_local4 = f17_arg1.drawId
			local f17_local5 = f17_arg1.controlId
			if f17_local2 == Enum[0xDD1B172906C060B][0x9FE06E3408E53D0] then
				assert( f17_local0 ~= 0, "invalid product id" )
				Engine[0x15D98DF5F61904B]( 0, "dlog_event_fe_lucky_draw_success", {
					draw_id = f17_local4,
					spin_index = f17_local3,
					transaction_id = f17_local1
				} )
				if f17_local0 ~= 0 then
					f16_arg0( f17_local0, f17_local5 )
				end
			else
				Engine[0x15D98DF5F61904B]( 0, "dlog_event_fe_lucky_draw_error", {
					draw_id = f17_local4,
					spin_index = f17_local3,
					error_code = f17_local2,
					transaction_id = f17_local1,
					transaction_status = f16_arg0[f17_local2]
				} )
				MOBILE_LUCKYDRAW.ShowSpinErrorPopup( {
					f17_local5
				} )
			end
		end )
	end
end

local f0_local10 = function ( f13_arg0 )
	local f13_local0 = f13_arg0.product.luckyDrawId
	local f13_local1 = f13_arg0.product.currentSpin
	MOBILE_LUCKYDRAW.ShowPurchaseConfirmationPopup( {
		product = f13_arg0.product,
		onComplete = function ( f15_arg0, f15_arg1 )
			Engine[0x15D98DF5F61904B]( 0, "dlog_event_fe_lucky_draw_confirmed", {
				draw_id = f13_arg0,
				spin_index = f13_arg0
			} )
			if f13_arg0.onPurchaseStart then
				f13_arg0.onPurchaseStart()
			end
			MOBILE_LUCKYDRAW.RegisterSpinPurchaseEvent( f13_arg0.source )
			LuckyDraw[0xF6EDF8C8C9AFAA]( f13_arg0.controllerIndex, f13_arg0, f13_arg0.product.currentSpin )
			Engine[0x15D98DF5F61904B]( 0, "dlog_event_fe_lucky_draw_started", {
				draw_id = f13_arg0,
				spin_index = f13_arg0
			} )
		end,
		onCancel = function ()
			Engine[0x15D98DF5F61904B]( 0, "dlog_event_fe_lucky_draw_confirmation_closed", {
				draw_id = f13_arg0,
				spin_index = f13_arg0
			} )
		end,
		controllerIndex = f13_arg0.controllerIndex
	} )
end

MOBILE_LUCKYDRAW.MakePurchase = function ( f8_arg0 )
	local f8_local0 = function ()
		f8_arg0( f8_arg0 )
	end
	
	local f8_local1 = MobileStoreUtils.DataUtils.GetCurrency( f8_arg0.product.currencyId, f8_arg0.controllerIndex )
	local f8_local2 = function ( f11_arg0 )
		Engine[0x15D98DF5F61904B]( 0, f11_arg0, {
			draw_id = f8_arg0.product.luckyDrawId,
			spin_index = f8_arg0.product.currentSpin
		} )
	end
	
	MOBILE_PURCHASE.ShowInsufficientPointsPopupIfNeeded( {
		product = f8_arg0.product,
		currency = f8_local1,
		onComplete = f8_local0,
		onCancel = function ()
			f8_arg0( "dlog_event_fe_lucky_draw_insufficient_points_cancel" )
		end,
		controllerIndex = f8_arg0.controllerIndex,
		uri = f8_local1.insufficientURI,
		onPrompt = function ()
			f8_arg0( "dlog_event_fe_lucky_draw_insufficient_points_prompt" )
		end
	} )
end

MOBILE_LUCKYDRAW.ShowSpinErrorPopup = function ( f6_arg0 )
	LUI.FlowManager.RequestPopupMenu( nil, "MobileGenericPopupWindow", true, f6_arg0.controllerIndex, false, {
		title = Engine[0xEB2A2834B76AEA4]( Engine[0xED84C33EC5F01EA]( 0xBBEA7CB5C7D7B0B ) ),
		message = Engine[0xED84C33EC5F01EA]( 0xF7CB5D8555B0B1B ),
		label = Engine[0xEB2A2834B76AEA4]( Engine[0xED84C33EC5F01EA]( 0x3D56476A25DFD86 ) ),
		action = function ( f7_arg0 )
			ACTIONS.LeaveMenu( f7_arg0 )
		end,
		typeOfPopup = PopupsUtils.typeOfPopup.POPUP_OK
	}, nil, true, true )
end

MOBILE_LUCKYDRAW.HandleCelebrationTouch = function ( f5_arg0, f5_arg1 )
	if f5_arg0._product.items and f5_arg0._itemIndex < #f5_arg0._product.items then
		f5_arg0._itemIndex = f5_arg0._itemIndex + 1
		f5_arg0:LoadProduct( f5_arg0._product )
		return 
	end
	local f5_local0 = f5_arg0._product.draw
	if not f5_arg0._product.canSpinAgain and not f5_arg0._showingLuckyDrawComplete then
		if CONDITIONS.IsMobileLuckyDraw3DSceneEnabled() then
			f5_arg0.Background:SetVisible( true )
		end
		Engine[0x15D98DF5F61904B]( 0, "dlog_event_fe_lucky_draw_spin_celebration_closed", {
			draw_id = f5_local0.id:GetValue( f5_arg1 ),
			spin_index = f5_arg0._product.currentSpin
		} )
		f5_arg0._showingLuckyDrawComplete = true
		f5_arg0.LuckyDrawCompleteAnimation:Animate( {
			f5_arg0._product,
			f5_arg1
		} )
		return 
	elseif f5_arg0._showingLuckyDrawComplete then
		Engine[0x15D98DF5F61904B]( 0, "dlog_event_fe_lucky_draw_celebration_closed", {
			draw_id = f5_local0.id:GetValue( f5_arg1 )
		} )
	else
		Engine[0x15D98DF5F61904B]( 0, "dlog_event_fe_lucky_draw_spin_celebration_closed", {
			draw_id = f5_local0.id:GetValue( f5_arg1 ),
			spin_index = f5_arg0._product.currentSpin
		} )
	end
	ACTIONS.AnimateSequence( f5_arg0, "FadeOutAndClose" )
end

MOBILE_LUCKYDRAW.SetUpCelebrationItemImage = function ( f4_arg0, f4_arg1, f4_arg2, f4_arg3 )
	local f4_local0 = 0
	local f4_local1 = -410 * _1080p
	local f4_local2 = 0
	if f4_arg2 then
		f4_arg3 = f4_arg2.uri
		f4_local2 = MOBILE_LUCKYDRAW.GetItemCustomImageOptions( f4_arg1, MOBILE_LUCKYDRAW.ITEM_CUSTOM_IMAGE_OFFSETS.operator.celebrationScreen, MOBILE_LUCKYDRAW.ITEM_CUSTOM_IMAGE_OFFSETS.default.celebrationScreen )
		LAYOUT.SetWidth( f4_arg0.ProductBounds, f4_local2.width )
		LAYOUT.SetHeight( f4_arg0.ProductBounds, f4_local2.height )
		f4_arg0.ProductBounds:SetTop( f4_local1 )
		f4_arg0.ProductBounds:SetBottom( f4_local1 + f4_local2.height )
	else
		f4_local2 = MOBILE_LUCKYDRAW.ITEM_LOOT_IMAGE_DIMENSIONS.square
		if f4_arg1 == LOOT.itemTypes.PLAYERCARD then
			f4_local2 = MOBILE_LUCKYDRAW.ITEM_LOOT_IMAGE_DIMENSIONS.card
		elseif f4_arg1 == LOOT.itemTypes.OPERATOR or f4_arg1 == LOOT.itemTypes.OPERATOR_SKIN then
			f4_local2 = MOBILE_LUCKYDRAW.ITEM_LOOT_IMAGE_DIMENSIONS.operator
		elseif f4_arg1 == LOOT.itemTypes.WEAPON or f4_arg1 == LOOT.itemTypes.LOAD_SCREEN then
			f4_local2 = MOBILE_LUCKYDRAW.ITEM_LOOT_IMAGE_DIMENSIONS.wide
		elseif f4_arg1 == LOOT.itemTypes.VEHICLE_CAMO then
			f4_local0 = -150 * _1080p
			f4_local2 = MOBILE_LUCKYDRAW.ITEM_LOOT_IMAGE_DIMENSIONS.vehicleLarge
		end
		LAYOUT.SetWidth( f4_arg0.ProductBounds, MOBILE_LUCKYDRAW.ITEM_LOOT_IMAGE_DIMENSIONS.bounds.width )
		LAYOUT.SetHeight( f4_arg0.ProductBounds, MOBILE_LUCKYDRAW.ITEM_LOOT_IMAGE_DIMENSIONS.bounds.height )
		local f4_local3 = LAYOUT.GetElementWidth( f4_arg0.ProductBounds )
		f4_arg0.ProductBounds:SetTop( f4_local1 + f4_local3 / 2 )
		f4_arg0.ProductBounds:SetBottom( f4_local1 + f4_local3 / 2 )
	end
	f4_arg0.ProductElement = f4_arg0:CreateFixedAspectRatioImage( f4_arg3 )
	LAYOUT.SetWidth( f4_arg0.ProductElement, f4_local2.width )
	LAYOUT.SetHeight( f4_arg0.ProductElement, f4_local2.height )
	f4_arg0.ProductElement:SetLeft( f4_local0 - f4_local2.width / 2 )
	f4_arg0.ProductElement:SetRight( f4_local0 + f4_local2.width / 2 )
end

MOBILE_LUCKYDRAW.LoadCelebrationProduct = function ( f3_arg0, f3_arg1, f3_arg2 )
	ACTIONS.AnimateSequence( f3_arg0, "Reveal" )
	ACTIONS.AnimateSequence( f3_arg0, "LuckyDrawItem" )
	if f3_arg0.ContinueButton then
		ACTIONS.AnimateSequence( f3_arg0.ContinueButton, "Negative" )
	end
	local f3_local0 = MOBILE_LUCKYDRAW.DataUtils.IsChaseItem( f3_arg1.layoutId )
	local f3_local1 = f3_arg1.items[f3_arg0._itemIndex].rarity
	local f3_local2 = f3_arg1.items[f3_arg0._itemIndex].id
	local f3_local3 = nil
	if f3_arg1.items[f3_arg0._itemIndex].isEdgeItem then
		f3_local3 = LOOT.itemTypes.TACTICAL_BOOST
	else
		f3_local3 = LOOT.GetTypeForID( f3_local2 )
	end
	if f3_arg1.canSpinAgain and f3_arg0._itemIndex == #f3_arg1.items then
		f3_arg0.SpinAgainText:SetVisible( true )
		f3_arg0.SpinAgainButton:SetVisible( true )
		f3_arg0.SpinAgainButton:SetButtonDisabled( false )
		f3_arg0.SpinAgainButton:UpdateContent( {
			firstSpin = false,
			currencyIcon = MobileStoreUtils.GetCurrencyIcon( MOBILE_PURCHASE.CurrencyId.CodPoints ),
			price = f3_arg1.spinAgainPrice
		} )
	else
		f3_arg0.SpinAgainText:SetVisible( false )
		f3_arg0.SpinAgainButton:SetVisible( false )
		f3_arg0.SpinAgainButton:SetButtonDisabled( true )
	end
	local f3_local4, f3_local5, f3_local6 = MOBILE_LUCKYDRAW.GetItemData( f3_arg1.items[f3_arg0._itemIndex], f3_local3, f3_local2, f3_arg2 )
	f3_arg0.ItemName:setText( f3_local5 )
	f3_arg0.ItemType:setText( f3_local4 )
	local f3_local7 = math.max( LAYOUT.GetTextWidth( f3_arg0.ItemName, f3_arg2 ), LAYOUT.GetTextWidth( f3_arg0.ItemType, f3_arg2 ) ) + f0_local0
	f3_arg0.ProductTextBackdrop:SetVisible( true )
	LAYOUT.SetWidth( f3_arg0.ProductTextBackdrop, f3_local7 )
	local f3_local8 = CONDITIONS.IsMobileLuckyDraw3DSceneEnabled()
	local f3_local9
	if f3_local8 then
		f3_local9 = f3_local8
	else
		f3_local9 = MobileItemPreview.IsLoot3D( f3_local3 )
	end
	if f3_local8 then
		MobileItemPreview.Setup3DScene( f3_arg0, MOBILE_LUCKYDRAW.SCENE_DATAS.rewardShowcase )
	end
	if f3_local9 then
		MOBILE_LUCKYDRAW.Setup3DItemViewer( f3_arg0, f3_arg2, {
			isShowcase = true,
			type = f3_local3,
			id = f3_local2,
			rarity = f3_local1
		} )
		MOBILE_LUCKYDRAW.SetMenuVisible( false )
		f3_arg0.Background:SetVisible( false )
	elseif LUI.StringIsNilOrEmpty( f3_local6 ) or f3_local6 == CoD.ERROR_TEXTURE then
		f3_arg0.PreviewNotAvailableText:SetVisible( true )
		if f3_arg0.ProductElement then
			f3_arg0.ProductElement:SetVisible( false )
		end
		f3_arg0.ProductTextBackdrop:SetAlpha( 0 )
		MobileStoreUtils.LogError( "ERROR - MobilePurchaseCelebration - missing Image type asset falling back to placeholder for LD item image for item ID " .. f3_local2 )
	else
		MOBILE_LUCKYDRAW.SetUpCelebrationItemImage( f3_arg0, f3_local3, f3_arg1.items[f3_arg0._itemIndex].assets[MobileStoreUtils.AssetTypes.Image], f3_local6 )
	end
	if f3_local1 then
		ACTIONS.AnimateSequence( f3_arg0, "HasRarity" )
		f3_arg0.RarityLabel:SetupRarityLabel( f3_local2, f3_local1, f3_local3 )
		local f3_local10 = MOBILE_LUCKYDRAW.RARITY_BACKGROUNDS[f3_local1]
		if f3_local10 and not f3_local8 then
			f3_arg0.RarityBackground:setImage( RegisterMaterial( f3_local10 ) )
			f3_arg0.RarityBackground:SetVisible( true )
		else
			f3_arg0.RarityBackground:SetVisible( false )
			f3_arg0.RarityFlare:SetVisible( not f3_local8 )
			if f3_local8 and not f3_local9 then
				MOBILE_LUCKYDRAW.Request3DVFXFor2DItem( f3_arg0, f3_arg2, f3_local1, true )
				MOBILE_LUCKYDRAW.SetMenuVisible( false )
				f3_arg0.Background:SetVisible( false )
			end
		end
		if f3_local0 then
			Engine[0xC4146BA76D0F982]( 0xF1F1FBFA7DBAB3B )
		else
			local f3_local11 = MOBILE_LUCKYDRAW.RARITY_SOUNDS[f3_local1]
			if f3_local11 then
				Engine[0xC4146BA76D0F982]( f3_local11 )
			end
		end
	else
		f3_arg0.RarityBackground:SetVisible( false )
		f3_arg0.RarityFlare:SetVisible( false )
	end
	if f3_local0 and not f3_local8 then
		f3_arg0.ChaseFlare:SetVisible( true )
	else
		f3_arg0.ChaseFlare:SetVisible( false )
	end
	if f3_arg1.isOwned then
		ACTIONS.AnimateSequence( f3_arg0, "LuckyDrawAlreadyOwned" )
		f3_arg0.Title:setText( Engine[0xED84C33EC5F01EA]( 0xFB9F0073D82CF07, f3_local5 ) )
	end
end

MOBILE_LUCKYDRAW.LoadLuckyDrawComplete = function ( f2_arg0, f2_arg1, f2_arg2 )
	Engine[0x15D98DF5F61904B]( 0, "dlog_event_fe_lucky_draw_celebration", {
		draw_id = f2_arg1.draw.id:GetValue( f2_arg2 )
	} )
	ACTIONS.AnimateSequence( f2_arg0, "LuckyDrawComplete" )
	if not String.IsNilOrEmpty( f2_arg1.backgroundImage ) then
		f2_arg0.Background:setImage( RegisterMaterial( f2_arg1.backgroundImage ) )
	end
	f2_arg0:ClearProductElement()
	local f2_local0 = f2_arg0.ProductBounds:GetAnchorsAndPosition()
	if MOBILE_LUCKYDRAW.IsValidImage( f2_arg1.image ) then
		f2_arg0.ProductElement = f2_arg0:CreateFixedAspectRatioImage( f2_arg1.image, f2_local0 )
	else
		f2_arg0.PreviewNotAvailableText:SetVisible( true )
		if f2_arg0.ProductElement then
			f2_arg0.ProductElement:SetVisible( false )
		end
		f2_arg0.ProductTextBackdrop:SetAlpha( 0 )
		MobileStoreUtils.LogError( "ERROR - MobilePurchaseCelebration - LuckyDrawComplete - product.image is nil " )
	end
	f2_arg0.Title:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU_MOBILE/LUCKY_DRAW_CONGRATULATIONS" ) )
	f2_arg0.ItemName:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU_MOBILE/LUCKY_DRAW_COMPLETE" ) )
	local f2_local1 = LAYOUT.GetTextWidth( f2_arg0.ItemName, f2_arg2 ) + f0_local0
	f2_arg0.ProductTextBackdrop:SetVisible( true )
	LAYOUT.SetWidth( f2_arg0.ProductTextBackdrop, f2_local1 )
	Engine[0xC4146BA76D0F982]( 0xBEFBF268786F18A )
end

MOBILE_LUCKYDRAW.SetMenuVisible = function ( f1_arg0 )
	local f1_local0 = LUI.FlowManager.GetMenuByName( "MobileLuckyDrawMenu" )
	local f1_local1
	if f1_local0 then
		f1_local1 = f1_local0
	else
		f1_local1 = f1_local0.menu
	end
	if f1_local1 then
		f1_local1:SetVisible( f1_arg0 )
	end
end

