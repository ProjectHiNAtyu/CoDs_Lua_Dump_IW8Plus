-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:52
module( ..., package.seeall )
local f0_local0 = {
	ORANGE = 1,
	RED = 2,
	NONE = 0
}
local f0_local1 = function ( f5_arg0, f5_arg1, f5_arg2 )
	local f5_local0 = Dvar.IBEGCHEFE( "MTTTROPML" ) ~= true
	local f5_local1 = Dvar.IBEGCHEFE( "QSPRQKKMN" ) ~= true
	local f5_local2 = CONDITIONS.IsSingleplayer()
	if f5_local2 then
		if not Dvar.IBEGCHEFE( "killswitch_sp_shader_loading_block" ) then
			f5_local2 = not Dvar.IBEGCHEFE( "MQQOKSOPL" )
		else
			f5_local2 = false
		end
	end
	if f5_local2 or not f5_local0 and not f5_local1 then
		f5_arg0:SetAlpha( 0, 0 )
	else
		local f5_local3 = SWATCHES.HUD.caution
		local f5_local4 = SWATCHES.HUD.colorblindEnemyTeam
		local f5_local5 = SWATCHES.HUD.enemyTeam
		f5_arg0:registerEventHandler( "empty_menu_stack", function ( element, event )
			f5_arg0.showWidgetTime = Engine.BFBIDEGDFB() + Dvar.CFHDGABACF( "MKKSSRKTOT" )
			if not Engine.CGABICJHAI() then
				f5_arg0:SetAlpha( 0, 0 )
			else
				ACTIONS.AnimateSequence( f5_arg0, "HideNetStatsIconsPC" )
			end
		end )
		f5_arg0:SubscribeToModel( DataSources.inGame.player.spawnCount:GetModel( f5_arg1 ), function ()
			f5_arg0.showWidgetTime = Engine.BFBIDEGDFB() + Dvar.CFHDGABACF( "LQPRTQKLLL" )
			if not Engine.CGABICJHAI() then
				f5_arg0:SetAlpha( 0, 0 )
			else
				ACTIONS.AnimateSequence( f5_arg0, "HideNetStatsIconsPC" )
			end
		end )
		local f5_local6 = DataSources.inGame.HUD.netPerf.isEnabled
		local f5_local7 = nil
		local f5_local8 = function ()
			local f11_local0 = f5_arg0:Wait( 100 )
			f11_local0.onComplete = f5_arg0
			if f5_arg0.showWidgetTime and (f5_arg0:GetValue( f5_arg0 ) or f5_arg0) then
				if f5_arg0.showWidgetTime <= Engine.BFBIDEGDFB() then
					if Engine.CGABICJHAI() then
						ACTIONS.AnimateSequence( f5_arg0, "ShowNetStatsIconsPC" )
					end
					f5_arg0:SetAlpha( 0.5, 0 )
					f5_arg0.showWidgetTime = nil
				end
			else
				f5_arg0.showWidgetTime = nil
			end
		end
		
		f5_local8()
		if f5_local0 and f5_local6:GetValue( f5_arg1 ) and not IsSystemLink() then
			assert( f5_arg0.Extrapolation )
			assert( f5_arg0.LatencyVariation )
			assert( f5_arg0.HighLatency )
			assert( f5_arg0.PacketBursting )
			f5_local8 = Engine.BFJBEHGGCH()
			f5_arg0:SubscribeToModel( DataSources.inGame.HUD.netPerf.maxExtrapolation:GetModel( f5_arg1 ), function ( f10_arg0 )
				if Engine.BECCFCBIAA( "enableExtrapolationIcon", f5_arg0 ) then
					local f10_local0 = DataModel.JJEHAEBDF( f10_arg0 )
					if f10_local0 ~= nil then
						local f10_local1, f10_local2 = nil
						if f5_arg0 then
							f10_local1 = Dvar.CFHDGABACF( "MSPPSRRLNM" )
							f10_local2 = Dvar.CFHDGABACF( "NRTQNMSQ" )
						else
							f10_local1 = Dvar.CFHDGABACF( "NLOSLRRKSS" )
							f10_local2 = Dvar.CFHDGABACF( "LRQLSQPPTO" )
						end
						if f10_local1 < f10_local0 then
							f5_arg0.Extrapolation:SetAlpha( 1, 0 )
							if f10_local0 <= f10_local2 then
								f5_arg0.Extrapolation:SetRGBFromTable( f5_arg0, 0 )
							else
								f5_arg0.Extrapolation:SetRGBFromTable( f5_arg0, 0 )
							end
						else
							f5_arg0.Extrapolation:SetAlpha( 0, 0 )
						end
					end
				else
					f5_arg0.Extrapolation:SetAlpha( 0, 0 )
				end
			end )
			f5_arg0:SubscribeToModel( DataSources.inGame.HUD.netPerf.maxInterpolation:GetModel( f5_arg1 ), function ( f9_arg0 )
				if Engine.BECCFCBIAA( "enableLatencyVarIcon", f5_arg0 ) then
					local f9_local0 = DataModel.JJEHAEBDF( f9_arg0 )
					if f9_local0 ~= nil then
						local f9_local1, f9_local2 = nil
						if f5_arg0 then
							f9_local1 = Dvar.CFHDGABACF( "LONQPKOQKL" )
							f9_local2 = Dvar.CFHDGABACF( "OMRRSOROPP" )
						else
							f9_local1 = Dvar.CFHDGABACF( "MLSKLOTNTR" )
							f9_local2 = Dvar.CFHDGABACF( "OMONPOMRSR" )
						end
						if f9_local1 < f9_local0 then
							f5_arg0.LatencyVariation:SetAlpha( 1, 0 )
							if f9_local0 <= f9_local2 then
								f5_arg0.LatencyVariation:SetRGBFromTable( f5_arg0, 0 )
							else
								f5_arg0.LatencyVariation:SetRGBFromTable( f5_arg0, 0 )
							end
						else
							f5_arg0.LatencyVariation:SetAlpha( 0, 0 )
						end
					end
				else
					f5_arg0.LatencyVariation:SetAlpha( 0, 0 )
				end
			end )
			f5_arg0:SubscribeToModel( DataSources.inGame.HUD.netPerf.ping:GetModel( f5_arg1 ), function ( f8_arg0 )
				if Engine.BECCFCBIAA( "enableHighLatencyIcon", f5_arg0 ) then
					local f8_local0 = DataModel.JJEHAEBDF( f8_arg0 )
					if f8_local0 ~= nil then
						local f8_local1, f8_local2 = nil
						if f5_arg0 then
							f8_local1 = Dvar.CFHDGABACF( "MPRLLMQOQS" )
							f8_local2 = Dvar.CFHDGABACF( "OMTMKKMKOQ" )
						else
							f8_local1 = Dvar.CFHDGABACF( "LMOPTKKMNM" )
							f8_local2 = Dvar.CFHDGABACF( "NRPMSPLMLS" )
						end
						if f8_local1 < f8_local0 then
							f5_arg0.HighLatency:SetAlpha( 1, 0 )
							if f8_local0 <= f8_local2 then
								f5_arg0.HighLatency:SetRGBFromTable( f5_arg0, 0 )
							else
								f5_arg0.HighLatency:SetRGBFromTable( f5_arg0, 0 )
							end
						else
							f5_arg0.HighLatency:SetAlpha( 0, 0 )
						end
					end
				else
					f5_arg0.HighLatency:SetAlpha( 0, 0 )
				end
			end )
			local f5_local9 = DataSources.inGame.HUD.netPerf.maxCmdReceived
			local f5_local10 = DataSources.inGame.HUD.netPerf.maxCmdQueued
			local f5_local11 = DataSources.inGame.HUD.netPerf.maxCmdDropped
			local f5_local12 = function ()
				if Engine.BECCFCBIAA( "enablePacketBurstIcon", f5_arg0 ) then
					local f7_local0 = f5_arg0:GetValue( f5_arg0 )
					local f7_local1 = f5_arg0:GetValue( f5_arg0 )
					local f7_local2 = f5_arg0:GetValue( f5_arg0 )
					if f7_local0 ~= nil and f7_local1 ~= nil and f7_local2 ~= nil then
						local f7_local3 = Dvar.CFHDGABACF( "MPMPMRRPSQ" )
						local f7_local4 = Dvar.CFHDGABACF( "LPOKPKRSSS" )
						local f7_local5 = Dvar.CFHDGABACF( "LOLSRTTMPL" )
						if f7_local3 < f7_local0 or f7_local4 < f7_local1 or f7_local5 < f7_local2 then
							f5_arg0.PacketBursting:SetAlpha( 1, 0 )
							if f7_local3 < f7_local0 and f7_local1 <= f7_local4 and f7_local2 <= f7_local5 then
								f5_arg0.PacketBursting:SetRGBFromTable( f5_arg0, 0 )
							end
							if f7_local4 < f7_local1 and f7_local2 <= f7_local5 then
								f5_arg0.PacketBursting:SetRGBFromTable( f5_arg0, 0 )
							end
							if f7_local5 < f7_local2 then
								f5_arg0.PacketBursting:SetRGBFromTable( f5_arg0, 0 )
							end
						else
							f5_arg0.PacketBursting:SetAlpha( 0, 0 )
						end
					else
						f5_arg0.PacketBursting:SetAlpha( 0, 0 )
					end
				else
					f5_arg0.PacketBursting:SetAlpha( 0, 0 )
				end
			end
			
			f5_arg0:SubscribeToModel( f5_local9:GetModel( f5_arg1 ), f5_local12 )
			f5_arg0:SubscribeToModel( f5_local10:GetModel( f5_arg1 ), f5_local12 )
			f5_arg0:SubscribeToModel( f5_local11:GetModel( f5_arg1 ), f5_local12 )
		end
		if f5_local1 then
			assert( f5_arg0.ShaderWarning )
			f5_arg0:SubscribeToModel( DataSources.inGame.HUD.netPerf.PSOLoadNetStatsIconColor:GetModel( f5_arg1 ), function ( f6_arg0 )
				local f6_local0 = DataModel.JJEHAEBDF( f6_arg0 )
				if Engine.BECCFCBIAA( "enableShaderWarningIcon", f5_arg0 ) then
					if f6_local0 then
						f5_arg0.ShaderWarning:SetAlpha( 1 )
						if f6_local0 == f5_arg0.ORANGE then
							f5_arg0.ShaderWarning:SetRGBFromTable( f5_arg0 )
						elseif f6_local0 == f5_arg0.RED then
							f5_arg0.ShaderWarning:SetRGBFromTable( f5_arg0 )
						else
							f5_arg0.ShaderWarning:SetAlpha( 0 )
						end
					end
				else
					f5_arg0.ShaderWarning:SetAlpha( 0 )
				end
			end )
		end
	end
end

function NetStatsIcons( menu, controller )
	local self = LUI.UIVerticalStackedLayout.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 32 * _1080p, 0, 160 * _1080p )
	self.id = "NetStatsIcons"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local Extrapolation = nil
	
	Extrapolation = LUI.UIImage.new()
	Extrapolation.id = "Extrapolation"
	Extrapolation:SetAlpha( 0, 0 )
	Extrapolation:setImage( RegisterMaterial( "hud_icon_net_extrapolation" ), 0 )
	Extrapolation:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 32, 0, _1080p * 32 )
	self:addElement( Extrapolation )
	self.Extrapolation = Extrapolation
	
	local LatencyVariation = nil
	
	LatencyVariation = LUI.UIImage.new()
	LatencyVariation.id = "LatencyVariation"
	LatencyVariation:SetAlpha( 0, 0 )
	LatencyVariation:setImage( RegisterMaterial( "hud_icon_net_latency_variation" ), 0 )
	LatencyVariation:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 32, _1080p * 32, _1080p * 64 )
	self:addElement( LatencyVariation )
	self.LatencyVariation = LatencyVariation
	
	local HighLatency = nil
	
	HighLatency = LUI.UIImage.new()
	HighLatency.id = "HighLatency"
	HighLatency:SetAlpha( 0, 0 )
	HighLatency:setImage( RegisterMaterial( "hud_icon_net_latency_high" ), 0 )
	HighLatency:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 32, _1080p * 64, _1080p * 96 )
	self:addElement( HighLatency )
	self.HighLatency = HighLatency
	
	local PacketBursting = nil
	
	PacketBursting = LUI.UIImage.new()
	PacketBursting.id = "PacketBursting"
	PacketBursting:SetAlpha( 0, 0 )
	PacketBursting:setImage( RegisterMaterial( "hud_icon_net_packet_burst" ), 0 )
	PacketBursting:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 32, _1080p * 96, _1080p * 128 )
	self:addElement( PacketBursting )
	self.PacketBursting = PacketBursting
	
	local ShaderWarning = nil
	
	ShaderWarning = LUI.UIImage.new()
	ShaderWarning.id = "ShaderWarning"
	ShaderWarning:SetAlpha( 0, 0 )
	ShaderWarning:setImage( RegisterMaterial( "hud_icon_net_shader_warning" ), 0 )
	ShaderWarning:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 32, _1080p * 128, _1080p * 160 )
	self:addElement( ShaderWarning )
	self.ShaderWarning = ShaderWarning
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	Extrapolation:RegisterAnimationSequence( "ShowNetStatsIconsPC", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Material,
			value = RegisterMaterial( "hud_icon_net_extrapolation" )
		}
	} )
	LatencyVariation:RegisterAnimationSequence( "ShowNetStatsIconsPC", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Material,
			value = RegisterMaterial( "hud_icon_net_latency_variation" )
		}
	} )
	HighLatency:RegisterAnimationSequence( "ShowNetStatsIconsPC", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Material,
			value = RegisterMaterial( "hud_icon_net_latency_high" )
		}
	} )
	PacketBursting:RegisterAnimationSequence( "ShowNetStatsIconsPC", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Material,
			value = RegisterMaterial( "hud_icon_net_packet_burst" )
		}
	} )
	self._sequences.ShowNetStatsIconsPC = function ()
		menu:AnimateSequence( "ShowNetStatsIconsPC" )
		menu:AnimateSequence( "ShowNetStatsIconsPC" )
		menu:AnimateSequence( "ShowNetStatsIconsPC" )
		menu:AnimateSequence( "ShowNetStatsIconsPC" )
	end
	
	Extrapolation:RegisterAnimationSequence( "HideNetStatsIconsPC", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Material,
			value = RegisterMaterial( "ui_default_null" )
		}
	} )
	LatencyVariation:RegisterAnimationSequence( "HideNetStatsIconsPC", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Material,
			value = RegisterMaterial( "ui_default_null" )
		}
	} )
	HighLatency:RegisterAnimationSequence( "HideNetStatsIconsPC", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Material,
			value = RegisterMaterial( "ui_default_null" )
		}
	} )
	PacketBursting:RegisterAnimationSequence( "HideNetStatsIconsPC", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Material,
			value = RegisterMaterial( "ui_default_null" )
		}
	} )
	self._sequences.HideNetStatsIconsPC = function ()
		menu:AnimateSequence( "HideNetStatsIconsPC" )
		menu:AnimateSequence( "HideNetStatsIconsPC" )
		menu:AnimateSequence( "HideNetStatsIconsPC" )
		menu:AnimateSequence( "HideNetStatsIconsPC" )
	end
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "NetStatsIcons", NetStatsIcons )
LockTable( _M )
