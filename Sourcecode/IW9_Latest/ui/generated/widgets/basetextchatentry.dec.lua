-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
module( ..., package.seeall )
local f0_local0 = 18 * _PT
local f0_local1 = function ( f6_arg0, f6_arg1, f6_arg2 )
	assert( f6_arg0._playerID )
	f6_arg0:SetupContextualMenu( {
		supportsGamepad = true,
		title = f6_arg2.playerName,
		playerData = f6_arg2
	} )
	f6_arg0:AddContextualMenuAction( {
		id = "viewdetails",
		actionName = Engine[0xED84C33EC5F01EA]( 0xB81325BA15D0C76 ),
		conditionFunction = function ()
			return FRIENDS.IsValidEntry( {
				controllerIndex = f6_arg0,
				xuid = f6_arg0._playerID
			} )
		end,
		actionFunction = function ()
			SOCIAL.OpenPlayerDetailsMenu( f6_arg0, {
				showEnhancedDetails = true,
				socialProfileTabId = FRIENDS.SocialProfileTabIDs.DETAILS,
				playerData = f6_arg0
			} )
		end
	} )
	if f6_arg0._isMyPlayer then
		f6_arg0:AddContextualMenuAction( {
			id = "sendAgain",
			actionName = Engine[0xED84C33EC5F01EA]( 0x1D03360F2CB13D4 ),
			conditionFunction = function ()
				return TEXTCHAT.IsMessageSendStateFailed( f6_arg0._messageData )
			end,
			actionFunction = function ()
				TEXTCHAT.SendMessage( f6_arg0._controllerIndex, f6_arg0._messageData.originalMessage )
			end
		} )
		return 
	end
	f6_arg0:AddContextualMenuAction( {
		id = "viewplatformprofile",
		actionName = Engine[0xED84C33EC5F01EA]( 0xF9A5D5C2BBBA271 ),
		conditionFunction = function ()
			local f16_local0
			if not f6_arg0.isCrossplayPlayer then
				f16_local0 = Engine[0xFB1B6E36ABE59B8]()
				if f16_local0 then
					f16_local0 = SOCIAL.IsValidPlatformID( f6_arg0.platformId )
					if f16_local0 then
						f16_local0 = f6_arg0.isValidEntry
						if not f16_local0 then
							f16_local0 = Social[0xB433172370D0A5B]( f6_arg0 )
						end
					end
				end
			else
				f16_local0 = false
			end
			return f16_local0
		end,
		actionFunction = function ()
			Social[0xDD703F297C41A09]( f6_arg0, f6_arg0.platformId )
		end
	} )
	if CONDITIONS.WhispersEnabled( f6_arg1 ) then
		if not TEXTCHAT.IsWhisper( f6_arg1, f6_arg0._chatID ) then
			local f6_local0 = ChatChannel[0xACB3E17C4B634CC]( f6_arg0._playerID )
		else
			local f6_local0 = false
		end
	end
	f6_arg0:AddContextualMenuAction( {
		id = "whisperContextualButton",
		actionName = Engine[0xED84C33EC5F01EA]( 0x2BE8E4B5D46A8D0 ),
		conditionFunction = function ()
			local f14_local0 = f6_arg0
			if f14_local0 then
				f14_local0 = not Friends[0xA1964D04E992249]( f6_arg0, Friends[0x7E6685E08C0BB92]( f6_arg0._playerID ) )
			end
			return f14_local0
		end,
		actionFunction = function ()
			local f13_local0 = tostring( ChatChannel[0xC2152F6200BCBD5]( f6_arg0, f6_arg0._playerID ) )
			if TEXTCHAT.IsValidChatID( f13_local0 ) then
				CHANNELS.OpenChannelPanel( f6_arg0, nil, f13_local0, {
					isWhisper = true,
					openedWithShortcut = true,
					openGlobalPanel = true
				} )
			end
		end
	} )
	f6_arg0:AddContextualMenuAction( {
		id = "blockPlayerContextualButton",
		actionName = Engine[0xED84C33EC5F01EA]( 0x3674D0BD9564AA4 ),
		conditionFunction = function ()
			if not f6_arg0._channelID or f6_arg0._isMyPlayer then
				return false
			else
				local f12_local0
				if not Engine[0x73231DEDA97B69A]( f6_arg0._playerID ) then
					f12_local0 = CHANNELS.IsValidPartyID( f6_arg0._channelID )
					if f12_local0 then
						f12_local0 = Social[0x5408E960201AAC1]( f6_arg0._playerID, f6_arg0._channelID )
						if f12_local0 then
							f12_local0 = Social[0xB827625018E2ECD]( f6_arg0._channelID )
						end
					end
				else
					f12_local0 = false
				end
			end
			return f12_local0
		end,
		actionFunction = function ()
			PARTY.OpenKickMemberPopup( f6_arg0, f6_arg0._playerID, f6_arg0._channelID )
		end
	} )
	f6_arg0:AddContextualMenuAction( {
		id = "reportPlayerContextualButton",
		actionName = Engine[0xED84C33EC5F01EA]( 0x83581AB5B0DB4DC ),
		conditionFunction = function ()
			local f10_local0
			if not f6_arg0._messageData.isMyPlayer then
				f10_local0 = not Engine[0x73231DEDA97B69A]( f6_arg0._playerID )
			else
				f10_local0 = false
			end
			return f10_local0
		end,
		actionFunction = function ()
			SOCIAL.OpenReportPlayerPopup( f6_arg0, {
				{
					xuid = f6_arg0.xuid,
					platformId = f6_arg0.platformId,
					fullName = f6_arg0.crossplayNameWithHash
				}
			} )
		end
	} )
	f6_arg0:AddContextualMenuAction( {
		id = "blockPlayerContextualButton",
		actionName = Engine[0xED84C33EC5F01EA]( 0x8E754FCE3CCB54 ),
		conditionFunction = function ()
			local f8_local0
			if not f6_arg0._messageData.isMyPlayer then
				f8_local0 = CONDITIONS.IsBattleNetSocial()
				if f8_local0 then
					f8_local0 = not Friends[0xA1964D04E992249]( f6_arg0, Friends[0x7E6685E08C0BB92]( f6_arg0._playerID ) )
				end
			else
				f8_local0 = false
			end
			return f8_local0
		end,
		actionFunction = function ()
			CHANNELS.BlockPlayerAction( f6_arg0, f6_arg0._playerID, f6_arg0 )
		end
	} )
end

local f0_local2 = function ( f5_arg0, f5_arg1, f5_arg2 )
	assert( f5_arg1 )
	f5_arg0._timestampString = TEXTCHAT.GetFormattedTimestamp( f5_arg1.timestamp )
	f5_arg0._titleFormat = f5_arg1.titleFormat
	f5_arg0._playerID = f5_arg1.playerID
	f5_arg0._isMyPlayer = f5_arg1.isMyPlayer
	if f5_arg1.titleColor then
		f5_arg0.PlayerName:SetRGBFromTable( f5_arg1.titleColor )
	else
		f5_arg0.PlayerName:SetRGBFromTable( SWATCHES[0xEAF2060ABE5269B][0x25ECEAC112DE079] )
	end
	if f5_arg1.textFormat then
		f5_arg1.message = Engine[0xED84C33EC5F01EA]( f5_arg1.textFormat, Engine[0x7D3158A9539A355]( f5_arg1.message ) )
	end
	f5_arg0.Message:setText( f5_arg1.message )
	if f5_arg1.textColor then
		f5_arg0.Message:SetRGBFromTable( f5_arg1.textColor )
	else
		f5_arg0.Message:SetRGBFromTable( SWATCHES[0xEAF2060ABE5269B][0x25ECBAC112DDB60] )
	end
	local f5_local0 = f0_local0 * TEXTCHAT.GetTextChatScaling()
	f5_arg0.PlayerName:SetFontSize( f5_local0 )
	f5_arg0.PlayerName:SetMinFontSize( f5_local0 )
	f5_arg0.Message:SetFontSize( f5_local0 )
	f5_arg0.Message:SetMinFontSize( f5_local0 )
	f5_arg0._messageData = f5_arg1
end

local f0_local3 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.AddContextualMenuBase = f0_local0
	f2_arg0.SetMessageDataBase = f0_local0
	f2_arg0._controllerIndex = f2_arg1
	if CONDITIONS.IsMenuInStack( CHANNELS.CHANNEL_MENU_NAME ) then
		f2_arg0._channelScopedData = CHANNELS.GetChannelScopedData()
		f2_arg0._chatID = f2_arg0._channelScopedData.selectedChannelChatID
		f2_arg0._channelID = f2_arg0._channelScopedData.selectedChannelID
		f2_arg0._chatType = TEXTCHAT.GetChatType( f2_arg1, f2_arg0._chatID )
	end
	f2_arg0:addEventHandler( "button_over", function ( f4_arg0, f4_arg1 )
		if LUI.IsLastInputKeyboardMouse( f4_arg1.controller ) then
			ACTIONS.AnimateSequence( f4_arg0, "FocusedKBM" )
		else
			ACTIONS.AnimateSequence( f4_arg0, "FocusedGamepad" )
		end
	end )
	f2_arg0:addEventHandler( "button_up", function ( f3_arg0, f3_arg1 )
		ACTIONS.AnimateSequence( f3_arg0, "DefaultSequence" )
	end )
end

function BaseTextChatEntry( menu, controller )
	local self = LUI.UIButton.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 620 * _1080p, 0, 96 * _1080p )
	self.id = "BaseTextChatEntry"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f0_local0( self, LUI.ValidateControllerIndex( self, f1_local1 ), controller )
	return self
end

MenuBuilder.registerType( "BaseTextChatEntry", BaseTextChatEntry )
LockTable( _M )
