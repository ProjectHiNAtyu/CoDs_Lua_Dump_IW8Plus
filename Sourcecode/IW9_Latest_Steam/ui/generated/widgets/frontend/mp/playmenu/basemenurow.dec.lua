-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:49
module( ..., package.seeall )
local f0_local0 = 20 * _1080p
local f0_local1 = 1744 * _1080p
local f0_local2 = 0.8
local f0_local3 = 200
local f0_local4 = 1
local f0_local5 = 200
local f0_local6 = "transition_update_keyart_timer"
local f0_local7 = 1000
local f0_local8 = function ( f25_arg0, f25_arg1 )
	for f25_local3, f25_local4 in ipairs( f25_arg0._buttons ) do
		if not f25_local4.ignoreForceEnableDisable then
			f25_local4:SetButtonDisabled( f25_arg1 )
		end
		if f25_local4._forceDisabled then
			f25_local4:SetButtonDisabled( true )
		end
	end
end

local f0_local9 = function ( f24_arg0 )
	return f24_arg0._playMenuSideButtonStep
end

local f0_local10 = function ( f23_arg0 )
	return #f23_arg0._buttons - f23_arg0._playMenuSideButtonStep - 1
end

local f0_local11 = function ( f22_arg0 )
	local f22_local0 = f22_arg0._activeButtonRange.first
	local f22_local1
	if f0_local0 >= f22_local0 or f22_local0 > f0_local0( f22_arg0 ) then
		f22_local1 = false
	else
		f22_local1 = true
	end
	return f22_local1
end

local f0_local12 = function ( f21_arg0 )
	local f21_local0 = f21_arg0._activeButtonRange.last
	local f21_local1
	if f0_local0( f21_arg0 ) > f21_local0 or f21_local0 >= #f21_arg0._buttons then
		f21_local1 = false
	else
		f21_local1 = true
	end
	return f21_local1
end

local f0_local13 = function ( f20_arg0, f20_arg1 )
	local f20_local0 = f20_arg0.index
	local f20_local1
	if f20_arg1._activeButtonRange.first > f20_local0 or f20_local0 > f20_arg1._activeButtonRange.last then
		f20_local1 = false
	else
		f20_local1 = true
	end
	return f20_local1
end

local f0_local14 = function ( f19_arg0, f19_arg1 )
	if f19_arg0._activeButtonRange.last + 1 <= #f19_arg0._buttons then
		local f19_local0 = f19_arg0._buttons[f19_arg0._activeButtonRange.last + 1]
		if not f0_local0( f19_local0, f19_arg0 ) then
			f19_local0:SetMouseFocusBlocker( f19_arg1 )
		end
	end
	if f0_local0 <= f19_arg0._activeButtonRange.first - 1 then
		local f19_local0 = f19_arg0._buttons[f19_arg0._activeButtonRange.first - 1]
		if not f0_local0( f19_local0, f19_arg0 ) then
			f19_local0:SetMouseFocusBlocker( f19_arg1 )
		end
	end
end

local f0_local15 = function ( f18_arg0, f18_arg1, f18_arg2, f18_arg3, f18_arg4, f18_arg5 )
	if f18_arg1 == nil then
		return 
	end
	f18_arg0._currentButtonIndex = f18_arg2
	f18_arg0._currentFocusedIndex = f18_arg0._currentButtonIndex
	if f18_arg5 then
		f0_local0( f18_arg0, false )
	end
	local f18_local0
	if f18_arg0._prevButtonIndex < f18_arg0._currentButtonIndex then
		f18_local0 = 1
	else
		f18_local0 = -1
	end
	local f18_local1 = LAYOUT.GetElementWidth( f18_arg1 )
	if f18_arg0._activeButtonRange.last < f18_arg2 and 0 < f18_local0 then
		local f18_local2 = f18_arg0._currentButtonIndex
		local f18_local3 = f18_local2 - f18_arg0._buttonActiveRangeMax - 1
		f18_arg0._activeButtonRange.last = f18_local2
		f18_arg0._activeButtonRange.first = f18_local3
		if f18_arg5 then
			local f18_local4 = f18_arg0.ButtonList
			local f18_local5 = f18_local4
			f18_local4 = f18_local4.SetLeft
			local f18_local6 = (f18_local3 - 1) * -(f18_local1 + PLAY_MENU.BUTTON_SPACING_HORIZONTAL) + f18_arg0._defaultAnchPos.left
			local f18_local7
			if f18_arg3 then
				f18_local7 = 0
			else
				f18_local7 = f0_local0
			end
			f18_local4( f18_local5, f18_local6, f18_local7, LUI.EASING.outQuadratic )
		end
		if f18_arg4 then
			f18_arg0._buttons[f18_local3]:GainFocus( {
				focusType = FocusType.MouseOver,
				controller = f18_arg0._controllerIndex
			} )
		end
	elseif f18_arg2 < f18_arg0._activeButtonRange.first and f18_local0 < 0 then
		local f18_local2 = f18_arg0._currentButtonIndex
		local f18_local3 = f18_local2 + f18_arg0._buttonActiveRangeMax - 1
		f18_arg0._activeButtonRange.first = f18_local2
		f18_arg0._activeButtonRange.last = f18_local3
		if f18_arg5 then
			local f18_local4 = f18_arg0.ButtonList
			local f18_local5 = f18_local4
			f18_local4 = f18_local4.SetLeft
			local f18_local6 = (f18_arg2 - 1) * -(f18_local1 + PLAY_MENU.BUTTON_SPACING_HORIZONTAL) + f18_arg0._defaultAnchPos.left
			local f18_local7
			if f18_arg3 then
				f18_local7 = 0
			else
				f18_local7 = f0_local0
			end
			f18_local4( f18_local5, f18_local6, f18_local7, LUI.EASING.outQuadratic )
		end
		if f18_arg4 then
			f18_arg0._buttons[f18_local2]:GainFocus( {
				focusType = FocusType.MouseOver,
				controller = f18_arg0._controllerIndex
			} )
		end
	end
	if f18_arg5 then
		f0_local0( f18_arg0, true )
	end
	f18_arg0:UpdateSideButton()
	if f18_arg0.PanBGLayer then
		f18_arg0:PanBGLayer( f18_arg2 )
	end
end

local f0_local16 = function ( f17_arg0, f17_arg1, f17_arg2, f17_arg3, f17_arg4, f17_arg5 )
	if not f17_arg0._buttonArrowClicked then
		f17_arg0:MoveButton( f17_arg1, f17_arg2, f17_arg3, false, f17_arg5 )
	else
		f17_arg0._buttonArrowClicked = false
	end
	if f17_arg4 and f17_arg0._keyartWidgets then
		f17_arg0:SetupKeyart()
	end
	f17_arg0._prevButtonIndex = f17_arg0._currentButtonIndex
	f17_arg0._scopedData.currentButtonIndex = f17_arg0._currentButtonIndex
end

local f0_local17 = function ( f16_arg0, f16_arg1, f16_arg2, f16_arg3, f16_arg4 )
	if not f16_arg4 then
		return 
	end
	local f16_local0 = PLAY_MENU.GetBundleByRef( f16_arg1.playlistRef )
	local f16_local1 = f16_arg1.playlistName
	if not f16_local1 then
		f16_local1 = PLAY_MENU.GetName( f16_local0 )
	end
	local f16_local2 = 424
	local f16_local3 = 20
	local f16_local4 = 365
	local f16_local5 = -(f16_arg2 - f16_arg0._activeButtonRange.first + 1)
	local f16_local6 = f16_local5 * f16_local2 + f16_local5 * f16_local3 + f16_local4
	local f16_local7 = 145
	local f16_local8 = f16_arg0.TooltipHolderWidget
	local f16_local9 = LUI.FETooltipBannerManager.CreateTooltip
	local f16_local10 = {
		referenceElement = f16_arg0.TooltipReferenceWidget
	}
	local f16_local11 = f16_arg4.DisabledTextPopup
	if not f16_local11 then
		f16_local11 = f16_arg4.DisabledTextPopupFunc( f16_local1, f16_arg1, f16_arg3 )
	end
	f16_local10.text = f16_local11
	f16_local10.type = LUI.FETooltipBannerManager.TOOLTIP_TYPE.WARNING
	f16_local10.controllerIndex = f16_arg3
	f16_local10.parentScreen = f16_arg0.TooltipHolderWidget
	f16_local10.offset = {
		vertical = f16_local7,
		horizontal = f16_local6
	}
	f16_local10.width = f16_local2
	f16_local8._tooltip = f16_local9( f16_local10 )
end

local f0_local18 = function ( f14_arg0, f14_arg1, f14_arg2, f14_arg3, f14_arg4 )
	if f14_arg0.TooltipHolderWidget._tooltip then
		LUI.FETooltipBannerManager.DestroyTooltip( f14_arg0.TooltipHolderWidget._tooltip, f14_arg0.TooltipHolderWidget )
		f14_arg0.TooltipHolderWidget._tooltip = nil
	end
	if not f14_arg1 or f14_arg1.hideTooltip or not f14_arg4 and not f14_arg1.playlistRef then
		
	end
	local f14_local0 = nil
	if f14_arg4 then
		f14_local0 = Lobby.GameModeAndLobbyStartButtonGetDisabledPopup( f14_arg3, f14_arg4, f14_arg1 )
		f14_arg0._tooltipSubscription = f14_arg0:SubscribeToModel( DataSources.alwaysLoaded.activeParty.memberCount:GetModel(), function ( f15_arg0 )
			local f15_local0 = Lobby.GameModeAndLobbyStartButtonGetDisabledPopup( f14_arg0, f14_arg0, f14_arg0 )
			if f14_arg0.TooltipHolderWidget._tooltip then
				LUI.FETooltipBannerManager.DestroyTooltip( f14_arg0.TooltipHolderWidget._tooltip, f14_arg0.TooltipHolderWidget )
				f14_arg0.TooltipHolderWidget._tooltip = nil
			end
			f14_arg0( f14_arg0, f14_arg0, f14_arg0, f14_arg0, f15_local0 )
		end, true )
	end
	f0_local0( f14_arg0, f14_arg1, f14_arg2, f14_arg3, f14_local0 )
end

local f0_local19 = function ( f13_arg0 )
	f13_arg0.PlayMenuSideButtonLeft:SetAlpha( 0 )
	f13_arg0.PlayMenuSideButtonRight:SetAlpha( 0 )
	f13_arg0.PlayMenuSideButtonLeft:SetHandleMouse( false )
	f13_arg0.PlayMenuSideButtonRight:SetHandleMouse( false )
end

local f0_local20 = function ( f12_arg0, f12_arg1, f12_arg2, f12_arg3 )
	assert( f12_arg0.ButtonList )
	assert( f12_arg0.PlayMenuSideButtonLeft )
	assert( f12_arg0.PlayMenuSideButtonRight )
	assert( f12_arg0.TooltipReferenceWidget )
end

local f0_local21 = function ( f11_arg0, f11_arg1, f11_arg2 )
	local f11_local0 = f11_arg1.playlistRef
	local f11_local1 = PLAY_MENU.GetBundleByRef( f11_local0 )
	local f11_local2 = f11_arg0._keyartWidgets
	local f11_local3 = {
		markLocalized = true
	}
	local f11_local4 = f11_arg1.playlistName
	if not f11_local4 then
		f11_local4 = PLAY_MENU.GetName( f11_local1 )
	end
	f11_local3.playlistName = f11_local4
	f11_local3.playlistDesc = f11_arg1.playlistDesc
	f11_local3.playlistTags = f11_arg1.playlistTags
	f11_local3.playlistTitle = f11_arg1.playlistTitle
	f11_local3.playlistCategory = f11_arg1.playlistCategory
	f11_local3.isPlaylistDetail = f11_arg1.isPlaylistDetail
	f11_local3.useHitmarkerFont = PLAY_MENU.UseHitmarkerFont( f11_local1 )
	f11_local3.titleColor = PLAY_MENU.GetButtonTitleColor( f11_local1 )
	f11_local3.titleAlignment = PLAY_MENU.GetButtonTitleAlignment( f11_local1 )
	f11_local3.titlePosition = PLAY_MENU.GetButtonTitlePosition( f11_local1 )
	f11_local3.titleAlpha = PLAY_MENU.GetButtonTitleAlpha( f11_local1 )
	f11_local3.alternatePlaylistName = f11_arg1.alternatePlaylistName
	ACTIONS.AnimateSequence( f11_local2.title, "SetDefaultTitleVisibility" )
	f11_local2.title:SetTitleText( f11_local3 )
	f11_local2.title:SetupFriendsPlaying( {
		playlistID = f11_arg1.playlistID,
		playlistCategory = f11_arg1.playlistCategory,
		playlistCategoryClasses = f11_arg1.playlistCategoryClasses
	} )
	f11_local2.title:SetupMapsIncluded( f11_arg1.playlistID, f11_arg1.playlistCategory )
	f11_local2.title:SetupFreeTrialInfoBlock( f11_arg1.playlistID, f11_arg1.playlistCategory )
	if f11_arg1.logo or f11_arg1.hideTitle then
		ACTIONS.AnimateSequence( f11_local2.title, "HideTitle" )
		ACTIONS.AnimateSequence( f11_local2.title, "IndentFriendsPlayingForHiddenTitle" )
	end
	if f11_arg1 then
		if f11_arg2 then
			f11_local2.keyart:UpdateKeyArtByTable( f11_arg1 )
		else
			local f11_local5 = f11_arg1.playlistID
			if f11_local5 and Playlist[0x51BD000E00A13D3]( f11_local5 ) then
				local f11_local6 = f11_arg0._controllerIndex
				local f11_local7 = PlaylistUtils.GetPlaylistDataSourceFromID( f11_local6, Playlist[0xA0DB94230B1AFC2]( f11_local5 ) )
				if f11_local7 then
					f11_local0 = f11_local7.playMenuRef:GetValue( f11_local6 )
				end
			end
			f11_local2.keyart:UpdateKeyArtByBundle( f11_local0, f11_arg0._rowIndex == 1 )
		end
	end
end

local f0_local22 = function ( f9_arg0 )
	local f9_local0 = f9_arg0._currentButtonIndex
	local f9_local1 = f9_arg0._prevButtonIndex
	local f9_local2 = nil
	if f9_local0 < f9_local1 then
		f9_local2 = "FromLeft"
	elseif f9_local1 < f9_local0 then
		f9_local2 = "FromRight"
	end
	if f9_local2 then
		
	else
		
	end
	f9_arg0:registerEventHandler( "restore_playmenu_focus", function ( element, event )
		element:UpdateKeyart( element._rowData[element._currentButtonIndex], element._isPredefinedRow )
	end )
	if f9_arg0._currentRowIndex ~= f9_arg0._rowIndex then
		return 
	end
	local f9_local3 = f9_arg0._rowData[f9_arg0._currentButtonIndex]
	f9_arg0:UpdateKeyart( f9_local3, f9_arg0._isPredefinedRow )
	if f9_arg0._keyartRefreshTimer then
		f9_arg0._keyartRefreshTimer:closeTree()
		f9_arg0._keyartRefreshTimer = nil
	end
	local f9_local4 = f9_local3.playlistID
	if f9_local4 and Playlist[0x51BD000E00A13D3]( f9_local4 ) then
		local f9_local5 = {
			name = f0_local0,
			playlistID = f9_local4,
			currentRotationID = Playlist[0xA0DB94230B1AFC2]( f9_local4 )
		}
		local self = LUI.UITimer.new( {
			interval = f0_local0,
			event = f9_local5
		} )
		f9_local5.timer = self
		f9_arg0._keyartRefreshTimer = self
		f9_arg0:addElement( self )
	end
	f9_arg0._keyartWidgets.keyart:EnableParallax( true )
end

local f0_local23 = function ( f7_arg0, f7_arg1, f7_arg2, f7_arg3 )
	local f7_local0 = function ()
		local f8_local0 = Engine[0x8B495DC361731F7]( f7_arg0 )
		local f8_local1
		if f8_local0 then
			f8_local1 = f8_local0
		else
			f8_local1 = f7_arg0
		end
		return f8_local1
	end
	
	if f7_arg1 and Install.IsDiscCheckRequired( f7_arg1, f7_local0 ) then
		Install.CheckDiscStatusWrap( f7_arg0, f7_arg1, f7_local0, f7_arg3 )
	else
		f7_arg3()
	end
end

local f0_local24 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0._buttonActiveRangeMax = f3_arg2.activeRangeMaxOverride or 4
	f3_arg0._playMenuSideButtonStep = f3_arg0._buttonActiveRangeMax
	f3_arg0._defaultAnchPos = f3_arg0.ButtonList:GetAnchorsAndPosition()
	f3_arg0._controllerIndex = f3_arg1
	f3_arg0._rowIndex = f3_arg2.rowIndex
	f3_arg0._currentRowIndex = 1
	f3_arg0._isCurrentRow = f3_arg0._rowIndex == 1
	f3_arg0._buttons = {}
	f3_arg0._prevButtonIndex = 1
	f3_arg0._currentButtonIndex = 1
	f3_arg0._activeButtonRange = {
		first = 1,
		last = f3_arg0._buttonActiveRangeMax
	}
	f3_arg0._vertTransitionDuration = f3_arg2.vertTransitionDuration
	f3_arg0._vertTransitionEasing = f3_arg2.vertTransitionEasing
	f3_arg0._scopedData = LUI.FlowManager.GetScopedData( f3_arg0 )
	f3_arg0._buttonListVerticalPosition = {}
	f3_arg0.SetupRow = f0_local0
	f3_arg0.SetButtonPosition = f0_local0
	f3_arg0.SetButtonsDisabled = f0_local0
	f3_arg0.GetMinimumIndexSideButton = f0_local0
	f3_arg0.GetMaximumIndexSideButton = f0_local0
	f3_arg0.CanInteractWithMinimumIndexArrow = f0_local0
	f3_arg0.CanInteractWithMaximumIndexArrow = f0_local0
	f3_arg0.MoveButton = f0_local0
	f3_arg0.SetupButtonTooltip = f0_local0
	f3_arg0.HideSideButton = f0_local0
	f3_arg0.SetupKeyart = f0_local0
	f3_arg0.UpdateKeyart = f0_local0
	f3_arg0.ButtonActionDiscCheckWrapper = f0_local0
	local f3_local0 = DataSources.frontEnd.lobby.inSplitScreen
	local f3_local1 = LUI.DataSourceInGlobalModel.new( "frontEnd.lobby.areWeGameHost" )
	local f3_local2 = DataSources.alwaysLoaded.activeParty.memberCount
	local f3_local3 = function ()
		local f6_local0 = Lobby[0x63537242F1D48FF]()
		if f6_local0 then
			f6_local0 = not Lobby[0x6957722EF74F5D2]()
		end
		f3_arg0( f3_arg0, f6_local0 )
	end
	
	f3_arg0:SubscribeToModel( f3_local1:GetModel( f3_arg1 ), f3_local3, true )
	f3_arg0:SubscribeToModel( f3_local2:GetModel( f3_arg1 ), f3_local3, true )
	f3_arg0:SubscribeToModel( f3_local0:GetModel( f3_arg1 ), f3_local3 )
	f3_arg0:registerEventHandler( "update_publisher_variables", f3_local3 )
	f3_arg0:registerEventHandler( f0_local0, function ( element, event )
		local f4_local0 = Playlist[0xA0DB94230B1AFC2]( event.playlistID )
		if f4_local0 == event.currentRotationID then
			
		else
			
		end
		event.currentRotationID = f4_local0
		ACTIONS.AnimateSequence( element._keyartWidgets.keyart, "FadeTransition" )
		local f4_local1 = element:Wait( 400 )
		f4_local1.onComplete = function ( f5_arg0 )
			if f5_arg0._currentRowIndex ~= f5_arg0._rowIndex then
				return 
			else
				f5_arg0:UpdateKeyart( f5_arg0._rowData[f5_arg0._currentButtonIndex], f5_arg0._isPredefinedRow )
			end
		end
		
	end )
end

local f0_local25 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PostLoadShared = f0_local0
end

function BaseMenuRow( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "BaseMenuRow"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local TooltipHolderWidget = nil
	
	TooltipHolderWidget = LUI.UIElement.new()
	TooltipHolderWidget.id = "TooltipHolderWidget"
	TooltipHolderWidget:setPriority( 1 )
	self:addElement( TooltipHolderWidget )
	self.TooltipHolderWidget = TooltipHolderWidget
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "BaseMenuRow", BaseMenuRow )
LockTable( _M )
