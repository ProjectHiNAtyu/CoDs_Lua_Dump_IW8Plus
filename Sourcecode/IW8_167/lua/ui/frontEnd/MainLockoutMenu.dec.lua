-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
module( ..., package.seeall )
LUI.FlowManager.RegisterFenceGroup( "MainLockoutMenu", {
	nil,
	"fenceSpinner",
	"shaderUpload"
} )
local f0_local0 = function ( f24_arg0, f24_arg1 )
	Engine.CDGCBCBAJ( "MainLockout ButtonHandler", f24_arg1 )
	Engine.DAGFFDGFII( "resetViewport" )
	Engine.BJDBIAGIDA( SOUND_SETS.mainMenu.start )
	if Dvar.IBEGCHEFE( "sp_lockout_start_override" ) then
		if not Engine.CAADCDEEIA() then
			Engine.CDIHEFEJB()
		end
		LUI.FlowManager.RequestAddMenu( "CampaignMenu", true, f24_arg1, false, nil, false )
	else
		DebugPrint( "[DEVICE] Moving to Mainmenu for controller " .. f24_arg1 )
		if Dvar.IBEGCHEFE( "LSTQOKLTRN" ) or CONDITIONS.IsLaunchChunk() then
			LUI.FlowManager.RequestAddMenu( "MainMenuOffline", false, f24_arg1 )
		else
			LUI.FlowManager.RequestAddMenu( "MainMenu", false, f24_arg1 )
		end
	end
end

local f0_local1 = function ( f23_arg0, f23_arg1 )
	Engine.CDGCBCBAJ( "Going Offline", f23_arg1 )
	LUI.FlowManager.RequestLeaveMenu( f23_arg0:GetCurrentMenu(), true )
	LUI.FlowManager.RequestAddMenu( "MainMenuOffline", false, f23_arg1 )
end

local f0_local2 = function ( f19_arg0, f19_arg1 )
	if CONDITIONS.IsShowingAccountPicker() or f19_arg0.xboxLoginTimer ~= nil then
		
	end
	if DCache.DFCGEDHBEC() then
		LUI.FlowManager.RequestPopupMenu( nil, "PopupYesNo", false, nil, false, {
			title = Engine.CBBHFCGDIC( "MENU/NOTICE" ),
			message = Engine.CBBHFCGDIC( "LUA_MENU/DCACHE_CLEAR_REQUEST" ),
			yesAction = function ()
				DCache.CAJICHGHDG( 1 )
				Engine.BHIJFFCAEB( Engine.CBBHFCGDIC( "@LUA_MENU/DCACHE_RESTART" ) )
			end,
			noAction = function ()
				DCache.BJEGJFBIBI()
				Engine.BHIJFFCAEB( Engine.CBBHFCGDIC( "@LUA_MENU/DCACHE_RESTART" ) )
			end
		}, nil, false, true )
	elseif CONDITIONS.IsXbox() and not CONDITIONS.IsUserSignedIn( f19_arg1.controller ) then
		Engine.BGEFGFACEH( f19_arg1.controller, false )
		DebugPrint( "[DEVICE] Checking last picked account." )
		f19_arg0.xboxLoginTimer = LUI.UITimer.new( {
			interval = 1000,
			event = "xbox_login_tick"
		} )
		f19_arg0:addElement( f19_arg0.xboxLoginTimer )
		f19_arg0:registerEventHandler( "xbox_login_tick", function ( element, event )
			if CONDITIONS.IsShowingAccountPicker() then
				return 
			end
			element.xboxLoginTimer:closeTree()
			element.xboxLoginTimer = nil
			local f20_local0 = Engine.EDDJCDFFC()
			if f20_local0 ~= nil and f20_local0 ~= -1 then
				f19_arg0( f19_arg0, f20_local0 )
			end
		end )
	else
		f0_local0( f19_arg0, f19_arg1.controller )
	end
end

local f0_local3 = function ( f17_arg0, f17_arg1 )
	if CONDITIONS.IsShowingAccountPicker() or f17_arg0.xboxOfflineLoginTimer ~= nil then
		
	end
	if CONDITIONS.IsXbox() and not CONDITIONS.IsUserSignedIn( f17_arg1.controller ) then
		Engine.BGEFGFACEH( f17_arg1.controller, false )
		DebugPrint( "[DEVICE] Checking last picked account (offline)." )
		f17_arg0.xboxOfflineLoginTimer = LUI.UITimer.new( {
			interval = 1000,
			event = "xbox_login_tick_offline"
		} )
		f17_arg0:addElement( f17_arg0.xboxOfflineLoginTimer )
		f17_arg0:registerEventHandler( "xbox_login_tick_offline", function ( element, event )
			if CONDITIONS.IsShowingAccountPicker() then
				return 
			end
			element.xboxOfflineLoginTimer:closeTree()
			element.xboxOfflineLoginTimer = nil
			local f18_local0 = Engine.EDDJCDFFC()
			if f18_local0 ~= nil and f18_local0 ~= -1 then
				f17_arg0( f17_arg0, f18_local0 )
			end
		end )
	else
		f0_local0( f17_arg0, f17_arg1.controller )
	end
end

function PostLoadFunc( f8_arg0, f8_arg1, f8_arg2 )
	local f8_local0 = LUI.ToastManager.GetInstance()
	f8_local0:CloseToastOfType( LUI.ToastManager.NotificationType.Tournament )
	f8_arg0.chatOptOut = true
	f8_arg0.bindButton = LUI.UIBindButton.new()
	f8_arg0.bindButton.id = "BindButton"
	f8_arg0:addElement( f8_arg0.bindButton )
	f8_arg0.bindButton:addEventHandler( "gamepad_button", function ( f16_arg0, f16_arg1 )
		if not f16_arg1.down then
			return false
		elseif LUI.IsLastInputGamepad( f16_arg1.controller ) then
			if f16_arg1.button ~= "primary" and f16_arg1.button ~= "start" then
				return false
			end
		elseif f16_arg1.qualifier == "mousewheel" then
			return false
		end
		return f8_arg0( f16_arg0, f16_arg1 )
	end )
	f8_arg0.AcceptsFocusType = function ( f15_arg0, f15_arg1 )
		return f15_arg1 == FocusType.MouseOver
	end
	
	f8_arg0:SetHandleMouse( true )
	f8_arg0:addEventHandler( "leftmouseup", f0_local0 )
	f8_arg0:registerEventHandler( "not_below_blocking_fence", function ( element, event )
		if element._openedForInteraction == nil then
			Engine.BIGIHAGAAA()
			Engine.BBEEIGHJBA( CoD.Music.MainSPMusic )
			Engine.CEEHHDEHJB( "MainLockout menu opened" )
			Dvar.DHEGHJJJHI( "splitscreen", false )
			element._openedForInteraction = true
		end
	end )
	f8_arg0:addEventHandler( "menu_create", function ( f13_arg0, f13_arg1 )
		if Engine.BAHIIBFDDG() then
			f8_arg0:AddButtonHelperText( {
				clickable = true,
				button_ref = "button_alt1",
				side = "left",
				helper_text = Engine.CBBHFCGDIC( "MENU/GO_OFFLINE" )
			} )
		end
	end )
	if Engine.BAHIIBFDDG() then
		Engine.CFFFHJHGAA( f8_arg1, LUI.INPUT_TYPE.gamepad )
		f8_arg0.bindButton:addEventHandler( "button_alt1", f0_local0 )
	end
	if not CONDITIONS.IsPC() then
		f8_arg0:registerEventHandler( "update_input_type", function ( f12_arg0, f12_arg1 )
			local f12_local0 = CONDITIONS.IsWZWipDvarEnabled() and f12_arg0.WZInfoBacking or f12_arg0.ActionTextBG
			local f12_local1 = "@LUA_MENU/PRESS_START_BUTTON"
			if LUI.IsLastInputKeyboardMouse( f12_arg1.controllerIndex ) then
				f12_local1 = "@LUA_MENU/PRESS_ANY_KEY"
			end
			f12_arg0.ActionText:setText( Engine.CBBHFCGDIC( f12_local1 ), 0 )
			LAYOUT.SetTextBoxSize( f12_arg0.ActionText, f12_local0, Engine.CBBHFCGDIC( f12_local1 ), 55, nil, LUI.Alignment.Center, 0 )
		end, {
			controllerIndex = f8_arg1
		} )
		local f8_local1 = f8_arg0.ActionText:Wait( 2400 )
		f8_local1.onComplete = function ()
			WZWIP.AnimateThemeElement( f8_arg0, "ActionLoop", {
				conditionOverride = CONDITIONS.IsWZWipFrontend()
			} )
		end
		
	end
	if CONDITIONS.IsPC() then
		local f8_local2 = function ()
			f8_arg0.Cinematic:SetScale( CoD.GetAspectRatioScaleAdjust( 0.25 ) )
		end
		
		f8_local2()
		f8_arg0:addEventHandler( "onVideoChange", f8_local2 )
		LAYOUT.AddAspectRatioFadeFrame( f8_arg0, f8_arg1 )
	end
	Engine.DFCGFCGBFD( "main_menu", VideoPlaybackFlags.LOOP )
	f8_arg0:addEventHandler( "menu_close", function ( f9_arg0, f9_arg1 )
		Engine.EBCGADABJ()
	end )
	Engine.EAIBAGFDCD( CoD.PresenceContext.NOT_IN_GAME )
	Engine.BHHAAHFCFC()
	Engine.HDHJDCJGH()
	Engine.DDEJECEIBB()
	local f8_local2 = "@LUA_MENU/PRESS_START_BUTTON"
	if LUI.IsLastInputKeyboardMouse( f8_arg1 ) then
		f8_local2 = "@LUA_MENU/PRESS_ANY_KEY"
	end
	if not CONDITIONS.IsPC() then
		LAYOUT.SetTextBoxSize( f8_arg0.ActionText, CONDITIONS.IsWZWipDvarEnabled() and f8_arg0.WZInfoBacking or f8_arg0.ActionTextBG, Engine.CBBHFCGDIC( f8_local2 ), 55, nil, LUI.Alignment.Center, 0 )
	end
	LUI.TextChat.SetupMenuForNoChat( f8_arg0 )
	if CONDITIONS.IsWZWipDvarEnabled() then
		ACTIONS.AnimateSequence( f8_arg0, "WZWipSetup" )
		if not CONDITIONS.IsPC() then
			ACTIONS.AnimateSequence( f8_arg0, "WZWipIntro" )
		end
	end
end

function MainLockoutMenu( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "MainLockoutMenu"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local Cinematic = nil
	
	Cinematic = MenuBuilder.BuildRegisteredType( "Cinematic", {
		controllerIndex = f1_local1
	} )
	Cinematic.id = "Cinematic"
	self:addElement( Cinematic )
	self.Cinematic = Cinematic
	
	local f1_local4 = nil
	if CONDITIONS.IsXboxLive() then
		f1_local4 = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
			controllerIndex = f1_local1
		} )
		f1_local4.id = "HelperBar"
		f1_local4.Background:SetAlpha( 0.2, 0 )
		f1_local4:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
		self:addElement( f1_local4 )
		self.HelperBar = f1_local4
	end
	local Logo = nil
	
	Logo = MenuBuilder.BuildRegisteredType( "MainMenuLogo", {
		controllerIndex = f1_local1
	} )
	Logo.id = "Logo"
	Logo:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -512, _1080p * 512, _1080p * -286, _1080p * 226 )
	self:addElement( Logo )
	self.Logo = Logo
	
	local f1_local6 = nil
	if not CONDITIONS.IsPC() then
		f1_local6 = LUI.UIImage.new()
		f1_local6.id = "ActionTextBG"
		f1_local6:SetRGBFromTable( SWATCHES.MainMenu.ButtonTextBG, 0 )
		f1_local6:SetAlpha( 0, 0 )
		f1_local6:SetPixelGridEnabled( true )
		f1_local6:SetPixelGridContrast( 0.5, 0 )
		f1_local6:SetPixelGridBlockWidth( 2, 0 )
		f1_local6:SetPixelGridBlockHeight( 2, 0 )
		f1_local6:SetPixelGridGutterWidth( 1, 0 )
		f1_local6:SetPixelGridGutterHeight( 1, 0 )
		f1_local6:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -335, _1080p * 335, _1080p * 287, _1080p * 347 )
		self:addElement( f1_local6 )
		self.ActionTextBG = f1_local6
	end
	local f1_local7 = nil
	if CONDITIONS.IsWZWipDvarEnabled() then
		f1_local7 = MenuBuilder.BuildRegisteredType( "WZInfoBacking", {
			controllerIndex = f1_local1
		} )
		f1_local7.id = "WZInfoBacking"
		f1_local7:SetAlpha( 0, 0 )
		f1_local7:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -335, _1080p * 335, _1080p * 279, _1080p * 355 )
		self:addElement( f1_local7 )
		self.WZInfoBacking = f1_local7
	end
	local f1_local8 = nil
	if not CONDITIONS.IsPC() then
		f1_local8 = LUI.UIStyledText.new()
		f1_local8.id = "ActionText"
		f1_local8:SetRGBFromTable( SWATCHES.MainMenu.ButtonMain, 0 )
		f1_local8:setText( LocalizeString( "@LUA_MENU/PRESS_START_BUTTON" ), 0 )
		f1_local8:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
		f1_local8:SetWordWrap( false )
		f1_local8:SetAlignment( LUI.Alignment.Center )
		f1_local8:SetTintFontIcons( true )
		f1_local8:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -335, _1080p * 335, _1080p * 299, _1080p * 335 )
		self:addElement( f1_local8 )
		self.ActionText = f1_local8
	end
	local Copyright = nil
	
	Copyright = LUI.UIStyledText.new()
	Copyright.id = "Copyright"
	Copyright:SetAlpha( 0, 0 )
	Copyright:setText( Engine.CBBHFCGDIC( "LUA_MENU/LEGAL_COPYRIGHT" ), 0 )
	Copyright:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	Copyright:SetAlignment( LUI.Alignment.Center )
	Copyright:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, _1080p * -512, _1080p * 512, _1080p * -73, _1080p * -55 )
	self:addElement( Copyright )
	self.Copyright = Copyright
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	local f1_local10 = nil
	Cinematic:RegisterAnimationSequence( "Intro", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.outQuadratic
		}
	} )
	Logo:RegisterAnimationSequence( "Intro", {
		{
			value = 5.29462817E-315,
			duration = 0,
			property = TWEEN_PROPERTY.Scale
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 1000,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.outQuadratic
		},
		{
			value = 0,
			duration = 1000,
			property = TWEEN_PROPERTY.Scale,
			easing = LUI.EASING.outQuadratic
		}
	} )
	if not CONDITIONS.IsPC() then
		f1_local8:RegisterAnimationSequence( "Intro", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			},
			{
				value = 1,
				duration = 1000,
				property = TWEEN_PROPERTY.Alpha,
				easing = LUI.EASING.outQuadratic
			}
		} )
	end
	Copyright:RegisterAnimationSequence( "Intro", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 4.667261642226141E-62,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.outQuadratic
		}
	} )
	self._sequences.Intro = function ()
		menu:AnimateSequence( "Intro" )
		menu:AnimateSequence( "Intro" )
		if not CONDITIONS.IsPC() then
			menu:AnimateSequence( "Intro" )
		end
		menu:AnimateSequence( "Intro" )
	end
	
	local f1_local11 = nil
	if not CONDITIONS.IsPC() then
		f1_local8:RegisterAnimationSequence( "ActionLoop", {
			{
				value = 1,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			},
			{
				value = 4.667261642226141E-62,
				duration = 1500,
				property = TWEEN_PROPERTY.Alpha
			},
			{
				value = 1,
				duration = 1500,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	self._sequences.ActionLoop = function ()
		if not CONDITIONS.IsPC() then
			menu:AnimateLoop( "ActionLoop" )
		end
	end
	
	local f1_local12 = nil
	if not CONDITIONS.IsPC() then
		f1_local8:RegisterAnimationSequence( "WZWipActionLoop", {
			{
				value = 1,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			},
			{
				value = 4.667261642226141E-62,
				duration = 1500,
				property = TWEEN_PROPERTY.Alpha
			},
			{
				value = 1,
				duration = 1500,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	self._sequences.WZWipActionLoop = function ()
		if not CONDITIONS.IsPC() then
			menu:AnimateLoop( "WZWipActionLoop" )
		end
	end
	
	local f1_local13 = nil
	if not CONDITIONS.IsPC() then
		f1_local8:RegisterAnimationSequence( "WZWipIntro", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			},
			{
				value = 1,
				duration = 1000,
				property = TWEEN_PROPERTY.Alpha,
				easing = LUI.EASING.outQuadratic
			}
		} )
	end
	Copyright:RegisterAnimationSequence( "WZWipIntro", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 4.667261642226141E-62,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.outQuadratic
		}
	} )
	self._sequences.WZWipIntro = function ()
		if not CONDITIONS.IsPC() then
			menu:AnimateSequence( "WZWipIntro" )
		end
		menu:AnimateSequence( "WZWipIntro" )
	end
	
	local f1_local14 = nil
	Logo:RegisterAnimationSequence( "WZWipSetup", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = -2.353438979929347E-185,
			duration = 0,
			property = TWEEN_PROPERTY.Scale
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -296
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 216
		}
	} )
	if not CONDITIONS.IsPC() then
		f1_local6:RegisterAnimationSequence( "WZWipSetup", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	if CONDITIONS.IsWZWipDvarEnabled() then
		f1_local7:RegisterAnimationSequence( "WZWipSetup", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	if not CONDITIONS.IsPC() then
		f1_local8:RegisterAnimationSequence( "WZWipSetup", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.RGB,
				value = SWATCHES.CH2.WZGenericText
			}
		} )
	end
	self._sequences.WZWipSetup = function ()
		menu:AnimateSequence( "WZWipSetup" )
		if not CONDITIONS.IsPC() then
			menu:AnimateSequence( "WZWipSetup" )
		end
		if CONDITIONS.IsWZWipDvarEnabled() then
			menu:AnimateSequence( "WZWipSetup" )
		end
		if not CONDITIONS.IsPC() then
			menu:AnimateSequence( "WZWipSetup" )
		end
	end
	
	PostLoadFunc( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "MainLockoutMenu", MainLockoutMenu )
LockTable( _M )
