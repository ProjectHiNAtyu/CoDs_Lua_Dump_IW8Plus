-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:52
module( ..., package.seeall )
local f0_local0 = 6000
local f0_local1 = 12000
local f0_local2 = 2200
local f0_local3 = function ( f7_arg0, f7_arg1, f7_arg2 )
	f7_arg0.Meter:SetMask( f7_arg0.Mask.Fill )
	local f7_local0 = 30
	local f7_local1 = 0
	local f7_local2 = false
	local f7_local3 = false
	f7_arg0.Mask.Fill:SetRightAnchor( 1, 0 )
	local f7_local4 = nil
	local f7_local5 = function ()
		local f16_local0 = Engine.CIIGICAIFC( Engine.DCJHCAFIIA() )
		local f16_local1 = f7_arg0:Wait( f7_arg0 )
		f16_local1.onComplete = f7_arg0
		f7_arg0.Time:setText( f16_local0 )
	end
	
	f7_local5()
	f7_local5 = nil
	f7_local5 = function ( f14_arg0 )
		if f7_arg0 and f7_arg0 then
			Engine.BJDBIAGIDA( "watch_geiger_nuke_pulse" )
			local f14_local0 = f7_arg0:Wait( 1000 )
			f14_local0.onComplete = function ()
				f14_arg0()
			end
			
			
		else
			
		end
	end
	
	local f7_local6 = LUI.DataSourceFromOmnvar.new( "ui_smart_watch_check" )
	local f7_local7 = function ( f12_arg0 )
		f7_arg0 = true
		local f12_local0 = f7_arg0:Wait( f7_arg0 )
		f12_local0.onComplete = function ()
			f12_arg0 = false
		end
		
		f7_arg0()
	end
	
	local f7_local8 = function ( f11_arg0 )
		f7_arg0.KillCount:setText( f11_arg0 .. " / 30", 0 )
		if f7_arg0 and f11_arg0 ~= 0 then
			Engine.BJDBIAGIDA( "watch_geiger_tick" )
		end
		f7_arg0.Mask.Fill:SetRightAnchor( 1 - f11_arg0 / f7_arg0, 500 )
		if 30 <= f11_arg0 then
			ACTIONS.AnimateSequence( f7_arg0, "GoalReached" )
			f7_arg0.Mask.Fill:setImage( RegisterMaterial( "stencil_mask" ), 0 )
			f7_arg0 = true
			if f7_arg0 then
				Engine.BJDBIAGIDA( "watch_geiger_nuke_activate" )
			end
		else
			ACTIONS.AnimateSequence( f7_arg0, "Normal" )
			f7_arg0.Mask.Fill:setImage( RegisterMaterial( "hud_weapon_info_mask" ), 0 )
			f7_arg0 = false
		end
	end
	
	if Engine.DDJFBBJAIG() then
		ACTIONS.AnimateSequence( f7_arg0, "Normal" )
		local f7_local9 = nil
		local f7_local10 = function ()
			local f10_local0 = Engine.CIIGICAIFC( Engine.DCJHCAFIIA() )
			local f10_local1 = f7_arg0:Wait( f7_arg0 )
			f10_local1.onComplete = f7_arg0
			f7_arg0( math.random( 0, 30 ) )
		end
		
		f7_local10()
	end
	if Engine.EAIICIFIFA() then
		ACTIONS.AnimateSequence( f7_arg0, "ScreenOffline" )
	else
		local f7_local9 = LUI.DataSourceFromOmnvar.new( "ui_life_kill_count" )
		local f7_local10 = DataSources.inGame.MP.scorestreakHuds.nukeCountdownActive
		local f7_local11 = function ()
			local f9_local0 = f7_arg0:GetValue( f7_arg0 )
			local f9_local1 = f7_arg0:GetValue( f7_arg0 )
			if f9_local0 then
				f7_arg0( f9_local0 )
			end
			if f9_local1 then
				ACTIONS.AnimateSequence( f7_arg0, "Deployed" )
				if f7_arg0 then
					Engine.BJDBIAGIDA( "watch_geiger_nuke_activate" )
				end
			end
		end
		
		f7_arg0:SubscribeToModel( f7_local9:GetModel( f7_arg1 ), f7_local11 )
		f7_arg0:SubscribeToModel( f7_local10:GetModel( f7_arg1 ), f7_local11 )
		f7_arg0:SubscribeToModel( f7_local6:GetModel( f7_arg1 ), f7_local7 )
		local f7_local12 = LUI.DataSourceFromOmnvar.new( "ui_killcam_killedby_id" )
		local f7_local13 = DataSources.inGame.currentPlayerStateClientNum
		local f7_local14 = DataSources.inGame.player.spawnNotify
		local f7_local15 = function ()
			if CONDITIONS.IsSpectating( f7_arg0 ) or CONDITIONS.InKillCam( f7_arg0 ) then
				ACTIONS.AnimateSequence( f7_arg0, "ScreenOffline" )
			else
				ACTIONS.AnimateSequence( f7_arg0, "Normal" )
				f7_arg0()
			end
		end
		
		f7_arg0:SubscribeToModel( f7_local13:GetModel( f7_arg1 ), f7_local15 )
		f7_arg0:SubscribeToModel( f7_local12:GetModel( f7_arg1 ), f7_local15 )
		f7_arg0:SubscribeToModel( f7_local14:GetModel( f7_arg1 ), f7_local15 )
	end
end

function WatchGeiger( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 512 * _1080p, 0, 512 * _1080p )
	self.id = "WatchGeiger"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local BG = nil
	
	BG = LUI.UIImage.new()
	BG.id = "BG"
	BG:SetRGBFromInt( 0, 0 )
	self:addElement( BG )
	self.BG = BG
	
	local WatchBacker = nil
	
	WatchBacker = LUI.UIImage.new()
	WatchBacker.id = "WatchBacker"
	WatchBacker:setImage( RegisterMaterial( "icon_watch_geiger_bg" ), 0 )
	WatchBacker:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -256, _1080p * 256, _1080p * -140, _1080p * 256 )
	self:addElement( WatchBacker )
	self.WatchBacker = WatchBacker
	
	local Time = nil
	
	Time = LUI.UIStyledText.new()
	Time.id = "Time"
	Time:SetRGBFromInt( 16711680, 0 )
	Time:setText( "12:00:00", 0 )
	Time:SetFont( FONTS.GetFont( FONTS.MainBold.File ) )
	Time:SetTracking( 1 * _1080p, 0 )
	Time:SetAlignment( LUI.Alignment.Center )
	Time:SetVerticalAlignment( LUI.Alignment.Bottom )
	Time:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -150, _1080p * 150, _1080p * 174, _1080p * 244 )
	self:addElement( Time )
	self.Time = Time
	
	local Meter = nil
	
	Meter = LUI.UIImage.new()
	Meter.id = "Meter"
	Meter:SetAlpha( 0.5, 0 )
	Meter:setImage( RegisterMaterial( "icon_watch_geiger_meter" ), 0 )
	Meter:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -256, _1080p * 255, _1080p * -24, _1080p * 143 )
	self:addElement( Meter )
	self.Meter = Meter
	
	local Mask = nil
	
	Mask = MenuBuilder.BuildRegisteredType( "WatchGeigerMeter", {
		controllerIndex = f1_local1
	} )
	Mask.id = "Mask"
	Mask:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -256, _1080p * 255, _1080p * -24, _1080p * 143 )
	self:addElement( Mask )
	self.Mask = Mask
	
	local Fade = nil
	
	Fade = LUI.UIImage.new()
	Fade.id = "Fade"
	Fade:SetRGBFromInt( 4718592, 0 )
	Fade:SetAlpha( 0, 0 )
	Fade:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, _1080p * 81, _1080p * -89 )
	self:addElement( Fade )
	self.Fade = Fade
	
	local KillCount = nil
	
	KillCount = LUI.UIStyledText.new()
	KillCount.id = "KillCount"
	KillCount:SetRGBFromInt( 15231489, 0 )
	KillCount:setText( "00", 0 )
	KillCount:SetFont( FONTS.GetFont( FONTS.MainBold.File ) )
	KillCount:SetWordWrap( false )
	KillCount:SetAlignment( LUI.Alignment.Center )
	KillCount:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -223, _1080p * 66, _1080p * -124, _1080p * -24 )
	self:addElement( KillCount )
	self.KillCount = KillCount
	
	local Radiation = nil
	
	Radiation = LUI.UIImage.new()
	Radiation.id = "Radiation"
	Radiation:SetRGBFromInt( 15231489, 0 )
	Radiation:setImage( RegisterMaterial( "icon_watch_radiation" ), 0 )
	Radiation:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * 153, _1080p * 225, _1080p * -110, _1080p * -38 )
	self:addElement( Radiation )
	self.Radiation = Radiation
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	local f1_local11 = nil
	Mask:RegisterAnimationSequence( "GoalReached", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = 500,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.inQuadratic
		},
		{
			value = 1,
			duration = 500,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.outQuadratic
		}
	} )
	self._sequences.GoalReached = function ()
		menu:AnimateLoop( "GoalReached" )
	end
	
	local f1_local12 = nil
	Mask:RegisterAnimationSequence( "Normal", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 256
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -256
		}
	} )
	Fade:RegisterAnimationSequence( "Normal", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	KillCount:RegisterAnimationSequence( "Normal", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -124
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * -24
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Scale
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -223
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 66
		}
	} )
	Radiation:RegisterAnimationSequence( "Normal", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -110
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * -38
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 153
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 225
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Z_Rotation
		}
	} )
	self._sequences.Normal = function ()
		menu:AnimateSequence( "Normal" )
		menu:AnimateSequence( "Normal" )
		menu:AnimateSequence( "Normal" )
		menu:AnimateSequence( "Normal" )
	end
	
	local f1_local13 = nil
	Fade:RegisterAnimationSequence( "Deployed", {
		{
			value = -2.353438279577766E-185,
			duration = 500,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	KillCount:RegisterAnimationSequence( "Deployed", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	Radiation:RegisterAnimationSequence( "Deployed", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -104
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -108
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 104
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 100
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Z_Rotation
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 4294967175,
			duration = 500,
			property = TWEEN_PROPERTY.Z_Rotation
		}
	} )
	self._sequences.Deployed = function ()
		menu:AnimateLoop( "Deployed" )
		menu:AnimateLoop( "Deployed" )
		menu:AnimateLoop( "Deployed" )
	end
	
	local f1_local14 = nil
	KillCount:RegisterAnimationSequence( "ScreenOffline", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Text,
			value = Engine.CBBHFCGDIC( "LUA_MENU/WATCH_OFFLINE" )
		},
		{
			value = 4.667263495923649E-62,
			duration = 0,
			property = TWEEN_PROPERTY.Scale
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -339
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 8
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 338
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 108
		},
		{
			value = true,
			duration = 0,
			property = TWEEN_PROPERTY.Text_Style_Word_Wrap
		}
	} )
	self._sequences.ScreenOffline = function ()
		menu:AnimateSequence( "ScreenOffline" )
	end
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "WatchGeiger", WatchGeiger )
LockTable( _M )
