-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
LUI.UIModelRotationArea = LUI.Class( LUI.UIElement )
LUI.UIModelRotationArea.Types = {
	Weapon = 0,
	Character = 1
}
LUI.UIModelRotationArea.MaxScrollDistance = 200
local f0_local0 = -30
local f0_local1 = 50
local f0_local2 = -80
local f0_local3 = 80
local f0_local4 = -180
local f0_local5 = 180
local f0_local6 = 2
local f0_local7 = 9
local f0_local8 = 3.5
local f0_local9 = 5
local f0_local10 = 0.01
local f0_local11 = 6
local f0_local12 = 0.2
local f0_local13 = 100
local f0_local14 = 100
local f0_local15 = {
	Idle = 0,
	Right = 2,
	Left = 1
}
local f0_local16 = function ( f59_arg0 )
	local f59_local0 = WEAPON.GetBaseRefFromWeaponString( f59_arg0 )
	local f59_local1
	if WEAPON.GetWeaponClass( f59_local0 ) ~= WEAPON.MELEEClass2 or f59_local0 == WEAPON.Baton then
		f59_local1 = false
	else
		f59_local1 = true
	end
	return f59_local1, GL_HACK.IsDoomChainsawBlueprintFromRef( f59_arg0 )
end

local f0_local17 = function ( f58_arg0 )
	local f58_local0, f58_local1 = f0_local0( f58_arg0 )
	local f58_local2
	if f58_local0 then
		f58_local2 = f58_local1
	else
		f58_local2 = true
	end
	return f58_local2
end

local f0_local18 = function ( f57_arg0 )
	local f57_local0, f57_local1 = f0_local0( f57_arg0 )
	if f57_local1 then
		return CLIENT_MODEL.chainsawRotationOffset
	elseif f57_local0 then
		return CLIENT_MODEL.meleeRotationOffset
	else
		return 0
	end
end

local f0_local19 = function ( f56_arg0, f56_arg1, f56_arg2 )
	f56_arg0._currentYawDirection = f56_arg1
	local f56_local0 = 0 and f0_local0 or -f0_local0
	local f56_local1 = f56_arg2 * f56_local0
	f56_arg0._currentRoll = f56_local0
	f56_arg0._currentRoll = f0_local0( f56_arg0._modelName ) and f56_arg0._currentRoll or 0
	f56_local0 = f56_arg0._currentYaw
	local f56_local2 = f56_arg0._currentRoll
	local f56_local3 = f0_local0( f56_arg0._modelName )
	ClientWeapon[0x9803AC1AFAF4BE]( f56_arg0._modelIndex, f56_arg0._offsetData.pitch + f56_local3, f56_arg0._offsetData.yaw + f56_local0, f56_arg0._offsetData.roll + f56_local2 )
	if f56_arg0._akimbo then
		ClientWeapon[0x9803AC1AFAF4BE]( f56_arg0._modelIndex2, f56_arg0._offsetData.pitch + f56_local3, f56_arg0._offsetData.yaw + f56_local0, f56_arg0._offsetData.roll + f56_local2 )
	end
	f56_arg0:dispatchEventToRoot( {
		name = "weapon_rotation",
		rotating = f56_arg2 ~= 0,
		currentRoll = f56_arg0._currentRoll
	} )
end

local f0_local20 = function ( f55_arg0 )
	if math.abs( f55_arg0._currentYawDirection ) < f0_local0 then
		if f55_arg0._sentRotationEvent then
			f55_arg0:dispatchEventToRoot( {
				rotating = false,
				name = "weapon_rotation",
				currentRoll = f55_arg0._currentRoll
			} )
			f55_arg0._sentRotationEvent = false
		end
		return 
	end
	local f55_local0 = f55_arg0._currentYaw
	local f55_local1 = f0_local0
	local f55_local2
	if 0 < f55_arg0._currentYawDirection then
		f55_local2 = 1
	else
		f55_local2 = -1
	end
	f55_arg0._currentYaw = f55_local0 + f55_local1 * f55_local2
	f55_arg0:dispatchEventToRoot( {
		rotating = true,
		name = "weapon_rotation"
	} )
	f55_arg0._sentRotationEvent = true
	f55_arg0._currentRoll = f0_local0( f55_arg0._modelName ) and f55_arg0._currentRoll or 0
	f55_local1 = f55_arg0._currentYaw
	f55_local2 = f55_arg0._currentRoll
	local f55_local3 = f0_local0( f55_arg0._modelName )
	ClientWeapon[0x9803AC1AFAF4BE]( f55_arg0._modelIndex, f55_arg0._offsetData.pitch + f55_local3, f55_arg0._offsetData.yaw + f55_local1, f55_arg0._offsetData.roll + f55_local2 )
	if f55_arg0._akimbo then
		ClientWeapon[0x9803AC1AFAF4BE]( f55_arg0._modelIndex2, f55_arg0._offsetData.pitch + f55_local3, f55_arg0._offsetData.yaw + f55_local1, f55_arg0._offsetData.roll + f55_local2 )
	end
end

local f0_local21 = function ( f54_arg0 )
	if f0_local0 <= math.abs( f54_arg0._currentYawDirection ) then
		f54_arg0._currentYaw = f54_arg0._currentYaw + f54_arg0._currentYawDirection * f0_local0
		if f54_arg0._modelIndex then
			ClientCharacter[0xB6D1A33AC2622D0]( f54_arg0._modelIndex, 0, f54_arg0._currentYaw, 0 )
		end
	end
end

local f0_local22 = function ( f53_arg0, f53_arg1 )
	if math.abs( f53_arg1 ) < f0_local0 then
		if f53_arg0._sentMovementEvent then
			f53_arg0:dispatchEventToRoot( {
				movement = false,
				name = "weapon_rotation"
			} )
			f53_arg0._sentMovementEvent = false
		end
		return 
	end
	local f53_local0 = f53_arg0._currentPositionX
	local f53_local1
	if 0 < f53_arg1 then
		f53_local1 = 1
	else
		f53_local1 = -1
	end
	f53_arg0._currentPositionX = f53_local0 + 0.1 * f53_local1
	f53_arg0:dispatchEventToRoot( {
		movement = true,
		name = "weapon_rotation"
	} )
	f53_arg0._sentMovementEvent = true
	ClientWeapon[0x8B8A4E0355DF0C0]( f53_arg0._modelIndex, f53_arg0._currentPositionX, 0, 0 )
	if f53_arg0._akimbo then
		ClientWeapon[0x8B8A4E0355DF0C0]( f53_arg0._modelIndex2, f53_arg0._currentPositionX, 0, 0 )
	end
end

local f0_local23 = function ( f52_arg0, f52_arg1, f52_arg2 )
	local f52_local0 = f52_arg1 - f52_arg0._lastYaw
	f52_arg0._currentRoll = LUI.clamp( f52_arg0._currentRoll + -(f52_arg2 - f52_arg0._lastRoll) * f0_local0, f0_local0, f0_local0 )
	f52_arg0._currentYaw = f52_arg0._currentYaw + f52_local0 * f0_local0
	f52_arg0._currentRoll = f0_local0( f52_arg0._modelName ) and f52_arg0._currentRoll or 0
	local f52_local1 = f52_arg0._currentYaw
	local f52_local2 = f52_arg0._currentRoll
	local f52_local3 = f0_local0( f52_arg0._modelName )
	ClientWeapon[0x9803AC1AFAF4BE]( f52_arg0._modelIndex, f52_arg0._offsetData.pitch + f52_local3, f52_arg0._offsetData.yaw + f52_local1, f52_arg0._offsetData.roll + f52_local2 )
	if f52_arg0._akimbo then
		ClientWeapon[0x9803AC1AFAF4BE]( f52_arg0._modelIndex2, f52_arg0._offsetData.pitch + f52_local3, f52_arg0._offsetData.yaw + f52_local1, f52_arg0._offsetData.roll + f52_local2 )
	end
	f52_arg0._lastYaw = f52_arg1
	f52_arg0._lastRoll = f52_arg2
end

local f0_local24 = function ( f51_arg0 )
	f51_arg0._currentRoll = 0
end

local f0_local25 = function ( f50_arg0, f50_arg1 )
	local f50_local0 = {
		f50_arg0[0x6110872F7CC129A],
		f50_arg0[0x8EE0811428CB232],
		f50_arg0[0xE1750E76150B960],
		f50_arg0[0x5FEA73FCC6ABC33]
	}
	return f50_local0[f50_arg1 + 1]
end

local f0_local26 = function ( f49_arg0, f49_arg1 )
	local f49_local0 = {
		f49_arg0[0xDAE3D19A6DE95E6],
		f49_arg0[0x509CD72BDA4C886],
		f49_arg0[0x6BD2E091E8B9544],
		f49_arg0[0x1AFB4E836C2B0AF]
	}
	return f49_local0[f49_arg1 + 1]
end

local f0_local27 = function ( f48_arg0, f48_arg1 )
	local f48_local0 = {
		f48_arg0[0x4F81238103512BD],
		f48_arg0[0x604435E50D81B13],
		f48_arg0[0x5668E0178FF84D1],
		f48_arg0[0xA3D2832449BB914]
	}
	return f48_local0[f48_arg1 + 1]
end

local f0_local28 = function ( f47_arg0, f47_arg1, f47_arg2 )
	local f47_local0 = OPERATOR.GetTurnAnimDataForSkin( f47_arg0._controllerIndex, f47_arg0.operatorRef, f47_arg0.operatorSkinRef, f47_arg2 )
	if f47_arg1 == f0_local0.Left then
		return f0_local0( f47_local0, f47_arg0.turnCounter )
	elseif f47_arg1 == f0_local0.Right then
		return f0_local0( f47_local0, f47_arg0.turnCounter )
	else
		return f0_local0( f47_local0, f47_arg0.turnCounter )
	end
end

local f0_local29 = function ( f46_arg0, f46_arg1 )
	if not f46_arg0.operatorRef then
		if f46_arg0.UpdateCharacterRotation then
			f46_arg0:UpdateCharacterRotation( f46_arg1 )
		end
		return 
	elseif f46_arg0._smoothCharacterRotation then
		f46_arg0._currentYaw = f46_arg0._currentYaw + f46_arg1 * f0_local0
		ClientCharacter[0xB6D1A33AC2622D0]( f46_arg0._modelIndex, 0, f46_arg0._currentYaw, 0 )
	else
		if f46_arg0._waitingForAnimationLoading then
			return 
		end
		f46_arg0._rotationInput = f46_arg1
		if f46_arg0._rotationInput < 0.25 and -0.25 < f46_arg0._rotationInput then
			f46_arg0._rotationInput = 0
		end
		local f46_local0 = 0 < f46_arg0._rotationInput
		local f46_local1 = f46_arg0._rotationInput < 0
		local f46_local2 = tonumber( OPERATOR.GetGender( f46_arg0.operatorRef ) )
		local f46_local3 = WEAPON.GetWeaponDetailsFromModel( f46_arg0[0xB610205F2C6E01] )
		local f46_local4
		if f46_local3 then
			f46_local4 = f46_local3.weaponRef
			if not f46_local4 then
			
			else
				local f46_local5 = WEAPON.IsWeaponNoneValue( f46_local4 )
				if not f46_local5 then
					f46_local5 = WEAPON.IsBadWeaponForLobbyAnimations( f46_local4 )
				end
				local f46_local6 = OPERATOR.GetTurnAnimDataForSkin( f46_arg0._controllerIndex, f46_arg0.operatorRef, f46_arg0.operatorSkinRef, f46_local5 )
				local f46_local7 = ClientCharacter[0xC4D5E9810D26F7E]( f46_arg0._modelIndex )
				if f46_arg0.currentState ~= f0_local0.Idle then
					local f46_local8
					if f46_local7 ~= string.lower( f46_local6[0x6110872F7CC129A][0x6D4C683B56F2FD0] ) and f46_local7 ~= string.lower( f46_local6[0x8EE0811428CB232][0x6D4C683B56F2FD0] ) and f46_local7 ~= string.lower( f46_local6[0x5FEA73FCC6ABC33][0x6D4C683B56F2FD0] ) and f46_local7 ~= string.lower( f46_local6[0xE1750E76150B960][0x6D4C683B56F2FD0] ) then
						f46_local8 = false
					else
						f46_local8 = true
					end
					if f46_local8 and not (Table.FindItemIndexInArray( {
						f46_local6[0xDAE3D19A6DE95E6][0x6D4C683B56F2FD0],
						f46_local6[0x509CD72BDA4C886][0x6D4C683B56F2FD0],
						f46_local6[0x6BD2E091E8B9544][0x6D4C683B56F2FD0],
						f46_local6[0x1AFB4E836C2B0AF][0x6D4C683B56F2FD0],
						f46_local6[0x4F81238103512BD][0x6D4C683B56F2FD0],
						f46_local6[0x604435E50D81B13][0x6D4C683B56F2FD0],
						f46_local6[0x5668E0178FF84D1][0x6D4C683B56F2FD0],
						f46_local6[0xA3D2832449BB914][0x6D4C683B56F2FD0]
					}, ClientCharacter[0xE6F30798441706C]( f46_arg0._modelIndex ) ) ~= nil) then
						f46_arg0.currentState = f0_local0.Idle
						f46_arg0.lockTurnAnimUpdate = false
					end
				end
				local f46_local8 = nil
				if f46_arg0.currentState ~= f0_local0.Right and f46_local1 then
					f46_local8 = f0_local0.Right
				elseif f46_arg0.currentState ~= f0_local0.Left and f46_local0 then
					f46_local8 = f0_local0.Left
				end
				if f46_local8 and f46_arg0.currentState ~= f46_local8 and not f46_arg0.lockTurnAnimUpdate then
					local f46_local9, f46_local10, f46_local11, f46_local12, f46_local13 = nil
					f46_local9 = f0_local0( f46_arg0, f46_local8, f46_local5 )
					if f46_local8 == f0_local0.Left then
						f46_arg0.turnCounter = f46_arg0.turnCounter + 1
					elseif f46_local8 == f0_local0.Right then
						f46_arg0.turnCounter = f46_arg0.turnCounter - 1
					end
					if 3 < f46_arg0.turnCounter then
						f46_arg0.turnCounter = 0
					end
					if f46_arg0.turnCounter < 0 then
						f46_arg0.turnCounter = 3
					end
					if f46_arg0.currentState == f0_local0.Idle then
						ClientCharacter[0xAA614EB46957F3B]( f46_arg0._modelIndex, f46_local9[0x6D4C683B56F2FD0], f46_local9[0x9C0ACA099D06311] )
					else
						f46_arg0.lockTurnAnimUpdate = true
						ClientCharacter[0x893FBEFA2ED31EF]( f46_arg0._modelIndex )
						ClientCharacter[0x524D4D5B140E36E]( f46_arg0._modelIndex, f46_local9[0x6D4C683B56F2FD0], f46_local9[0x975F54AAA58134], f46_local9[0x9C0ACA099D06311], f46_local9[0x48E7511D55FD06E] )
					end
					f46_local10 = f0_local0( f46_arg0, f0_local0.Idle, f46_local5 )
					ClientCharacter[0x524D4D5B140E36E]( f46_arg0._modelIndex, f46_local10[0x6D4C683B56F2FD0], nil, f46_local10[0x9C0ACA099D06311] )
					f46_arg0.currentState = f46_local8
				end
			end
		end
		f46_local4 = WEAPON.NoneValue
	end
end

local f0_local30 = function ( f45_arg0 )
	local f45_local0 = WEAPON.GetWeaponDetailsFromModel( f45_arg0[0xB610205F2C6E01] )
	local f45_local1
	if f45_local0 then
		f45_local1 = f45_local0.weaponRef
		if not f45_local1 then
		
		else
			local f45_local2 = WEAPON.IsWeaponNoneValue( f45_local1 )
			if not f45_local2 then
				f45_local2 = WEAPON.IsBadWeaponForLobbyAnimations( f45_local1 )
			end
			local f45_local3 = OPERATOR.GetTurnAnimDataForSkin( f45_arg0._controllerIndex, f45_arg0.operatorRef, f45_arg0.operatorSkinRef, f45_local2 )
			STREAMING.RequestModels( f45_arg0._controllerIndex, {
				requesterWidget = f45_arg0,
				modelType = STREAMING.ModelTypes.Animation,
				models = {
					f45_local3[0x6110872F7CC129A][0x6D4C683B56F2FD0],
					f45_local3[0x8EE0811428CB232][0x6D4C683B56F2FD0],
					f45_local3[0xE1750E76150B960][0x6D4C683B56F2FD0],
					f45_local3[0x5FEA73FCC6ABC33][0x6D4C683B56F2FD0],
					f45_local3[0xDAE3D19A6DE95E6][0x6D4C683B56F2FD0],
					f45_local3[0x509CD72BDA4C886][0x6D4C683B56F2FD0],
					f45_local3[0x6BD2E091E8B9544][0x6D4C683B56F2FD0],
					f45_local3[0x1AFB4E836C2B0AF][0x6D4C683B56F2FD0],
					f45_local3[0x4F81238103512BD][0x6D4C683B56F2FD0],
					f45_local3[0x604435E50D81B13][0x6D4C683B56F2FD0],
					f45_local3[0x5668E0178FF84D1][0x6D4C683B56F2FD0],
					f45_local3[0xA3D2832449BB914][0x6D4C683B56F2FD0]
				}
			} )
		end
	end
	f45_local1 = WEAPON.NoneValue
end

local f0_local31 = function ( f44_arg0, f44_arg1 )
	local f44_local0 = 0
	local f44_local1 = 0
	if f44_arg0._initialX and f44_arg0._initialY then
		local f44_local2 = f44_arg0._initialX - LUI.UIModelRotationArea.MaxScrollDistance
		local f44_local3 = f44_arg0._initialX + LUI.UIModelRotationArea.MaxScrollDistance
		local f44_local4 = f44_arg0._initialY - LUI.UIModelRotationArea.MaxScrollDistance
		local f44_local5 = f44_arg0._initialY + LUI.UIModelRotationArea.MaxScrollDistance
		local f44_local6, f44_local7 = f44_arg1.root:PixelsToUnits( f44_arg1.x, f44_arg1.y )
		f44_local2, f44_local4 = f44_arg1.root:PixelsToUnits( f44_local2, f44_local4 )
		local f44_local8, f44_local9 = f44_arg1.root:PixelsToUnits( f44_local3, f44_local5 )
		f44_local5 = f44_local9
		f44_local0 = (f44_local6 - f44_local2) / (f44_local8 - f44_local2)
		f44_local1 = (f44_local7 - f44_local4) / (f44_local5 - f44_local4)
	end
	return f44_local0, f44_local1
end

local f0_local32 = function ( f43_arg0, f43_arg1 )
	if not LUI.IsLastInputKeyboardMouse( f43_arg1.controller ) then
		return 
	elseif f43_arg0._modelIndex then
		f43_arg0._rotating = true
		f43_arg0._initialX = f43_arg1.x
		f43_arg0._initialY = f43_arg1.y
		f43_arg0._lastInputX = f43_arg1.x
		f43_arg0._lastInputY = f43_arg1.y
		f43_arg0._lastYaw, f43_arg0._lastRoll = f0_local0( f43_arg0, f43_arg1 )
		Engine[0xD1619221CBAF878]( true )
	end
end

local f0_local33 = function ( f42_arg0, f42_arg1 )
	f42_arg0._rotating = false
	f42_arg0._initialX = nil
	f42_arg0._initialY = nil
	f42_arg0._currentYawDirection = 0
	f0_local0( f42_arg0 )
end

local f0_local34 = function ( f41_arg0, f41_arg1 )
	f41_arg0._mouseMovement = true
	f41_arg0._initialX = f41_arg1.x
	f41_arg0._initialY = f41_arg1.y
	Engine[0xD1619221CBAF878]( true )
end

local f0_local35 = function ( f40_arg0, f40_arg1 )
	if f40_arg1.name ~= "rightmouseup" then
		f40_arg0._mouseMovement = false
	else
		Engine[0xD1619221CBAF878]( false )
	end
end

local f0_local36 = function ( f39_arg0, f39_arg1 )
	if f39_arg0._modelIndex then
		f39_arg0._rotating = true
		f39_arg0._initialX = f39_arg1.x
		f39_arg0._initialY = f39_arg1.y
		f39_arg0._lastInputX = f39_arg1.x
		f39_arg0._lastInputY = f39_arg1.y
		f39_arg0._lastYaw, f39_arg0._lastRoll = f0_local0( f39_arg0, f39_arg1 )
	end
end

local f0_local37 = function ( f38_arg0, f38_arg1 )
	f38_arg0._rotating = false
	f38_arg0._initialX = nil
	f38_arg0._initialY = nil
	f38_arg0._currentYawDirection = 0
end

local f0_local38 = function ( f37_arg0, f37_arg1 )
	if f37_arg0._model and not f37_arg0._model:GetInputRotatable() then
		return 
	elseif CONDITIONS.IsPC() and f37_arg0:IsMouseHidden( f37_arg1 ) then
		f0_local0( f37_arg0, f37_arg1 )
		f37_arg0:dispatchEventToRoot( {
			rotating = false,
			name = "weapon_rotation",
			currentRoll = f37_arg0._currentRoll
		} )
		f37_arg0:ResetRotation()
		return 
	end
	local f37_local0, f37_local1 = f0_local0( f37_arg0, f37_arg1 )
	if f37_arg0._type == LUI.UIModelRotationArea.Types.Weapon then
		f0_local0( f37_arg0, f37_local0, f37_local1 )
	elseif f37_arg0._type == LUI.UIModelRotationArea.Types.Character then
		local f37_local2, f37_local3 = f37_arg1.root:PixelsToUnits( f37_arg1.x, f37_arg1.y )
		local f37_local4, f37_local5 = f37_arg1.root:PixelsToUnits( f37_arg0._lastInputX, f37_arg0._lastInputY )
		f0_local0( f37_arg0, LUI.clamp( (f37_local2 - f37_local4) / LUI.UIModelRotationArea.MaxScrollDistance, -1, 1 ) * f0_local0 )
	end
	f37_arg0._lastInputX = f37_arg1.x
	f37_arg0._lastInputY = f37_arg1.y
end

local f0_local39 = function ( f36_arg0, f36_arg1 )
	if f36_arg0._rotating then
		f0_local0( f36_arg0, {
			controller = f36_arg1.controller,
			root = f36_arg1.root,
			x = f36_arg1.x,
			y = f36_arg1.y
		} )
	elseif f36_arg0._mouseMovement and f36_arg0._type == LUI.UIModelRotationArea.Types.Weapon and not Dvar[0x9E5BE3B4BBA4E0E]( 0x8C266DDC4A68FE7 ) then
		local f36_local0, f36_local1 = f0_local0( f36_arg0, f36_arg1 )
		f0_local0( f36_arg0, f36_local0 )
	end
end

local f0_local40 = function ( f35_arg0, f35_arg1 )
	if f35_arg0._rotating and f35_arg0._touchCount == 1 then
		f0_local0( f35_arg0, {
			controller = f35_arg1.controller,
			root = f35_arg1.root,
			x = f35_arg1.x,
			y = f35_arg1.y
		} )
	end
end

local f0_local41 = function ( f34_arg0, f34_arg1 )
	if f34_arg1.controller ~= f34_arg0._controllerIndex or not LUI.IsLastInputGamepad( f34_arg1.controller ) then
		return 
	elseif f34_arg0._type == LUI.UIModelRotationArea.Types.Weapon then
		if f34_arg1.rightStickYaw and f34_arg1.rightStickPitch then
			f0_local0( f34_arg0, f34_arg1.rightStickYaw, f34_arg1.rightStickPitch )
		end
	elseif f34_arg0._type == LUI.UIModelRotationArea.Types.Character then
		if f34_arg0._smoothCharacterRotation then
			f34_arg0._currentYawDirection = f34_arg1.rightStickYaw or 0
		elseif f34_arg1.rightStickYaw then
			f0_local0( f34_arg0, f34_arg1.rightStickYaw )
		end
	end
	if f34_arg0._type == LUI.UIModelRotationArea.Types.Weapon and f34_arg1.leftStickYaw and f34_arg1.leftStickYaw ~= 0 and not Dvar[0x9E5BE3B4BBA4E0E]( 0x8C266DDC4A68FE7 ) then
		f0_local0( f34_arg0, f34_arg1.leftStickYaw )
	end
	return true
end

LUI.UIModelRotationArea.ResetRotation = function ( f33_arg0, f33_arg1 )
	if not f33_arg1 then
		f33_arg1 = {
			nil,
			0,
			0,
			0
		}
	end
	if f33_arg0._modelIndex then
		if f33_arg0._type == LUI.UIModelRotationArea.Types.Weapon then
			ClientWeapon[0x2F28F9BE6EE7D2D]( f33_arg0._modelIndex, f33_arg1[1], f33_arg1[2], f33_arg1[3] )
			if f33_arg0._akimbo then
				ClientWeapon[0x2F28F9BE6EE7D2D]( f33_arg0._modelIndex2, f33_arg1[1], f33_arg1[2], f33_arg1[3] )
			end
		elseif f33_arg0._type == LUI.UIModelRotationArea.Types.Character and f33_arg0._smoothCharacterRotation then
			ClientCharacter[0xB6D1A33AC2622D0]( f33_arg0._modelIndex, f33_arg1[1], f33_arg1[2], f33_arg1[3] )
		end
	end
	f33_arg0._currentYaw = f33_arg1[2]
	f33_arg0._currentYawDirection = f33_arg1[2]
	f33_arg0._currentRoll = f33_arg1[3]
end

LUI.UIModelRotationArea.SetRotation = function ( f32_arg0, f32_arg1, f32_arg2, f32_arg3 )
	f32_arg0._currentYaw = f32_arg2
	f32_arg0._currentRoll = f32_arg3
	if f32_arg0._type == LUI.UIModelRotationArea.Types.Weapon then
		f32_arg0._currentRoll = f0_local0( f32_arg0._modelName ) and f32_arg0._currentRoll or 0
		ClientWeapon[0x2F28F9BE6EE7D2D]( f32_arg0._modelIndex, f32_arg0._offsetData.pitch + f32_arg1, f32_arg0._offsetData.yaw + f32_arg2, f32_arg0._offsetData.roll + f32_arg3 )
		if f32_arg0._akimbo then
			ClientWeapon[0x2F28F9BE6EE7D2D]( f32_arg0._modelIndex2, f32_arg0._offsetData.pitch + f32_arg1, f32_arg0._offsetData.yaw + f32_arg2, f32_arg0._offsetData.roll + f32_arg3 )
		end
	elseif f32_arg0._type == LUI.UIModelRotationArea.Types.Character and f32_arg0._smoothCharacterRotation then
		ClientCharacter[0xB6D1A33AC2622D0]( f32_arg0._modelIndex, f32_arg1, f32_arg2, f32_arg3 )
	end
end

local f0_local42 = function ( f31_arg0, f31_arg1 )
	f31_arg0._currentYaw = f31_arg0._currentYaw + f0_local0 * f31_arg0._rotationInput
end

local f0_local43 = function ( f30_arg0, f30_arg1 )
	local f30_local0 = f30_arg1.controller
	if not f30_local0 then
		f30_local0 = Engine[0x45B054C920178E9]()
	end
	if not LUI.IsLastInputKeyboardMouse( f30_local0 ) then
		return 
	else
		Engine[0xD1619221CBAF878]( false )
		f0_local0( f30_arg0, f30_arg1 )
		f0_local0( f30_arg0, f30_arg1 )
	end
end

LUI.UIModelRotationArea.ResetTurnCounter = function ( f29_arg0 )
	f29_arg0.turnCounter = 0
end

LUI.UIModelRotationArea.ButtonInput = function ( f28_arg0, f28_arg1 )
	f0_local0( f28_arg0, f28_arg1 )
end

local f0_local44 = function ( f27_arg0 )
	f27_arg0:ResetRotation()
	f0_local0( f27_arg0, nil )
	f0_local0( f27_arg0, nil )
end

LUI.UIModelRotationArea.GetCurrentYaw = function ( f26_arg0 )
	return f26_arg0._currentYaw
end

LUI.UIModelRotationArea.GetLastYaw = function ( f25_arg0 )
	return f25_arg0._lastYaw
end

LUI.UIModelRotationArea.GetCurrentRoll = function ( f24_arg0 )
	return f24_arg0._currentRoll
end

LUI.UIModelRotationArea.GetLastRoll = function ( f23_arg0 )
	return f23_arg0._lastRoll
end

LUI.UIModelRotationArea.GetCurrentPosition = function ( f22_arg0 )
	return f22_arg0._currentPositionX
end

LUI.UIModelRotationArea.SetWeaponInfo = function ( f21_arg0, f21_arg1, f21_arg2, f21_arg3, f21_arg4, f21_arg5, f21_arg6 )
	local f21_local0
	if f21_arg4 == nil or f21_arg5 == nil then
		f21_local0 = false
	else
		f21_local0 = true
	end
	f21_arg0._akimbo = f21_local0
	f21_arg0._akimboOffset = f21_arg6
	f21_arg0._modelName = f21_arg1
	f21_arg0._model = f21_arg2
	f21_arg0._modelIndex = f21_arg3
	f21_arg0._offsetData = f21_arg0._model:GetOffsetsAndRotations( f21_arg0._modelName )
	f21_arg0._model2 = f21_arg4
	f21_arg0._modelIndex2 = f21_arg5
	if f21_arg0._akimbo then
		ClientWeapon[0xB64C62541388C29]( f21_arg3, -f21_arg6 )
		ClientWeapon[0xB64C62541388C29]( f21_arg5, f21_arg6 )
	else
		ClientWeapon[0xB64C62541388C29]( f21_arg3, 0 )
	end
	f21_arg0:ResetRotation()
end

LUI.UIModelRotationArea.SetCharacterInfo = function ( f20_arg0, f20_arg1, f20_arg2, f20_arg3 )
	f20_arg0._modelIndex = f20_arg1
	f20_arg0.operatorRef = f20_arg2
	f20_arg0.operatorSkinRef = f20_arg3
	f20_arg0.turnCounter = 0
	f20_arg0.currentState = f0_local0.Idle
	f20_arg0.lockTurnAnimUpdate = false
	if f20_arg2 then
		f0_local0( f20_arg0 )
	end
end

LUI.UIModelRotationArea.SetStickInputEnabled = function ( f19_arg0, f19_arg1 )
	f19_arg0._stickInputEnabled = f19_arg1
end

LUI.UIModelRotationArea.SetSmoothCharacterRotationEnabled = function ( f17_arg0, f17_arg1 )
	f17_arg0._smoothCharacterRotation = f17_arg1
	if f17_arg1 then
		f17_arg0:CreateEventTimer( "characterYawRotationTimer", 16, {
			callbackFunc = function ( f18_arg0, f18_arg1 )
				if LUI.IsLastInputGamepad( f18_arg0._controllerIndex ) and f18_arg0._rightStickYawInput == false then
					f18_arg0._rotating = false
					f18_arg0._initialX = nil
					f18_arg0._initialY = nil
					f18_arg0._currentYawDirection = 0
				end
				f17_arg0( f18_arg0 )
			end
		} )
	else
		f17_arg0:RemoveEventTimer( "characterYawRotationTimer" )
	end
	f17_arg0:ResetRotation()
end

local f0_local45 = function ( f16_arg0, f16_arg1 )
	f0_local0( f16_arg0, f16_arg1 )
	f0_local0( f16_arg0, f16_arg1 )
end

LUI.UIModelRotationArea.init = function ( f1_arg0, f1_arg1 )
	LUI.UIModelRotationArea.super.init( f1_arg0, f1_arg1 )
	f1_arg0._type = f1_arg1.type
	f1_arg0._controllerIndex = f1_arg1.controllerIndex
	
	local FrontendCameraMover = MenuBuilder.BuildRegisteredType( "FrontendCameraMover", {
		disableStick = true,
		enableHoldZoom = true,
		useMousePan = true,
		enableZoom = true,
		enableTouchZoom = true,
		enableWheelZoom = true,
		snapToCenter = false,
		controllerIndex = f1_arg0._controllerIndex,
		enableSway = f1_arg1.enableSway,
		panWithRightMouseButton = f1_arg1.panWithRightMouseButton
	} )
	FrontendCameraMover:SetZoomSpeed( 0.7 )
	FrontendCameraMover:SetMaxZoom( 35 )
	f1_arg0:addElement( FrontendCameraMover )
	f1_arg0.FrontendCameraMover = FrontendCameraMover
	
	f1_arg0.Reset = f0_local0
	f1_arg0._rotationInput = 0
	f1_arg0._currentYaw = 0
	f1_arg0._currentRoll = 0
	f1_arg0._currentYawDirection = 0
	f1_arg0._currentPositionX = 0
	f1_arg0._touchCount = 0
	f1_arg0._stickInputEnabled = true
	local f1_local1 = LUI.DataSourceInControllerModel.new( "stick.l.notify" )
	local f1_local2 = LUI.DataSourceInControllerModel.new( "stick.r.notify" )
	f1_arg0:SubscribeToModel( f1_local1:GetModel( f1_arg0._controllerIndex ), function ()
		if f1_arg0._stickInputEnabled then
			local f15_local0 = {
				controller = f1_arg0._controllerIndex
			}
			local f15_local1 = LUI.DataSourceInControllerModel.new( "stick.l.x" )
			f15_local0.leftStickYaw = f15_local1:GetValue( f1_arg0._controllerIndex )
			f15_local1 = LUI.DataSourceInControllerModel.new( "stick.l.y" )
			f15_local0.leftStickPitch = f15_local1:GetValue( f1_arg0._controllerIndex )
			f1_arg0( f1_arg0, f15_local0 )
		end
	end, true )
	f1_arg0:SubscribeToModel( f1_local2:GetModel( f1_arg0._controllerIndex ), function ()
		if f1_arg0._stickInputEnabled then
			local f14_local0 = {
				controller = f1_arg0._controllerIndex
			}
			local f14_local1 = LUI.DataSourceInControllerModel.new( "stick.r.x" )
			f14_local0.rightStickYaw = f14_local1:GetValue( f1_arg0._controllerIndex )
			f14_local1 = LUI.DataSourceInControllerModel.new( "stick.r.y" )
			f14_local0.rightStickPitch = f14_local1:GetValue( f1_arg0._controllerIndex )
			f1_arg0( f1_arg0, f14_local0 )
			if 0.01 < math.abs( f14_local0.rightStickYaw ) then
				f1_arg0._rightStickYawInput = true
			else
				f1_arg0._rightStickYawInput = false
			end
		end
	end, true )
	if CONDITIONS.IsMobileOrMobileSim() then
		f1_arg0:registerEventHandler( "touchbegin", function ( element, event )
			element._touchCount = element._touchCount + 1
			f1_arg0( element, event )
			element:dispatchEventToRoot( {
				rotating = true,
				name = "weapon_rotation"
			} )
		end )
		f1_arg0:registerEventHandler( "touchend", function ( element, event )
			local f12_local0
			if element._touchCount <= 0 then
				f12_local0 = 0
			else
				f12_local0 = element._touchCount - 1
			end
			element._touchCount = f12_local0
			f1_arg0( element, event )
			element:dispatchEventToRoot( {
				rotating = false,
				name = "weapon_rotation",
				currentRoll = element._currentRoll
			} )
		end )
		f1_arg0:addEventHandler( "touchmove", f0_local0 )
		f1_arg0:SetHandleTouchInput( true )
		f1_arg0:SetHandleMultiFinger( true )
	else
		f1_arg0:registerEventHandler( "leftmousedown", function ( element, event )
			f1_arg0( element, event )
			element:dispatchEventToRoot( {
				rotating = true,
				name = "weapon_rotation"
			} )
		end )
		f1_arg0:registerEventHandler( "leftmouseup", function ( element, event )
			f1_arg0( element, event )
			element:dispatchEventToRoot( {
				rotating = false,
				name = "weapon_rotation",
				currentRoll = element._currentRoll
			} )
		end )
		f1_arg0:registerEventHandler( "stackCleared", function ( element, event )
			f1_arg0( element, event )
			element:dispatchEventToRoot( {
				rotating = false,
				name = "weapon_rotation",
				currentRoll = element._currentRoll
			} )
			element.m_leftMouseDown = false
			element.m_rightMouseDown = false
		end )
		f1_arg0:registerEventHandler( "rightmousedown", f0_local0 )
		f1_arg0:registerEventHandler( "rightmouseup", function ( element, event )
			f1_arg0( element, event )
			element:dispatchEventToRoot( {
				movement = false,
				name = "weapon_rotation"
			} )
		end )
		f1_arg0:addEventHandler( "mousedrag", f0_local0 )
		f1_arg0:addEventHandler( "mouse_capture_lost", function ( f7_arg0, f7_arg1 )
			f1_arg0( f7_arg0, f7_arg1 )
			f7_arg0:dispatchEventToRoot( {
				rotating = false,
				name = "weapon_rotation",
				currentRoll = f7_arg0._currentRoll
			} )
			f7_arg0:dispatchEventToRoot( {
				movement = false,
				name = "weapon_rotation"
			} )
		end )
		f1_arg0:SetHandleMouse( true )
	end
	f1_arg0:addEventHandler( "popup_active", function ( f6_arg0, f6_arg1 )
		f1_arg0( f6_arg0, f6_arg1 )
		f6_arg0:dispatchEventToRoot( {
			rotating = false,
			name = "weapon_rotation",
			currentRoll = f6_arg0._currentRoll
		} )
		f6_arg0:dispatchEventToRoot( {
			movement = false,
			name = "weapon_rotation"
		} )
	end )
	f1_arg0:registerEventHandler( "tick", f0_local0 )
	f1_arg0.AcceptsFocusType = function ( f5_arg0, f5_arg1 )
		return f5_arg1 == FocusType.MouseOver
	end
	
	if f1_arg0._type == LUI.UIModelRotationArea.Types.Weapon then
		f1_arg0.weaponYawRotationTimer = LUI.UITimer.new( {
			interval = 50,
			event = "update_weapon_yaw_rotation"
		} )
		f1_arg0.weaponYawRotationTimer.id = "weaponYawRotationTimer"
		f1_arg0:addElement( f1_arg0.weaponYawRotationTimer )
		f1_arg0:addEventHandler( "update_weapon_yaw_rotation", function ( f4_arg0, f4_arg1 )
			if LUI.IsLastInputGamepad( f1_arg0._controllerIndex ) and f1_arg0._rightStickYawInput == false then
				f1_arg0._rotating = false
				f1_arg0._initialX = nil
				f1_arg0._initialY = nil
				f1_arg0._currentYawDirection = 0
			end
			f1_arg0( f4_arg0 )
		end )
	end
	LUI.UIMouseCursor.SetAndUpdateEventMouseCursorTypes( f1_arg0.FrontendCameraMover, f1_arg0._controllerIndex, MouseCursorType.CURSOR_TYPE_MOVE_HOVER, MouseCursorType.CURSOR_TYPE_MOVE_CLICK )
	f1_arg0:SubscribeToInputTypeModel( f1_arg0._controllerIndex, function ( f3_arg0, f3_arg1 )
		if CONDITIONS.IsKbm( f3_arg1._controllerIndex ) then
			if f3_arg1.timer then
				f3_arg1.timer:closeTree()
				f3_arg1.timer = nil
			end
		elseif f3_arg1._type == LUI.UIModelRotationArea.Types.Character and not f3_arg1.timer then
			local self = LUI.UITimer.new( {
				interval = 15,
				event = "tick"
			} )
			self.id = "UIModelRotationAreaTimer"
			f3_arg1:addElement( self )
			f3_arg1.timer = self
		end
	end )
	f1_arg0:RegisterActionable()
	if f1_arg0._type == LUI.UIModelRotationArea.Types.Character then
		f1_arg0:addEventHandler( "on_close", function ( f2_arg0, f2_arg1 )
			STREAMING.CancelRequest( f1_arg0._controllerIndex, STREAMING.ModelTypes.Animation, f1_arg0.id )
		end )
	end
end

