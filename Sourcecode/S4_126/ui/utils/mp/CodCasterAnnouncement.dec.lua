-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
CodcasterAnnouncement = LUI.Class()
local f0_local0 = 1000000
local f0_local1 = 10000
local f0_local2 = 1000
CodcasterAnnouncement.init = function ( f3_arg0, f3_arg1, f3_arg2, f3_arg3 )
	if f3_arg3 then
		f3_arg0.controllerIndex = f3_arg2
		f3_arg0:DecodeOmnvarData( f3_arg1 )
		f3_arg0:DecodeExtraData( f3_arg2 )
		local f3_local0
		if f3_arg0.displayTime == 0 then
			f3_local0 = 0
		else
			f3_local0 = f3_arg0.displayTime + 400
		end
		f3_arg0.displayTime = f3_local0
		f3_arg0.eventID = 0
		if CONDITIONS.IsHardpointGameType( f3_arg0 ) then
			f3_arg0.stringToDisplay = DataSources.inGame.MP.hardpointCalloutAreaString:GetValue( f3_arg2 )
		end
		f3_arg0.lines = 1
		return 
	else
		f3_arg0.controllerIndex = f3_arg2
		f3_arg0.announcementID = -1
		f3_arg0.eventID = -1
		f3_arg0.stringRef = ""
		f3_arg0.stringToDisplay = ""
		f3_arg0.priority = 0
		f3_arg0.displayTime = 0
		f3_arg0.extraData = -1
		f3_arg0.needTeamName = false
		f3_arg0.teamId = 0
		f3_arg0.teamName = ""
		f3_arg0.needPlayerName = false
		f3_arg0.playerId = -1
		f3_arg0.playerName = ""
		f3_arg0.lines = 0
		f3_arg0.needAreaName = false
		f3_arg0.areaName = ""
		f3_arg0.needKillInfo = false
		f3_arg0.killInfo = 0
		f3_arg0:DecodeOmnvarData( f3_arg1 )
		f3_arg0:DecodeExtraData( f3_arg2 )
	end
end

CodcasterAnnouncement.DecodeOmnvarData = function ( f2_arg0, f2_arg1 )
	f2_arg0.announcementID = f2_arg1
	local f2_local0 = f2_arg0.announcementID
	if f0_local0 <= f2_local0 then
		f2_arg0.extraData = math.modf( f2_local0 / f0_local0 ) * f0_local0
		f2_local0 = f2_local0 - f2_arg0.extraData
		f2_arg0.extraData = f2_arg0.extraData / f0_local0 - 1
	end
	if f0_local0 <= f2_local0 then
		f2_arg0.playerId = math.modf( f2_local0 / f0_local0 ) * f0_local0
		f2_local0 = f2_local0 - f2_arg0.playerId
		f2_arg0.playerId = f2_arg0.playerId / f0_local0 - 1
	end
	f2_arg0.teamId = math.modf( f2_local0 / f0_local0 )
	if f2_arg0.teamId ~= 0 then
		f2_local0 = f2_local0 % f0_local0
	end
	f2_arg0.eventId = f2_local0
end

CodcasterAnnouncement.DecodeExtraData = function ( f1_arg0, f1_arg1 )
	f1_arg0.stringRef = StringTable[0x2077452C28AB2FC]( CSV.mlgAnnouncementTable.file, f1_arg0.eventId, CSV.mlgAnnouncementTable.cols.stringRef )
	f1_arg0.priority = tonumber( StringTable[0x2077452C28AB2FC]( CSV.mlgAnnouncementTable.file, f1_arg0.eventId, CSV.mlgAnnouncementTable.cols.priority ) )
	f1_arg0.displayTime = tonumber( StringTable[0x2077452C28AB2FC]( CSV.mlgAnnouncementTable.file, f1_arg0.eventId, CSV.mlgAnnouncementTable.cols.displayTime ) ) * 1000
	f1_arg0.needPlayerName = StringTable[0x2077452C28AB2FC]( CSV.mlgAnnouncementTable.file, f1_arg0.eventId, CSV.mlgAnnouncementTable.cols.playerName ) == "Y"
	f1_arg0.lines = tonumber( StringTable[0x2077452C28AB2FC]( CSV.mlgAnnouncementTable.file, f1_arg0.eventId, CSV.mlgAnnouncementTable.cols.lines ) )
	f1_arg0.needAreaName = StringTable[0x2077452C28AB2FC]( CSV.mlgAnnouncementTable.file, f1_arg0.eventId, CSV.mlgAnnouncementTable.cols.areaName ) == "Y"
	f1_arg0.needKillInfo = StringTable[0x2077452C28AB2FC]( CSV.mlgAnnouncementTable.file, f1_arg0.eventId, CSV.mlgAnnouncementTable.cols.killInfo ) == "Y"
	f1_arg0.needTeamName = StringTable[0x2077452C28AB2FC]( CSV.mlgAnnouncementTable.file, f1_arg0.eventId, CSV.mlgAnnouncementTable.cols.teamName ) == "Y"
	f1_arg0.endEvent = {}
	f1_arg0.endEvent.omnvar = StringTable[0x2077452C28AB2FC]( CSV.mlgAnnouncementTable.file, f1_arg0.eventId, CSV.mlgAnnouncementTable.cols.endEventOmnvar )
	f1_arg0.endEvent.value = tonumber( StringTable[0x2077452C28AB2FC]( CSV.mlgAnnouncementTable.file, f1_arg0.eventId, CSV.mlgAnnouncementTable.cols.endEventValue ) )
	local f1_local0 = ""
	if f1_arg0.needAreaName then
		local f1_local1 = {
			nil,
			"A",
			"B",
			"C",
			"D"
		}
		f1_arg0.areaName = f1_local1[f1_arg0.extraData]
		f1_local0 = f1_arg0.areaName
	elseif f1_arg0.needKillInfo then
		f1_arg0.killInfo = f1_arg0.extraData
		f1_local0 = Engine[0xED84C33EC5F01EA]( f1_arg0.killInfo )
	end
	local f1_local1 = ""
	if f1_arg0.needTeamName then
		local f1_local2 = CODCASTER.GetTeamDataSource( f1_arg0.teamId )
		f1_arg0.teamName = f1_local2.shortName:GetValue( f1_arg1 )
		f1_local1 = f1_arg0.teamName
	end
	if f1_arg0.needAreaName or f1_arg0.needKillInfo then
		f1_arg0.stringToDisplay = Engine[0xED84C33EC5F01EA]( f1_arg0.stringRef, f1_local0, f1_local1 )
	else
		f1_arg0.stringToDisplay = Engine[0xED84C33EC5F01EA]( f1_arg0.stringRef, f1_local1 )
	end
	if f1_arg0.needPlayerName and 0 <= f1_arg0.playerId then
		f1_arg0.playerName = CODCASTER.GetPlayerName( f1_arg1, f1_arg0.playerId, false )
		if #(f1_arg0.playerName .. " - " .. f1_arg0.stringToDisplay) > CODCASTER.MAX_ANNOUNCEMENT_LENGTH then
			f1_arg0.playerName = string.sub( f1_arg0.playerName, 0, CODCASTER.SHORT_PLAYER_NAME_LENGTH ) .. Engine[0xED84C33EC5F01EA]( "MENU/ELLIPSIS" )
		end
		f1_arg0.stringToDisplay = f1_arg0.playerName .. " - " .. f1_arg0.stringToDisplay
	end
end

