-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:52
module( ..., package.seeall )
local f0_local0 = function ( f10_arg0, f10_arg1, f10_arg2 )
	f10_arg0._score = f10_arg1
	f10_arg0._winning = f10_arg2
	f10_arg0.Mask:SetRight( math.min( f10_arg1, f10_arg0._maxSegments ) * f10_arg0._segmentWidth )
end

local f0_local1 = function ( f7_arg0, f7_arg1, f7_arg2 )
	assert( f7_arg0.Stencil )
	assert( f7_arg0.Mask )
	assert( f7_arg0.Pips )
	assert( f7_arg0.BasePips )
	f7_arg0._score = nil
	f7_arg0._winning = nil
	f7_arg0._segmentWidth = 18 * _1080p
	local f7_local0
	if CONDITIONS.IsArenaGameType( f7_arg0 ) then
		f7_local0 = 10
	else
		f7_local0 = 6
	end
	f7_arg0._maxSegments = f7_local0
	f7_arg0.Pips:SetMask( f7_arg0.Mask )
	f7_arg0.BasePips:SetMask( f7_arg0.Stencil )
	f7_arg0.UpdateScore = f0_local0
	if CONDITIONS.IsArenaGameType( f7_arg0 ) then
		f7_arg0:SubscribeToModel( DataSources.inGame.HUD.loadoutNotify:GetModel( f7_arg1 ), function ( f8_arg0 )
			local f8_local0 = DataSources.inGame.MP.match.currentRound:GetValue( f7_arg0 )
			if f8_local0 ~= nil and 0 < f8_local0 and f7_arg0._score ~= nil then
				local f8_local1 = nil
				local f8_local2 = 0
				local f8_local3 = function ()
					if f8_arg0 < f8_arg0._score then
						local f9_local0 = f8_arg0._segmentWidth * f8_arg0
						f8_arg0.AnimPip:SetLeft( f9_local0 )
						f8_arg0.AnimPip:SetRight( f9_local0 + f8_arg0._segmentWidth )
						ACTIONS.AnimateSequence( f8_arg0, "Ping" )
					elseif f8_arg0 == f8_arg0._score and f8_arg0._winning ~= nil and f8_arg0._winning == true then
						ACTIONS.AnimateSequence( f8_arg0, "Wipe" )
					end
					f8_arg0 = f8_arg0 + 1
					local f9_local0 = f8_arg0:Wait( 210 )
					f9_local0.onComplete = f8_arg0
				end
				
				f8_local3()
			end
		end, true )
	end
end

function MatchStatusRounds( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 180 * _1080p, 0, 16 * _1080p )
	self.id = "MatchStatusRounds"
	self._animationSets = {}
	self._sequences = {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local BasePips = nil
	
	BasePips = LUI.UIImage.new()
	BasePips.id = "BasePips"
	BasePips:SetRGBFromTable( SWATCHES.HUD.HUDShadow, 0 )
	BasePips:SetAlpha( 0.6, 0 )
	BasePips:setImage( RegisterMaterial( "hud_matchstatus_round_pips" ), 0 )
	BasePips:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, 0, _1080p * 180, _1080p * -8, _1080p * 8 )
	self:addElement( BasePips )
	self.BasePips = BasePips
	
	local Pips = nil
	
	Pips = LUI.UIImage.new()
	Pips.id = "Pips"
	Pips:setImage( RegisterMaterial( "hud_matchstatus_round_pips" ), 0 )
	Pips:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, 0, _1080p * 180, _1080p * -8, _1080p * 8 )
	self:addElement( Pips )
	self.Pips = Pips
	
	local Mask = nil
	
	Mask = LUI.UIImage.new()
	Mask.id = "Mask"
	Mask:setImage( RegisterMaterial( "stencil_mask" ), 0 )
	Mask:SetAnchorsAndPosition( 0, 1, 0, 0, 0, 0, 0, 0 )
	self:addElement( Mask )
	self.Mask = Mask
	
	local AnimPip = nil
	
	AnimPip = LUI.UIImage.new()
	AnimPip.id = "AnimPip"
	AnimPip:SetAlpha( 0, 0 )
	AnimPip:setImage( RegisterMaterial( "hud_matchstatus_round_pip" ), 0 )
	AnimPip:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 18, 0, _1080p * 16 )
	self:addElement( AnimPip )
	self.AnimPip = AnimPip
	
	local AnimGradient = nil
	
	AnimGradient = LUI.UIImage.new()
	AnimGradient.id = "AnimGradient"
	AnimGradient:setImage( RegisterMaterial( "widg_gradient_right_to_left" ), 0 )
	AnimGradient:SetAnchorsAndPosition( 0, 1, 0, 0, 0, 0, 0, 0 )
	self:addElement( AnimGradient )
	self.AnimGradient = AnimGradient
	
	local Stencil = nil
	
	Stencil = LUI.UIImage.new()
	Stencil.id = "Stencil"
	Stencil:setImage( RegisterMaterial( "stencil_mask" ), 0 )
	self:addElement( Stencil )
	self.Stencil = Stencil
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	Pips:RegisterAnimationSequence( "Friendly", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.HUD.friendlyTeam
		}
	} )
	AnimPip:RegisterAnimationSequence( "Friendly", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.HUD.friendlyTeam
		}
	} )
	AnimGradient:RegisterAnimationSequence( "Friendly", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.HUD.friendlyTeam
		}
	} )
	self._sequences.Friendly = function ()
		menu:AnimateSequence( "Friendly" )
		menu:AnimateSequence( "Friendly" )
		menu:AnimateSequence( "Friendly" )
	end
	
	Pips:RegisterAnimationSequence( "Enemy", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.HUD.enemyTeam
		}
	} )
	AnimPip:RegisterAnimationSequence( "Enemy", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.HUD.enemyTeam
		}
	} )
	AnimGradient:RegisterAnimationSequence( "Enemy", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.HUD.enemyTeam
		}
	} )
	self._sequences.Enemy = function ()
		menu:AnimateSequence( "Enemy" )
		menu:AnimateSequence( "Enemy" )
		menu:AnimateSequence( "Enemy" )
	end
	
	AnimPip:RegisterAnimationSequence( "Ping", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Scale
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 4,
			duration = 200,
			property = TWEEN_PROPERTY.Scale
		},
		{
			value = 0,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.Ping = function ()
		menu:AnimateSequence( "Ping" )
	end
	
	AnimGradient:RegisterAnimationSequence( "Wipe", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Left
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Right
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 300,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 600,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 200,
			easing = LUI.EASING.inOutQuadratic
		},
		{
			value = 0,
			duration = 300,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.inOutQuadratic
		}
	} )
	self._sequences.Wipe = function ()
		menu:AnimateSequence( "Wipe" )
	end
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "MatchStatusRounds", MatchStatusRounds )
LockTable( _M )
