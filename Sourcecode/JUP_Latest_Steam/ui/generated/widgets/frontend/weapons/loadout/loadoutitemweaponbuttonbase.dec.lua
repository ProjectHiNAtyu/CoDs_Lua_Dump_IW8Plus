-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:04
module( ..., package.seeall )
local f0_local0 = 203
local f0_local1 = 130
local f0_local2 = function ( f22_arg0, f22_arg1, f22_arg2, f22_arg3 )
	local f22_local0 = WEAPON.GetBWImage( f22_arg2 )
	if f22_arg3 then
		local f22_local1 = WEAPON.GetVariantOverridenIcon( f22_arg3.weapon, f22_arg3.variantID )
		if f22_local1 and 0 < #f22_local1 then
			f22_local0 = f22_local1
		end
	end
	f22_arg0.WeaponIcon:setImage( RegisterMaterial( f22_local0 ) )
	f22_arg0.RenderWeaponIcon:setImage( RegisterMaterial( f22_local0 ) )
	if Engine[0x5B4AB50CF5D1DDD]( RegisterMaterial( f22_local0 ) ) == 1 then
		ACTIONS.AnimateSequence( f22_arg0, "Ratio1x1" )
	else
		ACTIONS.AnimateSequence( f22_arg0, "Ratio2x1" )
	end
end

local f0_local3 = function ( f21_arg0 )
	if f21_arg0.Attachments == nil or not WEAPON.CanDisplayWeaponAttachments( f21_arg0._weaponTable ) then
		return 
	end
	f21_arg0.Attachments:closeChildren()
	local f21_local0 = false
	local f21_local1 = f21_arg0._isDefault and f21_arg0._defaultLoadoutWeapon.attachments or ATTACHMENT.GetTableFromWeaponSetup( f21_arg0._weaponSetup )
	for f21_local2 = 1, #f21_local1, 1 do
		if f21_local1[f21_local2] ~= ATTACHMENT.none and ATTACHMENT.GetCategory( f21_local1[f21_local2] ) ~= ATTACHMENT.receiverCategory then
			local f21_local5 = 32
			if f21_local0 then
				local f21_local6 = 36
				local f21_local7 = 16
				local self = LUI.UIImage.new()
				self:setImage( RegisterMaterial( "icon_plus" ) )
				self:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -(f21_local7 / 2), f21_local7 / 2, -(f21_local7 / 2), f21_local7 / 2 )
				local f21_local9 = LUI.UIElement.new()
				f21_local9:SetAnchorsAndPosition( 0, 1, 0, 1, 0, f21_local6, 0, f21_local5 )
				f21_local9:addElement( self )
				f21_arg0.Attachments:addElement( f21_local9 )
			end
			local f21_local6 = RegisterMaterial( ATTACHMENT.GetImage( f21_local1[f21_local2] ) )
			local f21_local7 = LUI.UIImage.new()
			f21_local7:setImage( f21_local6 )
			f21_local7:SetAnchorsAndPosition( 0, 1, 0, 1, 0, f21_local5, 0, f21_local5 )
			f21_arg0.Attachments:addElement( f21_local7 )
			f21_local0 = true
		end
	end
	f21_arg0.Attachments:SetAlpha( 1 )
end

local f0_local4 = function ( f20_arg0 )
	f0_local0( f20_arg0 )
end

local f0_local5 = function ( f19_arg0 )
	if f19_arg0.Attachments then
		f19_arg0.Attachments:SetAlpha( 0 )
	end
end

local f0_local6 = function ( f18_arg0, f18_arg1 )
	local f18_local0 = f18_arg0._defaultLoadoutWeapon and f18_arg0._defaultLoadoutWeapon.ref or f18_arg0._weaponSetup.weapon:get()
	local f18_local1
	if f18_arg0._defaultLoadoutWeapon then
		f18_local1 = ""
	else
		f18_local1 = GUNSMITH.GetCustomModName( f18_arg0._weaponSetup.blueprintName:get() )
	end
	local f18_local2 = ""
	if 0 < #f18_local1 then
		f18_arg0._isBlueprint = true
		f18_arg0.BlueprintIcon:setImage( RegisterMaterial( "icon_loadout_armory_sub_saved" ) )
		f18_local2 = f18_local1
	elseif f18_arg0._weaponSetup and f18_arg0._weaponSetup.variantID:get() ~= WEAPON.baseVariant and not f18_arg0._defaultLoadoutWeapon then
		f18_arg0._isBlueprint = GUNSMITH.IsWeaponSetupBlueprintIntact( f18_arg0._weaponSetup )
		f18_arg0.BlueprintIcon:setImage( RegisterMaterial( "icon_blueprint" ) )
		f18_local2 = WEAPON.GetLootWeaponNameFromWeaponTable( f18_arg1, f18_arg0._weaponTable )
	else
		f18_arg0._isBlueprint = false
		local f18_local3 = ATTACHMENT.AppendDisplayNamesToWeaponName
		local f18_local4 = WEAPON.GetName( f18_local0 )
		local f18_local5 = f18_arg0._weaponTable
		if f18_local5 then
			f18_local5 = f18_arg0._weaponTable.attachments
		end
		f18_local2 = f18_local3( f18_local4, f18_local5 )
	end
	f18_arg0.BlueprintIcon:SetVisibility( f18_arg0._isBlueprint and LUI.Visibility.Visible or LUI.Visibility.Hidden )
	return f18_local2
end

local f0_local7 = function ( f17_arg0 )
	local f17_local0
	if not CONDITIONS.IsThirdGameMode() and Dvar[0x9E5BE3B4BBA4E0E]( 0x4F74CEB67644978 ) then
		if GUNSMITH.IsDisabled( f17_arg0._weaponTable.weapon ) then
			f17_local0 = CONDITIONS.InFrontend()
		else
			f17_local0 = true
		end
	else
		f17_local0 = false
	end
	return f17_local0
end

local f0_local8 = function ( f15_arg0, f15_arg1 )
	if f0_local0( f15_arg0 ) then
		f15_arg0.Button:SetSecondaryPrompt( 0xD5BA34F7CAE5B60, 0xC19D2A5DCF4877A, function ()
			if f15_arg0._forShowcase then
				return GUNSMITH.OpenShowcaseGunsmith( f15_arg0 )
			end
			local f16_local0 = LUI.FlowManager.GetScopedData( f15_arg0 )
			if CONDITIONS.IsMobileOrMobileSim() then
				f16_local0.selectedWeaponSlot = f15_arg0._weaponIndex
			end
			local f16_local1 = f16_local0.selectedWeaponSlot
			if not f16_local1 then
				f16_local1 = f15_arg0._weaponIndex
			end
			return GUNSMITH.OpenGunsmith( f15_arg0, f16_local0.selectedLoadoutIndex, f16_local1 )
		end )
		return true
	else
		return false
	end
end

local f0_local9 = function ( f6_arg0, f6_arg1, f6_arg2, f6_arg3, f6_arg4, f6_arg5 )
	f6_arg0._weaponIndex = f6_arg2
	f6_arg0._weaponSetup = f6_arg3
	f6_arg0._defaultLoadoutWeapon = f6_arg4
	local f6_local0
	if f6_arg5 then
		f6_local0 = f6_arg5
	else
		f6_local0 = f6_arg5.forShowcase
	end
	f6_arg0._forShowcase = f6_local0
	if f6_arg2 == WEAPON.PrimarySlot or f6_arg2 == WEAPON.SecondarySlot then
		ATTACHMENT.ValidateAttachmentsForWeaponSetup( f6_arg3 )
	end
	if f6_arg4 then
		f6_arg4.weapon = f6_arg4.ref
	end
	f6_local0 = f6_arg4
	f6_arg0._isDefault = f6_local0
	local f6_local1
	if f6_local0 and not f6_arg4 then
		f6_local1 = f6_arg4
	else
		f6_local1 = WEAPON.GenerateWeaponTable( f6_arg3 )
	end
	f6_arg0._weaponTable = f6_local1
	f6_local1 = PROGRESSION.GetWeaponDisplayLevel( f6_arg1, f6_arg0._weaponTable.weapon )
	local f6_local2 = PROGRESSION.GetMaxWeaponDisplayLevel( f6_arg0._weaponTable.weapon )
	f6_arg0.WeaponLevelProgress:Setup( f6_arg1, f6_arg0._weaponTable.weapon )
	f6_arg0.WeaponLevelProgress.Fill:SetRGB( SWATCHES[0xEAF2060ABE5269B][0x53B984BE8B3BE65] )
	f6_arg0.WeaponLevelProgress.Fill:SetAlpha( 0.7 )
	f6_arg0.WeaponLevelProgress.Gradient:SetRGB( SWATCHES[0xEAF2060ABE5269B][0x64467864DDD0654] )
	local f6_local3 = {
		subHeader = Engine[0xED84C33EC5F01EA]( 0x4A671D1E2689A57, f6_local1, f6_local2 )
	}
	local f6_local4
	if f6_arg4 then
		f6_local4 = f6_arg4.ref
		if not f6_local4 then
		
		else
			f6_arg0.selectedWeapon = f6_local4
			f6_arg0.WeaponIcon:SetAlpha( 1 )
			f6_arg0.WeaponIcon:SetVisibility( LUI.Visibility.Visible )
			if f6_arg0.RenderWeaponIcon then
				f6_arg0.RenderWeaponIcon:SetVisibility( LUI.Visibility.Hidden )
				if f6_arg0.Attachments then
					f6_arg0.Attachments:SetAlpha( 0 )
				end
			end
			f0_local0( f6_arg0, f6_arg1, f6_arg0.selectedWeapon, f6_arg0._weaponTable )
			if not WEAPON.IsWeaponNoneValue( f6_arg0.selectedWeapon ) then
				if CONDITIONS.IsRenderWeaponIconEnabled() then
					if f6_arg0.DynamicWeaponIcon ~= nil then
						f6_arg0.DynamicWeaponIcon:SetAlpha( 0 )
					end
					f6_local4 = WEAPON.GetFrontendLoadoutWeaponSlot( f6_arg2, f6_arg2 )
					local f6_local5 = WEAPON.GetWeaponModelName( f6_arg0.selectedWeapon, f6_arg0._weaponTable, {
						includeStickers = false,
						includeAttachments = true,
						includeCamos = false,
						isDefault = f6_local0,
						controllerIndex = f6_arg1
					} )
					local f6_local6 = CONDITIONS.IsLoadoutWeaponAttachmentHighlightEnabled() and WEAPON.GetAttachmentHighlights( f6_arg1, f6_local5 ) or {}
					if not Table.IsEmpty( f6_local6 ) then
						WEAPON.UpdateWeaponRenderIcon( f6_arg0, f6_arg1, {
							useElementVisibility = true,
							renderIconWidget = f6_arg0.RenderWeaponIcon,
							baseIconWidget = f6_arg0.WeaponIcon,
							slot = f6_local4,
							weaponModelName = f6_local5,
							attachmentHighlights = f6_local6,
							successCallback = f0_local0,
							failureCallback = f0_local0
						} )
					end
				else
					if f6_arg0.DynamicWeaponIcon then
						f6_local4 = WEAPON.IsBulletWeapon( WEAPON.GetWeaponClass( f6_arg0.selectedWeapon ) )
					end
					if not f6_local0 and f6_arg3 == nil then
						f6_local4 = false
					end
					if f6_local4 then
						local f6_local6 = DYN_ATTACHMENT.GetDynamicAttachmentsTable( WEAPON.GetWeaponModelName( f6_arg0.selectedWeapon, f6_arg0._weaponTable, {
							includeStickers = true,
							includeAttachments = true,
							keepAkimbo = true,
							includeCamos = true,
							showSWhiskeyMag = true,
							isDefault = f6_local0,
							controllerIndex = f6_arg1
						} ) )
						if f6_arg0.DynamicWeaponIcon ~= nil then
							f6_arg0.DynamicWeaponIcon:PerformUpdate( f6_arg1, {
								isInteractive = false,
								attachmentsData = f6_local6,
								weaponRef = f6_arg0.selectedWeapon
							} )
							f6_arg0.DynamicWeaponIcon:SetAlpha( 1 )
						end
						f6_arg0.WeaponIcon:SetVisibility( LUI.Visibility.Hidden )
					elseif f6_arg0.DynamicWeaponIcon then
						f6_arg0.DynamicWeaponIcon:SetAlpha( 0 )
					end
				end
				if f6_arg0.BaseWeaponName then
					if f6_arg0.selectedWeapon == WEAPON.RiotShieldRef then
						f6_arg0.BaseWeaponName:SetRight( f0_local0 )
					else
						f6_arg0.BaseWeaponName:SetRight( f0_local0 )
					end
				end
			else
				if not WEAPON.IsWeaponFists( f6_arg0.selectedWeapon ) then
					f6_arg0.WeaponIcon:SetVisibility( LUI.Visibility.Hidden )
				end
				f6_local3.subHeader = ""
				if CONDITIONS.IsDMZMatch() then
					f6_arg0.WeaponIcon:setImage( RegisterMaterial( BRLOOT.DEFAULT_IW_EMPTY_TEXTURE ) )
				end
			end
			if not CONDITIONS.IsMobileOrMobileSim() and f6_arg0.WeaponEffectIcons then
				f6_local4 = WEAPON.GetWeaponBlueprintTacticalBuildData( f6_arg0._weaponTable )
				local f6_local5 = nil
				if GUNSMITH.IsWeaponSetupBlueprintIntact( f6_arg3 ) then
					f6_local5 = f6_arg0._weaponTable.lootID
				end
				f6_arg0:SetupWeaponEffectIndicators( f6_local5, f6_local4 )
			end
			f6_local4 = {
				removeTextBacker = true,
				localizeSubHeader = false,
				removeEquipBanner = true,
				localizeHeader = false,
				imageSize = "Image2x1",
				buttonData = f6_local3,
				primaryActionText = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x1ED143947CE721B ) )
			}
			local f6_local5 = GUNSMITH.IsDisabled( f6_arg0._weaponTable.weapon, f6_arg0._weaponTable.variantID )
			if f6_arg4 then
				f6_local4.noAction = true
				f6_local4.doubleAction = nil
			end
			if f6_arg5.gunsmithButton then
				if not Dvar[0x9E5BE3B4BBA4E0E]( 0x4F74CEB67644978 ) or f6_local5 and not CONDITIONS.InFrontend() then
					f6_arg5.gunsmithButton:SetButtonDisabled( true )
					f6_arg5.gunsmithButton:RemoveToolTipData()
				else
					f6_arg5.gunsmithButton:SetButtonDisabled( false )
					f6_arg5.gunsmithButton:AddTooltipData( f6_arg1, {
						promptsData = {
							{
								kbmTooltipPromptOverload = "menu_action8",
								button_ref = "button_alt1",
								helper_text = Engine[0xED84C33EC5F01EA]( 0x1D42ED4C675E0D8 )
							}
						}
					} )
					if not f6_arg5.gunsmithButton.eventHandlersAdded then
						f6_arg5.gunsmithButton:registerEventHandler( "button_action", function ( element, event )
							if f6_arg0 and f6_arg0.forShowcase then
								return GUNSMITH.OpenShowcaseGunsmith( f6_arg0 )
							end
							local f14_local0 = LUI.FlowManager.GetScopedData( element )
							if CONDITIONS.IsMobileOrMobileSim() then
								f14_local0.selectedWeaponSlot = f6_arg0
							end
							return GUNSMITH.OpenGunsmith( f6_arg0, f14_local0.selectedLoadoutIndex, f14_local0.selectedWeaponSlot or f6_arg0 )
						end )
						f6_arg5.gunsmithButton.eventHandlersAdded = true
					end
				end
			end
			if f6_local0 then
				f6_arg0._isRestricted = false
			else
				local f6_local6 = Restrictions.IsWeaponRestricted( f6_arg0.selectedWeapon )
				if not f6_local6 then
					f6_local6 = LOADOUT.MATCHRULES.WeaponHasRestrictedAttachment( f6_arg3.attachmentSetup, f6_arg0.selectedWeapon )
				end
				f6_arg0._isRestricted = f6_local6
			end
			local f6_local6 = ACTIONS.AnimateSequence
			local f6_local7 = f6_arg0
			local f6_local8
			if f6_arg0._isRestricted then
				f6_local8 = "RestrictionOn"
			else
				f6_local8 = "RestrictionOff"
			end
			f6_local6( f6_local7, f6_local8 )
			f6_arg0.BlueprintIcon:SetVisibility( f6_arg0._isBlueprint and LUI.Visibility.Visible or LUI.Visibility.Hidden )
			if f6_arg0.IconBacker then
				f6_arg0.IconBacker:SetVisibility( f6_arg0._isBlueprint and LUI.Visibility.Visible or LUI.Visibility.Hidden )
			end
			f6_local6 = WEAPON.GetWeaponClassName( f6_arg0._weaponTable.weapon )
			local f6_local9 = f0_local0( f6_arg0 )
			f6_local8 = WEAPON.GetName( WEAPON.GetBlueprintBaseRefbyRef( f6_arg0._weaponTable.weapon ) )
			local f6_local10
			if f6_arg2 == WEAPON.PrimarySlot then
				f6_local10 = Engine[0xED84C33EC5F01EA]( 0xCB74A303611CCB3 )
				if not f6_local10 then
				
				else
					if CONDITIONS.IsWZ2() and f6_arg5.useWZ2ButtonStyle then
						f6_arg0.Button:SetupHighlight( f6_local4 )
						f6_arg0.Button:SetPrimaryPrompt( f6_local4.primaryActionText, false )
						if f6_arg0.WeaponLevelValue then
							f6_arg0.WeaponLevelValue:setText( Engine[0xED84C33EC5F01EA]( 0x4A671D1E2689A57, f6_local1, f6_local2 ) )
						end
						if f6_arg0.WeaponLevelProgress then
							f6_arg0.WeaponLevelProgress:Setup( f6_arg1, f6_arg0._weaponTable.weapon )
						end
						if f6_arg0.WeaponSlot then
							f6_arg0.WeaponSlot:setText( f6_local10 )
						end
						if f6_arg0.WeaponName then
							f6_arg0.WeaponName:setText( f6_local9 )
						end
					else
						f6_local3.header = f6_local9
						f6_arg0.WeaponSlot:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( f6_local6 ) ) )
						f6_arg0.Button:SetupButton( f6_local4 )
						if f6_arg0.WeaponLevelProgress then
							local f6_local11 = LAYOUT.GetTextWidth( f6_arg0.Button.SubHeader, f6_arg1 )
							local f6_local12 = 8
							local f6_local13 = f6_arg0.WeaponLevelProgress
							local f6_local14 = f6_local13
							f6_local13 = f6_local13.SetLeft
							local f6_local15 = f6_arg0.Button.SubHeader:GetAnchorsAndPosition()
							f6_local13( f6_local14, f6_local15.left + f6_local11 + f6_local12 )
						end
					end
					if f6_arg0.BaseWeaponName then
						if f6_arg0._weaponTable and f6_arg0._weaponTable.variantID and f6_arg0._weaponTable.variantID > WEAPON.baseVariant then
							f6_arg0.BaseWeaponName:setText( WEAPON.GetName( f6_arg0._defaultLoadoutWeapon and f6_arg0._defaultLoadoutWeapon.ref or f6_arg0._weaponSetup.weapon:get() ) )
							f6_arg0.BaseWeaponName:SetVisible( true )
						else
							f6_arg0.BaseWeaponName:SetVisible( false )
						end
					end
					if f6_arg0.AttachmentEquipPips then
						f6_arg0.AttachmentEquipPips:UpdatePipsWithAMP( GUNSMITH.GetEquipCounts( f6_arg0._weaponTable.weapon, f6_arg0._weaponTable, f6_arg0._weaponTable.attachments, {
							isDefault = f6_local0
						} ), WEAPON.CanDisplayWeaponAttachments( f6_arg0._weaponTable ) )
					end
					if not (not CONDITIONS.IsWZ2() or not f6_arg0.Button) or f6_arg0._forShowcase then
						local f6_local11 = false
						if f0_local0 then
							f6_local11 = f0_local0( f6_arg0, f6_arg1 )
						end
						if not f6_local11 then
							f6_arg0.Button:ClearSecondaryPrompt()
						end
					end
					if not f6_arg0._forShowcase and CoD.IsDMZMatch() and DMZ.IsLimitedInventoryEnabled() then
						local f6_local11 = #DMZ.GetInventoryItemsOfType( f6_arg1, LOOT.itemTypes.WEAPON ) <= 0
						f6_arg0:SetButtonDisabled( f6_local11 )
						f6_arg0.Button:SetButtonDisabled( f6_local11 )
					end
					if Dvar[0x9E5BE3B4BBA4E0E]( 0x721F4950DF33C2F ) and f6_arg3 then
						f6_arg0:registerEventHandler( "gamepad_button", function ( element, event )
							if event.button == "start" and element:isInFocus() then
								WEAPON.EquipModification( f6_arg0, WEAPON.GetRandomVariant( f6_arg0, f6_arg0 ), f6_arg0 )
							end
						end )
					end
					if Engine[0x12586A3F4FB490E]() and CoD.IsDMZMatch() and not f6_arg0._forShowcase then
						f6_arg0._weapon = f6_arg3.weapon:get()
						f6_arg0:AddGamepadEventCallback( "button_alt1", function ( f12_arg0, f12_arg1 )
							local f12_local0 = f12_arg1.controller or f6_arg0
							if f12_arg0:isInFocus() and f6_arg0.weapon:get() ~= "iw9_me_fists" then
								f6_arg0.weapon:set( "iw9_me_fists" )
								WEAPON.WipeWeaponSetup( f6_arg0 )
								f12_arg0:SetupButton( f12_local0, f6_arg0, f6_arg0 )
								local f12_local1 = LOADOUT.GetLoadoutSquadMember( f12_local0 )
								local f12_local2 = f12_local1.loadouts[0].weaponSetups[f6_arg0]
								ClientWeapon[0xA3A4ADD436F6EB0]( f6_arg0, WEAPON.GetWeaponModelNameFromPlayerData( f12_local2.weapon:get(), f12_local2, {
									includeCamos = false,
									includeAttachments = false,
									includeStickers = false,
									controllerIndex = f12_local0
								} ) )
								f12_arg0.Clear:SetAlpha( 0 )
							end
						end )
					end
					if LOADOUT.IsActiveArmoryEnabled( f6_arg1 ) and not f6_arg0._forShowcase then
						if WEAPON.IsRecommended( f6_arg0._weaponTable.weapon ) then
							ACTIONS.AnimateSequence( f6_arg0, "FeaturedWeapon" )
							ACTIONS.AnimateSequence( f6_arg0.ActiveArmoryTag, "Glow" )
							ACTIONS.AnimateSequence( f6_arg0.ActiveArmoryOverlay, "Glow" )
						else
							ACTIONS.AnimateSequence( f6_arg0, "OffFeaturedWeapon" )
							ACTIONS.AnimateSequence( f6_arg0.ActiveArmoryTag, "NoGlow" )
							ACTIONS.AnimateSequence( f6_arg0.ActiveArmoryOverlay, "NoGlow" )
						end
						f6_arg0._isArmoryActiveWeapon = WEAPON.IsRecommended( f6_arg0._weaponTable.weapon )
						f6_arg0._isLeavingActiveArmory = WEAPON.IsLeavingActiveArmory( f6_arg0._weaponTable.weapon )
						if not f6_arg0._activeArmoryEventHandlersAdded then
							f6_arg0:addEventHandler( "button_over", function ( f11_arg0, f11_arg1 )
								f11_arg0:dispatchEventToParent( {
									name = "update_active_armory_promo_visibility",
									controller = f11_arg1.controller,
									isActiveArmory = f11_arg0._isArmoryActiveWeapon
								} )
								f11_arg0.ActiveArmoryTag:PlayExpandIfPossible()
							end )
							f6_arg0:addEventHandler( "button_over_disable", function ( f10_arg0, f10_arg1 )
								f10_arg0:dispatchEventToParent( {
									name = "update_active_armory_promo_visibility",
									controller = f10_arg1.controller,
									isActiveArmory = f10_arg0._isArmoryActiveWeapon
								} )
								f10_arg0.ActiveArmoryTag:PlayExpandIfPossible()
							end )
							f6_arg0:addEventHandler( "button_up", function ( f9_arg0, f9_arg1 )
								f9_arg0.ActiveArmoryTag:PlayShrinkIfPossible()
							end )
							f6_arg0:addEventHandler( "button_disable", function ( f8_arg0, f8_arg1 )
								f8_arg0.ActiveArmoryTag:PlayShrinkIfPossible()
							end )
							f6_arg0:registerAndCallEventHandler( "menu_state_updated", function ( f7_arg0, f7_arg1 )
								local f7_local0 = f7_arg1.menuState
								if not f7_local0 then
									f7_local0 = LOADOUT.GetCurrentMenuState( f7_arg0 )
								end
								if f7_local0 == LOADOUT.MENU_STATE.loadoutSelect then
									f7_arg0.ActiveArmoryOverlay:SetVisible( false )
									f7_arg0:dispatchEventToParent( {
										name = "update_active_armory_promo_visibility",
										isActiveArmory = false,
										controller = f7_arg1.controller
									} )
								elseif f7_arg0._isArmoryActiveWeapon then
									f7_arg0.ActiveArmoryOverlay:SetVisible( true )
								end
							end )
							f6_arg0._activeArmoryEventHandlersAdded = true
						end
					end
				end
			end
			f6_local10 = Engine[0xED84C33EC5F01EA]( 0xEC8F813D58DEE57 )
		end
	end
	f6_local4 = f6_arg3.weapon:get()
end

local f0_local10 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0.SetupButton = f0_local0
	f3_arg0.GetWeaponName = f0_local0
	f3_arg0._weapon = nil
	f3_arg0._isBlueprint = false
	f3_arg0:addEventHandler( "button_over", function ( f5_arg0, f5_arg1 )
		ACTIONS.AnimateSequence( f3_arg0, "ButtonOver" )
		if f3_arg0.Clear then
			local f5_local0 = f3_arg0.Clear
			local f5_local1 = f5_local0
			f5_local0 = f5_local0.SetAlpha
			local f5_local2
			if f3_arg0._weapon ~= "iw9_me_fists" then
				f5_local2 = 1
			else
				f5_local2 = 0
			end
			f5_local0( f5_local1, f5_local2 )
		end
	end )
	f3_arg0:addEventHandler( "button_up", function ( f4_arg0, f4_arg1 )
		ACTIONS.AnimateSequence( f3_arg0, "ButtonUp" )
		if f3_arg0.Clear then
			f3_arg0.Clear:SetAlpha( 0 )
		end
	end )
	if not CONDITIONS.IsMobileOrMobileSim() then
		f3_arg0:setActionSFX( SOUND_SETS.loadout.weaponEdit )
	end
end

local f0_local11 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PostLoadShared = f0_local0
end

function LoadoutItemWeaponButtonBase( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = f1_local0.UIButton.new()
	f1_local1:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 336, 0, 204 )
	f1_local1.id = "LoadoutItemWeaponButtonBase"
	local f1_local2
	if f1_arg1 then
		f1_local2 = f1_arg1
	else
		f1_local2 = f1_arg1.controllerIndex
	end
	f0_local0( f1_local1, f1_local0.ValidateControllerIndex( f1_local1, f1_local2 ), f1_arg1 )
	return f1_local1
end

MenuBuilder.registerType( 0x5B7508D93B18D09, LoadoutItemWeaponButtonBase )
LockTable( _M )
