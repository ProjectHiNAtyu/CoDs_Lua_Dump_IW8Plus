-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:02
module( ..., package.seeall )
require( "ui.generated.widgets.frontend.mp.partymemberreadystatus" )
local f0_local0 = function ( f9_arg0, f9_arg1 )
	local f9_local0 = LUI.DataSourceInGlobalModel.new( Lobby.SquadMembersPath .. ".count" )
	local f9_local1 = math.min( f9_arg0.MemberGrid:GetNumChildren(), f9_local0:GetValue( f9_arg1 ) )
	for f9_local2 = 0, f9_local1 - 1, 1 do
		local f9_local5 = f9_arg0.MemberGrid:GetPositionForIndex( f9_local2, {
			relativePosition = false
		} )
		local f9_local6 = f9_arg0.MemberGrid:GetElementAtPosition( f9_local5.x, f9_local5.y )
		if f9_local6 then
			local f9_local7 = f9_local6:GetDataSource()
			if f9_local7 and f9_local7.memberIndex then
				local f9_local8 = f9_local7.memberIndex:GetValue( f9_arg1 )
				if f9_local8 ~= nil then
					f9_local6:SetReadyStatusAnim( Lobby[0xA05DEBBD53B802A]( f9_local8 ) )
				end
			end
		end
	end
end

local f0_local1 = function ( f7_arg0, f7_arg1, f7_arg2 )
	local f7_local0 = LUI.DataSourceInGlobalModel.new( f7_arg2 .. ".count" )
	f7_arg0:SubscribeToModel( f7_local0:GetModel( f7_arg1 ), function ()
		local f8_local0 = Lobby.GetLobbyMaxSquadSize()
		local f8_local1 = Lobby[0xB92DA1948EDB47D]( Lobby.PartyUIData.PLAYLIST_ID )
		if f8_local1 then
			local f8_local2 = PlaylistUtils.FindPlaylistDataSourceFromID( f7_arg0, f8_local1 )
			if f8_local2 then
				f8_local0 = f8_local2.maxPartySize:GetValue( f7_arg0 )
			end
		end
		local f8_local2 = math.min( f7_arg0:GetValue( f7_arg0 ), f8_local0 )
		if f8_local2 ~= nil then
			f7_arg0.MemberCount:setText( Engine[0xED84C33EC5F01EA]( 0x16EAF5DADA43C20, f8_local2, f8_local0 ) )
		end
	end )
end

local f0_local2 = function ( f6_arg0, f6_arg1, f6_arg2 )
	local f6_local0 = LUI.DataSourceFromList.new( LUI.DataSourceInGlobalModel.new( f6_arg2 .. ".count" ) )
	f6_local0.MakeDataSourceAtIndex = Lobby.GetLobbyMemberDataSourceAtIndex( f6_arg2 )
	f6_arg0.MemberGrid:SetGridDataSource( f6_local0 )
	f6_arg0.MemberGrid:RefreshContent()
end

local f0_local3 = function ( f5_arg0, f5_arg1, f5_arg2 )
	f0_local0( f5_arg0, f5_arg1, f5_arg2 )
	f0_local0( f5_arg0, f5_arg1, f5_arg2 )
end

local f0_local4 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0.Setup = f0_local0
	f3_arg0._readyStatusTimer = LUI.UITimer.new( {
		interval = -28,
		event = "check_party_ready_status"
	} )
	f3_arg0:addElement( f3_arg0._readyStatusTimer )
	f3_arg0:registerEventHandler( "check_party_ready_status", function ( element, event )
		f3_arg0( element, f3_arg0 )
		return true
	end )
end

function PartyMemberStatusInfo( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = MenuBuilder
	local f1_local2 = f1_local0.UIElement.new()
	f1_local2:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 450, 0, 300 )
	f1_local2.id = "PartyMemberStatusInfo"
	local f1_local3
	if f1_arg1 then
		f1_local3 = f1_arg1
	else
		f1_local3 = f1_arg1.controllerIndex
	end
	f1_local3 = f1_local0.ValidateControllerIndex( f1_local2, f1_local3 )
	local f1_local4 = nil
	f1_local4 = f1_local0.UIImage.new()
	f1_local4[0x8B72E07B55C3AC0] = "Backer"
	f1_local4:SetRGB( 0, 0 )
	f1_local4:SetAlpha( 0.5, 0 )
	f1_local4:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 450, 0, 300 )
	f1_local2:addElement( f1_local4 )
	f1_local2[0xF3FC81DFCEB7D35] = f1_local4
	local f1_local5 = nil
	f1_local5 = f1_local0.UIText.new()
	f1_local5[0x8B72E07B55C3AC0] = "MemberCount"
	f1_local5:SetRGB( SWATCHES[0x1F5A9ABAC207F9D][0xA506CB501761960], 0 )
	f1_local5:setText( "", 0 )
	f1_local5:SetFont( FONTS.GetFont( FONTS.PrimaryRegular.File ) )
	f1_local5:SetFontSize( 36 * _PT )
	f1_local5:SetMinFontSize( 18 * _PT )
	f1_local5:SetWordWrap( true )
	f1_local5:SetAlignment( f1_local0.Alignment.Left )
	f1_local5:SetAnchorsAndPosition( 0, 1, 0, 1, 10, 431, 14, 50 )
	f1_local2:addElement( f1_local5 )
	f1_local2[0x617F951BB5D9B82] = f1_local5
	local f1_local6 = nil
	f1_local6 = f1_local0.UIImage.new()
	f1_local6[0x8B72E07B55C3AC0] = "Line"
	f1_local6:SetRGB( SWATCHES[0x1F5A9ABAC207F9D][0x90E33AF977686D4], 0 )
	f1_local6:SetAnchorsAndPosition( 0, 1, 0, 1, 10, 450, 57, 59 )
	f1_local2:addElement( f1_local6 )
	f1_local2[0xF4BA5AD694F5907] = f1_local6
	local f1_local7 = nil
	f1_local7 = f1_local0.UIDataSourceGrid.new( {
		spacingX = 17,
		maxVisibleColumns = 1,
		maxVisibleRows = 4,
		spacingY = 26,
		columnWidth = 450,
		rowHeight = 36,
		controllerIndex = f1_local3,
		buildChild = function ()
			return f1_arg0.BuildRegisteredType( 0xF069D5D7D9CCE, {
				controllerIndex = f1_arg0
			} )
		end
	} )
	f1_local7[0x8B72E07B55C3AC0] = "MemberGrid"
	f1_local7:setUseStencil( true )
	f1_local7:SetAnchorsAndPosition( 0, 1, 0, 1, 10, 460, 74, 269 )
	f1_local2:addElement( f1_local7 )
	f1_local2[0xD5C19E5AB90AFB7] = f1_local7
	f0_local0( f1_local2, f1_local3, f1_arg1 )
	return f1_local2
end

MenuBuilder.registerType( 0xEE1A028D85C81EB, PartyMemberStatusInfo )
LockTable( _M )
