-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
module( ..., package.seeall )
require( "ui.generated.widgets.centeredtextbutton" )
require( "ui.generated.widgets.loadingspinner" )
local f0_local0 = function ( f8_arg0, f8_arg1, f8_arg2 )
	if not f8_arg2 then
		return 
	elseif f8_arg2.isJoiningWithCode then
		return 
	end
	Dvar[0x8EA06EEDB58D872]( 0x85EF1ED1D39D3A3, true )
	if f8_arg2.isWarzonePrivateMatch and CONDITIONS.IsWarzonePrivateMatchLobbyEnabled() then
		Game[0x631AB43BA10119]( "br" )
		PRIVATE_MATCH.SetupPrivateMatchGameType( Enum[0x3085A67688502CD][0x7C26AC6414E926F] )
	end
end

local f0_local1 = function ( f2_arg0, f2_arg1, f2_arg2 )
	local f2_local0 = nil
	if f2_arg2 and f2_arg2.isWarzonePrivateMatch then
		local f2_local1 = DataSources.frontEnd.lobby.lobbyJoinCode
		if not f2_arg2.isJoiningWithCode then
			MP_COMMON.StartPrivateMatchLobbyDsRequired( "big" )
		end
		f2_arg0._matchmakingSubscription = f2_arg0:SubscribeToModel( DataSources.frontEnd.lobby.isMatchmakingActive:GetModel( f2_arg1 ), function ()
			if not f2_arg0:GetValue( f2_arg0 ) then
				local f7_local0 = {
					title = Engine[0xED84C33EC5F01EA]( 0xD09E09A43DE9B80 ),
					message = Engine[0xED84C33EC5F01EA]( 0x8F9F8C5D0E5537A )
				}
				f2_arg0:UnsubscribeFromModel( f2_arg0._matchmakingSubscription )
				Lobby.LeaveCustomGameLobby()
				LUI.FlowManager.RequestLeaveMenu( f2_arg0, true, true )
				LUI.FlowManager.RequestPopupMenu( nil, "PopupOK", true, f2_arg0._controllerIndex, false, f7_local0, nil, false, true )
			end
		end, true )
		f2_arg0._lobbyJoinCodeSubscription = f2_arg0:SubscribeToModel( f2_local1:GetModel( f2_arg1 ), function ()
			local f6_local0 = f2_arg0:GetValue( f2_arg0 )
			if f6_local0 and f6_local0 ~= "" then
				if not f2_arg0.isJoiningWithCode then
					Lobby[0xE990C5BCA894ECC]( true )
					local f6_local1 = DataSources.frontEnd.lobby.privateRecipe:GetValue( f2_arg0 )
					MatchRules[0xE859FDA0484D3DE]( f6_local1 )
					MatchRules[0x9550565068844CB]( Lobby.MatchRulesMembers.RecipeName, f6_local1 )
				end
				f2_arg0:UnsubscribeFromModel( f2_arg0._lobbyJoinCodeSubscription )
				LUI.FlowManager.RequestAddMenu( "WarzonePrivateMatchLobbyChangeRoleMenu", true, f2_arg0, true, nil, true )
			end
		end )
		f2_arg0.CancelButton:addEventHandler( "button_action", function ( f5_arg0, f5_arg1 )
			Lobby.LeaveCustomGameLobby()
			MatchRules[0xE859FDA0484D3DE]()
			LUI.FlowManager.RequestLeaveMenu( f2_arg0, true, true )
			return true
		end )
	end
	local f2_local1 = DataSources.frontEnd.lobby.isMatchmakingActive
	MP_COMMON.StartPrivateMatchLobbyDsRequired( "mp" )
	f2_arg0._matchmakingSubscription = f2_arg0:SubscribeToModel( f2_local1:GetModel( f2_arg1 ), function ()
		local f3_local0 = f2_arg0:GetValue( f2_arg0 )
		if f3_local0 then
			f2_arg0:UnsubscribeFromModel( f2_arg0._matchmakingSubscription )
			LUI.FlowManager.RequestLeaveMenuByName( "CustomGameWaitMenu", true, false )
			Lobby.TryNavigateToLobby( function ()
				Lobby.OpenPrivateMatchLobby( {
					controller = f3_local0
				} )
			end, f2_arg0 )
		end
	end )
end

function CustomGameWaitMenu( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = MenuBuilder
	local f1_local2 = f1_local0.UIMenu.new()
	f1_local2.id = "CustomGameWaitMenu"
	local f1_local3
	if f1_arg1 then
		f1_local3 = f1_arg1
	else
		f1_local3 = f1_arg1.controllerIndex
	end
	f1_local3 = f1_local0.ValidateControllerIndex( f1_local2, f1_local3 )
	f0_local0( f1_local2, f1_local3, f1_arg1 )
	local f1_local4 = f1_local2
	local f1_local5 = nil
	f1_local5 = f1_local0.UIImage.new()
	f1_local5[0x8B72E07B55C3AC0] = "Background"
	ACTIONS.AspectRatioScaleAdjustment( f1_local2, f1_local5, LAYOUT.AspectRatioImageScalePct.FADEFRAME_STANDARD )
	f1_local5:setImage( RegisterMaterial( 0xE69A8944D26DBEF ), 0 )
	f1_local2:addElement( f1_local5 )
	f1_local2[0xD4176E7CA246EDD] = f1_local5
	local f1_local6 = nil
	f1_local6 = f1_local1.BuildRegisteredType( 0x7123E8F4A39B6AE, {
		controllerIndex = f1_local3
	} )
	f1_local6[0x8B72E07B55C3AC0] = "CancelButton"
	f1_local6[0xF3FC81DFCEB7D35]:SetRGB( SWATCHES[0xEAF2060ABE5269B][0x25ED0AC112DE3DF], 0 )
	f1_local6[0x9F7FCEC8FCB623D]:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xDF4B921D6190715 ) ), 0 )
	f1_local6:SetAnchorsAndPosition( 0, 1, 0, 1, 760, 1160, 900, 950 )
	f1_local2:addElement( f1_local6 )
	f1_local2[0x480B891C04F84E3] = f1_local6
	local f1_local7 = nil
	f1_local7 = f1_local0.UIText.new()
	f1_local7[0x8B72E07B55C3AC0] = "WaitingTextBox"
	f1_local7:setText( Engine[0xED84C33EC5F01EA]( 0x36073ED6E6C732C ), 0 )
	f1_local7:SetFont( FONTS.GetFont( FONTS.PrimaryRegular.File ) )
	f1_local7:SetFontSize( 28 * _PT )
	f1_local7:SetMinFontSize( 18 * _PT )
	f1_local7:SetWordWrap( false )
	f1_local7:SetAlignment( f1_local0.Alignment.Center )
	f1_local7:SetAnchorsAndPosition( 0, 1, 0, 1, 760, 1160, 620.03, 687.03 )
	f1_local2:addElement( f1_local7 )
	f1_local2[0x431B53575AF5F90] = f1_local7
	local f1_local8 = nil
	f1_local8 = f1_local1.BuildRegisteredType( 0xD195EC7860323B4, {
		controllerIndex = f1_local3
	} )
	f1_local8[0x8B72E07B55C3AC0] = "LoadingSpinner"
	f1_local8:SetAnchorsAndPosition( 0, 1, 0, 1, 780, 1140, 685.03, 733.03 )
	f1_local2:addElement( f1_local8 )
	f1_local2[0xD195EC7860323B4] = f1_local8
	f0_local0( f1_local2, f1_local3, f1_arg1 )
	return f1_local2
end

MenuBuilder.registerType( 0x2F1FA334F8EBF0A, CustomGameWaitMenu )
LockTable( _M )
