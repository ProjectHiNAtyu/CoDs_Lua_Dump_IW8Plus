-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
module( ..., package.seeall )
local f0_local0 = 5
local f0_local1 = 70
local f0_local2 = 30
local f0_local3 = 700
local f0_local4 = 1000
local f0_local5 = 21
local f0_local6 = 65000
local f0_local7 = function ( f16_arg0, f16_arg1 )
	f16_arg0.playerTeam = Game.DHEDEIHGF( Game.DBACJGFHDD( f16_arg1 ) )
end

local f0_local8 = function ( f15_arg0, f15_arg1 )
	if CONDITIONS.IsCoreMultiplayer() then
		local f15_local0 = Game.ECIFCJJJIA()
		local f15_local1 = Dvar.DHEEJCCJBH( "scr_localeID" )
		f0_local0( f15_arg0, f15_arg1 )
		local f15_local2, f15_local3 = nil
		if f15_arg0.playerTeam == Teams.axis then
			f15_local2 = "axis"
			f15_local3 = "LUA_MENU/THE_EAST"
		elseif f15_arg0.playerTeam == Teams.allies then
			f15_local2 = "allies"
			f15_local3 = "LUA_MENU/THE_WEST"
		else
			return 
		end
		if f15_local1 ~= "0" then
			f15_arg0.prefix = ToUpperCase( "MP_CHYRON/MP_BIGMAP_LOCALE_" .. f15_local1 .. "_" .. f15_local2 .. "_" )
		else
			f15_arg0.prefix = ToUpperCase( "MP_CHYRON/" .. f15_local0 .. "_" .. f15_local2 .. "_" )
		end
		local f15_local4 = f15_arg0.prefix .. "1"
		local f15_local5 = f15_arg0.prefix .. "2"
		local f15_local6 = f15_arg0.prefix .. "3"
		local f15_local7 = f15_arg0.prefix .. "4"
		if CONDITIONS.IsBRTDMMap() then
			f15_local4 = "MP_CHYRON/BR_OPERATION"
			f15_local6 = "MP_CHYRON/MP_VACANT_ALLIES_3"
			f15_local7 = "MP_CHYRON/BR_ARM4"
		end
		f15_arg0.seconds = f0_local0
		f15_arg0.ChyronLineStringTable = {}
		f15_arg0.ChyronLineStringTable = {
			f15_local3,
			f15_local4,
			f15_local5,
			f15_local6,
			f15_local7
		}
	end
end

local f0_local9 = function ( f14_arg0, f14_arg1 )
	for f14_local0 = 1, #f14_arg0.ChyronLineTable, 1 do
		local f14_local3 = f14_arg0.ChyronLineTable[f14_local0]
		if f14_local3 then
			f14_local3:SetAlpha( 0 )
			f14_local3:SetupChyronText( "" )
		end
	end
end

local f0_local10 = function ( f12_arg0, f12_arg1 )
	if CONDITIONS.IsCoreMultiplayer() then
		local f12_local0 = f12_arg0:Wait( f0_local0 )
		f12_local0.onComplete = function ()
			local f13_local0 = #f12_arg0.ChyronLineTable
			for f13_local1 = 1, f13_local0, 1 do
				local f13_local4 = f12_arg0.ChyronLineTable[f13_local1]
				if f13_local4 then
					f13_local4:closeTree()
					f13_local4 = nil
				end
			end
		end
		
	end
end

local f0_local11 = function ( f9_arg0, f9_arg1 )
	local f9_local0 = 1
	local f9_local1 = 1
	local f9_local2 = nil
	local f9_local3 = function ()
		local f10_local0 = f9_arg0.ChyronLineTable[f9_arg0]
		if f10_local0 == nil then
			
		else
			
		end
		local f10_local1 = FONTS.GetFont( FONTS.MainBold.File )
		local f10_local2 = f9_arg0 and f9_arg0 or f9_arg0
		local f10_local3 = nil
		if CONDITIONS.IsSingleplayer() or CONDITIONS.IsThirdGameMode() then
			f10_local3 = f9_arg0.ChyronLineIndexTable[f9_arg0]
		end
		local f10_local4 = nil
		if CONDITIONS.IsSingleplayer() then
			f10_local4 = StringTable.CBGJCDIHCE( CSV.levels.file, f9_arg0.levelRowIndex, f10_local3 )
		elseif CONDITIONS.IsCoreMultiplayer() then
			f10_local4 = f9_arg0.ChyronLineStringTable[f9_arg0]
		elseif CONDITIONS.IsThirdGameMode() then
			f10_local4 = StringTable.CBGJCDIHCE( CSV.cpMissionSelect.file, f9_arg0.levelRowIndex, f10_local3 )
		end
		local f10_local5
		if f10_local4 ~= nil and #f10_local4 ~= 0 then
			f10_local5 = false
		else
			f10_local5 = true
		end
		if not f10_local5 then
			f10_local0:SetAlpha( 1 )
			if CONDITIONS.IsBRTDMMap() and f9_arg0 == 3 then
				f10_local0:StartChyronEffect( f9_arg0, 0.8, Engine.CBBHFCGDIC( "MP_CHYRON/RNG_DATETIME", 96, 14, 11, 38 ), f10_local1, f10_local2 )
			else
				f10_local0:StartChyronEffect( f9_arg0, 0.8, Engine.CBBHFCGDIC( f10_local4 ), f10_local1, f10_local2 )
			end
		end
		local f10_local6
		if f10_local5 then
			f10_local6 = 1
		else
			f10_local6 = f9_arg0
		end
		local f10_local7 = f9_arg0:Wait( f10_local6 )
		f10_local7.onComplete = function ()
			if f10_local0 < f10_local0 then
				if not f10_local0 then
					f10_local0 = f10_local0 + 1
				end
				f10_local0 = f10_local0 + 1
				f10_local0()
			else
				f10_local0.ChyronLocked = false
				f10_local0( f10_local0, f10_local0 )
			end
		end
		
	end
	
	f9_local3()
end

local f0_local12 = function ( f2_arg0, f2_arg1, f2_arg2 )
	assert( f2_arg0.ChyronLine1 )
	assert( f2_arg0.ChyronLine2 )
	assert( f2_arg0.ChyronLine3 )
	assert( f2_arg0.ChyronLine4 )
	assert( f2_arg0.ChyronLine5 )
	f2_arg0.ChyronLocked = false
	f2_arg0.ChyronLineTable = {
		f2_arg0.ChyronLine1,
		f2_arg0.ChyronLine2,
		f2_arg0.ChyronLine3,
		f2_arg0.ChyronLine4,
		f2_arg0.ChyronLine5
	}
	if CONDITIONS.IsSingleplayer() then
		f2_arg0.ChyronLineIndexTable = {
			CSV.levels.cols.string,
			CSV.levels.cols.chyronLine2,
			CSV.levels.cols.chyronLine3,
			CSV.levels.cols.chyronLine4,
			CSV.levels.cols.chyronLine5
		}
		f2_arg0:registerOmnvarHandler( "ui_chyron_level_index", function ( f8_arg0, f8_arg1 )
			if not f8_arg0.ChyronLocked then
				local f8_local0 = StringTable.BJJBBCJGEJ( CSV.levels.file, CSV.levels.cols.ref, Game.BFEEGCHICA( f8_arg1.controller, "ui_chyron_level_index" ) - 1 )
				if 0 <= f8_local0 then
					f8_arg0.levelRowIndex = f8_local0
					f8_arg0.ChyronLocked = true
					f2_arg0( f8_arg0, f8_arg1.controller )
					f2_arg0( f8_arg0, f8_arg1.controller )
				end
			end
		end )
	else
		if CONDITIONS.IsCoreMultiplayer() then
			f0_local0( f2_arg0, f2_arg1 )
			f2_arg0:registerOmnvarHandler( "ui_in_infil", function ( f7_arg0, f7_arg1 )
				f2_arg0( f7_arg0, f2_arg0 )
				local f7_local0 = Game.BFEEGCHICA( f7_arg1.controller, "ui_in_infil" )
				f7_arg0.isInFilStart = f7_local0 == 1
				if f7_local0 == 1 and (f7_arg0.playerTeam == Teams.axis or f7_arg0.playerTeam == Teams.allies) then
					f7_arg0.ChyronLocked = true
					f2_arg0( f7_arg0, f2_arg0 )
					f2_arg0( f7_arg0, f7_arg1.controller )
					f2_arg0( f7_arg0, f7_arg1.controller )
				end
			end )
			local f2_local0 = function ( f6_arg0, f6_arg1 )
				if f6_arg0.isInFilStart and not CONDITIONS.IsBRGameType( f2_arg0 ) then
					f6_arg0.ChyronLine3:ChyronDecodeOff()
					if f6_arg0.seconds and f6_arg0.prefix then
						f6_arg0.seconds = f6_arg0.seconds + 1
						if CONDITIONS.IsBRTDMMap() then
							f6_arg0.ChyronLine3:SetupChyronText( Engine.CBBHFCGDIC( "MP_CHYRON/RNG_DATETIME", 96, 14, 11, 38 ) .. f6_arg0.seconds, 0 )
						else
							f6_arg0.ChyronLine3:SetupChyronText( Engine.CBBHFCGDIC( f6_arg0.prefix .. "2" ) .. f6_arg0.seconds, 0 )
						end
					end
				end
				return true
			end
			
			local f2_local1 = function ( f5_arg0, f5_arg1 )
				if f5_arg0.isInFilStart then
					local f5_local0 = Game.DHEDEIHGF( Game.DBACJGFHDD( f2_arg0 ) )
					if f5_local0 ~= f5_arg0.playerTeam then
						f5_arg0.playerTeam = f5_local0
						f2_arg0( f5_arg0, f5_arg1.controller )
						if f5_arg0.playerTeam == Teams.axis or f5_arg0.playerTeam == Teams.allies then
							f5_arg0.ChyronLocked = true
							f2_arg0( f5_arg0, f2_arg0 )
							f2_arg0( f5_arg0, f5_arg1.controller )
						else
							f5_arg0.ChyronLocked = false
						end
					end
				end
				return true
			end
			
			local f2_local2 = f2_arg0:Wait( f0_local0 )
			f2_local2.onComplete = function ()
				local self = LUI.UITimer.new( {
					interval = 1000,
					event = "tick"
				} )
				self.id = "UIChyronTextTimer"
				f2_arg0:addElement( self )
				f2_arg0:registerEventHandler( "tick", f2_arg0 )
				local f4_local1 = LUI.UITimer.new( {
					interval = -28,
					event = "teamTick"
				} )
				f4_local1.id = "UIChyronTeamTextTimer"
				f2_arg0:addElement( f4_local1 )
				f2_arg0:registerEventHandler( "teamTick", f2_arg0 )
			end
			
		end
		if CONDITIONS.IsThirdGameMode() then
			f2_arg0.ChyronLineIndexTable = {
				CSV.cpMissionSelect.cols.chyronLine1,
				CSV.cpMissionSelect.cols.chyronLine2,
				CSV.cpMissionSelect.cols.chyronLine3,
				CSV.cpMissionSelect.cols.chyronLine4,
				CSV.cpMissionSelect.cols.chyronLine5
			}
			f2_arg0:registerOmnvarHandler( "ui_chyron_mission_index", function ( f3_arg0, f3_arg1 )
				local f3_local0 = Game.BFEEGCHICA( f3_arg1.controller, "ui_chyron_mission_index" )
				if 0 < f3_local0 then
					f3_arg0.levelRowIndex = f3_local0 - 1
					f3_arg0.ChyronLocked = true
					f2_arg0( f3_arg0, f3_arg1.controller )
					f2_arg0( f3_arg0, f3_arg1.controller )
				end
			end )
		end
	end
end

function ChyronContainer( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 975 * _1080p, 0, 241 * _1080p )
	self.id = "ChyronContainer"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local ChyronLine5 = nil
	
	ChyronLine5 = MenuBuilder.BuildRegisteredType( "ChyronText", {
		controllerIndex = f1_local1
	} )
	ChyronLine5.id = "ChyronLine5"
	ChyronLine5.Text:SetRGBFromTable( SWATCHES.HUD.HUDMain, 0 )
	ChyronLine5.Text:setText( "OPERATION WATERSHED", 0 )
	ChyronLine5:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 740, _1080p * 170, _1080p * 206 )
	self:addElement( ChyronLine5 )
	self.ChyronLine5 = ChyronLine5
	
	local ChyronLine4 = nil
	
	ChyronLine4 = MenuBuilder.BuildRegisteredType( "ChyronText", {
		controllerIndex = f1_local1
	} )
	ChyronLine4.id = "ChyronLine4"
	ChyronLine4.Text:SetRGBFromTable( SWATCHES.HUD.HUDMain, 0 )
	ChyronLine4.Text:setText( "OPERATION WATERSHED", 0 )
	ChyronLine4:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 740, _1080p * 134, _1080p * 170 )
	self:addElement( ChyronLine4 )
	self.ChyronLine4 = ChyronLine4
	
	local ChyronLine3 = nil
	
	ChyronLine3 = MenuBuilder.BuildRegisteredType( "ChyronText", {
		controllerIndex = f1_local1
	} )
	ChyronLine3.id = "ChyronLine3"
	ChyronLine3.Text:SetRGBFromTable( SWATCHES.HUD.HUDMain, 0 )
	ChyronLine3.Text:setText( "OPERATION WATERSHED", 0 )
	ChyronLine3:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 740, _1080p * 98, _1080p * 134 )
	self:addElement( ChyronLine3 )
	self.ChyronLine3 = ChyronLine3
	
	local ChyronLine2 = nil
	
	ChyronLine2 = MenuBuilder.BuildRegisteredType( "ChyronText", {
		controllerIndex = f1_local1
	} )
	ChyronLine2.id = "ChyronLine2"
	ChyronLine2.Text:SetRGBFromTable( SWATCHES.HUD.HUDMain, 0 )
	ChyronLine2.Text:setText( "OPERATION WATERSHED", 0 )
	ChyronLine2:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 740, _1080p * 62, _1080p * 98 )
	self:addElement( ChyronLine2 )
	self.ChyronLine2 = ChyronLine2
	
	local ChyronLine1 = nil
	
	ChyronLine1 = MenuBuilder.BuildRegisteredType( "ChyronText", {
		controllerIndex = f1_local1
	} )
	ChyronLine1.id = "ChyronLine1"
	ChyronLine1.Text:SetRGBFromTable( SWATCHES.HUD.HUDMain, 0 )
	ChyronLine1.Text:setText( "OPERATION WATERSHED", 0 )
	ChyronLine1:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 725, 0, _1080p * 64 )
	self:addElement( ChyronLine1 )
	self.ChyronLine1 = ChyronLine1
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "ChyronContainer", ChyronContainer )
LockTable( _M )
