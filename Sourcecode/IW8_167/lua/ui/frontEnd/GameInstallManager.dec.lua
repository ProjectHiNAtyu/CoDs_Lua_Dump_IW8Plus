-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
module( ..., package.seeall )
LUI.FlowManager.RegisterFenceGroup( "GameInstallManager", {
	nil,
	"fenceSpinner"
} )
local f0_local0 = {
	STORE.OPTIONAL_PACK_1_NAME,
	STORE.OPTIONAL_PACK_2_NAME,
	STORE.OPTIONAL_PACK_3_NAME,
	STORE.OPTIONAL_PACK_4_NAME,
	STORE.OPTIONAL_PACK_5_NAME
}
local f0_local1 = {
	MW_GAME_PACKS = 0,
	T9_GAME_PACKS = 2,
	MW_TEXTURE_PACKS = 1
}
local f0_local2 = function ( f28_arg0, f28_arg1 )
	if 0 < f28_arg0._highResPackInstall then
		local f28_local0 = f0_local0[f28_arg0._highResPackInstall]
		for f28_local1 = 1, #f28_arg0._products, 1 do
			local f28_local4 = f28_arg0._products[f28_local1]
			if f28_local4.productId == f28_local0 then
				f28_arg0.DLCGrid:SetFocusedPosition( {
					x = 0,
					y = f28_local1 - 1
				}, true )
				f28_arg0:UpdateDetails( f28_local4, f28_local4.status == InGameStoreProductStatus.INSTALLED )
				return 
			end
		end
	else
		local f28_local0 = nil
		if f28_arg1 == MAIN_MENU.BladeKeys.SP then
			f28_local0 = "sp"
		elseif f28_arg1 == MAIN_MENU.BladeKeys.MP then
			f28_local0 = "mp"
		elseif f28_arg1 == MAIN_MENU.BladeKeys.CP then
			f28_local0 = "cp"
		end
		if f28_local0 then
			for f28_local1 = 1, #f28_arg0._products, 1 do
				local f28_local4 = f28_arg0._products[f28_local1]
				local f28_local5 = string.find( f28_local4.productId, f28_local0 )
				if (not (not f28_local5 or 0 >= f28_local5) or f28_local4.productId == STORE.DATA_PACK_1_NAME or f28_local4.productId == STORE.DATA_PACK_2_NAME and f28_arg1 ~= MAIN_MENU.BladeKeys.SP) and f28_local4.status == InGameStoreProductStatus.INSTALLED then
					local f28_local6 = f28_arg0.DLCGrid:GetElementAtPosition( 0, f28_local1 - 1 )
					f28_local6:SetIsDLCValue( true )
					ACTIONS.AnimateSequence( f28_local6, "Highlight" )
					f28_local4.isDLCForCurrentMode = true
				end
			end
		end
	end
end

local f0_local3 = function ( f27_arg0, f27_arg1 )
	local f27_local0 = "t9"
	local f27_local1 = nil
	local f27_local2 = "optional"
	local f27_local3 = nil
	local f27_local4 = {}
	local f27_local5 = nil
	local f27_local6 = Dvar.IBEGCHEFE( "LTNRMQNNKN" )
	local f27_local7 = "wz"
	local f27_local8 = nil
	for f27_local12, f27_local13 in ipairs( f27_arg0 ) do
		f27_local5 = false
		f27_local1 = string.find( f27_local13.productId, f27_local0 )
		f27_local8 = string.find( f27_local13.productId, f27_local7 )
		f27_local3 = string.find( f27_local13.productId, f27_local2 )
		if f27_local8 and f27_local6 == true then
			f27_local5 = false
		elseif f27_arg1 == f0_local0.T9_GAME_PACKS and f27_local1 ~= nil then
			f27_local5 = true
		elseif f27_arg1 == f0_local0.MW_TEXTURE_PACKS and f27_local3 ~= nil then
			f27_local5 = true
		elseif f27_arg1 == f0_local0.MW_GAME_PACKS and f27_local1 == nil and f27_local3 == nil then
			f27_local5 = true
		end
		if f27_local5 then
			table.insert( f27_local4, f27_local13 )
		end
	end
	return f27_local4
end

local f0_local4 = function ( f26_arg0, f26_arg1 )
	f26_arg0._products = InGameStore.GetCategoryProducts( f26_arg1, STORE.GameDLCCategory )
	if f26_arg0._products then
		f26_arg0._products = f0_local0( f26_arg0._products, f26_arg0._currentTabIndex )
		f26_arg0.DLCGrid:SetNumRows( #f26_arg0._products )
		f26_arg0.DLCGrid:RefreshContent()
		f26_arg0.DLCGrid:SetFocusedPosition( {
			x = 0,
			y = 0
		}, true )
		if f26_arg0._gameModeToHighlight or 0 < f26_arg0._highResPackInstall then
			f0_local0( f26_arg0, f26_arg0._gameModeToHighlight )
		end
		if f26_arg0._highResPackInstall == 0 and f26_arg0._products[1] then
			f26_arg0:UpdateDetails( f26_arg0._products[1], f26_arg0._products[1].status == InGameStoreProductStatus.INSTALLED )
		end
		ACTIONS.AnimateSequence( f26_arg0, "ShowDetails" )
	end
end

local f0_local5 = function ( f24_arg0, f24_arg1 )
	return function ()
		f24_arg0._currentTabIndex = f24_arg0.Tabs:GetCurrentTabIndex()
		f24_arg0:SetupDLCGrid( f24_arg0 )
	end
	
end

local f0_local6 = function ( f23_arg0, f23_arg1 )
	assert( f23_arg0.Tabs )
	local f23_local0 = {}
	table.insert( f23_local0, {
		hasDefaultFocus = true,
		disabled = false,
		name = Engine.CBBHFCGDIC( "LUA_MENU/MW_GAME_PACKS_DLC_TAB_NAME" ),
		focusFunction = f0_local0( f23_arg0, f23_arg1 )
	} )
	f23_arg0.Tabs:SetTabs( f23_local0 )
	f23_arg0.Tabs:SetAlignment( LUI.Alignment.Left )
end

local f0_local7 = function ( f21_arg0, f21_arg1 )
	InGameStore.FetchCatalog( f21_arg1, true, true )
	ACTIONS.AnimateSequence( f21_arg0, "ShowFetching" )
	
	local _refreshTimer = LUI.UITimer.new( {
		interval = -28,
		event = {
			name = "refresh_timer",
			controllerIndex = f21_arg1
		}
	} )
	_refreshTimer.id = "refreshTimer"
	f21_arg0:addElement( _refreshTimer )
	f21_arg0._refreshTimer = _refreshTimer
	
	f21_arg0:registerEventHandler( "refresh_timer", function ( element, event )
		local f22_local0 = InGameStore.GetCatalogStatus( event.controllerIndex )
		local f22_local1 = false
		if f22_local0 == InGameStoreCatalogStatus.READY then
			f21_arg0( f21_arg0, f21_arg0 )
			f22_local1 = true
		elseif f22_local0 == InGameStoreCatalogStatus.ERROR then
			f21_arg0.UnableToFetchContent:SetAlpha( 1 )
			f22_local1 = true
			local f22_local2 = {}
			if Engine.DBFCJBDJEC() then
				local f22_local3 = Engine.BIAFEJHHDD()
				if f22_local3 ~= nil then
					f22_local2.message = Engine.CBBHFCGDIC( "MP_FRONTEND_ONLY/STORE_UNAVAILABLE_ERROR", Engine.JCBDICCAH( f22_local3 ) )
					Engine.DCFIDJGACA()
				else
					f22_local2.message = Engine.CBBHFCGDIC( "MP_FRONTEND_ONLY/STORE_UNAVAILABLE_PC" )
				end
			else
				f22_local2.message = Engine.CBBHFCGDIC( "MP_FRONTEND_ONLY/STORE_UNAVAILABLE", Engine.JCBDICCAH( Engine.CIHDHDCIBE() ) )
			end
			LUI.FlowManager.RequestPopupMenu( nil, "generic_error_popup", false, nil, false, f22_local2, nil, false, true )
			Engine.DHCGHHBHCH()
			ACTIONS.LeaveMenu( f21_arg0 )
		end
		if f22_local1 then
			ACTIONS.AnimateSequence( element, "HideFetching" )
			element._refreshTimer:closeTree()
			element._refreshTimer = nil
		end
	end )
end

local f0_local8 = function ( f20_arg0 )
	local f20_local0 = "HideInstallProgressBar"
	if Engine.CIEGIACHAE() and f20_arg0._curProduct and f20_arg0._curProduct.productId then
		local f20_local1 = InGameStore.GetProduct( f20_arg0._controllerIndex, f20_arg0._curProduct.productId )
		if f20_local1 and f20_local1.status == InGameStoreProductStatus.DOWNLOADING then
			f20_local0 = "ShowInstallProgressBar"
			local f20_local2 = assert
			local f20_local3
			if f20_local1 then
				f20_local3 = f20_local1
			else
				f20_local3 = f20_local1.bytesDownloaded and f20_local1.bytesTotal
			end
			f20_local2( f20_local3 )
			if f20_local1.bytesDownloaded ~= 0 and f20_local1.bytesTotal ~= 0 then
				f20_arg0.InstallProgressBar:SetProgress( tonumber( f20_local1.bytesDownloaded / f20_local1.bytesTotal ), 0 )
			end
			f20_arg0.DownloadProgressDescription:setText( Engine.CBBHFCGDIC( "LUA_MENU/DLC_DOWNLOAD_PROGRESS_DESCRIPTION", Engine.JCBDICCAH( f20_local1.title ) ) )
		end
	end
	ACTIONS.AnimateSequence( f20_arg0, f20_local0 )
end

local f0_local9 = function ( f19_arg0, f19_arg1, f19_arg2 )
	f19_arg0._curProduct = f19_arg1
	f19_arg0.DLCHeader:setText( f19_arg1.title )
	f19_arg0.DLCDescription:setText( f19_arg1.contentLong )
	local f19_local0 = f19_arg0.DLCHeader:GetCurrentAnchorsAndPositions()
	f19_local0 = f19_local0.top
	local f19_local1 = LAYOUT.GetElementHeight( f19_arg0.DLCHeader )
	local f19_local2 = f19_arg0.DLCDescription:GetCurrentAnchorsAndPositions()
	f19_local2 = f19_local2.top
	local f19_local3 = LAYOUT.GetTextHeightWithWrapping( f19_arg0.DLCDescription, f19_arg0.DLCDescription:getText() )
	local f19_local4 = f19_local2 + f19_local3
	local f19_local5 = 100 * _1080p
	local f19_local6 = f19_local0 + f19_local1 + f19_local3 + f19_local5 + 50 * _1080p
	f19_arg0.DetailsBG:SetBottom( f19_local6, 200 )
	local f19_local7 = f19_arg1.status ~= InGameStoreProductStatus.NOT_OWNED
	local f19_local8 = f19_arg1.status == InGameStoreProductStatus.INSTALLED
	local f19_local9 = f19_arg0.InstalledTag
	local f19_local10 = f19_local9
	f19_local9 = f19_local9.SetAlpha
	local f19_local11
	if f19_local8 then
		f19_local11 = 1
	else
		f19_local11 = 0
	end
	local f19_local12
	if f19_local8 then
		f19_local12 = 200
	else
		f19_local12 = 0
	end
	f19_local9( f19_local10, f19_local11, f19_local12 )
	f19_local9 = LAYOUT.GetElementHeight( f19_arg0.InstalledTag )
	local f19_local13 = f19_local6 - f19_local5
	f19_arg0.InstalledTag:SetAnchorsAndPosition( 0, 1, 0, 1, 790 * _1080p, 940 * _1080p, f19_local13 + 10, f19_local13 + f19_local9 + 10, 200 )
	f19_arg0.DLCUninstallImage:SetBottom( f19_local6 - 5, 200 )
	f19_arg0.DLCUninstallImage:SetTop( f19_local6 - LAYOUT.GetElementHeight( f19_arg0.DLCUninstallImage ) - 5, 200 )
	f19_arg0.DLCUninstallMessage:SetBottom( f19_local6 - 5, 200 )
	f19_arg0.DLCUninstallMessage:SetTop( f19_local6 - LAYOUT.GetElementHeight( f19_arg0.DLCUninstallMessage ) - 5, 200 )
	if f19_arg1.status == InGameStoreProductStatus.NOT_OWNED then
		f19_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			side = "left",
			button_ref = "button_primary",
			priority = 1,
			helper_text = Engine.CBBHFCGDIC( "LUA_MENU/SELECT" )
		} )
	elseif f19_arg2 then
		if Engine.BAHIIBFDDG() then
			f19_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
				side = "left",
				button_ref = "button_primary",
				helper_text = nil,
				priority = 1
			} )
		else
			f19_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
				side = "left",
				button_ref = "button_primary",
				priority = 1,
				helper_text = Engine.CBBHFCGDIC( "LUA_MENU/UNINSTALL" )
			} )
		end
	else
		f19_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			side = "left",
			button_ref = "button_primary",
			priority = 1,
			helper_text = Engine.CBBHFCGDIC( "LUA_MENU/INSTALL" )
		} )
	end
	f19_local10 = f19_arg0.DLCUninstallImage
	f19_local12 = f19_local10
	f19_local10 = f19_local10.SetAlpha
	local f19_local14
	if f19_arg1.isDLCForCurrentMode then
		f19_local14 = 1
	else
		f19_local14 = 0
	end
	f19_local10( f19_local12, f19_local14 )
	f19_local10 = f19_arg0.DLCUninstallMessage
	f19_local12 = f19_local10
	f19_local10 = f19_local10.SetAlpha
	if f19_arg1.isDLCForCurrentMode then
		f19_local14 = 1
	else
		f19_local14 = 0
	end
	f19_local10( f19_local12, f19_local14 )
	f0_local0( f19_arg0 )
end

local f0_local10 = function ( f13_arg0, f13_arg1, f13_arg2 )
	assert( f13_arg0.MenuBackgroundImage )
	f13_arg0.UpdateDetails = f0_local0
	f13_arg0.SetupDLCGrid = f0_local0
	f13_arg0.FilterProductsByTitle = f0_local0
	f13_arg0.GetTabFocusFunction = f0_local0
	f13_arg0.SetupTabs = f0_local0
	f13_arg0._gameModeToHighlight = f13_arg2.gameMode
	f13_arg0._highResPackInstall = f13_arg2.highResPackInstall or 0
	f13_arg0._currentTabIndex = f0_local0.MW_GAME_PACKS
	f13_arg0._controllerIndex = f13_arg1
	f0_local0( f13_arg0, f13_arg1 )
	f0_local0( f13_arg0, f13_arg1 )
	f13_arg0.Tabs:SetAlpha( 0 )
	f13_arg0.DLCGrid:SetRefreshChild( function ( f18_arg0, f18_arg1, f18_arg2 )
		local f18_local0 = f13_arg0._products[f18_arg2 + 1]
		local f18_local1 = f18_local0.status ~= InGameStoreProductStatus.NOT_OWNED
		local f18_local2 = f18_arg0.InstallStatus
		local f18_local3 = f18_local2
		f18_local2 = f18_local2.SetAlpha
		local f18_local4
		if f18_local1 then
			f18_local4 = 1
		else
			f18_local4 = 0
		end
		f18_local2( f18_local3, f18_local4 )
		f18_arg0._menu = f13_arg0
		f18_arg0._product = f18_local0
		f18_arg0:SetCheckValue( f18_local0.status == InGameStoreProductStatus.INSTALLED )
		f18_arg0.DLCPackText:setText( f18_local0.title )
	end )
	f13_arg0.DLCGrid:SetNumRows( 0 )
	f13_arg0.DLCGrid:SetNumColumns( 1 )
	f13_arg0.MenuTitle:SetTitle( Engine.CBBHFCGDIC( "LUA_MENU/GENERAL_SUB_GAME_INSTALLS" ) )
	f13_arg0.InstalledTag.EventText:setText( ToUpperCase( Engine.CBBHFCGDIC( "MPUI/DLC_INSTALLED" ) ) )
	ACTIONS.AnimateSequence( f13_arg0, "HideDetails" )
	f13_arg0:addEventHandler( "dlc_install_state_change", function ( f17_arg0, f17_arg1 )
		if not f13_arg0._refreshTimer then
			f13_arg0( f13_arg0, f13_arg0 )
		end
	end )
	f13_arg0:addEventHandler( "gain_focus", function ( f16_arg0, f16_arg1 )
		return true
	end )
	if Engine.BAHIIBFDDG() then
		f13_arg0.Instructions:SetupBullets( f13_arg1, {
			{
				text = "OPTIONS/XBOX_ONE_UNINSTALL_DLC_1"
			},
			{
				text = "OPTIONS/XBOX_ONE_UNINSTALL_DLC_2"
			},
			{
				text = "OPTIONS/XBOX_ONE_UNINSTALL_DLC_3"
			},
			{
				text = "OPTIONS/XBOX_ONE_UNINSTALL_DLC_4"
			},
			{
				text = "OPTIONS/XBOX_ONE_UNINSTALL_DLC_5"
			},
			{
				text = "OPTIONS/XBOX_ONE_UNINSTALL_DLC_6"
			}
		} )
		local f13_local0, f13_local1, f13_local2, f13_local3 = f13_arg0.InstructionsHeader:getLocalRect()
		local f13_local4 = f13_local3 - f13_local1
		local f13_local5, f13_local6, f13_local7, f13_local8 = f13_arg0.Instructions:getLocalRect()
		local f13_local9, f13_local10, f13_local11, f13_local12 = f13_arg0.InstructionsBacker:getLocalRect()
		f13_arg0.InstructionsBacker:SetBottom( f13_local6 + f13_arg0.Instructions.ListHeight + f13_local1 - f13_local10 )
		f13_arg0.bindButton:addEventHandler( "button_alt1", function ( f15_arg0, f15_arg1 )
			Engine.DIJDDGHHFE()
		end )
	end
	local self = LUI.UITimer.new( {
		interval = 5000,
		event = "ingame_store_enumeration"
	} )
	self.id = "IngameStoreEnumeration"
	f13_arg0:addElement( self )
	f13_arg0:registerEventHandler( "ingame_store_enumeration", function ( element, event )
		InGameStore.EnumerateContent()
		f13_arg0( element )
	end )
end

function GameInstallManager( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "GameInstallManager"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	self.HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	self.HelperBar.id = "HelperBar"
	self.HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
	self.HelperBar:setPriority( 10 )
	self:addElement( self.HelperBar )
	local f1_local2 = self
	local MenuBackgroundImage = nil
	
	MenuBackgroundImage = MenuBuilder.BuildRegisteredType( "MenuBackgroundImage", {
		controllerIndex = f1_local1
	} )
	MenuBackgroundImage.id = "MenuBackgroundImage"
	MenuBackgroundImage:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
	self:addElement( MenuBackgroundImage )
	self.MenuBackgroundImage = MenuBackgroundImage
	
	local DetailsBG = nil
	
	DetailsBG = MenuBuilder.BuildRegisteredType( "DoubleNotchedBacker", {
		controllerIndex = f1_local1
	} )
	DetailsBG.id = "DetailsBG"
	DetailsBG:SetAlpha( 0.6, 0 )
	DetailsBG.Background:SetRGBFromTable( SWATCHES.genericMenu.blackBackground, 0 )
	DetailsBG.WZWipPromptBackground:setImage( RegisterMaterial( "ui_mp_wz_bkg_button_4" ), 0 )
	DetailsBG:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 755, _1080p * 1429, _1080p * 216, _1080p * 446 )
	self:addElement( DetailsBG )
	self.DetailsBG = DetailsBG
	
	local DLCDescription = nil
	
	DLCDescription = LUI.UIText.new()
	DLCDescription.id = "DLCDescription"
	DLCDescription:SetRGBFromTable( SWATCHES.genericMenu.bodycopy, 0 )
	DLCDescription:setText( "", 0 )
	DLCDescription:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	DLCDescription:SetLeading( 5 * _1080p, 0 )
	DLCDescription:SetAlignment( LUI.Alignment.Left )
	DLCDescription:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 790, _1080p * 1403, _1080p * 296, _1080p * 317 )
	self:addElement( DLCDescription )
	self.DLCDescription = DLCDescription
	
	local DLCHeader = nil
	
	DLCHeader = LUI.UIStyledText.new()
	DLCHeader.id = "DLCHeader"
	DLCHeader:SetRGBFromTable( SWATCHES.genericMenu.mainTitle, 0 )
	DLCHeader:setText( ToUpperCase( "" ), 0 )
	DLCHeader:SetFont( FONTS.GetFont( FONTS.MainBold.File ) )
	DLCHeader:SetWordWrap( false )
	DLCHeader:SetAlignment( LUI.Alignment.Left )
	DLCHeader:SetOptOutRightToLeftAlignmentFlip( true )
	DLCHeader:SetAutoScrollStyle( LUI.UIStyledText.AutoScrollStyle.ScrollH )
	DLCHeader:SetStartupDelay( 1000 )
	DLCHeader:SetLineHoldTime( 400 )
	DLCHeader:SetAnimMoveTime( 150 )
	DLCHeader:SetAnimMoveSpeed( 50 )
	DLCHeader:SetEndDelay( 1000 )
	DLCHeader:SetCrossfadeTime( 400 )
	DLCHeader:SetFadeInTime( 300 )
	DLCHeader:SetFadeOutTime( 300 )
	DLCHeader:SetMaxVisibleLines( 1 )
	DLCHeader:SetDecodeLetterLength( 30 )
	DLCHeader:SetDecodeMaxRandChars( 6 )
	DLCHeader:SetDecodeUpdatesPerLetter( 4 )
	DLCHeader:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 790, _1080p * 1403, _1080p * 246, _1080p * 296 )
	self:addElement( DLCHeader )
	self.DLCHeader = DLCHeader
	
	local DLCGrid = nil
	
	DLCGrid = LUI.UIGrid.new( {
		scrollingThresholdX = 1,
		buildArrowsLabel = true,
		maxVelocity = 5000,
		adjustSizeToContent = false,
		scrollingThresholdY = 1,
		wrapX = true,
		maxVisibleColumns = 1,
		maxVisibleRows = 10,
		wrapY = true,
		arrowsVerticalOffset = 0,
		springCoefficient = 400,
		controllerIndex = f1_local1,
		buildChild = function ()
			return MenuBuilder.BuildRegisteredType( "GameInstallButton", {
				controllerIndex = menu
			} )
		end,
		refreshChild = function ( f11_arg0, f11_arg1, f11_arg2 )
			
		end,
		spacingX = _1080p * 8,
		spacingY = _1080p * 8,
		columnWidth = _1080p * 600,
		rowHeight = _1080p * 50,
		horizontalAlignment = LUI.Alignment.Left,
		verticalAlignment = LUI.Alignment.Top
	} )
	DLCGrid.id = "DLCGrid"
	DLCGrid:setUseStencil( true )
	DLCGrid:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 130, _1080p * 730, _1080p * 216, _1080p * 788 )
	self:addElement( DLCGrid )
	self.DLCGrid = DLCGrid
	
	local VerticalScrollbar = nil
	
	VerticalScrollbar = MenuBuilder.BuildRegisteredType( "VerticalScrollbar", {
		controllerIndex = f1_local1
	} )
	VerticalScrollbar.id = "VerticalScrollbar"
	VerticalScrollbar:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 730, _1080p * 740, _1080p * 216, _1080p * 788 )
	self:addElement( VerticalScrollbar )
	self.VerticalScrollbar = VerticalScrollbar
	
	local FetchingMessage = nil
	
	FetchingMessage = LUI.UIStyledText.new()
	FetchingMessage.id = "FetchingMessage"
	FetchingMessage:SetRGBFromTable( SWATCHES.genericButton.description, 0 )
	FetchingMessage:SetAlpha( 0, 0 )
	FetchingMessage:setText( ToUpperCase( Engine.CBBHFCGDIC( "LUA_MENU/FETCHING_GAME_INSTALLS" ) ), 0 )
	FetchingMessage:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	FetchingMessage:SetWordWrap( false )
	FetchingMessage:SetAlignment( LUI.Alignment.Center )
	FetchingMessage:SetShadowRGBFromTable( SWATCHES.HUD.HUDShadow, 0 )
	FetchingMessage:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -300, _1080p * 300, _1080p * 171, _1080p * 191 )
	self:addElement( FetchingMessage )
	self.FetchingMessage = FetchingMessage
	
	local Spinner = nil
	
	Spinner = LUI.UIImage.new()
	Spinner.id = "Spinner"
	Spinner:SetAlpha( 0, 0 )
	Spinner:setImage( RegisterMaterial( "spinner_loading" ), 0 )
	Spinner:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -170, _1080p * 170, _1080p * 195, _1080p * 205 )
	self:addElement( Spinner )
	self.Spinner = Spinner
	
	local MenuTitle = nil
	
	MenuTitle = MenuBuilder.BuildRegisteredType( "MenuTitle", {
		controllerIndex = f1_local1
	} )
	MenuTitle.id = "MenuTitle"
	MenuTitle.MenuTitle:setText( Engine.CBBHFCGDIC( "LUA_MENU/GENERAL_SUB_GAME_INSTALLS" ), 0 )
	MenuTitle.Line:SetLeft( 0, 0 )
	MenuTitle:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1020, 0, _1080p * 100 )
	self:addElement( MenuTitle )
	self.MenuTitle = MenuTitle
	
	local InstalledTag = nil
	
	InstalledTag = MenuBuilder.BuildRegisteredType( "EventBanner", {
		controllerIndex = f1_local1
	} )
	InstalledTag.id = "InstalledTag"
	InstalledTag:SetAlpha( 0, 0 )
	InstalledTag:SetYRotation( 1, 0 )
	InstalledTag.Backer:SetRGBFromTable( SWATCHES.CAC.equipped, 0 )
	InstalledTag.Node:SetRGBFromTable( SWATCHES.CAC.equipped, 0 )
	InstalledTag:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 790, _1080p * 940, _1080p * 407, _1080p * 435 )
	self:addElement( InstalledTag )
	self.InstalledTag = InstalledTag
	
	local UnableToFetchContent = nil
	
	UnableToFetchContent = LUI.UIText.new()
	UnableToFetchContent.id = "UnableToFetchContent"
	UnableToFetchContent:SetRGBFromTable( SWATCHES.genericMenu.mainTitle, 0 )
	UnableToFetchContent:SetAlpha( 0, 0 )
	UnableToFetchContent:setText( Engine.CBBHFCGDIC( "LUA_MENU/UNABLE_TO_FETCH_CONTENT" ), 0 )
	UnableToFetchContent:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	UnableToFetchContent:SetAlignment( LUI.Alignment.Center )
	UnableToFetchContent:SetVerticalAlignment( LUI.Alignment.Center )
	UnableToFetchContent:SetAnchorsAndPosition( 0, 0, 0.5, 0.5, _1080p * 426, _1080p * -426, _1080p * -18, _1080p * 18 )
	self:addElement( UnableToFetchContent )
	self.UnableToFetchContent = UnableToFetchContent
	
	local DLCUninstallImage = nil
	
	DLCUninstallImage = LUI.UIImage.new()
	DLCUninstallImage.id = "DLCUninstallImage"
	DLCUninstallImage:SetRGBFromTable( SWATCHES.genericMenu.descText, 0 )
	DLCUninstallImage:SetAlpha( 0, 0 )
	DLCUninstallImage:setImage( RegisterMaterial( "uninstall_icon" ), 0 )
	DLCUninstallImage:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 790, _1080p * 825, _1080p * 407, _1080p * 442 )
	self:addElement( DLCUninstallImage )
	self.DLCUninstallImage = DLCUninstallImage
	
	local DLCUninstallMessage = nil
	
	DLCUninstallMessage = LUI.UIStyledText.new()
	DLCUninstallMessage.id = "DLCUninstallMessage"
	DLCUninstallMessage:SetRGBFromTable( SWATCHES.genericMenu.bodycopy, 0 )
	DLCUninstallMessage:SetAlpha( 0, 0 )
	DLCUninstallMessage:setText( Engine.CBBHFCGDIC( "LUA_MENU/UNINSTALL_DLC_DESC" ), 0 )
	DLCUninstallMessage:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	DLCUninstallMessage:SetWordWrap( false )
	DLCUninstallMessage:SetAlignment( LUI.Alignment.Left )
	DLCUninstallMessage:SetOptOutRightToLeftAlignmentFlip( true )
	DLCUninstallMessage:SetAutoScrollStyle( LUI.UIStyledText.AutoScrollStyle.ScrollH )
	DLCUninstallMessage:SetStartupDelay( 1000 )
	DLCUninstallMessage:SetLineHoldTime( 400 )
	DLCUninstallMessage:SetAnimMoveTime( 150 )
	DLCUninstallMessage:SetAnimMoveSpeed( 50 )
	DLCUninstallMessage:SetEndDelay( 1000 )
	DLCUninstallMessage:SetCrossfadeTime( 400 )
	DLCUninstallMessage:SetFadeInTime( 300 )
	DLCUninstallMessage:SetFadeOutTime( 300 )
	DLCUninstallMessage:SetMaxVisibleLines( 1 )
	DLCUninstallMessage:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 834, _1080p * 1403, _1080p * 412, _1080p * 436 )
	self:addElement( DLCUninstallMessage )
	self.DLCUninstallMessage = DLCUninstallMessage
	
	local f1_local16 = nil
	if Engine.BAHIIBFDDG() then
		f1_local16 = MenuBuilder.BuildRegisteredType( "DoubleNotchedBacker", {
			controllerIndex = f1_local1
		} )
		f1_local16.id = "InstructionsBacker"
		f1_local16:SetAlpha( 0.6, 0 )
		f1_local16.Background:SetRGBFromTable( SWATCHES.genericMenu.blackBackground, 0 )
		f1_local16.WZWipPromptBackground:setImage( RegisterMaterial( "ui_mp_wz_bkg_button_4" ), 0 )
		f1_local16:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 755, _1080p * 1429, _1080p * 506, _1080p * 980 )
		self:addElement( f1_local16 )
		self.InstructionsBacker = f1_local16
	end
	local f1_local17 = nil
	if Engine.BAHIIBFDDG() then
		f1_local17 = MenuBuilder.BuildRegisteredType( "BulletList", {
			fontSize = "24",
			bulletImage = "aar_arrow",
			spacing = 16,
			textColor = "SWATCHES.genericMenu.descText",
			numericSeparator = ".",
			separation = 6,
			listType = 2,
			bulletColor = nil,
			bulletScale = 1,
			controllerIndex = f1_local1
		} )
		f1_local17.id = "Instructions"
		f1_local17:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 790, _1080p * 1403, _1080p * 583, _1080p * 601 )
		self:addElement( f1_local17 )
		self.Instructions = f1_local17
	end
	local f1_local18 = nil
	if Engine.BAHIIBFDDG() then
		f1_local18 = LUI.UIStyledText.new()
		f1_local18.id = "InstructionsHeader"
		f1_local18:SetRGBFromTable( SWATCHES.genericMenu.mainTitle, 0 )
		f1_local18:setText( Engine.CBBHFCGDIC( "OPTIONS/XBOX_ONE_UNINSTALL_HEADER" ), 0 )
		f1_local18:SetFont( FONTS.GetFont( FONTS.MainBold.File ) )
		f1_local18:SetWordWrap( false )
		f1_local18:SetAlignment( LUI.Alignment.Left )
		f1_local18:SetOptOutRightToLeftAlignmentFlip( true )
		f1_local18:SetAutoScrollStyle( LUI.UIStyledText.AutoScrollStyle.ScrollH )
		f1_local18:SetStartupDelay( 1000 )
		f1_local18:SetLineHoldTime( 400 )
		f1_local18:SetAnimMoveTime( 150 )
		f1_local18:SetAnimMoveSpeed( 50 )
		f1_local18:SetEndDelay( 1000 )
		f1_local18:SetCrossfadeTime( 400 )
		f1_local18:SetFadeInTime( 300 )
		f1_local18:SetFadeOutTime( 300 )
		f1_local18:SetMaxVisibleLines( 1 )
		f1_local18:SetDecodeLetterLength( 30 )
		f1_local18:SetDecodeMaxRandChars( 6 )
		f1_local18:SetDecodeUpdatesPerLetter( 4 )
		f1_local18:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 790, _1080p * 1403, _1080p * 529, _1080p * 565 )
		self:addElement( f1_local18 )
		self.InstructionsHeader = f1_local18
	end
	local Tabs = nil
	
	Tabs = LUI.TabManager.new( {
		spacing = 4,
		wrap = true,
		tabHeight = _1080p * 52,
		buildTab = function ()
			return MenuBuilder.BuildRegisteredType( "SubMenuTab", {
				controllerIndex = menu
			} )
		end,
		controllerIndex = f1_local1
	} )
	Tabs.id = "Tabs"
	Tabs:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 90, _1080p * 996, _1080p * 108, _1080p * 160 )
	self:addElement( Tabs )
	self.Tabs = Tabs
	
	local DownloadProgressDescription = nil
	
	DownloadProgressDescription = LUI.UIText.new()
	DownloadProgressDescription.id = "DownloadProgressDescription"
	DownloadProgressDescription:SetRGBFromTable( SWATCHES.genericMenu.bodycopy, 0 )
	DownloadProgressDescription:setText( "", 0 )
	DownloadProgressDescription:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	DownloadProgressDescription:SetLeading( 5 * _1080p, 0 )
	DownloadProgressDescription:SetAlignment( LUI.Alignment.Left )
	DownloadProgressDescription:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 790, _1080p * 1403, _1080p * 377, _1080p * 397 )
	self:addElement( DownloadProgressDescription )
	self.DownloadProgressDescription = DownloadProgressDescription
	
	local InstallProgressBar = nil
	
	InstallProgressBar = MenuBuilder.BuildRegisteredType( "InstallProgressBar", {
		controllerIndex = f1_local1
	} )
	InstallProgressBar.id = "InstallProgressBar"
	InstallProgressBar.Fill:SetRGBFromTable( SWATCHES.CAC.equipped, 0 )
	InstallProgressBar:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 790, _1080p * 1403, _1080p * 345, _1080p * 364 )
	self:addElement( InstallProgressBar )
	self.InstallProgressBar = InstallProgressBar
	
	local f1_local22 = nil
	DownloadProgressDescription:RegisterAnimationSequence( "DefaultSequence", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	InstallProgressBar:RegisterAnimationSequence( "DefaultSequence", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.DefaultSequence = function ()
		menu:AnimateSequence( "DefaultSequence" )
		menu:AnimateSequence( "DefaultSequence" )
	end
	
	local f1_local23 = nil
	FetchingMessage:RegisterAnimationSequence( "ShowFetching", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	Spinner:RegisterAnimationSequence( "ShowFetching", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ShowFetching = function ()
		menu:AnimateSequence( "ShowFetching" )
		menu:AnimateSequence( "ShowFetching" )
	end
	
	local f1_local24 = nil
	FetchingMessage:RegisterAnimationSequence( "HideFetching", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	Spinner:RegisterAnimationSequence( "HideFetching", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.HideFetching = function ()
		menu:AnimateSequence( "HideFetching" )
		menu:AnimateSequence( "HideFetching" )
	end
	
	local f1_local25 = nil
	DetailsBG:RegisterAnimationSequence( "ShowDetails", {
		{
			value = 4.667261642226141E-62,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	DLCDescription:RegisterAnimationSequence( "ShowDetails", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	DLCHeader:RegisterAnimationSequence( "ShowDetails", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ShowDetails = function ()
		menu:AnimateSequence( "ShowDetails" )
		menu:AnimateSequence( "ShowDetails" )
		menu:AnimateSequence( "ShowDetails" )
	end
	
	local f1_local26 = nil
	DetailsBG:RegisterAnimationSequence( "HideDetails", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	DLCDescription:RegisterAnimationSequence( "HideDetails", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	DLCHeader:RegisterAnimationSequence( "HideDetails", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.HideDetails = function ()
		menu:AnimateSequence( "HideDetails" )
		menu:AnimateSequence( "HideDetails" )
		menu:AnimateSequence( "HideDetails" )
	end
	
	local f1_local27 = nil
	DownloadProgressDescription:RegisterAnimationSequence( "ShowInstallProgressBar", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	InstallProgressBar:RegisterAnimationSequence( "ShowInstallProgressBar", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ShowInstallProgressBar = function ()
		menu:AnimateSequence( "ShowInstallProgressBar" )
		menu:AnimateSequence( "ShowInstallProgressBar" )
	end
	
	local f1_local28 = nil
	DownloadProgressDescription:RegisterAnimationSequence( "HideInstallProgressBar", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	InstallProgressBar:RegisterAnimationSequence( "HideInstallProgressBar", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.HideInstallProgressBar = function ()
		menu:AnimateSequence( "HideInstallProgressBar" )
		menu:AnimateSequence( "HideInstallProgressBar" )
	end
	
	ACTIONS.AnimateSequence( self, "NoCustomModesHide" )
	local f1_local29 = LUI.UIScrollbar.new
	local f1_local30 = {
		direction = LUI.DIRECTION.vertical,
		eventListener = VerticalScrollbar,
		startCap = VerticalScrollbar.startCap,
		endCap = VerticalScrollbar.endCap,
		sliderArea = VerticalScrollbar.sliderArea
	}
	local f1_local31 = VerticalScrollbar.sliderArea
	if f1_local31 then
		f1_local31 = VerticalScrollbar.sliderArea.slider
	end
	f1_local30.slider = f1_local31
	f1_local31 = VerticalScrollbar.sliderArea
	if f1_local31 then
		f1_local31 = VerticalScrollbar.sliderArea.fixedSizeSlider
	end
	f1_local30.fixedSizeSlider = f1_local31
	DLCGrid:AddScrollbar( f1_local29( f1_local30 ) )
	self.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_secondary",
		helper_text = Engine.CBBHFCGDIC( "LUA_MENU/BACK" )
	} )
	
	local bindButton = LUI.UIBindButton.new()
	bindButton.id = "selfBindButton"
	self:addElement( bindButton )
	self.bindButton = bindButton
	
	self.bindButton:addEventHandler( "button_secondary", function ( f2_arg0, f2_arg1 )
		local f2_local0 = f2_arg1.controller or menu
		ACTIONS.LeaveMenu( menu )
	end )
	f0_local0( self, f1_local1, controller )
	ACTIONS.AnimateSequence( self, "DefaultSequence" )
	return self
end

MenuBuilder.registerType( "GameInstallManager", GameInstallManager )
LockTable( _M )
