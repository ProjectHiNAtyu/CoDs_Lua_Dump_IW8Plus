-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 02-09-2025 10:42
module( ..., package.seeall )
FenceOnlineServices = LUI.Class( LUI.Fence )
FenceOnlineServices.CODE_STATE = {
	queued_retry = 7,
	downloading = 2,
	registering = 6,
	inactive = 0,
	success = 3,
	queued = 5,
	requested = 1,
	failure = 4
}
FenceOnlineServices.REGISTRATION_STATE = {
	OTP_THROTTLED = 4,
	UPGRADING = 5,
	IDLE = 0,
	PENDING = 1,
	REGISTERING = 2,
	OTP_NEEDED = 3
}
FenceOnlineServices.AUTO_REGISTRATION_STATE = {
	SUCCESS = 2,
	IN_PROGRESS = 1,
	IDLE = 0,
	FAIL = 3
}
FenceOnlineServices.ERROR_CODES = {
	MPNotAllowed = 3,
	AccountIsInMaintenance = 17,
	onlineServices = 9,
	LoginQueueClosed = 14,
	max = 19,
	BattlenetConnected = 12,
	timeout = 8,
	fetchingNPData = 10,
	signedOutOfLive = 1,
	PSPlusRequired = 11,
	networkConnection = 6,
	connecting = 4,
	AccountIsBanned = 15,
	guestWithoutSponsor = 2,
	AccountIsTempBanned = 16,
	none = 0,
	TURequired = 7,
	AccountIsMPOrCPBanned = 18,
	WeGameOffline = 13,
	signedOutOfSteamOnline = 5
}
FenceOnlineServices.UPSELL_STATE = {
	done = 3,
	selling = 2,
	inactive = 1
}
FenceOnlineServices.CONTROLLER_FENCE_STATE = {
	pass = 2,
	block = 3,
	fail = 4,
	inactive = 1
}
FenceOnlineServices.init = function ( f39_arg0, f39_arg1 )
	LUI.Fence.init( f39_arg0 )
	f39_arg0._perController = {}
	f39_arg0._noPremium = f39_arg1
	f39_arg0._registrationState = AccountRegistration.BDAJEJBGF()
	local f39_local0 = CODACCOUNT.AccountRegistrationEnabled()
	if f39_local0 then
		f39_local0 = AccountRegistration.BAADBIECDG()
	end
	f39_arg0._autoRegistrationEnabled = f39_local0
	f39_arg0._autoRegistrationState = FenceOnlineServices.AUTO_REGISTRATION_STATE.IDLE
	for f39_local0 = 0, Engine.DCJGJDDEHE() - 1, 1 do
		f39_arg0._perController[f39_local0] = {
			isCancelling = false,
			onlineUpsell = FenceOnlineServices.UPSELL_STATE.inactive,
			fenceState = FenceOnlineServices.CONTROLLER_FENCE_STATE.inactive
		}
		Fences.BHICCDHGCG( f39_local0 )
	end
	if f39_arg1 then
		DebugPrint( "FenceOnlineServices.Init with No Premium" )
	else
		DebugPrint( "FenceOnlineServices.Init with Premium" )
	end
end

FenceOnlineServices.Start = function ( f38_arg0 )
	DebugPrint( "FenceOnlineServices.Start" )
end

FenceOnlineServices.Stop = function ( f37_arg0 )
	DebugPrint( "FenceOnlineServices.Stop" )
	if f37_arg0._openedWaitPopup then
		DebugPrint( "FenceOnlineServices.Stop closing: " .. f37_arg0._openedWaitPopup )
		LUI.FlowManager.RequestLeaveMenuByName( f37_arg0._openedWaitPopup, true )
		f37_arg0._openedWaitPopup = nil
	end
end

FenceOnlineServices.OpenOTPPopup = function ( f33_arg0 )
	if not f33_arg0._openedOTPPopup then
		local f33_local0 = {
			controllerIndex = f33_arg0._registeringController,
			onSuccess = function ()
				f33_arg0._openedOTPPopup = false
			end,
			onCancel = function ()
				f33_arg0._openedOTPPopup = false
			end,
			onError = function ()
				f33_arg0._openedOTPPopup = false
			end
		}
		if CODACCOUNT.AccountRegistrationEnabled() then
			LUI.FlowManager.RequestPopupMenu( nil, "CODAccountAuthentication", true, f33_arg0._registeringController, false, f33_local0, nil, true, true )
			f33_arg0._openedOTPPopup = true
		end
	end
end

FenceOnlineServices.OpenRegisteringPopup = function ( f29_arg0, f29_arg1 )
	if not f29_arg0._openedRegisteringPopup then
		local f29_local0 = {
			controllerIndex = f29_arg0._registeringController,
			isAnonymousAccount = f29_arg1,
			onSuccess = function ()
				f29_arg0._openedRegisteringPopup = false
				f29_arg0._registeringController = nil
				if f29_arg0 then
					f29_arg0._hasSeenGreeting = true
				else
					f29_arg0._openedWaitPopup = nil
				end
			end,
			onCancelRegister = function ()
				f29_arg0._openedRegisteringPopup = false
			end,
			onCancelFence = function ()
				f29_arg0._registrationCancelled = true
				f29_arg0._registeringController = nil
				f29_arg0._openedRegisteringPopup = false
			end
		}
		if CODACCOUNT.AccountRegistrationEnabled() then
			if not LUI.FlowManager.IsInStack( "CODAccountRegisterPopup" ) then
				LUI.FlowManager.RequestPopupMenu( nil, "CODAccountFencePopup", true, f29_arg0._registeringController, true, f29_local0, nil, true, true )
				f29_arg0._openedRegisteringPopup = true
			end
		else
			if not f29_arg1 then
				AccountRegistration.BAIIEEHFHA( f29_arg0._registeringController )
			end
			f29_local0.onSuccess()
		end
	end
end

FenceOnlineServices.OpenSummaryPopup = function ( f27_arg0 )
	if not f27_arg0._openedSummary and not LUI.FlowManager.IsInStack( "CODAccountRestartingPopup" ) then
		f27_arg0._openedSummary = true
		local f27_local0 = {
			controllerIndex = f27_arg0._summaryController,
			okButtonHandler = function ( f28_arg0, f28_arg1 )
				LUI.FlowManager.RequestLeaveMenuByName( "CODAccountSummary", true, true )
				local f28_local0 = true
				if f27_arg0._summaryController then
					f27_arg0:SetHasSeenCODAccount( f27_arg0._summaryController )
					if Engine.BECCFCBIAA( "hasEverSeen_CODAccountOTP", f27_arg0._summaryController ) ~= 1 then
						if not Dvar.IBEGCHEFE( "MPNNSLPPNP" ) and CODACCOUNT.AccountRegistrationEnabled() and not Engine.DBAEJAHFGJ( f27_arg0._summaryController ) then
							f28_local0 = false
							LUI.FlowManager.RequestPopupMenu( nil, "CODAccountAuthenticationAdv", true, f27_arg0._summaryController, false, {
								state = f27_arg0
							}, nil, true, true )
						else
							f27_arg0:SetHasSeenCODAccountOTP( f27_arg0._summaryController )
						end
					end
				end
				if f28_local0 then
					f27_arg0:SetHasSeenSummary()
				end
			end
		}
		if CODACCOUNT.AccountRegistrationEnabled() and not Engine.DBAEJAHFGJ( f27_arg0._summaryController ) then
			LUI.FlowManager.RequestPopupMenu( nil, "CODAccountSummary", true, f27_arg0._summaryController, false, f27_local0, nil, true, true )
		else
			f27_local0.okButtonHandler()
		end
	end
end

FenceOnlineServices.OpenConnectingPopup = function ( f25_arg0 )
	local f25_local0 = f25_arg0
	LUI.FlowManager.RequestPopupMenu( nil, "popup_connecting", false, nil, false, {
		displayWZWipSetup = true,
		disableIntro = false,
		onCancel = function ( f26_arg0, f26_arg1 )
			DebugPrint( "Cancelling FenceOnlineServices" )
			f25_arg0._perController[f26_arg1].isCancelling = true
		end
	}, nil, true, true )
	f25_arg0._openedWaitPopup = "popup_connecting"
end

FenceOnlineServices.OpenQueuedPopup = function ( f23_arg0 )
	local f23_local0 = f23_arg0
	LUI.FlowManager.RequestPopupMenu( nil, "popup_online_queue", false, nil, false, {
		onCancel = function ( f24_arg0, f24_arg1 )
			f23_arg0._perController[f24_arg1].isCancelling = true
		end
	}, nil, true, true )
	f23_arg0._openedWaitPopup = "popup_online_queue"
end

FenceOnlineServices.OpenQueuedRetryPopup = function ( f21_arg0 )
	local f21_local0 = f21_arg0
	LUI.FlowManager.RequestPopupMenu( nil, "popup_online_queue_retry", false, nil, false, {
		onCancel = function ( f22_arg0, f22_arg1 )
			f21_arg0._perController[f22_arg1].isCancelling = true
		end
	}, nil, true, true )
	f21_arg0._openedWaitPopup = "popup_online_queue_retry"
end

FenceOnlineServices.OnBackOut = function ( f20_arg0 )
	DebugPrint( "FenceOnlineServices.OnBackOut" )
	for f20_local0 = 0, Engine.DCJGJDDEHE() - 1, 1 do
		Fences.BHICCDHGCG( f20_local0 )
	end
	if not f20_arg0._noPremium then
		Dvar.DHEGHJJJHI( "LTSNLQNRKO", false )
		Engine.BGIDADECDJ()
		Engine.DAGFFDGFII( "xstopparty 0" )
		Engine.DAGFFDGFII( "xstopprivateparty 0" )
	end
end

FenceOnlineServices.PostFail = function ( f19_arg0 )
	if f19_arg0._state == LUI.Fence.STATE.fail then
		local f19_local0 = Engine.IJEBHJIJF()
		local f19_local1 = {
			controllerIndex = f19_local0,
			noPremium = f19_arg0._noPremium
		}
		if f19_arg0._errorCode then
			f19_local1.errorCode = f19_arg0._errorCode
			if CONDITIONS.IsXboxOne() and f19_arg0._errorCode == FenceOnlineServices.ERROR_CODES.MPNotAllowed then
				Engine.DBHBIHJDEC( f19_local0 )
			else
				LUI.FlowManager.RequestPopupMenu( nil, "popup_connecting_error", false, f19_local0, false, f19_local1, nil, false, false )
			end
			Fences.IABFCACDD( f19_local0 )
		else
			LUI.FlowManager.RequestPopupMenu( nil, "popup_connecting_cancelled", false, f19_local0, false, f19_local1, nil, false, false )
		end
	end
end

FenceOnlineServices.ShouldPS4FenceAllowUnderage = function ( f18_arg0, f18_arg1 )
	if f18_arg0._noPremium and Engine.CIEGIACHAE() and f18_arg1 == FenceOnlineServices.ERROR_CODES.MPNotAllowed then
		return true
	else
		return false
	end
end

FenceOnlineServices.ShouldBlockForRegistration = function ( f17_arg0, f17_arg1 )
	if (f17_arg0._registeringController ~= nil) or f17_arg1 == AccountRegistration.GGBDJFJD() then
		if f17_arg0._registeringController == nil and not f17_arg0._registrationCancelled then
			f17_arg0._registeringController = f17_arg1
		end
		return true
	else
		return false
	end
end

FenceOnlineServices.ShouldAbortRegistration = function ( f16_arg0, f16_arg1 )
	local f16_local0 = false
	local f16_local1 = nil
	if Engine.DBFCJBDJEC() then
		if Engine.BCCGADID() ~= BattleNetAuthState.ERROR then
			f16_local0 = f16_arg0._registrationCancelled
		else
			f16_local0 = true
		end
		f16_local1 = FenceOnlineServices.ERROR_CODES.BattlenetConnected
	else
		if Engine.BACCCIHGDG() then
			f16_local0 = f16_arg0._registrationCancelled
		else
			f16_local0 = true
		end
		f16_local1 = FenceOnlineServices.ERROR_CODES.networkConnection
	end
	if f16_local0 then
		AccountRegistration.DEEHFICICB( f16_arg1 )
		if f16_arg0._registrationCancelled then
			f16_arg0._registrationCancelled = false
		else
			f16_arg0._perController[f16_arg1].errorCode = f16_local1
		end
	end
	return f16_local0
end

FenceOnlineServices.ShouldBlockforSummary = function ( f15_arg0, f15_arg1 )
	if not Engine.BECCFCBIAA( "hasEverSeen_CODAccount", f15_arg1 ) and not Dvar.IBEGCHEFE( "unattended" ) then
		f15_arg0._summaryController = f15_arg1
		if f15_arg0._summaryController == f15_arg0._registeringController then
			f15_arg0._registeringController = nil
		end
		return true
	elseif Engine.BECCFCBIAA( "hasEverSeen_CODAccountOTP", f15_arg1 ) == 0 and not Dvar.IBEGCHEFE( "unattended" ) then
		f15_arg0._summaryController = f15_arg1
		if f15_arg0._summaryController == f15_arg0._registeringController then
			f15_arg0._registeringController = nil
		end
		return true
	else
		return false
	end
end

FenceOnlineServices.SetHasSeenCODAccount = function ( f14_arg0, f14_arg1 )
	Engine.DFJDIFJEGA( "hasEverSeen_CODAccount", 1, f14_arg1 )
	Engine.DAGFFDGFII( "updategamerprofile " .. f14_arg1 )
end

FenceOnlineServices.SetHasSeenCODAccountOTP = function ( f13_arg0, f13_arg1 )
	Engine.DFJDIFJEGA( "hasEverSeen_CODAccountOTP", 1, f13_arg1 )
	Engine.DAGFFDGFII( "updategamerprofile " .. f13_arg1 )
end

FenceOnlineServices.SetHasSeenSummary = function ( f12_arg0 )
	f12_arg0._openedSummary = false
	f12_arg0._summaryController = nil
end

FenceOnlineServices.UpdateState = function ( f10_arg0 )
	assert( f10_arg0._state ~= LUI.Fence.STATE.fail )
	local f10_local0, f10_local1 = nil
	f10_arg0._queued = false
	f10_arg0._queued_retry = false
	if f10_arg0._autoRegistrationEnabled and f10_arg0._autoRegistrationState <= FenceOnlineServices.AUTO_REGISTRATION_STATE.IN_PROGRESS then
		f10_arg0._autoRegistrationState = AccountRegistration.BEJFHBHICG()
	end
	for f10_local2 = 0, Engine.DCJGJDDEHE() - 1, 1 do
		if Engine.BBHAECABBD( f10_local2 ) then
			local f10_local5 = f10_arg0._perController[f10_local2].onlineUpsell == FenceOnlineServices.UPSELL_STATE.selling
			if Engine.EBCDFHECAC() then
				f10_arg0._perController[f10_local2].fenceState = FenceOnlineServices.CONTROLLER_FENCE_STATE.block
				break
			elseif f10_local5 then
				Fences.BHICCDHGCG( f10_local2 )
				f10_arg0._perController[f10_local2].onlineUpsell = FenceOnlineServices.UPSELL_STATE.done
			end
			f10_local0, f10_local1 = Fences.CCFEHFAFH( f10_local2 )
			if f10_local0 == FenceOnlineServices.CODE_STATE.inactive then
				Fences.BCIHDFJDEJ( f10_local2 )
				f10_local0, f10_local1 = Fences.CCFEHFAFH( f10_local2 )
			end
			if f10_local0 == FenceOnlineServices.CODE_STATE.failure then
				f10_arg0._perController[f10_local2].errorCode = f10_local1
				local f10_local6 = false
				local f10_local7 = false
				local f10_local8 = Engine.BEFACAIFDD()
				if f10_local8 then
					f10_local8 = f10_local1 == FenceOnlineServices.ERROR_CODES.MPNotAllowed
				end
				if (f10_local6 or f10_local7 or f10_local8) and f10_arg0._perController[f10_local2].onlineUpsell == FenceOnlineServices.UPSELL_STATE.inactive then
					if f10_arg0._noPremium then
					
					else
						f10_arg0._perController[f10_local2].onlineUpsell = FenceOnlineServices.UPSELL_STATE.selling
						f10_arg0._perController[f10_local2].fenceState = FenceOnlineServices.CONTROLLER_FENCE_STATE.block
						Engine.DBHBIHJDEC( f10_local2 )
						break
					end
					f10_arg0._perController[f10_local2].fenceState = FenceOnlineServices.CONTROLLER_FENCE_STATE.pass
				elseif FenceOnlineServices.ShouldPS4FenceAllowUnderage( f10_arg0, f10_local1 ) then
					f10_arg0._perController[f10_local2].fenceState = FenceOnlineServices.CONTROLLER_FENCE_STATE.pass
				else
					f10_arg0._perController[f10_local2].fenceState = FenceOnlineServices.CONTROLLER_FENCE_STATE.fail
				end
			elseif f10_local0 == FenceOnlineServices.CODE_STATE.queued then
				f10_arg0._perController[f10_local2].fenceState = FenceOnlineServices.CONTROLLER_FENCE_STATE.block
				f10_arg0._queued = true
			elseif f10_local0 == FenceOnlineServices.CODE_STATE.queued_retry then
				f10_arg0._perController[f10_local2].fenceState = FenceOnlineServices.CONTROLLER_FENCE_STATE.block
				f10_arg0._queued_retry = true
			elseif f10_local0 == FenceOnlineServices.CODE_STATE.registering then
				f10_arg0._registrationState = AccountRegistration.BDAJEJBGF()
				if FenceOnlineServices.ShouldBlockForRegistration( f10_arg0, f10_local2 ) then
					if FenceOnlineServices.ShouldAbortRegistration( f10_arg0, f10_local2 ) then
						f10_arg0._perController[f10_local2].fenceState = FenceOnlineServices.CONTROLLER_FENCE_STATE.fail
					else
						f10_arg0._perController[f10_local2].fenceState = FenceOnlineServices.CONTROLLER_FENCE_STATE.block
					end
				else
					f10_arg0._perController[f10_local2].fenceState = FenceOnlineServices.CONTROLLER_FENCE_STATE.pass
				end
			elseif f10_local0 ~= FenceOnlineServices.CODE_STATE.success then
				f10_arg0._perController[f10_local2].fenceState = FenceOnlineServices.CONTROLLER_FENCE_STATE.block
			elseif FenceOnlineServices.ShouldBlockforSummary( f10_arg0, f10_local2 ) then
				f10_arg0._perController[f10_local2].fenceState = FenceOnlineServices.CONTROLLER_FENCE_STATE.block
			else
				f10_arg0._perController[f10_local2].fenceState = FenceOnlineServices.CONTROLLER_FENCE_STATE.pass
			end
			if f10_arg0._perController[f10_local2].isCancelling then
				f10_arg0._perController[f10_local2].fenceState = FenceOnlineServices.CONTROLLER_FENCE_STATE.fail
				f10_arg0._perController[f10_local2].errorCode = nil
			end
		end
		f10_arg0._perController[f10_local2].onlineUpsell = FenceOnlineServices.UPSELL_STATE.inactive
		f10_arg0._perController[f10_local2].fenceState = FenceOnlineServices.CONTROLLER_FENCE_STATE.inactive
		f10_arg0._perController[f10_local2].isCancelling = false
		f10_arg0._perController[f10_local2].errorCode = nil
	end
	local f10_local2 = 0
	local f10_local3 = 0
	local f10_local4 = 0
	for f10_local9 = 0, Engine.DCJGJDDEHE() - 1, 1 do
		if f10_arg0._perController[f10_local9].fenceState == FenceOnlineServices.CONTROLLER_FENCE_STATE.pass then
			f10_local2 = f10_local2 + 1
		end
		if f10_arg0._perController[f10_local9].fenceState == FenceOnlineServices.CONTROLLER_FENCE_STATE.block then
			f10_local3 = f10_local3 + 1
		end
		if f10_arg0._perController[f10_local9].fenceState == FenceOnlineServices.CONTROLLER_FENCE_STATE.fail then
			f10_local4 = f10_local4 + 1
		end
	end
	assert( 0 < f10_local4 + f10_local3 + f10_local2, "No active local clients" )
	if 0 < f10_local4 then
		for f10_local9 = 0, Engine.DCJGJDDEHE() - 1, 1 do
			if f10_arg0._perController[f10_local9].fenceState == FenceOnlineServices.CONTROLLER_FENCE_STATE.fail then
				local f10_local7 = f10_arg0._perController[f10_local9].errorCode
				if 0 < f10_local2 and not Lobby.BJBBDIDHDA( f10_local9 ) then
					DebugPrint( "Controller #" .. tostring( f10_local9 ) .. " does not meet requirements for online play. Making client inactive." )
					f10_arg0._state = LUI.Fence.STATE.block
					Engine.CIHFHAIIHC( f10_local9 )
					if f10_local7 then
						assert( type( f10_local7 ) == "number" )
						local f10_local8 = assert
						local f10_local11
						if 0 >= f10_local7 or f10_local7 > FenceOnlineServices.ERROR_CODES.max then
							f10_local11 = false
						else
							f10_local11 = true
						end
						f10_local8( f10_local11 )
						LUI.FlowManager.RequestPopupMenu( nil, "popup_connecting_error", false, f10_local9, false, {
							errorCode = f10_local7,
							controllerIndex = f10_local9
						}, nil, false, true )
						Fences.IABFCACDD( f10_local9 )
					end
				end
				f10_arg0._errorCode = f10_local7
				f10_arg0._state = LUI.Fence.STATE.fail
			end
		end
	elseif 0 < f10_local3 then
		f10_arg0._state = LUI.Fence.STATE.block
	elseif 0 < f10_local2 then
		f10_arg0._state = LUI.Fence.STATE.pass
	else
		f10_arg0._state = LUI.Fence.STATE.block
	end
	if f10_arg0._state == LUI.Fence.STATE.block then
		local f10_local9 = function ( f11_arg0 )
			if f10_arg0._openedWaitPopup ~= nil and f10_arg0._openedWaitPopup ~= f11_arg0 then
				LUI.FlowManager.RequestLeaveMenuByName( f10_arg0._openedWaitPopup, true )
				f10_arg0._openedWaitPopup = nil
				return true
			elseif f10_arg0._openedWaitPopup == nil then
				return true
			else
				return false
			end
		end
		
		if f10_arg0._queued then
			if f10_local9( "popup_online_queue" ) then
				f10_arg0:OpenQueuedPopup()
			end
		elseif f10_arg0._queued_retry then
			if f10_local9( "popup_online_queue_retry" ) then
				f10_arg0:OpenQueuedRetryPopup()
			end
		elseif f10_local9( "popup_connecting" ) then
			f10_arg0:OpenConnectingPopup()
		end
		if f10_arg0._registeringController ~= nil then
			if not f10_arg0._autoRegistrationEnabled or f10_arg0._autoRegistrationState == FenceOnlineServices.AUTO_REGISTRATION_STATE.FAIL then
				if not f10_arg0._openedRegisteringPopup then
					f10_arg0:OpenRegisteringPopup()
				end
				f10_local10 = CONDITIONS.IsMenuInStack( "CODAccountLogin" )
				if f10_arg0._registrationState ~= FenceOnlineServices.REGISTRATION_STATE.OTP_NEEDED and f10_arg0._registrationState ~= FenceOnlineServices.REGISTRATION_STATE.OTP_THROTTLED then
					f10_local5 = false
				else
					local f10_local5 = true
				end
				if f10_local5 and f10_local10 and not f10_arg0._openedOTPPopup then
					f10_arg0:OpenOTPPopup()
					f10_arg0:SetHasSeenCODAccountOTP( f10_arg0._registeringController )
				end
				if f10_arg0._registrationState == FenceOnlineServices.REGISTRATION_STATE.REGISTERING and f10_local10 then
					if not f10_arg0._openedLoggingInPopup then
						LUI.FlowManager.RequestPopupMenu( unused, "CODAccountLoggingInPopup", true, f10_arg0._registeringController, false, {
							controllerIndex = f10_arg0._registeringController
						}, nil, true, true )
						f10_arg0._openedLoggingInPopup = true
					end
				elseif f10_arg0._openedLoggingInPopup then
					LUI.FlowManager.RequestLeaveMenuByName( "CODAccountLoggingInPopup", true, true )
					f10_arg0._openedLoggingInPopup = false
				end
			end
		elseif f10_arg0._summaryController ~= nil then
			if AccountRegistration ~= nil and not AccountRegistration.CEDFJJCJJD( f10_arg0._summaryController ) then
				f10_local10 = not Engine.DBAEJAHFGJ( f10_arg0._summaryController )
			else
				local f10_local10 = false
			end
			if f10_local10 and not f10_arg0._hasSeenGreeting then
				f10_arg0._registeringController = f10_arg0._summaryController
				f10_arg0:OpenRegisteringPopup( f10_local10 )
				return 
			end
			f10_arg0:OpenSummaryPopup()
		end
	end
end

function PopupConnecting( f9_arg0, f9_arg1 )
	local f9_local0 = assert
	local f9_local1
	if f9_arg1 then
		f9_local1 = f9_arg1
	else
		f9_local1 = f9_arg1.onCancel
	end
	f9_local0( f9_local1 )
	f9_local0 = {
		message = Engine.CBBHFCGDIC( "XBOXLIVE/POPUP_CONNECTION" ),
		cancel_func = f9_arg1.onCancel,
		displayWZWipSetup = f9_arg1.displayWZWipSetup
	}
	if Engine.CJJAFGIFAC( f9_arg1.controllerIndex ) then
		if not Engine.CFHBIHABCB( f9_arg1.controllerIndex ) then
			f9_local0.imageOverride = "logo_wz_shadow"
		end
	else
		f9_local0.imageOverride = "logo_cod_warzone_mw_shadow"
	end
	local f9_local2 = MenuBuilder.BuildRegisteredType( "live_dialog_text_box_with_cancel", f9_local0 )
	f9_local2.id = "popup_connecting"
	return f9_local2
end

function PopupQueuedRetry( f8_arg0, f8_arg1 )
	local f8_local0 = assert
	local f8_local1
	if f8_arg1 then
		f8_local1 = f8_arg1
	else
		f8_local1 = f8_arg1.onCancel
	end
	f8_local0( f8_local1 )
	local f8_local2 = MenuBuilder.BuildRegisteredType( "live_dialog_text_box_with_cancel", {
		message = Engine.CBBHFCGDIC( "LUA_MENU_MP/LOGIN_QUEUE_RETRY" ),
		cancel_func = f8_arg1.onCancel
	} )
	f8_local2.id = "popup_connecting"
	return f8_local2
end

function GetFullErrorMessage( f7_arg0, f7_arg1 )
	if f7_arg1 then
		return Engine.CBBHFCGDIC( f7_arg0 )
	else
		return f7_arg0
	end
end

function PopupConnectingError( f6_arg0, f6_arg1 )
	local f6_local0 = assert
	local f6_local1
	if f6_arg1 then
		f6_local1 = f6_arg1
	else
		f6_local1 = f6_arg1.errorCode
	end
	f6_local0( f6_local1 )
	f6_local0 = nil
	local f6_local2 = f6_arg1.errorCode
	f6_local1 = true
	if f6_local2 == FenceOnlineServices.ERROR_CODES.signedOutOfLive then
		f6_local0 = "XBOXLIVE/SIGNEDOUTOFLIVE"
	elseif f6_local2 == FenceOnlineServices.ERROR_CODES.guestWithoutSponsor then
		f6_local0 = "MPUI/GUEST_SPONSOR_ERROR"
	elseif f6_local2 == FenceOnlineServices.ERROR_CODES.MPNotAllowed then
		f6_local0 = "XBOXLIVE/MPNOTALLOWED"
	elseif f6_local2 == FenceOnlineServices.ERROR_CODES.connecting then
		assert( false, "Unexpected error code" )
	elseif f6_local2 == FenceOnlineServices.ERROR_CODES.signedOutOfSteamOnline then
		f6_local0 = "PLATFORM/STEAM_OFFLINE"
	elseif f6_local2 == FenceOnlineServices.ERROR_CODES.networkConnection then
		f6_local0 = "XBOXLIVE/NETCONNECTION"
	elseif f6_local2 == FenceOnlineServices.ERROR_CODES.PSPlusRequired then
		f6_local0 = "PLATFORM/PSPLUS_REQUIRED"
	elseif f6_local2 == FenceOnlineServices.ERROR_CODES.TURequired then
		f6_local0 = "PLATFORM/TU_REQUIRED"
	elseif f6_local2 == FenceOnlineServices.ERROR_CODES.timeout then
		f6_local0 = "PLATFORM/ONLINE_TIMEOUT"
	elseif f6_local2 == FenceOnlineServices.ERROR_CODES.onlineServices then
		f6_local0 = "ONLINE/ONLINE_SERVICES_ERROR"
	elseif f6_local2 == FenceOnlineServices.ERROR_CODES.BattlenetConnected then
		f6_local0 = "XBOXLIVE/BATTLENET_CONNECTION_FAILED"
	elseif f6_local2 == FenceOnlineServices.ERROR_CODES.LoginQueueClosed then
		f6_local0 = "ONLINE/LOGIN_QUEUE_CLOSED"
	elseif f6_local2 == FenceOnlineServices.ERROR_CODES.AccountIsBanned then
		f6_local0 = "EXE/ONLINE_PERM_BAN_PLAYER_NO_NAME"
	elseif f6_local2 == FenceOnlineServices.ERROR_CODES.AccountIsTempBanned then
		f6_local0 = "EXE/ONLINE_TEMP_BAN_PLAYER_NO_NAME"
	elseif f6_local2 == FenceOnlineServices.ERROR_CODES.AccountIsInMaintenance then
		f6_local0 = "ONLINE/ONLINE_SERVICES_ERROR"
	elseif f6_local2 == FenceOnlineServices.ERROR_CODES.AccountIsMPOrCPBanned then
		f6_local0 = Engine.CBBHFCGDIC( "EXE/COD_ONLINE_TEMP_BAN_PLAYER", Engine.JCBDICCAH( Engine.DHCFHGIABE( f6_arg1.controllerIndex ) ) ) .. "\n\n" .. Engine.JGAEIIIGD( f6_arg1.controllerIndex, 1 )
		f6_local1 = false
	end
	assert( f6_local0 )
	local f6_local3 = {
		darkenerAlpha = 1,
		controllerIndex = f6_arg1.controllerIndex,
		title = Engine.CBBHFCGDIC( "MENU/CONNECTION_FAILED" ),
		message = GetFullErrorMessage( f6_local0, f6_local1 )
	}
	local f6_local4 = not Engine.BFDACIJIAD( f6_arg1.controllerIndex )
	if f6_local4 then
		f6_local3.message = Engine.CBBHFCGDIC( "LUA_MENU/N_NEWLINE_M", Engine.JCBDICCAH( Engine.DHCFHGIABE( f6_arg1.controllerIndex ) ), f6_local3.message )
	end
	if f6_local4 or f6_arg1.noPremium then
		f6_local3.buttons = BOOT.GetOkayPopupButtons()
	else
		f6_local3.buttons = BOOT.GetRetryPopupButtons( f6_arg1.controllerIndex )
	end
	if Engine.CJJAFGIFAC( f6_arg1.controllerIndex ) then
		if not Engine.CFHBIHABCB( f6_arg1.controllerIndex ) then
			f6_local3.imageOverride = "logo_wz_shadow"
		end
	else
		f6_local3.imageOverride = "logo_cod_warzone_mw_shadow"
	end
	local f6_local5 = MenuBuilder.BuildRegisteredType( "GenericImagePopup", f6_local3 )
	f6_local5.id = "popup_connecting_error"
	return f6_local5
end

function PopupConnectingCancelled( f5_arg0, f5_arg1 )
	local f5_local0 = {
		controllerIndex = f5_arg1.controllerIndex,
		title = Engine.CBBHFCGDIC( "MENU/CONNECTION_FAILED" ),
		message = Engine.CBBHFCGDIC( "MENU/CONNECTION_CANCELLED" ),
		buttons = BOOT.GetRetryPopupButtons( f5_arg1.controllerIndex )
	}
	if Engine.CJJAFGIFAC( f5_arg1.controllerIndex ) then
		if not Engine.CFHBIHABCB( f5_arg1.controllerIndex ) then
			f5_local0.imageOverride = "logo_wz_shadow"
		end
	else
		f5_local0.imageOverride = "logo_cod_warzone_mw_shadow"
	end
	local f5_local1 = MenuBuilder.BuildRegisteredType( "GenericImagePopup", f5_local0 )
	f5_local1.id = "popup_connecting_cancelled"
	return f5_local1
end

function PopupOnlineQueue( f3_arg0, f3_arg1 )
	assert( f3_arg1 )
	local f3_local0 = {
		message = Engine.CBBHFCGDIC( "LUA_MENU_MP/SERVER_QUEUE" ),
		description = Engine.CBBHFCGDIC( "LUA_MENU_MP/SERVER_QUEUE_MSG" )
	}
	local f3_local1 = f3_arg1.controllerIndex
	if not f3_local1 then
		f3_local1 = Engine.IJEBHJIJF()
	end
	f3_local0.controllerIndex = f3_local1
	if Engine.CGABICJHAI() then
		f3_local0.buttons = {
			label = Engine.CBBHFCGDIC( "LUA_MENU/QUIT_DESKTOP" ),
			alignment = LUI.Alignment.Center,
			action = function ()
				Engine.DJEDDFJEIG()
			end
		}
	end
	f3_local1 = MenuBuilder.BuildRegisteredType( "FenceOnlineQueueDialogPopupWithDescription", f3_local0 )
	f3_local1.id = "popup_online_queue"
	return f3_local1
end

MenuBuilder.registerType( "popup_online_queue", PopupOnlineQueue )
MenuBuilder.registerType( "popup_online_queue_retry", PopupQueuedRetry )
MenuBuilder.registerType( "popup_connecting", PopupConnecting )
MenuBuilder.registerType( "popup_connecting_error", PopupConnectingError )
MenuBuilder.registerType( "popup_connecting_cancelled", PopupConnectingCancelled )
FenceOnlineServicesPremium = LUI.Class( FenceOnlineServices )
FenceOnlineServicesPremium.init = function ( f2_arg0 )
	FenceOnlineServicesPremium.super.init( f2_arg0, false )
end

LUI.Fence.Register( "onlineServices", FenceOnlineServicesPremium )
FenceOnlineServicesNoPremium = LUI.Class( FenceOnlineServices )
FenceOnlineServicesNoPremium.init = function ( f1_arg0 )
	FenceOnlineServicesNoPremium.super.init( f1_arg0, true )
end

LUI.Fence.Register( "onlineServicesNoPremium", FenceOnlineServicesNoPremium )
LockTable( _M )
