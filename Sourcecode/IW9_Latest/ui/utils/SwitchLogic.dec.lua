-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
SWITCH = SWITCH or {}
SWITCH.STATES = {
	ON = 2,
	OFF = 1
}
local f0_local0 = function ( f16_arg0, f16_arg1 )
	f16_arg0:_action( f16_arg1, f16_arg0._currentValue )
end

local f0_local1 = function ( f15_arg0, f15_arg1 )
	if CONDITIONS.IsMobileOrMobileSim() and f15_arg0._expanderIndex and not f15_arg0._alwaysExpanded then
		if f15_arg0._expanderIndex == f15_arg1 - 1 then
			f15_arg0:dispatchEventToParent( {
				name = "expander_expand"
			} )
		else
			f15_arg0:dispatchEventToParent( {
				name = "expander_collapse"
			} )
		end
	end
end

local f0_local2 = function ( f14_arg0, f14_arg1, f14_arg2, f14_arg3 )
	local f14_local0 = f14_arg0._currentValue
	f14_arg0._currentValue = f14_arg2
	f0_local0( f14_arg0, f14_arg0._currentValue )
	if not f14_arg0._applyable and f14_local0 ~= f14_arg2 then
		f14_arg0:_action( f14_arg1, f14_arg0._currentValue )
	end
	local f14_local1 = "switch"
	local f14_local2
	if f14_arg3 then
		f14_local2 = "_init"
	else
		f14_local2 = ""
	end
	f14_local1 = f14_local1 .. f14_local2
	if f14_arg0:isOn() then
		f14_local2 = "_on"
	else
		f14_local2 = "_off"
	end
	f14_arg0:processEvent( {
		name = f14_local1 .. f14_local2
	} )
	if f14_arg0._onRefresh then
		f14_arg0:_onRefresh( f14_arg1, f14_arg0._currentValue, true )
	end
end

local f0_local3 = function ( f13_arg0 )
	return f13_arg0:isOn() and SWITCH.STATES.OFF or SWITCH.STATES.ON
end

local f0_local4 = function ( f12_arg0, f12_arg1 )
	f12_arg0:_setValue( f12_arg1, f0_local0( f12_arg0 ) )
end

local f0_local5 = function ( f11_arg0 )
	return f11_arg0._currentValue == SWITCH.STATES.ON
end

local f0_local6 = function ( f10_arg0, f10_arg1 )
	f10_arg0._onDependencyParentRefresh = f10_arg1.onDependencyParentRefresh
	f10_arg0._defaultValueGetter = f10_arg1.defaultValueGetter
	f10_arg0._valueGetter = f10_arg1.valueGetter
	f10_arg0._onRefresh = f10_arg1.onRefresh
	f10_arg0._onReset = f10_arg1.onReset
	f10_arg0._action = f10_arg1.action
	f10_arg0._willAction = f10_arg1.willAction
	f10_arg0._applyable = f10_arg1.applyable
	f10_arg0._expanderIndex = f10_arg1.expanderIndex
	f10_arg0._alwaysExpanded = f10_arg1.alwaysExpanded
end

LUI.AddSwitchLogic = function ( f1_arg0, f1_arg1, f1_arg2 )
	assert( f1_arg2, "No table to copy" )
	f0_local0( f1_arg0, f1_arg2 )
	f1_arg0._setValue = f0_local0
	f1_arg0._switchState = f0_local0
	f1_arg0._applyValue = f0_local0
	f1_arg0.isOn = f0_local0
	f1_arg0._currentValue = f1_arg0._valueGetter( f1_arg1 )
	f1_arg0.SwitchButton:registerEventHandler( "button_action", function ( element, event )
		local f8_local0 = function ( f9_arg0, f9_arg1, f9_arg2 )
			f9_arg0:_switchState( f9_arg1 )
		end
		
		local f8_local1 = element:getParent()
		if f8_local1._willAction and not f8_local1:_willAction( f1_arg0, f8_local1._currentValue, f1_arg0( f8_local1 ), f8_local0 ) then
			return true
		else
			f8_local0( f8_local1, event.controllerIndex or f1_arg0 )
			return true
		end
	end )
	f1_arg0:registerEventHandler( "refresh_values", function ( element, event )
		element:_setValue( event.controllerIndex or f1_arg0, element._currentValue )
	end )
	f1_arg0:registerEventHandler( "reset_value", function ( element, event )
		if element._defaultValueGetter then
			element:_setValue( event.controllerIndex or f1_arg0, element._defaultValueGetter( event.controllerIndex or f1_arg0 ) )
			element:_onReset( event.controllerIndex )
		end
	end )
	f1_arg0:registerEventHandler( "apply_value", function ( element, event )
		if element._applyable then
			element:_applyValue( f1_arg0 )
		end
	end )
	f1_arg0:registerEventHandler( "parent_value_changed", function ( element, event )
		if element._onDependencyParentRefresh then
			local f4_local0 = element:_onDependencyParentRefresh( event.controllerIndex or f1_arg0, element._currentValue, event.parentId, event.parentValue )
			if f4_local0 == true then
				element:_onRefresh( event.controllerIndex, element._currentValue )
			elseif f4_local0 ~= nil then
				element:_setValue( event.controllerIndex or f1_arg0, f4_local0 )
			end
		end
	end )
	f1_arg0:registerEventHandler( "refresh_option", function ( element, event )
		if element._onRefresh then
			element:_onRefresh( event.controllerIndex, element._currentValue )
		end
		if element._expanderIndex then
			if element._expanderIndex == element._currentValue - 1 then
				element:dispatchEventToParent( {
					name = "expander_expand"
				} )
			else
				element:dispatchEventToParent( {
					name = "expander_collapse"
				} )
			end
		end
	end )
	f1_arg0:registerEventHandler( "seek_value", function ( element, event )
		if element._valueGetter then
			element:_setValue( event.controllerIndex or f1_arg0, element._valueGetter( f1_arg0 ), true )
		end
	end )
	if f1_arg0._valueGetter then
		f1_arg0:_setValue( f1_arg1, f1_arg0._valueGetter( f1_arg1 ), true )
	end
	if Engine[0x84287BE93239E99]() then
		f1_arg0:SetHandleHold( true )
	end
end

