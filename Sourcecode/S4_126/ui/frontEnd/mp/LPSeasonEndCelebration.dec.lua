-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
module( ..., package.seeall )
require( "ui.frontEnd.mp.LPSeasonEndRank" )
require( "ui.frontEnd.mp.LPSeasonEndReward" )
require( "ui.widgets.GenericHoldButton" )
local f0_local0 = function ( f9_arg0, f9_arg1, f9_arg2 )
	local f9_local0 = LUI.DataSourceInGlobalModel.new( LEAGUE_PLAY.ROOT_MODEL_PATH .. "SeasonEndPlayerInfo" )
	local f9_local1 = LUI.DataSourceInGlobalModel.new( LEAGUE_PLAY.ROOT_MODEL_PATH .. "SeasonBestPlayerInfo" )
	DataSources.frontEnd.LP.SeasonEndPlayerInfo = f9_local0
	DataSources.frontEnd.LP.SeasonBestPlayerInfo = f9_local1
	local f9_local2 = LEAGUE_PLAY.GetLocalPlayerStat( "xp", LEAGUE_PLAY.Achievements.Progression, "progression", true )
	local f9_local3 = f9_local2
	local f9_local4 = LEAGUE_PLAY._processedSeason
	if not f9_local4 then
		f9_local4 = LEAGUE_PLAY.GetPreviousSeasonNumber()
	end
	local f9_local5 = LEAGUE_PLAY.GetLocalPlayerStatSeasonal( "sr", LEAGUE_PLAY.Achievements.Progression, "skilldivisions", true, f9_local4 )
	local f9_local6 = LEAGUE_PLAY.GetLocalPlayerStatSeasonal( "b_sr", LEAGUE_PLAY.Achievements.Progression, "skilldivisions", true, f9_local4 )
	LEAGUE_PLAY.SetupPlayerRankData( f9_local0, f9_local2 )
	LEAGUE_PLAY.SetupPlayerRankData( f9_local1, f9_local2 )
	LEAGUE_PLAY.SetupPlayerSkillDivisionData( f9_local0, f9_local5 )
	LEAGUE_PLAY.SetupPlayerSkillDivisionData( f9_local1, f9_local6 )
	local f9_local7 = nil
	local f9_local8 = LEAGUE_PLAY.GetLocalPlayerStatSeasonal( "b_flame", LEAGUE_PLAY.Achievements.Progression, "flamestreak", true, f9_local4 )
	local f9_local9 = LEAGUE_PLAY.GetLocalPlayerStatSeasonal( "default", LEAGUE_PLAY.Achievements.Challenges, "ladderTop5", true, f9_local4 )
	local f9_local10
	if f9_local9 then
		f9_local10 = f9_local9
	else
		f9_local10 = 1 <= f9_local9
	end
	if 0 < f9_local8 and f9_local8 < 4 then
		local f9_local11 = LEAGUE_PLAY.VictoryFlamesData
		local f9_local12 = "tier"
		f9_local7 = f9_local11["tier" .. f9_local8].icon
	elseif f9_local10 then
		f9_local7 = LEAGUE_PLAY.VictoryFlamesData.tier0.icon
	end
	f9_local0.flamesIcon = f9_local0:GetDataSourceForSubmodel( "flamesIcon" )
	f9_local0.flamesIcon:SetValue( nil, f9_local7 )
end

local f0_local1 = function ( f7_arg0, f7_arg1 )
	f7_arg0.ContinueButton:SetFocusable( true )
	ACTIONS.GainFocus( f7_arg0, "ContinueButton", f7_arg1 )
	LUI.AddUIHoldButtonLogic( f7_arg0.ContinueButton, f7_arg1, {
		clickKeyboardAndMouse = true,
		requireFocus = true,
		duration = 5000,
		buttons = {
			primary = true
		},
		fill = f7_arg0.ContinueButton.GenericProgressBar,
		onFill = function ()
			ACTIONS.LeaveMenu( f7_arg0, true )
		end
	} )
end

local f0_local2 = function ( f6_arg0, f6_arg1, f6_arg2 )
	f6_arg0.EnableHoldButton = f0_local0
	f6_arg0.ContinueButton:SetFocusable( false )
	ANIMATION_FLOW.ExecuteAnimationFlow( f6_arg0, f6_arg1, f6_arg2.flowName )
	local f6_local0 = f6_arg0.CurrentSeason
	local f6_local1 = f6_local0
	f6_local0 = f6_local0.setText
	local f6_local2 = Engine[0xED84C33EC5F01EA]
	local f6_local3 = "LUA_MENU/SEASON_NUM"
	local f6_local4 = LEAGUE_PLAY._processedSeason
	if not f6_local4 then
		f6_local4 = LEAGUE_PLAY.GetPreviousSeasonNumber()
	end
	f6_local0( f6_local1, f6_local2( f6_local3, f6_local4 ) )
end

function LPSeasonEndCelebration( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "LPSeasonEndCelebration"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	self._sequenceLengths = self._sequenceLengths or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	f0_local0( self, f1_local1, controller )
	self.HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	self.HelperBar.id = "HelperBar"
	self.HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
	self.HelperBar:setPriority( 10 )
	self:addElement( self.HelperBar )
	local f1_local2 = self
	local Blur = nil
	
	Blur = LUI.UIBlur.new()
	Blur.id = "Blur"
	Blur:SetBlurStrength( 0.8, 0 )
	Blur:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * -104, _1080p * 2054, 0, _1080p * 1080 )
	self:addElement( Blur )
	self.Blur = Blur
	
	local Scrim = nil
	
	Scrim = LUI.UIImage.new()
	Scrim.id = "Scrim"
	Scrim:SetRGBFromInt( 0, 0 )
	Scrim:SetAlpha( 0.35, 0 )
	Scrim:SetAnchorsAndPosition( 0, 0, 0, 0, _1080p * -224, _1080p * 258, 0, 0 )
	self:addElement( Scrim )
	self.Scrim = Scrim
	
	local TitleImage = nil
	
	TitleImage = LUI.UIImage.new()
	TitleImage.id = "TitleImage"
	TitleImage:setImage( RegisterMaterial( "v_ui_icon_ranked_play_wide_s01" ), 0 )
	TitleImage:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 632, _1080p * 1288, _1080p * 161, _1080p * 289 )
	self:addElement( TitleImage )
	self.TitleImage = TitleImage
	
	local Complete = nil
	
	Complete = LUI.UIStyledText.new()
	Complete.id = "Complete"
	Complete:SetRGBFromInt( 8816262, 0 )
	Complete:setText( Engine[0xED84C33EC5F01EA]( "LP/COMPLETE" ), 0 )
	Complete:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_XLHeaderBold.font.File ) )
	Complete:SetFontSize( FONT_STYLES.fontStyle_XLHeaderBold.size )
	Complete:SetMinFontSize( FONT_STYLES.fontStyle_XLHeaderBold.minSize )
	Complete:SetWordWrap( false )
	Complete:SetAlignment( LUI.Alignment.Center )
	Complete:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 710, _1080p * 1210, _1080p * 331, _1080p * 417 )
	self:addElement( Complete )
	self.Complete = Complete
	
	local SeasonEndRank = nil
	
	SeasonEndRank = MenuBuilder.BuildRegisteredType( "LPSeasonEndRank", {
		controllerIndex = f1_local1
	} )
	SeasonEndRank.id = "SeasonEndRank"
	SeasonEndRank:SetScale( -0.2, 0 )
	SeasonEndRank:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 510, _1080p * 960, _1080p * 373, _1080p * 923 )
	self:addElement( SeasonEndRank )
	self.SeasonEndRank = SeasonEndRank
	
	local SeasonEndReward = nil
	
	SeasonEndReward = MenuBuilder.BuildRegisteredType( "LPSeasonEndReward", {
		controllerIndex = f1_local1
	} )
	SeasonEndReward.id = "SeasonEndReward"
	SeasonEndReward:SetScale( -0.2, 0 )
	SeasonEndReward:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 960, _1080p * 1410, _1080p * 373, _1080p * 923 )
	self:addElement( SeasonEndReward )
	self.SeasonEndReward = SeasonEndReward
	
	local ContinueButton = nil
	
	ContinueButton = MenuBuilder.BuildRegisteredType( "GenericHoldButton", {
		controllerIndex = f1_local1
	} )
	ContinueButton.id = "ContinueButton"
	ContinueButton:SetAlpha( 0, 0 )
	ContinueButton.Text:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( "LUA_MENU/CONTINUE_CAPS" ) ), 0 )
	ContinueButton.Text:SetAlignment( LUI.Alignment.Left )
	ContinueButton:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 750, _1080p * 1170, _1080p * 903, _1080p * 959 )
	self:addElement( ContinueButton )
	self.ContinueButton = ContinueButton
	
	local CurrentSeason = nil
	
	CurrentSeason = LUI.UIStyledText.new()
	CurrentSeason.id = "CurrentSeason"
	CurrentSeason:SetRGBFromInt( 16765232, 0 )
	CurrentSeason:setText( "", 0 )
	CurrentSeason:SetFont( FONTS.GetFont( FONTS.MainBoldHeader.File ) )
	CurrentSeason:SetFontSize( 54 * _PT )
	CurrentSeason:SetMinFontSize( 54 * _PT )
	CurrentSeason:SetWordWrap( false )
	CurrentSeason:SetAlignment( LUI.Alignment.Center )
	CurrentSeason:SetVerticalAlignment( LUI.Alignment.Center )
	CurrentSeason:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 756, _1080p * 1164, _1080p * 286, _1080p * 338 )
	self:addElement( CurrentSeason )
	self.CurrentSeason = CurrentSeason
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	self._sequenceLengths.DefaultSequence = 0
	local f1_local11 = nil
	SeasonEndRank:RegisterAnimationSequence( "SlideInRank", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 1385
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1835
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 1000,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 735,
			easing = LUI.EASING.outQuintic
		},
		{
			duration = 1000,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1185,
			easing = LUI.EASING.outQuintic
		},
		{
			value = 1,
			duration = 1000,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	SeasonEndReward:RegisterAnimationSequence( "SlideInRank", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.SlideInRank = function ()
		menu:AnimateSequence( "SlideInRank" )
		menu:AnimateSequence( "SlideInRank" )
	end
	
	self._sequenceLengths.SlideInRank = 1000
	local f1_local12 = nil
	SeasonEndRank:RegisterAnimationSequence( "SlideInReward", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 735
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1185
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 1000,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 510,
			easing = LUI.EASING.inOutQuintic
		},
		{
			duration = 1000,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 960,
			easing = LUI.EASING.inOutQuintic
		}
	} )
	SeasonEndReward:RegisterAnimationSequence( "SlideInReward", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 1210
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1660
		},
		{
			value = 1,
			duration = 1000,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 1000,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 960,
			easing = LUI.EASING.inOutQuintic
		},
		{
			duration = 1000,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1410,
			easing = LUI.EASING.inOutQuintic
		}
	} )
	self._sequences.SlideInReward = function ()
		menu:AnimateSequence( "SlideInReward" )
		menu:AnimateSequence( "SlideInReward" )
	end
	
	self._sequenceLengths.SlideInReward = 1000
	local f1_local13 = nil
	ContinueButton:RegisterAnimationSequence( "ShowContinueButton", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ShowContinueButton = function ()
		menu:AnimateSequence( "ShowContinueButton" )
	end
	
	self._sequenceLengths.ShowContinueButton = 0
	self.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_primary",
		helper_text = Engine[0xED84C33EC5F01EA]( "LUA_MENU/CONTINUE_CAPS" )
	} )
	if not self.bindButton then
		local f1_local14 = LUI.UIBindButton.new()
		f1_local14.id = "selfBindButton"
		self:addElement( f1_local14 )
		self.bindButton = f1_local14
	end
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "LPSeasonEndCelebration", LPSeasonEndCelebration )
LockTable( _M )
