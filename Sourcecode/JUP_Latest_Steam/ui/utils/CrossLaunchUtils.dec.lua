-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:02
CROSS_LAUNCH = CROSS_LAUNCH or {}
CROSS_LAUNCH.OFFLINE_DEEPLINK_SUFFIX = "_offline"
CROSS_LAUNCH.GAME_IDS = {
	SP24 = "sp24",
	SP23 = "sp23",
	COD24 = "mp24",
	COD23 = "mp23",
	SP22 = "sp22",
	COD22 = "cod22",
	HQ = "hq",
	CODHQ = "codhq"
}
CROSS_LAUNCH.GAME_DATA = {
	[CROSS_LAUNCH.GAME_IDS.SP22] = {
		GAME_NAME = 0xEBDF6FE47BAD9EE,
		GAME_TRANSITION_DATA = 0xB5CD1C6AA657356,
		SCENARIO = CoD.Scenarios.SP22
	},
	[CROSS_LAUNCH.GAME_IDS.COD22] = {
		GAME_NAME = 0xEBDF6FE47BAD9EE,
		GAME_TRANSITION_DATA = 0xB5CD1C6AA657356,
		SCENARIO = CoD.Scenarios.MP22
	},
	[CROSS_LAUNCH.GAME_IDS.SP23] = {
		GAME_NAME = 0xEBDF7FE47BADBA1,
		GAME_TRANSITION_DATA = 0xD7C6A2F97D0D93A,
		SCENARIO = CoD.Scenarios.SP23
	},
	[CROSS_LAUNCH.GAME_IDS.COD23] = {
		GAME_NAME = 0xEBDF7FE47BADBA1,
		GAME_TRANSITION_DATA = 0xD7C6A2F97D0D93A,
		SCENARIO = CoD.Scenarios.MP23
	},
	[CROSS_LAUNCH.GAME_IDS.COD24] = {
		GAME_NAME = 0x6F829BF03B37F83,
		GAME_TRANSITION_DATA = 0x67A22509BB8D55,
		SCENARIO = CoD.Scenarios.MP24
	},
	[CROSS_LAUNCH.GAME_IDS.CODHQ] = {
		GAME_NAME = 0x69C38CB94FFBBC,
		GAME_TRANSITION_DATA = 0x65F23FB5FF579CC,
		SCENARIO = CoD.Scenarios.CODHQ
	}
}
CROSS_LAUNCH.NONE_DEEPLINK = "none"
CROSS_LAUNCH.SP_DEEPLINK = {
	MISSION_SELECT = "mission_select",
	CINEMATICS = "cinematics",
	DEFAULT = "sp",
	RESUME_GAME = "resume_game",
	NEW_GAME = "new_game"
}
CROSS_LAUNCH.MP_DEEPLINK = {
	RANKED = "ranked",
	MASSIVE = "groundwar",
	DEFAULT = "mp",
	PRIVATE = "private"
}
CROSS_LAUNCH.CP_DEEPLINK = {
	DEFAULT = "cp",
	RAID = "raid"
}
CROSS_LAUNCH.BR_DEEPLINK = {
	DEFAULT = "br",
	DMZ = "dmz"
}
CROSS_LAUNCH.MAIN_MENU_DEEPLINK = {
	BATTLEPASS = "bp_tab",
	WZ = "wz",
	STORE = "store_tab"
}
CROSS_LAUNCH.IsLuaGameModeHashSP = function ()
	local f11_local0 = {
		[0x94AEAE0CA9F0779] = true,
		[0xC54C0E0B95F79FD] = true
	}
	return f11_local0[GameInstall[0x37F59297B471D9A]()]
end

CROSS_LAUNCH.DoCrosslaunchPreNavCheck = function ( f10_arg0, f10_arg1 )
	CoD.SetLuaGameMode( f10_arg1 )
	if not CONDITIONS.IsUsingPreNavSystem() then
		return true
	elseif not PreNavGroup.CrosslaunchPreNavGroup then
		LUI.FlowManager.RegisterPreNavGroup( "CrosslaunchPreNavGroup", {
			nil,
			"premium",
			"scenarioMissing",
			"splitscreenAllowed",
			"partyMembersMaxSize",
			"scenarioMissingPartyMembers",
			"isUserSMSChallenged"
		} )
	end
	if PreNavGroup.CrosslaunchPreNavGroup then
		local f10_local0 = PreNavChecks.PerformPreNavChecks( LUI.PreNavGroup.new( PreNavGroup.CrosslaunchPreNavGroup, f10_arg0 ), f10_arg0 )
		if f10_local0 == false then
			Engine[0x5BEA42EE45B1EE0]()
		end
		return f10_local0
	end
	return false
end

CROSS_LAUNCH.AttemptCrossLaunch = function ( f9_arg0, f9_arg1, f9_arg2, f9_arg3 )
	local f9_local0
	if not f9_arg3 then
		f9_local0 = f9_arg3
	else
		f9_local0 = {}
	end
	local f9_local1
	if type( f9_local0.failCallback ) == "function" then
		f9_local1 = f9_local0.failCallback
	else
		f9_local1 = false
	end
	local f9_local2 = Engine[0x8EC01CCAE9EF80B]( f9_arg0 )
	if f9_arg1 == CROSS_LAUNCH.GAME_IDS.SP22 then
		PLAY_MENU.SetLastPlayedData( f9_arg0, {
			lastPlayedPlayMenuRef = "crosslaunch_iw9_sp"
		} )
	end
	if f9_arg1 == CROSS_LAUNCH.GAME_IDS.SP23 then
		PLAY_MENU.SetLastPlayedData( f9_arg0, {
			lastPlayedPlayMenuRef = "campaign"
		} )
	end
	if Engine[0xF5374353E9DE089]( f9_arg0, f9_arg1, f9_arg2, f9_local2 ) then
		Engine[0x6A81EEA50510D09]( f9_arg0, f9_arg1, f9_arg2, f9_local2 )
		return true
	elseif f9_local1 then
		f9_local1()
	else
		LUI.FlowManager.RequestErrorPopup( f9_arg0, Engine[0xED84C33EC5F01EA]( 0xE37803973F42C23, CROSS_LAUNCH.GAME_DATA[f9_arg1].GAME_NAME ), Engine[0xED84C33EC5F01EA]( 0x36A5ECAEF2CB374 ) )
	end
end

CROSS_LAUNCH.StartTransition = function ( f8_arg0, f8_arg1, f8_arg2, f8_arg3 )
	local f8_local0
	if not f8_arg3 then
		f8_local0 = f8_arg3
	else
		f8_local0 = {}
	end
	local f8_local1
	if not f8_arg2 then
		f8_local1 = f8_arg2
	else
		f8_local1 = CROSS_LAUNCH.NONE_DEEPLINK
	end
	if f8_local0.useOfflineDeeplink then
		f8_local1 = f8_local1 .. CROSS_LAUNCH.OFFLINE_DEEPLINK_SUFFIX
	end
	if not String.IsNilOrEmpty( f8_local0.gameModeHash ) and not CROSS_LAUNCH.DoCrosslaunchPreNavCheck( f8_arg0, f8_local0.gameModeHash ) then
		return 
	end
	local f8_local2 = CROSS_LAUNCH.GAME_DATA[f8_arg1]
	if f8_local2 then
		local f8_local3
		if f8_local2 then
			f8_local3 = f8_local2
		else
			f8_local3 = Engine[0xED84C33EC5F01EA]( f8_local2.GAME_NAME )
		end
		local f8_local4 = Engine[0x6093D047200548]( f8_local2.GAME_TRANSITION_DATA )
		Engine[0xFF3097B3AA2F227]( f8_arg1, f8_local1 )
		local f8_local5 = {
			canCancel = true,
			keyartData = f8_local4,
			mainMenuKeyartTransitionOptions = {
				scriptBundle = f8_local4
			},
			targetGameId = f8_arg1,
			targetDeepLink = f8_local1,
			targetCrosslaunchFailCallback = f8_local0.failCallback
		}
		local f8_local6 = {}
		local f8_local7 = Engine[0xED84C33EC5F01EA]
		local f8_local8 = 0x285ECCD2E89FF71
		local f8_local9
		if not f8_local3 then
			f8_local9 = f8_local3
		else
			f8_local9 = ""
		end
		f8_local6[1] = f8_local7( f8_local8, f8_local9 )
		f8_local7 = Engine[0xED84C33EC5F01EA]
		f8_local8 = 0x15C6DFC5E7BA415
		if not f8_local3 then
			f8_local9 = f8_local3
		else
			f8_local9 = ""
		end
		f8_local6[2] = f8_local7( f8_local8, f8_local9 )
		f8_local7 = Engine[0xED84C33EC5F01EA]
		f8_local8 = 0xCB8FD591A154633
		if not f8_local3 then
			f8_local9 = f8_local3
		else
			f8_local9 = ""
		end
		f8_local6[1] = f8_local7( f8_local8, f8_local9 )
		f8_local5.messaging = f8_local6
		LUI.FlowManager.RequestPopupMenu( nil, "MainMenuKeyartTransitionIn", false, f8_arg0, false, f8_local5, nil, true, true )
	else
		CROSS_LAUNCH.AttemptCrossLaunch( f8_arg0, f8_arg1, f8_local1, {
			failCallback = f8_local0.failCallback
		} )
	end
end

CROSS_LAUNCH.GetIncomingDeeplink = function ()
	return string.gsub( Dvar[0x54084D7CA2317BB]( 0x943347594FDA14D ), CROSS_LAUNCH.OFFLINE_DEEPLINK_SUFFIX .. "$", "" )
end

CROSS_LAUNCH.SetDeeplinkComplete = function ()
	local f6_local0 = LUI.DataSourceInGlobalModel.new( "alwaysLoaded.deeplinkComplete" )
	f6_local0:SetValue( nil, true )
end

CROSS_LAUNCH.ShouldHandleDeeplink = function ()
	local f5_local0 = LUI.DataSourceInGlobalModel.new( "alwaysLoaded.deeplinkComplete" )
	if f5_local0:GetValue() then
		return false
	elseif LUI.FlowManager.IsMenuOnTop( "MainMenu" ) then
		return Table.IsItemIndexInArray( CROSS_LAUNCH.MAIN_MENU_DEEPLINK, CROSS_LAUNCH.GetIncomingDeeplink() )
	elseif CONDITIONS.IsSingleplayer() then
		return Table.IsItemIndexInArray( CROSS_LAUNCH.SP_DEEPLINK, CROSS_LAUNCH.GetIncomingDeeplink() )
	else
		return false
	end
end

CROSS_LAUNCH.OpenCrosslaunchExitPopup = function ( f1_arg0, f1_arg1, f1_arg2 )
	local f1_local0 = {
		defaultFocusIndex = 0,
		title = Engine[0xED84C33EC5F01EA]( 0xE6240831CCA64A4 ),
		message = CONDITIONS.InPrivatePartyAndNotHost() and Engine[0xED84C33EC5F01EA]( 0xF9D45F37F29CCC1 ) or Engine[0xED84C33EC5F01EA]( 0x165C1CC3732F236 ),
		controllerIndex = f1_arg0,
		buttons = {
			{
				label = Engine[0xED84C33EC5F01EA]( 0xBD72839AC663B35 ),
				action = function ( f4_arg0, f4_arg1 )
					MAIN_MENU.CrossTitleActionFunc( nil, f4_arg1, Engine[0xED84C33EC5F01EA]( 0xB66AE555443A2D3 ), CROSS_LAUNCH.GAME_IDS.HQ, "" )
				end
			},
			{
				label = Engine[0xED84C33EC5F01EA]( 0x78C2C5FE58603AC ),
				action = function ( f3_arg0, f3_arg1 )
					
				end
			}
		}
	}
	if Engine[0x575E9C5B9AAB6F4]() and not f1_arg1 then
		table.insert( f1_local0.buttons, {
			label = Engine[0xED84C33EC5F01EA]( 0x4E76830223A336F ),
			action = function ( f2_arg0, f2_arg1 )
				Engine[0xDEE6107B26F8BB6]()
			end
		} )
	end
	LUI.FlowManager.RequestPopupMenu( nil, "PopupMessageAndButtons", true, f1_arg0, false, f1_local0 )
end

