-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
module( ..., package.seeall )
local f0_local0 = function ()
	Dvar.DHEGHJJJHI( "LQMNOKSPLN", false )
end

local f0_local1 = function ()
	Dvar.DHEGHJJJHI( "LQMNOKSPLN", not Dvar.IBEGCHEFE( "lui_gc_kiosk_force_disable_deep_mem_collect" ) )
end

local f0_local2 = function ( f12_arg0, f12_arg1, f12_arg2, f12_arg3 )
	local f12_local0 = f12_arg0
	if f12_local0 ~= nil and f12_local0.id ~= "brPlunderBox" then
		
	else
		
	end
	local f12_local1 = 2
	local self = LUI.UIElement.new()
	self:SetBlurStrength( f12_local1 )
	self:setupWorldBlur()
	self.id = "blur"
	f12_arg0:addElement( self )
	assert( f12_local0.id == "brPlunderBox" )
	if f12_local0.noTabChange or f12_arg2.CheckShouldIgnore and f12_arg2.CheckShouldIgnore( f12_arg1 ) then
		return 
	elseif f12_local0.currentTab then
		f12_local0.currentTab:closeTree()
		f12_local0.currentTab = nil
		f12_local0.currentTabData = nil
	end
	f12_local0.currentTabData = f12_arg2
	
	local currentTab = MenuBuilder.BuildRegisteredType( f12_arg2.menuName, {
		controllerIndex = f12_arg1,
		tabNum = f12_arg2.tabNum,
		isRedeployTab = f12_arg2.isRedeployTab,
		isFireSale = f12_arg3.isFireSale,
		isPerkDiscount = f12_arg3.isPerkDiscount,
		isStackedDiscount = f12_arg3.isStackedDiscount
	} )
	currentTab.id = "currentTab"
	currentTab:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1920, 0, _1080p * 1080 )
	f12_local0:addElement( currentTab )
	f12_local0.currentTab = currentTab
	
	f12_local0.currentTab:processEvent( {
		name = "gain_focus",
		controllerIndex = f12_arg1
	} )
end

local f0_local3 = function ( f7_arg0, f7_arg1, f7_arg2 )
	f7_arg0.HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f7_arg1
	} )
	f7_arg0.HelperBar.id = "HelperBar"
	f7_arg0.HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
	f7_arg0.HelperBar:setPriority( 10 )
	f7_arg0:addElement( f7_arg0.HelperBar )
	f7_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_secondary",
		priority = 0,
		helper_text = Engine.CBBHFCGDIC( "MENU/BACK" )
	} )
	f7_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_primary",
		helper_text = Engine.CBBHFCGDIC( "LUA_MENU/SELECT" )
	} )
	f7_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
		clickable = true,
		priority = 2,
		side = "left",
		kbmTooltipPromptOverload = "button_dismiss_pause_menu",
		button_ref = "button_start",
		helper_text = Engine.CBBHFCGDIC( "LUA_MENU/DISMISS_MENU" )
	} )
	MenuUtils.AddDismissPauseMenuKBMHandler( f7_arg0 )
	
	local bindButton = LUI.UIBindButton.new()
	bindButton.id = "selfBindButton"
	f7_arg0:addElement( bindButton )
	f7_arg0.bindButton = bindButton
	
	f7_arg0.bindButton:addEventHandler( "button_secondary", function ( f11_arg0, f11_arg1 )
		Engine.EBHIFJCGBH( "br_cancel_purchase", 0 )
		Engine.BJDBIAGIDA( BR_ARMORY_KIOSK.sounds.MENU_CLOSE )
		ACTIONS.LeaveMenu( f7_arg0 )
		return true
	end )
	f7_arg0.bindButton:addEventHandler( "button_start", function ( f10_arg0, f10_arg1 )
		Engine.BJDBIAGIDA( BR_ARMORY_KIOSK.sounds.MENU_CLOSE )
		BR_ARMORY_KIOSK.RequestCloseMenu()
		return true
	end )
	local f7_local1 = {}
	for f7_local6, f7_local7 in ipairs( BR_ARMORY_KIOSK.tabData ) do
		local f7_local5 = false
		if f7_local7.CheckShouldIgnore then
			f7_local5 = f7_local7.CheckShouldIgnore( f7_arg1 )
		elseif BR_ARMORY_KIOSK.ignoredTabNums then
			f7_local5 = BR_ARMORY_KIOSK.ignoredTabNums[f7_local6]
		end
		if not f7_local5 then
			table.insert( f7_local1, {
				name = f7_local7.name,
				focusFunction = function ( f9_arg0, f9_arg1 )
					f7_arg0( f9_arg0, f9_arg1, f7_arg0, f7_arg0 )
				end
			} )
		end
	end
	f7_arg0.Tabs:SetAlignment( LUI.Alignment.Left )
	if f7_local1 and 0 < #f7_local1 then
		f7_arg0.tabsData = f7_local1
		f7_arg0.Tabs:SetTabs( f7_local1 )
		if #f7_local1 == 1 then
			f7_arg0.noTabChange = true
		end
	end
	f7_local2 = DataSources.inGame.player.BRData.squadIndex:GetValue( f7_arg1 )
	if f7_local2 then
		if f7_local2 <= 1 then
			f7_local2 = ""
		end
	else
		f7_local2 = ""
	end
	f7_arg0:SubscribeToModel( DataSources.inGame.player.BRData["plunderAmount" .. f7_local2]:GetModel( f7_arg1 ), function ( f8_arg0 )
		f7_arg0.PlunderAmount:setText( Engine.CBBHFCGDIC( "MP/BR_PLUNDER_CASH_HUD", DataSources.inGame.player.BRData["plunderAmount" .. f7_arg0]:GetValue( f7_arg0 ) * BRLOOT.PLUNDER_QUANTITY_SCALING_FACTOR ) )
	end )
	Engine.BJDBIAGIDA( BR_ARMORY_KIOSK.sounds.MENU_OPEN )
end

local f0_local4 = function ( f6_arg0, f6_arg1 )
	LUI.FlowManager.RequestPopupMenu( f6_arg0, "BRKioskPurchaseErrorPopup", true, controllerIndex, false, {
		message = Engine.CBBHFCGDIC( f6_arg1 )
	} )
end

function PostLoadFunc( f4_arg0, f4_arg1, f4_arg2 )
	f0_local0( f4_arg0, f4_arg1, f4_arg2 )
	f4_arg0:registerOmnvarHandler( "ui_br_purchase_killstreak_response", function ( f5_arg0, f5_arg1 )
		if f5_arg1.value == BR_ARMORY_KIOSK.PURCHASE_RESPONSE_VALUE.SUCCESS then
			Engine.BJDBIAGIDA( BR_ARMORY_KIOSK.sounds.PURCHASE_CONFIRM )
			BR_ARMORY_KIOSK.TryCloseMenuOnPurchase( f5_arg1.controller )
		elseif f5_arg1.value == BR_ARMORY_KIOSK.PURCHASE_RESPONSE_VALUE.FORCE_EXIT then
			Engine.BJDBIAGIDA( BR_ARMORY_KIOSK.sounds.MENU_CLOSE )
			BR_ARMORY_KIOSK.RequestCloseMenu()
		elseif f5_arg1.value == BR_ARMORY_KIOSK.PURCHASE_RESPONSE_VALUE.LOC_SEL then
			DataSources.inGame.player.BRData.kioskNeedsKillstreakMap:SetValue( f4_arg0, true )
			local f5_local0 = LUI.ScoreboardLayer:GetInstance()
			f5_local0:SetVisibilityOverride( true )
			f5_local0:SetVisibilityOverride( nil )
			ACTIONS.LeaveMenu( f5_arg0 )
		else
			local f5_local0 = BR_ARMORY_KIOSK.PURCHASE_RESPONSE_DATA[f5_arg1.value]
			if f5_local0 then
				local f5_local1 = f5_local0.errorString
				if f5_local1 then
					Engine.BJDBIAGIDA( BR_ARMORY_KIOSK.sounds.PURCHASE_DENY )
					f4_arg0( f5_arg0, f5_local1 )
				end
			end
		end
	end )
end

function brPlunderBox( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "brPlunderBox"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local Background = nil
	
	Background = LUI.UIImage.new()
	Background.id = "Background"
	Background:SetRGBFromInt( 0, 0 )
	Background:SetAlpha( 0.5, 0 )
	Background:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 426, _1080p * 1440, _1080p * 54, _1080p * 825 )
	self:addElement( Background )
	self.Background = Background
	
	local f1_local4 = nil
	if Engine.EAAHGICFBD() and not Engine.EAIICIFIFA() and not Engine.DDJFBBJAIG() then
		f1_local4 = LUI.TabManager.new( {
			spacing = 4,
			wrap = false,
			tabHeight = _1080p * 52,
			buildTab = function ()
				return MenuBuilder.BuildRegisteredType( "SubMenuTab", {
					controllerIndex = menu
				} )
			end,
			buildSpacer = function ()
				return MenuBuilder.BuildRegisteredType( "TabsSpacer", {
					controllerIndex = menu
				} )
			end,
			controllerIndex = f1_local1
		} )
		f1_local4.id = "Tabs"
		f1_local4:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 473, _1080p * 1369, _1080p * 164, _1080p * 216 )
		self:addElement( f1_local4 )
		self.Tabs = f1_local4
	end
	local PlunderAmount = nil
	
	PlunderAmount = LUI.UIStyledText.new()
	PlunderAmount.id = "PlunderAmount"
	PlunderAmount:SetRGBFromTable( SWATCHES.WZGlobalSwatches.WZHighlight, 0 )
	PlunderAmount:SetScale( 1, 0 )
	PlunderAmount:setText( LocalizeIntoString( "", "MP/BR_PLUNDER_CASH_HUD" ), 0 )
	PlunderAmount:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	PlunderAmount:SetWordWrap( false )
	PlunderAmount:SetAlignment( LUI.Alignment.Right )
	PlunderAmount:SetOptOutRightToLeftAlignmentFlip( true )
	PlunderAmount:SetShadowMinDistance( -0.2, 0 )
	PlunderAmount:SetShadowMaxDistance( 0.2, 0 )
	PlunderAmount:SetShadowUOffset( -0.002, 0 )
	PlunderAmount:SetShadowRGBFromTable( SWATCHES.HUD.HUDShadow, 0 )
	PlunderAmount:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1164, _1080p * 1328, _1080p * 110, _1080p * 134 )
	self:addElement( PlunderAmount )
	self.PlunderAmount = PlunderAmount
	
	local MenuTitle = nil
	
	MenuTitle = LUI.UIStyledText.new()
	MenuTitle.id = "MenuTitle"
	MenuTitle:SetRGBFromTable( SWATCHES.WZGlobalSwatches.WZTitle, 0 )
	MenuTitle:SetScale( 0.3, 0 )
	MenuTitle:setText( Engine.CBBHFCGDIC( "MP_BR_INGAME/ARMORY_KIOSK" ), 0 )
	MenuTitle:SetFont( FONTS.GetFont( FONTS.MainLight.File ) )
	MenuTitle:SetAlignment( LUI.Alignment.Left )
	MenuTitle:SetOptOutRightToLeftAlignmentFlip( true )
	MenuTitle:SetAutoScrollStyle( LUI.UIStyledText.AutoScrollStyle.ScrollH )
	MenuTitle:SetStartupDelay( 1250 )
	MenuTitle:SetLineHoldTime( 400 )
	MenuTitle:SetAnimMoveTime( 300 )
	MenuTitle:SetAnimMoveSpeed( 50 )
	MenuTitle:SetEndDelay( 1000 )
	MenuTitle:SetCrossfadeTime( 500 )
	MenuTitle:SetFadeInTime( 300 )
	MenuTitle:SetFadeOutTime( 300 )
	MenuTitle:SetMaxVisibleLines( 1 )
	MenuTitle:SetDecodeLetterLength( 20 )
	MenuTitle:SetDecodeMaxRandChars( 6 )
	MenuTitle:SetDecodeUpdatesPerLetter( 4 )
	MenuTitle:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 523, _1080p * 857, _1080p * 82, _1080p * 142 )
	self:addElement( MenuTitle )
	self.MenuTitle = MenuTitle
	
	PostLoadFunc( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "brPlunderBox", brPlunderBox )
LUI.FlowManager.RegisterStackPushBehaviour( "brPlunderBox", f0_local1 )
LUI.FlowManager.RegisterStackPopBehaviour( "brPlunderBox", f0_local0 )
LockTable( _M )
