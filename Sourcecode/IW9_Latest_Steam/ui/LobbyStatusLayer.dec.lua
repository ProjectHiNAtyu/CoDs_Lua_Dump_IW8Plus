-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
LUI.LobbyStatusLayer = LUI.Class( LUI.UIElement )
local f0_local0 = {
	RIGHT = 1,
	MIDDLE = 0
}
LUI.LobbyStatusLayer.VIEW_STATE = {
	EXTENDED = 2,
	CLOSED = 0,
	OPENED = 1
}
LUI.LobbyStatusLayer.keepShowingStatus = false
LUI.LobbyStatusLayer.SetHorizontalPosition = function ( f12_arg0, f12_arg1 )
	if f12_arg0.LobbyStatusLayout then
		if f12_arg1 == f0_local0.MIDDLE then
			ACTIONS.AnimateSequence( f12_arg0.LobbyStatusLayout, "PositionHorizontal_Middle" )
		elseif f12_arg1 == f0_local0.RIGHT then
			ACTIONS.AnimateSequence( f12_arg0.LobbyStatusLayout, "PositionHorizontal_Right" )
		end
	end
end

LUI.LobbyStatusLayer.SlideIntoPosition = function ( f11_arg0, f11_arg1 )
	if f11_arg0.LobbyStatusLayout then
		if f11_arg1 == f0_local0.MIDDLE then
			ACTIONS.AnimateSequence( f11_arg0.LobbyStatusLayout, "SlideIn_Middle" )
		elseif f11_arg1 == f0_local0.RIGHT then
			ACTIONS.AnimateSequence( f11_arg0.LobbyStatusLayout, "SlideIn_Right" )
		end
	end
end

LUI.LobbyStatusLayer.GetTargetPosition = function ( f10_arg0 )
	if (f10_arg0._globalPanelBaseDatasource and f10_arg0._globalPanelBaseDatasource:GetValue( f10_arg0._controllerIndex ) or false) or (f10_arg0._globalPanelOptionsSearchOpenDatasource and f10_arg0._globalPanelOptionsSearchOpenDatasource:GetValue( f10_arg0._controllerIndex ) or false) or (f10_arg0._channelPanelBaseDatasource and f10_arg0._channelPanelBaseDatasource:GetValue( f10_arg0._controllerIndex ) or false) or LUI.FlowManager.IsFlyInPopupMenuOnTop() then
		return f0_local0.MIDDLE
	else
		return f0_local0.RIGHT
	end
end

LUI.LobbyStatusLayer.UpdatePosition = function ( f9_arg0, f9_arg1 )
	local f9_local0 = LUI.LobbyStatusLayer.GetTargetPosition( f9_arg1 )
	if f9_arg1._horizontalPosition ~= f9_local0 then
		f9_arg1._horizontalPosition = f9_local0
		LUI.LobbyStatusLayer.SetHorizontalPosition( f9_arg1, f9_local0 )
	end
end

LUI.LobbyStatusLayer.init = function ( f8_arg0, f8_arg1 )
	LUI.UIElement.init( f8_arg0 )
	f8_arg0.id = "LobbyStatusLayer"
	local f8_local0
	if not f8_arg1 then
		f8_local0 = f8_arg1
	else
		f8_local0 = Engine[0x45B054C920178E9]()
	end
	f8_arg0._controllerIndex = f8_local0
end

LUI.LobbyStatusLayer.InitLayer = function ( f7_arg0 )
	f7_arg0.LobbyStatusLayout = MenuBuilder.BuildRegisteredType( "LobbyStatusLayout", {
		controllerIndex = f7_arg0._controllerIndex
	} )
	f7_arg0._horizontalPosition = LUI.LobbyStatusLayer.GetTargetPosition( f7_arg0 )
	LUI.LobbyStatusLayer.SlideIntoPosition( f7_arg0, f7_arg0._horizontalPosition )
	f7_arg0._globalPanelBaseDatasource = DataSources.alwaysLoaded.uri.menusOpened.GlobalPanelBase
	f7_arg0._globalPanelOptionsSearchOpenDatasource = DataSources.alwaysLoaded.uri.menusOpened.GlobalPanelOptionsSearch
	f7_arg0._channelPanelBaseDatasource = DataSources.alwaysLoaded.uri.menusOpened.ChannelPanelBase
	f7_arg0._menuOnTopDatasource = DataSources.alwaysLoaded.uri.menuOnTop
	if f7_arg0._menuOnTopDatasource then
		f7_arg0:SubscribeToModel( f7_arg0._menuOnTopDatasource:GetModel( f7_arg0._controllerIndex ), LUI.LobbyStatusLayer.UpdatePosition )
	end
	f7_arg0:addElement( f7_arg0.LobbyStatusLayout )
end

LUI.LobbyStatusLayer.ClearLayer = function ( f6_arg0, f6_arg1 )
	f6_arg0:closeChildren()
	f6_arg0.LobbyStatusLayout = nil
	REG2.SetValue( CONDITIONS.InFrontend() and DataSources.frontEnd.lobby.statusWidgetState or DataSources.inGame.HUD.statusWidgetState, nil, LUI.LobbyStatusLayer.VIEW_STATE.CLOSED )
end

LUI.LobbyStatusLayer.GetLayer = function ()
	local f5_local0 = Engine[0xEE6F69FEA944B13]()
	return f5_local0.lobbyStatusLayer
end

LUI.LobbyStatusLayer.ShouldBeVisible = function ( f4_arg0 )
	if not MenuBuilder.IsTypeRegistered( "LobbyStatusLayout" ) then
		return false
	elseif CoD.IsDMZMatch() then
		return false
	elseif not CONDITIONS.InFrontend() then
		if not CONDITIONS.IsIngameLoadingScreenLobbyStatusEnabled() then
			return false
		end
		local f4_local0 = Lobby[0x61016770AE2BCA7]()
		if not f4_local0 then
			f4_local0 = PARTY.IsLocalPlayerPartyQueuing()
		end
		local f4_local1, f4_local2 = Lobby[0xE282396C3A4C54B]()
		local f4_local3
		if not f4_local0 then
			f4_local3 = f4_local0
		elseif f4_local1 ~= Enum[0x6898CF1A0F3B21E][0xAC9AFEF1A00B5E8] and f4_local1 ~= Enum[0x6898CF1A0F3B21E][0x59800CA5602C73D] then
			f4_local3 = false
		else
			f4_local3 = true
		end
		if not f4_local0 and f4_local1 == Enum[0x6898CF1A0F3B21E][0xAC9AFEF1A00B5E8] then
			LUI.LobbyStatusLayer.keepShowingStatus = true
		end
		local f4_local4
		if not f4_local3 then
			f4_local4 = f4_local3
		else
			f4_local4 = LUI.LobbyStatusLayer.keepShowingStatus
		end
		return f4_local4
	end
	LUI.LobbyStatusLayer.keepShowingStatus = false
	local f4_local0 = LUI.FlowManager.GetMenuStack()
	if 0 < #f4_local0 then
		for f4_local1 = 1, #f4_local0, 1 do
			local f4_local5 = f4_local0[f4_local1].menu
			if f4_local5 then
				if LUI.LobbyStatusLayer.IsHiddenInMenu( f4_local5 ) then
					return false
				elseif f4_local5.MainMenuTabs and f4_arg0._hiddenOnMainMenuTab then
					return false
				end
			end
		end
	end
	local f4_local1 = false
	local f4_local2 = Lobby[0x61016770AE2BCA7]()
	if not f4_local2 then
		f4_local2 = Lobby.IsPartyMatchmade()
		if not f4_local2 then
			f4_local2 = Lobby.IsLoadingMap()
			if not f4_local2 then
				f4_local2 = PARTY.IsLocalPlayerPartyQueuing()
			end
		end
	end
	local f4_local3
	if not CONDITIONS.InFrontend() then
		f4_local3 = DataSources.inGame.HUD.matchmakingSearchType
		if not f4_local3 then
		
		else
			if f4_local2 and f4_local3 then
				f4_local1 = f4_local3:GetValue( f4_arg0._controllerIndex ) == Enum[0x3AD26F868FABE0F][0xB825C751C8C3A05]
			end
			local f4_local4
			if f4_local2 then
				f4_local4 = f4_local2
			else
				f4_local4 = not f4_local1
			end
			return f4_local4
		end
	end
	f4_local3 = DataSources.frontEnd.lobby.matchmakingSearchType
end

LUI.LobbyStatusLayer.SetHiddenOnMenu = function ( f3_arg0, f3_arg1 )
	if f3_arg0 then
		f3_arg0._lobbyStatusLayerHidden = f3_arg1
	end
end

LUI.LobbyStatusLayer.IsHiddenInMenu = function ( f2_arg0 )
	local f2_local0
	if f2_arg0 then
		f2_local0 = f2_arg0
	else
		f2_local0 = f2_arg0._lobbyStatusLayerHidden
	end
	return f2_local0
end

LUI.LobbyStatusLayer.SetHiddenOnMainMenuTab = function ( f1_arg0 )
	local f1_local0 = LUI.LobbyStatusLayer.GetLayer()
	if f1_local0 then
		f1_local0._hiddenOnMainMenuTab = f1_arg0
	end
end

