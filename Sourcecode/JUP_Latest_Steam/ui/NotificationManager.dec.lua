-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
LUI.NotificationManager = LUI.Class( LUI.UIElement )
local f0_local0 = function ( f24_arg0, f24_arg1 )
	local f24_local0 = Notifications[0x903DB0549EE8B23]( f24_arg0._controllerIndex, "friend_request_sent", Enum[0xD6D88DF3D233121][0x956D7BF9004A70B], f24_arg1.xuidString )
	if f24_local0 then
		Notifications[0x4E2D9573CAC224C]( Table.GetKeys( f24_local0 ) )
	end
end

local f0_local1 = function ( f23_arg0 )
	if f23_arg0 and f23_arg0 == NOTIFICATIONS.CHANNEL_INVITE_RECEIVED_ID then
		return Engine[0x2AFF3A853910DFB]()
	else
		return false
	end
end

local f0_local2 = function ( f22_arg0 )
	local f22_local0 = {}
	Engine[0xD75F5E555D60E1]( "Gathering valid notifications" )
	for f22_local4, f22_local5 in pairs( f22_arg0 ) do
		if NOTIFICATIONS.IsValidType( f22_local5.id ) and not f0_local0( f22_local5.id ) then
			table.insert( f22_local0, f22_local5 )
		end
	end
	Engine[0x4D47DEF7D5ED4B9]()
	return f22_local0
end

local f0_local3 = function ( f20_arg0 )
	Engine[0xD75F5E555D60E1]( "Sorting notifications" )
	table.sort( f20_arg0, function ( f21_arg0, f21_arg1 )
		return f21_arg1.creationTime < f21_arg0.creationTime
	end )
	Engine[0x4D47DEF7D5ED4B9]()
	return f20_arg0
end

local f0_local4 = function ( f19_arg0, f19_arg1 )
	local f19_local0 = {}
	local f19_local1 = {}
	local f19_local2 = {}
	for f19_local7, f19_local8 in pairs( f19_arg0 ) do
		local f19_local9 = NOTIFICATIONS.GetNotificationClusterID( f19_local8 )
		if f19_local9 ~= nil and not Table.IsItemIndexInArray( f19_arg1, f19_local9 ) then
			local f19_local6 = f19_local8.id .. f19_local9
			if f19_local0[f19_local6] == nil then
				f19_local0[f19_local6] = {
					notification = f19_local8,
					index = f19_local7
				}
				f19_local0[f19_local6].notification.clusterCount = 0
				table.insert( f19_local1, f19_local8 )
			else
				f19_local0[f19_local6].notification.clusterCount = f19_local0[f19_local6].notification.clusterCount + 1
			end
			f19_local8.clusterCount = f19_local0[f19_local6].notification.clusterCount
			f19_local2[f19_local8.handle] = f19_local0[f19_local6].index
		end
		table.insert( f19_local1, f19_local8 )
		f19_local2[f19_local8.handle] = f19_local7
	end
	return f19_local1, f19_local2
end

local f0_local5 = function ( f18_arg0 )
	local f18_local0 = {}
	local f18_local1 = {}
	for f18_local5, f18_local6 in ipairs( f18_arg0 ) do
		if f18_local6.isFeatured then
			table.insert( f18_local0, f18_local6 )
		else
			table.insert( f18_local1, f18_local6 )
		end
	end
	return f18_local1, f18_local0
end

LUI.NotificationManager.GetInstance = function ()
	local f17_local0 = Engine[0xEE6F69FEA944B13]()
	return f17_local0.notificationManager
end

LUI.NotificationManager.init = function ( f16_arg0, f16_arg1 )
	LUI.NotificationManager.super.init( f16_arg0 )
	f16_arg0.id = "NotificationManager"
	f16_arg0._controllerIndex = f16_arg1.controllerIndex
	f16_arg0._orderedNotifications = {}
	f16_arg0._handleToIndex = {}
	f16_arg0._expandedClusters = {}
end

LUI.NotificationManager.InitLayer = function ( f15_arg0 )
	f15_arg0:registerEventHandler( NOTIFICATIONS.FriendRequestAcceptedEvent, f0_local0 )
end

LUI.NotificationManager.ShouldBeVisible = function ( f14_arg0 )
	return true
end

LUI.NotificationManager.ClearLayer = function ( f13_arg0 )
	
end

LUI.NotificationManager.GetLayer = function ()
	local f12_local0 = Engine[0xEE6F69FEA944B13]()
	return f12_local0.notificationManager
end

LUI.NotificationManager.ResetClusters = function ( f11_arg0 )
	f11_arg0._expandedClusters = {}
end

LUI.NotificationManager.RefreshNotifications = function ( f10_arg0, f10_arg1 )
	local f10_local0, f10_local1 = f0_local0( f0_local0( Notifications[0xC2B21B6E7D0D061]( f10_arg1 ) ) )
	f0_local0( f10_local0 )
	f10_arg0._orderedNotifications, f10_arg0._handleToIndex = f0_local0( f10_local0, f10_arg0._expandedClusters )
	f10_arg0._featuredNotifications = f10_local1
	return f10_arg0._orderedNotifications
end

LUI.NotificationManager.GetNotifications = function ( f9_arg0 )
	return f9_arg0._orderedNotifications
end

LUI.NotificationManager.GetFeaturedNotifications = function ( f8_arg0 )
	return f8_arg0._featuredNotifications
end

LUI.NotificationManager.GetFeaturedNotificationCount = function ( f7_arg0 )
	return #f7_arg0._featuredNotifications
end

LUI.NotificationManager.GetNotificationIndexByHandle = function ( f6_arg0, f6_arg1 )
	return f6_arg0._handleToIndex[f6_arg1]
end

LUI.NotificationManager.GetNotificationByHandle = function ( f5_arg0, f5_arg1 )
	return f5_arg0:GetNotificationByIndex( f5_arg0:GetNotificationIndexByHandle( f5_arg1 ) )
end

LUI.NotificationManager.GetNotificationByIndex = function ( f4_arg0, f4_arg1 )
	return f4_arg0._orderedNotifications[f4_arg1]
end

LUI.NotificationManager.GetNotificationCount = function ( f3_arg0 )
	return #f3_arg0._orderedNotifications
end

LUI.NotificationManager.ExpandCluster = function ( f2_arg0, f2_arg1 )
	if not Table.IsItemIndexInArray( f2_arg0._expandedClusters, f2_arg1.clusterID ) then
		table.insert( f2_arg0._expandedClusters, f2_arg1.clusterID )
		f2_arg0:dispatchEventToRoot( {
			name = NOTIFICATIONS.ClusterEvent
		} )
	end
end

LUI.NotificationManager.CollapseCluster = function ( f1_arg0, f1_arg1 )
	Table.RemoveSingleItemFromArray( f1_arg0._expandedClusters, f1_arg1 )
	f1_arg0:dispatchEventToRoot( {
		name = NOTIFICATIONS.ClusterEvent
	} )
end

