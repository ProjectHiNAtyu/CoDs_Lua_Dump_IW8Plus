-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
CODACCOUNT = CODACCOUNT or {}
CODACCOUNT.AccountURL = {
	CodeOfConduct = "https://www.callofduty.com/values",
	AccountInfo = "https://profile.callofduty.com/cod/info",
	TermsOfuse = "https://www.activision.com/legal/terms-of-use",
	LoginShortened = "activision.com/signin",
	Login = "https://s.activision.com/activision/login",
	SecurityPolicy = "http://support.activision.com/codpolicy",
	LicenseServiceAgreement = "https://www.callofduty.com/hub/wzm-eula",
	PrivacyPolicy = "https://www.activision.com/legal/privacy-policy",
	DeleteAccount = "https://support.activision.com/privacy",
	AccountSettings = "https://profile.callofduty.com/cod/announcement2FA",
	CreateAccount = "https://profile.callofduty.com/cod/signup#steps",
	ForgotPassword = "https://profile.callofduty.com/cod/forgotPassword#forgot-password"
}
CODACCOUNT.CountryCodes = {
	nil,
	"US",
	"AU",
	"AT",
	"BE",
	"BR",
	"CA",
	"CZ",
	"DK",
	"FI",
	"FR",
	"DE",
	"GR",
	"HU",
	"IE",
	"IT",
	"KR",
	"MX",
	"NL",
	"NZ",
	"NO",
	"PL",
	"PT",
	"ES",
	"SE",
	"CH",
	"GB",
	"JP",
	"RU",
	"SA",
	"HK",
	"TW",
	"SG"
}
CODACCOUNT.ErrorCodes = {
	UNAUTHORIZED_ACCESS = 10,
	GENERIC_FIELD_INVALID = 6,
	PASSWORD_INVALID = 5,
	BUSY = 13,
	GENERIC = 2,
	MERGE_CONFLICT = 9,
	USERNAME_PROFANITY = 7,
	GENERIC_LOGIN = 3,
	CANCELLED = 1,
	NO_RENAME_TOKEN = 11,
	EMAIL_EXISTS = 8,
	MULTI_LOGIN_ERROR = 17,
	MARKETPLACE_ERROR = 12,
	TOKEN_TIMED_OUT = 16,
	USERNAME_INVALID = 4,
	NEEDS_OTP = 14,
	OTP_THROTTLED = 15
}
CODACCOUNT.ErrorStrings = {
	[CODACCOUNT.ErrorCodes.CANCELLED] = 0x7464124A3F32EFD,
	[CODACCOUNT.ErrorCodes.GENERIC] = 0xC02FD0E8FE239E6,
	[CODACCOUNT.ErrorCodes.GENERIC_LOGIN] = 0xC02FD0E8FE239E6,
	[CODACCOUNT.ErrorCodes.USERNAME_INVALID] = 0x74F1C7C3AE72358,
	[CODACCOUNT.ErrorCodes.PASSWORD_INVALID] = 0x88CF7D2B51030D1,
	[CODACCOUNT.ErrorCodes.GENERIC_FIELD_INVALID] = 0xBC45F0633B649B6,
	[CODACCOUNT.ErrorCodes.USERNAME_PROFANITY] = 0xA4516943A529A7B,
	[CODACCOUNT.ErrorCodes.EMAIL_EXISTS] = 0xB5725E57019F4F5,
	[CODACCOUNT.ErrorCodes.MERGE_CONFLICT] = 0x6B31676A2B863F3,
	[CODACCOUNT.ErrorCodes.UNAUTHORIZED_ACCESS] = 0xF2C29F1759F18B1,
	[CODACCOUNT.ErrorCodes.NO_RENAME_TOKEN] = 0xE5B23B475A8FC24,
	[CODACCOUNT.ErrorCodes.MARKETPLACE_ERROR] = 0xE3A47727B518742,
	[CODACCOUNT.ErrorCodes.BUSY] = 0x34308D379481B0D
}
CODACCOUNT.MobileErrorStrings = {
	[CODACCOUNT.ErrorCodes.USERNAME_PROFANITY] = 0x91F530A9656D329,
	[CODACCOUNT.ErrorCodes.NO_RENAME_TOKEN] = 0x8D15EC6DA06B93A,
	[CODACCOUNT.ErrorCodes.BUSY] = 0xD4773ECCCF1BC70,
	[CODACCOUNT.ErrorCodes.USERNAME_INVALID] = 0xDBBEA5797B2B276,
	[CODACCOUNT.ErrorCodes.MULTI_LOGIN_ERROR] = 0x53E913DE63F6A2
}
CODACCOUNT.PARTIAL_EMAIL_CHAR_NUMBER = 2
CODACCOUNT.PARTIAL_EMAIL_SPLIT_CHAR = "@"
CODACCOUNT.GetCountryLabels = function ()
	local f35_local0 = {}
	for f35_local4, f35_local5 in ipairs( CODACCOUNT.CountryCodes ) do
		table.insert( f35_local0, Engine[0xED84C33EC5F01EA]( "CODACCOUNT/CODA_COUNTRY_" .. f35_local5 ) )
	end
	return f35_local0
end

CODACCOUNT.GetCountryCodeIndex = function ( f34_arg0 )
	for f34_local3, f34_local4 in ipairs( CODACCOUNT.CountryCodes ) do
		if f34_local4 == f34_arg0 then
			return f34_local3
		end
	end
	return nil
end

CODACCOUNT.IsEnabled = function ()
	return Dvar[0x9E5BE3B4BBA4E0E]( 0x7156E1260CE80E4 ) == true
end

CODACCOUNT.ForceAnonymousAccount = function ()
	return Engine[0xC6AD5341E93DFB3]()
end

CODACCOUNT.AccountRegistrationEnabled = function ()
	local f31_local0 = CODACCOUNT.IsEnabled()
	if f31_local0 then
		f31_local0 = not CODACCOUNT.ForceAnonymousAccount()
	end
	return f31_local0
end

CODACCOUNT.GetErrorString = function ( f30_arg0 )
	if CONDITIONS.IsMobileOrMobileSim() then
		local f30_local0 = CODACCOUNT.MobileErrorStrings[f30_arg0]
		if f30_local0 then
			return f30_local0
		end
	end
	return CODACCOUNT.ErrorStrings[f30_arg0]
end

CODACCOUNT.FilterDisplayName = function ( f29_arg0 )
	if f29_arg0 and 0 < #f29_arg0 then
		local f29_local0 = split( f29_arg0, "#" )
		return f29_local0[1]
	else
		return ""
	end
end

CODACCOUNT.FilterDisplayID = function ( f28_arg0 )
	if f28_arg0 and 0 < #f28_arg0 then
		local f28_local0 = split( f28_arg0, "#" )
		return f28_local0[2]
	else
		return ""
	end
end

CODACCOUNT.HideLoginInfo = function ( f27_arg0 )
	local f27_local0
	if not String.IsNilOrEmpty( f27_arg0 ) then
		f27_local0 = string.rep( "*", #f27_arg0 )
		if not f27_local0 then
		
		else
			return f27_local0
		end
	end
	f27_local0 = ""
end

CODACCOUNT.AutoMobileLogin = function ( f26_arg0 )
	AccountRegistration[0x315F899835E5B3C]( f26_arg0._controllerIndex )
end

CODACCOUNT.Login = function ( f25_arg0, f25_arg1 )
	local f25_local0 = f25_arg0._controllerIndex
	local f25_local1 = AccountRegistration[0xBB7128EDE524DB8]( f25_arg0.InputEmail:GetEditText() )
	local f25_local2 = ""
	local f25_local3 = f25_arg0.InputPassword:GetEditText()
	if f25_arg1 then
		AccountRegistration[0x5B19EA551964516]( f25_local0, f25_local1, f25_local3 )
	else
		AccountRegistration[0x16DAA6E90F403D3]( f25_local0, f25_local1, f25_local2, f25_local3 )
	end
end

CODACCOUNT.Logout = function ( f24_arg0, f24_arg1 )
	if Dvar[0x9E5BE3B4BBA4E0E]( 0xD8F2C82D5785199 ) then
		LUI.FlowManager.RequestCloseAllMenus()
	else
		local f24_local0 = "MainMenuMobile"
		if CONDITIONS.IsMenuInStack( f24_local0 ) then
			ACTIONS.PopMenuStackUpToMenu( f24_local0, false )
		end
	end
	if f24_arg1 then
		DataSources.frontEnd.mobile.openLoginPopupOnLogout:SetValue( f24_arg0, true )
	end
	AccountRegistration[0xEE1A847AE4ACD5C]( f24_arg0 )
end

CODACCOUNT.DisplayValidity = function ( f23_arg0 )
	local f23_local0 = false
	for f23_local4, f23_local5 in ipairs( f23_arg0._inputs ) do
		if not CODACCOUNT.ValidateLoginInput( f23_arg0, f23_local5:GetTextElement(), f23_local5:GetEditText() ) then
			ACTIONS.AnimateSequence( f23_local5.EditBox, "Invalid" )
			f23_local0 = true
		else
			ACTIONS.AnimateSequence( f23_local5.EditBox, "Valid" )
		end
	end
	if f23_arg0.EmailErrorMessage and f23_arg0.PasswordErrorMessage then
		f23_local1 = f23_arg0.EmailErrorMessage
		f23_local3 = f23_local1
		f23_local1 = f23_local1.SetAlpha
		if f23_local0 then
			f23_local4 = 1
		else
			f23_local4 = 0
		end
		f23_local1( f23_local3, f23_local4 )
		f23_local1 = f23_arg0.PasswordErrorMessage
		f23_local3 = f23_local1
		f23_local1 = f23_local1.SetAlpha
		if f23_local0 then
			f23_local4 = 1
		else
			f23_local4 = 0
		end
		f23_local1( f23_local3, f23_local4 )
		if f23_arg0.EmailWarning and f23_arg0.PasswordWarning then
			f23_local1 = f23_arg0.EmailWarning
			f23_local3 = f23_local1
			f23_local1 = f23_local1.SetAlpha
			if f23_local0 then
				f23_local4 = 1
			else
				f23_local4 = 0
			end
			f23_local1( f23_local3, f23_local4 )
			f23_local1 = f23_arg0.PasswordWarning
			f23_local3 = f23_local1
			f23_local1 = f23_local1.SetAlpha
			if f23_local0 then
				f23_local4 = 1
			else
				f23_local4 = 0
			end
			f23_local1( f23_local3, f23_local4 )
		end
	elseif f23_arg0.ErrorMessage then
		f23_local1 = f23_arg0.ErrorMessage
		f23_local3 = f23_local1
		f23_local1 = f23_local1.SetAlpha
		if f23_local0 then
			f23_local4 = 1
		else
			f23_local4 = 0
		end
		f23_local1( f23_local3, f23_local4 )
	end
end

CODACCOUNT.ValidateLoginInputs = function ( f22_arg0 )
	local f22_local0 = true
	for f22_local4, f22_local5 in ipairs( f22_arg0._inputs ) do
		if not CODACCOUNT.ValidateLoginInput( f22_arg0, f22_local5:GetTextElement(), f22_local5:GetEditText() ) then
			f22_local0 = false
			break
		end
	end
	return f22_local0
end

CODACCOUNT.ValidateLoginInput = function ( f18_arg0, f18_arg1, f18_arg2 )
	local f18_local0 = function ( f21_arg0, f21_arg1, f21_arg2, f21_arg3 )
		if f18_arg0.isDefault then
			f21_arg1 = Engine[0xED84C33EC5F01EA]( 0xD93C367AA0BF458 )
		end
		if f21_arg1 then
			if f21_arg2 then
				f21_arg2:setText( f21_arg1 )
			elseif f18_arg0.ErrorMessage then
				f18_arg0.ErrorMessage:setText( Engine[0xED84C33EC5F01EA]( f21_arg3, f21_arg1 ) )
			end
		elseif CONDITIONS.IsMobileOrMobileSim() and f18_arg0.ErrorMessage then
			f18_arg0.ErrorMessage:setText( "" )
		end
		local f21_local0
		if f21_arg0 then
			f21_local0 = f21_arg0
		else
			f21_local0 = not f18_arg0.isDefault
		end
		return f21_local0
	end
	
	local f18_local1 = function ()
		REGISTRATION.UpdatePasswordLogin( f18_arg0 )
		local f20_local0, f20_local1 = REGISTRATION.CheckIsPassing( REGISTRATION.PasswordRulesLogin )
		return f18_arg0( f20_local0, f20_local1, f18_arg0.PasswordErrorMessage, 0x84DD2BD74CD0B73 )
	end
	
	local f18_local2 = function ()
		local f19_local0 = AccountRegistration[0xBB7128EDE524DB8]( f18_arg0 )
		REGISTRATION.UpdateEmail( f19_local0 )
		local f19_local1, f19_local2 = REGISTRATION.CheckIsPassing( REGISTRATION.EmailRules, f19_local0 )
		return f18_arg0( f19_local1, f19_local2, f18_arg0.EmailErrorMessage, 0x22DE8730254914E )
	end
	
	local f18_local3 = f18_arg1.isPassword
	if not f18_local3 then
		f18_local3 = f18_arg1.Text
		if f18_local3 then
			f18_local3 = f18_arg1.Text.isPassword
		end
	end
	local f18_local4 = f18_arg1.isEmail
	if not f18_local4 then
		f18_local4 = f18_arg1.Text
		if f18_local4 then
			f18_local4 = f18_arg1.Text.isEmail
		end
	end
	if f18_local3 then
		f18_arg1.isValid = f18_local1()
	elseif f18_local4 then
		f18_arg1.isValid = f18_local2()
	else
		LUI.FlowManager.RequestDevErrorPopup( "CODAccountLogin requires email and password inputs" )
	end
	return f18_arg1.isValid
end

CODACCOUNT.RefreshLoginButton = function ( f16_arg0 )
	assert( f16_arg0.ButtonLogin )
	local f16_local0 = function ()
		for f17_local3, f17_local4 in ipairs( f16_arg0._inputs ) do
			local f17_local5 = f17_local4:GetTextElement()
			if not f17_local5.isValid then
				return false
			end
		end
		return true
	end
	
	f16_arg0.ButtonLogin.isDisabled = not f16_local0()
end

CODACCOUNT.SetupForgotPassword = function ( f14_arg0 )
	f14_arg0:AddGamepadEventCallback( "button_alt1", function ( f15_arg0, f15_arg1 )
		Engine[0xA265A859B7C189E]( f15_arg1.controller or f15_arg0._controllerIndex, 0, Engine[0x2A1487D44730DE5]( Engine[0xED84C33EC5F01EA]( 0x52E5A0676CE79B7 ) ) )
	end )
end

CODACCOUNT.GetCountryCode = function ( f13_arg0 )
	local f13_local0 = AccountRegistration[0x3D8A5C2D4ABC6B8]( f13_arg0 )
	if String.IsNilOrEmpty( f13_local0 ) then
		f13_local0 = CODACCOUNT.CountryCodes[1]
	end
	return f13_local0
end

CODACCOUNT.GetTimezoneFromCountryCode = function ( f12_arg0 )
	if String.IsNilOrEmpty( f12_arg0 ) then
		f12_arg0 = CODACCOUNT.CountryCodes[1]
	end
	local f12_local0 = CSV.atviCountryRegions.cols
	local f12_local1 = StringTable[0x2DCF0973239E909]( CSV.atviCountryRegions.file, f12_local0.countryCode, f12_arg0, f12_local0.timezone )
	if String.IsNilOrEmpty( f12_local1 ) then
		local f12_local2 = CSV.ReadRow( CSV.atviCountryRegions, 0 )
		f12_local1 = f12_local2.timezone
	end
	return f12_local1
end

CODACCOUNT.IsRegionContentLocked = function ()
	if Dvar[0x9E5BE3B4BBA4E0E]( 0xC999B83A2545EC7 ) then
		local f11_local0 = nil
		local f11_local1 = Dvar[0x54084D7CA2317BB]( 0x7380B7FD77D59F1 )
		if not String.IsNilOrEmpty( f11_local1 ) then
			f11_local0 = String.SplitAsSet( String.RemoveWhitespace( f11_local1 ), "," )
		end
		if f11_local0 and f11_local0[CODACCOUNT.GetTimezoneFromCountryCode( CODACCOUNT.GetCountryCode( Engine[0x45B054C920178E9]() ) )] then
			return false
		else
			return true
		end
	else
		return false
	end
end

CODACCOUNT.MobileCompleteUpgradeAccountGamerProfile = function ( f10_arg0 )
	Engine[0x9694388D6DAC134]( "mobileHasCompletedUpgradeAccountPopup", 1, f10_arg0 )
	Engine[0xB81A5136C5503E4]( "updategamerprofile " .. f10_arg0 )
end

CODACCOUNT.MobileShowUpgradeAccountPopup = function ( f6_arg0, f6_arg1, f6_arg2 )
	local f6_local0 = {
		title = Engine[0xEB2A2834B76AEA4]( Engine[0xED84C33EC5F01EA]( 0xACD5944FA42D642 ) ),
		message = Engine[0xED84C33EC5F01EA]( 0x1AD5D0CC98E11D2 ),
		noLabel = Engine[0xED84C33EC5F01EA]( 0x3D56476A25DFD86 ),
		yesLabel = Engine[0xED84C33EC5F01EA]( 0xA9AA5D110263597 ),
		controllerIndex = f6_arg1,
		yesAction = function ( f9_arg0 )
			METRICS.RecordMobileLoginFunnel( f6_arg0, "Upgrade_Acct_Prompt", "Click", "Go_Upgrade" )
			ACTIONS.LeaveMenu( f6_arg0 )
			LUI.FlowManager.RequestRestoreMenu( "MainMenuMobile", nil, f6_arg0, true )
			PanelUtils[0x2A78A81BBDF6918]()
			CODACCOUNT.MobileCompleteUpgradeAccountGamerProfile( f6_arg0 )
			CODACCOUNT.MobileOpenWebBrowserUpgradeSoftAccount( f6_arg0 )
		end,
		noAction = function ( f8_arg0 )
			METRICS.RecordMobileLoginFunnel( f6_arg0, "Upgrade_Acct_Prompt", "Click", "Go_Back" )
			ACTIONS.LeaveMenu( f8_arg0 )
		end,
		popupInitializedCallback = function ( f7_arg0 )
			METRICS.RecordMobileLoginFunnel( f6_arg0, "Upgrade_Acct_Prompt", "Render" )
		end
	}
	if f6_arg2 then
		METRICS.RecordMobileLoginFunnel( f6_arg1, f6_arg2, "Click", "Upgrade" )
	end
	LUI.FlowManager.RequestPopupMenu( nil, "PopupYesNo", true, f6_arg1, false, f6_local0, nil, true, true )
end

CODACCOUNT.MobileRegisterToAccountUpgradeState = function ( f4_arg0, f4_arg1, f4_arg2 )
	if not f4_arg2 then
		
	else
		
	end
	for f4_local3, f4_local4 in ipairs( {
		nil,
		"GetSoftAccountUpgradeStateSuccess",
		"GetSoftAccountUpgradeStateFailure"
	} ) do
		f4_arg0:registerEventHandler( f4_local4, function ( element, event )
			local f5_local0 = event.options or {}
			f4_arg0( element, f4_arg0, f5_local0.state or 0 )
		end )
	end
	AccountRegistration[0x58BB8441559C154]( f4_arg1 )
end

CODACCOUNT.MobileOpenWebBrowserUpgradeSoftAccount = function ( f3_arg0 )
	if String.IsNilOrEmpty( Dvar[0x54084D7CA2317BB]( 0x6424E08FA3EF05 ) ) then
		return 
	end
	local f3_local0 = nil
	if CONDITIONS.IsIOS() then
		f3_local0 = "ios"
	elseif CONDITIONS.IsAndroid() then
		f3_local0 = "and"
	else
		f3_local0 = ""
	end
	local f3_local1 = {
		{
			index = "playerId",
			value = Engine[0x29DFACECF20DE0E]( f3_arg0 ),
			condition = Dvar[0x9E5BE3B4BBA4E0E]( 0x4225AD83D8348CF )
		},
		{
			index = "u",
			value = DataSources.frontEnd.primaryPlayerUserName:GetValue( f3_arg0 ),
			condition = Dvar[0x9E5BE3B4BBA4E0E]( 0x56687BA5396DB64 )
		},
		{
			index = "dwToken",
			value = AccountRegistration[0xD758399BAB6786F]( f3_arg0 ),
			condition = Dvar[0x9E5BE3B4BBA4E0E]( 0x3889B48C8AA55C3 )
		},
		{
			index = "platform",
			value = f3_local0,
			condition = Dvar[0x9E5BE3B4BBA4E0E]( 0xC1B5A04E7A05D07 )
		},
		{
			index = "sessionId",
			value = Web[0xFD99C8AF791D114](),
			condition = Dvar[0x9E5BE3B4BBA4E0E]( 0x93ECDDAEE2EF50 )
		},
		{
			index = "titleId",
			value = Web[0x95048386C44CB92](),
			condition = Dvar[0x9E5BE3B4BBA4E0E]( 0xD2AC0DA529B341E )
		}
	}
	local f3_local2 = true
	for f3_local9, f3_local10 in pairs( f3_local1 ) do
		if f3_local10.condition then
			local f3_local6 = f3_local8
			local f3_local7
			if f3_local2 then
				f3_local7 = "?"
			else
				f3_local7 = "&"
			end
			local f3_local8 = f3_local6 .. f3_local7 .. f3_local10.index .. "=" .. f3_local10.value
			if f3_local2 then
				f3_local2 = false
			end
		end
	end
	ACTIONS.ShowWebBrowserFromEnum( f3_arg0, f3_local8 )
end

local f0_local0 = function ( f2_arg0 )
	if String.IsNilOrEmpty( f2_arg0 ) then
		return ""
	else
		local f2_local0 = CODACCOUNT.PARTIAL_EMAIL_CHAR_NUMBER
		local f2_local1 = CODACCOUNT.PARTIAL_EMAIL_SPLIT_CHAR
		local f2_local2 = String.Split( f2_arg0, f2_local1 )
		if #f2_local2 ~= 2 then
			return string.rep( "*", #f2_arg0 )
		else
			return string.sub( f2_arg0, 1, f2_local0 ) .. string.rep( "*", #f2_local2[1] - f2_local0 ) .. f2_local1 .. f2_local2[2]
		end
	end
end

CODACCOUNT.GetPartialEmailText = function ( f1_arg0 )
	local f1_local0 = f0_local0( f1_arg0 )
	local f1_local1 = Engine[0xED84C33EC5F01EA]
	local f1_local2 = 0xDD0DC935E5ACA00
	return f1_local1( Engine[0x7D3158A9539A355]( f1_local0 ) )
end

