-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:49
MobileDailyLineupUtils = MobileDailyLineupUtils or {}
local f0_local0 = {
	currentScore = 500,
	currentDay = 2,
	daysLoggedIn = 2,
	dayCount = 7,
	title = "Daily Lineup",
	milestoneCount = 7,
	days = {
		{
			assignmentCount = 1,
			assignments = {
				{
					description = "Login on Day 1",
					title = "Daily Assignment",
					isComplete = true,
					scoreRewarded = 300
				}
			}
		},
		{
			assignmentCount = 1,
			assignments = {
				{
					description = "Login on Day 2",
					title = "Daily Assignment",
					isComplete = true,
					scoreRewarded = 200
				}
			}
		},
		{
			assignmentCount = 1,
			assignments = {
				{
					description = "Login on Day 3",
					title = "Daily Assignment",
					isComplete = false,
					scoreRewarded = 200
				}
			}
		},
		{
			assignmentCount = 1,
			assignments = {
				{
					description = "Login on Day 4",
					title = "Daily Assignment",
					isComplete = false,
					scoreRewarded = 200
				}
			}
		},
		{
			assignmentCount = 1,
			assignments = {
				{
					description = "Login on Day 5",
					title = "Daily Assignment",
					isComplete = false,
					scoreRewarded = 200
				}
			}
		},
		{
			assignmentCount = 1,
			assignments = {
				{
					description = "Login on Day 6",
					title = "Daily Assignment",
					isComplete = false,
					scoreRewarded = 200
				}
			}
		},
		{
			assignmentCount = 1,
			assignments = {
				{
					description = "Login on Day 7",
					title = "Daily Assignment",
					isComplete = false,
					scoreRewarded = 200
				}
			}
		}
	},
	milestones = {
		{
			itemCount = 1,
			scoreNeeded = 200,
			items = {
				{
					assetCount = 1,
					id = 1,
					title = "Mask Off",
					type = LOOT.itemTypes.CHARM,
					rarity = LOOT.Rarity.RARE,
					assets = {
						{
							uri = "ui_charm_157",
							type = MobileStoreUtils.AssetTypes.Image
						}
					}
				}
			}
		},
		{
			itemCount = 1,
			scoreNeeded = 400,
			items = {
				{
					assetCount = 1,
					id = 2,
					title = "Death's Trio",
					type = LOOT.itemTypes.PLAYERCARD,
					rarity = LOOT.Rarity.EPIC,
					assets = {
						{
							uri = "ui_playercard_009",
							type = MobileStoreUtils.AssetTypes.Image
						}
					}
				}
			}
		},
		{
			itemCount = 1,
			scoreNeeded = 600,
			items = {
				{
					assetCount = 1,
					id = 1,
					title = "Mask Off",
					type = LOOT.itemTypes.CHARM,
					rarity = LOOT.Rarity.RARE,
					assets = {
						{
							uri = "ui_charm_157",
							type = MobileStoreUtils.AssetTypes.Image
						}
					}
				}
			}
		},
		{
			itemCount = 1,
			scoreNeeded = 800,
			items = {
				{
					assetCount = 1,
					id = 2,
					title = "Death's Trio",
					type = LOOT.itemTypes.PLAYERCARD,
					rarity = LOOT.Rarity.EPIC,
					assets = {
						{
							uri = "ui_playercard_009",
							type = MobileStoreUtils.AssetTypes.Image
						}
					}
				}
			}
		},
		{
			itemCount = 1,
			scoreNeeded = 1000,
			items = {
				{
					assetCount = 1,
					id = 1,
					title = "Mask Off",
					type = LOOT.itemTypes.CHARM,
					rarity = LOOT.Rarity.RARE,
					assets = {
						{
							uri = "ui_charm_157",
							type = MobileStoreUtils.AssetTypes.Image
						}
					}
				}
			}
		},
		{
			itemCount = 1,
			scoreNeeded = 1200,
			items = {
				{
					assetCount = 1,
					id = 1,
					title = "Mask Off",
					type = LOOT.itemTypes.CHARM,
					rarity = LOOT.Rarity.RARE,
					assets = {
						{
							uri = "ui_charm_157",
							type = MobileStoreUtils.AssetTypes.Image
						}
					}
				}
			}
		},
		{
			itemCount = 1,
			scoreNeeded = 1400,
			items = {
				{
					assetCount = 1,
					id = 3,
					title = "Dune Buggy",
					type = LOOT.itemTypes.VEHICLE_CAMO,
					rarity = LOOT.Rarity.LEGENDARY,
					assets = {
						{
							uri = "ui_veh_atv_camo_showcase_025",
							type = MobileStoreUtils.AssetTypes.Image
						}
					}
				}
			}
		}
	}
}
local f0_local1 = 0
local f0_local2 = 0
MobileDailyLineupUtils.popupClosed = false
MobileDailyLineupUtils.usingOnlineEventFramework = false
local f0_local3 = function ( f21_arg0, f21_arg1 )
	
end

local f0_local4 = function ( f20_arg0 )
	f0_local0.daysLoggedIn = 0
	f0_local0( f20_arg0, ONLINE_EVENTS.EventPhase.UPCOMING )
	f0_local0( f20_arg0, ONLINE_EVENTS.EventPhase.POST_EVENT )
	f0_local0( f20_arg0, ONLINE_EVENTS.EventPhase.ACTIVE )
end

MobileDailyLineupUtils.ImportData = function ( f17_arg0, f17_arg1 )
	local f17_local0 = function ( f19_arg0, f19_arg1, f19_arg2 )
		for f19_local3, f19_local4 in pairs( f19_arg2 ) do
			if type( f19_local3 ) == "number" then
				f17_arg0( f19_arg0, f19_arg1:GetDataSourceAtIndex( f19_local3 - 1, f19_arg0 ), f19_local4 )
			end
			if type( f19_local4 ) == "table" then
				f17_arg0( f19_arg0, f19_arg1[f19_local3], f19_local4 )
			else
				f19_arg1[f19_local3]:SetValue( f19_arg0, f19_local4 )
			end
		end
	end
	
	if MobileDailyLineupUtils.usingOnlineEventFramework then
		f0_local0( f17_arg1 )
	end
	f17_local0( f17_arg1, DataSources.frontEnd.dailyLineup, f0_local0 )
	local f17_local1 = function ( f18_arg0, f18_arg1 )
		if MobileDailyLineupUtils.usingOnlineEventFramework then
			f17_arg0( f17_arg0 )
		end
		f17_arg0( f17_arg0, DataSources.frontEnd.dailyLineup, f17_arg0 )
	end
	
	f17_arg0:registerEventHandler( "events_progress", f17_local1 )
	f17_arg0:registerEventHandler( "online_event_schedule_reorder", f17_local1 )
end

MobileDailyLineupUtils.SetPopupClosed = function ( f16_arg0 )
	MobileDailyLineupUtils.popupClosed = f16_arg0
end

MobileDailyLineupUtils.SetDayDataSource = function ( f15_arg0, f15_arg1 )
	local f15_local0 = DataSources.frontEnd.dailyLineup.currentDay:GetValue( f15_arg1 )
	if f15_local0 == nil then
		return 
	else
		local f15_local1 = DataSources.frontEnd.dailyLineup.days:GetDataSourceAtIndex( f15_local0 - 1, f15_arg1 )
		if f15_local1 == nil then
			return 
		else
			f15_arg0:SetDataSource( f15_local1, f15_arg1 )
		end
	end
end

MobileDailyLineupUtils.SetDayText = function ( f14_arg0, f14_arg1 )
	local f14_local0 = DataSources.frontEnd.dailyLineup.currentDay:GetValue( f14_arg1 )
	local f14_local1 = DataSources.frontEnd.dailyLineup.dayCount:GetValue( f14_arg1 )
	if f14_local0 == nil or f14_local1 == nil then
		return 
	else
		f14_arg0:setText( Engine[0xED84C33EC5F01EA]( 0x3B3B06722A0ED6E, f14_local0, f14_local1 ), 0 )
	end
end

MobileDailyLineupUtils.SetDailyAssignmentsText = function ( f13_arg0, f13_arg1 )
	local f13_local0 = DataSources.frontEnd.dailyLineup.daysLoggedIn:GetValue( f13_arg1 )
	local f13_local1 = DataSources.frontEnd.dailyLineup.dayCount:GetValue( f13_arg1 )
	if f13_local0 == nil or f13_local1 == nil then
		return 
	else
		f13_arg0:setText( Engine[0xED84C33EC5F01EA]( 0x40FBC8E5337FF40, f13_local0, f13_local1 ), 0 )
	end
end

MobileDailyLineupUtils.SetDailyAssignmentDataSource = function ( f12_arg0, f12_arg1, f12_arg2 )
	local f12_local0 = f12_arg2:GetDataSourceAtIndex( f0_local0, f12_arg1 )
	if f12_local0 == nil then
		return 
	else
		f12_arg0:SetDataSource( f12_local0, f12_arg1 )
	end
end

MobileDailyLineupUtils.SetCheckboxAnimation = function ( f11_arg0, f11_arg1, f11_arg2 )
	local f11_local0 = f11_arg2:GetValue( f11_arg1 )
	if f11_local0 == nil then
		return 
	end
	local f11_local1 = f11_arg0
	local f11_local2 = f11_arg0.AnimateSequence
	local f11_local3
	if f11_local0 then
		f11_local3 = "Checked"
	else
		f11_local3 = "Unchecked"
	end
	f11_local2( f11_local1, f11_local3 )
end

MobileDailyLineupUtils.UpdateRewardCriteriaLabel = function ( f10_arg0, f10_arg1 )
	local f10_local0 = DataSources.frontEnd.dailyLineup.selectedMilestone:GetValue( f10_arg1 )
	if f10_local0 == nil then
		return 
	end
	local f10_local1 = DataSources.frontEnd.dailyLineup.milestones:GetDataSourceAtIndex( f10_local0, f10_arg1 )
	if f10_local1 == nil then
		return 
	end
	local f10_local2 = DataSources.frontEnd.dailyLineup.currentScore:GetValue( f10_arg1 )
	local f10_local3 = f10_local1.scoreNeeded:GetValue( f10_arg1 )
	if f10_local2 == nil or f10_local3 == nil then
		return 
	end
	local f10_local4 = f10_local3 - f10_local2
	if f10_local4 <= 0 then
		f10_arg0.RewardCriteriaLabel:setText( Engine[0xED84C33EC5F01EA]( 0xB4EC880DF9D16D7 ), 0 )
		ACTIONS.AnimateSequence( f10_arg0, "RewardAchieved" )
	else
		f10_arg0.RewardCriteriaLabel:setText( Engine[0xED84C33EC5F01EA]( 0x52902AF581A1651, f10_local4 ), 0 )
		ACTIONS.AnimateSequence( f10_arg0, "RewardUnachieved" )
	end
end

MobileDailyLineupUtils.SetMilestones = function ( f9_arg0, f9_arg1 )
	local f9_local0 = DataSources.frontEnd.dailyLineup.milestoneCount:GetValue( f9_arg1 )
	if f9_local0 == nil or f9_local0 <= 1 then
		return 
	end
	for f9_local1 = f9_local0 - 1, 0, -1 do
		local f9_local4 = MenuBuilder.BuildRegisteredType( "MobileDailyLineupPopupMilestone", {
			controllerIndex = f9_arg1,
			index = f9_local1
		} )
		f9_local4.id = "Milestone" .. f9_local1
		if f9_local1 ~= 0 then
			local f9_local5 = LAYOUT.GetElementWidth( f9_local4 )
			local f9_local6 = (LAYOUT.GetElementWidth( f9_arg0 ) - f9_local5) / (f9_local0 - 1)
			f9_local4:SetAnchorsAndPosition( 0, 1, 0, 1, f9_local5 + (f9_local1 - 1) * f9_local6, f9_local5 + f9_local1 * f9_local6, 0, LAYOUT.GetElementHeight( f9_local4 ) )
		end
		f9_arg0:addElement( f9_local4 )
		f9_arg0[f9_local4.id] = f9_local4
		local f9_local5 = DataSources.frontEnd.dailyLineup.milestones:GetDataSourceAtIndex( f9_local1, f9_arg1 )
		if f9_local5 ~= nil then
			f9_arg0[f9_local4.id]:SetDataSource( f9_local5, f9_arg1 )
		end
	end
	DataSources.frontEnd.dailyLineup.selectedMilestone:SetValue( f9_arg1, f9_local0 - 1 )
end

MobileDailyLineupUtils.SetMilestoneIndex = function ( f8_arg0, f8_arg1 )
	f8_arg0._milestoneIndex = f8_arg1.index
end

MobileDailyLineupUtils.SetProgressionElements = function ( f6_arg0, f6_arg1 )
	f6_arg0:SubscribeToModelThroughElement( f6_arg0, "scoreNeeded", function ()
		local f7_local0 = f6_arg0._milestoneIndex
		local f7_local1 = DataSources.frontEnd.dailyLineup.currentScore:GetValue( f6_arg0 )
		local f7_local2 = f6_arg0:GetDataSource()
		f7_local2 = f7_local2.scoreNeeded:GetValue( f6_arg0 )
		if f7_local1 == nil or f7_local2 == nil or DataSources.frontEnd.dailyLineup.milestoneCount:GetValue( f6_arg0 ) == nil then
			return 
		end
		local f7_local3 = 0
		if 0 < f7_local0 then
			local f7_local4 = DataSources.frontEnd.dailyLineup.milestones:GetDataSourceAtIndex( f7_local0 - 1, f6_arg0 )
			if f7_local4 == nil then
				return 
			end
			f7_local3 = f7_local4.scoreNeeded:GetValue( f6_arg0 )
			if f7_local3 == nil then
				return 
			end
		end
		if f7_local2 <= f7_local3 then
			return 
		end
		local f7_local4 = math.max( (f7_local1 - f7_local3) / (f7_local2 - f7_local3), 0 )
		f6_arg0.ProgressionMilestone:Lock()
		if 1 <= f7_local4 then
			f7_local4 = 1
			f6_arg0.ProgressionMilestone:Unlock()
		end
		f6_arg0.ProgressionBar:SetProgressionValue( f7_local4, LAYOUT.GetElementWidth( f6_arg0 ) )
	end )
end

MobileDailyLineupUtils.SetButton = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg1:SubscribeToModelThroughElement( f3_arg0, "itemCount", function ()
		local f5_local0 = f3_arg0:GetDataSource()
		f5_local0 = f5_local0.items
		if f5_local0 == nil then
			return 
		else
			local f5_local1 = f5_local0:GetDataSourceAtIndex( f3_arg0, f3_arg0 )
			if f5_local1 == nil then
				return 
			else
				local f5_local2 = f5_local1.rarity:GetValue( f3_arg0 )
				if f5_local2 == nil then
					return 
				else
					local f5_local3 = MobileStoreUtils.RARITY_IMAGES[f5_local2]
					if f5_local3 == nil then
						return 
					else
						f3_arg0.RarityImage:setImage( RegisterMaterial( f5_local3.small ) )
						local f5_local4 = f5_local1.assetCount:GetValue( f3_arg0 )
						if f5_local4 == nil then
							return 
						else
							local f5_local5 = MobileStoreUtils.GetAssetTable( f3_arg0, f5_local1.assets, f5_local4 )
							local f5_local6 = f5_local5[MobileStoreUtils.AssetTypes.Image]
							if f5_local6 == nil then
								return 
							else
								f3_arg0.Button:SetupButton( {
									removeEquipBanner = true,
									mobileHideFooter = true,
									buttonData = {
										image = f5_local6
									}
								} )
								local f5_local7 = DataSources.frontEnd.dailyLineup.currentScore:GetValue( f3_arg0 )
								local f5_local8 = f3_arg0:GetDataSource()
								f5_local8 = f5_local8.scoreNeeded:GetValue( f3_arg0 )
								if f5_local7 == nil or f5_local8 == nil then
									return 
								else
									f3_arg0.Button:SetDisabled( f5_local7 < f5_local8 )
								end
							end
						end
					end
				end
			end
		end
	end )
	f3_arg0:SubscribeToModel( DataSources.frontEnd.dailyLineup.selectedMilestone:GetModel( f3_arg2 ), function ()
		local f4_local0 = DataSources.frontEnd.dailyLineup.selectedMilestone:GetValue( f3_arg0 )
		if f4_local0 == nil then
			return 
		else
			f3_arg0.Button:SetSelected( f4_local0 == f3_arg0._milestoneIndex )
		end
	end )
end

MobileDailyLineupUtils.UpdateSelectedMilestone = function ( f2_arg0, f2_arg1 )
	DataSources.frontEnd.dailyLineup.selectedMilestone:SetValue( f2_arg1, f2_arg0._milestoneIndex )
end

MobileDailyLineupUtils.ShowDailyLogin = function ( f1_arg0 )
	LUI.FlowManager.RequestPopupMenu( nil, "MobileDailyLineupPopup", true, f1_arg0, false, nil, nil, true, true )
end

