-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
CLIENTCHARACTER = CLIENTCHARACTER or {}
CLIENTCHARACTER.GetCharacterDataSources = function ( f11_arg0, f11_arg1, f11_arg2 )
	local f11_local0 = LUI.DataSourceFromList.new( LUI.DataSourceInGlobalModel.new( f11_arg2 .. ".count" ) )
	f11_local0.MakeDataSourceAtIndex = Lobby.GetLobbyMemberDataSourceAtIndex( f11_arg2 )
	return f11_local0:GetDataSourceAtIndex( f11_arg1, f11_arg0 )
end

CLIENTCHARACTER.GetDataSourcesOfTeam = function ( f10_arg0, f10_arg1, f10_arg2, f10_arg3 )
	local f10_local0 = {}
	local f10_local1 = LUI.DataSourceInGlobalModel.new( f10_arg2 .. ".count" )
	local f10_local2 = LUI.DataSourceFromList.new( f10_local1 )
	f10_local2.MakeDataSourceAtIndex = Lobby.GetLobbyMemberDataSourceAtIndex( f10_arg2 )
	local f10_local3 = math.min( f10_arg3, f10_local1:GetValue( f10_arg0 ) or 0 )
	for f10_local4 = 0, f10_local3, 1 do
		local f10_local7 = f10_local2:GetDataSourceAtIndex( f10_local4, f10_arg0 )
		if f10_local7.team:GetValue( f10_arg0 ) == f10_arg1 then
			table.insert( f10_local0, f10_local7 )
		end
	end
	return f10_local0
end

CLIENTCHARACTER.GetLocalPlayerCharacterIndex = function ( f9_arg0, f9_arg1 )
	local f9_local0 = LUI.DataSourceInGlobalModel.new( f9_arg1 .. ".localPlayerModelIndex" )
	return f9_local0:GetValue( f9_arg0 )
end

CLIENTCHARACTER.InvalidatePlayerCustomizationVersion = function ( f7_arg0 )
	local f7_local0 = function ( f8_arg0 )
		local f8_local0 = LUI.DataSourceInGlobalModel.new( f8_arg0 .. "." .. CLIENTCHARACTER.GetLocalPlayerCharacterIndex( f7_arg0, f8_arg0 ) .. ".clientCharacterCustomizationVersion" )
		f8_local0:SetValue( f7_arg0, -1 )
	end
	
	f7_local0( Lobby.AllMembersPath )
	f7_local0( Lobby.SquadMembersPath )
	if CONDITIONS.IsMagmaGameMode() and IsPrivateMatch() then
		local f7_local1 = LUI.DataSourceInGlobalModel.new( Lobby.BRPrivateLobbySquadMembersPath .. ".localSquadIndex" )
		f7_local1 = f7_local1:GetValue( f7_arg0 )
		if f7_local1 < Lobby.MaxSquadsPerTeam then
			f7_local0( Lobby.BRPrivateLobbySquadMembersPath .. "." .. f7_local1 )
		end
	end
end

CLIENTCHARACTER.GetSuperFactionIndex = function ( f6_arg0, f6_arg1, f6_arg2 )
	local f6_local0 = f6_arg1.selectedOperatorIndex:GetValue( f6_arg0 )
	if f6_arg2 then
		local f6_local1 = f6_arg1.team:GetValue( f6_arg0 )
		if f6_local1 == Teams.allies then
			f6_local0 = OPERATOR.SuperFaction.WEST
		elseif f6_local1 == Teams.axis then
			f6_local0 = OPERATOR.SuperFaction.EAST
		end
	end
	return f6_local0
end

CLIENTCHARACTER.GetData = function ( f5_arg0, f5_arg1, f5_arg2, f5_arg3, f5_arg4 )
	local f5_local0 = f5_arg2
	local f5_local1 = {
		isMyPlayer = f5_local0.isMyPlayer:GetValue( f5_arg0, {
			defaultValue = false
		} )
	}
	local f5_local2 = Lobby.GetPlayerCardDataForPartyMember( f5_arg0, f5_local0 )
	if not f5_arg4 then
		f5_arg4 = CLIENTCHARACTER.GetSuperFactionIndex( f5_arg0, f5_local0, f5_arg3 )
	end
	f5_local1.bodyModel, f5_local1.headModel = Lobby.GetModelDetailsFromPlayerCard( f5_local2, f5_arg4, f5_arg0, f5_local1.isMyPlayer )
	if CoD.IsDMZMatch() and f5_local1.isMyPlayer then
		local f5_local3 = DMZ.GetEquippedInstanceWeaponTable( WEAPON.PrimarySlot )
		f5_local1.primaryWeaponModel = WEAPON.GetWeaponModelName( f5_local3.weapon, f5_local3, {
			includeStickers = true,
			includeCamos = true,
			includeAttachments = true
		} )
		local f5_local4 = DMZ.GetEquippedInstanceWeaponTable( WEAPON.SecondarySlot )
		f5_local1.secondaryWeaponModel = WEAPON.GetWeaponModelName( f5_local4.weapon, f5_local4, {
			includeStickers = true,
			includeCamos = true,
			includeAttachments = true
		} )
	else
		local f5_local3, f5_local4 = Lobby.GetWeaponLoadoutDetailsFromPlayerCard( f5_local2, 1, f5_arg0 )
		f5_local1.primaryRef = f5_local4
		local f5_local5, f5_local6 = Lobby.GetWeaponLoadoutDetailsFromPlayerCard( f5_local2, 2, f5_arg0 )
		f5_local1.secondaryRef = f5_local6
		f5_local1.primaryWeaponModel, f5_local1.secondaryWeaponModel = Lobby.TrySwapWeapons( f5_local3, f5_local5 )
	end
	f5_local1.petRef = Lobby.GetPetFromPlayerCard( f5_local2, f5_arg4 )
	if f5_local1.petRef then
		f5_local1.petModel = OPERATOR.GetPetModel( f5_local1.petRef )
	end
	f5_local1.xuid = f5_local0.xuid:GetValue( f5_arg0 )
	return f5_local1
end

CLIENTCHARACTER.GetLocalPlayerData = function ( f4_arg0, f4_arg1 )
	local f4_local0 = OPERATOR.GetLocalPlayerCharacterData( f4_arg0, f4_arg1 )
	f4_local0.isMyPlayer = true
	local f4_local1 = OPERATOR.GetPetForEquippedOperator
	local f4_local2 = f4_arg0
	local f4_local3
	if not f4_arg1 then
		f4_local3 = f4_arg1
	else
		f4_local3 = OPERATOR.GetSelectedOperatorIndex( f4_arg0 )
	end
	f4_local0.petRef = f4_local1( f4_local2, f4_local3 )
	f4_local0.petModel = OPERATOR.GetPetModel( f4_local0.petRef )
	f4_local0.xuid = Engine[0x29DFACECF20DE0E]( f4_arg0 )
	return f4_local0
end

CLIENTCHARACTER.GetDebugData = function ( f3_arg0 )
	local f3_local0 = {}
	local f3_local1 = CSV.ReadRow( CSV.operatorSkinsDebug, f3_arg0 )
	f3_local0.bodyModel = f3_local1.bodyModel
	f3_local0.headModel = f3_local1.headModel
	f3_local0.petRef = f3_local1.petRef
	f3_local0.petModel = OPERATOR.GetPetModel( f3_local0.petRef )
	f3_local0.primaryWeaponModel = f3_local1.weaponModel
	return f3_local0
end

CLIENTCHARACTER.BuildContainerAndWidgets = function ( f2_arg0, f2_arg1, f2_arg2 )
	assert( f2_arg0 )
	local f2_local0 = {
		menu = f2_arg0,
		controllerIndex = f2_arg1
	}
	local f2_local1 = f2_arg2.dataSourcePath
	if not f2_local1 then
		f2_local1 = Lobby.AllMembersPath
	end
	f2_local0.dataSourcePath = f2_local1
	f2_local1 = f2_arg2.maxCharacterNum
	if not f2_local1 then
		f2_local1 = FrontEndScene.MaxLobbyCharacters
	end
	f2_local0.maxCharacterNum = f2_local1
	f2_local0.teamToDisplay = f2_arg2.teamToDisplay
	f2_local0.brPrivateMatchSquads = f2_arg2.brPrivateMatchSquads
	f2_local0.forceSuperfactionBasedOnTeam = f2_arg2.forceSuperfactionBasedOnTeam or false
	f2_local0.showDetailWidget = f2_arg2.showDetailWidget or false
	f2_local0.playIdleAnimations = f2_arg2.playIdleAnimations and f2_arg2.playIdleAnimations or not Engine[0xCBCF315DE9B8AC6]()
	f2_local0.playIntroAnimations = f2_arg2.playIntroAnimations or false
	f2_local0.waitForFastFileGameWorkComplete = f2_arg2.waitForFastFileGameWorkComplete or false
	f2_local0.streamModelsForAllSuperfactions = f2_arg2.streamModelsForAllSuperfactions or false
	if not f2_arg0.clientCharacterContainer then
		f2_local1 = MenuBuilder.BuildRegisteredType( "ClientCharacterContainer", f2_local0 )
		f2_local1.id = "ClientCharacterContainer"
		f2_arg0:addElement( f2_local1 )
		f2_arg0.clientCharacterContainer = f2_local1
	end
	return f2_arg0.clientCharacterContainer
end

CLIENTCHARACTER.HidePets = function ( f1_arg0 )
	for f1_local0 = 1, #f1_arg0, 1 do
		FrontEndScene.SetCharacterVisible( f1_arg0[f1_local0], false, true )
	end
end

