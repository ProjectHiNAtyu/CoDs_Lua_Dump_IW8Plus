-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 27-09-2025 22:41
Cac = Cac or {}
STREAK = STREAK or {}
Cac.FirstStreakIndex = 0
Cac.LastStreakIndex = 2
Cac.MaxStreaks = 3
Cac.MaxStreakScore = 1500
STREAK.none = "none"
STREAK.AC130_WEAPON_25MM_ID = 1
STREAK.AC130_WEAPON_40MM_ID = 2
STREAK.AC130_WEAPON_105MM_ID = 3
STREAK.AC130_WEAPON_25MM_AMMO_MAX = 30
STREAK.AC130_WEAPON_40MM_AMMO_MAX = 5
STREAK.AC130_WEAPON_105MM_AMMO_MAX = 1
STREAK.Types = {
	LETHAL = "LETHAL",
	SUPPORT = "SUPPORT"
}
STREAK.Juggernaut = {
	Executing = 4294967295,
	Active = 1,
	Inactive = 0
}
STREAK.GetImage = function ( f27_arg0 )
	local f27_local0 = StringTable.DIFCHIGDFB( CSV.streaks.file, CSV.streaks.cols.ref, f27_arg0, CSV.streaks.cols.icon )
	local f27_local1
	if f27_local0 == "" then
		f27_local1 = "white"
	else
		f27_local1 = f27_local0
	end
	return f27_local1
end

STREAK.GetProgressionImage = function ( f26_arg0 )
	local f26_local0 = StringTable.DIFCHIGDFB( CSV.streaks.file, CSV.streaks.cols.ref, f26_arg0, CSV.streaks.cols.progressionImage )
	local f26_local1
	if f26_local0 == "" then
		f26_local1 = "white"
	else
		f26_local1 = f26_local0
	end
	return f26_local1
end

STREAK.GetTutorialVideo = function ( f25_arg0 )
	return tostring( StringTable.DIFCHIGDFB( CSV.streaks.file, CSV.streaks.cols.ref, f25_arg0, CSV.streaks.cols.tutorialVideo ) )
end

STREAK.AreAllSlotsFilled = function ( f24_arg0 )
	for f24_local3, f24_local4 in ddlpairs( f24_arg0 ) do
		if f24_local4.killstreak:get() == STREAK.none then
			return false
		end
	end
	return true
end

STREAK.GetUnlockTokens = function ( f23_arg0 )
	local f23_local0 = PlayerData.BFFBGAJGD( f23_arg0, CoD.StatsGroup.Common )
	return f23_local0.killstreakUnlockTokens:get()
end

Cac.GetStreakFullImage = function ( f22_arg0 )
	return StringTable.DIFCHIGDFB( CSV.streaks.file, CSV.streaks.cols.ref, f22_arg0, CSV.streaks.cols.fullImage )
end

Cac.GetSmallImage = function ( f21_arg0 )
	return StringTable.DIFCHIGDFB( CSV.streaks.file, CSV.streaks.cols.ref, f21_arg0, CSV.streaks.cols.smallImage )
end

STREAK.GetScore = function ( f20_arg0 )
	return StringTable.DIFCHIGDFB( CSV.streaks.file, CSV.streaks.cols.ref, f20_arg0, CSV.streaks.cols.score )
end

STREAK.GetKills = function ( f19_arg0 )
	return StringTable.DIFCHIGDFB( CSV.streaks.file, CSV.streaks.cols.ref, f19_arg0, CSV.streaks.cols.kills )
end

STREAK.SortPlayerData = function ( f17_arg0 )
	local f17_local0 = {}
	for f17_local4, f17_local5 in ddlpairs( f17_arg0 ) do
		local f17_local6 = f17_local5.killstreak:get()
		table.insert( f17_local0, {
			ref = f17_local6,
			kills = tonumber( STREAK.GetKills( f17_local6 ) ) or 0
		} )
	end
	table.sort( f17_local0, function ( f18_arg0, f18_arg1 )
		if f18_arg0.ref == STREAK.none and f18_arg1.ref ~= STREAK.none then
			return false
		elseif f18_arg1.ref == STREAK.none and f18_arg0.ref ~= STREAK.none then
			return true
		else
			return f18_arg0.kills < f18_arg1.kills
		end
	end )
	for f17_local4, f17_local5 in ddlpairs( f17_arg0 ) do
		f17_local5.killstreak:set( f17_local0[f17_local4 + 1].ref )
	end
end

STREAK.GetSupportCost = function ( f16_arg0 )
	return StringTable.DIFCHIGDFB( CSV.streaks.file, CSV.streaks.cols.ref, f16_arg0, CSV.streaks.cols.supportCost )
end

STREAK.GetKills = function ( f15_arg0 )
	return StringTable.DIFCHIGDFB( CSV.streaks.file, CSV.streaks.cols.ref, f15_arg0, CSV.streaks.cols.kills )
end

STREAK.GetName = function ( f14_arg0 )
	return Engine.CBBHFCGDIC( StringTable.DIFCHIGDFB( CSV.streaks.file, CSV.streaks.cols.ref, f14_arg0, CSV.streaks.cols.name ) )
end

Cac.GetStreakDesc = function ( f13_arg0 )
	return Engine.CBBHFCGDIC( StringTable.DIFCHIGDFB( CSV.streaks.file, CSV.streaks.cols.ref, f13_arg0, CSV.streaks.cols.desc ) )
end

Cac.IsStreakInUse = function ( f12_arg0 )
	local f12_local0
	if f12_arg0 == "none" or f12_arg0 == "" then
		f12_local0 = false
	else
		f12_local0 = true
	end
	return f12_local0
end

Cac.GetEquippedStreakCount = function ( f11_arg0, f11_arg1 )
	local f11_local0 = 0
	for f11_local1 = Cac.FirstStreakIndex, Cac.LastStreakIndex, 1 do
		if f11_arg0.killstreakSetups[f11_local1].killstreak:GetValue( f11_arg1 ) ~= "none" then
			f11_local0 = f11_local0 + 1
		end
	end
	return f11_local0
end

STREAK.IsUnlocked = function ( f10_arg0, f10_arg1 )
	local f10_local0 = false
	if Engine.BHICADFIHA() then
		local f10_local1 = Dvar.IBEGCHEFE( "OLKMKMTKRO" )
		if not f10_local1 then
			f10_local0 = f10_local1
		else
			f10_local0 = Dvar.IBEGCHEFE( "NQRLNKMTSL" )
		end
	end
	local f10_local1
	if not f10_local0 then
		f10_local1 = f10_local0
	else
		f10_local1 = PlayerData.BFFBGAJGD( f10_arg1, CoD.StatsGroup.Common )
		f10_local1 = f10_local1.killstreakUnlocked[f10_arg0]:get() == 1
	end
	return f10_local1
end

STREAK.Unlock = function ( f9_arg0, f9_arg1 )
	local f9_local0 = PlayerData.BFFBGAJGD( f9_arg0, CoD.StatsGroup.Common )
	local f9_local1 = f9_local0.killstreakUnlockTokens:get()
	assert( 0 < f9_local1 )
	f9_local0.killstreakUnlockTokens:set( f9_local1 - 1 )
	f9_local0.killstreakUnlocked[f9_arg1]:set( 1 )
end

STREAK.GetUnlockText = function ( f8_arg0, f8_arg1 )
	return PROGRESSION.GetUnlockText( f8_arg0, CSV.streakUnlockTable, f8_arg1 )
end

STREAK.IsNukeStreak = function ( f7_arg0 )
	return StringTable.DIFCHIGDFB( CSV.streaks.file, CSV.streaks.cols.index, f7_arg0, CSV.streaks.cols.ref ) == "nuke"
end

Cac.GetStreakUnlockRank = function ( f6_arg0 )
	return StringTable.DIFCHIGDFB( CSV.streakUnlockTable.file, CSV.streakUnlockTable.cols.ref, f6_arg0, CSV.streakUnlockTable.cols.unlockRank )
end

Cac.GetLethalStreakStats = function ( f4_arg0 )
	local f4_local0 = {}
	for f4_local1 = 0, StringTable.BFHCAIIDA( CSV.streaks.file ), 1 do
		local f4_local4 = CSV.ReadRow( CSV.streaks, f4_local1 )
		if f4_local4 ~= nil and f4_local4.streakType == STREAK.Types.LETHAL then
			local f4_local5 = PlayerData.BFFBGAJGD( f4_arg0, CoD.StatsGroup.Ranked )
			f4_local5 = f4_local5.lethalScorestreakStats[f4_local4.ref]
			local f4_local6 = {
				ref = f4_local4.ref,
				name = Engine.CBBHFCGDIC( f4_local4.name ),
				desc = f4_local4.desc,
				image = f4_local4.smallImage,
				uses = f4_local5.uses:get(),
				extraStat1 = f4_local5.extraStat1:get(),
				killsPerUse = f4_local6.extraStat1 / (f4_local6.uses and f4_local6.uses or 1)
			}
			table.insert( f4_local0, f4_local6 )
		end
	end
	table.sort( f4_local0, function ( f5_arg0, f5_arg1 )
		return f5_arg1.extraStat1 < f5_arg0.extraStat1
	end )
	return f4_local0
end

Cac.GetSupportStreakStats = function ( f2_arg0 )
	local f2_local0 = {}
	for f2_local1 = 0, StringTable.BFHCAIIDA( CSV.streaks.file ), 1 do
		local f2_local4 = CSV.ReadRow( CSV.streaks, f2_local1 )
		if f2_local4 ~= nil and f2_local4.streakType == STREAK.Types.SUPPORT then
			local f2_local5 = f2_local4.extraRecordType
			local f2_local6 = PlayerData.BFFBGAJGD( f2_arg0, CoD.StatsGroup.Ranked )
			f2_local6 = f2_local6.supportScorestreakStats[f2_local4.ref]
			local f2_local7 = {
				ref = f2_local4.ref,
				name = Engine.CBBHFCGDIC( f2_local4.name ),
				desc = Engine.CBBHFCGDIC( f2_local4.desc ),
				image = f2_local4.smallImage
			}
			local f2_local8
			if 0 < #f2_local5 then
				f2_local8 = Engine.CBBHFCGDIC( f2_local5 )
				if not f2_local8 then
				
				else
					f2_local7.extraRecordType = f2_local8
					f2_local7.uses = f2_local6.uses:get()
					f2_local7.extraStat1 = f2_local6.extraStat1:get()
					table.insert( f2_local0, f2_local7 )
				end
			end
			f2_local8 = f2_local5
		end
	end
	table.sort( f2_local0, function ( f3_arg0, f3_arg1 )
		return f3_arg1.uses < f3_arg0.uses
	end )
	return f2_local0
end

STREAK.GetStatsTable = function ( f1_arg0 )
	local f1_local0 = {}
	for f1_local1 = 0, StringTable.BFHCAIIDA( CSV.streaks.file ), 1 do
		local f1_local4 = CSV.ReadRow( CSV.streaks, f1_local1 )
		if f1_local4 ~= nil and f1_local4.streakType ~= "" and 0 < tonumber( f1_local4.showInMenus ) then
			local f1_local5, f1_local6 = nil
			if f1_local4.streakType == STREAK.Types.LETHAL then
				local f1_local7 = PlayerData.BFFBGAJGD( f1_arg0, CoD.StatsGroup.Ranked )
				f1_local5 = f1_local7.playerStats.lethalScorestreakStats[f1_local4.ref]
			elseif f1_local4.streakType == STREAK.Types.SUPPORT then
				local f1_local7 = PlayerData.BFFBGAJGD( f1_arg0, CoD.StatsGroup.Ranked )
				f1_local5 = f1_local7.playerStats.supportScorestreakStats[f1_local4.ref]
				f1_local6 = f1_local4.extraRecordType
			end
			if f1_local5 == nil then
				DebugPrint( f1_local4.ref .. " streak not found in playerStats" )
			else
				table.insert( f1_local0, {
					ref = f1_local4.ref,
					name = f1_local4.name,
					image = STREAK.GetProgressionImage( f1_local4.ref ),
					uses = f1_local5.uses:get(),
					extraStat1 = f1_local5.extraStat1:get(),
					streakType = f1_local4.streakType,
					extraRecordType = f1_local6
				} )
			end
		end
	end
	return f1_local0
end

