-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 17-11-2025 01:22
DYN_ATTACHMENT = DYN_ATTACHMENT or {}
DYN_ATTACHMENT.DynamicWidgetType = {
	LASER = 2,
	SCOPE = 6,
	BARREL = 9,
	STOCK = 7,
	MUZZLE = 0,
	RECEIVER = 5,
	MAGAZINE = 4,
	OTHER = 10,
	GUARD = 3,
	UNDERBARREL = 1,
	FIRETYPE = 8
}
DYN_ATTACHMENT.DynamicWidgetTypeName = {
	[DYN_ATTACHMENT.DynamicWidgetType.MUZZLE] = "Muzzle",
	[DYN_ATTACHMENT.DynamicWidgetType.UNDERBARREL] = "UnderBarrel",
	[DYN_ATTACHMENT.DynamicWidgetType.LASER] = "Laser",
	[DYN_ATTACHMENT.DynamicWidgetType.GUARD] = "Guard",
	[DYN_ATTACHMENT.DynamicWidgetType.MAGAZINE] = "Magazine",
	[DYN_ATTACHMENT.DynamicWidgetType.RECEIVER] = "Receiver",
	[DYN_ATTACHMENT.DynamicWidgetType.SCOPE] = "Scope",
	[DYN_ATTACHMENT.DynamicWidgetType.STOCK] = "Stock",
	[DYN_ATTACHMENT.DynamicWidgetType.FIRETYPE] = "Firetype",
	[DYN_ATTACHMENT.DynamicWidgetType.BARREL] = "Barrel",
	[DYN_ATTACHMENT.DynamicWidgetType.OTHER] = "Other"
}
DYN_ATTACHMENT.DynamicAnimationType = {
	SINGLE_ELEMENT = 0,
	MULTIPLE_ELEMENT = 1
}
DYN_ATTACHMENT.DynamicUnderBarrelType = {
	BIPOD = 2,
	LAUNCHER = 1,
	GRIP = 0,
	BAYONET = 3
}
DYN_ATTACHMENT.StreamedImageAction = {
	REMOVE = 2,
	ADD = 1,
	NONE = 0
}
DYN_ATTACHMENT.TypeCSVFile = {
	[DYN_ATTACHMENT.DynamicWidgetType.RECEIVER] = CSV.DynamicWeaponReceiverTable,
	[DYN_ATTACHMENT.DynamicWidgetType.MUZZLE] = CSV.DynamicWeaponMuzzleTable,
	[DYN_ATTACHMENT.DynamicWidgetType.UNDERBARREL] = CSV.DynamicWeaponUnderBarrelTable,
	[DYN_ATTACHMENT.DynamicWidgetType.LASER] = CSV.DynamicWeaponLaserTable,
	[DYN_ATTACHMENT.DynamicWidgetType.BARREL] = CSV.DynamicWeaponBarrelTable,
	[DYN_ATTACHMENT.DynamicWidgetType.GUARD] = CSV.DynamicWeaponGuardTable,
	[DYN_ATTACHMENT.DynamicWidgetType.MAGAZINE] = CSV.DynamicWeaponMagazineTable,
	[DYN_ATTACHMENT.DynamicWidgetType.SCOPE] = CSV.DynamicWeaponScopeTable,
	[DYN_ATTACHMENT.DynamicWidgetType.STOCK] = CSV.DynamicWeaponStockTable
}
DYN_ATTACHMENT.DebugOverrides = {
	{
		editActive = false,
		attachment = nil,
		color = COLORS.lightCyan,
		left = {
			default = 0,
			current = 0
		},
		right = {
			default = 0,
			current = 0
		},
		top = {
			default = 0,
			current = 0
		},
		bottom = {
			default = 0,
			current = 0
		},
		scale = {
			default = 1,
			current = 1
		}
	},
	{
		editActive = false,
		attachment = nil,
		color = COLORS.arenaGreenLight,
		left = {
			default = 0,
			current = 0
		},
		right = {
			default = 0,
			current = 0
		},
		top = {
			default = 0,
			current = 0
		},
		bottom = {
			default = 0,
			current = 0
		},
		scale = {
			default = 1,
			current = 1
		}
	},
	{
		editActive = false,
		attachment = nil,
		color = COLORS.lightRed,
		left = {
			default = 0,
			current = 0
		},
		right = {
			default = 0,
			current = 0
		},
		top = {
			default = 0,
			current = 0
		},
		bottom = {
			default = 0,
			current = 0
		},
		scale = {
			default = 1,
			current = 1
		}
	}
}
DYN_ATTACHMENT.AnimationCache = {
	size = 0
}
DYN_ATTACHMENT.MAX_ANIMATION_CACHE_SIZE = 200
UNDERBARREL_LAUNCHER_SUFFIX = "GL"
UNDERBARREL_BIPOD_SUFFIX = "BI"
UNDERBARREL_BAYONET_SUFFIX = "BA"
DYN_ATTACHMENT.PISTOL_REF = "pi"
DYN_ATTACHMENT.MANDATORY_UPDATE_WEAPON_NAME = ""
DYN_ATTACHMENT.MAX_VISIBLE_ATTACHMENTS = 8
DYN_ATTACHMENT.STREAMER_NAME = "DYN_Streamer"
DYN_ATTACHMENT.ClearCache = function ( f41_arg0 )
	if not f41_arg0 then
		for f41_local3, f41_local4 in pairs( DYN_ATTACHMENT.AnimationCache ) do
			if f41_local3 ~= "size" then
				DYN_ATTACHMENT.AnimationCache[f41_local3] = nil
				DYN_ATTACHMENT.AnimationCache.size = DYN_ATTACHMENT.MAX_ANIMATION_CACHE_SIZE - 1
				DebugPrint( "\n ------ Dynamic Attachment Animation Cache Is Full." )
			end
		end
	else
		DYN_ATTACHMENT.AnimationCache = {
			size = 0
		}
	end
end

local f0_local0 = function ( f40_arg0, f40_arg1 )
	if f40_arg0 then
		local f40_local0 = split( f40_arg0, "," )
		for f40_local1 = 1, #f40_local0, 1 do
			if f40_local0[f40_local1] == f40_arg1 then
				return true
			end
		end
	end
	return false
end

local f0_local1 = function ( f39_arg0, f39_arg1 )
	local f39_local0 = f39_arg1.variantData
	local f39_local1 = f39_arg1.attachmentList
	local f39_local2 = f39_arg1.attachmentRef
	if f39_local0 then
		local f39_local3 = split( f39_local0, "_" )
		if 0 < #f39_local3 then
			local f39_local4 = Game.BAEHBDJCHI( f39_arg0 )
			for f39_local5 = 1, #f39_local3, 1 do
				if tonumber( f39_local3[f39_local5] ) == f39_local4 then
					return f0_local0( f39_local1, f39_local2 )
				end
			end
		else
			return f0_local0( f39_local1, f39_local2 )
		end
	end
	return false
end

DYN_ATTACHMENT.ShouldShowLaserAttachment = function ( f38_arg0, f38_arg1 )
	local f38_local0 = f38_arg1.weaponRef
	local f38_local1 = WEAPON.GetBaseRef( f38_local0, false )
	local f38_local2 = f38_arg1.attachmentRef
	local f38_local3 = nil
	local f38_local4 = StringTable.BJJBBCJGEJ( CSV.laserHideList.file, CSV.laserHideList.cols.baseWeaponRef, f38_local1 )
	if f38_local4 and 0 < f38_local4 then
		local f38_local5 = CSV.ReadRow( CSV.laserHideList, f38_local4 )
		if f38_local5 then
			if f38_local5.specialWeaponRefs and 0 < #f38_local5.specialWeaponRefs then
				local f38_local6 = split( f38_local5.specialWeaponRefs, "," )
				for f38_local7 = 1, #f38_local6, 1 do
					local f38_local10 = split( f38_local6[f38_local7], "|" )
					if f38_local10[1] == f38_local0 then
						f38_local3 = {
							variantData = f38_local10[2],
							attachmentList = f38_local5.excludedAttachments,
							attachmentRef = f38_local2
						}
					end
				end
			else
				f38_local3 = {
					variantData = f38_local5.variantID,
					attachmentList = f38_local5.excludedAttachments,
					attachmentRef = f38_local2
				}
			end
		end
	end
	if f38_local3 then
		return not f0_local0( f38_arg0, f38_local3 )
	else
		return true
	end
end

local f0_local2 = function ( f37_arg0 )
	local f37_local0 = f37_arg0.barrelIndex
	local f37_local1 = f37_arg0.guardIndex
	local f37_local2 = false
	if f37_local0 and f37_local1 then
		local f37_local3 = f37_arg0[f37_local0].ref
		local f37_local4 = f37_arg0[f37_local1].ref
		if (f37_local3 == "barshort_charlie725" or f37_local3 == "barcust_charlie725") and (f37_local4 == "guardcust_charlie725" or f37_local4 == "guard_charlie725") then
			f37_local2 = true
		end
	end
	if f37_local2 then
		f37_arg0[f37_local1].icon = "icon_dyn_attachment_sh_charlie725_guard"
		f37_arg0[f37_local1].ref = "guard_charlie725"
		f37_arg0[f37_local1].variantID = 0
	end
end

local f0_local3 = function ( f36_arg0 )
	if not CONDITIONS.InFrontend() then
		local f36_local0 = nil
		for f36_local1 = 1, #f36_arg0, 1 do
			if f36_arg0[f36_local1].type == DYN_ATTACHMENT.DynamicWidgetType.MAGAZINE then
				f36_local0 = f36_local1
			end
		end
		if f36_local0 then
			f36_arg0[f36_local0].variantID = 2
		end
	end
end

local f0_local4 = function ( f35_arg0 )
	if not CONDITIONS.InFrontend() and not Engine.CIEGIACHAE() and CONDITIONS.InKillCam() then
		for f35_local0 = 1, #f35_arg0, 1 do
			if f35_arg0[f35_local0].type == DYN_ATTACHMENT.DynamicWidgetType.RECEIVER then
				f35_arg0[f35_local0].animateSeq = "meKnife"
				f35_arg0[f35_local0].ref = "me_knife"
			end
		end
	end
end

function ReorderAttachmentTableForWeapons( f34_arg0, f34_arg1 )
	if f34_arg0 and f34_arg1 then
		local f34_local0, f34_local1 = nil
		for f34_local2 = 1, #f34_arg0, 1 do
			local f34_local5 = f34_arg0[f34_local2]
			if f34_local5 then
				if f34_local5.ref == "triggrip_sierrax" then
					f34_local0 = f34_local2
				end
				if f34_local5.ref == "rec_sierrax" then
					f34_local1 = f34_local2
				end
			end
		end
		if f34_local0 ~= nil and f34_local1 ~= nil and f34_local1 < f34_local0 then
			local f34_local2 = f34_arg0[f34_local0]
			f34_arg0[f34_local0] = f34_arg0[f34_local1]
			f34_arg0[f34_local1] = f34_local2
		end
	end
end

DYN_ATTACHMENT.SpecialWeaponUpdateFuncList = {
	{
		weaponName = "iw8_ar_kilo433_mp+back_kilo433|2+barlong_kilo433|1+drums_kilo433|1+griphip|3+hybrid_west01_kilo433|2+rec_kilo433|2+selectsemi+loot2",
		[1] = weaponRef == "",
		updateFunction = f0_local3
	},
	{
		weaponName = nil,
		weaponDisplayName = DYN_ATTACHMENT.MANDATORY_UPDATE_WEAPON_NAME,
		[1] = weaponRef == "",
		updateFunction = f0_local2
	},
	{
		weaponName = "iw8_knife_mpc+me_knifec+loot48",
		[1] = weaponRef == "",
		updateFunction = f0_local4
	},
	{
		weaponName = nil,
		weaponRef = "iw8_lm_sierrax",
		updateFunction = ReorderAttachmentTableForWeapons
	}
}
DYN_ATTACHMENT.GetUnderBarrelType = function ( f33_arg0 )
	return tonumber( StringTable.DIFCHIGDFB( CSV.DynamicWeaponUnderBarrelSpecialTable.file, CSV.DynamicWeaponUnderBarrelSpecialTable.cols.ref, f33_arg0, CSV.DynamicWeaponUnderBarrelSpecialTable.cols.type ) )
end

DYN_ATTACHMENT.GetUnderBarrelSubTypeAnimationSeq = function ( f32_arg0, f32_arg1 )
	if f32_arg0 == DYN_ATTACHMENT.DynamicUnderBarrelType.LAUNCHER then
		f32_arg1 = f32_arg1 .. UNDERBARREL_LAUNCHER_SUFFIX
	elseif f32_arg0 == DYN_ATTACHMENT.DynamicUnderBarrelType.BIPOD then
		f32_arg1 = f32_arg1 .. UNDERBARREL_BIPOD_SUFFIX
	elseif f32_arg0 == DYN_ATTACHMENT.DynamicUnderBarrelType.BAYONET then
		f32_arg1 = f32_arg1 .. UNDERBARREL_BAYONET_SUFFIX
	end
	return f32_arg1
end

DYN_ATTACHMENT.UpdateAttachmentTable = function ( f31_arg0, f31_arg1, f31_arg2, f31_arg3 )
	local f31_local0 = DYN_ATTACHMENT.DynamicUnderBarrelType.GRIP
	local f31_local1, f31_local2 = nil
	for f31_local3 = 1, #f31_arg1, 1 do
		local f31_local6 = f31_arg1[f31_local3]
		local f31_local7 = f31_local6.type
		if f31_local7 == DYN_ATTACHMENT.DynamicWidgetType.UNDERBARREL then
			f31_local0 = DYN_ATTACHMENT.GetUnderBarrelType( f31_local6.ref )
		elseif f31_local7 == DYN_ATTACHMENT.DynamicWidgetType.BARREL then
			f31_arg1.barrelIndex = f31_local3
		elseif f31_local7 == DYN_ATTACHMENT.DynamicWidgetType.GUARD then
			f31_arg1.guardIndex = f31_local3
		end
		if not f31_local7 or f31_local7 == DYN_ATTACHMENT.DynamicWidgetType.OTHER then
			local f31_local8 = f31_local6.ref
			if f31_local8 and StringTable.DIFCHIGDFB( CSV.MPAttachments.file, CSV.MPAttachments.cols.ref, f31_local8, CSV.MPAttachments.cols.category ) == "gunperk" then
				if not f31_local7 then
					f31_local6.type = DYN_ATTACHMENT.DynamicWidgetType.OTHER
				end
				f31_local6.isGunPerk = true
			end
		end
	end
	if f31_local1 then
		f31_arg1[f31_local1].animateSeq = DYN_ATTACHMENT.GetUnderBarrelSubTypeAnimationSeq( f31_local0, f31_arg1[f31_local1].animateSeq )
	end
	local f31_local3 = ""
	local f31_local4 = ""
	if not CONDITIONS.InFrontend() then
		if f31_arg2 then
			f31_local3 = DataSources.inGame.HUD.hints.interactiveObject.popup.string:GetValue( f31_arg0 )
		else
			f31_local3 = DataSources.inGame.player.currentWeapon.displayName:GetValue( f31_arg0 )
			f31_local4 = DataSources.inGame.player.currentWeapon.name:GetValue( f31_arg0 )
		end
	end
	for f31_local5 = 1, #DYN_ATTACHMENT.SpecialWeaponUpdateFuncList, 1 do
		local f31_local8 = DYN_ATTACHMENT.SpecialWeaponUpdateFuncList[f31_local5]
		local f31_local10
		if f31_local4 ~= f31_local8.weaponName and f31_local8.weaponDisplayName ~= DYN_ATTACHMENT.MANDATORY_UPDATE_WEAPON_NAME and f31_arg3 ~= f31_local8.weaponRef then
			f31_local10 = false
		else
			f31_local10 = true
		end
		if f31_local8.updateFunction and f31_local10 then
			f31_local8.updateFunction( f31_arg1, f31_arg3 )
		end
	end
end

DYN_ATTACHMENT.IsDynamicAttachmentIconsEnabled = function ()
	return Dvar.IBEGCHEFE( "NKTNRLTOSO" )
end

DYN_ATTACHMENT.IsDynamicAttachmentIconOverriden = function ( f29_arg0 )
	local f29_local0
	if f29_arg0 then
		f29_local0 = f29_arg0
	else
		f29_local0 = 0 < #f29_arg0
	end
	return f29_local0
end

DYN_ATTACHMENT.IsAttachmentVariantIconEnable = function ()
	if CONDITIONS.IsCoreMultiplayer() then
		return true
	elseif CONDITIONS.IsThirdGameMode() then
		return Dvar.IBEGCHEFE( "LMKLPKTQOO" )
	else
		
	end
end

DYN_ATTACHMENT.ShouldShowInteractiveWeaponIcon = function ( f27_arg0 )
	if CONDITIONS.InGame() then
		local f27_local0 = DataSources.inGame.HUD.hints.interactiveObject.popup.shouldShow:GetValue( f27_arg0 )
		local f27_local1 = DataSources.inGame.HUD.hints.interactiveObject.weapon.baseName:GetValue( f27_arg0 )
		local f27_local2
		if f27_local0 then
			f27_local2 = f27_local0
		elseif f27_local1 then
			f27_local2 = f27_local1
		elseif 0 >= #f27_local1 or f27_local1 == "none" then
			f27_local2 = false
		else
			f27_local2 = true
		end
		return f27_local2
	else
		return false
	end
end

DYN_ATTACHMENT.FormatDynamicAttachmentIcon = function ( f26_arg0 )
	if f26_arg0 == nil or #f26_arg0 == 0 then
		return ""
	else
		local f26_local0 = LUI.Split( f26_arg0, "/" )
		f26_local0 = LUI.Split( f26_local0[#f26_local0], "\\" )
		return string.gsub( f26_local0[#f26_local0], ".png", "" )
	end
end

DYN_ATTACHMENT.FormatDynamicAttachmentVariantIcon = function ( f25_arg0, f25_arg1, f25_arg2 )
	local f25_local0 = DYN_ATTACHMENT.FormatDynamicAttachmentIcon( f25_arg1 )
	if DYN_ATTACHMENT.IsAttachmentVariantIconEnable() and f25_arg0 and f25_arg2 and 0 < f25_arg2 then
		local f25_local1 = f25_arg2 + CSV.DynamicWeaponVariantIconMapTable.cols.base
		if f25_local1 > CSV.DynamicWeaponVariantIconMapTable.cols.imageVariantMaxCol then
			local f25_local2 = StringTable.DIFCHIGDFB( CSV.DynamicWeaponVariantIconMapTable2.file, CSV.DynamicWeaponVariantIconMapTable2.cols.ref, f25_arg0, f25_local1 - CSV.DynamicWeaponVariantIconMapTable.cols.imageVariantMaxCol + CSV.DynamicWeaponVariantIconMapTable2.cols.base )
			if f25_local2 and 0 < #f25_local2 then
				return f25_local2
			end
		end
		local f25_local2 = StringTable.DIFCHIGDFB( CSV.DynamicWeaponVariantIconMapTable.file, CSV.DynamicWeaponVariantIconMapTable.cols.ref, f25_arg0, f25_local1 )
		if f25_local2 and 0 < #f25_local2 then
			return f25_local2
		end
	end
	return f25_local0
end

DYN_ATTACHMENT.FormatDynamicAttachmentVariantAnimation = function ( f24_arg0, f24_arg1, f24_arg2 )
	if DYN_ATTACHMENT.IsAttachmentVariantIconEnable() and f24_arg0 and f24_arg2 and 0 < f24_arg2 then
		local f24_local0 = f24_arg2 + CSV.DynamicWeaponVariantIconMapTableAnim.cols.baseAnimation
		if f24_local0 > CSV.DynamicWeaponVariantIconMapTableAnim.cols.animationVariantMaxCol then
			local f24_local1 = StringTable.DIFCHIGDFB( CSV.DynamicWeaponVariantIconMapTableAnim2.file, CSV.DynamicWeaponVariantIconMapTableAnim2.cols.ref, f24_arg0, f24_local0 - CSV.DynamicWeaponVariantIconMapTableAnim.cols.animationVariantMaxCol + CSV.DynamicWeaponVariantIconMapTableAnim2.cols.baseAnimation )
			if f24_local1 and 0 < #f24_local1 then
				return f24_local1
			end
		end
		local f24_local1 = StringTable.DIFCHIGDFB( CSV.DynamicWeaponVariantIconMapTableAnim.file, CSV.DynamicWeaponVariantIconMapTableAnim.cols.ref, f24_arg0, f24_local0 )
		if f24_local1 and 0 < #f24_local1 then
			return f24_local1
		end
	end
	return f24_arg1
end

DYN_ATTACHMENT.GetFireTypeIcon = function ( f23_arg0 )
	return ATTACHMENT.FireTypeIcon[f23_arg0]
end

DYN_ATTACHMENT.GetAltModeFireTypeStringRef = function ( f22_arg0 )
	return ATTACHMENT.AltModeFireTypeStringRef[f22_arg0]
end

DYN_ATTACHMENT.GetDynamicAttachmentType = function ( f21_arg0 )
	return StringTable.DIFCHIGDFB( CSV.DynamicWeaponAttachmentTable.file, CSV.DynamicWeaponAttachmentTable.cols.ref, f21_arg0, CSV.DynamicWeaponAttachmentTable.cols.type )
end

DYN_ATTACHMENT.GetDynamicAttachmentIcon = function ( f20_arg0 )
	return StringTable.DIFCHIGDFB( CSV.DynamicWeaponAttachmentTable.file, CSV.DynamicWeaponAttachmentTable.cols.ref, f20_arg0, CSV.DynamicWeaponAttachmentTable.cols.icon )
end

DYN_ATTACHMENT.GetDynamicAttachmentAnimationSeq = function ( f19_arg0 )
	return StringTable.DIFCHIGDFB( CSV.DynamicWeaponAttachmentTable.file, CSV.DynamicWeaponAttachmentTable.cols.ref, f19_arg0, CSV.DynamicWeaponAttachmentTable.cols.animateSeq )
end

DYN_ATTACHMENT.GetDynamicAttachmentDataByRef = function ( f18_arg0 )
	local f18_local0, f18_local1 = ATTACHMENT.GetRefAndVariantID( f18_arg0 )
	local f18_local2 = {
		ref = f18_local0,
		icon = DYN_ATTACHMENT.GetDynamicAttachmentIcon( f18_local0 ),
		type = tonumber( DYN_ATTACHMENT.GetDynamicAttachmentType( f18_local0 ) ),
		animateSeq = DYN_ATTACHMENT.GetDynamicAttachmentAnimationSeq( f18_local0 )
	}
	local f18_local3 = tonumber
	local f18_local4
	if f18_local1 and not f18_local1 then
		f18_local4 = f18_local1
	else
		f18_local4 = 0
	end
	f18_local2.variantID = f18_local3( f18_local4 )
	return f18_local2
end

DYN_ATTACHMENT.GetDynamicAttachmentsTable = function ( f17_arg0 )
	local f17_local0 = split( f17_arg0, "+" )
	local f17_local1 = {}
	for f17_local2 = 2, #f17_local0, 1 do
		table.insert( f17_local1, DYN_ATTACHMENT.GetDynamicAttachmentDataByRef( f17_local0[f17_local2] ) )
	end
	table.insert( f17_local1, {
		fireType = 0,
		type = DYN_ATTACHMENT.DynamicWidgetType.OTHER
	} )
	return f17_local1
end

DYN_ATTACHMENT.GetDynamicAttachmentsTableByRef = function ( f16_arg0, f16_arg1 )
	local f16_local0 = {}
	if f16_arg0 then
		for f16_local1 = 1, #f16_arg0, 1 do
			local f16_local4 = nil
			if f16_arg1 then
				f16_local4 = f16_arg0[f16_local1][f16_arg1]
			else
				f16_local4 = f16_arg0[f16_local1]
			end
			table.insert( f16_local0, DYN_ATTACHMENT.GetDynamicAttachmentDataByRef( f16_local4 ) )
		end
	end
	table.insert( f16_local0, {
		fireType = 0,
		type = DYN_ATTACHMENT.DynamicWidgetType.OTHER
	} )
	return f16_local0
end

DYN_ATTACHMENT.GetDynamicAttachmentAnimationTable = function ( f15_arg0 )
	assert( f15_arg0 )
	return DYN_ATTACHMENT.TypeCSVFile[f15_arg0]
end

DYN_ATTACHMENT.GetDynamicAttachmentAnimationType = function ( f14_arg0 )
	if f14_arg0 == DYN_ATTACHMENT.DynamicWidgetType.RECEIVER then
		return DYN_ATTACHMENT.DynamicAnimationType.MULTIPLE_ELEMENT
	elseif f14_arg0 == DYN_ATTACHMENT.DynamicWidgetType.BARREL then
		return DYN_ATTACHMENT.DynamicAnimationType.MULTIPLE_ELEMENT
	else
		return DYN_ATTACHMENT.DynamicAnimationType.SINGLE_ELEMENT
	end
end

DYN_ATTACHMENT.GetDynamicAttachmentAnimationData = function ( f13_arg0, f13_arg1, f13_arg2, f13_arg3 )
	local f13_local0 = nil
	if f13_arg3 then
		f13_local0 = CSV.DynamicWeaponAnimationTable
	else
		f13_local0 = DYN_ATTACHMENT.GetDynamicAttachmentAnimationTable( f13_arg0 )
	end
	if f13_local0 then
		if f13_arg3 or DYN_ATTACHMENT.GetDynamicAttachmentAnimationType( f13_arg0 ) == DYN_ATTACHMENT.DynamicAnimationType.SINGLE_ELEMENT then
			local f13_local1
			if f13_arg0 and not f13_arg0 then
				f13_local1 = f13_arg0
			else
				f13_local1 = ""
			end
			f13_local1 = f13_local1 .. f13_arg1
			if DYN_ATTACHMENT.AnimationCache[f13_local1] == nil then
				local f13_local2 = StringTable.BJJBBCJGEJ( f13_local0.file, f13_local0.cols.animateSeq, f13_arg1 )
				if f13_local2 == -1 then
					return nil
				end
				local f13_local3 = StringTable.CBGJCDIHCE( f13_local0.file, f13_local2, f13_local0.cols.elementName )
				if f13_local3 == nil or #f13_local3 == 0 then
					return nil
				end
				local f13_local4 = {
					elementName = f13_local3,
					left = tonumber( StringTable.CBGJCDIHCE( f13_local0.file, f13_local2, f13_local0.cols.left ) ),
					right = tonumber( StringTable.CBGJCDIHCE( f13_local0.file, f13_local2, f13_local0.cols.right ) ),
					top = tonumber( StringTable.CBGJCDIHCE( f13_local0.file, f13_local2, f13_local0.cols.top ) ),
					bottom = tonumber( StringTable.CBGJCDIHCE( f13_local0.file, f13_local2, f13_local0.cols.bottom ) ),
					scale = tonumber( StringTable.CBGJCDIHCE( f13_local0.file, f13_local2, f13_local0.cols.scale ) ) - 1,
					image = StringTable.CBGJCDIHCE( f13_local0.file, f13_local2, f13_local0.cols.material )
				}
				if DYN_ATTACHMENT.AnimationCache.size == DYN_ATTACHMENT.MAX_ANIMATION_CACHE_SIZE then
					DYN_ATTACHMENT.ClearCache( false )
				end
				DYN_ATTACHMENT.AnimationCache.size = DYN_ATTACHMENT.AnimationCache.size + 1
				DYN_ATTACHMENT.AnimationCache[f13_local1] = f13_local4
				return f13_local4
			else
				return DYN_ATTACHMENT.AnimationCache[f13_local1]
			end
		else
			local f13_local1
			if f13_arg0 and not f13_arg0 then
				f13_local1 = f13_arg0
			else
				f13_local1 = ""
			end
		end
		f13_local1 = f13_local1 .. f13_arg1 .. f13_arg2
		if DYN_ATTACHMENT.AnimationCache[f13_local1] == nil then
			local f13_local2 = {
				{
					col = f13_local0.cols.animateSeq,
					key = f13_arg1
				},
				{
					col = f13_local0.cols.elementName,
					key = f13_arg2
				}
			}
			local f13_local3 = StringTable.CEBAGDAEJJ( f13_local0.file, f13_local2, f13_local0.cols.elementName )
			if f13_local3 == nil or #f13_local3 == 0 then
				return nil
			end
			local f13_local4 = {
				elementName = f13_local3,
				left = tonumber( StringTable.CEBAGDAEJJ( f13_local0.file, f13_local2, f13_local0.cols.left ) ),
				right = tonumber( StringTable.CEBAGDAEJJ( f13_local0.file, f13_local2, f13_local0.cols.right ) ),
				top = tonumber( StringTable.CEBAGDAEJJ( f13_local0.file, f13_local2, f13_local0.cols.top ) ),
				bottom = tonumber( StringTable.CEBAGDAEJJ( f13_local0.file, f13_local2, f13_local0.cols.bottom ) ),
				scale = tonumber( StringTable.CEBAGDAEJJ( f13_local0.file, f13_local2, f13_local0.cols.scale ) ) - 1,
				image = StringTable.CEBAGDAEJJ( f13_local0.file, f13_local2, f13_local0.cols.material )
			}
			if DYN_ATTACHMENT.AnimationCache.size == DYN_ATTACHMENT.MAX_ANIMATION_CACHE_SIZE then
				DYN_ATTACHMENT.ClearCache( false )
			end
			DYN_ATTACHMENT.AnimationCache.size = DYN_ATTACHMENT.AnimationCache.size + 1
			DYN_ATTACHMENT.AnimationCache[f13_local1] = f13_local4
			return f13_local4
		else
			return DYN_ATTACHMENT.AnimationCache[f13_local1]
		end
	else
		
	end
end

DYN_ATTACHMENT.GetDisplayedAttachmentRefTable = function ( f12_arg0 )
	local f12_local0 = {}
	for f12_local1 = 1, #f12_arg0, 1 do
		local f12_local4 = f12_arg0[f12_local1]
		if f12_local4 and 0 < #f12_local4 and ATTACHMENT.IsDisplayNameAvailable( f12_local4 ) then
			table.insert( f12_local0, f12_local4 )
		end
	end
	return f12_local0
end

DYN_ATTACHMENT.SetupWidgetStreamer = function ( f11_arg0, f11_arg1, f11_arg2 )
	if not f11_arg0.streamer then
		f11_arg0.streamer = LUI.UIElement.new()
		f11_arg0.streamer.id = DYN_ATTACHMENT.STREAMER_NAME
		f11_arg0:addElement( f11_arg0.streamer )
	end
	f11_arg0.streamer:SetupImageTableStreamer( f11_arg1, f11_arg2 )
end

DYN_ATTACHMENT.SetupWeaponAttachmentStreamer = function ( f10_arg0, f10_arg1, f10_arg2 )
	local f10_local0 = {}
	for f10_local1 = 1, #f10_arg1, 1 do
		local f10_local4 = f10_arg1[f10_local1]
		if f10_local4.type then
			local f10_local5 = DYN_ATTACHMENT.FormatDynamicAttachmentVariantIcon( f10_local4.ref, f10_local4.icon )
			if DYN_ATTACHMENT.IsDynamicAttachmentIconOverriden( f10_local5 ) then
				table.insert( f10_local0, RegisterMaterial( f10_local5 ) )
			end
		end
	end
	DYN_ATTACHMENT.SetupWidgetStreamer( f10_arg0, f10_local0, f10_arg2 )
end

DYN_ATTACHMENT.SetupGunsmithAttachmentStreamer = function ( f9_arg0, f9_arg1, f9_arg2, f9_arg3 )
	local f9_local0 = {}
	for f9_local1 = 1, #f9_arg1, 1 do
		if f9_arg1[f9_local1][f9_arg2] and 0 < #f9_arg1[f9_local1][f9_arg2] then
			table.insert( f9_local0, RegisterMaterial( f9_arg1[f9_local1][f9_arg2] ) )
		end
	end
	DYN_ATTACHMENT.SetupWidgetStreamer( f9_arg0, f9_local0, f9_arg3 )
end

DYN_ATTACHMENT.ProcessLoadoutWeaponStreamedImages = function ( f8_arg0, f8_arg1, f8_arg2 )
	local f8_local0 = {}
	local f8_local1 = PlayerData.BFFBGAJGD( f8_arg1, LOADOUT.GetLoadoutStatsGroup() )
	f8_local1 = f8_local1.squadMembers.loadouts
	for f8_local2 = 0, #f8_local1 - 1, 1 do
		local f8_local5 = f8_local1[f8_local2]
		for f8_local6 = 0, #f8_local5.weaponSetups - 1, 1 do
			local f8_local9 = WEAPON.GenerateWeaponTable( f8_local5.weaponSetups[f8_local6] )
			local f8_local10 = DYN_ATTACHMENT.GetDynamicAttachmentsTable( WEAPON.GetWeaponModelName( f8_local9.weapon, f8_local9, {
				keepAkimbo = true,
				includeStickers = true,
				includeAttachments = true,
				includeCamos = true,
				useGuntableOverride = false
			} ) )
			for f8_local11 = 1, #f8_local10, 1 do
				local f8_local14 = f8_local10[f8_local11]
				if f8_local14.type then
					local f8_local15 = DYN_ATTACHMENT.FormatDynamicAttachmentVariantIcon( f8_local14.ref, f8_local14.icon )
					if DYN_ATTACHMENT.IsDynamicAttachmentIconOverriden( f8_local15 ) then
						table.insert( f8_local0, RegisterMaterial( f8_local15 ) )
					end
				end
			end
		end
	end
	local f8_local2 = LOADOUT.GetDefaultLoadouts( f8_arg1 )
	for f8_local3 = 1, #f8_local2, 1 do
		local f8_local6 = f8_local2[f8_local3]
		for f8_local7 = 1, #f8_local6.weapons, 1 do
			local f8_local9 = f8_local6.weapons[f8_local7]
			local f8_local10 = DYN_ATTACHMENT.GetDynamicAttachmentsTable( WEAPON.GetWeaponModelName( f8_local9.ref, f8_local9, {
				keepAkimbo = true,
				includeStickers = true,
				includeAttachments = true,
				isDefault = true,
				includeCamos = true,
				useGuntableOverride = false
			} ) )
			for f8_local11 = 1, #f8_local10, 1 do
				local f8_local14 = f8_local10[f8_local11]
				if f8_local14.type then
					local f8_local15 = DYN_ATTACHMENT.FormatDynamicAttachmentVariantIcon( f8_local14.ref, f8_local14.icon )
					if DYN_ATTACHMENT.IsDynamicAttachmentIconOverriden( f8_local15 ) then
						table.insert( f8_local0, RegisterMaterial( f8_local15 ) )
					end
				end
			end
		end
	end
	if f8_arg2 == DYN_ATTACHMENT.StreamedImageAction.ADD then
		Streaming.BJEHADFHFD( f8_local0 )
	elseif f8_arg2 == DYN_ATTACHMENT.StreamedImageAction.REMOVE then
		Streaming.DDDBGJJEDE( f8_local0 )
	end
end

DYN_ATTACHMENT.UpdateLoadoutWeaponStreamedImages = function ( f6_arg0, f6_arg1, f6_arg2 )
	if f6_arg2 == DYN_ATTACHMENT.StreamedImageAction.ADD then
		if Engine.EEGHCCDG( f6_arg1 ) then
			if f6_arg0.clientConnectionTimer then
				f6_arg0:RemoveElement( f6_arg0.clientConnectionTimer )
				f6_arg0.clientConnectionTimer:closeTree()
				f6_arg0.clientConnectionTimer = nil
				f6_arg0.clientConnectionTime = nil
			end
			DYN_ATTACHMENT.ProcessLoadoutWeaponStreamedImages( f6_arg0, f6_arg1, f6_arg2 )
		elseif f6_arg0.clientConnectionTimer == nil then
			f6_arg0.clientConnectionTimer = LUI.UITimer.new( {
				event = "checkClientConnection",
				interval = 100
			} )
			f6_arg0.clientConnectionTimer.id = "clientConnectionTimer"
			f6_arg0:addElement( f6_arg0.clientConnectionTimer )
			f6_arg0.clientConnectionTime = 0
			f6_arg0:registerEventHandler( "checkClientConnection", function ( element, event )
				local f7_local0 = event.controller or f6_arg0
				local f7_local1 = Engine.EEGHCCDG( f7_local0 )
				f6_arg0.clientConnectionTime = f6_arg0.clientConnectionTime + 100
				if f7_local1 or 2000 < f6_arg0.clientConnectionTime then
					f6_arg0:RemoveElement( f6_arg0.clientConnectionTimer )
					f6_arg0.clientConnectionTimer:closeTree()
					f6_arg0.clientConnectionTimer = nil
					f6_arg0.clientConnectionTime = nil
					DYN_ATTACHMENT.ProcessLoadoutWeaponStreamedImages( element, f7_local0, f6_arg0 )
				end
			end )
		end
	else
		DYN_ATTACHMENT.ProcessLoadoutWeaponStreamedImages( element, f6_arg1, f6_arg2 )
	end
end

DYN_ATTACHMENT.ReloadLoadoutWeaponStreamedImages = function ( f5_arg0, f5_arg1 )
	DYN_ATTACHMENT.UpdateLoadoutWeaponStreamedImages( f5_arg0, f5_arg1, DYN_ATTACHMENT.StreamedImageAction.REMOVE )
	DYN_ATTACHMENT.UpdateLoadoutWeaponStreamedImages( f5_arg0, f5_arg1, DYN_ATTACHMENT.StreamedImageAction.ADD )
end

DYN_ATTACHMENT.PlayDynamicAttachmentAnimation = function ( f4_arg0, f4_arg1, f4_arg2, f4_arg3, f4_arg4 )
	local f4_local0 = DYN_ATTACHMENT.GetDynamicAttachmentAnimationData( f4_arg1, f4_arg2, f4_arg3, f4_arg4 )
	if f4_local0 then
		local f4_local1 = false
		local f4_local2
		if f4_arg3 and not f4_arg3 then
			f4_local2 = f4_arg3
		else
			f4_local2 = f4_local0.elementName
		end
		local f4_local3 = f4_local0.left
		local f4_local4 = f4_local0.right
		local f4_local5 = f4_local0.top
		local f4_local6 = f4_local0.bottom
		local f4_local7 = f4_local0.scale
		local f4_local8 = f4_local0.image
		if f4_arg0[f4_local2] then
			if CONDITIONS.DynamicIconDebugEnabled() then
				local f4_local9 = COLORS.white
				for f4_local13, f4_local14 in ipairs( DYN_ATTACHMENT.DebugOverrides ) do
					if f4_local2 == (f4_local14.attachment or "") then
						f4_local14.left.default = f4_local3
						f4_local14.right.default = f4_local4
						f4_local14.top.default = f4_local5
						f4_local14.bottom.default = f4_local6
						f4_local14.scale.default = f4_local7 + 1
						if f4_local14.editActive then
						
						else
							f4_local9 = f4_local14.color
							break
						end
						f4_local3 = f4_local14.left.current
						f4_local4 = f4_local14.right.current
						f4_local5 = f4_local14.top.current
						f4_local6 = f4_local14.bottom.current
						f4_local7 = f4_local14.scale.current - 1
					end
				end
				f4_arg0[f4_local2]:SetRGBFromTable( f4_local9 )
			end
			f4_arg0[f4_local2]:SetScale( f4_local7 )
			if f4_local3 and f4_local4 and f4_local5 and f4_local6 then
				f4_local1 = true
				f4_arg0[f4_local2]:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * f4_local3, _1080p * f4_local4, _1080p * f4_local5, _1080p * f4_local6 )
			end
			if f4_local8 and 0 < #f4_local8 then
				f4_local1 = true
				f4_arg0[f4_local2]:setImage( RegisterMaterial( f4_local8 ) )
			end
		end
		return f4_local1
	else
		
	end
end

DYN_ATTACHMENT.ApplyDynamicAttachmentData = function ( f3_arg0, f3_arg1, f3_arg2, f3_arg3 )
	assert( f3_arg1 )
	assert( f3_arg2 )
	local f3_local0 = false
	local f3_local1 = f3_arg3.animateSeq
	if f3_local1 and 0 < #f3_local1 then
		f3_local0 = DYN_ATTACHMENT.PlayDynamicAttachmentAnimation( f3_arg1, f3_arg3.type, DYN_ATTACHMENT.FormatDynamicAttachmentVariantAnimation( f3_arg3.ref, f3_local1, f3_arg3.variantID ) )
	end
	local f3_local2 = DYN_ATTACHMENT.FormatDynamicAttachmentVariantIcon( f3_arg3.ref, f3_arg3.icon, f3_arg3.variantID )
	if DYN_ATTACHMENT.IsDynamicAttachmentIconOverriden( f3_local2 ) then
		f3_local0 = true
		f3_arg2:setImage( RegisterMaterial( f3_local2 ) )
	end
	local f3_local3 = f3_arg1
	local f3_local4 = f3_arg1.SetAlpha
	local f3_local5
	if f3_local0 then
		f3_local5 = 1
	else
		f3_local5 = 0
	end
	f3_local4( f3_local3, f3_local5 )
	f3_local3 = f3_arg2
	f3_local4 = f3_arg2.SetAlpha
	if f3_local0 then
		f3_local5 = 1
	else
		f3_local5 = 0
	end
	f3_local4( f3_local3, f3_local5 )
end

DYN_ATTACHMENT.KillCamMergeAttachmentsByWeaponModel = function ( f2_arg0, f2_arg1 )
	if CONDITIONS.InGame() then
		local f2_local0 = {}
		for f2_local1 = 1, #f2_arg1, 1 do
			local f2_local4 = tonumber( DYN_ATTACHMENT.GetDynamicAttachmentType( f2_arg1[f2_local1] ) )
			if f2_local4 then
				f2_local0[f2_local4] = f2_local1
			end
		end
		local f2_local1 = LUI.Split( f2_arg0, "+" )
		for f2_local2 = 2, #f2_local1, 1 do
			local f2_local6 = LUI.Split( f2_local1[f2_local2], "|" )
			if not f2_local0[tonumber( DYN_ATTACHMENT.GetDynamicAttachmentType( f2_local6[1] ) )] then
				table.insert( f2_arg1, f2_local1[f2_local2] )
			end
		end
		return f2_arg1
	else
		
	end
end

DYN_ATTACHMENT.KillCamGetDynamicAttachmentRefTable = function ( f1_arg0, f1_arg1 )
	if CONDITIONS.InGame() then
		return LUI.Split( Game.BFEEGCHICA( f1_arg1, "ui_killcam_killedby_attachments_str" ), "+" )
	else
		
	end
end

