-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:04
ATTACHMENT = ATTACHMENT or {}
ATTACHMENT.opticCategory = "optic"
ATTACHMENT.scopeCategory = "scope"
ATTACHMENT.perkCategory = "gunperk"
ATTACHMENT.boltCategory = "bolts"
ATTACHMENT.boltRifleCategory = "bolt"
ATTACHMENT.boltActionCategory = "boltaction"
ATTACHMENT.charmCategory = "charm"
ATTACHMENT.gunscreenCategory = "gunscreen"
ATTACHMENT.stickerCategory = "sticker"
ATTACHMENT.receiverCategory = "receiver"
ATTACHMENT.backpieceCategory = "backpiece"
ATTACHMENT.magazineCategory = "magazine"
ATTACHMENT.loaderCategory = "loader"
ATTACHMENT.undermountCategory = "undermount"
ATTACHMENT.frontpieceCategory = "frontpiece"
ATTACHMENT.reargripCategory = "reargrip"
ATTACHMENT.reargriptwoCategory = "reargriptwo"
ATTACHMENT.camoCategory = "camo"
ATTACHMENT.slings = "slings"
ATTACHMENT.none = "none"
ATTACHMENT.upperCaseNone = "NONE"
ATTACHMENT.baseVariant = 0
ATTACHMENT.perkFlag = "gunperk_"
ATTACHMENT.akimbo = "akimbo"
ATTACHMENT.scopeSlot = "scope"
ATTACHMENT.underbarrelSlot = "underbarrel"
ATTACHMENT.modifierSlot = "modifier"
ATTACHMENT.conversionkit = "conversionkit"
ATTACHMENT.laserTag = "tag_laser_attach"
ATTACHMENT.opticTag = "tag_reflex"
ATTACHMENT.charmTag = "tag_cosmetic"
ATTACHMENT.stickerTag = "tag_sticker"
ATTACHMENT.gunscreenTag = "tag_cosdisplay"
ATTACHMENT.defaultSWhiskeyMag = "cylinder_pi_p26"
ATTACHMENT.defaultRSierraMag = "jup_jp14_pi_rsierra12_cylinder_5_12"
ATTACHMENT.defaultKappaMag = "jup_jp37_dm_kappa98_mag_stripper"
ATTACHMENT.bpTuneString = "bp_tune"
ATTACHMENT.AMMO_DISPLAY_ANGLE = -90
ATTACHMENT.MAX_CATEGORY_NUM = 12
ATTACHMENT.ALLOW_DISPLAY_NAMES = false
ATTACHMENT.FireType = {
	PUMP_ACTION = 6,
	FULLAUTO = 0,
	DOUBLEBARREL = 3,
	DOUBLEBARREL_DUALTRIGGER = 4,
	BURST = 2,
	SEMIAUTO = 1,
	BEAM = 5
}
ATTACHMENT.FireTypeIcon = {
	[ATTACHMENT.FireType.FULLAUTO] = "ui_firetype_fullauto",
	[ATTACHMENT.FireType.SEMIAUTO] = "ui_firetype_semiauto",
	[ATTACHMENT.FireType.BURST] = "ui_firetype_burst",
	[ATTACHMENT.FireType.DOUBLEBARREL] = "ui_firetype_semiauto",
	[ATTACHMENT.FireType.DOUBLEBARREL_DUALTRIGGER] = "ui_firetype_semiauto",
	[ATTACHMENT.FireType.BEAM] = "ui_firetype_spread"
}
ATTACHMENT.MobileFireTypeIcon = {
	[ATTACHMENT.FireType.FULLAUTO] = 0x3DE91F70481B45A,
	[ATTACHMENT.FireType.SEMIAUTO] = 0x25DA77FFED2662F,
	[ATTACHMENT.FireType.BURST] = 0x245B0D69FB6179C,
	[ATTACHMENT.FireType.DOUBLEBARREL] = 0x39FA5F2C442E801,
	[ATTACHMENT.FireType.DOUBLEBARREL_DUALTRIGGER] = 0x39FA5F2C442E801,
	[ATTACHMENT.FireType.BEAM] = 0x56C70A37A088F4D
}
ATTACHMENT.FireModeString = {
	[ATTACHMENT.FireType.SEMIAUTO] = 0x83A78B86F92D7EA,
	[ATTACHMENT.FireType.BURST] = 0x488A9AD429892A8,
	[ATTACHMENT.FireType.FULLAUTO] = 0xEA8840FEF58833D,
	[ATTACHMENT.FireType.DOUBLEBARREL] = 0x13C4552823F947F
}
ATTACHMENT.FireTypeStringRef = {
	full_auto_fire_mode = 0x993CC3B88C9FA0A,
	single_fire_mode = 0xCB269F6786D467B,
	burst_fire_mode = 0xB136D71FB14E42B,
	semi_auto_fire_mode = 0xB04E6977BFC5F95,
	pump_action_fire_mode = 0x596EE49A547F437,
	doublebarrel_fire_mode = 0xF980FB3D96A97C0,
	melee_fire_mode = 0xB34719585515E87,
	bolt_action_fire_mode = 0x6DAF8CB9D08D97A
}
ATTACHMENT.FireTypeEnumToStringRef = {
	[Enum[0x8FED4FCC5FA40F][0xB3870BF2D7B0881]] = "full_auto_fire_mode",
	[Enum[0x8FED4FCC5FA40F][0x91BD225AF27F1CB]] = "semi_auto_fire_mode",
	[Enum[0x8FED4FCC5FA40F][0x6960092017E1D7]] = "burst_fire_mode",
	[Enum[0x8FED4FCC5FA40F][0xC75FEFA5F625836]] = "doublebarrel_fire_mode",
	[Enum[0x8FED4FCC5FA40F][0x18753BC2E679E53]] = "doublebarrel_fire_mode",
	[Enum[0x8FED4FCC5FA40F][0x8D4F87602508D4C]] = "full_auto_fire_mode"
}
ATTACHMENT.AltModeFireTypeStringRef = {
	[ATTACHMENT.FireType.FULLAUTO] = 0x993CC3B88C9FA0A,
	[ATTACHMENT.FireType.BURST] = 0xB136D71FB14E42B,
	[ATTACHMENT.FireType.SEMIAUTO] = 0xB04E6977BFC5F95,
	[ATTACHMENT.FireType.PUMP_ACTION] = 0x596EE49A547F437
}
ATTACHMENT.AttachmentSlots = {
	nil,
	"override",
	"scope",
	"modifier",
	"visual",
	"other",
	"extra",
	"trigger",
	"reargrip",
	"muzzle",
	"underbarrel",
	"magazine",
	"backpiece",
	"frontpiece",
	"receiver",
	"conversionkit"
}
ATTACHMENT.HyperburstIcon = "ui_firetype_hyperburst"
ATTACHMENT.BASE_ID = 10000
ATTACHMENT.STOCK_OFFSET = {
	Z = 1.5904607125E-314,
	X = 0,
	Y = 0
}
ATTACHMENT.BULLPUP_STOCK_OFFSET = {
	Z = 4294967292,
	X = 4294967291,
	Y = 3
}
ATTACHMENT.LMG_STOCK_Z_OFFSET = -2
ATTACHMENT.PISTOL_STOCK_Z_OFFSET = -0.5
ATTACHMENT.FTAC_SEIGE_STOCK_Z_OFFSET = -5
ATTACHMENT.X13_STOCK_OFFSET = 3
local f0_local0 = {
	xPosition = 1.59742405E-314,
	yPosition = 4294963940,
	zPosition = 48
}
local f0_local1 = {
	xPosition = 4294961388,
	yPosition = 4294963942,
	zPosition = 48
}
local f0_local2 = {
	xAngle = 0,
	zAngle = 0,
	yAngle = 4.66726164961218E-62
}
local f0_local3 = function ()
	if not PROJECT[0x5A05E13AC947C99][0x3AC6B30FFDDFBA9] then
		local f147_local0 = Game[0x83E0D59EFF44E21]()
		local f147_local1 = Engine[0x6093D047200548]( 0x63547A82BCEA15B .. f147_local0[0xDC8F1F53D779CE8] )
		f147_local1 = f147_local1[0xDC8F1F53D779CE8]
		PROJECT[0x5A05E13AC947C99][0x3AC6B30FFDDFBA9] = {}
		for f147_local5, f147_local6 in ipairs( f147_local1 ) do
			local f147_local7 = Engine[0x6093D047200548]( 0x9A6CAE1283616D3 .. f147_local6[0xAFBBA6738B22B00] )
			PROJECT[0x5A05E13AC947C99][0x3AC6B30FFDDFBA9][f147_local7[0x9E9C01960F4C582]] = f147_local7
		end
	end
end

ATTACHMENT.GetAllAttachmentCategories = function ()
	f0_local0()
	return PROJECT[0x5A05E13AC947C99][0x3AC6B30FFDDFBA9]
end

ATTACHMENT.GetAttachmentCategoryBundleByRef = function ( f145_arg0 )
	f0_local0()
	return PROJECT[0x5A05E13AC947C99][0x3AC6B30FFDDFBA9][f145_arg0]
end

ATTACHMENT.IsValidAttachmentString = function ( f144_arg0 )
	local f144_local0
	if not String.IsNilOrEmpty( f144_arg0 ) and not ATTACHMENT.IsAttachmentRefLootIndexString( f144_arg0 ) and not ATTACHMENT.IsAttachmentRefBPTuneString( f144_arg0 ) then
		f144_local0 = not ATTACHMENT.IsStickerString( f144_arg0 )
	else
		f144_local0 = false
	end
	return f144_local0
end

ATTACHMENT.IsAttachmentRefLootIndexString = function ( f143_arg0 )
	return string.sub( f143_arg0, 1, string.len( "loot" ) ) == "loot"
end

ATTACHMENT.IsAttachmentRefBPTuneString = function ( f142_arg0 )
	return string.sub( f142_arg0, 1, string.len( ATTACHMENT.bpTuneString ) ) == ATTACHMENT.bpTuneString
end

ATTACHMENT.IsStickerString = function ( f141_arg0 )
	return string.sub( f141_arg0, 1, string.len( ATTACHMENT.stickerCategory ) ) == ATTACHMENT.stickerCategory
end

ATTACHMENT.GetStickerIndexFromCategory = function ( f140_arg0 )
	return string.sub( f140_arg0, string.len( ATTACHMENT.stickerCategory ) + 1, -1 )
end

ATTACHMENT.GetBundleByRef = function ( f139_arg0, f139_arg1 )
	Engine[0xD75F5E555D60E1]( "ATTACHMENT.GetBundleByRef" )
	if f139_arg0 == ATTACHMENT.none or f139_arg0 == nil then
		Engine[0x4D47DEF7D5ED4B9]()
		return nil
	elseif GL_HACK.IsInvalidAttachment( f139_arg0 ) then
		Engine[0x4D47DEF7D5ED4B9]()
		return nil
	elseif not ATTACHMENT.IsValidAttachmentString( f139_arg0 ) then
		Engine[0x4D47DEF7D5ED4B9]()
		return nil
	end
	local f139_local0 = ATTACHMENT.GetBaseRefForTunedAttachment( f139_arg0 )
	if String.IsNilOrEmpty( f139_local0 ) then
		Engine[0x4D47DEF7D5ED4B9]()
		return nil
	end
	local f139_local1 = Engine[0x6093D047200548]( 0xC2C9813BB16552F .. f139_local0 )
	if not f139_local1 and f139_arg1 then
		local f139_local2 = ATTACHMENT.GetChildRefFromParentRef( f139_local0 )
		if f139_local2 ~= f139_local0 then
			f139_local1 = Engine[0x6093D047200548]( 0xC2C9813BB16552F .. f139_local2 )
		end
	end
	if f139_local1 and LOOT.IsLootVisible( f139_local1 ) then
		Engine[0x4D47DEF7D5ED4B9]()
		return f139_local1
	end
	Engine[0x4D47DEF7D5ED4B9]()
	return nil
end

ATTACHMENT.GetIDByRef = function ( f138_arg0 )
	local f138_local0 = ATTACHMENT.GetBundleByRef( f138_arg0 )
	if f138_local0 then
		return f138_local0[0x28887F70BF5EBA]
	else
		return nil
	end
end

ATTACHMENT.GetBundleByID = function ( f137_arg0 )
	return ATTACHMENT.GetBundleByRef( LOOT.GetItemRef( f137_arg0 ) )
end

ATTACHMENT.GetRefByID = function ( f136_arg0 )
	return LOOT.GetItemRef( f136_arg0 )
end

ATTACHMENT.GetAllRefsByID = function ( f135_arg0 )
	local f135_local0 = ATTACHMENT.GetListBundle()
	local f135_local1 = {}
	for f135_local6, f135_local7 in pairs( f135_local0[0xA8636246CD7AB2A] ) do
		if Dvar[0x9E5BE3B4BBA4E0E]( 0xBCBEBF199EEEBE2 ) then
			if f135_local7[0x8B6F2336E5960E5] then
				local f135_local5 = Engine[0x6093D047200548]( 0xC2C9813BB16552F .. f135_local7[0x8B6F2336E5960E5] )
				if f135_local5[0x28887F70BF5EBA] == f135_arg0 then
					table.insert( f135_local1, f135_local7[0x8B6F2336E5960E5] )
				end
			end
		end
		if f135_local7[0x28887F70BF5EBA] and f135_local7[0x28887F70BF5EBA] == f135_arg0 then
			table.insert( f135_local1, f135_local7[0x8B6F2336E5960E5] )
		end
	end
	return f135_local1
end

ATTACHMENT.GetImage = function ( f134_arg0 )
	local f134_local0 = ATTACHMENT.GetBundleByRef( f134_arg0, true )
	local f134_local1 = CoD.ERROR_TEXTURE
	if f134_local0 then
		if not String.IsNilOrEmpty( f134_local0[0xAB612888528489A] ) then
			f134_local1 = f134_local0[0xAB612888528489A]
		elseif not String.IsNilOrEmpty( f134_local0[0xF238C2876631349] ) then
			f134_local1 = f134_local0[0xF238C2876631349]
		end
	end
	if String.IsNilOrEmpty( f134_local1 ) then
		local f134_local2 = CoD.ERROR_TEXTURE
		if not f134_local2 then
			f134_local1 = f134_local2
		else
			
		end
	end
	return f134_local1
end

ATTACHMENT.GetBaseName = function ( f133_arg0, f133_arg1, f133_arg2, f133_arg3, f133_arg4 )
	if not LUI.StringIsNilOrEmpty( f133_arg1 ) and not LUI.StringIsNilOrEmpty( f133_arg0 ) then
		if Dvar[0x9E5BE3B4BBA4E0E]( 0xDF90BB5C754A36F ) then
			local f133_local0 = nil
			local f133_local1 = GL_HACK.GetWeaponMPRef( f133_arg2 )
			if LUI.FlowManager.GetMenuByName( LOADOUT.GetGunsmithTabsMenuRef() ) then
				local f133_local2 = LUI.FlowManager.GetScopedData( LOADOUT.GetGunsmithTabsMenuRef() )
				if f133_local2 and f133_local2.attachmentData and f133_local2.attachmentData[f133_local1] and f133_local2.attachmentData[f133_local1].attachments then
					f133_local0 = f133_local2.attachmentData[f133_local1].attachments
				end
			end
			if not f133_local0 then
				if not Engine[0xDA52B0778DC3C7C]( f133_local1, f133_arg0 ) then
					return nil
				elseif f133_arg4 and f133_arg4.attachmentLookupFunc then
					local f133_local2 = f133_arg4.attachmentLookupFunc( f133_arg3, f133_local1 )
					if not f133_local2 then
						f133_local0 = f133_local2
					else
						f133_local0 = GL_HACK.GetAttachmentsAndBucketItems( f133_arg3, {
							isForceRequestingAttachmentData = true,
							weaponRef = f133_local1,
							wantSpecificCategory = f133_arg1,
							wantSpecificAttachRef = f133_arg0
						} )
					end
				end
				f133_local0 = GL_HACK.GetAttachmentsAndBucketItems( f133_arg3, {
					isForceRequestingAttachmentData = true,
					weaponRef = f133_local1,
					wantSpecificCategory = f133_arg1,
					wantSpecificAttachRef = f133_arg0
				} )
			end
			if f133_local0[f133_arg1] then
				for f133_local5, f133_local6 in ipairs( f133_local0[f133_arg1] ) do
					if f133_local6.ref == f133_arg0 then
						return f133_local6.baseName
					end
				end
			end
		else
			local f133_local0 = Engine[0x160CE6B682CC3D7]( GL_HACK.GetWeaponMPRef( f133_arg2 ), f133_arg0 )
			local f133_local1
			if f133_local0 then
				f133_local1 = f133_local0
			else
				f133_local1 = f133_local0.baseName
			end
			return f133_local1
		end
	end
	return nil
end

ATTACHMENT.GetAttachmentsWithBaseName = function ( f132_arg0, f132_arg1, f132_arg2, f132_arg3, f132_arg4 )
	local f132_local0 = {}
	if not LUI.StringIsNilOrEmpty( f132_arg1 ) and not LUI.StringIsNilOrEmpty( f132_arg0 ) then
		if Dvar[0x9E5BE3B4BBA4E0E]( 0xDF90BB5C754A36F ) then
			local f132_local1 = nil
			local f132_local2 = GL_HACK.GetWeaponMPRef( f132_arg2 )
			if LUI.FlowManager.GetMenuByName( LOADOUT.GetGunsmithTabsMenuRef() ) then
				local f132_local3 = LUI.FlowManager.GetScopedData( LOADOUT.GetGunsmithTabsMenuRef() )
				if f132_local3 and f132_local3.attachmentData and f132_local3.attachmentData[f132_local2] and f132_local3.attachmentData[f132_local2].attachments then
					f132_local1 = f132_local3.attachmentData[f132_local2].attachments
				end
			end
			if not f132_local1 then
				if f132_arg4 and f132_arg4.attachmentLookupFunc then
					local f132_local3 = f132_arg4.attachmentLookupFunc( f132_arg3, f132_local2 )
					if not f132_local3 then
						f132_local1 = f132_local3
					else
						f132_local1 = GL_HACK.GetAttachmentsAndBucketItems( f132_arg3, {
							isForceRequestingAttachmentData = true,
							weaponRef = f132_local2,
							wantSpecificCategory = f132_arg1
						} )
					end
				end
				f132_local1 = GL_HACK.GetAttachmentsAndBucketItems( f132_arg3, {
					isForceRequestingAttachmentData = true,
					weaponRef = f132_local2,
					wantSpecificCategory = f132_arg1
				} )
			end
			for f132_local6, f132_local7 in ipairs( f132_local1[f132_arg1] ) do
				if f132_local7.baseName == f132_arg0 then
					table.insert( f132_local0, f132_local7.ref )
				end
			end
		else
			for f132_local4, f132_local5 in ipairs( Engine[0x402E4C91B9A0535]( GL_HACK.GetWeaponMPRef( f132_arg2 ), f132_arg0 ) ) do
				table.insert( f132_local0, f132_local5.ref )
			end
		end
	end
	return f132_local0
end

ATTACHMENT.GetRefAndVariantID = function ( f131_arg0 )
	local f131_local0 = LUI.Split( ATTACHMENT.GetBaseRefForTunedAttachment( f131_arg0 ), "|" )
	return f131_local0[1], f131_local0[2]
end

ATTACHMENT.GetAttachmentModifierString = function ( f130_arg0, f130_arg1 )
	local f130_local0 = ""
	local f130_local1 = ""
	if f130_arg0 and f130_arg1 then
		if 0 < f130_arg1 then
			f130_local0 = "+"
		else
			f130_local0 = "-"
		end
		f130_local1 = Engine[0xED84C33EC5F01EA]( f130_arg0 )
	end
	return f130_local0, f130_local1
end

ATTACHMENT.GetAttachmentModifierSequences = function ( f129_arg0, f129_arg1 )
	local f129_local0 = 2
	local f129_local1 = 5
	local f129_local2 = 50
	local f129_local3 = ""
	local f129_local4 = ""
	if f129_arg0 and f129_arg1 then
		local f129_local5 = "Chevron"
		local f129_local6
		if 0 < f129_arg1 then
			f129_local6 = "Pos"
		else
			f129_local6 = "Neg"
		end
		f129_local4 = f129_local5 .. f129_local6
		f129_local5 = math.abs( f129_arg1 )
		if f129_local2 < f129_local5 then
			f129_local4 = f129_local4 .. "Unique"
		elseif f129_local1 < f129_local5 then
			f129_local4 = f129_local4 .. "3"
		elseif f129_local0 < f129_local5 then
			f129_local4 = f129_local4 .. "2"
		else
			f129_local4 = f129_local4 .. "1"
		end
		f129_local3 = Engine[0xED84C33EC5F01EA]( f129_arg0 )
	end
	return f129_local4, f129_local3
end

ATTACHMENT.GetTableFromWeaponSetup = function ( f128_arg0 )
	local f128_local0 = {}
	if f128_arg0 and f128_arg0.attachmentSetup then
		for f128_local1 = 0, #f128_arg0.attachmentSetup - 1, 1 do
			table.insert( f128_local0, ATTACHMENT.GetRefFromSetup( f128_arg0.attachmentSetup[f128_local1] ) )
		end
	end
	return f128_local0
end

ATTACHMENT.GetBaseRef = function ( f127_arg0 )
	local f127_local0 = ATTACHMENT.GetBundleByRef( f127_arg0 )
	return f127_local0[0xBE72D7E1D0B16E5]
end

ATTACHMENT.GetRefInternal = function ( f126_arg0, f126_arg1, f126_arg2, f126_arg3 )
	if f126_arg1 == nil or f126_arg1 == "none" then
		return f126_arg0
	end
	local f126_local0 = f126_arg0
	local f126_local1 = ""
	local f126_local2 = 0
	if f126_local1 == f126_arg0 then
		local f126_local3 = StringTable[0x2DCF0973239E909]( f126_arg2.file, f126_arg2.cols.weapOrClass, f126_arg1, f126_local2 )
		if f126_local3 == "" then
			local f126_local4 = StringTable[0x2DCF0973239E909]
			local f126_local5 = f126_arg2.file
			local f126_local6 = f126_arg2.cols.weapOrClass
			local f126_local7 = WEAPON.GetWeaponClass
			local f126_local8
			if not f126_arg3 then
				f126_local8 = f126_arg3
			else
				f126_local8 = f126_arg1
			end
			f126_local3 = f126_local4( f126_local5, f126_local6, f126_local7( f126_local8 ), f126_local2 )
		end
		if f126_local3 ~= "" then
			f126_local0 = f126_local3
		end
	end
	return f126_local0
end

ATTACHMENT.GetRef = function ( f125_arg0, f125_arg1, f125_arg2 )
	return f125_arg0
end

ATTACHMENT.IsTuningLootRef = function ( f124_arg0 )
	if not String.IsNilOrEmpty( f124_arg0 ) then
		local f124_local0, f124_local1 = string.find( f124_arg0, "_tuning" )
		return f124_local1 == #f124_arg0
	else
		return false
	end
end

ATTACHMENT.GetAllAdditionalAttachments = function ( f123_arg0 )
	local f123_local0 = ATTACHMENT.GetBundleByRef( f123_arg0 )
	local f123_local1 = {}
	if f123_local0 and f123_local0[0xEBD8701371CDFFE] then
		f123_local1 = f123_local0[0xEBD8701371CDFFE]
	end
	return f123_local1
end

ATTACHMENT.GetAttachmentAddition = function ( f122_arg0, f122_arg1 )
	local f122_local0 = ATTACHMENT.GetBundleByRef( f122_arg0 )
	local f122_local1 = {}
	local f122_local2 = {}
	if f122_local0 and f122_local0[0xEBD8701371CDFFE] then
		for f122_local7, f122_local8 in ipairs( f122_local0[0xEBD8701371CDFFE] ) do
			local f122_local6
			if f122_local8 then
				f122_local6 = f122_local8
			else
				f122_local6 = f122_local8[0xBD767A7E1F8180E]
			end
			if not String.IsNilOrEmpty( f122_local6 ) then
				if ATTACHMENT.IsTuningLootRef( f122_local6 ) then
					if f122_arg1 then
						table.insert( f122_local1, f122_local6 )
						f122_local2[f122_local6] = true
					end
				end
				table.insert( f122_local1, f122_local6 )
				f122_local2[f122_local6] = true
			end
		end
	end
	return f122_local1, f122_local2
end

ATTACHMENT.GetAttachmentAdditionVariantIDs = function ( f121_arg0, f121_arg1, f121_arg2, f121_arg3 )
	local f121_local0 = {}
	if not String.IsNilOrEmpty( f121_arg0 ) and not String.IsNilOrEmpty( f121_arg1 ) and f121_arg2 and f121_arg2 > ATTACHMENT.baseVariant then
		local f121_local1 = Engine[0xFC084BF31D917C5]( f121_arg0, f121_arg1, f121_arg2 )
		local f121_local2
		if f121_local1 then
			f121_local2 = f121_local1
		else
			f121_local2 = ATTACHMENT.GetBundleByRef( f121_local1[0x6DB25C2B8532150] )
		end
		if f121_local2 and not Table.IsNilOrEmpty( f121_local2[0xEBD8701371CDFFE] ) then
			for f121_local7, f121_local8 in pairs( f121_local2[0xEBD8701371CDFFE] ) do
				local f121_local9 = f121_local8[0xBD767A7E1F8180E]
				local f121_local6 = f121_local8[0xC0179EA556FF397] or 0
				if f121_local6 and not String.IsNilOrEmpty( f121_local9 ) then
					f121_local6 = f121_local6 + 1
					if ATTACHMENT.IsTuningLootRef( f121_local9 ) then
						if f121_arg3 then
							f121_local0[f121_local9] = f121_local6
						end
					end
					f121_local0[f121_local9] = f121_local6
				end
			end
		end
	end
	return f121_local0
end

ATTACHMENT.GetName = function ( f120_arg0 )
	return Engine[0xED84C33EC5F01EA]( ATTACHMENT.GetNameUnlocalized( f120_arg0 ) )
end

ATTACHMENT.GetNameUnlocalized = function ( f119_arg0 )
	local f119_local0 = ATTACHMENT.GetBundleByRef( f119_arg0, true )
	if f119_local0 then
		local f119_local1 = f119_local0[0x4BCADBA8E631B86]
		local f119_local2 = f119_local0[0x4BCADBA8E631B86]
	end
	return f119_local1 and f119_local2 or 0x0
end

ATTACHMENT.GetDesc = function ( f118_arg0 )
	if Dvar[0x9E5BE3B4BBA4E0E]( 0x1506ECFE54F6A3F ) then
		return ""
	end
	local f118_local0 = ATTACHMENT.GetBundleByRef( f118_arg0, true )
	if f118_local0 then
		local f118_local1 = f118_local0[0xCC44970C8397929]
		local f118_local2 = f118_local0[0xCC44970C8397929]
	end
	return Engine[0xED84C33EC5F01EA]( f118_local1 and f118_local2 or 0x0 )
end

ATTACHMENT.GetEquippedOptic = function ( f117_arg0 )
	local f117_local0 = f117_arg0.weapon:get()
	for f117_local4, f117_local5 in ddlpairs( f117_arg0.attachmentSetup ) do
		local f117_local6 = ATTACHMENT.GetRef( ATTACHMENT.GetRefFromSetup( f117_local5 ), f117_local0 )
		if ATTACHMENT.GetCategory( f117_local6 ) == ATTACHMENT.opticCategory then
			return f117_local6
		end
	end
	f117_local1 = WEAPON.GetWeaponDataForRef( f117_local0 )
	f117_local1 = f117_local1[0x93B8EBCC208569B]
	for f117_local5, f117_local6 in ddlpairs( f117_arg0.attachmentSetup ) do
		local f117_local7 = ATTACHMENT.GetRef( ATTACHMENT.GetRefFromSetup( f117_local6 ), f117_local0 )
		if f117_local7 ~= "none" then
			f117_local1 = f117_local1 .. "+" .. f117_local7
		end
	end
	for f117_local6, f117_local7 in pairs( Engine[0xC03D2E893CA114A]( f117_local1 ) ) do
		if Engine[0xC39811B3E085D86]( f117_local1, f117_local7 ) == ATTACHMENT.opticCategory then
			return ATTACHMENT.GetRef( f117_local7, f117_local0 )
		end
	end
	return ""
end

ATTACHMENT.GetOpticRef = function ( f116_arg0 )
	return 0x0
end

ATTACHMENT.GetOpticReticleCategory = function ( f115_arg0 )
	if String.IsNilOrEmpty( f115_arg0 ) then
		return ""
	end
	local f115_local0 = WEAPON.GetReticleCategoryForRef( f115_arg0 )
	local f115_local1
	if f115_local0 then
		f115_local1 = f115_local0[0x6C6E9BC1769C076]
		if not f115_local1 then
		
		else
			return f115_local1
		end
	end
	f115_local1 = ""
end

ATTACHMENT.SupportsCustomReticles = function ( f114_arg0 )
	if f114_arg0 == nil or #f114_arg0 == 0 then
		return false
	end
	local f114_local0 = ATTACHMENT.GetBundleByRef( f114_arg0 )
	local f114_local1
	if f114_local0 then
		f114_local1 = f114_local0[0xA51E8E50DB8EB6F]
		if not f114_local1 then
		
		else
			return not String.IsNilOrEmpty( f114_local1 )
		end
	end
	f114_local1 = 0x0
end

ATTACHMENT.ReticleTypeSupportsAltImage = function ( f113_arg0 )
	local f113_local0
	if f113_arg0 ~= "hybrid" and f113_arg0 ~= "hybridthermal" then
		f113_local0 = false
	else
		f113_local0 = true
	end
	return f113_local0
end

ATTACHMENT.GetWeaponCustomAttachmentCount = function ( f112_arg0 )
	local f112_local0 = LUI.MultiSeparatorSplit( f112_arg0, "|+" )
	local f112_local1 = 0
	table.remove( f112_local0, 1 )
	for f112_local5, f112_local6 in ipairs( f112_local0 ) do
		if ATTACHMENT.IsSelectableAttachment( f112_local6 ) then
			f112_local1 = f112_local1 + 1
		end
	end
	return f112_local1
end

ATTACHMENT.IsSelectableAttachment = function ( f111_arg0, f111_arg1 )
	local f111_local0 = f111_arg0
	if type( f111_arg0 ) == "table" then
		f111_local0 = f111_arg0.ref
	end
	if f111_local0 == ATTACHMENT.camoCategory then
		return false
	end
	local f111_local1 = ATTACHMENT.GetCategory( f111_local0 )
	local f111_local2
	if String.IsNilOrEmpty( f111_local1 ) or f111_local1 == ATTACHMENT.receiverCategory or f111_local1 == ATTACHMENT.camoCategory or f111_local1 == ATTACHMENT.none then
		f111_local2 = false
	else
		f111_local2 = true
	end
	return f111_local2
end

ATTACHMENT.ClearAttachment = function ( f110_arg0 )
	ATTACHMENT.SetPlayerDataRef( f110_arg0, ATTACHMENT.none )
	f110_arg0.variantID:set( ATTACHMENT.baseVariant )
	f110_arg0.hasBPTune:set( GUNSMITH.CAN_PRO_TUNE )
	f110_arg0.customTune[0]:set( GUNSMITH.NO_CUSTOM_TUNING_VALUE )
	f110_arg0.customTune[1]:set( GUNSMITH.NO_CUSTOM_TUNING_VALUE )
end

ATTACHMENT.ClearAllAttachments = function ( f109_arg0 )
	for f109_local3, f109_local4 in ddlpairs( f109_arg0.attachmentSetup ) do
		ATTACHMENT.ClearAttachment( f109_local4 )
	end
	WEAPON.SetEquippedReticle( f109_arg0, WEAPON.ReticleNoneValue )
end

ATTACHMENT.GetCategory = function ( f108_arg0 )
	local f108_local0 = ATTACHMENT.GetBundleByRef( f108_arg0, true )
	local f108_local1
	if f108_local0 then
		f108_local1 = string.lower( f108_local0[0xBD2E7FFB1224E91] )
		if not f108_local1 then
		
		else
			return f108_local1
		end
	end
	f108_local1 = ""
end

ATTACHMENT.IsUnlocked = function ( f107_arg0, f107_arg1, f107_arg2 )
	return Unlocks[0x3D8BD2B211DB6CC]( f107_arg2, WEAPON.GetWeaponClassAttachUnlockTablePrefix( WEAPON.GetWeaponClass( f107_arg1 ) ) .. "Attach", f107_arg1 .. "+" .. f107_arg0 )
end

ATTACHMENT.GetUnlockText = function ( f106_arg0, f106_arg1, f106_arg2, f106_arg3 )
	local f106_local0 = WEAPON.GetWeaponClass( f106_arg1 )
	local f106_local1 = ATTACHMENT.GetUnlockTable( f106_arg1 )
	local f106_local2 = f106_arg1 .. "+" .. f106_arg0
	if f106_arg3 then
		return Engine[0xED84C33EC5F01EA]( 0x7EE30798B4B0310 )
	else
		return Engine[0xED84C33EC5F01EA]( StringTable[0x2DCF0973239E909]( f106_local1, CSV.attachmentUnlockTable.cols.weaponAttachRef, f106_local2, CSV.attachmentUnlockTable.cols.ui_text ), StringTable[0x2DCF0973239E909]( f106_local1, CSV.attachmentUnlockTable.cols.weaponAttachRef, f106_local2, CSV.attachmentUnlockTable.cols.ui_text_var1 ), StringTable[0x2DCF0973239E909]( f106_local1, CSV.attachmentUnlockTable.cols.weaponAttachRef, f106_local2, CSV.attachmentUnlockTable.cols.ui_text_var2 ) )
	end
end

ATTACHMENT.GetUnlockTable = function ( f105_arg0 )
	return CSV.attachmentUnlockTable.fileRoot .. WEAPON.GetWeaponClassAttachUnlockTablePrefix( WEAPON.GetWeaponClass( f105_arg0 ) ) .. CSV.attachmentUnlockTable.fileSuffix
end

ATTACHMENT.IsNew = function ( f104_arg0, f104_arg1, f104_arg2 )
	return false
end

ATTACHMENT.ClearNew = function ( f103_arg0, f103_arg1, f103_arg2 )
	
end

ATTACHMENT.GetConflictingAttachment = function ( f102_arg0, f102_arg1 )
	local f102_local0 = ATTACHMENT.GetCategory( f102_arg1 )
	for f102_local4, f102_local5 in pairs( f102_arg0.attachments ) do
		local f102_local6 = f102_local5.ref
		if ATTACHMENT.GetCategory( f102_local6 ) == f102_local0 then
			return f102_local6
		end
	end
	return false
end

ATTACHMENT.GetAttachmentCategoryName = function ( f101_arg0 )
	local f101_local0 = ATTACHMENT.GetAttachmentCategoryBundleByRef( f101_arg0 )
	local f101_local1
	if f101_local0 then
		f101_local1 = f101_local0[0x4BCADBA8E631B86]
		if not f101_local1 then
		
		else
			return f101_local1
		end
	end
	f101_local1 = ""
end

ATTACHMENT.GetAttachmentCategoryButton = function ( f100_arg0 )
	local f100_local0 = ATTACHMENT.GetAttachmentCategoryBundleByRef( f100_arg0 )
	local f100_local1
	if f100_local0 then
		f100_local1 = f100_local0[0x1237277A7AB3419]
		if not f100_local1 then
		
		else
			return f100_local1
		end
	end
	f100_local1 = -1
end

ATTACHMENT.GetAttachmentCategoryBone = function ( f99_arg0 )
	local f99_local0 = ATTACHMENT.GetAttachmentCategoryBundleByRef( f99_arg0 )
	local f99_local1
	if f99_local0 then
		f99_local1 = f99_local0[0x55AF12DE8B43B8D]
		if not f99_local1 then
		
		else
			return f99_local1
		end
	end
	f99_local1 = ""
end

ATTACHMENT.IsCameraPreviewAvailable = function ( f98_arg0, f98_arg1 )
	local f98_local0 = nil
	if f98_arg1 == GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.BIG_GUN then
		f98_local0 = f98_arg0[0x2E08AFC96B69664]
	elseif f98_arg1 == GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.BIG_SHOTGUN then
		f98_local0 = f98_arg0[0x25CDAE7EC6E95C8]
	elseif f98_arg1 == GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.SMALL_GUN then
		f98_local0 = f98_arg0[0xFB2A11EB9AE10E9]
	end
	return f98_local0
end

ATTACHMENT.GetConfigString = function ( f97_arg0 )
	local f97_local0 = ""
	for f97_local4, f97_local5 in ipairs( f97_arg0.attachments ) do
		if f97_local5.ref ~= ATTACHMENT.none then
			if 0 < #f97_local0 then
				f97_local0 = f97_local0 .. "+"
			end
			f97_local0 = f97_local0 .. f97_local5.ref .. "|" .. f97_local5.variantID
		end
	end
	return f97_local0
end

ATTACHMENT.GetCategoryByLootID = function ( f96_arg0 )
	local f96_local0 = ATTACHMENT.GetBundleByID( f96_arg0 )
	return string.lower( f96_local0[0xBD2E7FFB1224E91] )
end

ATTACHMENT.GetNewAttachmentIDsByCategory = function ( f95_arg0, f95_arg1, f95_arg2 )
	local f95_local0 = {}
	local f95_local1 = Loot[0x3CB161A5685F7FF]( f95_arg0, f95_arg2 .. GUNSMITH.typeNamePostFix.attachment )
	if f95_local1 and 0 < #f95_local1 then
		for f95_local5, f95_local6 in ipairs( f95_local1 ) do
			if ATTACHMENT.GetCategoryByLootID( f95_local6 ) == f95_arg1 then
				table.insert( f95_local0, f95_local6 )
			end
		end
	end
	return f95_local0
end

ATTACHMENT.GetLootIDForVariant = function ( f94_arg0, f94_arg1, f94_arg2 )
	if f94_arg2 == 0 then
		return ATTACHMENT.GetIDByRef( f94_arg1 )
	end
	local f94_local0 = Engine[0xD3946E1B3E34A42]( GL_HACK.GetWeaponMPRef( f94_arg0 ), f94_arg1 )
	local f94_local1 = f94_local0[f94_arg2]
	if f94_local1 and f94_local1[0x6DB25C2B8532150] then
		local f94_local2 = ATTACHMENT.GetBundleByRef( f94_local1[0x6DB25C2B8532150] )
		if f94_local2 then
			return f94_local2[0x28887F70BF5EBA]
		end
	end
	return 0
end

ATTACHMENT.GetLootIDForRef = function ( f93_arg0 )
	if f93_arg0 ~= ATTACHMENT.none then
		local f93_local0 = ATTACHMENT.GetBundleByRef( f93_arg0 )
		if f93_local0 then
			return f93_local0[0x28887F70BF5EBA]
		end
	end
	return LOOT.emptyID
end

ATTACHMENT.IsDisplayNameAvailable = function ( f92_arg0 )
	if not ATTACHMENT.ALLOW_DISPLAY_NAMES then
		return false
	elseif f92_arg0 == nil or #f92_arg0 == 0 or f92_arg0 == "none" then
		return false
	else
		local f92_local0 = StringTable[0x2DCF0973239E909]( CSV.MPAttachments.file, CSV.MPAttachments.cols.ref, f92_arg0, CSV.MPAttachments.cols.category )
		return false
	end
end

ATTACHMENT.AppendDisplayNamesToWeaponName = function ( f91_arg0, f91_arg1 )
	if ATTACHMENT.ALLOW_DISPLAY_NAMES then
		local f91_local0 = ""
		if f91_arg1 then
			for f91_local1 = 1, #f91_arg1, 1 do
				local f91_local4 = f91_arg1[f91_local1]
				if f91_local4.ref and 0 < #f91_local4.ref and ATTACHMENT.IsDisplayNameAvailable( f91_local4.ref ) then
					if f91_local0 == "" then
						f91_local0 = ATTACHMENT.GetName( f91_local4.ref )
					else
						f91_local0 = f91_local0 .. " " .. ATTACHMENT.GetName( f91_local4.ref )
					end
				end
			end
		end
		return f91_arg0 .. " " .. f91_local0
	else
		return f91_arg0
	end
end

ATTACHMENT.AreVariantsEnabled = function ()
	return Dvar[0x9E5BE3B4BBA4E0E]( 0x2B6191240B8445D )
end

ATTACHMENT.GetOverrideDesc = function ( f89_arg0, f89_arg1, f89_arg2 )
	local f89_local0 = Engine[0x756D55D24F7B53]( GL_HACK.GetWeaponMPRef( f89_arg1 ) )
	if f89_arg2 <= #f89_local0 and 0 < f89_arg2 and f89_local0[f89_arg2][0x195253356D84EA3] then
		local f89_local1 = ATTACHMENT.GetBundleByRef( f89_arg0 )
		local f89_local2 = f89_local1[0xCC44970C8397929]
		if not String.IsNilOrEmpty( f89_local2 ) then
			return f89_local2
		end
	end
	return 0x0
end

ATTACHMENT.IsDismembermentEnabled = function ( f88_arg0 )
	return StringTable[0x2DCF0973239E909]( CSV.MPAttachments.file, CSV.MPAttachments.cols.ref, f88_arg0, CSV.MPAttachments.cols.dismembermentEnabled ) ~= ""
end

ATTACHMENT.GetRefFromSetup = function ( f87_arg0 )
	return f87_arg0.attachment:get()
end

ATTACHMENT.SetPlayerDataRef = function ( f86_arg0, f86_arg1 )
	if String.IsNilOrEmpty( f86_arg1 ) then
		f86_arg0.attachment:set( ATTACHMENT.none )
	else
		f86_arg0.attachment:set( f86_arg1 )
	end
end

ATTACHMENT.SetBaseAttachment = function ( f85_arg0, f85_arg1, f85_arg2 )
	if String.IsNilOrEmpty( f85_arg2 ) then
		f85_arg0.attachmentSetup[f85_arg1].attachment:set( ATTACHMENT.none )
	else
		f85_arg0.attachmentSetup[f85_arg1].attachment:set( f85_arg2 )
	end
	f85_arg0.attachmentSetup[f85_arg1].variantID:set( ATTACHMENT.baseVariant )
end

ATTACHMENT.FindFirstFreeAttachmentIndex = function ( f84_arg0 )
	for f84_local3, f84_local4 in ddlpairs( f84_arg0.attachmentSetup ) do
		if 5 <= f84_local3 then
			return false
		elseif f84_local4.attachment:get() == ATTACHMENT.none then
			return f84_local3
		end
	end
	return false
end

ATTACHMENT.IsDefaultAttachment = function ( f83_arg0, f83_arg1 )
	return LUI.IsItemInArray( GL_HACK.GetDefaultAttachmentData( f83_arg0 ), f83_arg1 )
end

ATTACHMENT.GetDefaultAttachmentRefForSlotIndex = function ( f82_arg0, f82_arg1, f82_arg2 )
	local f82_local0 = WEAPON.StripSuffix( f82_arg0, "_mp" )
	local f82_local1 = WEAPON.GenerateWeaponTableFromRef( f82_local0 )
	f82_local1.attachments = f82_arg1
	for f82_local5, f82_local6 in pairs( Engine[0xC03D2E893CA114A]( WEAPON.GetWeaponModelName( f82_local0, f82_local1, {
		includeAttachments = true
	} ) ) ) do
		if Engine[0x603B6AC5797050A]( f82_arg0, f82_local6 ) == f82_arg2 then
			return f82_local6
		end
	end
end

ATTACHMENT.GetAttachmentAdditionFullRefForSlotIndex = function ( f81_arg0, f81_arg1, f81_arg2 )
	local f81_local0 = nil
	for f81_local10, f81_local11 in ipairs( f81_arg1 ) do
		local f81_local12 = f81_local11.ref
		if f81_local12 and f81_local12 ~= ATTACHMENT.none then
			for f81_local8, f81_local9 in ipairs( ATTACHMENT.GetAttachmentAddition( f81_local12 ) ) do
				if not String.IsNilOrEmpty( f81_local9 ) and f81_local9 ~= ATTACHMENT.none and f81_arg2 == Engine[0x603B6AC5797050A]( f81_arg0, f81_local9 ) then
					f81_local0 = f81_local9
					local f81_local7 = f81_arg1[f81_local10].variantID
					if f81_local7 and 0 <= f81_local7 then
						f81_local0 = f81_local0 .. "|" .. f81_local7
					end
					return f81_local0
				end
			end
		end
	end
	return f81_local0
end

ATTACHMENT.IsSelectedAttachmentInCategoryTunable = function ( f80_arg0, f80_arg1, f80_arg2, f80_arg3, f80_arg4 )
	local f80_local0 = nil
	local f80_local1 = f80_arg4
	if not f80_local1 then
		f80_local1 = ClientWeapon[0x8E1E8769A4A0774]( f80_arg0, f80_arg2 )
	end
	local f80_local2 = nil
	for f80_local6, f80_local7 in ipairs( f80_arg3.attachments ) do
		if f80_local7.ref ~= "none" and ATTACHMENT.GetCategory( f80_local7.ref ) == f80_arg1 then
			f80_local2 = f80_local7.ref
			break
		end
	end
	if f80_local2 and f80_local2 ~= "none" and f80_local1[f80_local2] ~= nil then
		if ATTACHMENT.IsDefaultAttachment( f80_arg2, f80_local2 ) or f80_local1[f80_local2].tuningEnabled ~= true then
			f80_local4 = false
		else
			f80_local4 = true
		end
		return f80_local4
	else
		return false
	end
end

ATTACHMENT.GetTableWithCurrentAttachment = function ( f79_arg0, f79_arg1, f79_arg2, f79_arg3, f79_arg4 )
	local f79_local0 = LUI.DeepCopy( f79_arg0 )
	if f79_arg1 and f79_local0.attachments and 0 < #f79_local0.attachments and f79_local0.attachments[f79_arg1].category == ATTACHMENT.conversionkit and f79_arg3 == ATTACHMENT.none then
		local f79_local1 = 0
		for f79_local5, f79_local6 in ipairs( f79_local0.attachments ) do
			if f79_local6.category == ATTACHMENT.receiverCategory then
				f79_local1 = f79_local5
				break
			end
		end
		if 0 < f79_local1 then
			f79_local0.attachments[f79_local1].category = ""
			f79_local0.attachments[f79_local1].ref = ATTACHMENT.none
			f79_local0.attachments[f79_local1].variantID = ATTACHMENT.baseVariant
		end
	end
	if f79_arg2 then
		f79_local0.attachments[f79_arg2].ref = ATTACHMENT.none
		f79_local0.attachments[f79_arg2].variantID = ATTACHMENT.baseVariant
	end
	if not f79_arg1 then
		f79_arg1 = #f79_local0.attachments + 1
	end
	if f79_arg3 then
		f79_local0.attachments[f79_arg1] = f79_local0.attachments[f79_arg1] or {}
		f79_local0.attachments[f79_arg1].ref = ATTACHMENT.GetRef( f79_arg3, f79_local0.weapon )
		local f79_local1 = f79_local0.attachments[f79_arg1]
		local f79_local2
		if not f79_arg4 then
			f79_local2 = f79_arg4
		else
			f79_local2 = ATTACHMENT.baseVariant
		end
		f79_local1.variantID = f79_local2
		f79_local0.attachments[f79_arg1].category = ATTACHMENT.GetCategory( f79_local0.attachments[f79_arg1].ref )
	end
	return f79_local0
end

ATTACHMENT.GetTableWithAttachmentEquipped = function ( f78_arg0, f78_arg1, f78_arg2, f78_arg3, f78_arg4, f78_arg5, f78_arg6, f78_arg7, f78_arg8 )
	local f78_local0 = ATTACHMENT.GetTableWithCurrentAttachment( f78_arg1, f78_arg6, f78_arg7.blockedCategorySlot, f78_arg3, f78_arg5 )
	local f78_local1
	if f78_arg2 and not f78_arg2 then
		f78_local1 = f78_arg2
	else
		f78_local1 = ATTACHMENT.none
	end
	local f78_local2
	if f78_arg3 ~= ATTACHMENT.none and not f78_arg3 then
		f78_local2 = f78_arg3
	else
		f78_local2 = f78_local1
	end
	local f78_local3, f78_local4, f78_local5 = GUNSMITH.CheckBlockedEquippedAttachmentLogic( f78_arg0, f78_arg1, f78_arg2, f78_local0, f78_local2, f78_arg4, f78_arg7, f78_arg8 )
	for f78_local9, f78_local10 in ipairs( f78_local3 ) do
		f78_local0 = ATTACHMENT.GetTableWithoutAttachment( f78_local0, f78_local10.ref )
	end
	for f78_local9, f78_local10 in ipairs( f78_local5 ) do
		f78_local0 = ATTACHMENT.GetTableWithCurrentAttachment( f78_local0, GUNSMITH.GetSelectedAttachIndexForCategory( ATTACHMENT.GetCategory( f78_local10.ref ), f78_local0 ), nil, f78_local10.ref, ATTACHMENT.baseVariant )
	end
	for f78_local9, f78_local10 in ipairs( f78_local4 ) do
		f78_local0 = ATTACHMENT.GetTableWithCurrentAttachment( f78_local0, GUNSMITH.GetSelectedAttachIndexForCategory( ATTACHMENT.GetCategory( f78_local10.ref ), f78_local0 ), nil, f78_local10.ref, ATTACHMENT.baseVariant )
	end
	return f78_local0
end

ATTACHMENT.GetTableWithoutAttachment = function ( f77_arg0, f77_arg1 )
	local f77_local0 = LUI.DeepCopy( f77_arg0 )
	if not String.IsNilOrEmpty( f77_arg1 ) and f77_local0.attachments then
		for f77_local4, f77_local5 in ipairs( f77_local0.attachments ) do
			if f77_local5.ref == f77_arg1 then
				f77_local5.category = ATTACHMENT.none
				f77_local5.ref = ATTACHMENT.none
				f77_local5.variantID = ATTACHMENT.baseVariant
				break
			end
		end
	end
	return f77_local0
end

ATTACHMENT.GetModifiersValuesFromAttachementData = function ( f76_arg0, f76_arg1, f76_arg2, f76_arg3 )
	local f76_local0 = {}
	if f76_arg1.ref ~= ATTACHMENT.none and not f76_arg1.isClassified then
		if f76_arg1.modifierData then
			f76_local0 = f76_arg1.modifierData
		else
			local f76_local1 = WEAPON.GetWeaponModelName( f76_arg2.weapon, f76_arg3, {
				showSWhiskeyMag = true,
				includeAttachments = true,
				keepAkimbo = true
			} )
			local f76_local2 = Engine[0x603B6AC5797050A]( f76_local1, f76_arg1.ref )
			if f76_local2 ~= Enum[0x540F63FFAF44174][0xBEA71FD0CCA2F6D] then
				local f76_local3 = ClientWeapon[0xA41C97AC6ADDC24]( f76_arg0, f76_local1, f76_local2 )
				if f76_local3 ~= nil then
					f76_local0 = f76_local3
				end
			end
		end
	end
	return f76_local0
end

ATTACHMENT.GetAttachmentData = function ( f75_arg0, f75_arg1, f75_arg2, f75_arg3 )
	local f75_local0 = GL_HACK.GetAttachmentData( f75_arg0, f75_arg3 )
	f75_local0.category = ATTACHMENT.GetCategory( f75_arg3 )
	f75_local0.categoryName = ATTACHMENT.GetAttachmentCategoryName( f75_local0.category )
	f75_local0.weaponReference = f75_arg1
	local f75_local1 = WEAPON.GetWeaponModelName( f75_arg1, f75_arg2, {
		includeAttachments = true
	} )
	f75_local0.isTunable = ATTACHMENT.IsSelectedAttachmentInCategoryTunable( f75_arg0, f75_local0.category, f75_local1, f75_arg2, ClientWeapon[0x8E1E8769A4A0774]( f75_arg0, f75_local1 ) )
	return f75_local0
end

ATTACHMENT.GetBaseRefForTunedAttachment = function ( f74_arg0 )
	local f74_local0 = String.Split( f74_arg0, "[" )
	return f74_local0[1]
end

ATTACHMENT.GetAttachmentRefsFromAttachmentsData = function ( f72_arg0 )
	return Table.Map( f72_arg0, function ( f73_arg0 )
		return f73_arg0.ref
	end
	 )
end

ATTACHMENT.GetAttachmentsThatRequireConversionKit = function ( f71_arg0, f71_arg1, f71_arg2 )
	local f71_local0 = {}
	local f71_local1 = WEAPON.GetWeaponModelNameFromRef( f71_arg0.weapon )
	for f71_local5, f71_local6 in ipairs( f71_arg0.attachments ) do
		if f71_local6.ref ~= ATTACHMENT.none and LUI.IsItemInArray( Engine[0x1755FB4029176A5]( f71_local1, f71_local6.ref ), f71_arg1 ) and not LUI.IsItemInArray( f71_arg2, f71_local6 ) then
			table.insert( f71_local0, f71_local6 )
		end
	end
	return f71_local0
end

ATTACHMENT.GetBlockedEquippedAttachments = function ( f70_arg0, f70_arg1, f70_arg2, f70_arg3, f70_arg4 )
	local f70_local0 = {}
	local f70_local1 = WEAPON.GetWeaponModelName( f70_arg1.weapon, f70_arg1, {
		showSWhiskeyMag = true,
		includeAttachments = true,
		keepAkimbo = true
	} )
	local f70_local2 = Engine[0x603B6AC5797050A]( f70_local1, f70_arg2 )
	local f70_local3 = nil
	if f70_local2 == Enum[0x540F63FFAF44174][0x8BA9A9EF1FB673C] then
		f70_local3 = ClientWeapon[0x66604FC8FC4DA18]( f70_arg0, f70_local1, f70_arg2 )
	else
		f70_local3 = ClientWeapon[0xD3CE47FE2479379]( f70_arg0, f70_local1, f70_local2 )
		if f70_local3 then
			for f70_local8, f70_local9 in ipairs( ATTACHMENT.GetAttachmentAddition( f70_arg2, false ) ) do
				if not String.IsNilOrEmpty( f70_local9 ) and f70_local9 ~= ATTACHMENT.none then
					local f70_local7 = ClientWeapon[0xD3CE47FE2479379]( f70_arg0, f70_local1, Engine[0x603B6AC5797050A]( f70_local1, f70_local9 ) )
					if f70_local7 then
						if not Table.IsNilOrEmpty( f70_local7.blockedAttachmentCategories ) then
							Table.AppendArray( f70_local3.blockedAttachmentCategories, f70_local7.blockedAttachmentCategories )
						end
						if not Table.IsNilOrEmpty( f70_local7.blockedAttachments ) then
							Table.AppendArray( f70_local3.blockedAttachments, f70_local7.blockedAttachments )
						end
						if not Table.IsNilOrEmpty( f70_local7.blockedBaseTypes ) then
							Table.AppendArray( f70_local3.blockedBaseTypes, f70_local7.blockedBaseTypes )
						end
					end
				end
			end
			Table.RemoveDuplicates( f70_local3.blockedAttachmentCategories )
			Table.RemoveDuplicates( f70_local3.blockedAttachments )
			Table.RemoveDuplicates( f70_local3.blockedBaseTypes )
		end
	end
	local f70_local10 = {}
	if f70_arg4 then
		local f70_local4 = f70_arg4.isBlocked
		if f70_local4 then
			f70_local4 = f70_arg4.blockedByCategoryRef == ATTACHMENT.conversionkit
		end
		if f70_local4 then
			for f70_local9, f70_local11 in ipairs( f70_arg1.attachments ) do
				if f70_local11.ref ~= ATTACHMENT.none and (ATTACHMENT.IsAMP( f70_local11.ref ) or f70_local11.category == ATTACHMENT.conversionkit) and not (f70_local11.ref == f70_arg2) then
					table.insert( f70_local0, f70_local11 )
					table.insert( f70_local10, f70_local9, true )
				end
			end
		end
	end
	if f70_local3 then
		local f70_local4 = {}
		for f70_local9, f70_local11 in pairs( f70_local3.blockedAttachmentCategories ) do
			if LUI.IsItemInArray( ATTACHMENT.AttachmentSlots, f70_local11 ) then
				table.insert( f70_local4, f70_local11 )
			end
		end
		f70_local5 = GUNSMITH.AttachmentSetupDataMap[GUNSMITH.AttachmentSetupType.ATTACHMENT].minIndex + 1
		f70_local6 = GUNSMITH.AttachmentSetupDataMap[GUNSMITH.AttachmentSetupType.ATTACHMENT].maxIndex + 1
		for f70_local8 = f70_local5, f70_local6, 1 do
			local f70_local12 = f70_arg1.attachments[f70_local8]
			if f70_local12 and f70_local12.ref ~= ATTACHMENT.none and f70_local12.ref ~= f70_arg2 then
				local f70_local13 = false
				if f70_local3.blockedAttachmentCategories and LUI.IsItemInArray( f70_local3.blockedAttachmentCategories, f70_local12.category ) then
					table.insert( f70_local0, f70_local12 )
					f70_local13 = true
				end
				local f70_local14 = f70_local3.blockedBaseTypes
				if f70_local14 then
					f70_local14 = 0 < #f70_local3.blockedBaseTypes
				end
				local f70_local15 = 0 < #f70_local4
				if not f70_local13 and (f70_local14 or f70_local15) then
					local f70_local16
					if f70_arg3 then
						f70_local16 = f70_arg3
					else
						f70_local16 = f70_arg3[f70_local12.category]
					end
					if f70_local16 then
						for f70_local22, f70_local23 in ipairs( f70_local16 ) do
							if f70_local23.ref == f70_local12.ref then
								local f70_local20
								if f70_local14 then
									f70_local20 = f70_local14
								else
									f70_local20 = LUI.IsItemInArray( f70_local3.blockedBaseTypes, f70_local23.baseTypeName )
								end
								local f70_local21
								if f70_local15 then
								
								else
									f70_local21 = LUI.IsItemInArray( f70_local4, f70_local23.weaponAttachmentCategory )
								end
								f70_local21 = f70_local15
							end
						end
					end
				end
				if not f70_local13 and f70_local3.blockedAttachments and LUI.IsItemInArray( f70_local3.blockedAttachments, f70_local12.ref ) then
					table.insert( f70_local0, f70_local12 )
					f70_local13 = true
				end
			end
		end
	end
	return f70_local0
end

ATTACHMENT.AddListToBlockedMessage = function ( f69_arg0, f69_arg1 )
	local f69_local0 = f69_arg0 .. "\n"
	for f69_local4, f69_local5 in pairs( f69_arg1 ) do
		f69_local0 = f69_local0 .. "\n" .. Engine[0xED84C33EC5F01EA]( ATTACHMENT.GetAttachmentCategoryName( ATTACHMENT.GetCategory( f69_local5.ref ) ) ) .. " - " .. ATTACHMENT.GetName( f69_local5.ref )
	end
	return f69_local0
end

ATTACHMENT.GetAttachmentsToCheck = function ( f68_arg0 )
	local f68_local0 = GL_HACK.GetWeaponMPRef( f68_arg0.weapon )
	local f68_local1, f68_local2 = GL_HACK.GetDefaultAttachmentData( WEAPON.GetWeaponModelName( f68_arg0.weapon, f68_arg0, {
		includeAttachments = true
	} ) )
	local f68_local3
	if not f68_local1 then
		f68_local3 = f68_local1
	else
		f68_local3 = {}
	end
	for f68_local12, f68_local13 in ipairs( f68_arg0.attachments ) do
		local f68_local14 = f68_local13.variantID
		local f68_local15 = f68_local13.ref
		if f68_local15 and f68_local15 ~= ATTACHMENT.none then
			table.insert( f68_local3, f68_local15 )
			for f68_local10, f68_local11 in ipairs( ATTACHMENT.GetAttachmentAddition( f68_local15 ) ) do
				if not String.IsNilOrEmpty( f68_local11 ) and f68_local11 ~= ATTACHMENT.none then
					table.insert( f68_local3, f68_local11 )
				end
			end
		end
	end
	return WEAPON.FilterAttachments( f68_local3, f68_local0, {
		defaultAttachments = f68_local1,
		isUniqueAttachRefRequested = f68_local2
	} )
end

local f0_local4 = function ( f67_arg0 )
	local f67_local0 = StringTable[0x8073B436CDE1BF]( CSV.attachmentOverrides.file, CSV.attachmentOverrides.cols.parentRef, f67_arg0 )
	if type( f67_local0 ) == "number" and f67_local0 ~= -1 then
		local f67_local1 = StringTable[0xFD4E49A34DD43AE]( CSV.attachmentOverrides.file )
		local f67_local2 = {}
		for f67_local3 = f67_local0, f67_local1 - 1, 1 do
			local f67_local6 = StringTable[0x6E34EAC0192FA9F]( CSV.attachmentOverrides.file, f67_local3 )
			if f67_local6 then
				if f67_local6[CSV.attachmentOverrides.cols.parentRef + 1] == f67_arg0 then
					local f67_local7 = f67_local6[CSV.attachmentOverrides.cols.childRef + 1]
					if not String.IsNilOrEmpty( f67_local7 ) then
						f67_local2[#f67_local2 + 1] = f67_local7
					end
				end
			end
		end
		return f67_local2
	else
		
	end
end

ATTACHMENT.GetRefFromLootIDAndWeapon = function ( f66_arg0, f66_arg1 )
	local f66_local0 = ATTACHMENT.GetRefByID( f66_arg0 )
	if not Engine[0x6093D047200548]( 0xC2C9813BB16552F .. f66_local0 ) then
		local f66_local1 = f0_local0( f66_local0 )
		if f66_local1 then
			for f66_local5, f66_local6 in pairs( f66_local1 ) do
				if String.BeginsWith( f66_local6, f66_arg1 ) then
					return f66_local6
				end
			end
			return f66_local1[1]
		end
	end
	return f66_local0
end

ATTACHMENT.GetChildRefFromParentRef = function ( f65_arg0 )
	local f65_local0 = f0_local0( f65_arg0 )
	local f65_local1
	if f65_local0 then
		f65_local1 = f65_local0[1]
		if not f65_local1 then
		
		else
			return f65_local1
		end
	end
	f65_local1 = f65_arg0
end

ATTACHMENT.GetChildRefFromParentRefForWeapon = function ( f64_arg0, f64_arg1 )
	local f64_local0 = f0_local0( f64_arg0 )
	if f64_local0 == nil then
		return f64_arg0
	end
	for f64_local4, f64_local5 in ipairs( f64_local0 ) do
		if 0 < Engine[0x603B6AC5797050A]( GL_HACK.GetWeaponMPRef( f64_arg1 ), f64_local5 ) then
			return f64_local5
		end
	end
	return f64_arg0
end

ATTACHMENT.IsAMP = function ( f63_arg0 )
	if not f63_arg0 then
		return false
	end
	local f63_local0 = ATTACHMENT.GetBundleByRef( f63_arg0 )
	local f63_local1
	if f63_local0 then
		f63_local1 = f63_local0[0x3E623FAC6959829]
		if not f63_local1 then
		
		else
			return f63_local1
		end
	end
	f63_local1 = false
end

ATTACHMENT.GetMenuClassOverride = function ( f62_arg0 )
	if not f62_arg0 then
		return false
	end
	local f62_local0 = ATTACHMENT.GetBundleByRef( f62_arg0 )
	local f62_local1 = ATTACHMENT.IsAMP( f62_arg0 )
	if f62_local1 then
		f62_local1 = f62_local0[0x2223E18218AA9A2]
	end
	return f62_local1
end

ATTACHMENT.IsAMPByReward = function ( f61_arg0 )
	local f61_local0 = String.Split( f61_arg0, "+" )
	return ATTACHMENT.IsAMP( ATTACHMENT.GetRefByID( f61_local0[1] ) )
end

ATTACHMENT.GetAttachmentsRequiredForUnlockTable = function ( f60_arg0, f60_arg1 )
	local f60_local0 = {}
	local f60_local1 = WEAPON.GetWeaponModelName( f60_arg0.weapon, f60_arg0, {
		includeAttachments = true
	} )
	for f60_local5, f60_local6 in pairs( f60_arg0.attachments ) do
		if LUI.IsItemInArray( Engine[0x1755FB4029176A5]( f60_local1, f60_local6.ref ), f60_arg1 ) then
			table.insert( f60_local0, f60_local6 )
		end
	end
	return f60_local0
end

ATTACHMENT.SetBlockedAttachments = function ( f59_arg0, f59_arg1, f59_arg2, f59_arg3, f59_arg4, f59_arg5 )
	local f59_local0
	if f59_arg5 ~= nil and not f59_arg5 then
		f59_local0 = f59_arg5
	else
		f59_local0 = f59_arg2
	end
	local f59_local1 = WEAPON.GetWeaponModelName( f59_local0.weapon, f59_local0, {
		showSWhiskeyMag = true,
		includeAttachments = true,
		keepAkimbo = true
	} )
	for f59_local9, f59_local10 in ipairs( f59_arg1 ) do
		f59_local10.uiOrder = f59_local9
		f59_local10.isAMP = ATTACHMENT.IsAMP( f59_local10.ref )
		local f59_local11 = Engine[0x1755FB4029176A5]( f59_local1, f59_local10.ref )
		f59_local10.isBlocked = not Table.IsNilOrEmpty( f59_local11 )
		f59_local10.attachmentsRequiredForUnlock = f59_local11
		if f59_local10.isBlocked then
			local f59_local5, f59_local6 = next( f59_local11 )
			local f59_local7 = ATTACHMENT.GetCategory( f59_local6 )
			local f59_local8 = ATTACHMENT.GetAttachmentCategoryName( f59_local7 )
			f59_local10.blockedBy = Engine[0xED84C33EC5F01EA]( 0x1B0430DBE53B3F6, ATTACHMENT.GetName( f59_local6 ) )
			f59_local10.blockedByRef = f59_local6
			f59_local10.blockedByCategory = f59_local8
			f59_local10.blockedByCategoryRef = f59_local7
		end
	end
	f59_local2 = 0
	for f59_local5, f59_local6 in ipairs( ATTACHMENT.GetAttachmentsToCheck( WEAPON.GenerateWeaponTableFromWeaponString( f59_arg2.weapon, f59_local1, {
		shouldConvertVariantIDToNumber = true,
		shouldIncludeAllAttachments = true
	} ) ) ) do
		if f59_local6 and f59_local6 ~= ATTACHMENT.none then
			local f59_local7 = Engine[0x603B6AC5797050A]( f59_local1, f59_local6 )
			local f59_local8 = nil
			if f59_local7 == Enum[0x540F63FFAF44174][0x8BA9A9EF1FB673C] then
				f59_local8 = ClientWeapon[0x66604FC8FC4DA18]( f59_arg0, f59_local1, f59_local6 )
			else
				f59_local8 = ClientWeapon[0xD3CE47FE2479379]( f59_arg0, f59_local1, f59_local7 )
			end
			for f59_local15, f59_local16 in ipairs( f59_arg1 ) do
				if LUI.IsItemInArray( f59_local16.attachmentsRequiredForUnlock, f59_local6 ) then
					f59_local16.isBlocked = false
					f59_local16.blockedBy = nil
					f59_local16.blockedByRef = nil
					f59_local16.blockedByCategory = nil
					f59_local16.blockedByCategoryRef = nil
				end
			end
			f59_local12 = ATTACHMENT.GetCategory( f59_local6 )
			f59_local13 = ATTACHMENT.GetName( f59_local6 )
			f59_local14 = ATTACHMENT.GetAttachmentCategoryName( f59_local12 )
			f59_local15 = nil
			if String.IsNilOrEmpty( f59_local14 ) or not CONDITIONS.IsMobileOrMobileSim() then
				f59_local15 = Engine[0xED84C33EC5F01EA]( 0xFA36F63F49F92E1, f59_local13 )
			else
				f59_local15 = Engine[0xED84C33EC5F01EA]( 0xA95A450F8771EF2, f59_local13, f59_local14 )
			end
			if f59_local8 then
				f59_local16 = {}
				for f59_local20, f59_local21 in pairs( f59_local8.blockedAttachmentCategories ) do
					if LUI.IsItemInArray( ATTACHMENT.AttachmentSlots, f59_local21 ) then
						table.insert( f59_local16, f59_local21 )
					end
				end
				if LUI.IsItemInArray( f59_local8.blockedAttachmentCategories, f59_arg4 ) then
					for f59_local20, f59_local21 in ipairs( f59_arg1 ) do
						if f59_local21.ref ~= ATTACHMENT.none then
							f59_local21.isBlocked = true
							f59_local21.blockedBy = f59_local15
							f59_local21.blockedByRef = f59_local6
							f59_local21.blockedByCategory = f59_local14
							f59_local21.blockedByCategoryRef = f59_local12
							f59_local2 = f59_local2 + 1
						end
					end
				end
				if f59_local8.blockedBaseTypes or f59_local8.blockedAttachments or 0 < #f59_local16 then
					for f59_local20, f59_local21 in ipairs( f59_arg1 ) do
						if f59_local21.ref ~= f59_arg3 and f59_local12 ~= f59_local21.category then
							if f59_local8.blockedBaseTypes and LUI.IsItemInArray( f59_local8.blockedBaseTypes, f59_local21.baseTypeName ) then
								f59_local21.isBlocked = true
								f59_local21.blockedBy = f59_local15
								f59_local21.blockedByRef = f59_local6
								f59_local21.blockedByCategory = f59_local14
								f59_local21.blockedByCategoryRef = f59_local12
								f59_local2 = f59_local2 + 1
							end
							if f59_local8.blockedAttachments and LUI.IsItemInArray( f59_local8.blockedAttachments, f59_local21.ref ) then
								f59_local21.isBlocked = true
								f59_local21.blockedBy = f59_local15
								f59_local21.blockedByRef = f59_local6
								f59_local21.blockedByCategory = f59_local14
								f59_local21.blockedByCategoryRef = f59_local12
								f59_local2 = f59_local2 + 1
							end
							if LUI.IsItemInArray( f59_local16, f59_local21.weaponAttachmentCategory ) then
								f59_local21.isBlocked = true
								f59_local21.blockedBy = f59_local15
								f59_local21.blockedByRef = f59_local6
								f59_local21.blockedByCategory = f59_local14
								f59_local21.blockedByCategoryRef = f59_local12
								f59_local2 = f59_local2 + 1
							end
						end
					end
				end
			end
		end
	end
	return f59_local2
end

ATTACHMENT.ShouldAllowBlockedRemoveWidgets = function ()
	if Engine[0x2DA54CF5D6B7F02]() or Engine[0xDD9D856EA1C159E]() then
		return true
	else
		return Dvar[0x9E5BE3B4BBA4E0E]( 0xD5607B103AB81FC )
	end
end

ATTACHMENT.ShouldAttachmentCatageoryTuningTipPointLeft = function ( f57_arg0 )
	local f57_local0
	if f57_arg0 ~= "muzzle" and f57_arg0 ~= "frontpiece" and f57_arg0 ~= "undermount" and f57_arg0 ~= "gunperk" then
		f57_local0 = false
	else
		f57_local0 = true
	end
	return f57_local0
end

ATTACHMENT.GetReceiverBlueprintFromWeaponTable = function ( f56_arg0 )
	local f56_local0 = GUNSMITH.GetSelectedAttachIndexForCategory( ATTACHMENT.receiverCategory, f56_arg0 )
	local f56_local1
	if f56_local0 then
		f56_local1 = f56_local0
	else
		f56_local1 = f56_arg0.attachments[f56_local0]
		if f56_local1 then
			f56_local1 = f56_arg0.attachments[f56_local0].ref
		end
	end
	local f56_local2
	if f56_local0 then
		f56_local2 = f56_local0
	else
		f56_local2 = f56_arg0.attachments[f56_local0]
		if f56_local2 then
			f56_local2 = f56_arg0.attachments[f56_local0].variantID
		end
	end
	if f56_local1 and f56_local2 then
		return Engine[0xFC084BF31D917C5]( GL_HACK.GetWeaponMPRef( f56_arg0.weapon ), f56_local1, f56_local2 )
	else
		
	end
end

ATTACHMENT.ValidateAttachmentsForWeaponSetup = function ( f54_arg0 )
	if Dvar[0x9E5BE3B4BBA4E0E]( 0x4E46B0101D55429 ) and Engine[0x636BC8C3AA71FAE]() and f54_arg0 then
		local f54_local0 = f54_arg0.weapon:get()
		if not String.IsNilOrEmpty( f54_local0 ) and f54_local0 ~= WEAPON.none then
			local f54_local1 = GL_HACK.GetWeaponMPRef( f54_local0 )
			local f54_local2 = {}
			for f54_local3 = 0, #f54_arg0.attachmentSetup - 1, 1 do
				local f54_local6 = ATTACHMENT.GetRefFromSetup( f54_arg0.attachmentSetup[f54_local3] )
				if not String.IsNilOrEmpty( f54_local6 ) and f54_local6 ~= ATTACHMENT.none then
					f54_local2[f54_local6] = f54_local3
				end
			end
			if not Table.IsEmpty( f54_local2 ) then
				Engine[0x7ED2B33DE4D5BB8]( f54_local1, function ( f55_arg0 )
					f54_arg0[f55_arg0.ref] = nil
				end )
			end
			for f54_local7, f54_local6 in pairs( f54_local2 ) do
				ATTACHMENT.ClearAttachment( f54_arg0.attachmentSetup[f54_local6] )
			end
		end
	end
end

ATTACHMENT.IsAttachmentsTableValid = function ( f52_arg0, f52_arg1 )
	local f52_local0 = true
	local f52_local1 = {
		[LOADOUT.DLOG_VALIDATION_UNOWNED_ROOT] = {},
		[LOADOUT.DLOG_VALIDATION_DUP_ATTACH_CATEGORY_ROOT] = {},
		[LOADOUT.DLOG_VALIDATION_EXCESS_ATTACH_ROOT] = {},
		[LOADOUT.DLOG_VALIDATION_UNSUPPORTED_ATTACH_ROOT] = {}
	}
	local f52_local2 = {}
	local f52_local3 = {}
	local f52_local4 = 0
	for f52_local5 = 1, WEAPON.maxAttachmentsPerWeapon, 1 do
		local f52_local8 = f52_arg1.attachments[f52_local5]
		if f52_local8 and ATTACHMENT.IsAttachmentNeitherReceiverNorNone( f52_local8.ref, f52_local8.category ) then
			local f52_local9 = ATTACHMENT.GetLootIDForVariant( f52_arg1.weapon, f52_local8.ref, f52_local8.variantID )
			if f52_local9 then
				local f52_local10 = f52_local8.category
				if not f52_local10 then
					f52_local10 = ATTACHMENT.GetCategory( f52_local8.ref )
				end
				if f52_local10 ~= ATTACHMENT.none and f52_local2[f52_local10] then
					f52_local0 = false
					table.insert( f52_local1[LOADOUT.DLOG_VALIDATION_DUP_ATTACH_CATEGORY_ROOT], tostring( f52_local2[f52_local10] ) .. "," .. tostring( f52_local9 ) )
				end
				f52_local2[f52_local10] = f52_local9
				if LOADOUT.IsValidLootIDForValidation( f52_local9 ) then
					if Dvar[0x9E5BE3B4BBA4E0E]( 0x42768EFDB0098D0 ) and not PROGRESSION.IsUnlockedWithID( f52_arg0, f52_local9 ) then
						f52_local0 = false
						table.insert( f52_local1[LOADOUT.DLOG_VALIDATION_UNOWNED_ROOT], tostring( f52_local9 ) )
					elseif LOOT.IsItemBanned( f52_local9 ) then
						f52_local0 = false
						table.insert( f52_local1[LOADOUT.DLOG_VALIDATION_UNSUPPORTED_ATTACH_ROOT], tostring( f52_local9 ) )
					end
				end
				if ATTACHMENT.IsSelectableAttachment( f52_local8.ref, f52_arg1.weapon ) and 5 < f52_local4 + 1 then
					f52_local0 = false
					table.insert( f52_local1[LOADOUT.DLOG_VALIDATION_EXCESS_ATTACH_ROOT], tostring( f52_local9 ) )
				end
				if not String.IsNilOrEmpty( f52_local8.ref ) and f52_local8.ref ~= ATTACHMENT.none then
					f52_local3[f52_local8.ref] = f52_local9
				end
			end
		end
	end
	local f52_local5 = GL_HACK.GetWeaponMPRef( f52_arg1.weapon )
	if Dvar[0x9E5BE3B4BBA4E0E]( 0xE689DDED4C7A0A ) then
		if not Table.IsEmpty( f52_local3 ) then
			Engine[0x7ED2B33DE4D5BB8]( f52_local5, function ( f53_arg0 )
				f52_arg0[f53_arg0.ref] = nil
			end )
		end
	else
		local f52_local6 = {}
		for f52_local9, f52_local10 in pairs( f52_local3 ) do
			if Engine[0x603B6AC5797050A]( f52_local5, f52_local9 ) ~= -1 then
				table.insert( f52_local6, f52_local9 )
			end
		end
		for f52_local9, f52_local10 in ipairs( f52_local6 ) do
			f52_local3[f52_local10] = nil
		end
	end
	for f52_local8, f52_local9 in pairs( f52_local3 ) do
		f52_local0 = false
		table.insert( f52_local1[LOADOUT.DLOG_VALIDATION_UNSUPPORTED_ATTACH_ROOT], tostring( f52_local9 ) )
	end
	return f52_local0, f52_local1
end

ATTACHMENT.GetAttachmentDetails = function ( f51_arg0 )
	return {
		name = ATTACHMENT.GetName( f51_arg0 ),
		category = Engine[0xED84C33EC5F01EA]( ATTACHMENT.GetAttachmentCategoryName( ATTACHMENT.GetCategory( f51_arg0 ) ) ),
		image = ATTACHMENT.GetImage( f51_arg0 )
	}
end

ATTACHMENT.IsWeaponAttachmentTunable = function ( f50_arg0, f50_arg1, f50_arg2, f50_arg3, f50_arg4, f50_arg5 )
	if f50_arg3 == nil then
		local f50_local0 = ATTACHMENT.GetBundleByRef( f50_arg1.weapon .. "_tuning" )
		if f50_local0 then
			local f50_local1 = LOOT.IsUnlockedWithID( f50_arg0, f50_local0[0x28887F70BF5EBA] )
			if not f50_local1 then
				f50_arg3 = f50_local1
			else
				f50_arg3 = false
			end
		end
		f50_arg3 = false
	end
	local f50_local2
	if not f50_arg4 then
		f50_local2 = f50_arg4
	else
		f50_local2 = WEAPON.GetWeaponModelName( f50_arg1.weapon, f50_arg1, {
			includeAttachments = true
		} )
	end
	local f50_local0
	if not f50_arg5 then
		f50_local0 = f50_arg5
	else
		f50_local0 = ClientWeapon[0x8E1E8769A4A0774]( f50_arg0, f50_local2 )
	end
	local f50_local1 = ATTACHMENT.IsSelectedAttachmentInCategoryTunable( f50_arg0, f50_arg2, f50_local2, f50_arg1, f50_local0 )
	local f50_local3
	if f50_local1 then
		f50_local3 = f50_local1
	else
		f50_local3 = f50_arg3
	end
	return f50_local3
end

ATTACHMENT.IsAttachmentNeitherReceiverNorNone = function ( f49_arg0, f49_arg1 )
	if not f49_arg1 then
		f49_arg1 = ATTACHMENT.GetCategory( f49_arg0 )
	end
	local f49_local0
	if String.IsNilOrEmpty( f49_arg0 ) or f49_arg0 == ATTACHMENT.none or f49_arg1 == ATTACHMENT.receiverCategory then
		f49_local0 = false
	else
		f49_local0 = true
	end
	return f49_local0
end

ATTACHMENT.IsCharmOrGunscreen = function ( f48_arg0 )
	if String.IsNilOrEmpty( f48_arg0 ) then
		return false
	end
	local f48_local0 = ATTACHMENT.GetCategory( f48_arg0 )
	local f48_local1
	if f48_local0 ~= ATTACHMENT.charmCategory and f48_local0 ~= ATTACHMENT.gunscreenCategory then
		f48_local1 = false
	else
		f48_local1 = true
	end
	return f48_local1
end

ATTACHMENT.GetAttachmentCompareDetails = function ( f47_arg0, f47_arg1, f47_arg2 )
	return ATTACHMENT.GetModifiersValuesFromAttachementData( f47_arg0, f47_arg1, f47_arg2, ATTACHMENT.GetTableWithCurrentAttachment( f47_arg2, nil, nil, f47_arg1.baseRef ) )
end

ATTACHMENT.GetWeaponPreviewAttachmentsData = function ( f46_arg0 )
	local f46_local0 = {}
	for f46_local5, f46_local6 in ipairs( f46_arg0 ) do
		if f46_local6.ref ~= ATTACHMENT.none then
			local f46_local4 = f46_local6.category
			if f46_local4 and f46_local4 == ATTACHMENT.none then
				f46_local4 = ATTACHMENT.GetCategory( f46_local6.ref )
			end
			if f46_local4 == ATTACHMENT.receiverCategory then
				table.insert( f46_local0, 1, f46_local6 )
			else
				table.insert( f46_local0, f46_local6 )
			end
		end
	end
	return f46_local0
end

ATTACHMENT.GetAttachmentDataWithRef = function ( f45_arg0, f45_arg1 )
	for f45_local3, f45_local4 in ipairs( f45_arg0 ) do
		if f45_local4.ref == f45_arg1 then
			return f45_local4
		end
	end
	return nil
end

ATTACHMENT.SetAttachSlot = function ( f44_arg0, f44_arg1 )
	DataSources.alwaysLoaded.loadout.attachSlot:SetValue( f44_arg0, f44_arg1 )
end

ATTACHMENT.GetAttachSlot = function ( f43_arg0 )
	return DataSources.alwaysLoaded.loadout.attachSlot:GetValue( f43_arg0 )
end

ATTACHMENT.GetVariantIDFromWeaponTableAndRef = function ( f42_arg0, f42_arg1, f42_arg2 )
	local f42_local0 = ATTACHMENT.baseVariant
	local f42_local1 = f42_arg1.lootID
	if f42_local1 ~= LOOT.emptyID then
		local f42_local2 = WEAPON.GetModificationAttachments( f42_arg0, f42_arg1.weapon, f42_local1 )
		if f42_local2[f42_arg2] then
			f42_local0 = f42_local2[f42_arg2]
		end
	end
	return f42_local0
end

ATTACHMENT.GetAttachmentFullDetails = function ( f41_arg0, f41_arg1, f41_arg2, f41_arg3, f41_arg4 )
	if not f41_arg4 then
		f41_arg4 = {}
	end
	local f41_local0 = f41_arg2.name
	local f41_local1 = f41_arg2.desc
	if f41_arg2.isClassified then
		f41_local0 = 0x99E24C4EADB96DB
		f41_local1 = 0x3BEECC97875C519
	end
	if CONDITIONS.IsMobileOrMobileSim() then
		f41_local1 = nil
	end
	local f41_local2 = f41_arg1.weapon
	local f41_local3 = f41_arg2.ref
	local f41_local4 = ATTACHMENT.GetRefWithClassifiedSupport( f41_local3 )
	local f41_local5 = f41_arg4.variantID
	if not f41_local5 then
		f41_local5 = ATTACHMENT.GetVariantIDFromWeaponTableAndRef( f41_arg0, f41_arg1, f41_local4 )
	end
	if f41_local1 then
		if f41_local5 > WEAPON.baseVariant then
			local f41_local6 = ATTACHMENT.GetOverrideDesc( f41_local3, f41_local2, f41_arg1.variantID )
			if f41_local6 and not f41_local6 then
				f41_local1 = f41_local6
			else
				
			end
		end
		if not Engine[0x54F2E859F96A9DB]() and ATTACHMENT.IsDismembermentEnabled( f41_local3 ) then
			f41_local1 = Engine[0xED84C33EC5F01EA]( f41_local1 ) .. " " .. Engine[0xED84C33EC5F01EA]( 0xB9F00A594F8376D )
		else
			f41_local1 = Engine[0xED84C33EC5F01EA]( f41_local1 )
		end
	end
	local f41_local6 = not f41_arg2.isClassified
	local f41_local7 = GUNSMITH.GetEquipCounts( f41_local2, f41_arg1, f41_arg1.attachments )
	local f41_local8 = f41_local7.attachmentCount
	local f41_local9 = GUNSMITH.maxMods
	local f41_local10 = Engine[0xFC084BF31D917C5]( GL_HACK.GetWeaponMPRef( f41_local2 ), f41_local3, f41_local5 )
	local f41_local11
	if f41_local10 then
		f41_local11 = f41_local10
	else
		f41_local11 = f41_local10[0x2EAB902F6509817]
	end
	local f41_local12 = GUNSMITH.GetBrandingSmallMaterialName( f41_local11 )
	local f41_local13 = ATTACHMENT.GetModifiersValuesFromAttachementData( f41_arg0, f41_arg2, f41_arg1, f41_arg3 )
	local f41_local14 = false
	for f41_local15 = 1, #f41_local13, 1 do
		if f41_local13[f41_local15].value ~= 0 then
			f41_local14 = true
			break
		end
	end
	if not f41_local13 then
		f41_local13 = {}
	end
	local f41_local15 = nil
	if not CONDITIONS.IsMobileOrMobileSim() and f41_arg2.category == ATTACHMENT.opticCategory then
		f41_local15 = Reticle[0x15C60EB1A12545F]( f41_arg0, WEAPON.GetWeaponModelName( f41_arg3.weapon, f41_arg3, {
			includeAttachments = true
		} ), false )
	end
	local f41_local16 = f41_arg2.gunsmithAttach.challengeID
	local f41_local17 = ""
	local f41_local18 = StringTable[0x2DCF0973239E909]( CSV.gunChallenges.GetFile(), CSV.gunChallenges.cols.loot, f41_arg2.gunsmithAttach.lootID, CSV.gunChallenges.cols.desc )
	local f41_local19 = tonumber( StringTable[0x2DCF0973239E909]( CSV.gunChallenges.GetFile(), CSV.gunChallenges.cols.id, f41_arg2.gunsmithAttach.challengeID, CSV.gunChallenges.cols.amount ) )
	local f41_local20 = Engine[0xED84C33EC5F01EA]( f41_local18, f41_local19 )
	local f41_local21 = false
	if f41_local16 and 0 < #f41_local16 then
		f41_local21 = Challenge.IsChallengeComplete( f41_arg0, f41_local16 )
	end
	if CONDITIONS.IsMobileOrMobileSim() and ATTACHMENT.UnlockAttachmentExceptions.MWII_WZ_EXCLUSIVE[f41_arg2.ref] then
		f41_local17 = Engine[0xED84C33EC5F01EA]( 0x8DF8CB381C4A26D )
	elseif LUI.StringIsNilOrEmpty( f41_local18 ) then
		f41_local17 = ""
	else
		f41_local17 = f41_local20
	end
	if f41_arg2.weaponUnlock and f41_arg2.levelUnlock then
		f41_local17 = Engine[0xED84C33EC5F01EA]( 0x71D13D9BEC47528, WEAPON.GetName( f41_arg2.weaponUnlock ), f41_arg2.levelUnlock + 1 )
	end
	local f41_local22 = not LUI.StringIsNilOrEmpty( StringTable[0x2DCF0973239E909]( CSV.gunChallenges.GetFile(), CSV.gunChallenges.cols.loot, f41_arg2.gunsmithAttach.lootID, CSV.gunChallenges.cols.challenge2Desc ) )
	local f41_local23 = GUNSMITH.IsAttachVariantCategoryBlacklisted( f41_local2, ATTACHMENT.GetCategory( f41_local3 ) )
	local f41_local24 = ATTACHMENT.AreVariantsEnabled()
	if f41_local24 then
		if not f41_local23 and f41_local5 > WEAPON.baseVariant then
			f41_local24 = f41_arg2.unlocked
			if f41_local24 then
				f41_local24 = Engine[0x12586A3F4FB490E]()
				if f41_local24 then
					f41_local24 = Engine[0x5EA7EB683287036]( f41_arg0 )
				end
			end
		else
			f41_local24 = false
		end
	end
	local f41_local25 = nil
	if f41_arg2.blockedCategorySlot then
		f41_local25 = GUNSMITH.GetBlockedCategoryWarning( f41_arg1, f41_arg2.blockedCategorySlot )
	end
	f41_arg4.lockExpander = not f41_local14
	f41_arg4.modifiersValues = f41_local13
	local f41_local26 = ATTACHMENT.GetAttachmentStatsDetails( f41_arg0, f41_arg1, f41_arg2, f41_arg3, f41_arg4 )
	local f41_local27 = false
	if f41_arg2.ref ~= ATTACHMENT.none then
		local f41_local28 = f41_arg2.isAMP
		if not f41_local28 then
			f41_local27 = f41_local28
		else
			f41_local27 = f41_arg2.category == ATTACHMENT.conversionkit
		end
	end
	local f41_local28 = ATTACHMENT.GetLootIDForRef( f41_local3 )
	local f41_local29 = {
		isDescAlreadyLocalized = true,
		isNameAlreadyLocalized = true
	}
	local f41_local30
	if f41_local0 then
		f41_local30 = Engine[0xED84C33EC5F01EA]( f41_local0 )
		if not f41_local30 then
		
		else
			f41_local29.name = f41_local30
			f41_local29.desc = f41_local1
			f41_local29.showFullDetails = f41_local6
			f41_local29.weaponRef = f41_local2
			f41_local29.lootID = f41_local28
			f41_local29.modCount = f41_local8
			f41_local29.maxModCount = f41_local9
			f41_local29.brandDataRef = f41_local11
			f41_local29.brandingMaterialName = f41_local12
			f41_local29.isAMP = f41_local27
			f41_local29.attachmentRef = f41_local3
			f41_local29.isBlocked = f41_arg2.isBlocked
			f41_local29.blockedBy = f41_arg2.blockedBy
			f41_local29.modifiersValues = f41_local13
			f41_local29.showModifiers = f41_local14
			f41_local29.reticlePreviewImageName = f41_local15
			f41_local29.isUnlocked = f41_arg2.unlocked
			f41_local29.gunsmithAttach = f41_arg2.gunsmithAttach
			f41_local29.unlockCriteria = f41_local17
			f41_local29.showChooseAppearance = f41_local24
			f41_local29.blockedCategoryWarningText = f41_local25
			f41_local29.statsDetails = f41_local26
			f41_local29.attachmentRef = f41_arg2.ref
			f41_local29.category = f41_arg2.category
			f41_local29.isChallengeLocked = not f41_local21
			f41_local29.hasSecondaryChallenge = f41_local22
			if not f41_local19 or 1 >= f41_local19 then
				f41_local30 = false
			else
				f41_local30 = true
			end
			f41_local29.hasProgressChallenge = f41_local30
			f41_local29.primaryProject = LOOT.GetPrimaryProjectIconFromID( f41_local28 )
			return f41_local29
		end
	end
	f41_local30 = f41_arg2.ref
end

ATTACHMENT.GetValidAttachmentRefForCategory = function ( f40_arg0, f40_arg1 )
	if not f40_arg0 or ATTACHMENT.GetCategory( f40_arg0 ) ~= f40_arg1 then
		return ATTACHMENT.none
	else
		return f40_arg0
	end
end

ATTACHMENT.GetCurrentAttachmentFullDetails = function ( f39_arg0, f39_arg1, f39_arg2, f39_arg3 )
	local f39_local0 = LOADOUT.GetLoadoutIndex( f39_arg0 )
	local f39_local1 = WEAPON.GetWeaponSlot( f39_arg0 )
	local f39_local2 = ATTACHMENT.GetAttachSlot( f39_arg0 )
	local f39_local3 = GUNSMITH.GetCurrentEquippedWeaponData( f39_arg0, f39_local1 )
	return ATTACHMENT.GetAttachmentFullDetails( f39_arg0, f39_local3, ATTACHMENT.GetAttachmentDataWithRef( ATTACHMENT.GetCompleteAttachmentsListData( f39_arg1, f39_arg2 ), ATTACHMENT.GetValidAttachmentRefForCategory( ATTACHMENT.GetEquippedAttachmentRef( f39_arg0, f39_local0, f39_local1, f39_local2 ), f39_arg2 ) ), f39_local3, f39_arg3 )
end

ATTACHMENT.GetCompleteAttachmentsListData = function ( f38_arg0, f38_arg1 )
	if f38_arg1 ~= ATTACHMENT.receiverCategory and 0 < #f38_arg0 and f38_arg0[1].ref ~= ATTACHMENT.none then
		table.insert( f38_arg0, 1, {
			name = 0x7B61AC6C95CC247,
			unlocked = true,
			image = nil,
			ref = ATTACHMENT.none,
			category = f38_arg1,
			variants = {},
			gunsmithAttach = {
				lootID = 4294967295,
				challengeID = {}
			}
		} )
	end
	return f38_arg0
end

ATTACHMENT.SetupAttachmentSelectMenu = function ( f37_arg0, f37_arg1, f37_arg2 )
	LOADOUT.SetLoadoutIndex( f37_arg1, f37_arg2.loadoutIndex )
	local f37_local0 = f37_arg2.weaponSlot
	WEAPON.SetWeaponSlot( f37_arg1, f37_local0 )
	local f37_local1 = f37_arg2.attachSlot
	if not f37_local1 then
		f37_local1 = ATTACHMENT.GetAvailableAttachSlot( f37_arg1, f37_local0, f37_arg2.category, f37_arg2.forShowcase )
	end
	ATTACHMENT.SetAttachSlot( f37_arg1, f37_local1 )
	if not CONDITIONS.IsMobileOrMobileSim() then
		return 
	else
		local f37_local2 = ATTACHMENT.GetCurrentAttachmentFullDetails( f37_arg1, f37_arg2.attachments, f37_arg2.category, {
			isSetup = true
		} )
		local f37_local3 = f37_local2.statsDetails
		f37_arg0._weaponAttributes = f37_local3.weaponAttributes
		f37_arg0._defaultAttachmentData = f37_local3.defaultAttachmentData
		f37_arg0.detailsDataSource = LUI.SetupDataSourceUpdate( f37_arg0, f37_arg1, "UpdateDetailsDataSources", "alwaysLoaded.menu.attachment.details", f37_local2, LOADOUT.FormatDetailsDataTable, {
			rootField = "detailsDataSource",
			listHandlersData = GUNSMITH.GetModifiersValuesDataSourcesListHandlersData()
		} )
	end
end

ATTACHMENT.GetAvailableAttachSlot = function ( f36_arg0, f36_arg1, f36_arg2, f36_arg3 )
	local f36_local0 = GUNSMITH.GetWeaponsPlayerData( f36_arg0, LOADOUT.GetLoadoutIndex( f36_arg0 ), f36_arg3 )
	local f36_local1 = f36_local0[f36_arg1]
	local f36_local2 = GUNSMITH.GetAvailableAttachmentSetupIndex( f36_arg2, f36_local1 )
	if f36_local2 == nil then
		f36_local2 = GUNSMITH.GetSelectedBlueprintAttachIndexForCategory( f36_arg2, WEAPON.GenerateWeaponTable( f36_local1 ) )
	end
	if f36_arg2 == ATTACHMENT.none then
		
	else
		
	end
	return f36_local2
end

ATTACHMENT.GetEquippedAttachmentSlot = function ( f35_arg0, f35_arg1, f35_arg2, f35_arg3, f35_arg4 )
	local f35_local0 = GUNSMITH.GetEquippedWeaponTable( f35_arg0, f35_arg1, f35_arg2, f35_arg4 )
	local f35_local1 = GUNSMITH.AttachmentSetupDataMap[GUNSMITH.AttachmentSetupType.ATTACHMENT].maxIndex + 1
	for f35_local2 = 1, f35_local1, 1 do
		if f35_local0.attachments[f35_local2].ref == f35_arg3 then
			return f35_local2
		end
	end
	return nil
end

ATTACHMENT.GetEquippedAttachmentData = function ( f34_arg0, f34_arg1, f34_arg2, f34_arg3, f34_arg4 )
	local f34_local0 = GUNSMITH.GetEquippedWeaponTable( f34_arg0, f34_arg1, f34_arg2, f34_arg4 )
	return f34_local0.attachments[f34_arg3]
end

ATTACHMENT.GetEquippedAttachmentRef = function ( f33_arg0, f33_arg1, f33_arg2, f33_arg3 )
	local f33_local0 = ATTACHMENT.GetEquippedAttachmentData( f33_arg0, f33_arg1, f33_arg2, f33_arg3 )
	local f33_local1
	if f33_local0 then
		f33_local1 = f33_local0.ref
		if not f33_local1 then
		
		else
			return f33_local1
		end
	end
	f33_local1 = nil
end

ATTACHMENT.GetEquippedAttachmentVariantID = function ( f32_arg0, f32_arg1, f32_arg2, f32_arg3 )
	local f32_local0 = ATTACHMENT.GetEquippedAttachmentData( f32_arg0, f32_arg1, f32_arg2, f32_arg3 )
	local f32_local1
	if f32_local0 then
		f32_local1 = f32_local0.variantID
		if not f32_local1 then
		
		else
			return f32_local1
		end
	end
	f32_local1 = nil
end

ATTACHMENT.IsAttachmentEquipped = function ( f31_arg0, f31_arg1, f31_arg2, f31_arg3 )
	local f31_local0 = LOADOUT.GetLoadoutIndex( f31_arg0 )
	local f31_local1
	if f31_local0 then
		f31_local1 = ATTACHMENT.GetEquippedAttachmentSlot( f31_arg0, f31_local0, f31_arg1, f31_arg2 )
		if not f31_local1 then
		
		else
			return f31_local1 ~= nil
		end
	end
	f31_local1 = nil
end

ATTACHMENT.GetRefWithClassifiedSupport = function ( f30_arg0 )
	return f30_arg0.isClassified and ATTACHMENT.none or f30_arg0.ref
end

ATTACHMENT.GetWeaponTableWithOnlyEquippedAttachmentRef = function ( f29_arg0, f29_arg1, f29_arg2, f29_arg3 )
	if ATTACHMENT.IsAttachmentEquipped( f29_arg0, WEAPON.GetWeaponSlot( f29_arg0 ), attachSlot, f29_arg2, f29_arg3 ) then
		for f29_local3, f29_local4 in ipairs( f29_arg1.attachments ) do
			if f29_local4.ref == f29_arg2 then
				return GUNSMITH.GetTableWithOnlyEquippedAttachment( f29_arg1.weapon, f29_local4 )
			end
		end
	end
	return nil
end

ATTACHMENT.GetAltReceiverTable = function ( f28_arg0, f28_arg1, f28_arg2 )
	if f28_arg2.category == ATTACHMENT.receiverCategory then
		local f28_local0 = WEAPON.GenerateWeaponTableFromRef( WEAPON.GetWeaponRefByRec( f28_arg2.ref ) )
		local f28_local1 = ATTACHMENT.GetAttachSlot( f28_arg0 )
		local f28_local2 = ATTACHMENT.GetRefWithClassifiedSupport( f28_arg2 )
		return ATTACHMENT.GetTableWithCurrentAttachment( f28_local0, f28_local1, f28_arg2.blockedCategorySlot, f28_local2, ATTACHMENT.GetVariantIDFromWeaponTableAndRef( f28_arg0, f28_arg1, f28_local2 ) )
	else
		return nil
	end
end

ATTACHMENT.GetAttachmentWeaponTableForAmmoData = function ( f27_arg0, f27_arg1, f27_arg2, f27_arg3 )
	local f27_local0 = ATTACHMENT.GetAltReceiverTable( f27_arg0, f27_arg1, f27_arg2 )
	local f27_local1 = ATTACHMENT.IsAttachmentEquipped( f27_arg0, WEAPON.GetSlotFromRef( f27_arg1.weapon ) - 1, f27_arg2.ref )
	local f27_local2 = f27_arg3
	if f27_arg2.category == ATTACHMENT.receiverCategory and f27_local0 then
		f27_local2 = f27_local0
	elseif f27_local1 and not CONDITIONS.IsMobileOrMobileSim() then
		f27_local2 = f27_arg1
	end
	return f27_local2
end

ATTACHMENT.GetBaseCompareAttachmentAttributesDetails = function ( f26_arg0, f26_arg1, f26_arg2, f26_arg3, f26_arg4, f26_arg5 )
	if not f26_arg5 then
		f26_arg5 = {}
	end
	local f26_local0 = f26_arg5.isTuning
	local f26_local1 = f26_arg1.weapon
	local f26_local2 = WEAPON.GetWeaponModelName( f26_local1, f26_arg1, {
		showSWhiskeyMag = true,
		keepAkimbo = true,
		includeBlueprintTune = true,
		includeAttachments = true
	} )
	local f26_local3 = ClientWeapon[0x75228338D174290]( f26_arg0, f26_local2, false, true, true )
	local f26_local4 = ClientWeapon[0x75228338D174290]( f26_arg0, WEAPON.GetWeaponModelNameFromRef( f26_local1 ), false, true, true )
	local f26_local5 = nil
	if f26_arg2.ref == ATTACHMENT.none then
		f26_local5 = ATTACHMENT.GetAttachmentSlotIndexFromCategory( f26_arg2.category )
	else
		f26_local5 = Engine[0x603B6AC5797050A]( f26_local2, f26_arg2.ref )
	end
	local f26_local6, f26_local7 = nil
	if f26_local3 and f26_local4 then
		local f26_local8 = nil
		if f26_arg2.category ~= ATTACHMENT.receiverCategory then
			local f26_local9 = {}
			GUNSMITH.SetupWeaponDefaultAttachmentDataForEquippedAttachment( f26_local9, f26_arg0, GL_HACK.GetWeaponMPRef( f26_local1 ), f26_local2, f26_arg1.attachments, f26_local5, f26_arg2.ref, f26_arg4 )
			if f26_local9.defaultAttachmentStats and f26_local9.defaultModifierValues then
				f26_local7 = f26_local9
			end
			if not String.IsNilOrEmpty( f26_local9.weaponStringWithNewAttachment ) then
				f26_local8 = ClientWeapon[0xFE24333F9BC2CAB]( f26_arg0, f26_local9.weaponStringWithNewAttachment, f26_local5 )
				f26_local9.weaponStringWithNewAttachment = nil
			end
		end
		if not f26_local8 then
			f26_local8 = ClientWeapon[0xFE24333F9BC2CAB]( f26_arg0, f26_local2, f26_local5 )
		end
		f26_local6 = {}
		for f26_local14, f26_local15 in pairs( f26_local3 ) do
			local f26_local12 = f26_local8.tunedStats and f26_local8.tunedStats[f26_local14] or f26_local8.unTunedStats[f26_local14]
			if not f26_local12 or f26_local12 ~= f26_local12 then
				f26_local12 = 0
			end
			if f26_local7 then
				local f26_local13 = f26_local7.defaultAttachmentStats
				if not f26_local13[f26_local14] or f26_local13[f26_local14] ~= f26_local13[f26_local14] then
					f26_local13[f26_local14] = 0
				else
					f26_local12 = f26_local12 - f26_local13[f26_local14]
				end
			end
			local f26_local13 = nil
			if f26_arg5.isEquipped then
				f26_local13 = f26_local15 - f26_local12
			else
				f26_local13 = f26_local15
			end
			f26_local6[f26_local14] = {
				total = f26_local13,
				weapon = f26_local13,
				attachment = f26_local12
			}
		end
	end
	local f26_local8 = nil
	if f26_local0 then
		f26_local8 = WEAPON.GetAttributeSetModifiedByAttachmentAndTuning( f26_arg0, f26_local2, f26_local5 )
	end
	if f26_local7 then
		GUNSMITH.ApplyDefaultModifierAdjustments( f26_local7.defaultModifierValues, f26_arg5.modifiersValues )
	end
	return f26_local6, f26_local7, f26_local8
end

ATTACHMENT.UpdateWeaponAttributesWithAttachmentStats = function ( f25_arg0, f25_arg1, f25_arg2 )
	for f25_local5, f25_local6 in pairs( f25_arg0 ) do
		local f25_local4 = f25_arg1[f25_local5]
		if f25_arg2 then
			local f25_local3 = f25_arg2.defaultAttachmentStats
			if f25_local3[f25_local5] then
				f25_local4 = f25_local4 - f25_local3[f25_local5]
			end
		end
		f25_local6.attachment = f25_local4
	end
	return f25_arg0
end

ATTACHMENT.GetCompareAttachmentAttributesDetails = function ( f24_arg0, f24_arg1, f24_arg2, f24_arg3, f24_arg4, f24_arg5, f24_arg6 )
	if not f24_arg6 then
		f24_arg6 = {}
	end
	local f24_local0 = WEAPON.GetWeaponModelName( f24_arg5.weapon, f24_arg5, {
		showSWhiskeyMag = true,
		includeAttachments = true,
		keepAkimbo = true
	} )
	local f24_local1 = Engine[0x603B6AC5797050A]( f24_local0, f24_arg2.ref )
	local f24_local2 = ClientWeapon[0xFE24333F9BC2CAB]( f24_arg0, f24_local0, f24_local1 )
	if f24_local1 == Enum[0x540F63FFAF44174][0xBEA71FD0CCA2F6D] and f24_arg2.category == ATTACHMENT.receiverCategory then
		local f24_local3 = StringTable[0x2DCF0973239E909]( CSV.receiverTable.file, CSV.receiverTable.cols.receiverRef, f24_arg2.ref, CSV.receiverTable.cols.weaponRef )
		if not LUI.StringIsNilOrEmpty( f24_local3 ) then
			local f24_local4 = LUI.ShallowCopy( f24_arg5 )
			f24_local4.weapon = f24_local3
			local f24_local5 = ClientWeapon[0x75228338D174290]( f24_arg0, WEAPON.GetWeaponModelName( f24_local4.weapon, f24_local4, {
				includeAttachments = true
			} ), true, true, true )
			local f24_local6 = ClientWeapon[0x75228338D174290]( f24_arg0, f24_local0, false, true, true )
			local f24_local7 = f24_local2.tunedStats or f24_local2.unTunedStats
			for f24_local11, f24_local12 in pairs( f24_arg4 ) do
				f24_local7[f24_local11] = f24_local5[f24_local11] - f24_local6[f24_local11]
			end
		end
	end
	return ATTACHMENT.UpdateWeaponAttributesWithAttachmentStats( f24_arg4, f24_local2.tunedStats or f24_local2.unTunedStats, f24_arg6.defaultAttachmentData )
end

ATTACHMENT.GetAttachmentStatsDetails = function ( f23_arg0, f23_arg1, f23_arg2, f23_arg3, f23_arg4 )
	if not f23_arg4 then
		f23_arg4 = {}
	end
	local f23_local0 = f23_arg4.weaponPlayerData
	local f23_local1 = f23_arg4.weaponAttributes
	local f23_local2 = f23_arg4.isSetup
	local f23_local3 = {}
	local f23_local4 = WEAPON.GetAmmoData( f23_arg0, ATTACHMENT.GetAttachmentWeaponTableForAmmoData( f23_arg0, f23_arg1, f23_arg2, f23_arg3, f23_arg4 ) )
	f23_local3.ammoData = f23_local4
	local f23_local5, f23_local6, f23_local7 = nil
	if f23_local2 then
		f23_local5, f23_local6, f23_local7 = ATTACHMENT.GetBaseCompareAttachmentAttributesDetails( f23_arg0, f23_arg1, f23_arg2, f23_local0, f23_arg3, f23_arg4 )
	else
		f23_local5 = ATTACHMENT.GetCompareAttachmentAttributesDetails( f23_arg0, f23_arg1, f23_arg2, f23_local0, f23_local1, f23_arg3, f23_arg4 )
	end
	f23_local3.weaponAttributes = f23_local5
	f23_local3.modifiedAttributeSet = f23_local7
	f23_local3.defaultAttachmentData = f23_local6
	if CONDITIONS.IsMobileOrMobileSim() then
		local f23_local8 = f23_arg4.modifiersValues
		if f23_local8 then
			f23_local8 = GUNSMITH.GetSortedModifiersValues( f23_local8 )
		end
		local f23_local9 = {}
		local f23_local10 = f23_arg2.category
		local f23_local11 = ATTACHMENT.receiverCategory
		f23_local9.expanderType = REG23 and MOBILEWIDGET.StatsExpandedAnims.RECEIVER_COMPARE or MOBILEWIDGET.StatsExpandedAnims.MODIFIERS
		f23_local9.lockExpander = f23_arg4.lockExpander
		f23_local9.ammoData = f23_local4
		f23_local9.details = {
			weapon = f23_arg1,
			ammo = f23_local4,
			weaponAttributes = f23_local5,
			modifiersValues = f23_local8
		}
		f23_local3.expanderData = f23_local9
	end
	return f23_local3
end

ATTACHMENT.DoesWeaponHaveEquippedAttachments = function ( f22_arg0 )
	local f22_local0 = WEAPON.GenerateWeaponTable( f22_arg0 )
	for f22_local4, f22_local5 in ipairs( f22_local0.attachments ) do
		if f22_local5.ref ~= ATTACHMENT.none and f22_local5.category ~= ATTACHMENT.receiverCategory then
			return true
		end
	end
	return false
end

local f0_local5 = function ( f21_arg0, f21_arg1, f21_arg2, f21_arg3, f21_arg4 )
	local f21_local0
	if (not (f21_arg1 ~= WEAPON.DMRClass and f21_arg0._focusedAttachmentData) or f21_arg0._focusedAttachmentData.baseTypeName ~= "bipod" and (not (f21_arg1 == WEAPON.SHOTGUNClass or f21_arg1 == WEAPON.SMGClass or f21_arg1 == WEAPON.pistolClass) or f21_arg2 ~= "tag_grip_attach")) and (f21_arg2 ~= "tag_grip_attach" or not f21_arg0._focusedAttachmentData or f21_arg1 ~= WEAPON.LMGClass) and (f21_arg3 ~= "iw9_sn_walpha" or f21_arg4 ~= ATTACHMENT.opticCategory) then
		f21_local0 = false
	else
		f21_local0 = true
	end
	return f21_local0
end

ATTACHMENT.SendAttachmentTagDataToServer = function ( f20_arg0, f20_arg1, f20_arg2 )
	local f20_local0 = ClientWeapon[0x5DD69014A9C290]( FrontEndScene.ClientWeapons.Preview )
	local f20_local1 = ""
	local f20_local2 = ""
	local f20_local3 = f20_arg0._weaponRef
	local f20_local4 = WEAPON.IsBullpup( f20_local3 )
	local f20_local5 = Table.ShallowCopy( ATTACHMENT.STOCK_OFFSET )
	if f20_arg2 == ATTACHMENT.perkCategory or f20_arg2 == ATTACHMENT.boltCategory then
		f20_local1 = "ammo_display_origin"
		local f20_local6 = CLIENT_MODEL.GetClientModelIndex( CLIENT_MODEL.coreMPModels.AMMO_DISPLAY )
		if f20_local6 then
			local f20_local7 = ClientModel[0x9088CC2C1E6A1E9]( f20_local6, CLIENT_MODEL.coreMPModels.GUN_VISE_BASE.tagOrigin )
			local f20_local8 = ClientModel[0x7FE4C5AFE1F4377]( f20_local6, CLIENT_MODEL.defaultTags.TAG_ORIGIN )
			f20_local8.xAngle = ATTACHMENT.AMMO_DISPLAY_ANGLE
			f20_local2 = f20_local1 .. "," .. f20_local7.xPosition .. "," .. f20_local7.yPosition .. "," .. f20_local7.zPosition .. "," .. f20_local8.xAngle .. "," .. f20_local8.yAngle .. "," .. f20_local8.zAngle
		end
	else
		f20_local1 = ATTACHMENT.GetAttachmentCategoryBone( f20_arg2 )
		local f20_local6 = Engine[0xC3B7925CCAC9430]( f20_arg1, f20_local0, f20_local1 )
		local f20_local7 = WEAPON.GetWeaponClass( f20_local3 )
		if f20_arg2 == ATTACHMENT.boltActionCategory or f20_arg2 == ATTACHMENT.boltRifleCategory then
			f20_local1 = "tag_laser_attach"
			if f20_local3 == WEAPON.KattAMR then
				f20_local6.zPosition = f20_local6.zPosition - 2
			else
				f20_local6.yAngle = f0_local0.yAngle
				f20_local6.xPosition = f0_local0.xPosition
				f20_local6.yPosition = f0_local0.yPosition
				f20_local6.zPosition = f0_local0.zPosition
				if f20_local3 == WEAPON.SAB50 or f20_local3 == WEAPON.SPR208 or f20_local3 == WEAPON.Longbow or f20_local3 == WEAPON.MCPR300 then
					f20_local6.xPosition = f0_local0.xPosition
					f20_local6.yPosition = f0_local0.yPosition
					f20_local6.zPosition = f0_local0.zPosition
				end
			end
		end
		if f20_local3 == "iw9_sh_vecho" and f20_local1 == "tag_laser_attach" then
			local f20_local8 = GUNSMITH.GetAttachmentAndIndexForCategory( ATTACHMENT.frontpieceCategory, f20_arg0._weaponTable )
			local f20_local9 = false
			for f20_local10 = #f20_arg0._weaponTable.attachments, 1, -1 do
				if f20_arg0._weaponTable.attachments[f20_local10].ref == "jup_cp04_sh_vecho_bar_br_amp" then
					f20_local9 = true
				end
			end
			if not f20_local8 and not f20_local9 then
				f20_local6.xPosition = f20_local6.xPosition - 1
				f20_local6.yPosition = f20_local6.yPosition + 1
				f20_local6.xAngle = f20_local6.xAngle - 40
			end
		end
		if f20_local3 == "iw9_dm_crossbow" and f20_local1 == "tag_mag_attach" then
			f20_local1 = "tag_barrel_attach"
			f20_local6 = Engine[0xC3B7925CCAC9430]( f20_arg1, f20_local0, f20_local1 )
			f20_local7 = WEAPON.GetWeaponClass( f20_local3 )
		end
		if f20_arg2 == "frontpiece" then
			if f20_local7 == WEAPON.sniperClass or f20_local7 == WEAPON.LMGClass then
				f20_local1 = "tag_barrel_attach_large"
			elseif f20_local7 == WEAPON.pistolClass then
				f20_local1 = "tag_barrel_attach_small"
			end
		elseif f20_arg2 == ATTACHMENT.backpieceCategory and f20_local3 == WEAPON.X13 then
			f20_local5.Z = ATTACHMENT.X13_STOCK_OFFSET
			f20_local6.xPosition = f20_local6.xPosition + f20_local5.X
			f20_local6.yPosition = f20_local6.yPosition + f20_local5.Y
			f20_local6.zPosition = f20_local6.zPosition + f20_local5.Z
		elseif f20_local3 == "iw9_sh_tsierra12" and f20_arg2 == ATTACHMENT.undermountCategory then
			f20_local1 = "tag_barrel_attach"
			f20_local6 = Engine[0xC3B7925CCAC9430]( f20_arg1, f20_local0, f20_local1 )
		elseif f0_local0( f20_arg0, f20_local7, f20_local1, f20_local3, f20_arg2 ) then
			f20_local1 = "tag_bipod_attach"
			f20_local6 = Engine[0xC3B7925CCAC9430]( f20_arg1, f20_local0, f20_local1 )
		elseif f20_local3 == "jup_jp37_dm_kappa98" and f20_arg2 == ATTACHMENT.reargripCategory then
			f20_local1 = "tag_grip_attach"
			f20_local6 = Engine[0xC3B7925CCAC9430]( f20_arg1, f20_local0, f20_local1 )
		end
		f20_local2 = f20_local1 .. "," .. f20_local6.xPosition .. "," .. f20_local6.yPosition .. "," .. f20_local6.zPosition .. "," .. f20_local6.xAngle .. "," .. f20_local6.yAngle .. "," .. f20_local6.zAngle
	end
	Engine[0x6055C55456F05DF]( f20_local2, 1 )
end

ATTACHMENT.SetUpBaseMarkerWeaponAttributesBar = function ( f19_arg0, f19_arg1 )
	if not f19_arg1 then
		return 
	end
	for f19_local3, f19_local4 in ipairs( WEAPON.WEAPON_ATTRIBUTES ) do
		local f19_local5 = f19_arg1[f19_local4]
		local f19_local6 = f19_arg0._statBarTable[f19_local4]
		if f19_local5 and f19_local6 then
			f19_local6:SetupInitialStats( f19_local5, true )
		end
	end
end

ATTACHMENT.UpdateAttributesBarAndLabel = function ( f18_arg0, f18_arg1, f18_arg2 )
	local f18_local0 = f18_arg0._statBarTable[f18_arg1]
	local f18_local1 = f18_arg2.attachment
	f18_local0:UpdateAttributes( f18_arg2.weapon, f18_local1, f18_arg0._isAttachments, f18_arg2.total, f18_arg0._isWeaponProgression )
	if CONDITIONS.IsMobileOrMobileSim() then
		f18_arg0._statLabelTable[f18_arg1]:SetRGB( WEAPON.GetAttributeColorForNewStat( f18_local1 ) )
	end
end

ATTACHMENT.SetupWeaponAttributesBar = function ( f17_arg0, f17_arg1, f17_arg2, f17_arg3, f17_arg4, f17_arg5, f17_arg6 )
	f17_arg0._isAttachments = f17_arg2
	f17_arg0._isWeaponProgression = f17_arg4
	if f17_arg1 then
		for f17_local3, f17_local4 in ipairs( WEAPON.WEAPON_ATTRIBUTES ) do
			local f17_local5 = f17_arg1[f17_local4]
			local f17_local6 = f17_arg0._statBarTable[f17_local4]
			if f17_local5 and f17_local6 then
				if f17_local5.total then
					f17_local6:SetupInitialStats( f17_local5.total, f17_arg3 )
				end
				ATTACHMENT.UpdateAttributesBarAndLabel( f17_arg0, f17_local4, f17_local5 )
			end
		end
	end
	if f17_arg5 then
		ATTACHMENT.GrayOutStatsWeaponAttributesBar( f17_arg0, f17_arg5 )
	end
	if f17_arg6 then
		ATTACHMENT.SetUpBaseMarkerWeaponAttributesBar( f17_arg0, f17_arg6 )
	end
end

ATTACHMENT.GRAY_OUT_BAR_ALPHA_VALUE = 0.24
ATTACHMENT.GRAY_OUT_LABEL_ALPHA_VALUE = 0.2
ATTACHMENT.GrayOutStatsWeaponAttributesBar = function ( f16_arg0, f16_arg1 )
	if f16_arg1 then
		for f16_local5, f16_local6 in ipairs( WEAPON.WEAPON_ATTRIBUTES ) do
			if not f16_arg1[f16_local6] then
				local f16_local3 = f16_arg0._statBarTable[f16_local6]
				local f16_local4 = f16_arg0._statLabelTable[f16_local6]
				if f16_local3 and f16_local4 then
					f16_local3:SetAlpha( ATTACHMENT.GRAY_OUT_BAR_ALPHA_VALUE )
					f16_local4:SetAlpha( ATTACHMENT.GRAY_OUT_LABEL_ALPHA_VALUE )
				end
			end
		end
	end
end

ATTACHMENT.UpdateWeaponAttributesBar = function ( f15_arg0, f15_arg1 )
	if f15_arg1 then
		for f15_local3, f15_local4 in ipairs( WEAPON.WEAPON_ATTRIBUTES ) do
			local f15_local5 = f15_arg1[f15_local4]
			if f15_local5 then
				ATTACHMENT.UpdateAttributesBarAndLabel( f15_arg0, f15_local4, f15_local5 )
			end
		end
	end
end

ATTACHMENT.HideStatsAttributesBar = function ( f14_arg0 )
	for f14_local3, f14_local4 in pairs( f14_arg0._statBarTable ) do
		ACTIONS.AnimateSequence( f14_local4, "HideStats" )
	end
end

ATTACHMENT.SetUpWeaponAttributesWidgetStatTables = function ( f13_arg0 )
	f13_arg0._statBarTable = {
		RANGE = f13_arg0.RangeBar,
		ACCURACY = f13_arg0.AccuracyBar,
		RECOIL = f13_arg0.RecoilBar,
		MOBILITY = f13_arg0.MobilityBar,
		HANDLING = f13_arg0.HandlingBar,
		DAMAGE = f13_arg0.DamageBar,
		FIRE_RATE = f13_arg0.FireRateBar
	}
	f13_arg0._statLabelTable = {
		RANGE = f13_arg0.Range,
		ACCURACY = f13_arg0.Accuracy,
		RECOIL = f13_arg0.Recoil,
		MOBILITY = f13_arg0.Mobility,
		HANDLING = f13_arg0.Handling,
		DAMAGE = f13_arg0.Damage,
		FIRE_RATE = f13_arg0.FireRate
	}
end

ATTACHMENT.GetTacticalBuildData = function ( f12_arg0, f12_arg1, f12_arg2 )
	if not String.IsNilOrEmpty( f12_arg0 ) and not String.IsNilOrEmpty( f12_arg1 ) and f12_arg2 then
		local f12_local0 = Engine[0xC1071CB24322BA5]( f12_arg0, f12_arg1, f12_arg2 )
		if f12_local0 and not Table.IsEmpty( f12_local0 ) then
			if type( f12_local0.tracerColor ) == "string" and not String.IsNilOrEmpty( f12_local0.tracerColor ) and COLORS_UTILS.IsStringHexCode( f12_local0.tracerColor ) then
				f12_local0.tracerColor = COLORS_UTILS.HexToRGB( f12_local0.tracerColor )
			else
				f12_local0.tracerColor = nil
			end
			if type( f12_local0.dismembermentColor ) == "string" and not String.IsNilOrEmpty( f12_local0.dismembermentColor ) and COLORS_UTILS.IsStringHexCode( f12_local0.dismembermentColor ) then
				f12_local0.dismembermentColor = COLORS_UTILS.HexToRGB( f12_local0.dismembermentColor )
			else
				f12_local0.dismembermentColor = nil
			end
			return f12_local0
		end
	end
end

ATTACHMENT.GetAttachmentSlotIndexFromCategory = function ( f11_arg0 )
	local f11_local0 = nil
	if f11_arg0 == ATTACHMENT.opticCategory then
		f11_local0 = ATTACHMENT.scopeCategory
	elseif f11_arg0 == ATTACHMENT.reargriptwoCategory or f11_arg0 == ATTACHMENT.slings then
		f11_local0 = ATTACHMENT.reargripCategory
	elseif f11_arg0 == ATTACHMENT.undermountCategory then
		f11_local0 = ATTACHMENT.underbarrelSlot
	elseif f11_arg0 == ATTACHMENT.perkCategory then
		f11_local0 = ATTACHMENT.modifierSlot
	else
		f11_local0 = f11_arg0
	end
	return Engine[0x45258A710ADDE0D]( f11_local0 )
end

ATTACHMENT.GetChildAttachmentRef = function ( f9_arg0, f9_arg1 )
	local f9_local0 = ATTACHMENT.GetAttachmentSlotIndexFromCategory( ATTACHMENT.GetCategoryByLootID( f9_arg1 ) )
	if 0 < f9_local0 then
		local f9_local1 = GL_HACK.GetWeaponMPRef( f9_arg0 )
		local f9_local2 = nil
		Engine[0x95609C40A84C41C]( f9_local1, f9_local0, function ( f10_arg0 )
			local f10_local0 = f10_arg0.ref
			if ATTACHMENT.GetLootIDForRef( f10_local0 ) == f9_arg0 then
				f9_arg0 = f10_local0
				return false
			else
				
			end
		end )
		return f9_local2
	else
		return nil
	end
end

local f0_local6 = function ( f8_arg0, f8_arg1, f8_arg2 )
	f8_arg0._updateFilterTable[f8_arg1] = not f8_arg0._updateFilterTable[f8_arg1]
	f8_arg0:SelectFilter( f8_arg1, not f8_arg0:IsFilterSelected( f8_arg1, f8_arg2 ), f8_arg2 )
end

local f0_local7 = function ( f6_arg0, f6_arg1, f6_arg2, f6_arg3 )
	local f6_local0 = {
		shouldUpdateSelection = true,
		header = f6_arg1
	}
	for f6_local4, f6_local5 in pairs( f6_arg2 ) do
		f6_arg0._updateFilterTable[f6_local5.ref] = false
		table.insert( f6_local0, {
			label = Engine[0xED84C33EC5F01EA]( f6_local5.name ),
			action = function ()
				f6_arg0( f6_arg0, f6_arg0.ref, f6_arg0 )
			end,
			selected = f6_arg0:IsFilterSelected( f6_local5.ref, f6_arg3 )
		} )
	end
	return f6_local0
end

local f0_local8 = function ( f5_arg0 )
	if CONDITIONS.EnableFilterAttachmentImprovement() then
		for f5_local3, f5_local4 in pairs( f5_arg0._updateFilterTable ) do
			if f5_local4 then
				return true
			end
		end
		return false
	else
		local f5_local0 = false
		for f5_local4, f5_local5 in pairs( f5_arg0._updateFilterTable ) do
			if f5_local4 == LOOT.unlockFilters.UNLOCKED.ref or f5_local4 == LOOT.unlockFilters.LOCKED.ref then
				if not f5_local0 and f5_local5 then
					f5_local0 = true
				end
				if f5_local0 and f5_local5 and f5_arg0:IsFilterSelected( LOOT.unlockFilters.UNLOCKED.ref, LOOT.FilterCategories.UNLOCK ) ~= f5_arg0:IsFilterSelected( LOOT.unlockFilters.LOCKED.ref, LOOT.FilterCategories.UNLOCK ) then
					return true
				end
			end
			if f5_local5 then
				return true
			end
		end
		if f5_local0 then
			return true
		end
		return false
	end
end

local f0_local9 = function ( f3_arg0, f3_arg1 )
	if not CONDITIONS.IsAttachmentFilteringEnabled() then
		
	else
		
	end
	local f3_local0 = f3_arg1.menu
	if CONDITIONS.EnableFilterAttachmentImprovement() then
		
	else
		
	end
	local f3_local1 = {
		multiSelect = true,
		blockSound = true,
		controllerIndex = f3_arg1.controllerIndex,
		parentMenu = f3_local0,
		menuName = CONDITIONS.EnableFilterAttachmentImprovement() and Engine[0xED84C33EC5F01EA]( 0xF99334C014A82F9 ) or Engine[0xED84C33EC5F01EA]( 0x59D7A2BADD1083E )
	}
	local f3_local2 = MenuBuilder.BuildRegisteredType( "GenericPopupList", f3_local1 )
	f3_local2:AddButtonActions( f3_local1, f0_local0( f3_local0, Engine[0xED84C33EC5F01EA]( 0x6106FC07DEED61 ), LOOT.attachmentFilters, LOOT.FilterCategories.ATTACHMENT_STATS ) )
	if CONDITIONS.EnableFilterAttachmentImprovement() then
		if not Table.IsNilOrEmpty( f3_arg1.subcategoryFilters ) then
			f3_local2:AddButtonActions( f3_local1, f0_local0( f3_local0, Engine[0xED84C33EC5F01EA]( 0xA78DF732E0DB0B7 ), f3_arg1.subcategoryFilters, LOOT.FilterCategories.SUBCATEGORIES ) )
		end
	else
		f3_local2:AddButtonActions( f3_local1, f0_local0( f3_local0, Engine[0xED84C33EC5F01EA]( 0xA7199D12A38C3F ), LOOT.unlockFilters, LOOT.FilterCategories.UNLOCK ) )
		f3_local2:AddButtonActions( f3_local1, f0_local0( f3_local0, Engine[0xED84C33EC5F01EA]( 0x3508B49E95AEF0F ), LOOT.otherFilters, LOOT.FilterCategories.AMP ) )
	end
	local f3_local3 = MenuBuilder.BuildRegisteredType( "FlyInPopup", {
		controllerIndex = 0,
		flyInRightNarrow = true,
		quickCloseEvent = "closing_quick_access_menu",
		disableQuickAccessShortcuts = true,
		widget = f3_local2
	} )
	f3_local3.id = "AttachmentFilterPopupLayout"
	f3_local3:addEventHandler( "menu_close", function ( f4_arg0, f4_arg1 )
		if f3_arg0( f3_arg0 ) then
			f3_arg0._isComingFromFilterMenu = true
			if CONDITIONS.EnableFilterAttachmentImprovement() then
				f3_arg0:SortAndFilterAttachmentTable( f4_arg1.controller )
			else
				f3_arg0:FilterAttachments( f4_arg1.controller )
			end
			for f4_local3, f4_local4 in ipairs( f3_arg0.Attachments:GetBuiltChildren() ) do
				f4_local4:LoseFocus( {
					snap = true
				} )
			end
			f3_arg0:UpdateCurrentlyFiltering( f4_arg1.controller )
		end
		f4_arg0:exitAnimation( f4_arg0, f3_arg0 )
	end )
	return f3_local3
end

local f0_local10 = function ()
	local f2_local0 = PROJECT[0x5A05E13AC947C99][0x11C401BC2A0488B]
	if f2_local0 == nil then
		f2_local0 = {
			[0xB0AF1E5077CB5C3] = {}
		}
		PROJECT[0x5A05E13AC947C99][0x11C401BC2A0488B] = f2_local0
		local f2_local1 = CSV.ampChallenges.GetFile()
		if not String.IsNilOrEmpty( f2_local1 ) then
			local f2_local2 = StringTable[0xFD4E49A34DD43AE]( f2_local1 )
			for f2_local3 = 0, f2_local2 - 1, 1 do
				local f2_local6 = CSV.ReadRow( CSV.ampChallenges, f2_local3 )
				if f2_local6 then
					for f2_local10, f2_local11 in ipairs( String.Split( f2_local6.loot, "|" ) ) do
						local f2_local12 = tonumber( f2_local11 )
						if f2_local0[0xB0AF1E5077CB5C3][f2_local12] == nil then
							f2_local0[0xB0AF1E5077CB5C3][f2_local12] = {}
						end
						table.insert( f2_local0[0xB0AF1E5077CB5C3][f2_local12], f2_local6 )
					end
				end
			end
		end
	end
	return f2_local0
end

ATTACHMENT.GetAMPChallengesByLootID = function ( f1_arg0 )
	local f1_local0 = f0_local0()
	return f1_local0[0xB0AF1E5077CB5C3][f1_arg0]
end

MenuBuilder.registerType( "AttachmentFilterPopupLayout", f0_local9 )
