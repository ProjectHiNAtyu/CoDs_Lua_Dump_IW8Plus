-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
module( ..., package.seeall )
local f0_local0 = function ( f24_arg0, f24_arg1 )
	ACTIONS.AnimateSequence( f24_arg0, "CustomizeSummary" )
	local f24_local0 = ACTIONS.AnimateSequence
	local f24_local1 = f24_arg0.BarracksCustomizeSummary
	local f24_local2
	if CONDITIONS.IsOnlineAndSignedIn( f24_arg0._controllerIndex ) and not f24_arg1 then
		f24_local2 = f24_arg1
	else
		f24_local2 = "HideAll"
	end
	f24_local0( f24_local1, f24_local2 )
end

local f0_local1 = function ( f23_arg0, f23_arg1 )
	local f23_local0
	if f23_arg0._currentClanTagType ~= ClanTagType.OFFICIAL and 0 >= #(Clans[0x798165264495B93]( f23_arg1 ) or {}) then
		f23_local0 = false
	else
		f23_local0 = true
	end
	f23_arg0._switchClanTagEnabled = f23_local0
	f23_local0 = f23_arg0.BarracksCustomizeSummary.SwitchClanTagPrompt
	local f23_local1 = f23_local0
	f23_local0 = f23_local0.SetAlpha
	local f23_local2
	if f23_arg0._switchClanTagEnabled then
		f23_local2 = 1
	else
		f23_local2 = 0
	end
	f23_local0( f23_local1, f23_local2 )
end

local f0_local2 = function ( f22_arg0, f22_arg1 )
	if f22_arg1 and f22_arg0.MPBarracksMenuButtons[f22_arg1] and f22_arg0.MPBarracksMenuButtons:GetIndexForElement( f22_arg0.MPBarracksMenuButtons[f22_arg1] ) then
		f22_arg0.MPBarracksMenuButtons:processEvent( {
			name = "lose_focus"
		} )
		f22_arg0.MPBarracksMenuButtons[f22_arg1]:processEvent( {
			name = "gain_focus"
		} )
	end
end

local f0_local3 = function ( f21_arg0, f21_arg1 )
	Loot[0xD9BF22C85C5F944]( f21_arg1, LOOT.typeNames[LOOT.itemTypes.PLAYERCARD] )
	Loot[0xD9BF22C85C5F944]( f21_arg1, LOOT.typeNames[LOOT.itemTypes.EMBLEM] )
	if CONDITIONS.IsNewBarracksIdentityEnabled() then
		f21_arg0.MPBarracksMenuButtons.CallingCardsButton:UpdateNewItemNotification( 0 )
		f21_arg0.MPBarracksMenuButtons.EmblemsButton:UpdateNewItemNotification( 0 )
	else
		f21_arg0.MPBarracksMenuButtons.CustomizeButton:UpdateNewItemNotification( 0 )
	end
	ACTIONS.UploadStats( nil, f21_arg1 )
end

local f0_local4 = function ( f20_arg0, f20_arg1 )
	local f20_local0 = LOOT.IsCategoryNew( f20_arg1, LOOT.itemTypes.PLAYERCARD )
	local f20_local1 = LOOT.IsCategoryNew( f20_arg1, LOOT.itemTypes.EMBLEM )
	if CONDITIONS.IsNewBarracksIdentityEnabled() then
		local f20_local2 = f20_arg0.MPBarracksMenuButtons.EmblemsButton
		local f20_local3 = f20_local2
		f20_local2 = f20_local2.UpdateNewItemNotification
		local f20_local4
		if f20_local1 then
			f20_local4 = 1
		else
			f20_local4 = 0
		end
		f20_local2( f20_local3, f20_local4 )
		f20_local2 = f20_arg0.MPBarracksMenuButtons.CallingCardsButton
		f20_local3 = f20_local2
		f20_local2 = f20_local2.UpdateNewItemNotification
		if f20_local0 then
			f20_local4 = 1
		else
			f20_local4 = 0
		end
		f20_local2( f20_local3, f20_local4 )
	else
		local f20_local2
		if not f20_local0 then
			f20_local2 = f20_local0
		else
			f20_local2 = f20_local1
		end
		local f20_local5 = f20_arg0.MPBarracksMenuButtons.CustomizeButton
		local f20_local4 = f20_local5
		f20_local5 = f20_local5.UpdateNewItemNotification
		local f20_local6
		if f20_local2 then
			f20_local6 = 1
		else
			f20_local6 = 0
		end
		f20_local5( f20_local4, f20_local6 )
	end
end

local f0_local5 = function ( f3_arg0, f3_arg1, f3_arg2 )
	assert( f3_arg0.MPBarracksMenuButtons.ProgressionButton )
	assert( f3_arg0.MPBarracksMenuButtons.RecordsButton )
	if CONDITIONS.IsMPIntelMenuEnabled( f3_arg0 ) then
		assert( f3_arg0.MPBarracksMenuButtons.IntelButton )
	end
	f3_arg0.FocusButtonByName = f0_local0
	f3_arg0._controllerIndex = f3_arg1
	PROGRESSION.PrestreamRankUnlocksIcons( f3_arg0, f3_arg1 )
	local f3_local0 = function ()
		if not f3_arg0.BarracksChallengesSummary.initialized then
			f3_arg0.BarracksChallengesSummary:InitializeData( f3_arg0 )
		end
		ACTIONS.AnimateSequence( f3_arg0, "ChallengesSummary" )
	end
	
	local f3_local1 = function ()
		ACTIONS.AnimateSequence( f3_arg0, "CustomizeSummary" )
	end
	
	local f3_local2 = function ()
		if not CONDITIONS.IsMagmaGameMode() then
			ACTIONS.AnimateSequence( f3_arg0, "StatsSummary" )
		else
			ACTIONS.AnimateSequence( f3_arg0, "HideStatsSummary" )
		end
	end
	
	local f3_local3 = function ()
		if f3_arg0.ElderProgressionRankPanel then
			ACTIONS.AnimateSequence( f3_arg0, "ElderProgressionSummary" )
		else
			ACTIONS.AnimateSequence( f3_arg0, "ProgressionSummary" )
		end
	end
	
	local f3_local4 = function ()
		if Engine[0x575E9C5B9AAB6F4]() then
			assert( f3_arg0.MPBarracksMenuButtons.AchievementButton )
			ACTIONS.AnimateSequence( f3_arg0, "AchievementsSummary" )
		end
	end
	
	local f3_local5 = function ()
		ACTIONS.AnimateSequence( f3_arg0, "IntelSummary" )
	end
	
	if f3_arg0.MPBarracksMenuButtons.ChallengesButton then
		f3_arg0.MPBarracksMenuButtons.ChallengesButton:addEventHandler( "button_over", f3_local0 )
		f3_arg0.MPBarracksMenuButtons.ChallengesButton:addEventHandler( "button_over_disable", f3_local0 )
	end
	if not CONDITIONS.IsNewBarracksIdentityEnabled() then
		f3_arg0.MPBarracksMenuButtons.CustomizeButton:addEventHandler( "button_over", f3_local1 )
	end
	f3_arg0.MPBarracksMenuButtons.ProgressionButton:addEventHandler( "button_over", f3_local3 )
	f3_arg0.MPBarracksMenuButtons.ProgressionButton:addEventHandler( "button_over_disable", function ( f13_arg0, f13_arg1 )
		ACTIONS.AnimateSequence( f3_arg0, "HideStatsSummary" )
	end )
	f3_arg0.MPBarracksMenuButtons.RecordsButton:addEventHandler( "button_over", f3_local2 )
	if CONDITIONS.IsMPIntelMenuEnabled( f3_arg0 ) then
		f3_arg0.MPBarracksMenuButtons.IntelButton:addEventHandler( "button_over", f3_local5 )
	end
	if f3_arg0.MPBarracksMenuButtons.ClanTagButton then
		f3_arg0._switchClanTagEnabled = false
		f3_arg0._currentClanTagType = FRIENDS.GetCurrentClanTagType( f3_arg1 )
		f3_arg0:addEventHandler( "text_input_complete", function ( f12_arg0, f12_arg1 )
			if f12_arg1.text then
				Engine[0xEF205737D1A7BA4]( f3_arg0, f12_arg1.text )
			end
		end )
		f3_arg0:addEventHandler( "update_clan_tag_type", function ( f11_arg0, f11_arg1 )
			f3_arg0._currentClanTagType = f11_arg1.clanTagType
			f3_arg0( f3_arg0, f3_arg0 )
		end )
		f3_arg0.MPBarracksMenuButtons.ClanTagButton:addEventHandler( "button_over", function ( f10_arg0, f10_arg1 )
			if CONDITIONS.IsSystemLink( f3_arg0 ) then
				f3_arg0( f3_arg0, "ShowCustomClanTagTopLeft" )
			else
				f3_arg0( f3_arg0, "ShowClanTags" )
				f3_arg0.BarracksCustomizeSummary:UpdateClanTagType( f3_arg0._currentClanTagType )
				f3_arg0( f3_arg0, f3_arg0 )
			end
		end )
		f3_arg0.MPBarracksMenuButtons.ClanTagButton:addEventHandler( "button_up", function ( f9_arg0, f9_arg1 )
			if LUI.IsLastInputGamepad( f3_arg0 ) then
				f3_arg0.BarracksCustomizeSummary.SwitchClanTagPrompt:SetAlpha( 0 )
				f3_arg0._switchClanTagEnabled = false
			end
		end )
	end
	if f3_arg0.MPBarracksMenuButtons.CallingCardsButton then
		f3_arg0.MPBarracksMenuButtons.CallingCardsButton:addEventHandler( "button_over", function ( f8_arg0, f8_arg1 )
			f3_arg0( f3_arg0, "ShowCallingCard" )
		end )
	end
	if f3_arg0.MPBarracksMenuButtons.EmblemsButton then
		f3_arg0.MPBarracksMenuButtons.EmblemsButton:addEventHandler( "button_over", function ( f7_arg0, f7_arg1 )
			f3_arg0( f3_arg0, "ShowEmblem" )
		end )
	end
	if PROGRESSION.IsElder( f3_arg1 ) or Dvar[0x9E5BE3B4BBA4E0E]( 0x61996D6CA9C0B73 ) then
		f3_arg0.MPBarracksMenuButtons.ProgressionButton.Text:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xAB6D1B868425B97 ) ) )
		f3_arg0.MPBarracksMenuButtons.ProgressionButton.Description:setText( Engine[0xED84C33EC5F01EA]( 0x546ECA1E88F528B ), 0 )
	end
	f0_local0( f3_arg0, f3_arg1 )
	if not f3_arg0.bindButton then
		local self = LUI.UIBindButton.new()
		self.id = "bindButton"
		f3_arg0:addElement( self )
		f3_arg0.bindButton = self
	end
	f3_arg0.bindButton:addEventHandler( "button_left_stick", function ( f6_arg0, f6_arg1 )
		if Dvar[0x9E5BE3B4BBA4E0E]( 0xF5F221A98F7AAE1 ) then
			f3_arg0( f3_arg0, f3_arg0 )
			Engine[0xC4146BA76D0F982]( SOUND_SETS.default.selectAlt )
		end
	end )
	f3_arg0.bindButton:addEventHandler( "button_alt1", function ( f5_arg0, f5_arg1 )
		if f3_arg0._switchClanTagEnabled then
			local f5_local0 = f3_arg0._currentClanTagType
			local f5_local1 = ClanTagType.CUSTOM
			f5_local0 = REG7 and ClanTagType.OFFICIAL or ClanTagType.CUSTOM
			Engine[0x83EEB60522A30A9]( f3_arg0, f5_local0 )
			f3_arg0._currentClanTagType = f5_local0
			Engine[0xC4146BA76D0F982]( SOUND_SETS.default.gainFocus )
		end
	end )
	if Engine[0x575E9C5B9AAB6F4]() then
		f3_arg0.MPBarracksMenuButtons.AchievementButton:addEventHandler( "button_over", f3_local4 )
	end
	FrontEndScene.HideAllCharacters()
	Engine[0x685AE31DEDA30A4]( "squad_lobby" )
	local self = LUI.DataSourceInGlobalModel.new( "menu.spltscreenDisplay.controllerIndex" )
	f3_arg0:SubscribeToModel( self:GetModel( f3_arg1 ), function ()
		local f4_local0 = f3_arg0:GetValue( f3_arg0 )
		if not f4_local0 then
			f4_local0 = Engine[0x45B054C920178E9]()
		end
		if 1 < Engine[0x70187FE84AE61FD]() then
			f3_arg0.BarracksCustomizeSummary:SetData( f4_local0 )
			if f3_arg0.BarracksStatsSummary then
				f3_arg0.BarracksStatsSummary:SetData( f4_local0 )
			end
		end
	end )
end

local f0_local6 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PostLoadShared = f0_local0
end

function BarracksMenuBase( menu, controller )
	local self = LUI.UIVerticalNavigator.new()
	self.id = "BarracksMenuBase"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "BarracksMenuBase", BarracksMenuBase )
LockTable( _M )
