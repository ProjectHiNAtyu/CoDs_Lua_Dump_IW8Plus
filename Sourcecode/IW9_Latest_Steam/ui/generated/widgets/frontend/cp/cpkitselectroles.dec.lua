-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
module( ..., package.seeall )
local f0_local0 = function ( f4_arg0, f4_arg1, f4_arg2, f4_arg3 )
	f4_arg0.Button.ButtonHighlight.PrimaryAction:setCaseStyle( LUI.CaseStyle.Uppercase )
	f4_arg0.Button.SubHeader:setCaseStyle( LUI.CaseStyle.Uppercase )
	f4_arg0._kitInfo = f4_arg2
	f4_arg0.isKitLocked = CP.IsKitLocked( f4_arg1, f4_arg2.ref )
	local f4_local0 = {
		image = f4_arg2.uiImageXLarge
	}
	if f4_arg0.isKitLocked then
		f4_local0.subHeader = f4_arg2.uiName
	end
	f4_arg0.Button:SetupButton( {
		removeEquipBanner = true,
		imageSize = "ImageFull",
		doNotRemoveBackground = true,
		buttonData = f4_local0,
		noAction = f4_arg3,
		primaryActionText = Engine[0xED84C33EC5F01EA]( f4_arg0.isKitLocked and 0xE10813BA2A28138 or 0x7D9DC9E3291E103 ),
		colorOverrides = f4_arg0.isKitLocked and {
			highlightEnable = SWATCHES.genericButton.lockedText
		} or nil
	} )
	f4_arg0:SetupButton( f4_arg2 )
	f4_arg0.Button:addEventHandler( "button_over", function ( f6_arg0, f6_arg1 )
		f6_arg0:dispatchEventToRoot( {
			name = "kit_button_over",
			button = f6_arg0,
			kitInfo = f4_arg0._kitInfo
		} )
	end )
	f4_arg0.Button:addEventHandler( "button_action", function ( f5_arg0, f5_arg1 )
		if not f4_arg0.isKitLocked then
			f5_arg0:dispatchEventToRoot( {
				name = "kit_button_pressed",
				button = f5_arg0,
				kitInfo = f4_arg0._kitInfo
			} )
		end
	end )
end

local f0_local1 = function ( f3_arg0, f3_arg1 )
	local f3_local0 = {}
	for f3_local4, f3_local5 in ipairs( f3_arg0._kitsInfo ) do
		local f3_local6 = MenuBuilder.BuildRegisteredType( "CPKitSelectButton", f3_arg0._options )
		f0_local0( f3_local6, f3_arg0._controllerIndex, f3_local5, f3_arg1 )
		f3_arg0.Buttons:addElement( f3_local6 )
		table.insert( f3_local0, f3_local6.Button )
	end
	if 0 < #f3_local0 then
		MenuUtils.SetupActiveStateOnNonListButtons( f3_arg0, f3_arg0._controllerIndex, {
			buttonList = f3_local0,
			defaultFocusButton = f3_local0[1]
		} )
	end
end

local f0_local2 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.SetupKitSelectButtons = f0_local0
	f2_arg0._controllerIndex = f2_arg1
	f2_arg0._options = f2_arg2
	local f2_local0 = {}
	for f2_local1 = 0, StringTable[0xFD4E49A34DD43AE]( CSV.cpKits.file ) - 1, 1 do
		table.insert( f2_local0, CSV.ReadRow( CSV.cpKits, f2_local1 ) )
	end
	f2_arg0._kitsInfo = f2_local0
	f2_arg0.Buttons:SetSpacing( 20 * _1080p )
end

function CPKitSelectRoles( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1040 * _1080p, 0, 250 * _1080p )
	self.id = "CPKitSelectRoles"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local Buttons = nil
	
	Buttons = LUI.UIHorizontalList.new( {
		controller = f1_local1,
		direction = LUI.DIRECTION.horizontal,
		horizontalAlignment = LUI.Alignment.Left
	} )
	Buttons.id = "Buttons"
	Buttons:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1040, 0, _1080p * 250 )
	self:addElement( Buttons )
	self.Buttons = Buttons
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "CPKitSelectRoles", CPKitSelectRoles )
LockTable( _M )
