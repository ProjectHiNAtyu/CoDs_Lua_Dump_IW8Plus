-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:02
LUI.AsyncPagedDataProvider = LUI.Class()
LUI.AsyncPagedDataProvider.PageState = {
	NOT_EXIST = 4,
	FETCHED = 2,
	NOT_YET_FETCHED = 0,
	REFRESHING = 3,
	FETCHING = 1
}
LUI.AsyncPagedDataProvider.ErrorReason = {
	FETCH_ADDITIONAL_RESOLVE = 4,
	INTERNAL = 5,
	FETCH_RESOLVE = 2,
	FETCH_REQUEST = 1,
	FETCH_ADDITIONAL_REQUEST = 3,
	NONE = 0
}
LUI.AsyncPagedDataProvider.DebugLevel = {
	IMPORTANT = 1,
	REGULAR = 2,
	DETAILED = 3,
	NONE = 0
}
LUI.AsyncPagedDataProvider.SetFetchRequest = function ( f55_arg0, f55_arg1 )
	
end

LUI.AsyncPagedDataProvider.AddFetchAdditionalDataRequest = function ( f54_arg0, f54_arg1, f54_arg2, f54_arg3 )
	
end

LUI.AsyncPagedDataProvider.SetErrorHandler = function ( f53_arg0, f53_arg1 )
	
end

LUI.AsyncPagedDataProvider.SetSpinner = function ( f52_arg0, f52_arg1 )
	
end

LUI.AsyncPagedDataProvider.SetConsecutiveFetchMode = function ( f51_arg0, f51_arg1 )
	
end

LUI.AsyncPagedDataProvider.SetMinimumWaitBetweenFetchCallsMs = function ( f50_arg0, f50_arg1 )
	
end

LUI.AsyncPagedDataProvider.ChangeOwner = function ( f49_arg0, f49_arg1 )
	
end

LUI.AsyncPagedDataProvider.DropCurrentFetchQueue = function ( f48_arg0 )
	
end

LUI.AsyncPagedDataProvider.FetchRange = function ( f47_arg0, f47_arg1, f47_arg2, f47_arg3, f47_arg4 )
	
end

LUI.AsyncPagedDataProvider.ResetData = function ( f46_arg0, f46_arg1, f46_arg2 )
	
end

LUI.AsyncPagedDataProvider.InsertLocalItem = function ( f45_arg0, f45_arg1 )
	
end

LUI.AsyncPagedDataProvider.Get = function ( f44_arg0, f44_arg1, f44_arg2, f44_arg3 )
	
end

LUI.AsyncPagedDataProvider.GetLastAvailableItemIndex = function ( f43_arg0 )
	
end

LUI.AsyncPagedDataProvider.IsNoFetchRequestInProgress = function ( f42_arg0 )
	
end

LUI.AsyncPagedDataProvider.SearchForAvailableItem = function ( f41_arg0, f41_arg1 )
	
end

LUI.AsyncPagedDataProvider.IsAllPagesFetched = function ( f40_arg0 )
	
end

local f0_local0, f0_local1, f0_local2 = nil
LUI.AsyncPagedDataProvider.DebugPrint = function ( f39_arg0, f39_arg1, f39_arg2 )
	if not f39_arg2 then
		f39_arg2 = f39_arg0.DebugLevel.REGULAR
	end
	local f39_local0 = {
		nil,
		"!! ",
		"   ",
		"+  "
	}
	if f39_arg2 <= f39_arg0._debugLvl then
		
	else
		
	end
end

local f0_local3 = function ( f38_arg0, f38_arg1 )
	return math.floor( (f38_arg1 - 1) / f38_arg0._pageSize )
end

local f0_local4 = function ( f37_arg0, f37_arg1 )
	return (f37_arg1 - 1) % f37_arg0._pageSize + 1
end

local f0_local5 = function ( f36_arg0, f36_arg1 )
	return f36_arg0._pageSize * f36_arg1 + 1
end

local f0_local6 = function ( f35_arg0, f35_arg1 )
	return f35_arg0._pageSize * (f35_arg1 + 1)
end

local f0_local7 = function ( f34_arg0, f34_arg1 )
	local f34_local0 = f34_arg0._pages[f34_arg1]
	if f34_local0.state == f34_arg0.PageState.REFRESHING then
		f34_arg0:DebugPrint( "ResetPage to FETCHED: " .. f34_arg1 )
		f34_local0.state = f34_arg0.PageState.FETCHED
	elseif f34_local0.state == f34_arg0.PageState.FETCHING then
		f34_arg0:DebugPrint( "ResetPage to NOT_YET_FETCHED: " .. f34_arg1 )
		f34_local0.state = f34_arg0.PageState.NOT_YET_FETCHED
	end
end

local f0_local8 = function ( f33_arg0 )
	f33_arg0._itemsRequestedBeforeFirstResolve = nil
	f33_arg0:DropCurrentFetchQueue()
	for f33_local3, f33_local4 in pairs( f33_arg0._pages ) do
		f33_local4.dataReadyCallbacks = {}
		f0_local0( f33_arg0, f33_local3 )
	end
end

local f0_local9 = function ( f32_arg0, f32_arg1 )
	f32_arg0:DebugPrint( "OnFetchError: " .. f32_arg1, f32_arg0.DebugLevel.IMPORTANT )
	if not f32_arg0._hasShownFetchDevError then
		f32_arg0._hasShownFetchDevError = true
		LUI.FlowManager.RequestDevErrorPopup( "Group Data Fetch", "Error fetching group data. Reason: " .. f32_arg1 )
	end
	f0_local0( f32_arg0 )
	f32_arg0._fetchingPageId = nil
	f32_arg0._pageFetchQueue = LUI.CreateQueue()
	if f32_arg0._onFetchErrorFunc then
		f32_arg0._onFetchErrorFunc( f32_arg0._owner, f32_arg1 )
	elseif f32_arg0._onAllDataFetched then
		f32_arg0:DebugPrint( "  > OnError All Data Fetched callback call", f32_arg0.DebugLevel.IMPORTANT )
		local f32_local0 = f32_arg0._onAllDataFetched
		f32_arg0._onAllDataFetched = nil
		f32_local0( f32_arg0._owner )
	end
end

local f0_local10 = function ( f31_arg0, f31_arg1 )
	local f31_local0 = f31_arg0._pages[f31_arg1]
	local f31_local1 = f31_local0.dataReadyCallbacks
	if next( f31_local1 ) ~= nil then
		f31_arg0:DebugPrint( "CallItemsDataReadyCallbacksForPage: " .. f31_arg1 .. ", numItems: " .. f31_local0.numItems )
		f31_local0.dataReadyCallbacks = {}
		for f31_local5, f31_local6 in pairs( f31_local1 ) do
			f31_arg0:DebugPrint( "  > cb: " .. f31_local6[1], f31_arg0.DebugLevel.DETAILED )
			if f31_local0.state == f31_arg0.PageState.FETCHED then
				f31_local6[2]( f31_arg0._owner, f31_local0.items[f31_local6[1]] )
			else
				f31_local6[2]( f31_arg0._owner, nil )
			end
		end
	end
end

local f0_local11 = function ( f30_arg0, f30_arg1, f30_arg2, f30_arg3 )
	if f30_arg3 == nil then
		return 
	else
		local f30_local0 = #f30_arg1.dataReadyCallbacks
		f30_arg0:DebugPrint( "EnqueueDataReadyCallbackForItem: " .. f30_arg2 .. ", numCallbacks: " .. f30_local0 + 1, f30_arg0.DebugLevel.DETAILED )
		f30_arg1.dataReadyCallbacks[f30_local0 + 1] = {
			f30_arg2,
			f30_arg3
		}
	end
end

local f0_local12 = function ( f29_arg0, f29_arg1 )
	f29_arg0:DebugPrint( "AllocateNewPage: " .. f29_arg1, f29_arg0.DebugLevel.DETAILED )
	f29_arg0._pages[f29_arg1] = {
		numItems = 0,
		state = f29_arg0.PageState.NOT_YET_FETCHED,
		items = {},
		dataReadyCallbacks = {}
	}
end

local f0_local13 = function ( f28_arg0, f28_arg1 )
	local f28_local0 = f28_arg0._pages[f28_arg1]
	f28_arg0:DebugPrint( "EnqueuePage: " .. f28_arg1 .. ", state: " .. f28_local0.state )
	if f28_local0.state == f28_arg0.PageState.NOT_YET_FETCHED then
		f28_local0.state = f28_arg0.PageState.FETCHING
	elseif f28_local0.state == f28_arg0.PageState.FETCHED then
		f28_local0.state = f28_arg0.PageState.REFRESHING
	else
		
	end
	local f28_local1 = f28_arg0._pageFetchQueue:PushUnique( f28_arg1 )
	if f28_arg0._fetchingPageId == nil then
		f0_local0( f28_arg0 )
	end
end

local f0_local14 = function ( f27_arg0, f27_arg1 )
	local f27_local0 = 0
	for f27_local1 = f27_arg1 - 1, 0, -1 do
		if f27_arg0._pages[f27_local1] == nil then
			f0_local0( f27_arg0, f27_arg1 )
		end
		if f27_arg0._pages[f27_local1].state ~= f27_arg0.PageState.NOT_YET_FETCHED then
			f27_local0 = f27_local1 + 1
			break
		end
	end
	for f27_local1 = f27_local0, f27_arg1 - 1, 1 do
		f27_arg0:DebugPrint( "EnqueuePreviousPagesForConsequtiveMode: " .. f27_local1 )
		f0_local0( f27_arg0, f27_local1 )
	end
end

LUI.AsyncPagedDataProvider.OnFetchQueueEnded = function ( f26_arg0 )
	f26_arg0:DebugPrint( "OnFetchQueueEnded" )
	if f26_arg0._spinnerFunc and f26_arg0._isSpinning then
		f26_arg0:DebugPrint( "Spinner OFF" )
		f26_arg0._isSpinning = false
		f26_arg0._spinnerFunc( f26_arg0._owner, false )
	end
	if f26_arg0._onAllDataFetched then
		f26_arg0:DebugPrint( "  > All Data Fetched callback call", f26_arg0.DebugLevel.IMPORTANT )
		local f26_local0 = f26_arg0._onAllDataFetched
		f26_arg0._onAllDataFetched = nil
		f26_local0( f26_arg0._owner )
	end
end

LUI.AsyncPagedDataProvider.PostProcessFetchedPage = function ( f25_arg0 )
	f25_arg0:DebugPrint( "PostProcessFetchedPage, pageId: " .. f25_arg0._fetchingPageId )
	f25_arg0._pages[f25_arg0._fetchingPageId].state = f25_arg0.PageState.FETCHED
	if f25_arg0._itemsRequestedBeforeFirstResolve then
		for f25_local3, f25_local4 in pairs( f25_arg0._itemsRequestedBeforeFirstResolve ) do
			f25_arg0:DebugPrint( "  > processing delayed items, id: " .. f25_local4[1] )
			LUI.AsyncPagedDataProvider.Get( f25_arg0, f25_local4[1], f25_local4[2] )
		end
		f25_arg0._itemsRequestedBeforeFirstResolve = nil
	else
		f0_local0( f25_arg0, f25_arg0._fetchingPageId )
	end
	f25_arg0:DebugPrint( "  > PostProcessFetchedPage end, pageId: " .. f25_arg0._fetchingPageId )
	f25_arg0._fetchingPageId = nil
	f0_local0( f25_arg0 )
end

local f0_local15 = function ( f24_arg0, f24_arg1 )
	f24_arg0:DebugPrint( "OnFetchAdditionalDataResolve #" .. f24_arg0._currentAdditionalRequestIndex .. ", pageId: " .. tostring( f24_arg0._fetchingPageId ), f24_arg0.DebugLevel.IMPORTANT )
	f24_arg0._lastCallTimestampMs = Engine[0x6991337AE950F99]()
	if f24_arg0._ignoreNextResolveCallback then
		f24_arg0:DebugPrint( "  > skip because of _ignoreNextResolveCallback" )
		f24_arg0._ignoreNextResolveCallback = false
		f0_local0( f24_arg0 )
		return 
	elseif f24_arg0._fetchingPageId == nil then
		f0_local0( f24_arg0, LUI.AsyncPagedDataProvider.ErrorReason.INTERNAL )
		return 
	elseif f24_arg1 == nil or #f24_arg1 ~= #f24_arg0._additionalDataRequestIdList then
		f0_local0( f24_arg0, LUI.AsyncPagedDataProvider.ErrorReason.FETCH_ADDITIONAL_RESOLVE )
		return 
	end
	local f24_local0 = #f24_arg1
	local f24_local1 = f24_arg0._pages[f24_arg0._fetchingPageId]
	for f24_local2 = 1, f24_local0, 1 do
		for f24_local8, f24_local9 in pairs( f24_arg1[f24_local2] ) do
			f24_local1.items[f24_local2][f24_local8] = f24_local9
		end
	end
	if f24_arg0._currentAdditionalRequestIndex < #f24_arg0._additionalDataFetchRequestFuncs then
		f0_local0( f24_arg0 )
	else
		f24_arg0:PostProcessFetchedPage( f24_arg0._fetchingPageId )
	end
end

f0_local2 = function ( f23_arg0 )
	f23_arg0._currentAdditionalRequestIndex = f23_arg0._currentAdditionalRequestIndex + 1
	local f23_local0 = f23_arg0._pages[f23_arg0._fetchingPageId]
	f23_arg0._additionalDataRequestIdList = {}
	local f23_local1 = f23_arg0._itemIdFieldNames[f23_arg0._currentAdditionalRequestIndex]
	for f23_local2 = 1, f23_local0.numItems, 1 do
		f23_arg0._additionalDataRequestIdList[f23_local2] = f23_local0.items[f23_local2][f23_local1]
	end
	f23_arg0:DebugPrint( "MakeAdditionalDataRequest #" .. f23_arg0._currentAdditionalRequestIndex .. ", fieldName: " .. f23_local1 .. ", pageId: " .. tostring( f23_arg0._fetchingPageId ), f23_arg0.DebugLevel.IMPORTANT )
	if f23_arg0._additionalDataFetchRequestFuncs[f23_arg0._currentAdditionalRequestIndex]( f23_arg0._owner, f23_arg0._additionalDataRequestIdList, f0_local0 ) == false then
		f0_local0( f23_arg0, LUI.AsyncPagedDataProvider.ErrorReason.FETCH_ADDITIONAL_REQUEST )
		return 
	else
		
	end
end

local f0_local16 = function ( f22_arg0, f22_arg1, f22_arg2 )
	local f22_local0 = f22_arg0
	local f22_local1 = f22_arg0.DebugPrint
	local f22_local2 = "OnFetchResolve, pageId: "
	local f22_local3 = tostring( f22_arg0._fetchingPageId )
	local f22_local4 = ", numItems: "
	local f22_local5
	if f22_arg1 == nil then
		f22_local5 = "nil"
	else
		f22_local5 = #f22_arg1
	end
	f22_local1( f22_local0, f22_local2 .. f22_local3 .. f22_local4 .. f22_local5, f22_arg0.DebugLevel.IMPORTANT )
	f22_arg0._lastCallTimestampMs = Engine[0x6991337AE950F99]()
	if f22_arg0._ignoreNextResolveCallback then
		f22_arg0:DebugPrint( "  > skip because of _ignoreNextResolveCallback" )
		f22_arg0._ignoreNextResolveCallback = false
		f0_local0( f22_arg0 )
		return 
	elseif f22_arg0._fetchingPageId == nil then
		f0_local0( f22_arg0, LUI.AsyncPagedDataProvider.ErrorReason.INTERNAL )
		return 
	elseif f22_arg1 == nil then
		f0_local0( f22_arg0, LUI.AsyncPagedDataProvider.ErrorReason.FETCH_RESOLVE )
		return 
	end
	f22_local1 = #f22_arg1
	if f22_arg0._pageSize == nil then
		f22_arg0._pageSize = f22_local1
		f22_arg0:DebugPrint( "  > set pageSize: " .. f22_arg0._pageSize, f22_arg0.DebugLevel.IMPORTANT )
	end
	local f22_local6 = f22_arg0._backendAllPagesFetched
	if f22_local1 == 0 then
		if f22_arg0._fetchingPageId == 0 then
			f22_arg2 = true
		elseif f22_arg0._pages[f22_arg0._fetchingPageId - 1].state == f22_arg0.PageState.FETCHED then
			f22_arg0._backendAllPagesFetched = true
			f22_arg0._lastAvailablePageId = f22_arg0._fetchingPageId - 1
		end
	end
	if not (f22_local1 == f22_arg0._pageSize or 0 >= f22_local1) or f22_arg2 then
		f22_arg0._backendAllPagesFetched = true
		f22_arg0._lastAvailablePageId = f22_arg0._fetchingPageId
		f22_arg0:DebugPrint( "  > backendAllPagesFetched! lastAvailablePageId: " .. f22_arg0._lastAvailablePageId, f22_arg0.DebugLevel.IMPORTANT )
		if f22_arg0._pageSize < f22_local1 then
			f22_arg0:DebugPrint( "  > updated pageSize: " .. f22_arg0._pageSize .. " -> " .. f22_local1, f22_arg0.DebugLevel.IMPORTANT )
			f22_arg0._pageSize = f22_local1
		end
	end
	if f22_local6 ~= f22_arg0._backendAllPagesFetched then
		for f22_local4, f22_local5 in pairs( f22_arg0._pages ) do
			if f22_arg0._lastAvailablePageId < f22_local4 then
				f22_arg0:DebugPrint( "  > page marked as NOT_EXIST, id: " .. f22_local4 )
				f22_local5.state = f22_arg0.PageState.NOT_EXIST
				f0_local0( f22_arg0, f22_local4 )
			end
		end
		if not f22_arg0._pageFetchQueue:IsEmpty() then
			f22_local0 = LUI.CreateQueue()
			if not f22_arg0._pageFetchQueue:IsEmpty() then
				
			else
				
			end
			f22_arg0._pageFetchQueue = f22_local0
		end
	end
	if 0 < f22_local1 and (f22_arg0._lastAvailablePageId == nil or f22_arg0._lastAvailablePageId < f22_arg0._fetchingPageId) then
		f22_arg0:DebugPrint( "  > updated lastAvailablePageId " .. tostring( f22_arg0._lastAvailablePageId ) .. " -> " .. f22_arg0._fetchingPageId )
		f22_arg0._lastAvailablePageId = f22_arg0._fetchingPageId
	end
	f22_local0 = f22_arg0._pages[f22_arg0._fetchingPageId]
	for f22_local2 = 1, f22_local1, 1 do
		f22_local0.items[f22_local2] = f22_arg1[f22_local2]
	end
	f22_local0.numItems = f22_local1
	if f22_arg0._additionalDataFetchRequestFuncs ~= nil and 0 < f22_local1 then
		f22_arg0._currentAdditionalRequestIndex = 0
		f0_local0( f22_arg0 )
	else
		f22_arg0:PostProcessFetchedPage( f22_arg0._fetchingPageId )
	end
end

f0_local0 = function ( f19_arg0, f19_arg1 )
	f19_arg0:DebugPrint( "DoPageFetch: " .. f19_arg1 )
	f19_arg0._fetchingPageId = f19_arg1
	if f19_arg0._spinnerFunc and f19_arg0._isSpinning == false and f19_arg0._pages[f19_arg1].state == f19_arg0.PageState.FETCHING then
		f19_arg0:DebugPrint( "  > Spinner ON" )
		f19_arg0._isSpinning = true
		f19_arg0._spinnerFunc( f19_arg0._owner, true )
	end
	local f19_local0 = 0
	if f19_arg0._minimumWaitBetweenFetchCallsMs then
		f19_local0 = f19_arg0._minimumWaitBetweenFetchCallsMs - Engine[0x6991337AE950F99]() - f19_arg0._lastCallTimestampMs
	end
	local f19_local1 = function ()
		f19_arg0:DebugPrint( "Exec Page Fetch Now: " .. f19_arg0, f19_arg0.DebugLevel.IMPORTANT )
		f19_arg0._lastCallTimestampMs = Engine[0x6991337AE950F99]() + (f19_arg0._minimumWaitBetweenFetchCallsMs or 0)
		if f19_arg0._fetchRequestFunc( f19_arg0._owner, f19_arg0, f19_arg0 ) == false then
			f19_arg0( f19_arg0, LUI.AsyncPagedDataProvider.ErrorReason.FETCH_REQUEST )
		end
	end
	
	if 0 < f19_local0 then
		f19_arg0:DebugPrint( "  > Wait: " .. f19_local0 )
		local f19_local2 = f19_arg0._timerId
		local f19_local3 = Engine[0xEE6F69FEA944B13]()
		f19_local3:CreateEventTimer( f19_local2, f19_local0, {
			immediate = false,
			callbackFunc = function ( f20_arg0, f20_arg1 )
				f20_arg0:RemoveEventTimer( f19_arg0 )
				f19_arg0()
			end
		} )
	end
	f19_local1()
end

f0_local1 = function ( f18_arg0 )
	f18_arg0:DebugPrint( "ProcessFetchQueue, nextPage: " .. tostring( f18_arg0._pageFetchQueue[f18_arg0._pageFetchQueue.first] ), f18_arg0.DebugLevel.DETAILED )
	if f18_arg0._fetchingPageId ~= nil then
		f18_arg0:DebugPrint( "  > fetchingPageId not empty: " .. f18_arg0._fetchingPageId, f18_arg0.DebugLevel.DETAILED )
		return 
	end
	local f18_local0 = f18_arg0._pageFetchQueue:Pop()
	if f18_local0 then
		f0_local0( f18_arg0, f18_local0 )
	else
		f18_arg0:OnFetchQueueEnded()
	end
end

LUI.AsyncPagedDataProvider.Get = function ( f17_arg0, f17_arg1, f17_arg2, f17_arg3 )
	if f17_arg0._pageSize == nil then
		f17_arg0:DebugPrint( "Get: " .. f17_arg1 .. " during INITIAL page fetch", f17_arg0.DebugLevel.DETAILED )
		if f17_arg0._itemsRequestedBeforeFirstResolve == nil then
			f17_arg0._itemsRequestedBeforeFirstResolve = {}
		end
		f17_arg0._itemsRequestedBeforeFirstResolve[#f17_arg0._itemsRequestedBeforeFirstResolve + 1] = {
			f17_arg1,
			f17_arg2
		}
		if f17_arg0._fetchingPageId == nil then
			if f17_arg0._pages[0] == nil then
				f0_local0( f17_arg0, 0 )
			end
			f0_local0( f17_arg0, 0 )
		end
		if f17_arg0._pages[0] and f17_arg0._pages[0].state == f17_arg0.PageState.FETCHED then
			return f17_arg0._pages[0].items[f17_arg1]
		else
			return nil
		end
	else
		local f17_local0
		if 0 < f17_arg0._pageSize then
			f17_local0 = f0_local0( f17_arg0, f17_arg1 )
			if not f17_local0 then
			
			else
				local f17_local1 = 0
				if f17_arg0._lastAvailablePageId then
					f17_local1 = f17_arg0._lastAvailablePageId * f17_arg0._pageSize + f17_arg0._pages[f17_arg0._lastAvailablePageId].numItems
				end
				if f17_arg0._backendAllPagesFetched and f17_local1 < f17_arg1 then
					local f17_local2 = f17_arg0._localAppendixItems[f17_arg1 - f17_local1]
					f17_arg0:DebugPrint( "Get: " .. f17_arg1 .. " storage has only " .. f17_local1 .. " items, appendix has " .. #f17_arg0._localAppendixItems .. " items. Rerurn: " .. tostring( f17_local2 ), f17_arg0.DebugLevel.DETAILED )
					if f17_arg2 then
						f17_arg2( f17_arg0._owner, f17_local2 )
					end
					return f17_local2
				end
				local f17_local2 = f17_arg0._pages[f17_local0]
				local f17_local3 = f0_local0( f17_arg0, f17_arg1 )
				if f17_arg0._pages[f17_local0] == nil then
					f17_arg0:DebugPrint( "Get: " .. f17_arg1 .. "   pageId: " .. f17_local0 .. " ( NEW ), pageSize: " .. tostring( f17_arg0._pageSize ), f17_arg0.DebugLevel.DETAILED )
					f0_local0( f17_arg0, f17_local0 )
					f17_local2 = f17_arg0._pages[f17_local0]
				else
					f17_arg0:DebugPrint( "Get: " .. f17_arg1 .. "   pageId: " .. f17_local0 .. ", pageState: " .. f17_local2.state .. ", numItems: " .. f17_local2.numItems, f17_arg0.DebugLevel.DETAILED )
				end
				if f17_local2.state == f17_arg0.PageState.NOT_YET_FETCHED then
					if f17_arg0._isConsecutiveFetchMode and 0 < f17_local0 then
						f0_local0( f17_arg0, f17_local0 )
					end
					f0_local0( f17_arg0, f17_local2, f17_local3, f17_arg2 )
					f0_local0( f17_arg0, f17_local0 )
					return nil
				elseif f17_local2.state == f17_arg0.PageState.FETCHING then
					f0_local0( f17_arg0, f17_local2, f17_local3, f17_arg2 )
					return nil
				else
					local f17_local4 = f0_local0( f17_arg0, f17_arg1 )
					if f17_local2.numItems < f17_local4 or f17_local2.state == f17_arg0.PageState.NOT_EXIST then
						if f17_arg2 then
							f17_arg2( f17_arg0._owner, nil )
						end
						return nil
					else
						local f17_local5 = f17_local2.items[f17_local4]
						if f17_local2.state == f17_arg0.PageState.FETCHED then
							if f17_arg3 then
								f17_arg0:DebugPrint( "  > Force Refresh for: " .. f17_arg1 )
								f0_local0( f17_arg0, f17_local2, f17_local3, f17_arg2 )
								f0_local0( f17_arg0, f17_local0 )
							elseif f17_arg2 then
								f17_arg2( f17_arg0._owner, f17_local5 )
							end
							return f17_local5
						elseif f17_local2.state == f17_arg0.PageState.REFRESHING then
							f0_local0( f17_arg0, f17_local2, f17_local3, f17_arg2 )
							return f17_local5
						else
							
						end
					end
				end
			end
		end
	end
	f17_local0 = -1
end

LUI.AsyncPagedDataProvider.FetchRange = function ( f16_arg0, f16_arg1, f16_arg2, f16_arg3, f16_arg4 )
	f16_arg0:DebugPrint( "FetchRange: " .. f16_arg1 .. " - " .. f16_arg2 .. ", forceRefetch: " .. tostring( f16_arg4 ), f16_arg0.DebugLevel.IMPORTANT )
	for f16_local0 = f16_arg1, f16_arg2, 1 do
		f16_arg0:Get( f16_local0, nil, f16_arg4 )
	end
	if f16_arg3 then
		if f16_arg0:IsNoFetchRequestInProgress() then
			f16_arg3( f16_arg0._owner )
		else
			f16_arg0._onAllDataFetched = f16_arg3
		end
	end
end

LUI.AsyncPagedDataProvider.SearchForAvailableItem = function ( f15_arg0, f15_arg1 )
	for f15_local6, f15_local7 in pairs( f15_arg0._pages ) do
		for f15_local3, f15_local4 in pairs( f15_local7.items ) do
			if f15_arg1( f15_local4 ) then
				return f15_local4
			end
		end
	end
	for f15_local6, f15_local7 in pairs( f15_arg0._localAppendixItems ) do
		if f15_arg1( f15_local7 ) then
			return f15_local7
		end
	end
	return nil
end

LUI.AsyncPagedDataProvider.InsertLocalItem = function ( f14_arg0, f14_arg1 )
	f14_arg0._localAppendixItems[#f14_arg0._localAppendixItems + 1] = f14_arg1
end

LUI.AsyncPagedDataProvider.SetMinimumWaitBetweenFetchCallsMs = function ( f13_arg0, f13_arg1 )
	f13_arg0._minimumWaitBetweenFetchCallsMs = f13_arg1 + 100
	f13_arg0._lastCallTimestampMs = 0
end

LUI.AsyncPagedDataProvider.SetFetchRequest = function ( f12_arg0, f12_arg1 )
	f12_arg0._fetchRequestFunc = f12_arg1
	f12_arg0:ResetData()
end

LUI.AsyncPagedDataProvider.AddFetchAdditionalDataRequest = function ( f11_arg0, f11_arg1, f11_arg2, f11_arg3 )
	if f11_arg0._itemIdFieldNames == nil then
		f11_arg0._itemIdFieldNames = {}
		f11_arg0._additionalDataIdFieldNames = {}
		f11_arg0._additionalDataFetchRequestFuncs = {}
	end
	local f11_local0 = #f11_arg0._itemIdFieldNames + 1
	f11_arg0._itemIdFieldNames[f11_local0] = f11_arg1
	f11_arg0._additionalDataIdFieldNames[f11_local0] = f11_arg2
	f11_arg0._additionalDataFetchRequestFuncs[f11_local0] = f11_arg3
end

LUI.AsyncPagedDataProvider.IsNoFetchRequestInProgress = function ( f10_arg0 )
	return f10_arg0._fetchingPageId == nil
end

LUI.AsyncPagedDataProvider.SetConsecutiveFetchMode = function ( f9_arg0, f9_arg1 )
	f9_arg0._isConsecutiveFetchMode = f9_arg1
end

LUI.AsyncPagedDataProvider.SetSpinner = function ( f8_arg0, f8_arg1 )
	f8_arg0._spinnerFunc = f8_arg1
end

LUI.AsyncPagedDataProvider.SetErrorHandler = function ( f7_arg0, f7_arg1 )
	f7_arg0._onFetchErrorFunc = f7_arg1
end

LUI.AsyncPagedDataProvider.GetLastAvailableItemIndex = function ( f6_arg0 )
	if f6_arg0._lastAvailablePageId == nil then
		return 0
	else
		local f6_local0 = f6_arg0._lastAvailablePageId * f6_arg0._pageSize + f6_arg0._pages[f6_arg0._lastAvailablePageId].numItems
		if f6_arg0._backendAllPagesFetched then
			return f6_local0 + #f6_arg0._localAppendixItems, true
		else
			return f6_local0, false
		end
	end
end

LUI.AsyncPagedDataProvider.DropCurrentFetchQueue = function ( f5_arg0 )
	f5_arg0:DebugPrint( "DropCurrentFetchQueue, empty: " .. tostring( f5_arg0._pageFetchQueue:IsEmpty() ) )
	if not f5_arg0._pageFetchQueue:IsEmpty() then
		
	else
		
	end
end

LUI.AsyncPagedDataProvider.ChangeOwner = function ( f4_arg0, f4_arg1 )
	f4_arg0:DebugPrint( "ChangeOwner " .. tostring( f4_arg0._owner ) .. " -> " .. tostring( f4_arg1 ), f4_arg0.DebugLevel.IMPORTANT )
	if f4_arg0._owner == f4_arg1 then
		return 
	elseif f4_arg0._owner then
		f4_arg0._fetchingPageId = nil
		f4_arg0._ignoreNextResolveCallback = false
		f4_arg0._isSpinning = false
		f4_arg0._onAllDataFetched = nil
		f0_local0( f4_arg0 )
		local f4_local0 = Engine[0xEE6F69FEA944B13]()
		f4_local0:RemoveEventTimer( f4_arg0._timerId )
	end
	f4_arg0._owner = f4_arg1
end

LUI.AsyncPagedDataProvider.ResetData = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0:DebugPrint( "RESET DATA !!", f3_arg0.DebugLevel.IMPORTANT )
	if f3_arg0._fetchingPageId ~= nil then
		local f3_local0 = Engine[0xEE6F69FEA944B13]()
		f3_local0 = f3_local0:RemoveEventTimer( f3_arg0._timerId )
		f3_arg0:DebugPrint( "  > RemoveEventTimer " .. f3_arg0._timerId .. " -> " .. tostring( f3_local0 ) )
		if not f3_local0 then
			f3_arg0:DebugPrint( "  > IgnoreNextResolveCallback set" )
			f3_arg0._ignoreNextResolveCallback = true
		end
	end
	f3_arg0._pages = {}
	f3_arg0._localAppendixItems = {}
	f3_arg0._pageSize = nil
	f3_arg0._itemsRequestedBeforeFirstResolve = nil
	f3_arg0._lastAvailablePageId = nil
	f3_arg0._backendAllPagesFetched = nil
	f3_arg0._pageFetchQueue = LUI.CreateQueue()
	f3_arg0._fetchingPageId = nil
	f3_arg0._isSpinning = false
	if f3_arg1 then
		f3_arg0:FetchRange( 1, f3_arg1, f3_arg2 )
	end
end

LUI.AsyncPagedDataProvider.IsAllPagesFetched = function ( f2_arg0 )
	return f2_arg0._backendAllPagesFetched
end

LUI.AsyncPagedDataProvider.init = function ( f1_arg0, f1_arg1, f1_arg2 )
	f1_arg0._id = f1_arg2
	f1_arg0._owner = f1_arg1
	f1_arg0._timerId = f1_arg0._id .. "_fetch_wait"
	f1_arg0._debugLvl = f1_arg0.DebugLevel.IMPORTANT
end

