-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
module( ..., package.seeall )
require( "ui.generated.widgets.frontend.itemdetails" )
local f0_local0 = function ( f6_arg0, f6_arg1 )
	local f6_local0 = ""
	for f6_local1 = 1, #f6_arg0, 1 do
		local f6_local4 = f6_arg0[f6_local1]
		if GameType.HideInUI( f6_local4 ) ~= true then
			if f6_local0 ~= "" then
				f6_local0 = f6_local0 .. ", "
			end
			f6_local0 = f6_local0 .. GameType.GetDisplayName( f6_local4 )
		end
	end
	return Engine[0xED84C33EC5F01EA]( 0xB9A2CAE2F852540, f6_arg1 )
end

local f0_local1 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0.ItemDetails:SetupForMaps()
	f3_arg0:SubscribeToModelThroughElement( f3_arg0, "ref", function ()
		local f5_local0 = f3_arg0:GetDataSource()
		f5_local0 = f5_local0.ref:GetValue( f3_arg0 )
		local f5_local1 = f3_arg0:GetDataSource()
		f5_local1 = f5_local1.name:GetValue( f3_arg0 )
		local f5_local2 = f3_arg0:GetDataSource()
		f5_local2 = f5_local2.disabled:GetValue( f3_arg0 )
		local f5_local3 = nil
		if f5_local2 then
			local f5_local4 = f3_arg0:GetDataSource()
			f5_local3 = f3_arg0( split( f5_local4.gameTypes:GetValue( f3_arg0 ), " " ), f5_local1 )
		else
			f5_local3 = Engine[0xED84C33EC5F01EA]( 0x4668C3C89D50286 )
		end
		if f5_local1 == nil then
			f5_local1 = ""
		end
		f3_arg0.ItemDetails:UpdateDetails( {
			localizedName = f5_local1,
			localizedDesc = f5_local3
		} )
	end )
	f3_arg0:addEventHandler( "update_map_details", function ( f4_arg0, f4_arg1 )
		if f3_arg0:GetDataSource() then
			local f4_local0 = f3_arg0:GetDataSource()
			if f4_local0.ref then
				f4_local0 = f3_arg0:GetDataSource()
				if f4_local0.ref:GetValue( f3_arg0 ) then
					f4_arg1.details.isEquipped = MapInfo.ActiveGetMapName( f3_arg0 ) == f4_arg1.details.ref
					if f4_arg1.details.image and 0 < #f4_arg1.details.image then
						f3_arg0.MapImage:setImage( RegisterMaterial( f4_arg1.details.image ) )
					else
						f3_arg0.MapImage:SetAlpha( 0 )
					end
					f3_arg0.ItemDetails:UpdateDetails( f4_arg1.details )
				end
			end
		end
	end )
end

function MapDetails( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "MapDetails"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local MapImage = nil
	
	MapImage = LUI.UIImage.new()
	MapImage.id = "MapImage"
	ACTIONS.AspectRatioScaleAdjustment( self, MapImage, LAYOUT.AspectRatioImageScalePct.FADEFRAME_MEDIUM )
	MapImage:SubscribeToModelThroughElement( self, "image", function ()
		local f2_local0 = menu:GetDataSource()
		f2_local0 = f2_local0.image:GetValue( menu )
		if f2_local0 ~= nil then
			menu:setImage( RegisterMaterial( f2_local0 ), 0 )
		end
	end )
	self:addElement( MapImage )
	self.MapImage = MapImage
	
	local Gradient = nil
	
	Gradient = LUI.UIImage.new()
	Gradient.id = "Gradient"
	ACTIONS.ScaleFullscreen( Gradient )
	Gradient:SetRGBFromInt( 0, 0 )
	Gradient:SetAlpha( 0.75, 0 )
	Gradient:setImage( RegisterMaterial( 0x5576BB3DF9CFC11 ), 0 )
	Gradient:SetAnchorsAndPosition( 0, 1, 0, 0, 0, _1080p * 1386, _1080p * 1, 0 )
	self:addElement( Gradient )
	self.Gradient = Gradient
	
	local Vignette = nil
	
	Vignette = LUI.UIImage.new()
	Vignette.id = "Vignette"
	ACTIONS.ScaleFullscreen( Vignette )
	Vignette:setImage( RegisterMaterial( 0x7AE498E2479C0BC ), 0 )
	self:addElement( Vignette )
	self.Vignette = Vignette
	
	local ItemDetails = nil
	
	ItemDetails = MenuBuilder.BuildRegisteredType( "ItemDetails", {
		controllerIndex = f1_local1
	} )
	ItemDetails.id = "ItemDetails"
	ItemDetails:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 88, _1080p * 776, _1080p * 282, _1080p * 510 )
	self:addElement( ItemDetails )
	self.ItemDetails = ItemDetails
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "MapDetails", MapDetails )
LockTable( _M )
