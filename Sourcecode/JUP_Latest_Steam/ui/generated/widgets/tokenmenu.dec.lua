-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
module( ..., package.seeall )
require( "ui.generated.widgets.frontend.menutitletext" )
require( "ui.generated.widgets.xpflyoutstripe" )
require( "ui.generated.widgets.frontend.mp.tokenbutton" )
require( "ui.generated.widgets.xptokenflyoutnotification" )
require( "ui.generated.widgets.doublexpeventbanner" )
require( "ui.generated.widgets.frontend.iconlabelwithbg" )
require( "ui.generated.widgets.bundleupsellbutton" )
require( "ui.generated.widgets.frontend.partyxpbonusmatrix" )
require( "ui.generated.widgets.frontend.menubuttonprompt" )
require( "ui.generated.widgets.frontend.xpbonuslist" )
local f0_local0 = 612
local f0_local1 = 15
local f0_local2 = function ( f37_arg0, f37_arg1 )
	local f37_local0 = Lobby.GetLocalPlayerSubPartySize()
	local f37_local1 = LOOT.GetGlobalOrTokenXPActiveForType( LOOT.doubleXpTypes.XP, f37_arg0, f37_arg1 )
	if not f37_local1 then
		f37_local1 = LOOT.IsPartyUpBonusActiveForPlayerCount( f37_local0, LOOT.doubleXpTypes.XP )
	end
	return f37_local1
end

local f0_local3 = function ( f36_arg0, f36_arg1 )
	local f36_local0 = Lobby.GetLocalPlayerSubPartySize()
	local f36_local1 = LOOT.GetGlobalOrTokenXPActiveForType( LOOT.doubleXpTypes.WEAPON, f36_arg0, f36_arg1 )
	if not f36_local1 then
		f36_local1 = LOOT.IsPartyUpBonusActiveForPlayerCount( f36_local0, LOOT.doubleXpTypes.WEAPON )
	end
	return f36_local1
end

local f0_local4 = function ( f35_arg0, f35_arg1 )
	local f35_local0 = Lobby.GetLocalPlayerSubPartySize()
	local f35_local1 = LOOT.GetGlobalOrTokenXPActiveForType( LOOT.doubleXpTypes.BATTLE_PASS, f35_arg0, f35_arg1 )
	if not f35_local1 then
		f35_local1 = LOOT.IsPartyUpBonusActiveForPlayerCount( f35_local0, LOOT.doubleXpTypes.BATTLE_PASS )
	end
	return f35_local1
end

local f0_local5 = function ( f34_arg0, f34_arg1, f34_arg2, f34_arg3 )
	local f34_local0 = {
		[LOOT.doubleXpTypes.XP] = f0_local0( f34_arg2, f34_arg3 ),
		[LOOT.doubleXpTypes.WEAPON] = f0_local0( f34_arg2, f34_arg3 ),
		[LOOT.doubleXpTypes.BATTLE_PASS] = f0_local0( f34_arg2, f34_arg3 )
	}
	f34_arg0._backgroundGridArray[f34_arg1]:SetVisible( f34_local0[f34_arg1] )
end

local f0_local6 = function ( f32_arg0, f32_arg1, f32_arg2, f32_arg3 )
	f32_arg2.NumberCount:setText( Engine[0xED84C33EC5F01EA]( 0xE8DAE370E2F324, f32_arg3.tokenAmount ) )
	f32_arg2.TokenImage:setImage( RegisterMaterial( f32_arg3.image ) )
	f32_arg2.TokenDuration:setText( f32_arg3.duration )
	local f32_local0 = PlaylistUtils.GetPublicPlaylistDatasources()
	local f32_local1 = f32_arg0._tokenProcessing
	if not f32_local1 then
		f32_local1 = XPTOKENS.GetTokenUseLocked( f32_arg1 )
		if not f32_local1 then
			f32_local1 = XPTOKENS.GetTokenUseLocked( f32_arg1, f32_arg3.type )
		end
	end
	local f32_local2 = LOOT.IsDoubleXPActive( f32_local0 )
	local f32_local3 = LOOT.IsDoubleWeaponXPActive( f32_local0 )
	local f32_local4 = LOOT.IsDoubleBattlePassXPActive( f32_local0 )
	if f32_local4 then
		f32_local4 = CONDITIONS.IsBattlePassEnabled()
	end
	if not f32_local2 then
		local f32_local5 = f32_local2
	elseif not f32_local3 then
		local f32_local5 = f32_local3
	else
		local f32_local5 = f32_local4
	end
	local f32_local6
	if not f32_local1 then
		f32_local6 = f32_local1
	elseif f32_arg3.tokenAmount ~= 0 then
		if f32_arg3.type == LOOT.doubleXpTypes.XP and not f32_local2 then
			f32_local6 = f32_local2
		elseif f32_arg3.type == LOOT.doubleXpTypes.WEAPON and not f32_local3 then
			f32_local6 = f32_local3
		elseif f32_arg3.type == LOOT.doubleXpTypes.BATTLE_PASS then
			f32_local6 = f32_local4
		else
			f32_local6 = false
		end
	else
		f32_local6 = true
	end
	f32_arg2:SetButtonDisabled( f32_local6 )
	if f32_arg3.type == LOOT.doubleXpTypes.BATTLE_PASS and SEASON.IsCurrentSeasonSunset() then
		f32_arg2:FullDisable()
	end
	f32_arg2:setActionSFX( SOUND_SETS.popups.tokenButtonAction )
	f32_arg2:registerEventHandler( "button_action", function ( element, event )
		if f32_arg0._tokenProcessing ~= true and OnlineChallenges[0x6AE20EF4832FEF]( f32_arg0, f32_arg0.achievementID, Challenge.GetAEKindID( 0xE06DA8578F922D9 ), Challenge.GetAEEventID( f32_arg0.eventName ) ) then
			f32_arg0._tokenProcessing = true
			f32_arg0._backgroundGridArray[f32_arg0.type]:SetVisible( true )
			f32_arg0( f32_arg0, f32_arg0.type, f32_arg0, PlaylistUtils.GetPublicPlaylistDatasources() )
			XPTOKENS.SetTokenUseLocked( f32_arg0, true )
			f32_arg0:RefreshGrid()
			ACTIONS.AnimateSequence( f32_arg0, "ShowActivating" )
		end
	end )
	f0_local0( f32_arg0, f32_arg3.type, f32_arg1, f32_local0 )
end

local f0_local7 = function ( f31_arg0, f31_arg1 )
	local f31_local0 = LOOT.IsDoubleXPActive()
	local f31_local1 = LOOT.IsDoubleWeaponXPActive()
	local f31_local2 = LOOT.IsDoubleBattlePassXPActive()
	if f31_local2 then
		f31_local2 = CONDITIONS.IsBattlePassEnabled()
	end
	local f31_local3
	if not f31_local0 then
		f31_local3 = f31_local0
	elseif not f31_local1 then
		f31_local3 = f31_local1
	else
		f31_local3 = f31_local2
	end
	local f31_local4 = PROGRESSION.GetGlobalDoubleXPEventsEndTime()
	local f31_local5 = CoD.GetUTC()
	if not f31_local5 then
		f31_local5 = tonumber( Engine[0x3B8CFB6758EF57C]() )
	end
	local f31_local6 = ""
	if f31_local4 then
		if f31_local4[PROGRESSION.DoubleXPType.PLAYER] ~= nil and 0 < f31_local4[PROGRESSION.DoubleXPType.PLAYER] - f31_local5 then
			f31_local6 = Engine[0x9F0E9247C145452]( f31_local4[PROGRESSION.DoubleXPType.PLAYER] - f31_local5 )
		elseif f31_local4[PROGRESSION.DoubleXPType.WEAPON] ~= nil and 0 < f31_local4[PROGRESSION.DoubleXPType.WEAPON] - f31_local5 then
			f31_local6 = Engine[0x9F0E9247C145452]( f31_local4[PROGRESSION.DoubleXPType.WEAPON] - f31_local5 )
		elseif f31_local4[PROGRESSION.DoubleXPType.BATTLEPASS] ~= nil and 0 < f31_local4[PROGRESSION.DoubleXPType.BATTLEPASS] - f31_local5 then
			f31_local6 = Engine[0x9F0E9247C145452]( f31_local4[PROGRESSION.DoubleXPType.BATTLEPASS] - f31_local5 )
		end
	end
	f31_arg0.DoubleXPBanner:SetVisible( f31_local3 )
	if not String.IsNilOrEmpty( f31_local6 ) then
		f31_arg0.DoubleXPBanner.Timer:setText( Engine[0xED84C33EC5F01EA]( 0xFB86C3221047361, Engine[0x7D3158A9539A355]( f31_local6 ) ), 0 )
	else
		f31_arg0.DoubleXPBanner.Timer:setText( Engine[0xED84C33EC5F01EA]( 0xDDFB8105F572EBC ), 0 )
	end
	if CONDITIONS.ShouldShowWinbackDoubleXP( f31_arg1 ) then
		f31_arg0.DoubleXPBanner.Timer:setText( Engine[0xED84C33EC5F01EA]( 0xB18F2006915324F ), 0 )
	end
	local f31_local7 = PlaylistUtils.GetPublicPlaylistDatasources()
	f0_local0( f31_arg0, PROGRESSION.DoubleXPType.PLAYER, f31_arg1, f31_local7 )
	f0_local0( f31_arg0, PROGRESSION.DoubleXPType.BATTLEPASS, f31_arg1, f31_local7 )
	f0_local0( f31_arg0, PROGRESSION.DoubleXPType.WEAPON, f31_arg1, f31_local7 )
end

local f0_local8 = function ( f30_arg0, f30_arg1 )
	for f30_local6, f30_local7 in ipairs( f30_arg0._tokenData ) do
		for f30_local3, f30_local4 in ipairs( f30_local7 ) do
			if f30_local4.globalTokenAmount ~= PROXY_LOOT.IsOwned( f30_arg1, f30_local4.tokenID ) then
				return true
			end
		end
	end
	return false
end

local f0_local9 = function ( f28_arg0, f28_arg1 )
	f28_arg0._tokenData = {}
	for f28_local12, f28_local13 in pairs( LOOT.doubleXpTypes ) do
		if not f28_arg0._tokenData[f28_local13] then
			f28_arg0._tokenData[f28_local13] = {}
		end
		local f28_local3 = XPTOKENS.GetLootIdTable( f28_local13 )
		local f28_local4 = XPTOKENS.GetTokenUseTitle( f28_local13 )
		for f28_local9, f28_local10 in pairs( f28_local3 ) do
			local f28_local11 = PROXY_LOOT.IsOwned( f28_arg1, f28_local10 )
			if f28_local10 ~= LOOT.DOUBLE_XP_TOKENS.XP_Year or 0 < f28_local11 then
				local f28_local8 = XPTOKENS.GetTokenData( f28_local10, f28_local11 )
				f28_local8.header = f28_local4
				f28_local8.type = f28_local13
				f28_local8.globalTokenAmount = f28_local11
				table.insert( f28_arg0._tokenData[f28_local13], f28_local8 )
			end
		end
		table.sort( f28_arg0._tokenData[f28_local13], function ( f29_arg0, f29_arg1 )
			if f29_arg0.rarity ~= f29_arg1.rarity then
				return f29_arg0.rarity < f29_arg1.rarity
			else
				
			end
		end )
	end
end

local f0_local10 = function ( f27_arg0 )
	local f27_local0 = 0 < PROXY_LOOT.IsOwned( f27_arg0._controllerIndex, LOOT.DOUBLE_XP_TOKENS.XP_Year )
	local f27_local1 = f27_arg0.TokenGrid
	local f27_local2 = f27_local1
	f27_local1 = f27_local1.SetNumChildren
	local f27_local3
	if f27_local0 then
		f27_local3 = 13
	else
		f27_local3 = 12
	end
	f27_local1( f27_local2, f27_local3 )
	f27_arg0.TokenGrid:RefreshContent()
end

local f0_local11 = function ( f25_arg0, f25_arg1 )
	if f25_arg0.BundleUpsellButton then
		f25_arg0.BundleUpsellButton:HideButton()
	end
	f25_arg0.SkinBonusDesc:SetVisible( false )
	f25_arg0.PartyUpMatrix:SetVisible( false )
	f25_arg0.PartySkinMatrix:SetVisible( false )
	if not Dvar[0x9E5BE3B4BBA4E0E]( 0x42122093916DF13 ) then
		f25_arg0.BonusContainer:SetVisible( false )
	end
	local f25_local0 = nil
	local f25_local1 = Lobby.GetLocalPlayerSubPartySize( f25_arg1 )
	if 1 < f25_local1 then
		local f25_local2 = PlaylistUtils.GetPublicPlaylistDatasources()
		local f25_local3 = LOOT.GetPartySkinBonusActiveCount( f25_arg1 )
		if f25_local3 >= LOOT.MinPlayersForSkinBonus - 1 then
			local f25_local4 = {
				isSkinBonus = true,
				count = math.min( LOOT.MaxPlayersForSkinBonus, f25_local3 + 1 ),
				maxCount = LOOT.MaxPlayersForSkinBonus,
				title = Engine[0xED84C33EC5F01EA]( 0x1C447FFB035892 ),
				body = Engine[0xED84C33EC5F01EA]( 0x532B7733B1D89A5 )
			}
			local f25_local5 = {}
			local f25_local6 = LOOT.doubleXpTypes.XP
			local f25_local7
			if f25_local3 >= LOOT.MinPlayersForPlayerXPSkinBonus then
				f25_local7 = not LOOT.GetGlobalOrTokenXPActiveForType( LOOT.doubleXpTypes.XP, f25_arg1, f25_local2 )
			else
				f25_local7 = false
			end
			f25_local5[f25_local6] = f25_local7
			f25_local6 = LOOT.doubleXpTypes.WEAPON
			if f25_local3 >= LOOT.MinPlayersForWeaponXPSkinBonus then
				f25_local7 = not LOOT.GetGlobalOrTokenXPActiveForType( LOOT.doubleXpTypes.WEAPON, f25_arg1, f25_local2 )
			else
				f25_local7 = false
			end
			f25_local5[f25_local6] = f25_local7
			f25_local6 = LOOT.doubleXpTypes.BATTLE_PASS
			if f25_local3 >= LOOT.MinPlayersForBattlepassXPSkinBonus then
				f25_local7 = not LOOT.GetGlobalOrTokenXPActiveForType( LOOT.doubleXpTypes.BATTLE_PASS, f25_arg1, f25_local2 )
			else
				f25_local7 = false
			end
			f25_local5[f25_local6] = f25_local7
			f25_local4.activeData = f25_local5
			f25_local5 = LOOT.MinPlayersForPlayerXPSkinBonus and LOOT.GetPartyUpBonusForType( f25_local3 + 1, LOOT.doubleXpTypes.XP, true ) or nil
			f25_local6 = LOOT.MinPlayersForWeaponXPSkinBonus and LOOT.GetPartyUpBonusForType( f25_local3 + 1, LOOT.doubleXpTypes.WEAPON, true ) or nil
			f25_local7 = LOOT.MinPlayersForBattlepassXPSkinBonus and LOOT.GetPartyUpBonusForType( f25_local3 + 1, LOOT.doubleXpTypes.BATTLE_PASS, true ) or nil
			local f25_local8 = {}
			local f25_local9 = LOOT.doubleXpTypes.XP
			local f25_local10
			if not LOOT.GetGlobalOrTokenXPActiveForType( LOOT.doubleXpTypes.XP, f25_arg1, f25_local2 ) and not f25_local5 then
				f25_local10 = f25_local5
			else
				f25_local10 = nil
			end
			f25_local8[f25_local9] = f25_local10
			f25_local9 = LOOT.doubleXpTypes.WEAPON
			if not LOOT.GetGlobalOrTokenXPActiveForType( LOOT.doubleXpTypes.WEAPON, f25_arg1, f25_local2 ) and not f25_local6 then
				f25_local10 = f25_local6
			else
				f25_local10 = nil
			end
			f25_local8[f25_local9] = f25_local10
			f25_local9 = LOOT.doubleXpTypes.BATTLE_PASS
			if not LOOT.GetGlobalOrTokenXPActiveForType( LOOT.doubleXpTypes.BATTLE_PASS, f25_arg1, f25_local2 ) and not f25_local7 then
				f25_local10 = f25_local7
			else
				f25_local10 = nil
			end
			f25_local8[f25_local9] = f25_local10
			f25_local0 = f25_local8
			if f25_local4.activeData[LOOT.doubleXpTypes.XP] or f25_local4.activeData[LOOT.doubleXpTypes.WEAPON] or f25_local4.activeData[LOOT.doubleXpTypes.BATTLE_PASS] then
				f25_arg0.PartySkinMatrix:SetVisible( true )
				f25_arg0.PartySkinMatrix:SetupBonuses( f25_local4 )
			end
		end
		local f25_local4 = {
			count = math.min( LOOT.MaxPartyUpPlayers, f25_local1 ),
			maxCount = LOOT.MaxPartyUpPlayers,
			title = Engine[0xED84C33EC5F01EA]( 0xCECA961CD3953FA ),
			body = Engine[0xED84C33EC5F01EA]( 0x976176CA32C5D9D )
		}
		local f25_local5 = {}
		local f25_local6 = LOOT.doubleXpTypes.XP
		local f25_local7 = LOOT.IsPartyUpBonusActiveForPlayerCount( f25_local1, LOOT.doubleXpTypes.XP )
		if f25_local7 then
			if f25_local3 < LOOT.MinPlayersForPlayerXPSkinBonus then
				f25_local7 = not LOOT.GetGlobalOrTokenXPActiveForType( LOOT.doubleXpTypes.XP, f25_arg1, f25_local2 )
			else
				f25_local7 = false
			end
		end
		f25_local5[f25_local6] = f25_local7
		f25_local6 = LOOT.doubleXpTypes.WEAPON
		f25_local7 = LOOT.IsPartyUpBonusActiveForPlayerCount( f25_local1, LOOT.doubleXpTypes.WEAPON )
		if f25_local7 then
			if f25_local3 < LOOT.MinPlayersForWeaponXPSkinBonus then
				f25_local7 = not LOOT.GetGlobalOrTokenXPActiveForType( LOOT.doubleXpTypes.WEAPON, f25_arg1, f25_local2 )
			else
				f25_local7 = false
			end
		end
		f25_local5[f25_local6] = f25_local7
		f25_local6 = LOOT.doubleXpTypes.BATTLE_PASS
		f25_local7 = LOOT.IsPartyUpBonusActiveForPlayerCount( f25_local1, LOOT.doubleXpTypes.BATTLE_PASS )
		if f25_local7 then
			if f25_local3 < LOOT.MinPlayersForBattlepassXPSkinBonus then
				f25_local7 = not LOOT.GetGlobalOrTokenXPActiveForType( LOOT.doubleXpTypes.BATTLE_PASS, f25_arg1, f25_local2 )
			else
				f25_local7 = false
			end
		end
		f25_local5[f25_local6] = f25_local7
		f25_local4.activeData = f25_local5
		if f25_local4.activeData[LOOT.doubleXpTypes.XP] or f25_local4.activeData[LOOT.doubleXpTypes.WEAPON] or f25_local4.activeData[LOOT.doubleXpTypes.BATTLE_PASS] then
			f25_arg0.PartyUpMatrix:SetVisible( true )
			f25_arg0.PartyUpMatrix:SetupBonuses( f25_local4 )
		end
		if not f25_local0 then
			f25_local0 = {}
		end
		if not f25_local0[LOOT.doubleXpTypes.XP] then
			local f25_local11 = f25_local4.activeData[LOOT.doubleXpTypes.XP]
			local f25_local12 = LOOT.GetPartyUpBonusForType( f25_local1, LOOT.doubleXpTypes.XP )
			local f25_local13 = nil
		end
		f25_local5 = f25_local11 and f25_local12 or f25_local13
		if not f25_local0[LOOT.doubleXpTypes.WEAPON] then
			local f25_local14 = f25_local4.activeData[LOOT.doubleXpTypes.WEAPON]
			local f25_local15 = LOOT.GetPartyUpBonusForType( f25_local1, LOOT.doubleXpTypes.WEAPON )
			local f25_local16 = nil
		end
		f25_local6 = f25_local14 and f25_local15 or f25_local16
		if not f25_local0[LOOT.doubleXpTypes.BATTLE_PASS] then
			local f25_local17 = f25_local4.activeData[LOOT.doubleXpTypes.BATTLE_PASS]
			local f25_local18 = LOOT.GetPartyUpBonusForType( f25_local1, LOOT.doubleXpTypes.BATTLE_PASS )
			local f25_local19 = nil
		end
		f25_local7 = f25_local17 and f25_local18 or f25_local19
		local f25_local8 = LOOT.doubleXpTypes.XP
		local f25_local9
		if not LOOT.GetGlobalOrTokenXPActiveForType( LOOT.doubleXpTypes.XP, f25_arg1 ) and not f25_local5 then
			f25_local9 = f25_local5
		else
			f25_local9 = nil
		end
		f25_local0[f25_local8] = f25_local9
		f25_local8 = LOOT.doubleXpTypes.WEAPON
		if not LOOT.GetGlobalOrTokenXPActiveForType( LOOT.doubleXpTypes.WEAPON, f25_arg1 ) and not f25_local6 then
			f25_local9 = f25_local6
		else
			f25_local9 = nil
		end
		f25_local0[f25_local8] = f25_local9
		f25_local8 = LOOT.doubleXpTypes.BATTLE_PASS
		if not LOOT.GetGlobalOrTokenXPActiveForType( LOOT.doubleXpTypes.BATTLE_PASS, f25_arg1 ) and not f25_local7 then
			f25_local9 = f25_local7
		else
			f25_local9 = nil
		end
		f25_local0[f25_local8] = f25_local9
		f25_local8 = LOOT.GetPartySkinSetInformation( f25_arg1, true )
		if CONDITIONS.InFrontend() and not Table.IsNilOrEmpty( f25_local8 ) and not LOOT.IsPlayerUsingPartySkinSet( f25_arg1 ) then
			f25_local9 = PARTY.GetBundlesWithPartySkins( f25_arg1 )
			if not Table.IsNilOrEmpty( f25_local9 ) then
				local f25_local10 = nil
				for f25_local29, f25_local30 in ipairs( f25_local9 ) do
					local f25_local23 = f25_local30[0x21637912842E8EC]
					if f25_local23 then
						f25_local23 = f25_local30[0x21637912842E8EC][0xF1422B6BAD0990C]
					end
					if not Table.IsNilOrEmpty( f25_local23 ) then
						for f25_local27, f25_local28 in ipairs( f25_local23 ) do
							if f25_local28[0x7E1B813ABAD5D3B] and f25_local8[f25_local28[0x7E1B813ABAD5D3B]] then
								f25_local10 = f25_local30
								break
							end
						end
					end
					if f25_local10 then
						
					end
				end
				if f25_local10 then
					f25_arg0.BundleUpsellButton:SetupBundleWithData( f25_arg1, f25_local10 )
					f25_arg0.SkinBonusDesc:SetVisible( true )
					f25_arg0.SkinBonusDesc:setText( Engine[0xED84C33EC5F01EA]( 0x884AEF025B23A11, Table.CountKeys( f25_local8 ) ) )
				else
					f25_arg0.InvitePlayers:SetupPrompt( {
						hideBacker = true,
						buttonPrompt = ButtonMap.button_alt2,
						text = 1 and 0x18E05E812D5E3F3 or 0xE77F576BC74B32B,
						action = function ( f26_arg0, f26_arg1 )
							local f26_local0 = f26_arg1.controller or f26_arg0._controllerIndex
							SOCIAL.OpenQuickInvitesPopup( f26_arg0._controllerIndex, LUI.SocialQuickInvitesPopup.MenuIds.PARTY_INVITE )
						end
					} )
					local f25_local2 = 0
					local f25_local3 = Dvar[0x9E5BE3B4BBA4E0E]( 0x6C27ECE023F58FB )
					if f25_local3 then
						f25_local3 = BATTLEPASS.IsOwned( f25_arg1 )
					end
					local f25_local4 = f25_arg0.SonyBonus
					if f25_local4 then
						f25_local4 = Lobby.IsSonyBoostActive()
					end
					if f25_local3 then
						f25_local2 = f25_local2 + 1
						f25_arg0.BattlePassBonus.Text:setText( Engine[0xED84C33EC5F01EA]( 0x3C9DED39626D70A, 10 ) )
					end
					if f25_local4 then
						f25_local2 = f25_local2 + 1
						f25_arg0.SonyBonus.Text:setText( Engine[0xED84C33EC5F01EA]( 0x3C9DED39626D70A, XPTOKENS.SonyBonusXP ) )
					end
					if f25_local2 <= 0 then
						f25_arg0.BattlePassBonus:SetVisible( false )
						if f25_arg0.SonyBonus then
							f25_arg0.SonyBonus:SetVisible( false )
						end
						f25_arg0.EventContainer.EventBonusContainer:SetVisible( false )
					else
						local f25_local6 = f0_local0 / f25_local2 - f0_local0
						if f25_local3 then
							f25_arg0.BattlePassBonus:SetLeft( 0 )
							f25_arg0.BattlePassBonus:SetRight( f25_local6 )
							f25_arg0.BattlePassBonus:ResizeLabel( f25_arg1, f25_local6 )
							f25_arg0.BattlePassBonus:CenterAlign( f25_arg1 )
							f25_arg0.BattlePassBonus:SetActive( true )
							f25_arg0.BattlePassBonus:SetVisible( true )
						else
							f25_arg0.BattlePassBonus:SetVisible( false )
						end
						if f25_local4 then
							f25_arg0.SonyBonus:SetLeft( 0 )
							f25_arg0.SonyBonus:SetRight( f25_local6 )
							f25_arg0.SonyBonus:ResizeLabel( f25_arg1, f25_local6 )
							f25_arg0.SonyBonus:CenterAlign( f25_arg1 )
							f25_arg0.SonyBonus:SetActive( true )
							f25_arg0.SonyBonus:SetVisible( true )
						elseif f25_arg0.SonyBonus then
							f25_arg0.SonyBonus:SetVisible( false )
						end
					end
					f25_arg0.XPBonusList:UpdateBonusList()
					f25_arg0.XpTokenStatus:SetupPartyBonus( f25_local0 )
					local f25_local5 = XPTOKENS.SetTokenUseLocked
					local f25_local7 = f25_arg1
					local f25_local8
					if not f25_local0 or not f25_local0[LOOT.doubleXpTypes.XP] or f25_local0[LOOT.doubleXpTypes.XP] < XPTOKENS.DisableTypeAtBonusAmount then
						f25_local8 = false
					else
						f25_local8 = true
					end
					f25_local5( f25_local7, f25_local8, LOOT.doubleXpTypes.XP )
					f25_local5 = XPTOKENS.SetTokenUseLocked
					f25_local7 = f25_arg1
					if not f25_local0 or not f25_local0[LOOT.doubleXpTypes.WEAPON] or f25_local0[LOOT.doubleXpTypes.WEAPON] < XPTOKENS.DisableTypeAtBonusAmount then
						f25_local8 = false
					else
						f25_local8 = true
					end
					f25_local5( f25_local7, f25_local8, LOOT.doubleXpTypes.WEAPON )
					f25_local5 = XPTOKENS.SetTokenUseLocked
					f25_local7 = f25_arg1
					if not f25_local0 or not f25_local0[LOOT.doubleXpTypes.BATTLE_PASS] or f25_local0[LOOT.doubleXpTypes.BATTLE_PASS] < XPTOKENS.DisableTypeAtBonusAmount then
						f25_local8 = false
					else
						f25_local8 = true
					end
					f25_local5( f25_local7, f25_local8, LOOT.doubleXpTypes.BATTLE_PASS )
					Lobby.SetUpCharacterUpdateSubscriptions( f25_arg0, f25_arg1, f25_arg0.RefreshBonuses )
				end
			end
		end
	else
		if CONDITIONS.InFrontend() and not LOOT.IsPlayerUsingPartySkinSet( f25_arg1 ) then
			local f25_local2 = PARTY.GetBundlesWithPartySkins( f25_arg1 )
			if not Table.IsNilOrEmpty( f25_local2 ) then
				f25_arg0.BundleUpsellButton:SetupBundleWithData( f25_arg1, f25_local2[1] )
				f25_arg0.SkinBonusDesc:SetVisible( false )
			end
		end
		f25_arg0.PartyUpMatrix:SetVisible( true )
		f25_arg0.PartyUpMatrix:SetupForCallToAction( {
			isSkins = false,
			title = Engine[0xED84C33EC5F01EA]( 0x93EE92B3E26C5C6 )
		} )
		if not String.IsNilOrEmpty( Dvar[0x54084D7CA2317BB]( 0x88C1A8E6EBB7178 ) ) then
			f25_arg0.PartySkinMatrix:SetupForCallToAction( {
				isSkins = true,
				title = Engine[0xED84C33EC5F01EA]( 0x1478445585754EE )
			} )
		end
	end
	f25_arg0.InvitePlayers:SetupPrompt( {
		hideBacker = true,
		buttonPrompt = ButtonMap.button_alt2,
		text = 1 and 0x18E05E812D5E3F3 or 0xE77F576BC74B32B,
		action = function ( f26_arg0, f26_arg1 )
			local f26_local0 = f26_arg1.controller or f26_arg0._controllerIndex
			SOCIAL.OpenQuickInvitesPopup( f26_arg0._controllerIndex, LUI.SocialQuickInvitesPopup.MenuIds.PARTY_INVITE )
		end
	} )
	local f25_local2 = 0
	local f25_local3 = Dvar[0x9E5BE3B4BBA4E0E]( 0x6C27ECE023F58FB )
	if f25_local3 then
		f25_local3 = BATTLEPASS.IsOwned( f25_arg1 )
	end
	local f25_local4 = f25_arg0.SonyBonus
	if f25_local4 then
		f25_local4 = Lobby.IsSonyBoostActive()
	end
	if f25_local3 then
		f25_local2 = f25_local2 + 1
		f25_arg0.BattlePassBonus.Text:setText( Engine[0xED84C33EC5F01EA]( 0x3C9DED39626D70A, 10 ) )
	end
	if f25_local4 then
		f25_local2 = f25_local2 + 1
		f25_arg0.SonyBonus.Text:setText( Engine[0xED84C33EC5F01EA]( 0x3C9DED39626D70A, XPTOKENS.SonyBonusXP ) )
	end
	if f25_local2 <= 0 then
		f25_arg0.BattlePassBonus:SetVisible( false )
		if f25_arg0.SonyBonus then
			f25_arg0.SonyBonus:SetVisible( false )
		end
		f25_arg0.EventContainer.EventBonusContainer:SetVisible( false )
	else
		local f25_local6 = f0_local0 / f25_local2 - f0_local0
		if f25_local3 then
			f25_arg0.BattlePassBonus:SetLeft( 0 )
			f25_arg0.BattlePassBonus:SetRight( f25_local6 )
			f25_arg0.BattlePassBonus:ResizeLabel( f25_arg1, f25_local6 )
			f25_arg0.BattlePassBonus:CenterAlign( f25_arg1 )
			f25_arg0.BattlePassBonus:SetActive( true )
			f25_arg0.BattlePassBonus:SetVisible( true )
		else
			f25_arg0.BattlePassBonus:SetVisible( false )
		end
		if f25_local4 then
			f25_arg0.SonyBonus:SetLeft( 0 )
			f25_arg0.SonyBonus:SetRight( f25_local6 )
			f25_arg0.SonyBonus:ResizeLabel( f25_arg1, f25_local6 )
			f25_arg0.SonyBonus:CenterAlign( f25_arg1 )
			f25_arg0.SonyBonus:SetActive( true )
			f25_arg0.SonyBonus:SetVisible( true )
		elseif f25_arg0.SonyBonus then
			f25_arg0.SonyBonus:SetVisible( false )
		end
	end
	f25_arg0.XPBonusList:UpdateBonusList()
	f25_arg0.XpTokenStatus:SetupPartyBonus( f25_local0 )
	local f25_local5 = XPTOKENS.SetTokenUseLocked
	local f25_local7 = f25_arg1
	local f25_local8
	if not f25_local0 or not f25_local0[LOOT.doubleXpTypes.XP] or f25_local0[LOOT.doubleXpTypes.XP] < XPTOKENS.DisableTypeAtBonusAmount then
		f25_local8 = false
	else
		f25_local8 = true
	end
	f25_local5( f25_local7, f25_local8, LOOT.doubleXpTypes.XP )
	f25_local5 = XPTOKENS.SetTokenUseLocked
	f25_local7 = f25_arg1
	if not f25_local0 or not f25_local0[LOOT.doubleXpTypes.WEAPON] or f25_local0[LOOT.doubleXpTypes.WEAPON] < XPTOKENS.DisableTypeAtBonusAmount then
		f25_local8 = false
	else
		f25_local8 = true
	end
	f25_local5( f25_local7, f25_local8, LOOT.doubleXpTypes.WEAPON )
	f25_local5 = XPTOKENS.SetTokenUseLocked
	f25_local7 = f25_arg1
	if not f25_local0 or not f25_local0[LOOT.doubleXpTypes.BATTLE_PASS] or f25_local0[LOOT.doubleXpTypes.BATTLE_PASS] < XPTOKENS.DisableTypeAtBonusAmount then
		f25_local8 = false
	else
		f25_local8 = true
	end
	f25_local5( f25_local7, f25_local8, LOOT.doubleXpTypes.BATTLE_PASS )
	Lobby.SetUpCharacterUpdateSubscriptions( f25_arg0, f25_arg1, f25_arg0.RefreshBonuses )
end

local f0_local12 = function ( f23_arg0 )
	f23_arg0:registerEventHandler( "user_state_updated", function ( element, event )
		element:deregisterEventHandler( "user_state_updated" )
		f23_arg0( f23_arg0, event.controllerIndex )
	end )
end

local f0_local13 = function ( f21_arg0, f21_arg1 )
	if not f21_arg0._checkGlobalTokenAmountsTimer then
		f21_arg0._checkGlobalTokenAmountsTimer = LUI.UITimer.new( {
			interval = 200,
			event = "check_global_token_amounts"
		} )
		f21_arg0._checkGlobalTokenAmountsTimer.id = "checkGlobalTokenAmountsTimer"
		f21_arg0:addElement( f21_arg0._checkGlobalTokenAmountsTimer )
		f21_arg0:registerEventHandler( "check_global_token_amounts", function ( element, event )
			if f21_arg0( f21_arg0, f21_arg0 ) then
				ACTIONS.AnimateSequence( f21_arg0, "HideActivating" )
				f21_arg0._tokenProcessing = false
				f21_arg0( f21_arg0, f21_arg0 )
				f21_arg0( f21_arg0, f21_arg0 )
				f21_arg0( f21_arg0 )
				f21_arg0:RefreshGrid()
				f21_arg0._checkGlobalTokenAmountsTimer:closeTree()
				f21_arg0._checkGlobalTokenAmountsTimer = nil
			end
			return true
		end )
	end
end

local f0_local14 = function ( f10_arg0, f10_arg1, f10_arg2 )
	f10_arg0.RefreshGrid = f0_local0
	f10_arg0.RefreshBonuses = f0_local0
	f10_arg0.MenuTitleText.Text:SetFontSize( 24 * _PT )
	f10_arg0.MenuTitleText.Text:SetMinFontSize( 20 * _PT )
	f10_arg0._controllerIndex = f10_arg1
	f10_arg0._backgroundGridArray = {
		[LOOT.doubleXpTypes.XP] = f10_arg0.XPFlyOutStripeRank,
		[LOOT.doubleXpTypes.WEAPON] = f10_arg0.XPFlyOutStripeWeapon,
		[LOOT.doubleXpTypes.BATTLE_PASS] = f10_arg0.XPFlyOutStripeBP
	}
	f10_arg0._tokenStillProcessing = XPTOKENS.GetTokenUseLocked( f10_arg1 )
	if f10_arg0._tokenStillProcessing then
		ACTIONS.AnimateSequence( f10_arg0, "ShowActivating" )
	end
	TOAST_NOTIF.UpdateToastPosition( LUI.ToastManager.ToastPositionModifier.TokenMenu, LUI.ToastManager.ToastPositionModifierStates.Opened )
	f0_local0( f10_arg0, f10_arg1 )
	f0_local0( f10_arg0, f10_arg1 )
	local f10_local0 = DataSources.alwaysLoaded.activeParty.memberCount
	if f10_local0 then
		f10_arg0:SubscribeToModel( f10_local0:GetModel( f10_arg1 ), function ( f20_arg0, f20_arg1 )
			f10_arg0( f20_arg1, f10_arg0 )
			f20_arg1:RefreshGrid()
		end, true )
	end
	f10_arg0.TokenGrid:SetRefreshChild( function ( f19_arg0, f19_arg1, f19_arg2 )
		local f19_local0 = LUI.clamp( f19_arg1 + 1, 1, 3 )
		local f19_local1 = f10_arg0( f10_arg0, f10_arg0, f19_arg0, f10_arg0._tokenData[LUI.clamp( f19_arg1 + 1, 1, 3 )][LUI.clamp( f19_arg2 + 1, 1, 5 )] )
	end )
	if SEASON.IsCurrentSeasonSunset() then
		f10_arg0.TokenGrid._isPositionFocusable = function ( f18_arg0, f18_arg1 )
			return LUI.clamp( f18_arg0 + 1, 1, 3 ) ~= LOOT.doubleXpTypes.BATTLE_PASS
		end
		
		f10_arg0.XpTokenStatus:SetupForSunset()
	end
	f10_arg0:RefreshGrid()
	f10_arg0:registerEventHandler( "OnAchievementActivated", function ( element, event )
		if event.kind == Challenge.GetAEKindID( 0xE06DA8578F922D9 ) then
			LUI.UIRoot.XPTokenActivated( element, event )
			if event.success then
				f10_arg0( f10_arg0, f10_arg0 )
			else
				ACTIONS.AnimateSequence( f10_arg0, "HideActivating" )
				f10_arg0._tokenProcessing = false
				XPTOKENS.SetTokenUseLocked( f10_arg0, false )
				f10_arg0( f10_arg0, f10_arg0 )
				f10_arg0:RefreshGrid()
			end
		end
	end )
	f10_arg0:registerEventHandler( "ActivationFeeDeducted", function ( element, event )
		f10_arg0( element, f10_arg0 )
	end )
	f10_arg0:addEventHandler( "menu_close", function ( f15_arg0, f15_arg1 )
		TOAST_NOTIF.UpdateToastPosition( LUI.ToastManager.ToastPositionModifier.TokenMenu, LUI.ToastManager.ToastPositionModifierStates.Closed )
	end )
	local f10_local1 = DataSources.alwaysLoaded.loot.xpTokenUseLocked
	if f10_local1 then
		f10_arg0:SubscribeToModel( f10_local1:GetModel( f10_arg1 ), function ( f14_arg0, f14_arg1 )
			if f14_arg1._tokenStillProcessing and not XPTOKENS.GetTokenUseLocked( f10_arg0 ) then
				f14_arg1._tokenStillProcessing = false
				f10_arg0( f14_arg1, f10_arg0 )
			end
		end )
	end
	local f10_local2 = function ()
		f10_arg0( f10_arg0, f10_arg0 )
		local f12_local0 = f10_arg0
		local f12_local1 = f12_local0
		f12_local0 = f12_local0.CreateEventTimer
		f12_local0( f12_local1, "update_tokens", 1000, {
			immediate = true,
			callbackFunc = function ( f13_arg0, f13_arg1 )
				f12_local0( f13_arg0, f12_local0 )
			end
		} )
	end
	
	LOOT.AttachFence( f10_arg0, f10_arg1, function ( f11_arg0, f11_arg1 )
		if f11_arg1.fenceState ~= LUI.Fence.FenceObjectState.PASSING then
			return 
		else
			f10_arg0()
		end
	end )
	if IsLanguageArabic() then
		ACTIONS.AnimateSequence( f10_arg0, "AR" )
	end
end

States = {
	[0xAD14C6E7156B923] = function ( f5_arg0, f5_arg1 )
		local f5_local0 = function ( f9_arg0, f9_arg1 )
			
		end
		
		f5_arg0[0x665E91744184986]:RegisterAnimationSequence( 0xB53B2565F6614D6, {
			nil,
			nil,
			1,
			0,
			[1] = TWEEN_PROPERTY.Alpha
		} )
		f5_arg0[0xFBFCA8B52A47A89]:RegisterAnimationSequence( 0xB53B2565F6614D6, {
			nil,
			nil,
			1,
			0,
			[1] = TWEEN_PROPERTY.Alpha
		} )
		local f5_local1 = function ( f8_arg0, f8_arg1 )
			f8_arg0[0x665E91744184986]:AnimateSequence( 0xB53B2565F6614D6 )
			f8_arg0[0xFBFCA8B52A47A89]:AnimateSequence( 0xB53B2565F6614D6 )
		end
		
		f5_arg0[0x665E91744184986]:RegisterAnimationSequence( 0xCAE2E77C906D443, {
			nil,
			nil,
			0,
			0,
			[1] = TWEEN_PROPERTY.Alpha
		} )
		f5_arg0[0xFBFCA8B52A47A89]:RegisterAnimationSequence( 0xCAE2E77C906D443, {
			nil,
			nil,
			0,
			0,
			[1] = TWEEN_PROPERTY.Alpha
		} )
		local f5_local2 = function ( f7_arg0, f7_arg1 )
			f7_arg0[0x665E91744184986]:AnimateSequence( 0xCAE2E77C906D443 )
			f7_arg0[0xFBFCA8B52A47A89]:AnimateSequence( 0xCAE2E77C906D443 )
		end
		
		f5_arg0[0xC9459CE00FB4E0B][0x60292E7E7FED46B]:RegisterAnimationSequence( 0x89C5407B545B39A, {
			nil,
			nil,
			nil,
			0,
			nil,
			nil,
			477,
			0,
			nil,
			nil,
			507,
			0,
			nil,
			nil,
			473,
			0,
			[1] = Bit.Pack( 2, TWEEN_PROPERTY.Text_Style_Horizontal_Alignment, NUM_FIELDS_BIT_POSITION ),
			[2] = LUI.Alignment.Right,
			[4] = f5_arg0[0xC9459CE00FB4E0B][0x60292E7E7FED46B][0xA31296C0C1B6029],
			[5] = Bit.Pack( 2, TWEEN_PROPERTY.Left, NUM_FIELDS_BIT_POSITION ),
			[8] = f5_arg0[0xC9459CE00FB4E0B][0x60292E7E7FED46B][0x74BDF7CF4E3B965],
			[9] = Bit.Pack( 2, TWEEN_PROPERTY.Right, NUM_FIELDS_BIT_POSITION ),
			[12] = f5_arg0[0xC9459CE00FB4E0B][0x60292E7E7FED46B][0x74BDF7CF4E3B965],
			[13] = Bit.Pack( 2, TWEEN_PROPERTY.Right, NUM_FIELDS_BIT_POSITION ),
			[16] = f5_arg0[0xC9459CE00FB4E0B][0x60292E7E7FED46B][0xA31296C0C1B6029]
		} )
		f5_arg0[0xC9459CE00FB4E0B][0x45E33505D52CECF]:RegisterAnimationSequence( 0x89C5407B545B39A, {
			nil,
			nil,
			nil,
			0,
			[1] = Bit.Pack( 2, TWEEN_PROPERTY.Text_Style_Horizontal_Alignment, NUM_FIELDS_BIT_POSITION ),
			[2] = LUI.Alignment.Right,
			[4] = f5_arg0[0xC9459CE00FB4E0B][0x45E33505D52CECF][0xA31296C0C1B6029]
		} )
		f5_arg0[0xC9459CE00FB4E0B][0x30EA7EE9BF06922]:RegisterAnimationSequence( 0x89C5407B545B39A, {
			nil,
			nil,
			175,
			0,
			nil,
			375,
			0,
			[1] = TWEEN_PROPERTY.Left,
			[4] = TWEEN_PROPERTY.Right
		} )
		f5_arg0[0x49D85F0EF1CEC84] = {
			[0xEF6C3AB55C07BEF] = f5_local0,
			[0xB53B2565F6614D6] = f5_local1,
			[0xCAE2E77C906D443] = f5_local2,
			[0x89C5407B545B39A] = function ( f6_arg0, f6_arg1 )
				f6_arg0[0xC9459CE00FB4E0B][0x60292E7E7FED46B]:AnimateSequence( 0x89C5407B545B39A )
				f6_arg0[0xC9459CE00FB4E0B][0x45E33505D52CECF]:AnimateSequence( 0x89C5407B545B39A )
				f6_arg0[0xC9459CE00FB4E0B][0x30EA7EE9BF06922]:AnimateSequence( 0x89C5407B545B39A )
			end
		}
		f5_arg0[0xD97E59A206E4A54] = {
			[0xCAE2E77C906D443] = 0,
			[0x89C5407B545B39A] = 0,
			[0xB53B2565F6614D6] = 0,
			[0xEF6C3AB55C07BEF] = 0
		}
	end
}
function TokenMenu( f1_arg0, f1_arg1 )
	local f1_local0 = CONDITIONS
	local f1_local1 = LUI
	local f1_local2 = MenuBuilder
	local f1_local3 = TWEEN_PROPERTY
	local f1_local4 = f1_local1.UIHorizontalNavigator.new()
	f1_local4:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 620, 0, 1080 )
	f1_local4.id = "TokenMenu"
	f1_local4[0xBD5D934D3CD91E5] = States
	local f1_local5
	if f1_arg1 then
		f1_local5 = f1_arg1
	else
		f1_local5 = f1_arg1.controllerIndex
	end
	f1_local5 = f1_local1.ValidateControllerIndex( f1_local4, f1_local5 )
	local f1_local6 = nil
	f1_local6 = f1_local1.UIImage.new()
	f1_local6[0x8B72E07B55C3AC0] = "Background"
	f1_local6:SetRGB( 2434342, 0 )
	f1_local6:Setup9SliceImage( 20, 20, 0.3, 0.3 )
	f1_local6:SetAnchorsAndPosition( 0, 0, 0, 1, 1, -1, 0, 1080 )
	f1_local4:addElement( f1_local6 )
	f1_local4[0xD4176E7CA246EDD] = f1_local6
	local f1_local7 = nil
	f1_local7 = f1_local1.UIText.new()
	f1_local7[0x8B72E07B55C3AC0] = "WarningLabel"
	f1_local7:SetRGB( SWATCHES[0x2B125210C0B2BB1][0x85BDB34EB15445F], 0 )
	f1_local7:setText( Engine[0xED84C33EC5F01EA]( 0x849F2616A844C09 ), 0 )
	f1_local7:setCaseStyle( f1_local1.CaseStyle.Uppercase )
	f1_local7:SetFontStyle( FONT_STYLES[0xF71DBA24EB4212] )
	f1_local7:SetWordWrap( true )
	f1_local7:SetAlignment( f1_local1.Alignment.Left )
	f1_local7:SetAnchorsAndPosition( 0, 1, 0, 1, 58, 579, 1035, 1058 )
	f1_local4:addElement( f1_local7 )
	f1_local4[0xACC08F0968EDA37] = f1_local7
	local f1_local8 = nil
	f1_local8 = f1_local1.UIImage.new()
	f1_local8[0x8B72E07B55C3AC0] = "spinner"
	f1_local8:SetAlpha( 0, 0 )
	f1_local8:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, -215, 215, 1018, 1028 )
	f1_local8:SubscribeToModel( DataSources.alwaysLoaded.themes[0x22C63C733EDAFD9]:GetModel( f1_local5 ), function ()
		local f4_local0 = DataSources.alwaysLoaded.themes[0x22C63C733EDAFD9]:GetValue( f1_arg0 )
		if f4_local0 ~= nil then
			f1_arg0:setImage( RegisterMaterial( f4_local0 ), 0 )
		end
	end )
	f1_local4:addElement( f1_local8 )
	f1_local4[0x665E91744184986] = f1_local8
	local f1_local9 = nil
	f1_local9 = f1_local1.UIText.new()
	f1_local9[0x8B72E07B55C3AC0] = "ActivatingTokensLabel"
	f1_local9:SetRGB( SWATCHES[0x1F5A9ABAC207F9D][0xE23B52CBA8DDAD7], 0 )
	f1_local9:SetAlpha( 0, 0 )
	f1_local9:setText( Engine[0xED84C33EC5F01EA]( 0xC03EB66A11093E7 ), 0 )
	f1_local9:SetFont( FONTS.GetFont( FONTS.PrimaryRegular.File ) )
	f1_local9:SetFontSize( 20 * _PT )
	f1_local9:SetMinFontSize( 18 * _PT )
	f1_local9:SetWordWrap( true )
	f1_local9:SetAlignment( f1_local1.Alignment.Center )
	f1_local9:SetVerticalAlignment( f1_local1.Alignment.Middle )
	f1_local9:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, -215, 215, 1005, 1025 )
	f1_local4:addElement( f1_local9 )
	f1_local4[0xFBFCA8B52A47A89] = f1_local9
	local f1_local10 = nil
	f1_local10 = f1_local1.UIImage.new()
	f1_local10[0x8B72E07B55C3AC0] = "TitleBacker"
	f1_local10:SetVisible( false )
	f1_local10:SetAlpha( 0.05, 0 )
	f1_local10:SetAnchorsAndPosition( 0, 0, 0, 1, 1, 1, 0, 85 )
	f1_local4:addElement( f1_local10 )
	f1_local4[0x4F9F808F82318F1] = f1_local10
	local f1_local11 = nil
	f1_local11 = f1_local2.BuildRegisteredType( 0xA0E3FE61561D56B, {
		controllerIndex = f1_local5
	} )
	f1_local11[0x8B72E07B55C3AC0] = "MenuTitleText"
	f1_local11[0xA04F4EF1995407E]:SetRGB( SWATCHES[0x2B125210C0B2BB1][0xF5C0139BA6F896C], 0 )
	f1_local11[0xA04F4EF1995407E]:SetAlpha( 0.5, 0 )
	f1_local11[0xA04F4EF1995407E]:setText( Engine[0xED84C33EC5F01EA]( 0xA006674783FB8BC ), 0 )
	f1_local11[0xA04F4EF1995407E]:SetFont( FONTS.GetFont( FONTS.SecondaryLight.File ) )
	f1_local11[0xA04F4EF1995407E]:SetTracking( 1, 0 )
	f1_local11:SetAnchorsAndPosition( 0, 1, 0, 1, 87, 355, 27, 59 )
	f1_local4:addElement( f1_local11 )
	f1_local4[0xA0E3FE61561D56B] = f1_local11
	local f1_local12 = nil
	f1_local12 = f1_local2.BuildRegisteredType( 0xBBE11BC4215AE8F, {
		controllerIndex = f1_local5
	} )
	f1_local12[0x8B72E07B55C3AC0] = "XPFlyoutStripeWeapon"
	f1_local12:SetVisible( false )
	f1_local12:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, -95, 95, 145, 1080 )
	f1_local4:addElement( f1_local12 )
	f1_local4[0x6CED6DC643A936F] = f1_local12
	local f1_local13 = nil
	f1_local13 = f1_local2.BuildRegisteredType( 0xBBE11BC4215AE8F, {
		controllerIndex = f1_local5
	} )
	f1_local13[0x8B72E07B55C3AC0] = "XPFlyoutStripeBP"
	f1_local13:SetVisible( false )
	f1_local13:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, 96, 286, 150, 1080 )
	f1_local4:addElement( f1_local13 )
	f1_local4[0xF1CC7EB2D6F4625] = f1_local13
	local f1_local14 = nil
	f1_local14 = f1_local2.BuildRegisteredType( 0xBBE11BC4215AE8F, {
		controllerIndex = f1_local5
	} )
	f1_local14[0x8B72E07B55C3AC0] = "XPFlyoutStripeRank"
	f1_local14:SetVisible( false )
	f1_local14:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, -286, -96, 145, 1080 )
	f1_local4:addElement( f1_local14 )
	f1_local4[0x683C355B7BC8B8D] = f1_local14
	local f1_local15 = nil
	f1_local15 = f1_local1.UIGrid.new( {
		maxVisibleRows = 4,
		maxVisibleColumns = 3,
		spacingX = 15,
		spacingY = 15,
		rowHeight = 150,
		columnWidth = 175,
		controllerIndex = f1_local5,
		buildChild = function ()
			return f1_arg0.BuildRegisteredType( 0x1305F58A88CB29A, {
				controllerIndex = f1_arg0
			} )
		end,
		refreshChild = function ( f2_arg0, f2_arg1, f2_arg2 )
			
		end
	} )
	f1_local15[0x8B72E07B55C3AC0] = "TokenGrid"
	f1_local15:SetFirstLinePadding( 10 )
	f1_local15:setUseStencil( false )
	f1_local15:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, -277.5, 278.5, 348.8, 1023.8 )
	f1_local4:addElement( f1_local15 )
	f1_local4[0xBA29507A05A9FAA] = f1_local15
	local f1_local16 = nil
	f1_local16 = f1_local1.UIImage.new()
	f1_local16[0x8B72E07B55C3AC0] = "WarningIcon"
	f1_local16:SetRGB( SWATCHES[0x2B125210C0B2BB1][0x85BDB34EB15445F], 0 )
	f1_local16:setImage( RegisterMaterial( 0x27333ADC3C82954 ), 0 )
	f1_local16:SetAnchorsAndPosition( 0, 1, 0, 1, 31, 51, 1035, 1055 )
	f1_local4:addElement( f1_local16 )
	f1_local4[0x4597738CC23D5E] = f1_local16
	local f1_local17 = nil
	f1_local17 = f1_local2.BuildRegisteredType( 0xB3E95526ED6127E, {
		controllerIndex = f1_local5
	} )
	f1_local17[0x8B72E07B55C3AC0] = "XpTokenStatus"
	f1_local17:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, -309, 311, 150, 343 )
	f1_local4:addElement( f1_local17 )
	f1_local4[0xA39D831ED27B12C] = f1_local17
	local f1_local18 = nil
	f1_local18 = f1_local1.UIImage.new()
	f1_local18[0x8B72E07B55C3AC0] = "ShadowBacker"
	f1_local18:SetRGB( SWATCHES[0x2B125210C0B2BB1][0xB5D1594B83AC6C5], 0 )
	f1_local18:setImage( RegisterMaterial( 0xD4CD7610BAA643D ), 0 )
	f1_local18:Setup9SliceImage( 2, 6, 0.225, 0.225 )
	f1_local18:SetAnchorsAndPosition( 0, 0, 0, 1, 1, -1, 110, 152 )
	f1_local4:addElement( f1_local18 )
	f1_local4[0x47854A67B132099] = f1_local18
	local f1_local19 = nil
	f1_local19 = f1_local1.UIImage.new()
	f1_local19[0x8B72E07B55C3AC0] = "Backer"
	f1_local19:SetRGB( 2434342, 0 )
	f1_local19:SetAnchorsAndPosition( 0, 0, 0, 1, 1, -1, 85, 142 )
	f1_local4:addElement( f1_local19 )
	f1_local4[0xF3FC81DFCEB7D35] = f1_local19
	local f1_local20 = nil
	f1_local20 = f1_local1.UIVerticalStackedLayout.new()
	f1_local4[0x91A5C4CB28FC69A] = f1_local20
	f1_local20[0x8B72E07B55C3AC0] = "EventContainer"
	f1_local20:SetAnchorsAndPosition( 0, 0, 0, 1, 3, -3, 71.6, 141.6 )
	f1_local20:SetAlignment( f1_local1.Alignment.Left )
	f1_local20:SetVerticalAlignment( f1_local1.Alignment.Bottom )
	f1_local20:SetIgnoreInvisibleChildren( true )
	f1_local4:addElement( f1_local20 )
	f1_local20.DoubleXPBanner = f1_local2.BuildRegisteredType( 0xE8767B93A792FC6, {
		controllerIndex = f1_local5
	} )
	f1_local20.DoubleXPBanner[0x8B72E07B55C3AC0] = "EventContainer.DoubleXPBanner"
	f1_local20[0x2DD084B5D1EE23E]:SetVisible( false )
	f1_local20[0x2DD084B5D1EE23E]:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, 30 )
	f1_local4[0x91A5C4CB28FC69A][0x2DD084B5D1EE23E] = f1_local20.DoubleXPBanner
	f1_local4[0x2DD084B5D1EE23E] = f1_local20[0x2DD084B5D1EE23E]
	f1_local20:addElement( f1_local20[0x2DD084B5D1EE23E] )
	f1_local20[0xBD0E40D633A2071] = f1_local1.UIHorizontalStackedLayout.new()
	f1_local4[0x91A5C4CB28FC69A][0xBD0E40D633A2071] = f1_local20[0xBD0E40D633A2071]
	f1_local20[0xBD0E40D633A2071][0x8B72E07B55C3AC0] = "EventContainer.@EventBonusContainer"
	f1_local20[0xBD0E40D633A2071]:SetAnchorsAndPosition( 0, 0, 0, 1, 1, -1, 30, 70 )
	f1_local20[0xBD0E40D633A2071]:SetAlignment( f1_local1.Alignment.Center )
	f1_local20[0xBD0E40D633A2071]:SetVerticalAlignment( f1_local1.Alignment.Top )
	f1_local20[0xBD0E40D633A2071]:SetIgnoreInvisibleChildren( true )
	if f1_local0.IsSony() then
		f1_local20.EventBonusContainer.SonyBonus = f1_local2.BuildRegisteredType( 0x3725388DFE6AD, {
			controllerIndex = f1_local5
		} )
		f1_local20.EventBonusContainer.SonyBonus[0x8B72E07B55C3AC0] = "EventContainer.EventBonusContainer.SonyBonus"
		f1_local20[0xBD0E40D633A2071][0xC9346364CE9CD69][0xA04F4EF1995407E]:setText( Engine[0xED84C33EC5F01EA]( 0x3C9DED39626D70A ), 0 )
		f1_local20[0xBD0E40D633A2071][0xC9346364CE9CD69][0xBFF4CC56C2092F0]:setImage( RegisterMaterial( 0x8B356E444424BE5 ), 0 )
		f1_local20[0xBD0E40D633A2071][0xC9346364CE9CD69]:SetAnchorsAndPosition( 0, 1, 0, 1, 206, 306, 0, 40 )
		f1_local4[0x91A5C4CB28FC69A][0xBD0E40D633A2071][0xC9346364CE9CD69] = f1_local20.EventBonusContainer.SonyBonus
		f1_local4[0xC9346364CE9CD69] = f1_local20[0xBD0E40D633A2071][0xC9346364CE9CD69]
		f1_local20[0xBD0E40D633A2071]:addElement( f1_local20[0xBD0E40D633A2071][0xC9346364CE9CD69] )
	end
	f1_local20.EventBonusContainer.BattlePassBonus = f1_local2.BuildRegisteredType( 0x3725388DFE6AD, {
		controllerIndex = f1_local5
	} )
	f1_local20.EventBonusContainer.BattlePassBonus[0x8B72E07B55C3AC0] = "EventContainer.EventBonusContainer.BattlePassBonus"
	f1_local20[0xBD0E40D633A2071][0x816DC8DF521326D][0xBFF4CC56C2092F0]:setImage( RegisterMaterial( 0xCB556727FC82CAD ), 0 )
	f1_local20[0xBD0E40D633A2071][0x816DC8DF521326D]:SetAnchorsAndPosition( 0, 1, 0, 1, 306, 406, 0, 40 )
	f1_local4[0x91A5C4CB28FC69A][0xBD0E40D633A2071][0x816DC8DF521326D] = f1_local20.EventBonusContainer.BattlePassBonus
	f1_local4[0x816DC8DF521326D] = f1_local20[0xBD0E40D633A2071][0x816DC8DF521326D]
	f1_local20[0xBD0E40D633A2071]:addElement( f1_local20[0xBD0E40D633A2071][0x816DC8DF521326D] )
	f1_local4[0xBD0E40D633A2071] = f1_local20[0xBD0E40D633A2071]
	f1_local20:addElement( f1_local20[0xBD0E40D633A2071] )
	local f1_local21 = nil
	f1_local21 = f1_local1.UIVerticalStackedLayout.new()
	f1_local4[0xC9459CE00FB4E0B] = f1_local21
	f1_local21[0x8B72E07B55C3AC0] = "BonusContainer"
	f1_local21:SetAnchorsAndPosition( 0, 1, 0, 1, -525, -531, 140, 1080 )
	f1_local21:SetAlignment( f1_local1.Alignment.Left )
	f1_local21:SetVerticalAlignment( f1_local1.Alignment.Top )
	f1_local21:SetIgnoreInvisibleChildren( true )
	f1_local21:SetSpacing( 20 )
	f1_local4:addElement( f1_local21 )
	if f1_local0.InFrontend() then
		f1_local21.BundleUpsellButton = f1_local2.BuildRegisteredType( 0x51AD7B779BDD318, {
			controllerIndex = f1_local5
		} )
		f1_local21.BundleUpsellButton[0x8B72E07B55C3AC0] = "BonusContainer.BundleUpsellButton"
		f1_local21[0x51AD7B779BDD318][0xF375FA2CE7B1849]:SetRight( 502, 0 )
		f1_local21[0x51AD7B779BDD318][0x3D2CAC33220AA82]:SetRight( 502, 0 )
		f1_local21[0x51AD7B779BDD318][0x7C5C54E8E516C5A]:SetRight( 502, 0 )
		f1_local21[0x51AD7B779BDD318][0x7C5C54E8E516C5A]:SetTop( -24, 0 )
		f1_local21[0x51AD7B779BDD318][0x7C5C54E8E516C5A]:SetBottom( 329, 0 )
		f1_local21[0x51AD7B779BDD318][0x9CA75A371F265ED]:SetRight( 502, 0 )
		f1_local21[0x51AD7B779BDD318][0x9CA75A371F265ED][0x15DC17CF8C8935]:SetRight( 286, 0 )
		f1_local21[0x51AD7B779BDD318][0xD5BC1226A78C2CE]:SetLeft( 307.5, 0 )
		f1_local21[0x51AD7B779BDD318]:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 502, 0, 139 )
		f1_local4[0xC9459CE00FB4E0B][0x51AD7B779BDD318] = f1_local21.BundleUpsellButton
		f1_local4[0x51AD7B779BDD318] = f1_local21[0x51AD7B779BDD318]
		f1_local21:addElement( f1_local21[0x51AD7B779BDD318] )
	end
	f1_local21.SkinBonusDesc = f1_local1.UIStyledText.new()
	f1_local21.SkinBonusDesc[0x8B72E07B55C3AC0] = "BonusContainer.SkinBonusDesc"
	f1_local21[0x961C717CAB56B2A]:SetRGB( SWATCHES[0x2B125210C0B2BB1][0xF5C0139BA6F896C], 0 )
	f1_local21[0x961C717CAB56B2A]:SetAlpha( 0.8, 0 )
	f1_local21[0x961C717CAB56B2A]:setText( "", 0 )
	f1_local21[0x961C717CAB56B2A]:SetFont( FONTS.GetFont( FONTS.SecondaryRegular.File ) )
	f1_local21[0x961C717CAB56B2A]:SetFontSize( 18 * _PT )
	f1_local21[0x961C717CAB56B2A]:SetMinFontSize( 18 * _PT )
	f1_local21[0x961C717CAB56B2A]:SetWordWrap( true )
	f1_local21[0x961C717CAB56B2A]:SetAlignment( f1_local1.Alignment.Left )
	f1_local21[0x961C717CAB56B2A]:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 500, 159, 284 )
	f1_local4[0xC9459CE00FB4E0B][0x961C717CAB56B2A] = f1_local21.SkinBonusDesc
	f1_local4[0x961C717CAB56B2A] = f1_local21[0x961C717CAB56B2A]
	f1_local21:addElement( f1_local21[0x961C717CAB56B2A] )
	f1_local21.PartySkinMatrix = f1_local2.BuildRegisteredType( 0x3E0E58AA283E417, {
		controllerIndex = f1_local5
	} )
	f1_local21.PartySkinMatrix[0x8B72E07B55C3AC0] = "BonusContainer.PartySkinMatrix"
	f1_local21[0x60292E7E7FED46B]:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 500, 199, 454 )
	f1_local4[0xC9459CE00FB4E0B][0x60292E7E7FED46B] = f1_local21.PartySkinMatrix
	f1_local4[0x60292E7E7FED46B] = f1_local21[0x60292E7E7FED46B]
	f1_local21:addElement( f1_local21[0x60292E7E7FED46B] )
	f1_local21.PartyUpMatrix = f1_local2.BuildRegisteredType( 0x3E0E58AA283E417, {
		controllerIndex = f1_local5
	} )
	f1_local21.PartyUpMatrix[0x8B72E07B55C3AC0] = "BonusContainer.PartyUpMatrix"
	f1_local21[0x45E33505D52CECF][0xA31296C0C1B6029]:SetLeft( 0, 0 )
	f1_local21[0x45E33505D52CECF][0x74BDF7CF4E3B965]:SetVisible( false )
	f1_local21[0x45E33505D52CECF]:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 500, 474, 729 )
	f1_local4[0xC9459CE00FB4E0B][0x45E33505D52CECF] = f1_local21.PartyUpMatrix
	f1_local4[0x45E33505D52CECF] = f1_local21[0x45E33505D52CECF]
	f1_local21:addElement( f1_local21[0x45E33505D52CECF] )
	f1_local21.InvitePlayers = f1_local2.BuildRegisteredType( 0x679E56885240690, {
		controllerIndex = f1_local5
	} )
	f1_local21.InvitePlayers[0x8B72E07B55C3AC0] = "BonusContainer.InvitePlayers"
	f1_local21[0x30EA7EE9BF06922]:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 200, 749, 781 )
	f1_local4[0xC9459CE00FB4E0B][0x30EA7EE9BF06922] = f1_local21.InvitePlayers
	f1_local4[0x30EA7EE9BF06922] = f1_local21[0x30EA7EE9BF06922]
	f1_local21:addElement( f1_local21[0x30EA7EE9BF06922] )
	f1_local21.XPBonusList = f1_local2.BuildRegisteredType( 0xDBF8778D932185C, {
		controllerIndex = f1_local5
	} )
	f1_local21.XPBonusList[0x8B72E07B55C3AC0] = "BonusContainer.XPBonusList"
	f1_local21[0xDBF8778D932185C]:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 350, 801, 1401 )
	f1_local4[0xC9459CE00FB4E0B][0xDBF8778D932185C] = f1_local21.XPBonusList
	f1_local4[0xDBF8778D932185C] = f1_local21[0xDBF8778D932185C]
	f1_local21:addElement( f1_local21[0xDBF8778D932185C] )
	f0_local0( f1_local4, f1_local5, f1_arg1 )
	return f1_local4
end

MenuBuilder.registerType( 0x86DE75AA2943855, TokenMenu )
LockTable( _M )
