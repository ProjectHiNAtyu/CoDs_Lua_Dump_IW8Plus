-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:49
module( ..., package.seeall )
local f0_local0 = function ( f43_arg0, f43_arg1 )
	if LOOT.HideLootBreadcrumbsCondition() then
		return 
	end
	local f43_local0 = f43_arg0.Tabs:GetTabAtIndex( f43_arg1 )
	if not f43_local0:IsEnabled() then
		return 
	end
	local f43_local1 = WEAPON.GetNewWeaponIDsByClass( f43_arg0._controllerIndex, f43_arg0.tabsData[f43_arg1].classRef )
	if f43_local0.NewItemSmallIcon then
		local f43_local2 = f43_local0.NewItemSmallIcon
		local f43_local3 = f43_local2
		f43_local2 = f43_local2.UpdateAlpha
		local f43_local4
		if 0 < #f43_local1 and not f43_arg0._isRestricted then
			f43_local4 = 1
		else
			f43_local4 = 0
		end
		f43_local2( f43_local3, f43_local4, 0 )
	end
end

local f0_local1 = function ( f42_arg0, f42_arg1, f42_arg2 )
	local f42_local0 = {}
	table.insert( f42_local0, f42_arg0._otherSelectedModel )
	table.insert( f42_local0, f42_arg0._equippedWatchModel )
	local f42_local1 = LUI.FlowManager.GetScopedData( f42_arg0 )
	local f42_local2 = nil
	for f42_local3 = f42_arg2 - 1, f42_arg2 + 1, 1 do
		local f42_local6
		if #f42_arg0.currentWeapons < f42_local3 then
			f42_local6 = 1
		elseif f42_local3 == 0 then
			f42_local6 = #f42_arg0.currentWeapons
		end
		local f42_local7 = assert
		local f42_local8
		if 0 >= f42_local6 or f42_local6 > #f42_arg0.currentWeapons then
			f42_local8 = false
		else
			f42_local8 = true
		end
		f42_local7( f42_local8 )
		local f42_local9 = WEAPON.GetWeaponModelNameFromRef( f42_arg0.currentWeapons[f42_local6].ref )
		if not LUI.IsItemInArray( f42_local0, f42_local9 ) then
			if f42_local6 == f42_arg2 then
				f42_local2 = f42_local9
			else
				table.insert( f42_local0, f42_local9 )
			end
		end
	end
	if f42_local2 then
		table.insert( f42_local0, f42_local2 )
	end
	if 0 < #f42_local0 then
		FrontEndScene.RequestWeaponViewModels( f42_local0, f42_arg1 )
	end
end

local f0_local2 = function ( f41_arg0, f41_arg1 )
	for f41_local3, f41_local4 in ipairs( f41_arg0:GetBuiltChildren() ) do
		f41_local4:SetHandleMouse( f41_arg1 )
	end
end

local f0_local3 = function ( f40_arg0, f40_arg1, f40_arg2 )
	local f40_local0 = {}
	for f40_local1 = f40_arg2 - 1, f40_arg2 + 1, 1 do
		if 1 <= f40_local1 and f40_local1 <= #f40_arg0.tabsData and f40_local1 ~= f40_arg2 then
			local f40_local4 = WEAPON.GetWeaponModelNameFromRef( f40_arg0.tabsData[f40_local1].weaponData[1].ref )
			if not LUI.IsItemInArray( f40_local0, f40_local4 ) then
				table.insert( f40_local0, f40_local4 )
			end
		end
	end
	if not LUI.IsItemInArray( f40_local0, f40_arg0._otherSelectedModel ) then
		table.insert( f40_local0, f40_arg0._otherSelectedModel )
		table.insert( f40_local0, f40_arg0._equippedWatchModel )
	end
	if 0 < #f40_local0 then
		FrontEndScene.RequestWeaponViewModels( f40_local0, f40_arg1 )
	end
end

local f0_local4 = function ( f39_arg0, f39_arg1, f39_arg2, f39_arg3 )
	if f39_arg2.isBlueprint then
		return WEAPON.GetWeaponModelName( f39_arg2.weaponData.ref, f39_arg2.weaponData.blueprint, {
			includeAttachments = true,
			controllerIndex = f39_arg1
		} )
	else
		return WEAPON.GetWeaponModelNameFromRef( f39_arg2.weaponData.ref )
	end
end

local f0_local5 = function ( f36_arg0, f36_arg1, f36_arg2, f36_arg3, f36_arg4, f36_arg5 )
	local f36_local0 = f0_local0( f36_arg0, f36_arg1, f36_arg2, f36_arg5.weaponSetups[f36_arg4] )
	if f36_arg0._currentWeaponModel then
		local f36_local1 = function ()
			assert( f36_arg0._nextWeaponModel )
			f36_arg0._currentWeaponModel = f36_arg0._nextWeaponModel
			f36_arg0._nextWeaponModel = nil
			f36_arg0:SetWeaponModel( f36_arg0._currentWeaponModel )
			if f36_arg0.hidden then
				f36_arg0:SetAnchorsAndPosition( 0, 0, 0, 1, _1080p * -302, _1080p * 779, _1080p * 290, _1080p * 740, 0 )
				f36_arg0.hidden = false
			end
		end
		
		f36_arg0._nextWeaponModel = f36_local0
		assert( f36_arg0._nextWeaponModel )
		if Streaming[0xBE636A91711ED30]( {
			f36_arg0._nextWeaponModel
		}, f36_arg1 ) then
			f36_local1()
		else
			local f36_local2 = nil
			local f36_local3 = function ()
				if f36_arg0._nextWeaponModel then
					if Streaming[0xBE636A91711ED30]( {
						f36_arg0._nextWeaponModel
					}, f36_arg0 ) then
						f36_arg0()
					else
						local f37_local0 = f36_arg0:Wait( 100, true )
						f37_local0.onComplete = f36_arg0
						f36_arg0:SetAnchorsAndPosition( 0, 0, 0, 1, _1080p * -302, _1080p * 779, _1080p * 1500, _1080p * 1500, 0 )
						f36_arg0.hidden = true
					end
				end
			end
			
			f36_local3()
		end
	end
	f36_arg3:SetWeaponModel( f36_local0 )
	f36_arg0._currentWeaponModel = f36_local0
	f36_arg0._nextWeaponModel = nil
end

local f0_local6 = function ( f35_arg0, f35_arg1 )
	local f35_local0 = -0.6
	local f35_local1 = 0.6
	local f35_local2 = -0.6
	local f35_local3 = 0.6
	local f35_local4 = 3500
	local f35_local5 = ""
	local f35_local6 = WEAPON.GetWeaponClass( f35_arg1 )
	if f35_arg0.weaponSlot == WEAPON.PrimarySlot then
		f35_local5 = "loadout_showcase_p"
	else
		f35_local5 = WEAPON.GetGunTableSecondPositionScene( f35_arg1 )
		if f35_local5 == "loadout_showcase_s" then
			local f35_local7 = -0.3
			local f35_local8 = 0.3
			local f35_local9 = -0.3
			f35_local3 = 0.3
			f35_local2 = f35_local9
			f35_local1 = f35_local8
			f35_local0 = f35_local7
			f35_local4 = 4500
		end
	end
	if f35_arg0._currentCamera ~= f35_local5 then
		f35_arg0._currentCamera = f35_local5
		Engine[0x685AE31DEDA30A4]( f35_arg0._currentCamera )
	end
	f35_arg0.FrontendCameraMover:SetLimits( f35_local0, f35_local1, f35_local2, f35_local3 )
	f35_arg0.FrontendCameraMover:SetSwayValues( f35_local4, 0.06, 0.1 )
end

local f0_local7 = function ( f34_arg0 )
	local f34_local0
	if f34_arg0 then
		f34_local0 = f34_arg0
	else
		if not f34_arg0.disabled then
			f34_local0 = f34_arg0.weaponData.isUnlocked
			if f34_local0 then
				if f34_arg0.weaponData.isGunsmithDisabled == "1" then
					f34_local0 = false
				else
					f34_local0 = true
				end
			else
				return f34_local0
			end
		end
		f34_local0 = false
	end
	return f34_local0
end

local f0_local8 = function ( f32_arg0, f32_arg1, f32_arg2, f32_arg3, f32_arg4 )
	return function ( f33_arg0, f33_arg1 )
		if CONDITIONS.InFrontend() then
			f32_arg0( f32_arg0, f32_arg0.weaponData.ref )
		end
		local f33_local0 = f32_arg0.weaponData.isUnlocked
		f32_arg0.InfoPanel.ItemName:setText( ToUpperCase( f32_arg0.weaponName ) )
		f32_arg0.InfoPanel:SetEquipped( f32_arg0._isSelected )
		local f33_local1 = LOOT.GetItemID( f32_arg0.weaponData.ref )
		local f33_local2 = false
		if not LOOT.HideLootBreadcrumbsCondition() then
			f33_local2 = Loot[0xB853FAE9166621]( f32_arg0, f33_local1 )
		end
		local f33_local3 = CONDITIONS.AreRestrictionsActive( f32_arg0 )
		if f33_local3 then
			f33_local3 = MatchRules[0x966A6F3A93A1200]( f32_arg0.weaponData.ref )
		end
		local f33_local4 = {
			newDesc = f32_arg0.desc,
			isUnlocked = f33_local0,
			isNew = f33_local2,
			isRestricted = f33_local3
		}
		if not f33_local0 then
			local f33_local5 = WEAPON.GetChallengeUnlockRow( f33_local1 )
			if f33_local5 and 0 <= f33_local5 then
				local f33_local6 = CSV.ReadRow( CSV.gunChallenges, f33_local5 )
				f33_local4.challengeInfo = {
					lootID = f33_local1,
					challengeID = f33_local6.id,
					progress = WEAPON.GetChallengeUnlockProgress( f32_arg0, f33_local6.id )
				}
			else
				f33_local4.unlockText = f32_arg0.weaponData.unlockCriteria
				f33_local4.unlockRank = PROGRESSION.GetUnlockRank( f33_local1 )
			end
		end
		if f32_arg0.isAlreadyEquipped then
			f33_local4.isUnlocked = false
			if CONDITIONS.IsDMZMatch() then
				f33_local4.unlockText = Engine[0xED84C33EC5F01EA]( 0xD9F97FC28F4649F, f32_arg0.weaponSlot and 0xEC8F813D58DEE57 or 0xCB74A303611CCB3 )
			else
				f33_local4.unlockText = Engine[0xED84C33EC5F01EA]( 0xCB5133149EB6E5E, f32_arg0.weaponSlot and 0xEC8F813D58DEE57 or 0xCB74A303611CCB3 )
				f33_local4.isOverkill = true
			end
		end
		f32_arg0.InfoPanel:UpdateDescription( f33_local4 )
		if f32_arg0.HelperBar and CONDITIONS.InFrontend() then
			local f33_local5 = f32_arg0( f32_arg0 )
			f32_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
				button_ref = "button_alt2"
			} )
			if f33_local5 then
				f32_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
					clickable = true,
					priority = 2,
					side = "left",
					ignoreTooltipPrompt = true,
					button_ref = "button_alt2",
					helper_text = Engine[0xED84C33EC5F01EA]( 0x8F98D3C2C8516E ),
					container = f32_arg0.ButtonPromptContainer
				} )
			end
		end
		if f32_arg0.isBlueprint then
			local f33_local5 = f32_arg0.weaponData.blueprint
			if f33_local5 then
				f32_arg0.WeaponAttributes:Setup( f33_local5, f32_arg0 )
			end
		else
			f32_arg0.WeaponAttributes:Setup( {
				weapon = f32_arg0.weaponData.ref
			}, f32_arg0 )
		end
		f32_arg0.currentSelection = {
			weapon = f32_arg0.weaponData.ref,
			blueprint = f32_arg0.weaponData.blueprint
		}
		if CONDITIONS.InFrontend() then
			f32_arg0( f32_arg0, f32_arg0, f32_arg0.gridIndex, f32_arg0 )
			f32_arg0( f32_arg0, f32_arg0, f32_arg0, f32_arg0.weaponModel, f32_arg0.weaponSlot, f32_arg0 )
		end
		local f33_local5 = LUI.FlowManager.GetScopedData( f32_arg0 )
		f33_local5.previousFocusedButton = f32_arg0
		if f32_arg0._isSelected then
			f32_arg0.InfoPanel.NewItemNotification:SetAlpha( 0 )
		else
			f32_arg0.InfoPanel.NewItemNotification:UpdateBreadcrumbByID( f32_arg0, f33_local1 )
		end
		f32_arg0.ComparisonString:setText( Engine[0xED84C33EC5F01EA]( 0x1DCE94FB0D85D3E, WEAPON.GetName( f32_arg0.equippedWeapon ) ) )
		if f32_arg0.BundleUpsellButton and Dvar[0x9E5BE3B4BBA4E0E]( 0x62400405F9F3C0B ) and Dvar[0x9E5BE3B4BBA4E0E]( 0xA051309A7F18047 ) and not CONDITIONS.AreRestrictionsActive( f32_arg0 ) then
			f32_arg0.BundleUpsellButton:SetupUpsellButtonWithLootID( f32_arg0, f33_local1 )
		end
		if f32_arg0.MasterChallenges then
			if GUNSMITH.AreMasterChallengesEnabled( f32_arg0, f32_arg0.weaponData.ref ) then
				f32_arg0.MasterChallenges:SetAlpha( 1 )
				f32_arg0.MasterChallenges:Setup( f32_arg0.weaponData.ref )
			else
				f32_arg0.MasterChallenges:SetAlpha( 0 )
			end
		end
	end
	
end

local f0_local9 = function ( f31_arg0, f31_arg1, f31_arg2 )
	if f31_arg2.equippedWeapon ~= f31_arg0.weaponData.ref then
		f31_arg2:dispatchEventToRoot( {
			name = "send_toast_notification",
			immediate = true,
			options = {
				iconScale = 4.667263495923649E-62,
				displayTime = 3000,
				icon = "cac_equip_fill",
				iconColor = SWATCHES.genericMenu.notificationHighlight,
				header = Engine[0xED84C33EC5F01EA]( 0xE1DD4086AE4AD11 ),
				description = f31_arg0.weaponName,
				type = LUI.ToastManager.NotificationType.WeaponEquipped,
				controllerIndex = f31_arg1
			}
		} )
	end
	if f31_arg0.isBlueprint then
		WEAPON.EquipModification( f31_arg2._loadoutPlayerData.weaponSetups[f31_arg2.weaponSlot], f31_arg0.weaponData.blueprint, f31_arg1 )
	else
		WEAPON.EquipBaseWeapon( f31_arg2._loadoutPlayerData.weaponSetups[f31_arg2.weaponSlot], f31_arg0.weaponData.ref )
		GUNSMITH.EquipBaseWeaponPartsAttachment( f31_arg1, f31_arg2._loadoutPlayerData.weaponSetups[f31_arg2.weaponSlot] )
	end
end

local f0_local10 = function ( f30_arg0, f30_arg1, f30_arg2 )
	f0_local0( f30_arg2, f30_arg1, f30_arg0, f30_arg0._loadoutPlayerData )
	GUNSMITH.OpenGunsmith( f30_arg1, f30_arg0.loadoutIndex, f30_arg0.weaponSlot, true )
end

local f0_local11 = function ( f29_arg0, f29_arg1, f29_arg2 )
	local f29_local0
	if not f29_arg2 then
		f29_local0 = f29_arg2
	else
		f29_local0 = {}
	end
	f29_local0.weaponTable = WEAPON.GenerateWeaponTableFromRef( f29_arg0.currentSelection.weapon )
	LUI.FlowManager.RequestAddMenu( "WeaponPreview", true, f29_arg1, nil, f29_local0, true )
end

local f0_local12 = function ( f25_arg0, f25_arg1, f25_arg2 )
	f25_arg1:SetupContextualMenu()
	f25_arg1:AddContextualMenuAction( {
		button = "button_alt2",
		id = "equipAndGunsmith",
		actionName = Engine[0xED84C33EC5F01EA]( 0x8F98D3C2C8516E ),
		actionFunction = function ()
			f25_arg0( f25_arg0, f25_arg0, f25_arg0 )
		end,
		conditionFunction = function ()
			return f25_arg0( f25_arg0 )
		end
	} )
	if CONDITIONS.InFrontend( self ) and CONDITIONS.IsWeaponPreviewEnabled() then
		f25_arg1:AddContextualMenuAction( {
			id = "previewWeapon",
			button = "button_r3",
			actionName = Engine[0xED84C33EC5F01EA]( 0xCBEAF62674E5E75 ),
			actionFunction = function ()
				f25_arg0( f25_arg0, f25_arg0, nil )
			end
		} )
	end
end

local f0_local13 = function ( f20_arg0, f20_arg1, f20_arg2, f20_arg3, f20_arg4, f20_arg5 )
	assert( f20_arg2.WeaponButton.BlueprintIndicator )
	local f20_local0 = 1 - f20_arg0.weaponSlot
	local f20_local1 = f20_arg5.weaponSetups[f20_arg0.weaponSlot]
	local f20_local2 = f20_arg5.weaponSetups[f20_local0]
	local f20_local3 = f20_local1.weapon:get()
	local f20_local4 = f20_local2.weapon:get()
	local f20_local5 = f20_arg2.WeaponButton
	f20_arg3.unlockRow = 0
	f20_local5.weaponData = f20_arg3
	f20_local5.lootID = LOOT.GetItemID( f20_arg3.ref )
	f20_local5.isNew = f20_local5.NewItemNotification:UpdateBreadcrumbByID( f20_arg1, f20_local5.lootID )
	f20_local5.gridIndex = f20_arg4
	f20_local5.desc = WEAPON.GetDesc( f20_local5.weaponData.ref )
	f20_local5.className = WEAPON.GetWeaponClassName( f20_local5.weaponData.ref )
	local f20_local6 = f20_arg0.blueprintsByWeapon[f20_arg3.ref]
	f20_local5.numBlueprints = f20_arg0.blueprintsByWeapon[f20_arg3.ref] and #f20_arg0.blueprintsByWeapon[f20_arg3.ref] or 0
	local f20_local7 = f20_arg2
	local f20_local8 = f20_arg2.SetBlueprintActive
	local f20_local9 = f20_arg3.ref
	local f20_local10
	if f20_local6 then
		f20_local10 = f20_local6
	else
		f20_local10 = CONDITIONS.AreWeaponVariantsEnabled( f20_arg1 )
	end
	f20_local8( f20_local7, f20_local9, f20_local10, f20_local5.numBlueprints - 1 )
	f20_local8 = f20_local4 == f20_arg3.ref
	local f20_local11
	if f20_local3 ~= f20_arg3.ref then
		f20_local11 = f20_local8
	else
		f20_local11 = true
	end
	f20_local10 = f20_local5
	f20_local7 = f20_local5.SetButtonDisabled
	local f20_local12
	if f20_arg3.isUnlocked then
		f20_local12 = f20_local8
	else
		f20_local12 = true
	end
	f20_local7( f20_local10, f20_local12 )
	if f20_arg2.BlueprintButton then
		f20_arg2.BlueprintButton:SetButtonDisabled( f20_local8 )
	end
	f20_local5.isAlreadyEquipped = f20_local8
	f20_local5:SetSelected( f20_local11 )
	if f20_arg2.BlueprintButton then
		f20_arg2.BlueprintButton.weaponData = f20_arg3
	end
	f20_local7 = WEAPON.GetNewArmoryIDsByWeapon( f20_arg1, f20_local5.weaponData.ref )
	if f20_local7 and f20_arg2.BlueprintButton and f20_arg2.BlueprintButton.NewItemSmallIcon then
		f20_local9 = f20_arg2.BlueprintButton.NewItemSmallIcon
		f20_local12 = f20_local9
		f20_local9 = f20_local9.UpdateAlpha
		local f20_local13
		if 0 < #f20_local7 then
			f20_local13 = 1
		else
			f20_local13 = 0
		end
		f20_local9( f20_local12, f20_local13, 0 )
	end
	if f20_arg2.BlueprintStoreButton then
		f20_local9 = LUI.FlowManager.GetScopedData( f20_arg0 )
		f20_local10 = STORE.AreAnyBundlesNew( f20_arg1, f20_local9.bundleVariants[f20_arg3.ref] )
		f20_local12 = f20_arg2.BlueprintStoreButton.NewItemSmallIcon
		local f20_local14 = f20_local12
		f20_local12 = f20_local12.UpdateAlpha
		local f20_local15
		if f20_local10 then
			f20_local15 = 1
		else
			f20_local15 = 0
		end
		f20_local12( f20_local14, f20_local15, 0 )
	end
	f20_local9 = ""
	if f20_local11 then
		if f20_local3 == f20_arg3.ref then
			f20_local9 = GUNSMITH.GetCustomModName( f20_local1.blueprintName:get() )
			f20_local5.weaponData.blueprint = WEAPON.GenerateWeaponTable( f20_local1 )
		elseif f20_local4 == f20_arg3.ref then
			f20_local9 = GUNSMITH.GetCustomModName( f20_local2.blueprintName:get() )
			f20_local5.weaponData.blueprint = WEAPON.GenerateWeaponTable( f20_local2 )
		end
	end
	f20_local5.isBlueprint = 0 < #f20_local9
	if f20_local5.isBlueprint then
		f20_local5.weaponName = Engine[0xED84C33EC5F01EA]( 0x5E8B9CB71F0B7E, f20_arg3.name, Engine[0x7D3158A9539A355]( f20_local9 ) )
	else
		f20_local5.weaponName = WEAPON.GetName( f20_arg3.ref )
	end
	f20_local5.Text:setText( f20_local5.weaponName )
	f20_local5.ClassName:setText( CONDITIONS.IsGLGunsmithEnabled() and GL_HACK.GetWeaponPlatformName( f20_local5.weaponData.ref ) or WEAPON.GetSubClass( f20_arg3.ref ) )
	f20_local5.WeaponIcon:setImage( RegisterMaterial( WEAPON.GetBWImage( f20_local5.weaponData.ref ) ) )
	if f20_local5.WeaponLevelBar then
		f20_local5.WeaponLevelBar:Setup( f20_arg1, f20_local5.weaponData.ref )
	end
	f20_local5.WeaponLevel:setText( Engine[0xED84C33EC5F01EA]( 0xA158CE9478CBBC1, PROGRESSION.GetWeaponDisplayLevel( f20_arg1, f20_local5.weaponData.ref ) ) )
	f0_local0( f20_arg0, f20_local5, f20_arg1 )
	if not f20_local5.handlersAdded then
		f20_local5:addEventHandler( "button_over", f0_local0( f20_arg0, f20_local5, f20_arg1, f20_arg5, f20_local3 ) )
		f20_local5:addEventHandler( "tab_changed", f0_local0( f20_arg0, f20_local5, f20_arg1, f20_arg5, f20_local3 ) )
		f20_local5:addEventHandler( "button_over_disable", f0_local0( f20_arg0, f20_local5, f20_arg1, f20_arg5, f20_local3 ) )
		f20_local5:addEventHandler( "lose_focus", function ( f24_arg0 )
			if f20_arg0.isNew then
				f20_arg0.NewItemNotification:ClearBreadcrumbByID( f20_arg0, f24_arg0.lootID )
				f20_arg0:UpdateTabBreadcrumb( f20_arg0._currentTabIndex )
			end
			if f20_arg0.isNew and f20_arg0._currentTabIndex ~= f20_arg0._lastTabIndex then
				f20_arg0:UpdateTabBreadcrumb( f20_arg0._lastTabIndex )
				f20_arg0._lastTabIndex = f20_arg0._currentTabIndex
			end
		end )
		f20_local5:addEventHandler( "button_action", function ( f23_arg0 )
			DYN_ATTACHMENT.UpdateLoadoutWeaponStreamedImages( f23_arg0, f20_arg0, DYN_ATTACHMENT.StreamedImageAction.REMOVE )
			f20_arg0( f23_arg0, f20_arg0, f20_arg0, f20_arg0 )
			if CONDITIONS.InGame() then
				Engine[0x6055C55456F05DF]( "equip_item_ingame", 1 )
			end
			DYN_ATTACHMENT.UpdateLoadoutWeaponStreamedImages( f23_arg0, f20_arg0, DYN_ATTACHMENT.StreamedImageAction.ADD )
			LUI.FlowManager.RequestLeaveMenu( f20_arg0, true )
		end )
		f20_local5.handlersAdded = true
		if f20_arg2.BlueprintButton then
			f20_arg2.BlueprintButton:addEventHandler( "button_over", f0_local0( f20_arg0, f20_local5, f20_arg1, f20_arg5, f20_local3 ) )
			f20_arg2.BlueprintButton:addEventHandler( "button_action", function ( f22_arg0 )
				LUI.FlowManager.RequestAddMenu( "WeaponLocker", true, f20_arg0, false, {
					selectingForWeapon = true,
					weaponSlot = f20_arg0.weaponSlot,
					loadoutIndex = f20_arg0.loadoutIndex,
					weaponRef = f22_arg0.weaponData.ref,
					hideTabs = true
				} )
			end )
		end
		if f20_arg2.BlueprintStoreButton then
			f20_arg2.BlueprintStoreButton:addEventHandler( "button_over", f0_local0( f20_arg0, f20_local5, f20_arg1, f20_arg5, f20_local3 ) )
			f20_arg2.BlueprintStoreButton:addEventHandler( "button_action", function ( f21_arg0, f21_arg1 )
				LUI.FlowManager.RequestAddMenu( "WeaponLocker", true, f21_arg1.controller, false, {
					blueprintStore = true,
					weaponRef = f20_arg0.weaponData.ref,
					weaponSlot = f20_arg0.weaponSlot
				}, true )
			end )
		end
	end
	if CONDITIONS.AreRestrictionsActiveAndBlueprintsBlocked( self, f20_arg1 ) then
		if f20_arg2.BlueprintButton then
			f20_arg2.BlueprintButton:SetButtonDisabled( true )
			f20_arg2.BlueprintButton:SetMouseFocusBlocker( true )
			f20_arg2.BlueprintButton:SetAlpha( 0 )
		end
		if f20_arg2.BlueprintStoreButton then
			f20_arg2.BlueprintStoreButton:SetButtonDisabled( true )
			f20_arg2.BlueprintStoreButton:SetMouseFocusBlocker( true )
			f20_arg2.BlueprintStoreButton:SetAlpha( 0 )
		end
		f20_arg0._isRestricted = f20_arg3.isRestricted
		if f20_arg0._isRestricted then
			ACTIONS.AnimateSequence( f20_local5, "ShowRestriction" )
			f20_local5:SetButtonDisabled( true )
		else
			ACTIONS.AnimateSequence( f20_local5, "HideRestriction" )
			f20_local5:SetButtonDisabled( false )
		end
	end
	if f20_arg2.WeaponButton and f20_arg2.WeaponButton.WeaponCooldown then
		f20_arg2.WeaponButton:SetupWeaponCooldown( f20_arg0.blueprintsByWeapon[f20_arg3.ref] )
	end
	return f20_local5
end

local f0_local14 = function ( f19_arg0, f19_arg1, f19_arg2, f19_arg3, f19_arg4 )
	local f19_local0 = f19_arg0.WeaponsGrid:GetFocusPositionIndex()
	f19_arg0.currentWeapons = f19_arg4
	f19_arg0.WeaponsGrid._shouldFocus = false
	f19_arg0.WeaponsGrid:SetNumChildren( #f19_arg4 )
	f19_arg0.WeaponsGrid:RefreshContent()
	local f19_local1 = 0
	for f19_local5, f19_local6 in ipairs( f19_arg4 ) do
		if f19_arg0.equippedWeapon == f19_local6.ref then
			f19_local1 = f19_local5 - 1
			break
		end
	end
	f19_local2 = f19_arg0.WeaponsGrid:GetPositionForIndex( f19_local1, {
		relativePosition = false
	} )
	if f19_local0 ~= f19_local1 then
		f19_arg0.WeaponsGrid:SetDefaultFocus( f19_local2 )
		f19_arg0.WeaponsGrid:SetFocusedPosition( f19_local2, true, false )
		f19_arg0.WeaponsGrid:TouchMouseSetActiveToDefaultFocus( f19_arg1 )
		if LUI.IsLastInputKeyboardMouse( f19_arg1 ) then
			f19_arg0.WeaponsGrid._childInFocus = f19_arg0.WeaponsGrid:GetElementAtPosition( 0, f19_local1 )
			if f19_arg0.WeaponsGrid:IsUsingActiveOnMouseOverBehavior() then
				f19_arg0.WeaponsGrid:TryRequestActiveOnChildFocus( f19_arg0.WeaponsGrid._childInFocus )
			end
		end
	end
	if LUI.IsLastInputGamepad( f19_arg1 ) then
		f19_arg0.WeaponsGrid:SetFocusedPosition( f19_local2, true, false )
	end
	if CONDITIONS.InFrontend() then
		f0_local0( f19_arg0, f19_arg1, f19_arg2, f19_arg3 )
	end
	f19_local3 = f19_arg0.WeaponsGrid:GetActiveElement()
	if f19_local3 then
		f19_local3:processEvent( {
			name = "tab_changed"
		} )
	end
	if f19_local0 == f19_local1 then
		f19_local4 = CoD.SFX.MouseOver
		if f19_local3 and f19_local3.WeaponButton and f19_local3.WeaponButton.gainFocusSFX then
			if LUI.IsLastInputGamepad( f19_arg1 ) then
				f19_local4 = f19_local3.WeaponButton.gainFocusGamepadSFX
			elseif LUI.IsLastInputKeyboardMouse( f19_arg1 ) then
				f19_local4 = f19_local3.WeaponButton.gainFocusSFX
			end
		end
		Engine[0xC4146BA76D0F982]( f19_local4 )
		if f19_local3 and not f19_local3.WeaponButton.disabled then
			ACTIONS.AnimateSequence( f19_local3.WeaponButton, "ProgressBarOver" )
		end
	end
end

local f0_local15 = function ( f14_arg0, f14_arg1, f14_arg2 )
	f14_arg0:AddGamepadEventCallback( "button_secondary", function ( f18_arg0, f18_arg1 )
		ACTIONS.LeaveMenu( f18_arg0 )
	end )
	f14_arg0:AddGamepadEventCallback( "button_alt2", function ( f17_arg0, f17_arg1 )
		local f17_local0 = LUI.FlowManager.GetScopedData( f14_arg0 )
		local f17_local1 = f17_local0.previousFocusedButton
		local f17_local2 = f17_arg1.controller or f14_arg0
		if f14_arg0( f17_local1 ) then
			f14_arg0( f17_arg0, f17_local2, f17_local1 )
		end
	end )
	if CONDITIONS.InFrontend( f14_arg0 ) and CONDITIONS.IsWeaponPreviewEnabled() then
		f14_arg0:addAndCallEventHandler( "update_input_type", function ( f16_arg0, f16_arg1 )
			f16_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
				button_ref = "button_r3"
			} )
			if LUI.IsLastInputGamepad( f16_arg1.controllerIndex ) then
				f16_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
					clickable = true,
					priority = 3,
					side = "left",
					button_ref = "button_r3",
					helper_text = Engine[0xED84C33EC5F01EA]( 0xCBEAF62674E5E75 )
				} )
			else
				f16_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
					clickable = true,
					priority = 3,
					side = "left",
					ignoreTooltipPrompt = true,
					button_ref = "button_r3",
					helper_text = Engine[0xED84C33EC5F01EA]( 0xCBEAF62674E5E75 ),
					container = f16_arg0.ButtonPromptContainer
				} )
			end
		end, {
			controllerIndex = f14_arg1
		} )
		f14_arg0:AddGamepadEventCallback( "button_right_stick", function ( f15_arg0, f15_arg1 )
			f14_arg0( f15_arg0, f15_arg1.controller or f14_arg0, f14_arg0 )
		end )
	end
end

local f0_local16 = function ( f13_arg0, f13_arg1 )
	if CONDITIONS.InFrontend() then
		FrontEndScene.SetExclusiveWeaponModels( {
			FrontEndScene.ClientWeapons.GunTablePrimary,
			FrontEndScene.ClientWeapons.GunTableSecondary,
			FrontEndScene.ClientWeapons.Watch
		} )
		local f13_local0 = MenuBuilder.BuildRegisteredType( "FrontendCameraMover", {
			enableSway = true,
			controllerIndex = f13_arg1
		} )
		f13_local0:SetSwayValues( 2000, 0.1, 0.1 )
		f13_arg0.FrontendCameraMover = f13_local0
		f13_arg0:addElement( f13_local0 )
	end
end

local f0_local17 = function ( f12_arg0, f12_arg1 )
	if IsLanguageChinese() then
		ACTIONS.AnimateSequence( f12_arg0, "CHT" )
	end
	if CONDITIONS.InFrontend() then
		ACTIONS.AnimateSequence( f12_arg0, "Frontend" )
	elseif CONDITIONS.IsSplitscreen( f12_arg0 ) and CONDITIONS.InGame( f12_arg0 ) then
		ACTIONS.AnimateSequence( f12_arg0, "SplitScreen" )
	else
		ACTIONS.AnimateSequence( f12_arg0, "InGame" )
	end
	if f12_arg0.TabBacker then
		ACTIONS.ScaleStretchAnchorFullscreen( f12_arg0.TabBacker )
	end
	if f12_arg0.InGameMenuBackground then
		ACTIONS.ScaleFullscreen( f12_arg0.InGameMenuBackground )
	end
	if CONDITIONS.InGame() then
		ACTIONS.ScaleFullscreen( f12_arg0.Vignette )
	end
end

local f0_local18 = function ( f11_arg0 )
	if Engine[0x2DA54CF5D6B7F02]() then
		if not f11_arg0.loadoutIndex then
			DebugPrint( "WARNING: Missing \"loadoutIndex\" option for WeaponSelect menu. Only OK after a MyChanges." )
			f11_arg0.loadoutIndex = 0
		end
		if not f11_arg0.weaponSlot then
			DebugPrint( "WARNING: Missing \"weaponSlot\" option for WeaponSelect menu. Only OK after a MyChanges." )
			f11_arg0.weaponSlot = 0
		end
	end
end

local f0_local19 = function ( f10_arg0, f10_arg1, f10_arg2 )
	if CONDITIONS.InFrontend() then
		f0_local0( f10_arg0, f10_arg0.equippedWeapon )
		
		local weaponModel = WEAPON.GetWeaponModel( f10_arg1, f10_arg2.weaponSlot )
		f10_arg0:addElement( weaponModel )
		f10_arg0.weaponModel = weaponModel
		
		ClientWeapon[0x59B77D6F41ED417]( FrontEndScene.ClientWeapons.GunTablePrimary, false )
		ClientWeapon[0x59B77D6F41ED417]( FrontEndScene.ClientWeapons.GunTableSecondary, false )
		local f10_local1 = f10_arg0._loadoutPlayerData.weaponSetups[1 - f10_arg0.weaponSlot]
		f10_arg0._otherSelectedModel = WEAPON.GetWeaponModelNameFromPlayerData( f10_local1.weapon:get(), f10_local1, {
			includeCamos = true,
			includeAttachments = true,
			includeStickers = true,
			controllerIndex = f10_arg1
		} )
		f10_arg0._equippedWatchModel = WATCH.GetFullModelName( WATCH.GetEquippedWatch( f10_arg1 ) )
	end
end

local f0_local20 = function ( f3_arg0, f3_arg1, f3_arg2 )
	assert( f3_arg0.Tabs )
	assert( f3_arg0.WeaponsGrid )
	assert( f3_arg0.InfoPanel )
	assert( f3_arg0.WeaponAttributes )
	f3_arg0.loadoutIndex = f3_arg2.loadoutIndex
	f3_arg0.weaponSlot = f3_arg2.weaponSlot
	local f3_local0 = LOADOUT.GetFrontendLoadoutWithShowcase( f3_arg1, f3_arg2.loadoutIndex, f3_arg2.forShowcase )
	f3_arg0._loadoutPlayerData = f3_local0
	f3_arg0.equippedWeapon = f3_local0.weaponSetups[f3_arg0.weaponSlot].weapon:get()
	if CONDITIONS.InFrontend() then
		f0_local0( f3_arg0, f3_arg1 )
		MenuUtils.SetupSceneChangeCallback( f3_arg0, function ()
			local f9_local0 = WATCH.GetEquippedWatch( f3_arg0 )
			local f9_local1 = WEAPON.GetWeaponModel( f3_arg0, FrontEndScene.ClientWeapons.Watch, CSV.weaponOffsets.watchFile )
			f3_arg0:addElement( f9_local1 )
			WATCH.SetWatchModelIfLoaded( f3_arg0, f3_arg0, f9_local1, f9_local0 )
		end )
	end
	f3_arg0._controllerIndex = f3_arg1
	f3_arg0.UpdateTabBreadcrumb = f0_local0
	f0_local0( f3_arg0, f3_arg1 )
	f0_local0( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0.InfoPanel:SetupPanel( f3_arg0.InfoPanel:GetAnchorsAndPosition() )
	if (f3_arg0.BundleUpsellButton or CONDITIONS.IsBlueprintStoreEnabled()) and CONDITIONS.InFrontend() and not DMZ.IsLimitedInventoryEnabled() then
		local f3_local1 = LUI.FlowManager.GetScopedData( f3_arg0 )
		f3_local1.bundleVariants = WEAPON.GetPriorityVariants( f3_arg1, {
			excludeOwned = true,
			useBaseRefKeys = true
		} )
		f3_local1.bundleVariants = WEAPON.GetAllVariantsInStore( f3_arg1, {
			excludeOwned = true,
			useBaseRefKeys = true,
			variantsTable = f3_local1.bundleVariants
		} )
	end
	f0_local0( f3_arg2 )
	assert( f3_arg2.loadoutIndex )
	assert( f3_arg2.weaponSlot )
	local f3_local1 = 0x80F8A4A7F7F35B1
	if f3_arg2.forShowcase then
		f3_local1 = 0xBE320A843F5CC38
	elseif f3_arg2.weaponSlot == WEAPON.PrimarySlot then
		f3_local1 = 0xA08603E720CE45D
	end
	f3_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( f3_local1 ) )
	f0_local0( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0.blueprintsByWeapon = WEAPON.GetModificationsByWeapon( f3_arg1, {} )
	local f3_local2 = PERK.GetPerkPackageData( f3_arg1, f3_arg0._loadoutPlayerData.equippedPerkPackageIndex:get() )
	local f3_local3 = PERK.DoesPerkPackageContainOverkill( f3_local2 )
	local f3_local4
	if f3_arg0.weaponSlot == WEAPON.SecondarySlot then
		f3_local4 = f3_local3
	else
		f3_local4 = false
	end
	local f3_local5 = PERK.DoesPerkPackageContainUnderkill( f3_local2 )
	local f3_local6
	if f3_arg0.weaponSlot == WEAPON.PrimarySlot then
		f3_local6 = f3_local5
	else
		f3_local6 = false
	end
	if not f3_local4 or not WEAPON.PrimarySlot then
		local f3_local7 = f3_arg0.weaponSlot
	end
	if f3_local6 then
		local f3_local7 = 1
	end
	local f3_local8 = CONDITIONS.InGame()
	local f3_local9 = {}
	local f3_local10 = {}
	local f3_local11 = {}
	local f3_local12 = WEAPON.GetWeapons()
	assert( f3_local12 )
	for f3_local21, f3_local22 in pairs( f3_local12 ) do
		local f3_local23 = f3_local22[0x6D696AD252F1CB1]
		local f3_local24 = Engine[0x6093D047200548]( "weapondata:" .. f3_local22[0x6D696AD252F1CB1] )
		local f3_local25 = {
			isRestricted = false,
			isUnlocked = true,
			unlockCriteria = nil,
			ref = f3_local23,
			name = f3_local24[0x4BCADBA8E631B86],
			desc = f3_local24[0x5EAEF67427CA780],
			class = f3_local24[0x11655952FCBAB9F],
			category = f3_local24[0xBD2E7FFB1224E91],
			menuClass = f3_local24[0x56143152458180A],
			displayOrder = f3_local24[0x4FB3C98AEEAB347]
		}
		local f3_local16
		if not DMZ.IsLimitedInventoryEnabled() then
			f3_local16 = f3_local25.displayOrder
			if f3_local16 then
				if 0 > f3_local25.displayOrder then
					f3_local16 = false
				else
					f3_local16 = true
				end
			end
		else
			f3_local16 = false
		end
		local f3_local17 = DMZ.IsLimitedInventoryEnabled()
		if f3_local17 then
			f3_local17 = f3_arg0.blueprintsByWeapon[f3_local23]
		end
		if f3_local16 or f3_local17 then
			local f3_local18 = MatchRules[0x966A6F3A93A1200]( f3_local23 )
			if not f3_local8 or not f3_local18 then
				if not f3_local10[f3_local25.menuClass] then
					f3_local10[f3_local25.menuClass] = {}
				end
				f3_local25.isUnlocked = PROGRESSION.IsUnlocked( f3_arg1, LOOT.itemTypes.WEAPON, f3_local23 )
				local f3_local19
				if f3_local25.isUnlocked or f3_local25.hiddenWhenLocked ~= "1" then
					f3_local19 = false
				else
					f3_local19 = true
				end
				if not f3_local25.isUnlocked then
					local f3_local20 = f3_local9[LOOT.GetItemID( f3_local23 )]
					if f3_local20 then
						f3_local25.unlockCriteria = Engine[0xED84C33EC5F01EA]( 0x86929D0FF4B6624, f3_local20 )
					else
						f3_local25.unlockCriteria = PROGRESSION.GetUnlockText( LOOT.itemTypes.WEAPON, f3_local23 )
					end
				end
				if not f3_local19 then
					f3_local25.isRestricted = f3_local18
					if f3_local18 then
						if not f3_local11[f3_local25.menuClass] then
							f3_local11[f3_local25.menuClass] = {}
						end
						table.insert( f3_local11[f3_local25.menuClass], f3_local25 )
					end
					table.insert( f3_local10[f3_local25.menuClass], f3_local25 )
				end
			end
		end
	end
	for f3_local21, f3_local22 in pairs( f3_local10 ) do
		table.sort( f3_local22, function ( f8_arg0, f8_arg1 )
			return tonumber( f8_arg0.displayOrder ) < tonumber( f8_arg1.displayOrder )
		end )
	end
	for f3_local21, f3_local22 in pairs( f3_local11 ) do
		table.sort( f3_local22, function ( f7_arg0, f7_arg1 )
			return tonumber( f7_arg0.displayOrder ) < tonumber( f7_arg1.displayOrder )
		end )
	end
	for f3_local21, f3_local22 in pairs( f3_local11 ) do
		for f3_local16, f3_local17 in pairs( f3_local22 ) do
			table.insert( f3_local10[f3_local21], f3_local17 )
		end
	end
	f3_arg0.WeaponsGrid:SetRefreshChild( function ( f6_arg0, f6_arg1, f6_arg2 )
		f3_arg0( f3_arg0, f3_arg0, f6_arg0, f3_arg0.currentWeapons[f6_arg2 + 1], f6_arg2 + 1, f3_arg0 )
	end )
	f3_local13 = WEAPON.GetWeaponClassesBundle()
	f3_local14 = {}
	for f3_local15 = 1, #f3_local13, 1 do
		if f3_local13[f3_local15][0x8B6F2336E5960E5] ~= nil then
			local f3_local24 = Engine[0x6093D047200548]( 0x31E89190F5116C0 .. f3_local13[f3_local15][0x8B6F2336E5960E5] )
			local f3_local25 = {
				showInMenus = f3_local24[0xCAAC3893B4B0135],
				slot = f3_local24[0x4F2871862458025],
				ref = f3_local24[0xD49626C84A5882C],
				pluralName = f3_local24[0xAF7FB76CC61B6B8]
			}
			local f3_local16
			if not f3_arg0._forShowcase then
				f3_local16 = WEAPON.AllClassesAllowed()
				if not f3_local16 then
				
				else
					if f3_local25.showInMenus and f3_local16 and f3_local10[f3_local25.ref] then
						if not f3_local8 or not MatchRules[0xB0FA3D79A09CF96]( f3_local25.ref ) then
							local f3_local18 = {
								classRef = f3_local25.ref,
								name = Engine[0xED84C33EC5F01EA]( f3_local25.pluralName ),
								focusFunction = function ( f5_arg0, f5_arg1, f5_arg2 )
									f3_arg0._lastTabIndex = f3_arg0._currentTabIndex
									f3_arg0._currentTabIndex = f5_arg2 + 1
									if not f3_arg0._lastTabIndex then
										f3_arg0._lastTabIndex = f3_arg0._currentTabIndex
									end
									f3_arg0( f3_arg0, f5_arg1, f3_arg0, f3_arg0, f3_arg0[f3_arg0.ref] )
								end,
								weaponData = f3_local10[f3_local25.ref]
							}
							if f3_local25.ref == WEAPON.GetWeaponClass( f3_arg0.equippedWeapon ) then
								f3_local18.hasDefaultFocus = true
							end
							table.insert( f3_local14, f3_local18 )
						end
					end
				end
			end
			f3_local16 = f3_local25.slot == f3_local7 + 1
		end
	end
	f3_arg0.tabsData = f3_local14
	f3_arg0.Tabs:SetTabs( f3_local14 )
	f3_arg0.Tabs:SetAlignment( LUI.Alignment.Left )
	for f3_local15 = 1, #f3_local14, 1 do
		f3_arg0:UpdateTabBreadcrumb( f3_local15 )
	end
	if CONDITIONS.InGame() and not CONDITIONS.IsThirdGameMode() then
		f3_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			clickable = true,
			priority = 5,
			ignoreTooltip = false,
			side = "left",
			kbmTooltipPromptOverload = "button_dismiss_pause_menu",
			button_ref = "button_start",
			helper_text = Engine[0xED84C33EC5F01EA]( 0xEF0F75B0AB08E35 )
		} )
		f3_arg0:AddGamepadEventCallback( "button_start", function ( f4_arg0, f4_arg1 )
			LUI.FlowManager.RequestCloseAllMenus()
		end )
	end
end

local f0_local21 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PostLoadShared = f0_local0
end

function WeaponSelectBase( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "WeaponSelectBase"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "WeaponSelectBase", WeaponSelectBase )
LockTable( _M )
