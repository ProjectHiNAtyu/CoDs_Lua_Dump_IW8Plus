-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
module( ..., package.seeall )
require( "ui.generated.menus.frontend.mp.cas.loadouts.gunsmith.gunsmithbase" )
require( "ui.generated.widgets.frontend.menutitle" )
require( "ui.generated.widgets.frontend.mp.cas.gunsmith.gunsmithbuttongroup" )
require( "ui.generated.widgets.frontend.mp.cas.gunsmith.receiverbutton" )
require( "ui.generated.widgets.frontend.social.socialprofilemenu.socialshowcasegunsmithweapondetails" )
require( "ui.generated.widgets.frontend.social.socialprofilemenu.socialshowcaseweaponmtxlink" )
require( "ui.generated.widgets.buttonhelperbar" )
local f0_local0 = function ( f13_arg0 )
	local f13_local0 = "GLGunsmithButton"
	for f13_local1 = 1, GL_HACK.GetGunsmithMaxCategories() + 1, 1 do
		f13_arg0[f13_local0 .. f13_local1]:SetVisible( false )
	end
end

local f0_local1 = function ( f12_arg0 )
	local f12_local0 = "GLGunsmithButton"
	for f12_local5, f12_local6 in pairs( f12_arg0._usedButtons ) do
		local f12_local7 = f12_arg0[f12_local0 .. f12_local5]
		f12_local7:SetVisible( true )
		local f12_local8 = f12_local7.GunsmithButton
		if f12_local8 then
			f12_local8:SetButtonDisabled( true )
			f12_local8:SetFocusable( false )
			local f12_local4 = f12_local8.DetailButton
			f12_local4.Prompt:setText( "" )
			if not f12_local4._isEquipped then
				f12_local7:SetVisible( false )
			end
			f12_local8:processEvent( {
				name = "lose_focus"
			} )
		else
			f12_local7:SetButtonDisabled( true )
			f12_local7:SetFocusable( false )
		end
		if f12_local7.TuneButton then
			f12_local7.TuneButton:SetVisible( false )
		end
	end
end

local f0_local2 = function ( f11_arg0 )
	local f11_local0 = f11_arg0.weaponSetup
	if not f11_local0 then
		local f11_local1 = f11_arg0.playerData
		if f11_local1 then
			f11_local1 = f11_arg0.playerData.xuid
		end
		if f11_local1 then
			f11_local0 = SHOWCASE.GetWeaponSetupForXuid( f11_local1 )
		end
	end
	return f11_local0
end

local f0_local3 = function ( f10_arg0, f10_arg1, f10_arg2 )
	local f10_local0 = f0_local0( f10_arg2 )
	if f10_local0 then
		local f10_local1 = f10_arg0.MTXLink
		if f10_local1 then
			local f10_local2 = false
			local f10_local3 = STORE.Bundles.GetFirstBundleWithLootId( f10_arg1, f10_local0.lootItemID:get() )
			if f10_local3 then
				f10_local1:SetupButtonForBundle( f10_arg1, f10_local3 )
				f10_local1:SetVisible( true )
				f10_local2 = true
			end
			if not f10_local2 then
				f10_local1:closeTree()
			elseif LUI.IsLastInputGamepad( f10_arg1 ) then
				f10_local1:processEvent( {
					name = "gain_focus",
					controller = f10_arg1
				} )
			end
		end
	end
end

local f0_local4 = function ( f9_arg0, f9_arg1, f9_arg2 )
	f9_arg2.forShowcase = true
	f9_arg0:PostLoadShared( f9_arg1, f9_arg2 )
	f0_local0( f9_arg0 )
	f0_local0( f9_arg0, f9_arg1, f9_arg2 )
end

local f0_local5 = function ( f6_arg0, f6_arg1, f6_arg2 )
	Engine[0x6055C55456F05DF]( "loadout_showcase_entered", 1 )
	f6_arg0.updateClientModels = LUI.UITimer.new( {
		interval = -28,
		event = "updateClientModels"
	} )
	f6_arg0:addElement( f6_arg0.updateClientModels )
	f0_local0( f6_arg0 )
	LUI.DeferredFence.Attach( f6_arg0, f6_arg1, "CLIENT_CONNECT", LUI.DeferredFence.Criticality.LOW, LUI.DeferredFence.BackOutMethod.NONE, function ( f7_arg0, f7_arg1 )
		if f7_arg1.fenceState == LUI.Fence.FenceObjectState.PASSING then
			CLIENT_MODEL.SetAllModelsModifiable( f6_arg0 )
			f6_arg0:registerEventHandler( "updateClientModels", function ( element, event )
				local f8_local0 = ClientModel[0xA988866C889EAAD]()
				if ClientModel[0xA988866C889EAAD]() then
					f7_arg0( f7_arg0, f7_arg0, f7_arg0 )
					f7_arg0:RemoveElement( f7_arg0.updateClientModels )
				end
			end )
		end
	end )
end

local f0_local6 = function ( f5_arg0, f5_arg1, f5_arg2 )
	local f5_local0 = ""
	local f5_local1 = f0_local0( f5_arg2 )
	if f5_local1 then
		f5_local0 = SHOWCASE.GetWeaponNameFromWeaponSetup( f5_local1 )
	end
	f5_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0xC34BE7E6D2FBB5D ) .. " " .. f5_local0 )
end

local f0_local7 = function ( f4_arg0, f4_arg1, f4_arg2 )
	CLIENT_MODEL.ForceEnableMPModelsAsModifiable()
	ACTIONS.ScaleFullscreen( f4_arg0.Darken )
	f0_local0( f4_arg0, f4_arg1, f4_arg2 )
	f0_local0( f4_arg0, f4_arg1, f4_arg2 )
end

local f0_local8 = function ()
	CLIENT_MODEL.UpdateModifiablesByMode()
end

function SocialShowcaseWeaponAttachmentInspect( f1_arg0, f1_arg1 )
	local f1_local0 = MenuBuilder.BuildRegisteredType( "GunsmithBase", f1_arg1 )
	f1_local0.id = "SocialShowcaseWeaponAttachmentInspect"
	local f1_local1
	if f1_arg1 then
		f1_local1 = f1_arg1
	else
		f1_local1 = f1_arg1.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( f1_local0, f1_local1 )
	local f1_local2 = f1_local0
	local Darken = nil
	
	Darken = LUI.UIImage.new()
	Darken.id = "Darken"
	Darken:SetRGBFromTable( SWATCHES.genericMenu.blackBackground, 0 )
	Darken:SetAlpha( 0.5, 0 )
	f1_local0:addElement( Darken )
	f1_local0.Darken = Darken
	
	local MenuTitle = nil
	
	MenuTitle = MenuBuilder.BuildRegisteredType( "MenuTitle", {
		controllerIndex = f1_local1
	} )
	MenuTitle.id = "MenuTitle"
	MenuTitle.MenuTitle:setText( ToUpperCase( "" ), 0 )
	MenuTitle.ModeTitle:setText( "", 0 )
	MenuTitle:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1920, 0, _1080p * 80 )
	f1_local0:addElement( MenuTitle )
	f1_local0.MenuTitle = MenuTitle
	
	local f1_local5 = nil
	if CONDITIONS.IsGLGunsmithEnabled() then
		f1_local5 = MenuBuilder.BuildRegisteredType( "GunsmithButtonGroup", {
			controllerIndex = f1_local1
		} )
		f1_local5.id = "GLGunsmithButton2"
		f1_local5:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 331, _1080p * 563, _1080p * 222, _1080p * 330 )
		f1_local0:addElement( f1_local5 )
		f1_local0.GLGunsmithButton2 = f1_local5
	end
	local f1_local6 = nil
	if CONDITIONS.IsGLGunsmithEnabled() then
		f1_local6 = MenuBuilder.BuildRegisteredType( "GunsmithButtonGroup", {
			controllerIndex = f1_local1
		} )
		f1_local6.id = "GLGunsmithButton3"
		f1_local6:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 733, _1080p * 965, _1080p * 205, _1080p * 313 )
		f1_local0:addElement( f1_local6 )
		f1_local0.GLGunsmithButton3 = f1_local6
	end
	local f1_local7 = nil
	if CONDITIONS.IsGLGunsmithEnabled() then
		f1_local7 = MenuBuilder.BuildRegisteredType( "GunsmithButtonGroup", {
			controllerIndex = f1_local1
		} )
		f1_local7.id = "GLGunsmithButton4"
		f1_local7:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1225, _1080p * 1457, _1080p * 164, _1080p * 272 )
		f1_local0:addElement( f1_local7 )
		f1_local0.GLGunsmithButton4 = f1_local7
	end
	local f1_local8 = nil
	if CONDITIONS.IsGLGunsmithEnabled() then
		f1_local8 = MenuBuilder.BuildRegisteredType( "GunsmithButtonGroup", {
			controllerIndex = f1_local1
		} )
		f1_local8.id = "GLGunsmithButton5"
		f1_local8:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1546, _1080p * 1778, _1080p * 309, _1080p * 417 )
		f1_local0:addElement( f1_local8 )
		f1_local0.GLGunsmithButton5 = f1_local8
	end
	local f1_local9 = nil
	if CONDITIONS.IsGLGunsmithEnabled() then
		f1_local9 = MenuBuilder.BuildRegisteredType( "GunsmithButtonGroup", {
			controllerIndex = f1_local1
		} )
		f1_local9.id = "GLGunsmithButton6"
		f1_local9:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 364, _1080p * 596, _1080p * 562, _1080p * 670 )
		f1_local0:addElement( f1_local9 )
		f1_local0.GLGunsmithButton6 = f1_local9
	end
	local f1_local10 = nil
	if CONDITIONS.IsGLGunsmithEnabled() then
		f1_local10 = MenuBuilder.BuildRegisteredType( "GunsmithButtonGroup", {
			controllerIndex = f1_local1
		} )
		f1_local10.id = "GLGunsmithButton7"
		f1_local10:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 650, _1080p * 882, _1080p * 709.5, _1080p * 817.5 )
		f1_local0:addElement( f1_local10 )
		f1_local0.GLGunsmithButton7 = f1_local10
	end
	local f1_local11 = nil
	if CONDITIONS.IsGLGunsmithEnabled() then
		f1_local11 = MenuBuilder.BuildRegisteredType( "GunsmithButtonGroup", {
			controllerIndex = f1_local1
		} )
		f1_local11.id = "GLGunsmithButton8"
		f1_local11:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 958, _1080p * 1190, _1080p * 837, _1080p * 945 )
		f1_local0:addElement( f1_local11 )
		f1_local0.GLGunsmithButton8 = f1_local11
	end
	local f1_local12 = nil
	if CONDITIONS.IsGLGunsmithEnabled() then
		f1_local12 = MenuBuilder.BuildRegisteredType( "ReceiverButton", {
			controllerIndex = f1_local1
		} )
		f1_local12.id = "GLGunsmithButton9"
		f1_local12:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1341, _1080p * 1601, _1080p * 756.5, _1080p * 876.5 )
		f1_local0:addElement( f1_local12 )
		f1_local0.GLGunsmithButton9 = f1_local12
	end
	local f1_local13 = nil
	if CONDITIONS.IsGLGunsmithEnabled() then
		f1_local13 = MenuBuilder.BuildRegisteredType( "GunsmithButtonGroup", {
			controllerIndex = f1_local1
		} )
		f1_local13.id = "GLGunsmithButton10"
		f1_local13:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1546, _1080p * 1778, _1080p * 601.5, _1080p * 709.5 )
		f1_local0:addElement( f1_local13 )
		f1_local0.GLGunsmithButton10 = f1_local13
	end
	local f1_local14 = nil
	if CONDITIONS.IsGLGunsmithEnabled() then
		f1_local14 = MenuBuilder.BuildRegisteredType( "GunsmithButtonGroup", {
			controllerIndex = f1_local1
		} )
		f1_local14.id = "GLGunsmithButton1"
		f1_local14:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 147, _1080p * 379, _1080p * 394, _1080p * 502 )
		f1_local0:addElement( f1_local14 )
		f1_local0.GLGunsmithButton1 = f1_local14
	end
	local GunsmithWeaponDetails = nil
	
	GunsmithWeaponDetails = MenuBuilder.BuildRegisteredType( "SocialShowcaseGunsmithWeaponDetails", {
		controllerIndex = f1_local1
	} )
	GunsmithWeaponDetails.id = "GunsmithWeaponDetails"
	GunsmithWeaponDetails:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 89, _1080p * 539, _1080p * -33, _1080p * 417 )
	f1_local0:addElement( GunsmithWeaponDetails )
	f1_local0.GunsmithWeaponDetails = GunsmithWeaponDetails
	
	local f1_local16 = nil
	if CONDITIONS.IsGLGunsmithEnabled() then
		f1_local16 = MenuBuilder.BuildRegisteredType( "GunsmithButtonGroup", {
			controllerIndex = f1_local1
		} )
		f1_local16.id = "GLGunsmithButton11"
		f1_local16:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1623, _1080p * 1855, _1080p * 452, _1080p * 560 )
		f1_local0:addElement( f1_local16 )
		f1_local0.GLGunsmithButton11 = f1_local16
	end
	local MTXLink = nil
	
	MTXLink = MenuBuilder.BuildRegisteredType( "SocialShowcaseWeaponMTXLink", {
		controllerIndex = f1_local1
	} )
	MTXLink.id = "MTXLink"
	MTXLink:SetVisible( false )
	MTXLink:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 100, _1080p * 480, _1080p * 763.5, _1080p * 963.5 )
	f1_local0:addElement( MTXLink )
	f1_local0.MTXLink = MTXLink
	
	local HelperBar = nil
	
	HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	HelperBar.id = "HelperBar"
	HelperBar:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * -2, _1080p * 1918, _1080p * 1011, _1080p * 1080 )
	f1_local0:addElement( HelperBar )
	f1_local0.HelperBar = HelperBar
	
	MenuTitle:AddGamepadEventCallback( "button_secondary", function ( f2_arg0, f2_arg1 )
		local f2_local0 = f2_arg1.controller or f1_arg0
		ACTIONS.LeaveMenu( f1_arg0 )
	end )
	f0_local0( f1_local0, f1_local1, f1_arg1 )
	LUI.UIElement.ValidateAnimationState( f1_local0 )
	return f1_local0
end

MenuBuilder.registerType( "SocialShowcaseWeaponAttachmentInspect", SocialShowcaseWeaponAttachmentInspect )
LUI.FlowManager.RegisterStackPopBehaviour( "SocialShowcaseWeaponAttachmentInspect", f0_local8 )
LockTable( _M )
