-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:49
module( ..., package.seeall )
require( "ui.generated.widgets.frontend.lobby.lobbystartbutton" )
require( "ui.generated.widgets.frontend.mp.dmz.dmzmissionsbutton" )
require( "ui.generated.widgets.frontend.lfp.lfpfindpartybutton" )
require( "ui.generated.widgets.frontend.lobby.lobbytokensbutton" )
require( "ui.generated.widgets.frontend.mp.pmc.pmcmissions" )
require( "ui.generated.widgets.frontend.freetrialupsell" )
require( "ui.generated.widgets.dmzupsellbanner" )
require( "ui.generated.widgets.frontend.mp.dmz.dmzfrontendexfilstreakdisplay" )
local f0_local0 = 400
local f0_local1 = {
	FORCE_NO_FILL = 2,
	FORCE_FILL = 1,
	FOLLOW_PARTY_LEADER = 0
}
local f0_local2 = 0x76B37C30033B900
local f0_local3 = 0x5F728A4C267F1EB
local f0_local4 = function ( f15_arg0, f15_arg1 )
	local f15_local0 = PlaylistUtils.GetPublicPlaylistDatasources()
	local f15_local1 = f15_local0:GetCountValue( f15_arg1 ) - 1
	for f15_local2 = 0, f15_local1, 1 do
		local f15_local5 = f15_local0:GetDataSourceAtIndex( f15_local2 )
		if f15_local5.type:GetValue( f15_arg1 ) == PlaylistUtils.CategoryClass.DMZ then
			f15_arg0._categoryDataSource = f15_local5
			return 
		end
	end
end

local f0_local5 = function ( f12_arg0 )
	if not CONDITIONS.IsLFPEnabled() then
		
	else
		
	end
	LFP.PlaylistId.SetValue( f12_arg0._controllerIndex, f12_arg0._playlistData.playlistID )
	LFP.PlaylistCategoryId.SetValue( f12_arg0._controllerIndex, f12_arg0._playlistData.playlistCategory )
	LFP.PlaylistRef.SetValue( f12_arg0._controllerIndex, f12_arg0._playlistData.playlistRef )
	LFP.CheckAndUpdatePartyInfo( f12_arg0._controllerIndex )
	if f12_arg0.LFPFindPartyButton then
		f12_arg0.LFPFindPartyButton:registerEventHandler( "button_action", function ( element, event )
			element:OpenLFPFlyInMenu()
			return true
		end )
	end
	f12_arg0:addEventHandler( LFP.WIDGET_EVENTS.LFP_OPEN_LFP_MENU, function ( f13_arg0, f13_arg1 )
		if f13_arg0.LFPFindPartyButton then
			f13_arg0.LFPFindPartyButton:OpenLFPFlyInMenu()
		end
		return true
	end )
end

local f0_local6 = function ( f11_arg0, f11_arg1 )
	RejoinUtils.CheckAndOpenRejoinWaitPopup( f11_arg1.controller )
end

local f0_local7 = function ( f5_arg0, f5_arg1, f5_arg2 )
	f5_arg0._controllerIndex = f5_arg1
	FrontEndScene.HideAllCharacters()
	if CONDITIONS.UsePerGameTypeLobby() then
		Engine[0x685AE31DEDA30A4]( "squad_lobby_dmz" )
	else
		Engine[0x685AE31DEDA30A4]( "squad_lobby" )
	end
	f0_local0( f5_arg0, f5_arg1 )
	local f5_local0 = LUI.FlowManager.GetScopedData( f5_arg0 )
	if not f5_local0.preMatchMakingNotified then
		Engine[0x6055C55456F05DF]( "pre_match_making", 1 )
		f5_local0.preMatchMakingNotified = true
	end
	OPERATOR.UpdateFavoritePlayerCardCacheLoadout( f5_arg1 )
	f5_arg0.PlayButton:addEventHandler( "button_action", function ( f9_arg0, f9_arg1 )
		MenuUtils.CheckAndRunCodeOfConductFirstMatch( f5_arg0, function ()
			LUI.FlowManager.RequestAddMenu( "DMZLocationSelect", false, f9_arg0, false )
		end )
	end )
	f5_arg0.PlayButton:UpdateModeDetails( {
		image = "icon_mode_dmz",
		name = Engine[0xED84C33EC5F01EA]( 0xEB85280F4E9ACC )
	} )
	if not CONDITIONS.InPrivatePartyAndNotHost() then
		f5_arg0.PlayButton:UpdateHeaderTexts( f0_local0, f0_local0 )
	end
	GL_HACK.SetDMZModeDVar( true )
	f5_arg0.DMZMissions:SetupButton( {
		optOutGradientFocusStyle = true,
		removeTextBacker = true,
		removeEquipBanner = true,
		buttonSize = "Medium",
		imageSize = "1x1",
		buttonData = {}
	} )
	f5_arg0.DMZMissions:SetPrimaryPromptText( 0x7D9DC9E3291E103 )
	f5_arg0.DMZMissions:addEventHandler( "button_action", function ( f8_arg0, f8_arg1 )
		LUI.FlowManager.RequestAddMenu( "MissionCommand", false, f5_arg0, false )
	end )
	local f5_local1 = MenuBuilder.BuildRegisteredType( "FrontendCameraMover", {
		enableSway = true,
		controllerIndex = f5_arg1
	} )
	f5_local1:SetLimits( -2, 2, -2, 2 )
	f5_arg0:addElement( f5_local1 )
	LUI.DeferredFence.Attach( f5_arg0, f5_arg1, "CLIENT_CONNECT", LUI.DeferredFence.Criticality.LOW, LUI.DeferredFence.BackOutMethod.NONE, function ( f7_arg0, f7_arg1 )
		if f7_arg1.fenceState == LUI.Fence.FenceObjectState.PASSING then
			CLIENTCHARACTER.BuildContainerAndWidgets( f5_arg0, f5_arg0, {
				showDetailWidget = true,
				dataSourcePath = Lobby.SquadMembersPath
			} )
		end
	end )
	ClientCharacter[0x813BDB5DDDF1A24]( 0, false )
	f5_arg0.PMCMissions:SetMissionWidgetState( DMZ.MISSION_WIDGET_STATE.LOCALPLAYER, f5_arg1 )
	DMZ.ApplyInventoryUpdates( f5_arg1 )
	AAR.ResetWeaponCaseInformation()
	if GL_HACK.IsNewLFPEnabled() then
		local f5_local2 = DMZ.DefaultPlaylistID()
		if Lobby.AreWePrivatePartyHost() then
			Lobby[0xE6E03A0292DA533]( Lobby.PartyUIData.PLAYLIST_ID, f5_local2 )
		end
		f5_arg0._playlistDataSource = PlaylistUtils.FindPlaylistDataSourceFromID( f5_arg1, f5_local2 )
		f5_arg0._playlistData = PLAY_MENU.GetFeaturedPlaylistData( f5_arg1, f5_arg0._playlistDataSource )
		f0_local0( f5_arg0 )
	else
		local f5_local2 = f5_arg0.LFPFindPartyButton:GetAnchorsAndPosition()
		local f5_local3 = f5_arg0.LobbyTokensButton:getWidth()
		f5_arg0.LobbyTokensButton:SetLeft( f5_local2.left )
		f5_arg0.LobbyTokensButton:SetRight( f5_local2.left + f5_local3 )
		f5_arg0.LFPFindPartyButton:SetVisible( false )
		f5_arg0.LFPFindPartyButton:closeTree()
		f5_arg0.LFPFindPartyButton = nil
	end
	if f5_arg0.FreeTrialUpsell then
		ACTIONS.AnimateSequence( f5_arg0, "FreeGameTrial" )
	end
	ACTIONS.SkipFocusableElement( f5_arg0.ExfilStreakDisplay )
	f5_arg0:addEventHandler( "menu_create", f0_local0 )
	if CONDITIONS.InPrivatePartyAndNotHost() then
		f5_arg0:SubscribeToModel( DataSources.frontEnd.lobby.isPrivatePartyHost:GetModel( f5_arg1 ), function ( f6_arg0, f6_arg1 )
			f6_arg1.PlayButton:EnableStartButton( f5_arg0, f5_arg0 )
		end, true )
	end
end

States = {
	[0xAD14C6E7156B923] = function ( f2_arg0, f2_arg1 )
		local f2_local0 = function ( f4_arg0, f4_arg1 )
			
		end
		
		f2_arg0.PMCMissions:RegisterAnimationSequence( "FreeGameTrial", {
			nil,
			nil,
			nil,
			0,
			nil,
			nil,
			0,
			[1] = TWEEN_PROPERTY.Top,
			[2] = _1080p * 180,
			[4] = TWEEN_PROPERTY.Bottom,
			[5] = _1080p * 680
		} )
		f2_arg0._sequences = {
			DefaultSequence = f2_local0,
			FreeGameTrial = function ( f3_arg0, f3_arg1 )
				f3_arg0.PMCMissions:AnimateSequence( "FreeGameTrial" )
			end
		}
		f2_arg0._sequenceLengths = {
			DefaultSequence = 0,
			FreeGameTrial = 0
		}
	end
}
function DMZPlayMenu( menu, controller )
	local self = LUI.UIHorizontalNavigator.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "DMZPlayMenu"
	self.__states = States
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local LeftVignette = nil
	
	LeftVignette = LUI.UIImage.new()
	LeftVignette.id = "LeftVignette"
	ACTIONS.AspectRatioScaleAdjustment( self, LeftVignette, LAYOUT.AspectRatioImageScalePct.FADEFRAME_LARGE )
	LeftVignette:SetRGBFromInt( 0, 0 )
	LeftVignette:SetAlpha( 0.24, 0 )
	LeftVignette:setImage( RegisterMaterial( 0x595907DB53CDC3A ), 0 )
	LeftVignette:SetBlendMode( BLEND_MODE.multiply )
	LeftVignette:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, 0, _1080p * 1100, _1080p * -540, _1080p * 540 )
	self:addElement( LeftVignette )
	self.LeftVignette = LeftVignette
	
	local RightVignette = nil
	
	RightVignette = LUI.UIImage.new()
	RightVignette.id = "RightVignette"
	ACTIONS.AspectRatioScaleAdjustment( self, RightVignette, LAYOUT.AspectRatioImageScalePct.FADEFRAME_LARGE )
	RightVignette:SetRGBFromInt( 0, 0 )
	RightVignette:SetAlpha( 0.24, 0 )
	RightVignette:setImage( RegisterMaterial( 0x595907DB53CDC3A ), 0 )
	RightVignette:SetUMin( 1, 0 )
	RightVignette:SetUMax( 0, 0 )
	RightVignette:SetBlendMode( BLEND_MODE.multiply )
	RightVignette:SetAnchorsAndPosition( 1, 0, 0.5, 0.5, _1080p * -1100, 0, _1080p * -540, _1080p * 540 )
	self:addElement( RightVignette )
	self.RightVignette = RightVignette
	
	local PlayButton = nil
	
	PlayButton = MenuBuilder.BuildRegisteredType( "LobbyStartButton", {
		controllerIndex = f1_local1
	} )
	PlayButton.id = "PlayButton"
	PlayButton:SetAnchorsAndPosition( 0, 1, 1, 0, _1080p * 88, _1080p * 512, _1080p * -343, _1080p * -139 )
	self:addElement( PlayButton )
	self.PlayButton = PlayButton
	
	local DMZMissions = nil
	
	DMZMissions = MenuBuilder.BuildRegisteredType( "DMZMissionsButton", {
		controllerIndex = f1_local1
	} )
	DMZMissions.id = "DMZMissions"
	DMZMissions:SetAnchorsAndPosition( 0, 1, 1, 0, _1080p * 528, _1080p * 732, _1080p * -343, _1080p * -139 )
	self:addElement( DMZMissions )
	self.DMZMissions = DMZMissions
	
	local f1_local6 = nil
	if CONDITIONS.IsLFPEnabled() then
		f1_local6 = MenuBuilder.BuildRegisteredType( "LFPFindPartyButton", {
			controllerIndex = f1_local1
		} )
		f1_local6.id = "LFPFindPartyButton"
		f1_local6:SetAnchorsAndPosition( 0, 1, 1, 0, _1080p * 748, _1080p * 908, _1080p * -343, _1080p * -139 )
		self:addElement( f1_local6 )
		self.LFPFindPartyButton = f1_local6
	end
	local LobbyTokensButton = nil
	
	LobbyTokensButton = MenuBuilder.BuildRegisteredType( "LobbyTokensButton", {
		controllerIndex = f1_local1
	} )
	LobbyTokensButton.id = "LobbyTokensButton"
	LobbyTokensButton:SetAnchorsAndPosition( 0, 1, 1, 0, _1080p * 923, _1080p * 1331, _1080p * -343, _1080p * -139 )
	self:addElement( LobbyTokensButton )
	self.LobbyTokensButton = LobbyTokensButton
	
	local PMCMissions = nil
	
	PMCMissions = MenuBuilder.BuildRegisteredType( "PMCMissions", {
		controllerIndex = f1_local1
	} )
	PMCMissions.id = "PMCMissions"
	PMCMissions:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -512, _1080p * -88, _1080p * 143, _1080p * 643 )
	self:addElement( PMCMissions )
	self.PMCMissions = PMCMissions
	
	local f1_local9 = nil
	if CONDITIONS.ShouldDisplayFreeGameTrialUpsellWidget() then
		f1_local9 = MenuBuilder.BuildRegisteredType( "FreeTrialUpsell", {
			controllerIndex = f1_local1
		} )
		f1_local9.id = "FreeTrialUpsell"
		f1_local9:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -468, _1080p * -108, _1080p * 95, _1080p * 151 )
		self:addElement( f1_local9 )
		self.FreeTrialUpsell = f1_local9
	end
	local f1_local10 = nil
	if CONDITIONS.ShouldDisplayDMZUpsellBanner() then
		f1_local10 = MenuBuilder.BuildRegisteredType( "DMZUpsellBanner", {
			controllerIndex = f1_local1
		} )
		f1_local10.id = "UpsellButton"
		f1_local10:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 90, _1080p * 426, _1080p * 583, _1080p * 647 )
		self:addElement( f1_local10 )
		self.UpsellButton = f1_local10
	end
	local ExfilStreakDisplay = nil
	
	ExfilStreakDisplay = MenuBuilder.BuildRegisteredType( "DMZFrontendExfilStreakDisplay", {
		controllerIndex = f1_local1
	} )
	ExfilStreakDisplay.id = "ExfilStreakDisplay"
	ExfilStreakDisplay:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 88, _1080p * 268, _1080p * 130, _1080p * 280 )
	self:addElement( ExfilStreakDisplay )
	self.ExfilStreakDisplay = ExfilStreakDisplay
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "DMZPlayMenu", DMZPlayMenu )
LockTable( _M )
