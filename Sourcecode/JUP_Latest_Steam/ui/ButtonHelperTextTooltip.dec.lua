-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:02
LUI.ButtonHelperTextTooltip = LUI.Class( LUI.UIElement )
local f0_local0 = 5
local f0_local1 = 12
local f0_local2 = 200
local f0_local3 = function ( f16_arg0 )
	return f16_arg0.button_ref
end

local f0_local4 = function ( f15_arg0, f15_arg1, f15_arg2 )
	if CONDITIONS.IsMobileOrMobileSim() then
		return 
	end
	local f15_local0 = f15_arg2.keyprompt_text
	if f15_arg2.kbmTooltipPromptOverload then
		f15_local0 = CoD.GetTextForButton( f15_arg2.kbmTooltipPromptOverload )
	end
	if f15_local0 ~= nil and f15_local0 ~= "" then
		local f15_local1 = StripColorMarkers( f15_local0 )
		local f15_local2 = MenuBuilder.BuildRegisteredType( "KBMButtonWithProgress", {
			controllerIndex = f15_arg0,
			finalPromptText = f15_local1
		} )
		f15_local2:SetPromptText( f15_local1, f15_arg2.isHardcodedKey )
		f15_local2.id = f15_local0 .. "KBMButtonPrompt"
		local f15_local3 = f15_local2:GetAnchorsAndPosition()
		local f15_local4 = math.abs( f15_local3.right - f15_local3.left )
		f15_local2:SetPressAnimation( f15_arg2.isHardcodedKey )
		f15_local2.KeyString._scoped = {}
		f15_local2.KeyString._scoped.exclusiveController = f15_arg0
		f15_local2.KeyString._scoped.isControllerExclusive = true
		return f15_local2, f15_local4
	end
	return nil, 0
end

local f0_local5 = function ( f14_arg0, f14_arg1 )
	local f14_local0 = f14_arg1.helper_text
	local f14_local1 = f14_arg1.primaryRef
	if f14_local0 ~= nil and f14_local0 ~= "" then
		local self = LUI.UIText.new()
		local f14_local3 = f0_local0 * (Engine[0x7B17D94988FD5D0]( "TextScaling" ) or 1)
		self:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, 0, f0_local0, -f14_local3, f14_local3 )
		self:SetAlignment( bothButtonRef and LUI.Alignment.Center or LUI.Alignment.Left )
		self:SetVerticalAlignment( LUI.Alignment.Middle )
		self:SetRGB( COLORS.white )
		self:SetFont( FONTS.GetFont( FONTS.SecondaryRegular.File ) )
		self:SetFontSize( 18 * _PT )
		self:SetMinFontSize( 18 * _PT )
		self.id = "promptText" .. f14_local1
		self.ref = f14_local1
		self:setText( f14_local0 )
		self:SetOptOutRightToLeftAlignmentFlip( true )
		self:SetWordWrap( false )
		local f14_local4 = LAYOUT.GetTextWidth( self )
		self:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, 0, f14_local4, -f14_local3, f14_local3 )
		return self, f14_local4
	else
		return nil, 0
	end
end

local f0_local6 = function ( f13_arg0, f13_arg1 )
	if f13_arg1 then
		local self = LUI.UIText.new()
		local f13_local1 = f0_local0 * (Engine[0x7B17D94988FD5D0]( "TextScaling" ) or 1)
		self:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, 0, 0, -f13_local1, f13_local1 )
		self:SetAlignment( LUI.Alignment.Left )
		self:SetVerticalAlignment( LUI.Alignment.Middle )
		self:SetRGB( SWATCHES[0x3E789DB0A12E313][0xF04656ADEBDA1B0], 0 )
		self:SetFont( FONTS.GetFont( FONTS.SecondaryRegular.File ) )
		self:SetFontSize( 18 * _PT )
		self:SetMinFontSize( 18 * _PT )
		self.id = "separator" .. f13_arg0.button_ref
		self:setText( "|" )
		self:SetOptOutRightToLeftAlignmentFlip( true )
		self:SetWordWrap( false )
		self.isSeparator = true
		return self, LAYOUT.GetTextWidth( self )
	else
		return nil, 0
	end
end

local f0_local7 = function ( f12_arg0, f12_arg1, f12_arg2, f12_arg3 )
	local f12_local0 = 2
	if f12_arg2 <= 0 or f12_arg1 <= 0 then
		f12_local0 = 1
	end
	return f12_arg1 + f12_arg2 + f12_arg3 + f0_local0 * f12_local0
end

LUI.ButtonHelperTextTooltip.TooltipButtonPrompt = function ( f11_arg0, f11_arg1, f11_arg2 )
	local f11_local0 = f11_arg1.button_ref
	local f11_local1, f11_local2 = nil
	f11_arg1.primaryRef = f0_local0( f11_arg1 )
	local f11_local3, f11_local4 = f0_local0( f11_arg0, f11_local0, f11_arg1 )
	local f11_local5, f11_local6 = f0_local0( f11_arg0, f11_arg1 )
	local f11_local7, f11_local8 = f0_local0( f11_arg1, f11_arg2 )
	local f11_local9 = f0_local0( f11_arg0, f11_local4, f11_local6, f11_local8 )
	local self = LUI.UIButton.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 0, 0, f11_local9, 0, 0 )
	self.id = f11_arg1.primaryRef
	self.data = f11_arg1
	self.ref = f11_arg1.primaryRef
	self.savedWidth = f11_local9
	local f11_local11 = LUI.UIHorizontalList.new()
	f11_local11:SetAnchorsAndPosition( 0, 1, 0, 0, 0, 0, 0, 0 )
	f11_local11:SetSpacing( f0_local0 )
	f11_local11.id = "helperHorizontalList"
	if f11_local7 then
		f11_local11:addElement( f11_local7 )
	end
	if f11_local3 then
		f11_local11:addElement( f11_local3 )
	end
	if f11_local5 then
		f11_local11:addElement( f11_local5 )
	end
	self:addElement( f11_local11 )
	return self
end

local f0_local8 = function ( f10_arg0 )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, 30 )
	self.id = "buttonHelperListContainer"
	
	local _promptList = LUI.UIHorizontalList.new()
	_promptList:SetLeft( f0_local0 )
	_promptList:SetAlignment( LUI.Alignment.Left )
	_promptList:SetSpacing( f0_local0 )
	_promptList.id = "buttonHelperLeftList"
	_promptList:SetAdjustSizeToContent( true )
	self:addElement( _promptList )
	f10_arg0._promptList = _promptList
	
	return self
end

LUI.ButtonHelperTextTooltip.GetPromptByButtonRef = function ( f9_arg0, f9_arg1 )
	for f9_local3, f9_local4 in ipairs( {
		f9_arg0._promptList
	} ) do
		if f9_local4:getFirstChild() then
			
		end
	end
end

LUI.ButtonHelperTextTooltip.PushTooltipButtonPrompt = function ( f8_arg0, f8_arg1, f8_arg2 )
	local f8_local0 = f0_local0( f8_arg1 )
	if not f8_arg0._promptStack[f8_local0] then
		f8_arg0._promptStack[f8_local0] = {}
	end
	local f8_local1 = #f8_arg0._promptStack[f8_local0]
	if 0 < f8_local1 then
		if LUI.AreTableContentsEqual( f8_arg1, f8_arg0._promptStack[f8_local0][f8_local1] ) then
			return 
		end
		f8_arg0:CloseButtonPrompt( f8_local0 )
	end
	table.insert( f8_arg0._promptStack[f8_local0], f8_arg1 )
	f8_arg0._promptList:addElement( LUI.ButtonHelperTextTooltip.TooltipButtonPrompt( f8_arg0._controllerIndex, f8_arg1, 0 < f8_arg0._buttonPromptCount ) )
	f8_arg0._buttonPromptCount = f8_arg0._buttonPromptCount + 1
end

LUI.ButtonHelperTextTooltip.GetTooltipPromptsTotalWidth = function ( f7_arg0, f7_arg1 )
	local f7_local0
	if not f7_arg1 then
		f7_local0 = f7_arg1
	else
		f7_local0 = false
	end
	local f7_local1 = f7_arg0._promptList:getFirstChild()
	local f7_local2 = 0
	local f7_local3 = 0
	if f7_local1 then
		
	else
		
	end
	local f7_local4 = f7_local3
	if 1 < f7_local3 then
		f7_local4 = f7_local4 + 1
	end
	local f7_local5 = 0
	if not f7_local0 then
		f7_local5 = f0_local0 * f7_local4
	end
	return f7_local2 + f7_local5
end

LUI.ButtonHelperTextTooltip.TryRemoveAllButtonPrompts = function ( f6_arg0 )
	for f6_local3, f6_local4 in pairs( f6_arg0._promptStack ) do
		if 0 < #f6_local4 then
			f6_arg0:RemoveButtonPrompt( f6_local3 )
		end
	end
end

LUI.ButtonHelperTextTooltip.RemoveButtonPrompt = function ( f5_arg0, f5_arg1 )
	f5_arg0:CloseButtonPrompt( f5_arg1 )
	table.remove( f5_arg0._promptStack[f5_arg1] )
end

LUI.ButtonHelperTextTooltip.CloseButtonPrompt = function ( f4_arg0, f4_arg1 )
	local f4_local0 = f4_arg0:GetPromptByButtonRef( f4_arg1 )
	if f4_local0 then
		f4_local0:closeTree()
		f4_arg0._buttonPromptCount = f4_arg0._buttonPromptCount - 1
		if f4_arg0._buttonPromptCount < 0 then
			f4_arg0._buttonPromptCount = 0
		end
	end
end

LUI.ButtonHelperTextTooltip.RefreshButtonHelpers = function ( f3_arg0 )
	for f3_local4, f3_local5 in pairs( f3_arg0._promptStack ) do
		if 0 < #f3_local5 then
			local f3_local3 = f3_local5[#f3_local5]
			f3_arg0:RemoveButtonPrompt( f3_local4 )
			f3_arg0:PushTooltipButtonPrompt( f3_local3 )
		end
	end
end

LUI.ButtonHelperTextTooltip.init = function ( f1_arg0, f1_arg1 )
	f1_arg0._controllerIndex = f1_arg1.controllerIndex
	LUI.ButtonHelperTextTooltip.super.init( f1_arg0 )
	f1_arg0:addElement( f0_local0( f1_arg0 ) )
	f1_arg0._promptStack = {}
	f1_arg0._buttonPromptCount = 0
	f1_arg0:SubscribeToInputTypeModel( f1_arg0._controllerIndex, function ( f2_arg0, f2_arg1 )
		f2_arg1:RefreshButtonHelpers( {
			controllerIndex = f2_arg1._controllerIndex
		} )
	end )
end

