-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
EMERGENCY_MESSAGING = EMERGENCY_MESSAGING or {}
EMERGENCY_MESSAGING.CachedUseRawStringCode = nil
EMERGENCY_MESSAGING.EmergencyCodeDvar = "#x3c2a9b350c61a9750"
EMERGENCY_MESSAGING.EmergencyCodeDvarCache = "#x3eefa0a037e2591dd"
EMERGENCY_MESSAGING.EmergencyMessageDvar = "#x3f6b087639da44734"
EMERGENCY_MESSAGING.EmergencyMessageDvarCache = "#x3840d3cbca090ba01"
EMERGENCY_MESSAGING.GetUseRawMessageCode = function ()
	local f8_local0 = EMERGENCY_MESSAGING.CachedUseRawStringCode
	if not f8_local0 then
		f8_local0 = tonumber( StringTable[0x2DCF0973239E909]( CSV.emergencyMessaging.file, 0, "RawMessageCode", 1 ) )
		EMERGENCY_MESSAGING.CACHED_MAX_RANK = f8_local0
	end
	return f8_local0
end

EMERGENCY_MESSAGING.GetCurrentCode = function ()
	return Dvar[0x22EAAB59AA27E9B]( EMERGENCY_MESSAGING.EmergencyCodeDvar )
end

EMERGENCY_MESSAGING.GetCurrentStringReplacement = function ()
	return Dvar[0x54084D7CA2317BB]( EMERGENCY_MESSAGING.EmergencyMessageDvar )
end

EMERGENCY_MESSAGING.GetCurrentCodeCache = function ()
	return Dvar[0x22EAAB59AA27E9B]( EMERGENCY_MESSAGING.EmergencyCodeDvarCache )
end

EMERGENCY_MESSAGING.GetCurrentStringReplacementCache = function ()
	return Dvar[0x54084D7CA2317BB]( EMERGENCY_MESSAGING.EmergencyMessageDvarCache )
end

EMERGENCY_MESSAGING.IsNewEmergencyMessage = function ()
	local f3_local0
	if EMERGENCY_MESSAGING.GetCurrentCode() == EMERGENCY_MESSAGING.GetCurrentCodeCache() and EMERGENCY_MESSAGING.GetCurrentStringReplacement() == EMERGENCY_MESSAGING.GetCurrentStringReplacementCache() then
		f3_local0 = false
	else
		f3_local0 = true
	end
	return f3_local0
end

EMERGENCY_MESSAGING.UpdateCache = function ()
	local f2_local0 = EMERGENCY_MESSAGING.GetCurrentCode()
	local f2_local1 = EMERGENCY_MESSAGING.GetCurrentStringReplacement()
	Dvar[0x2414681ECAB880F]( EMERGENCY_MESSAGING.EmergencyCodeDvarCache, f2_local0 )
	Dvar[0xE3CB005036E0C0F]( EMERGENCY_MESSAGING.EmergencyMessageDvarCache, f2_local1 )
end

EMERGENCY_MESSAGING.HandleEmergencyMessaging = function ( f1_arg0, f1_arg1 )
	local f1_local0 = EMERGENCY_MESSAGING.GetCurrentCode()
	if 0 < f1_local0 and EMERGENCY_MESSAGING.IsNewEmergencyMessage() then
		local f1_local1 = EMERGENCY_MESSAGING.GetCurrentStringReplacement()
		local f1_local2 = nil
		if f1_local0 == EMERGENCY_MESSAGING.GetUseRawMessageCode() then
			f1_local2 = f1_local1
		else
			f1_local2 = Engine[0xED84C33EC5F01EA]( StringTable[0x2DCF0973239E909]( CSV.emergencyMessaging.file, CSV.emergencyMessaging.cols.code, f1_local0, CSV.emergencyMessaging.cols.ref ), f1_local1 )
		end
		EMERGENCY_MESSAGING.UpdateCache()
		LUI.FlowManager.RequestPopupMenu( nil, "EmergencyMessagePopup", true, f1_arg1, false, {
			message = f1_local2
		} )
	elseif f1_local0 == 0 then
		EMERGENCY_MESSAGING.UpdateCache()
	end
end

