-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
PopupsUtils = PopupsUtils or {}
PopupsUtils.BUTTONS_SPACING = 20 * _1080p
local f0_local0 = 20
local f0_local1 = 10
PopupsUtils.MOBILE_POPUP_LARGE_HEIGHT = 740
PopupsUtils.PopupYesActionAttempts = {
	nil,
	0,
	0,
	0
}
PopupsUtils.typeOfPopup = {
	POPUP_OK = 0,
	POPUP_YESNOCANCEL = 2,
	POPUP_BUTTONS_ONLY = 5,
	POPUP_IMAGE = 4,
	POPUP_MULTIPLE_BUTTONS = 3,
	POPUP_NO_BUTTONS = 6,
	POPUP_YESNO = 1
}
local f0_local2 = hashset( {
	string.lower( Engine[0xED84C33EC5F01EA]( 0x78C2C5FE58603AC ) ),
	string.lower( Engine[0xED84C33EC5F01EA]( 0x3956F54E845F7DE ) ),
	string.lower( Engine[0xED84C33EC5F01EA]( 0x5C021A8F6CC0045 ) ),
	string.lower( Engine[0xED84C33EC5F01EA]( 0x1B666071E863518 ) ),
	string.lower( Engine[0xED84C33EC5F01EA]( 0xC6D515BE207B9A5 ) )
}, string.lower( Engine[0xED84C33EC5F01EA]( 0x4E76830223A336F ) ) )
local f0_local3 = function ( f18_arg0, f18_arg1 )
	f18_arg0.GenericPopup:SetTop( f0_local0, 0 )
end

local f0_local4 = function ( f17_arg0, f17_arg1, f17_arg2 )
	f17_arg0.GenericPopup.Title:setText( f17_arg1 )
	local f17_local0 = f17_arg0.GenericPopup.Title:GetAnchorsAndPosition()
	local f17_local1 = LAYOUT.GetTextWidth( f17_arg0.GenericPopup.Title, f17_arg2.controllerIndex )
end

local f0_local5 = function ( f16_arg0, f16_arg1 )
	local f16_local0 = f16_arg0:GetCurrentFont()
	local f16_local1, f16_local2, f16_local3, f16_local4 = f16_arg0:getLocalRect()
	local f16_local5, f16_local6, f16_local7, f16_local8 = f16_arg0:GetAnchorData()
	local f16_local9 = assert
	local f16_local10
	if (f16_local6 ~= 0 or f16_local8 ~= 1) and (f16_local6 ~= 1 or f16_local8 ~= 0) then
		f16_local10 = false
	else
		f16_local10 = true
	end
	f16_local9( f16_local10 )
	f16_local11, f16_local10, f16_local12, f16_local13 = GetTextDimensions( f16_arg1, f16_local0, math.abs( f16_local2 - f16_local4 ) )
	return f16_local12 - f16_local11
end

local f0_local6 = function ( f15_arg0, f15_arg1 )
	local f15_local0 = f15_arg0.GenericPopup.Message
	local f15_local1, f15_local2, f15_local3, f15_local4 = f15_local0:getLocalRect()
	local f15_local5 = LAYOUT.GetTextHeight( f15_local0, f15_arg1.controllerIndex )
	local f15_local6, f15_local7, f15_local8, f15_local9 = f15_arg0.GenericPopup.ButtonList:getLocalRect()
	if f15_local7 < f15_local2 + f15_local5 then
		f15_arg0.GenericPopup.ButtonList:SetTop( f15_local2 + f15_local5, 0 )
		f15_arg1.messageHeight = f15_local5
	end
end

local f0_local7 = function ( f13_arg0 )
	f13_arg0:AddGamepadEventCallback( "button_secondary", function ( f14_arg0, f14_arg1 )
		ACTIONS.LeaveMenu( f14_arg0 )
	end )
end

local f0_local8 = function ( f12_arg0, f12_arg1 )
	local f12_local0 = 0
	local f12_local1 = f12_arg0.GenericPopup.Title:GetAnchorsAndPosition()
	local f12_local2 = f12_local1.bottom - f12_local1.top
	local f12_local3 = nil
	if f12_arg1.messageHeight ~= 0 then
		f12_local3 = f12_arg1.messageHeight
	else
		local f12_local4 = f12_arg0.GenericPopup.Message:GetAnchorsAndPosition()
		f12_local3 = f12_local4.bottom - f12_local4.top
	end
	f12_local0 = f12_local1.top + f12_local2 + f12_local3 + (f12_arg0.GenericPopup.ButtonList:getHeight() + f12_arg0.GenericPopup.ButtonList:GetSpacing()) * #f12_arg1.buttons
	local f12_local5, f12_local6, f12_local7, f12_local8 = f12_arg0.GenericPopup:getLocalRect()
	local f12_local9 = math.abs( f12_local8 - f12_local6 )
	local f12_local10, f12_local11, f12_local12, f12_local13 = f12_arg0:getLocalRect()
	local f12_local14 = f12_local13 - f12_local11
	if f12_local14 - f12_local9 < f12_local0 then
		local f12_local15 = f12_arg0.GenericPopup:GetAnchorsAndPosition()
		local f12_local16 = (f12_local14 - f12_local0 + f0_local0) / 2
		if 0 > f12_local16 or not f12_local16 then
			f12_local16 = 0
		end
		f12_arg0.GenericPopup:SetAnchorsAndPosition( f12_local15.leftAnchor, f12_local15.rightAnchor, f12_local15.topAnchor, f12_local15.bottomAnchor, f12_local15.left, f12_local15.right, f12_local16, -f12_local16 )
	end
end

local f0_local9 = function ( f7_arg0, f7_arg1 )
	local f7_local0 = f7_arg0.GenericPopup.ButtonList
	if f7_arg1.typeOfPopup == PopupsUtils.typeOfPopup.POPUP_OK then
		local f7_local1 = {}
		local f7_local2 = {
			isPrimaryAction = true
		}
		local f7_local3 = f7_arg1.label
		if not f7_local3 then
			f7_local3 = Engine[0xED84C33EC5F01EA]( 0x3956F54E845F7DE )
		end
		f7_local2.label = f7_local3
		f7_local2.action = f7_arg1.action or function ( f11_arg0 )
			
		end
		
		f7_local2.disabled = f7_arg1.actionDisabled or false
		f7_local1[1] = f7_local2
		f7_arg1.buttons = f7_local1
	elseif f7_arg1.typeOfPopup == PopupsUtils.typeOfPopup.POPUP_YESNO or f7_arg1.typeOfPopup == PopupsUtils.typeOfPopup.POPUP_YESNOCANCEL then
		local f7_local1 = {
			isPrimaryAction = true
		}
		local f7_local2 = f7_arg1.yesLabel
		if not f7_local2 then
			f7_local2 = Engine[0xED84C33EC5F01EA]( 0xD0FAE1882F3E336 )
		end
		f7_local1.label = f7_local2
		f7_local1.action = function ( f10_arg0, f10_arg1 )
			if f7_arg0.yesAction then
				f7_arg0.yesAction( f10_arg0, f10_arg1 )
			end
		end
		
		f7_local1.actionSFX = f7_arg1.actionSFX
		f7_local2 = {}
		local f7_local3 = f7_arg1.noLabel
		if not f7_local3 then
			f7_local3 = Engine[0xED84C33EC5F01EA]( 0x1B666071E863518 )
		end
		f7_local2.label = f7_local3
		f7_local2.action = f7_arg1.noAction or function ( f9_arg0 )
			
		end
		
		if f7_arg1.typeOfPopup == PopupsUtils.typeOfPopup.POPUP_YESNOCANCEL then
			f7_local3 = {}
			local f7_local4 = f7_arg1.cancelLabel
			if not f7_local4 then
				f7_local4 = Engine[0xED84C33EC5F01EA]( 0xDF4B921D6190715 )
			end
			f7_local3.label = f7_local4
			f7_local3.action = f7_arg1.cancelAction or function ( f8_arg0 )
				
			end
			
			f7_arg1.buttons = {
				f7_local3,
				f7_local2,
				f7_local1
			}
		else
			f7_local0 = f7_arg0.GenericPopup.YesNoButtons
			f7_arg1.isYesNoHorizontal = true
			f7_arg1.buttons = {
				f7_local2,
				f7_local1
			}
		end
	elseif f7_arg1.typeOfPopup == PopupsUtils.typeOfPopup.POPUP_NO_BUTTONS then
		f7_arg1.buttons = {}
	end
	PopupsUtils.SetupPopupButtons( f7_local0, f7_arg1 )
end

PopupsUtils.SetupPopupButtons = function ( f5_arg0, f5_arg1 )
	for f5_local3, f5_local4 in ipairs( f5_arg1.buttons ) do
		local f5_local5 = MenuBuilder.BuildRegisteredType( "MobileGenericTextButton", {
			controllerIndex = f5_arg1.controllerIndex
		} )
		f5_local5.Label:SetVisibility( LUI.Visibility.Hidden )
		f5_local5.TextOnly:setText( f5_local4.label )
		f5_local5.TextOnly:SetVisibility( LUI.Visibility.Visible )
		f5_local5:SetButtonDisabled( f5_local4.disabled )
		f5_local5:SetButtonNegative( not f5_local4.isPrimaryAction )
		f5_local5:addEventHandler( "button_action", function ( f6_arg0, f6_arg1 )
			local f6_local0 = false
			if f5_arg0.rateLimited then
				f6_local0 = Popups.IsPopupRateLimited( f5_arg0.rateLimitAttempts, f5_arg0.rateLimitIntervalMS )
			end
			if not f6_local0 and f5_arg0.action ~= nil then
				f5_arg0.action( f6_arg0, f6_arg1.controller, f5_arg0 )
				if f5_arg0.buttonsClosePopup then
					if f5_arg0.isInFlyInPopup and f5_arg0.elementToClose then
						f5_arg0.elementToClose:closeTree()
					else
						ACTIONS.LeaveMenu( f6_arg0 )
					end
				end
			end
		end )
		local f5_local6 = f5_local4.setupFunc
		if f5_local6 then
			f5_local6( f5_local5, f5_arg1.controllerIndex, f5_arg1 )
		end
		f5_local5.id = "button_" .. f5_local3
		f5_arg0:addElement( f5_local5 )
	end
end

PopupsUtils.SetupPopup = function ( f4_arg0, f4_arg1 )
	local f4_local0 = f4_arg1.title
	if not f4_local0 then
		f4_local0 = Engine[0xED84C33EC5F01EA]( 0x1CCA5C59ECE1EA6 )
	end
	local f4_local1 = f4_arg1.message or ""
	f4_arg1.isYesNoHorizontal = false
	f4_arg1.messageHeight = 0
	if IsLanguageArabic() then
		f4_arg0.GenericPopup.Message:setHeight( 36 )
	end
	if f4_arg1.MapLoadErrors ~= nil then
		f0_local0( f4_arg0, f4_arg1 )
	end
	if f4_arg1.buttonsClosePopup == nil then
		f4_arg1.buttonsClosePopup = true
	end
	if f4_arg1.isInFlyInPopup then
		f4_arg1.elementToClose = f4_arg0
	end
	f0_local0( f4_arg0, f4_local0, f4_arg1 )
	f4_arg0.GenericPopup.Message:setText( f4_local1 )
	if f4_arg1.useDevFont then
		f4_arg0.GenericPopup.Message:SetFont( FONTS.GetFont( FONTS.Dev.File ) )
		f4_arg0.GenericPopup.Message:SetRGBFromTable( COLORS.white, 0 )
	end
	if f4_arg1.textAlignment then
		f4_arg0.GenericPopup.Message:SetAlignment( f4_arg1.textAlignment )
	end
	f0_local0( f4_arg0, f4_arg1 )
	f0_local0( f4_arg0, f4_arg1 )
	f0_local0( f4_arg0, f4_arg1 )
end

PopupsUtils.CustomExitFunction = function ( f3_arg0 )
	assert( f3_arg0 )
	if f3_arg0._isInFlyInPopup then
		f3_arg0:closeTree()
	else
		ACTIONS.LeaveMenu( f3_arg0 )
	end
	Engine[0xC4146BA76D0F982]( SOUND_SETS.default.back )
end

PopupsUtils.AbortNavigationAction = function ( f2_arg0, f2_arg1 )
	URI.SendStopSignal( f2_arg1.controller )
	return true
end

PopupsUtils.HasCustomContent = function ( f1_arg0, f1_arg1 )
	return f1_arg1.customContent ~= nil
end

