-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 02-09-2025 10:42
module( ..., package.seeall )
CoD.PrintModuleLoad( _NAME )
local f0_local0 = function ( f4_arg0, f4_arg1, f4_arg2 )
	for f4_local0 = 1, #f4_arg1, 1 do
		local f4_local3 = f4_arg1[f4_local0]
		Playlist.CBHGDIGEI( f4_local3.categoryIndex:GetValue( f4_arg2 ), f4_local3.playlistIndex:GetValue( f4_arg2 ) )
	end
	if PlaylistUtils.AtLeastOneGameModeFiltered( f4_arg0, f4_arg2 ) then
		return 
	end
	local f4_local0 = f4_arg0.playlists
	local f4_local1 = f4_arg0.playlists:GetCountValue( f4_arg2 )
	for f4_local2 = 0, f4_local1, 1 do
		local f4_local5, f4_local6 = PlaylistUtils.GetCategoryAndPlaylistIndex( f4_local0, f4_local2 )
		if f4_local5 and f4_local6 then
			local f4_local7, f4_local8 = Playlist.CGJBAEBBG( f4_local5, f4_local6 )
			if not f4_local8 then
				local f4_local9 = f4_local0:GetDataSourceAtIndex( f4_local2 )
				if f4_local9.maxPlayerSize:GetValue( f4_arg2 ) <= Lobby.MaxPlayerCountForSplitscreen then
					Playlist.CBHGDIGEI( f4_local5, f4_local6 )
					return 
				end
			end
		end
	end
end

MenuBuilder.registerType( "SplitScreenPopups", function ( f1_arg0, f1_arg1 )
	local f1_local0 = {
		title = Engine.CBBHFCGDIC( "MENU/NOTICE" )
	}
	local f1_local1 = f1_arg1.maxPlayerPlaylists
	local f1_local2 = f1_arg1.controllerIndex
	if f1_local1 and 0 < #f1_local1 then
		if #f1_local1 <= 1 then
			f1_local0.message = Engine.CBBHFCGDIC( "LUA_MENU_MP/SPLITSCREEN_SINGLE_UNSUPPORTED_MODE", Engine.JCBDICCAH( f1_local1[1].name:GetValue( f1_local2 ) ) )
		else
			f1_local0.message = Engine.CBBHFCGDIC( "LUA_MENU_MP/SPLITSCREEN_MULTIPLE_UNSUPPORTED_MODES" )
		end
	elseif f1_arg1.isSplitScreenWarning then
		if 1 < Engine.JEDFGECDJ() then
			f1_local0.message = Engine.CBBHFCGDIC( "LUA_MENU_MP/SPLITSCREEN_SINGLE_UNSUPPORTED_MODE", Engine.JCBDICCAH( f1_arg1.text ) )
		else
			f1_local0.message = Engine.CBBHFCGDIC( "LUA_MENU_MP/SPLITSCREEN_SINGLE_UNSUPPORTED_MODE_PARTY", Engine.JCBDICCAH( f1_arg1.text ) )
		end
	end
	f1_local0.controllerIndex = f1_local2
	f1_local0.gameModes = f1_local1
	f1_local0.buttons = {
		{
			label = Engine.CBBHFCGDIC( "MENU/OK" ),
			action = function ()
				LUI.FlowManager.RequestLeaveMenu()
			end
		}
	}
	local f1_local3 = "GenericImagePopup"
	if f1_local1 and 1 < #f1_local1 then
		assert( f1_arg1.acceptFunc )
		table.insert( f1_local0.buttons, 1, {
			label = Engine.CBBHFCGDIC( "LUA_MENU_MP/REMOVE_MODES_CONTINUE" ),
			action = function ( f2_arg0, f2_arg1 )
				f1_arg0( f1_arg0.dataSource, f1_arg0, f1_arg0 )
				f1_arg0.acceptFunc()
			end
		} )
		f1_local3 = "RestrictSplitScreenPopup"
	end
	local f1_local4 = MenuBuilder.BuildRegisteredType( f1_local3, f1_local0 )
	f1_local4.isSignInMenu = true
	return f1_local4
end )
LockTable( _M )
