-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 02-09-2025 10:42
module( ..., package.seeall )
local f0_local0 = function ( f17_arg0, f17_arg1, f17_arg2 )
	local f17_local0 = LUI.IsLastInputGamepad( f17_arg1 )
	local f17_local1 = f17_arg0
	local f17_local2 = f17_arg0.SetKeepSelectionWhileInDeadZone
	local f17_local3
	if f17_local0 then
		f17_local3 = f17_local0
	else
		f17_local3 = not f17_arg2
	end
	f17_local2( f17_local1, f17_local3 )
	f17_arg0:SetUseBothThumbsticks( true )
	f17_arg0:SetActive( true )
	f17_arg0:SetAlpha( 1 )
	f17_local2 = f17_arg0.CancelLabel
	f17_local1 = f17_local2
	f17_local2 = f17_local2.setText
	if f17_local0 then
		f17_local3 = Engine.CBBHFCGDIC( "LUA_MENU/BACK" )
		if not f17_local3 then
		
		else
			f17_local2( f17_local1, f17_local3 )
			f17_local2 = f17_arg0.CommandsLabel
			f17_local1 = f17_local2
			f17_local2 = f17_local2.setText
			if f17_local0 then
				f17_local3 = Engine.CBBHFCGDIC( "LUA_MENU/ROTATE" )
				if not f17_local3 then
				
				else
					f17_local2( f17_local1, f17_local3 )
					f17_local2 = f17_arg0.CommandsButton
					f17_local1 = f17_local2
					f17_local2 = f17_local2.setText
					if f17_local0 then
						f17_local3 = Engine.CBBHFCGDIC( "LUA_MENU/RADIAL_ROTATE_BUTTON" )
						if not f17_local3 then
						
						else
							f17_local2( f17_local1, f17_local3 )
							f17_local2 = f17_arg0.CancelMouseButton
							f17_local1 = f17_local2
							f17_local2 = f17_local2.setText
							if f17_local0 then
								f17_local3 = Engine.CBBHFCGDIC( "LUA_MENU/PAD_SECONDARY_BUTTON" )
								if not f17_local3 then
								
								else
									f17_local2( f17_local1, f17_local3 )
									f17_local2 = f17_arg0.SelectButtonLabel
									f17_local1 = f17_local2
									f17_local2 = f17_local2.setText
									if f17_local0 then
										f17_local3 = Engine.CBBHFCGDIC( "LUA_MENU/SELECT" )
										if not f17_local3 then
										
										else
											f17_local2( f17_local1, f17_local3 )
											f17_local2 = f17_arg0.SelectButtonPrompt
											f17_local1 = f17_local2
											f17_local2 = f17_local2.setText
											if f17_local0 then
												f17_local3 = Engine.CBBHFCGDIC( "LUA_MENU/PAD_PRIMARY_BUTTON" )
												if not f17_local3 then
												
												else
													f17_local2( f17_local1, f17_local3 )
													if f17_arg2 then
														f17_arg0:SetAllowNavigation( false )
													end
													f17_local2 = Engine.BBDCAFEGDJ() == 1
													local f17_local4 = f17_arg0.Hint
													f17_local3 = f17_local4
													f17_local4 = f17_local4.setText
													local f17_local5
													if f17_local2 then
														f17_local5 = Engine.CBBHFCGDIC( "LUA_MENU/GESTURE_HINT" )
														if not f17_local5 then
														
														else
															f17_local4( f17_local3, f17_local5 )
														end
													end
													f17_local5 = Engine.CBBHFCGDIC( "LUA_MENU/GESTURE_HINT_KBM" )
												end
											end
											f17_local3 = ""
										end
									end
									f17_local3 = ""
								end
							end
							f17_local3 = ""
						end
					end
					f17_local3 = ""
				end
			end
			f17_local3 = ""
		end
	end
	f17_local3 = ""
end

local f0_local1 = function ( f16_arg0, f16_arg1 )
	local f16_local0 = f16_arg0.RadialMenu:GetSelectedWidget()
	f16_local0.Icon:setImage( f16_arg0.RadialButton.Image:GetImage() )
	ACTIONS.AnimateSequence( f16_local0, "Available" )
	ACTIONS.AnimateSequence( f16_local0, "Pulse" )
	local f16_local1 = f16_arg0:Wait( 400 )
	f16_local1.onComplete = f16_arg1
end

local f0_local2 = function ( f11_arg0, f11_arg1, f11_arg2 )
	f11_arg0.BindButton = LUI.UIBindButton.new()
	f11_arg0.BindButton.id = "BindButton"
	if not f11_arg2.previewMode then
		local f11_local0 = function ( f14_arg0, f14_arg1 )
			if f11_arg0._hasEquipped then
				
			else
				
			end
			local f14_local0 = f11_arg0.RadialMenu:GetSelectedIndex()
			if GESTURES.IsGimmeSlotActive( f14_local0, f11_arg0 ) then
				
			else
				
			end
			if f14_arg1.qualifier == "keyboard" and f14_local0 < 0 then
				
			else
				
			end
			f11_arg0.BindButton:registerEventHandler( "button_secondary", nil )
			f11_arg0.menu:EquipSelection( f11_arg0, f14_local0 )
			f11_arg0._hasEquipped = true
			f11_arg0( f11_arg0, function ()
				f14_arg0.menu:ClosePopupAction( f14_arg0 )
				ACTIONS.LeaveMenu( f14_arg0 )
			end )
		end
		
		f11_arg0.RadialMenu:addEventHandler( "leftmousedown", f11_local0 )
		f11_arg0.BindButton:addEventHandler( "button_primary", f11_local0 )
	else
		f11_arg0.BindButton:addEventHandler( "button_alt1", function ()
			f11_arg0.menu:ClosePopupPreviewAction()
			ACTIONS.LeaveMenu( f11_arg0 )
		end )
	end
	f11_arg0.BindButton:addEventHandler( "button_secondary", function ()
		if not f11_arg0.previewMode then
			f11_arg0.menu:ClosePopupAction( f11_arg0 )
		else
			f11_arg0.menu:ClosePopupPreviewAction()
		end
		ACTIONS.LeaveMenu( f11_arg0 )
	end )
	f11_arg0:addElement( f11_arg0.BindButton )
end

local f0_local3 = function ( f7_arg0, f7_arg1, f7_arg2 )
	f7_arg0.RadialButton = MenuBuilder.BuildRegisteredType( "RadialCustomizationButton", {
		controllerIndex = f7_arg1
	} )
	f7_arg0.RadialButton.id = "FocusedButton"
	ACTIONS.AnimateSequence( f7_arg0.RadialButton, "ButtonOver" )
	f7_arg0.RadialButton.Image:setImage( f7_arg2.button.Image:GetImage() )
	f7_arg0.RadialButton:SetQuality( f7_arg2.button.rarity )
	f7_arg0.RadialButton:SetSelected( f7_arg2.button.isSelected )
	f7_arg0.RadialButton:SetFavorite( f7_arg2.button.isFavorite )
	f7_arg0:addElement( f7_arg0.RadialButton )
	local f7_local0 = f7_arg2.button:GetCurrentAnchorsAndPositions()
	local f7_local1 = function ()
		f7_arg0.RadialButton:SetAnchorsAndPosition( f7_arg0.leftAnchor, f7_arg0.rightAnchor, f7_arg0.topAnchor, f7_arg0.bottomAnchor, f7_arg0.left + f7_arg0.gridLeft, f7_arg0.right + f7_arg0.gridLeft, f7_arg0.top + f7_arg0.gridTop, f7_arg0.bottom + f7_arg0.gridTop )
	end
	
	f7_local1()
	f7_local1 = 0
	local f7_local2 = 10
	local f7_local3 = nil
	local f7_local4 = function ( f8_arg0 )
		local f8_local0 = f7_arg0.button:GetCurrentAnchorsAndPositions()
		if f7_arg0 == f8_local0 then
			f7_arg0 = f7_arg0 + 1
		else
			f7_arg0 = f8_local0
		end
		if f7_arg0 <= f7_arg0 then
			f8_arg0 = false
		end
		f7_arg0()
		if f8_arg0 then
			local f8_local1 = f7_arg0:Wait( 16 )
			f8_local1.onComplete = function ()
				f8_arg0( f8_arg0 )
			end
			
		end
	end
	
	f7_local4( true )
end

local f0_local4 = function ( f2_arg0, f2_arg1, f2_arg2 )
	assert( f2_arg0.RadialMenu )
	assert( f2_arg2.menu )
	f0_local0( f2_arg0, f2_arg1, f2_arg2 )
	if f2_arg2.button and f2_arg2.gridLeft and f2_arg2.gridTop then
		f0_local0( f2_arg0, f2_arg1, f2_arg2 )
	end
	local f2_local0 = function ( f6_arg0, f6_arg1 )
		if LUI.IsLastInputKeyboardMouse( f6_arg1.controllerIndex ) then
			f6_arg0.CommandsLabel:setText( "" )
			f6_arg0.CommandsButton:setText( "" )
			f6_arg0:SetKeepSelectionWhileInDeadZone( false )
		else
			f6_arg0.CommandsLabel:setText( Engine.CBBHFCGDIC( "LUA_MENU/ROTATE" ) )
			f6_arg0.CommandsButton:setText( Engine.CBBHFCGDIC( "LUA_MENU/RADIAL_ROTATE_BUTTON" ) )
			f6_arg0:SetKeepSelectionWhileInDeadZone( true )
		end
		f2_arg0( f6_arg0, f2_arg0, f2_arg0.previewMode )
	end
	
	if f2_arg2.previewMode then
		f2_arg0:SetHandleMouse( true )
		f2_arg0:addEventHandler( "rightmousedown", function ( f5_arg0, f5_arg1 )
			f2_arg0.menu:ClosePopupPreviewAction()
			ACTIONS.LeaveMenu( f5_arg0 )
		end )
		ACTIONS.AnimateSequence( f2_arg0.RadialMenu, "PreviewMode" )
	end
	f2_arg0:registerEventHandler( "opening_quick_access_menu", function ( element, event )
		ACTIONS.LeaveMenu( element )
	end )
	f2_arg0.RadialMenu:addAndCallEventHandler( "update_input_type", f2_local0, {
		controllerIndex = f2_arg1
	} )
	f2_arg0.RadialMenu:SetDisableInfiniteOuterRadius( true )
	ACTIONS.ScaleFullscreen( f2_arg0.Darkener )
	f2_arg0.Darkener:SetHandleMouse( true )
	f2_arg0.Darkener:addEventHandler( "leftmouseup", function ( f3_arg0, f3_arg1 )
		ACTIONS.LeaveMenu( f2_arg0 )
	end )
end

function RadialCustomizationPopup( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "RadialCustomizationPopup"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local Darkener = nil
	
	Darkener = LUI.UIImage.new()
	Darkener.id = "Darkener"
	Darkener:SetRGBFromTable( SWATCHES.genericMenu.blackBackground, 0 )
	Darkener:SetAlpha( 0.5, 0 )
	Darkener:SetAnchorsAndPosition( 0, 0, 0, 0, _1080p * 2, 0, 0, 0 )
	self:addElement( Darkener )
	self.Darkener = Darkener
	
	local RadialMenu = nil
	
	RadialMenu = MenuBuilder.BuildRegisteredType( "RadialMenu", {
		controllerIndex = f1_local1
	} )
	RadialMenu.id = "RadialMenu"
	RadialMenu:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1264, _1080p * 1776, _1080p * 284, _1080p * 796 )
	self:addElement( RadialMenu )
	self.RadialMenu = RadialMenu
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "RadialCustomizationPopup", RadialCustomizationPopup )
LockTable( _M )
