-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
LUI.UIMouseCursor = LUI.Class( LUI.UIElement )
LUI.UIMouseCursor.priority = 1000
LUI.UIMouseCursor.mouseTimeout = 3000
LUI.UIMouseCursor.cinematicHideDelay = 2000
LUI.UIMouseCursor.invalidMousePos = -1000
local f0_local0 = function ( f5_arg0, f5_arg1 )
	f5_arg0.lastMoveTime = Engine[0x6991337AE950F99]()
	if f5_arg0.showCursor == 0 then
		f5_arg0:SetAlpha( 1 )
		f5_arg0.showCursor = 1
		if Engine[0x3ECA657EE4C6C9]() then
			Engine[0x5F965FF5540EAC8]( true )
		end
	end
	if f5_arg0.hiddenInCinematic then
		f5_arg0:SetAlpha( f5_arg0.showCursor )
		f5_arg0.hiddenInCinematic = false
		if Engine[0x3ECA657EE4C6C9]() then
			Engine[0x5F965FF5540EAC8]( f5_arg0.showCursor == 1 )
		end
	end
end

local f0_local1 = function ( f4_arg0, f4_arg1 )
	local f4_local0 = f4_arg0.lastMoveTime + LUI.UIMouseCursor.cinematicHideDelay <= Engine[0x6991337AE950F99]()
	local f4_local1 = Engine[0xB63308D00984B0A]()
	if f4_local1 and not f4_arg0.hiddenInCinematic and f4_local0 then
		f4_arg0:SetAlpha( 0 )
		f4_arg0.hiddenInCinematic = true
		if Engine[0x3ECA657EE4C6C9]() then
			Engine[0x5F965FF5540EAC8]( false )
		end
	elseif (not f4_local0 or not f4_local1) and f4_arg0.hiddenInCinematic then
		f4_arg0:SetAlpha( f4_arg0.showCursor )
		f4_arg0.hiddenInCinematic = false
		if Engine[0x3ECA657EE4C6C9]() then
			Engine[0x5F965FF5540EAC8]( f4_arg0.showCursor == 1 )
		end
	end
end

MouseCursorType = {
	CURSOR_TYPE_ARROW_NORMAL = {
		id = 0,
		material = "ui_cursor_arrow_normal"
	},
	CURSOR_TYPE_ARROW_ACTIVE = {
		id = 1,
		material = "ui_cursor_arrow_active"
	},
	CURSOR_TYPE_ARROW_UNAVAILABLE = {
		id = 2
	},
	CURSOR_TYPE_ARROW_INACTIVE = {
		id = 3
	},
	CURSOR_TYPE_ARROW_CONTEXTUAL = {
		id = 4,
		material = "ui_cursor_arrow_contextual"
	},
	CURSOR_TYPE_ROTATION_NORMAL = {
		id = 5,
		material = "ui_cursor_arrow_rotation"
	},
	CURSOR_TYPE_ROTATION_ACTIVE = {
		id = 6
	},
	CURSOR_TYPE_ROTATION_UNAVAILABLE = {
		id = 7
	},
	CURSOR_TYPE_ARROW_PANFOURWAYS = {
		id = 8,
		material = "ui_cursor_arrow_panfourways"
	},
	CURSOR_TYPE_IBEAM = {
		id = 9,
		material = "ui_cursor_i_beam"
	},
	CURSOR_TYPE_WIN_ARROW = {
		id = 10
	},
	CURSOR_TYPE_WIN_HAND = {
		id = 11
	},
	CURSOR_TYPE_WIN_IBEAM = {
		id = 12
	}
}
LUI.UIMouseCursor.UpdateMouseCursor = function ( f3_arg0, f3_arg1 )
	local f3_local0 = MouseCursorType.CURSOR_TYPE_ARROW_NORMAL
	if f3_arg0 then
		local f3_local1 = LUI.MouseCursorContextualMenuLayer.GetLayer()
		local f3_local2
		if f3_local1 then
			f3_local2 = f3_local1
		else
			f3_local2 = f3_local1:AnyValidContextualDataConditions( f3_arg0, f3_arg1, nil )
		end
		if f3_local2 then
			f3_local0 = MouseCursorType.CURSOR_TYPE_ARROW_CONTEXTUAL
		elseif f3_arg0._mouseCursorTypeOverride then
			f3_local0 = f3_arg0._mouseCursorTypeOverride
		elseif f3_arg0.handleMouseButton then
			f3_local0 = MouseCursorType.CURSOR_TYPE_ARROW_ACTIVE
		end
	end
	local f3_local1 = Engine[0xEE6F69FEA944B13]()
	f3_local1 = f3_local1.cursor
	if f3_local1 then
		f3_local1._controllerIndex = f3_arg1
		f3_local1:SetMouseCursorController( f3_arg1 )
		if f3_local1._currentCursorType ~= f3_local0 then
			f3_local1._currentCursorType = f3_local0
			local f3_local2 = false
			if Engine[0x2DA54CF5D6B7F02]() and Dvar[0x9E5BE3B4BBA4E0E]( "#x3dafb4189ae0531fc" ) then
				f3_local2 = true
			end
			if Engine[0x3ECA657EE4C6C9]() and not f3_local2 then
				Engine[0x4D9D0802A4A54A3]( f3_local0.id )
			else
				local f3_local3 = RegisterMaterial
				local f3_local4 = f3_local0.material
				if not f3_local4 then
					f3_local4 = MouseCursorType.CURSOR_TYPE_ARROW_NORMAL.material
				end
				f3_local3 = f3_local3( f3_local4 )
				assert( f3_local3, "Cursor material " .. tostring( f3_local0.material ) .. " invalid or not loaded" )
				f3_local1:setImage( f3_local3 )
			end
		end
	end
end

LUI.UIMouseCursor.init = function ( f1_arg0, f1_arg1 )
	LUI.UIMouseCursor.super.init( f1_arg0 )
	f1_arg0.id = "UIMouseCursor"
	f1_arg0:SetupMouseCursor()
	f1_arg0:SetAnchorsAndPosition( 0, 1, 0, 1, -32, 32, -32, 32 )
	f1_arg0:setImage( RegisterMaterial( "ui_cursor_arrow_normal" ) )
	f1_arg0:setPriority( LUI.UIMouseCursor.priority )
	f1_arg0.lastMoveTime = Engine[0x6991337AE950F99]()
	f1_arg0.showCursor = 0
	f1_arg0.hiddenInCinematic = false
	f1_arg0:SetAlpha( 0 )
	f1_arg0:registerEventHandler( "mousemove", f0_local0 )
	f1_arg0:registerEventHandler( "mousedown", f0_local0 )
	local self = LUI.UITimer.new( {
		interval = 1000,
		broadcastToRoot = false,
		disposable = false,
		event = {
			name = "update_mouse"
		},
		eventTarget = f1_arg0
	} )
	self.id = "updateTimer"
	f1_arg0:addElement( self )
	f1_arg0:registerEventHandler( "update_mouse", f0_local0 )
	f1_arg0:registerEventHandler( "update_input_type", function ( element, event )
		if LUI.IsLastInputGamepad( event.controllerIndex ) and element.showCursor == 1 then
			element:SetAlpha( 0, 400 )
			element.showCursor = 0
			if Engine[0x3ECA657EE4C6C9]() then
				Engine[0x5F965FF5540EAC8]( false )
			end
		end
	end )
end

