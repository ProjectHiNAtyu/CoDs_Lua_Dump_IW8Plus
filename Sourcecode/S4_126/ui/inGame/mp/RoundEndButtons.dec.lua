-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
module( ..., package.seeall )
local f0_local0 = 400 * _1080p
local f0_local1 = 56 * _1080p
local f0_local2 = function ()
	return CONDITIONS.IsThirdGameMode() and DataSources.inGame.CP.iw8.roundEnd.roundEndTitle or DataSources.inGame.MP.roundEnd.roundEndTitle
end

local f0_local3 = function ( f10_arg0, f10_arg1, f10_arg2 )
	local f10_local0 = MenuBuilder.BuildRegisteredType( "GenericButton", {
		controllerIndex = f10_arg0
	} )
	f10_local0.Text:setText( f10_arg1 )
	f10_local0.Text:SetAlignment( LUI.Alignment.Center )
	f10_local0:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -f0_local0 / 2, f0_local0 / 2, -f0_local0 / 2, f0_local0 / 2 )
	f10_local0:registerEventHandler( "button_action", f10_arg2 )
	return f10_local0
end

local f0_local4 = function ( f5_arg0, f5_arg1 )
	assert( CONDITIONS.IsArenaEvoGameType() )
	f5_arg0:Wait( 0, true )
	f5_arg0.Buttons:closeChildren()
	f5_arg0.Buttons:SetVisibility( LUI.Visibility.Hidden )
	f5_arg0.HelperBar:SetVisibility( LUI.Visibility.Hidden )
	local f5_local0 = false
	local f5_local1 = false
	local f5_local2 = false
	if not DataSources.inGame.MP.match.matchOver:GetValue( f5_arg1 ) then
		f5_local0 = true
		f5_local1 = CONDITIONS.IsPlayAgainEnabled()
		f5_local2 = true
	end
	if f5_local0 then
		f5_arg0.Buttons:addElement( f0_local0( f5_arg1, Engine[0xED84C33EC5F01EA]( "MENU/SPECTATE" ), function ( f9_arg0, f9_arg1 )
			Engine[0x6055C55456F05DF]( "arena_evo_eliminated_enter_spectate", 1 )
		end ) )
	end
	if f5_local1 then
		f5_arg0.Buttons:addElement( f0_local0( f5_arg1, Engine[0xED84C33EC5F01EA]( "PLATFORM_UI/EOG_SUMMARY_PLAY_AGAIN" ), function ( f8_arg0, f8_arg1 )
			BR.PlayAgainAction( f5_arg0, f8_arg1.controller )
			if CONDITIONS.IsArenaEvoGameType() then
				Dvar[0x2414681ECAB880F]( "#x31fe043ca748125eb", AAR.MagmaSummaryState.ARENA_EVO_SUMMARY_READY )
			end
		end ) )
	end
	if f5_local2 then
		f5_arg0.Buttons:addElement( f0_local0( f5_arg1, Engine[0xED84C33EC5F01EA]( "LUA_MENU/END_GAME" ), function ( f7_arg0, f7_arg1 )
			if CONDITIONS.IsMatchMakingGame( f5_arg0 ) then
				ACTIONS.OpenPopupMenu( f5_arg0, "LeaveGamePopup", true, f7_arg1.controller )
			else
				ACTIONS.OpenPopupMenu( f5_arg0, "EndGamePopup", true, f7_arg1.controller )
			end
		end ) )
	end
	if f5_local0 or f5_local2 then
		local f5_local3 = 2000
		local f5_local4 = 700
		local f5_local5 = ARENA_EVO.GetPlayerStatsForRoundEndHUD( f5_arg1 )
		local f5_local6
		if f5_local5 then
			f5_local6 = #f5_local5
			if not f5_local6 then
			
			else
				local f5_local7 = f5_arg0:Wait( f5_local3 + f5_local6 * f5_local4 )
				f5_local7.onComplete = function ()
					f5_arg0.Buttons:SetVisibility( LUI.Visibility.Visible )
					f5_arg0.HelperBar:SetVisibility( LUI.Visibility.Visible )
				end
				
			end
		end
		f5_local6 = 0
	end
end

local f0_local5 = function ( f4_arg0, f4_arg1 )
	f4_arg0.HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f4_arg1
	} )
	f4_arg0.HelperBar.id = "HelperBar"
	f4_arg0.HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
	f4_arg0.HelperBar:setPriority( 10 )
	f4_arg0:addElement( f4_arg0.HelperBar )
	f4_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_primary",
		helper_text = Engine[0xED84C33EC5F01EA]( "LUA_MENU/SELECT" )
	} )
	f4_arg0.HelperBar:SetVisibility( LUI.Visibility.Hidden )
end

local f0_local6 = function ( f2_arg0, f2_arg1, f2_arg2 )
	if CONDITIONS.IsArenaEvoGameType() and not IsCodcaster() then
		f0_local0( f2_arg0, f2_arg1 )
		f2_arg0.Buttons:SetAlignment( LUI.Alignment.Center )
		f2_arg0.Buttons:SetSpacing( 20 * _1080p )
		local f2_local0 = f2_arg0
		local f2_local1 = f2_arg0.SubscribeToModel
		local f2_local2 = f0_local0()
		f2_local1( f2_local0, f2_local2:GetModel( f2_arg1 ), function ()
			f2_arg0( f2_arg0, f2_arg0 )
		end )
	end
end

function RoundEndButtons( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "RoundEndButtons"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local Buttons = nil
	
	Buttons = LUI.UIHorizontalList.new( {
		controller = f1_local1,
		direction = LUI.DIRECTION.horizontal
	} )
	Buttons.id = "Buttons"
	Buttons:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -830, _1080p * 862, _1080p * 356, _1080p * 439 )
	self:addElement( Buttons )
	self.Buttons = Buttons
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "RoundEndButtons", RoundEndButtons )
LockTable( _M )
