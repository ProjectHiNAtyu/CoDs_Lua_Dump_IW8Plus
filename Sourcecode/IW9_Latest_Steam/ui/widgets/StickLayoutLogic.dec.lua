-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:49
local f0_local0 = "options.stickLayout"
local f0_local1 = {}
local f0_local2 = function ( f8_arg0, f8_arg1 )
	assert( 0 < #f8_arg0 )
	for f8_local3, f8_local4 in ipairs( f8_arg0 ) do
		if f8_arg1 == f8_local4 then
			return f8_local3
		end
	end
	assert( false, "Entry not found" )
end

LUI.AddStickLayoutLogic = function ( f1_arg0, f1_arg1, f1_arg2 )
	f0_local0 = {}
	local f1_local0 = StringTable[0xFD4E49A34DD43AE]( CSV.stickLayouts.file )
	local f1_local1 = CSV.ReadRow( CSV.stickLayouts, 0 )
	local f1_local2 = LUI.DataSourceInGlobalModel.new( f0_local0 .. ".oldColor", GetIntForColor( SWATCHES.layouts.oldLayout ) )
	local f1_local3 = LUI.DataSourceInGlobalModel.new( f0_local0 .. ".newColor", GetIntForColor( SWATCHES.layouts.newLayout ) )
	local f1_local4 = function ( f7_arg0, f7_arg1 )
		local f7_local0 = f7_arg0[f7_arg1]
		local f7_local1 = f1_arg0[f7_arg1]
		return REG4 and f1_arg0 or f1_arg0
	end
	
	local f1_local5 = function ( f6_arg0, f6_arg1 )
		local f6_local0 = CSV.ReadRow( CSV.stickLayouts, f6_arg0 )
		local f6_local1 = f1_arg0 .. "." .. f6_arg0
		local f6_local2 = {
			ref = LUI.DataSourceInGlobalModel.new( f6_local1 .. ".ref", f6_local0.cfg ),
			name = LUI.DataSourceInGlobalModel.new( f6_local1 .. ".name", Engine[0xED84C33EC5F01EA]( f6_local0.name ) )
		}
		local f6_local3 = {
			up = LUI.DataSourceInGlobalModel.new( f6_local1 .. ".left.up", Engine[0xED84C33EC5F01EA]( f6_local0.leftUp ) ),
			upColor = f1_arg0( f6_local0, "leftUp" ),
			down = LUI.DataSourceInGlobalModel.new( f6_local1 .. ".left.down", Engine[0xED84C33EC5F01EA]( f6_local0.leftDown ) ),
			downColor = f1_arg0( f6_local0, "leftDown" ),
			left = LUI.DataSourceInGlobalModel.new( f6_local1 .. ".left.left", Engine[0xED84C33EC5F01EA]( f6_local0.leftLeft ) ),
			leftColor = f1_arg0( f6_local0, "leftLeft" ),
			right = LUI.DataSourceInGlobalModel.new( f6_local1 .. ".left.right", Engine[0xED84C33EC5F01EA]( f6_local0.leftRight ) ),
			rightColor = f1_arg0( f6_local0, "leftRight" ),
			button = LUI.DataSourceInGlobalModel.new( f6_local1 .. ".left.button", Engine[0xED84C33EC5F01EA]( f6_local0.leftButton ) ),
			buttonColor = f1_arg0( f6_local0, "leftButton" )
		}
		local f6_local4 = LUI.DataSourceInGlobalModel.new
		local f6_local5 = f6_local1 .. ".left.showLeftStick"
		local f6_local6
		if f6_local0.leftUp == f1_arg0.leftUp and f6_local0.leftDown == f1_arg0.leftDown and f6_local0.leftLeft == f1_arg0.leftLeft and f6_local0.leftRight == f1_arg0.leftRight and f6_local0.leftButton == f1_arg0.leftButton then
			f6_local6 = false
		else
			f6_local6 = true
		end
		f6_local3.showLeftStick = f6_local4( f6_local5, f6_local6 )
		f6_local2.left = f6_local3
		f6_local3 = {
			up = LUI.DataSourceInGlobalModel.new( f6_local1 .. ".right.up", Engine[0xED84C33EC5F01EA]( f6_local0.rightUp ) ),
			upColor = f1_arg0( f6_local0, "rightUp" ),
			down = LUI.DataSourceInGlobalModel.new( f6_local1 .. ".right.down", Engine[0xED84C33EC5F01EA]( f6_local0.rightDown ) ),
			downColor = f1_arg0( f6_local0, "rightDown" ),
			left = LUI.DataSourceInGlobalModel.new( f6_local1 .. ".right.left", Engine[0xED84C33EC5F01EA]( f6_local0.rightLeft ) ),
			leftColor = f1_arg0( f6_local0, "rightLeft" ),
			right = LUI.DataSourceInGlobalModel.new( f6_local1 .. ".right.right", Engine[0xED84C33EC5F01EA]( f6_local0.rightRight ) ),
			rightColor = f1_arg0( f6_local0, "rightRight" ),
			button = LUI.DataSourceInGlobalModel.new( f6_local1 .. ".right.button", Engine[0xED84C33EC5F01EA]( f6_local0.rightButton ) ),
			buttonColor = f1_arg0( f6_local0, "rightButton" )
		}
		f6_local4 = LUI.DataSourceInGlobalModel.new
		f6_local5 = f6_local1 .. ".right.showRightStick"
		if f6_local0.rightUp == f1_arg0.rightUp and f6_local0.rightDown == f1_arg0.rightDown and f6_local0.rightLeft == f1_arg0.rightLeft and f6_local0.rightRight == f1_arg0.rightRight and f6_local0.rightButton == f1_arg0.rightButton then
			f6_local6 = false
		else
			f6_local6 = true
		end
		f6_local3.showRightStick = f6_local4( f6_local5, f6_local6 )
		f6_local2.right = f6_local3
		return f6_local2
	end
	
	local f1_local6 = function ( f5_arg0, f5_arg1 )
		f1_arg0:SetDataSource( f1_arg0[f5_arg0], f5_arg1 )
		Engine[0xB02A448C4130634]( f1_arg0._dataSource.ref:GetValue( f5_arg1 ), f5_arg1 )
	end
	
	local f1_local7 = function ( f4_arg0, f4_arg1 )
		f1_arg0:SetDataSource( f1_arg0[f4_arg0], f4_arg1 )
	end
	
	local f1_local8 = nil
	local f1_local9 = #OPTIONS.GetStickLayoutLabels() - 1
	for f1_local10 = 0, f1_local9, 1 do
		table.insert( f0_local0, f1_local5( f1_local10, f1_arg1 ) )
	end
	f1_arg0:SetDataSource( f0_local0[f0_local0( OPTIONS.GetStickLayoutLabels(), Engine[0xED84C33EC5F01EA]( OPTIONS.stickLayoutStrings[Engine[0x7B17D94988FD5D0]( "gpadSticksConfig", f1_arg1 )] ) )], f1_arg1 )
	f1_arg0:addEventHandler( "stickLayout_updated", function ( f3_arg0, f3_arg1 )
		f1_arg0( f3_arg1.index, f3_arg1.controller )
	end )
	f1_arg0:addEventHandler( "stickLayout_updatedVisual", function ( f2_arg0, f2_arg1 )
		f1_arg0( f2_arg1.index, f2_arg1.controller )
	end )
end

