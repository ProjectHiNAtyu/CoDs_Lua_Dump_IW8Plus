-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:04
module( ..., package.seeall )
require( "ui.generated.widgets.buttonhelperbar" )
require( "ui.generated.widgets.frontend.seasonalevent.seasonaleventsrewardcardbutton" )
require( "ui.generated.widgets.scrollbar.horizontalminimalscrollbar" )
require( "ui.generated.widgets.frontend.seasonalevent.seasonaleventsquickplaybutton" )
require( "ui.generated.widgets.frontend.events.seasonaleventsprogressbarlarge" )
require( "ui.generated.widgets.frontend.seasonalevent.seasonaleventsmasteryrewardbutton" )
require( "ui.generated.widgets.frontend.events.viewfeaturedeventbundlesbutton" )
require( "ui.generated.widgets.frontend.seasonalevent.seasonaleventstitleanddescription" )
require( "ui.generated.widgets.frontend.seasonalevent.seasonaleventstimer" )
require( "ui.generated.widgets.frontend.seasonalevent.seasonaleventsfeaturedcontentpanelsmall" )
require( "ui.generated.menus.frontend.seasonalevent.seasonaleventspreviewmasteryreward" )
local f0_local0 = function ( f21_arg0, f21_arg1 )
	local f21_local0 = 1
	for f21_local1 = 1, #f21_arg1.lootRewards, 1 do
		if 1 < f21_local1 then
			if f21_arg1.lootRewards[f21_local1 - 1].unlocked and not f21_arg1.lootRewards[f21_local1].unlocked then
				f21_local0 = f21_local1
			end
		end
	end
	return f21_local0
end

local f0_local1 = function ( f19_arg0, f19_arg1, f19_arg2 )
	f19_arg0.ProgressBar:SetNumChildren( #f19_arg1.lootRewards + 1 )
	f19_arg0.ProgressBar:SetMask( f19_arg0.ProgressBarMask )
	f19_arg0.ProgressBar:SetPivotPosition( 0.5 )
	f19_arg0.ProgressBar:SetRefreshChild( function ( f20_arg0, f20_arg1, f20_arg2 )
		local f20_local0 = f19_arg0.ProgressBar:GetContentIndex( f20_arg1, f20_arg2 ) + 1
		local f20_local1, f20_local2, f20_local3 = nil
		if 1 < f20_local0 then
			f20_local1 = f19_arg0.lootRewards[f20_local0 - 1]
			if 2 < f20_local0 then
				f20_local3 = f19_arg0.lootRewards[f20_local0 - 2]
				f20_local2 = (f19_arg0.currentXP - f20_local3.requiredXP) / (f20_local1.requiredXP - f20_local3.requiredXP)
			else
				f20_local2 = f19_arg0.currentXP / f20_local1.requiredXP
			end
		end
		f20_arg0:SetupPip( f20_local1, f19_arg0, f20_local0, f19_arg0, f20_local2, false )
	end )
end

local f0_local2 = function ( f17_arg0, f17_arg1, f17_arg2, f17_arg3 )
	f17_arg0.RewardsGrid:SetNumChildren( #f17_arg1.lootRewards + 1 )
	f17_arg0.RewardsGrid:SetMask( f17_arg0.GridMask )
	f17_arg0.RewardsGrid:SetPrioritizePeeking( true )
	f17_arg0.RewardsGrid:EnableFocusOnScroll( true )
	f17_arg0.RewardsGrid:SetPivotPosition( 0.5 )
	f17_arg0.RewardsGrid:SetRefreshChild( function ( f18_arg0, f18_arg1, f18_arg2 )
		local f18_local0 = f17_arg0.RewardsGrid:GetContentIndex( f18_arg1, f18_arg2 ) + 1
		local f18_local1 = f17_arg0.lootRewards[f18_local0 - 1]
		local f18_local2
		if f18_local0 - 1 == #f17_arg0.lootRewards then
			f18_local2 = SEASONAL_EVENT.GetMasteryImage( f17_arg0, f18_local1.id )
		else
			f18_local2 = false
		end
		f18_arg0:SetupButton( f17_arg0, f18_local0, f18_local1, f17_arg0, f18_local2 )
	end )
end

local f0_local3 = function ( f11_arg0, f11_arg1 )
	local f11_local0 = SEASONAL_EVENT.GetEventHighlightColor()
	if f11_arg1.general.title and f11_arg1.general.description then
		f11_arg0.SeasonalEventsTitleAndDescription:SetTitleAndDescription( f11_arg1.general )
	end
	local f11_local1, f11_local2 = SEASONAL_EVENT.GetNextPeriod( f11_arg1.timeData )
	f11_arg0.EventTimer:SetTimer( {
		shortText = true,
		endTime = f11_local1,
		descriptionString = f11_local2,
		period = f11_arg1.derived.period,
		layout = SEASONAL_EVENT.TIMER_LAYOUT.HORIZONTAL
	} )
	if not (0 < #STORE.UI.GetEventBundles( f11_arg0._controllerIndex )) then
		f11_arg0.ViewFeaturedEventBundlesButton:closeTree()
		f11_arg0.ViewFeaturedEventBundlesButton = nil
	end
	local f11_local3 = Challenge.GetFieldRepChallengeDataByRef( f11_arg1.challenges.challengeReference, f11_arg0._controllerIndex )
	f11_arg0.RewardsGrid:SetLinkedGrid( f11_arg0.ProgressBar )
	f11_arg0:SetupRewardsCarousel( f11_local3, f11_local0, f11_arg1 )
	f11_arg0:SetupProgressBar( f11_local3, f11_local0 )
	f11_arg0.RewardsGrid:SetPositionInternal( {
		y = 0,
		x = f0_local0( f11_arg0, f11_local3 )
	}, true, true, false, false, false )
	f11_arg0.ProgressBar:DisableMouseWheel( true )
	local f11_local4, f11_local5 = SEASONAL_EVENT.HasFeaturedContent( f11_arg1 )
	if f11_local5 and f11_local4 then
		f11_arg0.FeaturedContentPanel:PopulatePanel( f11_arg1.featuredData )
		f11_arg0.FeaturedContentPanel:SetVisible( true )
	end
	f11_arg0.UltimateRewardButton:SetupPointsUltimateReward( f11_local3, {
		eventData = f11_arg1,
		color = f11_local0
	} )
	f11_arg0.UltimateRewardButton:addEventHandler( "gain_focus", function ( f16_arg0, f16_arg1 )
		f11_arg0.RewardsGrid:processEvent( {
			name = "request_active"
		} )
	end )
	SEASONAL_EVENT.SetupMenuButtonPrompt( f11_arg0 )
	f11_arg0:SetupNavigation()
	if CONDITIONS.IsChallengeTrackingEnabled() then
		local f11_local6 = Challenge.GetAEKindID( TrackedChallenges.Kind.FIELD_REP )
		TrackedChallenges.InitializeTrackingForMenu( f11_arg0, f11_arg0._controllerIndex, f11_arg0.HelperBar, f11_local6, function ( f15_arg0 )
			return f11_arg0.id
		end )
		TrackedChallenges.RefreshButtonHelperBarPrompts( f11_arg0, f11_arg0._controllerIndex, f11_arg0.HelperBar, f11_local3.id, f11_local6 )
		f11_arg0:registerEventHandler( "restore_focus", function ( element, event )
			TrackedChallenges.RefreshButtonHelperBarPrompts( f11_arg0, f11_arg0._controllerIndex, f11_arg0.HelperBar, f11_arg0.id, f11_arg0 )
		end )
		f11_arg0:registerEventHandler( "update_tracked_prompt", function ( element, event )
			if event.showPrompt then
				TrackedChallenges.RefreshButtonHelperBarPrompts( f11_arg0, f11_arg0._controllerIndex, f11_arg0.HelperBar, f11_arg0.id, f11_arg0 )
				TrackedChallenges.BlockTrackedInputs( f11_arg0, false )
			else
				TrackedChallenges.ClearButtonHelperBarPrompts( f11_arg0, f11_arg0._controllerIndex, f11_arg0.HelperBar )
				TrackedChallenges.BlockTrackedInputs( f11_arg0, true )
			end
			return true
		end )
	end
	f11_arg0:OnMenuAccessibleCallback( function ( f12_arg0, f12_arg1 )
		f12_arg0:processEvent( {
			name = "on_menu_accessible"
		} )
	end )
end

local f0_local4 = function ( f10_arg0 )
	f10_arg0.RewardsGrid.navigation = {}
	f10_arg0.RewardsGrid.navigation.right = f10_arg0.UltimateRewardButton
	f10_arg0.UltimateRewardButton.navigation = {}
	f10_arg0.UltimateRewardButton.navigation.left = f10_arg0.RewardsGrid
end

local f0_local5 = function ( f6_arg0, f6_arg1, f6_arg2 )
	f6_arg0._controllerIndex = f6_arg1
	f6_arg0.SetupRewardsCarousel = f0_local0
	f6_arg0.SetupTemplateBundles = f0_local0
	f6_arg0.SetupProgressBar = f0_local0
	f6_arg0.SetupNavigation = f0_local0
	f6_arg0:SetupTemplateBundles( SEASONAL_EVENT.GetCurrentSeasonalEventData() )
	f6_arg0:SubscribeToInputTypeModel( f6_arg0._controllerIndex, function ( f9_arg0, f9_arg1 )
		if LUI.IsLastInputKeyboardNavigation( f9_arg1._controllerIndex ) or LUI.IsLastInputGamepad( f9_arg1._controllerIndex ) then
			ACTIONS.GainFocus( f9_arg1, "RewardsGrid", f9_arg1._controllerIndex )
		end
	end )
	SEASONAL_EVENT.TryShowOnboardingPopups( f6_arg0, f6_arg1, function ( f8_arg0 )
		if not Onboarding.SeasonalEvents.FieldRep.WasCompleted( f8_arg0, f6_arg0 ) and not f6_arg0.firstTimeUserExperience.skipTooltips then
			TIP.CreateTips( Onboarding.Tips.SeasonalEvents.FIELDREP( f6_arg0, f8_arg0 ) )
		end
	end )
	if CONDITIONS.IsChallengeTrackingFlyInEnabled() then
		f6_arg0:AddGamepadEventCallback( "button_select", function ( f7_arg0, f7_arg1 )
			TrackedChallenges.OpenChallengesTrackedFlyIn( f6_arg0 )
		end )
		f6_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			button_ref = "button_select",
			side = "left",
			helper_text = Engine[0xED84C33EC5F01EA]( TrackedChallenges.TRACKED_CHALLENGES_TITLE ),
			helper_definition = Engine[0xED84C33EC5F01EA]( TrackedChallenges.TRACKED_CHALLENGES_TOOLTIP )
		} )
	end
end

function SeasonalEventsMenuContentTemplatePoints( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = MenuBuilder
	local f1_local2 = f1_local0.UIElement.new()
	f1_local2:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920, 0, 1080 )
	f1_local2.id = "SeasonalEventsMenuContentTemplatePoints"
	local f1_local3
	if f1_arg1 then
		f1_local3 = f1_arg1
	else
		f1_local3 = f1_arg1.controllerIndex
	end
	f1_local3 = f1_local0.ValidateControllerIndex( f1_local2, f1_local3 )
	local f1_local4 = nil
	f1_local4 = f1_local1.BuildRegisteredType( 0x8608EBDC1924A2E, {
		controllerIndex = f1_local3
	} )
	f1_local4[0x8B72E07B55C3AC0] = "HelperBar"
	f1_local4:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, -115, -51 )
	f1_local2:addElement( f1_local4 )
	f1_local2[0x4C364FC7CAA3C92] = f1_local4
	local f1_local5 = nil
	f1_local5 = f1_local0.UIImage.new()
	f1_local5[0x8B72E07B55C3AC0] = "GridMask"
	f1_local5:setImage( RegisterMaterial( 0x44D639ABE11669B ), 0 )
	f1_local5:SetBlendMode( BLEND_MODE.addWithAlpha )
	f1_local5:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -960, 555, -191, 351 )
	f1_local2:addElement( f1_local5 )
	f1_local2[0xA695CD9470626ED] = f1_local5
	local f1_local6 = nil
	f1_local6 = f1_local0.UIPeekingGrid.new( {
		maxVisibleColumns = 5,
		maxVisibleRows = 1,
		spacingX = 32,
		rowHeight = 420,
		wrapY = false,
		columnWidth = 328,
		wrapX = false,
		controllerIndex = f1_local3,
		buildChild = function ()
			return f1_arg0.BuildRegisteredType( 0x8CFAE99C2101CC1, {
				controllerIndex = f1_arg0
			} )
		end,
		refreshChild = function ( f4_arg0, f4_arg1, f4_arg2 )
			
		end,
		primaryAxis = f1_local0.DIRECTION.horizontal,
		scrollType = Enum[0x92A69278394394][0xEDF5C0F5CCFACE1],
		horizontalAlignment = f1_local0.Alignment.Center,
		verticalAlignment = f1_local0.Alignment.Middle,
		sideArrowsOptions = {
			sideArrowsStep = 1
		}
	} )
	f1_local6[0x8B72E07B55C3AC0] = "RewardsGrid"
	f1_local6:setUseStencil( true )
	f1_local6:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -380, -52, -130, 290 )
	f1_local2:addElement( f1_local6 )
	f1_local2[0xDC2C7C29BCC2E4F] = f1_local6
	local f1_local7 = nil
	f1_local7 = f1_local1.BuildRegisteredType( 0xBD2DA5A108443EA, {
		controllerIndex = f1_local3
	} )
	f1_local7[0x8B72E07B55C3AC0] = "HorizontalMinimalScrollbar"
	f1_local7:SetVisible( false )
	f1_local7:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -200, 200, 312.5, 323.5 )
	f1_local2:addElement( f1_local7 )
	f1_local2[0xBD2DA5A108443EA] = f1_local7
	local f1_local8 = nil
	f1_local8 = f1_local1.BuildRegisteredType( 0xEBF23942A76AB35, {
		controllerIndex = f1_local3
	} )
	f1_local8[0x8B72E07B55C3AC0] = "QuickPlayButton"
	f1_local8:SetAnchorsAndPosition( 0, 1, 0, 1, 130, 530, 308, 360 )
	f1_local2:addElement( f1_local8 )
	f1_local2[0x32CE199EAEE7646] = f1_local8
	local f1_local9 = nil
	f1_local9 = f1_local0.UIImage.new()
	f1_local9[0x8B72E07B55C3AC0] = "ProgressBarMask"
	f1_local9:setImage( RegisterMaterial( 0x4AB929291E14902 ), 0 )
	f1_local9:SetBlendMode( BLEND_MODE.addWithAlpha )
	f1_local9:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 2207, 891, 949 )
	f1_local2:addElement( f1_local9 )
	f1_local2[0x2803869AFF15BDB] = f1_local9
	local f1_local10 = nil
	f1_local10 = f1_local0.UIPeekingGrid.new( {
		maxVisibleColumns = 5,
		maxVisibleRows = 1,
		spacingX = 0,
		rowHeight = 10,
		wrapY = false,
		columnWidth = 360,
		wrapX = false,
		controllerIndex = f1_local3,
		buildChild = function ()
			return f1_arg0.BuildRegisteredType( 0xD4BEF9C32F2134F, {
				controllerIndex = f1_arg0
			} )
		end,
		refreshChild = function ( f2_arg0, f2_arg1, f2_arg2 )
			
		end,
		primaryAxis = f1_local0.DIRECTION.horizontal,
		scrollType = Enum[0x92A69278394394][0xEDF5C0F5CCFACE1],
		horizontalAlignment = f1_local0.Alignment.Center,
		verticalAlignment = f1_local0.Alignment.Middle,
		sideArrowsOptions = {
			sideArrowsStep = 0,
			sideArrowsCreated = false
		}
	} )
	f1_local10[0x8B72E07B55C3AC0] = "ProgressBar"
	f1_local10:setUseStencil( false )
	f1_local10:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -549, -189, 375, 385 )
	f1_local2:addElement( f1_local10 )
	f1_local2[0x1B657F2A152DBDF] = f1_local10
	local f1_local11 = nil
	f1_local11 = f1_local1.BuildRegisteredType( 0xD564B9DDC18856E, {
		controllerIndex = f1_local3
	} )
	f1_local11[0x8B72E07B55C3AC0] = "UltimateRewardButton"
	f1_local11:SetAnchorsAndPosition( 1, 0, 0, 1, -388, -61, 781.5, 968.5 )
	f1_local2:addElement( f1_local11 )
	f1_local2[0xCDB54A5A44FA0BD] = f1_local11
	local f1_local12 = nil
	f1_local12 = f1_local1.BuildRegisteredType( 0xF3C2E31716E7BD3, {
		controllerIndex = f1_local3
	} )
	f1_local12[0x8B72E07B55C3AC0] = "ViewFeaturedEventBundlesButton"
	f1_local12:SetAnchorsAndPosition( 0, 1, 0, 1, 1532, 1859, 642.5, 769.5 )
	f1_local2:addElement( f1_local12 )
	f1_local2[0xF3C2E31716E7BD3] = f1_local12
	local f1_local13 = nil
	f1_local13 = f1_local1.BuildRegisteredType( 0xAB1A8407D6D9D17, {
		controllerIndex = f1_local3
	} )
	f1_local13[0x8B72E07B55C3AC0] = "SeasonalEventsTitleAndDescription"
	f1_local13:SetAnchorsAndPosition( 0, 1, 0, 1, 130, 1363, 158, 259 )
	f1_local2:addElement( f1_local13 )
	f1_local2[0xAB1A8407D6D9D17] = f1_local13
	local f1_local14 = nil
	f1_local14 = f1_local1.BuildRegisteredType( 0xEA43BCE118ACBE5, {
		controllerIndex = f1_local3
	} )
	f1_local14[0x8B72E07B55C3AC0] = "EventTimer"
	f1_local14:SetAnchorsAndPosition( 0, 1, 0, 1, 130, 642, 122, 158 )
	f1_local2:addElement( f1_local14 )
	f1_local2[0x39A87061FDB2E14] = f1_local14
	local f1_local15 = nil
	f1_local15 = f1_local1.BuildRegisteredType( 0x55B9CFD1312432, {
		controllerIndex = f1_local3
	} )
	f1_local15[0x8B72E07B55C3AC0] = "FeaturedContentPanel"
	f1_local15:SetAnchorsAndPosition( 1, 0, 0, 1, -388, -61, 547.5, 642.5 )
	f1_local2:addElement( f1_local15 )
	f1_local2[0x22B3F93BF5CA25A] = f1_local15
	local f1_local16 = nil
	f1_local16 = f1_local0.UIImage.new()
	f1_local16[0x8B72E07B55C3AC0] = "LineMaskTop"
	f1_local16:setImage( RegisterMaterial( 0x4AB929291E14902 ), 0 )
	f1_local16:SetBlendMode( BLEND_MODE.addWithAlpha )
	f1_local16:SetAnchorsAndPosition( 0, 1, 0, 1, 428, 1228, 365, 385 )
	f1_local2:addElement( f1_local16 )
	f1_local2[0x8FF490A310BC03A] = f1_local16
	local f1_local17 = nil
	f1_local17 = f1_local0.UIImage.new()
	f1_local17[0x8B72E07B55C3AC0] = "GradientLineTop"
	f1_local17:SetRGB( SWATCHES[0x2B125210C0B2BB1][0xF5C0139BA6F896C], 0 )
	f1_local17:SetAlpha( 0.45, 0 )
	f1_local17:setImage( RegisterMaterial( 0x4AB929291E14902 ), 0 )
	f1_local17:SetMask( f1_local2[0x8FF490A310BC03A] )
	f1_local17:setUseStencil( true )
	f1_local17:SetAnchorsAndPosition( 0, 1, 0, 1, 340, 1316, 369, 370 )
	f1_local2:addElement( f1_local17 )
	f1_local2[0xEE0B4C080289066] = f1_local17
	local f1_local18 = nil
	f1_local18 = f1_local0.UIImage.new()
	f1_local18[0x8B72E07B55C3AC0] = "LineMaskBottom"
	f1_local18:setImage( RegisterMaterial( 0x4AB929291E14902 ), 0 )
	f1_local18:SetBlendMode( BLEND_MODE.addWithAlpha )
	f1_local18:SetAnchorsAndPosition( 0, 1, 0, 1, 428, 1228, 865, 885 )
	f1_local2:addElement( f1_local18 )
	f1_local2[0x2D6550EEB0AB58C] = f1_local18
	local f1_local19 = nil
	f1_local19 = f1_local0.UIImage.new()
	f1_local19[0x8B72E07B55C3AC0] = "GradientLineBottom"
	f1_local19:SetRGB( SWATCHES[0x2B125210C0B2BB1][0xF5C0139BA6F896C], 0 )
	f1_local19:SetAlpha( 0.45, 0 )
	f1_local19:setImage( RegisterMaterial( 0x4AB929291E14902 ), 0 )
	f1_local19:SetMask( f1_local2[0x2D6550EEB0AB58C] )
	f1_local19:setUseStencil( true )
	f1_local19:SetAnchorsAndPosition( 0, 1, 0, 1, 340, 1316, 868, 869 )
	f1_local2:addElement( f1_local19 )
	f1_local2[0xF953093EC4090F8] = f1_local19
	local f1_local20 = f1_local0.UIScrollbar.new
	local f1_local21 = {
		direction = f1_local0.DIRECTION.horizontal,
		eventListener = f1_local7,
		startCap = f1_local7[0x7C139B2191BD22D],
		endCap = f1_local7[0xC50558A6315134A],
		sliderArea = f1_local7[0x1267DA9A256716D]
	}
	local f1_local22 = f1_local7[0x1267DA9A256716D]
	if f1_local22 then
		f1_local22 = f1_local7[0x1267DA9A256716D][0x5EE00EDE8E0841C]
	end
	f1_local21.slider = f1_local22
	f1_local22 = f1_local7[0x1267DA9A256716D]
	if f1_local22 then
		f1_local22 = f1_local7[0x1267DA9A256716D][0x491B3F5BB7699CD]
	end
	f1_local21.fixedSizeSlider = f1_local22
	f1_local6:AddScrollbar( f1_local20( f1_local21 ) )
	local f1_local23 = f1_local0.UIScrollbar.new
	f1_local22 = {
		direction = f1_local0.DIRECTION.horizontal,
		eventListener = f1_local7,
		startCap = f1_local7[0x7C139B2191BD22D],
		endCap = f1_local7[0xC50558A6315134A],
		sliderArea = f1_local7[0x1267DA9A256716D]
	}
	local f1_local24 = f1_local7[0x1267DA9A256716D]
	if f1_local24 then
		f1_local24 = f1_local7[0x1267DA9A256716D][0x5EE00EDE8E0841C]
	end
	f1_local22.slider = f1_local24
	f1_local24 = f1_local7[0x1267DA9A256716D]
	if f1_local24 then
		f1_local24 = f1_local7[0x1267DA9A256716D][0x491B3F5BB7699CD]
	end
	f1_local22.fixedSizeSlider = f1_local24
	f1_local10:AddScrollbar( f1_local23( f1_local22 ) )
	f0_local0( f1_local2, f1_local3, f1_arg1 )
	return f1_local2
end

MenuBuilder.registerType( 0x1333EF1E7F46461, SeasonalEventsMenuContentTemplatePoints )
LockTable( _M )
