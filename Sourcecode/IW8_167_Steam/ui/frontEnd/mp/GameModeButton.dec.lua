-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 17-11-2025 01:21
module( ..., package.seeall )
local f0_local0 = function ( f9_arg0 )
	if not f9_arg0.MainButton.Fill then
		f9_arg0.MainButton.Fill = LUI.UIImage.new()
		f9_arg0.MainButton.Fill.id = "Fill"
		f9_arg0.MainButton.Fill:SetRGBFromTable( SWATCHES.CAC.equipped, 0 )
		f9_arg0.MainButton.Fill:setImage( RegisterMaterial( "cac_equip_fill" ), 0 )
		f9_arg0.MainButton.Fill:SetAnchorsAndPosition( 1, 0, 0.5, 0.5, _1080p * -46, _1080p * -24, _1080p * -11, _1080p * 11 )
		f9_arg0.MainButton:addElement( f9_arg0.MainButton.Fill )
	end
	if f9_arg0.selected then
		f9_arg0.MainButton.Fill:SetAlpha( 1 )
	else
		f9_arg0.MainButton.Fill:SetAlpha( 0 )
	end
end

local f0_local1 = function ( f8_arg0, f8_arg1 )
	if not f8_arg0.selected then
		f8_arg0.selected = true
		f0_local0( f8_arg0 )
		if f8_arg0.selected then
			f8_arg0:dispatchEventToRoot( {
				name = "send_toast_notification",
				immediate = true,
				options = {
					displayTime = 3000,
					icon = f8_arg0.MainButton.modeInfo.image,
					description = Engine.CBBHFCGDIC( "LUA_MENU/FILTER_EQUIPPED", f8_arg0.MainButton.modeInfo.name ),
					type = LUI.ToastManager.NotificationType.QuickPlayFilterEquipped,
					controllerIndex = f8_arg1
				}
			} )
			f8_arg0:dispatchEventToCurrentMenu( {
				name = "gamemode_selection_updated",
				dispatchChildren = true,
				immediate = true,
				buttonIndex = f8_arg0.index
			} )
		end
	end
end

local f0_local2 = function ( f7_arg0, f7_arg1 )
	local f7_local0 = LUI.FlowManager.GetScopedData( f7_arg0 )
	if f7_local0.matchmakerSettings and f7_local0.matchmakerSettings.gameType == f7_arg0.MainButton.modeInfo.ref then
		f7_arg0.selected = true
	else
		f7_arg0.selected = false
	end
	f0_local0( f7_arg0, f7_arg1 )
end

local f0_local3 = function ( f6_arg0, f6_arg1 )
	if CONDITIONS.IsMagmaGameMode() and IsPrivateMatch() then
		f0_local0( f6_arg0, f6_arg1 )
	else
		
	end
end

local f0_local4 = function ( f4_arg0, f4_arg1, f4_arg2 )
	f4_arg0.ApplyGameModeButtonSelectedAction = f0_local0
	f4_arg0.InitGameModeButton = f0_local0
	f4_arg0:registerEventHandler( "gamemode_selection_updated", function ( element, event )
		if element.index ~= event.buttonIndex then
			element.selected = false
			f4_arg0( element, f4_arg0 )
		end
	end )
	if IsLanguageRussian() then
		ACTIONS.AnimateSequence( f4_arg0, "RU" )
	end
end

function GameModeButton( menu, controller )
	local self = LUI.UIHorizontalStackedLayout.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 560 * _1080p, 0, 40 * _1080p )
	self.id = "GameModeButton"
	self._animationSets = {}
	self._sequences = {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	self:SetSpacing( 5 * _1080p )
	local MainButton = nil
	
	MainButton = MenuBuilder.BuildRegisteredType( "GenericButton", {
		controllerIndex = f1_local1
	} )
	MainButton.id = "MainButton"
	MainButton.Text:SetLeft( _1080p * 20, 0 )
	MainButton.Text:setText( ToUpperCase( "" ), 0 )
	MainButton.Text:SetAlignment( LUI.Alignment.Left )
	MainButton:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 420, 0, _1080p * 40 )
	self:addElement( MainButton )
	self.MainButton = MainButton
	
	local OptionsButton = nil
	
	OptionsButton = MenuBuilder.BuildRegisteredType( "GenericButton", {
		controllerIndex = f1_local1
	} )
	OptionsButton.id = "OptionsButton"
	OptionsButton.Text:SetLeft( 0, 0 )
	OptionsButton.Text:setText( Engine.CBBHFCGDIC( "MENU/OPTIONS" ), 0 )
	OptionsButton.Text:SetAlignment( LUI.Alignment.Center )
	OptionsButton:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 425, _1080p * 544, 0, _1080p * 40 )
	self:addElement( OptionsButton )
	self.OptionsButton = OptionsButton
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	OptionsButton:RegisterAnimationSequence( "RU", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 560
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 5,
			child = self.OptionsButton.Text
		}
	} )
	self._sequences.RU = function ()
		menu:AnimateSequence( "RU" )
	end
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "GameModeButton", GameModeButton )
LockTable( _M )
