-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 27-09-2025 22:41
module( ..., package.seeall )
local f0_local0 = "1"
local f0_local1 = function ()
	local f54_local0
	if not CONDITIONS.IsThirdGameMode() then
		f54_local0 = not CONDITIONS.InGameAndBR()
	else
		f54_local0 = false
	end
	return f54_local0
end

local f0_local2 = function ( f53_arg0, f53_arg1, f53_arg2, f53_arg3, f53_arg4, f53_arg5, f53_arg6, f53_arg7, f53_arg8, f53_arg9, f53_arg10 )
	f53_arg0.InfoPanel.ItemName:setText( f53_arg2 )
	f53_arg0.InfoPanel:SetupPatchNotes( f53_arg1, f53_arg9 )
	local f53_local0 = f53_arg0.InfoPanel:UpdateDescription( {
		newDesc = f53_arg3,
		isUnlocked = f53_arg4,
		unlockText = f53_arg5,
		isNew = f53_arg6,
		extraDesc = f53_arg7,
		isRestricted = f53_arg8,
		unlockRank = f53_arg10
	} )
	if f53_arg0.BRWarningInfoFEPro then
		local f53_local1 = 120 * _1080p
		local f53_local2 = f53_arg0.InfoPanel:GetCurrentAnchorsAndPositions()
		f53_local2 = f53_local2.top
		local f53_local3 = LAYOUT.GetElementHeight( f53_arg0.BRWarningInfoFEPro )
		f53_arg0.BRWarningInfoFEPro:SetTop( f53_local2 + f53_local0 + f53_local1 + f53_local3, 200 )
		f53_arg0.BRWarningInfoFEPro:SetBottom( f53_local2 + f53_local0 + f53_local1 + f53_local3 * 2, 200 )
	end
end

local f0_local3 = function ( f52_arg0, f52_arg1, f52_arg2 )
	f52_arg0.BasePerk:UpdatePerk( f52_arg2.basePerk )
	f52_arg0.UpgradePerk1:UpdatePerk( f52_arg2.upgradePerk1 )
	f52_arg0.UpgradePerk2:UpdatePerk( f52_arg2.upgradePerk2 )
end

local f0_local4 = function ( f51_arg0, f51_arg1 )
	CLIENT_MODEL.SetModel( f51_arg0, f51_arg1 )
end

local f0_local5 = function ( f50_arg0, f50_arg1, f50_arg2, f50_arg3 )
	if CONDITIONS.InFrontend() and f50_arg0.perkType == f50_arg2 then
		if f50_arg2 == Cac.PerkTypes.CORE then
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_PATCH, f50_arg3 )
		elseif f50_arg2 == Cac.PerkTypes.ACTIVE then
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_ACTIVE_PATCH, f50_arg3 )
		elseif f50_arg2 == Cac.PerkTypes.PASSIVE then
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_PASSIVE_PATCH, f50_arg3 )
		elseif f50_arg2 == Cac.PerkTypes.SPECIAL_ONE then
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_PATCH_SPECIALIST, f50_arg3 )
		elseif f50_arg2 == Cac.PerkTypes.SPECIAL_TWO then
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_ACTIVE_PATCH_SPECIALIST, f50_arg3 )
		elseif f50_arg2 == Cac.PerkTypes.SPECIAL_THREE then
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_PASSIVE_PATCH_SPECIALIST, f50_arg3 )
		end
	end
end

local f0_local6 = function ( f49_arg0, f49_arg1, f49_arg2, f49_arg3 )
	if CONDITIONS.InFrontend() and f49_arg0.perkType == f49_arg2 then
		if f49_arg2 == Cac.PerkTypes.CORE then
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_PATCH_SOURCE, f49_arg3 )
		elseif f49_arg2 == Cac.PerkTypes.ACTIVE then
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_ACTIVE_PATCH_SOURCE, f49_arg3 )
		elseif f49_arg2 == Cac.PerkTypes.PASSIVE then
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_PASSIVE_PATCH_SOURCE, f49_arg3 )
		end
	end
end

local f0_local7 = function ( f48_arg0, f48_arg1, f48_arg2 )
	local f48_local0 = f48_arg2.perkData
	local f48_local1 = PlayerData.BFFBGAJGD( f48_arg1, LOADOUT.GetLoadoutStatsGroup() )
	f48_local1 = f48_local1.squadMembers
	local f48_local2 = LOADOUT.GetLoadoutSelectedPerk( f48_arg1, f48_arg0.loadoutIndex, f48_arg0.perkLoadoutIndex, LOADOUT.IsSpecialPerk( f48_arg2.perkData.perkType ) )
	local f48_local3 = Restrictions.IsPerkRestricted( f48_local0.ref )
	local f48_local4 = f48_local2:get() == f48_local0.ref
	if f48_local4 then
		f48_arg0.selectedPerkButton = f48_arg2
		f48_arg0._focusedPerkName = ToUpperCase( Engine.CBBHFCGDIC( f48_local0.name ) )
	end
	if f48_local0.mpDisabled and f48_arg2.SnipeIcon then
		f48_arg2.SnipeIcon:UpdateSnipeIcon( {
			gameSourceID = LUI.GAME_SOURCE_ID.WARZONE
		} )
	elseif f48_arg2.SnipeIcon then
		f48_arg2.SnipeIcon:UpdateSnipeIcon( {
			isNoWeapon = true
		} )
	end
	f48_arg2.Text:setText( Engine.CBBHFCGDIC( f48_local0.name ) )
	f48_arg2.Icon:setImage( RegisterMaterial( f48_local0.image ) )
	local f48_local5 = f48_arg2
	local f48_local6 = f48_arg2.SetButtonDisabled
	local f48_local7
	if f48_local0.isUnlocked then
		f48_local7 = f48_local0.isConflict
		if not f48_local7 then
			f48_local7 = f48_local0.isRestricted
		end
	else
		f48_local7 = true
	end
	f48_local6( f48_local5, f48_local7 )
	f48_arg2:SetButtonConflicted( f48_local0.isConflict, not f48_local0.isUnlocked, f48_local3 )
	f48_arg2:SetSelected( f48_local4 )
	f48_arg2:SetNew( f48_local0.isNew, f48_local0.ref )
	f48_arg2:SetupLock( PROGRESSION.GetUnlockRank( LOOT.GetItemID( LOOT.itemTypes.PERK, f48_local0.ref ) ) )
end

local f0_local8 = function ( f47_arg0, f47_arg1, f47_arg2, f47_arg3 )
	local f47_local0 = 1
	local f47_local1 = #f47_arg0.specialPerkTable
	local f47_local2, f47_local3, f47_local4, f47_local5, f47_local6 = nil
	local f47_local7 = {}
	for f47_local8 = 1, 3, 1 do
		if f47_local8 - 1 == f47_arg2 then
			local f47_local11 = LOADOUT.GetLoadoutSelectedPerk( f47_arg1, f47_arg0.loadoutIndex, f47_arg2, true )
			f47_local6 = f47_local11:get()
		else
			local f47_local11 = LOADOUT.GetLoadoutSelectedPerk( f47_arg1, f47_arg0.loadoutIndex, f47_local8 - 1, true )
			table.insert( f47_local7, {
				ref = f47_local11:get(),
				perkIndex = f47_local8 - 1
			} )
		end
	end
	if f47_arg3 then
		for f47_local8 = 1, #f47_local7, 1 do
			if f47_local6 == f47_local7[f47_local8].ref then
				LOADOUT.SetLoadoutSelectedPerk( f47_arg1, f47_arg0.loadoutIndex, f47_local7[f47_local8].perkIndex, f47_arg0.lastSelectedPerkRef, true )
				if Engine.DDJFBBJAIG() then
					local f47_local11 = nil
					local f47_local12 = LOADOUT.GetPerkDataByField( f47_arg0.lastSelectedPerkRef, CSV.perks.cols.specialistModel )
					if f47_local7[f47_local8].perkIndex == 0 then
						f47_local11 = CLIENT_MODEL.coreMPModels.PERK_PATCH_SPECIALIST
					elseif f47_local7[f47_local8].perkIndex == 1 then
						f47_local11 = CLIENT_MODEL.coreMPModels.PERK_ACTIVE_PATCH_SPECIALIST
					elseif f47_local7[f47_local8].perkIndex == 2 then
						f47_local11 = CLIENT_MODEL.coreMPModels.PERK_PASSIVE_PATCH_SPECIALIST
					end
					if f47_local11 then
						f0_local0( f47_local11, f47_local12 )
					end
				end
			end
		end
	else
		if f47_local6 ~= f47_arg0.perk1 and f47_local6 ~= f47_arg0.perk2 and f47_local6 ~= f47_arg0.perk3 then
			f47_local8 = false
		else
			local f47_local8 = true
		end
		if (f47_local8 or f47_local6 == Cac.perkNoneValue) and f47_local0 <= f47_local1 then
			
		else
			
		end
	end
end

local f0_local9 = function ( f46_arg0 )
	local f46_local0
	if f46_arg0.perk1 ~= "specialty_hardline" and f46_arg0.perk2 ~= "specialty_hardline" and f46_arg0.perk3 ~= "specialty_hardline" then
		f46_local0 = false
	else
		f46_local0 = true
	end
	return f46_local0
end

local f0_local10 = function ( f45_arg0 )
	local f45_local0
	if f45_arg0.perk1 ~= "specialty_strategist" and f45_arg0.perk2 ~= "specialty_strategist" and f45_arg0.perk3 ~= "specialty_strategist" then
		f45_local0 = false
	else
		f45_local0 = true
	end
	return f45_local0
end

local f0_local11 = function ( f44_arg0, f44_arg1, f44_arg2, f44_arg3 )
	local f44_local0 = LOADOUT.GetLoadoutSelectedPerk( f44_arg1, f44_arg0.loadoutIndex, 0 )
	f44_arg0.perk1 = f44_local0:get()
	f44_local0 = LOADOUT.GetLoadoutSelectedPerk( f44_arg1, f44_arg0.loadoutIndex, 1 )
	f44_arg0.perk2 = f44_local0:get()
	f44_local0 = LOADOUT.GetLoadoutSelectedPerk( f44_arg1, f44_arg0.loadoutIndex, 2 )
	f44_arg0.perk3 = f44_local0:get()
	if f44_arg3 then
		f0_local0( f44_arg0, f44_arg1, f44_arg2, true )
	else
		f0_local0( f44_arg0, f44_arg1, 0, false )
		f0_local0( f44_arg0, f44_arg1, 1, false )
		f0_local0( f44_arg0, f44_arg1, 2, false )
	end
	f44_local0 = LOADOUT.GetLoadoutSelectedPerk( f44_arg1, f44_arg0.loadoutIndex, 0, true )
	f44_arg0.specialPerk1 = f44_local0:get()
	f44_local0 = LOADOUT.GetLoadoutSelectedPerk( f44_arg1, f44_arg0.loadoutIndex, 1, true )
	f44_arg0.specialPerk2 = f44_local0:get()
	f44_local0 = LOADOUT.GetLoadoutSelectedPerk( f44_arg1, f44_arg0.loadoutIndex, 2, true )
	f44_arg0.specialPerk3 = f44_local0:get()
	if f44_arg0.Tabs:IsTabAvailable() and f44_arg0.isSpecialPerkActive then
		f44_local0 = f44_arg0.Tabs:GetTabAtIndex( Cac.PerkTypes.SPECIAL_ONE )
		local f44_local1 = f44_arg0.Tabs:GetTabAtIndex( Cac.PerkTypes.SPECIAL_TWO )
		local f44_local2 = f44_arg0.Tabs:GetTabAtIndex( Cac.PerkTypes.SPECIAL_THREE )
		f44_local0:SetupPerkData( f44_arg1, f44_arg0.specialPerk1, true, f0_local0( f44_arg0 ), f0_local0( f44_arg0 ) )
		f44_local1:SetupPerkData( f44_arg1, f44_arg0.specialPerk2, true, f0_local0( f44_arg0 ), f0_local0( f44_arg0 ) )
		f44_local2:SetupPerkData( f44_arg1, f44_arg0.specialPerk3, true, f0_local0( f44_arg0 ), f0_local0( f44_arg0 ) )
		f44_arg0.PerkSpecialistInfo:UpdateKillRequirement( f0_local0( f44_arg0 ) )
	end
end

local f0_local12 = function ( f41_arg0, f41_arg1, f41_arg2, f41_arg3, f41_arg4 )
	f0_local0( f41_arg0, f41_arg1, f41_arg3, f41_arg4 )
	local f41_local0 = 0
	local f41_local1 = 0
	local f41_local2 = false
	local f41_local3 = f41_arg0.perkTable[f41_arg2]
	local f41_local4 = LOADOUT.GetLoadoutSelectedPerk( f41_arg1, f41_arg0.loadoutIndex, f41_arg0.perkLoadoutIndex, f41_arg4 )
	local f41_local5 = f41_local4:get()
	local f41_local6 = LOADOUT.GetLoadoutSelectedPerk( f41_arg1, f41_arg0.loadoutIndex, 0, true )
	f41_local6 = f41_local6:get()
	local f41_local7 = LOADOUT.GetLoadoutSelectedPerk( f41_arg1, f41_arg0.loadoutIndex, 1, true )
	f41_local7 = f41_local7:get()
	local f41_local8 = LOADOUT.GetLoadoutSelectedPerk( f41_arg1, f41_arg0.loadoutIndex, 2, true )
	f41_local8 = f41_local8:get()
	for f41_local12, f41_local13 in ipairs( f41_local3 ) do
		f41_local13.perkType = f41_arg2
		f41_local13.isConflict = false
		if f41_arg4 and (f41_local13.ref == f41_arg0.perk1 or f41_local13.ref == f41_arg0.perk2 or f41_local13.ref == f41_arg0.perk3) then
			f41_local13.isConflict = true
		end
		if (f41_local13.ref == f41_local6 or f41_local13.ref == f41_local7 or f41_local13.ref == f41_local8) and f41_arg4 then
			f41_local13.isSpecialPerkEquipped = true
		else
			f41_local13.isSpecialPerkEquipped = false
		end
		if CONDITIONS.IsMagmaGameMode() then
			f41_local13.isDisabledBR = Cac.GetIsPerkDisabledForBR( f41_local13.ref )
		else
			f41_local13.isDisabledBR = false
		end
	end
	table.sort( f41_local3, function ( f43_arg0, f43_arg1 )
		if f43_arg0.isSpecialPerkEquipped ~= f43_arg1.isSpecialPerkEquipped then
			local f43_local0 = f43_arg0.isSpecialPerkEquipped
			if f43_local0 then
				f43_local0 = not f43_arg1.isSpecialPerkEquipped
			end
			return f43_local0
		elseif f43_arg0.isUnlocked and f43_arg1.isUnlocked then
			if f43_arg0.isRestricted ~= f43_arg1.isRestricted then
				local f43_local0 = f43_arg1.isRestricted
				if f43_local0 then
					f43_local0 = not f43_arg0.isRestricted
				end
				return f43_local0
			elseif not f43_arg0.isConflict and not f43_arg1.isConflict then
				return f43_arg0.unlockRank < f43_arg1.unlockRank
			elseif f43_arg0.isConflict ~= f43_arg1.isConflict then
				local f43_local0 = f43_arg1.isConflict
				if f43_local0 then
					f43_local0 = not f43_arg0.isConflict
				end
				return f43_local0
			elseif not f43_arg0.isConflict and not f43_arg1.isConflict then
				return false
			end
		end
		if f43_arg0.isDisabledBR ~= f43_arg1.isDisabledBR then
			local f43_local0 = f43_arg1.isDisabledBR
			if f43_local0 then
				f43_local0 = not f43_arg0.isDisabledBR
			end
			return f43_local0
		end
		return f43_arg0.unlockRank < f43_arg1.unlockRank
	end )
	for f41_local12, f41_local13 in ipairs( f41_local3 ) do
		if f41_local5 == f41_local13.ref then
			f41_local1 = f41_local12 - 1
		end
	end
	f41_arg0.perkGrid:SetRefreshChild( function ( f42_arg0, f42_arg1, f42_arg2 )
		local f42_local0 = f41_arg0.perkGrid:GetContentIndex( f42_arg1, f42_arg2, {
			relativePosition = false
		} )
		f42_arg0.perkData = f41_arg0[f42_local0 + 1]
		f41_arg0( f41_arg0, f41_arg0, f42_arg0 )
		if f41_arg0 == f42_local0 then
			f42_arg0:HandleButtonFocus( f41_arg0 )
		end
	end )
	f41_arg0.perkGrid._shouldFocus = false
	f41_arg0.perkGrid:SetNumChildren( #f41_local3 )
	f41_arg0.perkGrid:SetDefaultFocus( {
		x = 0,
		y = f41_local1
	} )
	f41_arg0.perkGrid:processEvent( {
		name = "gain_focus",
		controller = f41_arg1
	} )
	f41_arg0.perkGrid:RefreshContent()
	if LUI.IsLastInputMouseNavigation( f41_arg1 ) then
		f41_arg0.perkGrid:processEvent( {
			name = "lose_focus",
			controller = f41_arg1
		} )
	end
end

local f0_local13 = function ( f40_arg0, f40_arg1, f40_arg2, f40_arg3 )
	local f40_local0 = f40_arg0
	if f40_local0 ~= nil and f40_local0.id ~= "PerkSelect" then
		
	else
		
	end
	if f40_local0.id == "PerkSelect" then
		if Engine.DDJFBBJAIG() and Engine.ECHCFGDDDF() then
			local f40_local1 = LOADOUT.GetLoadoutSelectedPerk( f40_arg1, f40_local0.loadoutIndex, f40_local0.perkLoadoutIndex, f40_local0._isSpecialPerk )
			local f40_local2 = f40_local1:get()
			local f40_local3 = LOADOUT.GetPerkDataByField( f40_local2, CSV.perks.cols.model )
			local f40_local4 = LOADOUT.GetPerkDataByField( f40_local2, CSV.perks.cols.sourceModel )
			local f40_local5 = f40_local3
			local f40_local6 = f40_local4
			if f40_local0.perkType == Cac.PerkTypes.SPECIAL_ONE or f40_local0.perkType == Cac.PerkTypes.SPECIAL_TWO or f40_local0.perkType == Cac.PerkTypes.SPECIAL_THREE then
				local f40_local7 = LOADOUT.GetPerkDataByField( f40_local2, CSV.perks.cols.specialistModel )
				if f40_local7 and 0 < #f40_local7 then
					f40_local5 = f40_local7
				end
			end
			f0_local0( f40_local0, f40_arg1, f40_local0.perkType, f40_local5 )
			f0_local0( f40_local0, f40_arg1, f40_local0.perkType, f40_local6 )
		end
		local f40_local1
		if f40_arg3 then
			f40_local1 = f40_arg0:GetCurrentTabIndex() - 3
			if not f40_local1 then
			
			else
				f40_local0.perkLoadoutIndex = f40_local1
				f40_local0.perkType = f40_arg2
				f0_local0( f40_local0, f40_arg1, f40_arg2, f40_local0.perkLoadoutIndex, f40_arg3 )
				f40_local0._isSpecialPerk = f40_arg3
				f40_local1 = LOADOUT.GetLoadoutSelectedPerk( f40_arg1, f40_local0.loadoutIndex, f40_local0.perkLoadoutIndex, f40_arg3 )
				f40_local0.selectedPerkRef = f40_local1:get()
				local f40_local2 = f40_arg0:GetCurrentTab()
				f40_local2:SetupPerkData( f40_arg1, f40_local0.selectedPerkRef, f40_arg3, f0_local0( f40_local0 ), f0_local0( f40_local0 ) )
			end
		end
		f40_local1 = f40_arg0:GetCurrentTabIndex()
	end
end

local f0_local14 = function ( f33_arg0, f33_arg1, f33_arg2 )
	local f33_local0 = {
		perkLoadoutIndex = 0,
		isSpecialPerk = false,
		name = Engine.CBBHFCGDIC( "LUA_MENU/PERK_CORE" ),
		loadoutIndex = f33_arg0.loadoutIndex,
		focusFunction = function ( f39_arg0, f39_arg1 )
			Engine.DHFCHIIJCA( "loadout_showcase_x" )
			f33_arg0( f39_arg0, f39_arg1, Cac.PerkTypes.CORE )
		end,
		hasNewItem = 0 < #f33_arg0.newPerksRefTable[Cac.PerkTypes.CORE]
	}
	local f33_local1 = {
		perkLoadoutIndex = 1,
		isSpecialPerk = false,
		name = Engine.CBBHFCGDIC( "LUA_MENU/PERK_ACTIVE" ),
		loadoutIndex = f33_arg0.loadoutIndex,
		focusFunction = function ( f38_arg0, f38_arg1 )
			Engine.DHFCHIIJCA( "loadout_showcase_y" )
			f33_arg0( f38_arg0, f38_arg1, Cac.PerkTypes.ACTIVE )
		end,
		hasNewItem = 0 < #f33_arg0.newPerksRefTable[Cac.PerkTypes.ACTIVE]
	}
	local f33_local2 = {
		perkLoadoutIndex = 2,
		isSpecialPerk = false,
		name = Engine.CBBHFCGDIC( "LUA_MENU/PERK_PASSIVE" ),
		loadoutIndex = f33_arg0.loadoutIndex,
		focusFunction = function ( f37_arg0, f37_arg1 )
			Engine.DHFCHIIJCA( "loadout_showcase_z" )
			f33_arg0( f37_arg0, f37_arg1, Cac.PerkTypes.PASSIVE )
		end,
		hasNewItem = 0 < #f33_arg0.newPerksRefTable[Cac.PerkTypes.PASSIVE]
	}
	local f33_local3 = {
		perkLoadoutIndex = 0,
		isSpecialPerk = true,
		name = Engine.CBBHFCGDIC( "LUA_MENU/PERK_CORE" ),
		loadoutIndex = f33_arg0.loadoutIndex,
		focusFunction = function ( f36_arg0, f36_arg1 )
			Engine.DHFCHIIJCA( "loadout_showcase_specialist" )
			f33_arg0( f36_arg0, f36_arg1, Cac.PerkTypes.SPECIAL_ONE, true )
		end,
		hasNewItem = 0 < #f33_arg0.newPerksRefTable[Cac.PerkTypes.SPECIAL_ONE]
	}
	local f33_local4 = {
		perkLoadoutIndex = 1,
		isSpecialPerk = true,
		name = Engine.CBBHFCGDIC( "LUA_MENU/PERK_ACTIVE" ),
		loadoutIndex = f33_arg0.loadoutIndex,
		focusFunction = function ( f35_arg0, f35_arg1 )
			Engine.DHFCHIIJCA( "loadout_showcase_specialist" )
			f33_arg0( f35_arg0, f35_arg1, Cac.PerkTypes.SPECIAL_TWO, true )
		end,
		hasNewItem = 0 < #f33_arg0.newPerksRefTable[Cac.PerkTypes.SPECIAL_TWO]
	}
	local f33_local5 = {
		perkLoadoutIndex = 2,
		isSpecialPerk = true,
		name = Engine.CBBHFCGDIC( "LUA_MENU/PERK_PASSIVE" ),
		loadoutIndex = f33_arg0.loadoutIndex,
		focusFunction = function ( f34_arg0, f34_arg1 )
			Engine.DHFCHIIJCA( "loadout_showcase_specialist" )
			f33_arg0( f34_arg0, f34_arg1, Cac.PerkTypes.SPECIAL_THREE, true )
		end,
		hasNewItem = 0 < #f33_arg0.newPerksRefTable[Cac.PerkTypes.SPECIAL_THREE]
	}
	local f33_local6 = {
		f33_local0,
		f33_local1,
		f33_local2
	}
	if f33_arg2 then
		table.insert( f33_local6, f33_local3 )
		table.insert( f33_local6, f33_local4 )
		table.insert( f33_local6, f33_local5 )
	end
	f33_arg0.tabsData = f33_local6
	f33_arg0.Tabs:SetTabs( f33_local6 )
	f33_arg0.Tabs:SetAlignment( LUI.Alignment.Left )
end

local f0_local15 = function ( f32_arg0, f32_arg1 )
	f32_arg0.perkTable = {
		[Cac.PerkTypes.CORE] = {},
		[Cac.PerkTypes.ACTIVE] = {},
		[Cac.PerkTypes.PASSIVE] = {},
		[Cac.PerkTypes.SPECIAL_ONE] = {},
		[Cac.PerkTypes.SPECIAL_TWO] = {},
		[Cac.PerkTypes.SPECIAL_THREE] = {}
	}
	f32_arg0.newPerksRefTable = {
		[Cac.PerkTypes.CORE] = {},
		[Cac.PerkTypes.ACTIVE] = {},
		[Cac.PerkTypes.PASSIVE] = {},
		[Cac.PerkTypes.SPECIAL_ONE] = {},
		[Cac.PerkTypes.SPECIAL_TWO] = {},
		[Cac.PerkTypes.SPECIAL_THREE] = {}
	}
	f32_arg0.selectedSpecialPerkTable = {}
	f32_arg0.specialPerkTable = {}
	for f32_local0 = 0, StringTable.BFHCAIIDA( CSV.menuPerks.file ) - 1, 1 do
		local f32_local3 = CSV.ReadRow( CSV.menuPerks, f32_local0 )
		local f32_local4 = CSV.ReadRow( CSV.perks, StringTable.BJJBBCJGEJ( CSV.perks.file, CSV.perks.cols.ref, f32_local3.ref ) )
		local f32_local5 = StringTable.DIFCHIGDFB( CSV.menuPerks.file, CSV.menuPerks.cols.ref, f32_local4.ref, CSV.menuPerks.cols.slot )
		f32_local4.isUnlocked = PROGRESSION.IsUnlocked( f32_arg1, LOOT.itemTypes.PERK, f32_local4.ref )
		f32_local4.isNew = Loot.HDJCADADF( f32_arg1, LOOT.GetItemID( LOOT.itemTypes.PERK, f32_local4.ref ) )
		f32_local4.unlockRank = PROGRESSION.GetUnlockRank( LOOT.GetItemID( LOOT.itemTypes.PERK, f32_local4.ref ) )
		if not f32_local4.isUnlocked then
			f32_local4.unlockCriteria = PROGRESSION.GetUnlockText( f32_arg1, LOOT.itemTypes.PERK, f32_local4.ref )
		end
		local f32_local6 = tonumber( f32_local5 )
		f32_local4.isRestricted = Restrictions.IsPerkRestricted( f32_local4.ref )
		f32_local4.mpDisabled = f32_local4.mpDisabled == f0_local0
		if f32_local4.sourceModel == nil or f32_local4.sourceModel == "" then
			f32_local4.sourceModel = "tag_origin"
		end
		if (not (not CONDITIONS.IsMagmaGameMode() or not f32_local4.mpDisabled) or not f32_local4.mpDisabled) and (Engine.DDJFBBJAIG() or not f32_local4.isRestricted) then
			if f32_local4.isNew then
				table.insert( f32_arg0.newPerksRefTable[f32_local6], f32_local4.ref )
			end
			table.insert( f32_arg0.perkTable[f32_local6], f32_local4 )
			local f32_local7 = tonumber( StringTable.DIFCHIGDFB( CSV.perks.file, CSV.perks.cols.ref, f32_local4.ref, CSV.perks.cols.specialist ) )
			if f32_local7 and 0 < f32_local7 then
				table.insert( f32_arg0.specialPerkTable, f32_local4 )
			end
		end
	end
	f32_arg0.perkTable[Cac.PerkTypes.SPECIAL_ONE] = f32_arg0.specialPerkTable
	f32_arg0.perkTable[Cac.PerkTypes.SPECIAL_TWO] = f32_arg0.specialPerkTable
	f32_arg0.perkTable[Cac.PerkTypes.SPECIAL_THREE] = f32_arg0.specialPerkTable
end

local f0_local16 = function ( f31_arg0 )
	if f31_arg0.isSpecialPerkAvailable then
		if f31_arg0.BRWarningInfoFEPro then
			ACTIONS.AnimateSequence( f31_arg0.PerkSpecialistInfo.BRWarning, "Show" )
		end
		if f31_arg0.isSpecialPerkActive then
			ACTIONS.AnimateSequence( f31_arg0, "SpecialPerkEnabled" )
			ACTIONS.AnimateSequence( f31_arg0.PerkSpecialistInfo, "SpecialPerkEnabled" )
		else
			ACTIONS.AnimateSequence( f31_arg0, "SpecialPerkDisabled" )
			ACTIONS.AnimateSequence( f31_arg0.PerkSpecialistInfo, "SpecialPerkDisabled" )
		end
	else
		ACTIONS.AnimateSequence( f31_arg0, "HideSpecialPerkPrompt" )
		if f31_arg0.BRWarningInfoFEPro then
			ACTIONS.AnimateSequence( f31_arg0.BRWarningInfoFEPro, "Hide" )
			ACTIONS.AnimateSequence( f31_arg0.PerkSpecialistInfo.BRWarning, "Hide" )
		end
	end
end

local f0_local17 = function ( f30_arg0, f30_arg1 )
	f0_local0( f30_arg0 )
	f0_local0( f30_arg0, f30_arg1, f30_arg0.isSpecialPerkActive )
end

local f0_local18 = function ( f29_arg0, f29_arg1 )
	if CONDITIONS.InFrontend() then
		if f29_arg0.isSpecialPerkActive then
			local f29_local0 = LOADOUT.GetLoadoutSelectedPerk( f29_arg1, f29_arg0.loadoutIndex, 0, true )
			f29_local0 = f29_local0:get()
			local f29_local1 = LOADOUT.GetLoadoutSelectedPerk( f29_arg1, f29_arg0.loadoutIndex, 1, true )
			f29_local1 = f29_local1:get()
			local f29_local2 = LOADOUT.GetLoadoutSelectedPerk( f29_arg1, f29_arg0.loadoutIndex, 2, true )
			f29_local2 = f29_local2:get()
			local f29_local3 = LOADOUT.GetPerkDataByField( f29_local0, CSV.perks.cols.specialistModel )
			local f29_local4 = LOADOUT.GetPerkDataByField( f29_local1, CSV.perks.cols.specialistModel )
			local f29_local5 = LOADOUT.GetPerkDataByField( f29_local2, CSV.perks.cols.specialistModel )
			if f29_local3 == nil or #f29_local3 == 0 then
				f29_local3 = LOADOUT.GetPerkDataByField( f29_local0, CSV.perks.cols.model )
			end
			if f29_local4 == nil or #f29_local4 == 0 then
				f29_local4 = LOADOUT.GetPerkDataByField( f29_local1, CSV.perks.cols.model )
			end
			if f29_local5 == nil or #f29_local5 == 0 then
				f29_local5 = LOADOUT.GetPerkDataByField( f29_local2, CSV.perks.cols.model )
			end
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_PATCH_SPECIALIST, f29_local3 )
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_ACTIVE_PATCH_SPECIALIST, f29_local4 )
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_PASSIVE_PATCH_SPECIALIST, f29_local5 )
		else
			local f29_local0 = "tag_origin"
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_PATCH_SPECIALIST, f29_local0 )
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_ACTIVE_PATCH_SPECIALIST, f29_local0 )
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_PASSIVE_PATCH_SPECIALIST, f29_local0 )
		end
	end
end

local f0_local19 = function ( f28_arg0, f28_arg1 )
	f28_arg0.isSpecialPerkActive = not f28_arg0.isSpecialPerkActive
	if CONDITIONS.InFrontend() then
		if f28_arg0.isSpecialPerkActive then
			CLIENT_MODEL.UpdatePatchSpecialistClientModels( f28_arg0, LOADOUT.GetLoadoutPlayerData( f28_arg1, f28_arg0.loadoutIndex ) )
		else
			CLIENT_MODEL.HidePatchSpecialistClientModels( f28_arg0.isSpecialPerkActive )
		end
	end
	local f28_local0 = LOADOUT.SetLoadoutUsingSpecialist
	local f28_local1 = f28_arg1
	local f28_local2 = f28_arg0.loadoutIndex
	local f28_local3
	if f28_arg0.isSpecialPerkActive then
		f28_local3 = 1
	else
		f28_local3 = 0
	end
	f28_local0( f28_local1, f28_local2, f28_local3 )
	f0_local0( f28_arg0, f28_arg1 )
	f0_local0( f28_arg0, f28_arg1 )
end

local f0_local20 = function ( f26_arg0, f26_arg1 )
	f26_arg0.bindButton:addEventHandler( "button_alt1", function ( f27_arg0, f27_arg1 )
		if f26_arg0.isSpecialPerkAvailable then
			local f27_local0 = f27_arg0
			if f27_local0 ~= nil and f27_local0.id ~= "PerkSelect" then
				
			else
				
			end
			f26_arg0( f27_local0, f26_arg0 )
		end
	end )
	f26_arg0.isSpecialPerkAvailable = PROGRESSION.IsSpecialistPerkUnlocked( f26_arg1 )
	f26_arg0.isSpecialPerkActive = 0 < LOADOUT.GetLoadoutUsingSpecialist( f26_arg1, f26_arg0.loadoutIndex )
	f0_local0( f26_arg0, f26_arg1 )
	if f26_arg0.isSpecialPerkActive then
		f0_local0( f26_arg0, f26_arg1 )
	end
end

local f0_local21 = function ( f25_arg0, f25_arg1, f25_arg2 )
	for f25_local0 = 1, #f25_arg0.newPerksRefTable[f25_arg1], 1 do
		if f25_arg0.newPerksRefTable[f25_arg1][f25_local0] == f25_arg2 then
			table.remove( f25_arg0.newPerksRefTable[f25_arg1], f25_local0 )
			break
		end
	end
	if #f25_arg0.newPerksRefTable[f25_arg1] <= 0 then
		local f25_local0 = f25_arg0.Tabs:GetCurrentTab()
		f25_local0.NewItemSmallIcon:SetAlpha( 0 )
	end
end

local f0_local22 = function ( f20_arg0, f20_arg1 )
	if Engine.DDJFBBJAIG() then
		local f20_local0 = CONDITIONS.IsThirdGameMode()
		local f20_local1 = LUI.FlowManager.IsInStack( "BRMainMenu" )
		local f20_local2
		if not f20_local0 or Onboarding.PerksCP.WasCompleted( f20_arg0, f20_arg1 ) then
			if not f20_local0 then
				f20_local2 = not Onboarding.Perks.WasCompleted( f20_arg0, f20_arg1 )
			else
				f20_local2 = false
			end
		else
			f20_local2 = true
		end
		local f20_local3 = function ( f22_arg0, f22_arg1 )
			if not CONDITIONS.AreRestrictionsActive( f22_arg1 ) then
				local f22_local0 = function ( f24_arg0, f24_arg1 )
					f22_arg0( f22_arg0, f24_arg1 )
					ACTIONS.LeaveMenu( f24_arg0 )
				end
				
				local f22_local1 = ONBOARDING_DATA.GetOnboardingSpecialistPerkData()
				f22_local1.confirmButton.action = f22_local0
				if not Onboarding.SpecialistPerk.WasCompleted( f22_arg0, f22_arg1 ) then
					LUI.FlowManager.RequestPopupMenu( f22_arg0, "onboardingfeaturepopup", true, f22_arg1, false, f22_local1 )
					Onboarding.SpecialistPerk.MarkCompleted( f22_arg0, f22_arg1 )
				end
				if PROGRESSION.IsSpecialistPerkUnlocked( f22_arg1 ) and f20_arg0() then
					f22_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
						side = "left",
						button_ref = "button_r3",
						helper_text = Engine.CBBHFCGDIC( "ONBOARDING/SPECIALIST_MODE_INFO" )
					} )
					
					local bindButton = LUI.UIBindButton.new()
					bindButton.id = "selfBindButton"
					f22_arg0:addElement( bindButton )
					f22_arg0.bindButton = bindButton
					
					f22_arg0.bindButton:addEventHandler( "button_right_stick", function ( f23_arg0, f23_arg1 )
						LUI.FlowManager.RequestPopupMenu( f22_arg0, "onboardingfeaturepopup", true, f23_arg1.controller or f22_arg0, false, f22_arg0 )
					end )
				end
			end
		end
		
		if not f20_local1 and f20_local2 then
			local f20_local4 = ONBOARDING_DATA.GetOnboardingPerkData()
			if PROGRESSION.IsSpecialistPerkUnlocked( f20_arg1 ) and f0_local0() then
				f20_local4.confirmButton.action = function ( f21_arg0, f21_arg1 )
					ACTIONS.LeaveMenu( f21_arg0 )
					f20_arg0( f20_arg0, f21_arg1 )
				end
				
			end
			LUI.FlowManager.RequestPopupMenu( f20_arg0, "onboardingpopup", true, f20_arg1, false, f20_local4 )
			if f20_local0 then
				Onboarding.PerksCP.MarkCompleted( f20_arg0, f20_arg1 )
			else
				Onboarding.Perks.MarkCompleted( f20_arg0, f20_arg1 )
			end
		elseif f20_local1 and not Onboarding.WZPerks.WasCompleted( f20_arg0, f20_arg1 ) then
			local f20_local4 = nil
			if CONDITIONS.IsWZWipFlowEnabled() and CONDITIONS.AreWZLoadoutsEnabled() then
				f20_local4 = ONBOARDING_DATA.GetCH2OnboardingWZPerksData()
			else
				f20_local4 = ONBOARDING_DATA.GetOnboardingWZPerksData()
			end
			LUI.FlowManager.RequestPopupMenu( f20_arg0, "onboardingpopup", true, f20_arg1, false, f20_local4 )
			Onboarding.WZPerks.MarkCompleted( f20_arg0, f20_arg1 )
		elseif PROGRESSION.IsSpecialistPerkUnlocked( f20_arg1 ) and f0_local0() then
			f20_local3( f20_arg0, f20_arg1 )
		end
	end
end

local f0_local23 = function ( f19_arg0, f19_arg1 )
	if Engine.DDJFBBJAIG() then
		local f19_local0 = MenuBuilder.BuildRegisteredType( "FrontendCameraMover", {
			enableSway = true,
			controllerIndex = f19_arg1
		} )
		f19_local0:SetSwayValues( 4500, 0.06, 0.1 )
		f19_local0:SetLimits( -0.3, 0.3, -0.3, 0.3 )
		f19_arg0:addElement( f19_local0 )
		local f19_local1 = WATCH.GetEquippedWatch( f19_arg1 )
		FrontEndScene.SetExclusiveWeaponModels( {
			FrontEndScene.ClientWeapons.GunTablePrimary,
			FrontEndScene.ClientWeapons.GunTableSecondary,
			FrontEndScene.ClientWeapons.Watch
		} )
		local f19_local2 = WEAPON.GetWeaponModel( f19_arg1, FrontEndScene.ClientWeapons.Watch, CSV.weaponOffsets.watchFile )
		f19_arg0:addElement( f19_local2 )
		LOADOUT.RequestWatchAndWeaponModels( f19_arg1, f19_arg0.loadoutIndex )
		WATCH.SetWatchModelIfLoaded( f19_arg0, f19_arg1, f19_local2, f19_local1 )
	end
end

local f0_local24 = function ( f10_arg0, f10_arg1, f10_arg2 )
	assert( f10_arg0.InfoPanel )
	f10_arg0.UpdatePerkTree = f0_local0
	f10_arg0.UpdatePerkClientModel = f0_local0
	f10_arg0.UpdatePerkClientSourceModel = f0_local0
	f10_arg0.UpdatePerkDisplayData = f0_local0
	f10_arg0.UpdatePerkList = f0_local0
	f10_arg0.RemovePerkFromTable = f0_local0
	f10_arg0._isSpecialPerk = false
	if Engine.BHICADFIHA() and not f10_arg2.loadoutIndex then
		DebugPrint( "WARNING: Missing \"loadoutIndex\" option for PerkSelect menu. Only OK after a MyChanges." )
		f10_arg2.loadoutIndex = 0
	end
	assert( f10_arg2.loadoutIndex )
	f10_arg0.loadoutIndex = f10_arg2.loadoutIndex
	f10_arg0.perkLoadoutIndex = 0
	f10_arg0.selectedPerkButton = nil
	f10_arg0.MenuTitle:SetTitle( ToUpperCase( Engine.CBBHFCGDIC( "LUA_MENU/TITLE_PERK_SELECT" ) ) )
	f0_local0( f10_arg0, f10_arg1 )
	f10_arg0.InfoPanel:SetupPanel( f10_arg0.InfoPanel:GetCurrentAnchorsAndPositions() )
	f0_local0( f10_arg0, f10_arg1 )
	f0_local0( f10_arg0, f10_arg1, Cac.PerkTypes.CORE )
	f10_arg0.bindButton:addEventHandler( "button_secondary", function ( f18_arg0, f18_arg1 )
		ACTIONS.LeaveMenu( f10_arg0 )
	end )
	local f10_local0 = function ( f17_arg0, f17_arg1, f17_arg2 )
		local f17_local0 = Loot.HDJCADADF( f17_arg1, LOOT.GetItemID( LOOT.itemTypes.PERK, f17_arg2.ref ) )
		local f17_local1 = f17_arg2.desc
		if CONDITIONS.IsMagmaGameMode() then
			f17_local1 = f17_arg2.brDesc
		elseif CONDITIONS.IsThirdGameMode() then
			f17_local1 = f17_arg2.cpDesc
		end
		local f17_local2 = CONDITIONS.AreRestrictionsActive( f17_arg1 )
		if not f17_local2 then
			f17_local2 = Restrictions.AreBarebonesRulesInUse()
		end
		local f17_local3 = f17_arg0
		local f17_local4 = f17_arg0.UpdatePerkDisplayData
		local f17_local5 = f17_arg1
		local f17_local6 = f17_arg0._focusedPerkName
		local f17_local7 = Engine.CBBHFCGDIC( f17_local1 )
		local f17_local8
		if not f17_arg2.isConflict then
			f17_local8 = f17_arg2.isUnlocked
		else
			f17_local8 = false
		end
		local f17_local9 = f17_arg2.isConflict and Engine.CBBHFCGDIC( "LUA_MENU/PERK_IN_CONFLICT" ) or f17_arg2.unlockCriteria
		local f17_local10 = f17_local0
		local f17_local11
		if f17_arg2.extraInfo and 0 < #f17_arg2.extraInfo then
			f17_local11 = Engine.CBBHFCGDIC( f17_arg2.extraInfo )
			if not f17_local11 then
			
			else
				local f17_local12 = Restrictions.IsPerkRestricted( f17_arg2.ref )
				if f17_local12 then
					f17_local12 = f17_local2
				end
				f17_local4( f17_local3, f17_local5, f17_local6, f17_local7, f17_local8, f17_local9, f17_local10, f17_local11, f17_local12, PERK.GetPerkPatchNotes( f17_arg2.ref ), f17_arg2.unlockRank )
			end
		end
		f17_local11 = ""
	end
	
	f10_arg0:addEventHandler( "perk_button_over", function ( f16_arg0, f16_arg1 )
		local f16_local0 = f16_arg1.perkData
		if f16_arg1.isSelect then
			f16_arg0.InfoPanel:SetEquipped( true )
		else
			f16_arg0.InfoPanel:SetEquipped( false )
		end
		f16_arg0._focusedPerkName = ToUpperCase( Engine.CBBHFCGDIC( f16_local0.name ) )
		if Engine.DDJFBBJAIG() then
			if f16_local0.extraInfo and 0 < #f16_local0.extraInfo and Engine.ECHCFGDDDF() then
				f10_arg0.InfoPanel.ActionPrompt:SetAlpha( 1 )
			else
				f10_arg0.InfoPanel.ActionPrompt:SetAlpha( 0 )
			end
		end
		if CONDITIONS.IsBRGameType( f10_arg0 ) then
			f10_arg0.InfoPanel:SetShouldShowDisabledInfoBR( Cac.GetIsPerkDisabledForBR( f16_local0.ref ) )
		end
		f10_arg0( f16_arg0, f10_arg0, f16_local0 )
		f16_arg0:UpdatePerkTree( f10_arg0, f16_local0 )
		if Engine.DDJFBBJAIG() then
			local f16_local1 = f16_local0.perkType
			if f16_local1 and f16_local1 > Cac.PerkTypes.NONE then
				local f16_local2 = f16_local0.model
				local f16_local3 = f16_local0.sourceModel
				if f16_local1 == Cac.PerkTypes.SPECIAL_ONE or f16_local1 == Cac.PerkTypes.SPECIAL_TWO or f16_local1 == Cac.PerkTypes.SPECIAL_THREE then
					local f16_local4 = LOADOUT.GetPerkDataByField( f16_local0.ref, CSV.perks.cols.specialistModel )
					if f16_local4 and 0 < #f16_local4 then
						f16_local2 = f16_local4
					end
				end
				f16_arg0:UpdatePerkClientModel( f10_arg0, tonumber( f16_local1 ), f16_local2 )
				f16_arg0:UpdatePerkClientSourceModel( f10_arg0, tonumber( f16_local1 ), f16_local3 )
			end
		end
		f10_arg0._perkData = f16_local0
	end )
	f10_arg0:addEventHandler( "perk_button_action", function ( f15_arg0, f15_arg1 )
		local f15_local0 = f15_arg1.perkData
		local f15_local1 = f15_arg1.playerData
		local f15_local2 = LOADOUT.GetLoadoutSelectedPerk( f10_arg0, f10_arg0.loadoutIndex, f10_arg0.perkLoadoutIndex, LOADOUT.IsSpecialPerk( f15_local0.perkType ) )
		if f15_arg0.selectedPerkRef ~= f15_local0.ref then
			f15_arg0:dispatchEventToRoot( {
				name = "send_toast_notification",
				immediate = true,
				options = {
					iconScale = 4.667263495923649E-62,
					displayTime = 3000,
					icon = "cac_equip_fill",
					iconColor = SWATCHES.genericMenu.notificationHighlight,
					header = Engine.CBBHFCGDIC( "LUA_MENU/PERK_EQUIPPED" ),
					description = Engine.CBBHFCGDIC( f15_local0.name ),
					type = LUI.ToastManager.NotificationType.PerkEquipped,
					controllerIndex = f10_arg0
				}
			} )
			f15_arg0.InfoPanel:SetEquipped( 1 )
			local f15_local3 = PERK.IsPerkOverkill( f15_local2:get() )
			local f15_local4 = PERK.IsPerkOverkill( f15_local0.ref )
			local f15_local5 = f15_local1.loadouts[f15_arg0.loadoutIndex].weaponSetups[1]
			if f15_local3 and not f15_local4 then
				f15_local5.weapon:set( WEAPON.DefaultSecondary )
				WEAPON.WipeWeaponSetup( f15_local5 )
			elseif f15_local4 and not f15_local3 then
				local f15_local6
				if f15_local1.loadouts[f15_arg0.loadoutIndex].weaponSetups[0].weapon:get() == "iw8_sh_romeo870" then
					f15_local6 = "iw8_ar_mike4"
				else
					f15_local6 = "iw8_sh_romeo870"
				end
				f15_local5.weapon:set( f15_local6 )
				WEAPON.WipeWeaponSetup( f15_local5 )
			end
			f15_arg0.lastSelectedPerkRef = f15_local2:get()
			f15_local2:set( f15_local0.ref )
			f15_arg0.selectedPerkRef = f15_local0.ref
			if f15_arg0.selectedPerkButton then
				f15_arg0.selectedPerkButton:SetSelected( false )
			end
			f15_arg0.selectedPerkButton = f15_arg1.source
			f15_arg1.source:SetSelected( true )
			local f15_local7 = f15_arg0.Tabs:GetCurrentTab()
			f15_local7:SetupPerkData( f10_arg0, f15_local0.ref, LOADOUT.IsSpecialPerk( f15_local0.perkType ), f10_arg0( f10_arg0 ), f10_arg0( f10_arg0 ) )
			f15_arg0:UpdatePerkList( f10_arg0, f15_local0.perkType, f15_arg0.perkLoadoutIndex, LOADOUT.IsSpecialPerk( f15_local0.perkType ) )
			if CONDITIONS.InGame() then
				Engine.EBHIFJCGBH( "equip_item_ingame", 1 )
			end
		end
	end )
	f10_arg0:addEventHandler( "perk_button_up", function ( f14_arg0, f14_arg1 )
		f14_arg0:RemovePerkFromTable( f14_arg1.perkData.perkType, f14_arg1.perkData.ref )
	end )
	if CONDITIONS.InGame() and not CONDITIONS.IsThirdGameMode() then
		f10_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			clickable = true,
			priority = 5,
			ignoreTooltip = false,
			side = "left",
			kbmTooltipPromptOverload = "button_dismiss_pause_menu",
			button_ref = "button_start",
			helper_text = Engine.CBBHFCGDIC( "LUA_MENU/DISMISS_MENU" )
		} )
		f10_arg0.bindButton:addEventHandler( "button_start", function ( f13_arg0, f13_arg1 )
			LUI.FlowManager.RequestCloseAllMenus()
		end )
	end
	f0_local0( f10_arg0, f10_arg1 )
	if Engine.DDJFBBJAIG() then
		if CONDITIONS.IsCoreMultiplayer() then
			f10_arg0.bindButton:addEventHandler( "button_alt2", function ( f12_arg0, f12_arg1 )
				if f10_arg0._perkData then
					f10_arg0.InfoPanel:ToggleExtraDesc()
					if f10_arg0.InfoPanel._showExtraDesc then
						f10_arg0.InfoPanel.ActionPrompt:setText( Engine.CBBHFCGDIC( "LUA_MENU/SHOW_LESS_INFO" ) )
						Engine.BJDBIAGIDA( CoD.SFX.MouseClick )
					else
						f10_arg0.InfoPanel.ActionPrompt:setText( Engine.CBBHFCGDIC( "LUA_MENU/SHOW_MORE_INFO" ) )
						Engine.BJDBIAGIDA( CoD.SFX.MouseClick )
					end
					f10_arg0( f10_arg0, f10_arg0, f10_arg0._perkData )
				end
			end )
		else
			f10_arg0.InfoPanel.ActionPrompt:SetAlpha( 0 )
		end
	end
	f0_local0( f10_arg0, f10_arg1, false )
	if f0_local0() then
		f0_local0( f10_arg0, f10_arg1 )
	end
	if f10_arg0.selectedPerkButton then
		f10_local0( f10_arg0, f10_arg1, f10_arg0.selectedPerkButton.perkData )
	end
	if f10_arg0.InGameMenuBackground then
		ACTIONS.ScaleFullscreen( f10_arg0.InGameMenuBackground )
	end
	f10_arg0:addAndCallEventHandler( "onVideoChange", function ()
		f10_arg0.Vignette:SetScale( CoD.GetAspectRatioScaleAdjust( 0.7 ) )
	end )
	if not CONDITIONS.InGame( f10_arg0 ) then
		LAYOUT.AddAspectRatioFadeFrame( f10_arg0, f10_arg1 )
	end
	if CONDITIONS.IsSplitscreen( f10_arg0 ) and CONDITIONS.InGame( f10_arg0 ) then
		ACTIONS.ScaleFullscreen( f10_arg0.Vignette )
		ACTIONS.AnimateSequence( f10_arg0, "Splitscreen" )
	end
	if f10_arg0.BRWarningInfoFEPro then
		f10_arg0.BRWarningInfoFEPro:SetupWarning( "LUA_MENU/BR_WARNING_PERK_SPECIALIST_DESC", 3 )
	end
end

function PerkSelect( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "PerkSelect"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	self.HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	self.HelperBar.id = "HelperBar"
	self.HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
	self.HelperBar:setPriority( 10 )
	self:addElement( self.HelperBar )
	local f1_local2 = self
	local f1_local3 = nil
	if CONDITIONS.InGame( self ) then
		f1_local3 = MenuBuilder.BuildRegisteredType( "InGameMenuBackground", {
			controllerIndex = f1_local1
		} )
		f1_local3.id = "InGameMenuBackground"
		f1_local3:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
		self:addElement( f1_local3 )
		self.InGameMenuBackground = f1_local3
	end
	local Vignette = nil
	
	Vignette = LUI.UIImage.new()
	Vignette.id = "Vignette"
	Vignette:SetRGBFromTable( SWATCHES.genericMenu.blackBackground, 0 )
	Vignette:SetAlpha( 0.5, 0 )
	Vignette:setImage( RegisterMaterial( "widg_gradient_left_to_right" ), 0 )
	Vignette:SetAnchorsAndPosition( 0, 1, 0, 0, 0, _1080p * 1020, 0, 0 )
	self:addElement( Vignette )
	self.Vignette = Vignette
	
	local MenuTitle = nil
	
	MenuTitle = MenuBuilder.BuildRegisteredType( "MenuTitle", {
		controllerIndex = f1_local1
	} )
	MenuTitle.id = "MenuTitle"
	MenuTitle.MenuTitle:setText( ToUpperCase( Engine.CBBHFCGDIC( "LUA_MENU/TITLE_PERK_SELECT" ) ), 0 )
	MenuTitle.Line:SetLeft( 0, 0 )
	MenuTitle:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1020, 0, _1080p * 100 )
	self:addElement( MenuTitle )
	self.MenuTitle = MenuTitle
	
	local Cinematic = nil
	
	Cinematic = MenuBuilder.BuildRegisteredType( "Cinematic", {
		controllerIndex = f1_local1
	} )
	Cinematic.id = "Cinematic"
	Cinematic:SetAlpha( 0, 0 )
	Cinematic:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1609, _1080p * 1790, _1080p * 278, _1080p * 457 )
	self:addElement( Cinematic )
	self.Cinematic = Cinematic
	
	local BasePerk = nil
	
	BasePerk = MenuBuilder.BuildRegisteredType( "PerkDetails", {
		controllerIndex = f1_local1
	} )
	BasePerk.id = "BasePerk"
	BasePerk:SetAlpha( 0, 0 )
	BasePerk:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 751, _1080p * 1067, _1080p * 524, _1080p * 840 )
	self:addElement( BasePerk )
	self.BasePerk = BasePerk
	
	local UpgradePerk1 = nil
	
	UpgradePerk1 = MenuBuilder.BuildRegisteredType( "PerkDetails", {
		controllerIndex = f1_local1
	} )
	UpgradePerk1.id = "UpgradePerk1"
	UpgradePerk1:SetAlpha( 0, 0 )
	UpgradePerk1:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1309, _1080p * 1625, _1080p * 299, _1080p * 615 )
	self:addElement( UpgradePerk1 )
	self.UpgradePerk1 = UpgradePerk1
	
	local UpgradePerk2 = nil
	
	UpgradePerk2 = MenuBuilder.BuildRegisteredType( "PerkDetails", {
		controllerIndex = f1_local1
	} )
	UpgradePerk2.id = "UpgradePerk2"
	UpgradePerk2:SetAlpha( 0, 0 )
	UpgradePerk2:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1309, _1080p * 1625, _1080p * 664, _1080p * 980 )
	self:addElement( UpgradePerk2 )
	self.UpgradePerk2 = UpgradePerk2
	
	local PerkSpecialistInfo = nil
	
	PerkSpecialistInfo = MenuBuilder.BuildRegisteredType( "PerkSpecialistInfo", {
		controllerIndex = f1_local1
	} )
	PerkSpecialistInfo.id = "PerkSpecialistInfo"
	PerkSpecialistInfo:SetAlpha( 0, 0 )
	PerkSpecialistInfo:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1274, _1080p * 1824, _1080p * 113, _1080p * 303 )
	self:addElement( PerkSpecialistInfo )
	self.PerkSpecialistInfo = PerkSpecialistInfo
	
	local perkGrid = nil
	
	perkGrid = LUI.UIGrid.new( {
		scrollingThresholdX = 1,
		buildArrowsLabel = false,
		maxVelocity = 5000,
		adjustSizeToContent = true,
		scrollingThresholdY = 1,
		wrapX = false,
		maxVisibleColumns = 1,
		wrapY = true,
		arrowsVerticalOffset = 5,
		springCoefficient = 400,
		maxVisibleRows = SubtractForSplitscreen( 9, 6 ),
		controllerIndex = f1_local1,
		buildChild = function ()
			return MenuBuilder.BuildRegisteredType( "PerkButton", {
				controllerIndex = menu
			} )
		end,
		refreshChild = function ( f8_arg0, f8_arg1, f8_arg2 )
			
		end,
		spacingX = _1080p * 4,
		spacingY = _1080p * 4,
		columnWidth = _1080p * 546,
		rowHeight = _1080p * 62,
		horizontalAlignment = LUI.Alignment.Left,
		verticalAlignment = LUI.Alignment.Top
	} )
	perkGrid.id = "perkGrid"
	perkGrid:setUseStencil( true )
	perkGrid:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 119, _1080p * 665, _1080p * 329, _1080p * 1024 )
	self:addElement( perkGrid )
	self.perkGrid = perkGrid
	
	local Tabs = nil
	
	Tabs = LUI.TabManager.new( {
		spacing = 5,
		wrap = true,
		tabHeight = _1080p * 190,
		buildTab = function ()
			return MenuBuilder.BuildRegisteredType( "PerkTab", {
				controllerIndex = menu
			} )
		end,
		controllerIndex = f1_local1
	} )
	Tabs.id = "Tabs"
	Tabs:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 64, _1080p * 610, _1080p * 113, _1080p * 189 )
	self:addElement( Tabs )
	self.Tabs = Tabs
	
	local f1_local13 = nil
	if CONDITIONS.InFrontendPublicMP( self ) then
		f1_local13 = MenuBuilder.BuildRegisteredType( "MPPlayerDetails", {
			controllerIndex = f1_local1
		} )
		f1_local13.id = "MPPlayerDetails"
		f1_local13:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -596, _1080p * -96, _1080p * 54, _1080p * 114 )
		self:addElement( f1_local13 )
		self.MPPlayerDetails = f1_local13
	end
	local InfoPanel = nil
	InfoPanel = MenuBuilder.BuildRegisteredType( "PerkInfoPanel", {
		controllerIndex = f1_local1
	} )
	InfoPanel.id = "InfoPanel"
	if CONDITIONS.InFrontend( self ) then
		InfoPanel.ActionPrompt:setText( Engine.CBBHFCGDIC( "LUA_MENU/SHOW_MORE_INFO" ), 0 )
	end
	if CONDITIONS.InFrontend( self ) then
		InfoPanel.SecondActionPrompt:setText( "", 0 )
	end
	InfoPanel:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 728, _1080p * 1255, _1080p * 329, _1080p * 420 )
	self:addElement( InfoPanel )
	self.InfoPanel = InfoPanel
	
	local f1_local15 = nil
	if CONDITIONS.InFrontend( self ) then
		f1_local15 = MenuBuilder.BuildRegisteredType( "LobbyMembersFooter", {
			controllerIndex = f1_local1
		} )
		f1_local15.id = "LobbyMembersFooter"
		f1_local15:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 150 )
		self:addElement( f1_local15 )
		self.LobbyMembersFooter = f1_local15
	end
	local f1_local16 = nil
	if CONDITIONS.InGame( self ) then
		f1_local16 = MenuBuilder.BuildRegisteredType( "InGameMenuTimerStatus", {
			controllerIndex = f1_local1
		} )
		f1_local16.id = "InGameMenuTimerStatus"
		f1_local16:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -140, _1080p * 260, _1080p * 54, _1080p * 104 )
		self:addElement( f1_local16 )
		self.InGameMenuTimerStatus = f1_local16
	end
	local VerticalMinimalScrollbar = nil
	
	VerticalMinimalScrollbar = MenuBuilder.BuildRegisteredType( "VerticalMinimalScrollbar", {
		controllerIndex = f1_local1
	} )
	VerticalMinimalScrollbar.id = "VerticalMinimalScrollbar"
	VerticalMinimalScrollbar:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 676, _1080p * 687, _1080p * 329, _1080p * 919 )
	self:addElement( VerticalMinimalScrollbar )
	self.VerticalMinimalScrollbar = VerticalMinimalScrollbar
	
	local f1_local18 = nil
	if Engine.DDJFBBJAIG() then
		f1_local18 = MenuBuilder.BuildRegisteredType( "CDLRestrictionTag", {
			controllerIndex = f1_local1
		} )
		f1_local18.id = "CDLRestrictionTag"
		f1_local18:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1508, _1080p * 1824, _1080p * 170, _1080p * 200 )
		self:addElement( f1_local18 )
		self.CDLRestrictionTag = f1_local18
	end
	local f1_local19 = nil
	if CONDITIONS.IsMagmaGameMode( self ) then
		f1_local19 = MenuBuilder.BuildRegisteredType( "BRWarningInfo", {
			controllerIndex = f1_local1
		} )
		f1_local19.id = "BRWarningInfoFEPro"
		f1_local19:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 732, _1080p * 1255, _1080p * 624, _1080p * 654 )
		self:addElement( f1_local19 )
		self.BRWarningInfoFEPro = f1_local19
	end
	local ArrowUp = nil
	
	ArrowUp = MenuBuilder.BuildRegisteredType( "NavigationArrow", {
		controllerIndex = f1_local1
	} )
	ArrowUp.id = "ArrowUp"
	ArrowUp:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 292, _1080p * 324, _1080p * 923, _1080p * 955 )
	self:addElement( ArrowUp )
	self.ArrowUp = ArrowUp
	
	local ArrowDown = nil
	
	ArrowDown = MenuBuilder.BuildRegisteredType( "NavigationArrow", {
		controllerIndex = f1_local1
	} )
	ArrowDown.id = "ArrowDown"
	ArrowDown.Arrow:SetZRotation( 180, 0 )
	ArrowDown:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 460, _1080p * 492, _1080p * 923, _1080p * 955 )
	self:addElement( ArrowDown )
	self.ArrowDown = ArrowDown
	
	local ListCount = nil
	
	ListCount = LUI.UIText.new()
	ListCount.id = "ListCount"
	ListCount:SetRGBFromTable( SWATCHES.text.primaryText, 0 )
	ListCount:setText( "", 0 )
	ListCount:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	ListCount:SetAlignment( LUI.Alignment.Center )
	ListCount:SetVerticalAlignment( LUI.Alignment.Center )
	ListCount:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 324, _1080p * 460, _1080p * 930, _1080p * 950 )
	self:addElement( ListCount )
	self.ListCount = ListCount
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	local f1_local23 = nil
	PerkSpecialistInfo:RegisterAnimationSequence( "SpecialPerkDisabled", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 728
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1278
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	if Engine.DDJFBBJAIG() then
		f1_local18:RegisterAnimationSequence( "SpecialPerkDisabled", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Bottom,
				value = _1080p * 200
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Top,
				value = _1080p * 170
			}
		} )
	end
	self._sequences.SpecialPerkDisabled = function ()
		menu:AnimateSequence( "SpecialPerkDisabled" )
		if Engine.DDJFBBJAIG() then
			menu:AnimateSequence( "SpecialPerkDisabled" )
		end
	end
	
	local f1_local24 = nil
	PerkSpecialistInfo:RegisterAnimationSequence( "SpecialPerkEnabled", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 1274
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1824
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	if Engine.DDJFBBJAIG() then
		f1_local18:RegisterAnimationSequence( "SpecialPerkEnabled", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Top,
				value = _1080p * 329
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Bottom,
				value = _1080p * 359
			}
		} )
	end
	self._sequences.SpecialPerkEnabled = function ()
		menu:AnimateSequence( "SpecialPerkEnabled" )
		if Engine.DDJFBBJAIG() then
			menu:AnimateSequence( "SpecialPerkEnabled" )
		end
	end
	
	local f1_local25 = nil
	perkGrid:RegisterAnimationSequence( "Splitscreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 551
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 639
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 124
		}
	} )
	VerticalMinimalScrollbar:RegisterAnimationSequence( "Splitscreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 524
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 692
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 703
		}
	} )
	ArrowUp:RegisterAnimationSequence( "Splitscreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 532
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 564
		}
	} )
	ArrowDown:RegisterAnimationSequence( "Splitscreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 532
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 564
		}
	} )
	ListCount:RegisterAnimationSequence( "Splitscreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 539
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 559
		}
	} )
	self._sequences.Splitscreen = function ()
		menu:AnimateSequence( "Splitscreen" )
		menu:AnimateSequence( "Splitscreen" )
		menu:AnimateSequence( "Splitscreen" )
		menu:AnimateSequence( "Splitscreen" )
		menu:AnimateSequence( "Splitscreen" )
	end
	
	local f1_local26 = nil
	PerkSpecialistInfo:RegisterAnimationSequence( "HideSpecialPerkPrompt", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.HideSpecialPerkPrompt = function ()
		menu:AnimateSequence( "HideSpecialPerkPrompt" )
	end
	
	local f1_local27 = LUI.UIScrollbar.new
	local f1_local28 = {
		direction = LUI.DIRECTION.vertical,
		eventListener = VerticalMinimalScrollbar,
		startCap = VerticalMinimalScrollbar.startCap,
		endCap = VerticalMinimalScrollbar.endCap,
		sliderArea = VerticalMinimalScrollbar.sliderArea
	}
	local f1_local29 = VerticalMinimalScrollbar.sliderArea
	if f1_local29 then
		f1_local29 = VerticalMinimalScrollbar.sliderArea.slider
	end
	f1_local28.slider = f1_local29
	f1_local29 = VerticalMinimalScrollbar.sliderArea
	if f1_local29 then
		f1_local29 = VerticalMinimalScrollbar.sliderArea.fixedSizeSlider
	end
	f1_local28.fixedSizeSlider = f1_local29
	perkGrid:AddScrollbar( f1_local27( f1_local28 ) )
	perkGrid:AddArrow( ArrowUp )
	perkGrid:AddArrow( ArrowDown )
	perkGrid:AddItemNumbers( ListCount )
	self.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_secondary",
		helper_text = Engine.CBBHFCGDIC( "MENU/BACK" )
	} )
	self.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_primary",
		priority = 1,
		helper_text = Engine.CBBHFCGDIC( "LUA_MENU/EQUIP" )
	} )
	
	local bindButton = LUI.UIBindButton.new()
	bindButton.id = "selfBindButton"
	self:addElement( bindButton )
	self.bindButton = bindButton
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "PerkSelect", PerkSelect )
LockTable( _M )
