-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
module( ..., package.seeall )
local f0_local0 = 900
if Engine[0x12586A3F4FB490E]() then
	LUI.FlowManager.RegisterFenceGroup( "StreakSelect", {
		nil,
		"StatsGroup"
	} )
end
local f0_local1 = 150 + 50
local f0_local2 = 64
local f0_local3 = 15 * _1080p
local f0_local4 = function ( f51_arg0, f51_arg1 )
	f51_arg0._previousFocusGridIndex = f51_arg0._currentFocusGridIndex
	f51_arg0._currentFocusGridIndex = f51_arg1
end

local f0_local5 = function ( f50_arg0, f50_arg1, f50_arg2, f50_arg3 )
	LUI.ToastManager.CreateToast( f50_arg1, LUI.ToastManager.StandardEmphasisToast( CONDITIONS.IsT10() and Engine[0xED84C33EC5F01EA]( 0x6F493C97330DEB7 ) or Engine[0xED84C33EC5F01EA]( 0x57B72B78A480AAB ), Engine[0xED84C33EC5F01EA]( f50_arg3 ), LUI.ToastManager.ToastNotificationType.Gear ) )
end

local f0_local6 = function ( f49_arg0, f49_arg1 )
	local f49_local0 = nil
	local f49_local1 = STREAK.GetBundleByRef( f49_arg1.data.ref )
	f49_local0 = f49_local1[0xE19C41B5A516BD9]
	if f49_local0 == nil or f49_local0 == "" then
		local f49_local2 = hashset( {
			nil,
			"radar_drone_overwatch",
			"manual_turret",
			"scrambler_drone_guard",
			"cruise_predator",
			"precision_airstrike",
			"pac_sentry",
			"hover_jet",
			"white_phosphorus",
			"directional_uav",
			"airdrop",
			"sentry_gun",
			"airdrop_multiple",
			"bradley",
			"chopper_support",
			"juggernaut",
			"chopper_gunner",
			"toma_strike",
			"gunship",
			"uav"
		} )
		if f49_local2[f49_arg1.data.ref] then
			f49_local0 = "frontend_streak_" .. f49_arg1.data.ref
			f49_arg0.Showcase:SetAlpha( 0 )
		else
			f49_local0 = "frontend_streak_uav"
			f49_arg0.Showcase:SetAlpha( 1 )
		end
	else
		f49_arg0.Showcase:SetAlpha( 0 )
	end
	assert( f49_arg0.FadeCover )
	assert( f49_arg0.FrontEndMenuBackground )
	f49_arg0.FadeCover:SetAlpha( 1 )
	f49_arg0.FrontEndMenuBackground:setImage( RegisterMaterial( f49_local0 ) )
	f49_arg0.FrontEndMenuBackground:SetScale( f49_arg0.scaleAdjust, 0 )
	f49_arg0.FrontEndMenuBackground:SetScale( f49_arg0.scaleAdjust + 0.015, 2500, LUI.EASING.outQuadratic )
	f49_arg0.Vignette:SetScale( f49_arg0.scaleAdjust, 0 )
	f49_arg0.Vignette:SetScale( f49_arg0.scaleAdjust + 0.015, 2500, LUI.EASING.outQuadratic )
	f49_arg0.FadeCover:SetAlpha( 0, f0_local0, LUI.EASING.outQuadratic )
	f49_arg0._prevImage = f49_local0
end

local f0_local7 = nil
local f0_local8 = function ( f48_arg0, f48_arg1 )
	local f48_local0 = LOADOUT.GetLoadoutSquadMember( f48_arg1 )
	f48_local0 = f48_local0.killstreakSetups
	local f48_local1 = GetStreakTable( f48_arg0, f48_local0, f48_arg1 )
	f48_arg0.CategoryGrid:RemoveAllWidgets()
	f0_local0( f48_arg0, f48_local1, f48_local0, f48_arg1 )
end

local f0_local9 = function ( f46_arg0, f46_arg1 )
	if not Engine[0x12586A3F4FB490E]() then
		f46_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			clickable = true,
			priority = 5,
			side = "left",
			kbmTooltipPromptOverload = "button_dismiss_pause_menu",
			button_ref = "button_start",
			helper_text = Engine[0xED84C33EC5F01EA]( 0xEF0F75B0AB08E35 )
		} )
		f46_arg0:AddGamepadEventCallback( "button_start", function ( f47_arg0, f47_arg1 )
			if Engine[0x74423E76DECE3E4]() then
				ACTIONS.ResumeGame( f46_arg0 )
			end
			LUI.FlowManager.RequestCloseAllMenus()
			return true
		end )
		MenuUtils.AddDismissPauseMenuKBMHandler( f46_arg0 )
	end
end

local f0_local10 = function ( f45_arg0 )
	if f45_arg0.buttonOver then
		f45_arg0:dispatchEventToChildren( {
			name = "update_cost_type",
			showKills = f45_arg0.showKills,
			cost = f45_arg0.showKills and f45_arg0.buttonOver.data.kills or f45_arg0.buttonOver.data.scoreCost
		} )
	end
end

local f0_local11 = function ( f44_arg0, f44_arg1, f44_arg2 )
	if not f44_arg2 then
		f44_arg0.showKills = not f44_arg0.showKills
		local f44_local0 = LOADOUT.GetLoadoutSquadMember( f44_arg1 )
		f44_local0 = f44_local0.scoreStreak
		if f44_local0:get() == 0 then
			f44_local0:set( 1 )
		else
			f44_local0:set( 0 )
		end
	end
	f44_arg0.HelperBar.ButtonHelperText:TogglePromptByButtonRef( "button_right_trigger", not f44_arg0.showKills )
	if f44_arg0.streakCategories and not Table.IsEmpty( f44_arg0.streakCategories ) then
		for f44_local4, f44_local5 in pairs( f44_arg0.streakCategories ) do
			local f44_local6 = STREAK.GetStreakCategoryTextFromStreakData( f44_local5.data, f44_arg0.showKills )
			local f44_local7 = assert
			local f44_local8 = f44_local6
			local f44_local3
			if f44_arg0.showKills then
				f44_local3 = "Missing kills for killstreak!"
			else
				f44_local3 = "Missing score for killstreak!"
			end
			f44_local7( f44_local8, f44_local3 )
			f44_local5.Text:setText( f44_local6 )
		end
	end
	f0_local0( f44_arg0, f44_arg1 )
	if Engine[0x12586A3F4FB490E]() then
		f0_local0( f44_arg0 )
	end
	f44_arg0.StreakEquippedStack:ShowKills( f44_arg0.showKills )
end

local f0_local12 = function ( f43_arg0, f43_arg1, f43_arg2, f43_arg3 )
	if f43_arg3 then
		if f43_arg2 then
			ACTIONS.AnimateSequence( f43_arg0, "SwapOn" )
			ACTIONS.AnimateSequence( f43_arg1, "SwapIconOn" )
			f43_arg1:SetPrimaryPromptText( 0xAA4B3526A3C0AC4, false )
		else
			ACTIONS.AnimateSequence( f43_arg0, "SwapOff" )
		end
	end
end

local f0_local13 = function ( f42_arg0, f42_arg1, f42_arg2, f42_arg3 )
	f42_arg1.swapVisible = false
	if f42_arg1.selectedButtons then
		for f42_local0 = 1, #f42_arg1.selectedButtons, 1 do
			local f42_local3 = f42_arg1.selectedButtons[f42_local0]
			if f42_local3 and f42_local3.equipped then
				local f42_local4 = f42_local3.data.kills == f42_arg2.data.kills
				local f42_local5 = f42_local3.data.ref == f42_arg2.data.ref
				local f42_local6 = true
				local f42_local7
				if f42_arg0 then
					f42_local7 = f42_arg0
				elseif f42_local4 then
					f42_local7 = f42_local4
				elseif not f42_local5 then
					f42_local7 = f42_arg2.data.isUnlocked
				else
					f42_local7 = false
				end
				if f42_local7 then
					f42_arg1.swapVisible = true
				end
				f0_local0( f42_local3, f42_arg2, f42_local7, f42_local6, false )
				f42_arg1.StreakEquippedStack:UpdateSwapPulse( f42_local3.data.ref, f42_local7 )
			end
		end
	end
	f0_local0( f42_arg1, f42_arg3 )
end

local f0_local14 = function ( f41_arg0 )
	if CONDITIONS.InFrontend() then
		local f41_local0 = 0
		for f41_local4, f41_local5 in ipairs( f41_arg0.equippedStreaks ) do
			if f41_local5.isActive then
				f41_local0 = f41_local0 + 1
			end
		end
		if CONDITIONS.IsThirdGameMode() or f41_local0 == f41_arg0.maxEquipStreaks then
			f41_local1 = LOADOUT.GetLoadoutSquadMember( f41_arg0._controllerIndex )
			f41_local2 = 0
			for f41_local6, f41_local7 in ipairs( f41_arg0.equippedStreaks ) do
				if f41_local7.isActive then
					f41_local1.killstreakSetups[f41_local2].killstreak:set( f41_local7.ref )
					f41_local2 = f41_local2 + 1
				end
			end
			ACTIONS.UploadStats( f41_arg0, f41_arg0._controllerIndex )
			f41_arg0.DeselectWarning:SetAlpha( 0 )
			ACTIONS.AnimateSequence( f41_arg0.StreakEquippedStack, "EquippedUnselected" )
		end
		f41_arg0.StreakEquippedStack:Update( f41_arg0.equippedStreaks, not f41_arg0.showKills )
	end
end

local f0_local15 = function ( f40_arg0, f40_arg1, f40_arg2 )
	f40_arg0.ItemDetails:UpdateDetails( STREAK.GetStreakDetails( f40_arg1, f40_arg2.data.ref ) )
end

local f0_local16 = function ( f29_arg0, f29_arg1, f29_arg2, f29_arg3, f29_arg4 )
	local f29_local0 = LOOT.GetItemID( f29_arg3.ref )
	f29_arg3.isNew = false
	f29_arg3.isRestricted = MatchRules[0xEAD2EDE698008BA]( f29_arg3.ref )
	f29_arg3.image = f29_arg3.icon
	f29_arg3.header = f29_arg3.name
	f29_arg2:SetupButton( {
		usesGlow = true,
		removeTextBacker = true,
		usesSwapIcon = true,
		buttonSize = "SmallTall",
		imageSize = "1x1",
		buttonData = f29_arg3
	} )
	f29_arg2:SetRestricted( f29_arg3.isRestricted )
	local f29_local1 = f29_arg2
	local f29_local2 = f29_arg2.SetDisabled
	local f29_local3
	if f29_arg3.isUnlocked then
		f29_local3 = f29_arg3.isRestricted
	else
		f29_local3 = true
	end
	f29_local2( f29_local1, f29_local3 )
	f29_local2 = function ( f39_arg0, f39_arg1 )
		f29_arg0.buttonOver = f39_arg0
		local f39_local0 = LUI.FlowManager.GetScopedData( f29_arg0 )
		f39_local0.lastFocusedButton = {
			gridIndex = f39_arg0.parentIndex,
			buttonIndex = f39_arg0.position.x
		}
		local f39_local1 = false
		f29_arg0( f29_arg0, f29_arg0, f39_arg0 )
		f29_arg0.StreakEquippedStack:UpdateHighlightedState( f39_arg0.data.ref, f39_arg0.equipped )
		f39_arg0:SetPrimaryPromptText( f39_arg0.equipped and 0x11A42B3B7868280 or 0xCA07A93FADF9E95, false )
		if Engine[0x12586A3F4FB490E]() then
			f29_arg0( f29_arg0, f39_arg0 )
		end
		if Engine[0x12586A3F4FB490E]() then
			f29_arg0.Showcase:setImage( RegisterMaterial( f39_arg0.data.fullImage ) )
			f29_arg0( f29_arg0 )
		end
		local f39_local2 = f39_arg1.controller or f29_arg0
		f29_arg0( true, f29_arg0, f39_arg0, f39_local2 )
		f29_arg0( f29_arg0, f39_local2 )
		local f39_local3 = MatchRules[0xEAD2EDE698008BA]( f39_arg0.data.ref )
		if MatchRules[0x1A6D0B2E15DF8CF] and IsPrivateMatch() then
			if not f39_local3 then
				f39_local3 = f39_arg0.data.customCost == -1
			end
			MatchRules[0x12A04CF49B2C5F4]( f39_arg0.data.ref, f39_local3 )
		end
		if MLG.IsCDLActive( f39_local2 ) or f39_local3 then
			ACTIONS.AnimateSequence( f29_arg0, "CDLRestricted" )
			if f39_arg0.equipped or f29_arg0.swapVisible or f29_arg0.isNew then
				ACTIONS.AnimateSequence( f29_arg0, "CDLEquipped" )
			else
				ACTIONS.AnimateSequence( f29_arg0, "CDLUnequipped" )
			end
		else
			ACTIONS.AnimateSequence( f29_arg0, "CDLUnrestricted" )
		end
		if f39_arg0:IsDisabled() then
			f29_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
				button_ref = "button_primary"
			} )
		end
		if Engine[0x12586A3F4FB490E]() and not Onboarding.Killstreaks.WasCompleted( f29_arg0, f39_local2 ) then
			LUI.FlowManager.RequestPopupMenu( f29_arg0, "onboardingpopup", true, f39_local2, false, ONBOARDING_DATA.GetOnboardingKillstreaksData() )
			Onboarding.Killstreaks.MarkCompleted( f29_arg0, f39_local2 )
		end
	end
	
	if not f29_arg2._addedSetupStreakButtonHandler then
		f29_arg2:addEventHandler( "button_over", f29_local2 )
		f29_arg2:addEventHandler( "button_over_disable", f29_local2 )
		f29_arg2:addEventHandler( "button_up", function ( f38_arg0, f38_arg1 )
			f29_arg0( false, f29_arg0, f38_arg0, f38_arg1.controller )
			ACTIONS.AnimateSequence( f38_arg0, "SwapIconOff" )
		end )
		f29_arg2._addedSetupStreakButtonHandler = true
	end
	local f29_local4 = function ( f37_arg0, f37_arg1 )
		local f37_local0 = f37_arg0.data.ref
		for f37_local4, f37_local5 in ipairs( f29_arg0.equippedStreaks ) do
			if f37_local0 == f37_local5.ref and f37_local5.isActive then
				f37_arg0:SetEquipped( true )
				if f29_arg0.selectedButtons then
				
				else
					f37_arg0:SetDisabled( f37_local5.isRestricted )
					break
				end
				f29_arg0.selectedButtons[f37_local4] = f37_arg0
			end
			f37_arg0:SetEquipped( false )
		end
	end
	
	f29_local4( f29_arg2 )
	f29_arg2:registerEventHandler( "update_buttons", f29_local4 )
	f29_arg2:registerEventHandler( "button_action", function ( element, event )
		local f30_local0 = false
		local f30_local1 = function ()
			table.sort( element.equippedStreaks, function ( f36_arg0, f36_arg1 )
				if CONDITIONS.IsT10() then
					return tonumber( f36_arg0.scoreCost ) < tonumber( f36_arg1.scoreCost )
				else
					return tonumber( f36_arg0.kills ) < tonumber( f36_arg1.kills )
				end
			end )
			element:dispatchEventToChildren( {
				name = "update_buttons"
			} )
			if MLG.IsCDLActive( controller ) and MatchRules[0xEAD2EDE698008BA]( element.data.ref ) then
				ACTIONS.AnimateSequence( element, "CDLEquipped" )
			end
			element( element, element.controller )
			element( element )
			if element then
				element( element, element )
			end
		end
		
		if CoD.IsDMZMatch() then
			local f30_local2 = f29_arg0.equippedStreaks[1]
			if f30_local2 then
				f30_local2 = f29_arg0.equippedStreaks[1].ref ~= element.data.ref
			end
			f29_arg0.equippedStreaks[1] = element.data
			f29_arg0.equippedStreaks[1].isActive = f30_local2
			local f30_local3 = LUI.FlowManager.GetScopedData( f29_arg0 )
			f30_local3.lastFocusedButton = nil
			if not element.equipped then
				f29_arg0( f29_arg0, event.controller, element.data.icon, element.data.name )
			end
			f30_local1()
			ACTIONS.UploadStats( self, f29_arg0 )
			ACTIONS.LeaveMenu()
		elseif element.data.isUnlocked then
			f29_arg0( false, f29_arg0, element, event.controller )
			f29_arg0.selectedButtons = {}
			local f30_local2 = true
			local f30_local3 = false
			local f30_local4 = {}
			local f30_local5 = false
			local f30_local6 = false
			for f30_local10, f30_local11 in ipairs( f29_arg0.equippedStreaks ) do
				if f30_local11.ref == element.data.ref then
					f30_local5 = true
				end
				if f30_local11.kills == element.data.kills then
				
				elseif not f30_local5 then
					if f30_local6 then
						break
					end
				end
				f30_local6 = true
			end
			for f30_local7 = #f29_arg0.equippedStreaks, 1, -1 do
				f30_local11 = f29_arg0.equippedStreaks[f30_local7]
				local f30_local12 = f30_local11.kills == element.data.kills
				local f30_local13 = function ( f34_arg0 )
					element.isActive = f34_arg0
					local f34_local0
					if f34_arg0 then
						f34_local0 = f34_arg0
					else
						f34_local0 = not element.equipped
					end
					element = f34_local0
					element = false
					f34_local0 = element
					local f34_local1 = f34_local0
					f34_local0 = f34_local0.SetPrimaryPromptText
					local f34_local2
					if f34_arg0 then
						f34_local2 = 0x11A42B3B7868280
						if not f34_local2 then
						
						else
							f34_local0( f34_local1, f34_local2, false )
						end
					end
					f34_local2 = 0xCA07A93FADF9E95
				end
				
				local f30_local14 = function ()
					LOOT.SendDlogLootEquipped( element, LOOT.itemTypes.STREAK, nil, nil, element.equippedStreaks[element].ref, element.data.ref )
					element = element.equippedStreaks[element].isRestricted
					element.equippedStreaks[element] = element.data
					element.equippedStreaks[element].isActive = true
					element = not element.equipped
					element = false
					element:SetPrimaryPromptText( 0x11A42B3B7868280, false )
				end
				
				if f30_local11.isActive then
					if f30_local11.ref == element.data.ref then
						f30_local13( false )
						f29_arg0.StreakEquippedStack:UpdateHighlightedState( nil, false )
						f29_arg0.DeselectWarning:SetAlpha( 1 )
					elseif f30_local12 then
						f30_local14()
						ACTIONS.AnimateSequence( element, "ShowGlow" )
					end
				elseif f30_local11.ref == element.data.ref then
					f30_local13( true )
					f29_arg0.StreakEquippedStack:UpdateHighlightedState( f30_local11.ref, true )
				elseif f30_local12 and not f30_local5 then
					f30_local14()
				elseif not f30_local12 and not f30_local6 then
					f30_local14()
				end
			end
			if #f29_arg0.equippedStreaks < f29_arg0.maxEquipStreaks and f30_local2 then
				f30_local7 = #f29_arg0.equippedStreaks + 1
				f29_arg0.equippedStreaks[f30_local7] = element.data
				f29_arg0.equippedStreaks[f30_local7].isActive = true
				f30_local3 = true
			elseif f30_local2 then
				f30_local7 = {
					streaks = f29_arg0.equippedStreaks,
					selection = element.data,
					showKills = f29_arg0.showKills,
					menu = f29_arg0,
					maxEquipStreaks = f29_arg0.maxEquipStreaks,
					onReplace = function ( f32_arg0 )
						for f32_local3, f32_local4 in ipairs( element.equippedStreaks ) do
							if f32_local4.ref == f32_arg0 then
								LOOT.SendDlogLootEquipped( element, LOOT.itemTypes.STREAK, nil, nil, f32_local4.ref, element.data.ref )
								element = element.equippedStreaks[f32_local3].isRestricted
								element.equippedStreaks[f32_local3] = element.data
								element.equippedStreaks[f32_local3].isActive = true
								break
							end
						end
						ACTIONS.AnimateSequence( element, "ShowGlow" )
						element()
						if element then
							element( element, element.controller, element.data.icon, element.data.name )
						end
					end,
					onLeave = function ()
						if element.parent then
							if not LUI.IsLastInputMouseNavigation( element ) then
								element.CategoryGrid:GainFocus()
								element.parent.StreakGrid:GainFocus()
							end
							element.parent.StreakGrid:SetFocusedPosition( element.position, true )
						end
					end
				}
				ACTIONS.AnimateSequence( f29_arg0, "Hide" )
				LUI.FlowManager.RequestPopupMenu( nil, "StreakReplacePopup", true, event.controller, false, f30_local7, nil, true, false )
			end
			f30_local1()
			if f30_local3 then
				f29_arg0( f29_arg0, event.controller, element.data.icon, element.data.name )
			end
		end
		return true
	end )
end

local f0_local17 = function ( f28_arg0, f28_arg1, f28_arg2 )
	f0_local0( false, f28_arg0, f28_arg0.buttonOver )
	f28_arg0.selectedButtons = {}
	for f28_local3, f28_local4 in ipairs( f28_arg0.equippedStreaks ) do
		f28_local4.isActive = false
	end
	f28_arg0.buttonOver:dispatchEventToCurrentMenu( {
		name = "update_buttons"
	} )
	f0_local0( f28_arg0 )
	f0_local0( f28_arg0, f28_arg2 )
	f28_arg0.DeselectWarning:SetAlpha( 1 )
	f28_arg0.StreakEquippedStack:DeselectAll()
end

local f0_local18 = function ( f26_arg0, f26_arg1, f26_arg2 )
	local f26_local0 = function ()
		Engine[0xC4146BA76D0F982]( CoD.SFX.MouseClick )
		f26_arg0( f26_arg0, f26_arg0, f26_arg0 )
	end
	
	f26_arg0.HelperBar:SetHelperVerticalPosition( {
		topAnchor = 1,
		bottom = 0,
		bottomAnchor = 0,
		top = -70 * _1080p
	} )
	f26_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		priority = 3,
		isHold = true,
		button_ref = "button_l3",
		helper_text = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x92FF557E0865F1C ) ),
		callback = f26_local0,
		helper_definition = Engine[0xED84C33EC5F01EA]( 0xDDC3F9AC2A6DC1D )
	}, {
		replaceTop = true
	} )
end

local f0_local19 = function ( f25_arg0, f25_arg1 )
	f25_arg0._previousFocusGridIndex = f25_arg0._currentFocusGridIndex
	f25_arg0._currentFocusGridIndex = f25_arg1 - 1
end

local f0_local20 = function ( f23_arg0, f23_arg1 )
	f23_arg0._currentFocusGridIndex = 1
	f23_arg0._previousFocusGridIndex = 1
	f23_arg0.CategoryGrid:addEventHandler( "gamepad_button", function ( f24_arg0, f24_arg1 )
		if not f24_arg1.down then
			return 
		elseif f24_arg1.button == "secondary" then
			local f24_local0 = LUI.FlowManager.GetScopedData( f23_arg0 )
			f24_local0.lastFocusedButton = nil
			ACTIONS.LeaveMenu( f24_arg0 )
		end
		if f24_arg1.button == "left_stick" then
			if LUI.IsLastInputKeyboardMouse( f23_arg0 ) then
				if f24_arg1.qualifier then
					Engine[0xC4146BA76D0F982]( CoD.SFX.MouseClick )
				end
				f23_arg0( f23_arg0, streakPlayerData, f24_arg1.controller )
			else
				return false
			end
		end
		if f24_arg1.button == "right_trigger" and not GL_HACK.IsInfluencerBuild() and CONDITIONS.ShowScorestreakValues() and not CONDITIONS.IsT10() and not CONDITIONS.IsLeaguePlay() then
			f23_arg0( f23_arg0, f23_arg0, false )
			if f24_arg1.qualifier then
				Engine[0xC4146BA76D0F982]( CoD.SFX.MouseClick )
			end
		end
		local f24_local0 = f23_arg0.CategoryGrid:GetWidgetAtIndex( f23_arg0._currentFocusGridIndex )
		if not f24_local0 or not f24_local0.StreakGrid then
			return 
		end
		local f24_local1 = f24_local0.StreakGrid
		if f24_arg1.button == "left" then
			if f24_local1:GetFocusPosition( LUI.DIRECTION.horizontal ) == 0 then
				if f23_arg0._currentFocusGridIndex <= 0 then
					return 
				end
				f24_local1:RemoveFocusFromChild( true )
				f24_local1:LoseFocus( f24_arg1 )
				if 0 < f23_arg0._currentFocusGridIndex then
					f23_arg0:SetCurrentGridIndex( f23_arg0._currentFocusGridIndex - 1 )
					f23_arg0.CategoryGrid:SetFocusedPosition( {
						y = 0,
						x = f23_arg0._currentFocusGridIndex
					}, true, true )
					local f24_local2 = f23_arg0.CategoryGrid:GetWidgetAtIndex( f23_arg0._currentFocusGridIndex )
					f24_local2 = f24_local2.StreakGrid
					f24_local2:SetFocusedPosition( {
						y = 0,
						x = f24_local2:GetNumColumns() - 1
					}, true, true )
				end
				return true
			end
			return f24_local1:GamepadButton( f24_arg1 )
		elseif f24_arg1.button == "right" then
			if f24_local1:GetFocusPosition( LUI.DIRECTION.horizontal ) == f24_local1:GetNumColumns() - 1 then
				if f23_arg0.CategoryGrid:GetNumChildren() - 1 <= f23_arg0._currentFocusGridIndex then
					return 
				end
				f24_local1:RemoveFocusFromChild( true )
				f24_local1:LoseFocus( f24_arg1 )
				if f23_arg0._currentFocusGridIndex < f23_arg0.CategoryGrid:GetNumChildren() - 1 then
					f23_arg0:SetCurrentGridIndex( f23_arg0._currentFocusGridIndex + 1 )
					f23_arg0.CategoryGrid:SetFocusedPosition( {
						y = 0,
						x = f23_arg0._currentFocusGridIndex
					}, true, true )
					local f24_local2 = f23_arg0.CategoryGrid:GetWidgetAtIndex( f23_arg0._currentFocusGridIndex )
					f24_local2.StreakGrid:SetFocusedPosition( {
						x = 0,
						y = 0
					}, true, true )
				end
				return true
			end
			return f24_local1:GamepadButton( f24_arg1 )
		end
		return f24_local1:GamepadButton( f24_arg1 )
	end )
end

local f0_local21 = function ( f22_arg0, f22_arg1, f22_arg2, f22_arg3, f22_arg4 )
	f22_arg2:SetActiveBehaviorFromType( f22_arg1, f22_arg3 )
	if not f22_arg4 then
		for f22_local0 = 0, f22_arg2:GetNumChildren() - 1, 1 do
			local f22_local3 = f22_arg2:GetElementAtPosition( f22_local0, 0 )
			if f22_local3 and f22_local3.data.isActive and not f22_arg0._currentFocusedSubGrid then
				f22_arg2:SetDefaultFocus( {
					y = 0,
					x = f22_local0
				} )
				f22_arg2:TouchMouseSetActiveToDefaultFocusMenuCreate( f22_arg1 )
				f22_arg4 = true
				f22_arg0._currentFocusedSubGrid = f22_arg2
				break
			end
		end
	end
end

f0_local7 = function ( f21_arg0, f21_arg1, f21_arg2, f21_arg3 )
	local f21_local0 = 0
	local f21_local1 = {}
	local f21_local2 = {}
	local f21_local3 = 0
	local f21_local4 = {}
	for f21_local5 = 1, #f21_arg1, 1 do
		if f21_arg1[f21_local5].kills ~= f21_local0 then
			f21_local3 = f21_local3 + 1
			f21_local0 = f21_arg1[f21_local5].kills
			f21_local4[f21_local3] = {
				kills = f21_arg1[f21_local5].kills,
				scoreCost = f21_arg1[f21_local5].scoreCost
			}
			f21_local1[f21_local3] = 1
			f21_local2[f21_local3] = {}
			f21_local2[f21_local3][1] = f21_local5
		end
		if f21_local1[f21_local3] and f21_local2[f21_local3] then
			f21_local1[f21_local3] = f21_local1[f21_local3] + 1
			f21_local2[f21_local3][f21_local1[f21_local3]] = f21_local5
		end
	end
	f21_arg0.streakCategories = {}
	for f21_local8, f21_local9 in ipairs( f21_local4 ) do
		if not f21_arg0._maxKills then
			f21_arg0._maxKills = f21_local9.kills
		else
			f21_arg0._maxKills = math.max( f21_arg0._maxKills, f21_local9.kills )
		end
		if not f21_arg0._minKills then
			f21_arg0._minKills = f21_local9.kills
		else
			f21_arg0._minKills = math.min( f21_arg0._minKills, f21_local9.kills )
		end
		f21_arg0.CategoryGrid:AddWidget( "StreakCategory", {
			adjustContentToFit = true,
			widgetOptions = {
				refreshGrid = false,
				amount = f21_local1[f21_local8],
				categoryData = f21_local9,
				streakIndices = f21_local2[f21_local8],
				streakTable = f21_arg1,
				streakPlayerData = f21_arg2,
				menu = f21_arg0,
				controllerIndex = f21_arg3
			}
		} )
	end
	f21_arg0.CategoryGrid:RefreshGrid()
	f0_local0( f21_arg0, f21_arg3 )
	f21_arg0:SetupDynamicListActiveState( f21_arg3 )
end

local f0_local22 = function ( f18_arg0, f18_arg1 )
	f18_arg0.CategoryGrid:SetupList( {
		maxVisibleColumns = 8,
		wrapY = false,
		maxVisibleRows = 1,
		runRefreshNextFrame = false,
		useStencil = true,
		wrapX = false,
		controllerIndex = f18_arg1,
		primaryAxis = LUI.DIRECTION.horizontal,
		spacingX = _1080p * 0,
		spacingY = _1080p * 0,
		rowHeight = _1080p * 256,
		scrollType = Enum[0x92A69278394394][0xEDF5C0F5CCFACE1],
		setActiveBehaviorType = GRID_AND_LIST.ActiveBehaviorType.TOUCHEND
	}, f18_arg0.HorizontalMinimalScrollbar )
	f18_arg0.CategoryGrid.childButtonWidth = _1080p * 160
	f18_arg0.CategoryGrid.childButtonHeight = _1080p * 204
	f18_arg0.CategoryGrid.childGridSpacing = _1080p * 16
	f18_arg0.CategoryGrid:RegisterWidgetType( "StreakCategory", function ()
		return MenuBuilder.BuildRegisteredType( "StreakCategory", {
			controllerIndex = f18_arg0
		} )
	end, function ( f19_arg0, f19_arg1, f19_arg2 )
		f19_arg0.index = f19_arg1
		local f19_local0 = f19_arg0:GetAnchorsAndPosition()
		f19_arg0:SetAnchorsAndPosition( f19_local0.leftAnchor, f19_local0.rightAnchor, f19_local0.topAnchor, f19_local0.bottomAnchor, _1080p * 0, f19_arg2.amount * (f18_arg0.CategoryGrid.childButtonWidth + f18_arg0.CategoryGrid.childGridSpacing), f19_local0.top, f19_local0.bottom )
		f19_arg0:CreateGrid( f18_arg0.CategoryGrid, f19_arg2.amount, f19_arg2.categoryData, f19_arg2.streakIndices, f19_arg2.streakTable, f19_arg2.streakPlayerData, f19_arg2.menu, f19_arg2.controllerIndex )
		f19_arg2.menu.streakCategories[f19_arg2.categoryData.kills] = f19_arg0.StreakKillCategory
	end )
end

local f0_local23 = function ( f17_arg0, f17_arg1 )
	ACTIONS.AnimateSequence( f17_arg0.StreakEquippedStack, STREAK.GetStreaksStackAnimation( f17_arg0.maxEquipStreaks ) )
end

local f0_local24 = function ( f15_arg0, f15_arg1 )
	if Dvar[0x9E5BE3B4BBA4E0E]( 0x5714E49C17D1B4B ) then
		local f15_local0 = OPERATOR.GetEquippedOperatorCribKillstreakIn( f15_arg1 )
		local f15_local1, f15_local2, f15_local3 = OPERATOR.GetTransitionInfoFromAnimation( f15_local0 )
		ClientCharacter[0xAA614EB46957F3B]( 0, f15_local0, f15_local1 )
		ACTIONS.AnimateSequence( f15_arg0, "IntroHideBackground" )
		local f15_local4 = f15_arg0:Wait( f0_local0 )
		f15_local4.onComplete = function ()
			ACTIONS.AnimateSequence( f15_arg0, "IntroShowBackground" )
		end
		
	end
end

local f0_local25 = function ( f14_arg0, f14_arg1 )
	if CONDITIONS.IsT10() then
		f14_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0x3EEBD595E0D2E4E ) )
	else
		f14_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0xCB7F887C28D2B9A ) )
	end
	f14_arg0.MenuTitle:SetupBackButton( f14_arg1 )
end

local f0_local26 = function ( f12_arg0, f12_arg1, f12_arg2 )
	f12_arg0:addEventHandler( "menu_close", function ( f13_arg0, f13_arg1 )
		if CONDITIONS.InGame() or CoD.IsDMZMatch() then
			for f13_local3, f13_local4 in ddlpairs( f12_arg0 ) do
				if f12_arg0.equippedStreaks[f13_local3 + 1] then
					f13_local4.killstreak:set( f12_arg0.equippedStreaks[f13_local3 + 1].ref )
				end
			end
			ACTIONS.UploadStats( f12_arg0, f12_arg0 )
			f13_local0 = LUI.DataSourceInControllerModel.new( "cg.players.selectedLoadout" )
			if f13_local0:GetValue( f12_arg0 ) then
				Engine[0x6055C55456F05DF]( "class_edit", f13_local0:GetValue( f12_arg0 ) )
			end
		end
	end )
end

local f0_local27 = function ( f10_arg0, f10_arg1 )
	f10_arg0:addEventHandler( "menu_create", function ( f11_arg0, f11_arg1 )
		f10_arg0.selectedButtons = {}
		f11_arg0:dispatchEventToCurrentMenu( {
			name = "update_buttons"
		} )
		local f11_local0 = 0 < #f10_arg0
		local f11_local1 = {}
		if not f11_local0 or not f10_arg0[1].kills then
			local f11_local2 = 0
		end
		local f11_local3 = 0
		local f11_local4 = 0
		f11_local1.buttonPosition = {
			y = 0,
			x = f11_local4
		}
		f11_local1.categoryPosition = {
			y = 0,
			x = f11_local3
		}
		for f11_local5 = 1, #f10_arg0, 1 do
			if f10_arg0[f11_local5].kills ~= f11_local2 then
				f11_local3 = f11_local3 + 1
				local f11_local2 = f10_arg0[f11_local5].kills
				f11_local4 = 0
			end
			if f10_arg0[f11_local5].isActive then
				f11_local1.buttonPosition = {
					y = 0,
					x = f11_local4
				}
				f11_local1.categoryPosition = {
					y = 0,
					x = f11_local3
				}
				break
			end
			f11_local4 = f11_local4 + 1
		end
		if f11_local0 then
			f10_arg0:SetFocusedButton( f11_arg1.controller, f11_local1 )
		end
	end )
end

local f0_local28 = function ( f9_arg0, f9_arg1 )
	local f9_local0 = LOADOUT.GetLoadoutSquadMember( f9_arg1 )
	f9_local0 = f9_local0.scoreStreak
	if f9_local0 then
		local f9_local1
		if f9_local0:get() == 0 then
			f9_local1 = not CONDITIONS.IsT10()
		else
			f9_local1 = false
		end
		f9_arg0.showKills = f9_local1
	else
		f9_arg0.showKills = false
	end
end

local f0_local29 = function ( f8_arg0, f8_arg1 )
	if not CONDITIONS.IsT10() and not CONDITIONS.IsLeaguePlay() then
		f8_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			side = "left",
			priority = 1,
			isToggleButton = true,
			button_ref = "button_right_trigger",
			helper_text = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x3EEBD595E0D2E4E ) ),
			isToggledOn = not f8_arg0.showKills,
			helper_definition = Engine[0xED84C33EC5F01EA]( 0x2C04B3F158E473 )
		}, {
			replaceTop = true
		} )
		f8_arg0.HelperBar.ButtonHelperText:TogglePromptByButtonRef( "button_right_trigger", not f8_arg0.showKills )
	end
end

local f0_local30 = function ( f6_arg0, f6_arg1 )
	f6_arg0:addEventHandler( "button_secondary", function ( f7_arg0, f7_arg1 )
		local f7_local0 = LUI.FlowManager.GetScopedData( f6_arg0 )
		f7_local0.lastFocusedButton = nil
		ACTIONS.LeaveMenu( f7_arg0 )
	end )
end

local f0_local31 = function ( f4_arg0, f4_arg1 )
	f4_arg0:addAndCallEventHandler( "update_input_type", function ( f5_arg0, f5_arg1 )
		if not CONDITIONS.IsT10() and not CONDITIONS.IsLeaguePlay() then
			f5_arg0.HelperBar.ButtonHelperText:RemoveButtonPrompt( "button_right_trigger" )
			f5_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
				side = "left",
				priority = 1,
				isToggleButton = true,
				button_ref = "button_right_trigger",
				helper_text = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x3EEBD595E0D2E4E ) ),
				isToggledOn = not f5_arg0.showKills,
				helper_definition = Engine[0xED84C33EC5F01EA]( 0x2C04B3F158E473 )
			}, {
				replaceTop = true
			} )
			f5_arg0.HelperBar.ButtonHelperText:RefreshButtonHelpers( f5_arg1 )
		end
		if not LUI.IsLastInputMouseNavigation( f4_arg0 ) and f5_arg0.buttonOver then
			f5_arg0.buttonOver.parent.StreakGrid:SetFocusedPosition( f5_arg0.buttonOver.position, false )
		end
	end, {
		controllerIndex = f4_arg1
	} )
end

local f0_local32 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0.SetupStreakButton = f0_local0
	f3_arg0.SetCurrentSelectedGrid = f0_local0
	f3_arg0.SetupActiveState = f0_local0
	f3_arg0.SetCurrentGridIndex = f0_local0
	f3_arg0.ToggleStreakLabels = f0_local0
	f3_arg0.scaleAdjust = 0
	f3_arg0.equippedStreaks = {}
	f3_arg0._prevImage = nil
	f3_arg0._controllerIndex = f3_arg1
	f3_arg0.maxEquipStreaks = STREAK.GetMaxEquipStreaks()
	local f3_local0, f3_local1 = STREAK.GetStreaksData( f3_arg1 )
	f3_arg0.equippedStreaks = f3_local1
	local f3_local2 = STREAK.GetStreakPlayerData( f3_arg1 )
	f0_local0( f3_arg0, f3_arg1 )
	f0_local0( f3_arg0, f3_arg1 )
	f0_local0( f3_arg0, f3_arg1 )
	f0_local0( f3_arg0 )
	f0_local0( f3_arg0, f3_arg1 )
	f3_arg0.ItemDetails:SetupForKillstreaks()
	f0_local0( f3_arg0, f3_local0, f3_local2, f3_arg1 )
	f0_local0( f3_arg0, f3_arg1, f3_local2 )
	f0_local0( f3_arg0, f3_local0 )
	f0_local0( f3_arg0, f3_arg1, f3_local2 )
	f0_local0( f3_arg0, f3_arg1 )
	f0_local0( f3_arg0, f3_arg1 )
	f0_local0( f3_arg0, f3_arg1 )
	f3_arg0:ToggleStreakLabels( f3_arg1, true )
	if CONDITIONS.InGame() then
		LUI.TextChat.SetupMenuForSingleLine( f3_arg0 )
	end
	f3_arg0.CategoryGrid.Grid:SetMouseScrollArea( f3_arg0.MouseArea )
end

local f0_local33 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PostLoadShared = f0_local0
end

function StreakSelectBase( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "StreakSelectBase"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "StreakSelectBase", StreakSelectBase )
LockTable( _M )
