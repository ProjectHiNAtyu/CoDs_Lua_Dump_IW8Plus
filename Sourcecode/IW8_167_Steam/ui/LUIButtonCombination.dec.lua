-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 17-11-2025 01:21
LUI.UIButtonCombination = LUI.Class( LUI.UIElement )
LUI.UIButtonCombination.init = function ( f3_arg0, f3_arg1 )
	LUI.UIElement.init( f3_arg0 )
	f3_arg0.id = "ButtonCombination"
	assert( f3_arg1 )
	assert( type( f3_arg1.buttonTable == "table" ) )
	assert( type( f3_arg1.interval == "number" ) )
	assert( type( f3_arg1.callback == "function" ) )
	assert( #f3_arg1.buttonTable ~= 1, "Only one button in buttonTable. UIBindButton should be used for handling of a single button press." )
	assert( 0 < #f3_arg1.buttonTable, "Not enough buttons in buttonTable." )
	local f3_local0 = assert
	local f3_local1
	if f3_arg1.closeOnSuccess then
		f3_local1 = type( f3_arg1.closeOnSuccess == "boolean" )
	else
		f3_local1 = true
	end
	f3_local0( f3_local1 )
	f3_arg0._buttonTable = f3_arg1.buttonTable
	f3_arg0._interval = f3_arg1.interval
	f3_arg0._callback = f3_arg1.callback
	f3_arg0._closeOnSuccess = f3_arg1.closeOnSuccess or false
	f3_arg0:Reset()
	f3_arg0:addEventHandler( "gamepad_button", LUI.UIButtonCombination.HandleButtonPress )
end

LUI.UIButtonCombination.Reset = function ( f2_arg0 )
	f2_arg0._currentButtonIndex = 0
	f2_arg0._lastButtonPressTime = 0
end

LUI.UIButtonCombination.HandleButtonPress = function ( f1_arg0, f1_arg1 )
	if f1_arg1.down then
		return 
	end
	f1_arg0._currentButtonIndex = f1_arg0._currentButtonIndex + 1
	if f1_arg0._buttonTable[f1_arg0._currentButtonIndex] == f1_arg1.button then
		local f1_local0 = Engine.BFBIDEGDFB()
		if f1_arg0._currentButtonIndex == 1 then
			f1_arg0._lastButtonPressTime = f1_local0
		elseif f1_local0 - f1_arg0._lastButtonPressTime <= f1_arg0._interval then
			f1_arg0._lastButtonPressTime = f1_local0
			if f1_arg0._currentButtonIndex == #f1_arg0._buttonTable then
				f1_arg0:_callback( f1_arg1.controller )
				f1_arg0:Reset()
				if f1_arg0._closeOnSuccess then
					f1_arg0:closeTree()
				end
			end
		else
			f1_arg0:Reset()
		end
	else
		f1_arg0:Reset()
	end
end

