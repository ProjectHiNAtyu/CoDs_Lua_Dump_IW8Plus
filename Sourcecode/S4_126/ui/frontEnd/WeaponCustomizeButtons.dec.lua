-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
module( ..., package.seeall )
require( "ui.frontEnd.WeaponCustomizeButton" )
require( "ui.frontEnd.StickerCustomizeButton" )
local f0_local0 = function ( f10_arg0, f10_arg1, f10_arg2, f10_arg3 )
	if f10_arg3 == nil then
		f10_arg3 = {}
	end
	f10_arg3.weaponSlot = f10_arg0.weaponSlot
	f10_arg3.loadoutIndex = f10_arg0.loadoutIndex
	LUI.FlowManager.RequestAddMenu( f10_arg2, true, f10_arg1, nil, f10_arg3, false, true )
end

local f0_local1 = function ( f7_arg0, f7_arg1, f7_arg2, f7_arg3 )
	assert( f7_arg2 )
	assert( f7_arg3 )
	local f7_local0 = LOADOUT.GetLoadoutPlayerData( f7_arg1, f7_arg3 )
	local f7_local1 = f7_local0.weaponSetups[f7_arg2]
	local f7_local2 = f7_local1.weapon:get()
	local f7_local3 = f7_local1.attachmentSetup[0].attachment:get()
	local f7_local4 = f7_local1.attachmentSetup[1].attachment:get()
	local f7_local5 = WEAPON.GetEquippedCamo( f7_local1 )
	local f7_local6 = WEAPON.GetEquippedReticle( f7_local1 )
	local f7_local7 = WEAPON.GetEquippedCharm( f7_local1 )
	local f7_local8 = WEAPON.GetEquippedStickers( f7_local1 )
	f7_arg0.equippedOptic = ATTACHMENT.GetEquippedOptic( f7_local1 )
	f7_arg0.weaponSlot = f7_arg2
	f7_arg0.loadoutIndex = f7_arg3
	local f7_local9 = function ( f9_arg0, f9_arg1 )
		if f9_arg1 ~= "" then
			f9_arg0:SetSelectedImage( f9_arg1 )
		else
			f9_arg0.Image:SetAlpha( 0 )
		end
	end
	
	local f7_local10 = function ( f8_arg0, f8_arg1 )
		for f8_local0 = 1, #f8_arg1, 1 do
			f8_arg0:SetImageWithNum( f8_local0, f8_arg1[f8_local0] )
		end
	end
	
	if not WEAPON.SupportsCamo( WEAPON.GenerateWeaponTable( f7_local1 ) ) then
		f7_arg0.CamoButton:SetDisabledText( Engine[0xED84C33EC5F01EA]( "LUA_MENU/CAMO_DISABLED_DESC" ) )
		f7_arg0.CamoButton:SetButtonDisabled( true )
	elseif f7_local5 then
		local f7_local11
		if f7_local5 == WEAPON.CamoNoneValue then
			f7_local11 = WEAPON.emptyCustomizeSlotIcon
			if not f7_local11 then
			
			else
				f7_local9( f7_arg0.CamoButton, f7_local11 )
			end
		end
		f7_local11 = WEAPON.GetCamoImage( f7_local5 )
	else
		f7_arg0.CamoButton.Image:SetAlpha( 0 )
	end
	f7_arg0.CamoButton:UpdateBreadcrumb( Loot[0x2370C5DAF88C3CD]( f7_arg1, f7_local2 .. GUNSMITH.typeNamePostFix.camos ) )
	if not WEAPON.SupportsOptics( f7_local2 ) then
		f7_arg0.OpticButton:closeTree()
		f7_arg0.OpticButton = nil
	elseif not ATTACHMENT.SupportsCustomReticles( f7_arg0.equippedOptic ) then
		f7_arg0.OpticButton:SetDisabledText( Engine[0xED84C33EC5F01EA]( "LUA_MENU/RETICLE_DISABLED_DESC" ) )
		f7_arg0.OpticButton:SetButtonDisabled( true )
	elseif f7_local6 then
		local f7_local12
		if f7_local6 == WEAPON.ReticleNoneValue then
			f7_local12 = WEAPON.emptyCustomizeSlotIcon
			if not f7_local12 then
			
			else
				f7_local9( f7_arg0.OpticButton, f7_local12 )
				f7_arg0.OpticButton:UpdateBreadcrumb( GUNSMITH.CheckNewReticleForOptic( f7_arg1, f7_arg0.equippedOptic ) )
			end
		end
		f7_local12 = WEAPON.GetReticleImage( f7_local6 )
	end
	if not WEAPON.SupportsCosmetics( f7_local2 ) then
		f7_arg0.CharmButton:closeTree()
		f7_arg0.CharmButton = nil
	elseif f7_local7 then
		local f7_local12
		if f7_local7 == WEAPON.CharmNoneValue then
			f7_local12 = WEAPON.emptyCustomizeSlotIcon
			if not f7_local12 then
			
			else
				f7_local9( f7_arg0.CharmButton, f7_local12 )
				f7_arg0.CharmButton:UpdateBreadcrumb( LOOT.IsCategoryNew( f7_arg1, LOOT.itemTypes.CHARM ) )
			end
		end
		f7_local12 = WEAPON.GetCharmImage( f7_local7 )
	end
	if not (0 < WEAPON.GetMaxStickerSlotsForWeapon( f7_local2 )) then
		f7_arg0.StickerButton:closeTree()
		f7_arg0.StickerButton = nil
	elseif f7_local8 then
		local f7_local13 = {}
		local f7_local14 = WEAPON.GetMaxStickerSlotsForWeapon( f7_local2 )
		for f7_local15 = 1, f7_local14, 1 do
			local f7_local18 = f7_local8[f7_local15]
			local f7_local19
			if f7_local18 == WEAPON.StickerNoneValue then
				f7_local19 = WEAPON.emptyCustomizeSlotIcon
				if not f7_local19 then
				
				else
					table.insert( f7_local13, f7_local19 )
				end
			end
			f7_local19 = WEAPON.GetStickerImage( f7_local18 )
		end
		f7_arg0.StickerButton:SetAvailableImages( f7_local14 )
		f7_local10( f7_arg0.StickerButton, f7_local13 )
		f7_arg0.StickerButton:UpdateBreadcrumb( LOOT.IsCategoryNew( f7_arg1, LOOT.itemTypes.STICKER ) )
	end
end

local f0_local2 = function ( f2_arg0, f2_arg1, f2_arg2 )
	assert( f2_arg0.CamoButton )
	assert( f2_arg0.OpticButton )
	assert( f2_arg0.CharmButton )
	assert( f2_arg0.StickerButton )
	f2_arg0.SetupButtons = f0_local0
	f2_arg0:SetAlignment( LUI.Alignment.Center )
	f2_arg0.CamoButton:addEventHandler( "button_action", function ( f6_arg0, f6_arg1 )
		f2_arg0( f2_arg0, f6_arg1.controller, "CamoCategorySelect", f2_arg0 )
	end )
	f2_arg0.OpticButton:addEventHandler( "button_action", function ( f5_arg0, f5_arg1 )
		f2_arg0( f2_arg0, f5_arg1.controller, "ReticleSelect", {
			equippedOptic = f2_arg0.equippedOptic
		} )
	end )
	f2_arg0.CharmButton:addEventHandler( "button_action", function ( f4_arg0, f4_arg1 )
		f2_arg0( f2_arg0, f4_arg1.controller, "CharmSelect", f2_arg0 )
	end )
	f2_arg0.StickerButton:addEventHandler( "button_action", function ( f3_arg0, f3_arg1 )
		f2_arg0( f2_arg0, f3_arg1.controller, "StickerLocationSelect", f2_arg0 )
	end )
	f2_arg0.CamoButton:setActionSFX( nil )
	f2_arg0.OpticButton:setActionSFX( nil )
	f2_arg0.CharmButton:setActionSFX( nil )
	f2_arg0.StickerButton:setActionSFX( nil )
end

function WeaponCustomizeButtons( menu, controller )
	local self = LUI.UIHorizontalList.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1660 * _1080p, 0, 112 * _1080p )
	self.id = "WeaponCustomizeButtons"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	self:SetSpacing( 30 * _1080p )
	local CamoButton = nil
	
	CamoButton = MenuBuilder.BuildRegisteredType( "WeaponCustomizeButton", {
		controllerIndex = f1_local1
	} )
	CamoButton.id = "CamoButton"
	CamoButton.Description:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU/CAMO_SELECT_DESC" ), 0 )
	CamoButton.Category:setText( Engine[0xED84C33EC5F01EA]( "MENU/CAMOUFLAGE" ), 0 )
	CamoButton:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 301, 0, _1080p * 112 )
	self:addElement( CamoButton )
	self.CamoButton = CamoButton
	
	local OpticButton = nil
	
	OpticButton = MenuBuilder.BuildRegisteredType( "WeaponCustomizeButton", {
		controllerIndex = f1_local1
	} )
	OpticButton.id = "OpticButton"
	OpticButton.Description:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU/RETICLE_SELECT_DESC" ), 0 )
	OpticButton.Category:setText( Engine[0xED84C33EC5F01EA]( "MENU/RETICLE" ), 0 )
	OpticButton:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 331, _1080p * 632, 0, _1080p * 112 )
	self:addElement( OpticButton )
	self.OpticButton = OpticButton
	
	local CharmButton = nil
	
	CharmButton = MenuBuilder.BuildRegisteredType( "WeaponCustomizeButton", {
		controllerIndex = f1_local1
	} )
	CharmButton.id = "CharmButton"
	CharmButton.Description:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU/CHARM_SELECT_DESC" ), 0 )
	CharmButton.Category:setText( Engine[0xED84C33EC5F01EA]( "MENU/CHARM" ), 0 )
	CharmButton:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 662, _1080p * 963, 0, _1080p * 112 )
	self:addElement( CharmButton )
	self.CharmButton = CharmButton
	
	local StickerButton = nil
	
	StickerButton = MenuBuilder.BuildRegisteredType( "StickerCustomizeButton", {
		controllerIndex = f1_local1
	} )
	StickerButton.id = "StickerButton"
	StickerButton.Description:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU/STICKER_SELECT_DESC" ), 0 )
	StickerButton.Category:setText( Engine[0xED84C33EC5F01EA]( "MENU/STICKER" ), 0 )
	StickerButton:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 993, _1080p * 1294, 0, _1080p * 112 )
	self:addElement( StickerButton )
	self.StickerButton = StickerButton
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "WeaponCustomizeButtons", WeaponCustomizeButtons )
LockTable( _M )
