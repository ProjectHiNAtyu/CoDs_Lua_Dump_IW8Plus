-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
module( ..., package.seeall )
local f0_local0 = "GLGunsmithButton"
local f0_local1 = {
	EXTRA = 3,
	MUZZLE = 1,
	BARREL = 2,
	RECEIVER = 9,
	GUNPERK = 7,
	MAGAZINE = 8,
	OPTIC = 4,
	BACKPIECE = 5,
	UNDERMOUNT = 6,
	COMB = 11,
	REARGRIP = 10
}
local f0_local2 = {
	[f0_local1.MUZZLE] = {
		up = f0_local1.BARREL,
		right = f0_local1.UNDERMOUNT,
		left = f0_local1.MUZZLE,
		down = f0_local1.UNDERMOUNT
	},
	[f0_local1.BARREL] = {
		up = f0_local1.BARREL,
		right = f0_local1.EXTRA,
		left = f0_local1.MUZZLE,
		down = f0_local1.UNDERMOUNT
	},
	[f0_local1.EXTRA] = {
		up = f0_local1.EXTRA,
		right = f0_local1.OPTIC,
		left = f0_local1.BARREL,
		down = f0_local1.GUNPERK
	},
	[f0_local1.OPTIC] = {
		up = f0_local1.OPTIC,
		right = f0_local1.BACKPIECE,
		left = f0_local1.EXTRA,
		down = f0_local1.MAGAZINE
	},
	[f0_local1.BACKPIECE] = {
		up = f0_local1.OPTIC,
		right = f0_local1.BACKPIECE,
		left = f0_local1.OPTIC,
		down = f0_local1.COMB
	},
	[f0_local1.UNDERMOUNT] = {
		up = f0_local1.BARREL,
		right = f0_local1.GUNPERK,
		left = f0_local1.MUZZLE,
		down = f0_local1.GUNPERK
	},
	[f0_local1.GUNPERK] = {
		up = f0_local1.EXTRA,
		right = f0_local1.MAGAZINE,
		left = f0_local1.UNDERMOUNT,
		down = f0_local1.MAGAZINE
	},
	[f0_local1.MAGAZINE] = {
		up = f0_local1.OPTIC,
		right = f0_local1.RECEIVER,
		left = f0_local1.GUNPERK,
		down = f0_local1.MAGAZINE
	},
	[f0_local1.RECEIVER] = {
		up = f0_local1.REARGRIP,
		right = f0_local1.REARGRIP,
		left = f0_local1.MAGAZINE,
		down = f0_local1.RECEIVER
	},
	[f0_local1.REARGRIP] = {
		up = f0_local1.COMB,
		right = f0_local1.COMB,
		left = f0_local1.RECEIVER,
		down = f0_local1.RECEIVER
	},
	[f0_local1.COMB] = {
		up = f0_local1.BACKPIECE,
		right = f0_local1.COMB,
		left = f0_local1.REARGRIP,
		down = f0_local1.REARGRIP
	}
}
local f0_local3 = 1
local f0_local4 = 5
local f0_local5 = 6
local f0_local6 = 11
local f0_local7 = function ( f59_arg0, f59_arg1 )
	f59_arg0.Tabs = LUI.TabManager.new( {
		spacing = 4,
		wrap = true,
		tabHeight = _1080p * 52,
		buildTab = function ()
			return MenuBuilder.BuildRegisteredType( "SubMenuTab", {
				controllerIndex = f59_arg0.controllerIndex
			} )
		end,
		controllerIndex = f59_arg1.controllerIndex
	} )
	f59_arg0.Tabs.id = "Tabs"
	f59_arg0.Tabs:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 90, _1080p * 993, _1080p * 108, _1080p * 160 )
	f59_arg0:addElement( f59_arg0.Tabs )
	local f59_local0 = LUI.FlowManager.GetScopedData( f59_arg0 )
	local f59_local1 = {}
	if not GUNSMITH.IsDisabled( f59_arg0._weaponTable.weapon, f59_arg0._weaponTable.variantID ) then
		f59_local1[#f59_local1 + 1] = {
			menuName = "GunsmithAttachments",
			name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xE16A742EB9B4477 ) )
		}
	end
	if not GUNSMITH.IsCustomizationDisabled( f59_arg0._weaponTable.weapon ) and Engine[0xBE5345D3926D620]() and Engine[0x5EA7EB683287036]( f59_arg0._controllerIndex ) then
		f59_local1[#f59_local1 + 1] = {
			name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xAFB88FBDAA55912 ) ),
			menuName = GUNSMITH.GetGunsmithCustomizeTabFrameRef()
		}
	end
	if #f59_local1 == 1 then
		f59_arg0.Tabs:SetAlpha( 0 )
	elseif #f59_local1 < 1 then
		f59_arg0.Tabs:closeTree()
		f59_arg0.Tabs = nil
		return 
	end
	local f59_local2 = {}
	for f59_local6, f59_local7 in ipairs( f59_local1 ) do
		table.insert( f59_local2, {
			name = f59_local7.name,
			disabled = f59_local7.disabled,
			hasDefaultFocus = f59_local6 - 1 == f59_local0.activeTabIndex,
			focusFunction = function ( f60_arg0, f60_arg1, f60_arg2, f60_arg3 )
				if f59_arg0.activeTabIndex and f60_arg2 == f59_arg0.activeTabIndex and f59_arg0.activeTabWidget then
					return 
				end
				TAB.UpdateBuiltWidgetOnTabChange( f59_arg0, f59_arg0.activeTabIndex, "activeTabWidget", f60_arg2, f60_arg3, f59_arg0.menuName, f59_arg0 )
				f59_arg0.activeTabIndex = f60_arg2
				local f60_local0
				if f59_arg0.previousTabName == "GunsmithAttachments" then
					f60_local0 = "attachmentTimeSpent"
				else
					f60_local0 = "customizeTimeSpent"
				end
				local f60_local1 = f59_arg0.lastTimeStamp
				local f60_local2 = Engine[0x3B8CFB6758EF57C]()
				f59_arg0.lastTimeStamp = Engine[0x3B8CFB6758EF57C]()
				if f59_arg0.menuName == "GunsmithAttachments" then
					f59_arg0[f60_local0] = f59_arg0[f60_local0] + Engine[0x250B0A331992E67]( f60_local2, "-" .. f60_local1 )
					f59_arg0.previousTabName = "GunsmithAttachments"
					if f59_arg0.HelperBar then
						f59_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
							side = "left",
							button_ref = "button_alt2",
							priority = 5,
							helper_text = Engine[0xED84C33EC5F01EA]( 0xE2F778D98189FBF )
						} )
					end
				else
					f59_arg0[f60_local0] = f59_arg0[f60_local0] + Engine[0x250B0A331992E67]( f60_local2, "-" .. f60_local1 )
					f59_arg0.previousTabName = GUNSMITH.GetGunsmithCustomizeTabFrameRef()
					if f59_arg0.HelperBar then
						f59_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
							side = "left",
							button_ref = "button_alt2"
						} )
					end
				end
				Engine[0xC4146BA76D0F982]( SOUND_SETS.default.tabHighlight )
			end
		} )
	end
	f59_arg0.Tabs:SetTabs( f59_local2 )
	f59_local3, f59_local4 = GUNSMITH.CheckNewAttachmentAndCustomization( f59_arg0._controllerIndex, f59_arg0._weaponPlayerData )
	for f59_local5 = 1, #f59_local1, 1 do
		local f59_local8 = LUI.TabManager.GetTabAtIndex( f59_arg0.Tabs, f59_local5 )
		if f59_local1[f59_local5].menuName == "GunsmithAttachments" then
			local f59_local9 = f59_local8.NewItemSmallIcon
			local f59_local10 = f59_local9
			f59_local9 = f59_local9.UpdateAlpha
			local f59_local11
			if f59_local3 then
				f59_local11 = 1
			else
				f59_local11 = 0
			end
			f59_local9( f59_local10, f59_local11, 0 )
		end
		if f59_local1[f59_local5].menuName == GUNSMITH.GetGunsmithCustomizeTabFrameRef() then
			local f59_local9 = f59_local8.NewItemSmallIcon
			local f59_local10 = f59_local9
			f59_local9 = f59_local9.UpdateAlpha
			local f59_local11
			if f59_local4 then
				f59_local11 = 1
			else
				f59_local11 = 0
			end
			f59_local9( f59_local10, f59_local11, 0 )
		end
	end
end

local f0_local8 = function ( f57_arg0, f57_arg1, f57_arg2 )
	local f57_local0 = LOOT.GetItemID( f57_arg0._weaponTable.weapon )
	if f57_arg0.SaveMod and GUNSMITH.IsSaveWeaponMenuAllowed( f57_arg2.forShowcase ) then
		local f57_local1 = GUNSMITH.CountAvailableCustomModSlots( f57_arg1, f57_arg0._weaponTable.weapon, f57_local0 )
		local f57_local2 = GUNSMITH.CountModSlotsUnlocked( f57_arg1, f57_local0 )
		f57_arg0.CustomModSlotCount:setText( Engine[0xED84C33EC5F01EA]( 0x8BD409EFCF83213, f57_local2 - f57_local1, f57_local2 ) )
		local f57_local3 = GUNSMITH.GetNextModUnlockRank( f57_arg1, f57_arg0._weaponTable.weapon, f57_local0 )
		if f57_local3 ~= nil and 0 < #f57_local3 then
			f57_arg0.NextSlotUnlock:setText( Engine[0xED84C33EC5F01EA]( 0x6495AF31E018C8A, f57_local3 ) )
		else
			f57_arg0.NextSlotUnlock:SetAlpha( 0 )
		end
		if f57_arg0.HelperBar then
			f57_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
				kbm_only = true,
				priority = 11,
				side = "left",
				button_ref = "button_left_trigger",
				helper_text = Engine[0xED84C33EC5F01EA]( 0x9ABCD1A3258EFA )
			} )
		end
		f57_arg0:AddGamepadEventCallback( "button_left_trigger", function ( f58_arg0, f58_arg1 )
			Engine[0xC4146BA76D0F982]( SOUND_SETS.default.menuDecode )
			local f58_local0 = LOOT.GetItemID( f58_arg0._weaponTable.weapon )
			local f58_local1 = f58_arg1.controller or f57_arg0
			local f58_local2 = nil
			if 0 < #f57_arg0._weaponTable.blueprintName then
				f58_local2 = GUNSMITH.GetCustomModSlot( f58_arg0._weaponTable.blueprintName )
			else
				f58_local2 = GUNSMITH.GetFirstFreeCustomModSlot( f58_local1, f58_arg0._weaponTable.weapon, f58_local0 )
			end
			if f58_local2 then
				LUI.FlowManager.RequestPopupMenu( nil, "SaveCustomMod", true, f58_local1, false, {
					loadoutIndex = f57_arg0.loadoutIndex,
					weaponIndex = f57_arg0.weaponSlot,
					modSlot = f58_local2
				} )
			else
				LUI.FlowManager.RequestPopupMenu( nil, "CustomModSlotsFull", true, f58_local1, false, {
					weaponRef = f58_arg0._weaponTable.weapon
				} )
			end
		end )
	else
		local f57_local1 = GUNSMITH.GetNextModUnlockRank( f57_arg1, f57_arg0._weaponTable.weapon, f57_local0 )
		if f57_local1 ~= nil and 0 < #f57_local1 then
			f57_arg0.NextSlotUnlock:setText( Engine[0xED84C33EC5F01EA]( 0xD79A91D2714CA68, f57_local1 ) )
		else
			f57_arg0.NextSlotUnlock:SetAlpha( 0 )
		end
	end
end

local f0_local9 = function ( f55_arg0, f55_arg1 )
	return function ()
		FrontEndScene.HideWeaponModels()
		if not WEAPON.IsWeaponNoneValue( f55_arg0._weaponTable.weapon ) then
			f55_arg0._weaponModel = WEAPON.GetWeaponModel( f55_arg0, FrontEndScene.ClientWeapons.Preview, CSV.weaponOffsets.previewFile )
		else
			f55_arg0._weaponModel = SHOWCASE.GetDefaultWeaponModel()
			f55_arg0._weaponTable = WEAPON.GenerateEmptyWeaponTable( f55_arg0._weaponPlayerData )
			f55_arg0._weaponTable.weapon = WEAPON.DefaultPrimary
		end
		f55_arg0:addElement( f55_arg0._weaponModel )
		WEAPON.LoadAndSetModel( f55_arg0, f55_arg0._weaponModel, f55_arg0._weaponTable )
		f55_arg0:processEvent( {
			name = "scene_transitioned"
		} )
	end
	
end

local f0_local10 = function ( f54_arg0, f54_arg1, f54_arg2 )
	if not f54_arg2.loadoutIndex then
		DebugPrint( "WARNING: Missing \"loadoutIndex\" option for Gunsmith menu. Only OK after a MyChanges." )
		f54_arg2.loadoutIndex = 0
	end
	if not f54_arg2.weaponSlot then
		DebugPrint( "WARNING: Missing \"weaponSlot\" option for Gunsmith menu. Only OK after a MyChanges." )
		f54_arg2.weaponSlot = 0
	end
end

local f0_local11 = function ( f53_arg0, f53_arg1 )
	local f53_local0 = LUI.FlowManager.GetScopedData( f53_arg0 )
	f53_local0.startTime = Engine[0x3B8CFB6758EF57C]()
	local f53_local1 = f53_local0.lastTimeStamp
	if not f53_local1 then
		f53_local1 = Engine[0x3B8CFB6758EF57C]()
	end
	f53_local0.lastTimeStamp = f53_local1
	f53_local0.attachmentTimeSpent = f53_local0.attachmentTimeSpent or 0
	f53_local0.customizeTimeSpent = f53_local0.customizeTimeSpent or 0
	f53_local0.previousAttachmentConfig = ATTACHMENT.GetConfigString( f53_arg0._weaponTable )
	f53_local0.previousCosmeticConfig = WEAPON.GetCosmeticConfigString( f53_arg0._weaponTable )
	f53_local0.previousBlueprintString = WEAPON.GetWeaponBlueprintString( f53_arg1, f53_arg0._weaponTable, f53_local0.previousAttachmentConfig )
end

local f0_local12 = function ( f45_arg0, f45_arg1, f45_arg2 )
	GUNSMITH.AddHelperBarSaveWeaponButton( f45_arg0, f45_arg1, f45_arg2.forShowcase )
	if CONDITIONS.IsWeaponPreviewEnabled() and f45_arg0.HelperBar then
		f45_arg0.HelperBar.Background:SetAlpha( 0 )
		LUI.TextChat.SetupMenuForNoChat( f45_arg0 )
		f45_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			side = "left",
			priority = 10,
			replaceTop = true,
			button_ref = "button_l3",
			helper_text = Engine[0xED84C33EC5F01EA]( 0xCBEAF62674E5E75 ),
			helper_definition = Engine[0xED84C33EC5F01EA]( 0xF2D581450245105 )
		} )
		f45_arg0:AddGamepadEventCallback( "button_left_stick", function ( f52_arg0, f52_arg1 )
			local f52_local0 = f52_arg1.controller or f45_arg0
			local f52_local1 = f45_arg0
			local f52_local2
			if f52_arg1.qualifier ~= "keyboard" and f52_arg1.qualifier ~= "gamepad" then
				f52_local2 = false
			else
				f52_local2 = true
			end
			f52_local1.shouldPlaySound = f52_local2
			f45_arg0.weaponPlayerData = f52_arg0._weaponPlayerData
			GUNSMITH.OpenWeaponPreviewMenu( f45_arg0.weaponPlayerData, f52_local0, f45_arg0 )
		end )
	end
	f45_arg0:AddGamepadEventCallback( "button_secondary", function ( f51_arg0, f51_arg1 )
		if LUI.FlowManager.IsInStack( LOADOUT.GetLoadoutMenuRef() ) then
			local f51_local0 = LUI.FlowManager.GetScopedData( LOADOUT.GetLoadoutMenuRef() )
			local f51_local1 = f51_arg1.controller or f45_arg0
			local f51_local2 = LUI.FlowManager.GetScopedData( f51_arg0 )
			local f51_local3 = f51_local2.lastTimeStamp or "0"
			local f51_local4 = Engine[0x3B8CFB6758EF57C]()
			if f51_local2.attachmentTimeSpent and f51_local2.customizeTimeSpent then
				f51_local2.attachmentTimeSpent = f51_local2.attachmentTimeSpent + Engine[0x250B0A331992E67]( f51_local4, "-" .. f51_local3 )
				f51_local2.customizeTimeSpent = f51_local2.customizeTimeSpent + Engine[0x250B0A331992E67]( f51_local4, "-" .. f51_local3 )
				METRICS.GunsmithSessionSendDLogEvent( f51_local1, f51_local0.sessionID, f51_arg0._weaponTable, f45_arg0.loadoutIndex, f51_local2.attachmentTimeSpent, f51_local2.customizeTimeSpent, f51_local2.previousAttachmentConfig, f51_local2.previousCosmeticConfig, f51_local2.previousBlueprintString )
			end
		end
	end )
	if CONDITIONS.IsFrontendFiringRangeEnabled() then
		local f45_local0 = function ()
			f45_arg0.currentWeaponTable = WEAPON.GenerateWeaponTable( f45_arg0._weaponPlayerData )
			local f50_local0 = f45_arg0._weaponSlot
			local f50_local1 = WEAPON.PrimarySlot
			f45_arg0.secondaryWeaponTable = WEAPON.GenerateWeaponTable( f45_arg0._loadoutPlayerData.weaponSetups[REG7 and WEAPON.SecondarySlot or WEAPON.PrimarySlot] )
			f45_arg0.fromGunsmith = true
			if 0 < tonumber( f45_arg0.currentWeaponTable.variantID ) then
				f45_arg0.currentWeaponTable.lootName = WEAPON.GetLootWeaponName( f45_arg0.currentWeaponTable.weapon, f45_arg0.currentWeaponTable.lootID )
			end
			if 0 < tonumber( f45_arg0.secondaryWeaponTable.variantID ) then
				f45_arg0.secondaryWeaponTable.lootName = WEAPON.GetLootWeaponName( f45_arg0.secondaryWeaponTable.weapon, f45_arg0.secondaryWeaponTable.lootID )
			end
			WEAPON.OpenFiringRange( f45_arg0, f45_arg0 )
			Engine[0xC4146BA76D0F982]( CoD.SFX.MouseClick )
		end
		
		if CONDITIONS.IsFrontendFiringRangeEnabled() and not f45_arg2.forShowcase then
			f45_arg0:AddGamepadEventCallback( "button_alt2", function ( f49_arg0, f49_arg1 )
				if LUI.IsLastInputKeyboardMouse( f45_arg0 ) then
					f45_arg0()
				end
			end )
			if f45_arg0.HelperBar then
				f45_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
					isHold = true,
					priority = 1,
					replaceTop = true,
					button_ref = "button_alt2",
					side = "left",
					helper_text = Engine[0xED84C33EC5F01EA]( 0x142AAF5CD0DA682 ),
					helper_definition = Engine[0xED84C33EC5F01EA]( 0x71B72F1718054D7 ),
					container = f45_arg0.FiringRangePrompt,
					callback = f45_local0
				} )
			end
		end
	end
	if GUNSMITH.IsRemoveAllAttachmentsEnabled() and CONDITIONS.InFrontend() and not f45_arg2.forShowcase then
		local f45_local0 = function ()
			local f47_local0 = f45_arg0._weaponPlayerData
			if GUNSMITH.IsWeaponSetupBlueprintIntact( f47_local0 ) then
				GUNSMITH.SetupCallbackFuncForBlueprintEdit( f45_arg0, f47_local0, GUNSMITH.BlueprintEditStatus.EditBlueprint, function ()
					for f48_local4, f48_local5 in pairs( f47_local0._usedButtons ) do
						if f48_local5 ~= "receiver" then
							local f48_local3 = f47_local0[f47_local0 .. ATTACHMENT.GetAttachmentCategoryButton( f48_local5 )]
							f48_local3.RemoveAll = true
							f48_local3:TryRemoveAttachment( f47_local0 )
						end
					end
					f47_local0:dispatchEventToRoot( {
						name = "break_blueprint"
					} )
				end )
			else
				for f47_local5, f47_local6 in pairs( f45_arg0._usedButtons ) do
					if f47_local6 ~= "receiver" then
						local f47_local4 = f45_arg0[f45_arg0 .. ATTACHMENT.GetAttachmentCategoryButton( f47_local6 )]
						f47_local4.RemoveAll = true
						f47_local4:TryRemoveAttachment( f45_arg0 )
					end
				end
			end
			Engine[0xC4146BA76D0F982]( CoD.SFX.MouseClick )
		end
		
		f45_arg0:AddGamepadEventCallback( "button_right_trigger", function ( f46_arg0, f46_arg1 )
			if LUI.IsLastInputKeyboardMouse( f45_arg0 ) then
				f45_arg0()
			end
		end )
		if f45_arg0.HelperBar then
			f45_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
				side = "left",
				priority = 1,
				replaceTop = true,
				button_ref = "button_right_trigger",
				isHold = true,
				helper_text = Engine[0xED84C33EC5F01EA]( 0xE2F778D98189FBF ),
				helper_definition = Engine[0xED84C33EC5F01EA]( 0xE2F778D98189FBF ),
				callback = f45_local0
			} )
		end
	end
end

local f0_local13 = function ( f44_arg0, f44_arg1 )
	local f44_local0 = f44_arg0[f0_local0 .. f44_arg1]
	if f44_local0 then
		if GUNSMITH.GetSelectedAttachIndexForCategory( f44_local0._category, f44_arg0._weaponTable ) then
			return false
		elseif f44_local0._attachments then
			for f44_local5, f44_local6 in ipairs( f44_local0._attachments ) do
				local f44_local4 = CONDITIONS.AreRestrictionsActive()
				if f44_local4 then
					f44_local4 = MatchRules[0x722F56788C744E9]( f44_local6.ref, f44_local0._weaponRef )
				end
				if not f44_local4 and f44_local6.ref ~= "none" then
					return false
				end
			end
		end
	end
	return true
end

local f0_local14 = function ( f43_arg0 )
	for f43_local0 = 1, GL_HACK.GetGunsmithMaxCategories() + 1, 1 do
		if not f43_arg0._usedButtons[f43_local0] or f0_local0( f43_arg0, f43_local0 ) then
			local f43_local3 = f43_arg0[f0_local0 .. f43_local0]
			assert( f43_local3 )
			f43_local3:closeTree()
			f43_arg0[f0_local0 .. f43_local0] = nil
			f43_arg0._usedButtons[f43_local0] = nil
		end
	end
	f43_arg0._buttonsRemoved = true
end

local f0_local15 = function ( f42_arg0, f42_arg1, f42_arg2 )
	local f42_local0 = GL_HACK.GetGunsmithMaxCategories() / 2
	local f42_local1
	if f42_arg2 then
		f42_local1 = 1
	else
		f42_local1 = f0_local0
	end
	local f42_local2
	if f42_arg2 then
		f42_local2 = f0_local0
		if not f42_local2 then
		
		else
			local f42_local3, f42_local4 = nil
			for f42_local5 = f42_arg1, f42_local1, -1 do
				if f42_arg0._usedButtons[f42_local5] then
					f42_local3 = f42_local5
					break
				end
			end
			for f42_local5 = f42_arg1, f42_local2, 1 do
				if f42_arg0._usedButtons[f42_local5] then
					f42_local4 = f42_local5
					break
				end
			end
			if f42_local3 then
				local f42_local5 = f42_arg1 - f42_local3
				if not f42_local5 then
				
				else
					if f42_local4 then
						local f42_local6 = f42_local4 - f42_arg1
						if not f42_local6 then
						
						else
							if f42_local5 < f42_local6 and not f42_local3 then
								f42_local7 = f42_local3
							else
								local f42_local7 = f42_local4
							end
							return f42_local7
						end
					end
					f42_local6 = f42_local2
				end
			end
			f42_local5 = f42_local2
		end
	end
	f42_local2 = GL_HACK.GetGunsmithMaxCategories()
end

local f0_local16 = function ( f41_arg0 )
	for f41_local0 = 1, GUNSMITH.maxCategories, 1 do
		if f41_arg0._usedButtons[f41_local0] then
			local f41_local3 = f41_arg0._usedButtons[f41_local0]
			local f41_local4 = f41_arg0[f0_local0 .. f41_local0]
			f41_local4.navigation = f41_local4.navigation or {}
			local f41_local5 = f0_local0[f41_local0].up
			if f41_local5 == f0_local0 and not f41_arg0._usedButtons[f41_local5] then
				f41_local5 = f0_local0
			end
			f41_local5 = f0_local0( f41_arg0, f41_local5, f0_local0 <= f41_local0 )
			if f41_local5 then
				f41_local4.navigation.up = f41_arg0[f0_local0 .. f41_local5]
			end
			local f41_local6 = f0_local0( f41_arg0, f0_local0[f41_local0].down, f0_local0 <= f41_local0 )
			if f41_local6 then
				f41_local4.navigation.down = f41_arg0[f0_local0 .. f41_local6]
			end
			local f41_local7 = f0_local0[f41_local0].left
			if f41_local7 then
				local f41_local8 = f41_local7
				local f41_local9 = f0_local0 and f0_local0 or f0_local0
				for f41_local10 = f41_local7, f41_local9, -1 do
					if f41_arg0._usedButtons[f41_local10] then
						f41_local8 = f41_local10
						break
					end
				end
				f41_local4.navigation.left = f41_arg0[f0_local0 .. f41_local8]
			end
			local f41_local8 = f0_local0[f41_local0].right
			if f41_local8 then
				local f41_local9 = f41_local8
				local f41_local10 = f0_local0 and f0_local0 or f0_local0
				for f41_local11 = f41_local8, f41_local10, 1 do
					if f41_arg0._usedButtons[f41_local11] then
						f41_local9 = f41_local11
						break
					end
				end
				f41_local4.navigation.right = f41_arg0[f0_local0 .. f41_local9]
			end
		end
	end
	f41_arg0._navigationSetup = true
end

local f0_local17 = function ( f40_arg0 )
	local f40_local0 = StringTable[0x8073B436CDE1BF]( CSV.attachmentCategoryLocks.file, CSV.attachmentCategoryLocks.cols.ref, f40_arg0 )
	local f40_local1
	if f40_local0 then
		f40_local1 = f40_local0
	else
		f40_local1 = 0 <= f40_local0
	end
	return f40_local1
end

local f0_local18 = function ( f39_arg0, f39_arg1 )
	local f39_local0 = {
		unlockLevel = 4294967295,
		isLocked = false
	}
	local f39_local1 = WEAPON.GetWeaponModelName( f39_arg0._weaponTable.weapon, f39_arg0._weaponTable, {
		includeAttachments = true
	} )
	local f39_local2 = ClientWeapon[0x8E1E8769A4A0774]( f39_arg1, f39_local1 )
	local f39_local3
	if not GUNSMITH.IsDisabled( f39_arg0._weaponTable.weapon ) then
		f39_local3 = ATTACHMENT.GetBundleByRef( f39_arg0._weaponTable.weapon .. "_tuning" )
	else
		f39_local3 = false
	end
	local f39_local4
	if f39_local3 then
		f39_local4 = f39_local3
	else
		f39_local4 = LOOT.IsUnlockedWithID( f39_arg1, f39_local3[0x28887F70BF5EBA] )
	end
	local f39_local5 = 0 < #f39_arg0._categoryLockDetails
	for f39_local12, f39_local13 in pairs( f39_arg0._usedButtons ) do
		if f39_local13 then
			local f39_local9 = f39_arg0[f0_local0 .. f39_local12]
			assert( f39_local9 )
			local f39_local10 = {
				category = f39_local13,
				attachments = f39_arg0._attachments[f39_local13],
				weaponPlayerData = f39_arg0._weaponPlayerData,
				isTunable = ATTACHMENT.IsWeaponAttachmentTunable( f39_arg1, f39_arg0._weaponTable, f39_local13, f39_local4, f39_local1, f39_local2 ),
				loadoutIndex = f39_arg0._loadoutIndex,
				weaponSlot = f39_arg0._weaponSlot,
				forShowcase = f39_arg0._forShowcase,
				weaponTable = f39_arg0._weaponTable,
				weaponModelName = f39_local1,
				categoryLockData = f39_local0
			}
			if not IsPrivateMatch() and f0_local0( f39_arg0._weaponTable.weapon ) and f39_arg0._categoryLockDetails[f39_local13] then
				f39_local10.categoryLockData = f39_arg0._categoryLockDetails[f39_local13]
			end
			f39_local9:Setup( f39_arg1, f39_local10 )
			if CONDITIONS.InFrontend() and isCurrentAttachmentTunable and f39_local4 and not GUNSMITH.IsWeaponSetupBlueprintIntact( f39_arg0._weaponPlayerData ) and not Onboarding.Tuning.WasCompleted( f39_arg0, f39_arg1 ) and not f39_arg0._forShowcase then
				local f39_local11 = f39_local9.TuneButton
				f39_local11._isFocused = true
				f39_local11:UpdateState()
				f39_local11:SetVisible( true )
				f39_local11:SetHandleMouse( true )
				f39_local11:SetButtonDisabled( false )
				TIP.CreateTips( Onboarding.Tips.TUNING( f39_arg1, f39_local9, ATTACHMENT.ShouldAttachmentCatageoryTuningTipPointLeft( f39_local13 ) ) )
			end
		end
	end
	if not f39_arg0._buttonsRemoved then
		f0_local0( f39_arg0 )
	end
	if not f39_arg0._navigationSetup then
		f0_local0( f39_arg0 )
	end
end

local f0_local19 = function ( f38_arg0, f38_arg1, f38_arg2 )
	if f38_arg0.GunsmithWeaponDetails then
		local f38_local0 = GUNSMITH.GetWeaponDetails( f38_arg1, f38_arg2 )
		f38_arg0._curAmmoDataTable = f38_local0
		if f38_arg0.UpdateDetailsDataSources then
			f38_arg0:UpdateDetailsDataSources( f38_arg1, f38_local0 )
		else
			f38_arg0.GunsmithWeaponDetails:Setup( f38_arg1, f38_local0 )
		end
		f38_arg0.GunsmithWeaponDetails:UpdateTacticalBuildLockUp( f38_arg0._weaponPlayerData, f38_arg2 )
	end
end

local f0_local20 = function ( f37_arg0, f37_arg1 )
	return ClientModel[0x9088CC2C1E6A1E9]( CLIENT_MODEL.GetClientModelIndex( f37_arg0 ), f37_arg1 )
end

local f0_local21 = function ( f36_arg0, f36_arg1, f36_arg2, f36_arg3 )
	local f36_local0 = CLIENT_MODEL.GetClientModelIndex( f36_arg1 )
	local f36_local1 = ClientModel[0x7FE4C5AFE1F4377]( f36_local0 )
	local f36_local2 = Engine[0xC3B7925CCAC9430]( f36_arg0, f36_arg2, f36_arg3 )
	f36_local1.yAngle = f36_local2.yAngle
	f36_local1.xAngle = f36_local2.xAngle
	ClientModel[0xEFA1738E096A743]( f36_local0, f36_local1 )
end

local f0_local22 = function ( f35_arg0 )
	CLIENT_MODEL.SetAllModelsModifiable( f35_arg0 )
	CLIENT_MODEL.InitGunViseModels()
	CLIENT_MODEL.HideModels( {
		base = CLIENT_MODEL.coreMPModels.GUN_VISE_SUPPORT_BASE,
		insert = CLIENT_MODEL.coreMPModels.GUN_VISE_SUPPORT_INSERT
	} )
	CLIENT_MODEL.SetModel( CLIENT_MODEL.coreMPModels.MAG_DISPLAY, "tag_origin" )
end

local f0_local23 = function ( f30_arg0, f30_arg1, f30_arg2 )
	local f30_local0 = {
		base = CLIENT_MODEL.coreMPModels.GUN_VISE_MAGWELL_BASE,
		insert = CLIENT_MODEL.coreMPModels.GUN_VISE_MAGWELL_INSERT
	}
	local f30_local1 = ClientWeapon[0x5DD69014A9C290]( FrontEndScene.ClientWeapons.Preview )
	ClientWeapon[0x8B8A4E0355DF0C0]( FrontEndScene.ClientWeapons.Preview, 0, 0, 0 )
	local f30_local2
	if f30_arg2 then
		f30_local2 = f30_arg0.GunsmithWeaponDetails:Wait( 5 )
		if not f30_local2 then
		
		else
			f30_local2.onComplete = function ()
				GUNSMITH.UpdateAmmoModel( f30_arg0, f30_arg0 )
				f30_arg0( f30_arg0, f30_arg0.insert, f30_arg0, "offset_vise_attach" )
				local f31_local0 = Engine[0xF3C157C48E60860]( f30_arg0, f30_arg0, "offset_vise_attach" )
				local f31_local1 = Engine[0xF3C157C48E60860]( f30_arg0, f30_arg0, WEAPON.SilencedFlashTag )
				local f31_local2 = Engine[0xF3C157C48E60860]( f30_arg0, f30_arg0, WEAPON.MuzzleFlashTag )
				local f31_local3
				if f31_local1 then
					f31_local3 = WEAPON.SilencedFlashTag
					if not f31_local3 then
						if f31_local2 then
							f31_local3 = WEAPON.MuzzleFlashTag
							if not f31_local3 then
							
							else
								local f31_local4 = Engine[0xC3B7925CCAC9430]( f30_arg0, f30_arg0, GUNSMITH.defaultTag )
								local f31_local5 = Engine[0xC3B7925CCAC9430]( f30_arg0, f30_arg0, f31_local3 )
								local f31_local6 = Engine[0xC3B7925CCAC9430]( f30_arg0, f30_arg0, WEAPON.RearTag )
								local f31_local7 = f30_arg0( CLIENT_MODEL.coreMPModels.GUN_VISE_BASE, CLIENT_MODEL.coreMPModels.GUN_VISE_BASE.tagOrigin )
								local f31_local8 = (f31_local5.xPosition + f31_local6.xPosition) / 2
								local f31_local9 = (f31_local5.yPosition + f31_local6.yPosition) / 2
								local f31_local10 = f31_local4.xPosition - f31_local8
								local f31_local11 = f31_local4.yPosition - f31_local9
								local f31_local12 = f31_local4.xPosition - f31_local7.xPosition + f31_local10
								local f31_local13 = f31_local4.yPosition - f31_local7.yPosition + f31_local11
								local f31_local14 = Engine[0xC3B7925CCAC9430]( f30_arg0, f30_arg0, "tag_mag_attach" )
								local f31_local15 = f30_arg0( f30_arg0.insert, f30_arg0.insert.tagGunAttach )
								local f31_local16 = f31_local15.zPosition - f31_local14.zPosition + GUNSMITH.GetWeaponZOffset( f30_arg0, f30_arg0, f30_arg0._weaponTable.attachments, true )
								DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.xOffset:SetValue( f30_arg0, f31_local12 )
								DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.yOffset:SetValue( f30_arg0, f31_local13 )
								DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.zOffset:SetValue( f30_arg0, f31_local16 )
								ClientWeapon[0x8B8A4E0355DF0C0]( FrontEndScene.ClientWeapons.Preview, f31_local12, f31_local13, f31_local16 )
								CLIENT_MODEL.HideModels( f30_arg0 )
								local f31_local17 = f30_arg0 and f30_arg0.GunsmithWeaponDetails:Wait( 5 ) or f30_arg0:Wait( 5 )
								f31_local17.onComplete = function ()
									local f32_local0 = StringTable[0x2DCF0973239E909]( CSV.attachmentCategories.file, CSV.attachmentCategories.cols.ref, "receiver", CSV.attachmentCategories.cols.bone )
									local f32_local1 = Engine[0xC3B7925CCAC9430]( f31_local0, f31_local0, f32_local0 )
									local f32_local2 = "attach_zoom," .. "receiver" .. "," .. f32_local0 .. "," .. f32_local1.xPosition .. "," .. f32_local1.yPosition .. "," .. f32_local1.zPosition .. "," .. f32_local1.xAngle .. "," .. f32_local1.yAngle .. "," .. f32_local1.zAngle
									Engine[0x6055C55456F05DF]( f32_local2, 1 )
									if f31_local0 then
										local f32_local3 = f31_local0.GunsmithWeaponDetails:Wait( 5 )
										f32_local3.onComplete = function ()
											GUNSMITH.SetGunsmithWeaponOffset( f32_local0 )
											GUNSMITH.SetGunsmithCameraPosition( f32_local0 )
										end
										
									end
									DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.tagDataString:SetValue( f31_local0, f32_local2 )
									local f32_local3 = LUI.FlowManager.GetScopedData( f31_local0 )
									local f32_local4 = ATTACHMENT.GetAttachmentCategoryButton( "receiver" )
									if f32_local3 and f32_local3.buttonCategoryToFocus then
										local f32_local5 = f31_local0[f31_local0 .. ATTACHMENT.GetAttachmentCategoryButton( f32_local3.buttonCategoryToFocus )]
										if not f32_local5 then
											for f32_local9, f32_local10 in pairs( f31_local0._usedButtons ) do
												if f32_local10 then
													f32_local3.buttonCategoryToFocus = f32_local10
													f32_local5 = f31_local0[f31_local0 .. ATTACHMENT.GetAttachmentCategoryButton( f32_local3.buttonCategoryToFocus )]
													break
												end
											end
										end
										f32_local5:processEvent( {
											immediate = true,
											name = "gain_focus"
										} )
									elseif f31_local0._usedButtons[f32_local4] then
										f31_local0[f31_local0 .. f32_local4].processEvent( f32_local5[f31_local0 .. f32_local4], {
											immediate = true,
											name = "gain_focus"
										} )
									else
										if 0 < #f31_local0._usedButtons then
											for f32_local5 = 1, GL_HACK.GetGunsmithMaxCategories() + 1, 1 do
												if f31_local0._usedButtons[f32_local5] then
													f31_local0[f31_local0 .. ATTACHMENT.GetAttachmentCategoryButton( f31_local0._usedButtons[f32_local5] )].processEvent( f32_local9[f31_local0 .. ATTACHMENT.GetAttachmentCategoryButton( f31_local0._usedButtons[f32_local5] )], {
														immediate = true,
														name = "gain_focus"
													} )
													break
												end
											end
										end
										local f32_local5 = f31_local0( f31_local0.insert, f31_local0.insert.tagOrigin )
										local f32_local6 = f31_local0( f31_local0.insert, f31_local0.insert.tagGunAttach )
										local f32_local7 = Engine[0xC3B7925CCAC9430]( f31_local0, f31_local0, "offset_vise_attach" )
										f32_local5.xPosition = f32_local7.xPosition - f32_local6.xPosition - f32_local5.xPosition
										f32_local5.yPosition = f32_local7.yPosition - f32_local6.yPosition - f32_local5.yPosition
										ClientModel[0x9C89C00DF9B85ED]( CLIENT_MODEL.GetClientModelIndex( f31_local0.insert ), f32_local5 )
										local f32_local8 = f31_local0 and f31_local0.GunsmithWeaponDetails:Wait( 5 ) or f31_local0:Wait( 5 )
										f32_local8.onComplete = function ()
											local f33_local0 = f32_local0( f32_local0.base, f32_local0.base.tagOrigin )
											f32_local0 = f32_local0( f32_local0.insert, f32_local0.insert.tagOrigin )
											f33_local0.xPosition = f32_local0.xPosition
											f33_local0.yPosition = f32_local0.yPosition
											ClientModel[0x9C89C00DF9B85ED]( CLIENT_MODEL.GetClientModelIndex( f32_local0.base ), f33_local0 )
										end
										
									end
								end
								
							end
						end
						f31_local3 = WEAPON.FlashTag
					end
				else
					if f31_local2 then
						f31_local3 = WEAPON.MuzzleFlashTag
						if not f31_local3 then
						
						else
							local f31_local4 = Engine[0xC3B7925CCAC9430]( f30_arg0, f30_arg0, GUNSMITH.defaultTag )
							local f31_local5 = Engine[0xC3B7925CCAC9430]( f30_arg0, f30_arg0, f31_local3 )
							local f31_local6 = Engine[0xC3B7925CCAC9430]( f30_arg0, f30_arg0, WEAPON.RearTag )
							local f31_local7 = f30_arg0( CLIENT_MODEL.coreMPModels.GUN_VISE_BASE, CLIENT_MODEL.coreMPModels.GUN_VISE_BASE.tagOrigin )
							local f31_local8 = (f31_local5.xPosition + f31_local6.xPosition) / 2
							local f31_local9 = (f31_local5.yPosition + f31_local6.yPosition) / 2
							local f31_local10 = f31_local4.xPosition - f31_local8
							local f31_local11 = f31_local4.yPosition - f31_local9
							local f31_local12 = f31_local4.xPosition - f31_local7.xPosition + f31_local10
							local f31_local13 = f31_local4.yPosition - f31_local7.yPosition + f31_local11
							local f31_local14 = Engine[0xC3B7925CCAC9430]( f30_arg0, f30_arg0, "tag_mag_attach" )
							local f31_local15 = f30_arg0( f30_arg0.insert, f30_arg0.insert.tagGunAttach )
							local f31_local16 = f31_local15.zPosition - f31_local14.zPosition + GUNSMITH.GetWeaponZOffset( f30_arg0, f30_arg0, f30_arg0._weaponTable.attachments, true )
							DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.xOffset:SetValue( f30_arg0, f31_local12 )
							DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.yOffset:SetValue( f30_arg0, f31_local13 )
							DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.zOffset:SetValue( f30_arg0, f31_local16 )
							ClientWeapon[0x8B8A4E0355DF0C0]( FrontEndScene.ClientWeapons.Preview, f31_local12, f31_local13, f31_local16 )
							CLIENT_MODEL.HideModels( f30_arg0 )
							local f31_local17 = f30_arg0 and f30_arg0.GunsmithWeaponDetails:Wait( 5 ) or f30_arg0:Wait( 5 )
							f31_local17.onComplete = function ()
								local f32_local0 = StringTable[0x2DCF0973239E909]( CSV.attachmentCategories.file, CSV.attachmentCategories.cols.ref, "receiver", CSV.attachmentCategories.cols.bone )
								local f32_local1 = Engine[0xC3B7925CCAC9430]( f31_local0, f31_local0, f32_local0 )
								local f32_local2 = "attach_zoom," .. "receiver" .. "," .. f32_local0 .. "," .. f32_local1.xPosition .. "," .. f32_local1.yPosition .. "," .. f32_local1.zPosition .. "," .. f32_local1.xAngle .. "," .. f32_local1.yAngle .. "," .. f32_local1.zAngle
								Engine[0x6055C55456F05DF]( f32_local2, 1 )
								if f31_local0 then
									local f32_local3 = f31_local0.GunsmithWeaponDetails:Wait( 5 )
									f32_local3.onComplete = function ()
										GUNSMITH.SetGunsmithWeaponOffset( f32_local0 )
										GUNSMITH.SetGunsmithCameraPosition( f32_local0 )
									end
									
								end
								DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.tagDataString:SetValue( f31_local0, f32_local2 )
								local f32_local3 = LUI.FlowManager.GetScopedData( f31_local0 )
								local f32_local4 = ATTACHMENT.GetAttachmentCategoryButton( "receiver" )
								if f32_local3 and f32_local3.buttonCategoryToFocus then
									local f32_local5 = f31_local0[f31_local0 .. ATTACHMENT.GetAttachmentCategoryButton( f32_local3.buttonCategoryToFocus )]
									if not f32_local5 then
										for f32_local9, f32_local10 in pairs( f31_local0._usedButtons ) do
											if f32_local10 then
												f32_local3.buttonCategoryToFocus = f32_local10
												f32_local5 = f31_local0[f31_local0 .. ATTACHMENT.GetAttachmentCategoryButton( f32_local3.buttonCategoryToFocus )]
												break
											end
										end
									end
									f32_local5:processEvent( {
										immediate = true,
										name = "gain_focus"
									} )
								elseif f31_local0._usedButtons[f32_local4] then
									f31_local0[f31_local0 .. f32_local4].processEvent( f32_local5[f31_local0 .. f32_local4], {
										immediate = true,
										name = "gain_focus"
									} )
								else
									if 0 < #f31_local0._usedButtons then
										for f32_local5 = 1, GL_HACK.GetGunsmithMaxCategories() + 1, 1 do
											if f31_local0._usedButtons[f32_local5] then
												f31_local0[f31_local0 .. ATTACHMENT.GetAttachmentCategoryButton( f31_local0._usedButtons[f32_local5] )].processEvent( f32_local9[f31_local0 .. ATTACHMENT.GetAttachmentCategoryButton( f31_local0._usedButtons[f32_local5] )], {
													immediate = true,
													name = "gain_focus"
												} )
												break
											end
										end
									end
									local f32_local5 = f31_local0( f31_local0.insert, f31_local0.insert.tagOrigin )
									local f32_local6 = f31_local0( f31_local0.insert, f31_local0.insert.tagGunAttach )
									local f32_local7 = Engine[0xC3B7925CCAC9430]( f31_local0, f31_local0, "offset_vise_attach" )
									f32_local5.xPosition = f32_local7.xPosition - f32_local6.xPosition - f32_local5.xPosition
									f32_local5.yPosition = f32_local7.yPosition - f32_local6.yPosition - f32_local5.yPosition
									ClientModel[0x9C89C00DF9B85ED]( CLIENT_MODEL.GetClientModelIndex( f31_local0.insert ), f32_local5 )
									local f32_local8 = f31_local0 and f31_local0.GunsmithWeaponDetails:Wait( 5 ) or f31_local0:Wait( 5 )
									f32_local8.onComplete = function ()
										local f33_local0 = f32_local0( f32_local0.base, f32_local0.base.tagOrigin )
										f32_local0 = f32_local0( f32_local0.insert, f32_local0.insert.tagOrigin )
										f33_local0.xPosition = f32_local0.xPosition
										f33_local0.yPosition = f32_local0.yPosition
										ClientModel[0x9C89C00DF9B85ED]( CLIENT_MODEL.GetClientModelIndex( f32_local0.base ), f33_local0 )
									end
									
								end
							end
							
						end
					end
					f31_local3 = WEAPON.FlashTag
				end
				local f31_local4 = Engine[0xC3B7925CCAC9430]( f30_arg0, f30_arg0, GUNSMITH.defaultTag )
				local f31_local5 = Engine[0xC3B7925CCAC9430]( f30_arg0, f30_arg0, f31_local3 )
				local f31_local6 = Engine[0xC3B7925CCAC9430]( f30_arg0, f30_arg0, WEAPON.RearTag )
				local f31_local7 = f30_arg0( CLIENT_MODEL.coreMPModels.GUN_VISE_BASE, CLIENT_MODEL.coreMPModels.GUN_VISE_BASE.tagOrigin )
				local f31_local8 = (f31_local5.xPosition + f31_local6.xPosition) / 2
				local f31_local9 = (f31_local5.yPosition + f31_local6.yPosition) / 2
				local f31_local10 = f31_local4.xPosition - f31_local8
				local f31_local11 = f31_local4.yPosition - f31_local9
				local f31_local12 = f31_local4.xPosition - f31_local7.xPosition + f31_local10
				local f31_local13 = f31_local4.yPosition - f31_local7.yPosition + f31_local11
				local f31_local14 = Engine[0xC3B7925CCAC9430]( f30_arg0, f30_arg0, "tag_mag_attach" )
				local f31_local15 = f30_arg0( f30_arg0.insert, f30_arg0.insert.tagGunAttach )
				local f31_local16 = f31_local15.zPosition - f31_local14.zPosition + GUNSMITH.GetWeaponZOffset( f30_arg0, f30_arg0, f30_arg0._weaponTable.attachments, true )
				DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.xOffset:SetValue( f30_arg0, f31_local12 )
				DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.yOffset:SetValue( f30_arg0, f31_local13 )
				DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.zOffset:SetValue( f30_arg0, f31_local16 )
				ClientWeapon[0x8B8A4E0355DF0C0]( FrontEndScene.ClientWeapons.Preview, f31_local12, f31_local13, f31_local16 )
				CLIENT_MODEL.HideModels( f30_arg0 )
				local f31_local17 = f30_arg0 and f30_arg0.GunsmithWeaponDetails:Wait( 5 ) or f30_arg0:Wait( 5 )
				f31_local17.onComplete = function ()
					local f32_local0 = StringTable[0x2DCF0973239E909]( CSV.attachmentCategories.file, CSV.attachmentCategories.cols.ref, "receiver", CSV.attachmentCategories.cols.bone )
					local f32_local1 = Engine[0xC3B7925CCAC9430]( f31_local0, f31_local0, f32_local0 )
					local f32_local2 = "attach_zoom," .. "receiver" .. "," .. f32_local0 .. "," .. f32_local1.xPosition .. "," .. f32_local1.yPosition .. "," .. f32_local1.zPosition .. "," .. f32_local1.xAngle .. "," .. f32_local1.yAngle .. "," .. f32_local1.zAngle
					Engine[0x6055C55456F05DF]( f32_local2, 1 )
					if f31_local0 then
						local f32_local3 = f31_local0.GunsmithWeaponDetails:Wait( 5 )
						f32_local3.onComplete = function ()
							GUNSMITH.SetGunsmithWeaponOffset( f32_local0 )
							GUNSMITH.SetGunsmithCameraPosition( f32_local0 )
						end
						
					end
					DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.tagDataString:SetValue( f31_local0, f32_local2 )
					local f32_local3 = LUI.FlowManager.GetScopedData( f31_local0 )
					local f32_local4 = ATTACHMENT.GetAttachmentCategoryButton( "receiver" )
					if f32_local3 and f32_local3.buttonCategoryToFocus then
						local f32_local5 = f31_local0[f31_local0 .. ATTACHMENT.GetAttachmentCategoryButton( f32_local3.buttonCategoryToFocus )]
						if not f32_local5 then
							for f32_local9, f32_local10 in pairs( f31_local0._usedButtons ) do
								if f32_local10 then
									f32_local3.buttonCategoryToFocus = f32_local10
									f32_local5 = f31_local0[f31_local0 .. ATTACHMENT.GetAttachmentCategoryButton( f32_local3.buttonCategoryToFocus )]
									break
								end
							end
						end
						f32_local5:processEvent( {
							immediate = true,
							name = "gain_focus"
						} )
					elseif f31_local0._usedButtons[f32_local4] then
						f31_local0[f31_local0 .. f32_local4].processEvent( f32_local5[f31_local0 .. f32_local4], {
							immediate = true,
							name = "gain_focus"
						} )
					else
						if 0 < #f31_local0._usedButtons then
							for f32_local5 = 1, GL_HACK.GetGunsmithMaxCategories() + 1, 1 do
								if f31_local0._usedButtons[f32_local5] then
									f31_local0[f31_local0 .. ATTACHMENT.GetAttachmentCategoryButton( f31_local0._usedButtons[f32_local5] )].processEvent( f32_local9[f31_local0 .. ATTACHMENT.GetAttachmentCategoryButton( f31_local0._usedButtons[f32_local5] )], {
										immediate = true,
										name = "gain_focus"
									} )
									break
								end
							end
						end
						local f32_local5 = f31_local0( f31_local0.insert, f31_local0.insert.tagOrigin )
						local f32_local6 = f31_local0( f31_local0.insert, f31_local0.insert.tagGunAttach )
						local f32_local7 = Engine[0xC3B7925CCAC9430]( f31_local0, f31_local0, "offset_vise_attach" )
						f32_local5.xPosition = f32_local7.xPosition - f32_local6.xPosition - f32_local5.xPosition
						f32_local5.yPosition = f32_local7.yPosition - f32_local6.yPosition - f32_local5.yPosition
						ClientModel[0x9C89C00DF9B85ED]( CLIENT_MODEL.GetClientModelIndex( f31_local0.insert ), f32_local5 )
						local f32_local8 = f31_local0 and f31_local0.GunsmithWeaponDetails:Wait( 5 ) or f31_local0:Wait( 5 )
						f32_local8.onComplete = function ()
							local f33_local0 = f32_local0( f32_local0.base, f32_local0.base.tagOrigin )
							f32_local0 = f32_local0( f32_local0.insert, f32_local0.insert.tagOrigin )
							f33_local0.xPosition = f32_local0.xPosition
							f33_local0.yPosition = f32_local0.yPosition
							ClientModel[0x9C89C00DF9B85ED]( CLIENT_MODEL.GetClientModelIndex( f32_local0.base ), f33_local0 )
						end
						
					end
				end
				
			end
			
		end
	end
	f30_local2 = f30_arg0:Wait( 5 )
end

local f0_local24 = function ( f29_arg0, f29_arg1 )
	if not f29_arg0._lastFocusedButtonGroupElement then
		local f29_local0 = LUI.FlowManager.GetScopedData( f29_arg0 )
		local f29_local1 = ATTACHMENT.GetAttachmentCategoryButton( "receiver" )
		if f29_local0 and f29_local0.buttonCategoryToFocus then
			f29_arg0._lastFocusedButtonGroupElement = f29_arg0[f0_local0 .. ATTACHMENT.GetAttachmentCategoryButton( f29_local0.buttonCategoryToFocus )]
		elseif f29_arg0._usedButtons[f29_local1] then
			f29_arg0._lastFocusedButtonGroupElement = f29_arg0[f0_local0 .. f29_local1]
		elseif 0 < #f29_arg0._usedButtons then
			for f29_local2 = 1, GL_HACK.GetGunsmithMaxCategories() + 1, 1 do
				if f29_arg0._usedButtons[f29_local2] then
					f29_arg0._lastFocusedButtonGroupElement = f29_arg0[f0_local0 .. ATTACHMENT.GetAttachmentCategoryButton( f29_arg0._usedButtons[f29_local2] )]
					break
				end
			end
		end
	end
	if f29_arg0._lastFocusedButtonGroupElement then
		f29_arg0:processEvent( {
			immediate = true,
			name = "lose_focus"
		} )
		ACTIONS.GainFocus( f29_arg0, f29_arg0._lastFocusedButtonGroupElement.id, f29_arg1.controllerIndex or f29_arg1.controller )
	end
end

local f0_local25 = function ( f28_arg0, f28_arg1 )
	if f28_arg0._usedButtons then
		for f28_local3, f28_local4 in pairs( f28_arg0._usedButtons ) do
			if f28_local4 == f28_arg1 then
				return f28_arg0[f0_local0 .. ATTACHMENT.GetAttachmentCategoryButton( f28_arg0._usedButtons[f28_local3] )]
			end
		end
		
	else
		return nil
	end
end

local f0_local26 = function ( f27_arg0, f27_arg1 )
	local f27_local0 = f27_arg0._attachments[f27_arg1]
	if f27_local0 then
		for f27_local4, f27_local5 in ipairs( f27_local0 ) do
			if f27_local5.ref ~= ATTACHMENT.none and not f27_local5.isBlocked then
				return false
			end
		end
	end
	return true
end

local f0_local27 = function ( f26_arg0, f26_arg1 )
	if f26_arg0._weaponTable and f26_arg0._weaponTable.attachments and f26_arg0._attachments and f26_arg0._usedButtons then
		GUNSMITH.UpdateBlockedAttachments( f26_arg1, f26_arg0._weaponTable, f26_arg0._attachments, f26_arg0._usedButtons )
		for f26_local5, f26_local6 in pairs( f26_arg0._usedButtons ) do
			if f26_local6 ~= ATTACHMENT.receiverCategory and f26_arg0._attachments[f26_local6] then
				local f26_local3 = f0_local0( f26_arg0, f26_local6 )
				local f26_local4 = f0_local0( f26_arg0, f26_local6 )
				if f26_local4 then
					f26_local4:UpdateBlockedIcon( f26_local3 )
				end
			end
		end
	end
end

local f0_local28 = function ( f25_arg0, f25_arg1, f25_arg2 )
	if f25_arg0.GunsmithWeaponDetails and f25_arg0.GunsmithWeaponDetails.StatsWithDetails and f25_arg0.GunsmithWeaponDetails.StatsWithDetails.WeaponAttributes then
		local f25_local0 = GUNSMITH.SetupWeaponAttributes( f25_arg1, f25_arg0._weaponTable, f25_arg0._weaponPlayerData )
		if f25_local0 then
			if f25_arg2 then
				f25_arg0.GunsmithWeaponDetails.StatsWithDetails.WeaponAttributes:Setup( f25_local0, true, false )
			else
				f25_arg0.GunsmithWeaponDetails.StatsWithDetails.WeaponAttributes:Update( f25_local0 )
			end
		end
	end
end

local f0_local29 = function ( f24_arg0, f24_arg1, f24_arg2 )
	f24_arg0._controllerIndex = f24_arg1
	f24_arg0._forShowcase = f24_arg2.forShowcase
	local f24_local0 = LUI.DataSourceFromOmnvar.new( "frontend_weapon_position_updated" )
	f24_arg0._weaponPositionUpdatedModel = f24_local0:GetModel( f24_arg1 )
	f24_local0 = LUI.DataSourceFromOmnvar.new( "frontend_weapon_position_force_update" )
	f24_arg0._weaponPositionForceUpdateModel = f24_local0:GetModel( f24_arg1 )
	if Engine[0x2DA54CF5D6B7F02]() then
		f0_local0( f24_arg0, f24_arg1, f24_arg2 )
	end
	assert( f24_arg2.loadoutIndex )
	assert( f24_arg2.weaponSlot )
	f24_arg0._loadoutIndex = f24_arg2.loadoutIndex
	f24_arg0._weaponSlot = f24_arg2.weaponSlot
	f24_arg2.loadoutPlayerData = f24_arg0._loadoutPlayerData
	f24_arg2.weaponPlayerData = f24_arg0._weaponPlayerData
	if CONDITIONS.IsDMZMatch() then
		f24_arg0._equippedWeaponSlot = f24_arg2.equippedWeaponSlot
	end
end

local f0_local30 = function ( f22_arg0, f22_arg1 )
	f22_arg0:SubscribeToModel( f22_arg0._weaponPositionUpdatedModel, function ( f23_arg0 )
		if DataModel[0x614D394F6F9A18D]( f23_arg0 ) then
			GUNSMITH.SetGunsmithWeaponOffset( f22_arg0 )
			GUNSMITH.SetGunsmithCameraPosition( f22_arg0 )
		end
	end, true )
	GUNSMITH.SetAreInWeaponPreviewScene( false )
end

local f0_local31 = function ( f20_arg0, f20_arg1 )
	if not f20_arg0.waitForTagDataTimer then
		f20_arg0.waitForTagDataTimer = LUI.UITimer.new( {
			interval = 50,
			event = "waitForTagData"
		} )
		f20_arg0:addElement( f20_arg0.waitForTagDataTimer )
	end
	local f20_local0 = ClientWeapon[0x5DD69014A9C290]( FrontEndScene.ClientWeapons.Preview )
	f20_arg0:registerEventHandler( "waitForTagData", function ( element, event )
		local f21_local0 = Engine[0xF3C157C48E60860]( f20_arg0, f20_arg0, WEAPON.SilencedFlashTag )
		local f21_local1 = Engine[0xF3C157C48E60860]( f20_arg0, f20_arg0, WEAPON.MuzzleFlashTag )
		local f21_local2
		if f21_local0 then
			f21_local2 = WEAPON.SilencedFlashTag
			if not f21_local2 then
				if f21_local1 then
					f21_local2 = WEAPON.MuzzleFlashTag
					if not f21_local2 then
					
					else
						local f21_local3 = Engine[0xC3B7925CCAC9430]( f20_arg0, f20_arg0, GUNSMITH.defaultTag )
						local f21_local4 = Engine[0xC3B7925CCAC9430]( f20_arg0, f20_arg0, f21_local2 )
						local f21_local5 = Engine[0xC3B7925CCAC9430]( f20_arg0, f20_arg0, WEAPON.RearTag )
						local f21_local6 = f20_arg0
						local f21_local7
						if f21_local3 then
							f21_local7 = f21_local3
						elseif f21_local4 then
							f21_local7 = f21_local4
						else
							f21_local7 = f21_local5
						end
						f21_local6.isTagDataAvailable = f21_local7
						if f20_arg0.isTagDataAvailable then
							f20_arg0( f20_arg0, f20_arg0 )
							if f20_arg0.waitForTagDataTimer then
								f20_arg0.waitForTagDataTimer:closeTree()
								f20_arg0.waitForTagDataTimer = nil
							end
						end
					end
				end
				f21_local2 = WEAPON.FlashTag
			end
		else
			if f21_local1 then
				f21_local2 = WEAPON.MuzzleFlashTag
				if not f21_local2 then
				
				else
					local f21_local3 = Engine[0xC3B7925CCAC9430]( f20_arg0, f20_arg0, GUNSMITH.defaultTag )
					local f21_local4 = Engine[0xC3B7925CCAC9430]( f20_arg0, f20_arg0, f21_local2 )
					local f21_local5 = Engine[0xC3B7925CCAC9430]( f20_arg0, f20_arg0, WEAPON.RearTag )
					local f21_local6 = f20_arg0
					local f21_local7
					if f21_local3 then
						f21_local7 = f21_local3
					elseif f21_local4 then
						f21_local7 = f21_local4
					else
						f21_local7 = f21_local5
					end
					f21_local6.isTagDataAvailable = f21_local7
					if f20_arg0.isTagDataAvailable then
						f20_arg0( f20_arg0, f20_arg0 )
						if f20_arg0.waitForTagDataTimer then
							f20_arg0.waitForTagDataTimer:closeTree()
							f20_arg0.waitForTagDataTimer = nil
						end
					end
				end
			end
			f21_local2 = WEAPON.FlashTag
		end
		local f21_local3 = Engine[0xC3B7925CCAC9430]( f20_arg0, f20_arg0, GUNSMITH.defaultTag )
		local f21_local4 = Engine[0xC3B7925CCAC9430]( f20_arg0, f20_arg0, f21_local2 )
		local f21_local5 = Engine[0xC3B7925CCAC9430]( f20_arg0, f20_arg0, WEAPON.RearTag )
		local f21_local6 = f20_arg0
		local f21_local7
		if f21_local3 then
			f21_local7 = f21_local3
		elseif f21_local4 then
			f21_local7 = f21_local4
		else
			f21_local7 = f21_local5
		end
		f21_local6.isTagDataAvailable = f21_local7
		if f20_arg0.isTagDataAvailable then
			f20_arg0( f20_arg0, f20_arg0 )
			if f20_arg0.waitForTagDataTimer then
				f20_arg0.waitForTagDataTimer:closeTree()
				f20_arg0.waitForTagDataTimer = nil
			end
		end
	end )
end

local f0_local32 = function ( f18_arg0, f18_arg1 )
	f18_arg0:SubscribeToModel( f18_arg0._weaponPositionForceUpdateModel, function ( f19_arg0 )
		if DataModel[0x614D394F6F9A18D]( f19_arg0 ) then
			f18_arg0( f18_arg0, f18_arg0, true )
		end
	end, true )
end

local f0_local33 = function ( f17_arg0, f17_arg1 )
	local f17_local0 = GL_HACK.GetWeaponMPRef( f17_arg0._weaponTable.weapon )
	local f17_local1 = LUI.FlowManager.GetScopedData( f17_arg0 )
	if f17_local1.attachmentData and f17_local1.attachmentData[f17_local0] then
		f17_arg0._attachments = f17_local1.attachmentData[f17_local0].attachments
		f17_arg0._bucketItems = f17_local1.attachmentData[f17_local0].bucketItems
	else
		f17_arg0._attachments, f17_arg0._bucketItems = GL_HACK.GetAttachmentsAndBucketItems( f17_arg1, {
			isWeaponParts = true,
			isForceRequestingAttachmentData = true,
			weaponRef = f17_local0,
			blueprintID = f17_arg0._weaponTable.lootID
		} )
		f17_local1.attachmentData = {}
		f17_local1.attachmentData[f17_local0] = {}
		f17_local1.attachmentData[f17_local0].attachments = f17_arg0._attachments
		f17_local1.attachmentData[f17_local0].bucketItems = f17_arg0._bucketItems
	end
	if not WEAPON.IsWeaponNoneValue( f17_arg0._weaponTable.weapon ) then
		f17_arg0._usedButtons = GUNSMITH.GetUsedAttachmentIndices( f17_arg0._weaponTable.weapon, f17_arg0._attachments, f17_arg0._weaponTable.variantID )
	else
		local f17_local2 = WEAPON.GenerateEmptyWeaponTable()
		f17_arg0._usedButtons = GUNSMITH.GetUsedAttachmentIndices( WEAPON.DefaultPrimary, f17_local2.attachments, WEAPON.baseVariant )
	end
	if CONDITIONS.IsGLGunsmithEnabled() and f17_arg0._attachments.receiver and 0 < #f17_arg0._attachments.receiver then
		f17_arg0._usedButtons[ATTACHMENT.GetAttachmentCategoryButton( "receiver" )] = "receiver"
	end
	f17_arg0._categoryLockDetails = GUNSMITH.GetCategoryLockDetails( f17_arg1, f17_arg0._weaponTable.weapon )
end

local f0_local34 = function ( f16_arg0, f16_arg1 )
	local f16_local0 = f16_arg0._curTuneButton
	if f16_local0 then
		f16_local0:SetVisible( false )
		f16_local0:SetHandleMouse( false )
		f16_local0:SetButtonDisabled( true )
	end
	if f16_arg0._curReticleButton then
		f16_arg0._curReticleButton:SetVisible( false )
		f16_arg0._curReticleButton:SetHandleMouse( false )
	end
	f16_arg0._curTuneButton = f16_arg1.tuneButton
	f16_arg0._curReticleButton = f16_arg1.reticleButton
end

local f0_local35 = function ( f15_arg0, f15_arg1, f15_arg2 )
	for f15_local4, f15_local5 in ipairs( f15_arg2._usedButtons ) do
		if f15_local5 ~= ATTACHMENT.receiverCategory then
			local f15_local3 = f15_arg2[f0_local0 .. ATTACHMENT.GetAttachmentCategoryButton( f15_local5 )]
			if f15_local3 then
				f15_local3:UpdateTuneIcon( f15_arg1 )
			end
		end
	end
	if f15_arg0.GunsmithWeaponDetails then
		f15_arg0.GunsmithWeaponDetails:UpdateTacticalBuildLockUp( f15_arg0._weaponPlayerData, f15_arg0._weaponTable )
	end
end

local f0_local36 = function ( f14_arg0, f14_arg1 )
	if f14_arg0.UpdateDetailsDataSources then
		f14_arg0:UpdateDetailsDataSources( f14_arg1, GUNSMITH.GetWeaponDetails( f14_arg1, f14_arg0._weaponTable ) )
	else
		local f14_local0 = GUNSMITH.GetEquipCounts( f14_arg0._weaponTable.weapon, f14_arg0._weaponTable, f14_arg0._weaponTable.attachments )
		f14_arg0.GunsmithWeaponDetails:UpdateModification( f14_local0.attachmentCount, f14_arg0.GunsmithWeaponDetails.AttachmentEquipPips._maxPips, f14_local0.restrictedAttachmentCount )
	end
end

local f0_local37 = function ( f11_arg0, f11_arg1 )
	f11_arg0:addEventHandler( "attachment_count_update", function ( f13_arg0, f13_arg1 )
		f11_arg0._weaponTable = f13_arg1.weaponTable
		f11_arg0( f11_arg0, f11_arg0 )
		f11_arg0( f11_arg0, f11_arg0, false )
	end )
	f11_arg0:addEventHandler( "update_attachments", function ( f12_arg0, f12_arg1 )
		f11_arg0._weaponTable = f12_arg1.weaponTable
		f11_arg0( f11_arg0, f11_arg0 )
		if not CONDITIONS.IsMobileOrMobileSim() and f11_arg0.GunsmithWeaponDetails then
			f11_arg0.GunsmithWeaponDetails:UpdateTacticalBuildLockUp( f11_arg0._weaponPlayerData, f11_arg0._weaponTable )
		end
	end )
end

local f0_local38 = function ( f10_arg0 )
	if f10_arg0.Vignette then
		ACTIONS.ScaleFullscreen( f10_arg0.Vignette )
	end
	if f10_arg0.Gradient then
		ACTIONS.ScaleFullscreen( f10_arg0.Gradient )
	end
	if f10_arg0.SaveMod then
		f10_arg0.SaveMod:SetAlpha( 0 )
	end
	if f10_arg0.CustomModSlotCount then
		f10_arg0.CustomModSlotCount:SetAlpha( 0 )
	end
	if f10_arg0.NextSlotUnlock then
		f10_arg0.NextSlotUnlock:SetAlpha( 0 )
	end
end

local f0_local39 = function ( f9_arg0, f9_arg1 )
	if not Onboarding.Gunsmith.WasCompleted( f9_arg0, f9_arg1 ) then
		TIP.CreateTips( Onboarding.Tips.GUNSMITH( f9_arg1, f9_arg0 ) )
		Onboarding.Gunsmith.MarkCompleted( f9_arg0, f9_arg1 )
	end
end

local f0_local40 = function ( f8_arg0, f8_arg1 )
	if f8_arg0.WeaponBlueprintBranding and f8_arg0._weaponTable then
		GUNSMITH.UpdateWeaponStatsBranding( f8_arg1, f8_arg0.WeaponBlueprintBranding.Branding, WEAPON.GenerateWeaponTableFromWeaponString( f8_arg0._weaponTable.weapon, WEAPON.GetWeaponModelName( f8_arg0._weaponTable.weapon, f8_arg0._weaponTable, {
			includeAttachments = true
		} ), {
			shouldConvertVariantIDToNumber = true,
			shouldIncludeAllAttachments = true
		} ) )
	end
end

local f0_local41 = function ( f7_arg0, f7_arg1 )
	if CONDITIONS.IsDMZMatch() and f7_arg0._equippedWeaponSlot ~= nil then
		local f7_local0 = DMZ.GetEquippedInstanceWeaponTable( f7_arg0._weaponSlot )
		if f7_local0.weapon == f7_arg0._weaponTable.weapon then
			DMZ.EquipWeaponToLoadoutFromInsurancePlayerDataSlot( f7_arg1.controller, f7_arg0._weaponSlot, f7_arg0._equippedWeaponSlot )
		end
	end
end

local f0_local42 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0.GetGunsmithButtonGroupForCategory = f0_local0
	f0_local0( f3_arg0, f3_arg1, f3_arg2 )
	GUNSMITH.SetupWeaponData( f3_arg0, f3_arg1, f3_arg0._weaponSlot, f3_arg0._forShowcase )
	GUNSMITH.SetupWeaponModel( f3_arg0, f3_arg1 )
	GUNSMITH.InitGunsmithWeaponOffsetDataSources()
	GUNSMITH.SetAreInGunsmithScene( true )
	f0_local0( f3_arg1 )
	if GUNSMITH.WasInWeaponPreviewScene() then
		f0_local0( f3_arg0, f3_arg1 )
	else
		f0_local0( f3_arg0, f3_arg1 )
	end
	f0_local0( f3_arg0, f3_arg1 )
	WEAPON.SetGunsmithSceneForWeapon( f3_arg0._weaponTable.weapon )
	ClientWeapon[0x59B77D6F41ED417]( FrontEndScene.ClientWeapons.Preview, false )
	if WEAPON.IsWeaponNoneValue( f3_arg0._weaponTable.weapon ) then
		f3_arg0._weaponTable.weapon = WEAPON.DefaultPrimary
	end
	MenuUtils.SetupSceneChangeCallback( f3_arg0, f0_local0( f3_arg0, f3_arg1 ) )
	f0_local0( f3_arg0, f3_arg1 )
	GUNSMITH.SetupSaveWeaponPopup( f3_arg0, f3_arg1, f3_arg2 )
	f0_local0( f3_arg0, f3_arg1, f3_arg2 )
	f0_local0( f3_arg0, f3_arg1, f3_arg0._weaponTable )
	if CONDITIONS.IsGLGunsmithEnabled() then
		f0_local0( f3_arg0, f3_arg1, true )
		f0_local0( f3_arg0, f3_arg1 )
		f0_local0( f3_arg0, f3_arg1 )
		f0_local0( f3_arg0, f3_arg1 )
		f3_arg0:addEventHandler( "update_tune_button", f0_local0 )
		f3_arg0:addEventHandler( "set_last_focused_element", function ( f6_arg0, f6_arg1 )
			f3_arg0._lastFocusedButtonGroupElement = f6_arg1.lastFocusedButtonGroupElement
		end )
		f3_arg0:addEventHandler( "break_blueprint", function ( f5_arg0, f5_arg1 )
			f3_arg0( f3_arg0, f3_arg0, f5_arg0 )
		end )
		ACTIONS.AnimateSequence( f3_arg0, "GL_Layout" )
		f0_local0( f3_arg0, f3_arg1 )
		f0_local0( f3_arg0, f3_arg1 )
		f0_local0( f3_arg0 )
	else
		f0_local0( f3_arg0, f3_arg2 )
		f0_local0( f3_arg0, f3_arg1, f3_arg2 )
	end
	if IsLanguageArabic() then
		ACTIONS.AnimateSequence( f3_arg0, "AR" )
	end
	f3_arg0:addEventHandler( "restore_focus", function ( f4_arg0, f4_arg1 )
		f3_arg0( f4_arg0, f4_arg1 )
		return true
	end )
	f0_local0( f3_arg0, f3_arg1 )
	f0_local0( f3_arg0, f3_arg1 )
	f3_arg0:addEventHandler( "update_input_type", f0_local0 )
	f3_arg0:addEventHandler( "menu_close", f0_local0 )
	if f3_arg0.CDLRestrictionTag then
		local f3_local0 = GUNSMITH.IsWeaponSetupBlueprintIntact( f3_arg0._weaponPlayerData )
		local f3_local1 = GUNSMITH.DoesWeaponSetupContainProtunedAttachment( f3_arg0._weaponPlayerData )
		local f3_local2
		if f3_local0 then
			f3_local2 = f3_local0
		else
			f3_local2 = f3_local1
		end
		local f3_local3 = 50 * _1080p
		local f3_local4 = LAYOUT.GetTextWidth( f3_arg0.GunsmithWeaponDetails.WeaponName )
		local f3_local5 = f3_arg0.GunsmithWeaponDetails:GetAnchorsAndPosition()
		f3_local4 = f3_local4 + f3_local5.left
		if f3_local2 then
			f3_local4 = f3_local4 + f3_local3 + LAYOUT.GetTextWidth( f3_arg0.GunsmithWeaponDetails.ProtunedTag.Label )
		end
		f3_local5 = f3_arg0.CDLRestrictionTag:GetAnchorsAndPosition()
		local f3_local6 = 16 * _1080p
		if f3_local5.left < f3_local4 then
			f3_arg0.CDLRestrictionTag:SetLeft( f3_local4 + f3_local6 )
		end
	end
end

local f0_local43 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PostLoadShared = f0_local0
end

function GunsmithBase( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "GunsmithBase"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local f1_local3 = self
	GUNSMITH.SetupGunsmithMenu( self, f1_local1, controller )
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "GunsmithBase", GunsmithBase )
LockTable( _M )
