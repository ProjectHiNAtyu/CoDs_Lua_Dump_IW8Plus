-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
module( ..., package.seeall )
local f0_local0 = -0.8
local f0_local1 = 0.8
local f0_local2 = -0.8
local f0_local3 = 0.8
local f0_local4 = 3500
local f0_local5 = -0.3
local f0_local6 = 0.3
local f0_local7 = -0.3
local f0_local8 = 0.3
local f0_local9 = 4500
local f0_local10 = {
	x = 45,
	width = 1245
}
local f0_local11 = 4
local f0_local12 = {
	rightAnchor = 1,
	bottomAnchor = 0,
	topAnchor = 1,
	leftAnchor = 0,
	left = 84 * _1080p,
	right = 1126 * _1080p
}
local f0_local13 = {
	rightAnchor = 1,
	bottomAnchor = 0,
	topAnchor = 1,
	leftAnchor = 0,
	left = 84 * _1080p,
	right = 1652 * _1080p
}
local f0_local14 = {
	rightAnchor = 5.29462817E-315,
	bottomAnchor = 0,
	topAnchor = 1,
	leftAnchor = 5.29462817E-315,
	left = -521 * _1080p,
	right = 521 * _1080p
}
local f0_local15 = {
	rightAnchor = 5.29462817E-315,
	bottomAnchor = 0,
	topAnchor = 1,
	leftAnchor = 5.29462817E-315,
	left = -787 * _1080p,
	right = 787 * _1080p
}
MenuBuilder.registerType( "LoadoutOptions", function ( f104_arg0, f104_arg1 )
	f104_arg1.widget = MenuBuilder.BuildRegisteredType( "LoadoutOptionsPopup", f104_arg1 )
	if not CONDITIONS.IsMobileOrMobileSim() then
		f104_arg1.flyInLeftNarrow = LAYOUT.GetTextWidth( f104_arg1.widget.MenuTitle.MenuTitle, f104_arg1.controllerIndex ) < 480 * _1080p
	end
	local f104_local0 = MenuBuilder.BuildRegisteredType( "FlyInPopup", f104_arg1 )
	f104_local0.id = "LoadoutOptions"
	return f104_local0
end )
MenuBuilder.registerType( "MobileLoadoutOptions", function ( f103_arg0, f103_arg1 )
	local f103_local0 = {
		title = Engine[0xED84C33EC5F01EA]( 0x1762F1AFABB8320 ),
		typeOfPopup = PopupsUtils.typeOfPopup.POPUP_BUTTONS_ONLY,
		controllerIndex = f103_arg1.controllerIndex,
		buttons = {}
	}
	local f103_local1 = {}
	for f103_local6, f103_local7 in ipairs( LOADOUT.LoadoutOptionsPopupButtonsData ) do
		local f103_local5 = true
		if f103_local7.visible then
			f103_local5 = f103_local7.visible( self, f103_arg1.controllerIndex, {
				loadoutIndex = f103_arg1.loadoutIndex
			} )
		end
		if f103_local5 then
			table.insert( f103_local1, f103_local7 )
		end
	end
	for f103_local6, f103_local7 in ipairs( f103_local1 ) do
		table.insert( f103_local0.buttons, {
			label = f103_local7.name,
			action = f103_local7.action( f103_arg1.controllerIndex, {
				loadoutIndex = f103_arg1.loadoutIndex
			} ),
			disabled = f103_local7.disabled
		} )
	end
	f103_local2 = MenuBuilder.BuildRegisteredType( "PopupMessageAndButtons", f103_local0 )
	f103_local2.id = "MobileLoadoutOptions"
	return f103_local2
end )
MenuBuilder.registerType( "BRLoadoutPurchaseConfirmPopup", function ( f102_arg0, f102_arg1 )
	local f102_local0 = MenuBuilder.BuildRegisteredType( "PopupYesNo", f102_arg1 )
	f102_local0.id = "BRLoadoutPurchaseConfirmPopup"
	return f102_local0
end )
local f0_local16 = function ( f100_arg0 )
	return function ()
		CLIENT_MODEL.SetAllModelsModifiable( f100_arg0 )
	end
	
end

local f0_local17 = function ( f99_arg0, f99_arg1, f99_arg2 )
	local f99_local0 = {}
	for f99_local1 = LOADOUT.GetMaxLoadoutCount() - 1, 0, -1 do
		local f99_local4 = f99_arg2[f99_local1]
		if not f99_local4 then
			return nil
		end
		for f99_local5 = 0, #f99_local4.weaponSetups - 1, 1 do
			local f99_local8 = f99_local4.weaponSetups[f99_local5]
			local f99_local9 = WEAPON.GetWeaponModelNameFromPlayerData( f99_local8.weapon:get(), f99_local8, {
				includeCamos = true,
				includeAttachments = true,
				includeStickers = true,
				controllerIndex = f99_arg1
			} )
			if not LUI.IsItemInArray( f99_local0, f99_local9 ) then
				DebugPrint( "Request streaming weapon view model for: \n" .. f99_local9 .. "\n" )
				table.insert( f99_local0, f99_local9 )
			end
		end
	end
	table.insert( f99_local0, WATCH.GetFullModelName( WATCH.GetEquippedWatch( f99_arg1 ) ) )
	if 0 < #f99_local0 then
		FrontEndScene.RequestWeaponViewModels( f99_local0, f99_arg1 )
	end
end

local f0_local18 = function ( f98_arg0 )
	if Engine[0x12586A3F4FB490E]() then
		f98_arg0.Loadouts:RefreshContent()
	else
		f98_arg0.InGameLoadouts:RefreshContent()
	end
end

local f0_local19 = function ( f97_arg0 )
	local f97_local0 = LOADOUT.GetCurrentMenuState( f97_arg0 )
	local f97_local1 = LOADOUT.ANIMATION_STATES[f97_local0]
	if not GL_HACK.IsIW9LoadoutMenuEnabled() then
		ACTIONS.AnimateSequence( f97_arg0.LoadoutSelectButtons.PrimaryWeaponCluster.WeaponButton, f97_local1 )
		ACTIONS.AnimateSequence( f97_arg0.LoadoutSelectButtons.SecondaryWeaponCluster.WeaponButton, f97_local1 )
		ACTIONS.AnimateSequence( f97_arg0.LoadoutSelectButtons.EquipmentGridItem, f97_local1 )
		ACTIONS.AnimateSequence( f97_arg0.LoadoutSelectButtons.TacticalGridItem, f97_local1 )
		ACTIONS.AnimateSequence( f97_arg0.LoadoutSelectButtons.PerkGridItem, f97_local1 )
	end
	if f97_arg0.OnDisplayLoadout then
		f97_arg0:OnDisplayLoadout()
	end
	local f97_local2 = f97_arg0.LoadoutDetailPanel
	if f97_local2 then
		f97_local2:SetInteractable( f97_local0 == LOADOUT.MENU_STATE.loadoutEdit )
	end
end

local f0_local20 = function ( f96_arg0, f96_arg1, f96_arg2 )
	if f96_arg0.BundleUpsellButton then
		if Dvar[0x9E5BE3B4BBA4E0E]( 0x62400405F9F3C0B ) and Dvar[0x9E5BE3B4BBA4E0E]( 0xA051309A7F18047 ) and f96_arg0._bundleVariants[f96_arg2] and not CONDITIONS.AreRestrictionsActive( f96_arg1 ) and f96_arg0._bundleVariants[f96_arg2][1] then
			f96_arg0.BundleUpsellButton:SetupUpsellButtonWithBundleID( f96_arg1, f96_arg0._bundleVariants[f96_arg2][1].bundleID )
		else
			f96_arg0.BundleUpsellButton:HideButton()
		end
	end
end

local f0_local21 = function ( f95_arg0, f95_arg1, f95_arg2 )
	local f95_local0 = Engine[0x12586A3F4FB490E]() and f95_arg0.Loadouts or f95_arg0.InGameLoadouts
	f95_local0:SetMouseFocusBlocker( not f95_arg2 )
	if CONDITIONS.IsMobileOrMobileSim() then
		f95_local0:SetHandleTouchTree( f95_arg2 )
		f95_arg0.LoadoutSelectButtons:SetHandleTouchTree( not f95_arg2 )
	end
end

local f0_local22 = function ( f94_arg0, f94_arg1 )
	if not Engine[0x12586A3F4FB490E]() then
		return 
	elseif LOADOUT.GetCurrentMenuState( f94_arg0 ) == LOADOUT.MENU_STATE.loadoutSelect and f94_arg0.LoadoutDetailPanel then
		local f94_local0, f94_local1 = LOADOUT.GetValidLoadouts( f94_arg1 )
		f94_arg0.LoadoutDetailPanel:UpdatePanel( {
			showLine = true,
			title = Engine[0xED84C33EC5F01EA]( 0x500AE2FE495EE53 ),
			subtitle = Engine[0xED84C33EC5F01EA]( 0xFD03B7ECC3B2934 ),
			loadoutSlots = f94_local1,
			controllerIndex = f94_arg1
		} )
		ACTIONS.AnimateSequence( f94_arg0, "LoadoutAddUp" )
	end
end

local f0_local23 = function ( f93_arg0, f93_arg1 )
	local f93_local0 = nil
	if f93_arg1 then
		if CONDITIONS.IsInGLNewCPFrontend() then
			local f93_local1 = f0_local0
			if not f93_local1 then
				f93_local0 = f93_local1
			end
		end
		f93_local0 = f0_local0
	else
		if CONDITIONS.IsInGLNewCPFrontend() then
			local f93_local1 = f0_local0
			if not f93_local1 then
				f93_local0 = f93_local1
			else
				f93_local0 = f0_local0
			end
		end
		f93_local0 = f0_local0
	end
	f93_arg0.LoadoutSelectButtons:SetAnchors( f93_local0.leftAnchor, f93_local0.rightAnchor, f93_local0.topAnchor, f93_local0.bottomAnchor )
	f93_arg0.LoadoutSelectButtons:SetLeft( f93_local0.left )
	f93_arg0.LoadoutSelectButtons:SetRight( f93_local0.right )
end

local f0_local24 = function ( f89_arg0, f89_arg1, f89_arg2 )
	local f89_local0 = LUI.FlowManager.GetScopedData( f89_arg0 )
	if f89_local0.menuState == LOADOUT.MENU_STATE.loadoutSelect then
		f89_local0.loadoutSessionStartTime = Engine[0x3B8CFB6758EF57C]()
	end
	f89_local0.menuState = LOADOUT.MENU_STATE.loadoutEdit
	f89_arg0:dispatchEventToChildren( {
		name = "menu_state_updated",
		menuState = f89_local0.menuState
	} )
	if f89_local0.openedFromScriptRequest and f89_arg0.MenuTitle then
		f89_arg0.MenuTitle:SetupBackButton( f89_arg1 )
	end
	f0_local0( f89_arg0 )
	ACTIONS.AnimateSequence( f89_arg0, "LoadoutEdit" )
	f0_local0( f89_arg0, true )
	ACTIONS.AnimateSequence( f89_arg0, "ShowDetails" )
	local f89_local1 = function ( f92_arg0, f92_arg1 )
		if not Onboarding.WeaponMasteryChallenges.WasCompleted( f92_arg0, f92_arg1 ) then
			LUI.FlowManager.RequestPopupMenu( f92_arg0, "onboardingpopup", true, f92_arg1, false, ONBOARDING_DATA.GetOnboardingWeaponMasteryChallengesData() )
			Onboarding.WeaponMasteryChallenges.MarkCompleted( f92_arg0, f92_arg1 )
		end
	end
	
	if not CONDITIONS.IsMobileOrMobileSim() then
		f89_local2.processEvent( Engine[0x12586A3F4FB490E]() and f89_arg0.Loadouts or f89_arg0.InGameLoadouts, {
			name = "lose_focus",
			controller = f89_arg1
		} )
	end
	if Engine[0x12586A3F4FB490E]() and not CONDITIONS.IsMobileOrMobileSim() then
		if CONDITIONS.IsBlueprintStoreEnabled() and not Onboarding.BlueprintStore.WasCompleted( self, f89_arg1 ) then
			local f89_local2 = ONBOARDING_DATA.GetOnboardingBlueprintStoreData()
			if not Onboarding.WeaponMasteryChallenges.WasCompleted( self, f89_arg1 ) then
				f89_local2.confirmButton.action = function ( f91_arg0, f91_arg1 )
					ACTIONS.LeaveMenu( f91_arg0 )
					f89_arg0( self, f91_arg1 )
				end
				
			end
			LUI.FlowManager.RequestPopupMenu( self, "onboardingpopup", true, f89_arg1, false, f89_local2 )
			Onboarding.BlueprintStore.MarkCompleted( self, f89_arg1 )
		else
			f89_local1( self, f89_arg1 )
		end
	end
	if not CONDITIONS.IsMobileOrMobileSim() then
		f89_arg0.LoadoutSelectButtons:processEvent( {
			name = "gain_focus",
			controller = f89_arg1
		} )
	end
	f0_local0( f89_arg0, f89_arg1, false )
	f89_arg0.LoadoutSelectButtons:SetMouseHandling( true )
	if f89_arg0.MenuTitle then
		f89_arg0.MenuTitle:SetTitle( f89_arg2.name:get() )
	elseif f89_arg0.LoadoutTitle then
		f89_arg0.LoadoutTitle:setText( Engine[0xEB2A2834B76AEA4]( f89_arg2.name:get() ) )
	end
	if f89_arg0.InGameLoadoutTabs then
		f89_arg0.InGameLoadoutTabs:DisableAll()
		if GL_HACK.IsIW9LoadoutMenuEnabled() then
			f89_arg0.InGameLoadoutTabs:SetAlpha( 0, 100 )
		end
	end
	if f89_arg0.BundleUpsellButton then
		f89_arg0:UpdateBundleUpsell( f89_arg1, f89_arg2.weaponSetups[WEAPON.PrimarySlot].weapon:get() )
	end
	if f89_arg0.LoadoutAddButton then
		f89_arg0.LoadoutAddButton:SetButtonDisabled( true )
	end
	if GL_HACK.IsIW9LoadoutMenuEnabled() then
		f0_local0( f89_arg0, f89_arg1 )
		f89_arg0.LoadoutSelectButtons:UpdateButtonBackgrounds( f89_arg0 )
	end
	if CONDITIONS.InFrontend() and CONDITIONS.IsFrontendFiringRangeEnabled() then
		f89_arg0.bindButton:addEventHandler( "button_alt2", function ( f90_arg0, f90_arg1 )
			local f90_local0 = {
				currentWeaponTable = WEAPON.GenerateWeaponTable( f89_arg0.weaponSetups[WEAPON.PrimarySlot] ),
				secondaryWeaponTable = WEAPON.GenerateWeaponTable( f89_arg0.weaponSetups[WEAPON.SecondarySlot] ),
				fromGunsmith = true
			}
			if 0 < tonumber( f90_local0.currentWeaponTable.variantID ) then
				f90_local0.currentWeaponTable.lootName = WEAPON.GetLootWeaponName( f90_local0.currentWeaponTable.weapon, f90_local0.currentWeaponTable.lootID )
			end
			if 0 < tonumber( f90_local0.secondaryWeaponTable.variantID ) then
				f90_local0.secondaryWeaponTable.lootName = WEAPON.GetLootWeaponName( f90_local0.secondaryWeaponTable.weapon, f90_local0.secondaryWeaponTable.lootID )
			end
			LUI.FlowManager.RequestAddMenu( "FiringRangeMenu", true, f89_arg0, false, f90_local0, true )
		end )
		if f89_arg0.HelperBar then
			f89_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
				side = "left",
				button_ref = "button_alt2",
				helper_text = Engine[0xED84C33EC5F01EA]( 0x142AAF5CD0DA682 )
			} )
		end
	end
end

local f0_local25 = function ( f88_arg0, f88_arg1 )
	Engine[0x685AE31DEDA30A4]( "loadout_showcase" )
	local f88_local0 = LUI.FlowManager.GetScopedData( f88_arg0 )
	if f88_local0.menuState == LOADOUT.MENU_STATE.loadoutEdit then
		METRICS.LoadoutSessionSendDLogEvent( f88_arg1, f88_local0.sessionID, f88_local0.loadoutSessionStartTime, f88_local0.selectedLoadoutIndex )
		LAYOUT.FadeInAspectRatioFadeFrame( f88_arg0, 300 )
	end
	f88_local0.menuState = LOADOUT.MENU_STATE.loadoutSelect
	if f88_local0.isAddingNewLoadout then
		f88_local0.isAddingNewLoadout = false
	end
	f88_arg0:dispatchEventToChildren( {
		name = "menu_state_updated",
		menuState = f88_local0.menuState
	} )
	if not CONDITIONS.IsMobileOrMobileSim() then
		f88_arg0.LoadoutSelectButtons:processEvent( {
			name = "lose_focus",
			controller = f88_arg1
		} )
	end
	f0_local0( f88_arg0, f88_arg1, true )
	f0_local0( f88_arg0 )
	if not CONDITIONS.IsMobileOrMobileSim() then
		f88_local1.processEvent( Engine[0x12586A3F4FB490E]() and f88_arg0.Loadouts or f88_arg0.InGameLoadouts, {
			name = "gain_focus",
			controller = f88_arg1
		} )
	end
	f0_local0( f88_arg0 )
	local f88_local1 = "LoadoutButtons"
	if not GL_HACK.IsIW9LoadoutMenuEnabled() and not Engine[0x12586A3F4FB490E]() then
		if CONDITIONS.IsBRLoadoutGameType( f88_arg1 ) then
			f88_local1 = "InGameLoadoutButtonsBr"
		else
			f88_local1 = "InGameLoadoutButtons"
		end
	end
	ACTIONS.AnimateSequence( f88_arg0, f88_local1 )
	if f88_local1 == "LoadoutButtons" then
		f0_local0( f88_arg0, false )
	end
	f88_arg0.LoadoutSelectButtons:SetMouseHandling( false )
	if f88_arg0.InGameLoadoutTabs then
		f88_arg0.InGameLoadoutTabs:EnableAll()
		if GL_HACK.IsIW9LoadoutMenuEnabled() then
			f88_arg0.InGameLoadoutTabs:SetAlpha( 1, 200 )
		end
	end
	if f88_arg0.MenuTitle then
		if not Engine[0x12586A3F4FB490E]() then
			f88_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0x16709929A4CAF3D ) )
		else
			f88_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0x5CD64C94FEE9C19 ) )
		end
	end
	if f88_arg0.BundleUpsellButton then
		f88_arg0.BundleUpsellButton:HideButton()
	end
	if f88_arg0.MasterChallenges then
		f88_arg0.MasterChallenges:SetAlpha( 0 )
	end
	if f88_arg0.LoadoutAddButton then
		f88_arg0.LoadoutAddButton:SetButtonDisabled( false )
	end
	if GL_HACK.IsIW9LoadoutMenuEnabled() then
		f0_local0( f88_arg0, f88_arg1 )
		f88_arg0.LoadoutSelectButtons:UpdateButtonBackgrounds( f88_arg0 )
	end
end

local f0_local26 = function ( f87_arg0, f87_arg1, f87_arg2, f87_arg3 )
	local f87_local0 = false
	if f87_arg0.selectedLoadout and f87_arg0.selectedLoadout:GetValue( f87_arg1 ) then
		local f87_local1 = f87_arg0.selectedLoadout:GetValue( f87_arg1 )
		if not (not f87_arg3 or f87_local1 ~= f87_arg2 + LOADOUT.DEFAULT_LOADOUT_INDEX_START) or not f87_arg3 and f87_local1 == f87_arg2 then
			f87_local0 = true
		end
	end
	return f87_local0
end

local f0_local27 = function ( f86_arg0, f86_arg1, f86_arg2 )
	ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.PrimaryWeaponCluster, "RestrictionOff" )
	ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.PrimaryWeaponCluster.AttachmentsButton, "RestrictionOff" )
	ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.PrimaryWeaponCluster, "RestrictionWarningOff" )
	ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.SecondaryWeaponCluster, "RestrictionOff" )
	ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.SecondaryWeaponCluster.AttachmentsButton, "RestrictionOff" )
	ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.SecondaryWeaponCluster, "RestrictionWarningOff" )
	if f86_arg0.LoadoutSelectButtons.PerkGridItem then
		ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOffPerk1" )
		ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOffPerk2" )
		ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOffPerk3" )
		ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOffPerk4" )
		ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOffPerk5" )
		ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOffPerk6" )
	end
	ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.EquipmentGridItem, "RestrictionOff" )
	ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.TacticalGridItem, "RestrictionOff" )
	if MatchRules[0x966A6F3A93A1200]( f86_arg2.weaponSetups[0].weapon:get() ) then
		ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.PrimaryWeaponCluster, "RestrictionOn" )
	end
	if LOADOUT.MATCHRULES.WeaponHasRestrictedAttachment( f86_arg2.weaponSetups[0].attachmentSetup, f86_arg2.weaponSetups[0].weapon:get() ) then
		ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.PrimaryWeaponCluster, "RestrictionWarningOn" )
		ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.PrimaryWeaponCluster.AttachmentsButton, "RestrictionOn" )
	end
	if MatchRules[0x966A6F3A93A1200]( f86_arg2.weaponSetups[1].weapon:get() ) then
		ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.SecondaryWeaponCluster, "RestrictionOn" )
	end
	if LOADOUT.MATCHRULES.WeaponHasRestrictedAttachment( f86_arg2.weaponSetups[1].attachmentSetup, f86_arg2.weaponSetups[0].weapon:get() ) then
		ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.SecondaryWeaponCluster, "RestrictionWarningOn" )
		ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.SecondaryWeaponCluster.AttachmentsButton, "RestrictionOn" )
	end
	if f86_arg0.LoadoutSelectButtons.PerkGridItem then
		if Restrictions.IsPerkRestricted( f86_arg2.loadoutPerks[0]:get() ) then
			ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOnPerk1" )
		end
		if Restrictions.IsPerkRestricted( f86_arg2.loadoutPerks[1]:get() ) then
			ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOnPerk2" )
		end
		if Restrictions.IsPerkRestricted( f86_arg2.loadoutPerks[2]:get() ) then
			ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOnPerk3" )
		end
		local f86_local0 = f86_arg2.extraPerks[0]
		if f86_local0 then
			f86_local0 = not Restrictions.ArePerksRestricted()
		end
		if f86_local0 then
			if Restrictions.IsPerkRestricted( f86_arg2.extraPerks[0]:get() ) then
				ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOnPerk4" )
			end
			if Restrictions.IsPerkRestricted( f86_arg2.extraPerks[1]:get() ) then
				ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOnPerk5" )
			end
			if Restrictions.IsPerkRestricted( f86_arg2.extraPerks[2]:get() ) then
				ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOnPerk6" )
			end
		end
	end
	if MatchRules[0x12C50EF8C3BF18A]( f86_arg2.equipmentSetups[0].equipment:get() ) then
		ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.EquipmentGridItem, "RestrictionOn" )
	end
	if MatchRules[0x12C50EF8C3BF18A]( f86_arg2.equipmentSetups[1].equipment:get() ) then
		ACTIONS.AnimateSequence( f86_arg0.LoadoutSelectButtons.TacticalGridItem, "RestrictionOn" )
	end
end

local f0_local28 = function ( f85_arg0, f85_arg1, f85_arg2, f85_arg3, f85_arg4 )
	if f85_arg3 then
		f85_arg2 = f85_arg2 + LOADOUT.DEFAULT_LOADOUT_INDEX_START
	end
	f85_arg0.selectedLoadout:SetValue( f85_arg1, f85_arg2 )
	Engine[0x6055C55456F05DF]( "class_select", f85_arg2 )
	if CONDITIONS.IsThirdGameMode() and not f85_arg3 then
		local f85_local0 = PLAYER_DATA.IO( f85_arg1, LOADOUT.GetLoadoutStatsGroup() )
		f85_local0.squadMembers.cpLoadoutSel:set( f85_arg2 )
	end
	LUI.FlowManager.RequestCloseAllMenus()
	local f85_local0 = LUI.FlowManager.GetScopedData( f85_arg0 )
	if f85_local0.cacSessionDlogOnGoing then
		METRICS.CacSessionEndSendDLogEvent( f85_arg1, f85_local0.sessionID, f85_local0.cacSessionStartTime, METRICS.CacExitReasons.PLAYER_SELECTED_LOADOUT )
		f85_local0.cacSessionDlogOnGoing = nil
	end
end

local f0_local29 = function ( f82_arg0, f82_arg1, f82_arg2 )
	if CONDITIONS.IsMobileOrMobileSim() then
		
	else
		
	end
	local f82_local0 = nil
	for f82_local1 = 0, 1, 1 do
		local f82_local4 = f82_arg2.playerData.weaponSetups[f82_local1]
		f82_local0 = WEAPON.GetWeaponModelNameFromPlayerData( f82_local4.weapon:get(), f82_local4, {
			includeCamos = true,
			includeAttachments = true,
			includeStickers = true,
			controllerIndex = f82_arg1
		} )
		local f82_local5
		if f82_local1 == 0 then
			f82_local5 = f82_arg0.primaryWeaponModel
			if not f82_local5 then
			
			else
				local f82_local6 = WEAPON.GetWeaponClass( f82_local4.weapon:get() )
				CLIENT_MODEL.SetLauncherCase( f82_local4.weapon:get() )
				if f82_local6 == "weapon_projectile" then
					ClientWeapon[0x59B77D6F41ED417]( FrontEndScene.ClientWeapons.GunTableSecondary, false )
				else
					WEAPON.SetModelIfLoaded( f82_arg1, f82_local5, f82_local0, {
						adjustSandbags = f82_local1 == 0
					} )
				end
			end
		end
		f82_local5 = f82_arg0.secondaryWeaponModel
	end
	local f82_local1 = f82_arg2.index
	if CLIENT_MODEL.AreModelsModifiable( CLIENT_MODEL.loadoutSelectModels ) then
		CLIENT_MODEL.UpdateModelsForLoadout( f82_arg0, f82_arg1, f82_local1 )
	end
	WEAPON.SetResetDynBones( {
		FrontEndScene.ClientWeapons.GunTablePrimary,
		FrontEndScene.ClientWeapons.GunTableSecondary
	} )
	local f82_local2 = f82_arg0.LoadoutSelectButtons:Wait( 5, true )
	f82_local2.onComplete = function ()
		if f82_arg0.secondaryWeaponModel then
			f82_arg0.secondaryWeaponModel:SetOffsetsAndRotations( f82_arg0 )
		end
		CLIENT_MODEL.UpdateGunCase( f82_arg0, f82_arg0.isDefault and f82_arg0.defaultLoadout or f82_arg0.playerData )
		local f83_local0 = f82_arg0.LoadoutSelectButtons:Wait( 100, true )
		f83_local0.onComplete = function ()
			CLIENT_MODEL.SendClientModelTagDataToServer( f83_local0.LoadoutSelectButtons._primary, f83_local0.LoadoutSelectButtons._secondary, f83_local0 )
		end
		
	end
	
end

local f0_local30 = function ( f81_arg0, f81_arg1, f81_arg2, f81_arg3, f81_arg4 )
	if not Engine[0x12586A3F4FB490E]() then
		if f0_local0( f81_arg0, f81_arg3, f81_arg2.index, f81_arg2.isDefault ) then
			f81_arg0.LoadoutSelectButtons.EquippedWidget:UpdateVisibility( true )
			ACTIONS.AnimateSequence( f81_arg0.LoadoutSelectButtons.EquippedWidget, "TurnOn" )
		else
			f81_arg0.LoadoutSelectButtons.EquippedWidget:UpdateVisibility( false )
		end
	end
	if CONDITIONS.IsMobileOrMobileSim() and Engine[0x12586A3F4FB490E]() then
		f81_arg0:MobileSetCurrentSelectedLoadout( f81_arg3, f81_arg2 )
	end
	f81_arg0.LoadoutSelectButtons:SetupGridItems( f81_arg3, f81_arg2.index, f81_arg2.playerData, f81_arg2.isDefault and f81_arg2.defaultLoadout )
	f81_arg0._focusedLoadoutIndex = f81_arg2.index
	local f81_local0 = LUI.FlowManager.GetScopedData( f81_arg0 )
	f81_local0.selectedLoadoutIndex = f81_arg0._focusedLoadoutIndex
	if not CONDITIONS.IsMobileOrMobileSim() and not Engine[0x12586A3F4FB490E]() and not f81_arg2.isDefault and not CONDITIONS.IsBRLoadoutGameType( f81_arg3 ) and f81_arg1.EditButton then
		f81_arg1:SetEditButtonEnabled( true )
	end
	if Engine[0x12586A3F4FB490E]() then
		f0_local0( f81_arg0, f81_arg3, f81_arg2 )
	end
	f0_local0( f81_arg0, f81_arg3, f81_arg2.playerData )
end

local f0_local31 = function ( f74_arg0, f74_arg1, f74_arg2, f74_arg3, f74_arg4, f74_arg5 )
	local f74_local0 = Engine[0x12586A3F4FB490E]() and f74_arg0.Loadouts or f74_arg0.InGameLoadouts
	local f74_local1 = f74_arg2.LoadoutButton
	local f74_local2 = f74_arg3[f74_arg4]
	assert( f74_local1.Text )
	f74_local1.playerData = f74_local2.loadout
	f74_local1.index = f74_local2.loadoutIndex
	local f74_local3 = f74_local2.loadoutIndex
	local f74_local4, f74_local5 = nil
	if CONDITIONS.InGame() then
		f74_local5 = DataModel[0x614D394F6F9A18D]( inGameStateDatasource:GetModel( f74_arg1 ) )
		if f74_local5 == LOADOUT.IN_GAME_STATE.mix and f74_local3 >= LOADOUT.GetMaxLoadoutCount() then
			f74_local1.index = f74_local3 - LOADOUT.GetMaxLoadoutCount()
			if f74_arg2.EditButton then
				f74_arg2:SetEditButtonEnabled( false )
			end
		end
	end
	f74_local1.isLoadout = true
	f74_local1.isDefault = f74_arg5
	if CONDITIONS.IsMobileOrMobileSim() then
		local f74_local6 = Dvar[0x22EAAB59AA27E9B]( 0xFAD61B16E2EA2C8 )
		if f74_local6 and f74_local6 < LOADOUT.MOBILE_DEBUG_LAYOUT_STYLE.EDIT_BUTTON_TOP_RIGHT and Engine[0x12586A3F4FB490E]() and f74_arg2.EditButton and not f74_local1.isDefault then
			f74_arg2:SetEditButtonEnabled( true )
		end
		f74_arg2.LoadoutButton:setGainFocusSFX( nil, {
			clearChildrenSFX = true
		} )
		f74_arg2.LoadoutButton:setGainFocusGamepadSFX( nil, {
			clearChildrenSFX = true
		} )
	end
	if LOADOUT.MATCHRULES.LoadoutHasRestrictedItem( f74_local2.loadout ) then
		ACTIONS.AnimateSequence( f74_local1, "RestrictionOn" )
	else
		ACTIONS.AnimateSequence( f74_local1, "RestrictionOff" )
	end
	if CONDITIONS.InGame() then
		if not PROGRESSION.AreCustomLoadoutsUnlocked( f74_arg1 ) then
			f74_arg0.UnlockText:SetAlpha( 1 )
			if f74_local3 == 3 and not PROGRESSION.IsUnlocked( f74_arg1, LOOT.itemTypes.FEATURE, "loadout_4" ) then
				f74_local1:SetButtonDisabled( true )
				f74_local1.buttonDescription = PROGRESSION.GetUnlockText( LOOT.itemTypes.FEATURE, "loadout_4" )
			elseif f74_local3 == 4 and not PROGRESSION.IsUnlocked( f74_arg1, LOOT.itemTypes.FEATURE, "loadout_5" ) then
				f74_local1:SetButtonDisabled( true )
				f74_local1.buttonDescription = PROGRESSION.GetUnlockText( LOOT.itemTypes.FEATURE, "loadout_5" )
			else
				f74_local1.buttonDescription = ""
			end
		end
		if not f74_arg5 and not Engine[0x6938F45868B1BBC]( f74_arg1 ) and not CONDITIONS.InGameAndBRLoadoutSelect( f74_arg1 ) then
			f74_local1:AddTooltipData( f74_arg1, {
				promptsData = {
					{
						button_ref = "button_start",
						keyprompt_text = LocalizeString( "[{ONFOOT_MP:changeclass" .. f74_local3 + 1 .. "}]" ),
						helper_text = Engine[0xED84C33EC5F01EA]( 0x19409A16DA76BDA )
					}
				}
			} )
		else
			f74_local1:RemoveToolTipData()
		end
	end
	if not Engine[0x12586A3F4FB490E]() then
		if f0_local0( f74_arg0, f74_arg1, f74_local1.index, f74_local1.isDefault ) then
			f74_local1:SetSelected( f74_arg1, true )
		else
			f74_local1:SetSelected( f74_arg1, false )
		end
		f74_local1.defaultLoadout = f74_arg0.defaultLoadouts[f74_local1.index + 1]
		if f74_arg2.EditButton then
			f74_arg2.EditButton.index = f74_local3
			f74_arg2.EditButton.playerData = f74_local2.loadout
		end
		if f74_local5 == LOADOUT.IN_GAME_STATE.mix then
			local f74_local7 = f74_arg2
			local f74_local6 = f74_arg2.AddDividingLine
			local f74_local8
			if f74_arg5 or f74_local3 + 1 ~= LOADOUT.GetMaxLoadoutCount() then
				f74_local8 = false
			else
				f74_local8 = true
			end
			f74_local6( f74_local7, f74_local8, CONDITIONS.IsBRLoadoutGameType( f74_arg1 ) )
		end
	end
	local f74_local6 = 0
	if CONDITIONS.InGameAndBRLoadoutSelect( f74_arg1 ) and not f74_local1:IsDisabled() then
		f74_local1:DisableCost()
		f74_local1:SetButtonDisabled( false )
	end
	local f74_local9 = f74_local1.Text
	local f74_local8 = f74_local9
	f74_local9 = f74_local9.setText
	local f74_local10
	if f74_arg5 then
		f74_local10 = Engine[0xED84C33EC5F01EA]( f74_local1.defaultLoadout.name )
		if not f74_local10 then
		
		else
			f74_local9( f74_local8, f74_local10 )
			if not f74_local1.handlersAdded then
				f74_local9 = function ( f80_arg0, f80_arg1 )
					f74_arg0( f74_arg0, f74_arg0, f74_arg0, f74_arg0, f74_arg0 )
				end
				
				f74_local1.refreshDetailsGrid = f74_local9
				if not CONDITIONS.IsMobileOrMobileSim() then
					f74_local1:addEventHandler( "button_over", f74_local9 )
					f74_local1:addEventHandler( "button_over_disable", f74_local9 )
				end
				f74_local1:addEventHandler( "tab_changed", f74_local9 )
				f74_local1:addEventHandler( "tab_changed", function ( f79_arg0, f79_arg1 )
					if f79_arg0.isDefault and f74_arg0.EditButton then
						f74_arg0:SetEditButtonEnabled( false )
					end
				end )
				local f74_local7 = function ( f78_arg0, f78_arg1 )
					local f78_local0 = LUI.FlowManager.GetScopedData( f74_arg0 )
					f78_local0.selectedLoadoutIndex = f78_arg0.index
					f74_arg0:SwitchToLoadoutEdit( f74_arg0, f74_arg0.loadout )
				end
				
				if not Engine[0x12586A3F4FB490E]() then
					f74_local1:addEventHandler( "button_action", function ( f77_arg0, f77_arg1 )
						f74_arg0( f74_arg0, f74_arg0, f77_arg0.index, f77_arg0.isDefault, f74_arg0 )
					end )
					if f74_arg2.EditButton then
						f74_arg2.EditButton:addEventHandler( "button_action", f74_local7 )
					end
				elseif CONDITIONS.IsMobileOrMobileSim() then
					f74_local1:addEventHandler( "button_action", function ( f76_arg0, f76_arg1 )
						f74_arg0( f74_arg0, f74_arg0, f74_arg0, f74_arg0, f74_arg0 )
					end )
					f74_arg2.EditButton:addEventHandler( "button_action", function ( f75_arg0, f75_arg1 )
						f74_arg0( f74_arg0, f74_arg0, f74_arg0, f74_arg0, f74_arg0 )
						f74_arg0( f74_arg0, f75_arg1 )
					end )
				else
					f74_local1:addEventHandler( "button_action", f74_local7 )
				end
				f74_local1.handlersAdded = true
			end
			if Engine[0x12586A3F4FB490E]() and IsOnlineMatch() and not CoD.IsDMZMatch() then
				assert( f74_arg2.Star )
				local f74_local9, f74_local7 = LOADOUT.GetFavoriteLoadoutIndex( f74_arg1 )
				if f74_local3 == f74_local9 then
					f74_local8 = not f74_local7
				else
					f74_local8 = false
				end
				f74_local10 = f74_arg2.Star
				local f74_local11 = f74_local10
				f74_local10 = f74_local10.SetAlpha
				local f74_local12
				if f74_local8 then
					f74_local12 = 1
				else
					f74_local12 = 0
				end
				f74_local10( f74_local11, f74_local12 )
			end
			if CONDITIONS.IsBRLoadoutGameType( f74_arg1 ) and f74_arg2.LoadoutButton and f74_arg2.LoadoutButton.BRWarning then
				if f74_arg5 then
					f74_local9 = f74_local1.defaultLoadout.perks[1]
					if not f74_local9 then
					
					else
						local f74_local7
						if f74_arg5 then
							f74_local7 = f74_local1.defaultLoadout.perks[2]
							if not f74_local7 then
							
							else
								if f74_arg5 then
									f74_local8 = f74_local1.defaultLoadout.perks[3]
									if not f74_local8 then
									
									else
										f74_local10 = Cac.GetIsPerkDisabledForBR( PERK.GetBundleByRef( f74_local9 ) )
										local f74_local13 = Cac.GetIsPerkDisabledForBR( PERK.GetBundleByRef( f74_local7 ) )
										local f74_local11 = Cac.GetIsPerkDisabledForBR( PERK.GetBundleByRef( f74_local8 ) )
										local f74_local12 = f74_arg2.LoadoutButton.BRWarning
										local f74_local14 = f74_local12
										f74_local12 = f74_local12.SetShowWarningIcon
										local f74_local15
										if not f74_local10 then
											f74_local15 = f74_local10
										elseif not f74_local13 then
											f74_local15 = f74_local13
										else
											f74_local15 = f74_local11
										end
										f74_local12( f74_local14, f74_local15 )
									end
								end
								f74_local8 = f74_local2.loadout.loadoutPerks[2]:get()
							end
						end
						f74_local7 = f74_local2.loadout.loadoutPerks[1]:get()
					end
				end
				f74_local9 = f74_local2.loadout.loadoutPerks[0]:get()
			end
		end
	end
	f74_local10 = f74_local2.loadout.name:get()
end

local f0_local32 = function ( f73_arg0, f73_arg1 )
	local f73_local0 = LUI.FlowManager.GetScopedData( f73_arg0 )
	if f73_local0.menuState == LOADOUT.MENU_STATE.loadoutEdit then
		if GL_HACK.IsIW9LoadoutMenuEnabled() and f73_local0.selectedWeaponSlot then
			GUNSMITH.OpenGunsmith( f73_arg1, f73_local0.selectedLoadoutIndex, f73_local0.selectedWeaponSlot )
		end
		return 
	else
		LUI.FlowManager.RequestPopupMenu( nil, "LoadoutOptions", true, f73_arg1, false, {
			disableQuickAccessShortcuts = true,
			controllerIndex = f73_arg1,
			loadoutIndex = f73_arg0._focusedLoadoutIndex
		} )
	end
end

local f0_local33 = function ( f66_arg0, f66_arg1, f66_arg2, f66_arg3, f66_arg4, f66_arg5 )
	local f66_local0 = f66_arg2
	local f66_local1 = f66_arg3[f66_arg4]
	f66_local0.isDefault = f66_arg5
	local f66_local2
	if f66_local1 then
		f66_local2 = f66_local1
	else
		f66_local2 = f66_local1.loadout
	end
	f66_local0.playerData = f66_local2
	if f66_arg5 and not f66_arg4 then
		f66_local2 = f66_arg4
	else
		f66_local2 = f66_local1.loadoutIndex
	end
	f66_local0.index = f66_local2
	local f66_local3, f66_local4 = nil
	if CONDITIONS.InGame() then
		f66_local0.defaultLoadout = f66_arg0.defaultLoadouts[f66_local0.index + 1]
		f66_local4 = DataModel[0x614D394F6F9A18D]( DataSources.inGame.MP.loadoutSelect.inGameState:GetModel( f66_arg1 ) )
	end
	local f66_local5 = {
		removeTextBanner = true,
		removeEquipBanner = true,
		imageSize = "Empty",
		buttonData = {},
		usesFavoriting = CONDITIONS.IsMobileOrMobileSim()
	}
	if Engine[0x12586A3F4FB490E]() then
		f66_local5.doubleAction = {
			text = 0x371D314917B7829,
			prompt = 0x21E44BE45534168,
			callback = function ()
				f66_arg0( f66_arg0, f66_arg0 )
			end
		}
	elseif f66_local4 and f66_local4 == LOADOUT.IN_GAME_STATE.mix and f66_local2 >= LOADOUT.GetMaxLoadoutCount() then
		f66_local0.index = f66_local2 - LOADOUT.GetMaxLoadoutCount()
	elseif not f66_arg5 and not GL_HACK.IsInfluencerBuild() then
		f66_local5.doubleAction = {
			prompt = 0x21E44BE45534168,
			text = 0xD28F1D327CE55CC
		}
	end
	f66_local0:SetupButton( f66_local5 )
	if Engine[0x12586A3F4FB490E]() then
		f66_local0:SetPrimaryPromptText( 0xD28F1D327CE55CC )
	else
		f66_local0:SetPrimaryPromptText( 0xCA07A93FADF9E95 )
	end
	if not f66_arg5 or not Engine[0xED84C33EC5F01EA]( f66_local0.defaultLoadout.name ) then
		local f66_local6 = f66_local1.loadout.name:get()
	end
	if MOBILEWIDGET and MOBILEWIDGET.IsLoadoutGridSquareButtonEnabled() then
		local f66_local6 = f66_arg4 + 1
	end
	f66_local0:SetHeaderText( f66_local6 )
	if CONDITIONS.InGame() then
		if not PROGRESSION.AreCustomLoadoutsUnlocked( f66_arg1 ) then
			if f66_local2 == 3 and not PROGRESSION.IsUnlocked( f66_arg1, LOOT.itemTypes.FEATURE, "loadout_4" ) then
				f66_local0:SetButtonDisabled( true )
			elseif f66_local2 == 4 and not PROGRESSION.IsUnlocked( f66_arg1, LOOT.itemTypes.FEATURE, "loadout_5" ) then
				f66_local0:SetButtonDisabled( true )
			end
		end
		if not f66_arg5 and not Engine[0x6938F45868B1BBC]( f66_arg1 ) and not CONDITIONS.InGameAndBRLoadoutSelect( f66_arg1 ) then
			f66_local0:AddTooltipData( f66_arg1, {
				promptsData = {
					{
						button_ref = "button_start",
						keyprompt_text = LocalizeString( "[{ONFOOT_MP:changeclass" .. f66_local2 + 1 .. "}]" ),
						helper_text = Engine[0xED84C33EC5F01EA]( 0x19409A16DA76BDA )
					}
				}
			} )
		else
			f66_local0:RemoveToolTipData()
		end
		f66_local0:SetEquipped( f0_local0( f66_arg0, f66_arg1, f66_local0.index, f66_local0.isDefault ) )
	end
	local f66_local7 = 0
	if f66_local0.SetCost == nil then
		
	elseif CONDITIONS.InGameAndBRLoadoutSelect( f66_arg1 ) and not f66_local0:IsDisabled() then
		f66_local0:DisableCost()
		f66_local0:SetButtonDisabled( false )
	end
	local f66_local8 = function ()
		if f66_arg0.SetFavorite then
			local f71_local0, f71_local1 = LOADOUT.GetFavoriteLoadoutIndex( f66_arg0 )
			local f71_local2
			if f66_arg0.index == f71_local0 then
				f71_local2 = not f66_arg0.isDefault
			else
				f71_local2 = false
			end
			f66_arg0:SetFavorite( f71_local2 )
		end
	end
	
	f66_local8()
	if not f66_local0._handlersAdded then
		f66_local8 = function ( f70_arg0, f70_arg1 )
			f66_arg0._focusedLoadoutIndex = f66_arg0.index
			local f70_local0 = LUI.FlowManager.GetScopedData( f66_arg0 )
			f70_local0.selectedLoadoutIndex = f66_arg0._focusedLoadoutIndex
			if not Engine[0x12586A3F4FB490E]() and f66_arg0.LoadoutSelectButtons.EquippedWidget then
				if f66_arg0( f66_arg0, f66_arg0, f66_arg0.index, f66_arg0.isDefault ) then
					f66_arg0.LoadoutSelectButtons.EquippedWidget:UpdateVisibility( true )
					ACTIONS.AnimateSequence( f66_arg0.LoadoutSelectButtons.EquippedWidget, "TurnOn" )
				else
					f66_arg0.LoadoutSelectButtons.EquippedWidget:UpdateVisibility( false )
				end
			end
			if CONDITIONS.InFrontend() then
				f66_arg0( f66_arg0, f66_arg0, f70_arg0 )
			end
			if not f70_local0.isAddingNewLoadout then
				f66_arg0.LoadoutSelectButtons:SetupGridItems( f66_arg0, f70_arg0.index, f70_arg0.playerData, f70_arg0.isDefault and f70_arg0.defaultLoadout, f66_arg0 )
			end
			f66_arg0.LoadoutSideButtonRow:UpdateSideButtons()
			if f70_arg1 and f70_arg1.name == "tab_changed" then
				if f66_arg0.ButtonHighlight then
					local f70_local1 = f66_arg0.ButtonHighlight
					local f70_local2 = f70_local1
					f70_local1 = f70_local1.processEvent
					local f70_local3 = {}
					local f70_local4
					if f66_arg0:IsDisabled() then
						f70_local4 = "button_over_disable"
					else
						f70_local4 = "button_over"
					end
					f70_local3.name = f70_local4
					f70_local1( f70_local2, f70_local3 )
				end
				f66_arg0()
			end
			if CONDITIONS.IsMobileOrMobileSim() then
				f66_arg0:MobileSetCurrentSelectedLoadout( f66_arg0, f66_arg0 )
			end
		end
		
		f66_local0.refreshDetailsGrid = f66_local8
		if CONDITIONS.IsMobileOrMobileSim() then
			f66_local0:addEventHandler( "button_over_active", f66_local8 )
			f66_local0:addEventHandler( "button_active", f66_local8 )
			f66_local0:addEventHandler( "button_over_disable_active", f66_local8 )
		else
			f66_local0:addEventHandler( "button_over", f66_local8 )
			f66_local0:addEventHandler( "button_over_disable", f66_local8 )
		end
		f66_local0:addEventHandler( "tab_changed", f66_local8 )
		local f66_local9 = function ( f69_arg0, f69_arg1 )
			f66_arg0( f66_arg0, f66_arg0, f69_arg0.index, f69_arg0.isDefault, f66_arg0 )
		end
		
		local f66_local10 = function ( f68_arg0, f68_arg1 )
			local f68_local0 = LUI.FlowManager.GetScopedData( f66_arg0 )
			f68_local0.selectedLoadoutIndex = f66_arg0._focusedLoadoutIndex
			f66_arg0:SwitchToLoadoutEdit( f66_arg0, LOADOUT.GetLoadoutPlayerData( f66_arg0, f68_local0.selectedLoadoutIndex ) )
		end
		
		local f66_local11 = function ( f67_arg0, f67_arg1 )
			local f67_local0, f67_local1 = LOADOUT.GetFavoriteLoadoutIndex( f66_arg0 )
			if f67_arg0.index ~= f67_local0 then
				LOADOUT.SetFavoriteLoadout( f66_arg0, f66_arg0, f67_arg0.index )
				f66_arg0()
			end
		end
		
		if CONDITIONS.IsMobileOrMobileSim() then
			local f66_local12
			if Engine[0x12586A3F4FB490E]() and not f66_local11 then
				f66_local12 = f66_local11
			else
				f66_local12 = f66_local9
			end
			f66_local0.buttonActionHandler = f66_local12
		else
			local f66_local12
			if Engine[0x12586A3F4FB490E]() and not f66_local10 then
				f66_local12 = f66_local10
			else
				f66_local12 = f66_local9
			end
			f66_local0.buttonActionHandler = f66_local12
		end
		f66_local0:addEventHandler( "button_action", f66_local0.buttonActionHandler )
		if not Engine[0x12586A3F4FB490E]() and f66_local0.ButtonHighlight and f66_local0.ButtonHighlight.SecondaryButton then
			local f66_local12 = f66_local0.ButtonHighlight.SecondaryButton
			f66_local12.buttonActionHandler = f66_local10
			f66_local12:addEventHandler( "button_action", f66_local12.buttonActionHandler )
		end
		f66_local0._handlersAdded = true
	end
	if f66_arg4 == f0_local0 and f0_local0( f66_arg0, f66_arg1, f66_local0.index, f66_local0.isDefault ) then
		f66_local0:processEvent( {
			name = "button_over",
			controller = f66_arg1
		} )
	end
	if CONDITIONS.IsBRLoadoutGameType( f66_arg1 ) and f66_local0.BRWarning then
		if f66_arg5 then
			f66_local8 = f66_local0.defaultLoadout.perks[1]
			if not f66_local8 then
			
			else
				local f66_local9
				if f66_arg5 then
					f66_local9 = f66_local0.defaultLoadout.perks[2]
					if not f66_local9 then
					
					else
						local f66_local10
						if f66_arg5 then
							f66_local10 = f66_local0.defaultLoadout.perks[3]
							if not f66_local10 then
							
							else
								local f66_local11 = Cac.GetIsPerkDisabledForBR( PERK.GetBundleByRef( f66_local8 ) )
								local f66_local12 = Cac.GetIsPerkDisabledForBR( PERK.GetBundleByRef( f66_local9 ) )
								local f66_local13 = Cac.GetIsPerkDisabledForBR( PERK.GetBundleByRef( f66_local10 ) )
								local f66_local14 = f66_local0.BRWarning
								local f66_local15 = f66_local14
								f66_local14 = f66_local14.SetShowWarningIcon
								local f66_local16
								if not f66_local11 then
									f66_local16 = f66_local11
								elseif not f66_local12 then
									f66_local16 = f66_local12
								else
									f66_local16 = f66_local13
								end
								f66_local14( f66_local15, f66_local16 )
							end
						end
						f66_local10 = f66_local1.loadout.loadoutPerks[2]:get()
					end
				end
				f66_local9 = f66_local1.loadout.loadoutPerks[1]:get()
			end
		end
		f66_local8 = f66_local1.loadout.loadoutPerks[0]:get()
	end
end

local f0_local34 = function ( f64_arg0, f64_arg1 )
	if Engine[0x12586A3F4FB490E]() then
		if Engine[0x7AE6126734FCDB]() then
			
		else
			
		end
		FrontEndScene.SetExclusiveWeaponModels( {
			FrontEndScene.ClientWeapons.GunTablePrimary,
			FrontEndScene.ClientWeapons.GunTableSecondary,
			FrontEndScene.ClientWeapons.Watch
		} )
		Engine[0x685AE31DEDA30A4]( "loadout_showcase" )
		local f64_local0 = LUI.FlowManager.GetScopedData( LOADOUT.GetLoadoutMenuRef() )
		if f64_local0.fieldUpgradeMenuActiviated then
			f64_local0.fieldUpgradeMenuActiviated = false
		else
			FrontEndScene.HideWeaponModels()
		end
		local f64_local1 = MenuBuilder.BuildRegisteredType( "FrontendCameraMover", {
			enableSway = true,
			controllerIndex = f64_arg1
		} )
		f64_local1:SetLimits( f0_local0, f0_local0, f0_local0, f0_local0 )
		f64_local1:SetSwayValues( f0_local0, 0.06, 0.1 )
		f64_arg0.FrontendCameraMover = f64_local1
		f64_arg0:addElement( f64_local1 )
		f64_arg0.FrontendCameraMover:addEventHandler( "update_camera_limits", function ( f65_arg0, f65_arg1 )
			f65_arg0:SetLimits( f65_arg1.isZoomed and f64_arg0 or f64_arg0, f65_arg1.isZoomed and f64_arg0 or f64_arg0, f65_arg1.isZoomed and f64_arg0 or f64_arg0, f65_arg1.isZoomed and f64_arg0 or f64_arg0 )
			local f65_local0 = f65_arg1.isZoomed and f64_arg0 or f64_arg0
			f65_arg0:SetSwayValues( f64_arg0, 0.06, 0.1 )
		end )
		local f64_local2 = WATCH.GetEquippedWatch( f64_arg1 )
		local f64_local3 = WEAPON.GetWeaponModel( f64_arg1, FrontEndScene.ClientWeapons.Watch, CSV.weaponOffsets.watchFile )
		f64_arg0:addElement( f64_local3 )
		WATCH.SetWatchModelIfLoaded( f64_arg0, f64_arg1, f64_local3, f64_local2 )
	end
end

local f0_local35 = function ( f63_arg0, f63_arg1 )
	if not Engine[0x12586A3F4FB490E]() then
		Engine[0x6055C55456F05DF]( "class_edit", f63_arg1.selectedLoadoutIndex )
	end
	if f63_arg0.selectedLoadout ~= nil and f63_arg1.selectedLoadoutIndex == f63_arg0.selectedLoadout:GetValue( f63_arg1.controllerIndex ) and not Engine[0x12586A3F4FB490E]() then
		Engine[0x6055C55456F05DF]( "class_edit", f63_arg0.selectedLoadout:GetValue( f63_arg1.controllerIndex ) )
	end
end

local f0_local36 = function ( f61_arg0, f61_arg1 )
	f61_arg0:addEventHandler( "button_focused", function ( f62_arg0, f62_arg1 )
		if f62_arg1.button.isLoadout then
			local f62_local0 = f62_arg1.button:getParent()
			if f62_arg0.focusedButton and f62_arg0.focusedButton ~= f62_local0 and not Engine[0x12586A3F4FB490E]() then
				assert( f62_arg0.focusedButton.EditButton )
				f62_arg0.focusedButton:SetEditButtonEnabled( false )
			end
			f62_arg0.focusedButton = f62_local0
		end
		return true
	end )
end

local f0_local37 = function ( f59_arg0, f59_arg1, f59_arg2 )
	f59_arg0:addEventHandler( "gain_focus", function ( f60_arg0, f60_arg1 )
		local f60_local0 = LOADOUT.GetCurrentMenuState( f60_arg0 )
		local f60_local1 = false
		if f60_local0 == LOADOUT.MENU_STATE.loadoutEdit then
			if f60_arg0.LoadoutSelectButtons then
				f60_arg0.LoadoutSelectButtons:processEvent( {
					name = "gain_focus",
					controller = f60_arg1.controller
				} )
				f60_local1 = true
			end
		else
			f59_arg0.loadoutsWidget:processEvent( {
				name = "gain_focus",
				controller = f60_arg1.controller
			} )
			f60_local1 = true
		end
		return f60_local1
	end )
end

local f0_local38 = function ( f58_arg0, f58_arg1, f58_arg2, f58_arg3 )
	if f58_arg3.menuState == LOADOUT.MENU_STATE.loadoutSelect then
		local f58_local0 = f58_arg2.loadoutsWidget:GetBuiltChildren()
		if 0 < #f58_local0 then
			if Engine[0x12586A3F4FB490E]() then
				f58_arg0.focusedButton = f58_local0[1]
				f58_local1.refreshDetailsGrid( GL_HACK.IsIW9LoadoutMenuEnabled() and f58_local0[1] or f58_local0[1].LoadoutButton, {
					name = "button_over"
				} )
			else
				local f58_local1 = f58_local0[1]
				if GL_HACK.IsIW9LoadoutMenuEnabled() then
					for f58_local5, f58_local6 in ipairs( f58_local0 ) do
						if f0_local0( f58_arg0, f58_arg1, f58_local6.index, f58_local6.isDefault ) then
							f58_local1 = f58_local6
						end
					end
					f58_local1:refreshDetailsGrid( {
						name = "button_over"
					} )
					f58_arg0.focusedButton = f58_local1
				else
					for f58_local5, f58_local6 in ipairs( f58_local0 ) do
						if f0_local0( f58_arg0, f58_arg1, f58_local6.LoadoutButton.index, f58_local6.LoadoutButton.isDefault ) then
							f58_local1 = f58_local6
						end
					end
					f58_local1.LoadoutButton:refreshDetailsGrid( {
						name = "button_over"
					} )
					f58_arg0.focusedButton = f58_local1
				end
			end
		end
	end
end

local f0_local39 = function ( f57_arg0, f57_arg1, f57_arg2 )
	local f57_local0 = LUI.FlowManager.GetScopedData( f57_arg0 )
	f57_local0.openedInTab = CONDITIONS.IsInGLNewCPFrontend()
	if not f57_local0.sessionID then
		f57_local0.sessionID = Engine[0x3B8CFB6758EF57C]()
	end
	if not f57_local0.cacSessionStartTime then
		f57_local0.cacSessionStartTime = Engine[0x3B8CFB6758EF57C]()
	end
	if not f57_local0.cacSessionDlogOnGoing and not f57_local0.openedInTab and not CONDITIONS.IsBRLoadoutGameType( f57_arg1 ) then
		METRICS.CacSessionStartSendDLogEvent( f57_arg1, f57_local0.sessionID )
		f57_local0.cacSessionDlogOnGoing = true
	end
	local f57_local1 = f57_local0.menuState
	if not f57_local1 then
		f57_local1 = LOADOUT.MENU_STATE.loadoutSelect
	end
	f57_local0.menuState = f57_local1
	f57_arg0:dispatchEventToChildren( {
		name = "menu_state_updated",
		menuState = f57_local0.menuState
	} )
	return f57_local0
end

local f0_local40 = function ( f56_arg0, f56_arg1 )
	assert( f56_arg1 )
	local f56_local0 = LUI.FlowManager.GetScopedData( f56_arg0 )
	if f56_local0.menuState == LOADOUT.MENU_STATE.loadoutEdit then
		f0_local0( f56_arg0, f56_local0 )
		f0_local0( f56_arg0, f56_arg1 )
	elseif not f56_local0.openedInTab then
		if f56_local0.cacSessionDlogOnGoing then
			METRICS.CacSessionEndSendDLogEvent( f56_arg1, f56_local0.sessionID, f56_local0.cacSessionStartTime, METRICS.CacExitReasons.PLAYER_EXIT )
			f56_local0.cacSessionDlogOnGoing = nil
		end
		if not Engine[0x12586A3F4FB490E]() and CONDITIONS.IsThirdGameMode() then
			Engine[0x6055C55456F05DF]( "class_menu_closed", 1 )
			LUI.FlowManager.RequestCloseAllMenus()
		else
			ACTIONS.UploadStats( f56_arg0, f56_arg1 )
			ACTIONS.LeaveMenu( f56_arg0 )
			f56_arg0:dispatchEventToRoot( {
				immediate = true,
				name = "update_toast_position"
			} )
		end
	else
		return false
	end
	return true
end

local f0_local41 = function ( f55_arg0, f55_arg1, f55_arg2 )
	local f55_local0 = f55_arg0.LoadoutSideButtonRow
	if f55_local0 then
		f55_local0:SetupSideButtons( f55_arg1, f55_arg2 )
		if LOADOUT.GetCurrentMenuState( f55_arg0 ) == LOADOUT.MENU_STATE.loadoutSelect then
			f55_local0:UpdateSideButtons()
		end
	end
end

local f0_local42 = function ( f54_arg0, f54_arg1 )
	assert( f54_arg1.controller )
	local f54_local0 = LUI.FlowManager.GetScopedData( f54_arg0 )
	local f54_local1 = f54_local0.selectedLoadoutIndex
	if not f54_local1 then
		f54_local1 = f54_arg0._focusedLoadoutIndex or 0
	end
	f54_local1 = LOADOUT.GetFixedLoadoutIndex( f54_arg1.controller, f54_local1 )
	f54_local0.selectedLoadoutIndex = f54_local1
	f54_arg0._focusedLoadoutIndex = f54_local1
	local f54_local2, f54_local3 = LOADOUT.GetValidLoadouts( f54_arg1.controller )
	local f54_local4 = Engine[0x12586A3F4FB490E]() and f54_arg0.Loadouts or f54_arg0.InGameLoadouts
	f54_local4:SetNumChildren( f54_local3 )
	f54_local4:RefreshContent()
	f54_local4:MouseSetActiveToDefaultFocus( f54_arg1.controller )
	f54_local4:ProcessEventToChildInFocus( {
		name = "button_over"
	} )
	f0_local0( f54_arg0, f54_local4, f54_local3 )
	f0_local0( f54_arg0, f54_arg1.controller )
end

local f0_local43 = function ( f48_arg0, f48_arg1, f48_arg2, f48_arg3 )
	if f48_arg0.BundleUpsellButton or Dvar[0x9E5BE3B4BBA4E0E]( 0xB5C6D63083BAB98 ) then
		f48_arg0._bundleVariants = WEAPON.GetPriorityVariants( f48_arg1, {
			excludeOwned = true,
			useBaseRefKeys = true
		} )
		f48_arg0._bundleVariants = WEAPON.GetAllVariantsInStore( f48_arg1, {
			excludeOwned = true,
			useBaseRefKeys = true,
			variantsTable = f48_arg0._bundleVariants
		} )
		local primaryWeaponModel = LUI.FlowManager.GetScopedData( f48_arg0 )
		primaryWeaponModel.bundleVariants = f48_arg0._bundleVariants
	end
	f48_arg0:registerEventHandler( "update_bundle_upsell", function ( element, event )
		element:UpdateBundleUpsell( f48_arg0, event.weaponRef )
		return true
	end )
	if CONDITIONS.InFrontendPublic() and not CONDITIONS.IsMobileOrMobileSim() then
		f48_arg0:registerEventHandler( "update_weapon_master_summary", function ( element, event )
			LOOT.AttachFence( element, f48_arg0, function ( f52_arg0, f52_arg1 )
				if f52_arg1.fenceState ~= LUI.Fence.FenceObjectState.PASSING then
					f52_arg0.MasterChallenges:SetAlpha( 0 )
					ACTIONS.AnimateSequence( f52_arg0, "ChallengesOff" )
					return 
				elseif f52_arg1.weaponRef and GUNSMITH.AreMasterChallengesEnabled( f52_arg1.controllerIndex, f52_arg1.weaponRef ) then
					f52_arg0.MasterChallenges:SetAlpha( 1 )
					f52_arg0.MasterChallenges:Setup( f52_arg1.weaponRef )
					ACTIONS.AnimateSequence( f52_arg0, "ChallengesOn" )
				else
					f52_arg0.MasterChallenges:SetAlpha( 0 )
					ACTIONS.AnimateSequence( f52_arg0, "ChallengesOff" )
				end
			end )
		end )
	end
	f48_arg0.bindButton:addEventHandler( "button_alt1", function ( f50_arg0, f50_arg1 )
		f48_arg0( f48_arg0, f50_arg1.controller )
	end )
	f48_arg0:addAndCallEventHandler( "refresh_loadouts", function ( f49_arg0, f49_arg1 )
		f48_arg0( f49_arg0, {
			controller = f48_arg0
		} )
	end )
	CLIENT_MODEL.SetAllModelsModifiable( f48_arg1 )
	if f48_arg3.menuState == LOADOUT.MENU_STATE.loadoutEdit then
		if CLIENT_MODEL.AreModelsModifiable( CLIENT_MODEL.loadoutSelectModels ) then
			CLIENT_MODEL.UpdateModelsForLoadout( f48_arg0, f48_arg1, f48_arg3.selectedLoadoutIndex )
		end
	elseif f48_arg0.MenuTitle then
		f48_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0x5CD64C94FEE9C19 ) )
	end
	local primaryWeaponModel = WEAPON.GetWeaponModel( f48_arg1, FrontEndScene.ClientWeapons.GunTablePrimary )
	f48_arg0:addElement( primaryWeaponModel )
	f48_arg0.primaryWeaponModel = primaryWeaponModel
	
	local secondaryWeaponModel = WEAPON.GetWeaponModel( f48_arg1, FrontEndScene.ClientWeapons.GunTableSecondary )
	f48_arg0:addElement( secondaryWeaponModel )
	f48_arg0.secondaryWeaponModel = secondaryWeaponModel
	
	f48_arg0.LoadoutSelectButtons:SetupWeaponModelEvents( f48_arg1, {
		f48_arg0.primaryWeaponModel,
		f48_arg0.secondaryWeaponModel
	}, f48_arg2.loadoutsPlayerData )
	if Engine[0xD151EC5B41223B5]() then
		MenuUtils.SetupSceneChangeCallback( f48_arg0, f0_local0( f48_arg1 ) )
	end
	if CONDITIONS.IsThirdGameMode() then
		if not Onboarding.LoadoutCP.WasCompleted( f48_arg0, f48_arg1 ) then
			LUI.FlowManager.RequestPopupMenu( f48_arg0, "onboardingpopup", true, f48_arg1, false, ONBOARDING_DATA.GetOnboardingLoadoutData() )
			Onboarding.LoadoutCP.MarkCompleted( f48_arg0, f48_arg1 )
		end
	elseif MLG.IsCDLActive( f48_arg1 ) then
		if not Onboarding.CDL.WasCompleted( f48_arg0, f48_arg1 ) then
			LUI.FlowManager.RequestPopupMenu( f48_arg0, "onboardingpopup", true, f48_arg1, false, ONBOARDING_DATA.GetOnboardingCDLData() )
			Onboarding.CDL.MarkCompleted( f48_arg0, f48_arg1 )
		end
	elseif CONDITIONS.IsBRGameType() then
		if not Onboarding.WZDropKit.WasCompleted( f48_arg0, f48_arg1 ) then
			LUI.FlowManager.RequestPopupMenu( f48_arg0, "onboardingpopup", true, f48_arg1, false, ONBOARDING_DATA.GetOnboardingWZDropKitData() )
			Onboarding.WZDropKit.MarkCompleted( f48_arg0, f48_arg1 )
		end
	elseif not Onboarding.Loadout.WasCompleted( f48_arg0, f48_arg1 ) then
		LUI.FlowManager.RequestPopupMenu( f48_arg0, "onboardingpopup", true, f48_arg1, false, ONBOARDING_DATA.GetOnboardingLoadoutData() )
		Onboarding.Loadout.MarkCompleted( f48_arg0, f48_arg1 )
	end
end

local f0_local44 = function ( f39_arg0, f39_arg1, f39_arg2, f39_arg3 )
	f39_arg0.defaultLoadouts = LOADOUT.GetDefaultLoadouts( f39_arg1 )
	if GL_HACK.IsIW9LoadoutMenuEnabled() then
		f39_arg0.InGameLoadouts = f39_arg0.Loadouts
	elseif f39_arg0.InGameLoadoutsMp then
		f39_arg0.InGameLoadouts = f39_arg0.InGameLoadoutsMp
	elseif f39_arg0.InGameLoadoutsBr then
		f39_arg0.InGameLoadouts = f39_arg0.InGameLoadoutsBr
	end
	local f39_local0 = PROGRESSION.AreCustomLoadoutsUnlocked( f39_arg1 )
	local f39_local1 = DataSources.inGame.MP.loadoutSelect.inGameState
	if Game[0x28624DEF6F708C8]( f39_arg1, "ui_only_default_loadouts" ) or CONDITIONS.IsCIABuildEnabled() then
		f39_local1:SetValue( f39_arg1, LOADOUT.IN_GAME_STATE.default )
		f39_arg0.InGameLoadouts:SetNumChildren( LOADOUT.GetDefaultLoadoutCount() )
		f39_arg0.InGameLoadouts:RefreshContent()
	else
		if f39_local0 and Dvar[0x9E5BE3B4BBA4E0E]( 0x5B384C07850936B ) then
			local f39_local2 = f39_arg0.selectedLoadout:GetValue( f39_arg1 )
			local f39_local3
			if f39_local2 then
				f39_local3 = f39_local2
			else
				f39_local3 = f39_local2 >= LOADOUT.DEFAULT_LOADOUT_INDEX_START
			end
			local f39_local4 = {}
			local f39_local5 = function ( f47_arg0 )
				if not CONDITIONS.IsMobileOrMobileSim() then
					local f47_local0 = f47_arg0.InGameLoadouts:GetFocusPositionIndex( {
						relativePosition = false
					} )
					if f47_local0 then
						local f47_local1 = {
							y = 0,
							x = f47_local0
						}
						f47_arg0.InGameLoadouts:ResetMouseActiveOnGridUpdate( f39_arg0, f47_local1 )
						f47_arg0.InGameLoadouts:SetFocusedPosition( f47_local1, true )
					end
				else
					local f47_local0 = f47_arg0.InGameLoadouts:GetActiveElement()
					if f47_local0 then
						local f47_local1, f47_local2 = f47_arg0.InGameLoadouts:GetChildPosition( f47_local0 )
						if f47_local1 then
							f47_arg0.InGameLoadouts:SetPosition( {
								x = f47_local1,
								y = f47_local2
							}, true )
							f47_arg0.InGameLoadouts:ResetMouseActiveOnGridUpdate( f39_arg0, {
								x = f47_local1,
								y = f47_local2
							} )
						end
					end
				end
				f47_arg0.InGameLoadouts:ProcessEventToChildInFocus( {
					name = "tab_changed"
				} )
			end
			
			f39_arg0.InGameLoadouts:SetNumChildren( f39_arg2.numValidLoadouts )
			local f39_local6 = function ( f46_arg0 )
				local f46_local0 = f46_arg0.InGameLoadouts
				local f46_local1 = nil
				if CoD.IsDMZMatch() then
					f46_local1 = 1
				else
					f46_local1 = f39_arg0.numValidLoadouts
				end
				f46_local0:SetNumChildren( f46_local1 )
				f46_local0:RefreshContent()
				f39_arg0( f46_arg0, f46_local0, f46_local1 )
				f39_arg0( f46_arg0 )
			end
			
			local f39_local7 = function ( f45_arg0 )
				local f45_local0 = f45_arg0.InGameLoadouts
				local f45_local1 = LOADOUT.GetDefaultLoadoutCount()
				f45_local0:SetNumChildren( f45_local1 )
				f45_local0:RefreshContent()
				f39_arg0( f45_arg0, f45_local0, f45_local1 )
				f39_arg0( f45_arg0 )
			end
			
			f39_arg0:SubscribeToModel( f39_local1:GetModel( f39_arg1 ), function ( f44_arg0 )
				local f44_local0 = DataModel[0x614D394F6F9A18D]( f44_arg0 )
				if f44_local0 then
					if f44_local0 == LOADOUT.IN_GAME_STATE.default then
						f39_arg0( f39_arg0 )
					else
						f39_arg0( f39_arg0 )
					end
				end
			end )
			if f39_arg0.InGameLoadoutTabs then
				table.insert( f39_local4, {
					name = Engine[0xED84C33EC5F01EA]( 0x5E9F832F2C75EF ),
					focusFunction = function ( f43_arg0, f43_arg1 )
						f39_arg0:SetValue( f39_arg0, LOADOUT.IN_GAME_STATE.custom )
						Engine[0xC4146BA76D0F982]( SOUND_SETS.default.tabHighlight )
					end,
					hasDefaultFocus = not f39_local3
				}, Engine[0xC4146BA76D0F982]( SOUND_SETS.default.tabHighlight ) )
				local f39_local8 = table.insert
				local f39_local9 = f39_local4
				local f39_local10 = {
					name = Engine[0xED84C33EC5F01EA]( 0xAFB89CBC7986369 ),
					focusFunction = function ( f42_arg0, f42_arg1 )
						f39_arg0:SetValue( f39_arg0, LOADOUT.IN_GAME_STATE.default )
						Engine[0xC4146BA76D0F982]( SOUND_SETS.default.tabHighlight )
					end
				}
				local f39_local11
				if f39_local2 then
					f39_local11 = f39_local3
				else
					f39_local11 = true
				end
				f39_local10.hasDefaultFocus = f39_local11
				f39_local8( f39_local9, f39_local10, Engine[0xC4146BA76D0F982]( SOUND_SETS.default.tabHighlight ) )
				f39_arg0.tabsData = f39_local4
				f39_arg0.InGameLoadoutTabs:SetTabs( f39_local4 )
				if GL_HACK.IsIW9LoadoutMenuEnabled() then
					f39_arg0.InGameLoadoutTabs:SetAlignment( LUI.Alignment.Center )
				end
			else
				local f39_local9 = f39_local1
				local f39_local8 = f39_local1.SetValue
				local f39_local10 = f39_arg1
				local f39_local11
				if f39_local3 then
					f39_local11 = LOADOUT.IN_GAME_STATE.default
					if not f39_local11 then
					
					else
						f39_local8( f39_local9, f39_local10, f39_local11 )
					end
				end
				f39_local11 = LOADOUT.IN_GAME_STATE.custom
			end
		end
		if f39_local0 then
			f39_local1:SetValue( f39_arg1, LOADOUT.IN_GAME_STATE.mix )
			f39_arg0.InGameLoadouts:SetNumChildren( f39_arg2.numValidLoadouts + LOADOUT.GetDefaultLoadoutCount() )
		else
			f39_local1:SetValue( f39_arg1, LOADOUT.IN_GAME_STATE.default )
			f39_arg0.InGameLoadouts:SetNumChildren( LOADOUT.GetDefaultLoadoutCount() )
			if f39_arg0.InGameLoadoutTabs then
				f39_arg0.InGameLoadoutTabs:DisableAll()
				if GL_HACK.IsIW9LoadoutMenuEnabled() then
					f39_arg0.InGameLoadoutTabs:SetAlpha( 0 )
				end
			end
			f0_local0( f39_arg0, f39_arg0.InGameLoadouts, LOADOUT.GetDefaultLoadoutCount() )
		end
		f39_arg0.InGameLoadouts:RefreshContent()
	end
	if GL_HACK.IsIW9LoadoutMenuEnabled() then
		if not GL_HACK.IsInfluencerBuild() then
			f39_arg0.bindButton:addEventHandler( "button_alt1", function ( f41_arg0, f41_arg1 )
				if DataModel[0x614D394F6F9A18D]( f39_arg0:GetModel( f39_arg0 ) ) == LOADOUT.IN_GAME_STATE.default then
					return 
				end
				local f41_local0 = LUI.FlowManager.GetScopedData( f39_arg0 )
				if f41_local0.menuState == LOADOUT.MENU_STATE.loadoutSelect then
					f41_local0.selectedLoadoutIndex = f39_arg0._focusedLoadoutIndex
					f39_arg0:SwitchToLoadoutEdit( f39_arg0, f39_arg0.loadoutsPlayerData[f41_local0.selectedLoadoutIndex] )
				elseif f41_local0.menuState == LOADOUT.MENU_STATE.loadoutEdit and f41_local0.selectedWeaponSlot and (not GUNSMITH.IsDisabled( f39_arg0.loadoutsPlayerData[f41_local0.selectedLoadoutIndex].weaponSetups[f41_local0.selectedWeaponSlot].weapon:get() ) or CONDITIONS.InFrontend()) then
					GUNSMITH.OpenGunsmith( f41_arg1.controller, f41_local0.selectedLoadoutIndex, f41_local0.selectedWeaponSlot )
				end
			end )
		end
		if not f39_arg0.LoadoutAddButton then
			ACTIONS.AnimateSequence( f39_arg0, "HideCreateLoadout" )
		end
	end
	if not CONDITIONS.IsMobileOrMobileSim() and not GL_HACK.IsIW9LoadoutMenuEnabled() then
		ACTIONS.ScaleFullscreen( f39_arg0.InGameMenuBackground )
		ACTIONS.ScaleFullscreen( f39_arg0.Vignette )
		ACTIONS.ScaleStretchAnchorFullscreen( f39_arg0.TabBacker )
	end
	if CONDITIONS.IsMobileOrMobileSim() and not GL_HACK.IsIW9LoadoutMenuEnabled() then
		for f39_local6, f39_local7 in ipairs( f39_arg0.InGameLoadouts:GetBuiltChildren() ) do
			f39_local7.LoadoutButton:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 650, 0, _1080p * 99 )
		end
		f39_arg0.InGameLoadouts:SetRowSpacing( 35 )
		f39_arg0.InGameLoadouts:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 650, _1080p * 216, _1080p * 1000 )
		f39_arg0.InGameLoadouts:SetAdjustSizeToContent( false )
		Dvar[0x8EA06EEDB58D872]( 0x4F6DECB7DC6092E, false )
	end
	if f39_arg3.menuState == LOADOUT.MENU_STATE.loadoutEdit then
		if f39_arg0.InGameLoadoutTabs then
			f39_arg0.InGameLoadoutTabs:DisableAll()
			if GL_HACK.IsIW9LoadoutMenuEnabled() then
				f39_arg0.InGameLoadoutTabs:SetAlpha( 0 )
			end
		end
	else
		if f39_arg0.MenuTitle then
			f39_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0x16709929A4CAF3D ) )
		end
		if CONDITIONS.IsBRLoadoutGameType( f39_arg1 ) then
			ACTIONS.AnimateSequence( f39_arg0, "InGameLoadoutButtonsBr" )
		else
			ACTIONS.AnimateSequence( f39_arg0, "InGameLoadoutButtons" )
		end
	end
	f39_arg0:registerOmnvarHandler( "post_game_state", function ( f40_arg0 )
		if LUI.PostGameManager.IsPostGame( f39_arg0 ) then
			LUI.FlowManager.RequestCloseAllMenus()
		end
	end )
end

local f0_local45 = function ( f35_arg0 )
	local f35_local0 = f35_arg0.LoadoutPreviewArea
	if f35_local0 then
		f35_local0:OverrideMouseCursorType( MouseCursorType.CURSOR_TYPE_ARROW_ACTIVE )
		f35_local0:addEventHandler( "button_action", function ( f38_arg0, f38_arg1 )
			if f38_arg0:GetHandleMouseButton() then
				local f38_local0 = {
					y = 0,
					x = LOADOUT.FindValidLoadoutIndex( f35_arg0._controllerIndex, f35_arg0._focusedLoadoutIndex )
				}
				local f38_local1 = f35_arg0.Loadouts:GetElementAtPosition( f38_local0.x, f38_local0.y )
				if f38_local1 and f38_local1.buttonActionHandler then
					f38_local1:buttonActionHandler( f38_arg1 )
				end
			end
		end )
		f35_local0:addAndCallEventHandler( "update_input_type", function ( f37_arg0, f37_arg1 )
			if f37_arg0:GetHandleMouseButton() then
				local f37_local0 = f37_arg0:getParent()
				f37_local0.LoadoutSelectButtons:SetSelectionLineVisible( LUI.IsLastInputKeyboardMouse( f37_local0._controllerIndex ) )
			end
		end )
		f35_local0:addEventHandler( "mousemove", function ( f36_arg0, f36_arg1 )
			if f36_arg0:GetHandleMouseButton() then
				local f36_local0 = f36_arg0:getParent()
				f36_local0.LoadoutSelectButtons:SetSelected( f36_arg0:IsPositionInside( f36_arg1.x, f36_arg1.y ) )
			end
		end )
	end
end

local f0_local46 = function ( f33_arg0 )
	local f33_local0 = f33_arg0.LoadoutDetailPanel
	if f33_local0 then
		f33_local0.LoadoutDetailPreviewArea:addEventHandler( "leftmousedown", function ( f34_arg0, f34_arg1 )
			local f34_local0 = f34_arg0:getParent()
			if f34_local0 and f34_local0:IsInteractable() then
				local f34_local1 = f34_local0:getParent()
				local f34_local2 = f34_local1.LoadoutSelectButtons._currentFocusedButton
				if f34_local2 then
					f34_local2:GainFocus( f34_arg1 )
					if f34_local2.buttonActionHandler then
						f34_local2:buttonActionHandler( f34_arg1 )
					end
				end
			end
		end )
	end
end

local f0_local47 = function ( f32_arg0, f32_arg1 )
	assert( f32_arg1 )
	if f32_arg0 then
		local f32_local0 = f32_arg0:GetActiveElement()
		if f32_local0 then
			f32_local0:RemoveActive( {
				controller = f32_arg1
			} )
		end
	end
end

local f0_local48 = function ( f31_arg0, f31_arg1 )
	assert( f31_arg1 )
	if f31_arg0 then
		f31_arg0:MouseSetActiveToDefaultFocus( f31_arg1 )
	end
end

local f0_local49 = function ( f26_arg0, f26_arg1 )
	if f26_arg0.LoadoutAddButton then
		f26_arg0.LoadoutAddButton:addEventHandler( "button_action", function ( f30_arg0, f30_arg1 )
			f30_arg0:LoseFocus( {
				snap = true
			} )
			LUI.FlowManager.RequestAddMenu( "AddNewLoadoutMenu", true, f30_arg1.controller, false, {
				replaceLoadouts = LOADOUT.GetEmptyLoadoutSlot( f30_arg1.controller ) == nil
			}, true )
		end )
		f26_arg0.LoadoutAddButton:addEventHandler( "button_over", function ( f29_arg0, f29_arg1 )
			ACTIONS.AnimateSequence( f26_arg0, "LoadoutAddOver" )
			f26_arg0( f26_arg0.Loadouts, f26_arg0 )
		end )
		f26_arg0.LoadoutAddButton:addEventHandler( "button_up", function ( f28_arg0, f28_arg1 )
			ACTIONS.AnimateSequence( f26_arg0, "LoadoutAddUp" )
			f26_arg0( f26_arg0.Loadouts, f26_arg0 )
		end )
		f26_arg0.LoadoutAddButton:registerEventHandler( "gamepad_button", function ( element, event )
			if not event.down or not element:GetHandleMouseButton() or not element:isInFocus() then
				return 
			else
				local f27_local0 = f26_arg0.LoadoutAddButton
				local f27_local1 = f26_arg0.Loadouts
				local f27_local2 = f26_arg0.LoadoutSideButtonRow
				if event.button == "right" then
					f27_local0:LoseFocus( event )
					f27_local1:GainFocus( event )
					f27_local1:SetFocusedPosition( {
						x = 0,
						y = 0
					}, true )
					return true
				elseif event.button == "left" then
					if f27_local2 and f27_local2.SideButtonLeft:GetHandleMouseButton() then
						f27_local0:LoseFocus( event )
						f27_local2.SideButtonLeft:GainFocus( event )
						return true
					else
						f27_local0:GamepadButton( event )
						
					end
				else
					return f27_local0:GamepadButton( event )
				end
			end
		end )
	else
		ACTIONS.AnimateSequence( f26_arg0, "HideCreateLoadout" )
	end
end

local f0_local50 = function ( f22_arg0 )
	local f22_local0 = f22_arg0.Loadouts
	local f22_local1 = f22_arg0.LoadoutAddButton
	local f22_local2 = f22_arg0.LoadoutSideButtonRow
	local f22_local3, f22_local4 = nil
	local f22_local5 = function ( f25_arg0 )
		local f25_local0 = LOADOUT.GetCurrentMenuState( f25_arg0 ) == LOADOUT.MENU_STATE.loadoutSelect
		local f25_local1 = f22_arg0
		if f25_local1 then
			f25_local1 = f25_local0
		end
		return f25_local1
	end
	
	f22_local0.gamepadButtonHandler = function ( f24_arg0, f24_arg1 )
		if not f24_arg1.down then
			return 
		end
		local f24_local0 = f22_arg0( f22_arg0 )
		if f24_local0 and CONDITIONS.IsMouseWheelEvent( f24_arg1 ) then
			return f22_arg0:ExternalScroll( f24_arg1 )
		end
		if f22_arg0 and f24_arg1.button == "left" and f24_arg0:GetFocusPosition( LUI.DIRECTION.horizontal ) == 0 then
			f24_arg0:RemoveFocusFromChild( true )
			f24_arg0:LoseFocus( f24_arg1 )
			f22_arg0:GainFocus( f24_arg1 )
			return true
		elseif f24_local0 then
			f22_arg0:AddScrollWatch()
		end
		return f24_arg0:GamepadButton( f24_arg1 )
	end
	
	f22_local0:registerEventHandler( "gamepad_button", f22_local0.gamepadButtonHandler )
	f22_local0:registerEventHandler( "scrollbar_drag", function ( element, event )
		if f22_arg0( f22_arg0 ) then
			f22_arg0:AddScrollWatch()
		end
		return element:HandleScrollbarDrag( event )
	end )
	if f22_arg0.GridMask then
		f22_local0:SetMask( f22_arg0.GridMask )
	end
end

local f0_local51 = function ( f20_arg0 )
	local f20_local0 = f20_arg0.MouseButtonArea
	local f20_local1 = f20_arg0.Loadouts
	if f20_local0 then
		f20_local0:addEventHandler( "gamepad_button", function ( f21_arg0, f21_arg1 )
			if f21_arg1.qualifier == "mousewheel" then
				f21_arg1.forceScrollMove = true
				if f20_arg0.gamepadButtonHandler then
					f20_arg0:gamepadButtonHandler( f21_arg1 )
				end
			end
		end )
	end
end

local f0_local52 = function ( f15_arg0, f15_arg1 )
	local f15_local0 = f15_arg0.LoadoutSideButtonRow
	if f15_local0 then
		local f15_local1 = f15_arg0.LoadoutAddButton
		local f15_local2 = f15_arg0.Loadouts
		local f15_local3 = f15_local0.SideButtonLeft
		local f15_local4 = f15_local0.SideButtonRight
		if f15_local1 then
			f15_local0:SetLeft( f0_local0.x )
			f15_local0:SetRight( f0_local0.width )
		end
		local f15_local5 = function ( f19_arg0, f19_arg1 )
			f15_arg0( f15_arg0.Loadouts, f15_arg0 )
		end
		
		local f15_local6 = function ( f18_arg0, f18_arg1 )
			f15_arg0( f15_arg0.Loadouts, f15_arg0 )
		end
		
		f15_local3:addEventHandler( "button_over", f15_local5 )
		f15_local4:addEventHandler( "button_over", f15_local5 )
		f15_local3:addEventHandler( "button_up", f15_local6 )
		f15_local4:addEventHandler( "button_up", f15_local6 )
		f15_local3:registerEventHandler( "gamepad_button", function ( element, event )
			if not event.down or not element:GetHandleMouseButton() or not element:isInFocus() then
				return false
			elseif event.button == "right" then
				element:LoseFocus( event )
				if f15_arg0 then
					f15_arg0:GainFocus( event )
				else
					f15_arg0:SetFocusedPosition( {
						y = 0,
						x = f15_arg0:GetFirstLoadoutIndex()
					}, true )
				end
				return true
			elseif event.button == "left" then
				return true
			else
				return false
			end
		end )
		f15_local4:registerEventHandler( "gamepad_button", function ( element, event )
			if not event.down or not element:GetHandleMouseButton() or not element:isInFocus() then
				return false
			elseif event.button == "right" then
				return true
			elseif event.button == "left" then
				element:LoseFocus( event )
				f15_arg0:SetFocusedPosition( {
					y = 0,
					x = LOADOUT.FindValidLoadoutIndex( f15_arg0, f15_arg0._focusedLoadoutIndex )
				}, true )
				return true
			else
				return false
			end
		end )
	end
end

local f0_local53 = function ( f14_arg0, f14_arg1, f14_arg2 )
	f0_local0( f14_arg0 )
	f0_local0( f14_arg0, f14_arg1 )
	f0_local0( f14_arg0 )
	f0_local0( f14_arg0 )
	f0_local0( f14_arg0 )
	f0_local0( f14_arg0, f14_arg1 )
end

local f0_local54 = function ( f13_arg0, f13_arg1, f13_arg2 )
	local f13_local0 = LOADOUT.GetLoadoutSquadMember( f13_arg1 )
	f13_local0 = f13_local0.loadouts
	if Engine[0x12586A3F4FB490E]() then
		Streaming[0xE493C1B436663F6]( true )
		f0_local0( f13_arg0, f13_arg1, f13_local0 )
	end
end

local f0_local55 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0.bindButton = LUI.UIBindButton.new()
	f3_arg0:addElement( f3_arg0.bindButton )
	if not CONDITIONS.IsMobileOrMobileSim() then
		f0_local0( f3_arg0, f3_arg1 )
	end
	f3_arg0.DisplayLoadout = f0_local0
	f3_arg0.UpdateBundleUpsell = f0_local0
	f3_arg0.SwitchToLoadoutEdit = f0_local0
	local f3_local0 = LOADOUT.GetLoadoutSquadMember( f3_arg1 )
	f3_arg2.loadoutsPlayerData = f3_local0.loadouts
	local f3_local0, f3_local1 = LOADOUT.GetValidLoadouts( f3_arg1 )
	f3_arg2.numValidLoadouts = f3_local1
	local f3_local2 = f0_local0( f3_arg0, f3_arg1, f3_arg2 )
	if not (Engine[0x12586A3F4FB490E]() or not CONDITIONS.IsCoreMultiplayer( f3_arg0 )) or CONDITIONS.IsThirdGameMode( f3_arg0 ) then
		f3_arg0.selectedLoadout = LUI.DataSourceInControllerModel.new( "cg.players.selectedLoadout" )
	end
	if Engine[0x12586A3F4FB490E]() then
		f0_local0( f3_arg0, f3_arg1, f3_arg2, f3_local2 )
	else
		f0_local0( f3_arg0, f3_arg1, f3_arg2, f3_local2 )
	end
	if not GL_HACK.IsIW9LoadoutMenuEnabled() or not f3_arg0.Loadouts then
		local f3_local3 = Engine[0x12586A3F4FB490E]()
		local f3_local4 = f3_arg0.Loadouts
		local f3_local5 = f3_arg0.InGameLoadouts
	end
	f3_arg2.loadoutsWidget = f3_local3 and f3_local4 or f3_local5
	local f3_local6 = false
	if not Engine[0x12586A3F4FB490E]() and CONDITIONS.IsThirdGameMode() and Game[0x28624DEF6F708C8]( f3_arg1, "cp_open_cac" ) == -1 then
		f3_local6 = true
	end
	local f3_local7 = false
	if not Engine[0x12586A3F4FB490E]() and CONDITIONS.IsBRGameType() and Game[0x28624DEF6F708C8]( f3_arg1, "ui_open_loadout_bag" ) then
		f3_local7 = true
	end
	if f3_arg0.MenuTitle and f3_arg0.MenuTitle.Line then
		f3_arg0.MenuTitle.Line:SetVisibility( LUI.Visibility.Hidden )
	end
	if not f3_arg2.openedFromScriptRequest or f3_local6 then
		if not CONDITIONS.IsMobileOrMobileSim() and f3_arg0.MenuTitle then
			f3_arg0.MenuTitle:SetupBackButton( f3_arg1 )
		end
		if not f3_local2.openedInTab then
			f3_arg0.bindButton:addEventHandler( "button_secondary", function ( f12_arg0, f12_arg1 )
				f3_arg0( f3_arg0, f3_arg0 )
			end )
		else
			f3_arg0.LoadoutSelectSecondaryButtonAction = f0_local0
		end
		if not Engine[0x12586A3F4FB490E]() and not CONDITIONS.IsThirdGameMode() then
			if f3_arg0.HelperBar then
				f3_arg0:addEventHandler( "menu_create", function ()
					f3_arg0:AddButtonHelperText( {
						clickable = true,
						priority = 2,
						side = "left",
						kbmTooltipPromptOverload = "button_dismiss_pause_menu",
						button_ref = "button_start",
						helper_text = Engine[0xED84C33EC5F01EA]( 0xEF0F75B0AB08E35 )
					} )
				end )
			end
			f3_arg0.bindButton:addEventHandler( "button_start", function ( f10_arg0, f10_arg1 )
				if Engine[0x74423E76DECE3E4]() then
					ACTIONS.ResumeGame( f10_arg0 )
				end
				local f10_local0 = LUI.FlowManager.GetScopedData( f3_arg0 )
				if f10_local0.menuState == LOADOUT.MENU_STATE.loadoutEdit then
					f3_arg0( f3_arg0, f10_local0 )
				end
				if f10_local0.cacSessionDlogOnGoing then
					METRICS.CacSessionEndSendDLogEvent( f3_arg0, f10_local0.sessionID, f10_local0.cacSessionStartTime, METRICS.CacExitReasons.PLAYER_EXIT )
					f10_local0.cacSessionDlogOnGoing = nil
				end
				LUI.FlowManager.RequestCloseAllMenus( f3_arg0.id, false, f10_arg1.controller )
				return true
			end )
			MenuUtils.AddDismissPauseMenuKBMHandler( f3_arg0 )
		end
	elseif f3_local7 then
		if f3_arg0.HelperBar then
			f3_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
				side = "left",
				button_ref = "button_secondary",
				priority = 0,
				helper_text = Engine[0xED84C33EC5F01EA]( 0xC6D515BE207B9A5 )
			} )
		end
		f3_arg0.bindButton:addEventHandler( "button_secondary", function ( f9_arg0, f9_arg1 )
			local f9_local0 = LUI.FlowManager.GetScopedData( f3_arg0 )
			if f9_local0.menuState == LOADOUT.MENU_STATE.loadoutEdit then
				if not Engine[0x12586A3F4FB490E]() then
					Engine[0x6055C55456F05DF]( "class_edit", f9_local0.selectedLoadoutIndex )
					f3_arg0( f3_arg0, f3_arg0 )
				end
			else
				Cac.ExitLoadoutBag()
			end
		end )
	else
		f3_arg0.isQuickAccessShortcutsDisabled = true
		if f3_local2.openedFromScriptRequest and f3_arg0.HelperBar then
			f3_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
				side = "left",
				button_ref = "button_secondary",
				priority = 0,
				helper_text = Engine[0xED84C33EC5F01EA]( 0xC6D515BE207B9A5 )
			} )
		end
		f3_arg0.bindButton:addEventHandler( "button_secondary", function ( f8_arg0, f8_arg1 )
			local f8_local0 = LUI.FlowManager.GetScopedData( f3_arg0 )
			if f8_local0.menuState == LOADOUT.MENU_STATE.loadoutEdit then
				if not Engine[0x12586A3F4FB490E]() then
					Engine[0x6055C55456F05DF]( "class_edit", f8_local0.selectedLoadoutIndex )
				end
				if f3_arg0.MenuTitle then
					MenuUtils.HideBackButton( f3_arg0.MenuTitle )
				end
				f3_arg0( f3_arg0, f3_arg0 )
			elseif CONDITIONS.IsBRLoadoutGameType( f3_arg0 ) then
				Engine[0x6055C55456F05DF]( "class_select", -1 )
				LUI.FlowManager.RequestCloseAllMenus()
			else
				Engine[0x6055C55456F05DF]( "class_menu_closed", 1 )
				LUI.FlowManager.RequestCloseAllMenus( f3_arg0.id, false, f8_arg1.controller )
			end
		end )
	end
	f3_arg2.loadoutsWidget:SetDefaultFocus( function ()
		local f7_local0 = f3_arg0.loadoutsWidget:GetPrimaryAxis() == LUI.DIRECTION.horizontal
		local f7_local1 = nil
		if f3_arg0.selectedLoadoutIndex then
			f7_local1 = f3_arg0.selectedLoadoutIndex
		elseif f3_arg0.selectedLoadout and f3_arg0.selectedLoadout:GetValue( f3_arg0 ) then
			f7_local1 = f3_arg0.selectedLoadout:GetValue( f3_arg0 )
			if f7_local1 >= LOADOUT.DEFAULT_LOADOUT_INDEX_START then
				local f7_local2 = PROGRESSION.AreCustomLoadoutsUnlocked( f3_arg0 )
				f7_local1 = f7_local1 - LOADOUT.DEFAULT_LOADOUT_INDEX_START
				if f7_local2 and not Game[0x28624DEF6F708C8]( f3_arg0, "ui_only_default_loadouts" ) and not Dvar[0x9E5BE3B4BBA4E0E]( 0x5B384C07850936B ) then
					f7_local1 = f7_local1 + f3_arg0.numValidLoadouts
				end
			end
		elseif f3_arg0._focusedLoadoutIndex then
			f7_local1 = f3_arg0._focusedLoadoutIndex
		end
		local f7_local2 = LOADOUT.FindValidLoadoutIndex
		local f7_local3 = f3_arg0
		local f7_local4
		if not f7_local1 then
			f7_local4 = f7_local1
		else
			f7_local4 = 0
		end
		f7_local2 = f7_local2( f7_local3, f7_local4 )
		local f7_local5
		if f7_local0 then
			f7_local5 = {
				y = 0,
				x = f7_local2
			}
			if not f7_local5 then
			
			else
				return f7_local5
			end
		end
		f7_local5 = {
			x = 0,
			y = f7_local2
		}
	end )
	f3_arg2.loadoutsWidget:MouseSetActiveToDefaultFocusMenuCreate( f3_arg1 )
	f3_arg2.loadoutsWidget:SetRefreshChild( function ( f6_arg0, f6_arg1, f6_arg2 )
		local f6_local0 = LOADOUT.GetValidLoadouts( f3_arg0 )
		local f6_local1 = false
		if CONDITIONS.InGame() then
			local f6_local2 = DataModel[0x614D394F6F9A18D]( DataSources.inGame.MP.loadoutSelect.inGameState:GetModel( f3_arg0 ) )
			if f6_local2 ~= LOADOUT.IN_GAME_STATE.default and (f6_local2 ~= LOADOUT.IN_GAME_STATE.mix or f3_arg0.numValidLoadouts > f6_arg2) then
				f6_local1 = false
			else
				f6_local1 = true
			end
		end
		local f6_local3
		if f3_arg0.loadoutsWidget:GetPrimaryAxis() == LUI.DIRECTION.horizontal and not f6_arg1 then
			f6_local3 = f6_arg1
		else
			f6_local3 = f6_arg2
		end
		if GL_HACK.IsIW9LoadoutMenuEnabled() then
			f3_arg0( f3_arg0, f3_arg0, f6_arg0, f6_local0, f6_local3, f6_local1 )
		else
			f3_arg0( f3_arg0, f3_arg0, f6_arg0, f6_local0, f6_local3, f6_local1 )
		end
	end )
	f3_arg0.LoadoutSelectButtons:SetMouseHandling( false )
	local f3_local8 = f3_local2.selectedLoadoutIndex
	if not f3_local8 then
		f3_local8 = 0
	end
	f3_arg0.LoadoutSelectButtons:SetupGridItems( f3_arg1, f3_local8, f3_arg2.loadoutsPlayerData[f3_local8], nil, f3_arg0 )
	if f3_local2.menuState == LOADOUT.MENU_STATE.loadoutEdit then
		if not CONDITIONS.IsMobileOrMobileSim() and f3_arg0.MenuTitle then
			f3_arg0.MenuTitle:SetupBackButton( f3_arg1 )
		end
		ACTIONS.AnimateSequence( f3_arg0, "LoadoutEditSnap" )
		f0_local0( f3_arg0, true )
		if f3_arg0.MenuTitle then
			f3_arg0.MenuTitle:SetTitle( f3_arg2.loadoutsPlayerData[f3_local8].name:get() )
		elseif f3_arg0.LoadoutTitle then
			f3_arg0.LoadoutTitle:setText( Engine[0xEB2A2834B76AEA4]( f3_arg2.loadoutsPlayerData[f3_local8].name:get() ) )
		end
		if f3_arg0.LoadoutsScrollbar then
			f3_arg0.LoadoutsScrollbar:SetAlpha( 0 )
		end
		if f3_arg0.LoadoutAddButton then
			f3_arg0.LoadoutAddButton:SetButtonDisabled( true )
		end
		f3_arg0.LoadoutSelectButtons:SetMouseHandling( true )
		f0_local0( f3_arg0, f3_arg1, false )
		if f3_arg0.BundleUpsellButton then
			f3_arg0.BundleUpsellButton:HideButton()
		end
		if not CONDITIONS.IsMobileOrMobileSim() and f3_local2.isAddingNewLoadout then
			f3_arg0.LoadoutSelectButtons:processEvent( {
				name = "gain_focus",
				controller = f3_arg1
			} )
		end
	else
		f0_local0( f3_arg0, false )
	end
	f0_local0( f3_arg0 )
	if not GL_HACK.IsIW9LoadoutMenuEnabled() then
		f0_local0( f3_arg0, f3_arg1 )
	end
	f0_local0( f3_arg0, f3_arg1, f3_arg2 )
	f0_local0( f3_arg0 )
	if LUI.IsLastInputKeyboardMouse( f3_arg1 ) and not CONDITIONS.IsMobileOrMobileSim() then
		f0_local0( f3_arg0, f3_arg1, f3_arg2, f3_local2 )
	end
	LUI.TextChat.SetupMenuForNoLine( f3_arg0 )
	f3_arg0:registerEventHandler( "lui_game_start_notify", function ( element, event )
		local f5_local0 = LUI.FlowManager.GetScopedData( element )
		if f5_local0.cacSessionDlogOnGoing then
			METRICS.CacSessionEndSendDLogEvent( f3_arg0, f5_local0.sessionID, f5_local0.cacSessionStartTime, METRICS.CacExitReasons.GAME_START_INTERRUPT )
			f5_local0.cacSessionDlogOnGoing = nil
		end
	end )
	if f3_arg0.RestrictionLoadoutWarning then
		if LOADOUT.MATCHRULES.IsThereARestrictedLoadout( f3_arg1 ) or Restrictions.ArePerksRestricted() then
			ACTIONS.AnimateSequence( f3_arg0, "RestrictionWarningOn" )
		else
			ACTIONS.AnimateSequence( f3_arg0, "RestrictionWarningOff" )
		end
	end
	if f3_arg0.BundleUpsellButton then
		f3_arg0.BundleUpsellButton:SetUpsellMenu( GL_HACK.GetLoadoutMenu() )
	end
	LUI.DeferredFence.Attach( f3_arg0, f3_arg1, "ACHIEVEMENTENGINE", LUI.DeferredFence.Criticality.MINOR, LUI.DeferredFence.BackOutMethod.NONE, function ( f4_arg0, f4_arg1 )
		
	end )
end

local f0_local56 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PreLoadShared = f0_local0
	f2_arg0.PostLoadShared = f0_local0
	f2_arg0.SetupLoadoutOverviewMenu = f0_local0
end

function LoadoutSelectBase( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "LoadoutSelectBase"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	self.HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	self.HelperBar.id = "HelperBar"
	self.HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
	self.HelperBar:setPriority( 10 )
	self:addElement( self.HelperBar )
	local f1_local2 = self
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "LoadoutSelectBase", LoadoutSelectBase )
LockTable( _M )
