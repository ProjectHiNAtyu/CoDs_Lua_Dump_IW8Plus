-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:04
ProgressBarUtils = ProgressBarUtils or {}
ProgressBarUtils.currentProgressBar = nil
local f0_local0 = function ()
	local f13_local0
	if not LUI.FlowManager.IsStackEmpty() then
		f13_local0 = SPSharedUtils.IsSPGametype()
	else
		f13_local0 = false
	end
	local f13_local1
	if CONDITIONS.InFrontend() or f13_local0 then
		f13_local1 = Engine[0x6991337AE950F99]()
		if not f13_local1 then
		
		else
			return f13_local1
		end
	end
	f13_local1 = Game[0x49FC972008AE526]()
end

local f0_local1 = function ( f10_arg0 )
	local f10_local0 = math.min( (f0_local0() - f10_arg0._progressBarStartTime) / f10_arg0._progressBarDuration, 1 )
	f10_arg0:SetProgress( f10_local0 )
	if f10_local0 < 1 then
		local f10_local1 = f10_arg0:Wait( 50, true )
		f10_local1.onComplete = function ()
			f10_arg0( f10_arg0 )
		end
		
	elseif f10_arg0._options and f10_arg0._options.onFill then
		local f10_local2 = f10_arg0:Wait( 10, true )
		f10_local2.onComplete = function ()
			local f11_local0 = {}
			if f10_arg0._options.callbackOptions then
				for f11_local4, f11_local5 in pairs( f10_arg0._options.callbackOptions ) do
					f11_local0[f11_local4] = f11_local5
				end
			end
			f10_arg0._options.onFill( f11_local0 )
			ProgressBarUtils.StopProgressBar( f10_arg0 )
		end
		
	end
end

ProgressBarUtils.StartProgressBar = function ( f9_arg0, f9_arg1 )
	if 0 < f9_arg1 then
		f9_arg0._progressBarDuration = f9_arg1
		f9_arg0._progressBarStartTime = f0_local0()
		f0_local0( f9_arg0 )
	else
		f9_arg0:SetProgress( 0 )
	end
	local f9_local0 = ProgressBarUtils.currentProgressBar
	if f9_local0 and f9_local0 ~= f9_arg0 then
		ProgressBarUtils.StopProgressBar( f9_local0 )
	end
	ProgressBarUtils.currentProgressBar = f9_arg0
end

ProgressBarUtils.StopProgressBar = function ( f8_arg0 )
	f8_arg0:SetProgress( 0 )
	f8_arg0:Wait( 0, true )
	ProgressBarUtils.currentProgressBar = nil
end

ProgressBarUtils.StopCurrentProgressBar = function ()
	local f7_local0 = ProgressBarUtils.currentProgressBar
	if f7_local0 then
		ProgressBarUtils.StopProgressBar( f7_local0 )
	end
end

local f0_local2 = function ( f5_arg0, f5_arg1, f5_arg2 )
	f5_arg0._options = f5_arg2
	f5_arg0:addEventHandler( "gamepad_button", function ( f6_arg0, f6_arg1 )
		local f6_local0 = f6_arg0._options
		if not f6_local0.buttons[f6_arg1.button] then
			return 
		elseif f6_arg1.down then
			if f6_arg1.qualifier == "gamepad" then
				ProgressBarUtils.StartProgressBar( f6_arg0, f6_local0.duration )
			else
				ProgressBarUtils.StopProgressBar( f6_arg0 )
				return 
			end
		else
			ProgressBarUtils.StopProgressBar( f6_arg0 )
		end
	end )
end

local f0_local3 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0._options = f3_arg2
	f3_arg0:addEventHandler( "gamepad_button", function ( f4_arg0, f4_arg1 )
		if not f4_arg0._options.buttons[f4_arg1.button] then
			return 
		elseif f4_arg1.down then
			if f4_arg1.qualifier == "gamepad" then
				f4_arg0:SetAlpha( 0, f4_arg0._options.duration )
			else
				f4_arg0:SetAlpha( 0.6, f4_arg0._options.duration )
				return 
			end
		else
			f4_arg0:SetAlpha( 0.6, f4_arg0._options.duration )
		end
	end )
end

ProgressBarUtils.AddUIHoldLogic = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg2.buttons = f2_arg2.buttons or {
		primary = true
	}
	f0_local0( f2_arg0, f2_arg1, f2_arg2 )
end

ProgressBarUtils.AddUIHoldFadeLogic = function ( f1_arg0, f1_arg1, f1_arg2 )
	f0_local0( f1_arg0, f1_arg1, f1_arg2 )
end

