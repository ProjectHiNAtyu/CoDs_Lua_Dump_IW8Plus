-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
module( ..., package.seeall )
local f0_local0 = 70
local f0_local1 = function ( f5_arg0, f5_arg1, f5_arg2 )
	f5_arg0._missionData = f5_arg2
	if f5_arg0.Header and f5_arg2.name then
		if f5_arg2.tacMapHeader or f5_arg2.forAAR then
			f5_arg0.Header:setText( Engine[0xED84C33EC5F01EA]( 0x86A701CA4333F27, Engine[0xED84C33EC5F01EA]( f5_arg2.name ), LUI.Round( 100 * f5_arg2.amountEarned / f5_arg2.amountNeeded, 0 ) ) )
		else
			f5_arg0.Header:setText( Engine[0xED84C33EC5F01EA]( f5_arg2.name ) )
		end
	end
	if f5_arg0.SubHeader then
		if f5_arg2.missionComplete and not CONDITIONS.IsOutbreakGametype() then
			f5_arg0.SubHeader:setText( Engine[0xED84C33EC5F01EA]( 0x94710A9DA385C42 ) )
		elseif f5_arg2.missionComplete and CONDITIONS.IsOutbreakGametype() and not f5_arg2.forAAR then
			f5_arg0.SubHeader:setText( Engine[0xED84C33EC5F01EA]( 0x94710A9DA385C42 ) )
		elseif f5_arg2.tacMapHeader or f5_arg2.forAAR then
			f5_arg0.SubHeader:setText( Engine[0xED84C33EC5F01EA]( 0xB19A6763B248984, DMZ.GetFactionMissionTierNumber( f5_arg2.ref ) ) )
		else
			f5_arg0.SubHeader:setText( "" )
		end
	end
	if f5_arg0.OverallProgress then
		local f5_local0
		if CONDITIONS.IsOutbreakGametype() then
			f5_local0 = "CAS/PERCENT_SMALL_SIGN"
		else
			f5_local0 = "MP/PERCENT"
		end
		f5_arg0.OverallProgress:setText( Engine[0xED84C33EC5F01EA]( f5_local0, f5_arg2.progress * 100 ) )
	end
	local f5_local0 = 0
	local f5_local1 = 0
	local f5_local2 = 0
	if f5_arg0.Header then
		f5_local0 = LAYOUT.GetTextWidth( f5_arg0.Header )
	end
	if f5_arg0.Divider then
		f5_local1 = 9
		f5_local2 = LAYOUT.GetElementWidth( f5_arg0.Divider )
	end
	local f5_local3 = 0
	local f5_local4 = 0
	if IsLanguageArabic() then
		if f5_arg0.Header then
			local f5_local5 = f5_arg0.Header:GetAnchorsAndPosition()
			f5_local3 = f5_local5.right - f5_local0
		end
		if f5_arg0.Divider then
			f5_arg0.Divider:SetRight( f5_local3 - f5_local1 )
			f5_arg0.Divider:SetLeft( f5_local3 - f5_local1 - f5_local2 )
		end
		if f5_arg0.OverallProgress then
			local f5_local5 = f5_local3 - f5_local1 - f5_local2 - f5_local1
			f5_arg0.OverallProgress:SetRight( f5_local5 )
			f5_arg0.OverallProgress:SetLeft( f5_local5 - LAYOUT.GetTextWidth( f5_arg0.OverallProgress ) )
		end
	else
		if f5_arg0.Header then
			local f5_local5 = f5_arg0.Header:GetAnchorsAndPosition()
			f5_local3 = f5_local5.left
			f5_local0 = LAYOUT.GetTextWidth( f5_arg0.Header )
		end
		local f5_local5 = f5_local3 + f5_local0
		if f5_arg0.Divider then
			f5_arg0.Divider:SetLeft( f5_local5 + f5_local1 )
			f5_arg0.Divider:SetRight( f5_local5 + f5_local1 + f5_local2 )
		end
		if f5_arg0.OverallProgress then
			local f5_local6 = f5_local5 + f5_local1 + f5_local2 + f5_local1
			f5_arg0.OverallProgress:SetLeft( f5_local6 )
			f5_arg0.OverallProgress:SetRight( f5_local6 + LAYOUT.GetTextWidth( f5_arg0.OverallProgress ) )
		end
	end
	local f5_local5 = DMZ.GetFactionMissionRefForChallenge( f5_arg2.ref )
	if f5_local5 and f5_arg0.FactionName and f5_arg0.FactionIcon and f5_arg0.FactionWaterMark then
		f5_arg0.FactionName:setText( Engine[0xED84C33EC5F01EA]( DMZ.GetFactionMissionDisplayName( f5_local5 ) ) )
		f5_arg0.FactionIcon:setImage( RegisterMaterial( DMZ.GetFactionMissionImage( f5_local5, DMZ.FactionMissionIconSizes.SMALL ) ) )
		f5_arg0.FactionWatermark:setImage( RegisterMaterial( DMZ.GetFactionMissionImage( f5_local5, DMZ.FactionMissionIconSizes.LARGE ) ) )
	end
	local f5_local6 = f5_arg0._missionData.childMissions and #f5_arg0._missionData.childMissions or 1
	f5_arg0.PMCMissionDetails:SetNumChildren( f5_local6 )
	f5_arg0.PMCMissionDetails:RefreshContent()
	local f5_local7 = f5_arg0:GetAnchorsAndPosition()
	f5_local7 = f5_local7.top
	local f5_local8 = f5_arg0.PMCMissionDetails:GetAnchorsAndPosition()
	f5_local8 = f5_local8.top
	local f5_local9 = f5_arg0.PMCMissionDetails:GetMaxVisibleRows()
	local f5_local10 = f5_local8 + f5_local6 * f0_local0
	if f5_arg0.MissionDescriptionBacker then
		f5_arg0.MissionDescriptionBacker:SetBottom( f5_local10 )
	end
	f5_arg0:SetBottom( f5_local10 )
	if f5_arg0.UpdateStoryMissionStyle then
		f5_arg0:UpdateStoryMissionStyle()
	end
	if f5_arg2.newMission then
		ACTIONS.AnimateSequence( f5_arg0, "NewMissionSequence" )
	elseif f5_arg2.missionComplete then
		if f5_arg2.forAAR then
			ACTIONS.AnimateSequence( f5_arg0, "CompletedMissionAAR" )
		else
			ACTIONS.AnimateSequence( f5_arg0, "CompletedMission" )
		end
	end
end

local f0_local2 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0.SetupPMCMission = f0_local0
	f3_arg0.PMCMissionDetails:SetRefreshChild( function ( f4_arg0, f4_arg1, f4_arg2 )
		if f3_arg0._missionData then
			local f4_local0 = f3_arg0._missionData.childMissions and f3_arg0._missionData.childMissions[f4_arg2 + 1] or f3_arg0._missionData
			local f4_local1 = f3_arg0.PMCMissionDetails:GetContentIndex( f4_arg1, f4_arg2 ) == (f3_arg0.PMCMissionDetails:GetNumRows() or 0) - 1
			f4_arg0._isLocalPlayerMission = f3_arg0.isLocalPlayerMission
			f4_arg0:SetupObjective( f4_local0, f4_local1 )
		end
	end )
	if IsLanguageArabic() then
		ACTIONS.AnimateSequence( f3_arg0, "AR" )
	end
end

local f0_local3 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PostLoadShared = f0_local0
end

function MissionProgressTrackerBase( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = f1_local0.UIElement.new()
	f1_local1:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 424, 0, 300 )
	f1_local1.id = "MissionProgressTrackerBase"
	local f1_local2
	if f1_arg1 then
		f1_local2 = f1_arg1
	else
		f1_local2 = f1_arg1.controllerIndex
	end
	f0_local0( f1_local1, f1_local0.ValidateControllerIndex( f1_local1, f1_local2 ), f1_arg1 )
	return f1_local1
end

MenuBuilder.registerType( 0x764801A45B555F7, MissionProgressTrackerBase )
LockTable( _M )
