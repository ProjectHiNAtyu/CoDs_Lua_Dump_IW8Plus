-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:02
EULAUtils = EULAUtils or {}
EULAUtils.FENCE_POPUP_NAME = "LoadingEulaFencePopup"
EULAUtils.INVALID_CONTROLLER_INDEX = -1
EULAUtils.State = {
	Declined = 2,
	Progress = 0,
	Accepted = 1
}
EULAUtils.acceptanceCache = {}
EULAUtils.openForController = EULAUtils.INVALID_CONTROLLER_INDEX
EULAUtils.UseNewWorkflow = function ()
	return Dvar[0x9E5BE3B4BBA4E0E]( 0x5538818F70E6321 )
end

EULAUtils.IsAccepted = function ( f6_arg0 )
	local f6_local0 = EULAUtils.acceptanceCache[f6_arg0]
	if not f6_local0 then
		f6_local0 = Legal[0x86BAFB16A56F490]( f6_arg0 )
	end
	return f6_local0
end

EULAUtils.QualifiedToCloseEULA = function ( f5_arg0 )
	local f5_local0
	if f5_arg0 ~= EULAUtils.openForController and EULAUtils.INVALID_CONTROLLER_INDEX ~= EULAUtils.openForController then
		f5_local0 = false
	else
		f5_local0 = true
	end
	return f5_local0
end

EULAUtils.UIOpeningTick = function ( f4_arg0 )
	local f4_local0 = LUI.WebViewManager.Instance()
	if not f4_local0:SystemIsReady() then
		f4_local0 = LUI.WebViewManager.Instance()
		f4_local0:UpdateTelescopeRequirement( true )
		return 
	elseif not EULAUtils._openedEULA then
		EULAUtils._openedEULA = true
		EULAUtils.openForController = f4_arg0
		f4_local0 = LUI.WebViewManager.Instance()
		f4_local0:OpenCerberusEULA( f4_arg0 )
	end
end

EULAUtils.EnsureEULAClosed = function ( f3_arg0 )
	if LUI.FlowManager.IsInStack( WebViewFullScreenConfigs.FullScreenName.EULAPopup ) and EULAUtils.QualifiedToCloseEULA( f3_arg0 ) then
		LUI.FlowManager.RequestLeaveMenuByName( WebViewFullScreenConfigs.FullScreenName.EULAPopup, true, true )
		EULAUtils.openForController = EULAUtils.INVALID_CONTROLLER_INDEX
	end
end

EULAUtils.Init = function ()
	EULAUtils._openedEULA = false
	for f2_local0 = 0, Engine[0xB686A0A723E6442]() - 1, 1 do
		Legal[0xF136FF2C086B760]( f2_local0 )
	end
end

EULAUtils.Process = function ( f1_arg0 )
	if EULAUtils.IsAccepted( f1_arg0 ) then
		EULAUtils.EnsureEULAClosed( f1_arg0 )
		EULAUtils.acceptanceCache[f1_arg0] = true
		return EULAUtils.State.Accepted
	elseif Legal[0xCA06EB7F47B0717]( f1_arg0 ) then
		EULAUtils.EnsureEULAClosed( f1_arg0 )
		return EULAUtils.State.Declined
	else
		EULAUtils.UIOpeningTick( f1_arg0 )
		return EULAUtils.State.Progress
	end
end

