-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:49
module( ..., package.seeall )
CoD.PrintModuleLoad( _NAME )
local f0_local0 = function ( f4_arg0, f4_arg1, f4_arg2 )
	for f4_local0 = 1, #f4_arg1, 1 do
		local f4_local3 = f4_arg1[f4_local0]
		Playlist[0x8CC3ADE1CCB75D4]( f4_local3.categoryIndex:GetValue( f4_arg2 ), f4_local3.playlistIndex:GetValue( f4_arg2 ) )
	end
	if PlaylistUtils.AtLeastOneGameModeFiltered( f4_arg0, f4_arg2 ) then
		return 
	end
	local f4_local0 = f4_arg0.playlists
	local f4_local1 = f4_arg0.playlists:GetCountValue( f4_arg2 )
	for f4_local2 = 0, f4_local1, 1 do
		local f4_local5, f4_local6 = PlaylistUtils.GetCategoryAndPlaylistIndex( f4_local0, f4_local2 )
		if f4_local5 and f4_local6 then
			local f4_local7, f4_local8 = Playlist[0xD9394BFC73475C8]( f4_local5, f4_local6 )
			if not f4_local8 then
				local f4_local9 = f4_local0:GetDataSourceAtIndex( f4_local2 )
				if f4_local9.maxPlayerSize:GetValue( f4_arg2 ) <= Lobby.MaxPlayerCountForSplitscreen then
					Playlist[0x8CC3ADE1CCB75D4]( f4_local5, f4_local6 )
					return 
				end
			end
		end
	end
end

MenuBuilder.registerType( "SplitScreenPopups", function ( f1_arg0, f1_arg1 )
	local f1_local0 = {
		title = Engine[0xED84C33EC5F01EA]( 0x1CCA5C59ECE1EA6 )
	}
	local f1_local1 = f1_arg1.maxPlayerPlaylists
	local f1_local2 = f1_arg1.controllerIndex
	if f1_local1 and 0 < #f1_local1 then
		if #f1_local1 <= 1 then
			f1_local0.message = Engine[0xED84C33EC5F01EA]( 0x44FD192EF130358, Engine[0x7D3158A9539A355]( f1_local1[1].name:GetValue( f1_local2 ) ) )
		else
			f1_local0.message = Engine[0xED84C33EC5F01EA]( 0x828A9DF2842C2DD )
		end
	elseif f1_arg1.isSplitScreenWarning then
		if 1 < Engine[0x70187FE84AE61FD]() then
			f1_local0.message = Engine[0xED84C33EC5F01EA]( 0x44FD192EF130358, Engine[0x7D3158A9539A355]( f1_arg1.text ) )
		else
			f1_local0.message = Engine[0xED84C33EC5F01EA]( 0xE090F6EA6AF41B7, Engine[0x7D3158A9539A355]( f1_arg1.text ) )
		end
	end
	f1_local0.controllerIndex = f1_local2
	f1_local0.gameModes = f1_local1
	f1_local0.buttons = {
		{
			label = Engine[0xED84C33EC5F01EA]( 0x5C33DA8F6CE65B0 ),
			action = function ()
				LUI.FlowManager.RequestLeaveMenu()
			end
		}
	}
	local f1_local3 = "PopupMessageAndButtons"
	if f1_local1 and 1 < #f1_local1 then
		assert( f1_arg1.acceptFunc )
		table.insert( f1_local0.buttons, 1, {
			label = Engine[0xED84C33EC5F01EA]( 0x887CE32613EA54C ),
			action = function ( f2_arg0, f2_arg1 )
				f1_arg0( f1_arg0.dataSource, f1_arg0, f1_arg0 )
				f1_arg0.acceptFunc()
			end
		} )
		f1_local3 = "RestrictSplitScreenPopup"
	end
	local f1_local4 = MenuBuilder.BuildRegisteredType( f1_local3, f1_local0 )
	f1_local4.isSignInMenu = true
	return f1_local4
end )
LockTable( _M )
