-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
GESTURES = GESTURES or {}
GESTURES.gimmeSlot = 0
GESTURES.numRadialSlots = 8
GESTURES.IsGimmeSlotActive = function ( f16_arg0, f16_arg1 )
	local f16_local0
	if f16_arg0 == GESTURES.gimmeSlot then
		f16_local0 = WATCH.IsAnyEquipped( f16_arg1 )
	else
		f16_local0 = false
	end
	return f16_local0
end

GESTURES.GetEquippedRadialRefsConfig = function ( f15_arg0, f15_arg1 )
	local f15_local0 = ""
	local f15_local1 = LOADOUT.GetCustomizationSetup( f15_arg1 )
	for f15_local2 = 0, GESTURES.numRadialSlots - 1, 1 do
		local f15_local5 = f15_local1.radial[f15_local2]:get()
		if f15_local5 > LOOT.emptyID then
			f15_local0 = f15_local0 .. "+" .. f15_local5
		end
	end
	if 0 < #f15_local0 then
		f15_local0 = string.sub( f15_local0, 2 )
	end
	return f15_local0
end

GESTURES.GetEquippedRadialRefsTable = function ( f14_arg0, f14_arg1 )
	local f14_local0 = {}
	local f14_local1 = LOADOUT.GetCustomizationSetup( f14_arg1 )
	for f14_local2 = 0, GESTURES.numRadialSlots - 1, 1 do
		local f14_local5 = f14_local1.radial[f14_local2]:get()
		if f14_local5 > LOOT.emptyID then
			local f14_local6 = LOOT.GetTypeForID( f14_local5 )
			local f14_local7
			if f14_local6 then
				f14_local7 = f14_local6
			else
				f14_local7 = LOOT.GetItemRef( f14_local6, f14_local5 )
			end
			if f14_local7 ~= nil then
				f14_local0[f14_local7] = f14_local5
			end
		end
	end
	return f14_local0
end

GESTURES.GetAllGestures = function ( f13_arg0 )
	return LOOT.GetAllLootType( f13_arg0, LOOT.itemTypes.GESTURES, CSV.gestures, nil, true )
end

GESTURES.HasUnlockedGesture = function ( f12_arg0 )
	local f12_local0 = StringTable[0xFD4E49A34DD43AE]( CSV.gestures.file )
	for f12_local1 = 0, f12_local0 - 1, 1 do
		local f12_local4 = CSV.ReadRow( CSV.gestures, f12_local1 )
		if f12_local4 and f12_local4.hideInUI ~= "1" and LOOT.IsUnlocked( f12_arg0, LOOT.itemTypes.GESTURES, f12_local4.ref ) then
			return true
		end
	end
	return false
end

GESTURES.GetImageForRef = function ( f11_arg0 )
	return StringTable[0x2DCF0973239E909]( CSV.gestures.file, CSV.gestures.cols.ref, f11_arg0, CSV.gestures.cols.image )
end

GESTURES.GetLootImageFromRef = function ( f10_arg0 )
	return StringTable[0x2DCF0973239E909]( CSV.gestures.file, CSV.gestures.cols.ref, f10_arg0, CSV.gestures.cols.lootImage )
end

GESTURES.GetNameForRef = function ( f9_arg0 )
	return StringTable[0x2DCF0973239E909]( CSV.gestures.file, CSV.gestures.cols.ref, f9_arg0, CSV.gestures.cols.name )
end

GESTURES.GetSeasonForRef = function ( f8_arg0 )
	return StringTable[0x2DCF0973239E909]( CSV.gestures.file, CSV.gestures.cols.ref, f8_arg0, CSV.gestures.cols.season )
end

GESTURES.GetIndexForRef = function ( f7_arg0 )
	return StringTable[0x2DCF0973239E909]( CSV.gestures.file, CSV.gestures.cols.ref, f7_arg0, CSV.gestures.cols.index )
end

GESTURES.SetEquippedByRef = function ( f6_arg0, f6_arg1, f6_arg2 )
	GESTURES.SetEquippedByID( f6_arg0, f6_arg1, LOOT.GetItemID( LOOT.itemTypes.GESTURES, f6_arg2 ) )
end

GESTURES.SetEquippedByID = function ( f5_arg0, f5_arg1, f5_arg2 )
	local f5_local0 = LOADOUT.GetCustomizationSetup( f5_arg0 )
	f5_local0.radial[f5_arg1]:set( f5_arg2 )
	if f5_arg2 > LOOT.emptyID then
		local f5_local1 = LOOT.GetItemRef( LOOT.itemTypes.GESTURES, f5_arg2 )
		GESTURES.ToastEquipped( f5_arg0, LOOT.GetItemImage( LOOT.itemTypes.GESTURES, f5_local1 ), LOOT.GetItemName( LOOT.itemTypes.GESTURES, f5_local1 ) )
	else
		GESTURES.ToastEquipped( f5_arg0, nil, Engine[0xED84C33EC5F01EA]( "MENU/NONE" ) )
	end
end

GESTURES.ToastEquipped = function ( f4_arg0, f4_arg1, f4_arg2 )
	local f4_local0 = {
		displayTime = 2000
	}
	local f4_local1
	if f4_arg1 and 0 < #f4_arg1 and not f4_arg1 then
		f4_local1 = f4_arg1
	else
		f4_local1 = "menu_default_slot"
	end
	f4_local0.icon = f4_local1
	if f4_arg2 and not f4_arg2 then
		f4_local1 = f4_arg2
	else
		f4_local1 = ""
	end
	f4_local0.description = f4_local1
	f4_local0.controllerIndex = f4_arg0
	f4_local0.header = Engine[0xED84C33EC5F01EA]( "LUA_MENU/GESTURE_EQUIPPED" )
	f4_local0.type = LUI.ToastManager.NotificationType.GestureEquipped
	LUI.UIRoot.ProcessEvent( Engine[0xEE6F69FEA944B13](), {
		name = "send_toast_notification",
		immediate = true,
		options = f4_local0
	} )
end

GESTURES.IsRadialItemEquipped = function ( f3_arg0, f3_arg1 )
	local f3_local0 = GESTURES.GetEquippedRadialRefsTable( nil, f3_arg0 )
	return f3_local0[f3_arg1] ~= nil
end

GESTURES.FindNextEmptyRadialSlot = function ( f2_arg0 )
	local f2_local0 = LOADOUT.GetCustomizationSetup( f2_arg0 )
	for f2_local1 = 0, GESTURES.numRadialSlots - 1, 1 do
		if f2_local0.radial[f2_local1]:get() == LOOT.emptyID then
			return f2_local1
		end
	end
	return nil
end

GESTURES.QuickEquipRadialItem = function ( f1_arg0, f1_arg1, f1_arg2, f1_arg3 )
	local f1_local0 = GESTURES.FindNextEmptyRadialSlot( f1_arg1 )
	if f1_local0 ~= nil then
		if f1_arg2 == LOOT.itemTypes.GESTURES then
			GESTURES.SetEquippedByRef( f1_arg1, f1_local0, f1_arg3 )
		elseif f1_arg2 == LOOT.itemTypes.SPRAYS then
			SPRAYS.SetEquippedByRef( f1_arg1, f1_local0, f1_arg3 )
		end
	else
		local f1_local1 = CONDITIONS.IsMenuInStack( "CPMainMenu" )
		local f1_local2 = LUI.FlowManager.GetScopedData
		local f1_local3
		if f1_local1 then
			f1_local3 = "CPMainMenu"
		else
			f1_local3 = "MPMainMenu"
		end
		f1_local2 = f1_local2( f1_local3 )
		local f1_local4 = f1_local2.quickEquip and f1_local2.quickEquip.nextEquippedRadialIndex or 0
		if f1_arg2 == LOOT.itemTypes.GESTURES then
			GESTURES.SetEquippedByRef( f1_arg1, f1_local4, f1_arg3 )
		elseif f1_arg2 == LOOT.itemTypes.SPRAYS then
			SPRAYS.SetEquippedByRef( f1_arg1, f1_local4, f1_arg3 )
		end
		f1_local2.quickEquip = {
			nextEquippedRadialIndex = (1 + f1_local4) % GESTURES.numRadialSlots
		}
	end
end

