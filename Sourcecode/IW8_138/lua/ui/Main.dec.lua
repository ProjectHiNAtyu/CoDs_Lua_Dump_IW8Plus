-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 02-09-2025 10:42
DebugPrint( "Running main.lua" )
function OpenTitleScreen()
	if Engine.CGABICJHAI() then
		if DCache.DFCGEDHBEC() then
			LUI.FlowManager.RequestPopupMenu( nil, "PopupYesNo", false, nil, false, {
				title = Engine.CBBHFCGDIC( "MENU/NOTICE" ),
				message = Engine.CBBHFCGDIC( "LUA_MENU/DCACHE_CLEAR_REQUEST" ),
				yesAction = function ()
					DCache.CAJICHGHDG( 1 )
					Engine.BHIJFFCAEB( Engine.CBBHFCGDIC( "@LUA_MENU/DCACHE_RESTART" ) )
				end,
				noAction = function ()
					DCache.BJEGJFBIBI()
					Engine.BHIJFFCAEB( Engine.CBBHFCGDIC( "@LUA_MENU/DCACHE_RESTART" ) )
				end
			}, nil, false, true )
		else
			Engine.CDGCBCBAJ( "Opening PC Main Menu", 0 )
			if Dvar.IBEGCHEFE( "LSTQOKLTRN" ) then
				LUI.FlowManager.RequestRestoreMenu( "MainMenuOffline", nil, nil )
			else
				LUI.FlowManager.RequestRestoreMenu( "MainMenu", nil, nil )
			end
		end
	else
		LUI.FlowManager.RequestRestoreMenu( "MainLockoutMenu", nil, nil )
	end
end

function PrepareForceOpenHighlightPanel()
	if Engine.CGABICJHAI() and Dvar.IBEGCHEFE( "LNQTQQPLRO" ) and Engine.CFJEBEJCFC() and Engine.JCFIBGGJB() then
		Dvar.DHEGHJJJHI( "NROLSNKS", true )
	end
end

function OpenInitialMenu()
	if Engine.CGABICJHAI() then
		Dvar.DHEGHJJJHI( "LSOLROSLNT", false )
		if Engine.DDJFBBJAIG() then
			Dvar.DHEGHJJJHI( "RMMMKOSTS", true )
			MAIN_MENU.RegisterTitleUpdateAvailableEventHandler()
		else
			Dvar.DHEGHJJJHI( "RMMMKOSTS", false )
		end
	end
	if IsMlgGameBattlesMatch() and not CONDITIONS.IsUserSignedInDemonware( Engine.IJEBHJIJF() ) then
		MLG.DEHBFHFDFJ( "0" )
		Dvar.DHEGHJJJHI( "MTMMPLSRNL", false )
	end
	local f2_local0 = Engine.BCDJIEIDID()
	local f2_local1 = Engine.CHACGEJGIH()
	local f2_local2
	if not Engine.EAAHGICFBD() then
		f2_local2 = not Engine.CAADCDEEIA()
	else
		f2_local2 = false
	end
	if Dvar.IBEGCHEFE( "Kleenex" ) then
		LUI.FlowManager.RequestRestoreMenu( "LevelSelectMenu", nil, nil )
	elseif Engine.DDJFBBJAIG() and f2_local2 then
		Dvar.DHEGHJJJHI( "RMMMKOSTS", false )
		if not f2_local0 or Engine.ECAJCAJJGF() or not f2_local1 then
			if Engine.EAGHDEHDGB() then
				LUI.FlowManager.RequestRestoreMenu( "splash_screens", nil, nil )
			else
				OpenTitleScreen()
			end
		else
			if Engine.CBFHIIHAGH() then
				Engine.CDGCBCBAJ( "Opening PC Main Menu", 0 )
			end
			LUI.FlowManager.RequestRestoreMenu( "MainMenu", nil, Engine.IJEBHJIJF() )
		end
	elseif Engine.DDJFBBJAIG() and Engine.EAAHGICFBD() then
		local f2_local3 = Engine.IJEBHJIJF()
		if Tournament.BEAIBEGFFB() then
			LUI.FlowManager.RequestRestoreMenu( TOURNAMENT.GetMenuName( "arena" ), nil, f2_local3 )
		elseif IsMlgGameBattlesMatch() then
			Engine.DAGFFDGFII( "xstopparty", f2_local3 )
			LUI.FlowManager.RequestRestoreMenu( "GameBattlesMatchLobby", nil, f2_local3 )
		elseif IsPublicMatch() and Engine.DAFGFCFHJI() then
			if Engine.HEEFCICJE() then
				LUI.FlowManager.RequestRestoreMenu( "BRPublicLobby", nil, f2_local3 )
			elseif Engine.EAIICIFIFA() then
				LUI.FlowManager.RequestRestoreMenu( "CPPublicMatchMenu", nil, f2_local3 )
			else
				LUI.FlowManager.RequestRestoreMenu( "MPPublicLobby", nil, f2_local3 )
			end
		elseif IsPrivateMatch() then
			if Engine.EAIICIFIFA() then
				LUI.FlowManager.RequestRestoreMenu( "CPPrivateMatchLobby", nil, f2_local3 )
			elseif Dvar.IBEGCHEFE( "LNSMSSTTSK" ) == true then
				local f2_local4
				if CONDITIONS.IsMagmaGameMode() then
					f2_local4 = "TrialsBR"
				else
					f2_local4 = "TrialsMP"
				end
				LUI.FlowManager.RequestRestoreMenu( f2_local4, nil, f2_local3 )
				Dvar.DHEGHJJJHI( "LNSMSSTTSK", false )
			elseif Dvar.IBEGCHEFE( "TKRPRPOSQ" ) == true then
				local f2_local4
				if CONDITIONS.IsMagmaGameMode() then
					f2_local4 = "TrialEventBR"
				else
					f2_local4 = "TrialEventMP"
				end
				Dvar.DHEGHJJJHI( "TKRPRPOSQ", false )
				LUI.FlowManager.RequestRestoreMenu( f2_local4, nil, f2_local3 )
			elseif Dvar.IBEGCHEFE( "LNQLRSNMQS" ) then
				if CONDITIONS.IsMagmaGameMode() then
					local f2_local4 = Dvar.CFHDGABACF( "NLOQPLMLKR" )
					local f2_local5 = Dvar.IBEGCHEFE( "RMTPOKQP" )
					if f2_local4 == MP.WarzonePracticePopupStatus.GO_TO_WARZONE_LOBBY or f2_local4 == MP.WarzonePracticePopupStatus.GO_TO_BLOODMONEY_LOBBY then
						local f2_local6 = PlaylistUtils.FindBRPostTutorialPlaylist( f2_local3, f2_local4 )
						if f2_local6 then
							if f2_local4 == MP.WarzonePracticePopupStatus.GO_TO_WARZONE_LOBBY then
								if Playlist.CDBBECIGIG( f2_local6.categoryIndex, f2_local6.playlistIndex ) then
									LUI.FlowManager.RequestAddMenu( "BRPublicLobby", false, f2_local3, false )
								else
									LUI.FlowManager.RequestAddMenu( "LobbyWarzoneTutorial", true, f2_local3, false, {
										tutorialType = Lobby.BRTutorialLobbyType.TUTORIAL,
										needContinue = f2_local5
									}, true )
								end
							elseif Playlist.CDBBECIGIG( f2_local6.categoryIndex, f2_local6.playlistIndex ) then
								LUI.FlowManager.RequestAddMenu( "BRPublicLobby", false, f2_local3, false )
							else
								LUI.FlowManager.RequestAddMenu( "LobbyWarzoneTutorial", true, f2_local3, false, {
									tutorialType = Lobby.BRTutorialLobbyType.TUTORIAL,
									needContinue = f2_local5
								}, true )
							end
						else
							LUI.FlowManager.RequestRestoreMenu( "BRMainMenu", nil, f2_local3 )
							LUI.FlowManager.RequestAddMenu( "LobbyWarzoneTutorial", true, f2_local3, false, {
								tutorialType = Lobby.BRTutorialLobbyType.TUTORIAL,
								needContinue = f2_local5
							}, true )
						end
					else
						LUI.FlowManager.RequestRestoreMenu( "BRMainMenu", nil, f2_local3 )
						if f2_local4 == MP.WarzonePracticePopupStatus.GO_TO_PRACTICE_LOBBY and Dvar.IBEGCHEFE( "MNRTKTQMLS" ) then
							LUI.FlowManager.RequestAddMenu( "LobbyWarzoneTutorial", true, f2_local3, false, {
								tutorialType = Lobby.BRTutorialLobbyType.PRACTICE,
								needContinue = f2_local5
							}, true )
						elseif f2_local4 == MP.WarzonePracticePopupStatus.GO_TO_BLOODMONEY_TUTORIAL_LOBBY and CONDITIONS.IsBMTutorialMapAvailable() then
							LUI.FlowManager.RequestAddMenu( "LobbyWarzoneTutorial", true, f2_local3, false, {
								tutorialType = Lobby.BRTutorialLobbyType.BLOODMONEY,
								needContinue = f2_local5
							}, true )
						else
							LUI.FlowManager.RequestAddMenu( "LobbyWarzoneTutorial", true, f2_local3, false, {
								tutorialType = Lobby.BRTutorialLobbyType.TUTORIAL,
								needContinue = f2_local5
							}, true )
						end
					end
					Dvar.DHEGHJJJHI( "RMTPOKQP", false )
					Dvar.DFIJDJFIFD( "NLOQPLMLKR", 0 )
				end
			elseif CONDITIONS.IsMagmaGameMode() then
				if Dvar.IBEGCHEFE( "lui_br_force_disband_to_main_menu" ) then
					Lobby.LeaveCustomGameLobby()
					Dvar.DFIJDJFIFD( "NLOQPLMLKR", MP.WarzonePracticePopupStatus.FORCE_BR_MAIN_MENU_FROM_WZ_PRIVATE )
					LUI.FlowManager.RequestRestoreMenu( "BRMainMenu", nil, f2_local3 )
				elseif not Dvar.IBEGCHEFE( "LOQQOSNQKN" ) or Dvar.CFHDGABACF( "NLOQPLMLKR" ) == MP.WarzonePracticePopupStatus.RESTORE_BR_MAIN_MENU_FROM_WZ_PRIVATE then
					Dvar.DFIJDJFIFD( "NLOQPLMLKR", 0 )
					LUI.FlowManager.RequestRestoreMenu( "BRMainMenu", nil, f2_local3 )
				else
					LUI.FlowManager.RequestRestoreMenu( "WarzonePrivateMatchLobby", nil, f2_local3 )
				end
			else
				LUI.FlowManager.RequestRestoreMenu( "PrivateMatchLobby", nil, f2_local3 )
			end
		elseif IsSystemLink() then
			if Engine.HDDHJIBDH() then
				LUI.FlowManager.RequestRestoreMenu( "MainMenu", nil, f2_local3 )
			elseif Engine.DAFGFCFHJI() then
				if Engine.EAIICIFIFA() then
					LUI.FlowManager.RequestRestoreMenu( "CPSystemLinkLobby", nil, f2_local3 )
				else
					LUI.FlowManager.RequestRestoreMenu( "MPSystemLinkLobby", nil, f2_local3 )
				end
			elseif Engine.EAIICIFIFA() then
				LUI.FlowManager.RequestRestoreMenu( "CPSystemLinkMenu", nil, f2_local3 )
			else
				LUI.FlowManager.RequestRestoreMenu( "MPSystemLinkMenu", nil, f2_local3 )
			end
		elseif IsOnlineMatch() then
			if Engine.EAIICIFIFA() then
				LUI.FlowManager.RequestRestoreMenu( "CPMainMenu", nil, f2_local3 )
			elseif CONDITIONS.IsMagmaGameMode() or Dvar.IBEGCHEFE( "ui_wz_mode" ) then
				Dvar.DHEGHJJJHI( "ui_wz_mode", false )
				LUI.FlowManager.RequestRestoreMenu( "BRMainMenu", nil, f2_local3 )
				PrepareForceOpenHighlightPanel()
			else
				LUI.FlowManager.RequestRestoreMenu( "MPMainMenu", nil, f2_local3 )
			end
		else
			OpenTitleScreen()
		end
	elseif Engine.DDJFBBJAIG() and Engine.CAADCDEEIA() then
		if not Engine.HDDHJIBDH() then
			local f2_local3 = Engine.IJEBHJIJF()
			if Engine.HABIAFADE() then
				LUI.FlowManager.RequestRestoreMenu( "CampaignMenu", nil, f2_local3 )
			else
				LUI.FlowManager.RequestRestoreMenu( "CampaignMenuOffline", nil, f2_local3 )
			end
		end
	elseif Engine.CAADCDEEIA() and not Engine.DDJFBBJAIG() and Dvar.IBEGCHEFE( "NLONRMOLKS" ) then
		LUI.FlowManager.RequestRestoreMenu( "pre_game", nil, Engine.IJEBHJIJF(), nil, nil, true )
	end
end

function Main()
	if Engine.DDJFBBJAIG() then
		InitFrontEndDataSources()
		PersistentBackground.SetToDefault()
	end
	math.randomseed( Engine.BFBIDEGDFB() )
	local f1_local0 = Engine.DGEFGAJIB()
	CoD.UpdateGameMode( f1_local0, CoD.PlayMode.None )
	THEMES.UpdateTheme( {
		currentGameMode = f1_local0,
		isMainMenu = f1_local0 == 0
	} )
	OpenInitialMenu()
end

