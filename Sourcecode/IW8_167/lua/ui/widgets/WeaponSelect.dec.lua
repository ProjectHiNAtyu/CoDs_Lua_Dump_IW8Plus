-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
module( ..., package.seeall )
local f0_local0 = function ( f59_arg0, f59_arg1 )
	if LOOT.HideLootBreadcrumbsCondition( true ) then
		return 
	end
	local f59_local0 = f59_arg0.Tabs:GetTabAtIndex( f59_arg1 )
	if not f59_local0:IsEnabled() then
		return 
	end
	local f59_local1 = WEAPON.GetNewWeaponIDsByClass( f59_arg0._controllerIndex, f59_arg0.tabsData[f59_arg1].classRef )
	if f59_local0.NewItemSmallIcon then
		local f59_local2 = f59_local0.NewItemSmallIcon
		local f59_local3 = f59_local2
		f59_local2 = f59_local2.UpdateAlpha
		local f59_local4
		if 0 < #f59_local1 and not f59_arg0._isRestricted then
			f59_local4 = 1
		else
			f59_local4 = 0
		end
		f59_local2( f59_local3, f59_local4, 0, true )
	end
end

local f0_local1 = function ( f58_arg0, f58_arg1, f58_arg2 )
	local f58_local0 = {}
	table.insert( f58_local0, f58_arg0._otherSelectedModel )
	table.insert( f58_local0, f58_arg0._equippedWatchModel )
	local f58_local1 = LUI.FlowManager.GetScopedData( f58_arg0 )
	local f58_local2 = nil
	for f58_local3 = f58_arg2 - 1, f58_arg2 + 1, 1 do
		local f58_local6
		if #f58_arg0._currentWeapons < f58_local3 then
			f58_local6 = 1
		elseif f58_local3 == 0 then
			f58_local6 = #f58_arg0._currentWeapons
		end
		local f58_local7 = assert
		local f58_local8
		if 0 >= f58_local6 or f58_local6 > #f58_arg0._currentWeapons then
			f58_local8 = false
		else
			f58_local8 = true
		end
		f58_local7( f58_local8 )
		local f58_local9 = WEAPON.GetWeaponModelNameFromRef( f58_arg0._currentWeapons[f58_local6].ref )
		DYN_ATTACHMENT.SetupWeaponAttachmentStreamer( f58_arg0, DYN_ATTACHMENT.GetDynamicAttachmentsTable( f58_local9 ), false )
		if not LUI.IsItemInArray( f58_local0, f58_local9 ) then
			if f58_local6 == f58_arg2 then
				f58_local2 = f58_local9
			else
				table.insert( f58_local0, f58_local9 )
			end
		end
	end
	if f58_local2 then
		table.insert( f58_local0, f58_local2 )
	end
	if 0 < #f58_local0 then
		FrontEndScene.RequestWeaponViewModels( f58_local0, f58_arg1 )
	end
end

local f0_local2 = function ( f57_arg0, f57_arg1 )
	for f57_local3, f57_local4 in ipairs( f57_arg0:GetBuiltChildren() ) do
		f57_local4:SetHandleMouse( f57_arg1 )
	end
end

local f0_local3 = function ( f56_arg0, f56_arg1, f56_arg2 )
	local f56_local0 = {}
	for f56_local1 = f56_arg2 - 1, f56_arg2 + 1, 1 do
		if 1 <= f56_local1 and f56_local1 <= #f56_arg0.tabsData and f56_local1 ~= f56_arg2 then
			local f56_local4 = WEAPON.GetWeaponModelNameFromRef( f56_arg0.tabsData[f56_local1].weaponData[1].ref )
			if not LUI.IsItemInArray( f56_local0, f56_local4 ) then
				table.insert( f56_local0, f56_local4 )
			end
		end
	end
	if not LUI.IsItemInArray( f56_local0, f56_arg0._otherSelectedModel ) then
		table.insert( f56_local0, f56_arg0._otherSelectedModel )
		table.insert( f56_local0, f56_arg0._equippedWatchModel )
	end
	if 0 < #f56_local0 then
		FrontEndScene.RequestWeaponViewModels( f56_local0, f56_arg1 )
	end
end

local f0_local4 = function ( f55_arg0, f55_arg1, f55_arg2, f55_arg3 )
	if f55_arg2.isBlueprint then
		return WEAPON.GetWeaponModelName( f55_arg2.weaponData.ref, f55_arg2.weaponData.blueprint, {
			includeAttachments = true,
			controllerIndex = f55_arg1
		} )
	else
		return WEAPON.GetWeaponModelNameFromRef( f55_arg2.weaponData.ref )
	end
end

local f0_local5 = function ( f52_arg0, f52_arg1, f52_arg2, f52_arg3, f52_arg4, f52_arg5 )
	local f52_local0 = f0_local0( f52_arg0, f52_arg1, f52_arg2, f52_arg5.weaponSetups[f52_arg4] )
	if f52_arg0._currentWeaponModel then
		local f52_local1 = function ()
			assert( f52_arg0._nextWeaponModel )
			f52_arg0._currentWeaponModel = f52_arg0._nextWeaponModel
			f52_arg0._nextWeaponModel = nil
			f52_arg0:SetWeaponModel( f52_arg0._currentWeaponModel )
			if f52_arg0.hidden then
				f52_arg0:SetAnchorsAndPosition( 0, 0, 0, 1, _1080p * -302, _1080p * 779, _1080p * 290, _1080p * 740, 0 )
				f52_arg0.hidden = false
			end
		end
		
		f52_arg0._nextWeaponModel = f52_local0
		assert( f52_arg0._nextWeaponModel )
		if Streaming.DACIGAEDAE( {
			f52_arg0._nextWeaponModel
		}, f52_arg1 ) then
			f52_local1()
		else
			local f52_local2 = nil
			local f52_local3 = function ()
				local f53_local0 = WEAPON.GenerateWeaponTable( f52_arg0.weaponSetups[f52_arg0] )
				if f52_arg0._nextWeaponModel then
					if Streaming.DACIGAEDAE( {
						f52_arg0._nextWeaponModel
					}, f52_arg0 ) then
						f52_arg0()
					else
						local f53_local1 = f52_arg0:Wait( 100, true )
						f53_local1.onComplete = f52_arg0
						f52_arg0:SetAnchorsAndPosition( 0, 0, 0, 1, _1080p * -302, _1080p * 779, _1080p * 1500, _1080p * 1500, 0 )
						f52_arg0.hidden = true
					end
				end
			end
			
			f52_local3()
		end
	end
	f52_arg3:SetWeaponModel( f52_local0 )
	f52_arg0._currentWeaponModel = f52_local0
	f52_arg0._nextWeaponModel = nil
end

local f0_local6 = function ( f51_arg0, f51_arg1 )
	local f51_local0 = -0.6
	local f51_local1 = 0.6
	local f51_local2 = -0.6
	local f51_local3 = 0.6
	local f51_local4 = 3500
	local f51_local5 = ""
	local f51_local6 = WEAPON.GetWeaponClass( f51_arg1 )
	if f51_arg0.weaponSlot == WEAPON.PrimarySlot then
		f51_local5 = "loadout_showcase_p"
	else
		f51_local5 = WEAPON.GetGunTableSecondPositionScene( f51_arg1 )
		if f51_local5 == "loadout_showcase_s" then
			local f51_local7 = -0.3
			local f51_local8 = 0.3
			local f51_local9 = -0.3
			f51_local3 = 0.3
			f51_local2 = f51_local9
			f51_local1 = f51_local8
			f51_local0 = f51_local7
			f51_local4 = 4500
		end
	end
	if f51_arg0._currentCamera ~= f51_local5 then
		f51_arg0._currentCamera = f51_local5
		Engine.DHFCHIIJCA( f51_arg0._currentCamera )
	end
	f51_arg0.FrontendCameraMover:SetLimits( f51_local0, f51_local1, f51_local2, f51_local3 )
	f51_arg0.FrontendCameraMover:SetSwayValues( f51_local4, 0.06, 0.1 )
end

local f0_local7 = function ( f50_arg0 )
	local f50_local0
	if f50_arg0 then
		f50_local0 = f50_arg0
	else
		if not f50_arg0.disabled then
			f50_local0 = f50_arg0.weaponData.isUnlocked
			if f50_local0 then
				if f50_arg0.weaponData.isGunsmithDisabled == "1" then
					f50_local0 = false
				else
					f50_local0 = true
				end
			else
				return f50_local0
			end
		end
		f50_local0 = false
	end
	return f50_local0
end

local f0_local8 = function ( f48_arg0, f48_arg1, f48_arg2, f48_arg3, f48_arg4 )
	return function ( f49_arg0, f49_arg1 )
		if Engine.DDJFBBJAIG() then
			f48_arg0( f48_arg0, f48_arg0.weaponData.ref )
		end
		local f49_local0 = f48_arg0.weaponData.isUnlocked
		f48_arg0.InfoPanel.ItemName:setText( ToUpperCase( f48_arg0.weaponName ) )
		f48_arg0.InfoPanel:SetEquipped( f48_arg0._isSelected )
		local f49_local1 = LOOT.GetItemID( LOOT.itemTypes.WEAPON, f48_arg0.weaponData.ref )
		local f49_local2 = false
		if not LOOT.HideLootBreadcrumbsCondition( true ) then
			f49_local2 = Loot.HDJCADADF( f48_arg0, f49_local1 )
		end
		local f49_local3 = CONDITIONS.AreRestrictionsActive( f48_arg0 )
		if f49_local3 then
			f49_local3 = MatchRules.CADFFHGJAE( f48_arg0.weaponData.ref )
		end
		local f49_local4 = {
			newDesc = f48_arg0.desc,
			isUnlocked = f49_local0,
			isNew = f49_local2,
			isRestricted = f49_local3
		}
		if not f49_local0 then
			if f48_arg0.weaponData.unlockThroughSeasonalEvent then
				f49_local4.unlockText = f48_arg0.weaponData.unlockCriteria
				f49_local4.unlockThroughSeasonalEvent = true
			else
				local f49_local5 = WEAPON.GetChallengeUnlockRow( f49_local1 )
				if f49_local5 and 0 <= f49_local5 then
					local f49_local6 = CSV.ReadRow( CSV.gunChallenges, f49_local5 )
					local f49_local7 = Gunsmith.CIJGBIFEIF( f48_arg0, f49_local6.id )
					f49_local4.challengeInfo = {
						lootID = f49_local1,
						challengeID = f49_local6.id,
						progress = f49_local7.progress
					}
				else
					f49_local4.unlockText = f48_arg0.weaponData.unlockCriteria
					f49_local4.unlockRank = PROGRESSION.GetUnlockRank( f49_local1 )
				end
			end
		end
		if f48_arg0.isAlreadyEquipped then
			f49_local4.isOverkill = true
			local f49_local5 = Engine.CBBHFCGDIC
			local f49_local7 = "LUA_MENU/WEAPON_CONFLICT"
			local f49_local8
			if f48_arg0.weaponSlot == 0 then
				f49_local8 = "LUA_MENU/SECONDARY"
			else
				f49_local8 = "LUA_MENU/PRIMARY"
			end
			f49_local4.unlockText = f49_local5( f49_local7, f49_local8 )
			f49_local4.isUnlocked = false
		end
		if CONDITIONS.UsingWZLoadouts() then
			f49_local4.weaponRef = f48_arg0.weaponData.ref
			f49_local4.selected = f48_arg0.equippedWeapon == f48_arg0.weaponData.ref
			f48_arg0.WZWipSnipeBackgroundSceneOverlay:UpdateSnipeOverlay( {
				weaponRef = f48_arg0.weaponData.ref,
				useGunsmithSetup = not Engine.DDJFBBJAIG()
			} )
		end
		f48_arg0.InfoPanel:UpdateDescription( f49_local4 )
		if Engine.DDJFBBJAIG() then
			local f49_local5 = f48_arg0( f48_arg0 )
			local f49_local6 = f48_arg0.InfoPanel.ActionPrompt
			local f49_local8 = f49_local6
			f49_local6 = f49_local6.SetAlpha
			local f49_local9
			if f49_local5 then
				f49_local9 = 1
			else
				f49_local9 = 0
			end
			f49_local6( f49_local8, f49_local9 )
		end
		if f48_arg0.isBlueprint then
			local f49_local5 = f48_arg0.weaponData.blueprint
			if f49_local5 then
				local f49_local6 = ATTACHMENT.GetStatsForAttachments( f48_arg0.weaponData.ref, f49_local5.attachments )
				f48_arg0.WeaponAttributes:Setup( f49_local5, f48_arg0 )
			end
		else
			f48_arg0.WeaponAttributes:Setup( {
				weapon = f48_arg0.weaponData.ref
			}, f48_arg0 )
		end
		f48_arg0.currentSelection = {
			weapon = f48_arg0.weaponData.ref,
			blueprint = f48_arg0.weaponData.blueprint
		}
		if Engine.DDJFBBJAIG() then
			f48_arg0( f48_arg0, f48_arg0, f48_arg0.gridIndex, f48_arg0 )
			f48_arg0( f48_arg0, f48_arg0, f48_arg0, f48_arg0.weaponModel, f48_arg0.weaponSlot, f48_arg0 )
		end
		local f49_local5 = LUI.FlowManager.GetScopedData( f48_arg0 )
		f49_local5.previousFocusedButton = f48_arg0
		if f48_arg0._isSelected then
			f48_arg0.InfoPanel.NewItemNotification:SetAlpha( 0 )
		else
			f48_arg0.InfoPanel.NewItemNotification:UpdateBreadcrumbByID( f48_arg0, f49_local1, true )
		end
		f48_arg0.ComparisonString:setText( Engine.CBBHFCGDIC( "WEAPON/COMPARISON", WEAPON.GetName( f48_arg0.equippedWeapon ) ) )
		if f48_arg0.BundleUpsellButton then
			if Dvar.IBEGCHEFE( "LTSNLQNRKO" ) and Dvar.IBEGCHEFE( "NKRLMNTNRS" ) and not CONDITIONS.AreRestrictionsActive( f48_arg0 ) and f49_local5.bundleVariants[f48_arg0.weaponData.ref] and f49_local5.bundleVariants[f48_arg0.weaponData.ref][1] then
				f48_arg0.BundleUpsellButton:SetupUpsellButtonWithBundleID( f48_arg0, f49_local5.bundleVariants[f48_arg0.weaponData.ref][1].bundleID )
			else
				f48_arg0.BundleUpsellButton:HideButton()
			end
		end
		if f48_arg0.MasterChallenges then
			if GUNSMITH.AreMasterChallengesEnabled( f48_arg0, f48_arg0.weaponData.ref ) then
				f48_arg0.MasterChallenges:SetAlpha( 1 )
				f48_arg0.MasterChallenges:Setup( f48_arg0.weaponData.ref )
			else
				f48_arg0.MasterChallenges:SetAlpha( 0 )
			end
		end
	end
	
end

local f0_local9 = function ( f47_arg0, f47_arg1, f47_arg2 )
	local f47_local0 = f47_arg2._loadoutPlayerData.loadoutPerks[0]:get()
	local f47_local1 = f47_arg2._loadoutPlayerData.loadoutPerks[1]:get()
	local f47_local2 = f47_arg2._loadoutPlayerData.loadoutPerks[2]:get()
	if not PERK.IsPerkOverkill( f47_local0 ) and not PERK.IsPerkOverkill( f47_local1 ) then
		local f47_local3 = PERK.IsPerkOverkill( f47_local2 )
	end
	if f47_arg2.equippedWeapon ~= f47_arg0.weaponData.ref then
		f47_arg2:dispatchEventToRoot( {
			name = "send_toast_notification",
			immediate = true,
			options = {
				iconScale = 4.667263495923649E-62,
				displayTime = 3000,
				icon = "cac_equip_fill",
				iconColor = SWATCHES.genericMenu.notificationHighlight,
				header = Engine.CBBHFCGDIC( "LUA_MENU/WEAPON_EQUIPPED" ),
				description = Engine.CBBHFCGDIC( f47_arg0.weaponData.name ),
				type = LUI.ToastManager.NotificationType.WeaponEquipped,
				controllerIndex = f47_arg1
			}
		} )
	end
	if f47_arg0.isBlueprint then
		WEAPON.EquipModification( f47_arg2._loadoutPlayerData.weaponSetups[f47_arg2.weaponSlot], f47_arg0.weaponData.blueprint )
	else
		WEAPON.EquipBaseWeapon( f47_arg2._loadoutPlayerData.weaponSetups[f47_arg2.weaponSlot], f47_arg0.weaponData.ref )
	end
end

local f0_local10 = function ( f46_arg0, f46_arg1, f46_arg2 )
	f0_local0( f46_arg2, controllerindex, f46_arg0, f46_arg0._loadoutPlayerData )
	GUNSMITH.OpenGunsmith( f46_arg1, f46_arg0.loadoutIndex, f46_arg0.weaponSlot, true )
end

local f0_local11 = function ( f45_arg0, f45_arg1, f45_arg2 )
	local f45_local0
	if not f45_arg2 then
		f45_local0 = f45_arg2
	else
		f45_local0 = {}
	end
	f45_local0.weaponTable = WEAPON.GenerateWeaponTableFromRef( f45_arg0.currentSelection.weapon )
	LUI.FlowManager.RequestAddMenu( "WeaponPreview", true, f45_arg1, nil, f45_local0, true )
end

local f0_local12 = function ( f41_arg0, f41_arg1, f41_arg2 )
	f41_arg1:SetupContextualMenu( {
		title = f41_arg1.weaponName
	} )
	f41_arg1:AddContextualMenuAction( {
		id = "equipAndGunsmith",
		actionName = Engine.CBBHFCGDIC( "LUA_MENU/TO_GUNSMITH_CONTEXTUAL_MENU" ),
		actionFunction = function ()
			f41_arg0( f41_arg0, f41_arg0, f41_arg0 )
		end,
		conditionFunction = function ()
			return f41_arg0( f41_arg0 )
		end
	} )
	if CONDITIONS.InFrontend( self ) then
		f41_arg1:AddContextualMenuAction( {
			id = "previewWeapon",
			actionName = Engine.CBBHFCGDIC( "CAS/PREVIEW_WEAPON" ),
			actionFunction = function ()
				f41_arg0( f41_arg0, f41_arg0, nil )
			end
		} )
	end
end

local f0_local13 = function ( f36_arg0, f36_arg1, f36_arg2, f36_arg3, f36_arg4, f36_arg5 )
	assert( f36_arg2.WeaponButton.BlueprintIndicator )
	local f36_local0 = 1 - f36_arg0.weaponSlot
	local f36_local1 = f36_arg5.weaponSetups[f36_arg0.weaponSlot]
	local f36_local2 = f36_arg5.weaponSetups[f36_local0]
	local f36_local3 = f36_local1.weapon:get()
	local f36_local4 = f36_local2.weapon:get()
	local f36_local5 = f36_arg2.WeaponButton
	f36_local5.lootID = LOOT.GetItemID( LOOT.itemTypes.WEAPON, f36_arg3.ref )
	f36_local5.isNew = f36_local5.NewItemNotification:UpdateBreadcrumbByID( f36_arg1, f36_local5.lootID, true )
	local f36_local6 = f36_local4 == f36_arg3.ref
	local f36_local7
	if f36_local3 ~= f36_arg3.ref then
		f36_local7 = f36_local6
	else
		f36_local7 = true
	end
	local f36_local8 = f36_local5
	local f36_local9 = f36_local5.SetButtonDisabled
	local f36_local10
	if f36_arg3.isUnlocked then
		f36_local10 = f36_local6
	else
		f36_local10 = true
	end
	f36_local9( f36_local8, f36_local10 )
	if f36_arg2.BlueprintButton then
		f36_arg2.BlueprintButton:SetButtonDisabled( f36_local6 )
	end
	f36_local5.isAlreadyEquipped = f36_local6
	f36_local5:SetSelected( f36_local7 )
	f36_arg3.unlockRow = 0
	f36_local5.weaponData = f36_arg3
	if f36_arg2.BlueprintButton then
		f36_arg2.BlueprintButton.weaponData = f36_arg3
	end
	f36_local5.gridIndex = f36_arg4
	f36_local5.desc = WEAPON.GetDesc( f36_local5.weaponData.ref )
	f36_local5.className = WEAPON.GetWeaponClassName( f36_local5.weaponData.ref )
	f36_local9 = f36_arg0.blueprintsByWeapon[f36_arg3.ref]
	local f36_local11 = f36_arg0.blueprintsByWeapon[f36_arg3.ref] and #f36_arg0.blueprintsByWeapon[f36_arg3.ref] or 0
	local f36_local12 = f36_arg2
	f36_local8 = f36_arg2.SetBlueprintActive
	local f36_local13 = f36_arg3.ref
	local f36_local14
	if f36_local9 then
		f36_local14 = f36_local9
	else
		f36_local14 = CONDITIONS.AreWeaponVariantsEnabled( f36_arg1 )
	end
	f36_local8( f36_local12, f36_local13, f36_local14, f36_local11 - 1 )
	f36_local8 = WEAPON.GetNewArmoryIDsByWeapon( f36_arg1, f36_local5.weaponData.ref )
	if f36_local8 and f36_arg2.BlueprintButton and f36_arg2.BlueprintButton.NewItemSmallIcon then
		f36_local10 = f36_arg2.BlueprintButton.NewItemSmallIcon
		f36_local13 = f36_local10
		f36_local10 = f36_local10.UpdateAlpha
		if 0 < #f36_local8 then
			f36_local14 = 1
		else
			f36_local14 = 0
		end
		f36_local10( f36_local13, f36_local14, 0, true )
	end
	if f36_arg2.BlueprintStoreButton then
		f36_local10 = LUI.FlowManager.GetScopedData( f36_arg0 )
		f36_local12 = STORE.AreAnyBundlesNew( f36_arg1, f36_local10.bundleVariants[f36_arg3.ref] )
		f36_local13 = f36_arg2.BlueprintStoreButton.NewItemSmallIcon
		local f36_local15 = f36_local13
		f36_local13 = f36_local13.UpdateAlpha
		local f36_local16
		if f36_local12 then
			f36_local16 = 1
		else
			f36_local16 = 0
		end
		f36_local13( f36_local15, f36_local16, 0, true )
	end
	f36_local10 = ""
	if f36_local7 then
		if f36_local3 == f36_arg3.ref then
			f36_local10 = GUNSMITH.GetCustomModName( f36_local1.blueprintName:get() )
			f36_local5.weaponData.blueprint = WEAPON.GenerateWeaponTable( f36_local1 )
		elseif f36_local4 == f36_arg3.ref then
			f36_local10 = GUNSMITH.GetCustomModName( f36_local2.blueprintName:get() )
			f36_local5.weaponData.blueprint = WEAPON.GenerateWeaponTable( f36_local2 )
		end
	end
	f36_local5.isBlueprint = 0 < #f36_local10
	if f36_local5.isBlueprint then
		f36_local5.weaponName = Engine.CBBHFCGDIC( "CAS/BLUEPRINT_AND_WEAPON", f36_arg3.name, Engine.JCBDICCAH( f36_local10 ) )
	else
		f36_local5.weaponName = Engine.CBBHFCGDIC( f36_arg3.name )
	end
	f36_local5.Text:setText( f36_local5.weaponName )
	f36_local5.ClassName:setText( WEAPON.GetSubClass( f36_arg3.ref ) )
	f36_local5.WeaponIcon:setImage( RegisterMaterial( WEAPON.GetBWImage( f36_local5.weaponData.ref ) ) )
	if CONDITIONS.UsingWZLoadouts() then
		WEAPON.DisplaySnipeIconByWeaponRef( f36_local5, f36_arg3.ref, {
			setSnipeAnimOnElement = true,
			useArabicPrefix = IsLanguageArabic()
		} )
	end
	if f36_local5.WeaponLevelBar then
		f36_local5.WeaponLevelBar:Setup( f36_arg1, f36_local5.weaponData.ref )
	end
	if CONDITIONS.UsingWZLoadouts() and PROGRESSION.IsWeaponMaxLevel( f36_arg1, f36_local5.weaponData.ref ) then
		f36_local5.WeaponLevel:setText( Engine.CBBHFCGDIC( "LUA_MENU/MAX_LEVEL_NUMBER", PROGRESSION.GetWeaponLevel( f36_arg1, f36_local5.weaponData.ref ) ) )
	else
		f36_local5.WeaponLevel:setText( Engine.CBBHFCGDIC( "LUA_MENU/OPERATOR_FACTION_LEVEL", PROGRESSION.GetWeaponLevel( f36_arg1, f36_local5.weaponData.ref ) ) )
	end
	f0_local0( f36_arg0, f36_local5, f36_arg1 )
	if not f36_local5.handlersAdded then
		f36_local5:addEventHandler( "button_over", f0_local0( f36_arg0, f36_local5, f36_arg1, f36_arg5, f36_local3 ) )
		f36_local5:addEventHandler( "tab_changed", f0_local0( f36_arg0, f36_local5, f36_arg1, f36_arg5, f36_local3 ) )
		f36_local5:addEventHandler( "button_over_disable", f0_local0( f36_arg0, f36_local5, f36_arg1, f36_arg5, f36_local3 ) )
		f36_local5:addEventHandler( "lose_focus", function ( f40_arg0 )
			if f36_arg0.isNew then
				f36_arg0.NewItemNotification:ClearBreadcrumbByID( f36_arg0, f40_arg0.lootID, true )
				f36_arg0:UpdateTabBreadcrumb( f36_arg0._currentTabIndex )
			end
			if f36_arg0.isNew and f36_arg0._currentTabIndex ~= f36_arg0._lastTabIndex then
				f36_arg0:UpdateTabBreadcrumb( f36_arg0._lastTabIndex )
				f36_arg0._lastTabIndex = f36_arg0._currentTabIndex
			end
		end )
		f36_local5:addEventHandler( "button_action", function ( f39_arg0 )
			DYN_ATTACHMENT.UpdateLoadoutWeaponStreamedImages( f39_arg0, f36_arg0, DYN_ATTACHMENT.StreamedImageAction.REMOVE )
			f36_arg0( f39_arg0, controllerindex, f36_arg0, f36_arg0 )
			if CONDITIONS.InGame() then
				Engine.EBHIFJCGBH( "equip_item_ingame", 1 )
			end
			DYN_ATTACHMENT.UpdateLoadoutWeaponStreamedImages( f39_arg0, f36_arg0, DYN_ATTACHMENT.StreamedImageAction.ADD )
			LUI.FlowManager.RequestLeaveMenu( f36_arg0, true )
		end )
		f36_local5.handlersAdded = true
		if f36_arg2.BlueprintButton then
			f36_arg2.BlueprintButton:addEventHandler( "button_over", f0_local0( f36_arg0, f36_local5, f36_arg1, f36_arg5, f36_local3 ) )
			f36_arg2.BlueprintButton:addEventHandler( "button_action", function ( f38_arg0 )
				LUI.FlowManager.RequestAddMenu( "WeaponLocker", true, f36_arg0, false, {
					selectingForWeapon = true,
					weaponSlot = f36_arg0.weaponSlot,
					loadoutIndex = f36_arg0.loadoutIndex,
					weaponRef = f38_arg0.weaponData.ref,
					hideTabs = true
				} )
			end )
		end
		if f36_arg2.BlueprintStoreButton then
			f36_arg2.BlueprintStoreButton:addEventHandler( "button_over", f0_local0( f36_arg0, f36_local5, f36_arg1, f36_arg5, f36_local3 ) )
			f36_arg2.BlueprintStoreButton:addEventHandler( "button_action", function ( f37_arg0, f37_arg1 )
				LUI.FlowManager.RequestAddMenu( "WeaponLocker", true, f37_arg1.controller, false, {
					blueprintStore = true,
					weaponRef = f36_arg0.weaponData.ref,
					weaponSlot = f36_arg0.weaponSlot
				}, true )
			end )
		end
	end
	if CONDITIONS.AreRestrictionsActive( f36_arg1 ) then
		f36_arg0._isRestricted = f36_arg3.isRestricted
		if f36_arg0._isRestricted then
			ACTIONS.AnimateSequence( f36_local5, "ShowRestriction" )
			f36_local5:SetButtonDisabled( true )
		else
			ACTIONS.AnimateSequence( f36_local5, "HideRestriction" )
			f36_local5:SetButtonDisabled( false )
		end
	end
	if CONDITIONS.InFrontend() then
		if Dvar.IBEGCHEFE( "lui_hide_recommended_weapons" ) ~= true and StringTable.DIFCHIGDFB( CSV.MPWeapons.file, CSV.MPWeapons.cols.ref, f36_arg3.ref, CSV.MPWeapons.cols.recommended ) == "1" then
			ACTIONS.AnimateSequence( f36_local5, "ShowRecommended" )
		else
			ACTIONS.AnimateSequence( f36_local5, "HideRecommended" )
		end
	end
	return f36_local5
end

local f0_local14 = function ( f35_arg0, f35_arg1, f35_arg2, f35_arg3, f35_arg4 )
	local f35_local0 = f35_arg0.WeaponsGrid:GetFocusPositionIndex()
	f35_arg0._currentWeapons = f35_arg4
	f35_arg0.WeaponsGrid._shouldFocus = false
	f35_arg0.WeaponsGrid:SetNumChildren( #f35_arg4 )
	local f35_local1 = 0
	for f35_local5, f35_local6 in ipairs( f35_arg4 ) do
		if f35_arg0.equippedWeapon == f35_local6.ref then
			f35_local1 = f35_local5
			break
		end
	end
	f35_local2 = f35_arg0.WeaponsGrid:GetPositionForIndex( f35_local1, {
		relativePosition = false
	} )
	f35_local2.y = f35_local2.y and f35_local2.y or f35_local2.y - 1
	if LUI.IsLastInputMouseNavigation( f35_arg1 ) then
		Engine.BJDBIAGIDA( SOUND_SETS.default.tabHighlight )
	end
	f35_arg0.WeaponsGrid:SetFocusedPosition( f35_local2, true )
	f35_arg0.WeaponsGrid:RefreshContent()
	f35_local3 = f35_arg0.WeaponsGrid:GetElementAtPosition( f35_local2.x, f35_local2.y )
	if Engine.DDJFBBJAIG() then
		f0_local0( f35_arg0, f35_arg1, f35_arg2, f35_arg3 )
	end
	if f35_local3 then
		f35_local3:processEvent( {
			name = "tab_changed"
		} )
	end
	if f35_local0 == f35_local1 then
		f35_local4 = CoD.SFX.MouseOver
		if f35_local3 and f35_local3.WeaponButton and f35_local3.WeaponButton.gainFocusSFX then
			if LUI.IsLastInputGamepad( f35_arg1 ) then
				f35_local4 = f35_local3.WeaponButton.gainFocusGamepadSFX
			elseif LUI.IsLastInputKeyboardMouse( f35_arg1 ) then
				f35_local4 = f35_local3.WeaponButton.gainFocusSFX
			end
		end
		Engine.BJDBIAGIDA( f35_local4 )
		if f35_local3 and not f35_local3.WeaponButton.disabled then
			ACTIONS.AnimateSequence( f35_local3.WeaponButton, "ProgressBarOver" )
		end
	end
end

local f0_local15 = function ( f34_arg0, f34_arg1 )
	local f34_local0 = LUI.FlowManager.GetScopedData( f34_arg0 )
	local f34_local1 = {
		weaponFilterType = f34_local0.weaponFilterType,
		weaponSortingByTitleType = f34_local0.weaponSortingByTitleType,
		weaponSortingByWeaponDataType = f34_local0.weaponSortingByWeaponDataType
	}
	if LUI.IsLastInputGamepad( f34_arg1 ) then
		f34_arg0.WZWipSortPrompt:UpdateText( f34_local1, "LUA_MENU/PAD_LEFT_TRIGGER_BUTTON" )
	else
		f34_arg0.WZWipSortPrompt:UpdateText( f34_local1, "INPUT/KB_LEFT_TRIGGER_BUTTON" )
	end
end

local f0_local16 = function ( f33_arg0 )
	local f33_local0 = {}
	for f33_local4, f33_local5 in pairs( LUI.GAME_SOURCE_ID ) do
		f33_local0[f33_local5] = 0
	end
	for f33_local4, f33_local5 in pairs( f33_arg0._weaponTable[f33_arg0.tabsData[f33_arg0._currentTabIndex].classRef] ) do
		for f33_local6, f33_local7 in pairs( LUI.GAME_SOURCE_ID ) do
			if f33_local5.gameSourceID == f33_local7 then
				f33_local0[f33_local7] = f33_local0[f33_local7] + 1
			end
		end
	end
	return f33_local0
end

local f0_local17 = function ( f32_arg0 )
	local f32_local0 = LUI.FlowManager.GetScopedData( f32_arg0 )
	if f32_local0.weaponFilterType and f32_local0.weaponFilterType == LOOT.weaponFilterOptions.ALL then
		local f32_local1 = #f32_arg0.tabsData
		for f32_local2 = 1, f32_local1, 1 do
			if f32_local2 ~= f32_arg0._currentTabIndex then
				local f32_local5 = f32_arg0.Tabs:GetTabAtIndex( f32_local2 )
				f32_local5:Enable()
			end
		end
		return 
	else
		if not f32_local0.weaponFilterType then
			return 
		end
		local f32_local1 = {}
		local f32_local2 = #f32_arg0.tabsData
		for f32_local3 = 1, f32_local2, 1 do
			f32_local1[f32_local3] = false
		end
		for f32_local3 = 1, f32_local2, 1 do
			for f32_local10, f32_local11 in pairs( f32_arg0._weaponTable[f32_arg0.tabsData[f32_local3].classRef] ) do
				if f32_local0.weaponFilterType == LOOT.weaponFilterOptions.COLD_WAR and f32_local11.gameSourceID == LUI.GAME_SOURCE_ID.COLD_WAR then
					f32_local1[f32_local3] = true
				end
				if f32_local0.weaponFilterType == LOOT.weaponFilterOptions.MODERN_WARFARE and f32_local11.gameSourceID == LUI.GAME_SOURCE_ID.MODERN_WARFARE then
					f32_local1[f32_local3] = true
				end
				if f32_local0.weaponFilterType == LOOT.weaponFilterOptions.VANGUARD and f32_local11.gameSourceID == LUI.GAME_SOURCE_ID.VANGUARD then
					f32_local1[f32_local3] = true
				end
			end
		end
		for f32_local3 = 1, f32_local2, 1 do
			if f32_local3 ~= f32_arg0._currentTabIndex then
				local f32_local7 = f32_arg0.Tabs:GetTabAtIndex( f32_local3 )
				if f32_local1[f32_local3] then
					f32_local7:Enable()
				else
					f32_local7:Disable()
				end
			end
		end
	end
end

local f0_local18 = function ( f31_arg0, f31_arg1 )
	local f31_local0 = {}
	local f31_local1 = LUI.FlowManager.GetScopedData( f31_arg0 )
	for f31_local5, f31_local6 in pairs( f31_arg0._weaponTable[f31_arg0.tabsData[f31_arg0._currentTabIndex].classRef] ) do
		if f31_local1.weaponFilterType == LOOT.weaponFilterOptions.COLD_WAR then
			if f31_local6.gameSourceID == LUI.GAME_SOURCE_ID.COLD_WAR then
				table.insert( f31_local0, f31_local6 )
			end
		end
		if f31_local1.weaponFilterType == LOOT.weaponFilterOptions.MODERN_WARFARE then
			if f31_local6.gameSourceID == LUI.GAME_SOURCE_ID.MODERN_WARFARE then
				table.insert( f31_local0, f31_local6 )
			end
		end
		if f31_local1.weaponFilterType == LOOT.weaponFilterOptions.VANGUARD then
			if f31_local6.gameSourceID == LUI.GAME_SOURCE_ID.VANGUARD then
				table.insert( f31_local0, f31_local6 )
			end
		end
		table.insert( f31_local0, f31_local6 )
	end
	f31_arg0._currentWeapons = f31_local0
	f31_local2 = {}
	f31_local3 = f31_local1.weaponSortingByWeaponDataType == LOOT.weaponSortByWeaponDataOptions.HIGHEST_LEVEL_FIRST
	f31_local4 = f31_local1.weaponSortingByWeaponDataType == LOOT.weaponSortByWeaponDataOptions.LOWEST_LEVEL_FIRST
	if not f31_local3 then
		f31_local5 = f31_local3
	else
		f31_local5 = f31_local4
	end
	f31_local6 = f31_local1.weaponSortingByWeaponDataType == LOOT.weaponSortByWeaponDataOptions.NEW_FIRST
	local f31_local7 = f31_local1.weaponSortingByWeaponDataType == LOOT.weaponSortByWeaponDataOptions.UNLOCKED_FIRST
	local f31_local8 = f31_local1.weaponSortingByWeaponDataType == LOOT.weaponSortByWeaponDataOptions.LOCKED_FIRST
	local f31_local9
	if not f31_local7 then
		f31_local9 = f31_local7
	else
		f31_local9 = f31_local8
	end
	if f31_local9 then
		table.insert( f31_local2, {
			sortFunc = MenuUtils.SortUnlocks,
			sortFuncParams = {
				sortByUnlockedFirst = f31_local7
			}
		} )
	elseif f31_local5 then
		table.insert( f31_local2, {
			sortFunc = MenuUtils.SortLevel,
			sortFuncParams = {
				controllerIndex = f31_arg1,
				sortByHighestLevelFirst = f31_local3
			}
		} )
	elseif f31_local6 then
		table.insert( f31_local2, {
			sortFunc = MenuUtils.SortNew,
			sortFuncParams = {
				controllerIndex = f31_arg1
			}
		} )
	end
	if f31_local1.weaponSortingByTitleType ~= LOOT.weaponSortByTitleOptions.OFF then
		table.insert( f31_local2, {
			sortFunc = MenuUtils.SortGameTypeFirst,
			sortFuncParams = {
				gameSourceID = LOOT.weaponSortGameSourceID[f31_local1.weaponSortingByTitleType]
			}
		} )
	end
	if Dvar.IBEGCHEFE( "NKOPLQKLQT" ) then
		table.insert( f31_local2, {
			sortFunc = MenuUtils.SortBySubClassIDAndGameSource
		} )
	else
		table.insert( f31_local2, {
			sortFunc = MenuUtils.SortByDisplayOrder
		} )
	end
	MenuUtils.SortTableViaOptions( f31_arg0._currentWeapons, f31_local2 )
	f0_local0( f31_arg0 )
	f0_local0( f31_arg0, f31_arg1 )
end

local f0_local19 = function ( f24_arg0, f24_arg1, f24_arg2 )
	f24_arg0.bindButton:addEventHandler( "button_secondary", function ( f30_arg0, f30_arg1 )
		ACTIONS.LeaveMenu( f24_arg0 )
	end )
	f24_arg0.bindButton:addEventHandler( "button_alt2", function ( f29_arg0, f29_arg1 )
		local f29_local0 = LUI.FlowManager.GetScopedData( f24_arg0 )
		local f29_local1 = f29_local0.previousFocusedButton
		if f24_arg0( f29_local1 ) then
			f24_arg0( f24_arg0, f24_arg0, f29_local1 )
		end
	end )
	if CONDITIONS.InFrontend( f24_arg0 ) then
		f24_arg0:addAndCallEventHandler( "update_input_type", function ( f28_arg0, f28_arg1 )
			if LUI.IsLastInputGamepad( f28_arg1.controllerIndex ) then
				f28_arg0:AddButtonHelperTextToElement( f28_arg0.HelperBar, {
					side = "left",
					button_ref = "button_r3",
					priority = 2,
					helper_text = Engine.CBBHFCGDIC( "CAS/PREVIEW_WEAPON" )
				} )
				f28_arg0.InfoPanel.SecondActionPrompt:SetAlpha( 0 )
			else
				f28_arg0:RemoveButtonHelperTextFromElement( f28_arg0.HelperBar, "button_r3", "left" )
				f28_arg0.InfoPanel.SecondActionPrompt:SetAlpha( 1 )
			end
		end, {
			controllerIndex = f24_arg1
		} )
		f24_arg0.bindButton:addEventHandler( "button_right_stick", function ( f27_arg0, f27_arg1 )
			f24_arg0( f27_arg0:getParent(), f24_arg0, f24_arg0 )
		end )
	end
	if CONDITIONS.UsingWZLoadouts() then
		f24_arg0.HelperBar:AddButtonHelperTextToElement( f24_arg0, {
			kbm_only = true,
			priority = 4,
			side = "left",
			button_ref = "button_left_trigger",
			helper_text = Engine.CBBHFCGDIC( "LUA_MENU/SORT_FILTER" )
		} )
		f24_arg0.bindButton:addEventHandler( "button_left_trigger", function ( f25_arg0, f25_arg1 )
			local f25_local0 = {
				data = {}
			}
			LOOT.SetupSortingBehavior( f25_local0.data, f24_arg0._controllerIndex, LOOT.itemTypes.WEAPON )
			f25_local0.numWeaponsByGameType = f24_arg0( f24_arg0, f24_arg0 )
			f25_local0.controllerIndex = f24_arg0
			f25_local0.type = LOOT.itemTypes.WEAPON
			local f25_local1 = MenuBuilder.BuildRegisteredType( "WZCustomizeFilteringSortingPopup", f25_local0 )
			LUI.FlowManager.RequestPopupMenu( nil, "FlyInPopup", true, f24_arg0, false, {
				flyInLeftNarrow = true,
				disableQuickAccessShortcuts = false,
				widget = f25_local1
			} )
			f25_local1:addEventHandler( "menu_close", function ( f26_arg0, f26_arg1 )
				local f26_local0 = LUI.FlowManager.GetScopedData( f25_arg0 )
				local f26_local1 = {}
				LOOT.SetupSortingBehavior( f26_local1, f25_arg0, LOOT.itemTypes.WEAPON )
				local f26_local2 = f26_local1.weaponFilterType
				if not f26_local2 then
					f26_local2 = LOOT.weaponFilterOptions.ALL
				end
				f26_local0.weaponFilterType = f26_local2
				f26_local2 = f26_local1.weaponSortingByTitleType
				if not f26_local2 then
					f26_local2 = LOOT.weaponSortByTitleOptions.OFF
				end
				f26_local0.weaponSortingByTitleType = f26_local2
				f26_local2 = f26_local1.weaponSortingByWeaponDataType
				if not f26_local2 then
					f26_local2 = LOOT.weaponSortByWeaponDataOptions.NONE
				end
				f26_local0.weaponSortingByWeaponDataType = f26_local2
			end )
		end )
	end
end

local f0_local20 = function ( f23_arg0, f23_arg1 )
	if Engine.DDJFBBJAIG() then
		FrontEndScene.SetExclusiveWeaponModels( {
			FrontEndScene.ClientWeapons.GunTablePrimary,
			FrontEndScene.ClientWeapons.GunTableSecondary,
			FrontEndScene.ClientWeapons.Watch
		} )
		local f23_local0 = MenuBuilder.BuildRegisteredType( "FrontendCameraMover", {
			enableSway = true,
			controllerIndex = f23_arg1
		} )
		f23_local0:SetSwayValues( 2000, 0.1, 0.1 )
		f23_arg0.FrontendCameraMover = f23_local0
		f23_arg0:addElement( f23_local0 )
	end
end

local f0_local21 = function ( f22_arg0 )
	local f22_local0 = LUI.FlowManager.GetScopedData( f22_arg0 )
	local f22_local1 = {}
	LOOT.SetupSortingBehavior( f22_local1, f22_arg0._controllerIndex, LOOT.itemTypes.WEAPON )
	local f22_local2 = f22_local1.weaponFilterType
	if not f22_local2 then
		f22_local2 = LOOT.weaponFilterOptions.ALL
	end
	f22_local0.weaponFilterType = f22_local2
	f22_local2 = f22_local1.weaponSortingByTitleType
	if not f22_local2 then
		f22_local2 = LOOT.weaponSortByTitleOptions.OFF
	end
	f22_local0.weaponSortingByTitleType = f22_local2
	f22_local2 = f22_local1.weaponSortingByWeaponDataType
	if not f22_local2 then
		f22_local2 = LOOT.weaponSortByWeaponDataOptions.NONE
	end
	f22_local0.weaponSortingByWeaponDataType = f22_local2
	ACTIONS.AnimateSequence( f22_arg0.WZWipSortPrompt, "WZWipWeaponSelectSortPromptSetup" )
end

local f0_local22 = function ( f14_arg0, f14_arg1, f14_arg2 )
	if f14_arg2.streamedImageTable and 0 < #f14_arg2.streamedImageTable then
		DYN_ATTACHMENT.SetupWidgetStreamer( f14_arg0, f14_arg2.streamedImageTable )
	end
	f0_local0( f14_arg0, f14_arg1 )
	if Engine.DDJFBBJAIG() then
		MenuUtils.SetupSceneChangeCallback( f14_arg0, function ()
			local f21_local0 = WATCH.GetEquippedWatch( f14_arg0 )
			local f21_local1 = WEAPON.GetWeaponModel( f14_arg0, FrontEndScene.ClientWeapons.Watch, CSV.weaponOffsets.watchFile )
			f14_arg0:addElement( f21_local1 )
			WATCH.SetWatchModelIfLoaded( f14_arg0, f14_arg0, f21_local1, f21_local0 )
		end )
	end
	assert( f14_arg0.Tabs )
	assert( f14_arg0.WeaponsGrid )
	assert( f14_arg0.InfoPanel )
	assert( f14_arg0.WeaponAttributes )
	assert( f14_arg0.bindButton )
	f14_arg0._controllerIndex = f14_arg1
	f14_arg0.UpdateTabBreadcrumb = f0_local0
	if IsLanguageChinese() then
		ACTIONS.AnimateSequence( f14_arg0, "CHT" )
	end
	if Engine.DDJFBBJAIG() then
		ACTIONS.AnimateSequence( f14_arg0, "Frontend" )
	elseif CONDITIONS.IsSplitscreen( f14_arg0 ) and CONDITIONS.InGame( f14_arg0 ) then
		ACTIONS.AnimateSequence( f14_arg0, "SplitScreen" )
	else
		ACTIONS.AnimateSequence( f14_arg0, "InGame" )
	end
	f14_arg0.InfoPanel:SetupPanel( f14_arg0.InfoPanel:GetCurrentAnchorsAndPositions() )
	if (f14_arg0.BundleUpsellButton or CONDITIONS.IsBlueprintStoreEnabled()) and Engine.DDJFBBJAIG() then
		local f14_local0 = LUI.FlowManager.GetScopedData( f14_arg0 )
		f14_local0.bundleVariants = WEAPON.GetPriorityVariants( f14_arg1, {
			excludeOwned = true,
			useBaseRefKeys = true
		} )
		f14_local0.bundleVariants = WEAPON.GetAllVariantsInStore( f14_arg1, {
			excludeOwned = true,
			useBaseRefKeys = true,
			variantsTable = f14_local0.bundleVariants
		} )
	end
	if Engine.BHICADFIHA() then
		if not f14_arg2.loadoutIndex then
			DebugPrint( "WARNING: Missing \"loadoutIndex\" option for WeaponSelect menu. Only OK after a MyChanges." )
			f14_arg2.loadoutIndex = 0
		end
		if not f14_arg2.weaponSlot then
			DebugPrint( "WARNING: Missing \"weaponSlot\" option for WeaponSelect menu. Only OK after a MyChanges." )
			f14_arg2.weaponSlot = 0
		end
	end
	assert( f14_arg2.loadoutIndex )
	assert( f14_arg2.weaponSlot )
	f14_arg0.MenuTitle:SetTitle( f14_arg2.weaponSlot and Engine.CBBHFCGDIC( "LUA_MENU/PRIMARY_WEAPON_SELECT" ) or Engine.CBBHFCGDIC( "LUA_MENU/SECONDARY_WEAPON_SELECT" ) )
	f0_local0( f14_arg0, f14_arg1, f14_arg2 )
	f14_arg0.loadoutIndex = f14_arg2.loadoutIndex
	f14_arg0.weaponSlot = f14_arg2.weaponSlot
	f14_arg0.blueprintsByWeapon = WEAPON.GetModificationsByWeaponWithBaseWeapon( f14_arg1 )
	local f14_local0 = PlayerData.BFFBGAJGD( f14_arg1, LOADOUT.GetLoadoutStatsGroup() )
	f14_local0 = f14_local0.squadMembers.loadouts[f14_arg0.loadoutIndex]
	f14_arg0._loadoutPlayerData = f14_local0
	f14_arg0.equippedWeapon = f14_local0.weaponSetups[f14_arg0.weaponSlot].weapon:get()
	local f14_local1 = f14_local0.loadoutPerks[0]:get()
	local f14_local2 = f14_local0.loadoutPerks[1]:get()
	local f14_local3 = f14_local0.loadoutPerks[2]:get()
	local f14_local4 = PERK.IsPerkOverkill( f14_local1 )
	if not f14_local4 then
		f14_local4 = PERK.IsPerkOverkill( f14_local2 )
		if not f14_local4 then
			f14_local4 = PERK.IsPerkOverkill( f14_local3 )
		end
	end
	local f14_local5
	if f14_arg0.weaponSlot == WEAPON.SecondarySlot then
		f14_local5 = f14_local4
	else
		f14_local5 = false
	end
	local f14_local6
	if f14_local5 then
		f14_local6 = WEAPON.PrimarySlot
		if not f14_local6 then
		
		else
			if Engine.DDJFBBJAIG() then
				f0_local0( f14_arg0, f14_arg0.equippedWeapon )
				local weaponModel = WEAPON.GetWeaponModel( f14_arg1, f14_arg2.weaponSlot )
				f14_arg0:addElement( weaponModel )
				f14_arg0.weaponModel = weaponModel
				
				local f14_local8 = f14_local0.weaponSetups[1 - f14_arg0.weaponSlot]
				f14_arg0._otherSelectedModel = WEAPON.GetWeaponModelNameFromPlayerData( f14_local8.weapon:get(), f14_local8, {
					includeCamos = true,
					includeAttachments = true,
					includeStickers = true,
					controllerIndex = f14_arg1
				} )
				f14_arg0._equippedWatchModel = WATCH.GetFullModelName( WATCH.GetEquippedWatch( f14_arg1 ) )
			end
			local weaponModel = BATTLEPASS.GetLootTierMap()
			local f14_local9 = CONDITIONS.IsSeasonalEventActive()
			local f14_local8 = nil
			if f14_local9 then
				local f14_local10 = SEASONAL_EVENT.GetChallengesData( f14_arg1 )
				f14_local8 = f14_local10.miscChallengesData
			end
			f14_arg0._weaponTable = {}
			local f14_local10 = {}
			for f14_local11 = 0, StringTable.BFHCAIIDA( CSV.weapons.file ), 1 do
				local f14_local14 = CSV.ReadRow( CSV.weapons, f14_local11 )
				local f14_local15 = tonumber( f14_local14.displayOrder )
				if f14_local15 then
					f14_local15 = 0 <= tonumber( f14_local14.displayOrder )
				end
				local f14_local16 = Engine.BHICADFIHA()
				if not f14_local16 then
					if #f14_local14.UIShowDvar ~= 0 then
						f14_local16 = Dvar.IBEGCHEFE( f14_local14.UIShowDvar )
					else
						f14_local16 = true
					end
				end
				if f14_local15 and f14_local16 then
					local f14_local17 = MatchRules.CADFFHGJAE( f14_local14.ref )
					if not CONDITIONS.InGame() or not f14_local17 then
						if not f14_arg0._weaponTable[f14_local14.menuClass] then
							f14_arg0._weaponTable[f14_local14.menuClass] = {}
						end
						f14_local14.isUnlocked = PROGRESSION.IsUnlocked( f14_arg1, LOOT.itemTypes.WEAPON, f14_local14.ref )
						local f14_local18
						if f14_local14.isUnlocked or f14_local14.hiddenWhenLocked ~= "1" then
							f14_local18 = false
						else
							f14_local18 = true
						end
						local f14_local19 = LOOT.GetItemID( LOOT.itemTypes.WEAPON, f14_local14.ref )
						local f14_local20 = not LOOT.IsItemRefEquippableForMode( LOOT.itemTypes.WEAPON, f14_local14.ref )
						local f14_local21
						if not f14_local18 then
							f14_local21 = f14_local18
						else
							f14_local21 = f14_local20
						end
						if not f14_local14.isUnlocked then
							local f14_local22
							if weaponModel then
								f14_local22 = weaponModel[f14_local19]
								if not f14_local22 then
								
								else
									local f14_local23 = false
									if f14_local9 and f14_local8 then
										for f14_local27, f14_local28 in ipairs( f14_local8 ) do
											if tonumber( f14_local28.lootID ) == f14_local19 then
												f14_local23 = true
												break
											end
										end
									end
									if f14_local22 then
										f14_local14.unlockCriteria = Engine.CBBHFCGDIC( "BATTLEPASS/LOCKED_INCOMPLETE_WITH_BATTLEPASS", f14_local22 )
									elseif f14_local23 then
										f14_local14.unlockCriteria = Engine.CBBHFCGDIC( "SEASONAL_EVENT/COMPLETE_ALL_GAME_CHALLENGES", #f14_local8 / 2 - 1, Engine.CBBHFCGDIC( "SEASONAL_EVENT/SEASONAL_EVENT_TITLE" ) )
										f14_local14.unlockThroughSeasonalEvent = true
									else
										f14_local14.unlockCriteria = PROGRESSION.GetUnlockText( f14_arg1, LOOT.itemTypes.WEAPON, f14_local14.ref )
									end
								end
							end
							f14_local22 = nil
						end
						if not f14_local21 then
							if CONDITIONS.UsingWZLoadouts() then
								f14_local14.lootID = f14_local19
								f14_local14.gameSourceID = LOOT.GetGameSourceIDFromItemID( f14_local19 )
							end
							f14_local14.isRestricted = f14_local17
							if f14_local17 then
								if not f14_local10[f14_local14.menuClass] then
									f14_local10[f14_local14.menuClass] = {}
								end
								table.insert( f14_local10[f14_local14.menuClass], f14_local14 )
							end
							table.insert( f14_arg0._weaponTable[f14_local14.menuClass], f14_local14 )
						end
					end
				end
			end
			for f14_local29, f14_local14 in pairs( f14_arg0._weaponTable ) do
				table.sort( f14_local14, function ( f20_arg0, f20_arg1 )
					return tonumber( f20_arg0.displayOrder ) < tonumber( f20_arg1.displayOrder )
				end )
			end
			for f14_local29, f14_local14 in pairs( f14_local10 ) do
				table.sort( f14_local14, function ( f19_arg0, f19_arg1 )
					return tonumber( f19_arg0.displayOrder ) < tonumber( f19_arg1.displayOrder )
				end )
			end
			for f14_local29, f14_local14 in pairs( f14_local10 ) do
				for f14_local18, f14_local19 in pairs( f14_local14 ) do
					table.insert( f14_arg0._weaponTable[f14_local29], f14_local19 )
				end
			end
			f14_arg0.WeaponsGrid:SetRefreshChild( function ( f18_arg0, f18_arg1, f18_arg2 )
				f14_arg0( f14_arg0, f14_arg0, f18_arg0, f14_arg0._currentWeapons[f18_arg2 + 1], f18_arg2 + 1, f14_arg0 )
			end )
			if not CONDITIONS.InGame() and CONDITIONS.IsWZWipFlowEnabled() then
				ACTIONS.AnimateSequence( f14_arg0, "WZWipSetup" )
				LAYOUT.SetupScalingBackgroundVignette( f14_arg0, {
					customAnimState = "ShowWeaponOverlay",
					customVignette = f14_arg0.WZVignette
				} )
			end
			if CONDITIONS.UsingWZLoadouts() then
				f0_local0( f14_arg0 )
				ACTIONS.AnimateSequence( f14_arg0.InfoPanel, "WZWipWeaponSelectSetup" )
				if IsLanguageArabic() then
					ACTIONS.AnimateSequence( f14_arg0.InfoPanel, "WZAR" )
				else
					f14_arg0.InfoPanel.NewItemNotification:SetupLeftAlignment()
				end
			end
			f14_local11 = {}
			for f14_local12 = 0, StringTable.BFHCAIIDA( CSV.weaponClasses.file ), 1 do
				local f14_local15 = CSV.ReadRow( CSV.weaponClasses, f14_local12 )
				if f14_local15.showInMenus == "1" and tonumber( f14_local15.slot ) == f14_local6 + 1 and f14_arg0._weaponTable[f14_local15.ref] then
					local f14_local16
					if f14_local15.isWZOnly == "1" then
						f14_local16 = not CONDITIONS.UsingWZLoadouts()
					else
						f14_local16 = false
					end
					if not f14_local16 then
						if not CONDITIONS.InGame() or not MatchRules.DEJJEDIGDE( f14_local15.ref ) then
							local f14_local18 = {
								classRef = f14_local15.ref,
								name = Engine.CBBHFCGDIC( f14_local15.pluralName ),
								focusFunction = function ( f17_arg0, f17_arg1, f17_arg2 )
									f14_arg0._lastTabIndex = f14_arg0._currentTabIndex
									f14_arg0._currentTabIndex = f17_arg2 + 1
									if not f14_arg0._lastTabIndex then
										f14_arg0._lastTabIndex = f14_arg0._currentTabIndex
									end
									if CONDITIONS.UsingWZLoadouts() then
										f14_arg0( f14_arg0, f17_arg1 )
										if f14_arg0._currentWeapons == nil or #f14_arg0._currentWeapons == 0 then
											local f17_local0 = LUI.FlowManager.GetScopedData( f14_arg0 )
											f17_local0.weaponFilterType = LOOT.weaponFilterOptions.ALL
											f14_arg0( f14_arg0, f17_arg1 )
										end
										f14_arg0( f14_arg0, f17_arg1, f14_arg0 + 1, f14_arg0, f14_arg0._currentWeapons )
									else
										f14_arg0( f14_arg0, f17_arg1, f14_arg0 + 1, f14_arg0, f14_arg0._weaponTable[f14_arg0.ref] )
									end
								end,
								weaponData = f14_arg0._weaponTable[f14_local15.ref]
							}
							if f14_local15.ref == WEAPON.GetWeaponClass( f14_arg0.equippedWeapon ) then
								f14_local18.hasDefaultFocus = true
							end
							table.insert( f14_local11, f14_local18 )
						end
					end
				end
			end
			f14_arg0.tabsData = f14_local11
			f14_arg0.Tabs:SetTabs( f14_local11 )
			f14_arg0.Tabs:SetAlignment( LUI.Alignment.Left )
			for f14_local12 = 1, #f14_local11, 1 do
				f14_arg0:UpdateTabBreadcrumb( f14_local12 )
			end
			f14_arg0:addAndCallEventHandler( "update_input_type", function ( f16_arg0, f16_arg1 )
				if Engine.DDJFBBJAIG() then
					if LUI.IsLastInputKeyboardMouse( f16_arg1.controllerIndex ) then
						f16_arg0.InfoPanel.ActionPrompt:setText( Engine.CBBHFCGDIC( "LUA_MENU/TO_GUNSMITH_PROMPT" ), 0 )
					else
						f16_arg0.InfoPanel.ActionPrompt:setText( Engine.CBBHFCGDIC( "LUA_MENU/TO_GUNSMITH_PROMPT" ), 0 )
					end
					if CONDITIONS.UsingWZLoadouts() then
						f14_arg0( f16_arg0, f16_arg1.controllerIndex )
					end
				end
			end, {
				controllerIndex = f14_arg1
			} )
			if CONDITIONS.InGame() and not CONDITIONS.IsThirdGameMode() then
				f14_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
					clickable = true,
					priority = 5,
					ignoreTooltip = false,
					side = "left",
					kbmTooltipPromptOverload = "button_dismiss_pause_menu",
					button_ref = "button_start",
					helper_text = Engine.CBBHFCGDIC( "LUA_MENU/DISMISS_MENU" )
				} )
				f14_arg0.bindButton:addEventHandler( "button_start", function ( f15_arg0, f15_arg1 )
					LUI.FlowManager.RequestCloseAllMenus()
				end )
			end
			ACTIONS.ScaleStretchAnchorFullscreen( f14_arg0.TabBacker )
			LAYOUT.AddAspectRatioFadeFrame( f14_arg0, f14_arg1 )
			if f14_arg0.InGameMenuBackground then
				ACTIONS.ScaleFullscreen( f14_arg0.InGameMenuBackground )
			end
			if CONDITIONS.InGame() then
				ACTIONS.ScaleFullscreen( f14_arg0.Vignette )
			end
			if f14_arg0.BundleUpsellButton then
				f14_arg0.BundleUpsellButton:SetUpsellMenu( "WeaponSelect" )
			end
		end
	end
	f14_local6 = f14_arg0.weaponSlot
end

function WeaponSelect( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "WeaponSelect"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	self.HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	self.HelperBar.id = "HelperBar"
	self.HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
	self.HelperBar:setPriority( 10 )
	self:addElement( self.HelperBar )
	local f1_local2 = self
	local f1_local3 = nil
	if CONDITIONS.InGame() then
		f1_local3 = MenuBuilder.BuildRegisteredType( "InGameMenuBackground", {
			controllerIndex = f1_local1
		} )
		f1_local3.id = "InGameMenuBackground"
		f1_local3:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
		self:addElement( f1_local3 )
		self.InGameMenuBackground = f1_local3
	end
	local f1_local4 = nil
	if CONDITIONS.UsingWZLoadouts() then
		f1_local4 = MenuBuilder.BuildRegisteredType( "WZSnipeBackgroundSceneOverlay", {
			controllerIndex = f1_local1
		} )
		f1_local4.id = "WZWipSnipeBackgroundSceneOverlay"
		f1_local4:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
		self:addElement( f1_local4 )
		self.WZWipSnipeBackgroundSceneOverlay = f1_local4
	end
	local Vignette = nil
	
	Vignette = LUI.UIImage.new()
	Vignette.id = "Vignette"
	Vignette:SetRGBFromTable( SWATCHES.genericMenu.blackBackground, 0 )
	Vignette:SetAlpha( 0.5, 0 )
	Vignette:setImage( RegisterMaterial( "widg_gradient_left_to_right" ), 0 )
	Vignette:SetAnchorsAndPosition( 0, 0, 0, 0, _1080p * -185, _1080p * -1058, 0, 0 )
	self:addElement( Vignette )
	self.Vignette = Vignette
	
	local f1_local6 = nil
	if CONDITIONS.IsWZWipFlowEnabled() then
		f1_local6 = MenuBuilder.BuildRegisteredType( "WZAccentMenuOverlay", {
			controllerIndex = f1_local1
		} )
		f1_local6.id = "WZVignette"
		f1_local6:SetAlpha( 0, 0 )
		f1_local6:SetAnchorsAndPosition( 0, 1, 0, 0, 0, _1080p * 1920, 0, 0 )
		self:addElement( f1_local6 )
		self.WZVignette = f1_local6
	end
	local TabBacker = nil
	
	TabBacker = MenuBuilder.BuildRegisteredType( "TabBacker", {
		controllerIndex = f1_local1
	} )
	TabBacker.id = "TabBacker"
	TabBacker:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 160 )
	self:addElement( TabBacker )
	self.TabBacker = TabBacker
	
	local MenuTitle = nil
	
	MenuTitle = MenuBuilder.BuildRegisteredType( "MenuTitle", {
		controllerIndex = f1_local1
	} )
	MenuTitle.id = "MenuTitle"
	MenuTitle.MenuTitle:setText( "", 0 )
	MenuTitle.Line:SetLeft( 0, 0 )
	MenuTitle:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1020, 0, _1080p * 100 )
	self:addElement( MenuTitle )
	self.MenuTitle = MenuTitle
	
	local WeaponsGrid = nil
	
	WeaponsGrid = LUI.UIGrid.new( {
		scrollingThresholdX = 0,
		buildArrowsLabel = false,
		maxVelocity = 5000,
		adjustSizeToContent = false,
		scrollingThresholdY = 0,
		wrapX = false,
		maxVisibleColumns = 1,
		wrapY = true,
		arrowsVerticalOffset = 0,
		forcePrimaryAxisScrolling = true,
		springCoefficient = 400,
		maxVisibleRows = SubtractForSplitscreen( 4, 2 ),
		controllerIndex = f1_local1,
		buildChild = function ()
			return MenuBuilder.BuildRegisteredType( "WeaponButtonGroup", {
				controllerIndex = menu
			} )
		end,
		refreshChild = function ( f12_arg0, f12_arg1, f12_arg2 )
			
		end,
		spacingX = _1080p * 10,
		spacingY = _1080p * 10,
		columnWidth = _1080p * 532,
		rowHeight = _1080p * 162,
		horizontalAlignment = LUI.Alignment.Left,
		verticalAlignment = LUI.Alignment.Top
	} )
	WeaponsGrid.id = "WeaponsGrid"
	WeaponsGrid:setUseStencil( true )
	WeaponsGrid:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -838, _1080p * -312, _1080p * 213, _1080p * 898 )
	self:addElement( WeaponsGrid )
	self.WeaponsGrid = WeaponsGrid
	
	local WeaponAttributes = nil
	
	WeaponAttributes = MenuBuilder.BuildRegisteredType( "WeaponAttributes", {
		controllerIndex = f1_local1
	} )
	WeaponAttributes.id = "WeaponAttributes"
	WeaponAttributes:SetAnchorsAndPosition( 0, 1, 1, 0, _1080p * 720, _1080p * 1154, _1080p * -261, _1080p * -101 )
	self:addElement( WeaponAttributes )
	self.WeaponAttributes = WeaponAttributes
	
	local f1_local11 = nil
	if not Engine.DDJFBBJAIG() then
		f1_local11 = MenuBuilder.BuildRegisteredType( "InGameMenuTimerStatus", {
			controllerIndex = f1_local1
		} )
		f1_local11.id = "InGameMenuTimerStatus"
		f1_local11:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 820, _1080p * 1220, _1080p * 54, _1080p * 104 )
		self:addElement( f1_local11 )
		self.InGameMenuTimerStatus = f1_local11
	end
	local f1_local12 = nil
	if CONDITIONS.InFrontendPublicMP() then
		f1_local12 = MenuBuilder.BuildRegisteredType( "MPPlayerDetails", {
			controllerIndex = f1_local1
		} )
		f1_local12.id = "MPPlayerDetails"
		f1_local12:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -596, _1080p * -96, _1080p * 54, _1080p * 114 )
		self:addElement( f1_local12 )
		self.MPPlayerDetails = f1_local12
	end
	local VWeaponScrollbar = nil
	
	VWeaponScrollbar = MenuBuilder.BuildRegisteredType( "VerticalMinimalScrollbar", {
		controllerIndex = f1_local1
	} )
	VWeaponScrollbar.id = "VWeaponScrollbar"
	VWeaponScrollbar:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 108, _1080p * 216, _1080p * 891 )
	self:addElement( VWeaponScrollbar )
	self.VWeaponScrollbar = VWeaponScrollbar
	
	local InfoPanel = nil
	InfoPanel = MenuBuilder.BuildRegisteredType( "PerkInfoPanel", {
		controllerIndex = f1_local1
	} )
	InfoPanel.id = "InfoPanel"
	if CONDITIONS.InFrontendOrWaveMode() then
		InfoPanel.ActionPrompt:setText( Engine.CBBHFCGDIC( "LUA_MENU/TO_GUNSMITH_PROMPT" ), 0 )
	end
	if CONDITIONS.InFrontendOrWaveMode() then
		InfoPanel.SecondActionPrompt:setText( Engine.CBBHFCGDIC( "CAS/PREVIEW_WEAPON_PROMPT" ), 0 )
	end
	InfoPanel:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 720, _1080p * 1246, _1080p * 216, _1080p * 306 )
	self:addElement( InfoPanel )
	self.InfoPanel = InfoPanel
	
	local Tabs = nil
	
	Tabs = LUI.TabManager.new( {
		spacing = 4,
		wrap = true,
		tabHeight = _1080p * 52,
		buildTab = function ()
			return MenuBuilder.BuildRegisteredType( "SubMenuTab", {
				controllerIndex = menu
			} )
		end,
		controllerIndex = f1_local1
	} )
	Tabs.id = "Tabs"
	Tabs:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 996, _1080p * 108, _1080p * 160 )
	self:addElement( Tabs )
	self.Tabs = Tabs
	
	local ArrowUp = nil
	
	ArrowUp = MenuBuilder.BuildRegisteredType( "NavigationArrow", {
		controllerIndex = f1_local1
	} )
	ArrowUp.id = "ArrowUp"
	ArrowUp:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -743, _1080p * -711, _1080p * 898, _1080p * 930 )
	self:addElement( ArrowUp )
	self.ArrowUp = ArrowUp
	
	local ArrowDown = nil
	
	ArrowDown = MenuBuilder.BuildRegisteredType( "NavigationArrow", {
		controllerIndex = f1_local1
	} )
	ArrowDown.id = "ArrowDown"
	ArrowDown.Arrow:SetZRotation( 180, 0 )
	ArrowDown:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -575, _1080p * -543, _1080p * 898, _1080p * 930 )
	self:addElement( ArrowDown )
	self.ArrowDown = ArrowDown
	
	local ListCount = nil
	
	ListCount = LUI.UIText.new()
	ListCount.id = "ListCount"
	ListCount:SetRGBFromTable( SWATCHES.text.primaryText, 0 )
	ListCount:setText( "", 0 )
	ListCount:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	ListCount:SetAlignment( LUI.Alignment.Center )
	ListCount:SetVerticalAlignment( LUI.Alignment.Center )
	ListCount:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -711, _1080p * -575, _1080p * 905, _1080p * 925 )
	self:addElement( ListCount )
	self.ListCount = ListCount
	
	local f1_local19 = nil
	if CONDITIONS.InFrontend() then
		f1_local19 = MenuBuilder.BuildRegisteredType( "LobbyMembersFooter", {
			controllerIndex = f1_local1
		} )
		f1_local19.id = "LobbyMembersFooter"
		f1_local19:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 150 )
		self:addElement( f1_local19 )
		self.LobbyMembersFooter = f1_local19
	end
	local ComparisonString = nil
	
	ComparisonString = LUI.UIStyledText.new()
	ComparisonString.id = "ComparisonString"
	ComparisonString:SetRGBFromTable( SWATCHES.genericButton.description, 0 )
	ComparisonString:setText( "", 0 )
	ComparisonString:SetFont( FONTS.GetFont( FONTS.BodyRegular.File ) )
	ComparisonString:SetAlignment( LUI.Alignment.Left )
	ComparisonString:SetAnchorsAndPosition( 0, 1, 1, 0, _1080p * 753, _1080p * 1135, _1080p * -284, _1080p * -267 )
	self:addElement( ComparisonString )
	self.ComparisonString = ComparisonString
	
	local f1_local21 = nil
	if Engine.DDJFBBJAIG() then
		f1_local21 = MenuBuilder.BuildRegisteredType( "CDLRestrictionTag", {
			controllerIndex = f1_local1
		} )
		f1_local21.id = "CDLRestrictionTag"
		f1_local21.CDLInfo:SetAlpha( 1, 0 )
		f1_local21:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1508, _1080p * 1824, _1080p * 124, _1080p * 154 )
		self:addElement( f1_local21 )
		self.CDLRestrictionTag = f1_local21
	end
	local f1_local22 = nil
	if Engine.DDJFBBJAIG() then
		f1_local22 = MenuBuilder.BuildRegisteredType( "BundleUpsellButton", {
			controllerIndex = f1_local1
		} )
		f1_local22.id = "BundleUpsellButton"
		f1_local22:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1340, _1080p * 1790, _1080p * 775, _1080p * 979 )
		self:addElement( f1_local22 )
		self.BundleUpsellButton = f1_local22
	end
	local f1_local23 = nil
	if CONDITIONS.InFrontendPublic() then
		f1_local23 = MenuBuilder.BuildRegisteredType( "WeaponMasterSummary", {
			controllerIndex = f1_local1
		} )
		f1_local23.id = "MasterChallenges"
		f1_local23:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1272, _1080p * 1824, _1080p * 216, _1080p * 396 )
		self:addElement( f1_local23 )
		self.MasterChallenges = f1_local23
	end
	local f1_local24 = nil
	if CONDITIONS.UsingWZLoadouts() then
		f1_local24 = MenuBuilder.BuildRegisteredType( "SortPrompt", {
			controllerIndex = f1_local1
		} )
		f1_local24.id = "WZWipSortPrompt"
		f1_local24:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 130, _1080p * 260, _1080p * 170, _1080p * 194 )
		self:addElement( f1_local24 )
		self.WZWipSortPrompt = f1_local24
	end
	self._sequences.DefaultSequence = function ()
		
	end
	
	local f1_local25 = nil
	WeaponsGrid:RegisterAnimationSequence( "Frontend", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 654
		}
	} )
	WeaponAttributes:RegisterAnimationSequence( "Frontend", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 720
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1154
		}
	} )
	InfoPanel:RegisterAnimationSequence( "Frontend", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 720
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1246
		}
	} )
	self._sequences.Frontend = function ()
		menu:AnimateSequence( "Frontend" )
		menu:AnimateSequence( "Frontend" )
		menu:AnimateSequence( "Frontend" )
	end
	
	local f1_local26 = nil
	WeaponsGrid:RegisterAnimationSequence( "InGame", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -843
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -274
		}
	} )
	ArrowUp:RegisterAnimationSequence( "InGame", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -764
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -732
		}
	} )
	ArrowDown:RegisterAnimationSequence( "InGame", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -596
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -564
		}
	} )
	ListCount:RegisterAnimationSequence( "InGame", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -732
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -596
		}
	} )
	self._sequences.InGame = function ()
		menu:AnimateSequence( "InGame" )
		menu:AnimateSequence( "InGame" )
		menu:AnimateSequence( "InGame" )
		menu:AnimateSequence( "InGame" )
	end
	
	local f1_local27 = nil
	ListCount:RegisterAnimationSequence( "CountArabic", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 898
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 928
		}
	} )
	self._sequences.CountArabic = function ()
		menu:AnimateSequence( "CountArabic" )
	end
	
	local f1_local28 = nil
	WeaponsGrid:RegisterAnimationSequence( "SplitScreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 170
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 556
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -843
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -315
		}
	} )
	WeaponAttributes:RegisterAnimationSequence( "SplitScreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 720
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 400
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1246
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 540
		}
	} )
	if not Engine.DDJFBBJAIG() then
		f1_local11:RegisterAnimationSequence( "SplitScreen", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Left,
				value = _1080p * 760
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Right,
				value = _1080p * 1160
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Top,
				value = _1080p * 34
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Bottom,
				value = _1080p * 84
			}
		} )
	end
	VWeaponScrollbar:RegisterAnimationSequence( "SplitScreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 170
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 499
		}
	} )
	InfoPanel:RegisterAnimationSequence( "SplitScreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 720
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1246
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 170
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 262
		}
	} )
	ArrowUp:RegisterAnimationSequence( "SplitScreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 529
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 561
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -754
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -722
		}
	} )
	ArrowDown:RegisterAnimationSequence( "SplitScreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 529
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 561
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -586
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -554
		}
	} )
	ListCount:RegisterAnimationSequence( "SplitScreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 536
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 556
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -722
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -586
		}
	} )
	self._sequences.SplitScreen = function ()
		menu:AnimateSequence( "SplitScreen" )
		menu:AnimateSequence( "SplitScreen" )
		if not Engine.DDJFBBJAIG() then
			menu:AnimateSequence( "SplitScreen" )
		end
		menu:AnimateSequence( "SplitScreen" )
		menu:AnimateSequence( "SplitScreen" )
		menu:AnimateSequence( "SplitScreen" )
		menu:AnimateSequence( "SplitScreen" )
		menu:AnimateSequence( "SplitScreen" )
	end
	
	local f1_local29 = nil
	ComparisonString:RegisterAnimationSequence( "CHT", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -304
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * -286
		}
	} )
	self._sequences.CHT = function ()
		menu:AnimateSequence( "CHT" )
	end
	
	local f1_local30 = nil
	Vignette:RegisterAnimationSequence( "WZWipSetup", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	if CONDITIONS.IsWZWipFlowEnabled() then
		f1_local6:RegisterAnimationSequence( "WZWipSetup", {
			{
				value = 1,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	self._sequences.WZWipSetup = function ()
		menu:AnimateSequence( "WZWipSetup" )
		if CONDITIONS.IsWZWipFlowEnabled() then
			menu:AnimateSequence( "WZWipSetup" )
		end
	end
	
	if Engine.DDJFBBJAIG() then
		f1_local22:addEventHandler( "button_over", function ( f3_arg0, f3_arg1 )
			local f3_local0 = f3_arg1.controller or menu
			ACTIONS.AnimateSequenceByElement( menu, {
				elementPath = "self.BundleUpsellButton",
				sequenceName = "ButtonOver",
				elementName = "BundleUpsellButton"
			} )
		end )
		f1_local22:addEventHandler( "button_up", function ( f2_arg0, f2_arg1 )
			local f2_local0 = f2_arg1.controller or menu
			ACTIONS.AnimateSequenceByElement( menu, {
				elementPath = "self.BundleUpsellButton",
				sequenceName = "ButtonUp",
				elementName = "BundleUpsellButton"
			} )
		end )
	end
	local f1_local31 = LUI.UIScrollbar.new
	local f1_local32 = {
		direction = LUI.DIRECTION.vertical,
		eventListener = VWeaponScrollbar,
		startCap = VWeaponScrollbar.startCap,
		endCap = VWeaponScrollbar.endCap,
		sliderArea = VWeaponScrollbar.sliderArea
	}
	local f1_local33 = VWeaponScrollbar.sliderArea
	if f1_local33 then
		f1_local33 = VWeaponScrollbar.sliderArea.slider
	end
	f1_local32.slider = f1_local33
	f1_local33 = VWeaponScrollbar.sliderArea
	if f1_local33 then
		f1_local33 = VWeaponScrollbar.sliderArea.fixedSizeSlider
	end
	f1_local32.fixedSizeSlider = f1_local33
	WeaponsGrid:AddScrollbar( f1_local31( f1_local32 ) )
	WeaponsGrid:AddArrow( ArrowUp )
	WeaponsGrid:AddArrow( ArrowDown )
	WeaponsGrid:AddItemNumbers( ListCount )
	self.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_secondary",
		helper_text = Engine.CBBHFCGDIC( "MENU/BACK" )
	} )
	self.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_primary",
		priority = 1,
		helper_text = Engine.CBBHFCGDIC( "LUA_MENU/EQUIP" )
	} )
	
	local bindButton = LUI.UIBindButton.new()
	bindButton.id = "selfBindButton"
	self:addElement( bindButton )
	self.bindButton = bindButton
	
	f0_local0( self, f1_local1, controller )
	if CONDITIONS.IsArabic() then
		ACTIONS.AnimateSequence( self, "CountArabic" )
	end
	return self
end

MenuBuilder.registerType( "WeaponSelect", WeaponSelect )
LockTable( _M )
