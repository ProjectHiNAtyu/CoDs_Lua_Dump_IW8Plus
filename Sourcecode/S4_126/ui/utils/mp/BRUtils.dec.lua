-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
BR = BR or {}
BR.END_GAME_TIMER_LENGTH = 22000
BR.END_GAME_TIMER_LENGTH_SECONDS = BR.END_GAME_TIMER_LENGTH / 1000
BR.ARMOR_EMPTY_HINT_MAX_ANIM_LENGTH = 10000
BR.GameEndState = {
	BM_DEFEAT = 4,
	BR_DEFEAT = 2,
	BR_VICTORY = 1,
	BM_VICTORY = 3
}
BR.ExitGameCommandType = {
	MAP_RESTART = 2,
	LEAVE_TUTORIAL = 1
}
BR.OVERLAY_STATE = {
	FADE_IN_BLACK = 7,
	FADE_OUT_BLACK = 6,
	KILL_BINK_SHOW_BLACK = 5,
	GULAG_NO_SKIP_PROMPT = 1,
	ONBOARDING = 4,
	OFF = 0,
	GULAG_SHOW_SKIP_PROMPT = 2,
	INFIL_NO_SKIP_PROMPT = 3
}
BR.SPLASH_TYPES = {
	VENDOR_CLOSED = 9,
	SQUAD_BUYBACK = 10,
	DMZ_PLUNDER_WIN = 11,
	RESPAWN_USED = 4,
	CHOPPEREXFIL_NAME2 = 15,
	SQUAD_RESPAWN = 6,
	GULAG_REDEPLOYMENT = 7,
	ELIMINATED = 5,
	BRCREDITS = 17,
	CHOPPEREXFIL_NAME3 = 16,
	CAPTURED = 2,
	FINISH_THEM = 19,
	OFF = 0,
	VICTORY = 1,
	GULAG_VICTORY = 3,
	CHOPPEREXFIL_NAME1 = 14,
	CHOPPEREXFIL_NAME0 = 13,
	TRANSIENTFADEOUT = 18,
	DMZ_PLUNDER_LOSS = 12
}
BR.PlayAgainChoice = {
	WITHOUT_PARTY = 1,
	WITH_PARTY = 2,
	NONE = 0
}
BR.TransitionType = {
	TRANSITION_RETURNING_TO_COMBAT = 2,
	TRANSITION_INSTANT_HIDE = 5,
	TRANSITION_SQUAD_WIPED = 6,
	TRANSITION_FADE_TO_BLACK = 1,
	TRANSITION_INITIAL_SPAWN = 4,
	TRANSITION_EXITING_GULAG = 3,
	TRANSITION_FADE_IN_FROM_BLACK = 0
}
BR.PLAY_AGAIN_WITHOUT_PARTY_COMMAND = "playagain 0"
BR.PLAY_AGAIN_WITH_PARTY_COMMAND = "playagain 1"
BR.ABORT_PLAY_AGAIN_WITHOUT_PARTY_COMMAND = "playagainabort 0"
BR.ABORT_PLAY_AGAIN_WITH_PARTY_COMMAND = "playagainabort 1"
BR.PlayAgainAction = function ( f8_arg0, f8_arg1 )
	if not Engine[0x8D5A452EFF41EF]() then
		return 
	elseif Lobby.IsNotAloneInPrivateParty() then
		if CONDITIONS.IsPlayAgainEnabledForPartyHost() then
			ACTIONS.OpenPopupMenu( f8_arg0, "PlayAgainPartyHostPopup", true, f8_arg1 )
		elseif CONDITIONS.IsPlayAgainEnabled( f8_arg0 ) then
			ACTIONS.OpenPopupMenu( f8_arg0, "PlayAgainPartyMemberPopup", true, f8_arg1 )
		end
	else
		ACTIONS.OpenPopupMenu( f8_arg0, "PlayAgainPopup", true, f8_arg1 )
	end
end

BR.GetPlayAgainChoice = function ()
	return Dvar[0x22EAAB59AA27E9B]( "#x33c26abdfe364a9d4" )
end

BR.SetPlayAgainChoice = function ( f6_arg0 )
	local f6_local0 = assert
	local f6_local1
	if 0 > f6_arg0 or f6_arg0 > BR.PlayAgainChoice.WITH_PARTY then
		f6_local1 = false
	else
		f6_local1 = true
	end
	f6_local0( f6_local1 )
	Dvar[0x2414681ECAB880F]( "#x33c26abdfe364a9d4", f6_arg0 )
end

BR.AbortPlayAgain = function ( f5_arg0 )
	Engine[0x7C75E608EA39B5C]( f5_arg0 )
end

BR.ExecuteBREndTransition = function ( f4_arg0, f4_arg1, f4_arg2 )
	Engine[0xCFD2C5E2E3C4014]()
	local f4_local0 = f4_arg0:getRootParent()
	if f4_local0.squadEliminatedLayer then
		LUI.UIRoot.SetLuiLayerKeycatch( f4_local0.squadEliminatedLayer, f4_arg1, false )
	end
	if CONDITIONS.IsBRQuarryTutorialMap() and f4_arg2 == "map_restart" then
		Engine[0x6055C55456F05DF]( "exit_squad_eliminated", BR.ExitGameCommandType.MAP_RESTART )
		return 
	else
		Engine[0x7C75E608EA39B5C]( f4_arg2 )
	end
end

BR.SetupEndgameDataSource = function ( f3_arg0 )
	DataSources.inGame.BR.BREndGameTime = LUI.DataSourceInControllerModel.new( "alwaysLoaded.brEndGameTime" )
	DataSources.inGame.BR.BREndGameTime:SetValue( f3_arg0, tonumber( Engine[0x3B8CFB6758EF57C]() ) + BR.END_GAME_TIMER_LENGTH_SECONDS )
end

BR.GetRemainingEndgameTime = function ( f2_arg0 )
	local f2_local0 = DataSources.inGame.BR.BREndGameTime
	if not f2_local0 then
		BR.SetupEndgameDataSource( f2_arg0 )
		f2_local0 = DataSources.inGame.BR.BREndGameTime
	end
	local f2_local1 = tonumber( Engine[0x3B8CFB6758EF57C]() )
	local f2_local2 = f2_local0:GetValue( f2_arg0 )
	if 0 < f2_local2 - f2_local1 then
		return Engine[0x7D3158A9539A355]( Engine[0x9F0E9247C145452]( f2_local2 - f2_local1 ) )
	else
		
	end
end

BR.GetTotalTeamCash = function ( f1_arg0 )
	local f1_local0 = Game[0x28624DEF6F708C8]( f1_arg0, "ui_br_team_cash_banked" ) or 0
	local f1_local1 = Game[0x28624DEF6F708C8]( f1_arg0, "ui_br_team_cash_pockets" ) or 0
	local f1_local2 = 0
	if f1_local0 ~= nil and f1_local1 ~= nil then
		f1_local2 = (f1_local0 + f1_local1) * BRLOOT.TEAM_CASH_SCALAR
	end
	return f1_local2
end

