-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 17-11-2025 01:22
module( ..., package.seeall )
CoD.PrintModuleLoad( _NAME )
function CPVideoOverlay( f1_arg0, f1_arg1, f1_arg2 )
	local f1_local0
	if not f1_arg1 then
		f1_local0 = f1_arg1
	else
		f1_local0 = {}
	end
	local f1_local1 = f1_local0.videoRef or "mp_alien_armory_intro"
	local f1_local2 = f1_local0.endEvent or nil
	local self = LUI.UIElement.new()
	self.id = "video_root_id"
	local f1_local4 = 1000
	local f1_local5 = nil
	f1_local5 = LUI.UIImage.new()
	f1_local5.id = "Mask"
	f1_local5:SetRGBFromInt( 0, 0 )
	f1_local5:SetAnchorsAndPosition( 0, 0, 0, 0, _1080p * 0, _1080p * 1920, 0, _1080p * 1080 )
	f1_local5:SetAlpha( 0 )
	self.Mask = f1_local5
	self:addElement( f1_local5 )
	f1_local5:SetAlpha( 1, f1_local4 )
	ACTIONS.ScaleFullscreen( f1_local5 )
	local Cinematic = nil
	
	Cinematic = MenuBuilder.BuildRegisteredType( "Cinematic", {
		fullscreen = true,
		controllerIndex = controllerIndex
	} )
	Cinematic.id = "Cinematic"
	Cinematic:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 2, _1080p * 1920, 0, _1080p * 1080 )
	self:addElement( Cinematic )
	self.Cinematic = Cinematic
	
	local f1_local7 = LUI.UIElement.new()
	f1_local7:SetupCinematicSubtitles()
	f1_local7.id = "subtitles"
	self:addElement( f1_local7 )
	local f1_local8 = false
	self:registerEventHandler( "exit_aliens_video", function ( self, event )
		if f1_arg0 and not f1_arg0 then
			f1_arg0 = true
			if f1_arg0.target then
				f1_arg0.target:processEvent( f1_arg0 )
			else
				self:dispatchEventToRoot( f1_arg0 )
			end
		else
			LUI.FlowManager.RequestLeaveMenu( self )
		end
	end )
	self:registerEventHandler( "check_exit_aliens_video", function ( self, event )
		if Engine.BCJJBCDGAC() then
			self:processEvent( {
				name = "exit_aliens_video"
			} )
		end
	end )
	self:registerEventHandler( "menu_create", function ( self, event )
		local f4_local0 = self:Wait( f1_arg0 )
		f4_local0.onComplete = function ()
			self:SetAlpha( 1, 1000 )
			Engine.BEFHEEBHIA()
			Engine.DFCGFCGBFD( self )
			local self = LUI.UITimer.new( {
				interval = -62,
				broadcastToRoot = false,
				disposable = false,
				event = {
					name = "check_exit_aliens_video"
				},
				eventTarget = self
			} )
			self.id = "check_exit_timer_id"
			self:addElement( self )
			local f5_local1 = LUI.UITimer.new( {
				interval = 2000,
				event = "fastfiles_loaded_poll"
			} )
			f5_local1.id = "allowSkipTimer_id"
			self:addElement( f5_local1 )
			local f5_local2 = false
			self:registerEventHandler( "fastfiles_loaded_poll", function ( self, event )
				if Engine.CHCAFBBGGD() and not self then
					self = true
					self:processEvent( {
						name = "allow_skip"
					} )
					self:closeTree()
				else
					Engine.CFGCDIGFIE()
				end
			end )
			self:processEvent( {
				name = "fastfiles_loaded_poll"
			} )
		end
		
	end )
	local f1_local9 = LUI.UIButton.new()
	f1_local9.id = "video_continue_button"
	f1_local9:registerEventHandler( "allow_skip", function ( element, event )
		local f2_local0 = MenuBuilder.BuildRegisteredType( "BinkSkipPrompt", {
			onSkipInput = function ()
				element:processEvent( {
					name = "exit_aliens_video"
				} )
			end
		} )
		f2_local0:setPriority( 5 )
		f1_arg0:addElement( f2_local0 )
	end )
	self:addElement( f1_local9 )
	return self
end

MenuBuilder.registerType( "CPVideoOverlay", CPVideoOverlay )
LUI.FlowManager.RegisterStackPopBehaviour( "CPVideoOverlay", CP.VideoOverlayPop )
LockTable( _M )
