-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
LOAD_SCREEN = LOAD_SCREEN or {}
LOAD_SCREEN.DEFAULT_BUTTON_ID = 1
LOAD_SCREEN.RANDOM_BUTTON_ID = 2
LOAD_SCREEN.RANDOM_FAVORITE_BUTTON_ID = 3
LOAD_SCREEN.FIRST_REGULAR_BUTTON = 4
LOAD_SCREEN.LOADSCREEN_BUNDLE = 0x31321E8ED5E6BED
LOAD_SCREEN.FilterType = {
	ALL = 0,
	PURCHASED = 2,
	AVAILABLE_FOR_PURCHASE = 3,
	CHALLENGES = 1
}
LOAD_SCREEN.FilterTypeStrings = {
	[LOAD_SCREEN.FilterType.ALL] = 0xF0A67A938EB5347,
	[LOAD_SCREEN.FilterType.PURCHASED] = 0x1AF524D39C35EB9,
	[LOAD_SCREEN.FilterType.AVAILABLE_FOR_PURCHASE] = 0xF6F7666278B8B4B
}
LOAD_SCREEN.SortingType = {
	LATEST = 1,
	OLDEST = 2,
	ALPHABETICAL = 3,
	FAVORITES_FIRST = 0
}
LOAD_SCREEN.SortingTypeStrings = {
	[LOAD_SCREEN.SortingType.FAVORITES_FIRST] = 0xC530EFF8086ABC2,
	[LOAD_SCREEN.SortingType.LATEST] = 0x9CAF1DA9D0DC8ED,
	[LOAD_SCREEN.SortingType.OLDEST] = 0x7EEFB5B8B491155,
	[LOAD_SCREEN.SortingType.ALPHABETICAL] = 0x240635D2DB1310
}
LOAD_SCREEN.FilterSortMenuName = 0x3FA0C1C751A265F
LOAD_SCREEN.FilterSortMenuDesc = 0x6B719CCD9481105
LOAD_SCREEN.FilterHeaderName = 0x17F0A4BE9CCB062
LOAD_SCREEN.SortHeaderName = 0x2634434E3B3E7F0
LOAD_SCREEN.GetAllLoadScreens = function ( f12_arg0 )
	local f12_local0 = {}
	local f12_local1 = Engine[0x6093D047200548]( LOAD_SCREEN.LOADSCREEN_BUNDLE )
	assert( f12_local1 ~= nil )
	local f12_local2 = #f12_local1[0x50E353BB3879634]
	for f12_local3 = 1, f12_local2, 1 do
		local f12_local6 = Engine[0x6093D047200548]( "loadingscreen:" .. f12_local1[0x50E353BB3879634][f12_local3][0x47DC14CABDF917B] )
		table.insert( f12_local0, {
			id = f12_local6[0x8B72E07B55C3AC0] or "",
			name = f12_local6[0x4BCADBA8E631B86] or "",
			desc = f12_local6[0xCC44970C8397929] or "",
			how_to_earn = f12_local6[0x1BA1A6EEDDB518E] or "",
			disabled = f12_local6[0x6A23E265CA336D3] or "",
			image = f12_local6[0xAB612888528489A] or "",
			fullImage = f12_local6[0xE19C41B5A516BD9] or "",
			store_bundle_id = f12_local6[0xB6DB405B655A393] or ""
		} )
	end
	return f12_local0
end

LOAD_SCREEN.GetLoadScreenGameIndex = function ()
	return CONDITIONS.IsCoreMultiplayerNotBr() and Enum[0x5F53FEDDE04544C][0xD3B3D0E2427065F] or Enum[0x5F53FEDDE04544C][0x6C00627181D1A78]
end

local f0_local0 = function ( f10_arg0 )
	local f10_local0 = {}
	local f10_local1 = {}
	for f10_local2 = 1, #f10_arg0, 1 do
		local f10_local5 = f10_arg0[f10_local2]
		if f10_local5.id >= LOAD_SCREEN.FIRST_REGULAR_BUTTON then
			table.insert( f10_local0, f10_local5 )
		end
	end
	local f10_local2 = #f10_local0
	if 0 < f10_local2 then
		f10_local1 = f10_local0[math.random( 1, f10_local2 )]
	end
	return f10_local1
end

local f0_local1 = function ( f9_arg0, f9_arg1 )
	local f9_local0 = Engine[0x69D1CDDC9F7F04C]( f9_arg1, LOAD_SCREEN.GetLoadScreenGameIndex() )
	local f9_local1 = {}
	local f9_local2 = #f9_local0
	local f9_local3 = {}
	if 0 < f9_local2 then
		for f9_local4 = 1, #f9_arg0, 1 do
			local f9_local7 = f9_arg0[f9_local4]
			for f9_local8 = 1, f9_local2, 1 do
				if f9_local7.id == f9_local0[f9_local8] then
					table.insert( f9_local1, f9_local7 )
				end
			end
		end
		assert( f9_local2 == #f9_local1 )
		f9_local3 = f9_local1[math.random( 1, f9_local2 )]
	end
	return f9_local3
end

local f0_local2 = function ( f8_arg0, f8_arg1 )
	local f8_local0 = {}
	for f8_local1 = 1, #f8_arg0, 1 do
		local f8_local4 = f8_arg0[f8_local1]
		if f8_local4.id == f8_arg1 then
			f8_local0 = f8_local4
			break
		end
	end
	return f8_local0
end

LOAD_SCREEN.GetLoadScreenToDisplay = function ( f7_arg0 )
	local f7_local0 = LOAD_SCREEN.GetAllLoadScreens()
	local f7_local1 = Engine[0xC8C08377A225C76]( f7_arg0, LOAD_SCREEN.GetLoadScreenGameIndex() )
	local f7_local2 = {}
	if f7_local1 == LOAD_SCREEN.RANDOM_BUTTON_ID then
		f7_local2 = f0_local0( f7_local0 )
	elseif f7_local1 == LOAD_SCREEN.RANDOM_FAVORITE_BUTTON_ID then
		f7_local2 = f0_local0( f7_local0, f7_arg0 )
	elseif f7_local1 ~= LOAD_SCREEN.DEFAULT_BUTTON_ID then
		f7_local2 = f0_local0( f7_local0, f7_local1 )
	end
	return f7_local2
end

LOAD_SCREEN.AddFilteringSortingEventHandler = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg1:addEventHandler( "button_right_trigger", function ( f4_arg0, f4_arg1 )
		local f4_local0 = {
			{
				filter = LOAD_SCREEN.FilterType.ALL
			},
			{
				filter = LOAD_SCREEN.FilterType.PURCHASED
			},
			{
				filter = LOAD_SCREEN.FilterType.AVAILABLE_FOR_PURCHASE
			}
		}
		local f4_local1 = {
			{
				sort = LOAD_SCREEN.SortingType.FAVORITES_FIRST
			},
			{
				sort = LOAD_SCREEN.SortingType.LATEST
			},
			{
				sort = LOAD_SCREEN.SortingType.OLDEST
			},
			{
				sort = LOAD_SCREEN.SortingType.ALPHABETICAL
			}
		}
		local f4_local2 = {}
		local f4_local3 = LUI.FlowManager.GetScopedData( f3_arg0 )
		local f4_local4 = {
			header = Engine[0xED84C33EC5F01EA]( LOAD_SCREEN.FilterHeaderName ),
			shouldUpdateSelection = true
		}
		for f4_local5 = 1, #f4_local0, 1 do
			table.insert( f4_local4, {
				label = ToUpperCase( Engine[0xED84C33EC5F01EA]( LOAD_SCREEN.FilterTypeStrings[f4_local0[f4_local5].filter] ) ),
				selected = f4_local0[f4_local5].filter == f4_local3.activeFilter,
				action = function ()
					f4_arg0:SetActiveFilter( f4_arg0[f4_arg0].filter )
				end
			} )
		end
		table.insert( f4_local2, f4_local4 )
		local f4_local5 = {
			header = Engine[0xED84C33EC5F01EA]( LOAD_SCREEN.SortHeaderName ),
			shouldUpdateSelection = true
		}
		for f4_local6 = 1, #f4_local1, 1 do
			table.insert( f4_local5, {
				label = ToUpperCase( Engine[0xED84C33EC5F01EA]( LOAD_SCREEN.SortingTypeStrings[f4_local1[f4_local6].sort] ) ),
				selected = f4_local1[f4_local6].sort == f4_local3.activeSort,
				action = function ()
					f4_arg0:SetActiveSort( f4_arg0[f4_arg0].sort )
				end
			} )
		end
		table.insert( f4_local2, f4_local5 )
		LUI.FlowManager.RequestPopupMenu( nil, "LoadScreenFilterPopupLayout", true, f3_arg0, false, {
			buttonData = f4_local2,
			controllerIndex = f3_arg0,
			menuName = Engine[0xED84C33EC5F01EA]( LOAD_SCREEN.FilterSortMenuName )
		} )
	end )
end

MenuBuilder.registerType( "LoadScreenFilterPopupLayout", function ( f1_arg0, f1_arg1 )
	local f1_local0 = MenuBuilder.BuildRegisteredType( "GenericPopupList", f1_arg1 )
	for f1_local1 = 1, #f1_arg1.buttonData, 1 do
		f1_local0:AddButtonActions( f1_arg1, f1_arg1.buttonData[f1_local1] )
	end
	local f1_local1 = MenuBuilder.BuildRegisteredType( "FlyInPopup", {
		flyInRightNarrow = true,
		quickCloseEvent = "closing_quick_access_menu",
		controllerIndex = f1_arg1.controllerIndex,
		widget = f1_local0,
		disableQuickAccessShortcuts = f1_arg1.disableQuickAccessShortcuts
	} )
	f1_local1.id = "LoadScreenFilterPopupLayout"
	f1_local0:RefreshControllerFocus()
	f1_local1:addEventHandler( "closing_quick_access_menu", function ( f2_arg0, f2_arg1 )
		f2_arg0:exitAnimation( f2_arg0, f1_arg0 )
	end )
	return f1_local1
end )
