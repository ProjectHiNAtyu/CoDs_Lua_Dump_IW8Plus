-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 17-11-2025 01:22
module( ..., package.seeall )
local f0_local0 = 21
local f0_local1 = 3600 * 24
local f0_local2 = function ()
	local f11_local0 = Dvar.CFHDGABACF( "lui_current_modifier_day" )
	if f11_local0 and f11_local0 < f0_local0 and 0 < f11_local0 then
		return f11_local0
	else
		return 1
	end
end

local f0_local3 = function ( f10_arg0 )
	local f10_local0 = StringTable.DIFCHIGDFB( CSV.dailyModifiers.file, CSV.dailyModifiers.cols.day, f10_arg0, CSV.dailyModifiers.cols.title )
	if f10_local0 == "" then
		assert( false, "No Title in entry, check daily_modifier.csv" )
	end
	return f10_local0
end

local f0_local4 = function ( f9_arg0 )
	local f9_local0 = StringTable.DIFCHIGDFB( CSV.dailyModifiers.file, CSV.dailyModifiers.cols.day, f9_arg0, CSV.dailyModifiers.cols.header )
	if f9_local0 == "" then
		assert( false, "No Header in entry, check daily_modifier.csv" )
	end
	return f9_local0
end

local f0_local5 = function ( f8_arg0 )
	local f8_local0 = StringTable.DIFCHIGDFB( CSV.dailyModifiers.file, CSV.dailyModifiers.cols.day, f8_arg0, CSV.dailyModifiers.cols.body )
	if f8_local0 == "" then
		assert( false, "No Body in entry, check daily_modifier.csv" )
	end
	return f8_local0
end

local f0_local6 = function ( f6_arg0, f6_arg1, f6_arg2 )
	local f6_local0 = Dvar.BJJCJHDBII( "modifier_daily_reset_time" )
	if not f6_local0 then
		
	else
		
	end
	local f6_local1 = 5000
	local f6_local2 = f6_local0 * f0_local0
	local f6_local3 = function ()
		local f7_local0 = Engine.DEIDGHDBHD()
		if not f7_local0 then
			f7_local0 = Engine.DCJHCAFIIA()
		end
		f6_arg0:setText( Engine.CBBHFCGDIC( "CHALLENGE/RESET_TIME", Engine.JCBDICCAH( Engine.BJCFFHAIFA( f6_arg0 - (f7_local0 - f6_arg0) % f6_arg0 ) ) ) )
		local f7_local1 = f6_arg0()
		if f7_local1 ~= f6_arg0.currentDay then
			f6_arg0.currentDay = f7_local1
			f6_arg0.Body:setText( Engine.CBBHFCGDIC( f6_arg0( f6_arg0.currentDay ) ) )
		end
	end
	
	local self = LUI.UITimer.new( {
		event = "update_reset_time",
		interval = f6_local1
	} )
	self.id = "dayResetTimer"
	f6_arg0:addElement( self )
	f6_arg0:addAndCallEventHandler( "update_reset_time", f6_local3 )
end

local f0_local7 = function ( f5_arg0 )
	f5_arg0.Title:setText( Engine.CBBHFCGDIC( f0_local0( f5_arg0.currentDay ) ) )
	f5_arg0.ModifierHeader:setText( Engine.CBBHFCGDIC( f0_local0( f5_arg0.currentDay ) ) )
	f5_arg0.Body:setText( Engine.CBBHFCGDIC( f0_local0( f5_arg0.currentDay ) ) )
	f0_local0( f5_arg0, f5_arg0.timer, false )
	f5_arg0.Watermark:SetMask( f5_arg0.WatermarkMask )
end

local f0_local8 = function ( f4_arg0, f4_arg1, f4_arg2 )
	f4_arg0.currentDay = f0_local0()
	f0_local0( f4_arg0 )
end

function DailyModifierCountdown( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 450 * _1080p, 0, 115 * _1080p )
	self.id = "DailyModifierCountdown"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local background = nil
	
	background = LUI.UIImage.new()
	background.id = "background"
	background:SetRGBFromTable( SWATCHES.WZGlobalSwatches.WZBackground, 0 )
	background:SetAlpha( 0.8, 0 )
	self:addElement( background )
	self.background = background
	
	local Darkener = nil
	
	Darkener = LUI.UIImage.new()
	Darkener.id = "Darkener"
	Darkener:SetRGBFromInt( 0, 0 )
	Darkener:SetAlpha( 0.5, 0 )
	Darkener:setImage( RegisterMaterial( "widg_gradient_left_to_right" ), 0 )
	Darkener:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, _1080p * 32, 0 )
	self:addElement( Darkener )
	self.Darkener = Darkener
	
	local Watermark = nil
	
	Watermark = LUI.UIImage.new()
	Watermark.id = "Watermark"
	Watermark:SetAlpha( 0.15, 0 )
	Watermark:setImage( RegisterMaterial( "v_ui_icon_codmas_krampus_alive" ), 0 )
	Watermark:SetAnchorsAndPosition( 0, 1, 1, 0, _1080p * 7, _1080p * 179, _1080p * -104, _1080p * 68 )
	self:addElement( Watermark )
	self.Watermark = Watermark
	
	local WatermarkMask = nil
	
	WatermarkMask = LUI.UIImage.new()
	WatermarkMask.id = "WatermarkMask"
	WatermarkMask:setImage( RegisterMaterial( "stencil_mask" ), 0 )
	WatermarkMask:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, _1080p * 32, 0 )
	self:addElement( WatermarkMask )
	self.WatermarkMask = WatermarkMask
	
	local Header = nil
	
	Header = LUI.UIImage.new()
	Header.id = "Header"
	Header:SetRGBFromTable( SWATCHES.WZCH3.WZCH3SeasonalEventColor, 0 )
	Header:SetAlpha( 0.9, 0 )
	Header:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 32 )
	self:addElement( Header )
	self.Header = Header
	
	local Title = nil
	
	Title = LUI.UIStyledText.new()
	Title.id = "Title"
	Title:SetRGBFromTable( SWATCHES.WZGlobalSwatches.WZText, 0 )
	Title:setText( "", 0 )
	Title:SetFont( FONTS.GetFont( FONTS.MainBold.File ) )
	Title:SetWordWrap( false )
	Title:SetAlignment( LUI.Alignment.Left )
	Title:SetAutoScrollStyle( LUI.UIStyledText.AutoScrollStyle.ScrollH )
	Title:SetStartupDelay( 1000 )
	Title:SetLineHoldTime( 400 )
	Title:SetAnimMoveTime( 150 )
	Title:SetAnimMoveSpeed( 50 )
	Title:SetEndDelay( 1000 )
	Title:SetCrossfadeTime( 400 )
	Title:SetFadeInTime( 300 )
	Title:SetFadeOutTime( 300 )
	Title:SetMaxVisibleLines( 1 )
	Title:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 15, _1080p * 326, _1080p * 1, _1080p * 31 )
	self:addElement( Title )
	self.Title = Title
	
	local timer = nil
	
	timer = LUI.UIStyledText.new()
	timer.id = "timer"
	timer:SetRGBFromTable( SWATCHES.WZGlobalSwatches.WZText, 0 )
	timer:setText( "", 0 )
	timer:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	timer:SetWordWrap( false )
	timer:SetAlignment( LUI.Alignment.Right )
	timer:SetAutoScrollStyle( LUI.UIStyledText.AutoScrollStyle.ScrollH )
	timer:SetStartupDelay( 1000 )
	timer:SetLineHoldTime( 400 )
	timer:SetAnimMoveTime( 150 )
	timer:SetAnimMoveSpeed( 50 )
	timer:SetEndDelay( 1000 )
	timer:SetCrossfadeTime( 400 )
	timer:SetFadeInTime( 300 )
	timer:SetFadeOutTime( 300 )
	timer:SetMaxVisibleLines( 1 )
	timer:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -124, _1080p * -15, _1080p * 7, _1080p * 25 )
	self:addElement( timer )
	self.timer = timer
	
	local Body = nil
	
	Body = LUI.UIText.new()
	Body.id = "Body"
	Body:SetRGBFromTable( SWATCHES.WZGlobalSwatches.WZText, 0 )
	Body:setText( "", 0 )
	Body:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	Body:SetAlignment( LUI.Alignment.Left )
	Body:SetAnchorsAndPosition( 0, 0, 0, 1, _1080p * 15, _1080p * -15, _1080p * 38, _1080p * 62 )
	self:addElement( Body )
	self.Body = Body
	
	local ModifierHeader = nil
	
	ModifierHeader = LUI.UIText.new()
	ModifierHeader.id = "ModifierHeader"
	ModifierHeader:SetAlpha( 0, 0 )
	ModifierHeader:setText( "", 0 )
	ModifierHeader:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	ModifierHeader:SetAlignment( LUI.Alignment.Left )
	ModifierHeader:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 19, _1080p * 432, _1080p * 32, _1080p * 50 )
	self:addElement( ModifierHeader )
	self.ModifierHeader = ModifierHeader
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	local f1_local12 = nil
	Title:RegisterAnimationSequence( "InGame", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 4
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 28
		}
	} )
	Body:RegisterAnimationSequence( "InGame", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 38
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 58
		}
	} )
	self._sequences.InGame = function ()
		menu:AnimateSequence( "InGame" )
		menu:AnimateSequence( "InGame" )
	end
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "DailyModifierCountdown", DailyModifierCountdown )
LockTable( _M )
