-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:02
module( ..., package.seeall )
require( "ui.generated.widgets.frontend.challengesmenubutton" )
require( "ui.generated.widgets.winchallengequeue" )
require( "ui.generated.widgets.challengesdailycore" )
require( "ui.generated.widgets.exfilchallengescore" )
require( "ui.generated.widgets.challengestrackedcore" )
require( "ui.generated.widgets.frontend.challengescontainertabs" )
local f0_local0 = 400
local f0_local1 = 250
local f0_local2 = 195
local f0_local3 = {
	[Challenge.CHALLENGE_CONTAINER_TYPE.DAILY] = {
		anim = "TimeSetup",
		title = 0xCBD3CD3B4A947FD,
		enabled = true
	},
	[Challenge.CHALLENGE_CONTAINER_TYPE.EXFIL] = {
		anim = "TimeSetup",
		title = 0xCC3352651AF8B4C,
		enabled = false
	},
	[Challenge.CHALLENGE_CONTAINER_TYPE.TRACKED] = {
		anim = "SubheaderSetup",
		title = 0xDBCACA3B182F8C3,
		enabled = false
	},
	[Challenge.CHALLENGE_CONTAINER_TYPE.WEEKLY] = {
		anim = "SubheaderSetup",
		title = 0xF70B94B703FCB46,
		enabled = false
	}
}
local f0_local4 = function ( f22_arg0 )
	local f22_local0 = 0
	for f22_local4, f22_local5 in ipairs( f22_arg0._challengesWidgets ) do
		if f22_local5:IsVisible() then
			f22_local0 = f22_local0 + LAYOUT.GetElementHeight( f22_local5 )
		end
	end
	if f22_arg0.ChallengesMenuButton then
		f22_local0 = f22_local0 + LAYOUT.GetElementHeight( f22_arg0.ChallengesMenuButton )
	end
	return f22_local0
end

local f0_local5 = function ( f21_arg0, f21_arg1 )
	if f21_arg0._challengesWidgets[f21_arg1] and f21_arg0._challengesWidgets[f21_arg0._currentType] then
		for f21_local3, f21_local4 in pairs( f21_arg0._challengesWidgets[f21_arg0._currentType] ) do
			if f21_arg0._tabButtons[f21_arg0._currentType] then
				ACTIONS.AnimateSequence( f21_arg0._tabButtons[f21_arg0._currentType], "ButtonUp" )
			end
			f21_local4:SetVisible( false )
		end
		f21_arg0._currentType = f21_arg1
		f21_arg0._isShowingWidget = true
		for f21_local3, f21_local4 in pairs( f21_arg0._challengesWidgets[f21_arg1] ) do
			local f21_local5 = true
			if f21_local4.HasChallenges then
				f21_local5 = f21_local4:HasChallenges()
			end
			f21_local4:SetVisible( f21_local5 )
			if f21_arg0._tabButtons[f21_arg0._currentType] then
				ACTIONS.AnimateSequence( f21_arg0._tabButtons[f21_arg0._currentType], "HighlightButton" )
			end
		end
	end
end

local f0_local6 = function ( f19_arg0, f19_arg1 )
	local f19_local0 = f19_arg0[0x1D431E5E25C05C]
	if f19_local0 then
		local f19_local1
		if f19_arg1 then
			f19_local1 = f19_arg1
		else
			f19_local1 = Dvar[0x9E5BE3B4BBA4E0E]( 0x3413784016DBD20 )
		end
		local f19_local2 = function ( f20_arg0, f20_arg1 )
			if f19_arg0 then
				LUI.FlowManager.RequestAddMenu( "ChallengesSelectMenu", false, f20_arg1.controller, nil, {
					hideGlobalPanel = false,
					selectMenu = "WinChallengeChallengeSelect"
				}, true )
			else
				LUI.FlowManager.RequestAddMenu( "ChallengesMenu", true, f20_arg1.controller, false, nil )
			end
		end
		
		local f19_local3
		if f19_local1 then
			f19_local3 = 0xCF35AFB5317AFC0
			if not f19_local3 then
			
			else
				local f19_local4 = LUI.IsGamepadActiveInputMethodForPrompts( f19_arg0._controllerIndex )
				if f19_local4 then
					f19_local4 = CONDITIONS.InFrontend()
				end
				local f19_local5 = f19_local0[0x9571D80C89F1BC7]
				if f19_local5 then
					f19_local5:SetupPrompt( {
						isLocalized = true,
						buttonPrompt = ButtonMap.button_stickr_leftright_noswap,
						text = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xDB5628741E6A923 ) ),
						action = f0_local0( f19_arg0, f19_arg0._currentType )
					} )
					local f19_local6 = f19_local5.Text
					local f19_local7 = f19_local6
					f19_local6 = f19_local6.SetRight
					local f19_local8
					if f19_local4 then
						f19_local8 = f0_local0
						if not f19_local8 then
						
						else
							f19_local6( f19_local7, f19_local8 )
							f19_local5.Backer:SetVisible( false )
						end
					end
					f19_local8 = f0_local0
				end
				local f19_local6 = f19_local0[0xF7CB5F50B8B5C3F]
				if f19_local6 then
					f19_local6:SetupPrompt( {
						isLocalized = true,
						buttonPrompt = ButtonMap.button_alt2,
						text = ToUpperCase( Engine[0xED84C33EC5F01EA]( f19_local3 ) ),
						action = f19_local2
					} )
					f19_local6.Backer:SetVisible( false )
					local f19_local9 = f19_local6.Text
					local f19_local8 = f19_local9
					f19_local9 = f19_local9.SetRight
					local f19_local10
					if f19_local4 then
						f19_local10 = f0_local0
						if not f19_local10 then
						
						else
							f19_local9( f19_local8, f19_local10 )
						end
					end
					f19_local10 = f0_local0
				end
				local f19_local9 = ACTIONS.AnimateSequence
				local f19_local8 = f19_local0
				local f19_local10
				if f19_local4 then
					f19_local10 = "DoublePrompts"
				else
					f19_local10 = "SinglePrompt"
				end
				f19_local9( f19_local8, f19_local10 )
			end
		end
		f19_local3 = 0x2B7D33D53E3ECBC
	end
end

local f0_local7 = function ( f18_arg0, f18_arg1 )
	if f18_arg1 and 0 <= f18_arg0._currentType - 1 then
		for f18_local0 = f18_arg0._currentType - 1, 0, -1 do
			local f18_local3 = f0_local0[f18_local0]
			if f18_local3 then
				f18_local3 = f0_local0[f18_local0].enabled
				if f18_local3 then
					f18_local3 = not Table.IsNilOrEmpty( f18_arg0._challengesWidgets[f18_local0] )
				end
			end
			if f18_local3 and f18_local0 ~= f18_arg0._currentType then
				f0_local0( f18_arg0, f18_local0 )
			end
		end
	elseif f18_arg0._currentType + 1 <= Challenge.CHALLENGE_CONTAINER_TYPE.TOTAL_CHALLENGE_TYPES then
		for f18_local0 = f18_arg0._currentType + 1, Challenge.CHALLENGE_CONTAINER_TYPE.TOTAL_CHALLENGE_TYPES, 1 do
			if f0_local0[f18_local0] and f0_local0[f18_local0].enabled then
				local f18_local3 = not Table.IsNilOrEmpty( f18_arg0._challengesWidgets[f18_local0] )
			end
			if not Table.IsNilOrEmpty( f18_arg0._challengesWidgets[f18_local0] ) and f18_local0 ~= f18_arg0._currentType then
				f0_local0( f18_arg0, f18_local0 )
				break
			end
		end
	end
end

local f0_local8 = function ( f17_arg0, f17_arg1 )
	local f17_local0 = WeeklyChallenge.Type.MP
	if CONDITIONS[0x4A020C7B018B3BA]() then
		f17_local0 = WeeklyChallenge.Type.BR
	elseif CONDITIONS.IsOutbreakGametype() then
		f17_local0 = WeeklyChallenge.Type.ZM
	end
	local f17_local1 = f17_arg0.ChallengesDailyCore.ChallengesLayout:GetNumOfChallenges()
	f17_arg0._currentType = Challenge.CHALLENGE_CONTAINER_TYPE.DAILY
	if Dvar[0x9E5BE3B4BBA4E0E]( 0x1745C1A7285CC11 ) then
		f17_arg0._currentType = Challenge.CHALLENGE_CONTAINER_TYPE.TRACKED
	elseif f17_local0 == WeeklyChallenge.Type.BR and f17_arg0.ExfilChallengesCore then
		f17_arg0._currentType = Challenge.CHALLENGE_CONTAINER_TYPE.EXFIL
	end
	f0_local0( f17_arg0, f17_arg0._currentType )
end

local f0_local9 = function ( f13_arg0, f13_arg1, f13_arg2 )
	f13_arg1._type = f13_arg2
	if f13_arg2 == Challenge.CHALLENGE_CONTAINER_TYPE.TRACKED and f0_local0[f13_arg2].enabled then
		f13_arg1.Subheader:setText( Engine[0xED84C33EC5F01EA]( 0x74821ADAF79FD0F, f13_arg0.ChallengesTrackedCore.ChallengesLayout:GetNumOfChallenges(), Challenge.MAX_VISIBLE_CHALLENGES ) )
	elseif f13_arg2 == Challenge.CHALLENGE_CONTAINER_TYPE.DAILY and f0_local0[f13_arg2].enabled then
		Challenge.SetupDailyResetTimer( f13_arg1.ChallengeResetTimer, nil, false )
		if not f13_arg1.ChallengeResetTimer._timerAlert then
			ACTIONS.AnimateSequence( f13_arg1.ChallengeResetTimer, "Center" )
		end
	elseif f13_arg2 == Challenge.CHALLENGE_CONTAINER_TYPE.WEEKLY and f0_local0[f13_arg2].enabled then
		Challenge.SetupSeasonEndsTimer( f13_arg1, f13_arg1.Subheader, nil, nil )
	end
	f13_arg1:registerEventHandler( "button_action", function ( element, event )
		f13_arg0( f13_arg0, element._type )
		return true
	end )
	local f13_local0 = function ( f15_arg0, f15_arg1 )
		if not LUI.IsLastInputGamepad( f13_arg0._controllerIndex ) and f13_arg0._currentType ~= f15_arg0._type then
			ACTIONS.AnimateSequence( f13_arg0, "ButtonOver" )
		end
		return true
	end
	
	local f13_local1 = function ( f14_arg0, f14_arg1 )
		if f13_arg0._currentType ~= f14_arg0._type then
			ACTIONS.AnimateSequence( f13_arg0, "ButtonUp" )
		end
		return true
	end
	
	f13_arg1:registerEventHandler( "gain_focus", f13_local0 )
	f13_arg1:registerEventHandler( "button_up", f13_local1 )
	f13_arg1:registerEventHandler( "lose_focus", f13_local1 )
end

local f0_local10 = function ( f12_arg0, f12_arg1 )
	if f0_local0[f12_arg1] and f0_local0[f12_arg1].enabled then
		local f12_local0 = nil
		f12_local0 = MenuBuilder.BuildRegisteredType( "ChallengePlaylistButton", {
			controllerIndex = f12_arg0._controllerIndex
		} )
		f12_local0.id = "ChallengePlaylistButton" .. f12_arg1
		f12_local0.Title:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( f0_local0[f12_arg1].title ) ) )
		ACTIONS.AnimateSequence( f12_local0, f0_local0[f12_arg1].anim )
		table.insert( f12_arg0._tabButtons, f12_arg1, f12_local0 )
		f12_arg0.ChallengesContainerTabs.Tabs:addElement( f12_local0 )
		f0_local0( f12_arg0, f12_local0, f12_arg1 )
	end
end

local f0_local11 = function ( f11_arg0, f11_arg1, f11_arg2, f11_arg3 )
	if f11_arg3 and f11_arg1 then
		f11_arg0._challengesWidgets[f11_arg2] = {
			f11_arg1
		}
		f11_arg1._type = f11_arg2
		f0_local0[f11_arg2].enabled = true
	else
		f0_local0[f11_arg2].enabled = false
	end
end

local f0_local12 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.GetContainerHeight = f0_local0
	f2_arg0._controllerIndex = f2_arg1
	f2_arg0._areChallengesSetup = false
	f2_arg0._challengesWidgets = {
		[Challenge.CHALLENGE_CONTAINER_TYPE.DAILY] = {
			f2_arg0.ChallengesDailyCore,
			f2_arg0.WinChallengeQueue
		}
	}
	f2_arg0.ChallengesDailyCore._type = Challenge.CHALLENGE_CONTAINER_TYPE.DAILY
	f0_local0( f2_arg0, f2_arg0.ExfilChallengesCore, Challenge.CHALLENGE_CONTAINER_TYPE.EXFIL, f2_arg0.ExfilChallengesCore ~= nil )
	f0_local0( f2_arg0, f2_arg0.ChallengesTrackedCore, Challenge.CHALLENGE_CONTAINER_TYPE.TRACKED, CONDITIONS.FrontendShouldShowTrackedChallenges( f2_arg1 ) )
	f0_local0( f2_arg0, f2_arg0.ChallengesWeeklyCore, Challenge.CHALLENGE_CONTAINER_TYPE.WEEKLY, Dvar[0x9E5BE3B4BBA4E0E]( 0x2D896B9BB9E152E ) )
	f2_arg0._tabButtons = {}
	for f2_local6, f2_local7 in pairs( f2_arg0._challengesWidgets ) do
		for f2_local3, f2_local4 in pairs( f2_local7 ) do
			if f2_local4.Setup then
				f2_local4:Setup( f2_arg1 )
			end
			f2_local4:SetVisible( false )
		end
	end
	for f2_local0 = Challenge.CHALLENGE_CONTAINER_TYPE.EXFIL, Challenge.CHALLENGE_CONTAINER_TYPE.TOTAL_CHALLENGE_TYPES, 1 do
		f0_local0( f2_arg0, f2_local0 )
	end
	f2_arg0._isShowingWidget = false
	if (CONDITIONS.IsThirdGameMode() or CONDITIONS.IsBRORDMZ() or CONDITIONS.InGameMP()) and not CONDITIONS.InFrontend() then
		f0_local0( f2_arg0, f2_arg1 )
	else
		LUI.DeferredFence.Attach( f2_arg0, f2_arg1, "ACHIEVEMENTENGINE", LUI.DeferredFence.Criticality.MINOR, LUI.DeferredFence.BackOutMethod.NONE, function ( f10_arg0, f10_arg1 )
			if f10_arg1.fenceState ~= LUI.Fence.FenceObjectState.PASSING then
				return 
			elseif not f2_arg0._areChallengesSetup then
				f2_arg0._areChallengesSetup = true
				f2_arg0( f2_arg0, f2_arg0 )
			end
		end )
	end
	f2_local0 = function ( f9_arg0, f9_arg1 )
		if CONDITIONS[0x4A020C7B018B3BA]() and not f2_arg0._isShowingWidget and f2_arg0._challengesWidget[Challenge.CHALLENGE_CONTAINER_TYPE.DAILY] and 0 < #f2_arg0._challengesWidget[Challenge.CHALLENGE_CONTAINER_TYPE.DAILY] then
			f2_arg0( f2_arg0, Challenge.CHALLENGE_CONTAINER_TYPE.DAILY, true )
			f2_arg0._currentExpandedChallengesIndex = Challenge.CHALLENGE_CONTAINER_TYPE.DAILY
		end
	end
	
	f0_local0( f2_arg0 )
	f2_arg0:addEventHandler( "daily_challenges_setup_complete", function ( f8_arg0, f8_arg1 )
		local f8_local0 = nil
		if f8_arg1.type == Challenge.CHALLENGE_CONTAINER_TYPE.DAILY then
			local f8_local1 = f8_arg0.ChallengesDailyCore:GetBonusChallenge()
			local f8_local2 = f8_arg0.ChallengesDailyCore:GetWinChallenge()
			local f8_local3
			if f8_local1 then
				f8_local3 = f8_local1
			else
				f8_local3 = f8_local1._challenge.bonusUnlocked
			end
			f8_arg0._bonusUnlocked = f8_local3
			f8_arg0._hasActiveWinChallenge = f8_local2 ~= nil
			f8_local0 = f2_arg0.ChallengesDailyCore
			f2_arg0( f2_arg0, f8_arg0._hasActiveWinChallenge )
		elseif f8_arg1.type == Challenge.CHALLENGE_CONTAINER_TYPE.TRACKED then
			f8_local0 = f2_arg0.ChallengesTrackedCore
		elseif f8_arg1.type == Challenge.CHALLENGE_CONTAINER_TYPE.WEEKLY then
			f8_local0 = f2_arg0.ChallengesWeeklyCore
		end
		if f8_local0 and f8_local0.ChallengesLayout then
			LAYOUT.SetHeight( f8_local0, f8_local0.ChallengesLayout:GetLayoutHeight() )
		end
		return true
	end )
	f2_arg0:registerEventHandler( "gain_focus", function ( element, event )
		return CONDITIONS.IsGamepad( event.controller )
	end )
	f2_arg0:registerEventHandler( "gain_focus", function ( element, event )
		return CONDITIONS.IsGamepad( event.controller )
	end )
	f2_arg0.lastMoveTime = Engine[0x6991337AE950F99]()
	f2_arg0:registerEventHandler( "gamepad_button", function ( element, event )
		if element._currentType then
			local f5_local0 = CONDITIONS.ButtonRightStickLeft( f2_arg0, event )
			if CONDITIONS.ButtonRightStickRight( f2_arg0, event ) or f5_local0 then
				local f5_local1 = Engine[0x6991337AE950F99]()
				if f5_local1 - f2_arg0.lastMoveTime < f2_arg0 then
					return 
				else
					f2_arg0.lastMoveTime = f5_local1
					f2_arg0( f2_arg0, f5_local0 )
					return true
				end
			end
		end
	end )
	f2_arg0:SubscribeToInputTypeModel( f2_arg1, function ( f3_arg0, f3_arg1 )
		local f3_local0 = LUI.IsGamepadActiveInputMethodForPrompts( f2_arg0 )
		if f3_local0 then
			local f3_local1 = f3_local0
		else
			local f3_local1 = CONDITIONS.InFrontend()
		end
		if f3_arg1 then
			if f3_arg1[0x1D431E5E25C05C] then
				local f3_local2 = f2_arg0:Wait( 1 )
				f3_local2.onComplete = function ( f4_arg0 )
					local f4_local0 = ACTIONS.AnimateSequence
					local f4_local1 = f3_arg0.ChallengesMenuButton
					local f4_local2
					if f3_arg0 then
						f4_local2 = "DoublePrompts"
					else
						f4_local2 = "SinglePrompt"
					end
					f4_local0( f4_local1, f4_local2 )
					if f3_arg0.PrimaryPrompt then
						f3_arg0.PrimaryPrompt.Text:SetRight( f3_arg0 and f3_arg0 or f3_arg0 )
					end
					if f3_arg0.SecondaryPrompt.Text then
						f3_arg0.SecondaryPrompt.Text:SetRight( f3_arg0 and f3_arg0 or f3_arg0 )
					end
				end
				
			end
		end
	end )
	f2_arg0:setPriority( 100 )
end

function ChallengePlaylistContainer( f1_arg0, f1_arg1 )
	local f1_local0 = CONDITIONS
	local f1_local1 = LUI
	local f1_local2 = MenuBuilder
	local f1_local3 = f1_local1.UIVerticalStackedLayout.new()
	f1_local3:SetVerticalAlignment( f1_local1.Alignment.Top )
	f1_local3:SetIgnoreInvisibleChildren( true )
	f1_local3:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 424, 0, 565 )
	f1_local3.id = "ChallengePlaylistContainer"
	local f1_local4
	if f1_arg1 then
		f1_local4 = f1_arg1
	else
		f1_local4 = f1_arg1.controllerIndex
	end
	f1_local4 = f1_local1.ValidateControllerIndex( f1_local3, f1_local4 )
	local f1_local5 = nil
	f1_local5 = f1_local2.BuildRegisteredType( 0x5EF511E5879D7B6, {
		controllerIndex = f1_local4
	} )
	f1_local5[0x8B72E07B55C3AC0] = "ChallengesContainerTabs"
	f1_local5:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 424, 0, 64 )
	f1_local3:addElement( f1_local5 )
	f1_local3[0x5EF511E5879D7B6] = f1_local5
	local f1_local6 = nil
	if f1_local0.FrontendShouldShowTrackedChallenges( f1_local4 ) then
		f1_local6 = f1_local2.BuildRegisteredType( 0xE5115725716F1FC, {
			controllerIndex = f1_local4
		} )
		f1_local6[0x8B72E07B55C3AC0] = "ChallengesTrackedCore"
		f1_local6:SetVisible( false )
		f1_local6:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 424, 100, 460 )
		f1_local3:addElement( f1_local6 )
		f1_local3[0xE5115725716F1FC] = f1_local6
	end
	local f1_local7 = nil
	if f1_local0.IsExfilMissionsWidgetEnabled() and f1_local0[0x4A020C7B018B3BA]() then
		f1_local7 = f1_local2.BuildRegisteredType( 0xD6699CFD59047F2, {
			controllerIndex = f1_local4
		} )
		f1_local7[0x8B72E07B55C3AC0] = "ExfilChallengesCore"
		f1_local7:SetVisible( false )
		f1_local7:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 424, 450, 810 )
		f1_local3:addElement( f1_local7 )
		f1_local3[0xD6699CFD59047F2] = f1_local7
	end
	local f1_local8 = nil
	f1_local8 = f1_local2.BuildRegisteredType( 0x4A9060FFF3B97EB, {
		controllerIndex = f1_local4
	} )
	f1_local8[0x8B72E07B55C3AC0] = "ChallengesWeeklyCore"
	f1_local8:SetVisible( false )
	f1_local8:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 424, 800, 1160 )
	f1_local3:addElement( f1_local8 )
	f1_local3[0xA3BF8DC70F98CFF] = f1_local8
	local f1_local9 = nil
	f1_local9 = f1_local2.BuildRegisteredType( 0x4A9060FFF3B97EB, {
		controllerIndex = f1_local4
	} )
	f1_local9[0x8B72E07B55C3AC0] = "ChallengesDailyCore"
	f1_local9:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 424, 64, 424 )
	f1_local3:addElement( f1_local9 )
	f1_local3[0x4A9060FFF3B97EB] = f1_local9
	local f1_local10 = nil
	if f1_local0.IsJup() then
		f1_local10 = f1_local2.BuildRegisteredType( 0x66F7BEE27D2522D, {
			controllerIndex = f1_local4
		} )
		f1_local10[0x8B72E07B55C3AC0] = "WinChallengeQueue"
		f1_local10:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 424, 424, 424 )
		f1_local3:addElement( f1_local10 )
		f1_local3[0x66F7BEE27D2522D] = f1_local10
	end
	local f1_local11 = nil
	if not f1_local0.IsJupPublicBetaBuildEnabled() and not f1_local0.InGame() then
		f1_local11 = f1_local2.BuildRegisteredType( 0x1D431E5E25C05C, {
			controllerIndex = f1_local4
		} )
		f1_local11[0x8B72E07B55C3AC0] = "ChallengesMenuButton"
		f1_local11:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 424, 424, 474 )
		f1_local3:addElement( f1_local11 )
		f1_local3[0x1D431E5E25C05C] = f1_local11
	end
	f0_local0( f1_local3, f1_local4, f1_arg1 )
	return f1_local3
end

MenuBuilder.registerType( 0xE20BB189595AAAF, ChallengePlaylistContainer )
LockTable( _M )
