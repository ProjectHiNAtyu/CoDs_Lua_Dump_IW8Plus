-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:02
module( ..., package.seeall )
FenceScenarioMissing = LUI.Class( LUI.Fence )
FenceScenarioMissing.init = function ( f13_arg0 )
	FenceScenarioMissing.super.init( f13_arg0 )
end

FenceScenarioMissing.Start = function ( f12_arg0 )
	local f12_local0 = GameInstall[0x37F59297B471D9A]()
	f12_arg0._luaGameMode = f12_local0
	f12_arg0._scenarioGroup = GameInstall[0x6B89459E3972855]( f12_local0 )
	if Engine[0xC8B174B6BF663C4]( f12_arg0._scenarioGroup ) or Engine[0x30DB4285F2AEF83]( f12_arg0._scenarioGroup ) then
		f12_arg0._state = LUI.Fence.STATE.pass
	else
		f12_arg0._state = LUI.Fence.STATE.block
	end
end

FenceScenarioMissing.Stop = function ( f11_arg0 )
	
end

FenceScenarioMissing.OnBackOut = function ( f10_arg0 )
	Engine[0x5BEA42EE45B1EE0]()
end

FenceScenarioMissing.PostFail = function ( f9_arg0 )
	if f9_arg0._state == LUI.Fence.STATE.fail then
		local f9_local0 = Engine[0x45B054C920178E9]()
		if CONDITIONS.InPrivatePartyAndNotHost() then
			Engine[0x5DEE98AA6FB3C2]( f9_local0, CoD.LeavePartyMoveUI.YES, CoD.LeavePartyShowMessage.NO, "FenceScenarioMissing.PostFail" )
		end
		FILE_MANAGEMENT.ShowPopupIfMissingDLC( f9_local0, f9_arg0._scenarioGroup, f9_arg0._luaGameMode )
	end
end

FenceScenarioMissing.UpdateState = function ( f8_arg0 )
	if f8_arg0._state == LUI.Fence.STATE.block then
		local f8_local0 = ScenarioRequestStatus.PENDING
		if not f8_arg0._requested then
			f8_local0 = Engine[0xBDB15633C002D13]( Engine[0x45B054C920178E9](), f8_arg0._scenarioGroup )
			f8_arg0._requested = true
		else
			f8_local0 = Engine[0x315859396890DAD]( f8_arg0._scenarioGroup )
		end
		if f8_local0 == ScenarioRequestStatus.DECLINED then
			f8_arg0._state = LUI.Fence.STATE.fail
		elseif f8_local0 == ScenarioRequestStatus.ACCEPTED then
			f8_arg0._state = LUI.Fence.STATE.pass
		elseif f8_local0 ~= ScenarioRequestStatus.PENDING then
			f8_arg0._state = LUI.Fence.STATE.fail
		end
	elseif f8_arg0._state == LUI.Fence.STATE.pass and (Engine[0xDAC3885CE254EC8]( f8_arg0._scenarioGroup ) or not Engine[0xC8B174B6BF663C4]( f8_arg0._scenarioGroup )) then
		f8_arg0._state = LUI.Fence.STATE.fail
	end
end

LUI.Fence.Register( "scenarioMissing", FenceScenarioMissing )
FenceScenarioMissingByPlaylist = LUI.Class( LUI.Fence )
FenceScenarioMissingByPlaylist.init = function ( f7_arg0, f7_arg1 )
	LUI.Fence.init( f7_arg0 )
	f7_arg0._GetCurrentPlaylist = f7_arg1
end

FenceScenarioMissingByPlaylist.UpdateState = function ( f6_arg0 )
	local f6_local0, f6_local1 = f6_arg0._GetCurrentPlaylist()
	f6_arg0._missingScenarioGroups = PlaylistUtils.GetMissingScenarioGroupsPlaylistOrCategory( f6_local1, f6_local0 )
	if next( f6_arg0._missingScenarioGroups ) == nil then
		f6_arg0._state = LUI.Fence.STATE.pass
	else
		f6_arg0._state = LUI.Fence.STATE.fail
	end
end

FenceScenarioMissingByPlaylist.PostFail = function ( f5_arg0 )
	local f5_local0 = Engine[0x45B054C920178E9]()
	if CONDITIONS.InPrivatePartyAndNotHost() then
		Engine[0x5DEE98AA6FB3C2]( f5_local0, CoD.LeavePartyMoveUI.YES, CoD.LeavePartyShowMessage.NO, "FenceScenarioMissingByPlaylist.PostFail" )
	end
	if f5_arg0._missingScenarioGroups and 0 < #f5_arg0._missingScenarioGroups then
		FILE_MANAGEMENT.ShowPopupIfMissingDLC( f5_local0, f5_arg0._missingScenarioGroups[1], GameInstall[0x37F59297B471D9A]() )
	end
end

local f0_local0 = function ()
	local f4_local0 = Playlist[0x7B3B2B73B53EB34]()
	local f4_local1 = Playlist[0xD78924AD23DE66B]()
	if Playlist[0x29DC19B8CA68312]( f4_local1 ) then
		f4_local0 = PlaylistUtils.USE_FILTERED_PLAYLIST_ID
	end
	return f4_local0, f4_local1
end

FenceScenarioMissingCPPlaylist = LUI.Class( FenceScenarioMissingByPlaylist )
FenceScenarioMissingCPPlaylist.init = function ( f3_arg0 )
	FenceScenarioMissingCPPlaylist.super.init( f3_arg0, f0_local0 )
end

LUI.Fence.Register( "scenarioMissingCPPlaylist", FenceScenarioMissingCPPlaylist )
local f0_local1 = function ()
	if Engine[0x8FF0F1C5B20321E]() or Lobby[0xF1D2956B0C99DF6]() then
		local f2_local0 = Playlist[0x7B3B2B73B53EB34]()
		local f2_local1 = Playlist[0xD78924AD23DE66B]()
		if Playlist[0x29DC19B8CA68312]( f2_local1 ) then
			f2_local0 = PlaylistUtils.USE_FILTERED_PLAYLIST_ID
		end
		return f2_local0, f2_local1
	else
		return Lobby[0xB92DA1948EDB47D]( Lobby.PartyUIData.PLAYLIST_ID ), Lobby[0xB92DA1948EDB47D]( Lobby.PartyUIData.PLAYLIST_CATEGORY )
	end
end

FenceScenarioMissingMPPlaylist = LUI.Class( FenceScenarioMissingByPlaylist )
FenceScenarioMissingMPPlaylist.init = function ( f1_arg0 )
	FenceScenarioMissingMPPlaylist.super.init( f1_arg0, f0_local0 )
end

LUI.Fence.Register( "scenarioMissingMPPlaylist", FenceScenarioMissingMPPlaylist )
LockTable( _M )
