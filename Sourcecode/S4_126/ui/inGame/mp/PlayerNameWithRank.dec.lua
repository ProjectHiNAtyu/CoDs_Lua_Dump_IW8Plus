-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
module( ..., package.seeall )
require( "ui.frontEnd.mp.LPTop250SkillDivText" )
require( "ui.widgets.SocialPlatformPresence" )
require( "ui.widgets.YouIndicatorRight" )
local f0_local0 = function ( f6_arg0 )
	local f6_local0 = _1080p * 6
	local f6_local1 = _1080p * 450
	local f6_local2 = LAYOUT.GetTextWidth( f6_arg0.PlayerRank )
	local f6_local3 = LAYOUT.GetElementWidth( f6_arg0.PlayerRankIcon )
	local f6_local4 = LAYOUT.GetElementWidth( f6_arg0.SocialPlatformPresence )
	local f6_local5 = math.min( LAYOUT.GetTextWidth( f6_arg0.PlayerName ), f6_local1 )
	local f6_local6 = f6_local0
	if f6_arg0.YouIndicator:IsVisible() then
		local f6_local7, f6_local8, f6_local9, f6_local10 = f6_arg0.YouIndicator:getLocalRect()
		f6_local6 = f6_local9 + f6_local0
	end
	f6_arg0.PlayerRank:SetLeft( f6_local6 + f6_local0 )
	f6_local6 = f6_local6 + f6_local0 + f6_local2
	f6_arg0.PlayerRankIcon:SetLeft( f6_local6 + f6_local0 )
	f6_arg0.PlayerRankIcon:SetRight( f6_local6 + f6_local0 + f6_local3 )
	if f6_arg0.LPSkillDivIcon and f6_arg0.LPTop250SkillDivText and CONDITIONS.IsLeaguePlay() then
		f6_arg0.LPSkillDivIcon:SetLeft( f6_local6 + f6_local0 )
		f6_arg0.LPSkillDivIcon:SetRight( f6_local6 + f6_local0 + f6_local3 )
		f6_arg0.LPTop250SkillDivText:SetLeft( f6_local6 + f6_local0 )
		f6_arg0.LPTop250SkillDivText:SetRight( f6_local6 + f6_local0 + f6_local3 )
	end
	f6_local6 = f6_local6 + f6_local0 + f6_local3
	f6_arg0.PlayerName:SetLeft( f6_local6 + f6_local0 )
	f6_arg0.PlayerName:SetRight( f6_local6 + f6_local0 + f6_local5 )
	f6_local6 = f6_local6 + f6_local0 + f6_local5
	if f6_arg0.SocialPlatformPresence:IsVisible() then
		f6_arg0.SocialPlatformPresence:SetLeft( f6_local6 - f6_local0 )
		f6_arg0.SocialPlatformPresence:SetRight( f6_local6 - f6_local0 + f6_local4 )
		f6_local6 = f6_local6 + f6_local4 - f6_local0
	end
	f6_arg0.totalWidth = f6_local6
end

local f0_local1 = function ( f3_arg0, f3_arg1, f3_arg2, f3_arg3, f3_arg4 )
	local f3_local0 = nil
	local f3_local1, f3_local2 = PROGRESSION.GetDisplayRankAndIconFromClientNum( f3_arg2, f3_arg1 )
	local f3_local3
	if not f3_arg3 then
		f3_local3 = f3_arg3
	else
		f3_local3 = false
	end
	local f3_local4 = MP.GetPlatformPresence( f3_arg2, f3_arg4 )
	f3_arg0.PlayerRank:setText( f3_local1 )
	f3_arg0.PlayerRankIcon:setImage( RegisterMaterial( f3_local2 ) )
	if CONDITIONS.IsLeaguePlay() then
		LEAGUE_PLAY.SetupPlayerID( {
			leaguePlaySR = Game[0x63116FEBCE83371]( f3_arg2 ) or 0
		}, {
			skillDivIcon = f3_arg0.LPSkillDivIcon,
			top250Text = f3_arg0.LPTop250SkillDivText
		} )
	end
	if MLG[0x9A758A10AC820FD]() then
		f3_local0 = CODCASTER.GetPlayerName( f3_arg1, f3_arg2, true )
	else
		f3_local0 = Game[0x5C342D264D1BFB5]( f3_arg2 )
	end
	if f3_local0 then
		f3_arg0.PlayerName:setText( f3_local0 )
	else
		f3_arg0.PlayerName:setText( "" )
	end
	if f3_local4 and f3_local4 ~= PresencePlatform.NONE then
		f3_arg0.SocialPlatformPresence:SetVisibility( LUI.Visibility.Visible )
		f3_arg0.SocialPlatformPresence:SetPlatformPresence( f3_local4 )
	else
		f3_arg0.SocialPlatformPresence:SetVisibility( LUI.Visibility.Hidden )
	end
	if f3_local3 then
		f3_arg0.YouIndicator:SetVisibility( LUI.Visibility.Visible )
		f3_arg0.PlayerName:SetRGBFromTable( SWATCHES.highlight.vPersonalHighlight, 0 )
	else
		f3_arg0.YouIndicator:SetVisibility( LUI.Visibility.Hidden )
		f3_arg0.PlayerName:SetRGBFromTable( SWATCHES.HUD.vHUDDefault, 0 )
	end
	local f3_local5 = function ( f5_arg0, f5_arg1 )
		if f3_arg0 then
			f5_arg0.PlayerName:SetRGBFromTable( COLORBLIND_UTILS.GetCustomColorFromColorNameAndColorBlindType( f5_arg1, COLORBLIND_UTILS.CUSTOM_COLORS.YOU, SWATCHES.HUD.playerIndicator ), 0 )
		end
	end
	
	f3_arg0:addAndCallEventHandler( "update_color_blind_colors", function ()
		f3_arg0( f3_arg0, f3_arg0 )
	end )
	f0_local0( f3_arg0 )
end

local f0_local2 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.Setup = f0_local0
	f2_arg0.totalWidth = 0
end

function PlayerNameWithRank( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 700 * _1080p, 0, 54 * _1080p )
	self.id = "PlayerNameWithRank"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local PlayerRankIcon = nil
	
	PlayerRankIcon = LUI.UIImage.new()
	PlayerRankIcon.id = "PlayerRankIcon"
	PlayerRankIcon:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, _1080p * 120, _1080p * 168, _1080p * -24, _1080p * 24 )
	self:addElement( PlayerRankIcon )
	self.PlayerRankIcon = PlayerRankIcon
	
	local LPSkillDivIcon = nil
	
	LPSkillDivIcon = LUI.UIImage.new()
	LPSkillDivIcon.id = "LPSkillDivIcon"
	LPSkillDivIcon:SetVisibility( LUI.Visibility.Hidden )
	LPSkillDivIcon:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, _1080p * 120, _1080p * 168, _1080p * -24, _1080p * 24 )
	self:addElement( LPSkillDivIcon )
	self.LPSkillDivIcon = LPSkillDivIcon
	
	local LPTop250SkillDivText = nil
	
	LPTop250SkillDivText = MenuBuilder.BuildRegisteredType( "LPTop250SkillDivText", {
		controllerIndex = f1_local1
	} )
	LPTop250SkillDivText.id = "LPTop250SkillDivText"
	LPTop250SkillDivText:SetScale( -0.9, 0 )
	LPTop250SkillDivText:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, _1080p * -112, _1080p * 400, _1080p * -256, _1080p * 256 )
	self:addElement( LPTop250SkillDivText )
	self.LPTop250SkillDivText = LPTop250SkillDivText
	
	local PlayerRank = nil
	
	PlayerRank = LUI.UIStyledText.new()
	PlayerRank.id = "PlayerRank"
	PlayerRank:SetRGBFromTable( SWATCHES.HUD.vHUDDefault, 0 )
	PlayerRank:setText( "000", 0 )
	PlayerRank:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_UserGenerated.font.File ) )
	PlayerRank:SetFontSize( FONT_STYLES.fontStyle_UserGenerated.size )
	PlayerRank:SetMinFontSize( FONT_STYLES.fontStyle_UserGenerated.minSize )
	PlayerRank:SetWordWrap( false )
	PlayerRank:SetAlignment( LUI.Alignment.Left )
	PlayerRank:SetVerticalAlignment( LUI.Alignment.Center )
	PlayerRank:SetSDFRenderingEnabled( true )
	PlayerRank:SetMaxVisibleLines( 1 )
	PlayerRank:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, _1080p * 54, _1080p * 144, _1080p * -27, _1080p * 27 )
	self:addElement( PlayerRank )
	self.PlayerRank = PlayerRank
	
	local PlayerName = nil
	
	PlayerName = LUI.UIStyledText.new()
	PlayerName.id = "PlayerName"
	PlayerName:SetRGBFromTable( SWATCHES.HUD.vHUDDefault, 0 )
	PlayerName:SetHorizontalPivot( LUI.HorizontalPivot.Left )
	PlayerName:SetVerticalPivot( LUI.VerticalPivot.Top )
	PlayerName:setText( "", 0 )
	PlayerName:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_UserGenerated.font.File ) )
	PlayerName:SetFontSize( FONT_STYLES.fontStyle_UserGenerated.size )
	PlayerName:SetMinFontSize( FONT_STYLES.fontStyle_UserGenerated.minSize )
	PlayerName:SetWordWrap( false )
	PlayerName:SetTracking( -1 * _1080p, 0 )
	PlayerName:SetAlignment( LUI.Alignment.Left )
	PlayerName:SetVerticalAlignment( LUI.Alignment.Center )
	PlayerName:SetSDFRenderingEnabled( true )
	PlayerName:SetAutoScroll( AUTOSCROLL.enabled )
	PlayerName:SetAutoScrollStyle( LUI.UIStyledText.AutoScrollStyle.ScrollH )
	PlayerName:SetStartupDelay( 1000 )
	PlayerName:SetLineHoldTime( 400 )
	PlayerName:SetAnimMoveTime( 150 )
	PlayerName:SetAnimMoveSpeed( 50 )
	PlayerName:SetEndDelay( 1000 )
	PlayerName:SetCrossfadeTime( 400 )
	PlayerName:SetFadeInTime( 300 )
	PlayerName:SetFadeOutTime( 300 )
	PlayerName:SetMaxVisibleLines( 1 )
	PlayerName:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, _1080p * 180, _1080p * 700, _1080p * -27, _1080p * 27 )
	self:addElement( PlayerName )
	self.PlayerName = PlayerName
	
	local SocialPlatformPresence = nil
	
	SocialPlatformPresence = MenuBuilder.BuildRegisteredType( "SocialPlatformPresence", {
		controllerIndex = f1_local1
	} )
	SocialPlatformPresence.id = "SocialPlatformPresence"
	SocialPlatformPresence:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, _1080p * 380, _1080p * 458, _1080p * -35, _1080p * 43 )
	self:addElement( SocialPlatformPresence )
	self.SocialPlatformPresence = SocialPlatformPresence
	
	local YouIndicator = nil
	
	YouIndicator = MenuBuilder.BuildRegisteredType( "YouIndicatorRight", {
		controllerIndex = f1_local1
	} )
	YouIndicator.id = "YouIndicator"
	YouIndicator:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, 0, _1080p * 54, _1080p * -13, _1080p * 17 )
	self:addElement( YouIndicator )
	self.YouIndicator = YouIndicator
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "PlayerNameWithRank", PlayerNameWithRank )
LockTable( _M )
