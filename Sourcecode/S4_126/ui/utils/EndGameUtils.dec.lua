-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
END_GAME = END_GAME or {}
local f0_local0 = function ( f26_arg0, f26_arg1 )
	local f26_local0 = true
	for f26_local1 = 0, MP.BRTeamMaxSize - 1, 1 do
		local f26_local4 = DataSources.inGame.player.BRData.teamList:GetDataSourceAtIndex( f26_local1, f26_arg0 )
		if f26_local4 and f26_local4.clientNum then
			local f26_local5 = f26_local4.clientNum:GetValue( f26_arg0 )
			if f26_local5 and not MP.BRIsSquadMemberEliminated( f26_arg0, Game[0xA773256726C63A9]( f26_local5 ) ) then
				f26_local0 = false
				break
			end
		end
	end
	local f26_local6
	if Game[0x395DE1E9756DA1F]( f26_arg1 ) == Game[0x395DE1E9756DA1F]( Game[0x31144F2C09FF50C]() ) then
		f26_local6 = CONDITIONS.IsSpectating( f26_arg0 )
	else
		f26_local6 = false
	end
	local f26_local4
	if not f26_local0 then
		f26_local4 = f26_local6
	else
		f26_local4 = false
	end
	return f26_local4
end

local f0_local1 = function ( f25_arg0, f25_arg1 )
	LUI.FlowManager.RequestLeaveMenu( f25_arg0 )
end

local f0_local2 = function ( f24_arg0, f24_arg1 )
	f24_arg0:setText( f24_arg1.message_text )
	f24_arg0:dispatchEventToRoot( {
		name = "resize_popup"
	} )
end

local f0_local3 = function ( f23_arg0 )
	Engine[0x94CFB52F048AEE1]( "xpartybackout" )
	Engine[0x94CFB52F048AEE1]( "disconnect" )
end

local f0_local4 = function ( f22_arg0 )
	Engine[0x94CFB52F048AEE1]( "xpartydisbandafterround" )
	Engine[0x94CFB52F048AEE1]( "hostmigration_start_backout" )
end

local f0_local5 = function ( f21_arg0 )
	Engine[0x94CFB52F048AEE1]( "xstopprivateparty" )
	Engine[0x94CFB52F048AEE1]( "disconnect" )
end

local f0_local6 = function ( f20_arg0 )
	Engine[0x94CFB52F048AEE1]( "xstopprivateparty" )
	Engine[0x94CFB52F048AEE1]( "xpartydisbandafterround" )
	Engine[0x94CFB52F048AEE1]( "hostmigration_start" )
end

END_GAME.StopServerAndLeave = function ( f19_arg0, f19_arg1 )
	if Dvar[0x9E5BE3B4BBA4E0E]( "#x3c01a240de4d80e81" ) then
		Engine[0x6055C55456F05DF]( "end_game", 1 )
		Engine[0xB81A5136C5503E4]( "set " .. "#x3285f5715d036ba9d" .. " 1" )
	elseif IsPrivateMatch() and Lobby[0x6957722EF74F5D2]() then
		Engine[0x94CFB52F048AEE1]( "disconnect" )
	else
		f0_local0( f19_arg0 )
	end
	LUI.FlowManager.RequestCloseAllMenus()
end

local f0_local7 = function ( f18_arg0, f18_arg1 )
	if CONDITIONS.IsWaveGameType() then
		CP.ClearWaveLoadout( Engine[0x45B054C920178E9]() )
	end
	END_GAME.StopServerAndLeave( f18_arg0 )
end

local f0_local8 = function ( f17_arg0, f17_arg1 )
	LUI.FlowManager.RequestLeaveMenu( f17_arg0 )
	Engine[0x7C75E608EA39B5C]( "onPlayerQuit" )
	if Dvar[0x9E5BE3B4BBA4E0E]( "#x3c01a240de4d80e81" ) then
		f0_local0( f17_arg0 )
	else
		f0_local0( f17_arg0 )
	end
	if CONDITIONS.IsBRGameType() then
		if Dvar[0x22EAAB59AA27E9B]( "#x3659ba0fd61ed48a" ) == 7 then
			Dvar[0x2414681ECAB880F]( "#x3659ba0fd61ed48a", 0 )
			if CONDITIONS.IsBloodMoney() then
				Dvar[0x2414681ECAB880F]( "#x31fe043ca748125eb", 3 )
			else
				Dvar[0x2414681ECAB880F]( "#x31fe043ca748125eb", 1 )
			end
		end
	elseif CONDITIONS.IsArenaEvoGameType() then
		Dvar[0x2414681ECAB880F]( "#x31fe043ca748125eb", AAR.MagmaSummaryState.ARENA_EVO_SUMMARY_READY )
	end
	LUI.FlowManager.RequestCloseAllMenus()
end

local f0_local9 = function ( f16_arg0, f16_arg1 )
	LUI.FlowManager.RequestLeaveMenu( f16_arg0 )
	Engine[0x7C75E608EA39B5C]( "onPlayerQuit" )
	if Dvar[0x9E5BE3B4BBA4E0E]( "#x3c01a240de4d80e81" ) then
		f0_local0( f16_arg0 )
	else
		f0_local0( f16_arg0 )
	end
	if CONDITIONS.IsBRGameType() then
		if Dvar[0x22EAAB59AA27E9B]( "#x3659ba0fd61ed48a" ) == 7 then
			Dvar[0x2414681ECAB880F]( "#x3659ba0fd61ed48a", 0 )
			if CONDITIONS.IsBloodMoney() then
				Dvar[0x2414681ECAB880F]( "#x31fe043ca748125eb", 3 )
			else
				Dvar[0x2414681ECAB880F]( "#x31fe043ca748125eb", 1 )
			end
		end
	elseif CONDITIONS.IsArenaEvoGameType() then
		Dvar[0x2414681ECAB880F]( "#x31fe043ca748125eb", AAR.MagmaSummaryState.ARENA_EVO_SUMMARY_READY )
	end
	LUI.FlowManager.RequestCloseAllMenus()
end

local f0_local10 = function ( f15_arg0 )
	local f15_local0 = Lobby[0x63537242F1D48FF]()
	if f15_local0 then
		f15_local0 = Lobby[0x6957722EF74F5D2]()
		if f15_local0 then
			f15_local0 = not Lobby[0xA04A6632DD06002]()
		end
	end
	return f15_local0
end

local f0_local11 = function ( f14_arg0 )
	if f0_local0( f14_arg0 ) then
		LUI.FlowManager.RequestLeaveMenu( f14_arg0, true )
		LUI.FlowManager.RequestPopupMenu( f14_arg0, "PullPartyPopup", false )
	else
		Engine[0x7C75E608EA39B5C]( "onPlayerQuit" )
		if Dvar[0x9E5BE3B4BBA4E0E]( "#x3c01a240de4d80e81" ) then
			f0_local0( f14_arg0 )
		else
			f0_local0( f14_arg0 )
		end
		if CONDITIONS.IsInGameBattlesMatch() then
			GAMEBATTLES.LeaveGameBattleMatchLobby( Engine[0x45B054C920178E9]() )
		end
		if CONDITIONS.IsWaveGameType() then
			CP.ClearWaveLoadout( Engine[0x45B054C920178E9]() )
		end
		if CONDITIONS.IsBRGameType() then
			if Dvar[0x22EAAB59AA27E9B]( "#x3659ba0fd61ed48a" ) == 7 then
				Dvar[0x2414681ECAB880F]( "#x3659ba0fd61ed48a", 0 )
				if CONDITIONS.IsBloodMoney() then
					Dvar[0x2414681ECAB880F]( "#x31fe043ca748125eb", 3 )
				else
					Dvar[0x2414681ECAB880F]( "#x31fe043ca748125eb", 1 )
				end
			end
		elseif CONDITIONS.IsArenaEvoGameType() then
			Dvar[0x2414681ECAB880F]( "#x31fe043ca748125eb", AAR.MagmaSummaryState.ARENA_EVO_SUMMARY_READY )
		end
		LUI.FlowManager.RequestCloseAllMenus()
	end
end

local f0_local12 = function ()
	local self = LUI.UIElement.new()
	self.id = "end_game_id"
	self:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, -50, 0 )
	LAYOUT.ToggleFadeFrameDisabledForCurrentMenu( self, false )
	local f13_local1 = Engine[0xED84C33EC5F01EA]( "@LUA_MENU/END_GAME_DESC" )
	local f13_local2 = Engine[0xED84C33EC5F01EA]( "@LUA_MENU/LEAVE_GAME_TITLE" )
	if CONDITIONS.IsBRQuarryTutorialMap() then
		f13_local1 = Engine[0xED84C33EC5F01EA]( "@LUA_MENU/TUTORIAL_LEAVE" )
	end
	if Engine[0xCA085C21FCBD7CA]() and Game[0x28624DEF6F708C8]( Engine[0x45B054C920178E9](), "zm_ui_is_solo" ) then
		f13_local1 = Engine[0xED84C33EC5F01EA]( "@CP_ZMB/LEAVE_GAME_DESC" )
		f13_local2 = Engine[0xED84C33EC5F01EA]( "@MENU/NOTICE" )
	end
	local f13_local3 = MenuBuilder.BuildRegisteredType( "PopupYesNo", {
		headerText = f13_local2,
		messageText = f13_local1,
		controllerIndex = Engine[0x45B054C920178E9](),
		yesAction = f0_local0
	} )
	f13_local3.id = "EndGamePopup"
	self:addElement( f13_local3 )
	local f13_local4 = LUI.UIBindButton.new()
	f13_local4.id = "endBackToGameStartButton"
	f13_local4:registerEventHandler( "button_start", f0_local0 )
	self:addElement( f13_local4 )
	return self
end

local f0_local13 = function ()
	local f12_local0 = {
		headerText = Engine[0xED84C33EC5F01EA]( "LUA_MENU/LEAVE_GAME_TITLE" ),
		messageText = Engine[0xED84C33EC5F01EA]( "LUA_MENU/LEAVE_GAME_DESC" ),
		controllerIndex = Engine[0x45B054C920178E9]()
	}
	if Engine[0xCA085C21FCBD7CA]() then
		f12_local0.headerText = Engine[0xED84C33EC5F01EA]( "MENU/NOTICE" )
		f12_local0.messageText = Engine[0xED84C33EC5F01EA]( "CP_ZMB/LEAVE_GAME_DESC" )
	elseif CONDITIONS.IsArenaEvoGameType() then
		local f12_local1 = ARENA_EVO.GetPlayerTeamIndex( f12_local0.controllerIndex )
		if f12_local1 then
			local f12_local2 = ARENA_EVO.IsTeamEliminated( f12_local0.controllerIndex, f12_local1 )
			local f12_local3 = Lobby[0x63537242F1D48FF]()
			if f12_local3 then
				f12_local3 = not Lobby[0x6957722EF74F5D2]()
			end
			if f12_local2 then
				local f12_local4
				if f12_local3 then
					f12_local4 = Engine[0xED84C33EC5F01EA]( "ARENA_EVO/LEAVEPARTYWARNING" )
					if not f12_local4 then
					
					else
						f12_local0.messageText = f12_local4
					end
				end
				f12_local4 = ""
			end
		end
	elseif CONDITIONS.IsBRGameType() then
		f12_local0.messageText = Engine[0xED84C33EC5F01EA]( "@MENU/QUIT_WARNING" )
		if Game[0xA988866C889EAAD]() then
			if not Engine[0x12586A3F4FB490E]() and not LUI.PostGameManager.IsPostGame( controllerIndex ) and f0_local0( controllerIndex, Game[0x51CB5C434C63793]() ) then
				f12_local0.messageText = Engine[0xED84C33EC5F01EA]( "@MP_BR_INGAME/LEAVE_GAME_TEAM_ALIVE_DESC" )
			end
		end
	elseif CONDITIONS.IsInGameBattlesMatch() then
		f12_local0.messageText = Engine[0xED84C33EC5F01EA]( "MLG_GAMEBATTLES/LEAVE_GAME_DESC" )
	end
	f12_local0.yesAction = f0_local0
	local f12_local1 = MenuBuilder.BuildRegisteredType( "PopupYesNo", f12_local0 )
	f12_local1.id = "LeaveGamePopup"
	return f12_local1
end

local f0_local14 = function ( f11_arg0 )
	if Dvar[0x9E5BE3B4BBA4E0E]( "#x3c01a240de4d80e81" ) then
		Engine[0x6055C55456F05DF]( "end_game", 1 )
		Engine[0xB81A5136C5503E4]( "set " .. "#x3285f5715d036ba9d" .. " 1" )
	else
		f0_local0( f11_arg0 )
	end
end

local f0_local15 = function ()
	local f9_local0 = DataSources.inGame.MP.trialTriesRemaining:GetValue( Engine[0x45B054C920178E9]() )
	local f9_local1 = MenuBuilder.BuildRegisteredType( "PopupYesNo", {
		headerText = Engine[0xED84C33EC5F01EA]( "LUA_MENU/LEAVE_GAME_TITLE" ),
		messageText = 0 and Engine[0xED84C33EC5F01EA]( "LUA_MENU/LEAVE_TRIAL_DESC" ) or "",
		yesAction = function ( f10_arg0, f10_arg1 )
			local f10_local0 = Game[0x28624DEF6F708C8]( f10_arg1, "ui_trial_reward_tier" )
			local f10_local1 = DataSources.inGame.MP.trialScoreIsTime:GetValue( f10_arg1 )
			local f10_local2 = DataSources.inGame.MP.trialMissionPlayerDataID:GetValue( f10_arg1 )
			local f10_local3 = PlayerData[0x8B73907B55C4D71]( f10_arg1, CoD.StatsGroup.Ranked )
			f10_local3 = f10_local3.trialsBestScore[f10_local2]
			local f10_local4 = f10_local3:get()
			if f10_local1 then
				local f10_local5 = DataSources.inGame.MP.trialBestTime:GetValue( f10_arg1 )
				if (f10_local5 < f10_local4 or f10_local4 == 0) and 0 < f10_local5 then
					f10_local3:set( f10_local5 )
				end
			else
				local f10_local5 = DataSources.inGame.MP.trialBestScore:GetValue( f10_arg1 )
				if f10_local4 < f10_local5 then
					f10_local3:set( f10_local5 )
				end
			end
			Challenges[0x636D3BF423FD414]( f10_arg1, AEGameEvents.s4_end_trial.eventID, 1, 0, f10_local0 )
			Dvar[0x2414681ECAB880F]( "#x39f0aa9aeac397c43", f10_local0 )
			f9_local0( f10_arg0 )
		end
	} )
	f9_local1.id = "LeaveTrialPopup"
	return f9_local1
end

local f0_local16 = function ()
	local self = LUI.UIElement.new()
	self.id = "end_game_id"
	self:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, -50, 0 )
	LAYOUT.ToggleFadeFrameDisabledForCurrentMenu( self, false )
	local f8_local1 = MenuBuilder.BuildRegisteredType( "PopupYesNo", {
		headerText = Engine[0xED84C33EC5F01EA]( "@LUA_MENU/LEAVE_GAME_TITLE" ),
		messageText = Engine[0xED84C33EC5F01EA]( "@LUA_MENU/END_GAME_WZ_DESC" ),
		yesAction = f0_local0
	} )
	f8_local1.id = "BREndTutorialPopup"
	self:addElement( f8_local1 )
	local f8_local2 = LUI.UIBindButton.new()
	f8_local2.id = "endBackToGameStartButton"
	f8_local2:registerEventHandler( "button_start", f0_local0 )
	self:addElement( f8_local2 )
	return self
end

local f0_local17 = function ( f7_arg0, f7_arg1 )
	Engine[0xCFD2C5E2E3C4014]()
	Engine[0x6055C55456F05DF]( "exit_squad_eliminated", BR.ExitGameCommandType.LEAVE_TUTORIAL )
end

local f0_local18 = function ()
	local self = LUI.UIElement.new()
	self.id = "end_game_id"
	self:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, -50, 0 )
	LAYOUT.ToggleFadeFrameDisabledForCurrentMenu( self, false )
	local f6_local1 = MenuBuilder.BuildRegisteredType( "PopupYesNo", {
		headerText = Engine[0xED84C33EC5F01EA]( "@LUA_MENU/LEAVE_GAME_TITLE" ),
		yesAction = f0_local0
	} )
	f6_local1.id = "BREndQuarryPopup"
	self:addElement( f6_local1 )
	local f6_local2 = LUI.UIBindButton.new()
	f6_local2.id = "endBackToGameStartButton"
	f6_local2:registerEventHandler( "button_start", f0_local0 )
	self:addElement( f6_local2 )
	return self
end

local f0_local19 = function ( f5_arg0, f5_arg1 )
	local f5_local0 = MenuBuilder.BuildRegisteredType( "MessagePopup", {
		headerText = Engine[0xED84C33EC5F01EA]( "LUA_MENU/LEAVE_GAME_TITLE" ),
		messageText = Engine[0xED84C33EC5F01EA]( "LUA_MENU/PULL_PARTY_DESC" ),
		defaultFocusIndex = 2,
		buttonsClosePopup = true,
		controllerIndex = Engine[0x45B054C920178E9](),
		buttons = {
			{
				label = Engine[0xED84C33EC5F01EA]( "LUA_MENU/YES" ),
				action = f0_local0
			},
			{
				label = Engine[0xED84C33EC5F01EA]( "LUA_MENU/NO" ),
				action = f0_local0
			}
		}
	} )
	f5_local0.id = "LobbyPullPartyPopup"
	return f5_local0
end

local f0_local20 = function ()
	local self = LUI.UIElement.new()
	self.id = "popup_retry"
	self:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, -50, 0 )
	self._animationSets = {}
	self._sequences = {}
	local f1_local1 = MenuBuilder.BuildRegisteredType( "PopupYesNo", {
		headerText = Engine[0xED84C33EC5F01EA]( "COOP_GAME_PLAY/VOTE_RETRY" ),
		messageText = Engine[0xED84C33EC5F01EA]( "COOP_GAME_PLAY/VOTE_DESC" ),
		defaultFocusIndex = 1,
		yesAction = function ( f4_arg0, f4_arg1 )
			Engine[0x6055C55456F05DF]( "retry_level", 1 )
		end,
		noAction = function ( f3_arg0, f3_arg1 )
			Engine[0x6055C55456F05DF]( "quit_level", 1 )
		end
	} )
	f1_local1.id = "RetryPopup"
	self:addElement( f1_local1 )
	local timerBG = nil
	
	timerBG = LUI.UIImage.new()
	timerBG.id = "timerBG"
	timerBG:SetRGBFromInt( 3355443, 0 )
	timerBG:SetAlpha( 0.6, 0 )
	timerBG:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 627, _1080p * 1292, _1080p * 414, _1080p * 438 )
	self:addElement( timerBG )
	self.timerBG = timerBG
	
	local time = nil
	
	time = LUI.UIText.new()
	time.id = "time"
	time:setText( "", 0 )
	time:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	time:SetAlignment( LUI.Alignment.Center )
	time:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, -50, 0 )
	self:addElement( time )
	self.time = time
	
	self.time:RegisterAnimationSequence( "DefaultSequence", {
		{
			value = "30",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 920
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1003
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 418
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 442
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Left_Anchor
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Right_Anchor
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Top_Anchor
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Bottom_Anchor
		},
		{
			value = "29",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "28",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "27",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "26",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "25",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "24",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "23",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "22",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "21",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "20",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "19",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "18",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "17",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "16",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "15",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "14",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "13",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "12",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "11",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "10",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "9",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "8",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "7",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "6",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "5",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "4",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "3",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "2",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "1",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "0",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		}
	} )
	self._sequences.DefaultSequence = function ()
		self.time:AnimateSequence( "DefaultSequence" )
	end
	
	ACTIONS.AnimateSequence( self, "DefaultSequence" )
	return self
end

MenuBuilder.registerType( "EndGamePopup", f0_local12 )
MenuBuilder.registerType( "LeaveGamePopup", f0_local13 )
MenuBuilder.registerType( "PullPartyPopup", f0_local19 )
MenuBuilder.registerType( "RetryPopup", f0_local20 )
MenuBuilder.registerType( "LeaveTrialPopup", f0_local15 )
MenuBuilder.registerType( "BREndTutorialPopup", f0_local16 )
MenuBuilder.registerType( "BREndQuarryPopup", f0_local18 )
