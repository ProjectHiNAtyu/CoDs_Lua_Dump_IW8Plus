-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
module( ..., package.seeall )
require( "ui.generated.widgets.frontend.social.socialmenucommon" )
require( "ui.generated.widgets.tabbacker" )
require( "ui.generated.widgets.frontend.menutitle" )
require( "ui.generated.widgets.frontend.mp.mpplayerdetails" )
require( "ui.generated.widgets.playerdetailsavailability" )
require( "ui.generated.widgets.frontend.lobby.lobbymembersfooter" )
require( "ui.generated.widgets.frontend.submenutab" )
local f0_local0 = FRIENDS.TabIDs.HUB
local f0_local1 = function ( f29_arg0, f29_arg1 )
	f29_arg0:registerEventHandler( "refresh_friends", function ( element, event )
		local f30_local0 = LUI.FlowManager.GetScopedData( f29_arg0 )
		if f29_arg0._usesPlayerGrid and f30_local0.enableRefreshFriendsList then
			if Engine[0x688D9FAA39ECE94]() or Engine[0x2BFF02F7B2CDB47]() then
				Engine[0xB81A5136C5503E4]( "friends_refresh", f29_arg0 )
			end
			FRIENDS.RefreshData( f29_arg0._activeTabID, f29_arg0._activeTabWidget:GetPlayerGrid(), f29_arg0 )
		end
	end )
end

local f0_local2 = function ( f28_arg0 )
	if f28_arg0.refreshFriendsTimer == nil then
		f28_arg0:processEvent( {
			name = "refresh_friends"
		} )
		local self = LUI.UITimer.new( {
			interval = 1000,
			event = {
				name = "refresh_friends"
			}
		} )
		f28_arg0:addElement( self )
		f28_arg0.refreshFriendsTimer = self
	end
end

local f0_local3 = function ( f27_arg0, f27_arg1 )
	local f27_local0 = #f27_arg0._tabNamesAndIDs + 1
	f27_arg0._tabIDsToIndexes[f27_arg1.id] = f27_local0
	f27_arg0._tabNamesAndIDs[f27_local0] = f27_arg1
end

local f0_local4 = function ( f26_arg0, f26_arg1 )
	f26_arg0.Tabs:FocusTab( f26_arg0._controllerIndex, f26_arg0._tabIDsToIndexes[f26_arg1] )
end

local f0_local5 = function ( f25_arg0 )
	f25_arg0.Tabs:FocusTab( f25_arg0._controllerIndex, f25_arg0.Tabs:GetDefaultTab() )
end

local f0_local6 = function ( f24_arg0 )
	if f24_arg0.refreshFriendsTimer ~= nil then
		f24_arg0.refreshFriendsTimer:closeTree()
		f24_arg0.refreshFriendsTimer = nil
	end
end

local f0_local7 = function ()
	if SOCIAL.CanUseOperatorsInBackground() then
		FrontEndScene.HideAllCharacters()
		Engine[0x805D0407BF691DA]()
	end
end

local f0_local8 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0.SetDefaultTabActive = f0_local0
	f3_arg0.SetTabActive = f0_local0
	f3_arg0._controllerIndex = f3_arg1
	if CONDITIONS.IsNewSocialScreenEnabled() then
		f3_arg0.SocialMenuCommon:SetTitle( Engine[0xED84C33EC5F01EA]( 0x820B453321A4F2C ) )
		f3_arg0.Tabs = f3_arg0.SocialMenuCommon.Tabs
	else
		f3_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0xF903D47BC8F2015 ) )
	end
	f3_arg0._usesPlayerGrid = true
	f3_arg0._tabIDsToIndexes = {}
	f3_arg0._tabNamesAndIDs = {}
	local f3_local0 = Engine[0x74423E76DECE3E4]()
	if CONDITIONS.IsNewSocialScreenEnabled() then
		f0_local0( f3_arg0, {
			name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xEAF54BB2FF3B64 ) ),
			id = FRIENDS.TabIDs.HUB
		} )
		if not CONDITIONS.IsIW9BetaBuildEnabled() then
			f0_local0( f3_arg0, {
				name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x10B8E5FB81386C8 ) ),
				id = FRIENDS.TabIDs.SHOWCASE
			} )
		end
		f0_local0( f3_arg0, {
			name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xF3284E74E6D65E2 ) ),
			id = FRIENDS.TabIDs.FRIENDS
		} )
		if SOCIAL.IsSocialGroupsEnabled() then
			f0_local0( f3_arg0, {
				name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xB33C344674D2AF5 ) ),
				id = FRIENDS.TabIDs.GROUPS
			} )
		end
		if not f3_local0 and Dvar[0x9E5BE3B4BBA4E0E]( 0xC3DB6C165EA08D5 ) then
			f0_local0( f3_arg0, {
				name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x5342809B62DBE6F ) ),
				id = FRIENDS.TabIDs.RECENT_PLAYERS
			} )
		end
	else
		f0_local0( f3_arg0, {
			name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x235116F3C97886C ) ),
			id = FRIENDS.TabIDs.FRIENDS
		} )
		if not f3_local0 then
			f0_local0( f3_arg0, {
				name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x22533C4B873A3B5 ) ),
				id = FRIENDS.TabIDs.PRIVATE_PARTY
			} )
			if Dvar[0x9E5BE3B4BBA4E0E]( 0x7DEF3F9D98E43C1 ) and not CONDITIONS.IsCIABuildEnabled() then
				f0_local0( f3_arg0, {
					name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x99C8C658E7AA1F3 ) ),
					id = FRIENDS.TabIDs.REGIMENTS
				} )
			end
			if Dvar[0x9E5BE3B4BBA4E0E]( 0xC3DB6C165EA08D5 ) then
				f0_local0( f3_arg0, {
					name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x827E795BD9577C4 ) ),
					id = FRIENDS.TabIDs.RECENT_PLAYERS
				} )
			end
			if Dvar[0x9E5BE3B4BBA4E0E]( 0x1081B6614BDB73D ) then
				f0_local0( f3_arg0, {
					name = ToUpperCase( "Shared Loadouts" ),
					id = FRIENDS.TabIDs.SHARED_LOADOUTS
				} )
			end
		end
	end
	local f3_local1 = {
		_customScrolling = true,
		SetLinkedGridDataSource = function ()
			
		end,
		UpdateScrolling = function ( f22_arg0 )
			local f22_local0 = f3_arg0._activeTabWidget:GetPlayerGrid()
			f22_local0.focusPosition = f22_local0:GetFocusPositionIndex( {
				clampContentIndexToDatasetLength = true
			} ) or 0
			FRIENDS.RefreshData( f3_arg0._activeTabID, f22_local0, f3_arg0 )
		end,
		LinkTo = function ()
			
		end
	}
	local f3_local2 = LUI.FlowManager.GetScopedData( f3_arg0 )
	local f3_local3 = function ( f19_arg0 )
		if f19_arg0 then
			if not f3_arg0._leavePartyHelperAdded then
				f3_arg0._leavePartyHelperAdded = true
				f3_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
					side = "left",
					button_ref = "button_left_trigger",
					priority = 3,
					helper_text = Engine[0xED84C33EC5F01EA]( 0xEC125040F4F4C6D )
				} )
			end
		elseif f3_arg0._leavePartyHelperAdded then
			f3_arg0._leavePartyHelperAdded = nil
			f3_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
				button_ref = "button_left_trigger"
			} )
		end
	end
	
	local f3_local4 = {}
	for f3_local9, f3_local10 in ipairs( f3_arg0._tabNamesAndIDs ) do
		local f3_local11 = table.insert
		local f3_local12 = f3_local4
		local f3_local13 = {
			name = f3_local10.name
		}
		local f3_local8
		if (not f3_arg2.setRegimentsDefault or f3_local10.id ~= FRIENDS.TabIDs.REGIMENTS) and f3_local2.activeTabIndex ~= f3_local9 then
			f3_local8 = false
		else
			f3_local8 = true
		end
		f3_local13.hasDefaultFocus = f3_local8
		f3_local13.focusFunction = function ( f16_arg0, f16_arg1, f16_arg2, f16_arg3 )
			if f3_arg0.activeTabIndex and f16_arg2 == f3_arg0.activeTabIndex and f3_arg0._activeTabWidget then
				
			else
				
			end
			local f16_local0 = f3_arg0._tabNamesAndIDs[f16_arg2 + 1].id
			if f3_arg0._activeTabID ~= f16_local0 then
				f3_arg0._activeTabID = f16_local0
				if f3_arg0._activeTabWidget then
					f3_arg0._activeTabWidget:closeTree()
					f3_arg0._activeTabWidget = nil
				end
				f3_arg0._usesPlayerGrid = true
				if f3_arg0._manageFriendsHelperAdded then
					f3_arg0._manageFriendsHelperAdded = nil
					f3_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
						button_ref = "button_alt2"
					} )
				end
				if f3_arg0._leavePartyHelperAdded then
					f3_arg0._leavePartyHelperAdded = nil
					f3_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
						button_ref = "button_left_trigger"
					} )
				end
				if f3_arg0._partyTabHelperAdded then
					f3_arg0._partyTabHelperAdded = nil
					f3_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
						button_ref = "button_r3"
					} )
				end
				if f3_arg0._regimentsHelpersAdded then
					f3_arg0._regimentsHelpersAdded = nil
					f3_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
						button_ref = "button_alt1"
					} )
					f3_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
						button_ref = "button_r3"
					} )
					f3_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
						button_ref = "button_left_trigger"
					} )
				end
				if f3_arg0._friendsTabHelperAdded then
					f3_arg0._friendsTabHelperAdded = nil
					f3_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
						button_ref = "button_alt1"
					} )
					f3_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
						button_ref = "button_alt2"
					} )
					f3_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
						button_ref = "button_r3"
					} )
				end
				if f3_arg0._setClanTagPromptAdded then
					f3_arg0._setClanTagPromptAdded = nil
					f3_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
						button_ref = "button_right_trigger"
					} )
				end
				f3_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
					button_ref = "button_primary"
				} )
				if f16_local0 == FRIENDS.TabIDs.FRIENDS then
					f3_arg0._activeTabWidget = MenuBuilder.BuildRegisteredType( "SocialFriendsMenu", {
						controllerIndex = f16_arg1,
						buttonHelperBar = f3_arg0.HelperBar
					} )
					f3_arg0._friendsTabHelperAdded = true
					f3_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
						side = "left",
						button_ref = "button_primary",
						priority = 2,
						helper_text = Engine[0xED84C33EC5F01EA]( 0x7D9DC9E3291E103 )
					} )
				elseif f16_local0 == FRIENDS.TabIDs.PRIVATE_PARTY then
					f3_arg0._activeTabWidget = MenuBuilder.BuildRegisteredType( "SocialPartyMenu", {
						controllerIndex = f16_arg1,
						helpbar = f3_arg0.HelperBar
					} )
					f3_arg0._activeTabWidget.UpdateLeavePartyButtonHelper = f3_arg0
					f3_arg0._activeTabWidget:processEvent( {
						name = "update_social_party"
					} )
					f3_arg0._partyTabHelperAdded = true
					f3_arg0._usesPlayerGrid = false
				elseif f16_local0 == FRIENDS.TabIDs.REGIMENTS then
					f3_arg0._activeTabWidget = MenuBuilder.BuildRegisteredType( "SocialRegimentsMenu", {
						controllerIndex = f16_arg1,
						menu = f3_arg0
					} )
					if f3_arg0._activeTabWidget._activeClanID then
						f3_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
							side = "left",
							button_ref = "button_left_trigger",
							priority = 20,
							helper_text = Engine[0xED84C33EC5F01EA]( 0xB569B529170EA35 )
						} )
					else
						f3_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
							side = "left",
							button_ref = "button_left_trigger",
							helper_text = nil
						} )
					end
					if FRIENDS.GetCurrentClanTagType( f16_arg1 ) == ClanTagType.CUSTOM then
						f3_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
							side = "left",
							button_ref = "button_right_trigger",
							priority = 30,
							helper_text = Engine[0xED84C33EC5F01EA]( 0x6A9FDA7D58D16C3 )
						} )
						f3_arg0._setClanTagPromptAdded = true
					end
					f3_arg0._regimentsHelpersAdded = true
					f3_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
						side = "left",
						button_ref = "button_primary",
						priority = 2,
						helper_text = Engine[0xED84C33EC5F01EA]( 0x7D9DC9E3291E103 )
					} )
					f3_arg0._usesPlayerGrid = false
					f3_arg0.setRegimentsDefault = nil
				elseif f16_local0 == FRIENDS.TabIDs.GROUPS then
					f3_arg0._activeTabWidget = MenuBuilder.BuildRegisteredType( "SocialGroupsMenu", {
						controllerIndex = f16_arg1
					} )
					f3_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
						side = "left",
						button_ref = "button_primary",
						priority = 2,
						helper_text = Engine[0xED84C33EC5F01EA]( 0x7D9DC9E3291E103 )
					} )
				elseif f16_local0 == FRIENDS.TabIDs.RECENT_PLAYERS then
					f3_arg0._activeTabWidget = MenuBuilder.BuildRegisteredType( "SocialRecentMenu", {
						controllerIndex = f16_arg1
					} )
					f3_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
						side = "left",
						button_ref = "button_primary",
						priority = 2,
						helper_text = Engine[0xED84C33EC5F01EA]( 0x7D9DC9E3291E103 )
					} )
				elseif f16_local0 == FRIENDS.TabIDs.SHARED_LOADOUTS then
					f3_arg0._activeTabWidget = MenuBuilder.BuildRegisteredType( "SharedLoadoutPreview", {
						controllerIndex = f16_arg1
					} )
					f3_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
						side = "left",
						button_ref = "button_primary",
						priority = 2,
						helper_text = Engine[0xED84C33EC5F01EA]( 0x7D9DC9E3291E103 )
					} )
					f3_arg0._usesPlayerGrid = false
				elseif f16_local0 == FRIENDS.TabIDs.HUB then
					f3_arg0._activeTabWidget = MenuBuilder.BuildRegisteredType( "SocialMenuHub", {
						controllerIndex = f16_arg1
					} )
					f3_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
						side = "left",
						button_ref = "button_primary",
						priority = 2,
						helper_text = Engine[0xED84C33EC5F01EA]( 0x7D9DC9E3291E103 )
					} )
				elseif f16_local0 == FRIENDS.TabIDs.SHOWCASE then
					f3_arg0._activeTabWidget = MenuBuilder.BuildRegisteredType( "SocialMenuShowcase", {
						controllerIndex = f16_arg1
					} )
				else
					assert( false )
				end
				Engine[0xC4146BA76D0F982]( SOUND_SETS.default.tabHighlight )
				f3_arg0:addElement( f3_arg0._activeTabWidget )
				if CONDITIONS.IsPC() then
					f3_arg0._activeTabWidget:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
				end
				f3_arg0._activeTabWidget._socialMenu = f3_arg0
				if f3_arg0._activeTabWidget.SetupButtonBinds then
					f3_arg0._activeTabWidget.SetupButtonBinds()
				end
				if CONDITIONS.IsNewSocialScreenEnabled() then
					f3_arg0.HelperBar:SetVisible( false )
				end
				if not CONDITIONS.IsNewSocialScreenEnabled() and f3_arg0._usesPlayerGrid then
					local f16_local1 = f3_arg0._activeTabWidget:GetPlayerGrid()
					f16_local1.showOfflineFriends = false
					local f16_local2 = function ()
						FRIENDS.InitPlayerRequestData( f16_arg0 )
						f16_arg0:AddScrollbar( f16_arg0 )
						f16_arg0( f16_arg0 )
						if f16_arg0 ~= FocusType.MouseOver then
							f16_arg0._activeTabWidget:processEvent( {
								name = "gain_focus"
							} )
						end
					end
					
					f3_arg0( f3_arg0 )
					local f16_local3 = nil
					local f16_local4 = true
					if f3_arg0.activeTabID == FRIENDS.TabIDs.RECENT_PLAYERS then
						f16_local3 = "USERLISTS"
					else
						f16_local3 = "FRIENDS_LIST"
					end
					LUI.DeferredFence.Attach( f16_local1, f16_arg1, f16_local3, LUI.DeferredFence.Criticality.LOW, LUI.DeferredFence.BackOutMethod.NONE, function ( f17_arg0, f17_arg1 )
						if not LUI.DeferredFence.IsFenceComplete( f17_arg1.fenceState ) then
							return 
						else
							f16_arg0()
						end
					end, f16_local4 )
				end
				if f16_local0 ~= FRIENDS.TabIDs.HUB and f16_arg2 ~= f3_arg0.activeTabIndex and f16_arg3 ~= FocusType.MouseOver then
					f3_arg0._activeTabWidget:processEvent( {
						name = "gain_focus"
					} )
				end
				f3_arg0.activeTabIndex = f16_arg2
			end
		end
		
		f3_local11( f3_local12, f3_local13 )
	end
	f3_local2.enableRefreshFriendsList = true
	f3_arg0.Tabs:SetDefaultFocus( f3_arg0._tabIDsToIndexes[f0_local0] )
	f3_arg0.Tabs:SetTabs( f3_local4 )
	f3_arg0:addEventHandler( "send_friend_request_complete", function ( f15_arg0, f15_arg1 )
		if f3_arg0._usesPlayerGrid then
			FRIENDS.RefreshData( f3_arg0._activeTabID, f3_arg0._activeTabWidget:GetPlayerGrid(), f3_arg0 )
		end
	end )
	f3_arg0:addEventHandler( "fetch_friend_data_complete", function ( f14_arg0, f14_arg1 )
		if f3_arg0._usesPlayerGrid then
			local f14_local0 = LUI.FlowManager.GetScopedData( f3_arg0 )
			f14_local0.enableRefreshFriendsList = true
		end
	end )
	f3_arg0.bindButton:addEventHandler( "button_alt2", function ( f13_arg0, f13_arg1 )
		if f3_arg0._activeTabWidget.ManageFriendsFunc then
			f3_arg0._activeTabWidget:ManageFriendsFunc( f3_arg0 )
		end
	end )
	f3_arg0.bindButton:addEventHandler( "button_secondary", function ( f12_arg0, f12_arg1 )
		ACTIONS.LeaveMenu( f12_arg0 )
	end )
	if CONDITIONS.IsUserSignedInBnet( f3_arg1 ) and not CONDITIONS.IsNewSocialScreenEnabled() then
		f3_arg0.PlayerDetailsAvailability.m_requireFocusType = FocusType.MouseOver
		f3_arg0.PlayerDetailsAvailability:setPriority( 100 )
		f3_arg0:RemoveElement( f3_arg0.PlayerDetailsAvailability )
		f3_arg0:addElement( f3_arg0.PlayerDetailsAvailability )
		f3_arg0.bindButton:addEventHandler( "button_left_stick", function ( f11_arg0, f11_arg1 )
			f3_arg0.PlayerDetailsAvailability:ChangeDropdownState( f3_arg0 )
			if f3_arg0.PlayerDetailsAvailability._dropdownState then
				ACTIONS.LoseFocus( f3_arg0, "SocialMenuLayout", f3_arg0 )
				ACTIONS.GainFocus( f3_arg0, "PlayerDetailsAvailability", f3_arg0 )
			else
				ACTIONS.LoseFocus( f3_arg0, "PlayerDetailsAvailability", f3_arg0 )
				f3_arg0._activeTabWidget:processEvent( {
					name = "gain_focus"
				} )
			end
		end )
	end
	if SOCIAL.CanUseOperatorsInBackground() then
		FrontEndScene.HideAllCharacters()
	end
	f3_arg0.bindButton:registerEventHandler( "button_secondary", function ( element, event )
		local f10_local0 = event.controller or f3_arg0
		ACTIONS.LeaveMenu( f3_arg0 )
		local f10_local1 = LUI.FlowManager.GetVisibleMenu()
		if f10_local1 then
			f10_local1:processEvent( {
				name = "closing_quick_access_menu",
				controllerIndex = f10_local0
			} )
		end
	end )
	f3_local5 = function ( f9_arg0 )
		local f9_local0 = FRIENDS.GetNotificationDataSourceByTab( f9_arg0 )
		local f9_local1 = f3_arg0.Tabs:GetTabAtIndex( f3_arg0._tabIDsToIndexes[f9_arg0] )
		if f9_local1 and f9_local1.SetBreadcrumb then
			local f9_local2
			if f9_local0 then
				f9_local2 = f9_local0:GetValue( f3_arg0 )
				if not f9_local2 then
				
				else
					local f9_local3
					if f9_local2 then
						f9_local3 = f9_local2
					else
						f9_local3 = 0 < f9_local2
					end
					f9_local1:SetBreadcrumb( f9_local3 )
				end
			end
			f9_local2 = 0
		end
	end
	
	f3_local6 = FRIENDS.GetNotificationDataSourceByTab( FRIENDS.TabIDs.FRIENDS )
	if f3_local6 then
		f3_arg0:SubscribeToModel( f3_local6:GetModel( f3_arg1 ), function ()
			f3_arg0( FRIENDS.TabIDs.FRIENDS )
		end )
	end
	if f3_arg0._tabIDsToIndexes[FRIENDS.TabIDs.PRIVATE_PARTY] ~= nil then
		f3_local7 = FRIENDS.GetNotificationDataSourceByTab( FRIENDS.TabIDs.PRIVATE_PARTY )
		if f3_local7 then
			f3_arg0:SubscribeToModel( f3_local7:GetModel( f3_arg1 ), function ()
				f3_arg0( FRIENDS.TabIDs.PRIVATE_PARTY )
			end )
		end
	end
	if f3_arg0._tabIDsToIndexes[FRIENDS.TabIDs.REGIMENTS] ~= nil and Dvar[0x9E5BE3B4BBA4E0E]( 0x7DEF3F9D98E43C1 ) then
		f3_local7 = FRIENDS.GetNotificationDataSourceByTab( FRIENDS.TabIDs.REGIMENTS )
		if f3_local7 then
			f3_arg0:SubscribeToModel( f3_local7:GetModel( f3_arg1 ), function ()
				f3_arg0( FRIENDS.TabIDs.REGIMENTS )
			end )
		end
	end
	if not CONDITIONS.IsNewSocialScreenEnabled() then
		ACTIONS.ScaleFullscreen( f3_arg0.Darken )
		ACTIONS.ScaleStretchAnchorFullscreen( f3_arg0.TabBacker )
		if not CONDITIONS.InGameSPOrFrontendMP() then
			ACTIONS.ScaleStretchAnchorFullscreen( f3_arg0.BackgroundImage )
		end
	elseif not CONDITIONS.InGameSPOrFrontendMP() then
		f3_arg0.BackgroundImage:SetVisible( false )
	end
	METRICS.RecordSocialMenuOpeningFlow( f3_arg1, f3_arg2.hasUsedShortcut == true )
	if CONDITIONS.IsNewSocialScreenEnabled() then
		if f3_arg0.LobbyMembersFooter then
			f3_arg0.LobbyMembersFooter:closeTree()
		end
		if f3_arg0.PlayerDetails then
			f3_arg0.PlayerDetails:closeTree()
		end
		if f3_arg0.PlayerDetailsAvailability then
			f3_arg0.PlayerDetailsAvailability:closeTree()
		end
		if f3_arg0.TabBacker then
			f3_arg0.TabBacker:closeTree()
		end
		if f3_arg0.WorldBlur then
			f3_arg0.WorldBlur:closeTree()
		end
		if f3_arg0.Darken then
			f3_arg0.Darken:closeTree()
		end
		if f3_arg0.MenuTitle then
			f3_arg0.MenuTitle:closeTree()
		end
		f3_arg0.LobbyMembersFooter = nil
		f3_arg0.PlayerDetails = nil
		f3_arg0.PlayerDetailsAvailability = nil
		f3_arg0.TabBacker = nil
		f3_arg0.WorldBlur = nil
		f3_arg0.Darken = nil
		f3_arg0.MenuTitle = nil
		f3_arg0.Tabs:SetAlignment( LUI.Alignment.Center )
	else
		f3_arg0.MenuTitle:SetupBackButton( f3_arg1 )
		f3_arg0.MenuTitle.GlobalPlayerInfo:DeactivateSocialButton( true )
	end
	LUI.DeferredFence.Attach( f3_arg0, f3_arg1, "FRIENDS_LIST", LUI.DeferredFence.Criticality.MINOR, LUI.DeferredFence.BackOutMethod.NONE, function ( f5_arg0, f5_arg1 )
		
	end )
	LUI.DeferredFence.Attach( f3_arg0, f3_arg1, "USERLISTS", LUI.DeferredFence.Criticality.MINOR, LUI.DeferredFence.BackOutMethod.NONE, function ( f4_arg0, f4_arg1 )
		
	end )
	f0_local0( f3_arg0, f3_arg1 )
end

function SocialMenu( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "SocialMenu"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	self.HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	self.HelperBar.id = "HelperBar"
	self.HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
	self.HelperBar:setPriority( 10 )
	self:addElement( self.HelperBar )
	local f1_local2 = self
	local f1_local3 = nil
	if CONDITIONS.IsNewSocialScreenEnabled() then
		f1_local3 = MenuBuilder.BuildRegisteredType( "SocialMenuCommon", {
			controllerIndex = f1_local1
		} )
		f1_local3.id = "SocialMenuCommon"
		f1_local3:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1920, 0, _1080p * 1080 )
		self:addElement( f1_local3 )
		self.SocialMenuCommon = f1_local3
	end
	local WorldBlur = nil
	
	WorldBlur = MenuBuilder.BuildRegisteredType( "WorldBlur", {
		worldBlur = 1,
		controllerIndex = f1_local1
	} )
	WorldBlur.id = "WorldBlur"
	WorldBlur:SetAnchorsAndPosition( 0, 0, 0, 0, _1080p * 2, 0, 0, 0 )
	self:addElement( WorldBlur )
	self.WorldBlur = WorldBlur
	
	local Darken = nil
	
	Darken = LUI.UIImage.new()
	Darken.id = "Darken"
	Darken:SetRGBFromTable( SWATCHES.genericMenu.blackBackground, 0 )
	Darken:SetAlpha( 0.5, 0 )
	self:addElement( Darken )
	self.Darken = Darken
	
	local f1_local6 = nil
	if not CONDITIONS.InGameSPOrFrontendMP() then
		f1_local6 = LUI.UIImage.new()
		f1_local6.id = "BackgroundImage"
		f1_local6:setImage( RegisterMaterial( 0xB9696CBCB342728 ), 0 )
		self:addElement( f1_local6 )
		self.BackgroundImage = f1_local6
	end
	local TabBacker = nil
	
	TabBacker = MenuBuilder.BuildRegisteredType( "TabBacker", {
		controllerIndex = f1_local1
	} )
	TabBacker.id = "TabBacker"
	TabBacker:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 160 )
	self:addElement( TabBacker )
	self.TabBacker = TabBacker
	
	local MenuTitle = nil
	
	MenuTitle = MenuBuilder.BuildRegisteredType( "MenuTitle", {
		controllerIndex = f1_local1
	} )
	MenuTitle.id = "MenuTitle"
	MenuTitle.MenuTitle:setText( ToUpperCase( "" ), 0 )
	MenuTitle:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1920, 0, _1080p * 100 )
	self:addElement( MenuTitle )
	self.MenuTitle = MenuTitle
	
	local f1_local9 = nil
	if CONDITIONS.IsUserSignedInDemonware( f1_local1 ) then
		f1_local9 = MenuBuilder.BuildRegisteredType( "MPPlayerDetails", {
			controllerIndex = f1_local1
		} )
		f1_local9.id = "PlayerDetails"
		f1_local9:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -596, _1080p * -96, _1080p * 54, _1080p * 114 )
		self:addElement( f1_local9 )
		self.PlayerDetails = f1_local9
	end
	local f1_local10 = nil
	if CONDITIONS.IsUserSignedInBnet( f1_local1 ) then
		f1_local10 = MenuBuilder.BuildRegisteredType( "PlayerDetailsAvailability", {
			controllerIndex = f1_local1
		} )
		f1_local10.id = "PlayerDetailsAvailability"
		f1_local10:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1624, _1080p * 1824, _1080p * 131, _1080p * 271 )
		self:addElement( f1_local10 )
		self.PlayerDetailsAvailability = f1_local10
	end
	local f1_local11 = nil
	if CONDITIONS.InFrontend() then
		f1_local11 = MenuBuilder.BuildRegisteredType( "LobbyMembersFooter", {
			controllerIndex = f1_local1
		} )
		f1_local11.id = "LobbyMembersFooter"
		f1_local11:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 150 )
		self:addElement( f1_local11 )
		self.LobbyMembersFooter = f1_local11
	end
	local f1_local12 = nil
	if not CONDITIONS.IsNewSocialScreenEnabled() then
		f1_local12 = LUI.TabManager.new( {
			spacing = 4,
			wrap = true,
			tabHeight = _1080p * 52,
			buildTab = function ()
				return MenuBuilder.BuildRegisteredType( "SubMenuTab", {
					controllerIndex = menu
				} )
			end,
			controllerIndex = f1_local1
		} )
		f1_local12.id = "Tabs"
		f1_local12:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 90, _1080p * 986, _1080p * 108, _1080p * 160 )
		self:addElement( f1_local12 )
		self.Tabs = f1_local12
	end
	self.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_primary",
		priority = 2,
		helper_text = Engine[0xED84C33EC5F01EA]( 0x7D9DC9E3291E103 )
	} )
	if not self.bindButton then
		local f1_local13 = LUI.UIBindButton.new()
		f1_local13.id = "selfBindButton"
		self:addElement( f1_local13 )
		self.bindButton = f1_local13
	end
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "SocialMenu", SocialMenu )
LUI.FlowManager.RegisterStackPopBehaviour( "SocialMenu", f0_local7 )
LockTable( _M )
