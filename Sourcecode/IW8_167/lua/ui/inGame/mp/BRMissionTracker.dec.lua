-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:52
module( ..., package.seeall )
local f0_local0 = function ( f25_arg0, f25_arg1 )
	ACTIONS.AnimateSequence( f25_arg0, f25_arg1 )
	f25_arg0._currentAnimState = f25_arg1
end

local f0_local1 = function ( f24_arg0 )
	f24_arg0:dispatchEventToParent( {
		immediate = true,
		name = "check_for_new_mission"
	} )
end

local f0_local2 = function ( f23_arg0 )
	f23_arg0.ObjectiveInfo:Update()
	f23_arg0.SubObjectiveInfo:Update()
end

local f0_local3 = function ( f22_arg0 )
	local f22_local0 = false
	local f22_local1 = DataModel.JJEHAEBDF( f22_arg0.missionIdModel )
	local f22_local2 = {}
	if f22_local1 ~= nil and 0 < f22_local1 then
		f22_local2.ID = f22_local1
		f22_local2.ref = StringTable.DIFCHIGDFB( CSV.BRMissions.file, CSV.BRMissions.cols.index, f22_local1, CSV.BRMissions.cols.ref )
		f22_local2.title = StringTable.DIFCHIGDFB( CSV.BRMissions.file, CSV.BRMissions.cols.index, f22_local1, CSV.BRMissions.cols.title )
		f22_local2.description = StringTable.DIFCHIGDFB( CSV.BRMissions.file, CSV.BRMissions.cols.index, f22_local1, CSV.BRMissions.cols.description )
		f22_local2.descriptionParam = StringTable.DIFCHIGDFB( CSV.BRMissions.file, CSV.BRMissions.cols.index, f22_local1, CSV.BRMissions.cols.descriptionParam )
		f22_local2.paramText = StringTable.DIFCHIGDFB( CSV.BRMissions.file, CSV.BRMissions.cols.index, f22_local1, CSV.BRMissions.cols.paramText )
		f22_local2.icon = StringTable.DIFCHIGDFB( CSV.BRMissions.file, CSV.BRMissions.cols.index, f22_local1, CSV.BRMissions.cols.icon )
		local f22_local3 = StringTable.DIFCHIGDFB( CSV.BRMissions.file, CSV.BRMissions.cols.index, f22_local1, CSV.BRMissions.cols.reward )
		local f22_local4 = BRCONTRACTS.DEFAULT_TIER
		if f22_arg0.rewardTierModel then
			f22_local4 = DataModel.JJEHAEBDF( f22_arg0.rewardTierModel )
		end
		local f22_local5 = BRCONTRACTS.GetMissionRewardData( f22_local3, f22_local4 )
		local f22_local6 = BRCONTRACTS.GetMissionRewardCash( f22_local3, f22_local4 )
		if not f22_local6 or f22_local6 == "" then
			f22_local6 = 0
		end
		f22_local2.rewardCash = f22_local6
		if 0 < #f22_local5 then
			f22_local2.rewardData = f22_local5
		end
		f22_local2.hasTimer = StringTable.DIFCHIGDFB( CSV.BRMissions.file, CSV.BRMissions.cols.index, f22_local1, CSV.BRMissions.cols.hasTimer )
		f22_local2.paramKey = StringTable.DIFCHIGDFB( CSV.BRMissions.file, CSV.BRMissions.cols.index, f22_local1, CSV.BRMissions.cols.paramKey )
		f22_local2.useDescParamInParamText = StringTable.DIFCHIGDFB( CSV.BRMissions.file, CSV.BRMissions.cols.index, f22_local1, CSV.BRMissions.cols.useDescParamInParamText )
		f22_local2.altTrackerText = StringTable.DIFCHIGDFB( CSV.BRMissions.file, CSV.BRMissions.cols.index, f22_local1, CSV.BRMissions.cols.altTrackerText )
		f22_local2.titleLocd = Engine.CBBHFCGDIC( f22_local2.title )
		if f22_local2.paramKey ~= nil and f22_local2.paramKey ~= "" then
			f22_local2.currentParam = DataModel.JJEHAEBDF( f22_arg0.missionParamModel )
		end
		local f22_local7 = StringTable.DIFCHIGDFB( CSV.BRMissions.file, CSV.BRMissions.cols.index, f22_local1, CSV.BRMissions.cols.overrideColor )
		if f22_local7 and f22_local7 ~= "" then
			LUI.ApplySwatchToWidgets( {
				widgetsToApplySwatch = f22_arg0._widgetsToApplyCustomSwatch,
				swatchInt = GetSwatchIntColor( nil, f22_local7 )
			} )
		else
			LUI.ApplySwatchToWidgets( {
				widgetsToApplySwatch = f22_arg0._widgetsToApplyCustomSwatch,
				swatchTable = BRCONTRACTS.DEFAULT_SWATCH_COLOR
			} )
		end
		f22_arg0.ObjectiveInfo:SetMissionData( f22_local2 )
		f22_local0 = true
	end
	return f22_local0
end

function PostLoadFunc( f10_arg0, f10_arg1 )
	local f10_local0 = "HideObjective"
	local f10_local1 = "ContractAcceptedTracker"
	f10_arg0.missionParamModel = DataSources.inGame.player.BRData.missions.param:GetModel( f10_arg1 )
	f10_arg0.missionIdModel = DataSources.inGame.player.BRData.missions.missionId:GetModel( f10_arg1 )
	f10_arg0.rewardTierModel = DataSources.inGame.player.BRData.missions.rewardTier:GetModel( f10_arg1 )
	f10_arg0._controllerIndex = f10_arg1
	f10_arg0._widgetsToApplyCustomSwatch = {
		f10_arg0.ObjectiveInfo.TextTitle
	}
	f10_arg0.UpdateMissionData = f0_local0
	f10_arg0.UpdateChildren = f0_local0
	f10_arg0._checkForNewMissionCallback = f0_local0
	f10_arg0.AnimAndSaveAnimInfo = f0_local0
	f10_arg0:AnimAndSaveAnimInfo( f10_local0 )
	local f10_local2 = function ( f21_arg0, f21_arg1 )
		local f21_local0 = f10_arg0:UpdateMissionData()
		local f21_local1
		if f21_arg1 then
			f21_local1 = f21_arg1
		else
			f21_local1 = f10_arg0._currentAnimState ~= f10_arg0
		end
		local f21_local2 = CONDITIONS.IsSpectating( f10_arg0 )
		if f21_local2 then
			if f21_local0 then
				f21_local2 = f21_local0
			else
				f21_local2 = f10_arg0._currentAnimState ~= f10_arg0
			end
		end
		if not f21_local0 then
			f10_arg0.ObjectiveInfo:ClearTitle()
			f10_arg0:AnimAndSaveAnimInfo( f10_arg0 )
		elseif f21_local1 then
			f10_arg0:AnimAndSaveAnimInfo( f10_arg0 )
			ACTIONS.AnimateSequence( f10_arg0.BRMissionEmpty, "ContractAcceptTier" )
			ACTIONS.AnimateSequence( f10_arg0.ObjectiveInfo, "ContractAcceptedObjective" )
		elseif f21_local2 then
			f10_arg0:AnimAndSaveAnimInfo( f10_arg0 )
			ACTIONS.AnimateSequence( f10_arg0.BRMissionEmpty, "ContractAcceptTier" )
			ACTIONS.AnimateSequence( f10_arg0.ObjectiveInfo, "ContractAcceptedObjective" )
			f10_arg0._currentAnimState = f10_arg0
		end
	end
	
	f10_arg0.UpdateTracker = f10_local2
	if f10_arg0.missionIdModel then
		f10_arg0:SubscribeToModel( f10_arg0.missionIdModel, f10_local2 )
	end
	if f10_arg0.rewardTierModel then
		f10_arg0:SubscribeToModel( f10_arg0.rewardTierModel, f10_local2 )
	end
	if CONDITIONS.IsUsingOvertimeGameplayTimer() then
		f10_arg0:SubscribeToModel( DataSources.inGame.MP.showOvertimeGameplayTimer:GetModel( f10_arg1 ), f10_local2 )
	end
	f10_arg0:registerEventHandler( "tracker_contract_accept", function ( element, event )
		element:AnimAndSaveAnimInfo( f10_arg0 )
		ACTIONS.AnimateSequence( element.BRMissionEmpty, "ContractAcceptTier" )
		ACTIONS.AnimateSequence( element.ObjectiveInfo, "ContractAcceptedObjective" )
	end )
	f10_arg0:registerEventHandler( "tracker_contract_update", function ( element, event )
		ACTIONS.AnimateSequence( element.ObjectiveInfo, "ContractUpdateObjective" )
	end )
	f10_arg0:registerEventHandler( "tracker_contract_success", function ( element, event )
		element:AnimAndSaveAnimInfo( "ContractCompleteIntroTracker" )
		ACTIONS.AnimateSequence( element.BRMissionEmpty, "ContractCompleteIntroTier" )
		ACTIONS.AnimateSequence( element.ObjectiveInfo, "ContractCompletedObjective" )
	end )
	f10_arg0:registerEventHandler( "tracker_contract_hide_anim_completed", function ( element, event )
		element:AnimAndSaveAnimInfo( "ContractCompleteOutroTracker" )
		local f17_local0 = "ContractCompleteOutroTier"
		if CONDITIONS.IsBloodMoney() or CONDITIONS.IsRiskGametype() or CONDITIONS.IsWZRatRace() or CONDITIONS.IsBRKingSlayer() or CONDITIONS.IsBRX1Variant() then
			f17_local0 = "Hide"
		end
		ACTIONS.AnimateSequence( element.BRMissionEmpty, f17_local0 )
	end )
	f10_arg0:registerEventHandler( "tracker_contract_fail", function ( element, event )
		element:AnimAndSaveAnimInfo( "ContractFailTracker" )
		ACTIONS.AnimateSequence( element.BRMissionEmpty, "ContractFailTier" )
	end )
	f10_arg0:registerEventHandler( "check_for_new_mission", function ( element, event )
		element:UpdateTracker( true )
	end )
	f10_arg0:registerOmnvarHandler( "ui_session_state", function ( f14_arg0, f14_arg1 )
		f14_arg0:UpdateChildren()
	end )
	f10_arg0:registerOmnvarHandler( "playerstate_client_changed", function ( f13_arg0, f13_arg1 )
		f13_arg0:UpdateChildren()
	end )
	f10_arg0:SubscribeToModel( DataSources.inGame.player.BRData.PlayerStatusIsInGulag:GetModel( f10_arg1 ), function ()
		f10_arg0:UpdateChildren()
	end )
	f10_arg0:SubscribeToModel( DataSources.inGame.player.spawnNotify:GetModel( f10_arg1 ), function ()
		f10_arg0:UpdateTracker( true )
	end )
	if IsLanguageRussian() or IsLanguagePortuguese() or IsLanguageSpanish() or IsLanguageJapanese() or IsLanguageItalian() then
		ACTIONS.AnimateSequence( f10_arg0, "RUPTESJPIT" )
	end
end

function BRMissionTracker( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 270 * _1080p, 0, 185 * _1080p )
	self.id = "BRMissionTracker"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local SubObjectiveInfo = nil
	
	SubObjectiveInfo = MenuBuilder.BuildRegisteredType( "BRMissionTrackerSubObjectiveInfo", {
		controllerIndex = f1_local1
	} )
	SubObjectiveInfo.id = "SubObjectiveInfo"
	SubObjectiveInfo:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 270, _1080p * 91, _1080p * 194 )
	self:addElement( SubObjectiveInfo )
	self.SubObjectiveInfo = SubObjectiveInfo
	
	local ObjectiveInfo = nil
	
	ObjectiveInfo = MenuBuilder.BuildRegisteredType( "BRMissionTrackerObjectiveInfo", {
		controllerIndex = f1_local1
	} )
	ObjectiveInfo.id = "ObjectiveInfo"
	ObjectiveInfo:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 270, 0, _1080p * 90 )
	self:addElement( ObjectiveInfo )
	self.ObjectiveInfo = ObjectiveInfo
	
	local BRMissionEmpty = nil
	
	BRMissionEmpty = MenuBuilder.BuildRegisteredType( "BRMissionEmpty", {
		controllerIndex = f1_local1
	} )
	BRMissionEmpty.id = "BRMissionEmpty"
	BRMissionEmpty:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 270, 0, _1080p * 68 )
	self:addElement( BRMissionEmpty )
	self.BRMissionEmpty = BRMissionEmpty
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	local f1_local6 = nil
	ObjectiveInfo:RegisterAnimationSequence( "HideObjective", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	BRMissionEmpty:RegisterAnimationSequence( "HideObjective", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.HideObjective = function ()
		menu:AnimateSequence( "HideObjective" )
		menu:AnimateSequence( "HideObjective" )
	end
	
	local f1_local7 = nil
	ObjectiveInfo:RegisterAnimationSequence( "ShowObjective", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 400,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	BRMissionEmpty:RegisterAnimationSequence( "ShowObjective", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ShowObjective = function ()
		menu:AnimateSequence( "ShowObjective" )
		menu:AnimateSequence( "ShowObjective" )
	end
	
	local f1_local8 = nil
	ObjectiveInfo:RegisterAnimationSequence( "ContractAcceptedTracker", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = 2700,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 50,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	BRMissionEmpty:RegisterAnimationSequence( "ContractAcceptedTracker", {
		{
			value = 1,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ContractAcceptedTracker = function ()
		menu:AnimateSequence( "ContractAcceptedTracker" )
		menu:AnimateSequence( "ContractAcceptedTracker" )
	end
	
	local f1_local9 = nil
	ObjectiveInfo:RegisterAnimationSequence( "ContractFailTracker", {
		{
			value = 1,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	BRMissionEmpty:RegisterAnimationSequence( "ContractFailTracker", {
		{
			value = 0,
			duration = 2200,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 500,
			property = TWEEN_PROPERTY.Alpha,
			onComplete = f0_local0
		}
	} )
	self._sequences.ContractFailTracker = function ()
		menu:AnimateSequence( "ContractFailTracker" )
		menu:AnimateSequence( "ContractFailTracker" )
	end
	
	local f1_local10 = nil
	ObjectiveInfo:RegisterAnimationSequence( "ContractCompleteIntroTracker", {
		{
			value = 1,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ContractCompleteIntroTracker = function ()
		menu:AnimateSequence( "ContractCompleteIntroTracker" )
	end
	
	local f1_local11 = nil
	ObjectiveInfo:RegisterAnimationSequence( "ContractCompleteOutroTracker", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	BRMissionEmpty:RegisterAnimationSequence( "ContractCompleteOutroTracker", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 500,
			property = TWEEN_PROPERTY.Alpha,
			onComplete = f0_local0
		}
	} )
	self._sequences.ContractCompleteOutroTracker = function ()
		menu:AnimateSequence( "ContractCompleteOutroTracker" )
		menu:AnimateSequence( "ContractCompleteOutroTracker" )
	end
	
	self._sequences.RUPTESJPIT = function ()
		
	end
	
	PostLoadFunc( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "BRMissionTracker", BRMissionTracker )
LockTable( _M )
