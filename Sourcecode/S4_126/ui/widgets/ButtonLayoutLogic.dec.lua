-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
local f0_local0 = "options.buttonLayout"
local f0_local1 = GetIntForColor( SWATCHES.layouts.oldLayout )
local f0_local2 = GetIntForColor( SWATCHES.layouts.newLayout )
local f0_local3 = {}
local f0_local4 = function ( f16_arg0, f16_arg1 )
	local f16_local0 = Engine[0x74423E76DECE3E4]()
	local f16_local1 = f16_arg0.name
	local f16_local2
	if f16_local0 then
		f16_local2 = f16_arg0.leftTriggerSP
		if not f16_local2 then
		
		else
			local f16_local3
			if f16_local0 then
				f16_local3 = f16_arg0.leftShoulderSP
				if not f16_local3 then
				
				else
					local f16_local4
					if f16_local0 then
						f16_local4 = f16_arg0.rightTriggerSP
						if not f16_local4 then
						
						else
							local f16_local5
							if f16_local0 then
								f16_local5 = f16_arg0.rightShoulderSP
								if not f16_local5 then
								
								else
									local f16_local6 = f16_arg0.cfg
									if f16_arg1 then
										local f16_local7 = f16_local2
										f16_local2 = f16_local3
										f16_local3 = f16_local7
										f16_local7 = f16_local4
										f16_local4 = f16_local5
										f16_local5 = f16_local7
										f16_local1 = f16_local1 .. "_alt"
										f16_local6 = f16_local6 .. "_alt"
									end
									return {
										cfg = f16_local6,
										layoutName = f16_local1,
										leftTrigger = f16_local2,
										leftShoulder = f16_local3,
										rightTrigger = f16_local4,
										rightShoulder = f16_local5
									}
								end
							end
							f16_local5 = f16_arg0.rightShoulder
						end
					end
					f16_local4 = f16_arg0.rightTrigger
				end
			end
			f16_local3 = f16_arg0.leftShoulder
		end
	end
	f16_local2 = f16_arg0.leftTrigger
end

local f0_local5 = function ( f15_arg0, f15_arg1 )
	assert( 0 < #f15_arg0 )
	for f15_local3, f15_local4 in ipairs( f15_arg0 ) do
		if f15_arg1 == f15_local4 then
			return f15_local3
		end
	end
	assert( false, "Entry not found" )
end

local f0_local6 = function ( f14_arg0, f14_arg1, f14_arg2 )
	local f14_local0 = #f0_local0 - 1
	local f14_local1 = OPTIONS.GetCurrentCSVButtonLayouts( f14_arg0.isBR )
	for f14_local2 = 0, f14_local0, 1 do
		local f14_local5 = CSV.ReadRow( f14_local1, f14_local2 )
		local f14_local6 = f0_local0[f14_local2 + 1]
		local f14_local7 = f0_local0( f14_local5, f14_arg2 )
		f14_local6.ref:SetValue( f14_arg1, f14_local7.cfg )
		f14_local6.name:SetValue( f14_arg1, Engine[0xED84C33EC5F01EA]( f14_local7.layoutName ) )
		f14_local6.leftTrigger:SetValue( f14_arg1, Engine[0xED84C33EC5F01EA]( f14_local7.leftTrigger ) )
		f14_local6.rightTrigger:SetValue( f14_arg1, Engine[0xED84C33EC5F01EA]( f14_local7.rightTrigger ) )
		f14_local6.leftShoulder:SetValue( f14_arg1, Engine[0xED84C33EC5F01EA]( f14_local7.leftShoulder ) )
		f14_local6.rightShoulder:SetValue( f14_arg1, Engine[0xED84C33EC5F01EA]( f14_local7.rightShoulder ) )
	end
end

LUI.AddButtonLayoutLogic = function ( f1_arg0, f1_arg1, f1_arg2 )
	f0_local0 = {}
	WipeControllerModelsAtPath( f0_local0 )
	local f1_local0 = StringTable[0x2DCF0973239E909]( CSV.stickLayouts.file, CSV.stickLayouts.cols.cfg, Engine[0x7B17D94988FD5D0]( "gpadSticksConfig", f1_arg1 ), CSV.stickLayouts.cols.swapStickButtons ) == "1"
	local f1_local1, f1_local2, f1_local3, f1_local4 = nil
	f1_arg0.isBR = f1_arg2.isBR
	if f1_arg0.isBR then
		f1_local1 = Engine[0x7B17D94988FD5D0]( "gpadBRButtonsConfig", f1_arg1 )
		f1_local2 = CSV.brButtonLayouts
		f1_local3 = OPTIONS.brButtonLayoutStrings
		f1_local4 = OPTIONS.GetBRButtonLayoutLabels
	else
		f1_local1 = Engine[0x7B17D94988FD5D0]( "gpadButtonsConfig", f1_arg1 )
		f1_local2 = CSV.buttonLayouts
		f1_local3 = OPTIONS.buttonLayoutStrings
		f1_local4 = OPTIONS.GetButtonLayoutLabels
	end
	local f1_local5 = string.match( f1_local1, "_alt$" ) ~= nil
	local f1_local6 = function ( f11_arg0, f11_arg1 )
		local f11_local0 = CSV.ReadRow( f1_arg0, f11_arg0 )
		local f11_local1 = CSV.ReadRow( f1_arg0, 0 )
		local f11_local2 = f1_arg0 .. "." .. f11_arg0
		local f11_local3 = Engine[0x74423E76DECE3E4]()
		local f11_local4 = Engine[0xCA085C21FCBD7CA]()
		local f11_local5 = f11_local0.select
		if f11_local3 then
			f11_local5 = f11_local0.selectSP
		elseif f11_local4 then
			f11_local5 = f11_local0.selectCP
		end
		local f11_local6 = f11_local0.leftStick
		local f11_local7 = f11_local0.rightStick
		if f1_arg0 then
			f11_local6 = f11_local0.rightStick
			f11_local7 = f11_local0.leftStick
		end
		local f11_local8 = f1_arg0( f11_local0, f1_arg0 )
		local f11_local9 = f1_arg0
		local f11_local10 = f1_arg0
		local f11_local11 = function ( f12_arg0 )
			return function ()
				local f13_local0 = LUI.FlowManager.GetVisibleMenu()
				if f13_local0 and (f13_local0.id == "ButtonLayout" or f13_local0.id == "BRButtonLayout") then
					return nil
				else
					local f13_local1 = f12_arg0 and f12_arg0 .. "SP" or f12_arg0
					local f13_local2 = f12_arg0( f12_arg0, f12_arg0 )
					if f12_arg0[f13_local1] == f13_local2[f12_arg0] then
						return f12_arg0
					else
						return f12_arg0
					end
				end
			end
			
		end
		
		local f11_local12 = LUI.DataSourceInControllerModel.new( f11_local2 .. ".leftTrigger", Engine[0xED84C33EC5F01EA]( f11_local8.leftTrigger ) )
		local f11_local13 = LUI.DataSourceInControllerModel.new( f11_local2 .. ".leftShoulder", Engine[0xED84C33EC5F01EA]( f11_local8.leftShoulder ) )
		local f11_local14 = LUI.DataSourceInControllerModel.new( f11_local2 .. ".rightTrigger", Engine[0xED84C33EC5F01EA]( f11_local8.rightTrigger ) )
		local f11_local15 = LUI.DataSourceInControllerModel.new( f11_local2 .. ".rightShoulder", Engine[0xED84C33EC5F01EA]( f11_local8.rightShoulder ) )
		local f11_local16 = {
			ref = LUI.DataSourceInControllerModel.new( f11_local2 .. ".ref", f11_local8.cfg ),
			name = LUI.DataSourceInControllerModel.new( f11_local2 .. ".name", Engine[0xED84C33EC5F01EA]( f11_local8.layoutName ) ),
			leftStick = LUI.DataSourceInControllerModel.new( f11_local2 .. ".leftStick", Engine[0xED84C33EC5F01EA]( f11_local6 ) )
		}
		local f11_local17 = LUI.DataSourceInControllerModel.new
		local f11_local18 = f11_local2 .. ".leftStickColor"
		local f11_local19
		if f11_local1.leftStick == f11_local0.leftStick and not f11_local9 then
			f11_local19 = f11_local9
		else
			f11_local19 = f11_local10
		end
		f11_local16.leftStickColor = f11_local17( f11_local18, f11_local19 )
		f11_local16.rightStick = LUI.DataSourceInControllerModel.new( f11_local2 .. ".rightStick", Engine[0xED84C33EC5F01EA]( f11_local7 ) )
		f11_local17 = LUI.DataSourceInControllerModel.new
		f11_local18 = f11_local2 .. ".rightStickColor"
		if f11_local1.rightStick == f11_local0.rightStick and not f11_local9 then
			f11_local19 = f11_local9
		else
			f11_local19 = f11_local10
		end
		f11_local16.rightStickColor = f11_local17( f11_local18, f11_local19 )
		f11_local16.leftTrigger = f11_local12
		f11_local16.leftTriggerColor = f11_local12:Filter( "leftTriggerColor", f11_local11( "leftTrigger" ) )
		f11_local16.rightTrigger = f11_local14
		f11_local16.rightTriggerColor = f11_local14:Filter( "rightTriggerColor", f11_local11( "rightTrigger" ) )
		f11_local16.leftShoulder = f11_local13
		f11_local16.leftShoulderColor = f11_local13:Filter( "leftShoulderColor", f11_local11( "leftShoulder" ) )
		f11_local16.rightShoulder = f11_local15
		f11_local16.rightShoulderColor = f11_local15:Filter( "rightShoulderColor", f11_local11( "rightShoulder" ) )
		f11_local16.primary = LUI.DataSourceInControllerModel.new( f11_local2 .. ".primary", Engine[0xED84C33EC5F01EA]( f11_local0.primary ) )
		f11_local17 = LUI.DataSourceInControllerModel.new
		f11_local18 = f11_local2 .. ".primaryColor"
		if f11_local1.primary == f11_local0.primary and not f11_local9 then
			f11_local19 = f11_local9
		else
			f11_local19 = f11_local10
		end
		f11_local16.primaryColor = f11_local17( f11_local18, f11_local19 )
		f11_local16.secondary = LUI.DataSourceInControllerModel.new( f11_local2 .. ".secondary", Engine[0xED84C33EC5F01EA]( f11_local0.secondary ) )
		f11_local17 = LUI.DataSourceInControllerModel.new
		f11_local18 = f11_local2 .. ".secondaryColor"
		if f11_local1.secondary == f11_local0.secondary and not f11_local9 then
			f11_local19 = f11_local9
		else
			f11_local19 = f11_local10
		end
		f11_local16.secondaryColor = f11_local17( f11_local18, f11_local19 )
		f11_local16.altOne = LUI.DataSourceInControllerModel.new( f11_local2 .. ".altOne", Engine[0xED84C33EC5F01EA]( f11_local0.altOne ) )
		f11_local17 = LUI.DataSourceInControllerModel.new
		f11_local18 = f11_local2 .. ".altOneColor"
		if f11_local1.altOne == f11_local0.altOne and not f11_local9 then
			f11_local19 = f11_local9
		else
			f11_local19 = f11_local10
		end
		f11_local16.altOneColor = f11_local17( f11_local18, f11_local19 )
		f11_local16.altTwo = LUI.DataSourceInControllerModel.new( f11_local2 .. ".altTwo", Engine[0xED84C33EC5F01EA]( f11_local0.altTwo ) )
		f11_local17 = LUI.DataSourceInControllerModel.new
		f11_local18 = f11_local2 .. ".altTwoColor"
		if f11_local1.altTwo == f11_local0.altTwo and not f11_local9 then
			f11_local19 = f11_local9
		else
			f11_local19 = f11_local10
		end
		f11_local16.altTwoColor = f11_local17( f11_local18, f11_local19 )
		f11_local16.dPad = LUI.DataSourceInControllerModel.new( f11_local2 .. ".dPad", Engine[0xED84C33EC5F01EA]( f11_local0.dPad ) )
		f11_local17 = LUI.DataSourceInControllerModel.new
		f11_local18 = f11_local2 .. ".dPadColor"
		if f11_local1.dPad == f11_local0.dPad and not f11_local9 then
			f11_local19 = f11_local9
		else
			f11_local19 = f11_local10
		end
		f11_local16.dPadColor = f11_local17( f11_local18, f11_local19 )
		f11_local16.dPadUp = LUI.DataSourceInControllerModel.new( f11_local2 .. ".dPadUp", Engine[0xED84C33EC5F01EA]( f11_local0.dPadUp ) )
		f11_local17 = LUI.DataSourceInControllerModel.new
		f11_local18 = f11_local2 .. ".dPadUpColor"
		if f11_local1.dPadUp == f11_local0.dPadUp and not f11_local9 then
			f11_local19 = f11_local9
		else
			f11_local19 = f11_local10
		end
		f11_local16.dPadUpColor = f11_local17( f11_local18, f11_local19 )
		f11_local16.dPadRight = LUI.DataSourceInControllerModel.new( f11_local2 .. ".dPadRight", Engine[0xED84C33EC5F01EA]( f11_local0.dPadRight ) )
		f11_local17 = LUI.DataSourceInControllerModel.new
		f11_local18 = f11_local2 .. ".dPadRightColor"
		if f11_local1.dPadRight == f11_local0.dPadRight and not f11_local9 then
			f11_local19 = f11_local9
		else
			f11_local19 = f11_local10
		end
		f11_local16.dPadRightColor = f11_local17( f11_local18, f11_local19 )
		f11_local16.dPadDown = LUI.DataSourceInControllerModel.new( f11_local2 .. ".dPadDown", Engine[0xED84C33EC5F01EA]( f11_local0.dPadDown ) )
		f11_local17 = LUI.DataSourceInControllerModel.new
		f11_local18 = f11_local2 .. ".dPadDownColor"
		if f11_local1.dPadDown == f11_local0.dPadDown and not f11_local9 then
			f11_local19 = f11_local9
		else
			f11_local19 = f11_local10
		end
		f11_local16.dPadDownColor = f11_local17( f11_local18, f11_local19 )
		f11_local16.dPadLeft = LUI.DataSourceInControllerModel.new( f11_local2 .. ".dPadLeft", Engine[0xED84C33EC5F01EA]( f11_local0.dPadLeft ) )
		f11_local17 = LUI.DataSourceInControllerModel.new
		f11_local18 = f11_local2 .. ".dPadLeftColor"
		if f11_local1.dPadLeft == f11_local0.dPadLeft and not f11_local9 then
			f11_local19 = f11_local9
		else
			f11_local19 = f11_local10
		end
		f11_local16.dPadLeftColor = f11_local17( f11_local18, f11_local19 )
		f11_local17 = LUI.DataSourceInControllerModel.new
		f11_local18 = f11_local2 .. ".start"
		if f11_local4 then
			f11_local19 = Engine[0xED84C33EC5F01EA]( f11_local0.startCP )
			if not f11_local19 then
			
			else
				f11_local16.start = f11_local17( f11_local18, f11_local19 )
				f11_local17 = LUI.DataSourceInControllerModel.new
				f11_local18 = f11_local2 .. ".startColor"
				if f11_local1.start == f11_local0.start and not f11_local9 then
					f11_local19 = f11_local9
				else
					f11_local19 = f11_local10
				end
				f11_local16.startColor = f11_local17( f11_local18, f11_local19 )
				f11_local16.select = LUI.DataSourceInControllerModel.new( f11_local2 .. ".select", Engine[0xED84C33EC5F01EA]( f11_local5 ) )
				f11_local17 = LUI.DataSourceInControllerModel.new
				f11_local18 = f11_local2 .. ".selectColor"
				if f11_local1.select == f11_local0.select and not f11_local9 then
					f11_local19 = f11_local9
				else
					f11_local19 = f11_local10
				end
				f11_local16.selectColor = f11_local17( f11_local18, f11_local19 )
				return f11_local16
			end
		end
		f11_local19 = Engine[0xED84C33EC5F01EA]( f11_local0.start )
	end
	
	local f1_local7 = function ( f10_arg0, f10_arg1 )
		local f10_local0 = f1_arg0[f10_arg0]
		f1_arg0:SetDataSource( f10_local0, f10_arg1 )
		Engine[0x23F1D3C77CE5C6]( f10_local0.ref:GetValue( f10_arg1 ), f10_arg1, f1_arg0.isBR )
	end
	
	local f1_local8 = function ( f9_arg0, f9_arg1 )
		f1_arg0:SetDataSource( f1_arg0[f9_arg0], f9_arg1 )
	end
	
	local f1_local9 = nil
	local f1_local10 = #f1_local4() - 1
	for f1_local11 = 0, f1_local10, 1 do
		table.insert( f0_local0, f1_local6( f1_local11, f1_arg1 ) )
	end
	if string.match( f1_local1, "_alt$" ) then
		f1_local1 = string.gsub( f1_local1, "_alt", "" )
	end
	local f1_local11 = f1_local3[f1_local1]
	if f1_local11 ~= nil and f1_local11 ~= "" then
		f1_arg0:SetDataSource( f0_local0[f0_local0( f1_local4(), Engine[0xED84C33EC5F01EA]( f1_local11 ) )], f1_arg1 )
	end
	f1_arg0:SetAlpha( 0 )
	f1_arg0:registerEventHandler( "buttonLayout_over", function ( element, event )
		f1_arg0:SetAlpha( 1 )
	end )
	f1_arg0:registerEventHandler( "buttonLayout_up", function ( element, event )
		f1_arg0:SetAlpha( 0 )
	end )
	f1_arg0:registerEventHandler( "flipTrigger_over", function ( element, event )
		f1_arg0:SetAlpha( 1 )
	end )
	f1_arg0:registerEventHandler( "flipTrigger_up", function ( element, event )
		f1_arg0:SetAlpha( 0 )
	end )
	f1_arg0:registerEventHandler( "buttonLayout_updated", function ( element, event )
		f1_arg0( event.index, event.controller )
	end )
	f1_arg0:registerEventHandler( "buttonLayout_updatedVisual", function ( element, event )
		f1_arg0( event.index, event.controller )
	end )
	f1_arg0:registerEventHandler( "buttonLayout_triggerUpdate", function ( element, event )
		f1_arg0 = f1_arg0
		if event.resetFlip then
			f1_arg0 = false
		end
		f1_arg0( f1_arg0, f1_arg0, f1_arg0 )
	end )
end

