-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 27-09-2025 22:41
module( ..., package.seeall )
local f0_local0 = {
	NO_AMMO_BULLETS = 1,
	NO_GRENADE = 11,
	NOT_ENOUGH_CLEARANCE = 8,
	CANT_USE_IN_PRONE = 13,
	NO_AMMO_GRENADE = 2,
	NO_AMMO_SECONDARY_GRENADE = 9,
	CROUCH_BLOCKED = 4,
	TURRET_BLOCKED = 12,
	PRONE_BLOCKED = 5,
	NO_AMMO_SPECIAL = 10,
	STAND_BLOCKED = 3,
	TARGET_TOO_CLOSE = 6,
	LOCKON_REQUIRED = 7,
	NONE = 0
}
local f0_local1 = function ( f16_arg0 )
	if CONDITIONS.IsMagmaGameMode() and DataSources.inGame.player.BRData.PlayerStatusIsZombie:GetValue( f16_arg0 ) == true and DataSources.inGame.HUD.hints.invalidCmdHintType:GetValue( f16_arg0 ) == f0_local0.NO_GRENADE then
		return false
	else
		return true
	end
end

function PostLoadFunc( f6_arg0, f6_arg1, f6_arg2 )
	assert( f6_arg0.TutorialText )
	local f6_local0 = f6_arg0.TutorialText
	f6_arg0._controllerIndex = f6_arg1
	f6_local0:SetShadowUOffset( -0.001 )
	f6_local0:SetShadowVOffset( -0.001 )
	local f6_local1 = DataSources.inGame.HUD.hints.tutorialMessageText
	local f6_local2 = f6_arg0:GetCurrentAnchorsAndPositions()
	local f6_local3 = f6_local2.top
	local f6_local4 = f6_local2.bottom
	local f6_local5 = function ( f15_arg0, f15_arg1 )
		if not f15_arg0._lineHeight then
			local f15_local0, f15_local1, f15_local2, f15_local3 = f15_arg0.TutorialText:getLocalRect()
			f15_arg0._lineHeight = math.abs( f15_local3 - f15_local1 )
			f15_arg0._lineMaxWidth = math.abs( f15_local2 - f15_local0 )
		end
		local f15_local0 = f15_arg0._lineHeight
		local f15_local3, f15_local4, f15_local5, f15_local6 = GetTextDimensions( f15_arg1, f15_arg0.TutorialText:GetCurrentFont(), f15_local0, f15_arg0._lineMaxWidth )
		local f15_local7 = f15_local5 - f15_local3
		local f15_local8 = f15_local4 - f15_local6
		local f15_local9 = f15_local7 + 30
		local f15_local10 = f15_local8 + 20
		local f15_local11 = f15_local9 * 0.5
		local f15_local12 = f15_local10 * 0.5
		if not CONDITIONS.IsCoreMultiplayerNotBr( f15_arg0 ) then
			f15_arg0.Background:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -f15_local11, f15_local11, -f15_local12, f15_local12 )
		end
		local f15_local13 = f15_local8 * -0.5
		f15_arg0.TutorialText:SetAnchorsAndPosition( 0, 0, 0.5, 0.5, 30, -30, f15_local13, f15_local13 + f15_local0 )
		f15_arg0.TutorialText:setText( f15_arg1 )
	end
	
	local f6_local6 = function ( f14_arg0, f14_arg1 )
		if f14_arg1 ~= nil and f14_arg1 ~= "" and f14_arg1 ~= "none" then
			local f14_local0 = 0
			if Engine.CAADCDEEIA() and DataSources.inGame.SP.apacheVisible and DataSources.inGame.SP.apacheVisible:GetValue( f6_arg0 ) == 1 then
				f14_local0 = -72 * _1080p
			end
			f14_arg0:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1200 * _1080p, f6_arg0 + f14_local0, f6_arg0 + f14_local0 )
			f6_arg0( f14_arg0, f14_arg1 )
			if DataSources.inGame.HUD.hints.invalidCmdHintShow:GetValue( f6_arg0 ) then
				if f6_arg0( f6_arg0 ) then
					ACTIONS.AnimateSequence( f14_arg0, "FadeInInvalidCmd" )
				end
			else
				ACTIONS.AnimateSequence( f14_arg0, "FadeIn" )
			end
		else
			ACTIONS.AnimateSequence( f14_arg0, "FadeOut" )
		end
	end
	
	local f6_local7 = function ( f13_arg0 )
		f6_arg0( f13_arg0, f6_arg0:GetValue( f6_arg0 ) )
	end
	
	f6_arg0:SubscribeToModel( f6_local1:GetModel( f6_arg1 ), function ()
		f6_arg0( f6_arg0 )
	end )
	f6_local7( f6_arg0 )
	if CONDITIONS.IsMagmaGameMode() then
		local f6_local8 = function ( f11_arg0 )
			if DataSources.inGame.MP.brShowMountTutorial:GetValue( f6_arg0 ) then
				f6_arg0( f11_arg0, Engine.CEHIEICIFD( f6_arg0 ) )
			else
				f6_arg0( f11_arg0 )
			end
		end
		
		f6_arg0:SubscribeToModel( DataSources.inGame.MP.brShowMountTutorial:GetModel( f6_arg1 ), function ()
			f6_arg0( f6_arg0 )
		end )
		f6_local8( f6_arg0 )
	end
	f6_arg0._messageTextDataSource = f6_local1
	local f6_local8 = function ( f9_arg0, f9_arg1 )
		local f9_local0 = f9_arg0._messageTextDataSource:GetValue( f9_arg0._controllerIndex )
		if f9_local0 ~= nil and f9_local0 ~= "" and f9_local0 ~= "none" then
			f6_arg0( f9_arg0, f9_local0 )
		else
			ACTIONS.AnimateSequence( f9_arg0, "FadeOut" )
		end
	end
	
	local f6_local9 = function ( f8_arg0, f8_arg1 )
		f8_arg0:SetAlpha( 0 )
	end
	
	local f6_local10 = function ( f7_arg0, f7_arg1 )
		local f7_local0 = Engine.DBFFAEEFGJ()
		if f7_local0.flowManager:IsStackEmpty() then
			f6_arg0( f7_arg0, f7_arg1 )
			f7_arg0:SetAlpha( 1 )
		end
	end
	
	f6_arg0:registerEventHandler( "non_empty_menu_stack", f6_local9 )
	f6_arg0:registerEventHandler( "empty_menu_stack", f6_local10 )
end

function TutorialMessage( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1200 * _1080p, 0, 36 * _1080p )
	self.id = "TutorialMessage"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local f1_local3 = nil
	if not CONDITIONS.IsCoreMultiplayerNotBr( self ) then
		f1_local3 = MenuBuilder.BuildRegisteredType( "TutorialMessageBackground", {
			controllerIndex = f1_local1
		} )
		f1_local3.id = "Background"
		f1_local3:SetAlpha( 0, 0 )
		f1_local3:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -600, _1080p * 600, _1080p * -18, _1080p * 18 )
		self:addElement( f1_local3 )
		self.Background = f1_local3
	end
	local TutorialText = nil
	
	TutorialText = LUI.UIStyledText.new()
	TutorialText.id = "TutorialText"
	TutorialText:SetRGBFromTable( SWATCHES.HUD.HUDMain, 0 )
	TutorialText:setText( LocalizeString( "" ), 0 )
	TutorialText:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	TutorialText:SetAlignment( LUI.Alignment.Center )
	TutorialText:SetShadowMinDistance( -0.2, 0 )
	TutorialText:SetShadowMaxDistance( 0.2, 0 )
	TutorialText:SetShadowUOffset( 0.002, 0 )
	TutorialText:SetShadowRGBFromTable( SWATCHES.HUD.HUDShadow, 0 )
	TutorialText:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -550, _1080p * 550, _1080p * -15, _1080p * 15 )
	self:addElement( TutorialText )
	self.TutorialText = TutorialText
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	local f1_local5 = nil
	if not CONDITIONS.IsCoreMultiplayerNotBr( self ) then
		f1_local3:RegisterAnimationSequence( "FadeIn", {
			{
				value = 1,
				duration = 300,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	TutorialText:RegisterAnimationSequence( "FadeIn", {
		{
			value = 1,
			duration = 300,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.FadeIn = function ()
		if not CONDITIONS.IsCoreMultiplayerNotBr( menu ) then
			menu:AnimateSequence( "FadeIn" )
		end
		menu:AnimateSequence( "FadeIn" )
	end
	
	local f1_local6 = nil
	if not CONDITIONS.IsCoreMultiplayerNotBr( self ) then
		f1_local3:RegisterAnimationSequence( "FadeOut", {
			{
				value = 0,
				duration = 300,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	TutorialText:RegisterAnimationSequence( "FadeOut", {
		{
			value = 0,
			duration = 300,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.FadeOut = function ()
		if not CONDITIONS.IsCoreMultiplayerNotBr( menu ) then
			menu:AnimateSequence( "FadeOut" )
		end
		menu:AnimateSequence( "FadeOut" )
	end
	
	local f1_local7 = nil
	if not CONDITIONS.IsCoreMultiplayerNotBr( self ) then
		f1_local3:RegisterAnimationSequence( "FadeInInvalidCmd", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	TutorialText:RegisterAnimationSequence( "FadeInInvalidCmd", {
		{
			value = 1,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.FadeInInvalidCmd = function ()
		if not CONDITIONS.IsCoreMultiplayerNotBr( menu ) then
			menu:AnimateSequence( "FadeInInvalidCmd" )
		end
		menu:AnimateSequence( "FadeInInvalidCmd" )
	end
	
	PostLoadFunc( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "TutorialMessage", TutorialMessage )
LockTable( _M )
