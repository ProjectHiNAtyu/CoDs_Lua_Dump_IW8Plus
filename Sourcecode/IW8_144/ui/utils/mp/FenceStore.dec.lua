-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 27-09-2025 22:41
module( ..., package.seeall )
FenceStore = LUI.Class( LUI.Fence )
FenceStore.init = function ( f6_arg0, f6_arg1, f6_arg2 )
	f6_arg0.super:init( f6_arg1, f6_arg2 )
	f6_arg0._controllerIndex = f6_arg2
	assert( f6_arg0._controllerIndex )
end

FenceStore.Start = function ( f5_arg0 )
	DebugPrint( "FenceStore.Start" )
end

FenceStore.Stop = function ( f4_arg0 )
	DebugPrint( "FenceStore.Stop" )
	LUI.FlowManager.RequestLeaveMenuByName( "store_inprogress_popup", true )
	f4_arg0._openedPopup = false
end

FenceStore.UpdateState = function ( f3_arg0 )
	assert( f3_arg0._state ~= LUI.Fence.STATE.fail )
	if f3_arg0._state == LUI.Fence.STATE.pass then
		return 
	end
	local f3_local0 = InGameStore.GetCatalogStatus( f3_arg0._controllerIndex )
	if f3_local0 == InGameStoreCatalogStatus.FETCHING then
		f3_arg0._state = LUI.Fence.STATE.block
		Engine.DHCGHHBHCH()
	elseif f3_local0 == InGameStoreCatalogStatus.READY then
		f3_arg0._state = LUI.Fence.STATE.pass
	elseif f3_local0 == InGameStoreCatalogStatus.NOTREADY then
		f3_arg0._state = LUI.Fence.STATE.pass
	else
		f3_arg0._state = LUI.Fence.STATE.fail
	end
	if f3_arg0._state == LUI.Fence.STATE.block and not f3_arg0._openedPopup then
		f3_arg0:ShowInProgressPopup()
	end
end

FenceStore.PostFail = function ( f2_arg0 )
	if f2_arg0._state == LUI.Fence.STATE.fail then
		local f2_local0 = Engine.CIEGIACHAE()
		if f2_local0 then
			f2_local0 = Commerce.CCIEAECGHB()
		end
		if not f2_local0 then
			local f2_local1 = {}
			if Engine.DBFCJBDJEC() then
				local f2_local2 = Engine.BIAFEJHHDD()
				if f2_local2 ~= nil then
					f2_local1.message = Engine.CBBHFCGDIC( "MP_FRONTEND_ONLY/STORE_UNAVAILABLE_ERROR", Engine.JCBDICCAH( f2_local2 ) )
					Engine.DCFIDJGACA()
				else
					f2_local1.message = Engine.CBBHFCGDIC( "MP_FRONTEND_ONLY/STORE_UNAVAILABLE_PC" )
				end
			else
				f2_local1.message = Engine.CBBHFCGDIC( "MP_FRONTEND_ONLY/STORE_UNAVAILABLE", Engine.JCBDICCAH( Engine.CIHDHDCIBE() ) )
			end
			LUI.FlowManager.RequestPopupMenu( nil, "generic_error_popup", false, nil, false, f2_local1, nil, false, true )
		end
	end
	Engine.DHCGHHBHCH()
end

FenceStore.ShowInProgressPopup = function ( f1_arg0 )
	LUI.FlowManager.RequestPopupMenu( nil, "store_inprogress_popup", false, nil, false, {
		message = Engine.CBBHFCGDIC( "MENU/FETCHING_STORE_INFO" )
	}, nil, true, true )
	f1_arg0._openedPopup = true
end

LUI.Fence.Register( "store", FenceStore )
LockTable( _M )
