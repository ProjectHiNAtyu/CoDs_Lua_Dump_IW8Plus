-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
MobileSettingsHubUtils = MobileSettingsHubUtils or {}
MobileSettingsHubUtils.TUTORIAL_STATE = {
	TIPS_HUD_CUSTOMIZER_ENTRY = 1,
	OFF = 2,
	TIPS_CONTROL_SET_SELECTION = 0
}
MobileSettingsHubUtils.TUTORIAL_TIPS = {
	[MobileSettingsHubUtils.TUTORIAL_STATE.TIPS_CONTROL_SET_SELECTION] = 0xD4178FC35CCA291,
	[MobileSettingsHubUtils.TUTORIAL_STATE.TIPS_HUD_CUSTOMIZER_ENTRY] = 0x1CB35CBAB3C895D
}
local f0_local0 = "MobileSettingsHub"
MobileSettingsHubUtils.MORE_MENU_LIST_KEYS = {
	Delete = "DELETE",
	Duplicate = "DUPLICATE",
	Restore = "RESTORE",
	Rename = "RENAME",
	Broadcast = "BROADCAST"
}
local f0_local1 = {
	[MobileSettingsHubUtils.MORE_MENU_LIST_KEYS.Restore] = {
		icon = 0xA9C2E054DCAAE99,
		textReference = 0xC5AC4FEBD8A35DC,
		ShouldShow = function ( f29_arg0 )
			return true
		end
	},
	[MobileSettingsHubUtils.MORE_MENU_LIST_KEYS.Rename] = {
		icon = 0xE29A06D0392EA0E,
		textReference = 0x14ABBEBC56F2134,
		ShouldShow = function ( f28_arg0 )
			return not UXPUtils.CheckIsBuildInStand( f28_arg0 )
		end
	},
	[MobileSettingsHubUtils.MORE_MENU_LIST_KEYS.Broadcast] = {
		icon = 0xD0B46F6E3AA72C7,
		textReference = 0x4013C89316BB3C1,
		ShouldShow = function ( f27_arg0 )
			local f27_local0 = CONDITIONS.IsUXPFileSyncEnabled()
			if f27_local0 then
				f27_local0 = CONDITIONS.InFrontend()
			end
			return f27_local0
		end
	},
	[MobileSettingsHubUtils.MORE_MENU_LIST_KEYS.Duplicate] = {
		icon = 0x931910C7BAFDA1D,
		textReference = 0xD2ACAABCCEC6E47,
		ShouldShow = function ( f26_arg0 )
			return UXPUtils.CanSpawnNewUXP()
		end
	},
	[MobileSettingsHubUtils.MORE_MENU_LIST_KEYS.Delete] = {
		icon = 0x75A560E5C2E14C7,
		textReference = 0x67016B72ADC0861,
		ShouldShow = function ( f25_arg0 )
			return not UXPUtils.CheckIsBuildInStand( f25_arg0 )
		end
	}
}
MobileSettingsHubUtils.SaveOpenSettingsHubFrom = function ( f24_arg0 )
	if not f24_arg0 then
		f24_arg0 = -1
	end
	local f24_local0 = LUI.FlowManager.GetScopedData( f0_local0 )
	if not f24_local0.lastMenuName then
		f24_local0.lastMenuName = LUI.FlowManager.GetMenuNameAtIndex( f24_arg0 )
	end
end

MobileSettingsHubUtils.BackToSettingsHub = function ( f23_arg0, f23_arg1 )
	if CONDITIONS.IsMenuInStack( f0_local0 ) then
		LUI.FlowManager.RequestRestoreMenu( f0_local0, nil, f23_arg1 )
	else
		ACTIONS.LeaveMenu( f23_arg0:GetCurrentMenu() )
	end
end

MobileSettingsHubUtils.BackToWhereSettingsHubFrom = function ( f22_arg0, f22_arg1 )
	if LUI.FlowManager.IsInStack( f0_local0 ) then
		local f22_local0 = LUI.FlowManager.GetScopedData( f0_local0 )
		if f22_local0 and f22_local0.lastMenuName and CONDITIONS.IsMenuInStack( f22_local0.lastMenuName ) then
			LUI.FlowManager.RequestRestoreMenu( f22_local0.lastMenuName, nil, f22_arg1 )
		end
	else
		ACTIONS.LeaveMenu( f22_arg0:GetCurrentMenu() )
	end
end

MobileSettingsHubUtils.CalcTextWidth = function ( f21_arg0 )
	local f21_local0 = f21_arg0:getText()
	local f21_local1 = f21_arg0:GetCurrentFont()
	local f21_local2, f21_local3, f21_local4, f21_local5 = f21_arg0:getLocalRect()
	local f21_local6, f21_local7, f21_local8, f21_local9 = GetTextDimensions( f21_local0, f21_local1, math.abs( f21_local5 - f21_local3 ) )
	return math.abs( f21_local8 - f21_local6 )
end

MobileSettingsHubUtils.CopyAnchorsAndPosition = function ( f20_arg0, f20_arg1 )
	local f20_local0 = f20_arg0:GetAnchorsAndPosition()
	f20_arg1:SetAnchorsAndPosition( f20_local0.leftAnchor, f20_local0.rightAnchor, f20_local0.topAnchor, f20_local0.bottomAnchor, f20_local0.left, f20_local0.right, f20_local0.top, f20_local0.bottom )
end

MobileSettingsHubUtils.ShowRestoreUXPPopup = function ( f18_arg0, f18_arg1, f18_arg2 )
	UI_CUSTOMIZATION.PopupYesNo( f18_arg0, Engine[0xED84C33EC5F01EA]( 0x58CCDC463E438F5 ), Engine[0xED84C33EC5F01EA]( 0x10B2B2BB01B4E4E ), function ( f19_arg0 )
		UXPUtils.EraseLayoutParent( f18_arg0 )
		UXPUtils.EraseLayoutField( f18_arg0 )
		UXPUtils.ErasePreviewImage( f18_arg0 )
		UI_CUSTOMIZATION.ResetUXPOptions( f18_arg0, f18_arg0, UI_CUSTOMIZATION.GetAllUXPOptionsIdDict() )
		UXPUtils.WriteUXPFileImmediately( f18_arg0 )
		UI_CUSTOMIZATION.MarkShouldReloadOnUsingUXP()
		if f18_arg0 then
			f18_arg0()
		end
		UXPDlogUtils.RecordUXPRestored()
		ACTIONS.LeaveMenu( f19_arg0 )
	end, nil, Engine[0xED84C33EC5F01EA]( 0xC5AC4FEBD8A35DC ), Engine[0xED84C33EC5F01EA]( 0x10AA0598557C1E4 ) )
end

MobileSettingsHubUtils.GetSettingsMenuId = function ()
	return "MobileSettingsControls"
end

MobileSettingsHubUtils.RegisterTutorial = function ( f14_arg0, f14_arg1 )
	if not Dvar[0x9E5BE3B4BBA4E0E]( 0xBF0B036011A31F4 ) then
		
	else
		
	end
	f14_arg0:SetNotifyOnLayoutInit( true )
	f14_arg0:addEventHandler( "layout_initialized", function ( f16_arg0, f16_arg1 )
		local f16_local0, f16_local1, f16_local2, f16_local3 = f16_arg0:getCurrentGlobalRect()
		f16_arg0:dispatchEventToCurrentMenu( {
			name = "register_tutorial_tips",
			tutorialTag = f14_arg0,
			target = f16_arg0
		} )
	end )
	f14_arg0:addEventHandler( "button_action", function ( f15_arg0, f15_arg1 )
		f15_arg0:dispatchEventToCurrentMenu( {
			name = "close_tutorial_tips",
			tutorialTag = f14_arg0
		} )
	end )
end

MobileSettingsHubUtils.RenameUXP = function ( f12_arg0, f12_arg1, f12_arg2 )
	if not Dvar[0x9E5BE3B4BBA4E0E]( 0x7298380DBA69011 ) then
		
	else
		
	end
	OSK[0xC1C15C14B75864C]( f12_arg0, Engine[0xED84C33EC5F01EA]( 0x4F8707F02481C99 ), UXPUtils.QueryUXPDisplayName( f12_arg1 ), UXPUtils.MAX_UXP_NAME_LEN, false, false, false, function ( f13_arg0, f13_arg1, f13_arg2 )
		if not f13_arg1 or f13_arg1 == "" or f13_arg2 ~= Enum[0xA163D545F5F9533][0x8C9129210B7358E] then
			return 
		end
		UXPUtils.RenameUXP( f12_arg0, f13_arg1 )
		UXPDlogUtils.RecordUXPRenamed()
		if f12_arg0 then
			f12_arg0( f13_arg1 )
		end
	end )
	LUI.FlowManager.RequestLeaveMenu( element )
	UXPUtils.SetCooldownUXPBroadcast()
	element:dispatchEventToRoot( {
		name = "send_toast_notification",
		immediate = true,
		options = {
			success = true,
			header = Engine[0xED84C33EC5F01EA]( 0x5C4AC8152C6DA7C ),
			controllerIndex = f12_arg0
		}
	} )
end

local f0_local2 = function ( f10_arg0, f10_arg1 )
	LUI.FlowManager.RequestPopupMenu( nil, "MobileSelectPlayersPopup", false, f10_arg0, false, {
		selectionLimit = 5,
		withCustomMessage = true,
		isUXPBroadcast = true,
		title = Engine[0xED84C33EC5F01EA]( 0xECEE2DB4BD6C626 ),
		description = Engine[0xED84C33EC5F01EA]( 0xA8355ECF090C3A ),
		confirmLabel = Engine[0xED84C33EC5F01EA]( 0x945F3522A53F419 ),
		confirmAction = function ( f11_arg0 )
			sendUXPToPlayers( f11_arg0, f10_arg0, f10_arg0 )
		end
	} )
end

local f0_local3 = function ( f9_arg0, f9_arg1, f9_arg2 )
	UICustomization[0xD05F14CF0F1F4D3]( f9_arg2 )
	f9_arg0:dispatchEventToRoot( {
		name = "send_toast_notification",
		immediate = true,
		options = {
			displayTime = 3000,
			iconScale = 4.667263495923649E-62,
			success = true,
			icon = "hud_info_alert",
			iconColor = SWATCHES[0x1F5A9ABAC207F9D][0xDFA94943D375220],
			header = Engine[0xED84C33EC5F01EA]( 0xA43F1C4D5328525 ),
			controllerIndex = f9_arg1
		}
	} )
end

MobileSettingsHubUtils.GetMoreListInfo = function ( f8_arg0 )
	return f0_local0[f8_arg0]
end

MobileSettingsHubUtils.OpenEditor = function ( f7_arg0 )
	URI.QueueURI( "./MobileVirtualGamepadEditor?scheme=" .. UI_CUSTOMIZATION.DefaultScheme, f7_arg0 )
end

MobileSettingsHubUtils.AddMoreMenuBtnLogic = function ( f3_arg0, f3_arg1, f3_arg2, f3_arg3, f3_arg4 )
	f3_arg0._isDisplayingMoreMenu = false
	f3_arg0:addEventHandler( "button_action", function ( f6_arg0, f6_arg1 )
		local f6_local0 = {}
		for f6_local4, f6_local5 in ipairs( f3_arg0 ) do
			local f6_local6 = MobileSettingsHubUtils.GetMoreListInfo( f6_local5 )
			if f6_local6.ShouldShow( f3_arg0( f6_arg0 ) ) then
				table.insert( f6_local0, f6_local5 )
			end
		end
		f6_arg0._isDisplayingMoreMenu = true
		f6_local1, f6_local2, f6_local3, f6_local4 = f6_arg0:getCurrentGlobalRect()
		f6_arg0:dispatchEventToCurrentMenu( {
			name = "show_uxp_more_list",
			keyList = f6_local0,
			targetL = f6_local1,
			targetR = f6_local3,
			targetT = f6_local2,
			targetB = f6_local4,
			preferUpper = f3_arg0
		} )
	end )
	f3_arg0:registerEventHandler( "click_uxp_more_list", function ( element, event )
		if element._isDisplayingMoreMenu then
			f3_arg0[event.key]( element )
		end
	end )
	f3_arg0:registerEventHandler( "on_more_list_hide", function ( element, event )
		element._isDisplayingMoreMenu = false
	end )
end

MobileSettingsHubUtils.CalcWidthBaseOnFixedHeight = function ( f2_arg0 )
	local f2_local0 = Engine[0xEE6F69FEA944B13]()
	return f2_arg0 / f2_local0:getHeight() * f2_local0:getWidth()
end

MobileSettingsHubUtils.CalcHeightBaseOnFixedWidth = function ( f1_arg0 )
	local f1_local0 = Engine[0xEE6F69FEA944B13]()
	return f1_arg0 / f1_local0:getWidth() * f1_local0:getHeight()
end

