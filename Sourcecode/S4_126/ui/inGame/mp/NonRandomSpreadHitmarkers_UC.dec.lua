-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
require( "ui.inGame.mp.NonRandomSpreadHitmarkerPip" )

local f0_local0 = 16
local f0_local1 = 11
return {
	CustomOptionsFunc = CustomOptionsFunc,
	PreLoadFunc = PreLoadFunc,
	PostLoadFunc = function ( f1_arg0, f1_arg1, f1_arg2 )
		f1_arg0.hitMarkers = {}
		f1_arg0.hitMarkerPositions = nil
		f1_arg0.nonRandomSpredScale = 0
		for f1_local0 = 1, f0_local0, 1 do
			local f1_local3 = f1_local0
			local f1_local4 = MenuBuilder.BuildRegisteredType( "NonRandomSpreadHitmarkerPip", {
				controllerIndex = f1_arg1
			} )
			f1_local4:SetAlpha( 1 )
			f1_arg0:addElement( f1_local4 )
			table.insert( f1_arg0.hitMarkers, f1_local4 )
		end
		f1_arg0:SubscribeToModel( DataSources.inGame.player.currentWeapon.displayName:GetModel( f1_arg1 ), function ( f3_arg0 )
			f1_arg0.nonRandomSpreadScale = Game[0x34DD1C4F05C3720]( f1_arg0 )
			if 0 < f1_arg0.nonRandomSpreadScale then
				f1_arg0.hitMarkerPositions = Game[0xF2904F04AE669F2]( f1_arg0 )
			end
		end )
		f1_arg0:registerOmnvarHandler( "damage_feedback_shots_hit", function ( f2_arg0, f2_arg1 )
			if f2_arg0.nonRandomSpreadScale == 0 then
				return 
			end
			local f2_local0 = f2_arg1.value
			local f2_local1 = table.getn( f2_arg0.hitMarkerPositions )
			local f2_local2 = DataSources.inGame.player.currentWeapon.crosshairRadius:GetValue( f1_arg0 ) * _1080p
			for f2_local3 = 1, f2_local1, 1 do
				local f2_local6 = f2_arg0.hitMarkerPositions[f2_local3]
				if hasbit( f2_local0, bit( f2_local3 ) ) then
					local f2_local7 = f2_arg0.hitMarkers[f2_local3]
					local f2_local8 = f2_local2 * f2_local6.X * f2_arg0.nonRandomSpreadScale
					local f2_local9 = -f2_local2 * f2_local6.Y * f2_arg0.nonRandomSpreadScale
					f2_local7:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, f2_local8 - f1_arg0, f2_local8 + f1_arg0, f2_local9 - f1_arg0, f2_local9 + f1_arg0 )
					ACTIONS.AnimateSequence( f2_local7, "Hit" )
				end
			end
		end )
	end
	,
	PushFunc = PushFunc,
	PopFunc = PopFunc
}
