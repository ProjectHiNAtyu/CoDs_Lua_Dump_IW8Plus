-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
LUI.SubtitlesLayer = LUI.Class( LUI.UIElement )
LUI.SubtitlesLayer.init = function ( f9_arg0, f9_arg1 )
	LUI.SubtitlesLayer.super.init( f9_arg0 )
	f9_arg0.id = "SubtitlesLayer"
	f9_arg0._controllerIndex = f9_arg1
	f9_arg0:SetupSafeArea()
end

LUI.SubtitlesLayer.ShouldBeVisible = function ( f8_arg0 )
	if Engine[0x12586A3F4FB490E]() then
		return true
	elseif IsCodcaster() then
		return false
	elseif Engine[0x74423E76DECE3E4]() then
		local f8_local0 = DataSources.inGame.SP.deathHint.deathQuote
		if f8_local0 and f8_local0:GetValue( f8_arg0._controllerIndex ) ~= nil and f8_local0:GetValue( f8_arg0._controllerIndex ) ~= "" then
			return false
		end
	end
	return not Game[0x28624DEF6F708C8]( f8_arg0._controllerIndex, "ui_hide_full_hud" )
end

local f0_local0 = function ( f6_arg0 )
	f6_arg0._subtitles = LUI.UIElement.new()
	if CONDITIONS.IsMobileOrMobileSim() then
		f6_arg0._subtitles:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, 0, 0, -310, -50 )
	else
		f6_arg0._subtitles:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, 0, 0, -135, -60 )
	end
	f6_arg0:addAndCallEventHandler( "leavemenu", function ( f7_arg0 )
		local f7_local0 = 0.28
		if IsLanguageArabic() then
			f7_local0 = 0.5
		elseif IsLanguageThai() then
			f7_local0 = 0.4
		end
		if f7_arg0._controllerIndex then
			local f7_local1 = LAYOUT.GetSubtitlesFontSize( Engine[0x7B17D94988FD5D0]( "subtitlesFontSize", f7_arg0._controllerIndex ) + 1 )
			if f7_local1 ~= f7_arg0.previousSize then
				f7_arg0._subtitles:SetScale( f7_local0 * f7_local1 )
				f7_arg0.previousSize = f7_local1
			end
		end
	end )
	f6_arg0._subtitles:setupSubtitles()
	f6_arg0._subtitles:SetFont( FONTS.GetFont( FONTS.SecondaryRegular.File ) )
end

local f0_local1 = function ( f5_arg0 )
	local f5_local0 = Game[0x83E0D59EFF44E21]()
	local f5_local1 = Engine[0x6093D047200548]( 0x5D307B44433B1E .. f5_local0[0xD8C23F96582A409] )
	local f5_local2 = CONDITIONS.IsMobileOrMobileSim() and f5_local1[0x8856F63FBD576BF] or f5_local1[0xC1D8432DACE293F]
	f5_arg0._subtitles = MenuBuilder.BuildRegisteredType( f5_local2[0xFE80FC822CDEE86], {
		controllerIndex = f5_arg0._controllerIndex
	} )
	local f5_local3 = f5_local2[0x705B2E38CA62D06] and -(LAYOUT.GetElementWidth( f5_arg0._subtitles ) / 2) or f5_local2[0x21DBE17D04D1D73]
	local f5_local4
	if f5_local2[0x705B2E38CA62D06] then
		f5_local4 = 0
	else
		f5_local4 = f5_local2[0xC3ED297CC1B57AA]
	end
	f5_arg0._subtitles:SetAnchorsAndPosition( f5_local2[0xDCD5F2ADFEDE5A1], f5_local2[0xB18F1A242CB1174], f5_local2[0x85A864EC4956F4D], f5_local2[0xCF07CEDA90280DB], f5_local3, f5_local4, f5_local2[0x25B3444E8113767], f5_local2[0xFEFEB1B00471FD] )
end

LUI.SubtitlesLayer.InitLayer = function ( f4_arg0 )
	f4_arg0._usingLuaDrawSubtitles = Dvar[0x9E5BE3B4BBA4E0E]( 0xDDF3BE6CDF66389 ) or false
	local f4_local0 = f4_arg0._usingLuaDrawSubtitles
	if not f4_local0 then
		f4_local0 = CONDITIONS.IsT10()
	end
	f4_arg0._usingLuaDrawSubtitles = f4_local0
	if f4_arg0._usingLuaDrawSubtitles then
		f0_local0( f4_arg0 )
	else
		f0_local0( f4_arg0 )
	end
	f4_arg0._subtitles.id = "_subtitles"
	f4_arg0._subtitles:SetAlignment( CoD.OwnerdrawAlignment.TextTopCenter )
	f4_arg0:addElement( f4_arg0._subtitles )
end

LUI.SubtitlesLayer.GetLayer = function ()
	local f3_local0 = Engine[0xEE6F69FEA944B13]()
	return f3_local0.subtitlesLayer
end

LUI.SubtitlesLayer.GetLastSpokenLineAsset = function ( f2_arg0 )
	if not f2_arg0._usingLuaDrawSubtitles then
		return nil
	else
		return f2_arg0._subtitles:GetMostRecentSubtitleAsset()
	end
end

LUI.SubtitlesLayer.ClearLayer = function ( f1_arg0, f1_arg1 )
	f1_arg0:closeChildren()
	f1_arg0._subtitles = nil
end

