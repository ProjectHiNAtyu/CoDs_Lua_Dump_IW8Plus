-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 27-09-2025 22:41
module( ..., package.seeall )
function LobbyStatus( f1_arg0, f1_arg1 )
	local f1_local0
	if f1_arg1 then
		f1_local0 = f1_arg1
	else
		f1_local0 = f1_arg1.controllerIndex
	end
	assert( f1_local0 )
	if not f1_arg1.alignment then
		local f1_local1 = LUI.Alignment.Left
	end
	local f1_local2 = 24 * _1080p
	local f1_local3 = 1 * _1080p
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 1, 0, 0, 500 * _1080p, 0, 86 * _1080p )
	self.id = "LobbyStatus"
	
	local bg = LUI.UIImage.new()
	bg:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, -23, 0 )
	bg:SetRGBFromInt( 0 )
	bg:SetAlpha( 1 )
	bg:setImage( RegisterMaterial( "widg_gradient_bottom_to_top" ), 0 )
	bg.id = "bg"
	self:addElement( bg )
	self.bg = bg
	
	local f1_local6 = LUI.UIElement.new()
	f1_local6.id = "stencil"
	f1_local6:setUseStencil( true )
	self:addElement( f1_local6 )
	self.Minimize = function ( f8_arg0 )
		if f8_arg0.bg then
			f8_arg0.bg:closeTree()
			f8_arg0.bg = nil
		end
	end
	
	self.UpdateMessage = function ( f3_arg0 )
		local f3_local0, f3_local1, f3_local2 = Lobby.GetStatusString( f1_arg0 )
		if f3_local0 == f3_arg0._lastText then
			
		else
			
		end
		f3_arg0._lastText = f3_local0
		local f3_local3 = f3_arg0._lastState == f3_local2
		f3_arg0._lastState = f3_local2
		local self = nil
		local f3_local5 = f3_arg0._currentMessage ~= nil
		if f3_local5 then
			local f3_local6 = f3_arg0._currentMessage
			if not f3_local3 then
				local f3_local7 = f3_local6:SetAlpha( 0, 200, LUI.EASING.inQuadratic )
				if f3_local7 then
					f3_local7.onComplete = function ()
						f3_arg0:closeTree()
					end
					
				end
				f3_arg0._currentMessage = nil
			else
				self = f3_local6
			end
		end
		if not self then
			self = LUI.UIText.new()
			self.id = "newMessage"
			self:SetRGBFromTable( COLORS.grey179 )
			self:SetAlpha( 1 )
			self:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
			self:SetAlignment( f1_arg0 )
			self:SetAnchorsAndPosition( 0, 0, 0, 1, _1080p * 12, 0, f1_arg0, f1_arg0 + f1_arg0 )
			self:SetWordWrap( false )
			self:SetOptOutRightToLeftAlignmentFlip( true )
			f3_arg0._currentMessage = self
			f1_arg0:addElement( self )
			self.UpdateText = function ( f6_arg0, f6_arg1 )
				if f3_arg0 then
					f6_arg0._variantIndex = 1
					f6_arg0._textVariants = {
						f6_arg1 .. "",
						f6_arg1 .. "",
						f6_arg1 .. ".",
						f6_arg1 .. "..",
						f6_arg1 .. "...",
						f6_arg1 .. "...",
						f6_arg1 .. "..."
					}
					f6_arg0:setText( f6_arg0._textVariants[f6_arg0._variantIndex] )
				else
					f6_arg0:setText( f6_arg1 )
				end
			end
			
			self:UpdateText( f3_local0 )
			if f3_local1 then
				local f3_local6 = nil
				local f3_local7 = function ()
					local f5_local0 = f3_arg0
					f5_local0:setText( f5_local0._textVariants[f5_local0._variantIndex] )
					local f5_local1 = f5_local0:Wait( 200 )
					f5_local1.onComplete = f3_arg0
					f5_local0._variantIndex = 1 + f5_local0._variantIndex % #f5_local0._textVariants
				end
				
				f3_local7()
			end
		end
		self:UpdateText( f3_local0 )
		if f3_local5 and not f3_local3 then
			self:SetAlpha( 0 )
			local f3_local6 = self:Wait( 100 )
			f3_local6.onComplete = function ()
				f3_arg0:SetAlpha( 1, 200, LUI.EASING.inOutQuadratic )
			end
			
		end
	end
	
	local f1_local7 = LUI.UITimer.new( {
		interval = 500,
		event = "update_lobby_status"
	} )
	f1_local7.id = "lobbyStatusTimer"
	self:addElement( f1_local7 )
	self:registerEventHandler( "update_lobby_status", function ( self, event )
		self:UpdateMessage()
	end )
	self:UpdateMessage()
	return self
end

MenuBuilder.registerType( "LobbyStatus", LobbyStatus )
LockTable( _M )
