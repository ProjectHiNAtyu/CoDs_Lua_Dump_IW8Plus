-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
module( ..., package.seeall )
local f0_local0 = 8000
local f0_local1 = function ( f9_arg0 )
	local f9_local0 = MP.GetUnpackedPayloadGlobalData( f9_arg0 )
	local f9_local1 = MP.GetUnpackedPayloadClientData( f9_arg0 )
	local f9_local2 = MP.GetUnpackedPayloadPercentData( f9_arg0 )
	local f9_local3 = {
		isPlayerTheAttacker = f9_local1.currentPlayerTeamState == MP.PAYLOAD_TEAM_STATE.ATTACKERS,
		numCheckpointsCompleted = f9_local0.pathACheckpointsCompleted + f9_local0.pathBCheckpointsCompleted,
		numNeededToWin = f9_local3.numCheckpointsCompleted + 1
	}
	local f9_local4
	if 10000 > f9_local2.pathAPercentComplete or 10000 > f9_local2.pathBPercentComplete then
		f9_local4 = false
	else
		f9_local4 = true
	end
	f9_local3.allPathsCompleted = f9_local4
	return f9_local3
end

local f0_local2 = function ( f7_arg0, f7_arg1, f7_arg2 )
	f7_arg0.GetDisplayInfo = f0_local0
	local f7_local0 = f7_arg0.GetDisplayInfo( f7_arg1 )
	local f7_local1 = ACTIONS.AnimateSequence
	local f7_local2 = f7_arg0
	local f7_local3
	if f7_local0.isPlayerTheAttacker then
		f7_local3 = "YouAttacker"
	else
		f7_local3 = "YouDefender"
	end
	f7_local1( f7_local2, f7_local3 )
	f7_arg0.AttackerInfoText:setText( Engine.CBBHFCGDIC( "BR_PAYLOAD/X_CHECKPOINTS", f7_local0.numCheckpointsCompleted ) )
	f7_arg0.DefenderInfoText:setText( Engine.CBBHFCGDIC( "BR_PAYLOAD/NEED_X_TO_WIN", f7_local0.numNeededToWin ) )
	if f7_local0.allPathsCompleted then
		ACTIONS.AnimateSequence( f7_arg0, "AttackersCompletedAllPaths" )
	end
	ACTIONS.AnimateSequence( f7_arg0, "ShowTextOnBink" )
	f7_arg0.Cinematic:SetAlpha( 1 )
	f7_local1 = "mp_payload_switchingsides"
	local f7_local4 = "ui_iw8_br_victory_slam"
	f7_arg0._binkLayer = MenuBuilder.BuildRegisteredType( "BRBink", {
		wantsInput = false,
		skipIntro = true,
		controllerIndex = f7_arg1
	} )
	f7_arg0:addElement( f7_arg0._binkLayer )
	f7_arg0._binkLayer:PlayVideo( {
		isSquadEliminatedBink = true,
		videoName = f7_local1,
		soundName = f7_local4
	} )
	f7_local2 = f7_arg0:Wait( f0_local0 )
	f7_local2.onComplete = function ()
		ACTIONS.AnimateSequence( f7_arg0, "Hide" )
	end
	
end

function BRPayloadEndRoundPopup( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "BRPayloadEndRoundPopup"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local Cinematic = nil
	
	Cinematic = MenuBuilder.BuildRegisteredType( "Cinematic", {
		controllerIndex = f1_local1
	} )
	Cinematic.id = "Cinematic"
	Cinematic:SetAlpha( 0, 0 )
	Cinematic:SetAnchorsAndPosition( 0, 0, 0, 0, _1080p * 2, 0, 0, 0 )
	self:addElement( Cinematic )
	self.Cinematic = Cinematic
	
	local AtackersImage = nil
	
	AtackersImage = LUI.UIImage.new()
	AtackersImage.id = "AtackersImage"
	AtackersImage:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 394, _1080p * 787, _1080p * 296, _1080p * 424 )
	self:addElement( AtackersImage )
	self.AtackersImage = AtackersImage
	
	local DefentersImage = nil
	
	DefentersImage = LUI.UIImage.new()
	DefentersImage.id = "DefentersImage"
	DefentersImage:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1133, _1080p * 1526, _1080p * 296, _1080p * 424 )
	self:addElement( DefentersImage )
	self.DefentersImage = DefentersImage
	
	local EnemyLabel = nil
	
	EnemyLabel = LUI.UIText.new()
	EnemyLabel.id = "EnemyLabel"
	EnemyLabel:setText( Engine.CBBHFCGDIC( "MP_INGAME_ONLY/OBJ_ENEMY_CAPS" ), 0 )
	EnemyLabel:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	EnemyLabel:SetAlignment( LUI.Alignment.Center )
	EnemyLabel:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1080, _1080p * 1567, _1080p * 248, _1080p * 296 )
	self:addElement( EnemyLabel )
	self.EnemyLabel = EnemyLabel
	
	local YouLabel = nil
	
	YouLabel = LUI.UIText.new()
	YouLabel.id = "YouLabel"
	YouLabel:setText( ToUpperCase( Engine.CBBHFCGDIC( "BR_PAYLOAD/YOU" ) ), 0 )
	YouLabel:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	YouLabel:SetAlignment( LUI.Alignment.Center )
	YouLabel:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 340, _1080p * 840, _1080p * 248, _1080p * 296 )
	self:addElement( YouLabel )
	self.YouLabel = YouLabel
	
	local AttackersLabel = nil
	
	AttackersLabel = LUI.UIText.new()
	AttackersLabel.id = "AttackersLabel"
	AttackersLabel:SetRGBFromInt( 0, 0 )
	AttackersLabel:setText( ToUpperCase( Engine.CBBHFCGDIC( "BR_PAYLOAD/ATTACKERS" ) ), 0 )
	AttackersLabel:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	AttackersLabel:SetAlignment( LUI.Alignment.Center )
	AttackersLabel:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 394, _1080p * 787, _1080p * 336, _1080p * 384 )
	self:addElement( AttackersLabel )
	self.AttackersLabel = AttackersLabel
	
	local DefendersLabel = nil
	
	DefendersLabel = LUI.UIText.new()
	DefendersLabel.id = "DefendersLabel"
	DefendersLabel:SetRGBFromInt( 0, 0 )
	DefendersLabel:setText( ToUpperCase( Engine.CBBHFCGDIC( "BR_PAYLOAD/DEFENDERS" ) ), 0 )
	DefendersLabel:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	DefendersLabel:SetAlignment( LUI.Alignment.Center )
	DefendersLabel:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1133, _1080p * 1526, _1080p * 336, _1080p * 384 )
	self:addElement( DefendersLabel )
	self.DefendersLabel = DefendersLabel
	
	local DefenderInfoText = nil
	
	DefenderInfoText = LUI.UIText.new()
	DefenderInfoText.id = "DefenderInfoText"
	DefenderInfoText:setText( "", 0 )
	DefenderInfoText:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	DefenderInfoText:SetAlignment( LUI.Alignment.Left )
	DefenderInfoText:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1133, _1080p * 1790, _1080p * 486, _1080p * 522 )
	self:addElement( DefenderInfoText )
	self.DefenderInfoText = DefenderInfoText
	
	local AttackerInfoText = nil
	
	AttackerInfoText = LUI.UIText.new()
	AttackerInfoText.id = "AttackerInfoText"
	AttackerInfoText:setText( "", 0 )
	AttackerInfoText:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	AttackerInfoText:SetAlignment( LUI.Alignment.Left )
	AttackerInfoText:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 394, _1080p * 1042, _1080p * 486, _1080p * 522 )
	self:addElement( AttackerInfoText )
	self.AttackerInfoText = AttackerInfoText
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	local f1_local12 = nil
	EnemyLabel:RegisterAnimationSequence( "YouAttacker", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 1086
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1573
		}
	} )
	YouLabel:RegisterAnimationSequence( "YouAttacker", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 340
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 840
		}
	} )
	self._sequences.YouAttacker = function ()
		menu:AnimateSequence( "YouAttacker" )
		menu:AnimateSequence( "YouAttacker" )
	end
	
	local f1_local13 = nil
	EnemyLabel:RegisterAnimationSequence( "YouDefender", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 347
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 834
		}
	} )
	YouLabel:RegisterAnimationSequence( "YouDefender", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 1080
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1580
		}
	} )
	self._sequences.YouDefender = function ()
		menu:AnimateSequence( "YouDefender" )
		menu:AnimateSequence( "YouDefender" )
	end
	
	self._sequences.AttackersCompletedAllPaths = function ()
		
	end
	
	local f1_local14 = nil
	Cinematic:RegisterAnimationSequence( "Hide", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	AtackersImage:RegisterAnimationSequence( "Hide", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	DefentersImage:RegisterAnimationSequence( "Hide", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	EnemyLabel:RegisterAnimationSequence( "Hide", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	YouLabel:RegisterAnimationSequence( "Hide", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	AttackersLabel:RegisterAnimationSequence( "Hide", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	DefendersLabel:RegisterAnimationSequence( "Hide", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	DefenderInfoText:RegisterAnimationSequence( "Hide", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	AttackerInfoText:RegisterAnimationSequence( "Hide", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.Hide = function ()
		menu:AnimateSequence( "Hide" )
		menu:AnimateSequence( "Hide" )
		menu:AnimateSequence( "Hide" )
		menu:AnimateSequence( "Hide" )
		menu:AnimateSequence( "Hide" )
		menu:AnimateSequence( "Hide" )
		menu:AnimateSequence( "Hide" )
		menu:AnimateSequence( "Hide" )
		menu:AnimateSequence( "Hide" )
	end
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "BRPayloadEndRoundPopup", BRPayloadEndRoundPopup )
LockTable( _M )
