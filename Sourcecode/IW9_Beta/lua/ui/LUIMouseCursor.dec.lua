-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:01
LUI.UIMouseCursor = LUI.Class( LUI.UIElement )
LUI.UIMouseCursor.priority = 1000
LUI.UIMouseCursor.mouseTimeout = 3000
LUI.UIMouseCursor.cinematicHideDelay = 2000
local f0_local0 = function ( f6_arg0, f6_arg1 )
	local f6_local0 = f6_arg0.lastMoveTime + LUI.UIMouseCursor.cinematicHideDelay <= Engine[0x6991337AE950F99]()
	local f6_local1 = Engine[0xB63308D00984B0A]()
	if f6_local1 and not f6_arg0.hiddenInCinematic and f6_local0 then
		f6_arg0:SetAlpha( 0 )
		f6_arg0.hiddenInCinematic = true
		if Engine[0x3ECA657EE4C6C9]() then
			Engine[0x5F965FF5540EAC8]( false )
		end
	elseif (not f6_local0 or not f6_local1) and f6_arg0.hiddenInCinematic then
		f6_arg0:SetAlpha( f6_arg0.showCursor )
		f6_arg0.hiddenInCinematic = false
		if Engine[0x3ECA657EE4C6C9]() then
			Engine[0x5F965FF5540EAC8]( f6_arg0.showCursor == 1 )
		end
	end
end

MouseCursorType = {
	CURSOR_TYPE_ARROW_NORMAL = {
		id = 0,
		material = 0x7CB1873354650DD
	},
	CURSOR_TYPE_ARROW_ACTIVE = {
		id = 1,
		material = 0x210AC0BFD3EEAC8
	},
	CURSOR_TYPE_ARROW_UNAVAILABLE = {
		id = 2
	},
	CURSOR_TYPE_ARROW_INACTIVE = {
		id = 3
	},
	CURSOR_TYPE_ARROW_CONTEXTUAL = {
		id = 4,
		material = 0x1C0C0BC9681129
	},
	CURSOR_TYPE_ROTATION_NORMAL = {
		id = 5,
		material = 0x8CB311FCA9ED574
	},
	CURSOR_TYPE_ROTATION_ACTIVE = {
		id = 6
	},
	CURSOR_TYPE_ROTATION_UNAVAILABLE = {
		id = 7
	},
	CURSOR_TYPE_ARROW_PANFOURWAYS = {
		id = 8,
		material = 0x71114F6E17061AD
	},
	CURSOR_TYPE_IBEAM = {
		id = 9,
		material = 0xDC62AB4D375A4A7
	},
	CURSOR_TYPE_WIN_ARROW = {
		id = 10
	},
	CURSOR_TYPE_WIN_HAND = {
		id = 11
	},
	CURSOR_TYPE_WIN_IBEAM = {
		id = 12
	}
}
LUI.UIMouseCursor.UpdateMouseCursor = function ( f5_arg0, f5_arg1 )
	local f5_local0 = MouseCursorType.CURSOR_TYPE_ARROW_NORMAL
	if f5_arg0 then
		local f5_local1 = LUI.MouseCursorContextualMenuLayer.GetLayer()
		local f5_local2
		if f5_local1 then
			f5_local2 = f5_local1
		else
			f5_local2 = f5_local1:AnyValidContextualDataConditions( f5_arg0, f5_arg1, nil )
		end
		local f5_local3 = false
		if CONDITIONS.IsMobileOrMobileSim() then
			f5_local3 = f5_arg0.handleTouchInput
		else
			f5_local3 = f5_arg0.handleMouseButton
		end
		if f5_local2 then
			f5_local0 = MouseCursorType.CURSOR_TYPE_ARROW_CONTEXTUAL
		elseif f5_arg0._mouseCursorTypeOverride then
			f5_local0 = f5_arg0._mouseCursorTypeOverride
		elseif f5_local3 then
			f5_local0 = MouseCursorType.CURSOR_TYPE_ARROW_ACTIVE
		end
	end
	local f5_local1 = Engine[0xEE6F69FEA944B13]()
	f5_local1 = f5_local1.cursor
	if f5_local1 then
		f5_local1._controllerIndex = f5_arg1
		f5_local1:SetMouseCursorController( f5_arg1 )
		if f5_local1._currentCursorType ~= f5_local0 then
			f5_local1._currentCursorType = f5_local0
			if Engine[0x3ECA657EE4C6C9]() then
				Engine[0x4D9D0802A4A54A3]( f5_local0.id )
			else
				local f5_local2 = RegisterMaterial
				local f5_local4 = f5_local0.material
				if not f5_local4 then
					f5_local4 = MouseCursorType.CURSOR_TYPE_ARROW_NORMAL.material
				end
				f5_local2 = f5_local2( f5_local4 )
				assert( f5_local2, "Cursor material " .. tostring( f5_local0.material ) .. " invalid or not loaded" )
				f5_local1:setImage( f5_local2 )
			end
		end
	end
end

LUI.UIMouseCursor.SetMouseVisibility = function ( f4_arg0 )
	local f4_local0 = Engine[0xEE6F69FEA944B13]()
	f4_local0 = f4_local0.cursor
	if f4_local0 then
		if f4_arg0 then
			f4_arg0 = f4_local0.showCursor == 1
		end
		local f4_local1 = f4_local0
		local f4_local2 = f4_local0.SetVisibility
		local f4_local3
		if f4_arg0 then
			f4_local3 = LUI.Visibility.Visible
			if not f4_local3 then
			
			else
				f4_local2( f4_local1, f4_local3 )
				if Engine[0x3ECA657EE4C6C9]() then
					Engine[0x5F965FF5540EAC8]( f4_arg0 )
				end
			end
		end
		f4_local3 = LUI.Visibility.Hidden
	end
end

LUI.UIMouseCursor.init = function ( f1_arg0, f1_arg1 )
	LUI.UIMouseCursor.super.init( f1_arg0 )
	f1_arg0.id = "UIMouseCursor"
	f1_arg0:SetupMouseCursor()
	f1_arg0:SetAnchorsAndPosition( 0, 1, 0, 1, -32, 32, -32, 32 )
	f1_arg0:setImage( RegisterMaterial( 0x7CB1873354650DD ) )
	f1_arg0:setPriority( LUI.UIMouseCursor.priority )
	f1_arg0.lastMoveTime = Engine[0x6991337AE950F99]()
	f1_arg0.showCursor = 0
	f1_arg0.hiddenInCinematic = false
	f1_arg0:SetAlpha( 0 )
	local f1_local0 = function ()
		f1_arg0.lastMoveTime = Engine[0x6991337AE950F99]()
		if f1_arg0.showCursor == 0 then
			f1_arg0:SetAlpha( 1 )
			f1_arg0.showCursor = 1
			if Engine[0x3ECA657EE4C6C9]() then
				Engine[0x5F965FF5540EAC8]( true )
			end
		end
		if f1_arg0.hiddenInCinematic then
			f1_arg0:SetAlpha( f1_arg0.showCursor )
			f1_arg0.hiddenInCinematic = false
			if Engine[0x3ECA657EE4C6C9]() then
				Engine[0x5F965FF5540EAC8]( f1_arg0.showCursor == 1 )
			end
		end
	end
	
	f1_arg0:registerEventHandler( "mousedown", f1_local0 )
	f1_arg0:SubscribeToModel( DataModel[0x40E824FE270E174]( DataModel[0x4DF5CFBC1771947]( f1_arg1.controllerIndex ), "cursor.notify" ), f1_local0, true )
	local self = LUI.UITimer.new( {
		interval = 1000,
		broadcastToRoot = false,
		disposable = false,
		event = {
			name = "update_mouse"
		},
		eventTarget = f1_arg0
	} )
	self.id = "updateTimer"
	f1_arg0:addElement( self )
	f1_arg0:registerEventHandler( "update_mouse", f0_local0 )
	f1_arg0:registerEventHandler( "update_input_type", function ( element, event )
		if LUI.IsLastInputGamepad( event.controllerIndex ) and element.showCursor == 1 then
			element:SetAlpha( 0, 400 )
			element.showCursor = 0
			if Engine[0x3ECA657EE4C6C9]() then
				Engine[0x5F965FF5540EAC8]( false )
			end
		end
	end )
end

