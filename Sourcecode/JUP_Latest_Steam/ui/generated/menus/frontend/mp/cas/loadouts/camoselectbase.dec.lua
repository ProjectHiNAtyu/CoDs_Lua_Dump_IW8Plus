-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
module( ..., package.seeall )
local f0_local0 = "camo_category_special"
local f0_local1 = 5
local f0_local2 = function ( f51_arg0 )
	for f51_local3, f51_local4 in ipairs( f51_arg0._currentCamos ) do
		if f51_arg0._equippedCamoRef == f51_local4[0x9E9C01960F4C582] then
			return f51_local3 - 1
		end
	end
	return 0
end

local f0_local3 = function ( f50_arg0 )
	return f50_arg0.CamoGrid:GetFocusPositionIndex() + 1
end

local f0_local4 = function ( f48_arg0 )
	local f48_local0 = function ()
		for f49_local3, f49_local4 in ipairs( f48_arg0._currentCamos ) do
			if f48_arg0._equippedCamo == f49_local4[0x9E9C01960F4C582] then
				return f49_local3 - 1
			end
		end
	end
	
	f48_arg0.CamoGrid:SetFocusedPosition( f48_arg0.CamoGrid:GetPositionForIndex( f48_local0() or 0 ), true )
end

local f0_local5 = function ( f45_arg0, f45_arg1 )
	f45_arg1:SetupContextualMenu()
	f45_arg1:AddContextualMenuAction( {
		button = "button_l3",
		id = "weaponPreview",
		actionName = Engine[0xED84C33EC5F01EA]( 0xCBEAF62674E5E75 ),
		actionFunction = function ()
			LUI.FlowManager.RequestAddMenu( "WeaponPreview", true, f45_arg0._controllerIndex, nil, {
				weaponTable = f45_arg0._weaponTableWithHighlightedCamo
			}, true )
		end,
		conditionFunction = function ()
			return CONDITIONS.IsWeaponPreviewEnabled()
		end,
		helper_definition = Engine[0xED84C33EC5F01EA]( 0xE272C3C014D638E )
	} )
end

local f0_local6 = function ( f44_arg0 )
	local f44_local0 = f44_arg0._camoTable[f0_local0( f44_arg0 )]
	if f44_arg0._equippedCamo == f44_local0.ref then
		f44_local0 = f44_arg0._camoTable[1]
	end
	WEAPON.SetModelIfLoaded( f44_arg0._controllerIndex, f44_arg0.weaponModel, previewModel )
	f44_arg0:UpdateGrid()
	local f44_local1 = "hud_cmd_active_backer"
	if f44_local0.image ~= "" then
		f44_local1 = f44_local0.image
	end
	LUI.ToastManager.CreateToast( f44_arg0._controllerIndex, LUI.ToastManager.StandardEmphasisToast( Engine[0xED84C33EC5F01EA]( 0xAAB5FB01F30E21D ), Engine[0xED84C33EC5F01EA]( f44_local0.name ), LUI.ToastManager.ToastNotificationType.Gear ) )
end

local f0_local7 = function ( f43_arg0, f43_arg1, f43_arg2 )
	if Engine[0x12586A3F4FB490E]() then
		f43_arg0._weaponTableWithHighlightedCamo = WEAPON.GenerateWeaponTable( f43_arg0._weaponPlayerData )
		f43_arg0._weaponTableWithHighlightedCamo.camo = f43_arg2
		local f43_local0 = WEAPON.GetWeaponModelName( f43_arg0._weaponTableWithHighlightedCamo.weapon, f43_arg0._weaponTableWithHighlightedCamo, {
			includeCamos = true,
			includeAttachments = true,
			includeStickers = true,
			controllerIndex = f43_arg0._controllerIndex
		} )
		FrontEndScene.RequestWeaponViewModels( {
			f43_local0
		}, f43_arg1 )
		WEAPON.SetModelIfLoaded( f43_arg1, f43_arg0.weaponModel, f43_local0, {
			modelWeaponTable = f43_arg0._weaponTableWithHighlightedCamo
		} )
	end
end

local f0_local8 = function ( f42_arg0, f42_arg1, f42_arg2 )
	LOOT.SendDlogLootEquipped( f42_arg1, LOOT.itemTypes.CAMO, nil, nil, f42_arg0._equippedCamoRef, f42_arg2 )
	WEAPON.SetEquippedCamo( f42_arg0._weaponPlayerData, f42_arg2 )
	f42_arg0._equippedCamoRef = f42_arg2
	f42_arg0.CamoGrid:RefreshContent()
	f0_local0( f42_arg0, f42_arg1, f42_arg2 )
	if f42_arg0.HelperBar then
		f42_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			side = "left",
			priority = 2,
			button_ref = "button_alt1",
			helper_text = Engine[0xED84C33EC5F01EA]( 0xDE44C2C175C6810 ),
			helper_definition = Engine[0xED84C33EC5F01EA]( 0x1EF5450F3216318 )
		} )
	end
	if f42_arg0.CategoryGrid then
		f42_arg0.CategoryGrid:RefreshContent()
	end
end

local f0_local9 = function ( f41_arg0 )
	local f41_local0 = f41_arg0._camoTable[f0_local0( f41_arg0 )]
	f41_arg0.CamoPanel.Name:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( f41_local0.name ) ) )
	local f41_local1 = f41_arg0._equippedCamo == f41_local0.ref
	if f41_local1 and not f41_arg0.CamoPanel.EquippedWidget.enabled then
		ACTIONS.AnimateSequence( f41_arg0.CamoPanel.EquippedWidget, "TurnOn" )
	end
	f41_arg0.CamoPanel.EquippedWidget:UpdateVisibility( f41_local1 )
	local f41_local2 = f41_local0.unlockInfo
	f41_local2.equipped = f41_local1
	f41_local2.lockedText = Engine[0xED84C33EC5F01EA]( 0xF156DEC747BDAB8 )
	f41_arg0.CamoPanel:UpdatePanelInfo( f41_local2 )
	if Engine[0x12586A3F4FB490E]() then
		local f41_local3 = WEAPON.GenerateWeaponTable( f41_arg0.weaponPlayerData )
		f41_local3.camo = f41_local0.ref
		local f41_local4 = WEAPON.GetWeaponModelName( f41_local3.weapon, f41_local3, {
			includeCamos = true,
			includeAttachments = true,
			includeStickers = true,
			controllerIndex = f41_arg0._controllerIndex
		} )
		FrontEndScene.RequestWeaponViewModels( {
			f41_local4
		}, f41_arg0._controllerIndex )
		WEAPON.SetModelIfLoaded( f41_arg0._controllerIndex, f41_arg0.weaponModel, f41_local4, {
			modelWeaponTable = f41_local3
		} )
	end
end

local f0_local10 = function ( f40_arg0, f40_arg1, f40_arg2, f40_arg3 )
	f40_arg0._unlockAmount = 0
	f40_arg1._camoData = f40_arg2
	local f40_local0 = {
		imageSize = "ImageFull",
		removeText = true,
		buttonData = {
			image = f40_arg1._camoData[0xAB612888528489A]
		}
	}
	local f40_local1 = CSV.gunsmithChallenges.GetFile()
	f40_arg1._challengeDesc = StringTable[0x2DCF0973239E909]( f40_local1, CSV.gunsmithChallenges.cols.loot, f40_arg1._camoData[0x28887F70BF5EBA], CSV.gunsmithChallenges.cols.desc )
	f40_arg1._challengeAmount = tonumber( StringTable[0x2DCF0973239E909]( f40_local1, CSV.gunsmithChallenges.cols.loot, f40_arg1._camoData[0x28887F70BF5EBA], CSV.gunsmithChallenges.cols.amount ) )
	f40_arg1._challengeID = StringTable[0x2DCF0973239E909]( f40_local1, CSV.gunsmithChallenges.cols.loot, f40_arg1._camoData[0x28887F70BF5EBA], CSV.gunsmithChallenges.cols.id )
	f40_arg1._currentProgress = Challenge.GetChallengeProgress( f40_arg3, f40_arg1._challengeID )
	f40_arg1._challengeRef = StringTable[0x2DCF0973239E909]( f40_local1, CSV.gunsmithChallenges.cols.loot, f40_arg1._camoData[0x28887F70BF5EBA], CSV.gunsmithChallenges.cols.ref )
	f40_arg1._isSpecial = f40_arg1._camoData[0xA86D464182EDEB5] == f0_local0
	if not LUI.StringIsNilOrEmpty( f40_arg1._challengeRef ) and not f40_arg1._isSpecial then
		local f40_local2 = String.Split( f40_arg1._challengeRef, "_" )
		f40_arg1._challengeWeaponRef = f40_local2[1] .. "_" .. f40_local2[2] .. "_" .. f40_local2[3]
		f40_arg1._currentProgress = OnlineChallenges[0x77167A1140D536]( f40_arg3, f40_arg1._challengeID )
	else
		f40_arg1._challengeWeaponRef = nil
	end
	f40_arg1:SetupButton( f40_local0 )
	local f40_local2 = f40_arg1._camoData[0x9E9C01960F4C582] == f40_arg0._equippedCamo
	if f40_local2 then
		f40_arg0._equippedButton = f40_arg1
	end
	f40_arg1:SetEquipped( f40_local2 )
	if not CONDITIONS.IsMobileOrMobileSim() then
		f0_local0( f40_arg0, f40_arg1 )
	end
	if f40_arg1._challengeID then
		f40_arg1._isUnlocked = LOOT.IsUnlockedWithID( f40_arg3, tonumber( f40_arg1._camoData[0x28887F70BF5EBA] ) )
		f40_arg1:SetDisabled( not f40_arg1._isUnlocked )
		f40_arg0._unlockAmount = f40_arg1._isUnlocked and f40_arg0._unlockAmount + 1 or f40_arg0._unlockAmount
		if not f40_arg1._isUnlocked then
			local f40_local3 = f40_arg1._currentProgress
			local f40_local4 = f40_arg1._challengeAmount
			if f40_arg1._altCurrentProgress and f40_arg1._altChallengeAmount and f40_arg1._altCurrentProgress ~= f40_arg1._altChallengeAmount then
				f40_local3 = f40_arg1._altCurrentProgress
				f40_local4 = f40_arg1._altChallengeAmount
			end
			if 0 < f40_local4 then
				local f40_local5 = LUI.clamp( f40_local3 / f40_local4, 0, 1 )
				if f40_arg1.SetProgress then
					f40_arg1:SetProgress( f40_arg3, 1 - f40_local5 )
				end
			end
		end
	end
end

local f0_local11 = function ( f39_arg0, f39_arg1 )
	if not f39_arg0._equippedCamoRef or f39_arg0._equippedCamoRef == WEAPON.CamoNoneValue then
		return 
	end
	LOOT.SendDlogLootEquipped( f39_arg1, LOOT.itemTypes.CAMO, nil, nil, f39_arg0._equippedCamoRef, WEAPON.CamoNoneValue )
	WEAPON.SetEquippedCamo( f39_arg0._weaponPlayerData, WEAPON.CamoNoneValue )
	f39_arg0._equippedCamoRef = WEAPON.CamoNoneValue
	f39_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
		button_ref = "button_alt1"
	} )
	f39_arg0.CamoGrid:RefreshContent()
	if Engine[0x12586A3F4FB490E]() then
		local f39_local0 = WEAPON.GenerateWeaponTable( f39_arg0._weaponPlayerData )
		f39_local0.camo = WEAPON.CamoNoneValue
		local f39_local1 = WEAPON.GetWeaponModelName( f39_local0.weapon, f39_local0, {
			includeCamos = true,
			includeAttachments = true,
			includeStickers = true,
			controllerIndex = f39_arg1
		} )
		FrontEndScene.RequestWeaponViewModels( {
			f39_local1
		}, f39_arg1 )
		WEAPON.SetModelIfLoaded( f39_arg1, f39_arg0.weaponModel, f39_local1, {
			modelWeaponTable = f39_local0
		} )
	end
	if f39_arg0.CategoryGrid then
		f39_arg0.CategoryGrid:RefreshContent()
	end
end

local f0_local12 = function ( f38_arg0, f38_arg1 )
	if f38_arg0.UnlockCount then
		if f38_arg0.isAllUnlockedCamos then
			f38_arg0.AllUnlockedCamosCount:setText( Engine[0xED84C33EC5F01EA]( 0x74821ADAF79FD0F, #f38_arg0._allUnlocksTable - f38_arg0._invisibleButtonAmount, f38_arg0._totalCamoAmount ) )
		else
			local f38_local0 = 0
			for f38_local4, f38_local5 in ipairs( f38_arg0._currentCamos ) do
				if f38_local5[0x28887F70BF5EBA] and LOOT.IsUnlockedWithID( f38_arg1, tonumber( f38_local5[0x28887F70BF5EBA] ) ) then
					f38_local0 = f38_local0 + 1
				end
			end
			f38_arg0.UnlockCount:UpdateCount( f38_local0, #f38_arg0._currentCamos, false, f38_arg0._currentCategory[0x4BCADBA8E631B86] )
		end
	end
end

local f0_local13 = function ( f37_arg0, f37_arg1 )
	f37_arg0._equippedCamoRef = WEAPON.GetEquippedCamo( f37_arg0._weaponPlayerData )
	f37_arg0.CamoGrid:RemoveFocusFromChild()
	f37_arg0.CamoGrid:SetNumChildren( #f37_arg0._currentCamos )
	f37_arg0.CamoGrid:RefreshContent()
	if f37_arg0.UnlockCount then
		f37_arg0.UnlockCount:UpdateCount( f37_arg0._unlockAmount, #f37_arg0._currentCamos, false, f37_arg0._currentCategory[0x4BCADBA8E631B86] )
	end
	f0_local0( f37_arg0, f37_arg1 )
end

local f0_local14 = function ( f35_arg0 )
	return function ( f36_arg0, f36_arg1, f36_arg2 )
		local f36_local0 = f35_arg0._currentCamos[f36_arg1 + f36_arg2 * f35_arg0.CamoGrid:GetNumColumns() + 1]
		local f36_local1 = f35_arg0._equippedCamo == f36_local0[0x9E9C01960F4C582]
		local f36_local2 = {
			buttonData = {
				image = f36_local0[0xAB612888528489A]
			}
		}
		f35_arg0( f35_arg0, f36_arg0, f36_local0, f35_arg0._controllerIndex )
		f36_arg0:SetEquipped( f36_local1 )
	end
	
end

local f0_local15 = function ( f34_arg0 )
	local f34_local0 = f34_arg0._categoryIndex + 1
	if #f34_arg0._categoryTable < f34_local0 then
		f34_local0 = 1
	end
	local f34_local1 = f34_arg0._categoryIndex - 1
	if f34_local1 < 1 then
		f34_local1 = #f34_arg0._categoryTable
	end
	f34_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "right",
		button_ref = "button_shoulderr",
		priority = 1,
		helper_text = Engine[0xED84C33EC5F01EA]( 0xCC062AD4C358A2B, f34_arg0._categoryTable[f34_local0][0x4BCADBA8E631B86] )
	} )
	f34_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_shoulderl",
		priority = 1,
		helper_text = Engine[0xED84C33EC5F01EA]( 0xCC062AD4C358A2B, f34_arg0._categoryTable[f34_local1][0x4BCADBA8E631B86] )
	} )
end

local f0_local16 = function ( f33_arg0, f33_arg1 )
	f33_arg0._categoryIndex = f33_arg1
	f33_arg0._currentCategory = f33_arg0._categoryTable[f33_arg0._categoryIndex]
	f33_arg0._currentCamos = f33_arg0._camoTable[f33_arg0._currentCategory[0x9E9C01960F4C582]]
	f0_local0( f33_arg0 )
	f33_arg0.CamoGrid:SetFocusedPosition( {
		x = 0,
		y = 0
	}, false, false )
	if f33_arg0.HelperBar then
		f0_local0( f33_arg0 )
	end
	f33_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0x6A51E18DC8715B7, f33_arg0._currentCategory[0x4BCADBA8E631B86] ) )
end

local f0_local17 = function ( f32_arg0, f32_arg1, f32_arg2 )
	local f32_local0 = Challenge.GetAEKindID( TrackedChallenges.Kind.GUNSMITH )
	local f32_local1 = WEAPON.GetCamoDataForRef( f32_arg1 )
	if f32_local1 and string.match( f32_local1[0xA86D464182EDEB5], WEAPON.CAMO_CATEGORY_EVENTS ) then
		local f32_local2 = Challenge.GetGunsmithChallengeByID( f32_arg2 )
		if f32_local2 and Challenge.IsChallengeFieldRepKind( f32_arg0, f32_local2.ref ) then
			f32_local0 = Challenge.GetAEKindID( TrackedChallenges.Kind.FIELD_REP )
		else
			f32_local0 = Challenge.GetAEKindID( TrackedChallenges.Kind.SEASONAL )
		end
	end
	return f32_local0
end

local f0_local18 = function ( f31_arg0, f31_arg1 )
	local f31_local0 = f31_arg1.camoRef
	local f31_local1 = f31_arg1.controller
	local f31_local2 = f31_arg1.challengesData
	local f31_local3 = LOOT.GetItemIDFromRef( f31_local0 )
	local f31_local4 = GUNSMITH.GetCamoDetails( f31_local1, f31_local0, f31_local2 )
	if f31_arg0.CamoTitle then
		f31_arg0[0x121B4F363D27B5]:SetData( {
			id = f31_local3,
			weaponRef = f31_local2.challengeWeaponRef,
			data = f31_local4
		} )
	elseif f31_arg0.ItemDetails then
		f31_arg0.ItemDetails:UpdateDetails( f31_local4 )
	end
	f0_local0( f31_arg0, f31_local1, f31_local0 )
	local f31_local5 = f0_local0( f31_arg1.controller, f31_arg1.camoRef, f31_local2.challengeID )
	if CONDITIONS.IsChallengeTrackingEnabled() and f31_arg0.ButtonHelperBar then
		TrackedChallenges.RefreshButtonHelperBarPrompts( f31_arg0, f31_local1, f31_arg0.ButtonHelperBar, f31_local2.challengeID, f31_local5, {
			priority = 2
		} )
	end
	return true
end

local f0_local19 = function ( f30_arg0, f30_arg1 )
	local f30_local0 = f30_arg1.camoRef
	local f30_local1 = f30_arg1.controller
	if f30_local0 == f30_arg0._equippedCamoRef then
		f0_local0( f30_arg0, f30_local1 )
	else
		f0_local0( f30_arg0, f30_local1, f30_local0 )
	end
end

local f0_local20 = function ( f29_arg0 )
	if f29_arg0.isAllUnlockedCamos then
		f29_arg0._nextCategoryIndex = f29_arg0._categoryIndex + 1
		if #f29_arg0._categoryTable < f29_arg0._nextCategoryIndex then
			f29_arg0._nextCategoryIndex = f29_arg0._categoryIndex
		end
		f29_arg0._prevCategoryIndex = f29_arg0._categoryIndex - 1
		if f29_arg0._prevCategoryIndex < 1 then
			f29_arg0._prevCategoryIndex = f29_arg0._categoryIndex
		end
	else
		f29_arg0._nextCategoryIndex = f29_arg0._categoryIndex
		f29_arg0._prevCategoryIndex = f29_arg0._categoryIndex
	end
end

local f0_local21 = function ( f23_arg0, f23_arg1, f23_arg2, f23_arg3, f23_arg4 )
	if not f23_arg4 then
		f23_arg4 = {}
	end
	local f23_local0 = f23_arg2
	local f23_local1 = f23_arg2.SetAlpha
	local f23_local2
	if f23_arg4.isInvisibleButton then
		f23_local2 = 0
	else
		f23_local2 = 1
	end
	f23_local1( f23_local0, f23_local2 )
	f23_arg2:SetMouseFocusBlocker( f23_arg4.isInvisibleButton )
	f23_arg2.isInvisibleButton = f23_arg4.isInvisibleButton
	f23_local1 = nil
	if not f23_arg2.isInvisibleButton then
		f23_arg2.camoRef = f23_arg3[0x9E9C01960F4C582]
		f23_local1 = f23_arg3[0x28887F70BF5EBA]
		GUNSMITH.SetupCamoButton( f23_arg1, f23_arg2, f23_arg3[0xAB612888528489A], f23_arg2.camoRef == f23_arg0._equippedCamoRef, f23_arg0 )
		f23_arg2:SetDisabled( GUNSMITH.IsCamoChallengeDisabled( f23_arg1, f23_local1 ) )
		f23_arg2.challengesData = GUNSMITH.GetCamoChallenges( f23_arg1, f23_arg2.camoRef, {
			camoData = f23_arg3
		} )
		f23_local2 = GUNSMITH.GetCamoChallengeProgression( f23_arg1, f23_arg2.challengesData )
		if f23_arg2.SetProgress and f23_local2 then
			f23_arg2:SetProgress( f23_arg1, f23_local2 )
		end
	end
	local f23_local3
	if not f23_arg4.showCategoryLine then
		f23_local3 = f23_arg4.isLastInCategory
		if f23_local3 then
		
		else
			f23_arg2:ShowCategoryLine( f23_local3, f23_arg4.isLastInCategory )
			if f23_arg4.isFirstInCategory and f23_arg4.categoryName then
				f23_arg2:CreateCamoCategoryTitle( f23_arg1, f23_arg4.categoryName, f23_arg4.isLastInCategory, f23_arg4.columnWidthLimit )
			else
				f23_arg2:RemoveCamoCategoryTitle()
			end
			f23_local0 = function ( f28_arg0, f28_arg1 )
				if f28_arg0.isInvisibleButton then
					if not LUI.IsLastInputMouseNavigation( f28_arg1.controller or f23_arg0 ) and f28_arg0.gridData and f23_arg0.CategoryGrid then
						f23_arg0.CategoryGrid:SetFocusedPosition( {
							x = f28_arg0.gridData.col,
							y = f28_arg0.gridData.row - 1
						}, false, true )
						f23_arg0._lastFocusedElement = f23_arg0.CategoryGrid:GetElementAtPosition( f28_arg0.gridData.col, f28_arg0.gridData.row - 1 )
					end
					return 
				elseif f23_arg0._lastFocusedElement then
					f23_arg0._lastFocusedElement:processEvent( {
						name = "lose_focus"
					} )
					f23_arg0._lastFocusedElement = nil
				end
				f23_arg0._currentFocusedElement = f28_arg0
				f28_arg0:dispatchEventToCurrentMenu( {
					name = "camo_button_over",
					controller = f23_arg0,
					camoRef = f28_arg0.camoRef,
					challengesData = f28_arg0.challengesData
				} )
				return true
			end
			
			f23_arg2:addEventHandler( "button_over", f23_local0 )
			f23_arg2:addEventHandler( "button_over_disable", f23_local0 )
			f23_arg2:registerEventHandler( "button_action", function ( element, event )
				if element.isInvisibleButton then
					return 
				else
					element:dispatchEventToCurrentMenu( {
						name = "camo_button_action",
						controller = f23_arg0,
						camoRef = element.camoRef
					} )
				end
			end )
			f23_local2 = function ( f26_arg0, f26_arg1 )
				local f26_local0 = f26_arg0.challengesData
				if f26_local0 then
					f26_local0 = tonumber( f26_arg0.challengesData.challengeID )
				end
				if CONDITIONS.IsChallengeTrackingEnabled() and f26_local0 then
					local f26_local1 = f23_arg0( f26_arg1.controller, f26_arg0.camoRef, f26_arg0.challengesData.challengeID )
					TrackedChallenges.AttemptTrackChallenge( f26_arg0, f26_arg1.controller, f26_local0, f26_local1 )
					if f23_arg0.ButtonHelperBar then
						TrackedChallenges.RefreshButtonHelperBarPrompts( f23_arg0, f26_arg1.controller, f23_arg0.ButtonHelperBar, f26_local0, f26_local1, {
							priority = 2
						} )
					end
				end
			end
			
			f23_arg0:AddGamepadEventCallback( "button_primary", function ( f25_arg0, f25_arg1 )
				if f23_arg0._currentFocusedElement and f23_arg0._currentFocusedElement:IsDisabled() then
					f23_arg0._currentFocusedElement:processEvent( {
						name = "button_action_disable",
						immediate = true,
						controller = f25_arg1.controller
					} )
					return true
				else
					
				end
			end )
			f23_arg2:replaceEventHandler( "button_action_disable", function ( f24_arg0, f24_arg1 )
				f23_arg0( f24_arg0, f24_arg1 )
				return true
			end )
		end
	end
	f23_local3 = not f23_arg4.isFirstInCategory
end

local f0_local22 = function ( f22_arg0, f22_arg1 )
	f0_local0( f22_arg0 )
	if f22_arg0.ButtonHelperBar then
		f22_arg0.ButtonHelperBar.ButtonHelperText:PushButtonPrompt( {
			side = "right",
			button_ref2 = "button_shoulderr",
			priority = 1,
			helper_text = CONDITIONS.IsKbm( f22_arg1 ) and Engine[0xED84C33EC5F01EA]( 0x11A589832C7AAE1, f22_arg0._categoryTable[f22_arg0._nextCategoryIndex][0x4BCADBA8E631B86] ) or Engine[0xED84C33EC5F01EA]( 0xCC062AD4C358A2B, f22_arg0._categoryTable[f22_arg0._nextCategoryIndex][0x4BCADBA8E631B86] ),
			helper_definition = Engine[0xED84C33EC5F01EA]( 0xF1E2AF0A557FDA6 )
		} )
		f22_arg0.ButtonHelperBar.ButtonHelperText:PushButtonPrompt( {
			side = "left",
			priority = 1,
			button_ref = "button_shoulderl",
			helper_text = CONDITIONS.IsKbm( f22_arg1 ) and Engine[0xED84C33EC5F01EA]( 0x9086967DA498436, f22_arg0._categoryTable[f22_arg0._prevCategoryIndex][0x4BCADBA8E631B86] ) or Engine[0xED84C33EC5F01EA]( 0xCC062AD4C358A2B, f22_arg0._categoryTable[f22_arg0._prevCategoryIndex][0x4BCADBA8E631B86] ),
			helper_definition = Engine[0xED84C33EC5F01EA]( 0xDEFC4703A271BD2 )
		} )
		if f22_arg0._equippedCamoRef ~= WEAPON.CamoNoneValue then
			f22_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
				side = "left",
				priority = 2,
				button_ref = "button_alt1",
				helper_text = Engine[0xED84C33EC5F01EA]( 0xDE44C2C175C6810 ),
				helper_definition = Engine[0xED84C33EC5F01EA]( 0x1EF5450F3216318 )
			} )
		end
	end
end

local f0_local23 = function ( f21_arg0, f21_arg1, f21_arg2 )
	local f21_local0 = LOOT.IsUnlockedWithID( f21_arg0, tonumber( f21_arg1[0x28887F70BF5EBA] ) )
	if f21_local0 ~= LOOT.IsUnlockedWithID( f21_arg0, tonumber( f21_arg2[0x28887F70BF5EBA] ) ) then
		return f21_local0
	else
		return Engine[0xED84C33EC5F01EA]( f21_arg1[0x4BCADBA8E631B86] ) < Engine[0xED84C33EC5F01EA]( f21_arg2[0x4BCADBA8E631B86] )
	end
end

local f0_local24 = function ( f19_arg0, f19_arg1, f19_arg2, f19_arg3 )
	f19_arg0._categoryIndex = f19_arg2
	f19_arg0._currentCategory = f19_arg0._categoryTable[f19_arg0._categoryIndex]
	f19_arg0._currentCamos = f19_arg0._camoTable[f19_arg0._currentCategory[0x9E9C01960F4C582]]
	if f19_arg0.isAllUnlockedCamos then
		if f19_arg3 then
			f19_arg0.CategoryGrid:SetScrollThresholdX( #f19_arg0._currentCamos )
		else
			f19_arg0.CategoryGrid:SetScrollThresholdX( 0 )
		end
		f0_local0( f19_arg0 )
		f19_arg0.CategoryGrid:SetFocusedPosition( f19_arg0._allFirstInCategoryGridPos[f19_arg0._categoryIndex], false, true )
		f19_arg0.CategoryGrid:SetScrollThresholdX( f0_local0 )
	end
	if f19_arg0._currentCategory and f19_arg0._currentCategory[0x9E9C01960F4C582] == "events" then
		f19_arg0._currentCamos = GUNSMITH.GetWeaponClassCamos( f19_arg1, f19_arg0._weaponClass, f19_arg0._currentCamos )
	end
	table.sort( f19_arg0._currentCamos, function ( f20_arg0, f20_arg1 )
		return f19_arg0( f19_arg0, f20_arg0, f20_arg1 )
	end )
	f0_local0( f19_arg0, f19_arg1 )
	f19_arg0.CamoGrid:SetFocusedPosition( {
		x = 0,
		y = 0
	}, true, false )
	f19_arg0.CamoGrid:processEvent( {
		name = "request_active"
	} )
	if LUI.IsLastInputGamepad( f19_arg1 ) then
		f19_arg0.CamoGrid:processEvent( {
			name = "gain_focus"
		} )
	end
	if f19_arg0.ButtonHelperBar then
		f0_local0( f19_arg0, f19_arg1 )
	end
	if f19_arg0.SideArrows then
		local f19_local0 = f19_arg0.SideArrows
		f19_local0._currentIndex = 0
		f19_local0._maxIndex = f19_local0._grid:GetContentCount( LUI.DIRECTION.horizontal ) - 1
		f19_local0:UpdateSideButtons()
	end
	f19_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0x6A51E18DC8715B7, f19_arg0._currentCategory[0x4BCADBA8E631B86] ) )
	local f19_local0 = f19_arg0._currentCamos[1][0x9E9C01960F4C582]
	local f19_local1 = GUNSMITH.GetCamoChallenges( f19_arg1, f19_local0 )
	local f19_local2 = GUNSMITH.GetCamoDetails( f19_arg1, f19_local0, f19_local1 )
	local f19_local3 = LOOT.GetItemIDFromRef( f19_local0 )
	if f19_arg0.CamoTitle then
		f19_arg0.CamoTitle:SetData( {
			id = f19_local3,
			weaponRef = f19_local1.challengeWeaponRef,
			data = f19_local2
		} )
	elseif f19_arg0.ItemDetails then
		f19_arg0.ItemDetails:UpdateDetails( f19_local2 )
	end
	f0_local0( f19_arg0, f19_arg1, f19_local0 )
end

local f0_local25 = function ( f18_arg0, f18_arg1, f18_arg2 )
	f18_arg0._categoryTable = f18_arg2.categoryTable
	f18_arg0._camoTable = f18_arg2.camoTable
	f18_arg0._categoryIndex = f18_arg2.categoryIndex
	f18_arg0._currentCategory = f18_arg0._categoryTable[f18_arg0._categoryIndex]
	f18_arg0._weaponPlayerData = f18_arg2.weaponPlayerData
	f18_arg0._equippedCamoRef = f18_arg2.equippedCamo
	f18_arg0._totalCamoAmount = f18_arg2.totalCamoAmount
	if f18_arg0._currentCategory then
		f18_arg0._currentCamos = f18_arg0._camoTable[f18_arg0._currentCategory[0x9E9C01960F4C582]]
	end
	f18_arg0._weaponRef = f18_arg2.weaponTable.weapon
	f18_arg0._weaponClass = WEAPON.GetWeaponClass( f18_arg0._weaponRef )
	if f18_arg0._currentCategory and f18_arg0._currentCategory[0x9E9C01960F4C582] == "events" then
		f18_arg0._currentCamos = GUNSMITH.GetWeaponClassCamos( f18_arg1, f18_arg0._weaponClass, f18_arg0._currentCamos )
	end
end

local f0_local26 = function ( f17_arg0, f17_arg1, f17_arg2 )
	FrontEndScene.SetExclusiveWeaponModels( {
		FrontEndScene.ClientWeapons.Preview
	} )
	f17_arg0.weaponModel = WEAPON.GetWeaponModel( f17_arg1, FrontEndScene.ClientWeapons.Preview, WEAPON.OffsetFiles.PreviewData )
	f17_arg0:addElement( f17_arg0.weaponModel )
	local f17_local0 = WEAPON.GenerateWeaponTable( f17_arg0._weaponPlayerData )
	FrontEndScene.SetWeaponScene( f17_arg0, f17_arg1, WEAPON.GetTargetWeaponDataFromSlot( f17_arg0, f17_arg1, f17_arg2.weaponSlot, f17_arg2.loadoutIndex, f17_arg2.forShowcase ), f17_local0.weapon, f17_arg2 )
end

local f0_local27 = function ( f15_arg0, f15_arg1 )
	f15_arg0.CamoGrid:SetDefaultFocus( {
		y = 0,
		x = f0_local0( f15_arg0 )
	} )
	f15_arg0.CamoGrid:TouchMouseSetActiveToDefaultFocusMenuCreate( f15_arg1 )
	f15_arg0.CamoGrid:SetSnapOnWrapEnabled( true )
	f15_arg0.CamoGrid:SetRefreshChild( function ( f16_arg0, f16_arg1, f16_arg2 )
		f15_arg0( f15_arg0, f15_arg0, f16_arg0, f15_arg0._currentCamos[f16_arg1 + f16_arg2 * f15_arg0.CamoGrid:GetNumColumns() + 1] )
	end )
	f0_local0( f15_arg0, f15_arg1 )
end

local f0_local28 = function ( f9_arg0, f9_arg1 )
	f9_arg0:AddGamepadEventCallback( "button_shoulderr", function ( f14_arg0, f14_arg1 )
		f9_arg0( f9_arg0, f9_arg0, f9_arg0._nextCategoryIndex, true )
		return true
	end )
	f9_arg0:AddGamepadEventCallback( "button_shoulderl", function ( f13_arg0, f13_arg1 )
		f9_arg0( f9_arg0, f9_arg0, f9_arg0._prevCategoryIndex )
		return true
	end )
	f9_arg0:AddGamepadEventCallback( "button_secondary", function ( f12_arg0, f12_arg1 )
		ACTIONS.LeaveMenu( f12_arg0 )
	end )
	f9_arg0:AddGamepadEventCallback( "button_alt1", function ( f11_arg0, f11_arg1 )
		f9_arg0( f9_arg0, f9_arg0 )
	end )
	if CONDITIONS.IsWeaponPreviewEnabled() then
		f9_arg0:AddGamepadEventCallback( "left_stick", function ( f10_arg0, f10_arg1 )
			LUI.FlowManager.RequestAddMenu( "WeaponPreview", true, f9_arg0._controllerIndex, nil, {
				weaponTable = f9_arg0._weaponTableWithHighlightedCamo
			}, true )
		end )
	end
end

local f0_local29 = function ( f7_arg0, f7_arg1 )
	if f7_arg0.ButtonHelperBar then
		f0_local0( f7_arg0, f7_arg1 )
	end
	f7_arg0:SubscribeToInputTypeModel( f7_arg1, function ( f8_arg0, f8_arg1 )
		f7_arg0( f7_arg0, f7_arg0 )
	end )
end

local f0_local30 = function ( f6_arg0, f6_arg1, f6_arg2 )
	if not Table.IsNilOrEmpty( f6_arg2 ) and f6_arg2.query ~= nil then
		local f6_local0 = LUI.FlowManager.GetMenuStack()
		local f6_local1 = f6_local0[#f6_local0 - 1].scopedData
		f6_arg2.weaponSlot = f6_local1.weaponSlot or 0
		f6_arg2.loadoutIndex = f6_local1.loadoutIndex or 0
		f6_arg2.categoryIndex = tonumber( f6_arg2.query.categoryIndex ) or 1
		f6_arg2.weaponPlayerData = WEAPON.GetTargetWeaponDataFromSlot( f6_arg0, f6_arg1, f6_arg2.weaponSlot, f6_arg2.loadoutIndex, f6_arg2.forShowcase )
		f6_arg2.weaponTable = WEAPON.GenerateWeaponTable( f6_arg2.weaponPlayerData )
		f6_arg2.equippedCamo = f6_arg2.weaponTable.camo
		local f6_local2 = WEAPON.GetCamoDataForWeaponChallenge( f6_arg0, f6_arg2.weaponTable.weapon )
		f6_arg2.camoTable = f6_local2.camoTable
		f6_arg2.categoryTable = f6_local2.categoryTable
		f6_arg2.totalCamoAmount = f6_local2.totalCamoAmount
	end
end

local f0_local31 = function ( f4_arg0, f4_arg1, f4_arg2 )
	f4_arg0.UpdateWeaponPreview = f0_local0
	f4_arg0.SetupCamoButton = f0_local0
	f4_arg0.UpdateUnlockCount = f0_local0
	f0_local0( f4_arg0, f4_arg1, f4_arg2 )
	f0_local0( f4_arg0, f4_arg1, f4_arg2 )
	f4_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0x6A51E18DC8715B7, f4_arg2.category ) )
	f0_local0( f4_arg0, f4_arg1, f4_arg2 )
	if not f4_arg0.isAllUnlockedCamos then
		table.sort( f4_arg0._currentCamos, function ( f5_arg0, f5_arg1 )
			return f4_arg0( f4_arg0, f5_arg0, f5_arg1 )
		end )
		f0_local0( f4_arg0, f4_arg1 )
		f0_local0( f4_arg0, f4_arg1 )
	else
		f0_local0( f4_arg0 )
	end
	f4_arg0:registerEventHandler( "camo_button_over", f0_local0 )
	f4_arg0:registerEventHandler( "camo_button_action", f0_local0 )
	f0_local0( f4_arg0, f4_arg1 )
	f0_local0( f4_arg0, f4_arg1, f4_arg2.equippedCamo )
end

local f0_local32 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0.PostLoadShared = f0_local0
	f3_arg0.SetDefaultFocus = f0_local0
end

function CamoSelectBase( f1_arg0, f1_arg1 )
	local f1_local0 = ACTIONS
	local f1_local1 = LUI
	local f1_local2 = f1_local1.UIMenu.new()
	f1_local2.id = "CamoSelectBase"
	local f1_local3
	if f1_arg1 then
		f1_local3 = f1_arg1
	else
		f1_local3 = f1_arg1.controllerIndex
	end
	f1_local3 = f1_local1.ValidateControllerIndex( f1_local2, f1_local3 )
	local f1_local4 = f1_local2
	f1_local2:AddGamepadEventCallback( 0x691AB96D9875434, function ( f2_arg0, f2_arg1 )
		local f2_local0 = f2_arg1.controller or f1_arg0
		f1_arg0:LeaveMenu()
	end )
	f0_local0( f1_local2, f1_local3, f1_arg1 )
	return f1_local2
end

MenuBuilder.registerType( 0x44E7C3C63F278AC, CamoSelectBase )
LockTable( _M )
