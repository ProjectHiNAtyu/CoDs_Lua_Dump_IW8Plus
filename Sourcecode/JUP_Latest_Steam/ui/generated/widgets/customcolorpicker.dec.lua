-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
module( ..., package.seeall )
require( "ui.generated.widgets.buttons.mousebuttonarea" )
require( "ui.generated.widgets.customcolorpickerbuttons" )
local f0_local0 = function ( f22_arg0, f22_arg1 )
	local f22_local0 = f22_arg0.CustomColorPickerButtons.CustomColorPickerEditBox.EditBox
	local f22_local1 = f22_local0.Text.textEdit
	f22_local0:SetError( f22_arg1 )
	f22_local1.defaultText:SetVisible( false )
	f22_local0.Text:SetVisible( not f22_arg1 )
	f22_arg0.CustomColorPickerButtons.CustomColorPickerEditBox.HexErrorText:SetVisible( f22_arg1 )
	if f22_arg1 then
		ACTIONS.AnimateSequence( f22_local0, "HideCharacterLimitation" )
		f22_local1:setTextEditText( "" )
	end
end

local f0_local1 = function ( f21_arg0, f21_arg1 )
	local f21_local0 = COLORBLIND_UTILS.GetCustomColorFromColorNameAndColorBlindType( f21_arg1, f21_arg0._widgetData.colorType )
	local f21_local1 = f21_arg0.CustomColorPickerButtons
	local f21_local2 = f21_local1.CustomColorPickerEditBox.EditBox
	local f21_local3 = Color.IntToHex( f21_local0 )
	f21_local3 = f21_local3:sub( 2 )
	f21_local2.Text.textEdit:setTextEditText( f21_local3 )
	f21_arg0.OnTextEditCompleteCallback( f21_local2, {
		text = f21_local3
	} )
	f21_local1.ApplyColorButton.ColorPreview:SetRGB( f21_local0 )
end

local f0_local2 = function ( f20_arg0, f20_arg1 )
	local f20_local0 = COLORS_UTILS.HSBToRGB( f20_arg1.H, 1, 1 )
	local f20_local1 = COLORS_UTILS.HSBToRGB( f20_arg1.H, f20_arg1.S, 1 )
	local f20_local2 = f20_arg0.CustomColorPickerButtons
	local f20_local3 = f20_arg0._controllerIndex
	f20_local2.CustomColorSliderSaturation.GenericFillBar.HueColorLayer:SetRGB( f20_local0 )
	f20_local2.CustomColorSliderBrightness.GenericFillBar.HueColorLayer:SetRGB( f20_local1 )
	f20_local2.CustomColorSliderSaturation.GenericFillBar.BrightnessLayer:SetAlpha( 1 - f20_arg1.B )
	f20_local2.CustomColorSliderHue:SetCurrentValue( f20_local3, f20_arg1.H )
	f20_local2.CustomColorSliderSaturation:SetCurrentValue( f20_local3, f20_arg1.S * 100 )
	f20_local2.CustomColorSliderBrightness:SetCurrentValue( f20_local3, f20_arg1.B * 100 )
	f20_arg0._isColorUpdatedBySliders = true
end

local f0_local3 = function ( f19_arg0, f19_arg1 )
	local f19_local0
	if f19_arg1 then
		f19_local0 = f19_arg1
	else
		f19_local0 = f19_arg1.text
	end
	local f19_local1 = "#" .. f19_local0
	local f19_local2 = f19_arg0._linkedWidget
	if f19_local0 and COLORS_UTILS.IsStringHexCode( f19_local1 ) then
		f0_local0( f19_local2, false )
		f19_local2._isColorUpdatedBySliders = false
		local f19_local3 = COLORS_UTILS.HexToRGB( f19_local1 )
		local f19_local4 = COLORS_UTILS.RGBToHSB( f19_local3 )
		f19_arg0.Text.textEdit:setTextEditText( f19_local0 )
		f19_local2.CustomColorPickerButtons.ApplyColorButton.ColorPreview:SetRGB( f19_local3 )
		f0_local0( f19_local2, f19_local4 )
	else
		f0_local0( f19_local2, true )
	end
end

local f0_local4 = function ( f17_arg0, f17_arg1 )
	local f17_local0 = f17_arg0.CustomColorPickerButtons.CustomColorPickerEditBox.EditBox
	f17_local0._linkedWidget = f17_arg0
	f17_local0:SetupGenericEditBox( f17_arg1, {
		maxInputStringLength = 6,
		alwaysSendTypingEvents = true
	} )
	f17_local0:SetTextEditCompleteCallback( f0_local0 )
	f17_local0:SetIsTypingCallback( function ()
		f17_arg0( f17_arg0, false )
	end )
end

local f0_local5 = function ( f16_arg0, f16_arg1, f16_arg2, f16_arg3 )
	local f16_local0 = COLORS_UTILS.HSBToRGB( f16_arg1, f16_arg2, f16_arg3 )
	local f16_local1 = f16_arg0.CustomColorPickerButtons
	local f16_local2 = Color.RGBToHex( f16_local0 )
	f16_local2 = f16_local2:sub( 2 )
	local f16_local3 = f16_local1.CustomColorPickerEditBox.EditBox
	f16_local3:SetText( f16_local2 )
	f16_local3:SetDefaultString( f16_local2, f16_arg0._isColorUpdatedBySliders )
	f16_local1.ApplyColorButton.ColorPreview:SetRGB( f16_local0 )
	f16_arg0:processEvent( {
		name = "on_color_change",
		colorSelected = f16_local0
	} )
	f0_local0( f16_arg0, false )
end

local f0_local6 = function ( f12_arg0, f12_arg1 )
	local f12_local0 = f12_arg0.CustomColorPickerButtons
	local f12_local1, f12_local2, f12_local3, f12_local4 = f12_local0.ApplyColorButton.ColorPreview:getCurrentRGBA()
	local f12_local5 = COLORS_UTILS.RGBToHSB( {
		r = f12_local1,
		g = f12_local2,
		b = f12_local3
	} )
	LUI.AddSliderWithEditBoxLogic( f12_local0.CustomColorSliderHue, f12_arg1, {
		name = "Hue",
		min = 0,
		step = 1,
		decimalPlacesToRound = 0,
		max = 359,
		valueSetter = function ( f15_arg0, f15_arg1, f15_arg2 )
			f12_arg0( f12_arg0, f15_arg2, f12_arg0.CustomColorSliderSaturation._currentValue / 100, f12_arg0.CustomColorSliderBrightness._currentValue / 100 )
			local f15_local0 = COLORS_UTILS.HSBToRGB( f15_arg2, 1, 1 )
			local f15_local1 = COLORS_UTILS.HSBToRGB( f15_arg2, f12_arg0.CustomColorSliderSaturation._currentValue / 100, 1 )
			f12_arg0.CustomColorSliderSaturation.GenericFillBar.HueColorLayer:SetRGB( f15_local0 )
			f12_arg0.CustomColorSliderBrightness.GenericFillBar.HueColorLayer:SetRGB( f15_local1 )
		end,
		defaultValue = f12_local5.H,
		fillElement = f12_local0.CustomColorSliderHue.GenericFillBar.Fill
	} )
	f12_local0.CustomColorSliderHue.GenericFillBar.HueLayer:SetVisibility( LUI.Visibility.Visible )
	LUI.AddSliderWithEditBoxLogic( f12_local0.CustomColorSliderSaturation, f12_arg1, {
		name = "Saturation",
		min = 0,
		step = 1,
		decimalPlacesToRound = 0,
		max = -28,
		valueSetter = function ( f14_arg0, f14_arg1, f14_arg2 )
			f12_arg0( f12_arg0, f12_arg0.CustomColorSliderHue._currentValue, f14_arg2 / 100, f12_arg0.CustomColorSliderBrightness._currentValue / 100 )
			f12_arg0.CustomColorSliderBrightness.GenericFillBar.HueColorLayer:SetRGB( COLORS_UTILS.HSBToRGB( f12_arg0.CustomColorSliderHue._currentValue, f14_arg2 / 100, 1 ) )
		end,
		defaultValue = f12_local5.S * 100,
		fillElement = f12_local0.CustomColorSliderSaturation.GenericFillBar.Fill
	} )
	f12_local0.CustomColorSliderSaturation.GenericFillBar.HueColorLayer:SetVisibility( LUI.Visibility.Visible )
	f12_local0.CustomColorSliderSaturation.GenericFillBar.BrightnessLayer:SetVisibility( LUI.Visibility.Visible )
	f12_local0.CustomColorSliderSaturation.GenericFillBar.SaturationGradientLayer:SetVisibility( LUI.Visibility.Visible )
	f12_local0.CustomColorSliderSaturation.GenericFillBar.BrightnessLayer:SetAlpha( 1 - f12_local5.B )
	f12_local0.CustomColorSliderSaturation.GenericFillBar.HueColorLayer:SetRGB( COLORS_UTILS.HSBToRGB( f12_local5.H, 1, 1 ) )
	LUI.AddSliderWithEditBoxLogic( f12_local0.CustomColorSliderBrightness, f12_arg1, {
		name = "Brightness",
		min = 0,
		step = 1,
		decimalPlacesToRound = 0,
		max = -28,
		valueSetter = function ( f13_arg0, f13_arg1, f13_arg2 )
			f12_arg0( f12_arg0, f12_arg0.CustomColorSliderHue._currentValue, f12_arg0.CustomColorSliderSaturation._currentValue / 100, f13_arg2 / 100 )
			f12_arg0.CustomColorSliderSaturation.GenericFillBar.BrightnessLayer:SetAlpha( 1 - f13_arg2 / 100 )
		end,
		defaultValue = f12_local5.B * 100,
		fillElement = f12_local0.CustomColorSliderBrightness.GenericFillBar.Fill
	} )
	f12_local0.CustomColorSliderBrightness.GenericFillBar.HueColorLayer:SetVisibility( LUI.Visibility.Visible )
	f12_local0.CustomColorSliderBrightness.GenericFillBar.BrightnessGradientLayer:SetVisibility( LUI.Visibility.Visible )
	f12_local0.CustomColorSliderBrightness.GenericFillBar.HueColorLayer:SetRGB( COLORS_UTILS.HSBToRGB( f12_local5.H, f12_local5.S, 1 ) )
end

local f0_local7 = function ( f10_arg0 )
	local f10_local0 = function ( f11_arg0, f11_arg1 )
		local f11_local0 = f11_arg0.widgetUpdated
		if f11_local0 and f11_local0.m_eventHandlers[f11_arg1.name] then
			f11_arg1.colorPicker = f11_arg0
			f11_local0:processEvent( f11_arg1 )
		end
		return true
	end
	
	f10_arg0:addEventHandler( "apply_color_and_close", f10_local0 )
	f10_arg0:addEventHandler( "change_color_picker_type", f10_local0 )
	f10_arg0:addEventHandler( "on_color_change", f10_local0 )
	f10_arg0:addEventHandler( "on_background_closing", f10_local0 )
end

local f0_local8 = function ( f6_arg0 )
	local f6_local0 = f6_arg0.ClosingBackground
	f6_local0:setActionSFX( nil )
	local f6_local1 = function ( f9_arg0 )
		local f9_local0 = {
			name = "on_background_closing"
		}
		local f9_local1 = f9_arg0:getParent()
		if f9_local1 and f9_local1.m_eventHandlers[f9_local0.name] then
			f9_local1:processEvent( f9_local0 )
		end
		return true
	end
	
	f6_local0:registerEventHandler( "button_action", function ( element, event )
		return f6_arg0( element )
	end )
	f6_local0:registerEventHandler( "gamepad_button", function ( element, event )
		if event.button == "secondary" then
			return f6_arg0( element )
		else
			
		end
	end )
end

local f0_local9 = function ( f5_arg0 )
	if not CONDITIONS.IsMouseNavigation( f5_arg0._controllerIndex ) then
		ACTIONS.GainFocus( f5_arg0.CustomColorPickerButtons, f5_arg0.CustomColorPickerButtons.CustomColorPickerButton.id, f5_arg0._controllerIndex )
	end
end

local f0_local10 = function ( f3_arg0 )
	f3_arg0:SubscribeToInputTypeModel( f3_arg0._controllerIndex, function ( f4_arg0, f4_arg1 )
		f3_arg0( f4_arg1 )
	end, true )
end

local f0_local11 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.GainCustomFocus = f0_local0
	f2_arg0.OnTextEditCompleteCallback = f0_local0
	f2_arg0._controllerIndex = f2_arg1
	f2_arg0._widgetData = f2_arg2.widgetData
	f0_local0( f2_arg0, f2_arg1 )
	f0_local0( f2_arg0, f2_arg1 )
	f0_local0( f2_arg0 )
	f0_local0( f2_arg0 )
	f0_local0( f2_arg0 )
	f0_local0( f2_arg0, f2_arg1 )
end

function CustomColorPicker( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = MenuBuilder
	local f1_local2 = f1_local0.UIVerticalNavigator.new()
	f1_local2:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 476, 0, 310 )
	f1_local2.id = "CustomColorPicker"
	local f1_local3
	if f1_arg1 then
		f1_local3 = f1_arg1
	else
		f1_local3 = f1_arg1.controllerIndex
	end
	f1_local3 = f1_local0.ValidateControllerIndex( f1_local2, f1_local3 )
	local f1_local4 = nil
	f1_local4 = f1_local0.UIImage.new()
	f1_local4[0x8B72E07B55C3AC0] = "Background"
	f1_local4:SetRGB( SWATCHES[0x3E789DB0A12E313][0xF04666ADEBDA363], 0 )
	f1_local4:SetScale( 0, 0 )
	f1_local2:addElement( f1_local4 )
	f1_local2[0xD4176E7CA246EDD] = f1_local4
	local f1_local5 = nil
	f1_local5 = f1_local0.UIBorder.new( {
		borderThicknessTop = 1,
		borderThicknessLeft = 1,
		borderThicknessRight = 1,
		borderThicknessBottom = 1
	} )
	f1_local5[0x8B72E07B55C3AC0] = "Border"
	f1_local5:SetRGB( SWATCHES[0x3E789DB0A12E313][0xF04656ADEBDA1B0], 0 )
	f1_local2:addElement( f1_local5 )
	f1_local2[0xB08095720360577] = f1_local5
	local f1_local6 = nil
	f1_local6 = f1_local1.BuildRegisteredType( 0x57C019E9FCB4F59, {
		controllerIndex = f1_local3
	} )
	f1_local6[0x8B72E07B55C3AC0] = "ClosingBackground"
	ACTIONS.ScaleFullscreen( f1_local6 )
	f1_local6:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
	f1_local2:addElement( f1_local6 )
	f1_local2[0x9CB35D836253A20] = f1_local6
	local f1_local7 = nil
	f1_local7 = f1_local1.BuildRegisteredType( 0x166738B3E4B65E8, {
		controllerIndex = f1_local3
	} )
	f1_local7[0x8B72E07B55C3AC0] = "CustomColorPickerButtons"
	f1_local7:setPriority( 100 )
	f1_local7:SetAnchorsAndPosition( 0, 1, 0, 1, 16, 460, 16, 294 )
	f1_local2:addElement( f1_local7 )
	f1_local2[0x166738B3E4B65E8] = f1_local7
	f0_local0( f1_local2, f1_local3, f1_arg1 )
	return f1_local2
end

MenuBuilder.registerType( 0x99E2786C3D2D443, CustomColorPicker )
LockTable( _M )
