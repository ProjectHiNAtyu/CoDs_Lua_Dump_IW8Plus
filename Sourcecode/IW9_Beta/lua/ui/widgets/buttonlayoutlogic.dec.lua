-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
local f0_local0 = "options.buttonLayout"
local f0_local1 = GetIntForColor( SWATCHES.layouts.oldLayout )
local f0_local2 = GetIntForColor( SWATCHES.layouts.newLayout )
local f0_local3 = {}
local f0_local4 = function ( f13_arg0, f13_arg1, f13_arg2 )
	if f13_arg2.gameMode or not CONDITIONS.IsSingleplayer() then
		local f13_local0 = f13_arg2.gameMode == CoD.PlayMode.SP
	end
	local f13_local1 = f13_arg0.name
	local f13_local2 = f13_arg0.leftTrigger
	local f13_local3 = f13_arg0.leftShoulder
	local f13_local4 = f13_arg0.rightTrigger
	local f13_local5 = f13_arg0.rightShoulder
	local f13_local6 = f13_arg0.cfg
	if f13_arg1 then
		local f13_local7 = f13_local2
		f13_local2 = f13_local3
		f13_local3 = f13_local7
		f13_local7 = f13_local4
		f13_local4 = f13_local5
		f13_local5 = f13_local7
		f13_local1 = f13_local1 .. "_alt"
		f13_local6 = f13_local6 .. "_alt"
	end
	return {
		cfg = f13_local6,
		layoutName = f13_local1,
		leftTrigger = f13_local2,
		leftShoulder = f13_local3,
		rightTrigger = f13_local4,
		rightShoulder = f13_local5
	}
end

local f0_local5 = function ( f12_arg0, f12_arg1 )
	assert( 0 < #f12_arg0 )
	for f12_local3, f12_local4 in ipairs( f12_arg0 ) do
		if f12_arg1 == f12_local4 then
			return f12_local3
		end
	end
	assert( false, "Entry not found" )
end

local f0_local6 = function ( f11_arg0, f11_arg1, f11_arg2 )
	local f11_local0 = #f0_local0 - 1
	local f11_local1 = OPTIONS.GetCurrentCSVButtonLayouts( f11_arg0.isBR )
	for f11_local2 = 0, f11_local0, 1 do
		local f11_local5 = CSV.ReadRow( f11_local1, f11_local2 )
		local f11_local6 = f0_local0[f11_local2 + 1]
		local f11_local7 = f0_local0( f11_local5, f11_arg2 )
		f11_local6.ref:SetValue( f11_arg1, f11_local7.cfg )
		f11_local6.name:SetValue( f11_arg1, Engine[0xED84C33EC5F01EA]( f11_local7.layoutName ) )
		f11_local6.leftTrigger:SetValue( f11_arg1, Engine[0xED84C33EC5F01EA]( f11_local7.leftTrigger ) )
		f11_local6.rightTrigger:SetValue( f11_arg1, Engine[0xED84C33EC5F01EA]( f11_local7.rightTrigger ) )
		f11_local6.leftShoulder:SetValue( f11_arg1, Engine[0xED84C33EC5F01EA]( f11_local7.leftShoulder ) )
		f11_local6.rightShoulder:SetValue( f11_arg1, Engine[0xED84C33EC5F01EA]( f11_local7.rightShoulder ) )
	end
end

LUI.AddButtonLayoutLogic = function ( f1_arg0, f1_arg1, f1_arg2 )
	f0_local0 = {}
	WipeControllerModelsAtPath( f0_local0 )
	local f1_local0 = StringTable[0x2DCF0973239E909]( CSV.stickLayouts.file, CSV.stickLayouts.cols.cfg, Engine[0x7B17D94988FD5D0]( "gpadSticksConfig", f1_arg1 ), CSV.stickLayouts.cols.swapStickButtons ) == "1"
	f1_arg0.isBR = CONDITIONS.IsBRGameType()
	local f1_local1
	if not f1_arg2.gameMode then
		f1_local1 = CONDITIONS.IsSingleplayer()
		if not f1_local1 then
		
		else
			local f1_local2, f1_local3, f1_local4, f1_local5 = nil
			if f1_arg0.isBR or not f1_arg2.gameMode or f1_arg2.gameMode >= CoD.PlayMode.Count then
				f1_local2 = Engine[0x7B17D94988FD5D0]( "gpadBRButtonsConfig", f1_arg1 )
				f1_local3 = CSV.brButtonLayouts
				f1_local4 = OPTIONS.brButtonLayoutStrings
				f1_local5 = OPTIONS.GetBRButtonLayoutLabels
			elseif f1_local1 then
				f1_local2 = Engine[0x7B17D94988FD5D0]( "gpadButtonsConfig", f1_arg1 )
				f1_local3 = CSV.spButtonLayouts
				f1_local4 = OPTIONS.buttonLayoutStrings
				f1_local5 = OPTIONS.GetButtonLayoutLabels
			else
				f1_local2 = Engine[0x7B17D94988FD5D0]( "gpadButtonsConfig", f1_arg1 )
				f1_local3 = CSV.buttonLayouts
				f1_local4 = OPTIONS.buttonLayoutStrings
				f1_local5 = OPTIONS.GetButtonLayoutLabels
			end
			local f1_local6 = string.match( f1_local2, "_alt$" ) ~= nil
			local f1_local7 = function ( f8_arg0, f8_arg1, f8_arg2 )
				local f8_local0 = CSV.ReadRow( f1_arg0, f8_arg0 )
				local f8_local1 = CSV.ReadRow( f1_arg0, 0 )
				local f8_local2 = f1_arg0 .. "." .. f8_arg0
				local f8_local3 = f8_local0.select
				local f8_local4
				if not f8_arg2.gameMode then
					f8_local4 = CONDITIONS.IsThirdGameMode()
					if not f8_local4 then
					
					else
						local f8_local5 = f8_arg2
						if f8_local4 then
							f8_local3 = f8_local0.selectCP
						end
						local f8_local6 = f8_local0.leftStick
						local f8_local7 = f8_local0.rightStick
						if f1_arg0 then
							f8_local6 = f8_local0.rightStick
							f8_local7 = f8_local0.leftStick
						end
						local f8_local8 = f1_arg0( f8_local0, f1_arg0, f8_local5 )
						local f8_local9 = f1_arg0
						local f8_local10 = f1_arg0
						local f8_local11 = function ( f9_arg0 )
							return function ()
								local f10_local0 = LUI.FlowManager.GetVisibleMenu()
								if f10_local0 and (f10_local0.id == "ButtonLayout" or f10_local0.id == "BRButtonLayout") then
									return nil
								else
									local f10_local1 = f9_arg0( f9_arg0, f9_arg0, f9_arg0 )
									if f9_arg0[f9_arg0] == f10_local1[f9_arg0] then
										return f9_arg0
									else
										return f9_arg0
									end
								end
							end
							
						end
						
						local f8_local12 = LUI.DataSourceInControllerModel.new( f8_local2 .. ".leftTrigger", Engine[0xED84C33EC5F01EA]( f8_local8.leftTrigger ) )
						local f8_local13 = LUI.DataSourceInControllerModel.new( f8_local2 .. ".leftShoulder", Engine[0xED84C33EC5F01EA]( f8_local8.leftShoulder ) )
						local f8_local14 = LUI.DataSourceInControllerModel.new( f8_local2 .. ".rightTrigger", Engine[0xED84C33EC5F01EA]( f8_local8.rightTrigger ) )
						local f8_local15 = LUI.DataSourceInControllerModel.new( f8_local2 .. ".rightShoulder", Engine[0xED84C33EC5F01EA]( f8_local8.rightShoulder ) )
						local f8_local16 = {
							ref = LUI.DataSourceInControllerModel.new( f8_local2 .. ".ref", f8_local8.cfg ),
							name = LUI.DataSourceInControllerModel.new( f8_local2 .. ".name", Engine[0xED84C33EC5F01EA]( f8_local8.layoutName ) ),
							leftStick = LUI.DataSourceInControllerModel.new( f8_local2 .. ".leftStick", Engine[0xED84C33EC5F01EA]( f8_local6 ) )
						}
						local f8_local17 = LUI.DataSourceInControllerModel.new
						local f8_local18 = f8_local2 .. ".leftStickColor"
						local f8_local19
						if f8_local1.leftStick == f8_local0.leftStick and not f8_local9 then
							f8_local19 = f8_local9
						else
							f8_local19 = f8_local10
						end
						f8_local16.leftStickColor = f8_local17( f8_local18, f8_local19 )
						f8_local16.rightStick = LUI.DataSourceInControllerModel.new( f8_local2 .. ".rightStick", Engine[0xED84C33EC5F01EA]( f8_local7 ) )
						f8_local17 = LUI.DataSourceInControllerModel.new
						f8_local18 = f8_local2 .. ".rightStickColor"
						if f8_local1.rightStick == f8_local0.rightStick and not f8_local9 then
							f8_local19 = f8_local9
						else
							f8_local19 = f8_local10
						end
						f8_local16.rightStickColor = f8_local17( f8_local18, f8_local19 )
						f8_local16.leftTrigger = f8_local12
						f8_local16.leftTriggerColor = f8_local12:Filter( "leftTriggerColor", f8_local11( "leftTrigger" ) )
						f8_local16.rightTrigger = f8_local14
						f8_local16.rightTriggerColor = f8_local14:Filter( "rightTriggerColor", f8_local11( "rightTrigger" ) )
						f8_local16.leftShoulder = f8_local13
						f8_local16.leftShoulderColor = f8_local13:Filter( "leftShoulderColor", f8_local11( "leftShoulder" ) )
						f8_local16.rightShoulder = f8_local15
						f8_local16.rightShoulderColor = f8_local15:Filter( "rightShoulderColor", f8_local11( "rightShoulder" ) )
						f8_local16.primary = LUI.DataSourceInControllerModel.new( f8_local2 .. ".primary", Engine[0xED84C33EC5F01EA]( f8_local0.primary ) )
						f8_local17 = LUI.DataSourceInControllerModel.new
						f8_local18 = f8_local2 .. ".primaryColor"
						if f8_local1.primary == f8_local0.primary and not f8_local9 then
							f8_local19 = f8_local9
						else
							f8_local19 = f8_local10
						end
						f8_local16.primaryColor = f8_local17( f8_local18, f8_local19 )
						f8_local16.secondary = LUI.DataSourceInControllerModel.new( f8_local2 .. ".secondary", Engine[0xED84C33EC5F01EA]( f8_local0.secondary ) )
						f8_local17 = LUI.DataSourceInControllerModel.new
						f8_local18 = f8_local2 .. ".secondaryColor"
						if f8_local1.secondary == f8_local0.secondary and not f8_local9 then
							f8_local19 = f8_local9
						else
							f8_local19 = f8_local10
						end
						f8_local16.secondaryColor = f8_local17( f8_local18, f8_local19 )
						f8_local16.altOne = LUI.DataSourceInControllerModel.new( f8_local2 .. ".altOne", Engine[0xED84C33EC5F01EA]( f8_local0.altOne ) )
						f8_local17 = LUI.DataSourceInControllerModel.new
						f8_local18 = f8_local2 .. ".altOneColor"
						if f8_local1.altOne == f8_local0.altOne and not f8_local9 then
							f8_local19 = f8_local9
						else
							f8_local19 = f8_local10
						end
						f8_local16.altOneColor = f8_local17( f8_local18, f8_local19 )
						f8_local16.altTwo = LUI.DataSourceInControllerModel.new( f8_local2 .. ".altTwo", Engine[0xED84C33EC5F01EA]( f8_local0.altTwo ) )
						f8_local17 = LUI.DataSourceInControllerModel.new
						f8_local18 = f8_local2 .. ".altTwoColor"
						if f8_local1.altTwo == f8_local0.altTwo and not f8_local9 then
							f8_local19 = f8_local9
						else
							f8_local19 = f8_local10
						end
						f8_local16.altTwoColor = f8_local17( f8_local18, f8_local19 )
						f8_local16.dPad = LUI.DataSourceInControllerModel.new( f8_local2 .. ".dPad", Engine[0xED84C33EC5F01EA]( f8_local0.dPad ) )
						f8_local17 = LUI.DataSourceInControllerModel.new
						f8_local18 = f8_local2 .. ".dPadColor"
						if f8_local1.dPad == f8_local0.dPad and not f8_local9 then
							f8_local19 = f8_local9
						else
							f8_local19 = f8_local10
						end
						f8_local16.dPadColor = f8_local17( f8_local18, f8_local19 )
						f8_local16.dPadUp = LUI.DataSourceInControllerModel.new( f8_local2 .. ".dPadUp", Engine[0xED84C33EC5F01EA]( f8_local0.dPadUp ) )
						f8_local17 = LUI.DataSourceInControllerModel.new
						f8_local18 = f8_local2 .. ".dPadUpColor"
						if f8_local1.dPadUp == f8_local0.dPadUp and not f8_local9 then
							f8_local19 = f8_local9
						else
							f8_local19 = f8_local10
						end
						f8_local16.dPadUpColor = f8_local17( f8_local18, f8_local19 )
						f8_local16.dPadRight = LUI.DataSourceInControllerModel.new( f8_local2 .. ".dPadRight", Engine[0xED84C33EC5F01EA]( f8_local0.dPadRight ) )
						f8_local17 = LUI.DataSourceInControllerModel.new
						f8_local18 = f8_local2 .. ".dPadRightColor"
						if f8_local1.dPadRight == f8_local0.dPadRight and not f8_local9 then
							f8_local19 = f8_local9
						else
							f8_local19 = f8_local10
						end
						f8_local16.dPadRightColor = f8_local17( f8_local18, f8_local19 )
						f8_local16.dPadDown = LUI.DataSourceInControllerModel.new( f8_local2 .. ".dPadDown", Engine[0xED84C33EC5F01EA]( f8_local0.dPadDown ) )
						f8_local17 = LUI.DataSourceInControllerModel.new
						f8_local18 = f8_local2 .. ".dPadDownColor"
						if f8_local1.dPadDown == f8_local0.dPadDown and not f8_local9 then
							f8_local19 = f8_local9
						else
							f8_local19 = f8_local10
						end
						f8_local16.dPadDownColor = f8_local17( f8_local18, f8_local19 )
						f8_local16.dPadLeft = LUI.DataSourceInControllerModel.new( f8_local2 .. ".dPadLeft", Engine[0xED84C33EC5F01EA]( f8_local0.dPadLeft ) )
						f8_local17 = LUI.DataSourceInControllerModel.new
						f8_local18 = f8_local2 .. ".dPadLeftColor"
						if f8_local1.dPadLeft == f8_local0.dPadLeft and not f8_local9 then
							f8_local19 = f8_local9
						else
							f8_local19 = f8_local10
						end
						f8_local16.dPadLeftColor = f8_local17( f8_local18, f8_local19 )
						f8_local17 = LUI.DataSourceInControllerModel.new
						f8_local18 = f8_local2 .. ".start"
						if f8_local4 then
							f8_local19 = Engine[0xED84C33EC5F01EA]( f8_local0.startCP )
							if not f8_local19 then
							
							else
								f8_local16.start = f8_local17( f8_local18, f8_local19 )
								f8_local17 = LUI.DataSourceInControllerModel.new
								f8_local18 = f8_local2 .. ".startColor"
								if f8_local1.start == f8_local0.start and not f8_local9 then
									f8_local19 = f8_local9
								else
									f8_local19 = f8_local10
								end
								f8_local16.startColor = f8_local17( f8_local18, f8_local19 )
								f8_local16.select = LUI.DataSourceInControllerModel.new( f8_local2 .. ".select", Engine[0xED84C33EC5F01EA]( f8_local3 ) )
								f8_local17 = LUI.DataSourceInControllerModel.new
								f8_local18 = f8_local2 .. ".selectColor"
								if f8_local1.select == f8_local0.select and not f8_local9 then
									f8_local19 = f8_local9
								else
									f8_local19 = f8_local10
								end
								f8_local16.selectColor = f8_local17( f8_local18, f8_local19 )
								return f8_local16
							end
						end
						f8_local19 = Engine[0xED84C33EC5F01EA]( f8_local0.start )
					end
				end
				f8_local4 = f8_arg2.gameMode == CoD.PlayMode.Aliens
			end
			
			local f1_local8 = function ( f7_arg0, f7_arg1 )
				local f7_local0 = f1_arg0[f7_arg0]
				f1_arg0:SetDataSource( f7_local0, f7_arg1 )
				Engine[0x23F1D3C77CE5C6]( f7_local0.ref:GetValue( f7_arg1 ), f7_arg1, f1_arg0.isBR )
			end
			
			local f1_local9 = function ( f6_arg0, f6_arg1 )
				f1_arg0:SetDataSource( f1_arg0[f6_arg0], f6_arg1 )
			end
			
			local f1_local10 = nil
			local f1_local11 = #f1_local5() - 1
			for f1_local12 = 0, f1_local11, 1 do
				table.insert( f0_local0, f1_local7( f1_local12, f1_arg1, f1_arg2 ) )
			end
			if string.match( f1_local2, "_alt$" ) then
				f1_local2 = string.gsub( f1_local2, "_alt", "" )
			end
			local f1_local12 = f1_local4[f1_local2]
			if f1_local12 ~= nil and f1_local12 ~= "" then
				f1_arg0:SetDataSource( f0_local0[f0_local0( f1_local5(), Engine[0xED84C33EC5F01EA]( f1_local12 ) )], f1_arg1 )
			end
			f1_arg0:SetAlpha( 1 )
			f1_arg0:registerEventHandler( "buttonLayout_over", function ( element, event )
				f1_arg0:SetAlpha( 1 )
			end )
			f1_arg0:registerEventHandler( "buttonLayout_up", function ( element, event )
				f1_arg0:SetAlpha( 0 )
			end )
			f1_arg0:registerEventHandler( "buttonLayout_updated", function ( element, event )
				f1_arg0( event.index, event.controller )
			end )
			f1_arg0:registerEventHandler( "buttonLayout_updatedVisual", function ( element, event )
				f1_arg0( event.index, event.controller )
			end )
		end
	end
	f1_local1 = f1_arg2.gameMode == CoD.PlayMode.SP
end

