-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:04
module( ..., package.seeall )
FenceTournament = LUI.Class( LUI.Fence )
FenceTournament.init = function ( f9_arg0, f9_arg1, f9_arg2 )
	f9_arg0.super:init( f9_arg1, f9_arg2 )
	f9_arg0._controllerIndex = f9_arg2
end

FenceTournament.Start = function ( f8_arg0 )
	
end

FenceTournament.Stop = function ( f7_arg0 )
	LUI.FlowManager.RequestLeaveMenuByName( "tournament_inprogress_popup", true )
	f7_arg0._openedPopup = false
end

FenceTournament.UpdateState = function ( f6_arg0 )
	if Tournament[0xA680A9DEFDE4269]( f6_arg0._controllerIndex ) or Dvar[0x9E5BE3B4BBA4E0E]( 0x207F5490C121FE1 ) then
		if not f6_arg0._openedPopup then
			f6_arg0:ShowBannedPopup()
		end
		return 
	elseif Tournament[0xBBE7831FBA1C9AD]() then
		f6_arg0._state = LUI.Fence.STATE.pass
	elseif not Tournament[0x6DA8A40563B2BF3]() then
		f6_arg0._state = LUI.Fence.STATE.fail
	else
		f6_arg0._state = LUI.Fence.STATE.block
		Engine[0x74CAD26749A8415]()
	end
	if f6_arg0._state == LUI.Fence.STATE.block and not f6_arg0._openedPopup then
		f6_arg0:ShowInProgressPopup()
	end
end

FenceTournament.PostFail = function ( f5_arg0 )
	if f5_arg0._state == LUI.Fence.STATE.fail then
		Tournament[0xF8B2F41CC5CF158]()
		Lobby.LeavePublicLobby()
		Engine[0x74CAD26749A8415]()
	end
end

FenceTournament.ShowBannedPopup = function ( f3_arg0 )
	LUI.FlowManager.RequestPopupMenu( nil, "TournamentBannedPopup", false, nil, false, {
		onAccept = function ( f4_arg0, f4_arg1 )
			f3_arg0._state = LUI.Fence.STATE.fail
		end,
		duration = Tournament[0xD4412B18DF53C14]( controllerIndex )
	} )
	f3_arg0._openedPopup = true
end

FenceTournament.ShowInProgressPopup = function ( f1_arg0 )
	LUI.FlowManager.RequestPopupMenu( nil, "tournament_inprogress_popup", false, nil, false, {
		message = Engine[0xED84C33EC5F01EA]( 0xF55E98EFF5D9BF3 ),
		onCancel = function ( f2_arg0, f2_arg1 )
			f1_arg0._state = LUI.Fence.STATE.fail
		end
	}, nil, true, true )
	f1_arg0._openedPopup = true
end

LUI.Fence.Register( "tournament", FenceTournament )
LockTable( _M )
