-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
module( ..., package.seeall )
require( "ui.generated.widgets.frontend.mainmenutabs" )
require( "ui.generated.widgets.frontend.social.socialpartywidget" )
require( "ui.generated.widgets.frontend.cp.cpcheckpointwidget" )
require( "ui.generated.widgets.frontend.aar.aarflyoutbase" )
local f0_local0 = nil
local f0_local1 = function ( f27_arg0, f27_arg1 )
	return f0_local0( f27_arg0, f27_arg1 )
end

LUI.FlowManager.RequestSetStack( "PrivateMatchLobby", {
	{
		name = "MainLockoutMenu"
	},
	{
		name = "MainMenu"
	},
	{
		name = "MPMainMenu"
	}
} )
LUI.FlowManager.RegisterFenceGroup( "PrivateMatchLobby", {
	nil,
	"premium",
	"onlineServiceSubscription",
	"scenarioMissingMP",
	"scenarioInstallingMP",
	"mp",
	"mpInstall"
} )
MenuBuilder.registerType( "CPPrivateMatchLobby", f0_local1 )
LUI.FlowManager.RequestSetStack( "CPPrivateMatchLobby", {
	{
		name = "MainLockoutMenu"
	},
	{
		name = "MainMenu"
	},
	{
		name = "CPMainMenu"
	}
} )
MenuBuilder.registerType( "PrivateTournamentLobby", function ( f26_arg0, f26_arg1 )
	f26_arg1.isTournament = true
	return f0_local0( f26_arg0, f26_arg1 )
end )
LUI.FlowManager.RequestSetStack( "PrivateTournamentLobby", {
	{
		name = "MainLockoutMenu"
	},
	{
		name = "MainMenu"
	},
	{
		name = "MPMainMenu"
	}
} )
LUI.FlowManager.RegisterFenceGroup( "PrivateTournamentLobby", {
	nil,
	"scenarioMissingMP",
	"scenarioInstallingMP",
	"mp",
	"mpInstall"
} )
local f0_local2 = "frontEnd.MP.privateLobby"
local f0_local3 = function ()
	local f25_local0 = MP_COMMON.IsMatchRulesCODCastingEnabled( true )
	CODCASTER.SetCodcastingEnabled( f25_local0 )
	Lobby[0x2AC4DDCF8B7CCCA]( f25_local0 )
end

local f0_local4 = function ()
	local f23_local0 = LUI.FlowManager.GetScopedData( "PrivateMatchLobby" )
	if not f23_local0 or f23_local0.privateMatchSetupSubscription then
		
	end
	local f23_local1 = LUI.GetRoot()
	local f23_local2 = f23_local1:GetControllerIndex()
	local f23_local3 = LUI.DataSourceInGlobalModel.new( "frontEnd.lobby.isPrivateMatchLobbySetup" )
	f23_local0.privateMatchSetupSubscription = f23_local1:SubscribeToModel( f23_local3:GetModel( f23_local2 ), function ( f24_arg0 )
		if DataModel[0x614D394F6F9A18D]( f24_arg0 ) then
			local f24_local0 = f23_local0
			if f24_local0.modeInfo and not BuiltInEsports[0x9894ED459E76619]() then
				if not Dvar[0x9E5BE3B4BBA4E0E]( 0x8653010D584AA6E ) then
					LUI.Commands.GameSetup.SetupMode:Execute( f23_local0, f24_local0.modeInfo.ref, f24_local0.modeInfo.category, true )
				else
					LUI.Commands.GameSetup.SetupMode:Execute( f23_local0, GameType.BundleGetName( f24_local0.modeInfo.bundle ), GameType.BundleGetCategory( f24_local0.modeInfo.bundle ), true )
				end
			end
		end
	end )
end

local f0_local5 = function ()
	local f22_local0 = LUI.FlowManager.GetScopedData( "PrivateMatchLobby" )
	if f22_local0 and f22_local0.privateMatchSetupSubscription then
		local f22_local1 = LUI.GetRoot()
		f22_local1:UnsubscribeFromModel( f22_local0.privateMatchSetupSubscription )
		f22_local0.privateMatchSetupSubscription = nil
	end
end

local f0_local6 = function ()
	if CONDITIONS.IsCoreMultiplayer() then
		f0_local0()
		f0_local0()
	elseif CONDITIONS.IsThirdGameMode() then
		Dvar[0xE3CB005036E0C0F]( 0x3BD81F4A278E5DC, "none" )
	end
	Dvar[0x8EA06EEDB58D872]( 0x85EF1ED1D39D3A3, true )
end

LUI.FlowManager.RegisterStackPushBehaviour( "PrivateMatchLobby", f0_local6 )
LUI.FlowManager.RegisterStackPushBehaviour( "CPPrivateMatchLobby", f0_local6 )
LUI.FlowManager.RegisterStackPopBehaviour( "PrivateMatchLobby", function ()
	f0_local0()
	WipeGlobalModelsAtPath( f0_local0 )
	Lobby[0x2AC4DDCF8B7CCCA]( false )
	CODCASTER.SetCodcastingEnabled( false )
	PRIVATE_MATCH.RemoveBotsByGameSetup()
	MLG.ResetMatchRulesData()
end )
LUI.FlowManager.RegisterStackPopBehaviour( "CPPrivateMatchLobby", function ()
	Lobby.LeaveCustomGameLobby()
end )
local f0_local7 = function ( f17_arg0, f17_arg1 )
	return function ( f18_arg0, f18_arg1 )
		if 0 < Lobby[0x5C3F0A14700EFD9]() then
			Lobby[0x94C721C0A23A515]( 0 )
		end
		if Lobby[0x18BBD42C62BEAF8]( f17_arg0 ) then
			Lobby[0x502F273847E8B58]( f17_arg0 )
		end
		Lobby.LeaveCustomGameLobby()
		local f18_local0 = LUI.FlowManager.GetScopedData( f17_arg0 )
		if not f18_local0.isTournament then
			CODCASTER.SetCodcastingEnabled( false )
			MLG.SetUsingMLGRules( false )
		end
		if Lobby[0x867E2628CAA1981]() and Lobby[0xE9670E0E1EF3730]() then
			Lobby[0x2E0D4E2CD0FA6DE]()
		end
		if CONDITIONS.IsThirdGameMode() and GL_HACK.ShouldAutoNavigateToMPMainMenuFromCPPublicMatchMenu() then
			LUI.FlowManager.RequestAutomaticNavigation( PartyUIRoot.MP_MAIN_MENU )
		else
			LUI.FlowManager.RequestAutomaticNavigation( PartyUIRoot.MP_PRE_PRIVATE_MATCH, {
				isCustomGame = true,
				isTournament = false,
				matchmakerSettings = LUI.DeepCopy( Lobby.DEFAULT_PRIVATE_TOURNAMENT ),
				forcePlayMode = CONDITIONS.IsThirdGameMode() and CoD.PlayMode.Aliens or CoD.PlayMode.Core
			} )
		end
	end
	
end

local f0_local8 = function ( f13_arg0, f13_arg1 )
	local f13_local0 = LUI.FlowManager.GetScopedData( f13_arg0 )
	if GameType.ActiveIsTeamBased() == false then
		local f13_local1 = Lobby[0xBA6AFCEBEAF0DC8]( Lobby.BotTeams.Friendly )
		local f13_local2 = Lobby[0xC52F14B86FAE1C7]( Lobby.BotTeams.FFA )
		if f13_local0.FFANum == nil or f13_local0.FFADifficulty == nil or f13_local0.FFANum ~= f13_local2 or f13_local0.FFADifficulty ~= f13_local1 then
			f13_local0.FFANum = f13_local2
			f13_local0.FFADifficulty = f13_local1
			PRIVATE_MATCH.RemoveBotsByGameSetup()
			local f13_local3 = f13_arg0:Wait( 100 )
			f13_local3.onComplete = function ()
				PRIVATE_MATCH.AddBot( Lobby.BotTeams.FFA, f13_arg0, f13_arg0 )
			end
			
			return 
		end
	end
	local f13_local1 = Lobby[0xC52F14B86FAE1C7]( Lobby.BotTeams.Friendly )
	local f13_local2 = Lobby[0xBA6AFCEBEAF0DC8]( Lobby.BotTeams.Friendly )
	local f13_local3 = Lobby[0xC52F14B86FAE1C7]( Lobby.BotTeams.Enemy )
	local f13_local4 = Lobby[0xBA6AFCEBEAF0DC8]( Lobby.BotTeams.Enemy )
	if f13_local0.friendlyNum == nil or f13_local0.enemyNum == nil then
		f13_local0.friendlyNum = f13_local1
		f13_local0.friendlyDifficulty = f13_local2
		f13_local0.enemyNum = f13_local3
		f13_local0.enemyDifficulty = f13_local4
		PRIVATE_MATCH.RemoveBot( Lobby.BotTeams.Friendly )
		PRIVATE_MATCH.RemoveBot( Lobby.BotTeams.Enemy )
		PRIVATE_MATCH.RemoveBot( 201 )
		local f13_local5 = f13_arg0:Wait( 100 )
		f13_local5.onComplete = function ()
			PRIVATE_MATCH.AddBot( Lobby.BotTeams.Enemy, f13_arg0, f13_arg0 )
			PRIVATE_MATCH.AddBot( Lobby.BotTeams.Friendly, f13_arg0, f13_arg0 )
		end
		
		return 
	end
	local f13_local5 = false
	local f13_local6 = false
	if f13_local0.friendlyNum ~= f13_local1 or f13_local0.friendlyDifficulty ~= f13_local2 then
		f13_local0.friendlyNum = f13_local1
		f13_local0.friendlyDifficulty = f13_local2
		PRIVATE_MATCH.RemoveBot( Lobby.BotTeams.Friendly )
		PRIVATE_MATCH.RemoveBot( 201 )
		f13_local5 = true
	end
	if f13_local0.enemyNum ~= f13_local3 or f13_local0.enemyDifficulty ~= f13_local4 then
		f13_local0.enemyNum = f13_local3
		f13_local0.enemyDifficulty = f13_local4
		PRIVATE_MATCH.RemoveBot( Lobby.BotTeams.Enemy )
		PRIVATE_MATCH.RemoveBot( 201 )
		f13_local6 = true
	end
	local f13_local7 = f13_arg0:Wait( 100 )
	f13_local7.onComplete = function ()
		if f13_arg0 then
			PRIVATE_MATCH.AddBot( Lobby.BotTeams.Friendly, f13_arg0, f13_arg0 )
		end
		if f13_arg0 then
			PRIVATE_MATCH.AddBot( Lobby.BotTeams.Enemy, f13_arg0, f13_arg0 )
		end
	end
	
end

local f0_local9 = function ( f12_arg0, f12_arg1 )
	MP_COMMON.SetupParty( "Opening PrivateMatchMenu" )
	MP_COMMON.SetupPrivateMatchParty()
	Lobby[0x2043FF221ED6A77]( f12_arg0._isCoreMultiplayer and PartyUIRoot.MP_PRIVATE_MATCH or PartyUIRoot.CP_PRIVATE_MATCH )
	Engine[0x569F3C409C4E3CD]( CoD.PresenceContext.LOBBY )
	if BuiltInEsports[0x9894ED459E76619]() and Dvar[0x9E5BE3B4BBA4E0E]( 0x23AA3D47406905E ) and not Dvar[0x9E5BE3B4BBA4E0E]( 0x2FE41F01E7F6E6D ) then
		BuiltInEsports[0x2E17D9CE77E6F6]( f12_arg1 )
	end
	local f12_local0 = LUI.DataSourceInGlobalModel.new( "frontEnd.lobby.isMatchmakingActive" )
	if not f12_local0:GetValue( f12_arg1 ) then
		if Lobby[0x6957722EF74F5D2]() and CONDITIONS.IsThirdGameMode( f12_arg0 ) then
			if CONDITIONS.IsDemoBuildOrDevBuildOrAreDevFeaturesEnabled() and not CONDITIONS.IsPrivateMatchForceDedi() then
				MP_COMMON.StartPrivateMatchLobbyDsNone( "cp" )
			else
				MP_COMMON.StartPrivateMatchLobbyDsRequired( "cp" )
			end
		elseif CONDITIONS.IsNewPrivateMatchFlowEnabled() and Lobby[0x6957722EF74F5D2]() then
			if CONDITIONS.IsDemoBuildOrDevBuildOrAreDevFeaturesEnabled() and not CONDITIONS.IsPrivateMatchForceDedi() then
				MP_COMMON.StartPrivateMatchLobbyDsOptional( "mp" )
			else
				MP_COMMON.StartPrivateMatchLobbyDsRequired( "mp" )
			end
		end
	end
end

local f0_local10 = function ( f11_arg0, f11_arg1 )
	if Game[0x6DD1B6FF7A0A975]( f11_arg1 ) == true then
		if isAliensSolo() then
			PostGameFanfare:start()
		elseif CONDITIONS.ShowAARScoreboardAfterPrivateMatch() then
			Lobby.OpenAfterActionReport( f11_arg1, false, Engine[0xCA085C21FCBD7CA]() )
		end
		Game[0x16DC23DB3DC4FD1]( f11_arg1 )
	end
end

local f0_local11 = function ( f10_arg0, f10_arg1, f10_arg2 )
	Dvar[0x8EA06EEDB58D872]( 0x85EF1ED1D39D3A3, true )
	PRIVATE_MATCH.SetupPrivateMatchGameType( Enum[0x3085A67688502CD][0x1091163476EE813] )
	local f10_local0 = LUI.FlowManager.GetScopedData( f10_arg0 )
	if f10_arg2.isTournament then
		f10_local0.isTournament = true
	end
end

local f0_local12 = function ( f7_arg0, f7_arg1 )
	local f7_local0 = f7_arg1.controller
	if not f7_local0 then
		f7_local0 = Engine[0x45B054C920178E9]()
	end
	f7_arg0.MainMenuTabs:SetupTabs( f7_local0, {
		tabLayout = CONDITIONS.IsCoreMultiplayer() and MAINMENUTABS.Layouts.PrivateMatchLobby or MAINMENUTABS.Layouts.CPPrivateMatchLobby
	} )
	f7_arg0.MainMenuTabs:SetOnLeaveCallback( function ( f8_arg0, f8_arg1 )
		local f8_local0 = Social[0xBE9B627D9C821F6]()
		if PARTY.IsValidPartyID( f8_local0 ) and PARTY.CanLeaveParty( f8_local0 ) then
			PARTY.LeaveParty( f7_arg0, f8_arg1.controller, f8_local0 )
		else
			ACTIONS.LeaveParty( f7_arg0, f8_arg1.controller, {
				onLeaveCallback = function ()
					if 0 < Lobby[0x5C3F0A14700EFD9]() then
						Lobby[0x94C721C0A23A515]( 0 )
					end
					Lobby.LeaveCustomGameLobby()
					CODCASTER.SetCodcastingEnabled( false )
					MLG.SetUsingMLGRules( false )
					ACTIONS.LeaveMenu( f8_arg0 )
				end
			} )
		end
		return true
	end )
	local f7_local1 = LUI.FlowManager.GetScopedData( f7_arg0 )
	if not BuiltInEsports[0x9894ED459E76619]() then
		PRIVATE_MATCH.SetDefaultMatchRules( {
			isTournament = f7_local1.isTournament
		} )
	end
	if CONDITIONS.IsThirdGameMode() then
		CP.ClearWaveLoadout( f7_local0 )
		CP.ClearAllPickupMunitions( f7_local0 )
	end
	LOADOUT.CheckOverkillLoadoutSetup( f7_local0 )
end

local f0_local13 = function ( f5_arg0 )
	local self = LUI.UITimer.new( {
		interval = 500,
		event = "check_dmz"
	} )
	f5_arg0:addElement( self )
	self:registerEventHandler( "check_dmz", function ()
		if not MatchRules[0x1A6D0B2E15DF8CF]() then
			return 
		end
		local f6_local0 = MatchRules[0x3A9F1F51625857F]( "subGametype" )
		if f6_local0 == "dmz" and not f5_arg0._execDMZCFG then
			Engine[0xB81A5136C5503E4]( "exec br_dmz_offline.cfg" )
			f5_arg0._execDMZCFG = true
		elseif f6_local0 ~= "dmz" and f5_arg0._execDMZCFG then
			f5_arg0._execDMZCFG = false
		end
	end )
end

local f0_local14 = function ( f2_arg0, f2_arg1, f2_arg2 )
	assert( f2_arg0.MainMenuTabs )
	assert( f2_arg0.HelperBar )
	f2_arg0._isCoreMultiplayer = CONDITIONS.IsCoreMultiplayer()
	local f2_local0 = MAINMENUTABS.GetTabIndexFromName
	local f2_local1 = f2_arg1
	local f2_local2
	if CONDITIONS.IsCoreMultiplayer() then
		f2_local2 = "PrivateMatchLobby"
	else
		f2_local2 = "CPPrivateMatchLobby"
	end
	f2_arg0._battlePassMenuIndex = f2_local0( f2_local1, f2_local2, "BattlePassMenu" )
	Dvar[0x8EA06EEDB58D872]( 0x2B7DA075887F96F, false )
	LUI.DeferredFence.Attach( f2_arg0, Engine[0xF13D4623D3F6D4E]( 0 ), "CLIENT_CONNECT", LUI.DeferredFence.Criticality.LOW, LUI.DeferredFence.BackOutMethod.NONE, function ( f4_arg0, f4_arg1 )
		local f4_local0 = LUI.FlowManager.GetScopedData( f4_arg0 )
		if not f4_local0.streamingSetup and f4_arg1.fenceState == LUI.Fence.FenceObjectState.PASSING then
			MP_COMMON.SetupStreaming( f2_arg0, f2_arg0 )
			GUNSMITH.InitLoadoutBaseWeaponPartsAttachment( f2_arg0 )
			f4_local0.streamingSetup = true
		end
	end )
	f0_local0( f2_arg0, f2_arg1 )
	PRIVATE_MATCH.SetupPrivateMatchMusic( f2_arg0, f2_arg1 )
	f0_local0( f2_arg0, f2_arg1 )
	f2_arg0:addEventHandler( "menu_create", f0_local0 )
	f2_local0 = LUI.FlowManager.GetScopedData( f2_arg0 )
	if f2_arg2.isTournament and not f2_local0.matchmakerSettings then
		f2_local0.matchmakerSettings = LUI.DeepCopy( Lobby.DEFAULT_PRIVATE_TOURNAMENT )
	end
	if f2_local0.playIntroCharacterAnimations == nil then
		f2_local0.playIntroCharacterAnimations = true
	end
	if Engine[0x2DA54CF5D6B7F02]() then
		f0_local0( f2_arg0 )
	end
	Streaming[0xE493C1B436663F6]( true )
	Lobby.PreloadViewHandsForLocalPlayer( f2_arg1 )
	f2_arg0:addEventHandler( "match_info_update", function ( f3_arg0, f3_arg1 )
		local f3_local0 = LUI.FlowManager.GetScopedData( f2_arg0 )
		f3_local0.esportsLobbyMatchInfoButtonData = f3_arg1.data
	end )
end

MenuBuilder.registerType( "PrivateMatchLobby", function ( menu, controller )
	local self = LUI.UIHorizontalNavigator.new()
	self.id = "PrivateMatchLobby"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	f0_local0( self, f1_local1, controller )
	self.HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	self.HelperBar.id = "HelperBar"
	if CONDITIONS.IsMobileOrMobileSim() then
		self.HelperBar:SetAnchorsAndPosition( 1, 0, 0, 0, _1080p * -120, 0, 0, 0 )
	else
		self.HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
	end
	self.HelperBar:setPriority( 10 )
	self:addElement( self.HelperBar )
	local f1_local2 = self
	local Vignette = nil
	
	Vignette = LUI.UIImage.new()
	Vignette.id = "Vignette"
	ACTIONS.AspectRatioScaleAdjustment( self, Vignette, LAYOUT.AspectRatioImageScalePct.FADEFRAME_LARGE )
	Vignette:SetRGBFromTable( SWATCHES.genericMenu.blackBackground, 0 )
	Vignette:setImage( RegisterMaterial( 0x3A8F29C0EC8E46E ), 0 )
	Vignette:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -346, 0 )
	self:addElement( Vignette )
	self.Vignette = Vignette
	
	local MainMenuTabs = nil
	
	MainMenuTabs = MenuBuilder.BuildRegisteredType( "MainMenuTabs", {
		controllerIndex = f1_local1
	} )
	MainMenuTabs.id = "MainMenuTabs"
	MainMenuTabs.MenuTitle.MenuTitle:setText( "", 0 )
	MainMenuTabs.MenuTitle.ModeTitle:setText( Engine[0xED84C33EC5F01EA]( 0x2567E6A6F5075A4 ), 0 )
	MainMenuTabs:SetAnchorsAndPosition( 0.5, 0.5, 0, 0, _1080p * -960, _1080p * 960, 0, 0 )
	self:addElement( MainMenuTabs )
	self.MainMenuTabs = MainMenuTabs
	
	local PartyWidget = nil
	
	PartyWidget = MenuBuilder.BuildRegisteredType( "SocialPartyWidget", {
		controllerIndex = f1_local1
	} )
	PartyWidget.id = "PartyWidget"
	PartyWidget:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1224, _1080p * 1824, _1080p * 94, _1080p * 264 )
	self:addElement( PartyWidget )
	self.PartyWidget = PartyWidget
	
	local f1_local6 = nil
	if CONDITIONS.IsRaid() then
		f1_local6 = MenuBuilder.BuildRegisteredType( "CPCheckpointWidget", {
			controllerIndex = f1_local1
		} )
		f1_local6.id = "CPCheckpointWidget"
		f1_local6:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 543, _1080p * 943, _1080p * 826, _1080p * 1026 )
		self:addElement( f1_local6 )
		self.CPCheckpointWidget = f1_local6
	end
	local f1_local7 = nil
	if CONDITIONS.InFrontendMPOrCP() then
		f1_local7 = MenuBuilder.BuildRegisteredType( "AARFlyoutBase", {
			controllerIndex = f1_local1
		} )
		f1_local7.id = "AARFlyoutBase"
		f1_local7:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 600, 0, _1080p * 1080 )
		self:addElement( f1_local7 )
		self.AARFlyoutBase = f1_local7
	end
	f0_local0( self, f1_local1, controller )
	return self
end )
LUI.FlowManager.RegisterStackPushBehaviour( "PrivateMatchLobby", f0_local6 )
LockTable( _M )
