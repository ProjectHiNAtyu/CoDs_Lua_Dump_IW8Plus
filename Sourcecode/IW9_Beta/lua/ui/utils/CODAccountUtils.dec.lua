-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:01
CODACCOUNT = CODACCOUNT or {}
CODACCOUNT.AccountURL = {
	AccountSettings = "https://profile.callofduty.com/cod/announcement2FA",
	ForgotPassword = "https://profile.callofduty.com/cod/forgotPassword"
}
CODACCOUNT.CountryCodes = {
	nil,
	"US",
	"AU",
	"AT",
	"BE",
	"BR",
	"CA",
	"CZ",
	"DK",
	"FI",
	"FR",
	"DE",
	"GR",
	"HU",
	"IE",
	"IT",
	"KR",
	"MX",
	"NL",
	"NZ",
	"NO",
	"PL",
	"PT",
	"ES",
	"SE",
	"CH",
	"GB",
	"JP",
	"RU",
	"SA",
	"HK",
	"TW",
	"SG"
}
CODACCOUNT.ErrorCodes = {
	UNAUTHORIZED_ACCESS = 10,
	GENERIC_FIELD_INVALID = 6,
	GENERIC = 2,
	USERNAME_PROFANITY = 7,
	TOKEN_TIMED_OUT = 16,
	USERNAME_INVALID = 4,
	MERGE_CONFLICT = 9,
	GENERIC_LOGIN = 3,
	NEEDS_OTP = 14,
	CANCELLED = 1,
	NO_RENAME_TOKEN = 11,
	EMAIL_EXISTS = 8,
	BUSY = 13,
	MARKETPLACE_ERROR = 12,
	OTP_THROTTLED = 15,
	PASSWORD_INVALID = 5
}
CODACCOUNT.ErrorStrings = {
	[CODACCOUNT.ErrorCodes.CANCELLED] = 0x7464124A3F32EFD,
	[CODACCOUNT.ErrorCodes.GENERIC] = 0xC02FD0E8FE239E6,
	[CODACCOUNT.ErrorCodes.GENERIC_LOGIN] = 0xC02FD0E8FE239E6,
	[CODACCOUNT.ErrorCodes.USERNAME_INVALID] = 0x74F1C7C3AE72358,
	[CODACCOUNT.ErrorCodes.PASSWORD_INVALID] = 0x88CF7D2B51030D1,
	[CODACCOUNT.ErrorCodes.GENERIC_FIELD_INVALID] = 0xBC45F0633B649B6,
	[CODACCOUNT.ErrorCodes.USERNAME_PROFANITY] = 0xA4516943A529A7B,
	[CODACCOUNT.ErrorCodes.EMAIL_EXISTS] = 0xB5725E57019F4F5,
	[CODACCOUNT.ErrorCodes.MERGE_CONFLICT] = 0x6B31676A2B863F3,
	[CODACCOUNT.ErrorCodes.UNAUTHORIZED_ACCESS] = 0xF2C29F1759F18B1,
	[CODACCOUNT.ErrorCodes.NO_RENAME_TOKEN] = 0xE5B23B475A8FC24,
	[CODACCOUNT.ErrorCodes.MARKETPLACE_ERROR] = 0xE3A47727B518742,
	[CODACCOUNT.ErrorCodes.BUSY] = 0x34308D379481B0D
}
CODACCOUNT.GetCountryLabels = function ()
	local f18_local0 = {}
	for f18_local4, f18_local5 in ipairs( CODACCOUNT.CountryCodes ) do
		table.insert( f18_local0, Engine[0xED84C33EC5F01EA]( "CODACCOUNT/CODA_COUNTRY_" .. f18_local5 ) )
	end
	return f18_local0
end

CODACCOUNT.GetCountryCodeIndex = function ( f17_arg0 )
	for f17_local3, f17_local4 in ipairs( CODACCOUNT.CountryCodes ) do
		if f17_local4 == f17_arg0 then
			return f17_local3
		end
	end
	return nil
end

CODACCOUNT.IsEnabled = function ()
	return Dvar[0x9E5BE3B4BBA4E0E]( 0x7156E1260CE80E4 ) == true
end

CODACCOUNT.ForceAnonymousAccount = function ()
	return Engine[0xC6AD5341E93DFB3]()
end

CODACCOUNT.AccountRegistrationEnabled = function ()
	local f14_local0 = CODACCOUNT.IsEnabled()
	if f14_local0 then
		f14_local0 = not CODACCOUNT.ForceAnonymousAccount()
	end
	return f14_local0
end

CODACCOUNT.GetErrorString = function ( f13_arg0 )
	return CODACCOUNT.ErrorStrings[f13_arg0]
end

CODACCOUNT.FilterDisplayName = function ( f12_arg0 )
	if f12_arg0 and 0 < #f12_arg0 then
		local f12_local0 = split( f12_arg0, "#" )
		return f12_local0[1]
	else
		return ""
	end
end

CODACCOUNT.FilterDisplayID = function ( f11_arg0 )
	if f11_arg0 and 0 < #f11_arg0 then
		local f11_local0 = split( f11_arg0, "#" )
		return f11_local0[2]
	else
		return ""
	end
end

CODACCOUNT.AutoMobileLogin = function ( f10_arg0 )
	AccountRegistration[0x315F899835E5B3C]( f10_arg0._controllerIndex )
end

CODACCOUNT.Login = function ( f9_arg0, f9_arg1 )
	local f9_local0 = f9_arg0._controllerIndex
	local f9_local1 = AccountRegistration[0xBB7128EDE524DB8]( f9_arg0.InputEmail:GetEditText() )
	local f9_local2 = ""
	local f9_local3 = f9_arg0.InputPassword:GetEditText()
	if f9_arg1 then
		AccountRegistration[0x5B19EA551964516]( f9_local0, f9_local1, f9_local3 )
	else
		AccountRegistration[0x16DAA6E90F403D3]( f9_local0, f9_local1, f9_local2, f9_local3 )
	end
end

CODACCOUNT.DisplayValidity = function ( f8_arg0 )
	local f8_local0 = false
	for f8_local4, f8_local5 in ipairs( f8_arg0._inputs ) do
		if not CODACCOUNT.ValidateLoginInput( f8_arg0, f8_local5:GetTextElement(), f8_local5:GetEditText() ) then
			ACTIONS.AnimateSequence( f8_local5.EditBox, "Invalid" )
			f8_local0 = true
		else
			ACTIONS.AnimateSequence( f8_local5.EditBox, "Valid" )
		end
	end
	if f8_arg0.EmailErrorMessage and f8_arg0.PasswordErrorMessage then
		f8_local1 = f8_arg0.EmailErrorMessage
		f8_local3 = f8_local1
		f8_local1 = f8_local1.SetAlpha
		if f8_local0 then
			f8_local4 = 1
		else
			f8_local4 = 0
		end
		f8_local1( f8_local3, f8_local4 )
		f8_local1 = f8_arg0.PasswordErrorMessage
		f8_local3 = f8_local1
		f8_local1 = f8_local1.SetAlpha
		if f8_local0 then
			f8_local4 = 1
		else
			f8_local4 = 0
		end
		f8_local1( f8_local3, f8_local4 )
		if f8_arg0.EmailWarning and f8_arg0.PasswordWarning then
			f8_local1 = f8_arg0.EmailWarning
			f8_local3 = f8_local1
			f8_local1 = f8_local1.SetAlpha
			if f8_local0 then
				f8_local4 = 1
			else
				f8_local4 = 0
			end
			f8_local1( f8_local3, f8_local4 )
			f8_local1 = f8_arg0.PasswordWarning
			f8_local3 = f8_local1
			f8_local1 = f8_local1.SetAlpha
			if f8_local0 then
				f8_local4 = 1
			else
				f8_local4 = 0
			end
			f8_local1( f8_local3, f8_local4 )
		end
	elseif f8_arg0.ErrorMessage then
		f8_local1 = f8_arg0.ErrorMessage
		f8_local3 = f8_local1
		f8_local1 = f8_local1.SetAlpha
		if f8_local0 then
			f8_local4 = 1
		else
			f8_local4 = 0
		end
		f8_local1( f8_local3, f8_local4 )
	end
end

CODACCOUNT.ValidateLoginInput = function ( f5_arg0, f5_arg1, f5_arg2 )
	local f5_local0 = function ()
		REGISTRATION.UpdatePasswordLogin( f5_arg0 )
		local f7_local0, f7_local1 = REGISTRATION.CheckIsPassing( REGISTRATION.PasswordRulesLogin )
		if f5_arg0.isDefault then
			f7_local1 = Engine[0xED84C33EC5F01EA]( 0xD93C367AA0BF458 )
		end
		if f7_local1 ~= nil then
			if f5_arg0.PasswordErrorMessage then
				f5_arg0.PasswordErrorMessage:setText( f7_local1 )
			elseif f5_arg0.ErrorMessage then
				f5_arg0.ErrorMessage:setText( Engine[0xED84C33EC5F01EA]( 0x84DD2BD74CD0B73, f7_local1 ) )
			end
		end
		local f7_local2
		if f7_local0 then
			f7_local2 = f7_local0
		else
			f7_local2 = not f5_arg0.isDefault
		end
		return f7_local2
	end
	
	local f5_local1 = function ()
		REGISTRATION.UpdateEmail( AccountRegistration[0xBB7128EDE524DB8]( f5_arg0 ) )
		local f6_local0, f6_local1 = REGISTRATION.CheckIsPassing( REGISTRATION.EmailRules )
		if f5_arg0.isDefault then
			f6_local1 = Engine[0xED84C33EC5F01EA]( 0xD93C367AA0BF458 )
		end
		if f6_local1 ~= nil then
			if f5_arg0.EmailErrorMessage then
				f5_arg0.EmailErrorMessage:setText( f6_local1 )
			elseif f5_arg0.ErrorMessage then
				f5_arg0.ErrorMessage:setText( Engine[0xED84C33EC5F01EA]( 0x22DE8730254914E, f6_local1 ) )
			end
		end
		local f6_local2
		if f6_local0 then
			f6_local2 = f6_local0
		else
			f6_local2 = not f5_arg0.isDefault
		end
		return f6_local2
	end
	
	local f5_local2 = f5_arg1.isPassword
	if not f5_local2 then
		f5_local2 = f5_arg1.Text
		if f5_local2 then
			f5_local2 = f5_arg1.Text.isPassword
		end
	end
	local f5_local3 = f5_arg1.isEmail
	if not f5_local3 then
		f5_local3 = f5_arg1.Text
		if f5_local3 then
			f5_local3 = f5_arg1.Text.isEmail
		end
	end
	if f5_local2 then
		f5_arg1.isValid = f5_local0()
	elseif f5_local3 then
		f5_arg1.isValid = f5_local1()
	else
		LUI.FlowManager.RequestDevErrorPopup( "CODAccountLogin requires email and password inputs" )
	end
	return f5_arg1.isValid
end

CODACCOUNT.RefreshLoginButton = function ( f3_arg0 )
	assert( f3_arg0.ButtonLogin )
	local f3_local0 = function ()
		for f4_local3, f4_local4 in ipairs( f3_arg0._inputs ) do
			local f4_local5 = f4_local4:GetTextElement()
			if not f4_local5.isValid then
				return false
			end
		end
		return true
	end
	
	f3_arg0.ButtonLogin.isDisabled = not f3_local0()
end

CODACCOUNT.SetupForgotPassword = function ( f1_arg0 )
	f1_arg0.BindButton = LUI.UIBindButton.new()
	f1_arg0.BindButton.id = "selfBindButton"
	f1_arg0:addElement( f1_arg0.BindButton )
	f1_arg0.BindButton:addEventHandler( "button_alt1", function ( f2_arg0, f2_arg1 )
		Engine[0xA265A859B7C189E]( f1_arg0._controllerIndex, 0, Engine[0x2A1487D44730DE5]( Engine[0xED84C33EC5F01EA]( 0x52E5A0676CE79B7 ) ) )
	end )
end

