-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 27-09-2025 22:41
module( ..., package.seeall )
local f0_local0 = function ( f12_arg0, f12_arg1 )
	local f12_local0 = f12_arg0.Tabs:GetCurrentTab()
	if f12_local0._tabData.index == OPERATOR.OPERATOR_INFO_TAB_DATA.MISSION.index then
		if f12_local0._scoped ~= nil then
			local f12_local1 = f12_local0._scoped.operatorData.operatorInfo
			assert( f12_local1, "The current operator data could not be found." )
			if not f12_local1.isSelected and OPERATOR.IsUnlocked( f12_arg1, f12_local1.ref ) then
				f12_arg0:AddButtonHelperText( {
					side = "left",
					button_ref = "button_alt2",
					priority = 1,
					helper_text = Engine.CBBHFCGDIC( "LUA_MENU/SELECT_OPERATOR" )
				} )
				f12_arg0.bindEquipOperatorButton = LUI.UIBindButton.new()
				f12_arg0.bindEquipOperatorButton.id = "bindEquipOperatorButton"
				f12_arg0:addElement( f12_arg0.bindEquipOperatorButton )
				f12_arg0.bindEquipOperatorButton.data = f12_local1
				f12_arg0.bindEquipOperatorButton:addEventHandler( "button_alt2", function ( f13_arg0, f13_arg1 )
					local f13_local0 = LUI.FlowManager.GetScopedData( f12_arg0:getParent() )
					f13_local0.operatorData.operatorInfo = f12_arg0
					f13_local0.operatorData.useEquippedOperatorFocusIndex = true
					OPERATOR.EquipOperator( f12_arg0, f12_arg0, {
						selectedOutsideOfGrid = true,
						operatorInfo = f12_arg0
					} )
				end )
			end
		end
	else
		f12_arg0._idleAnimationsTable = nil
		f12_arg0._equipAnimationsTable = nil
		if f12_arg0.bindEquipOperatorButton then
			f12_arg0:RemoveButtonPrompt( {
				helper_text = nil,
				button_ref = "button_alt2"
			} )
			f12_arg0.bindEquipOperatorButton:closeTree()
		end
	end
end

local f0_local1 = function ( f11_arg0, f11_arg1, f11_arg2, f11_arg3 )
	local f11_local0 = f11_arg0._tabs[f11_arg2 + 1]
	local f11_local1 = f11_arg0:getParent()
	local f11_local2 = LUI.FlowManager.GetScopedData( f11_local1 )
	f11_local1.MenuTitle:SetTitle( Engine.CBBHFCGDIC( f11_local0.title, f11_local0.insertOperator and Engine.CBBHFCGDIC( f11_local1._operatorNameForTitle ) or "" ) )
	TAB.UpdateBuiltWidgetOnTabChange( f11_local1, f11_local2.activeTabIndex, "activeTabWidget", f11_arg2, f11_arg3, f11_local0.menuName, {
		buildPriority = 2,
		controllerIndex = f11_arg1,
		callback = f11_local0.callback,
		scopedData = f11_local2
	} )
	f11_local2.activeTabIndex = f11_arg2
	f0_local0( f11_local1, f11_arg1 )
end

local f0_local2 = function ( f9_arg0, f9_arg1, f9_arg2 )
	local f9_local0 = {}
	local f9_local1 = LUI.ShallowCopy( OPERATOR.OPERATOR_INFO_TAB_DATA )
	local f9_local2 = f9_arg2.startTabIndex
	local f9_local3 = 1
	if f9_arg2.hideProgressionTab then
		f9_local1.PROGRESSION = nil
		if not f9_arg2.showMissions then
			f9_local1.MISSION = nil
		end
	else
		f9_local1.MISSION = nil
	end
	if not f9_arg2.showBio then
		f9_local1.BIO = nil
	end
	for f9_local7, f9_local8 in pairs( f9_local1 ) do
		f9_local0[f9_local3] = {
			id = f9_local8.id,
			menuName = f9_local8.asset,
			index = f9_local8.index,
			callback = f9_arg2.operatorSelectCallback,
			name = f9_local8.name,
			title = f9_local8.title,
			insertOperator = f9_local8.insertOperator,
			hasDefaultFocus = f9_local7 == 1,
			focusFunction = f0_local0
		}
		f9_local3 = f9_local3 + 1
	end
	table.sort( f9_local0, function ( f10_arg0, f10_arg1 )
		return f10_arg0.index < f10_arg1.index
	end )
	f9_local3 = 0
	for f9_local7, f9_local8 in ipairs( f9_local0 ) do
		if f9_local8.index == f9_arg2.startTabIndex then
			f9_local2 = f9_local3
			break
		end
		f9_local3 = f9_local3 + 1
	end
	f9_local4 = LUI.FlowManager.GetScopedData( f9_arg0 )
	f9_local4.activeTabIndex = f9_local2
	f9_arg0.Tabs:SetTabs( f9_local0 )
	f9_arg0.Tabs:FocusTab( f9_arg1, f9_local2 )
end

local f0_local3 = function ( f8_arg0, f8_arg1, f8_arg2 )
	assert( f8_arg2.operatorInfo )
	local f8_local0 = f8_arg2.operatorInfo
	local f8_local1 = OPERATOR.IsT9Operator( f8_local0.ref )
	if not f8_local1 then
		f8_local1 = OPERATOR.IsMWOperator( f8_local0.ref )
	end
	local f8_local2 = false
	f8_arg0._operatorNameForTitle = f8_local0.name
	if f8_local1 then
		local f8_local3 = f8_local0.outfitMissionQuests
		if not f8_local3 or 0 >= #f8_local3 then
			f8_local2 = false
		else
			f8_local2 = true
		end
	end
	return f8_local2
end

local f0_local4 = function ( f7_arg0, f7_arg1, f7_arg2 )
	assert( f7_arg2.operatorInfo )
	local f7_local0 = f7_arg2.operatorInfo
	local f7_local1 = f0_local0( f7_arg0, f7_arg1, f7_arg2 )
	local f7_local2 = OPERATOR.IsOperatorBioAvailable( f7_arg0, f7_arg1, {
		operatorRef = f7_local0.ref
	} )
	local f7_local3 = f0_local0
	local f7_local4 = f7_arg0
	local f7_local5 = f7_arg1
	local f7_local6 = {}
	local f7_local7 = OPERATOR.IsT9Operator( f7_local0.ref )
	if not f7_local7 then
		f7_local7 = OPERATOR.IsMWOperator( f7_local0.ref )
	end
	f7_local6.hideProgressionTab = f7_local7
	f7_local6.showBio = f7_local2
	f7_local6.showMissions = f7_local1
	f7_local6.startTabIndex = f7_arg2.startTabIndex or 0
	f7_local6.operatorSelectCallback = f7_arg0.UpdateTabsIfAvailableMissions
	f7_local3( f7_local4, f7_local5, f7_local6 )
end

local f0_local5 = function ( f6_arg0 )
	f6_arg0:AddButtonHelperText( {
		side = "left",
		button_ref = "button_secondary",
		priority = 0,
		helper_text = Engine.CBBHFCGDIC( "LUA_MENU/BACK" )
	} )
	
	local bindButton = LUI.UIBindButton.new()
	bindButton.id = "bindButton"
	f6_arg0:addElement( bindButton )
	f6_arg0.bindButton = bindButton
	
	f6_arg0.bindButton:addEventHandler( "button_secondary", ACTIONS.LeaveMenu )
end

local f0_local6 = function ( f5_arg0 )
	local f5_local0 = MenuBuilder.BuildRegisteredType( "FrontendCameraMover", {
		useMousePan = false,
		snapToCenter = true,
		enableZoom = true,
		enableHoldZoom = false,
		useLeftStick = false,
		enableWheelZoom = true,
		enableSway = false,
		controllerIndex = controllerIndex
	} )
	f5_local0:SetScreenOrigin( 0, 10 )
	f5_local0:SetMaxZoom( 100 )
	f5_local0:SetMinZoom( 0 )
	f5_local0:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -440, _1080p * 500, _1080p * -540, _1080p * 480 )
	f5_local0:SetZoomWheel( 1 )
	f5_arg0:addElement( f5_local0 )
end

local f0_local7 = function ( f3_arg0, f3_arg1, f3_arg2 )
	if not f3_arg2 or type( f3_arg2 ) ~= "table" or not f3_arg2.operatorData then
		assert( false )
	end
	f3_arg0._operatorNameForTitle = f3_arg2.operatorData.operatorInfo.name
	f3_arg0.menuInitialized = false
	f3_arg0.UpdateTabsIfAvailableMissions = f0_local0
	f3_arg0:addEventHandler( "menu_create", function ( f4_arg0, f4_arg1 )
		f3_arg0( f4_arg0 )
		OPERATOR.SetupScene( f4_arg0, f3_arg0 )
		f3_arg0( f4_arg0, f3_arg0, {
			operatorInfo = f3_arg0,
			startTabIndex = f3_arg0.operatorData.menuData.startTabIndex
		} )
		f4_arg0._idleAnimationsTable, f4_arg0._equipAnimationsTable = OPERATOR.GetSceneCharacterModelAnimations()
		OPERATOR.SetSceneCharacterModel( f4_arg0, f3_arg0, {
			element = f4_arg0,
			operatorInfo = f3_arg0
		} )
		OPERATOR.PlayEquippedAnimAndQueueIdle( f4_arg0, f3_arg0, {
			newEquipped = false,
			operatorInfo = f3_arg0
		} )
	end )
	LAYOUT.SetupCommonScaleableLayoutElements( f3_arg0, f3_arg1 )
end

function WZOperatorInformation( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "WZOperatorInformation"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	self.HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	self.HelperBar.id = "HelperBar"
	self.HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
	self.HelperBar:setPriority( 10 )
	self:addElement( self.HelperBar )
	local f1_local2 = self
	local Vignette = nil
	
	Vignette = LUI.UIImage.new()
	Vignette.id = "Vignette"
	Vignette:setImage( RegisterMaterial( "menu_vignette" ), 0 )
	Vignette:SetBlendMode( BLEND_MODE.multiply )
	Vignette:Setup9SliceImage( _1080p * 382, _1080p * 353, 0.21, 0.3 )
	self:addElement( Vignette )
	self.Vignette = Vignette
	
	local TabBacker = nil
	
	TabBacker = MenuBuilder.BuildRegisteredType( "TabBacker", {
		controllerIndex = f1_local1
	} )
	TabBacker.id = "TabBacker"
	TabBacker:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 160 )
	self:addElement( TabBacker )
	self.TabBacker = TabBacker
	
	local MenuTitle = nil
	
	MenuTitle = MenuBuilder.BuildRegisteredType( "MenuTitle", {
		controllerIndex = f1_local1
	} )
	MenuTitle.id = "MenuTitle"
	MenuTitle.MenuTitle:setText( ToUpperCase( Engine.CBBHFCGDIC( "LUA_MENU/OPERATOR_BIO_TITLE" ) ), 0 )
	MenuTitle.Line:SetLeft( 0, 0 )
	MenuTitle:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1024, 0, _1080p * 100 )
	self:addElement( MenuTitle )
	self.MenuTitle = MenuTitle
	
	local HelperBar = nil
	
	HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	HelperBar.id = "HelperBar"
	HelperBar.Background:SetAlpha( 0.2, 0 )
	HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
	self:addElement( HelperBar )
	self.HelperBar = HelperBar
	
	local Tabs = nil
	
	Tabs = LUI.TabManager.new( {
		spacing = 4,
		wrap = true,
		tabHeight = _1080p * 52,
		buildTab = function ()
			return MenuBuilder.BuildRegisteredType( "SubMenuTab", {
				controllerIndex = menu
			} )
		end,
		controllerIndex = f1_local1
	} )
	Tabs.id = "Tabs"
	Tabs:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 100, _1080p * 997, _1080p * 108, _1080p * 160 )
	self:addElement( Tabs )
	self.Tabs = Tabs
	
	local LobbyMembersFooter = nil
	
	LobbyMembersFooter = MenuBuilder.BuildRegisteredType( "LobbyMembersFooter", {
		controllerIndex = f1_local1
	} )
	LobbyMembersFooter.id = "LobbyMembersFooter"
	LobbyMembersFooter:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 150 )
	self:addElement( LobbyMembersFooter )
	self.LobbyMembersFooter = LobbyMembersFooter
	
	local ItemsCollected = nil
	
	ItemsCollected = LUI.UIStyledText.new()
	ItemsCollected.id = "ItemsCollected"
	ItemsCollected:SetRGBFromTable( SWATCHES.genericButton.description, 0 )
	ItemsCollected:SetAlpha( 0, 0 )
	ItemsCollected:setText( Engine.CBBHFCGDIC( "LUA_MENU/COLLECTED_X_OF_Y" ), 0 )
	ItemsCollected:SetFont( FONTS.GetFont( FONTS.BodyRegular.File ) )
	ItemsCollected:SetWordWrap( false )
	ItemsCollected:SetAlignment( LUI.Alignment.Left )
	ItemsCollected:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 130, _1080p * 315, _1080p * 178, _1080p * 200 )
	self:addElement( ItemsCollected )
	self.ItemsCollected = ItemsCollected
	
	local f1_local10 = nil
	if CONDITIONS.IsBattlePassEnabled() then
		f1_local10 = MenuBuilder.BuildRegisteredType( "BattlePassSeasonResetStatus", {
			controllerIndex = f1_local1
		} )
		f1_local10.id = "BattlePassSeasonResetStatus"
		f1_local10:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1449, _1080p * 1824, _1080p * 52, _1080p * 132 )
		self:addElement( f1_local10 )
		self.BattlePassSeasonResetStatus = f1_local10
	end
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "WZOperatorInformation", WZOperatorInformation )
LockTable( _M )
