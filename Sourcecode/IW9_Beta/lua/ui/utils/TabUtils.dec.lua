-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
TAB = TAB or {}
TAB.MP = {
	OPERATORS = 3,
	PLAY = 0,
	WEAPONS = 1,
	STORE = 6,
	BATTLE_PASS = 5,
	BARRACKS = 4,
	CHALLENGES = 2
}
TAB.VISIBILITY = {
	HIDDEN = 1,
	STANDARD = 3,
	COUNT = 4,
	DISABLED = 2
}
TAB.CURRENT_PROJECT = ""
TAB.TAB_VISIBILITY_DATA = {}
local f0_local0 = function ()
	local f41_local0 = Engine[0x47E265B6CAD4442]()
	if (f41_local0 ~= TAB.CURRENT_PROJECT) or not TAB.TAB_VISIBILITY_DATA or LUI.IsTableEmpty( TAB.TAB_VISIBILITY_DATA ) then
		local f41_local1 = Game[0x83E0D59EFF44E21]()
		local f41_local2 = f41_local1[0x481F8E762C256C8]
		local f41_local3 = TAB
		local f41_local4
		if f41_local2 then
			f41_local4 = Engine[0x6093D047200548]( "tabsvisibilitylist:" .. f41_local2 )
			f41_local4 = f41_local4[0xF74FC4E28076E41]
			if not f41_local4 then
			
			else
				f41_local3.TAB_VISIBILITY_DATA = f41_local4
			end
		end
		f41_local4 = {}
	end
	TAB.CURRENT_PROJECT = f41_local0
end

TAB.IsTabVisibleForCurrentProject = function ( f40_arg0, f40_arg1 )
	local f40_local0
	if f40_arg1 then
		f40_local0 = f40_arg1
	else
		f40_local0 = Dvar[0x22EAAB59AA27E9B]( f40_arg1 )
	end
	if f40_local0 and 0 < f40_local0 then
		assert( f40_local0 < TAB.VISIBILITY.COUNT )
		return f40_local0 ~= 1
	end
	f0_local0()
	for f40_local4, f40_local5 in pairs( TAB.TAB_VISIBILITY_DATA ) do
		if f40_local5[0x7316C29B3857581] == f40_arg0 then
			return TAB.VISIBILITY[f40_local5[0x12B4B435E30C025]] ~= 2
		end
	end
	return true
end

TAB.IsTabEnabledForCurrentProject = function ( f39_arg0, f39_arg1 )
	local f39_local0
	if f39_arg1 then
		f39_local0 = f39_arg1
	else
		f39_local0 = Dvar[0x22EAAB59AA27E9B]( f39_arg1 )
	end
	if f39_local0 and 0 < f39_local0 then
		return f39_local0 == 3
	end
	f0_local0()
	for f39_local4, f39_local5 in pairs( TAB.TAB_VISIBILITY_DATA ) do
		if f39_local5[0x7316C29B3857581] == f39_arg0 then
			return TAB.VISIBILITY[f39_local5[0x12B4B435E30C025]] == 0
		end
	end
	return true
end

TAB.GetTabState = function ( f38_arg0, f38_arg1 )
	local f38_local0
	if f38_arg1 then
		f38_local0 = f38_arg1
	else
		f38_local0 = Dvar[0x22EAAB59AA27E9B]( f38_arg1 )
	end
	if f38_local0 and 0 < f38_local0 then
		assert( f38_local0 < TAB.VISIBILITY.COUNT )
		return f38_local0
	end
	f0_local0()
	for f38_local4, f38_local5 in pairs( TAB.TAB_VISIBILITY_DATA ) do
		if f38_local5[0x7316C29B3857581] == f38_arg0 then
			return TAB.VISIBILITY[f38_local5[0x12B4B435E30C025]]
		end
	end
	return TAB.VISIBILITY.STANDARD
end

TAB.GetCustomizeTabState = function ()
	return TAB.GetTabState( 0x8C7C7D1D26210B8, 0x12931D0965AD132 )
end

TAB.GetWeaponTabState = function ()
	return TAB.GetTabState( 0x1CBD901B87FABB6, CONDITIONS.IsMagmaGameMode() and 0xB24C22DBE01D134 or 0xDC94B0E5BDE1A0 )
end

TAB.GetOperatorsTabState = function ()
	return TAB.GetTabState( 0x68ECE5C04FE522A, 0x743D389CA478924 )
end

TAB.GetBattlepassTabState = function ()
	if CONDITIONS.IsWeGameGovBanned() or CONDITIONS.IsDMZMatch() or CONDITIONS.IsIW9() then
		return TAB.VISIBILITY.HIDDEN
	else
		return TAB.GetTabState( 0xC5D758624C9B051, 0x4F5DC89723EA614 )
	end
end

TAB.GetBarracksTabState = function ()
	if CONDITIONS.IsWeGameGovBanned() or CONDITIONS.IsDMZMatch() then
		return TAB.VISIBILITY.HIDDEN
	else
		return TAB.GetTabState( 0xF0DA1D954A14EBE, 0x2100A0DA666F6A8 )
	end
end

TAB.GetChallengesTabState = function ()
	if CONDITIONS.IsWeGameGovBanned() or CONDITIONS.IsDMZMatch() then
		return TAB.VISIBILITY.HIDDEN
	else
		return TAB.GetTabState( 0x7AD3B58FDD4BFB7, 0x839C5572717FBC8 )
	end
end

TAB.GetStoreTabState = function ()
	if CONDITIONS.IsWeGameGovBanned() or CONDITIONS.IsDMZMatch() then
		return TAB.VISIBILITY.HIDDEN
	else
		return TAB.GetTabState( 0x4EE54AD76B0BD8E, 0x3794D695D79D48 )
	end
end

TAB.SetupHandlers = function ( f22_arg0, f22_arg1 )
	assert( f22_arg0._sequences )
	assert( f22_arg0._sequences.UnFocused )
	assert( f22_arg0._sequences.Focused )
	assert( f22_arg0._sequences.Disabled )
	assert( f22_arg0._sequences.Highlighted )
	assert( f22_arg1.manager )
	f22_arg0._isMouseFocused = false
	f22_arg0.Enable = function ( f30_arg0 )
		f30_arg0._disabled = false
		ACTIONS.AnimateSequence( f30_arg0, "UnFocused" )
	end
	
	f22_arg0.Disable = function ( f29_arg0 )
		f29_arg0._disabled = true
		ACTIONS.AnimateSequence( f29_arg0, "Disabled" )
	end
	
	f22_arg0.IsEnabled = function ( f28_arg0 )
		return not f28_arg0._disabled
	end
	
	local f22_local0 = function ( f27_arg0, f27_arg1 )
		if f27_arg0._disabled then
			ACTIONS.AnimateSequence( f27_arg0, "Disabled" )
		elseif f27_arg1.index == f27_arg0.index and not f27_arg0.focused then
			ACTIONS.AnimateSequence( f27_arg0, "Focused" )
			f27_arg0.focused = true
		else
			ACTIONS.AnimateSequence( f27_arg0, "UnFocused" )
			f27_arg0.focused = false
		end
	end
	
	local f22_local1 = function ( f26_arg0, f26_arg1 )
		ACTIONS.AnimateSequence( f26_arg0, "Highlighted" )
		f26_arg0._isMouseFocused = true
	end
	
	local f22_local2 = function ( f25_arg0, f25_arg1 )
		if f25_arg0._disabled then
			ACTIONS.AnimateSequence( f25_arg0, "Disabled" )
		elseif f25_arg0.focused then
			ACTIONS.AnimateSequence( f25_arg0, "Focused" )
		else
			ACTIONS.AnimateSequence( f25_arg0, "UnFocused" )
		end
		f25_arg0._isMouseFocused = false
	end
	
	local f22_local3 = function ( f24_arg0, f24_arg1 )
		
	end
	
	local f22_local4 = function ( f23_arg0, f23_arg1 )
		if f23_arg1.inside and f23_arg0._isMouseFocused and not f23_arg0._disabled then
			f22_arg0.manager:processEvent( {
				name = "tab_mouse_select",
				index = f23_arg0.index
			} )
		end
	end
	
	f22_arg0:registerEventHandler( "focus_tab", f22_local0 )
	f22_arg0:registerEventHandler( "mouseenter", f22_local1 )
	f22_arg0:registerEventHandler( "mouseleave", f22_local2 )
	f22_arg0:registerEventHandler( "leftmouseup", f22_local4 )
	f22_arg0:registerEventHandler( "leftmousedown", f22_local3 )
end

TAB.SetUp = function ( f11_arg0, f11_arg1, f11_arg2, f11_arg3 )
	assert( f11_arg0._sequences )
	assert( f11_arg0._sequences.UnFocused )
	assert( f11_arg0._sequences.Focused )
	assert( f11_arg0._sequences.Disabled )
	assert( f11_arg0._sequences.Highlighted )
	assert( f11_arg0._sequences.FocusedNoSound )
	f11_arg0.Setup = function ( f21_arg0, f21_arg1 )
		if f11_arg0 then
			f11_arg0:setText( f21_arg1.name )
		end
		if f11_arg0 then
			f11_arg0:setImage( RegisterMaterial( f21_arg1.image ) )
		end
	end
	
	f11_arg0.Enable = function ( f20_arg0 )
		f20_arg0._disabled = false
		ACTIONS.AnimateSequence( f20_arg0, "UnFocused" )
	end
	
	f11_arg0.Disable = function ( f19_arg0 )
		f19_arg0._disabled = true
		ACTIONS.AnimateSequence( f19_arg0, "Disabled" )
	end
	
	f11_arg0.IsEnabled = function ( f18_arg0 )
		return not f18_arg0._disabled
	end
	
	f11_arg0:registerEventHandler( "focus_tab", function ( element, event )
		if event.index == element.index then
			if event.playSound then
				element._sequences.Focused()
			else
				element._sequences.FocusedNoSound()
			end
			element:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 270 * _1080p, 0, 40 * _1080p, 100, LUI.EASING.outQuadratic )
			element.focused = true
		elseif element.focused then
			element:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 100 * _1080p, 0, 40 * _1080p, 100, LUI.EASING.outQuadratic )
			element._sequences.UnFocused()
			element.focused = false
		end
	end )
	f11_arg0:SetHandleMouse( true )
	f11_arg0:registerEventHandler( "mouseenter", function ( element, event )
		if not element.focused then
			if not element._disabled then
				element._sequences.Highlighted()
			else
				element._sequences.Focused()
			end
		end
	end )
	f11_arg0:registerEventHandler( "mouseleave", function ( element, event )
		if element.focused and not element._disabled then
			element._sequences.FocusedNoSound()
		else
			element._sequences.UnFocused()
		end
	end )
	f11_arg0:registerEventHandler( "leftmousedown", function ( element, event )
		
	end )
	f11_arg0:registerEventHandler( "leftmouseup", function ( element, event )
		if event.inside and not element._disabled then
			element:playSound( "menu_open" )
			element:dispatchEventToCurrentMenu( {
				name = "tab_mouse_select",
				index = element.index
			} )
		end
	end )
	f11_arg0:SubscribeToModelThroughElement( f11_arg0, "disabled", function ( f12_arg0 )
		if DataModel[0x614D394F6F9A18D]( f12_arg0 ) then
			f11_arg0:Disable()
		end
	end )
end

TAB.DestroyBuiltWidget = function ( f10_arg0, f10_arg1 )
	if f10_arg0[f10_arg1] then
		f10_arg0[f10_arg1]:processEvent( {
			name = "tab_destroy"
		} )
		f10_arg0[f10_arg1]:closeTree()
		f10_arg0[f10_arg1] = nil
	end
end

TAB.UpdateBuiltWidget = function ( f9_arg0, f9_arg1, f9_arg2, f9_arg3, f9_arg4 )
	local f9_local0 = LUI.FlowManager.GetScopedData( f9_arg0 )
	local f9_local1 = f9_local0.activeTabIndex
	local f9_local2
	if f9_arg4 then
		f9_local2 = f9_arg4
	else
		f9_local2 = f9_arg4.extraData
	end
	if f9_local1 and f9_local1 == f9_arg2 and f9_arg0.activeTabWidget and not f9_local2 then
		return 
	end
	TAB.DestroyBuiltWidget( f9_arg0, "activeTabWidget" )
	f9_arg0.activeTabWidget = MenuBuilder.BuildRegisteredType( f9_arg1, f9_arg4 )
	f9_arg0.activeTabWidget._createdFromTabs = true
	if f9_arg4.buildPriority then
		f9_arg0.activeTabWidget:setPriority( f9_arg4.buildPriority )
	end
	if CONDITIONS.IsPC() and not f9_arg4.alignTop then
		f9_arg4.stretchToContainer = true
	end
	if f9_arg4.stretchToContainer then
		f9_arg0.activeTabWidget:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
	elseif f9_arg4.alignBottom then
		local f9_local3 = f9_arg0.activeTabWidget:GetAnchorsAndPosition()
		f9_arg0.activeTabWidget:SetAnchorsAndPosition( 0, 1, 1, 0, 0, f9_local3.right, -f9_local3.bottom, 0 )
	end
	f9_arg0:addElement( f9_arg0.activeTabWidget )
	f9_arg0.activeTabWidget:processEvent( {
		name = "tab_create"
	} )
	if f9_arg3 ~= FocusType.MouseOver and f9_arg3 ~= FocusType.MenuFlow then
		f9_arg0.activeTabWidget:processEvent( {
			shouldPlayButtonSound = false,
			name = "gain_focus"
		} )
		if f9_arg4.tabFocusCallback then
			f9_arg4.tabFocusCallback( f9_arg1 )
		end
	end
	f9_local0.activeTabIndex = f9_arg2
end

TAB.UpdateBuiltWidgetOnTabChange = function ( f8_arg0, f8_arg1, f8_arg2, f8_arg3, f8_arg4, f8_arg5, f8_arg6 )
	TAB.DestroyBuiltWidget( f8_arg0, f8_arg2 )
	f8_arg0[f8_arg2] = MenuBuilder.BuildRegisteredType( f8_arg5, f8_arg6 )
	f8_arg0[f8_arg2]._createdFromTabs = true
	if f8_arg6.buildPriority then
		f8_arg0[f8_arg2]:setPriority( f8_arg6.buildPriority )
	end
	if CONDITIONS.IsPC() and not f8_arg6.alignTop then
		f8_arg6.stretchToContainer = true
	end
	if f8_arg6.stretchToContainer then
		f8_arg0[f8_arg2]:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
	elseif f8_arg6.alignBottom then
		local f8_local0 = f8_arg0[f8_arg2]:GetAnchorsAndPosition()
		f8_arg0[f8_arg2]:SetAnchorsAndPosition( 0, 1, 1, 0, 0, f8_local0.right, -f8_local0.bottom, 0 )
	end
	f8_arg0:addElement( f8_arg0[f8_arg2] )
	f8_arg0[f8_arg2]:processEvent( {
		name = "tab_create"
	} )
	if f8_arg3 ~= f8_arg1 and f8_arg4 ~= FocusType.MouseOver and f8_arg4 ~= FocusType.MenuFlow then
		f8_arg0[f8_arg2]:processEvent( {
			shouldPlayButtonSound = false,
			name = "gain_focus"
		} )
	end
end

TAB.GetIndex = function ( f7_arg0 )
	local f7_local0 = {
		[TAB.MP.PLAY] = 0,
		[TAB.MP.WEAPONS] = 1,
		[TAB.MP.OPERATORS] = 2
	}
	if CONDITIONS.IsWeGameGovBanned() then
		return f7_local0[f7_arg0]
	elseif TAB.GetChallengesTabState() ~= TAB.VISIBILITY.HIDDEN then
		f7_local0[TAB.MP.CHALLENGES] = 3
		f7_local0[TAB.MP.BARRACKS] = 4
	else
		f7_local0[TAB.MP.BARRACKS] = 3
	end
	if TAB.GetBattlepassTabState() ~= TAB.VISIBILITY.HIDDEN then
		local f7_local1 = Dvar[0x22EAAB59AA27E9B]( 0xC83C7ECCCE6DBBA )
		if Dvar[0x9E5BE3B4BBA4E0E]( 0x4307B9A7A810A42 ) then
			local f7_local2 = Dvar[0x22EAAB59AA27E9B]( 0xC83C7ECCCE6DBBA )
			local f7_local3 = f7_local0[TAB.MP.BARRACKS] + 1
			local f7_local4 = TAB.BPReorder( f7_local2, f7_local3 )
			f7_local0[TAB.MP.PLAY] = f7_local4[f7_local0[TAB.MP.PLAY]]
			f7_local0[TAB.MP.WEAPONS] = f7_local4[f7_local0[TAB.MP.WEAPONS]]
			if TAB.GetChallengesTabState() ~= TAB.VISIBILITY.HIDDEN then
				f7_local0[TAB.MP.CHALLENGES] = f7_local4[f7_local0[TAB.MP.CHALLENGES]]
			end
			f7_local0[TAB.MP.OPERATORS] = f7_local4[f7_local0[TAB.MP.OPERATORS]]
			f7_local0[TAB.MP.BARRACKS] = f7_local4[f7_local0[TAB.MP.BARRACKS]]
			f7_local0[TAB.MP.BATTLE_PASS] = f7_local4[f7_local3]
			if TAB.GetStoreTabState() ~= TAB.VISIBILITY.HIDDEN then
				f7_local0[TAB.MP.STORE] = f7_local4[f7_local3 + 1]
			end
		else
			f7_local0[TAB.MP.BATTLE_PASS] = f7_local0[TAB.MP.BARRACKS] + 1
			if TAB.GetStoreTabState() ~= TAB.VISIBILITY.HIDDEN then
				f7_local0[TAB.MP.STORE] = f7_local0[TAB.MP.BATTLE_PASS] + 1
			end
		end
	elseif TAB.GetStoreTabState() ~= TAB.VISIBILITY.HIDDEN and not Dvar[0x9E5BE3B4BBA4E0E]( 0x4307B9A7A810A42 ) then
		f7_local0[TAB.MP.STORE] = f7_local0[TAB.MP.BARRACKS] + 1
	end
	return f7_local0[f7_arg0]
end

TAB.BPReorder = function ( f6_arg0, f6_arg1 )
	local f6_local0 = 4
	if TAB.VISIBILITY.HIDDEN ~= TAB.GetBattlepassTabState() then
		f6_local0 = f6_local0 + 1
	end
	if TAB.GetStoreTabState() ~= TAB.VISIBILITY.HIDDEN then
		f6_local0 = f6_local0 + 1
	end
	local f6_local1 = TAB.GetChallengesTabState()
	if f6_local1() ~= TAB.VISIBILITY.HIDDEN then
		f6_local0 = f6_local0 + 1
	end
	f6_arg0 = f6_arg0 - 1
	f6_local1 = {}
	if f6_arg0 < f6_local0 and 0 < f6_arg0 then
		for f6_local2 = 0, f6_local0 - 1, 1 do
			if f6_arg0 == f6_arg1 then
				f6_local1[f6_local2] = f6_local2
			end
			if f6_arg0 == f6_local0 - 1 then
				if f6_local2 == f6_arg1 then
					f6_local1[f6_local2] = f6_local2 + 1
				end
				if f6_local2 == f6_arg0 then
					f6_local1[f6_local2] = f6_arg1
				else
					f6_local1[f6_local2] = f6_local2
				end
			end
			if f6_local2 == f6_arg0 then
				f6_local1[f6_local2] = f6_local2 + 1
			end
			if f6_local2 == f6_arg1 then
				f6_local1[f6_local2] = f6_arg0
			end
			if f6_arg0 < f6_local2 and f6_local2 ~= f6_local0 - 1 then
				f6_local1[f6_local2] = f6_local2 + 1
			else
				f6_local1[f6_local2] = f6_local2
			end
		end
		return f6_local1
	else
		for f6_local2 = 0, f6_local0 - 1, 1 do
			f6_local1[f6_local2] = f6_local2
		end
		return f6_local1
	end
end

TAB.IsTabVisible = function ( f5_arg0 )
	local f5_local0 = true
	if f5_arg0.visible ~= nil then
		if type( f5_arg0.visible ) == "function" then
			f5_local0 = f5_arg0.visible()
		else
			f5_local0 = f5_arg0.visible
		end
	end
	return f5_local0
end

TAB.MobileCalcTabWidthBasedOnScreenWidth = function ( f4_arg0, f4_arg1 )
	local f4_local0 = f4_arg1.tabsGroup
	local f4_local1 = f4_arg1.tabsPlaceholder
	local f4_local2 = f4_arg1.spacingX
	local f4_local3 = 0
	for f4_local7, f4_local8 in ipairs( f4_local0 ) do
		if TAB.IsTabVisible( f4_local8 ) then
			f4_local3 = f4_local3 + 1
		end
	end
	if f4_local3 < 1 then
		return 0
	end
	f4_local4 = Engine[0xEE6F69FEA944B13]()
	f4_local5 = nil
	if f4_arg1.isFullscreen then
		f4_local5 = f4_local4:getWidth()
	else
		local f4_local6, f4_local7, f4_local8, f4_local9 = f4_local4.flowManager:getLocalRect()
		f4_local5 = f4_local4:getWidth() + f4_local8 - f4_local6
	end
	f4_local6 = f4_local1:GetAnchorsAndPosition()
	local f4_local9 = math.abs( f4_local5 * f4_local6.leftAnchor + f4_local6.left - f4_local5 * (1 - f4_local6.rightAnchor) + f4_local6.right )
	local f4_local10 = 0
	if f4_local2 then
		f4_local10 = f4_local2 / f4_local3
	end
	return f4_local9 / f4_local3 + f4_local10
end

TAB.MobileCreateAspectRatioAdjustedWidthTabs = function ( f1_arg0, f1_arg1, f1_arg2 )
	local f1_local0 = TAB.MobileCalcTabWidthBasedOnScreenWidth( f1_arg0, f1_arg2 )
	local f1_local1 = f1_arg2.tabsPlaceholder:GetAnchorsAndPosition()
	local f1_local2 = f1_local1.bottom - f1_local1.top
	local f1_local3 = nil
	f1_local3 = LUI.TabManager.new( {
		spacing = 0,
		wrap = false,
		ignoreShoulderBtn = true,
		tabHeight = f1_local2,
		buildTab = function ()
			local f3_local0 = MenuBuilder.BuildRegisteredType( f1_arg0.tabsChild, {
				controllerIndex = f1_arg0
			} )
			f3_local0:SetAnchorsAndPosition( 0, 1, 0, 1, 0, f1_arg0, 0, f1_arg0 )
			return f3_local0
		end,
		buildSpacer = function ()
			local f2_local0 = f1_arg0.tabsSpacer
			if f2_local0 then
				f2_local0 = MenuBuilder.BuildRegisteredType( f1_arg0.tabsSpacer, {
					controllerIndex = f1_arg0
				} )
			end
			return f2_local0
		end,
		controllerIndex = f1_arg1
	} )
	f1_local3.id = "Tabs"
	f1_local3:SetAnchorsAndPosition( f1_local1.leftAnchor, f1_local1.rightAnchor, f1_local1.topAnchor, f1_local1.bottomAnchor, f1_local1.left, f1_local1.right, f1_local1.top, f1_local1.bottom )
	return f1_local3
end

