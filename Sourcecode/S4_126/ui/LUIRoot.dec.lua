-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
LUI.UIRoot = LUI.Class( LUI.UIElement )
local f0_local0 = {
	POST_GAME = 0,
	HOST_MIGRATION = 1
}
GlobalInputEvents = {
	mute_voicechat = true,
	mute_microphone = true,
	decline_notification = true,
	quick_options = true,
	accept_notification = true,
	mute_sound = true,
	quick_social = true,
	quick_cac = true
}
local f0_local1 = {
	nil,
	"MPMainMenu"
}
local f0_local2 = function ( f71_arg0, f71_arg1 )
	return GlobalInputEvents[f71_arg1.button]
end

LUI.UIRoot.IdleFadeActive = function ( f70_arg0 )
	if Engine[0xE25E29D8ADE8F27]() or not f70_arg0.idleFadeEnabled or OSK[0x736AF74410E3002]() then
		return false
	elseif f70_arg0.textChat and f70_arg0.textChat.chat and TEXTCHAT.IsCurrentStateTextZoneClickable( f70_arg0.textChat.chat ) then
		return false
	end
	local f70_local0 = f70_arg0.flowManager
	if f70_local0 then
		f70_local0 = f70_arg0.flowManager:GetStackTop()
	end
	local f70_local1 = false
	for f70_local5, f70_local6 in ipairs( f0_local0 ) do
		if f70_local0 and f70_local0.name == f70_local6 then
			f70_local1 = true
			break
		end
	end
	if f70_local1 then
		f70_local2 = f70_local1
	else
		f70_local2 = f70_arg0.trackIdleEnabled
	end
	return f70_local2
end

LUI.UIRoot.CancelIdleFade = function ( f68_arg0 )
	if LUI.UIRoot.IdleFadeActive( f68_arg0 ) then
		local f68_local0 = f68_arg0.flowManager:GetAlpha()
		if f68_arg0.trackInputs and f68_local0 < 1 then
			local f68_local1 = Dvar[0x22EAAB59AA27E9B]( "#x36de1a2ed55fce045" ) * (1 - f68_local0) * 0.5
			f68_arg0.trackInputs = false
			local f68_local2 = f68_arg0.flowManager:SetAlpha( 1, f68_local1, LUI.EASING.inOutQuadratic )
			f68_local2.onComplete = function ()
				f68_arg0.trackInputs = true
			end
			
			if f68_arg0.textChat then
				f68_arg0.textChat:SetAlpha( 1, f68_local1, LUI.EASING.inOutQuadratic )
			end
			if f68_arg0.telemetryLayer then
				f68_arg0.telemetryLayer:SetAlpha( 1, f68_local1, LUI.EASING.inOutQuadratic )
			end
			if f68_arg0.logo then
				f68_arg0.logo:SetAlpha( 0, f68_local1, LUI.EASING.inOutQuadratic )
			end
		end
		f68_arg0.secondsSinceLastInput = 0
	end
end

LUI.UIRoot.UpdateIdleFade = function ( f67_arg0 )
	local f67_local0 = Dvar[0x9E5BE3B4BBA4E0E]( "#x34fb9807e17e6ef16" )
	if f67_arg0.idleFadeEnabled ~= f67_local0 then
		if f67_local0 then
			LUI.UIRoot.CancelIdleFade( f67_arg0 )
		end
		f67_arg0.idleFadeEnabled = f67_local0
	end
	local f67_local1 = OSK[0x736AF74410E3002]()
	if f67_arg0.oskActive ~= f67_local1 then
		if not f67_local1 then
			LUI.UIRoot.CancelIdleFade( f67_arg0 )
		end
		f67_arg0.oskActive = f67_local1
	end
	local f67_local2 = f67_arg0.textChat
	if f67_local2 then
		f67_local2 = f67_arg0.textChat.chat
		if f67_local2 then
			f67_local2 = TEXTCHAT.IsCurrentStateTextZoneClickable( f67_arg0.textChat.chat )
		end
	end
	if f67_arg0.textChatActive ~= f67_local2 then
		if not f67_local2 then
			LUI.UIRoot.CancelIdleFade( f67_arg0 )
		end
		f67_arg0.textChatActive = f67_local2
	end
	if LUI.UIRoot.IdleFadeActive( f67_arg0 ) then
		local f67_local3 = tonumber( Engine[0x3B8CFB6758EF57C]() )
		if not f67_arg0.lastEpochSecs then
			f67_arg0.lastEpochSecs = f67_local3
		end
		assert( f67_arg0.lastEpochSecs <= f67_local3 )
		f67_arg0.secondsSinceLastInput = f67_arg0.secondsSinceLastInput + f67_local3 - f67_arg0.lastEpochSecs
		f67_arg0.lastEpochSecs = f67_local3
		local f67_local4 = Dvar[0x22EAAB59AA27E9B]( "#x3823bcdcd64cc8e90" )
		local f67_local5 = f67_local4 + 1
		if f67_local4 < f67_arg0.secondsSinceLastInput and f67_arg0.flowManager:GetAlpha() == 1 then
			local f67_local6 = Dvar[0x22EAAB59AA27E9B]( "#x36de1a2ed55fce045" )
			f67_arg0.flowManager:SetAlpha( 0, f67_local6, LUI.EASING.inOutQuadratic )
			if f67_arg0.textChat then
				f67_arg0.textChat:SetAlpha( 0, f67_local6, LUI.EASING.inOutQuadratic )
			end
			if f67_arg0.telemetryLayer then
				f67_arg0.telemetryLayer:SetAlpha( 0, f67_local6, LUI.EASING.inOutQuadratic )
			end
			if f67_arg0.logo then
				f67_arg0.logo:SetAlpha( 1, f67_local6, LUI.EASING.inOutQuadratic )
			end
		elseif f67_local5 <= f67_arg0.secondsSinceLastInput and LUI.MouseCursorTooltipLayer.IsOpened( f67_arg0 ) then
			LUI.MouseCursorTooltipLayer.ForceCloseTooltip( f67_arg0.mouseCursorTooltipLayer._controllerIndex )
		end
	else
		f67_arg0.lastEpochSecs = nil
		if f67_arg0.flowManager then
			f67_arg0.flowManager:SetAlpha( 1 )
		end
		if f67_arg0.textChat then
			f67_arg0.textChat:SetAlpha( 1 )
		end
		if f67_arg0.telemetryLayer then
			f67_arg0.telemetryLayer:SetAlpha( 1 )
		end
		if f67_arg0.logo then
			f67_arg0.logo:SetAlpha( 0 )
		end
	end
end

LUI.UIRoot.TryAddMouseCursor = function ( f66_arg0, f66_arg1 )
	local f66_local0
	if f66_arg1 and not f66_arg1 then
		f66_local0 = f66_arg1
	else
		f66_local0 = "base"
	end
	f66_arg0._flagCursor[f66_local0] = true
	if Engine[0x5EE05AD994388B6]() and not Engine[0xE25E29D8ADE8F27]() and not f66_arg0.cursor then
		f66_arg0.cursor = LUI.UIMouseCursor.new()
		f66_arg0:addElement( f66_arg0.cursor )
		if Engine[0x3ECA657EE4C6C9]() then
			local f66_local1 = f66_arg0:GetControllerIndex()
			if not f66_local1 then
				f66_local1 = Engine[0x45B054C920178E9]()
			end
			if LUI.IsLastInputKeyboardMouse( f66_local1 ) then
				Engine[0x5F965FF5540EAC8]( true )
			end
		end
	end
end

LUI.UIRoot.RemoveMouseCursor = function ( f65_arg0, f65_arg1 )
	local f65_local0
	if f65_arg1 and not f65_arg1 then
		f65_local0 = f65_arg1
	else
		f65_local0 = "base"
	end
	f65_arg0._flagCursor[f65_local0] = false
	local f65_local1 = true
	for f65_local5, f65_local6 in pairs( f65_arg0._flagCursor ) do
		if f65_local6 then
			f65_local1 = false
			break
		end
	end
	if f65_arg0.cursor and f65_local1 then
		f65_arg0.cursor:closeTree()
		f65_arg0.cursor = nil
		if Engine[0x3ECA657EE4C6C9]() then
			Engine[0x5F965FF5540EAC8]( false )
		end
		if f65_arg0.mouseCursorTooltipLayer then
			f65_local2 = f65_arg0:GetControllerIndex()
			if not f65_local2 then
				f65_local2 = Engine[0x45B054C920178E9]()
			end
			f65_arg0.mouseCursorTooltipLayer:ClearTooltipData( f65_arg0, f65_local2, nil )
		end
	end
end

LUI.UIRoot.BlockButtonInput = function ( f64_arg0, f64_arg1, f64_arg2 )
	if f64_arg1 then
		f64_arg0.m_blockButtonInput = true
	else
		f64_arg0.m_blockButtonInput = false
	end
end

LUI.UIRoot.IsButtonInputBlocked = function ( f63_arg0 )
	return f63_arg0.m_blockButtonInput
end

LUI.UIRoot.PixelsToUnits = function ( f62_arg0, f62_arg1, f62_arg2 )
	return f62_arg0:RootPixelsToUnits( f62_arg1, f62_arg2 )
end

local f0_local3 = function ( f61_arg0, f61_arg1 )
	local f61_local0 = false
	local f61_local1 = false
	if f61_arg0.flowManager and not f61_arg0.flowManager:IsStackEmpty() then
		f61_local0 = true
	elseif f61_arg0.binkSkipPromptLayer and f61_arg0.binkSkipPromptLayer:ShouldBeVisible() and f61_arg0.binkSkipPromptLayer:TrapsInput( f61_arg1 ) then
		f61_local0 = true
	elseif f61_arg0.Snakecam and f61_arg0.Snakecam:ShouldBeVisible() and f61_arg0.Snakecam:TrapsInput( f61_arg1 ) then
		f61_local0 = true
	elseif f61_arg0.highFiveLayer and f61_arg0.highFiveLayer:ShouldBeVisible() and f61_arg0.highFiveLayer:TrapsInput( f61_arg1 ) then
		f61_local0 = true
	elseif f61_arg0.loadingScreenManager and f61_arg0.loadingScreenManager:ShouldBeVisible() and f61_arg0.loadingScreenManager:TrapsInput( f61_arg1 ) then
		f61_local0 = true
	elseif f61_arg0.scoreboardLayer and f61_arg0.scoreboardLayer:ShouldBeVisible() and f61_arg0.scoreboardLayer:TrapsInput( f61_arg1 ) then
		f61_local0 = true
	elseif f61_arg0.squadEliminatedLayer and f61_arg0.squadEliminatedLayer:ShouldBeVisible() and f61_arg0.squadEliminatedLayer:TrapsInput( f61_arg1 ) then
		f61_local0 = true
	elseif f61_arg0.textChat and f61_arg0.textChat:ShouldBeVisible() and f61_arg0.textChat:TrapsInput( f61_arg1 ) then
		f61_local0, f61_local1 = f61_arg0.textChat:InputsTrappedOrInteresting( f61_arg1 )
	elseif f61_arg0.radialMenuLayer and f61_arg0.radialMenuLayer:ShouldBeVisible() and f61_arg0.radialMenuLayer:TrapsInput( f61_arg1 ) then
		f61_local0 = true
	elseif f61_arg0.tacOpsLayer and f61_arg0.tacOpsLayer:ShouldBeVisible() and f61_arg0.tacOpsLayer:TrapsInput( f61_arg1 ) then
		f61_local0 = true
	elseif f61_arg0.brQuickInventoryLayer and f61_arg0.brQuickInventoryLayer:ShouldBeVisible() and f61_arg0.brQuickInventoryLayer:TrapsInput( f61_arg1 ) then
		f61_local0 = true
	elseif f61_arg0.dpadPopupLayer and f61_arg0.dpadPopupLayer:ShouldBeVisible() and f61_arg0.dpadPopupLayer:TrapsInput( f61_arg1 ) then
		f61_local0 = true
	elseif f61_arg0.birdsEyeLayer and f61_arg0.birdsEyeLayer:ShouldBeVisible() and f61_arg0.birdsEyeLayer:TrapsInput( f61_arg1 ) then
		f61_local0 = true
	elseif f61_arg0.timedUseMeterLayer and f61_arg0.timedUseMeterLayer:ShouldBeVisible() and f61_arg0.timedUseMeterLayer:TrapsInput( f61_arg1 ) then
		f61_local0 = true
	elseif f61_arg0.codcasterLayer and f61_arg0.codcasterLayer:ShouldBeVisible() and f61_arg0.codcasterLayer:TrapsInput( f61_arg1 ) then
		f61_local0 = true
	elseif f61_arg0.gunsmithDebug and f61_arg0.gunsmithDebug:ShouldBeVisible() and f61_arg0.gunsmithDebug:TrapsInput( f61_arg1 ) then
		f61_local0 = true
	elseif Engine[0x2DA54CF5D6B7F02]() and f61_arg0.uiDebugLayer:TrapsInput( f61_arg0, f61_arg1 ) then
		f61_local0 = true
	elseif f0_local0( f61_arg0, f61_arg1 ) then
		f61_local0 = true
	elseif f61_arg0.scriptedWidgetLayer and f61_arg0.scriptedWidgetLayer:ShouldBeVisible() and f61_arg0.scriptedWidgetLayer:TrapsInput( f61_arg1 ) then
		f61_local0 = true
	elseif f61_arg0.privateMatchManagementLayer and f61_arg0.privateMatchManagementLayer:ShouldBeVisible() then
		f61_local0 = true
	end
	if f61_local0 or f61_local1 then
		table.insert( f61_arg0.inputQueue, f61_arg1 )
		if 4 < #f61_arg0.inputQueue then
			table.remove( f61_arg0.inputQueue, 1 )
		end
	end
	return f61_local0
end

LUI.UIRoot.QueueMouseInput = function ( f60_arg0, f60_arg1, f60_arg2, f60_arg3, f60_arg4, f60_arg5, f60_arg6, f60_arg7 )
	local f60_local0 = {
		name = f60_arg3,
		rootName = f60_arg2,
		controller = f60_arg1,
		button = f60_arg4,
		down = f60_arg5,
		x = f60_arg6,
		y = f60_arg7
	}
	LUI.UIRoot.CancelIdleFade( f60_arg0 )
	return f0_local0( f60_arg0, f60_local0 )
end

LUI.UIRoot.QueueInput = function ( f59_arg0, f59_arg1, f59_arg2, f59_arg3, f59_arg4, f59_arg5, f59_arg6, f59_arg7, f59_arg8 )
	local f59_local0 = {
		name = "gamepad_button",
		controller = f59_arg1,
		rootName = f59_arg2,
		button = f59_arg4,
		qualifier = f59_arg5,
		down = f59_arg3,
		x = f59_arg6,
		y = f59_arg7,
		resetInputs = f59_arg8
	}
	LUI.UIRoot.CancelIdleFade( f59_arg0 )
	return f0_local0( f59_arg0, f59_local0 )
end

LUI.UIRoot.AddPreviewDependency = function ( f58_arg0, f58_arg1 )
	if Engine[0x7AE6126734FCDB]() and f58_arg0.previewModuleDeps then
		table.insert( f58_arg0.previewModuleDeps, f58_arg1 )
	end
end

LUI.UIRoot.PreviewWidget = function ( f57_arg0, f57_arg1, f57_arg2, f57_arg3, f57_arg4 )
	if Engine[0x7AE6126734FCDB]() then
		if f57_arg0.previewWidget then
			f57_arg0.previewWidget:closeTree()
			Engine[0x3DACD106DDC0D71]()
			f57_arg0.previewWidet = nil
		end
		if f57_arg0.previewingMenu then
			f57_arg0.flowManager:closeAllMenus()
			Engine[0x3DACD106DDC0D71]()
			f57_arg0.previewingMenu = false
		end
		if f57_arg0.previewModuleDeps then
			for f57_local3, f57_local4 in ipairs( f57_arg0.previewModuleDeps ) do
				DebugPrint( "Unloading dependent module " .. f57_local4 )
				package.loaded[f57_local4] = nil
			end
		end
		local f57_local0 = {}
		for f57_local4, f57_local5 in pairs( package.loaded ) do
			f57_local0[f57_local4] = true
		end
		f57_arg0:UpdateGameMode( {
			previousGameMode = CoD.PlayMode.None,
			currentGameMode = MenuBuilder_TEL.GetPreviewPlayMode( f57_arg3 )
		} )
		require( f57_arg2 )
		f57_local2 = MenuBuilder_TEL.GetPreviewOptions( f57_arg3 )
		if f57_arg4 == "menu" then
			f57_local3 = LUI.FlowManager.RequestAddMenu
			f57_local5 = f57_arg3
			local f57_local6 = true
			local f57_local7 = f57_arg1
			local f57_local8 = true
			local f57_local9
			if not f57_local2 then
				f57_local9 = f57_local2
			else
				f57_local9 = nil
			end
			f57_local3( f57_local5, f57_local6, f57_local7, f57_local8, f57_local9, false, true )
			f57_arg0.previewingMenu = true
		elseif f57_arg4 == "widget" then
			f57_local3 = MenuBuilder.BuildRegisteredType
			f57_local5 = f57_arg3
			local f57_local6
			if not f57_local2 then
				f57_local6 = f57_local2
			else
				f57_local6 = {
					controllerIndex = f57_arg1
				}
			end
			f57_arg0.previewWidget = f57_local3( f57_local5, f57_local6 )
			f57_arg0:addElement( f57_arg0.previewWidget )
		elseif f57_arg4 == "hud" then
			
		else
			
		end
		f57_arg0.previewModuleDeps = {}
		for f57_local6, f57_local7 in pairs( package.loaded ) do
			if not f57_local0[f57_local6] then
				DebugPrint( "Added module dependency " .. f57_local6 )
				table.insert( f57_arg0.previewModuleDeps, f57_local6 )
			end
		end
	end
end

LUI.UIRoot.ProcessQueue = function ( f56_arg0, f56_arg1 )
	local f56_local0 = #f56_arg1
	if 8 < f56_local0 then
		DebugPrint( "LUI WARNING: Processing " .. f56_local0 .. " global events in one frame." )
	end
	local f56_local1 = nil
	for f56_local2 = 1, f56_local0, 1 do
		local f56_local5 = f56_local2
		f56_local1 = f56_arg1[1]
		table.remove( f56_arg1, 1 )
		LUI.UIRoot.ProcessEventNow( f56_arg0, f56_local1 )
	end
end

LUI.UIRoot.CheckSystemUI = function ( f55_arg0 )
	Engine[0xD344B7DE66AFA81]( "LUI.UIRoot.CheckSystemUI" )
	if f55_arg0._isSystemUiActive == nil then
		f55_arg0._isSystemUiActive = Engine[0xE1F9074C0D53A40]()
	end
	local f55_local0 = f55_arg0._isSystemUiActive
	f55_arg0._isSystemUiActive = Engine[0xE1F9074C0D53A40]()
	if f55_arg0._isSystemUiActive ~= f55_local0 then
		if f55_arg0._isSystemUiActive then
			f55_arg0:processEvent( {
				name = "system_ui_opened"
			} )
		else
			f55_arg0:processEvent( {
				name = "system_ui_closed"
			} )
		end
	end
	Engine[0xC99CAB76F12E539]()
end

LUI.UIRoot.ProcessEvents = function ( f54_arg0 )
	Engine[0xD344B7DE66AFA81]( "LUI.UIRoot.ProcessEvents" )
	f54_arg0:ProcessQueue( f54_arg0.eventQueue )
	Engine[0xC99CAB76F12E539]()
end

LUI.UIRoot.ProcessInputs = function ( f53_arg0 )
	Engine[0xD344B7DE66AFA81]( "LUI.UIRoot.ProcessInputs" )
	f53_arg0:ProcessQueue( f53_arg0.inputQueue )
	Engine[0xC99CAB76F12E539]()
end

LUI.UIRoot.ProcessEvent = function ( f52_arg0, f52_arg1 )
	if f52_arg1.immediate == true then
		return LUI.UIRoot.ProcessEventNow( f52_arg0, f52_arg1 )
	else
		table.insert( f52_arg0.eventQueue, f52_arg1 )
		return false
	end
end

LUI.UIRoot.ProcessEventNow = function ( f51_arg0, f51_arg1 )
	Engine[0xD344B7DE66AFA81]( "LUI.UIRoot.ProcessEventNow " .. f51_arg1.name )
	if not f51_arg0.debugPrintIgnoreEvents[f51_arg1.name] and Dvar[0x9E5BE3B4BBA4E0E]( "#x393ef74508263e02e" ) then
		DebugPrint( "Processing event " .. f51_arg1.name )
		if f51_arg1.name == "gamepad_button" then
			DebugPrint( "button " .. f51_arg1.button )
		end
	end
	if f51_arg0.m_blockButtonInput and (f51_arg1.name == "gamepad_button" or f51_arg1.name == "mouseup") then
		DebugPrint( "Blocking Button input for " .. f51_arg1.button .. "  because m_ignoreButtonInput is true" )
		Engine[0xC99CAB76F12E539]()
		return false
	elseif IsMouseEvent( f51_arg1.name, f51_arg1.qualifier ) then
		local f51_local0 = f51_arg0.flowManager:GetTopMostOpenMenuInfo()
		if f51_local0 and f51_local0.isControllerExclusive then
			local f51_local1
			if f51_local0.controller and f51_arg1.controller and f51_local0.controller ~= f51_arg1.controller then
				f51_local1 = false
			else
				f51_local1 = true
			end
			if not f51_local1 then
				return true
			end
		end
		f51_arg1.root = f51_arg0
		f51_arg0:UpdateInputType( f51_arg1 )
		if IsMouseInputEvent( f51_arg1.name, f51_arg1.qualifier ) then
			LUI.UIRoot.ProcessMouseButtonEvent( f51_arg0, f51_arg1 )
		else
			LUI.UIRoot.ProcessMouseMoveEvent( f51_arg0, f51_arg1 )
		end
		if f51_arg0.cursor then
			f51_arg0.cursor:processEvent( f51_arg1 )
		end
		Engine[0xC99CAB76F12E539]()
		return true
	elseif IsTouchInputEvent( f51_arg1.name ) then
		f51_arg1.root = f51_arg0
		LUI.UIRoot.ProcessTouchEvent( f51_arg0, f51_arg1 )
		Engine[0xC99CAB76F12E539]()
		return true
	elseif f51_arg1.target and f51_arg1.target ~= f51_arg0 then
		Engine[0xC99CAB76F12E539]()
		return f51_arg1.target:processEvent( f51_arg1 )
	elseif IsInputEvent( f51_arg1.name ) then
		if f51_arg1.name ~= "gamepad_sticks" and not f51_arg1.maintainMouseFocus then
			f51_arg0:ClearFocusStack()
		end
		f51_arg0:UpdateInputType( f51_arg1 )
		if not AnyActiveMenusInStack( f51_arg0 ) and f51_arg0.gunsmithDebug then
			f51_arg0.gunsmithDebug:processEvent( f51_arg1 )
		end
		local f51_local0 = false
		local f51_local1 = AnyActiveMenusInStack( f51_arg0 )
		local f51_local2 = Engine[0xCA085C21FCBD7CA]()
		if Engine[0x2DA54CF5D6B7F02]() and LUI.UIDebugLayer and LUI.UIDebugLayer.ProcessEvent( f51_arg0, f51_arg1 ) then
			f51_local0 = true
		elseif f51_arg0.toastManager and f51_arg0.toastManager:processEvent( f51_arg1 ) then
			f51_local0 = true
		elseif f51_arg0.mouseCursorContextualMenuLayer and f51_arg0.mouseCursorContextualMenuLayer:ShouldBeVisible() and f51_arg0.mouseCursorContextualMenuLayer:processEvent( f51_arg1 ) then
			f51_local0 = true
		elseif f51_arg0.textChat and f51_arg0.textChat:ShouldBeVisible() and f51_arg0.textChat:processEvent( f51_arg1 ) then
			f51_local0 = true
			f51_local1 = true
		elseif f51_arg0.codcasterLayer and f51_arg0.codcasterLayer:ShouldBeVisible() and f51_arg0.codcasterLayer:TrapsInput( f51_arg1 ) then
			if not f51_local0 then
				f51_local0 = f51_arg0.codcasterLayer:processEvent( f51_arg1 )
			end
			f51_local1 = true
		elseif AnyActiveMenusInStack( f51_arg0 ) or f0_local0( f51_arg0, f51_arg1 ) then
			if not f51_local0 then
				f51_local0 = f51_arg0.flowManager:processEvent( f51_arg1 )
			end
		elseif f51_arg0.binkSkipPromptLayer and f51_arg0.binkSkipPromptLayer:ShouldBeVisible() then
			if not f51_local0 then
				f51_local0 = f51_arg0.binkSkipPromptLayer:processEvent( f51_arg1 )
			end
		elseif f51_arg0.Snakecam and f51_arg0.Snakecam:ShouldBeVisible() then
			if not f51_local0 then
				f51_local0 = f51_arg0.Snakecam:processEvent( f51_arg1 )
			end
		elseif f51_arg0.highFiveLayer and f51_arg0.highFiveLayer:ShouldBeVisible() and f51_arg0.highFiveLayer:TrapsInput( f51_arg1 ) then
			if not f51_local0 then
				f51_local0 = f51_arg0.highFiveLayer:processEvent( f51_arg1 )
			end
		elseif f51_arg0.loadingScreenManager and f51_arg0.loadingScreenManager:ShouldBeVisible() then
			if not f51_local0 then
				f51_local0 = f51_arg0.loadingScreenManager:processEvent( f51_arg1 )
			end
		elseif f51_arg0.scoreboardLayer and not f51_local2 and f51_arg0.scoreboardLayer:TrapsInput( f51_arg1 ) then
			if not f51_local0 then
				f51_local0 = f51_arg0.scoreboardLayer:processEvent( f51_arg1 )
			end
		elseif f51_arg0.scoreboardLayer and f51_local2 and LUI.ScoreboardLayer.IsShowingScoreboard( f51_arg0.scoreboardLayer ) then
			if not f51_local0 then
				f51_local0 = f51_arg0.scoreboardLayer:processEvent( f51_arg1 )
			end
		elseif f51_arg0.squadEliminatedLayer and f51_arg0.squadEliminatedLayer:ShouldBeVisible() and f51_arg0.squadEliminatedLayer:TrapsInput( f51_arg1 ) then
			if not f51_local0 then
				f51_local0 = f51_arg0.squadEliminatedLayer:processEvent( f51_arg1 )
			end
		elseif f51_arg0.dpadPopupLayer and LUI.DpadPopupLayer.IsShowingDpadPopup( f51_arg0.dpadPopupLayer ) then
			if not f51_local0 then
				f51_local0 = f51_arg0.dpadPopupLayer:processEvent( f51_arg1 )
			end
		elseif f51_arg0.birdsEyeLayer and LUI.BirdsEyeLayer.IsShowingBirdsEye( f51_arg0.birdsEyeLayer ) then
			if not f51_local0 then
				f51_local0 = f51_arg0.birdsEyeLayer:processEvent( f51_arg1 )
			end
		elseif f51_arg0.timedUseMeterLayer and LUI.TimedUseMeterLayer.IsShowingTimedUseMeter( f51_arg0.timedUseMeterLayer ) then
			if not f51_local0 then
				f51_local0 = f51_arg0.timedUseMeterLayer:processEvent( f51_arg1 )
			end
		elseif f51_arg0.tacOpsLayer and f51_arg0.tacOpsLayer:TrapsInput( f51_arg1 ) then
			if not f51_local0 then
				f51_local0 = f51_arg0.tacOpsLayer:processEvent( f51_arg1 )
			end
		elseif f51_arg0.brQuickInventoryLayer and f51_arg0.brQuickInventoryLayer:TrapsInput( f51_arg1 ) then
			if not f51_local0 then
				f51_local0 = f51_arg0.brQuickInventoryLayer:processEvent( f51_arg1 )
			end
		elseif f51_arg0.telemetryLayer and f51_arg0.telemetryLayer:ShouldBeVisible() and f51_arg0.telemetryLayer:TrapsInput() then
			if not f51_local0 then
				f51_local0 = f51_arg0.telemetryLayer:processEvent( f51_arg1 )
			end
		elseif f51_arg0.achievementsManager and f51_arg0.achievementsManager:ShouldBeVisible() and f51_arg0.achievementsManager:TrapsInput() and not f51_local0 then
			f51_local0 = f51_arg0.achievementsManager:processEvent( f51_arg1 )
		end
		if not f51_local0 and f51_arg0.scriptedWidgetLayer and f51_arg0.scriptedWidgetLayer:ShouldBeVisible() and not f51_local0 then
			f51_local0 = f51_arg0.scriptedWidgetLayer:processEvent( f51_arg1 )
		end
		if not f51_local0 and not f51_local1 and f51_arg0.radialMenuLayer and f51_arg0.radialMenuLayer:ShouldBeVisible() and f51_arg0.radialMenuLayer:TrapsInput( f51_arg1 ) and not f51_local0 then
			f51_local0 = f51_arg0.radialMenuLayer:processEvent( f51_arg1 )
		end
		if not f51_local0 and f51_arg0.privateMatchManagementLayer and not f51_local0 then
			f51_local0 = f51_arg0.privateMatchManagementLayer:processEvent( f51_arg1 )
		end
		Engine[0xC99CAB76F12E539]()
		return f51_local0
	elseif f51_arg1.name == "text_edit_is_typing" then
		f51_arg0:UpdateInputType( f51_arg1 )
	end
	f51_arg0:UpdateInputConnected( f51_arg1 )
	local f51_local0 = LUI.UIElement.processEvent( f51_arg0, f51_arg1 )
	Engine[0xC99CAB76F12E539]()
	return f51_local0
end

LUI.UIRoot.ApplyElementTransformTill = function ( f50_arg0, f50_arg1 )
	if UseMouseMoveEventOptimizedSystem and f50_arg0 ~= f50_arg1 then
		local f50_local0 = f50_arg0:getParent()
		if f50_local0 and f50_local0 ~= f50_arg1 then
			LUI.UIRoot.ApplyElementTransformTill( f50_local0, f50_arg1 )
		end
		f50_arg0:applyElementTransform()
	end
end

LUI.UIRoot.UndoElementTransformTill = function ( f49_arg0, f49_arg1 )
	if UseMouseMoveEventOptimizedSystem and f49_arg0 and f49_arg0 ~= f49_arg1 then
		f49_arg0:undoElementTransform()
		local f49_local0 = f49_arg0:getParent()
		if f49_local0 and f49_local0 ~= f49_arg1 then
			LUI.UIRoot.UndoElementTransformTill( f49_local0, f49_arg1 )
		end
	end
end

local f0_local4 = function ( f48_arg0, f48_arg1, f48_arg2, f48_arg3, f48_arg4 )
	if Engine[0x5EE05AD994388B6]() then
		if Engine[0x12586A3F4FB490E]() or LUI.UIRoot.mouseInitialized then
			if f48_arg0.handleMouseMove then
				if f48_arg0:AcceptsFocusType( FocusType.MouseOver ) and not f48_arg0:isInFocus() then
					f48_arg0:processEvent( {
						name = "gain_focus",
						focusType = FocusType.MouseOver,
						controller = f48_arg2
					} )
					local f48_local0 = f48_arg0:getParent()
					if f48_local0:isIDNamed() then
						f48_local0.shouldSaveState = true
					end
				end
				if f48_arg0.m_mouseOver == nil then
					f48_arg0.m_mouseOver = true
					if f48_arg0.m_eventHandlers.mouseenter ~= nil then
						f48_arg0.m_eventHandlers:mouseenter( {
							name = "mouseenter",
							controller = f48_arg2,
							root = f48_arg1,
							x = f48_arg3,
							y = f48_arg4
						} )
					end
				end
			end
		else
			LUI.UIRoot.mouseInitialized = true
		end
	end
end

local f0_local5 = function ( f47_arg0, f47_arg1, f47_arg2, f47_arg3, f47_arg4, f47_arg5 )
	if Engine[0x5EE05AD994388B6]() and (Engine[0x12586A3F4FB490E]() or LUI.UIRoot.mouseInitialized) and f47_arg0.handleMouseMove then
		if f47_arg0:isInFocus() then
			f47_arg0:processEvent( {
				name = "lose_focus"
			} )
		end
		if f47_arg0.m_mouseOver ~= nil then
			f47_arg0.m_mouseOver = nil
			if f47_arg0.m_eventHandlers.mouseleave ~= nil then
				LUI.UIRoot.ApplyElementTransformTill( f47_arg0, f47_arg1 )
				local f47_local0, f47_local1 = ProjectRootCoordinate( f47_arg3, f47_arg4, f47_arg5 )
				f47_arg0.m_eventHandlers:mouseleave( {
					name = "mouseleave",
					controller = f47_arg2,
					root = f47_arg1,
					x = f47_local0,
					y = f47_local1
				} )
				LUI.UIRoot.UndoElementTransformTill( f47_arg0, f47_arg1 )
			end
		end
	end
end

if UseMouseMoveEventOptimizedSystem then
	local f0_local6 = function ( f46_arg0, f46_arg1, f46_arg2, f46_arg3, f46_arg4, f46_arg5, f46_arg6, f46_arg7 )
		f46_arg2:applyElementTransform()
		local f46_local0 = false
		local f46_local1, f46_local2 = ProjectRootCoordinate( f46_arg0, f46_arg5, f46_arg6 )
		if f46_local1 and f46_local2 and f46_arg2:getLastChild() then
			
		else
			
		end
		f46_arg2:undoElementTransform()
		return false
	end
	
	LUI.UIRoot.ComputeCurrentMouseFocus = function ( f45_arg0, f45_arg1, f45_arg2, f45_arg3, f45_arg4, f45_arg5, f45_arg6 )
		local f45_local0 = {}
		if not f45_arg1._blockMouseMove then
			local f45_local1, f45_local2 = ProjectRootCoordinate( f45_arg0, f45_arg4, f45_arg5 )
			if f45_local1 and f45_local2 and f45_arg1.handleMouseMove and f45_arg1:IsPositionInside( f45_local1, f45_local2 ) and (not f45_arg6 or f45_arg1:isDescendentOf( f45_arg6 )) then
				table.insert( f45_local0, f45_arg1 )
				f45_arg1.projectedMousePosition = {
					mouseX = f45_local1,
					mouseY = f45_local2
				}
			end
		end
		f0_local0( f45_arg0, f45_arg2, f45_arg1, f45_arg3, f45_local0, f45_arg4, f45_arg5, f45_arg6 )
		return f45_local0
	end
	
end
local f0_local6 = function ( f44_arg0, f44_arg1, f44_arg2, f44_arg3, f44_arg4 )
	f44_arg1:applyElementTransform()
	local f44_local0 = false
	local f44_local1, f44_local2 = ProjectRootCoordinate( f44_arg0, f44_arg3, f44_arg4 )
	if f44_local1 and f44_local2 then
		local f44_local3 = f44_arg1:getLastChild()
		if f44_local3 and f44_local3.isProxy and f44_local3.eventReceiver then
			f44_local3 = f44_local3.eventReceiver:getLastChild()
		end
		if f44_local3 then
			
		else
			
		end
	end
	f44_arg1:undoElementTransform()
	return false
end

LUI.UIRoot.ComputeCurrentMouseFocus = function ( f43_arg0, f43_arg1, f43_arg2, f43_arg3, f43_arg4 )
	local f43_local0 = {}
	if not f43_arg1._blockMouseMove then
		local f43_local1, f43_local2 = ProjectRootCoordinate( f43_arg0, f43_arg2, f43_arg3 )
		if f43_local1 and f43_local2 and f43_arg1.handleMouseMove and f43_arg1:IsPositionInside( f43_local1, f43_local2 ) then
			table.insert( f43_local0, f43_arg1 )
		end
	end
	f0_local0( f43_arg0, f43_arg1, f43_local0, f43_arg2, f43_arg3 )
	if f43_arg4 then
		for f43_local1 = #f43_local0, 1, -1 do
			if not f43_local0[f43_local1]:isDescendentOf( f43_arg4 ) then
				table.remove( f43_local0, f43_local1 )
			end
		end
	end
	return f43_local0
end

f0_local6 = function ( f42_arg0, f42_arg1, f42_arg2 )
	if f42_arg0._blockTouchFocus then
		return nil
	end
	local f42_local0 = f42_arg0:getLastChild()
	if f42_local0 and f42_local0 then
		
	else
		
	end
	if f42_arg0.handleTouchInput and f42_arg0:GetVisibility() == LUI.Visibility.Visible and f42_arg0:IsUnitsPositionInside( f42_arg1, f42_arg2 ) then
		return f42_arg0
	end
	return nil
end

LUI.UIRoot.ComputeCurrentTouchFocus = function ( f41_arg0, f41_arg1, f41_arg2, f41_arg3, f41_arg4 )
	local f41_local0, f41_local1 = ProjectRootCoordinate( f41_arg0, f41_arg2, f41_arg3 )
	if f41_local0 and f41_local1 then
		local f41_local2 = LUI.UIRoot.GetRootFromName( f41_arg0 )
		if f41_local2 then
			local f41_local3, f41_local4 = f41_local2:PixelsToUnits( f41_local0, f41_local1 )
			if f41_local3 and f41_local4 then
				return f0_local0( f41_arg1, f41_local3, f41_local4 )
			end
		end
	end
	return nil
end

LUI.UIRoot.ComputeCurrentFocusFromEvent = function ( f40_arg0, f40_arg1 )
	local f40_local0 = f40_arg1.rootName
	local f40_local1 = Engine[0xEE6F69FEA944B13]()
	if not f40_local0 then
		f40_local0 = f40_local1.name
	end
	if IsMouseEvent( f40_arg1.name, f40_arg1.qualifier ) then
		if UseMouseMoveEventOptimizedSystem then
			return LUI.UIRoot.ComputeCurrentMouseFocus( f40_local0, f40_arg0, f40_arg1.root, f40_arg1.controller, f40_arg1.x, f40_arg1.y, f40_local1.lockedFocusToChildrenOf )
		else
			return LUI.UIRoot.ComputeCurrentMouseFocus( f40_local0, f40_arg0, f40_arg1.x, f40_arg1.y, f40_local1.lockedFocusToChildrenOf )
		end
	else
		return LUI.UIRoot.ComputeCurrentTouchFocus( f40_local0, f40_arg0, f40_arg1.x, f40_arg1.y, f40_local1.lockedFocusToChildrenOf )
	end
end

LUI.UIRoot.LockFocusStackToChildrenOfElement = function ( f39_arg0 )
	local f39_local0 = Engine[0xEE6F69FEA944B13]()
	f39_local0.lockedFocusToChildrenOf = f39_arg0
	return true
end

LUI.UIRoot.UnlockFocusStackToChildrenOfElement = function ()
	local f38_local0 = Engine[0xEE6F69FEA944B13]()
	f38_local0.lockedFocusToChildrenOf = nil
	return true
end

LUI.UIRoot.GetActiveLayer = function ( f37_arg0 )
	assert( f37_arg0 )
	local f37_local0 = nil
	if f37_arg0.scoreboardLayer and f37_arg0.scoreboardLayer:ShouldBeVisible() and (f37_arg0.scoreboardLayer:IsShowingScoreboard() or f37_arg0.scoreboardLayer:IsShowingScoreboardProxy()) then
		f37_local0 = f37_arg0.scoreboardLayer
	elseif f37_arg0.brQuickInventoryLayer and f37_arg0.brQuickInventoryLayer:ShouldBeVisible() and f37_arg0.brQuickInventoryLayer:IsShowingQuickInventory() then
		f37_local0 = f37_arg0.brQuickInventoryLayer
	elseif f37_arg0.radialMenuLayer and f37_arg0.radialMenuLayer:ShouldBeVisible() then
		f37_local0 = f37_arg0.radialMenuLayer
	elseif f37_arg0.tacOpsLayer and f37_arg0.tacOpsLayer:ShouldBeVisible() then
		f37_local0 = f37_arg0.tacOpsLayer
	elseif f37_arg0.binkSkipPromptLayer and f37_arg0.binkSkipPromptLayer:ShouldBeVisible() then
		f37_local0 = f37_arg0.binkSkipPromptLayer
	elseif f37_arg0.squadEliminatedLayer and f37_arg0.squadEliminatedLayer:ShouldBeVisible() then
		f37_local0 = f37_arg0.squadEliminatedLayer
	end
	return f37_local0
end

LUI.UIRoot.ProcessMouseMoveEvent = function ( f36_arg0, f36_arg1 )
	local f36_local0 = {}
	local f36_local1 = 0
	if not f36_arg0.lastX then
		f36_arg0.lastX = 0
		f36_arg0.lastY = 0
	end
	local f36_local2, f36_local3 = ProjectRootCoordinate( f36_arg1.rootName, f36_arg0.lastX, f36_arg0.lastY )
	local f36_local4, f36_local5 = ProjectRootCoordinate( f36_arg1.rootName, f36_arg1.x, f36_arg1.y )
	local f36_local6 = math.abs( f36_local4 - f36_local2 ) + math.abs( f36_local5 - f36_local3 )
	if 0 < f36_local6 then
		LUI.UIRoot.CancelIdleFade( f36_arg0 )
	end
	if Dvar[0x9E5BE3B4BBA4E0E]( "#x39614fdbc677e915" ) then
		if not f36_arg0._lastMouseMoveTime then
			f36_arg0._lastMouseMoveTime = 0
		end
		if not f36_arg0._stackTimers then
			f36_arg0._stackTimers = {}
		end
		local f36_local7 = Engine[0x6991337AE950F99]()
		f36_local1 = f36_local7 - f36_arg0._lastMouseMoveTime
		f36_arg0._lastMouseMoveTime = f36_local7
	end
	f36_arg0.lastX = f36_arg1.x
	f36_arg0.lastY = f36_arg1.y
	if not f36_arg0._refreshFocusStack and not f36_arg0._hasStackTimers and f36_local6 <= 0 then
		return true
	elseif f36_arg0.mouseCursorContextualMenuLayer and f36_arg0.mouseCursorContextualMenuLayer:ShouldBeVisible() and f36_arg0.mouseCursorContextualMenuLayer:IsOpened() then
		table.insert( f36_local0, f36_arg0.mouseCursorContextualMenuLayer )
	else
		if Engine[0x2DA54CF5D6B7F02]() and f36_arg0.uiDebugLayer then
			table.insert( f36_local0, f36_arg0.uiDebugLayer )
		end
		if f36_arg0.toastManager then
			table.insert( f36_local0, f36_arg0.toastManager )
		end
		if f36_arg0.textChat and f36_arg0.textChat:ShouldBeVisible() then
			table.insert( f36_local0, f36_arg0.textChat )
		end
		if f36_arg0.shaderPreloadLayer and f36_arg0.shaderPreloadLayer:ShouldBeVisible() then
			table.insert( f36_local0, f36_arg0.shaderPreloadLayer )
		end
		if AnyActiveMenusInStack( f36_arg0 ) and not f36_arg0.flowManager:ShouldIgnoreInput() then
			local f36_local7 = table.insert
			local f36_local8 = f36_local0
			local f36_local9 = f36_arg0.flowManager:GetTopMostOpenMenuInfo()
			f36_local7( f36_local8, f36_local9.menu )
		end
		local f36_local7 = LUI.UIRoot.GetActiveLayer( f36_arg0 )
		if f36_local7 and f36_local7.handleMouseMove then
			table.insert( f36_local0, f36_local7 )
		end
	end
	local f36_local7 = LUI.ShallowCopy( f36_arg0.mouseFocusStack )
	if UseMouseMoveEventOptimizedSystem and f36_arg0.restoredFocus then
		for f36_local15, f36_local16 in ipairs( f36_arg0.restoredFocus ) do
			local f36_local11 = true
			for f36_local12, f36_local13 in ipairs( f36_local7 ) do
				if f36_local16 == f36_local13 then
					f36_local11 = false
					break
				end
			end
			if f36_local11 then
				table.insert( f36_local7, f36_local16 )
			end
		end
		f36_arg0._refreshFocusStack = true
		f36_arg0.restoredFocus = nil
	end
	if not f36_arg0.lockedMouseFocusStack then
		if 0 < f36_local6 or f36_arg0._refreshFocusStack then
			f36_arg0.mouseFocusStack = {}
			for f36_local15, f36_local16 in ipairs( f36_local0 ) do
				f36_arg0.mouseFocusStack = LUI.UIRoot.ComputeCurrentFocusFromEvent( f36_local16, f36_arg1 )
				if 0 < #f36_arg0.mouseFocusStack then
					break
				end
			end
		end
		if Dvar[0x9E5BE3B4BBA4E0E]( "#x39614fdbc677e915" ) then
			local f36_local10 = {}
			f36_arg0._hasStackTimers = false
			if f36_local6 > (Dvar[0x22EAAB59AA27E9B]( "#x34cadba9ac810fd6a" ) or 10) and 0 < #f36_arg0.mouseFocusStack and f36_arg0.mouseFocusStack[1]:GetUseDelayedFocus() then
				f36_arg1.focusStack = {}
				local f36_local15 = false
				local f36_local16 = Dvar[0x22EAAB59AA27E9B]( "#x3441f5e643cbac7c6" ) or 500
				f36_arg0._hasStackTimers = true
				for f36_local14, f36_local12 in pairs( f36_arg0.mouseFocusStack ) do
					if f36_arg0._stackTimers[f36_local12] then
						f36_local10[f36_local12] = f36_arg0._stackTimers[f36_local12] + f36_local1
						if f36_local16 < f36_local10[f36_local12] then
							table.insert( f36_arg1.focusStack, f36_local12 )
						end
					end
					local f36_local13 = false
					for f36_local22, f36_local23 in ipairs( f36_local7 ) do
						if f36_local23 == f36_local12 then
							f36_local13 = true
							break
						end
					end
					if f36_local13 then
						table.insert( f36_arg1.focusStack, f36_local12 )
					else
						f36_local10[f36_local12] = f36_local1
					end
				end
			else
				f36_arg1.focusStack = f36_arg0.mouseFocusStack
			end
			f36_arg0._stackTimers = f36_local10
		else
			f36_arg1.focusStack = f36_arg0.mouseFocusStack
		end
	else
		local f36_local10 = {}
		for f36_local16, f36_local11 in ipairs( f36_local0 ) do
			f36_local10 = LUI.UIRoot.ComputeCurrentFocusFromEvent( f36_local11, f36_arg1 )
			if 0 < #f36_local10 then
				break
			end
		end
		f36_arg1.focusStack = {}
		for f36_local16, f36_local11 in ipairs( f36_local10 ) do
			for f36_local12, f36_local13 in ipairs( f36_arg0.mouseFocusStack ) do
				if f36_local11 == f36_local13 then
					table.insert( f36_arg1.focusStack, f36_local11 )
				end
			end
		end
	end
	if UseMouseMoveEventOptimizedSystem and f36_local7 and 0 < #f36_local7 then
		local f36_local10, f36_local8, f36_local9 = ipairs( f36_local7 )
		goto basicblock_103:
	end
	if LUI.FocusDebug ~= nil then
		LUI.FocusDebug.StartFocusChain( f36_arg0 )
	end
	if UseMouseMoveEventOptimizedSystem then
		local f36_local10 = LUI.ShallowCopy( f36_arg1 )
		f36_local10.name = "mousedrag"
		local f36_local8
		if LUI.FocusDebug ~= nil then
			f36_local8 = LUI.FocusDebug.Enabled()
		else
			f36_local8 = false
		end
		for f36_local11, f36_local17 in ipairs( f36_local0 ) do
			if f36_local8 then
				LUI.FocusDebug.BeginFocusChainLayer( f36_local17 )
				f36_local17:CreateDebugFocusStack( f36_arg1 )
			end
			f36_local17:processEvent( f36_arg1 )
			f36_local17:processEvent( f36_local10 )
			if f36_local8 then
				LUI.FocusDebug.EndFocusChainItem()
			end
		end
	else
		for f36_local15, f36_local16 in ipairs( f36_local0 ) do
			if LUI.FocusDebug ~= nil then
				LUI.FocusDebug.BeginFocusChainLayer( f36_local16 )
			end
			f36_local16:processEventNoDispatch( f36_arg1 )
			if LUI.FocusDebug ~= nil then
				LUI.FocusDebug.EndFocusChainItem()
			end
		end
	end
	if LUI.FocusDebug ~= nil then
		LUI.FocusDebug.EndFocusChain( f36_arg0 )
	end
	LUI.UIMouseCursor.UpdateMouseCursor( f36_arg1.focusStack[#f36_arg1.focusStack], f36_arg1.controller )
	f36_arg0._refreshFocusStack = false
	return true
end

LUI.UIRoot.RemoveElementFromFocusStacks = function ( f35_arg0, f35_arg1 )
	for f35_local3, f35_local4 in ipairs( f35_arg0.mouseFocusStack ) do
		if f35_local4 == f35_arg1 then
			table.remove( f35_arg0.mouseFocusStack, f35_local3 )
			break
		end
	end
	for f35_local3, f35_local4 in pairs( f35_arg0.touchFocusElements ) do
		if f35_local4 == f35_arg1 then
			f35_arg0.touchFocusElements[f35_local3] = nil
			break
		end
	end
	if f35_arg0._stackTimers then
		f35_arg0._stackTimers[f35_arg1] = nil
	end
end

LUI.UIRoot.ProcessMouseButtonEvent = function ( f34_arg0, f34_arg1 )
	LUI.UIRoot.CancelIdleFade( f34_arg0 )
	if not f34_arg0.mouseFocusStack then
		return false
	end
	local f34_local0 = LUI.ShallowCopy( f34_arg0.mouseFocusStack )
	local f34_local1 = LUI.UIRoot.GetActiveLayer( f34_arg0 )
	if f34_local1 and not f34_local1.handleMouseMove and f34_local1.handleMouseButton then
		table.insert( f34_local0, f34_local1 )
	end
	local f34_local2 = false
	local f34_local3 = false
	if 0 < #f34_local0 and f34_arg1.name == "mousedown" then
		if f34_arg0.lockedMouseFocusStack == nil then
			f34_arg0.lockedMouseFocusStack = f34_arg1.button
			f34_local2 = true
		end
	elseif f34_arg1.name == "mouseup" then
		if f34_arg0.lockedMouseFocusStack then
			if f34_arg0.lockedMouseFocusStack ~= f34_arg1.button then
				local f34_local4 = LUI.ShallowCopy( f34_arg1 )
				f34_local4.button = f34_arg0.lockedMouseFocusStack
				f34_local4.x = LUI.UIMouseCursor.invalidMousePos
				f34_local4.y = LUI.UIMouseCursor.invalidMousePos
				LUI.UIRoot.ProcessMouseButtonEvent( f34_arg0, f34_local4 )
			end
			f34_arg0.lockedMouseFocusStack = nil
			f34_local2 = true
			f34_local3 = true
		elseif #f34_arg0.mouseFocusStack == 0 then
			Engine[0xA1DAA3E8650282A]( f34_arg1.controller )
		end
	elseif f34_arg1.name == "gamepad_button" and f34_arg1.qualifier == "mousewheel" then
		f34_local2 = true
	end
	if f34_arg0.mouseCursorContextualMenuLayer and f34_arg0.mouseCursorContextualMenuLayer:ShouldBeVisible() and f34_arg0.mouseCursorContextualMenuLayer:processEvent( f34_arg1 ) then
		f34_local2 = false
	end
	if f34_arg0.textChat and f34_arg0.textChat:ShouldBeVisible() and not LUI.UIElement.isDescendentOf( f34_local0[#f34_local0], f34_arg0.textChat ) and f34_arg1.name == "mouseup" then
		f34_arg0.textChat:processEvent( {
			name = "minimize_chat"
		} )
	end
	if f34_local2 then
		local f34_local4 = f34_arg1.dispatchChildren
		f34_arg1.dispatchChildren = false
		local f34_local5 = {}
		local f34_local6 = f34_local0[#f34_local0]
		if f34_local6 and f34_local6 ~= self then
			
		else
			
		end
		for f34_local7 = #f34_local5, 1, -1 do
			f34_local5[f34_local7]:applyElementTransform()
		end
		local f34_local7 = f34_arg1.rootName
		if not f34_local7 then
			local f34_local8 = Engine[0xEE6F69FEA944B13]()
			f34_local7 = f34_local8.name
		end
		f34_local8 = 1
		for f34_local9 = #f34_local0, 1, -1 do
			if f34_local0[f34_local9].handleMouseButton then
				f34_arg1.mouseX, f34_arg1.mouseY = ProjectRootCoordinate( f34_local7, f34_arg1.x, f34_arg1.y )
				f34_arg1.inside = f34_local0[f34_local9]:IsPositionInside( REG15, REG16 )
				if f34_local0[f34_local9]:processEvent( f34_arg1 ) then
					break
				end
			end
			f34_local0[f34_local9]:undoElementTransform()
			f34_local8 = f34_local8 + 1
		end
		for f34_local9 = f34_local8, #f34_local5, 1 do
			f34_local5[f34_local9]:undoElementTransform()
		end
		f34_arg1.dispatchChildren = f34_local4
	end
	if f34_local3 then
		Engine[0xA1DAA3E8650282A]( f34_arg1.controller )
	end
	return true
end

LUI.UIRoot.ProcessTouchEvent = function ( f33_arg0, f33_arg1 )
	local f33_local0 = {}
	if not Engine[0x12586A3F4FB490E]() and Engine[0x9258F49F515F97B]() then
		if f33_arg0.scoreboardLayer then
			table.insert( f33_local0, f33_arg0.scoreboardLayer )
		end
		if f33_arg0.touchVirtualGamepadLayer then
			table.insert( f33_local0, f33_arg0.touchVirtualGamepadLayer )
		end
	end
	local f33_local1 = f33_arg1.id
	if f33_arg1.name == "touchBegin" then
		f33_arg0.touchFocusElements[f33_local1] = nil
		for f33_local5, f33_local6 in ipairs( f33_local0 ) do
			f33_arg0.touchFocusElements[f33_local1] = LUI.UIRoot.ComputeCurrentFocusFromEvent( f33_local6, f33_arg1 )
			if f33_arg0.touchFocusElements[f33_local1] then
				break
			end
		end
	end
	if f33_arg0.touchFocusElements[f33_local1] == nil then
		return 
	end
	local f33_local2 = f33_arg0.name
	local f33_local3, f33_local4 = ProjectRootCoordinate( f33_local2, f33_arg1.x, f33_arg1.y )
	if f33_local3 and f33_local4 then
		local f33_local5 = LUI.UIRoot.GetRootFromName( f33_local2 )
		if f33_local5 then
			f33_arg1.unitsX, f33_arg1.unitsY = f33_local5:PixelsToUnits( f33_local3, f33_local4 )
			f33_arg1.root = f33_local5
			f33_arg1.isInside = f33_local5.touchFocusElements[f33_local1]:IsUnitsPositionInside( f33_local6, REG9 )
		end
	end
	f33_arg0.touchFocusElements[f33_local1]:ProcessTouchEvent( f33_arg1 )
	local f33_local5 = f33_arg0.touchVirtualGamepadLayer.virtualGamepad
	if f33_local5 then
		local f33_local6 = f33_arg0.touchFocusElements[f33_local1]
		if f33_local6 ~= f33_local5 and f33_local6:isDescendentOf( f33_local5 ) and f33_local5:ShouldProcessTouchEventFromChild( f33_local6, f33_arg1 ) then
			f33_local5:ProcessTouchEvent( f33_arg1 )
		end
	end
	if f33_arg1.name == "touchEnd" then
		f33_arg0.touchFocusElements[f33_local1] = nil
	end
end

LUI.UIRoot.RefreshFocusStack = function ( f32_arg0, f32_arg1 )
	assert( f32_arg0 )
	f32_arg0._refreshFocusStack = true
	Engine[0xA1DAA3E8650282A]( f32_arg1 )
end

LUI.UIRoot.ClearFocusStack = function ( f31_arg0 )
	f31_arg0:ClearMouseFocusStack()
	f31_arg0:ClearTouchFocusStack()
end

LUI.UIRoot.ClearMouseFocusStack = function ( f30_arg0 )
	f30_arg0.lockedMouseFocusStack = nil
	f30_arg0.mouseFocusStack = {}
	if f30_arg0.cursor and f30_arg0.cursor._controllerIndex then
		LUI.UIMouseCursor.UpdateMouseCursor( nil, f30_arg0.cursor._controllerIndex )
	end
	if LUI.FocusDebug ~= nil then
		LUI.FocusDebug.StartFocusChain()
		LUI.FocusDebug.EndFocusChain()
	end
end

LUI.UIRoot.ClearTouchFocusStack = function ( f29_arg0 )
	f29_arg0.touchFocusElements = {}
end

LUI.UIRoot.UpdatePublisherVariables = function ( f28_arg0, f28_arg1 )
	if f28_arg0.flowManager then
		f28_arg0.flowManager:processEvent( {
			name = "update_publisher_variables"
		} )
	end
	LOOT.UpdatePublisherVariables()
	return true
end

LUI.UIRoot.AddLayer = function ( f27_arg0, f27_arg1, f27_arg2 )
	assert( f27_arg1.id )
	assert( f27_arg1.InitLayer )
	assert( f27_arg1.ShouldBeVisible )
	assert( f27_arg1.ClearLayer )
	table.insert( f27_arg0.layers, f27_arg1 )
	local f27_local0
	if not f27_arg2 then
		f27_local0 = f27_arg2
	else
		f27_local0 = {}
	end
	f27_arg1.options = f27_local0
	if f27_arg1.options.exclusive then
		assert( f27_arg1.options.priority )
	end
	f27_arg1.layerEnabled = false
	f27_local0 = _720 * 16 / 18
	f27_arg1:SetAnchorsAndPosition( 0.5, 0.5, 0, 0, -f27_local0, f27_local0, 0, 0 )
	f27_arg0:addElement( f27_arg1 )
	return f27_arg1
end

LUI.UIRoot.UpdateLayers = function ( f26_arg0 )
	Engine[0xD344B7DE66AFA81]( "LUI.UIRoot.UpdateLayers" )
	Engine[0xD344B7DE66AFA81]( "Calc Exclusive Layer" )
	local f26_local0 = nil
	for f26_local4, f26_local5 in pairs( f26_arg0.layers ) do
		if f26_local5:ShouldBeVisible() and f26_local5.options.exclusive and (f26_local0 == nil or f26_local0.options.priority < f26_local5.options.priority) then
			f26_local0 = f26_local5
		end
	end
	Engine[0xC99CAB76F12E539]()
	Engine[0xD344B7DE66AFA81]( "Layer Frames" )
	for f26_local4, f26_local5 in pairs( f26_arg0.layers ) do
		local f26_local6 = f26_local5:ShouldBeVisible()
		if f26_local6 then
			if f26_local0 ~= nil and f26_local0 ~= f26_local5 then
				f26_local6 = false
			else
				f26_local6 = true
			end
		end
		if f26_local5.layerEnabled ~= f26_local6 and not f26_local6 then
			Engine[0xD344B7DE66AFA81]( "Layer:ClearLayer " .. f26_local5.id )
			f26_local5:ClearLayer()
			Engine[0xC99CAB76F12E539]()
			f26_local5.layerEnabled = f26_local6
		end
	end
	for f26_local4, f26_local5 in pairs( f26_arg0.layers ) do
		local f26_local6 = f26_local5:ShouldBeVisible()
		if f26_local6 then
			if f26_local0 ~= nil and f26_local0 ~= f26_local5 then
				f26_local6 = false
			else
				f26_local6 = true
			end
		end
		if f26_local5.layerEnabled ~= f26_local6 and f26_local6 then
			Engine[0xD344B7DE66AFA81]( "Layer:InitLayer " .. f26_local5.id )
			f26_local5:InitLayer()
			Engine[0xC99CAB76F12E539]()
			f26_local5.layerEnabled = f26_local6
		end
		if f26_local5.layerEnabled and f26_local5.Frame then
			Engine[0xD344B7DE66AFA81]( "Layer:Frame " .. f26_local5.id )
			f26_local5:Frame()
			Engine[0xC99CAB76F12E539]()
		end
	end
	Engine[0xC99CAB76F12E539]()
	Engine[0xC99CAB76F12E539]()
end

LUI.UIRoot.HandleErrors = function ( f25_arg0 )
	Engine[0xD344B7DE66AFA81]( "LUI.UIRoot.HandleErrors" )
	local f25_local0 = Dvar[0x54084D7CA2317BB]( "#x3449a9da4ce329693" )
	if f25_local0 and 0 < #f25_local0 then
		if Engine[0x5575DCFF312365A]() and Engine[0xD87B38D9E227ECC]() then
			
		elseif CONDITIONS.IsTrialLicense() and Dvar[0x9E5BE3B4BBA4E0E]( "#x35b553c3aa91add74" ) then
			LUI.FlowManager.RequestPopupMenu( nil, "ShowUpsellDialogPopup", true, f25_arg0._controllerIndex, false, {
				controllerIndex = f25_arg0._controllerIndex
			} )
		elseif not LUI.FlowManager.IsInStack( "ErrorPopup" ) and not CONDITIONS.IsQABotRunning() then
			DebugPrint( "Opening error popup for message: " .. tostring( f25_local0 ) .. ", length: " .. tostring( #f25_local0 ) )
			LUI.FlowManager.RequestPopupMenu( nil, "ErrorPopup" )
		end
	end
	if Engine[0x2DA54CF5D6B7F02]() and not Engine[0x7AE6126734FCDB]() and not Engine[0x74423E76DECE3E4]() and not CONDITIONS.IsQABotRunning() then
		local f25_local1 = Engine[0x8D21D8DCA457A86]()
		if f25_local1 and 0 < f25_local1 and not LUI.FlowManager.IsInStack( "ErrorPopup" ) and not LUI.FlowManager.IsInStack( "LoadErrorPopup" ) then
			LUI.FlowManager.RequestPopupMenu( nil, "LoadErrorPopup" )
		end
	end
	f25_arg0:HandleMissingControllers()
	local f25_local1 = Engine[0x709213536E7C42A]()
	local f25_local2 = LUI.FlowManager.IsInStack( "WaitingForTransientsPopup" )
	if f25_local1 and not f25_local2 then
		LUI.FlowManager.RequestPopupMenu( nil, "WaitingForTransientsPopup", false, nil, false, {}, nil, true )
	elseif f25_local2 and not f25_local1 then
		LUI.FlowManager.RequestLeaveMenuByName( "WaitingForTransientsPopup", true )
	end
	Engine[0xC99CAB76F12E539]()
end

LUI.UIRoot.HandleMissingControllers = function ( f24_arg0 )
	if Engine[0xE1F9074C0D53A40]() then
		return 
	end
	local f24_local0 = f24_arg0._controllerIndex
	if not f24_local0 then
		f24_local0 = Engine[0x45B054C920178E9]()
	end
	local f24_local1 = Engine[0x6938F45868B1BBC]( f24_local0 )
	local f24_local2 = LUI.FlowManager.IsInStack( "ControllerRemovedPopup" )
	local f24_local3 = LUI.FlowManager.IsInStack( "KeyboardRemovedPopup" )
	local f24_local4 = LUI.FlowManager.IsInStack( "InputSwapPopup" )
	local f24_local5 = MenuUtils.CanShowConnectionPopups()
	local f24_local6 = not f24_arg0.keyboardConnected
	local f24_local7 = not f24_arg0.gamepadConnected
	if f24_local5 and not f24_local2 and not f24_local3 and not f24_local4 then
		local f24_local8 = nil
		if f24_local6 and not f24_local1 then
			if not f24_local3 then
				f24_local8 = "KeyboardRemovedPopup"
			end
		elseif f24_local7 and f24_local1 then
			if not f24_arg0.keyboardConnected and not f24_local2 then
				f24_local8 = "ControllerRemovedPopup"
			elseif not f24_local4 then
				f24_local8 = "InputSwapPopup"
			end
		end
		if f24_local8 then
			LUI.FlowManager.RequestPopupMenu( nil, f24_local8, false, f24_arg0._controllerIndex, false, {
				controllerIndex = f24_local0
			}, nil, true )
		end
	end
	if f24_local3 and (f24_arg0.keyboardConnected or not f24_local5 or f24_local1) then
		LUI.FlowManager.RequestLeaveMenuByName( "KeyboardRemovedPopup", true )
	end
	if f24_local4 and (not (Engine[0x9D348E40740E9A8]() or not f24_arg0.gamepadConnected) or not f24_local5 or not f24_local1) then
		LUI.FlowManager.RequestLeaveMenuByName( "InputSwapPopup", true )
	end
	if f24_local2 and (f24_arg0.gamepadConnected or not f24_local5 or not f24_local1) then
		LUI.FlowManager.RequestLeaveMenuByName( "ControllerRemovedPopup", true )
	end
end

LUI.UIRoot.Frame = function ( f23_arg0, f23_arg1 )
	Engine[0xD344B7DE66AFA81]( "LUI.UIRoot.Frame" )
	if not Engine[0x12586A3F4FB490E]() and Game[0xA988866C889EAAD]() then
		InitInGameDataSources()
	end
	f23_arg0:CheckSystemUI()
	f23_arg0:ProcessEvents()
	f23_arg0:UpdateLayers()
	f23_arg0:ProcessInputs()
	f23_arg0:RunFixups()
	f23_arg0:HandleErrors()
	SOUNDS.UpdateLoopingSounds()
	LUI.UIRoot.UpdateIdleFade( f23_arg0 )
	Engine[0xC99CAB76F12E539]()
	return true
end

LUI.UIRoot.UpdateGameMode = function ( f22_arg0, f22_arg1 )
	CoD.UpdateGameMode( f22_arg1.currentGameMode, f22_arg1.previousGameMode )
	return true
end

LUI.UIRoot.PlayerDataAvailable = function ( f21_arg0, f21_arg1 )
	DebugPrint( "PlayerData is now available!  controller=" .. f21_arg1.controllerIndex .. ", statsSource=" .. f21_arg1.statsSource )
	MP_COMMON.ValidatePlayerData( f21_arg1.controllerIndex, f21_arg1.statsSource )
	return true
end

LUI.UIRoot.StartMatch = function ( f20_arg0, f20_arg1 )
	OnlineProgression[0x855FA3EEB7A15F3]( f20_arg1.controller )
	PROGRESSION.SaveAllWeaponsXPToDDL( f20_arg1.controller )
	if Engine[0x836C8AD984F14F6]() then
		InGameStore.ShowStoreIcon( false )
	end
	return true
end

LUI.UIRoot.ChallengesUpdated = function ( f19_arg0, f19_arg1 )
	OnlineProgression[0x855FA3EEB7A15F3]( f19_arg1.controller )
	PROGRESSION.SaveAllWeaponsXPToDDL( f19_arg1.controller )
	return false
end

LUI.UIRoot.ChallengeCompleted = function ( f18_arg0, f18_arg1 )
	if PROGRESSION.IsWeaponProgressionChallenge( f18_arg1.kind, f18_arg1.id ) then
		PROGRESSION.SaveWeaponXPToDDL( f18_arg1.controller, f18_arg1.id )
	elseif f18_arg1.kind == AEKinds.S4_AE_KIND_PROGRESSION.ID or f18_arg1.kind == AEKinds.S4_AE_KIND_ELDER.ID then
		OnlineProgression[0x855FA3EEB7A15F3]( f18_arg1.controller )
	end
end

LUI.UIRoot.ClanNotification = function ( f17_arg0, f17_arg1 )
	local f17_local0 = f17_arg1.options
	if f17_local0.genEventName == "clans_active_clan_change" then
		Challenge.SendClanMembershipEvent( f17_local0.controllerIndex, f17_local0.clanId )
	elseif f17_local0.genEventName == CLANS.ClanEvents.LEFT_CLAN_ACTIVE then
		local f17_local1 = f17_local0.controllerIndex
		Engine[0xF78719F4FBFB925]( f17_local1, LOOT.EmblemType.CUSTOM )
		Engine[0x83EEB60522A30A9]( f17_local1, ClanTagType.DEFAULT )
	elseif f17_local0.genEventName == CLANS.ClanEvents.INITIALIZED or f17_local0.genEventName == CLANS.ClanEvents.KICKED then
		if Engine[0x12586A3F4FB490E]() and CONDITIONS.IsMenuInStack( "SocialMenu" ) then
			LUI.FlowManager.RequestRestoreMenu( "SocialMenu", true, f17_local0.controllerIndex )
			LUI.FlowManager.RequestLeaveMenuByName( "SocialMenu", true, true )
			LUI.FlowManager.RequestAddMenu( "SocialMenu", true, f17_local0.controllerIndex, false, {}, true )
		end
	elseif f17_local0.genEventName == CLANS.ClanEvents.DEMOTED_TO_MEMBER and Engine[0x12586A3F4FB490E]() then
		local f17_local1 = nil
		if CONDITIONS.IsMenuInStack( "ClanMembersMenu" ) then
			f17_local1 = "ClanMembersMenu"
		elseif CONDITIONS.IsMenuInStack( "PlayerDetailMenu" ) then
			f17_local1 = "PlayerDetailMenu"
		end
		if f17_local1 then
			LUI.FlowManager.RequestRestoreMenu( f17_local1, true, f17_local0.controllerIndex )
			LUI.FlowManager.RequestLeaveMenuByName( f17_local1, true, true )
		end
	end
end

LUI.UIRoot.InventoryAddItem = function ( f16_arg0, f16_arg1 )
	Challenge.ActivateAchievementForNewItem( f16_arg1.controller, f16_arg1.id )
end

LUI.UIRoot.InventoryUpdateItem = function ( f15_arg0, f15_arg1 )
	
end

LUI.UIRoot.InventoryDeleteItem = function ( f14_arg0, f14_arg1 )
	
end

LUI.UIRoot.InventoryDownloadComplete = function ( f13_arg0, f13_arg1 )
	if f13_arg1.type == "player" then
		Challenge.FixupActivationTokens( f13_arg1.controller )
	end
end

LUI.UIRoot.OnlineFencesNotification = function ( f12_arg0, f12_arg1 )
	local f12_local0 = f12_arg1.gamemode
	if f12_local0 == CoD.PlayMode.Core or f12_local0 == CoD.PlayMode.Aliens then
		local f12_local1 = f12_arg1.controller
		Challenge.SendLoginEvent( f12_local1 )
		Challenge.SendClanMembershipEvent( f12_local1 )
		Challenge.FixupActivationTokens( f12_local1 )
		Challenge.FixupWeaponChallengesActivation( f12_local1 )
		BATTLEPASS.FixupT9TierSkips( f12_local1 )
	end
end

LUI.UIRoot.RunFixups = function ( f11_arg0 )
	for f11_local0 = 0, Engine[0xB686A0A723E6442]() - 1, 1 do
		if Challenge.ActivationTokensRetries ~= nil and Challenge.ActivationTokensRetries[f11_local0] ~= nil and Challenge.ActivationTokensRetries[f11_local0].nextRequestTime <= Engine[0x6991337AE950F99]() then
			Challenge.FixupActivationTokens( f11_local0 )
		end
	end
end

LUI.UIRoot.UpdateInputType = function ( f10_arg0, f10_arg1 )
	f10_arg0:UpdateInputConnected( f10_arg1 )
	if not Engine[0x5EE05AD994388B6]() then
		return 
	end
	assert( f10_arg1.controller )
	local f10_local0 = f10_arg1.inputType and f10_arg1.inputType or Engine[0x363C9B5AE5CC5ED]( f10_arg1.controller )
	if f10_arg0.lastInputType ~= f10_local0 then
		if UseMouseMoveEventOptimizedSystem and f10_local0 == LUI.INPUT_TYPE.keyboardMouse then
			f10_arg0.mouseFocusStack = Engine[0x68B5943DAC8D211]()
		end
		f10_arg0.lastInputType = f10_local0
		f10_arg0:processEvent( {
			name = "update_input_type",
			immediate = true,
			controllerIndex = f10_arg1.controller
		} )
	end
end

LUI.UIRoot.UpdateInputConnected = function ( f9_arg0, f9_arg1 )
	local f9_local0 = f9_arg0._controllerIndex
	if not f9_local0 then
		f9_local0 = Engine[0x45B054C920178E9]()
	end
	local f9_local1 = f9_arg0.flowManager
	if f9_local1 then
		f9_local1 = f9_arg0.flowManager:GetTopMostOpenMenuInfo()
	end
	if f9_local1 then
		local f9_local2 = f9_local1
	else
		local f9_local2 = f9_local1.isControllerExclusive and f9_local1.controller
	end
	local f9_local3 = Engine[0x741C985ADA0608B]( f9_local0 )
	if f9_arg0.keyboardConnected ~= f9_local3 then
		local f9_local4 = Engine[0xE1F9074C0D53A40]()
		if not f9_local4 and not f9_arg0.systemUiOpened then
			f9_arg0.keyboardConnected = f9_local3
			f9_arg0:dispatchEventToChildren( {
				name = "input_connection",
				controllerIndex = f9_local0
			} )
		end
		f9_arg0.systemUiOpened = f9_local4
	end
	local f9_local4 = OPTIONS.IsGamepadConnected( f9_local0 )
	if f9_arg0.gamepadConnected ~= f9_local4 then
		f9_arg0.gamepadConnected = f9_local4
		f9_arg0:dispatchEventToChildren( {
			name = "input_connection",
			controllerIndex = f9_local0
		} )
	end
end

LUI.UIRoot.SetLuiLayerKeycatch = function ( f8_arg0, f8_arg1, f8_arg2 )
	local f8_local0 = Engine[0xEE6F69FEA944B13]()
	if not f8_local0 then
		return 
	elseif f8_local0.layerLUIKeycatch[f8_arg1] == nil then
		f8_local0.layerLUIKeycatch[f8_arg1] = {}
	end
	local f8_local1 = f8_local0.layerLUIKeycatch[f8_arg1]
	if f8_arg2 then
		local f8_local2 = false
		for f8_local6, f8_local7 in pairs( f8_local1 ) do
			if 0 < f8_local7 then
				f8_local2 = true
				break
			end
		end
		f8_local1[f8_arg0.id] = f8_local1[f8_arg0.id] and f8_local1[f8_arg0.id] + 1 or 1
		if not f8_local2 then
			Engine[0xB6C9C9D8AD5A171]( f8_arg1, f8_arg2 )
			f8_local0:TryAddMouseCursor( "layerKeyCatch" )
		end
	elseif f8_local1[f8_arg0.id] then
		local f8_local2 = f8_arg0.id
		local f8_local3 = f8_local1[f8_arg0.id]
		if f8_local3 then
			f8_local3 = f8_local1[f8_arg0.id] - 1
		end
		f8_local1[f8_local2] = f8_local3
		if 0 < f8_local1[f8_arg0.id] then
			return 
		end
		f8_local1[f8_arg0.id] = nil
		f8_local2 = true
		for f8_local6, f8_local7 in pairs( f8_local1 ) do
			if 0 < f8_local7 then
				f8_local2 = false
				break
			end
		end
		if f8_local2 then
			Engine[0xB6C9C9D8AD5A171]( f8_arg1, f8_arg2 )
			f8_local0:RemoveMouseCursor( "layerKeyCatch" )
		end
	end
end

LUI.UIRoot.init = function ( f5_arg0, f5_arg1, f5_arg2 )
	LUI.UIRoot.super.init( f5_arg0 )
	f5_arg0:SetAnchors( 0.5, 0.5, 0.5, 0.5 )
	local f5_local0
	if not f5_arg1 then
		f5_local0 = f5_arg1
	else
		f5_local0 = Engine[0x45B054C920178E9]()
	end
	f5_arg0._flagCursor = {
		layerKeyCatch = false,
		base = false
	}
	f5_arg0.id = "LUIRoot"
	f5_arg0.isaroot = true
	f5_arg0._controllerIndex = f5_arg1
	f5_arg0.name = f5_arg2
	f5_arg0.layers = {}
	f5_arg0.eventQueue = {}
	f5_arg0.inputQueue = {}
	f5_arg0.lastInputType = Engine[0x363C9B5AE5CC5ED]( f5_local0 )
	f5_arg0.layerLUIKeycatch = {}
	f5_arg0.keyboardConnected = Engine[0x741C985ADA0608B]( f5_local0 )
	f5_arg0.gamepadConnected = OPTIONS.IsGamepadConnected( f5_local0 )
	f5_arg0.systemUiOpened = false
	f5_arg0.mouseFocusStack = {}
	f5_arg0.lockedMouseFocusStack = nil
	f5_arg0.touchFocusElements = {}
	f5_arg0.debugPrintIgnoreEvents = {
		mousemove = true,
		gamepad_sticks = true,
		process_events = true
	}
	f5_arg0.secondsSinceLastInput = 0
	f5_arg0.trackIdleEnabled = false
	f5_arg0.trackInputs = false
	Engine[0x95B08DBB27E217B]( f5_local0, false )
	Dvar[0x8EA06EEDB58D872]( "#x34aa98d7bdb61496d", false )
	LUI.roots[f5_arg2] = f5_arg0
	if LUI.primaryRoot == nil then
		LUI.primaryRoot = f5_arg0
	end
	f5_arg0.processEvent = LUI.UIRoot.ProcessEvent
	f5_arg0:registerEventHandler( "run_frame", LUI.UIRoot.Frame )
	f5_arg0:registerEventHandler( "update_game_mode", LUI.UIRoot.UpdateGameMode )
	f5_arg0:registerEventHandler( "update_publisher_variables", LUI.UIRoot.UpdatePublisherVariables )
	f5_arg0:addEventHandler( "empty_menu_stack", LUI.UIRoot.ClearFocusStack )
	f5_arg0:registerEventHandler( "gamer_profile_input_type_updated", LUI.UIRoot.UpdateInputType )
	f5_arg0:registerEventHandler( "playerdata_available", LUI.UIRoot.PlayerDataAvailable )
	f5_arg0:registerEventHandler( "start_match", LUI.UIRoot.StartMatch )
	f5_arg0:registerEventHandler( "challenges_updated", LUI.UIRoot.ChallengesUpdated )
	f5_arg0:registerEventHandler( "completed_challenge", LUI.UIRoot.ChallengeCompleted )
	f5_arg0:registerEventHandler( CLANS.ClansNotification, LUI.UIRoot.ClanNotification )
	f5_arg0:registerEventHandler( "Inventory_AddItem", LUI.UIRoot.InventoryAddItem )
	f5_arg0:registerEventHandler( "Inventory_UpdateItem", LUI.UIRoot.InventoryUpdateItem )
	f5_arg0:registerEventHandler( "Inventory_DeleteItem", LUI.UIRoot.InventoryDeleteItem )
	f5_arg0:registerEventHandler( "Inventory_DownloadComplete", LUI.UIRoot.InventoryDownloadComplete )
	f5_arg0:registerEventHandler( "track_idle_enabled", function ( element, event )
		if f5_arg0.trackIdleEnabled and not event.enabled then
			LUI.UIRoot.CancelIdleFade( f5_arg0 )
		elseif not f5_arg0.trackIdleEnabled and event.enabled then
			f5_arg0.lastEpochSecs = nil
		end
		f5_arg0.trackIdleEnabled = event.enabled
		if f5_arg0.trackIdleEnabled then
			f5_arg0.secondsSinceLastInput = 0
			f5_arg0.trackInputs = true
		end
	end )
	f5_arg0:registerEventHandler( "lui_social_received_message", function ( element, event )
		LUI.UIRoot.CancelIdleFade( f5_arg0 )
	end )
	f5_arg0:registerEventHandler( "online_data_fences_passed", LUI.UIRoot.OnlineFencesNotification )
	if UIDebugOverlayUtils and f5_arg0 == LUI.primaryRoot then
		f5_arg0:registerEventHandler( "debug_overlay_frame", UIDebugOverlayUtils.FrameEvent )
	end
	f5_arg0.eventCatcher = EventCatcher.new()
	f5_arg0.eventCatcher:setupRoot( f5_arg0 )
	local f5_local1 = Engine[0x12586A3F4FB490E]()
	local f5_local2 = Engine[0x9258F49F515F97B]()
	local f5_local3 = Engine[0xCA085C21FCBD7CA]()
	local f5_local4 = Engine[0x575E9C5B9AAB6F4]()
	local f5_local5 = Engine[0x2DA54CF5D6B7F02]()
	local f5_local6 = Engine[0x5575DCFF312365A]()
	local f5_local7 = Engine[0xD151EC5B41223B5]()
	if Engine[0x7AE6126734FCDB]() then
		f5_arg0.flowManager = f5_arg0:AddLayer( LUI.FlowManager.new( f5_arg0, f5_arg1 ) )
		f5_arg0.aeTrophyManager = f5_arg0:AddLayer( LUI.AETrophyManager.new( f5_arg0, f5_local0 ) )
		f5_arg0.fadeFrameLayer = f5_arg0:AddLayer( LUI.AspectRatioFadeFrameLayer.new( f5_arg0._controllerIndex ) )
		f5_arg0.debugLayer = f5_arg0:AddLayer( LUI.DebugLayer.new( {
			controllerIndex = f5_local0
		} ) )
		if f5_local5 then
			f5_arg0.uiDebugLayer = f5_arg0:AddLayer( LUI.UIDebugLayer.new( {
				controllerIndex = f5_local0
			} ) )
		end
		return 
	elseif f5_local1 or f5_local2 then
		f5_arg0.fadeManager = f5_arg0:AddLayer( LUI.FadeManager.new( f5_arg0._controllerIndex ) )
	end
	if f5_local1 then
		f5_arg0.optionalBlurLayer = f5_arg0:AddLayer( LUI.OptionalBlurLayer.new( {
			controllerIndex = f5_local0
		} ) )
	end
	if f5_local1 and CONDITIONS.IsMPPrivateMatchEnabled() then
		f5_arg0.privateMatchManagementLayer = f5_arg0:AddLayer( LUI.PrivateMatchManagementLayer.new( f5_arg0._controllerIndex ), {
			exclusive = false
		} )
	end
	if CONDITIONS.IsBenchmarkMode() then
		f5_arg0.BenchmarkLayer = f5_arg0:AddLayer( LUI.BenchmarkLayer.new( f5_arg0._controllerIndex ) )
	end
	if not f5_local1 then
		f5_arg0.inWorldManager = f5_arg0:AddLayer( LUI.InWorldManager.new( f5_arg0._controllerIndex ) )
		f5_arg0.hudManager = f5_arg0:AddLayer( LUI.HudManager.new( {
			root = f5_arg0
		} ) )
		if Dvar[0x9E5BE3B4BBA4E0E]( "#x3fdbbae6c5276672d" ) then
			f5_arg0.touchVirtualGamepadLayer = f5_arg0:AddLayer( LUI.TouchVirtualGamepadLayer.new( {
				root = f5_arg0
			} ) )
		end
		f5_arg0.scriptedWidgetLayer = f5_arg0:AddLayer( LUI.ScriptedWidgetLayer.new( f5_arg0._controllerIndex ), {
			exclusive = false
		} )
		if f5_local2 then
			local f5_local8 = Dvar[0x54084D7CA2317BB]( "#x3a30c33efc8281eb1" )
			if f5_local7 then
				f5_arg0.codcasterLayer = f5_arg0:AddLayer( LUI.CodcasterLayer.new( f5_arg0._controllerIndex ), {
					exclusive = false
				} )
			end
			f5_arg0.highFiveLayer = f5_arg0:AddLayer( LUI.HighFiveLayer.new( f5_arg0._controllerIndex ), {
				exclusive = false
			} )
			f5_arg0.loadingScreenManager = f5_arg0:AddLayer( LUI.LoadingScreenManager.new( f5_arg0._controllerIndex ), {
				exclusive = false
			} )
			if f5_local8 == "arm" or f5_local8 == "base" then
				f5_arg0.tacOpsLayer = f5_arg0:AddLayer( LUI.TacOpsLayer.new( f5_arg0._controllerIndex ), {
					exclusive = false
				} )
			end
			f5_arg0.postGameManager = f5_arg0:AddLayer( LUI.PostGameManager.new( f5_arg0._controllerIndex ), {
				priority = f0_local0.POST_GAME
			} )
			if f5_local8 == "br" then
				f5_arg0.squadEliminatedLayer = f5_arg0:AddLayer( LUI.SquadEliminatedLayer.new( f5_arg0._controllerIndex ), {
					exclusive = false
				} )
				if not Dvar[0x9E5BE3B4BBA4E0E]( "#x3b50304fada8026a6" ) then
					f5_arg0.brQuickInventoryLayer = f5_arg0:AddLayer( LUI.BRQuickInventoryLayer.new( f5_arg0._controllerIndex ), {
						exclusive = false
					} )
				end
				if CONDITIONS.IsBRTutorialMap() or CONDITIONS.IsBMTutorialMap() then
					f5_arg0.brTutorialEndGameFlowLayer = f5_arg0:AddLayer( LUI.BRTutorialEndGameFlowLayer.new( f5_arg0._controllerIndex ), {
						exclusive = false
					} )
				end
			end
			f5_arg0.scoreboardLayer = f5_arg0:AddLayer( LUI.ScoreboardLayer.new( f5_arg0._controllerIndex ), {
				exclusive = false
			} )
			f5_arg0.hostMigrationManager = f5_arg0:AddLayer( LUI.HostMigrationManager.new(), {
				exclusive = true,
				priority = f0_local0.HOST_MIGRATION
			} )
			if f5_local5 then
				f5_arg0.gunsmithDebug = f5_arg0:AddLayer( LUI.GunsmithDebug.new( f5_arg0._controllerIndex ) )
			end
		end
		if Engine[0x74423E76DECE3E4]() and f5_arg0.binkSkipPromptLayer then
			f5_arg0.binkSkipPromptLayer = f5_arg0:AddLayer( LUI.BinkSkipPromptLayer.new( f5_arg0._controllerIndex ), {
				exclusive = false
			} )
			f5_arg0.Snakecam = f5_arg0:AddLayer( LUI.Snakecam.new( f5_arg0._controllerIndex ), {
				exclusive = false
			} )
		end
	end
	if not f5_local1 and f5_local2 and Dvar[0x54084D7CA2317BB]( "#x3a30c33efc8281eb1" ) == "br" then
		f5_arg0.brTransitionManager = f5_arg0:AddLayer( LUI.BrTransitionManager.new( f5_arg0._controllerIndex ) )
	end
	f5_arg0.flowManager = f5_arg0:AddLayer( LUI.FlowManager.new( f5_arg0, f5_arg1 ) )
	if not f5_local1 then
		f5_arg0.subtitlesLayer = f5_arg0:AddLayer( LUI.SubtitlesLayer.new( f5_arg0._controllerIndex ), {
			exclusive = false
		} )
	end
	f5_arg0.aeTrophyManager = f5_arg0:AddLayer( LUI.AETrophyManager.new( f5_arg0, f5_local0 ) )
	if Engine[0x836C8AD984F14F6]() and not f5_local1 then
		f5_arg0.ps4LightbarManager = f5_arg0:AddLayer( LUI.PS4LightbarManager.new( f5_arg0._controllerIndex ) )
	end
	if not f5_local1 and f5_local2 then
		f5_arg0.radialMenuLayer = f5_arg0:AddLayer( LUI.RadialMenuLayer.new( f5_arg0._controllerIndex ), {
			exclusive = false
		} )
	end
	if f5_local3 and not f5_local1 and not GameX.IsSplitscreen() and Dvar[0x54084D7CA2317BB]( "#x36d16f02578d0ee10" ) == "cp_town" then
		f5_arg0.townIntro = f5_arg0:AddLayer( LUI.TownIntro.new( f5_arg0._controllerIndex ), {
			exclusive = false
		} )
	end
	if f5_local3 and not f5_local1 and not CONDITIONS.IsWaveGameType() and not CONDITIONS.IsSpecOpsGameType() then
		f5_arg0.dpadPopupLayer = f5_arg0:AddLayer( LUI.DpadPopupLayer.new( f5_arg0._controllerIndex ), {
			exclusive = false
		} )
		f5_arg0.birdsEyeLayer = f5_arg0:AddLayer( LUI.BirdsEyeLayer.new( f5_arg0._controllerIndex ), {
			exclusive = false
		} )
		if Dvar[0x54084D7CA2317BB]( "#x36d16f02578d0ee10" ) == "cp_raid_complex" then
			f5_arg0.timedUseMeterLayer = f5_arg0:AddLayer( LUI.TimedUseMeterLayer.new( f5_arg0._controllerIndex ), {
				exclusive = false
			} )
		end
	end
	local f5_local8
	if not f5_local6 and not f5_local1 and not f5_local2 and f5_local3 then
		f5_local8 = f5_local3
	else
		f5_local8 = Dvar[0x9E5BE3B4BBA4E0E]( "#x358467a98b3243acc" )
	end
	if f5_local8 then
		f5_local8 = not CONDITIONS.IsLaunchChunk()
	end
	if f5_local8 then
		f5_arg0.textChat = f5_arg0:AddLayer( LUI.TextChat.new( {
			controllerIndex = f5_local0
		} ) )
	end
	if f5_local4 then
		f5_arg0.fadeFrameLayer = f5_arg0:AddLayer( LUI.AspectRatioFadeFrameLayer.new( f5_arg0._controllerIndex ) )
	end
	if f5_local1 or f5_local2 then
		f5_arg0.uiFadeManager = f5_arg0:AddLayer( LUI.UIFadeManager.new( f5_arg0._controllerIndex ) )
	end
	if f5_local1 then
		f5_arg0:addElement( MenuBuilder.BuildRegisteredType( "BuildAndServerText" ) )
	end
	if f5_local4 or f5_local5 then
		local logo = LUI.UIElement.new()
		logo:SetupFPSCounter()
		logo:SetAlignment( LUI.Alignment.Right )
		logo:SetRGBFromTable( SWATCHES.genericButton.highlight, 0 )
		logo:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -510, _1080p * -10, _1080p * 10, _1080p * 48 )
		logo:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
		logo:SetFontSize( 38 * _1080p )
		logo:SetWordWrap( false )
		logo.id = "FPSCounter"
		f5_arg0:addElement( logo )
	end
	if f5_local5 then
		f5_arg0:addElement( MenuBuilder.BuildRegisteredType( "DataSourceDebug", {
			controllerIndex = f5_local0
		} ) )
	end
	if CONDITIONS.IsLaunchChunk() then
		f5_arg0.launchChunk = f5_arg0:AddLayer( LUI.LaunchChunkLayer.new( {
			controllerIndex = f5_local0
		} ) )
	end
	f5_arg0.toastManager = f5_arg0:AddLayer( LUI.ToastManager.new( {
		controllerIndex = f5_local0
	} ) )
	if f5_local4 then
		if f5_local6 or Engine[0xC6AD5341E93DFB3]() or Engine[0x9DD5167C6D720F1]() then
			f5_arg0.telemetryLayer = f5_arg0:AddLayer( LUI.TelemetryLayer.new( {
				controllerIndex = f5_local0
			} ) )
			f5_arg0.achievementsManager = f5_arg0:AddLayer( LUI.AchievementsManager.new( {
				controllerIndex = f5_local0
			} ) )
		end
		if f5_local1 and ShaderUpload then
			f5_arg0.shaderPreloadLayer = f5_arg0:AddLayer( LUI.ShaderPreloadLayer.new( {
				controllerIndex = f5_local0
			} ) )
		end
	else
		f5_arg0.telemetryLayer = f5_arg0:AddLayer( LUI.TelemetryLayer.new( {
			controllerIndex = f5_local0
		} ) )
	end
	if f5_local1 then
		f5_arg0.webviewManager = f5_arg0:AddLayer( LUI.WebViewManager.new( {
			controllerIndex = f5_local0
		} ) )
		f5_arg0.webviewManager:PostInit()
	end
	if f5_local1 then
		f5_arg0.FrontendPresenceManager = f5_arg0:AddLayer( LUI.FrontendPresenceManager.new( {
			controllerIndex = f5_local0
		} ) )
	end
	f5_arg0.mouseCursorTooltipLayer = f5_arg0:AddLayer( LUI.MouseCursorTooltipLayer.new( {
		controllerIndex = f5_local0
	} ) )
	f5_arg0.mouseCursorContextualMenuLayer = f5_arg0:AddLayer( LUI.MouseCursorContextualMenuLayer.new( {
		controllerIndex = f5_local0
	} ) )
	f5_arg0.debugLayer = f5_arg0:AddLayer( LUI.DebugLayer.new( {
		controllerIndex = f5_local0
	} ) )
	if f5_local5 then
		f5_arg0.uiDebugLayer = f5_arg0:AddLayer( LUI.UIDebugLayer.new( {
			controllerIndex = f5_local0
		} ) )
		Rat.InitLui()
	end
	local logo = nil
	
	logo = LUI.UIImage.new()
	logo.id = "van_logo"
	logo:setImage( RegisterMaterial( "v_ui_mainmenu_vanguard_logo_full" ), 0 )
	logo:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 100, _1080p * 460, _1080p * 54, _1080p * 214 )
	logo:SetAlpha( 0 )
	f5_arg0:addElement( logo )
	f5_arg0.logo = logo
	
end

LUI.UIRoot.ReloadChatForDebugOption = function ()
	if not Engine[0x2DA54CF5D6B7F02]() then
		return 
	end
	local f4_local0 = Engine[0xEE6F69FEA944B13]()
	if not f4_local0 then
		return 
	elseif f4_local0.textChat then
		f4_local0:RemoveElement( f4_local0.textChat )
		f4_local0.textChat = nil
	end
	if Dvar[0x9E5BE3B4BBA4E0E]( "#x358467a98b3243acc" ) then
		local f4_local1 = f4_local0
		local f4_local2 = f4_local0.AddLayer
		local f4_local3 = LUI.TextChat.new
		local f4_local4 = {}
		local f4_local5 = f4_local0._controllerIndex
		if not f4_local5 then
			f4_local5 = Engine[0x45B054C920178E9]()
		end
		f4_local4.controllerIndex = f4_local5
		f4_local0.textChat = f4_local2( f4_local1, f4_local3( f4_local4 ) )
	end
end

LUI.UIRoot.GetControllerIndex = function ( f3_arg0 )
	return f3_arg0._controllerIndex
end

LUI.UIRoot.GetRootFromName = function ( f2_arg0 )
	local f2_local0 = LUI.roots[f2_arg0]
	assert( f2_local0 )
	return f2_local0
end

LUI.UIRoot.GetRootForControllerIndex = function ( f1_arg0 )
	for f1_local3, f1_local4 in pairs( LUI.roots ) do
		if f1_local4._controllerIndex == f1_arg0 then
			return f1_local4
		end
	end
	assert( LUI.primaryRoot )
	return LUI.primaryRoot
end

