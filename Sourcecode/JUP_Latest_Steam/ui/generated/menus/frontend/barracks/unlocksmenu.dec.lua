-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
module( ..., package.seeall )
require( "ui.generated.widgets.frontend.barracks.unlocksrankpanel" )
require( "ui.generated.widgets.frontend.barracks.unlockslootpanel" )
require( "ui.generated.widgets.frontend.mp.progressionunlockitem" )
require( "ui.generated.widgets.frontend.mp.rankprogressionslot" )
require( "ui.generated.widgets.tabbacker" )
require( "ui.generated.widgets.frontend.menutitle" )
require( "ui.generated.widgets.frontend.barracks.ranktab" )
require( "ui.generated.widgets.navigationarrow" )
require( "ui.generated.widgets.frontend.lobby.lobbymembersfooter" )
local f0_local0 = 5
local f0_local1 = 2
local f0_local2 = function ( f23_arg0, f23_arg1, f23_arg2 )
	f23_arg0.RankProgressionBar:SetFocusedRankSlot( f23_arg1, f23_arg2 )
	f23_arg0.curFocusedPos = f23_arg2 + 1
	f23_arg0.UnlocksLootPanel:UpdateUnlockData( f23_arg1, f23_arg0.unlockIDs, 0 )
end

local f0_local3 = function ( f20_arg0, f20_arg1 )
	f20_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0xA95F14546BC9395 ) )
	local f20_local0 = StringTable[0xFD4E49A34DD43AE]( CSV.progressionItems.GetFile() )
	local f20_local1 = PROGRESSION.GetPlayerRank( f20_arg1 )
	local f20_local2 = f20_local1 + 1 == f20_local0
	local f20_local3 = PROGRESSION.GetRankBigIcon( f20_local1 )
	local f20_local4 = PROGRESSION.GetRankDisplay( f20_local1 )
	local f20_local5 = PROGRESSION.GetRankFullName( f20_local1 )
	local f20_local6
	if f20_local2 then
		f20_local6 = 1
	else
		f20_local6 = f20_local1 + 1
	end
	if f20_local2 then
		local f20_local7 = 1
	else
		local f20_local7 = PROGRESSION.GetRankDisplay( f20_local6 )
	end
	local f20_local8 = PROGRESSION.GetRankBigIcon( f20_local6 )
	if not f20_local2 or not Engine[0xED84C33EC5F01EA]( 0x2B024A26187E55C, 1 ) then
		local f20_local9 = PROGRESSION.GetRankFullName( f20_local6 )
	end
	f20_arg0.RankTabLeft:InitializeRankDisplay( 0 )
	f20_arg0.RankTabRight:InitializeRankDisplay( f20_local0 - 1 )
	f20_arg0.curFocusedPos = f20_local1 + 1
	f20_arg0.maxRank = f20_local0
	f20_arg0.UnlockList.default = true
	f20_arg0.UnlockList:SetNumChildren( f20_local0 )
	f20_arg0.UnlockList:SetSnapOnWrapEnabled( true )
	f20_arg0.UnlockList:SetRefreshChild( function ( f22_arg0, f22_arg1, f22_arg2 )
		local f22_local0 = f20_arg0.UnlockList:GetContentIndex( f22_arg1, f22_arg2, {
			relativePosition = false
		} )
		f22_arg0:InitUnlocks( f20_arg0, f22_local0, PROGRESSION.GetRankUnlocks( f22_local0 ) )
	end )
	f20_arg0.UnlockList:processEvent( {
		name = "gain_focus",
		controller = f20_arg1
	} )
	local f20_local10 = f20_arg0:Wait( 1 )
	f20_local10.onComplete = function ()
		f20_arg0.UnlockList:SetFocusedPosition( {
			y = 0,
			x = f20_arg0
		}, true )
	end
	
	f20_arg0.UnlockList:RefreshContent()
	f20_arg0.RankProgressionBar:SetRankProgressionSlot( f20_arg1, f20_local1 )
end

local f0_local4 = function ( f19_arg0, f19_arg1, f19_arg2 )
	local f19_local0 = nil
	if f19_arg2 == "left" then
		f19_local0 = -1 * f0_local0
	elseif f19_arg2 == "right" then
		f19_local0 = f0_local0
	else
		return 
	end
	local f19_local1 = f19_arg0:getParent()
	f19_local1.curFocusedPos = f19_local1.curFocusedPos + f19_local0
	if f19_local1.maxRank < f19_local1.curFocusedPos then
		f19_local1.curFocusedPos = 1
	elseif f19_local1.curFocusedPos < 1 then
		f19_local1.curFocusedPos = f19_local1.maxRank
	end
	f19_local1.UnlockList:SetFocusedPosition( {
		y = 0,
		x = f19_local1.curFocusedPos - 1
	}, true )
	f19_local1.RankProgressionBar:SetFocusedRankSlot( f19_arg1, f19_local1.curFocusedPos - 1 )
end

local f0_local5 = function ( f16_arg0, f16_arg1 )
	f16_arg0:AddGamepadEventCallback( "button_shoulderr", function ( f18_arg0, f18_arg1 )
		f16_arg0( f18_arg0, f18_arg1.controller or f16_arg0, "right" )
	end )
	f16_arg0:AddGamepadEventCallback( "button_shoulderl", function ( f17_arg0, f17_arg1 )
		f16_arg0( f17_arg0, f17_arg1.controller or f16_arg0, "left" )
	end )
end

local f0_local6 = function ( f15_arg0, f15_arg1, f15_arg2 )
	PROGRESSION.PrestreamRankUnlocksIcons( f15_arg0 )
end

local f0_local7 = function ( f10_arg0, f10_arg1, f10_arg2 )
	f10_arg0._controllerIndex = f10_arg1
	f0_local0( f10_arg0, f10_arg1 )
	f0_local0( f10_arg0, f10_arg1 )
	local f10_local0 = ButtonMap.button_shoulderl.string
	local f10_local1 = ButtonMap.button_shoulderr.string
	if f10_arg2.useTriggers then
		f10_local0 = ButtonMap.button_left_trigger.string
		f10_local1 = ButtonMap.button_right_trigger.string
	end
	local leftShoulderButton = nil
	
	leftShoulderButton = MenuBuilder.BuildRegisteredType( "IconImage", {
		iconString = f10_local0
	} )
	leftShoulderButton:SetAnchorsAndPosition( 0, 1, 0, 1, 550, 586, 184, 220 )
	leftShoulderButton:SetRGB( SWATCHES[0xD21308BA745ADB3][0xF1A4D82E7B7BE6B] )
	leftShoulderButton.id = "leftShoulderButton"
	f10_arg0:addElement( leftShoulderButton )
	f10_arg0.leftShoulderButton = leftShoulderButton
	
	local rightShoulderButton = nil
	
	rightShoulderButton = MenuBuilder.BuildRegisteredType( "IconImage", {
		iconString = f10_local1
	} )
	rightShoulderButton:SetAnchorsAndPosition( 0, 1, 0, 1, 1784, 1820, 184, 220 )
	rightShoulderButton:SetRGB( SWATCHES[0xD21308BA745ADB3][0xF1A4D82E7B7BE6B] )
	rightShoulderButton.id = "rightShoulderButton"
	f10_arg0:addElement( rightShoulderButton )
	f10_arg0.rightShoulderButton = rightShoulderButton
	
	f10_arg0:registerEventHandler( "display_unlocks_changed", function ( element, event )
		element.unlockIndex = 1
		element.unlockIDs = event.unlockIDs
		f10_arg0( element, f10_arg0, event.rank )
	end )
	FrontEndScene.HideAllCharacters()
	Engine[0x685AE31DEDA30A4]( "squad_lobby" )
	f10_arg0.ArrowLeft:addEventHandler( "leftmouseup", function ( f13_arg0, f13_arg1 )
		if f13_arg1.inside then
			f10_arg0( f13_arg0, f10_arg0, "left" )
		end
	end )
	f10_arg0.ArrowRight:addEventHandler( "leftmouseup", function ( f12_arg0, f12_arg1 )
		if f12_arg1.inside then
			f10_arg0( f12_arg0, f10_arg0, "right" )
		end
	end )
	f10_arg0:SubscribeToInputTypeModel( f10_arg1, function ( f11_arg0, f11_arg1 )
		if CONDITIONS.IsGamepad( f11_arg1._controllerIndex ) then
			f11_arg1.ArrowLeft:SetAlpha( 0 )
			f11_arg1.ArrowRight:SetAlpha( 0 )
			f11_arg1.leftShoulderButton:SetAlpha( 1 )
			f11_arg1.rightShoulderButton:SetAlpha( 1 )
		else
			f11_arg1.ArrowLeft:SetAlpha( 1 )
			f11_arg1.ArrowRight:SetAlpha( 1 )
			f11_arg1.leftShoulderButton:SetAlpha( 0 )
			f11_arg1.rightShoulderButton:SetAlpha( 0 )
		end
	end )
end

States = {
	[0xAD14C6E7156B923] = function ( f5_arg0, f5_arg1 )
		local f5_local0 = function ( f9_arg0, f9_arg1 )
			
		end
		
		local f5_local1 = function ( f8_arg0, f8_arg1 )
			
		end
		
		local f5_local2 = function ( f7_arg0, f7_arg1 )
			
		end
		
		f5_arg0[0x1C821BBB0E44E91]:RegisterAnimationSequence( 0xAB7F38F4347BA71, {
			nil,
			nil,
			0,
			0,
			nil,
			1,
			200,
			[1] = TWEEN_PROPERTY.Alpha,
			[4] = TWEEN_PROPERTY.Alpha
		} )
		f5_arg0[0x49D85F0EF1CEC84] = {
			[0xEF6C3AB55C07BEF] = f5_local0,
			[0xC1356D6FA57E900] = f5_local1,
			[0x6DC93D7010DE4B1] = f5_local2,
			[0xAB7F38F4347BA71] = function ( f6_arg0, f6_arg1 )
				f6_arg0[0x1C821BBB0E44E91]:AnimateSequence( 0xAB7F38F4347BA71 )
			end
		}
		f5_arg0[0xD97E59A206E4A54] = {
			[0xC1356D6FA57E900] = 0,
			[0x6DC93D7010DE4B1] = 0,
			[0xAB7F38F4347BA71] = 200,
			[0xEF6C3AB55C07BEF] = 0
		}
	end
}
function UnlocksMenu( f1_arg0, f1_arg1 )
	local f1_local0 = ACTIONS
	local f1_local1 = LUI
	local f1_local2 = MenuBuilder
	local f1_local3 = TWEEN_PROPERTY
	local f1_local4 = f1_local1.UIVerticalNavigatorMenu.new()
	f1_local4.id = "UnlocksMenu"
	f1_local4[0xBD5D934D3CD91E5] = States
	local f1_local5
	if f1_arg1 then
		f1_local5 = f1_arg1
	else
		f1_local5 = f1_arg1.controllerIndex
	end
	f1_local5 = f1_local1.ValidateControllerIndex( f1_local4, f1_local5 )
	f0_local0( f1_local4, f1_local5, f1_arg1 )
	f1_local4[0x4C364FC7CAA3C92] = f1_local2.BuildRegisteredType( 0x8608EBDC1924A2E, {
		controllerIndex = f1_local5
	} )
	f1_local4[0x4C364FC7CAA3C92][0x8B72E07B55C3AC0] = "HelperBar"
	if CONDITIONS.IsMobileOrMobileSim() then
		f1_local4[0x4C364FC7CAA3C92]:SetAnchorsAndPosition( 1, 0, 0, 0, -120, 0, 0, 0 )
	else
		f1_local4[0x4C364FC7CAA3C92]:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, -115, -30 )
	end
	f1_local4[0x4C364FC7CAA3C92]:setPriority( 10 )
	f1_local4:addElement( f1_local4[0x4C364FC7CAA3C92] )
	local f1_local6 = f1_local4
	local f1_local7 = nil
	f1_local7 = f1_local2.BuildRegisteredType( 0xFA521A82871219E, {
		worldBlur = 1,
		controllerIndex = f1_local5
	} )
	f1_local7[0x8B72E07B55C3AC0] = "WorldBlur"
	f1_local7:SetAnchorsAndPosition( 0, 0, 0, 0, 2, 0, 0, 0 )
	f1_local4:addElement( f1_local7 )
	f1_local4[0xFA521A82871219E] = f1_local7
	local f1_local8 = nil
	f1_local8 = f1_local1.UIImage.new()
	f1_local8[0x8B72E07B55C3AC0] = "Darken"
	f1_local0.ScaleFullscreen( f1_local8 )
	f1_local8:SetRGB( SWATCHES[0x1F5A9ABAC207F9D][0x8088E72737CAC80], 0 )
	f1_local8:SetAlpha( 0.5, 0 )
	f1_local4:addElement( f1_local8 )
	f1_local4[0xC3FF2FB08ACE66A] = f1_local8
	local f1_local9 = nil
	f1_local9 = f1_local2.BuildRegisteredType( 0x85C8D06980B0712, {
		controllerIndex = f1_local5
	} )
	f1_local9[0x8B72E07B55C3AC0] = "UnlocksRankPanel"
	f1_local9:SetAnchorsAndPosition( 0, 1, 0, 1, 96, 526, 191, 979 )
	f1_local4:addElement( f1_local9 )
	f1_local4[0x85C8D06980B0712] = f1_local9
	local f1_local10 = nil
	f1_local10 = f1_local2.BuildRegisteredType( 0xE8EF4B2C222B9A, {
		controllerIndex = f1_local5
	} )
	f1_local10[0x8B72E07B55C3AC0] = "UnlocksLootPanel"
	f1_local10:SetAnchorsAndPosition( 0, 1, 0, 1, 550, 1820, 503, 979 )
	f1_local4:addElement( f1_local10 )
	f1_local4[0xE8EF4B2C222B9A] = f1_local10
	local f1_local11 = nil
	f1_local11 = f1_local1.UIGrid.new( {
		scrollingThresholdX = 2,
		maxVisibleColumns = 55,
		spacingX = 5,
		columnWidth = 250,
		rowHeight = 260,
		maxVisibleRows = 1,
		wrapY = false,
		spacingY = 8,
		controllerIndex = f1_local5,
		buildChild = function ()
			return f1_arg0.BuildRegisteredType( 0x87BECB3ADCCF45B, {
				controllerIndex = f1_arg0
			} )
		end,
		refreshChild = function ( f3_arg0, f3_arg1, f3_arg2 )
			
		end,
		primaryAxis = f1_local1.DIRECTION.horizontal,
		scrollType = Enum[0x92A69278394394][0xEDF5C0F5CCFACE1]
	} )
	f1_local11[0x8B72E07B55C3AC0] = "UnlockList"
	f1_local11:setUseStencil( true )
	f1_local11:SetAnchorsAndPosition( 0, 1, 0, 1, 550, 1820, 228, 503 )
	f1_local4:addElement( f1_local11 )
	f1_local4[0x1C821BBB0E44E91] = f1_local11
	local f1_local12 = nil
	f1_local12 = f1_local2.BuildRegisteredType( 0xC41695CA3A882DA, {
		controllerIndex = f1_local5
	} )
	f1_local12[0x8B72E07B55C3AC0] = "RankProgressionBar"
	f1_local12:SetAnchorsAndPosition( 0, 1, 0, 1, 673, 1697, 194, 211 )
	f1_local4:addElement( f1_local12 )
	f1_local4[0x96F1C3AC32BDE87] = f1_local12
	local f1_local13 = nil
	f1_local13 = f1_local2.BuildRegisteredType( 0x1EEB6AD1A83F3C, {
		controllerIndex = f1_local5
	} )
	f1_local13[0x8B72E07B55C3AC0] = "TabBacker"
	f1_local0.ScaleStretchAnchorFullscreen( f1_local13 )
	f1_local13:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, 160 )
	f1_local4:addElement( f1_local13 )
	f1_local4[0x1EEB6AD1A83F3C] = f1_local13
	local f1_local14 = nil
	f1_local14 = f1_local2.BuildRegisteredType( 0x93CC4E91B38D10C, {
		controllerIndex = f1_local5
	} )
	f1_local14[0x8B72E07B55C3AC0] = "MenuTitle"
	f1_local14[0x93CC4E91B38D10C]:setText( Engine[0xED84C33EC5F01EA]( 0xA95F14546BC9395 ), 0 )
	f1_local14:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1020, 0, 100 )
	f1_local4:addElement( f1_local14 )
	f1_local4[0x93CC4E91B38D10C] = f1_local14
	local f1_local15 = nil
	f1_local15 = f1_local2.BuildRegisteredType( 0x298DCA91C3F730E, {
		controllerIndex = f1_local5
	} )
	f1_local15[0x8B72E07B55C3AC0] = "RankTabLeft"
	f1_local15:SetAnchorsAndPosition( 0, 1, 0, 1, 609, 679, 185, 221 )
	f1_local4:addElement( f1_local15 )
	f1_local4[0xE69487F30AAFFFB] = f1_local15
	local f1_local16 = nil
	f1_local16 = f1_local2.BuildRegisteredType( 0x298DCA91C3F730E, {
		controllerIndex = f1_local5
	} )
	f1_local16[0x8B72E07B55C3AC0] = "RankTabRight"
	f1_local16:SetAnchorsAndPosition( 0, 1, 0, 1, 1702, 1772, 185, 221 )
	f1_local4:addElement( f1_local16 )
	f1_local4[0xE2708BFE554F144] = f1_local16
	local f1_local17 = nil
	f1_local17 = f1_local2.BuildRegisteredType( 0x9AEDA2973468FD8, {
		controllerIndex = f1_local5
	} )
	f1_local17[0x8B72E07B55C3AC0] = "ArrowLeft"
	f1_local17:SetRGB( SWATCHES[0xFB43557B54149CE][0xE7F5E6D8ADBDDD3], 0 )
	f1_local17[0xF970EB634C08746]:SetZRotation( 90, 0 )
	f1_local17:SetAnchorsAndPosition( 0, 1, 0, 1, 565, 597, 189, 221 )
	f1_local4:addElement( f1_local17 )
	f1_local4[0xB22ED84AFFE6143] = f1_local17
	local f1_local18 = nil
	f1_local18 = f1_local2.BuildRegisteredType( 0x9AEDA2973468FD8, {
		controllerIndex = f1_local5
	} )
	f1_local18[0x8B72E07B55C3AC0] = "ArrowRight"
	f1_local18:SetRGB( SWATCHES[0xFB43557B54149CE][0xE7F5E6D8ADBDDD3], 0 )
	f1_local18[0xF970EB634C08746]:SetZRotation( -90, 0 )
	f1_local18:SetAnchorsAndPosition( 0, 1, 0, 1, 1777, 1809, 189, 221 )
	f1_local4:addElement( f1_local18 )
	f1_local4[0xE5C6800CE3834CC] = f1_local18
	local f1_local19 = nil
	f1_local19 = f1_local2.BuildRegisteredType( 0x2A3F5958BE83F91, {
		controllerIndex = f1_local5
	} )
	f1_local19[0x8B72E07B55C3AC0] = "LobbyMembersFooter"
	f1_local19:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, 150 )
	f1_local4:addElement( f1_local19 )
	f1_local4[0x2A3F5958BE83F91] = f1_local19
	f1_local4[0x4C364FC7CAA3C92][0x21BFF04AEB34132]:PushButtonPrompt( {
		side = "left",
		button_ref = "button_secondary",
		helper_text = Engine[0xED84C33EC5F01EA]( 0xC6D515BE207B9A5 )
	} )
	f1_local4:AddGamepadEventCallback( 0x691AB96D9875434, function ( f2_arg0, f2_arg1 )
		f1_arg0:LeaveMenu( f2_arg1.controller or f1_arg0 )
	end )
	f0_local0( f1_local4, f1_local5, f1_arg1 )
	f1_local0.AnimateSequence( f1_local4, "Intro" )
	return f1_local4
end

MenuBuilder.registerType( 0xF27705409E007F5, UnlocksMenu )
LockTable( _M )
