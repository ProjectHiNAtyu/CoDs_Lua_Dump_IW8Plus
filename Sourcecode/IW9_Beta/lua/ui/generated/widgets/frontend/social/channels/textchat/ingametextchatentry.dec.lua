-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
module( ..., package.seeall )
local f0_local0 = function ( f21_arg0 )
	ACTIONS.AnimateSequence( f21_arg0, "FadeIn" )
	f21_arg0.MessageBorder:SetAlpha( Engine[0x7B17D94988FD5D0]( "textchatBgOpacity" ), 0 )
end

local f0_local1 = function ( f20_arg0, f20_arg1 )
	if f20_arg0._messageData.startFadeTime and f20_arg1 and 0 < f20_arg0._messageData.startFadeTime and f20_arg0._messageData.startFadeTime <= f20_arg1 then
		TEXTCHAT.InvalidateMessageFadeTimer( f20_arg0._messageData )
		ACTIONS.AnimateSequence( f20_arg0, "FadeOut" )
	elseif (f20_arg0._messageData.startFadeTime == nil or f20_arg0._messageData.startFadeTime < 0) and (f20_arg0._messageData.forceHide or f20_arg0.Message:GetAlpha() == 1) then
		f20_arg0._messageData.forceHide = false
		ACTIONS.AnimateSequence( f20_arg0, "FadeOut" )
	end
end

local f0_local2 = function ( f19_arg0, f19_arg1 )
	if f19_arg1.Message:GetAlpha() ~= 0 then
		f19_arg1.MessageBorder:SetAlpha( Engine[0x7B17D94988FD5D0]( "textchatBgOpacity" ), 0 )
	end
end

local f0_local3 = function ( f12_arg0, f12_arg1, f12_arg2 )
	if not f12_arg0._messageData or f12_arg0._messageData.isMyPlayer then
		
	end
	f12_arg0:SetupContextualMenu( {
		supportsGamepad = true,
		title = f12_arg2.playerName
	} )
	local f12_local0 = LUI.FlowManager.GetScopedData( f12_arg0 )
	local f12_local1 = f12_arg0._messageData.playerID
	if CONDITIONS.WhispersEnabled( f12_arg1 ) then
		if not f12_local0.selectedChannelIsWhisper then
			local f12_local2 = ChatChannel[0xACB3E17C4B634CC]( f12_local1 )
		else
			local f12_local2 = false
		end
	end
	f12_arg0:AddContextualMenuAction( {
		id = "whisperContextualButton",
		actionName = Engine[0xED84C33EC5F01EA]( 0x2BE8E4B5D46A8D0 ),
		conditionFunction = function ()
			local f18_local0 = f12_arg0
			if f18_local0 then
				f18_local0 = not Friends[0xA1964D04E992249]( f12_arg0, Friends[0x7E6685E08C0BB92]( f12_arg0 ) )
			end
			return f18_local0
		end,
		actionFunction = function ()
			local f17_local0 = {}
			table.insert( f17_local0, f12_arg0 )
			local f17_local1 = tostring( ChatChannel[0x74E5FEADEA773FD]( f12_arg0, Enum[0xEBC6725912C9693][0x7C61CC549527A1], f17_local0 ) )
			if CONDITIONS.InGame() and LUI.FlowManager.IsStackEmpty() and TEXTCHAT.IsValidChatID( f17_local1 ) then
				TEXTCHAT.InitiateWhisperWithXUID( LUI.TextChat.GetChat(), f12_arg0, f12_arg0, f12_arg0.playerName )
			elseif TEXTCHAT.IsValidChatID( f17_local1 ) then
				CHANNELS.OpenChannelPanel( f12_arg0, f17_local1, f17_local1, {
					openGlobalPanel = true,
					isWhisper = true
				} )
			end
			return true
		end
	} )
	f12_arg0:AddContextualMenuAction( {
		id = "reportPlayerContextualButton",
		actionName = Engine[0xED84C33EC5F01EA]( 0x83581AB5B0DB4DC ),
		conditionFunction = function ()
			return true
		end,
		actionFunction = function ()
			ACTIONS.OpenMenu( "ReportPlayerSelectMenu", true, f12_arg0 )
		end
	} )
	f12_arg0:AddContextualMenuAction( {
		id = "blockPlayerContextualButton",
		actionName = Engine[0xED84C33EC5F01EA]( 0x8E754FCE3CCB54 ),
		conditionFunction = function ()
			local f14_local0 = CONDITIONS.IsBattleNetSocial()
			if f14_local0 then
				f14_local0 = not Friends[0xA1964D04E992249]( f12_arg0, Friends[0x7E6685E08C0BB92]( f12_arg0 ) )
			end
			return f14_local0
		end,
		actionFunction = function ()
			CHANNELS.BlockPlayerAction( f12_arg0, f12_arg0, f12_arg0 )
		end
	} )
end

local f0_local4 = function ( f11_arg0, f11_arg1, f11_arg2 )
	assert( f11_arg1 )
	f11_arg0._titleFormat = f11_arg1.titleFormat
	local f11_local0 = f11_arg2.playerName
	if f11_arg0._titleFormat then
		f11_local0 = Engine[0xED84C33EC5F01EA]( f11_arg0._titleFormat, Engine[0x7D3158A9539A355]( f11_local0 ) )
	end
	f11_arg0.PlayerName:setText( f11_local0 )
	if f11_arg2.isBlocked then
		f11_arg1.message = ""
	end
	f11_arg0.Message:setText( f11_arg1.message )
	if f11_arg1.textColor then
		f11_arg0.Message:SetRGBFromTable( f11_arg1.textColor, 0 )
	end
	if f11_arg1.titleColor then
		f11_arg0.PlayerName:SetRGBFromTable( f11_arg1.titleColor, 0 )
	end
	local f11_local1 = LAYOUT.GetTextHeight( f11_arg0.Message, f11_arg0._controllerIndex )
	local f11_local2 = math.max( LAYOUT.GetTextWidth( f11_arg0.Message, f11_arg0._controllerIndex ), LAYOUT.GetTextWidth( f11_arg0.PlayerName, f11_arg0._controllerIndex ) )
	local f11_local3 = 16
	local f11_local4 = _1080p * 28
	local f11_local5 = _1080p * 30
	local f11_local6 = _1080p * 10
	local f11_local7 = _1080p * 10
	local f11_local8 = f11_local2 + f11_local5 + f11_local6
	local f11_local9 = f11_local1 + f11_local4 + f11_local7
	local f11_local10 = 63 * _1080p
	if f11_arg1.isMyPlayer == true then
		ACTIONS.AnimateSequence( f11_arg0, "MyPlayer" )
		f11_local8 = _1080p * 420
		f11_local6 = f11_local8 - f11_local2 + f11_local5
	end
	f11_arg0:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1 * _1080p, 0, f11_local10 + math.floor( f11_local1 - f11_local3 ) )
	f11_arg0.MessageBorder:SetAnchorsAndPosition( 0, 1, 0, 1, f11_local6, f11_local8, f11_local7, f11_local9 )
	f11_arg0._messageData = f11_arg1
	f0_local0( f11_arg0, f11_arg0._controllerIndex, f11_arg2 )
end

local f0_local5 = function ( f10_arg0, f10_arg1, f10_arg2 )
	f10_arg0._controllerIndex = f10_arg1
	f10_arg0.SetMessageData = f0_local0
	f10_arg0.FadeOut = f0_local0
	f10_arg0.FadeIn = f0_local0
	if DataSources.alwaysLoaded.textChat.backgroundOpacity then
		f10_arg0:SubscribeToModel( DataSources.alwaysLoaded.textChat.backgroundOpacity:GetModel(), f0_local0 )
	end
end

States = {
	[0xAD14C6E7156B923] = function ( f2_arg0, f2_arg1 )
		local f2_local0 = function ( f9_arg0, f9_arg1 )
			
		end
		
		f2_arg0.MessageBorder:RegisterAnimationSequence( "MyPlayer", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Left,
				value = _1080p * 34
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Right,
				value = _1080p * 420
			},
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Left_Anchor
			},
			{
				value = 1,
				duration = 0,
				property = TWEEN_PROPERTY.Right_Anchor
			}
		} )
		f2_arg0.Message:RegisterAnimationSequence( "MyPlayer", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Text_Style_Horizontal_Alignment,
				value = LUI.Alignment.Right
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Left,
				value = _1080p * 62
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Right,
				value = _1080p * 405
			},
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Left_Anchor
			}
		} )
		f2_arg0.PlayerName:RegisterAnimationSequence( "MyPlayer", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Text_Style_Horizontal_Alignment,
				value = LUI.Alignment.Right
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Left,
				value = _1080p * 48
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Right,
				value = _1080p * 405
			}
		} )
		local f2_local1 = function ( f8_arg0, f8_arg1 )
			f8_arg0.MessageBorder:AnimateSequence( "MyPlayer" )
			f8_arg0.Message:AnimateSequence( "MyPlayer" )
			f8_arg0.PlayerName:AnimateSequence( "MyPlayer" )
		end
		
		f2_arg0.Message:RegisterAnimationSequence( "FocusedGamepad", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Right,
				value = _1080p * 370
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Left,
				value = _1080p * 20
			}
		} )
		f2_arg0.PlayerName:RegisterAnimationSequence( "FocusedGamepad", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Right,
				value = _1080p * 370
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Left,
				value = _1080p * 20
			}
		} )
		local f2_local2 = function ( f7_arg0, f7_arg1 )
			f7_arg0.Message:AnimateSequence( "FocusedGamepad" )
			f7_arg0.PlayerName:AnimateSequence( "FocusedGamepad" )
		end
		
		local f2_local3 = function ( f6_arg0, f6_arg1 )
			
		end
		
		f2_arg0.MessageBorder:RegisterAnimationSequence( "FadeOut", {
			{
				value = 0,
				duration = 300,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		f2_arg0.Message:RegisterAnimationSequence( "FadeOut", {
			{
				value = 0,
				duration = 300,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		f2_arg0.PlayerName:RegisterAnimationSequence( "FadeOut", {
			{
				value = 0,
				duration = 300,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		local f2_local4 = function ( f5_arg0, f5_arg1 )
			f5_arg0.MessageBorder:AnimateSequence( "FadeOut" )
			f5_arg0.Message:AnimateSequence( "FadeOut" )
			f5_arg0.PlayerName:AnimateSequence( "FadeOut" )
		end
		
		f2_arg0.Message:RegisterAnimationSequence( "FadeIn", {
			{
				value = 1,
				duration = 300,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		f2_arg0.PlayerName:RegisterAnimationSequence( "FadeIn", {
			{
				value = 1,
				duration = 300,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		local f2_local5 = function ( f4_arg0, f4_arg1 )
			f4_arg0.Message:AnimateSequence( "FadeIn" )
			f4_arg0.PlayerName:AnimateSequence( "FadeIn" )
		end
		
		f2_arg0.MessageBorder:RegisterAnimationSequence( "Hide", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		f2_arg0.Message:RegisterAnimationSequence( "Hide", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		f2_arg0.PlayerName:RegisterAnimationSequence( "Hide", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		f2_arg0._sequences = {
			DefaultSequence = f2_local0,
			MyPlayer = f2_local1,
			FocusedGamepad = f2_local2,
			FocusedKBM = f2_local3,
			FadeOut = f2_local4,
			FadeIn = f2_local5,
			Hide = function ( f3_arg0, f3_arg1 )
				f3_arg0.MessageBorder:AnimateSequence( "Hide" )
				f3_arg0.Message:AnimateSequence( "Hide" )
				f3_arg0.PlayerName:AnimateSequence( "Hide" )
			end
		}
		f2_arg0._sequenceLengths = {
			FadeOut = 300,
			FocusedKBM = 0,
			FocusedGamepad = 0,
			MyPlayer = 0,
			FadeIn = 300,
			Hide = 0,
			DefaultSequence = 0
		}
	end
}
function InGameTextChatEntry( menu, controller )
	local self = LUI.UIButton.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 420 * _1080p, 0, 76 * _1080p )
	self.id = "InGameTextChatEntry"
	self.__states = States
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local MessageBorder = nil
	
	MessageBorder = LUI.UIImage.new()
	MessageBorder.id = "MessageBorder"
	MessageBorder:SetRGBFromTable( SWATCHES.IW9StyleGuide.styleGuideCool04, 0 )
	MessageBorder:setImage( RegisterMaterial( 0xABF68B04A487637 ), 0 )
	MessageBorder:Setup9SliceImage( _1080p * 5, _1080p * 8, 0.3, 0.3 )
	MessageBorder:SetAnchorsAndPosition( 1, 0, 0.5, 0.5, _1080p * -420, _1080p * -34, _1080p * -38, _1080p * 38 )
	self:addElement( MessageBorder )
	self.MessageBorder = MessageBorder
	
	local Message = nil
	
	Message = LUI.UIText.new()
	Message.id = "Message"
	Message:SetRGBFromTable( SWATCHES.IW9StyleGuide.styleGuideCool01, 0 )
	Message:setText( "", 0 )
	Message:SetFont( FONTS.GetFont( FONTS.PrimaryRegular.File ) )
	Message:SetFontSize( 18 * _PT )
	Message:SetMinFontSize( 18 * _PT )
	Message:SetWordWrap( true )
	Message:SetAlignment( LUI.Alignment.Left )
	Message:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 25, _1080p * 368, _1080p * 35, _1080p * 59 )
	self:addElement( Message )
	self.Message = Message
	
	local PlayerName = nil
	
	PlayerName = LUI.UIText.new()
	PlayerName.id = "PlayerName"
	PlayerName:SetRGBFromTable( SWATCHES.IW9StyleGuide.styleGuideCool01, 0 )
	PlayerName:setText( "", 0 )
	PlayerName:SetFont( FONTS.GetFont( FONTS.PrimaryRegular.File ) )
	PlayerName:SetFontSize( 18 * _PT )
	PlayerName:SetMinFontSize( 18 * _PT )
	PlayerName:SetWordWrap( false )
	PlayerName:SetAlignment( LUI.Alignment.Left )
	PlayerName:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 25, _1080p * 368, _1080p * 16, _1080p * 40 )
	self:addElement( PlayerName )
	self.PlayerName = PlayerName
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "InGameTextChatEntry", InGameTextChatEntry )
LockTable( _M )
