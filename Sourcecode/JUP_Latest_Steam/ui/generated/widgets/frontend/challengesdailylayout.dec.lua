-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:02
module( ..., package.seeall )
local f0_local0 = -42
local f0_local1 = function ( f20_arg0, f20_arg1 )
	if f20_arg0._displayGameMode then
		if f20_arg0._displayGameMode == Challenge.DailyChallengeButtonType.CP then
			return Challenge.GetCPDailyChallenges( f20_arg1 )
		elseif f20_arg0._displayGameMode == Challenge.DailyChallengeButtonType.BR then
			return Challenge.GetBRDailyChallenges( f20_arg1 )
		else
			return Challenge.GetDailyChallenges( f20_arg1 )
		end
	elseif CONDITIONS.IsThirdGameMode() then
		return Challenge.GetCPDailyChallenges( f20_arg1 )
	elseif CONDITIONS.IsMagmaGameMode() then
		return Challenge.GetBRDailyChallenges( f20_arg1 )
	elseif CONDITIONS.IsOutbreakGametype() then
		return Challenge.GetOBDailyChallenges( f20_arg1 )
	else
		return Challenge.GetDailyChallenges( f20_arg1 )
	end
end

local f0_local2 = function ( f19_arg0 )
	if f19_arg0._displayGameMode then
		if f19_arg0._displayGameMode == "CP" then
			return Challenge.BonusType.CP
		elseif f19_arg0._displayGameMode == "BR" then
			return Challenge.BonusType.BR
		else
			return Challenge.BonusType.CORE
		end
	elseif CONDITIONS.IsThirdGameMode() then
		return Challenge.BonusType.CP
	elseif CONDITIONS.IsOutbreakGametype() then
		return Challenge.BonusType.ZM
	elseif CONDITIONS.IsMagmaGameMode() then
		return Challenge.BonusType.BR
	else
		return Challenge.BonusType.CORE
	end
end

local f0_local3 = function ( f17_arg0, f17_arg1 )
	if not f17_arg0._coreChallenges or #f17_arg0._coreChallenges == 0 then
		
	end
	if not (not CONDITIONS.IsThirdGameMode() or f17_arg0._displayGameMode) or f17_arg0._displayGameMode == "CP" then
		table.sort( f17_arg0._coreChallenges, function ( f18_arg0, f18_arg1 )
			return tonumber( f18_arg0.category ) < tonumber( f18_arg1.category )
		end )
	end
	for f17_local7, f17_local8 in ipairs( f17_arg0._coreChallenges ) do
		if not f17_local8.isComplete or CONDITIONS.InGame() then
			local f17_local3 = MenuBuilder.BuildRegisteredType( "BarracksChallengeItem", {
				controllerIndex = f17_arg1
			} )
			local f17_local4 = f17_arg0._type
			local f17_local5 = Challenge.CHALLENGE_CONTAINER_TYPE.WEEKLY
			f17_local3:Setup( f17_arg0, f17_local8, REG15 and TrackedChallenges.Kind.WEEKLY or Challenge.ChallengeItemType.NORMAL )
			table.insert( f17_arg0._visibleElements, f17_local3 )
			f17_arg0:addElement( f17_local3 )
			if f17_local7 == 1 then
				f17_local3.MedalBG:SetTop( f0_local0 )
			elseif f17_local7 == #f17_arg0._coreChallenges then
				f17_local3.Connector:SetVisible( false )
			end
			f17_local5 = f17_arg0._layoutHeight
			local f17_local6 = f17_local3:GetAnchorsAndPosition()
			f17_arg0._layoutHeight = f17_local5 + f17_local6.bottom
			if #f17_arg0._visibleElements == TrackedChallenges.MAX_TRACKED_CHALLENGE_COUNT_VISIBLE then
				f17_arg0._layoutHeightMaxFit = f17_arg0._layoutHeight
			end
		end
	end
end

local f0_local4 = function ( f16_arg0, f16_arg1 )
	f16_arg0.BonusItem = Challenge.CreateBonusChallengeButton( f16_arg0, f16_arg1, f0_local0( f16_arg0 ), Challenge.ChallengeItemType.BONUS )
	if f16_arg0.BonusItem then
		if f16_arg0.BonusItem._challenge.bonusUnlocked then
			table.insert( f16_arg0._visibleElements, f16_arg0.BonusItem )
			f16_arg0:addElement( f16_arg0.BonusItem )
			local f16_local0 = f16_arg0._layoutHeight
			local f16_local1 = f16_arg0.BonusItem:GetAnchorsAndPosition()
			f16_arg0._layoutHeight = f16_local0 + f16_local1.bottom
			if #f16_arg0._visibleElements == TrackedChallenges.MAX_TRACKED_CHALLENGE_COUNT_VISIBLE then
				f16_arg0._layoutHeightMaxFit = f16_arg0._layoutHeight
			end
		end
		local f16_local0 = MenuBuilder.BuildRegisteredType( "LockedBonusChallenge", {
			controllerIndex = f16_arg1
		} )
		table.insert( f16_arg0._visibleElements, f16_local0 )
		f16_arg0:addElement( f16_local0 )
		local f16_local1 = f16_arg0._layoutHeight
		local f16_local2 = f16_local0:GetAnchorsAndPosition()
		f16_arg0._layoutHeight = f16_local1 + f16_local2.bottom
		if #f16_arg0._visibleElements == TrackedChallenges.MAX_TRACKED_CHALLENGE_COUNT_VISIBLE then
			f16_arg0._layoutHeightMaxFit = f16_arg0._layoutHeight
		end
		return 
	else
		return 
	end
end

local f0_local5 = function ( f15_arg0, f15_arg1 )
	if Table.IsNilOrEmpty( f15_arg0._winChallenges ) then
		local f15_local0 = Challenge.GetDefaultWinChallengeID( f15_arg1 )
		if not f15_local0 then
			if f15_arg0.WinItem then
				f15_arg0.WinItem:closeTree()
				f15_arg0.WinItem = nil
			end
			return 
		end
		f15_arg0._winChallenges = {
			f15_local0
		}
	end
	local f15_local0 = f15_arg0._winChallenges[1]
	local f15_local1 = Challenge.GetWinChallengeData( f15_local0 )
	if not f15_local1 then
		if f15_arg0.WinItem then
			f15_arg0.WinItem:closeTree()
			f15_arg0.WinItem = nil
		end
		return 
	elseif LOOT.GetTypeForID( f15_local1.challengeRewardItem ) == nil then
		if f15_arg0.WinItem then
			f15_arg0.WinItem:closeTree()
			f15_arg0.WinItem = nil
		end
		return 
	end
	f15_arg0.WinItem = MenuBuilder.BuildRegisteredType( "BarracksChallengeItem", {
		controllerIndex = f15_arg1
	} )
	f15_arg0.WinItem:SetupWin( f15_arg1, f15_local0 )
	table.insert( f15_arg0._visibleElements, f15_arg0.WinItem )
	f15_arg0:addElement( f15_arg0.WinItem )
	local f15_local2 = f15_arg0._layoutHeight
	local f15_local3 = f15_arg0.WinItem:GetAnchorsAndPosition()
	f15_arg0._layoutHeight = f15_local2 + f15_local3.bottom
	if #f15_arg0._visibleElements == TrackedChallenges.MAX_TRACKED_CHALLENGE_COUNT_VISIBLE then
		f15_arg0._layoutHeightMaxFit = f15_arg0._layoutHeight
	end
end

local f0_local6 = function ( f14_arg0 )
	return not Table.IsNilOrEmpty( f14_arg0._coreChallenges )
end

local f0_local7 = function ( f12_arg0, f12_arg1 )
	local f12_local0 = WeeklyChallenge.GetCurrentWeek()
	local f12_local1 = WeeklyChallenge.GetCurrentSeason()
	local f12_local2 = WeeklyChallenge.GetWeeklyTracker( f12_arg1, f12_local1, f12_local0 )
	if f12_local2.isComplete and 1 < f12_local0 then
		
	else
		
	end
	local f12_local3 = WeeklyChallenge.GetIncompleteChallengesForCurrentGamemode( f12_arg1, f12_local1, f12_local0 )
	local f12_local4 = function ( f13_arg0, f13_arg1 )
		return f13_arg1.progress / (f13_arg1.data.amount and tonumber( f13_arg1.data.amount ) or 1) < f13_arg0.progress / (f13_arg0.data.amount and tonumber( f13_arg0.data.amount ) or 1)
	end
	
	if not Table.IsNilOrEmpty( f12_local3 ) then
		table.sort( f12_local3, f12_local4 )
		local f12_local5 = 1
		if f12_local5 <= Challenge.MAX_VISIBLE_CHALLENGES and f12_local3[f12_local5] ~= nil then
			
		else
			
		end
		if #f12_arg0._coreChallenges < Challenge.MAX_VISIBLE_CHALLENGES and 1 < f12_local0 then
			f12_local0 = f12_local0 - 1
			f12_local2 = WeeklyChallenge.GetWeeklyTracker( f12_arg1, f12_local1, f12_local0 )
			if f12_local2 and f12_local2.isComplete and 1 < f12_local0 then
				
			else
				
			end
			if f12_local2 and 0 < f12_local0 then
				f12_local3 = WeeklyChallenge.GetIncompleteChallengesForCurrentGamemode( f12_arg1, f12_local1, f12_local0 )
				table.sort( f12_local3, f12_local4 )
				local f12_local6 = 1
				for f12_local7 = #f12_arg0._coreChallenges + 1, Challenge.MAX_VISIBLE_CHALLENGES, 1 do
					local f12_local10 = f12_local7
					table.insert( f12_arg0._coreChallenges, f12_local3[f12_local6] )
					f12_local6 = f12_local6 + 1
				end
			end
		end
	end
end

local f0_local8 = function ( f11_arg0, f11_arg1 )
	for f11_local3, f11_local4 in ipairs( f11_arg0._visibleElements ) do
		f11_arg0:RemoveElement( f11_local4 )
	end
	f11_arg0._visibleElements = {}
end

local f0_local9 = function ( f9_arg0, f9_arg1, f9_arg2 )
	if 0 < #f9_arg0._visibleElements then
		f0_local0( f9_arg0, f9_arg1 )
	end
	local f9_local0
	if f9_arg2 then
		f9_local0 = f9_arg2.displayGameMode
		if not f9_local0 then
		
		else
			f9_arg0._displayGameMode = f9_local0
			f9_arg0._type = f9_arg2.type
			if f9_arg0._type == Challenge.CHALLENGE_CONTAINER_TYPE.DAILY then
				f9_arg0._coreChallenges = f0_local0( f9_arg0, f9_arg1 )
			else
				f9_arg0._coreChallenges = {}
				f0_local0( f9_arg0, f9_arg1 )
			end
			f9_arg0._layoutHeight = 0
			f9_arg0._layoutHeightMaxFit = 0
			f9_local0 = {
				isComplete = true,
				amountNeeded = "10",
				progress = 1,
				unlocked = true,
				desc = 0xCA07A93FADF9E95,
				xp = "10400",
				ref = "ch_op_sniper_headshot",
				id = 4132,
				amountEarned = "0",
				type = Challenge.GetAEKindID( 0xAF06CE208AE63C0 )
			}
			local f9_local1 = {
				isComplete = false,
				amountNeeded = "10",
				progress = 5.29462817E-315,
				unlocked = true,
				desc = 0xCA07A93FADF9E95,
				xp = "20500",
				ref = "ch_op_sniper_headshot",
				id = 4132,
				amountEarned = "5",
				type = Challenge.GetAEKindID( 0xAF06CE208AE63C0 )
			}
			f0_local0( f9_arg0, f9_arg1 )
			if not CONDITIONS.IsJupPublicBetaBuildEnabled() and f9_arg0._type == Challenge.CHALLENGE_CONTAINER_TYPE.DAILY then
				f0_local0( f9_arg0, f9_arg1 )
			end
			if f9_arg0._type == Challenge.CHALLENGE_CONTAINER_TYPE.DAILY and not CONDITIONS.IsJupPublicBetaBuildEnabled() and Challenge.IsWinChallengesUnlocked( f9_arg1 ) then
				f9_arg0._winChallenges = Challenge.GetWinChallengeList( f9_arg1 )
				f0_local0( f9_arg0, f9_arg1 )
				Challenge.RemoveCompletedWinChallenges( f9_arg0, f9_arg1, f9_arg0._winChallenges )
			end
			LAYOUT.SetHeight( f9_arg0, f9_arg0._layoutHeight )
			local f9_local2 = f9_arg0:Wait( 0 )
			f9_local2.onComplete = function ()
				f9_arg0._areChallengesSetup = true
				f9_arg0:dispatchEventToRoot( {
					name = "daily_challenges_setup_complete",
					type = f9_arg0._type
				} )
			end
			
		end
	end
	f9_local0 = nil
end

local f0_local10 = function ( f7_arg0, f7_arg1 )
	f7_arg0._coreChallenges = Challenge.GetTrackedChallengesVisible( f7_arg1 )
	f7_arg0._type = Challenge.CHALLENGE_CONTAINER_TYPE.TRACKED
	f7_arg0._layoutHeight = 0
	f7_arg0._layoutHeightMaxFit = 0
	f0_local0( f7_arg0, f7_arg1 )
	f7_arg0:deregisterEventHandler( "new_daily_challenges" )
	LAYOUT.SetHeight( f7_arg0, f7_arg0._layoutHeight )
	local f7_local0 = f7_arg0:Wait( 0 )
	f7_local0.onComplete = function ()
		f7_arg0:dispatchEventToRoot( {
			name = "daily_challenges_setup_complete",
			type = f7_arg0._type
		} )
	end
	
end

local f0_local11 = function ( f6_arg0 )
	return f6_arg0._layoutHeight
end

local f0_local12 = function ( f5_arg0 )
	if f5_arg0._layoutHeightMaxFit <= 0 then
		return 0
	else
		return f5_arg0._layoutHeight - f5_arg0._layoutHeightMaxFit
	end
end

local f0_local13 = function ( f4_arg0 )
	if f4_arg0._coreChallenges then
		return #f4_arg0._coreChallenges
	else
		return 0
	end
end

local f0_local14 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.Setup = f0_local0
	f2_arg0.SetupTrackedChallenges = f0_local0
	f2_arg0.GetNumOfChallenges = f0_local0
	f2_arg0.GetLayoutHeight = f0_local0
	f2_arg0.GetLayoutHeightOverflowAmount = f0_local0
	f2_arg0.HasChallenges = f0_local0
	f2_arg0._visibleElements = {}
	f2_arg0._layoutHeight = 0
	f2_arg0:addEventHandler( "new_daily_challenges", function ( f3_arg0, f3_arg1 )
		f2_arg0( f3_arg0, f2_arg0 )
	end )
end

function ChallengesDailyLayout( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = f1_local0.UIVerticalStackedLayout.new()
	f1_local1:SetVerticalAlignment( f1_local0.Alignment.Top )
	f1_local1:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 424, 0, 261 )
	f1_local1.id = "ChallengesDailyLayout"
	local f1_local2
	if f1_arg1 then
		f1_local2 = f1_arg1
	else
		f1_local2 = f1_arg1.controllerIndex
	end
	f0_local0( f1_local1, f1_local0.ValidateControllerIndex( f1_local1, f1_local2 ), f1_arg1 )
	return f1_local1
end

MenuBuilder.registerType( 0xD3DC4D78FE20D62, ChallengesDailyLayout )
LockTable( _M )
