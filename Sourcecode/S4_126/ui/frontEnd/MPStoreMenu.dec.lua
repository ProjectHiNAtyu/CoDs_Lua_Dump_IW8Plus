-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
module( ..., package.seeall )
local f0_local0 = function ( f7_arg0, f7_arg1 )
	LUI.FlowManager.RequestPopupMenu( nil, "PopupConfirm", false, f7_arg1, false, {
		messageText = Engine[0xED84C33EC5F01EA]( "MP_FRONTEND_ONLY/STORE_UNAVAILABLE" ),
		label = Engine[0xED84C33EC5F01EA]( "LUA_MENU/OK" ),
		headerText = Engine[0xED84C33EC5F01EA]( "MENU/NOTICE" ),
		controllerIndex = f7_arg1,
		action = function ( f8_arg0 )
			LUI.FlowManager.RequestLeaveMenu( f8_arg0 )
			f8_arg0:dispatchEventToRoot( {
				name = "store_menu_error",
				immediate = false,
				controllerIndex = f7_arg0
			} )
		end
	}, nil, false, true )
end

local f0_local1 = function ( f6_arg0 )
	if Engine[0x836C8AD984F14F6]() then
		InGameStore.ShowStoreIcon( false )
	end
	Engine[0x3DACD106DDC0D71]()
end

local f0_local2 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.LoseFocusCallback = f0_local0
	local f2_local0 = Store[0xB6B0898C7795778]()
	local f2_local1 = Store[0x5CA33565A117BF3]()
	local f2_local2 = Engine[0xB6B0898C7795778]( f2_local0 )
	local f2_local3 = Engine[0x5CA33565A117BF3]( f2_local1 )
	local f2_local4 = f2_local2.layoutType
	if f2_local4 == nil or f2_local3 == nil or #f2_local3 == 0 then
		f0_local0( f2_arg0, f2_arg1 )
	else
		local f2_local5 = ""
		if f2_local4 == StoreItemLayout.BILLBOARD_LIST then
			f2_local5 = "MPStoreBillboardList"
		elseif f2_local4 == StoreItemLayout.BILLBOARD_GRID then
			f2_local5 = "MPStoreBillboardGrid"
		else
			f2_local5 = "MPStoreBillboardGrid"
		end
		local FocusBundleByID = MenuBuilder.BuildRegisteredType( f2_local5, {
			controllerIndex = f2_arg1
		} )
		FocusBundleByID.id = f2_local5
		f2_arg0:addElement( FocusBundleByID )
		f2_arg0.FocusBundleByID = FocusBundleByID.FocusBundleByID
		
		f2_arg0.FocusButtonByName = FocusBundleByID.FocusButtonByName
		f2_arg0.BackButtonOverride = FocusBundleByID.BackButtonOverride
		if Engine[0x836C8AD984F14F6]() then
			InGameStore.ShowStoreIcon( false )
		end
	end
	FrontEndScene.HideAllCharacters()
	SEQUENCEPRESETS.RegisterAnimation( f2_arg0, LUI.Transition.TransNextFrom, "OutLeft", 0 )
	SEQUENCEPRESETS.RegisterAnimation( f2_arg0, LUI.Transition.TransNextTo, "InLeft", 0 )
	SEQUENCEPRESETS.RegisterAnimation( f2_arg0, LUI.Transition.TransPrevFrom, "OutRight", 0 )
	SEQUENCEPRESETS.RegisterAnimation( f2_arg0, LUI.Transition.TransPrevTo, "InRight", 0 )
	f2_arg0:addEventHandler( "override_stop_video", function ( f5_arg0, f5_arg1 )
		f5_arg0._overrideStopVideo = true
	end )
	f2_arg0:addEventHandler( "menu_close", function ( f4_arg0, f4_arg1 )
		if not f4_arg0._overrideStopVideo then
			Engine[0x3DACD106DDC0D71]()
		end
		f4_arg0._overrideStopVideo = nil
	end )
	f2_arg0:addEventHandler( "menu_close_all", function ( f3_arg0, f3_arg1 )
		if Engine[0x836C8AD984F14F6]() then
			InGameStore.ShowStoreIcon( false )
		end
	end )
end

function MPStoreMenu( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "MPStoreMenu"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine[0x12586A3F4FB490E]() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1, "Missing controllerIndex!" )
	local f1_local2 = self
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "MPStoreMenu", MPStoreMenu )
LockTable( _M )
