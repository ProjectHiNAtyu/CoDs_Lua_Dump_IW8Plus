-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:01
module( ..., package.seeall )
require( "ui.generated.widgets.frontend.mp.tournament.tournamentlobbymember" )
local f0_local0 = 2
local f0_local1 = function ( f6_arg0, f6_arg1, f6_arg2 )
	local f6_local0 = f6_arg0._teamDetails[f6_arg2]
	for f6_local1 = 1, #f6_local0, 1 do
		f6_local0[f6_local1]:SetTeamIndex( f6_arg2 )
		f6_local0[f6_local1]:SetupDatasourceSubscriptions( f6_arg0._controllerIndex )
		f6_local0[f6_local1]:SetDataSource( f6_arg1:GetDataSourceAtIndex( f6_local1 - 1 ), f6_arg0._controllerIndex )
	end
end

local f0_local2 = function ( f5_arg0, f5_arg1, f5_arg2 )
	f0_local0( f5_arg0, f5_arg1.members, 1 )
	f0_local0( f5_arg0, f5_arg2.members, 2 )
end

local f0_local3 = function ( f3_arg0, f3_arg1, f3_arg2, f3_arg3 )
	FrontEndScene.HideAllCharacters()
	Engine[0x685AE31DEDA30A4]( "character_tournaments" )
	local f3_local0 = TOURNAMENT.GetTournamentTeamDatasources( f3_arg0, f3_arg1 )
	local f3_local1 = TOURNAMENT.GetTeamDatasource( f3_local0, 0 )
	local f3_local2 = TOURNAMENT.GetTeamDatasource( f3_local0, 1 )
	local f3_local3 = TOURNAMENT.GetMyTeamIndex( f3_arg2, f3_arg3 )
	if f3_local3 == Teams.allies then
		local f3_local4 = f3_local1
		f3_local1 = f3_local2
		f3_local2 = f3_local4
	end
	f0_local0( f3_arg0, f3_local1, f3_local2 )
	f3_arg0._allTeamData = TOURNAMENT.RequestClientCharacterData( f3_arg0, f3_local1, f3_local2, f3_arg1, f3_local3 )
	if not f3_arg0.lobbyTimer then
		f3_arg0.lobbyTimer = LUI.UITimer.new( {
			interval = 2000,
			event = "update_streaming_requests"
		} )
		f3_arg0.lobbyTimer.id = "lobbyTimer"
		f3_arg0:addElement( f3_arg0.lobbyTimer )
		f3_arg0:registerEventHandler( "update_streaming_requests", function ( element, event )
			f3_arg0._allTeamData = TOURNAMENT.RequestClientCharacterData( element, f3_arg0, f3_arg0, f3_arg0, f3_arg0 )
			if TOURNAMENT.UpdateClientCharacters( f3_arg0, f3_arg0._allTeamData, f3_arg0._teamDetails ) then
				f3_arg0:processEvent( {
					name = "lose_focus"
				} )
				f3_arg0:processEvent( {
					name = "gain_focus"
				} )
			end
		end )
	end
	if TOURNAMENT.UpdateClientCharacters( f3_arg1, f3_arg0._allTeamData, f3_arg0._teamDetails ) then
		f3_arg0:processEvent( {
			name = "lose_focus"
		} )
		f3_arg0:processEvent( {
			name = "gain_focus"
		} )
	end
end

local f0_local4 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.SetClientCharacterScene = f0_local0
	f2_arg0._controllerIndex = f2_arg2.controllerIndex
	f2_arg0._teamDetails = {}
	for f2_local0 = 1, f0_local0, 1 do
		for f2_local3 = 1, TOURNAMENT.maxPlayersOnTeam, 1 do
			f2_arg0._teamDetails[f2_local0] = f2_arg0._teamDetails[f2_local0] or {}
			local f2_local6 = f2_arg0["Team" .. f2_local0 .. "Player" .. f2_local3 .. "Details"]
			assert( f2_local6 )
			table.insert( f2_arg0._teamDetails[f2_local0], f2_local6 )
		end
	end
end

function TournamentPlayerNames( menu, controller )
	local self = LUI.UIHorizontalNavigator.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "TournamentPlayerNames"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local Team1Player3Details = nil
	
	Team1Player3Details = MenuBuilder.BuildRegisteredType( "TournamentLobbyMember", {
		controllerIndex = f1_local1
	} )
	Team1Player3Details.id = "Team1Player3Details"
	Team1Player3Details:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -631, _1080p * -361, _1080p * 758, _1080p * 786 )
	self:addElement( Team1Player3Details )
	self.Team1Player3Details = Team1Player3Details
	
	local Team1Player2Details = nil
	
	Team1Player2Details = MenuBuilder.BuildRegisteredType( "TournamentLobbyMember", {
		controllerIndex = f1_local1
	} )
	Team1Player2Details.id = "Team1Player2Details"
	Team1Player2Details:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -756, _1080p * -486, _1080p * 803, _1080p * 831 )
	self:addElement( Team1Player2Details )
	self.Team1Player2Details = Team1Player2Details
	
	local Team1Player1Details = nil
	
	Team1Player1Details = MenuBuilder.BuildRegisteredType( "TournamentLobbyMember", {
		controllerIndex = f1_local1
	} )
	Team1Player1Details.id = "Team1Player1Details"
	Team1Player1Details:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -453, _1080p * -183, _1080p * 803, _1080p * 831 )
	self:addElement( Team1Player1Details )
	self.Team1Player1Details = Team1Player1Details
	
	local Team2Player3Details = nil
	
	Team2Player3Details = MenuBuilder.BuildRegisteredType( "TournamentLobbyMember", {
		controllerIndex = f1_local1
	} )
	Team2Player3Details.id = "Team2Player3Details"
	Team2Player3Details:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * 381, _1080p * 651, _1080p * 758, _1080p * 786 )
	self:addElement( Team2Player3Details )
	self.Team2Player3Details = Team2Player3Details
	
	local Team2Player2Details = nil
	
	Team2Player2Details = MenuBuilder.BuildRegisteredType( "TournamentLobbyMember", {
		controllerIndex = f1_local1
	} )
	Team2Player2Details.id = "Team2Player2Details"
	Team2Player2Details:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * 522, _1080p * 792, _1080p * 803, _1080p * 831 )
	self:addElement( Team2Player2Details )
	self.Team2Player2Details = Team2Player2Details
	
	local Team2Player1Details = nil
	
	Team2Player1Details = MenuBuilder.BuildRegisteredType( "TournamentLobbyMember", {
		controllerIndex = f1_local1
	} )
	Team2Player1Details.id = "Team2Player1Details"
	Team2Player1Details:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * 204, _1080p * 474, _1080p * 803, _1080p * 831 )
	self:addElement( Team2Player1Details )
	self.Team2Player1Details = Team2Player1Details
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "TournamentPlayerNames", TournamentPlayerNames )
LockTable( _M )
