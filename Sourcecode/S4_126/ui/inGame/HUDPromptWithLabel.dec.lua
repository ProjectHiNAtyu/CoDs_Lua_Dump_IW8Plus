-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
module( ..., package.seeall )
require( "ui.inGame.HUDPrompt" )
local f0_local0 = function ( f17_arg0, f17_arg1 )
	assert( f17_arg0.Prompt )
	if f17_arg1 then
		f17_arg0.Prompt:SetProgress( f17_arg1 )
	end
end

local f0_local1 = function ( f16_arg0, f16_arg1 )
	local f16_local0 = f16_arg1 == LUI.DIRECTION.vertical
	local f16_local1 = ACTIONS.AnimateSequence
	local f16_local2 = f16_arg0
	local f16_local3
	if f16_local0 then
		f16_local3 = "VerticalLayout"
	else
		f16_local3 = "HorizontalLayout"
	end
	f16_local1( f16_local2, f16_local3 )
	f16_arg0._isVerticalLayout = f16_local0
end

local f0_local2 = function ( f15_arg0 )
	if f15_arg0.Backer:GetVisibility() then
		local f15_local0
		if CONDITIONS.IsGamepadEnabled() then
			f15_local0 = 5 * _1080p
			if not f15_local0 then
			
			else
				local f15_local1 = LAYOUT.GetTextWidth( f15_arg0.Instruction )
				local f15_local2 = f15_arg0.Backer:GetCurrentAnchorsAndPositions()
				f15_local2 = f15_local2.left
				f15_arg0.Backer:SetRight( -f15_local2 + f15_local1 - f15_local0 )
				if IsLanguageArabic() then
					local f15_local3 = 30 * _1080p
					local f15_local4 = f15_local2 - f15_local1 - f15_local3
					local f15_local5 = f15_local2 + f15_local3
					f15_arg0.Backer:SetLeft( f15_local4 )
					f15_arg0.Backer:SetRight( f15_local5 )
				end
			end
		end
		f15_local0 = 10 * _1080p
	end
end

local f0_local3 = function ( f14_arg0, f14_arg1 )
	if CONDITIONS.IsCapturingFootage( self ) or IsCodcaster() or CONDITIONS.IsSpectating( f14_arg0._controllerIndex ) and CONDITIONS.IsBRGameType( self ) then
		f14_arg0.Instruction:SetAlpha( 0 )
		f14_arg0.Prompt:SetAlpha( 0 )
	elseif f14_arg1 then
		f14_arg0.Instruction:SetAlpha( 1 )
		f14_arg0.Prompt:SetAlpha( 1 )
	else
		f14_arg0.Instruction:SetAlpha( 0 )
		f14_arg0.Prompt:SetAlpha( 0 )
	end
	f14_arg0.isVisible = f14_arg1
end

local f0_local4 = function ( f13_arg0 )
	if f13_arg0._isVerticalLayout then
		return 
	end
	local f13_local0 = nil
	if Engine[0x6938F45868B1BBC]( f13_arg0._controllerIndex ) then
		f13_local0 = f13_arg0.Prompt.ActionIcon:GetCurrentAnchorsAndPositions()
	else
		f13_local0 = f13_arg0.Prompt.KBMButtonPrompt:GetCurrentAnchorsAndPositions()
	end
	local f13_local1 = f13_arg0.Prompt:GetCurrentAnchorsAndPositions()
	local f13_local2 = (f13_local1.left + f13_local1.right) / 2
	local f13_local3 = f13_arg0._instructionData
	local f13_local4 = f13_local3.right - f13_local3.left
	f13_arg0.Instruction:SetAnchorsAndPosition( f13_local3.leftAnchor, f13_local3.rightAnchor, f13_local3.topAnchor, f13_local3.bottomAnchor, f13_local1.right + f13_arg0.padding, f13_local1.right + f13_arg0.padding + f13_local4, f13_local3.top, f13_local3.bottom )
	if IsLanguageTraditionalChinese() then
		f13_arg0.Instruction:SetScale( 0.2, 0 )
		f13_arg0.Instruction:SetAnchorsAndPosition( f13_local3.leftAnchor + 0.09, f13_local3.rightAnchor + 0.09, f13_local3.topAnchor, f13_local3.bottomAnchor, f13_local1.right + f13_arg0.padding, f13_local1.right + f13_arg0.padding + f13_local4, f13_local3.top, f13_local3.bottom )
	end
	if IsLanguageArabic() then
		f13_arg0.Instruction:SetScale( 0.5, 0 )
		f13_arg0.Instruction:SetAnchorsAndPosition( f13_local3.leftAnchor, f13_local3.rightAnchor, f13_local3.topAnchor, f13_local3.bottomAnchor, f13_local2 + f13_local0.left + f13_arg0.padding + f13_local4, f13_local2 + 15 + f13_local0.left + f13_arg0.padding, f13_local3.top, f13_local3.bottom )
	end
end

local f0_local5 = function ( f12_arg0, f12_arg1, f12_arg2 )
	assert( f12_arg0.Instruction )
	assert( f12_arg0.Prompt )
	if f12_arg1 then
		if IsLanguageArabic() then
			f12_arg0.Instruction:setText( ToUpperCase( f12_arg1 ) .. "" )
		else
			f12_arg0.Instruction:setText( "" .. ToUpperCase( f12_arg1 ) )
		end
	end
	if f12_arg2 then
		f12_arg0.Prompt:SetText( ToUpperCase( f12_arg2 ) )
	end
	f0_local0( f12_arg0, true )
	f12_arg0:UpdateBacker()
	f12_arg0:UpdateInstructionPosition()
end

local f0_local6 = function ( f11_arg0, f11_arg1 )
	assert( f11_arg0.Instruction )
	if f11_arg1 then
		if IsLanguageArabic() then
			f11_arg0.Instruction:setText( ToUpperCase( f11_arg1 ) .. "" )
		else
			f11_arg0.Instruction:setText( "" .. ToUpperCase( f11_arg1 ) )
		end
	end
	f11_arg0:UpdateInstructionPosition()
end

local f0_local7 = function ( f10_arg0, f10_arg1, f10_arg2 )
	f0_local0( f10_arg0, f10_arg1 )
	if not f10_arg0._isVerticalLayout then
		local f10_local0 = f10_arg0.Prompt.ActionIcon:GetCurrentAnchorsAndPositions()
		f10_arg0.Prompt.ActionIcon:SetAlignment( LUI.Alignment.Right )
		f10_arg0.Prompt.ActionIcon:SetAnchorsAndPosition( 1, 0, f10_local0.topAnchor, f10_local0.bottomAnchor, f10_local0.left - f10_local0.right, 0, f10_local0.top, f10_local0.bottom )
		if IsLanguageArabic() then
			f10_arg0.Prompt.ActionIcon:SetAlignment( LUI.Alignment.Left )
			f10_arg0.Prompt.ActionIcon:SetAnchorsAndPosition( 1, 0, f10_local0.topAnchor, f10_local0.bottomAnchor, 0, f10_local0.left - f10_local0.right, f10_local0.top, f10_local0.bottom )
		end
		f10_arg0.FitMultiplePromptsInLabel( f10_arg0.Prompt.ActionIcon )
		f10_arg0.Prompt.Shadow:SetAlpha( 0 )
	end
	f10_arg0:UpdateInstruction( f10_arg1, f10_arg2 )
end

local f0_local8 = function ( f9_arg0 )
	assert( f9_arg0 )
	local f9_local0 = 25
	local f9_local1 = 7
	local f9_local2 = f9_arg0:GetCurrentAnchorsAndPositions()
	local f9_local3 = math.max( LAYOUT.GetTextWidth( f9_arg0 ) + f9_local1, f9_local0 ) - math.abs( f9_local2.right - f9_local2.left )
	local f9_local4 = f9_local2.left - f9_local3 * f9_local2.leftAnchor
	local f9_local5 = f9_local2.right + f9_local3 * f9_local2.rightAnchor
	f9_arg0:SetAnchorsAndPosition( f9_local2.leftAnchor, f9_local2.rightAnchor, f9_local2.topAnchor, f9_local2.bottomAnchor, f9_local4, f9_local5, f9_local2.top, f9_local2.bottom, 0.1 )
	if IsLanguageArabic() then
		f9_arg0:SetAnchorsAndPosition( f9_local2.leftAnchor, f9_local2.rightAnchor, f9_local2.topAnchor, f9_local2.bottomAnchor, f9_local5, f9_local4, f9_local2.top, f9_local2.bottom, 0.1 )
	end
end

local f0_local9 = function ( f7_arg0, f7_arg1, f7_arg2 )
	f7_arg0.UpdateInstruction = f0_local0
	f7_arg0.UpdateInstructionWithMultiplePrompts = f0_local0
	f7_arg0.SetProgress = f0_local0
	f7_arg0.SetVisibilityPrompt = f0_local0
	f7_arg0.FitMultiplePromptsInLabel = f0_local0
	f7_arg0.UpdateInstructionPosition = f0_local0
	f7_arg0.UpdateInstructionText = f0_local0
	f7_arg0.SetPromptLayout = f0_local0
	f7_arg0.UpdateBacker = f0_local0
	f7_arg0.isVisible = true
	local f7_local0
	if Engine[0x6938F45868B1BBC]( f7_arg1 ) then
		f7_local0 = 8
	else
		f7_local0 = 0
	end
	f7_arg0.padding = f7_local0
	f7_arg0._controllerIndex = f7_arg1
	f7_arg0._instructionData = f7_arg0.Instruction:GetCurrentAnchorsAndPositions()
	f7_arg0.Prompt.KBMButtonPrompt.KeyString.onDirectiveInvalidated = function ( f8_arg0 )
		f7_arg0.Prompt.KBMButtonPrompt:DirectiveInvalidated( f8_arg0 )
		if f7_arg0.isVisible then
			f7_arg0:UpdateInstructionPosition()
		end
	end
	
	if not f7_arg0._controllerIndex then
		f7_arg0._controllerIndex = f7_arg1
	end
	WidgetInString.AddAlreadyExistingWidget( f7_arg0.Instruction, f7_arg0.Prompt, 1 )
end

function HUDPromptWithLabel( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 200 * _1080p, 0, 24 * _1080p )
	self.id = "HUDPromptWithLabel"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	self._sequenceLengths = self._sequenceLengths or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local Prompt = nil
	
	Prompt = MenuBuilder.BuildRegisteredType( "HUDPrompt", {
		controllerIndex = f1_local1
	} )
	Prompt.id = "Prompt"
	Prompt.ActionIcon:setText( StripColorMarkers( LocalizeString( "[F]" ) ), 0 )
	Prompt.KBMButtonPrompt.KeyString:setText( StripColorMarkers( LocalizeString( "[F]" ) ), 0 )
	Prompt:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -27, _1080p * -3, _1080p * -12, _1080p * 12 )
	self:addElement( Prompt )
	self.Prompt = Prompt
	
	local Instruction = nil
	
	Instruction = LUI.UIStyledText.new()
	Instruction.id = "Instruction"
	Instruction:SetRGBFromTable( SWATCHES.HUD.vHUDDefault, 0 )
	Instruction:SetAlpha( 0.75, 0 )
	Instruction:setText( ToUpperCase( "" ), 0 )
	Instruction:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_XSHeader.font.File ) )
	Instruction:SetFontSize( FONT_STYLES.fontStyle_XSHeader.size )
	Instruction:SetMinFontSize( FONT_STYLES.fontStyle_XSHeader.minSize )
	Instruction:SetWordWrap( false )
	Instruction:SetAlignment( LUI.Alignment.Left )
	Instruction:SetVerticalAlignment( LUI.Alignment.Center )
	Instruction:SetSDFRenderingEnabled( true )
	Instruction:SetShadowMinDistance( -0.1, 0 )
	Instruction:SetShadowMaxDistance( 0.1, 0 )
	Instruction:SetShadowRGBFromTable( SWATCHES.HUD.vHUDShadow, 0 )
	Instruction:SetEllipsesEnabled( true )
	Instruction:SetMaxVisibleLines( 1 )
	Instruction:SetAnchorsAndPosition( 0.5, 0.5, 0, 0, _1080p * 9, _1080p * 209, _1080p * 1, _1080p * -1 )
	self:addElement( Instruction )
	self.Instruction = Instruction
	
	local Backer = nil
	
	Backer = LUI.UIImage.new()
	Backer.id = "Backer"
	Backer:SetVisibility( LUI.Visibility.Hidden )
	Backer:SetRGBFromTable( SWATCHES.HUD.vHUDShadow, 0 )
	Backer:SetAlpha( 0, 0 )
	Backer:setPriority( -1 )
	Backer:setImage( RegisterMaterial( "hud_bkgd_glow" ), 0 )
	Backer:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -38, _1080p * 124, _1080p * -21, _1080p * 21 )
	self:addElement( Backer )
	self.Backer = Backer
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	self._sequenceLengths.DefaultSequence = 0
	self._sequences.ZHJP = function ()
		
	end
	
	self._sequenceLengths.ZHJP = 0
	self._sequences.KOR = function ()
		
	end
	
	self._sequenceLengths.KOR = 0
	local f1_local6 = nil
	Prompt:RegisterAnimationSequence( "VerticalLayout", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -12
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -30
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 12
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * -6
		}
	} )
	Instruction:RegisterAnimationSequence( "VerticalLayout", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -100
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 100
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Text_Style_Horizontal_Alignment,
			value = LUI.Alignment.Center
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 7
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 7
		}
	} )
	self._sequences.VerticalLayout = function ()
		menu:AnimateSequence( "VerticalLayout" )
		menu:AnimateSequence( "VerticalLayout" )
	end
	
	self._sequenceLengths.VerticalLayout = 0
	local f1_local7 = nil
	Prompt:RegisterAnimationSequence( "HorizontalLayout", {
		{
			value = 5.29462817E-315,
			duration = 0,
			property = TWEEN_PROPERTY.Left_Anchor
		},
		{
			value = 5.29462817E-315,
			duration = 0,
			property = TWEEN_PROPERTY.Right_Anchor
		},
		{
			value = 5.29462817E-315,
			duration = 0,
			property = TWEEN_PROPERTY.Top_Anchor
		},
		{
			value = 5.29462817E-315,
			duration = 0,
			property = TWEEN_PROPERTY.Bottom_Anchor
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -27
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -3
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -12
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 12
		}
	} )
	Instruction:RegisterAnimationSequence( "HorizontalLayout", {
		{
			value = 5.29462817E-315,
			duration = 0,
			property = TWEEN_PROPERTY.Left_Anchor
		},
		{
			value = 5.29462817E-315,
			duration = 0,
			property = TWEEN_PROPERTY.Right_Anchor
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Top_Anchor
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Bottom_Anchor
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 9
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 209
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Top
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Bottom
		}
	} )
	self._sequences.HorizontalLayout = function ()
		menu:AnimateSequence( "HorizontalLayout" )
		menu:AnimateSequence( "HorizontalLayout" )
	end
	
	self._sequenceLengths.HorizontalLayout = 0
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "HUDPromptWithLabel", HUDPromptWithLabel )
LockTable( _M )
