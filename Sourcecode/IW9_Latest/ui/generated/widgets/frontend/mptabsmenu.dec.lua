-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
module( ..., package.seeall )
require( "ui.generated.widgets.frontend.social.socialpartywidget" )
require( "ui.generated.widgets.frontend.menutitle" )
require( "ui.generated.widgets.frontend.mp.playmenu.menutab" )
require( "ui.generated.widgets.frontEnd.mp.PlayMenu.MenuTab" )
local f0_local0 = {
	NonWeaponTypes = {
		LOOT.itemTypes.STREAK,
		LOOT.itemTypes.WATCH,
		LOOT.itemTypes.SUPER,
		LOOT.itemTypes.VEHICLE_CAMO,
		LOOT.itemTypes.VEHICLE_HORN,
		LOOT.itemTypes.VEHICLE_TRACK
	},
	OperatorTypes = {
		LOOT.itemTypes.OPERATOR,
		LOOT.itemTypes.OPERATOR_SKIN,
		LOOT.itemTypes.OPERATOR_TAUNT,
		LOOT.itemTypes.OPERATOR_EXECUTION
	},
	BarracksTypes = {
		LOOT.itemTypes.PLAYERCARD,
		LOOT.itemTypes.EMBLEM,
		LOOT.itemTypes.SPRAYS,
		LOOT.itemTypes.GESTURES
	}
}
local f0_local1 = function ( f31_arg0, f31_arg1 )
	local f31_local0 = function ( f35_arg0, f35_arg1 )
		local f35_local0 = false
		for f35_local4, f35_local5 in pairs( f35_arg1 ) do
			if LOOT.IsCategoryNew( f35_arg0, f35_local5 ) then
				f35_local0 = true
				break
			end
		end
		return f35_local0
	end
	
	local f31_local1 = function ( f34_arg0, f34_arg1 )
		local f34_local0 = f31_arg0:GetTabIndexByWidgetName( f34_arg0 )
		local f34_local1
		if f34_local0 then
			f34_local1 = f34_local0
		else
			f34_local1 = f31_arg0.Tabs:GetTabAtIndex( f34_local0 )
		end
		if f34_local1 and f34_local1.SetBreadcrumb then
			f34_local1:SetBreadcrumb( f34_arg1 )
		end
	end
	
	local f31_local2 = f31_local0( f31_arg1, f0_local0.NonWeaponTypes )
	local f31_local3 = 0 < #WEAPON.GetNewWeaponIDs( f31_arg1, {
		getBaseWeapon = false
	} )
	local f31_local4
	if not f31_local2 then
		f31_local4 = f31_local2
	else
		f31_local4 = f31_local3
	end
	f31_arg0.isWeaponTabNew = f31_local4
	f31_arg0.isOperatorTypeNew = f31_local0( f31_arg1, f0_local0.OperatorTypes )
	f31_arg0.isBarracksNew = f31_local0( f31_arg1, f0_local0.BarracksTypes )
	f31_arg0.storeHasNewItem, f31_arg0._storeHasFreeItem, f31_arg0.limitedTimeItem = STORE.HasNewAndFreeAndLimitedTimeItems( f31_arg1 )
	f31_local1( "MPWeaponMenu", f31_arg0.isWeaponTabNew )
	f31_local1( "MPOperatorMenu", f31_arg0.isOperatorTypeNew )
	f31_local1( "MPBarracksMenu", f31_arg0.isBarracksNew )
	LOOT.AttachFence( f31_arg0, f31_arg1, function ( f33_arg0, f33_arg1 )
		if f33_arg1.fenceState ~= LUI.Fence.FenceObjectState.PASSING then
			return 
		else
			f33_arg0.isBattlePassNew = BATTLEPASS.HasNewItems( f33_arg1.controllerIndex )
			f31_arg0( "BattlePassMenu", f33_arg0.isBattlePassNew )
		end
	end )
	LUI.DeferredFence.Attach( f31_arg0, f31_arg1, "CLIENT_CONNECT", LUI.DeferredFence.Criticality.LOW, LUI.DeferredFence.BackOutMethod.NONE, function ( f32_arg0, f32_arg1 )
		if f32_arg1.fenceState == LUI.Fence.FenceObjectState.PASSING then
			local f32_local0 = PROGRESSION.AreCustomLoadoutsUnlocked( f31_arg0 )
			local f32_local1
			if f32_local0 then
				f32_local1 = f32_local0
			else
				f32_local1 = LOOT.LoadoutHasNewLoot( f31_arg0 )
			end
			f32_arg0.isWeaponTabNew = f32_arg0.isWeaponTabNew or f32_local1
			f31_arg0( "MPWeaponMenu", f32_arg0.isWeaponTabNew )
		end
	end )
	f31_local4 = f31_arg0:GetTabIndexByWidgetName( "MPStoreMenu" )
	local f31_local5
	if f31_local4 then
		f31_local5 = f31_local4
	else
		f31_local5 = f31_arg0.Tabs:GetTabAtIndex( f31_local4 )
	end
	if f31_local5 and f31_local5.SetBreadcrumb then
		f31_local5:SetBreadcrumb( f31_arg0.storeHasNewItem )
		if f31_arg0.limitedTimeItem then
			f31_local5:SetLimitedTimeBanner( f31_arg0.limitedTimeItem )
		elseif f31_arg0._storeHasFreeItem then
			f31_local5:SetFreeBanner( f31_arg0._storeHasFreeItem )
		end
	end
	f31_local4 = f31_arg0:GetTabIndexByWidgetName( "BattlePassMenu" )
	if f31_local4 then
		f31_local5 = f31_local4
	else
		f31_local5 = f31_arg0.Tabs:GetTabAtIndex( f31_local4 )
	end
	if f31_local5 then
		local f31_local6 = BATTLEPASS.IsOwned( f31_arg1 )
		if BATTLEPASS.IsTierSkipGiftActive( f31_arg1 ) and not f31_local6 then
			f31_local5:SetPromoBanner( tonumber( BATTLEPASS.GetTierSkipGiftTimer() ), false )
		elseif CONDITIONS.IsTierSaleEnabled() and f31_local6 then
			f31_local5:SetPromoBanner( Dvar[0x54084D7CA2317BB]( 0x64F094E184105A3 ), true )
		else
			f31_local5:SetSeasonBanner()
		end
	end
end

local f0_local2 = function ( f29_arg0, f29_arg1 )
	if f29_arg1 ~= nil then
		f29_arg0._backButtonHandlerSet = true
		f29_arg0:AddGamepadEventCallback( "button_secondary", function ( f30_arg0, f30_arg1 )
			local f30_local0 = f30_arg0.activeTabWidget
			local f30_local1 = true
			if f30_local0 and f30_local0.BackButtonOverride then
				f30_local1 = f30_local0.BackButtonOverride( f30_arg0, f30_arg1 )
			end
			if f30_local1 then
				f29_arg0( f30_arg0, f30_arg1 )
			end
		end )
	end
end

local f0_local3 = function ( f28_arg0, f28_arg1 )
	local f28_local0
	if f28_arg1 ~= "MPWeaponMenu" and f28_arg1 ~= "MPOperatorMenu" and f28_arg1 ~= "MPBarracksMenu" then
		f28_local0 = false
	else
		f28_local0 = true
	end
	return f28_local0
end

local f0_local4 = function ( f27_arg0, f27_arg1, f27_arg2 )
	if f27_arg1 and f27_arg2 then
		f27_arg0.PlayerText:setText( Engine[0x7D3158A9539A355]( Engine[0x29680E4E30C45C2]( f27_arg2 ) ) )
		local f27_local0 = LAYOUT.GetTextWidth( f27_arg0.PlayerText ) + 6 * _1080p
		local f27_local1 = f27_arg0.PlayerText:GetAnchorsAndPosition()
		f27_arg0.PlayerTextBacker:SetLeft( f27_local1.right - f27_local0 )
		f27_arg0.PlayerTextTexture:SetLeft( f27_local1.right - f27_local0 )
		ACTIONS.AnimateSequence( f27_arg0, "PlayerTextOn" )
	else
		ACTIONS.AnimateSequence( f27_arg0, "PlayerTextOff" )
	end
end

local f0_local5 = function ( f25_arg0, f25_arg1, f25_arg2 )
	local f25_local0 = f25_arg0.activeTabWidget
	if f25_arg1 == "PlayMenu" or f25_arg1 == "BRPlayMenu" then
		Lobby.DisplayNvidiaHighlightsButton( f25_arg0, "MW_Highlights" )
	end
	if (f25_arg1 == "LobbyFlowWidget" or f25_arg1 == "CPPublicLobbyPlayMenu") and 1 < Lobby.GetCurrentNumLobbyMembers( f25_arg0._controllerIndex ) and Lobby[0xF1D2956B0C99DF6]() then
		f25_arg0._allPlayersMuted = false
		f25_arg0:AddGamepadEventCallback( "button_right_stick", function ( f26_arg0, f26_arg1 )
			f26_arg0._allPlayersMuted = not f26_arg0._allPlayersMuted
			local f26_local0 = f26_arg1.controller
			local f26_local1 = f26_arg0._allPlayersMuted and 0x7D144975A6EEA95 or 0x46FABA13E586EDA
			f26_arg0:dispatchEventToAllChildren( {
				name = "lobby_mute_event",
				controllerIndex = f26_local0
			} )
			Lobby[0xFAAF0691E5D454F]( f26_local0, f26_arg0._allPlayersMuted )
			return true
		end )
	end
end

local f0_local6 = function ( f24_arg0, f24_arg1, f24_arg2 )
	f24_arg0.Tabs:HideTabs()
	if f24_arg0.PartyWidget then
		f24_arg0.PartyWidget:closeTree()
		f24_arg0.PartyWidget = nil
	end
end

local f0_local7 = function ( f23_arg0, f23_arg1 )
	return f23_arg0._tabIndexMap[f23_arg1]
end

local f0_local8 = function ( f22_arg0 )
	local f22_local0
	if f22_arg0 ~= "LobbyFlowWidget" and f22_arg0 ~= "CPPublicLobbyPlayMenu" and f22_arg0 ~= "PlayMenu" and f22_arg0 ~= "BRPlayMenu" and f22_arg0 ~= "DMZPlayMenu" then
		f22_local0 = false
	else
		f22_local0 = true
	end
	return f22_local0
end

local f0_local9 = function ( f16_arg0, f16_arg1, f16_arg2 )
	local f16_local0
	if f16_arg2 then
		f16_local0 = f16_arg2
	else
		f16_local0 = f16_arg2.hideBackButtonOnFirstTab
	end
	f16_arg0.hideBackButtonOnFirstTab = f16_local0
	f16_local0 = LUI.FlowManager.GetScopedData( f16_arg0 )
	local f16_local1
	if f16_arg2 then
		f16_local1 = f16_arg2
	else
		f16_local1 = f16_arg2.firstTabWidget
	end
	local f16_local2 = nil
	if f16_local1 == nil then
		if CONDITIONS.IsMagmaGameMode() then
			f16_local1 = "BRPlayMenu"
		elseif CONDITIONS.IsLeaguePlay() then
			f16_local1 = "LPPlayMenu"
		elseif CONDITIONS.IsCoreMultiplayer() then
			f16_local1 = "PlayMenu"
		elseif CONDITIONS.IsThirdGameMode() then
			f16_local1 = "PlayMenu"
		end
	end
	f16_arg0._isMenuInitialized = false
	local f16_local3 = {}
	local f16_local4 = {}
	local f16_local5 = CONDITIONS.IsCIABuildEnabled()
	if not f16_local5 then
		f16_local5 = not CONDITIONS.IsOperatorsTabEnabled()
	end
	f16_local3[#f16_local3 + 1] = {
		name = Engine[0xED84C33EC5F01EA]( 0xFDB576AE7ACC4A9 ),
		menuName = f16_local1
	}
	f16_local4[f16_local1] = #f16_local3
	if f16_local1 == "TournamentLobbyFlow" then
		f16_arg0.MenuTitle:SetAlpha( 0 )
	end
	local f16_local6 = TAB.GetWeaponTabState()
	if f16_local6 ~= TAB.VISIBILITY.HIDDEN then
		local f16_local7
		if CoD.IsDMZMatch() then
			f16_local7 = "LoadoutManagement"
		else
			f16_local7 = "MPWeaponMenu"
		end
		f16_local3[#f16_local3 + 1] = {
			hasRestrictionIcon = true,
			name = Engine[0xED84C33EC5F01EA]( 0x757F53F82FD770 ),
			menuName = f16_local7,
			disabled = f16_local6 == TAB.VISIBILITY.DISABLED
		}
		f16_local4[f16_local7] = #f16_local3
	end
	if TAB.GetOperatorsTabState() ~= TAB.VISIBILITY.HIDDEN then
		local f16_local8
		if CoD.IsDMZMatch() then
			f16_local8 = "SoloOperatorSelect"
		else
			f16_local8 = "MPOperatorMenu"
		end
		f16_local3[#f16_local3 + 1] = {
			name = Engine[0xED84C33EC5F01EA]( 0x1B8B5AC7FBC33ED ),
			menuName = f16_local8,
			disabled = f16_local5
		}
		f16_local4[f16_local8] = #f16_local3
	end
	local f16_local8 = TAB.GetCustomizeTabState()
	if f16_local8 ~= TAB.VISIBILITY.HIDDEN then
		f16_local3[#f16_local3 + 1] = {
			menuName = "CustomizeMenu",
			name = Engine[0xED84C33EC5F01EA]( 0xAFB88FBDAA55912 ),
			disabled = f16_local8 == TAB.VISIBILITY.DISABLED
		}
		f16_local4.CustomizeMenu = #f16_local3
	end
	local f16_local9 = TAB.GetChallengesTabState()
	if f16_local9 ~= TAB.VISIBILITY.HIDDEN then
		f16_local3[#f16_local3 + 1] = {
			menuName = "ChallengeMenu",
			name = Engine[0xED84C33EC5F01EA]( 0x93D2E0CD4F6FF64 ),
			disabled = f16_local9 == TAB.VISIBILITY.DISABLED
		}
		f16_local4.ChallengeMenu = #f16_local3
	end
	local f16_local10 = TAB.GetBarracksTabState()
	if f16_local10 ~= TAB.VISIBILITY.HIDDEN then
		f16_local3[#f16_local3 + 1] = {
			menuName = "MPBarracksMenu",
			name = Engine[0xED84C33EC5F01EA]( 0xF185C04098B9F3C ),
			disabled = f16_local10 == TAB.VISIBILITY.DISABLED
		}
		f16_local4.MPBarracksMenu = #f16_local3
	end
	local f16_local11 = TAB.GetBattlemapTabState()
	if f16_local11 ~= TAB.VISIBILITY.HIDDEN then
		f16_local3[#f16_local3 + 1] = {
			isStoreTab = true,
			menuName = "BattlePassMenu",
			isBattlePassTab = true,
			name = Engine[0xED84C33EC5F01EA]( 0x3D55227F00E2EAB ),
			disabled = f16_local11 == TAB.VISIBILITY.DISABLED
		}
		f16_local4.BattlePassMenu = #f16_local3
		f16_local2 = #f16_local3
	end
	local f16_local12 = TAB.GetStoreTabState()
	if f16_local12 ~= TAB.VISIBILITY.HIDDEN then
		f16_local3[#f16_local3 + 1] = {
			isStoreTab = true,
			menuName = "MPStoreMenu",
			name = Engine[0xED84C33EC5F01EA]( 0x9314BF295F932EC ),
			disabled = f16_local12 == TAB.VISIBILITY.DISABLED
		}
		f16_local4.MPStoreMenu = #f16_local3
	end
	local f16_local13 = Dvar[0x9E5BE3B4BBA4E0E]( 0x4307B9A7A810A42 )
	local f16_local14 = Dvar[0x22EAAB59AA27E9B]( 0xC83C7ECCCE6DBBA )
	if f16_local13 and f16_local14 < #f16_local3 + 1 and 1 < f16_local14 then
		local f16_local15 = {}
		for f16_local16 = 1, #f16_local3, 1 do
			f16_local15[f16_local16] = f16_local3[f16_local16]
			if f16_local14 == #f16_local3 then
				if f16_local16 == f16_local2 then
					f16_local3[f16_local16] = f16_local3[f16_local16 + 1]
				elseif f16_local16 == f16_local14 then
					f16_local3[f16_local16] = f16_local15[f16_local2]
				end
			elseif f16_local16 == f16_local14 then
				f16_local3[f16_local16] = f16_local3[f16_local2]
			elseif f16_local16 == f16_local2 + 1 then
				f16_local3[f16_local16] = f16_local15[f16_local16]
			elseif f16_local14 < f16_local16 then
				f16_local3[f16_local16] = f16_local15[f16_local16 - 1]
			end
			f16_local4[f16_local3[f16_local16].menuName] = f16_local16
		end
	end
	f16_arg0:addEventHandler( "store_menu_error", function ( f21_arg0, f21_arg1 )
		f16_arg0.Tabs:FocusTab( f16_arg0, 0, LUI.IsLastInputGamepad( f16_arg0 ) and FocusType.Gamepad or FocusType.MouseOver )
	end )
	local f16_local15 = {}
	for f16_local19, f16_local20 in ipairs( f16_local3 ) do
		table.insert( f16_local15, {
			id = f16_local20.menuName,
			name = f16_local20.name,
			disabled = f16_local20.disabled,
			hasDefaultFocus = f16_local19 - 1 == f16_local0.activeTabIndex,
			focusFunction = function ( f17_arg0, f17_arg1, f17_arg2, f17_arg3, f17_arg4 )
				local f17_local0 = LUI.DataSourceInGlobalModel.new( "menu.spltscreenDisplay.controllerIndex" )
				local f17_local1 = f17_local0:GetValue( f17_arg1 )
				if f16_arg0( f16_arg0, f16_arg0.menuName ) then
					f17_arg1 = f17_local1
				end
				if 1 < Engine[0x70187FE84AE61FD]() and (f16_arg0.menuName == "BattlePassMenu" or f16_arg0.menuName == "MPStoreMenu") then
					if not f16_arg0.tabsInitialized or f17_arg3 ~= FocusType.MenuFlow then
						f17_local0:SetValue( f17_arg1, f17_arg1 )
					else
						f17_arg1 = f17_local1
					end
				end
				if f16_arg0.menuName == "MPStoreMenu" and Engine[0x757E77CA15D6B8F]( f17_arg1 ) then
					f16_arg0.Tabs:SetCurrentTabIndex( f16_arg0.activeTabIndex )
					LUI.FlowManager.RequestPopupMenu( nil, "mp_no_guest_popup", false, f17_arg1, false )
				end
				local f17_local2
				if f17_arg4 then
					f17_local2 = f17_arg4
				else
					f17_local2 = f17_arg4.rebuildWidget
				end
				if f16_arg0.activeTabIndex and f17_arg2 == f16_arg0.activeTabIndex and f16_arg0.activeTabWidget and not f17_local2 then
					
				else
					
				end
				TAB.UpdateBuiltWidgetOnTabChange( f16_arg0, f16_arg0.activeTabIndex, "activeTabWidget", f17_arg2, f17_arg3, f16_arg0.menuName, {
					buildPriority = 4294967295,
					controllerIndex = f17_arg1,
					extraData = f17_arg4
				} )
				f16_arg0.activeTabIndex = f17_arg2
				if f16_arg0._backButtonHandlerSet and f17_arg2 ~= 0 then
					local f17_local3 = f16_arg0.activeTabWidget
					if f17_local3 and not f17_local3.BackButtonOverride then
						f17_local3.BackButtonOverride = function ( f20_arg0, f20_arg1 )
							local f20_local0
							if f20_arg1.qualifier == "keyboard" or f20_arg1.qualifier == "gamepad" then
								f20_local0 = false
							else
								f20_local0 = true
							end
							local f20_local1
							if f20_local0 then
								f20_local1 = FocusType.MouseOver
								if not f20_local1 then
								
								else
									f17_arg0.Tabs:FocusTab( f17_arg0, 0, f20_local1 )
									return false
								end
							end
							f20_local1 = FocusType.Gamepad
						end
						
					end
				end
				local f17_local3 = function ( f19_arg0 )
					if not f19_arg0._isMenuInitialized then
						return 
					end
					local f19_local0 = f17_arg0:GetCurrentMenu()
					f19_local0.signoutSplitscreen = f17_arg0.menuName == f17_arg0
					local f19_local0, f19_local1 = nil
					if f17_arg0.menuName == "MPBattlenetStoreMenu" then
						f19_local0 = Engine[0xED84C33EC5F01EA]( 0x938E462C2460134 )
						f19_local1 = ""
					elseif f17_arg0.menuName == "LobbyFlowWidget" then
						f19_local0 = Engine[0xED84C33EC5F01EA]( 0x7D9DC9E3291E103 )
						f19_local1 = Engine[0xED84C33EC5F01EA]( 0x46FABA13E586EDA )
					elseif f17_arg0.menuName == "TournamentLobbyFlow" then
						f19_local0 = ""
						f19_local1 = ""
					elseif f17_arg0.isStoreTab and not f17_arg0.isBattlePassTab then
						f19_local0 = Engine[0xED84C33EC5F01EA]( 0xC34BE7E6D2FBB5D )
						f19_local1 = ""
					elseif f17_arg0.menuName ~= "LoadoutManagement" and f17_arg0.menuName ~= "SoloOperatorSelect" then
						f19_local0 = Engine[0xED84C33EC5F01EA]( 0x7D9DC9E3291E103 )
						f19_local1 = ""
					end
					if f17_arg0.menuName == "BattlePassMenu" then
						f17_arg0.activeTabWidget._currentMenu = f17_arg0:GetCurrentMenu()
					elseif f17_arg0.menuName ~= "LoadoutManagement" and f17_arg0.menuName ~= "SoloOperatorSelect" then
						local f19_local2 = LUI.FlowManager.GetMainScopedData()
						f19_local2.battlepassSelectedColumn = nil
					end
					local f19_local2 = f17_arg0:getParent()
					if f19_local2 and f19_local2.LobbyStatus then
						if f19_local2.id == "MPPublicLobby" then
							if f17_arg0.activeTabWidget.UpdateParentLobbyStatus then
								f17_arg0.activeTabWidget:UpdateParentLobbyStatus()
							else
								f19_local2.LobbyStatus:SetAlpha( 1 )
							end
						elseif f19_local2.id == "TournamentLoadingScreen" or f19_local2.id == "TournamentMatchmaking" then
							if f17_arg0.menuName == "TournamentLoading" then
								f19_local2.LobbyStatus:SetAlpha( 0 )
							else
								f19_local2.LobbyStatus:SetAlpha( 1 )
							end
						end
					end
					if f17_arg0.menuName == f17_arg0 then
						Engine[0xC4146BA76D0F982]( SOUND_SETS.mpMainMenu.tabPlay )
					elseif f17_arg0.menuName == "MPWeaponMenu" or f17_arg0.menuName == "LoadoutManagement" then
						Engine[0xC4146BA76D0F982]( SOUND_SETS.mpMainMenu.tabWeapons )
					elseif f17_arg0.menuName == "MPOperatorMenu" or f17_arg0.menuName == "SoloOperatorSelect" then
						Engine[0xC4146BA76D0F982]( SOUND_SETS.mpMainMenu.tabOperators )
						if not Onboarding.Operators.WasCompleted( f17_arg0, f17_arg0 ) then
							if CONDITIONS.IsMagmaGameMode( f17_arg0 ) then
								LUI.FlowManager.RequestPopupMenu( f17_arg0, "onboardingpopup", true, f17_arg0, false, ONBOARDING_DATA.GetOnboardingWZOperatorData() )
							else
								LUI.FlowManager.RequestPopupMenu( f17_arg0, "onboardingpopup", true, f17_arg0, false, ONBOARDING_DATA.GetOnboardingOperatorData() )
							end
							Onboarding.Operators.MarkCompleted( f17_arg0, f17_arg0 )
						end
					elseif f17_arg0.menuName == "BattlePassMenu" then
						Engine[0xC4146BA76D0F982]( SOUND_SETS.mpMainMenu.tabBattlepass )
					elseif f17_arg0.menuName == "ChallengeMenu" then
						Engine[0xC4146BA76D0F982]( SOUND_SETS.mpMainMenu.tabChallenges )
					elseif f17_arg0.menuName == "MPStoreMenu" then
						Engine[0xC4146BA76D0F982]( SOUND_SETS.mpMainMenu.tabStore )
						if f17_arg0.useStandaloneStore then
							f17_arg0( f17_arg0, f17_arg0, f17_arg0 )
						end
					elseif f17_arg0.menuName == "MPBarracksMenu" then
						Engine[0xC4146BA76D0F982]( SOUND_SETS.mpMainMenu.tabBarracks )
					end
					if 1 < Engine[0x70187FE84AE61FD]() and (f17_arg0.menuName == "BattlePassMenu" or f17_arg0.menuName == "MPStoreMenu") then
						f17_arg0( f17_arg0, true, f17_arg0 )
					else
						f17_arg0( f17_arg0, false )
					end
					f17_arg0( f17_arg0, f17_arg0.menuName, true )
				end
				
				if f16_arg0.isStoreTab then
					f16_arg0.PartyWidget:SetAlpha( 0, 200 )
					ACTIONS.AnimateSequence( f16_arg0, "PlayerTextOffsetStore" )
				else
					f16_arg0.PartyWidget:SetAlpha( 1, 200 )
					ACTIONS.AnimateSequence( f16_arg0, "PlayerTextOffsetDefault" )
				end
				if not f16_arg0._isMenuInitialized then
					f16_arg0:addEventHandler( "menu_create", function ( f18_arg0, f18_arg1 )
						f18_arg0._isMenuInitialized = true
						f17_arg0( f18_arg0 )
					end )
				end
				f17_local3( f16_arg0 )
				f16_arg0:processEvent( {
					name = "focus_tab_changed",
					tabName = f16_arg0.menuName
				} )
				if f16_arg0.hideBackButtonOnFirstTab and f16_arg0.menuName == f16_arg0 then
					MenuUtils.HideBackButton( f16_arg0.MenuTitle )
				else
					MenuUtils.ShowBackButton( f16_arg0.MenuTitle, f17_arg1 )
				end
			end,
			buildSpecificTab = f16_local20.buildSpecificTab,
			isStoreTab = f16_local20.isStoreTab,
			isBattlePassTab = f16_local20.isBattlePassTab,
			hasRestrictionIcon = f16_local20.hasRestrictionIcon
		} )
	end
	f16_arg0.Tabs:SetTabs( f16_local15, f16_arg2 )
	f16_arg0._tabsData = f16_local3
	f16_arg0._tabIndexMap = f16_local4
	f16_local0.tabsInitialized = true
end

local f0_local10 = function ( f15_arg0, f15_arg1 )
	if not f15_arg1 then
		return 
	else
		local f15_local0 = LUI.FlowManager.GetScopedData( f15_arg0 )
		f15_local0.onRestoreFocusOptions = {
			tabToFocus = f15_arg1.tabToFocus,
			buttonToFocus = f15_arg1.buttonToFocus,
			bundleToFocus = f15_arg1.bundleToFocus,
			triggerButtonAction = f15_arg1.triggerButtonAction,
			openMenuFunction = f15_arg1.openMenuFunction
		}
	end
end

local f0_local11 = function ( f9_arg0, f9_arg1, f9_arg2 )
	assert( f9_arg0.MenuTitle )
	f9_arg0.SetupTabs = f0_local0
	f9_arg0.GetTabIndexByWidgetName = f0_local0
	f9_arg0.SetupOnRestoreFocusOverride = f0_local0
	f9_arg0.SetupBackButtonHandler = f0_local0
	f9_arg0.UpdateTabBreadcrumbs = f0_local0
	f9_arg0._controllerIndex = f9_arg1
	Engine[0x8CEE785C0D63D7E]( GAMEMODE_SCRIPTBUNDLE_UTILS.GetMusicState() )
	f9_arg0.Tabs:SetAlignment( LUI.Alignment.Center )
	f9_arg0.Tabs:SetTabBackers( 0x4A92B03F0597F32, 0xC02D58CAA84557F )
	f9_arg0:setPriority( -1 )
	local f9_local0 = function ( f14_arg0, f14_arg1 )
		local f14_local0 = LUI.FlowManager.GetScopedData( f9_arg0 )
		local f14_local1 = LUI.FlowManager.GetMainScopedData()
		local f14_local2 = f14_local0.onRestoreFocusOptions
		if f14_local2 then
			local f14_local3 = f14_local2.tabToFocus
			if f14_local3 then
				if f14_arg1.id ~= f9_arg0.Tabs.id then
					return 
				end
				local f14_local4 = f9_arg0( f9_arg0, f14_local3 )
				if f14_local4 then
					f9_arg0.Tabs:FocusTab( f9_arg0, f14_local4 - 1 )
					if f9_arg0.activeTabWidget.FocusButtonByName and f14_local2.buttonToFocus then
						f9_arg0.activeTabWidget:FocusButtonByName( f14_local2.buttonToFocus )
					elseif f9_arg0.activeTabWidget.FocusBundleByID and f14_local2.bundleToFocus then
						f9_arg0.activeTabWidget:FocusBundleByID( f14_local2.bundleToFocus, f14_local2.triggerButtonAction )
					end
					if f14_local2.openMenuFunction then
						f14_local2.openMenuFunction()
					end
				end
			end
			f14_local0.onRestoreFocusOptions = nil
			return true
		elseif f14_local1.tabIndexToFocus then
			f9_arg0.Tabs:FocusTab( f9_arg0, f14_local1.tabIndexToFocus )
			f14_local1.tabIndexToFocus = nil
		end
	end
	
	f9_arg0.Tabs:addEventHandler( "restore_focus", f9_local0 )
	f9_arg0:addEventHandler( "gain_focus", f9_local0 )
	local f9_local1 = Game[0x6DD1B6FF7A0A975]( f9_arg1 ) == true
	if CONDITIONS.IsMagmaGameMode() then
		local f9_local2 = LUI.FlowManager.IsInStack( "BRMainMenuStore" )
		local f9_local3 = Engine[0x8B495DC361731F7]( f9_arg1 )
		f9_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0x76E3E9F44757187 ), f9_local1 )
	elseif CONDITIONS.IsThirdGameMode( f9_arg0 ) then
		f9_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0xD9FCD2E52D6DBD6 ), f9_local1 )
	elseif Dvar[0x9E5BE3B4BBA4E0E]( 0xEEEDDD8C404C6E7 ) then
		f9_arg0.MenuTitle:SetTitle( "DMZ" )
	end
	f9_arg0:AddGamepadEventCallback( "button_left_trigger", function ( f13_arg0, f13_arg1 )
		local f13_local0 = f13_arg1.controller
		if f13_arg0.Tabs then
			local f13_local1 = f13_arg0.Tabs:GetCurrentTab()
			if f9_arg0( f13_arg0, f13_arg0._tabsData[f13_local1.index + 1].menuName ) and 1 < Engine[0x70187FE84AE61FD]() then
				local f13_local2 = LUI.DataSourceInGlobalModel.new( "menu.spltscreenDisplay.controllerIndex" )
				f13_local2:SetValue( f13_local0, Engine[0x22E32BBCD422B46]( f13_local2:GetValue( f13_local0 ) ) )
				return true
			end
		end
		return false
	end )
	local f9_local3 = function ()
		local f12_local0 = f9_arg0.Tabs:GetCurrentTab()
		local f12_local1 = f9_arg0._tabsData[f12_local0.index + 1].menuName
		local f12_local2 = LUI.DataSourceInGlobalModel.new( "menu.spltscreenDisplay.controllerIndex" )
		local f12_local3 = f12_local2:GetValue( f9_arg0 )
		if 1 < Engine[0x70187FE84AE61FD]() then
			if f12_local1 == "BattlePassMenu" or f12_local1 == "MPStoreMenu" then
				f9_arg0( f9_arg0, true, f12_local3 )
			end
		else
			if f12_local1 == "BattlePassMenu" or f12_local1 == "MPStoreMenu" then
				f9_arg0( f9_arg0, false )
				f12_local2:SetValue( f9_arg0, 0 )
			end
			if f9_arg0( f9_arg0, f12_local1 ) then
				f12_local2:SetValue( f9_arg0, 0 )
			end
		end
		f9_arg0( f9_arg0, f12_local1 )
	end
	
	local f9_local4 = function ()
		local f11_local0 = f9_arg0.Tabs:GetCurrentTab()
		f9_arg0( f9_arg0, f9_arg0._tabsData[f11_local0.index + 1].menuName )
	end
	
	local f9_local5 = LUI.DataSourceInGlobalModel.new( "alwaysLoaded.privateParty.count" )
	local f9_local6 = LUI.DataSourceInGlobalModel.new( "alwaysLoaded.activeParty.squadMembers.memberCount" )
	f9_arg0:SubscribeToModel( f9_local5:GetModel( f9_arg1 ), f9_local3, true )
	f9_arg0:SubscribeToModel( f9_local6:GetModel( f9_arg1 ), f9_local4, true )
	local f9_local7 = LUI.DataSourceInGlobalModel.new( "menu.spltscreenDisplay.controllerIndex" )
	if not f9_local7:GetValue( f9_arg1 ) then
		f9_local7:SetValue( f9_arg1, f9_arg1 )
	end
	f9_arg0.Tabs:SetSendEventOnTabChange( true )
	f9_arg0:addEventHandler( LUI.TabManager.TAB_SWITCH_EVENT, function ( f10_arg0, f10_arg1 )
		assert( f10_arg1.index )
		f9_arg0.activeTabWidget:processEvent( f10_arg1 )
		return true
	end )
	f9_arg0.MenuTitle:SetupBackButton( f9_arg1 )
end

States = {
	[0xAD14C6E7156B923] = function ( f3_arg0, f3_arg1 )
		local f3_local0 = function ( f8_arg0, f8_arg1 )
			
		end
		
		f3_arg0.PlayerText:RegisterAnimationSequence( "PlayerTextOn", {
			{
				value = 1,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		f3_arg0.PlayerTextTexture:RegisterAnimationSequence( "PlayerTextOn", {
			{
				value = 4.6672616413205735E-62,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		f3_arg0.PlayerTextBacker:RegisterAnimationSequence( "PlayerTextOn", {
			{
				value = 4.667261640415006E-62,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		local f3_local1 = function ( f7_arg0, f7_arg1 )
			f7_arg0.PlayerText:AnimateSequence( "PlayerTextOn" )
			f7_arg0.PlayerTextTexture:AnimateSequence( "PlayerTextOn" )
			f7_arg0.PlayerTextBacker:AnimateSequence( "PlayerTextOn" )
		end
		
		f3_arg0.PlayerText:RegisterAnimationSequence( "PlayerTextOff", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		f3_arg0.PlayerTextTexture:RegisterAnimationSequence( "PlayerTextOff", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		f3_arg0.PlayerTextBacker:RegisterAnimationSequence( "PlayerTextOff", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		local f3_local2 = function ( f6_arg0, f6_arg1 )
			f6_arg0.PlayerText:AnimateSequence( "PlayerTextOff" )
			f6_arg0.PlayerTextTexture:AnimateSequence( "PlayerTextOff" )
			f6_arg0.PlayerTextBacker:AnimateSequence( "PlayerTextOff" )
		end
		
		f3_arg0.PlayerText:RegisterAnimationSequence( "PlayerTextOffsetStore", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Top,
				value = _1080p * 117
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Bottom,
				value = _1080p * 141
			}
		} )
		f3_arg0.PlayerTextTexture:RegisterAnimationSequence( "PlayerTextOffsetStore", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Top,
				value = _1080p * 115
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Bottom,
				value = _1080p * 143
			}
		} )
		f3_arg0.PlayerTextBacker:RegisterAnimationSequence( "PlayerTextOffsetStore", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Top,
				value = _1080p * 115
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Bottom,
				value = _1080p * 143
			}
		} )
		local f3_local3 = function ( f5_arg0, f5_arg1 )
			f5_arg0.PlayerText:AnimateSequence( "PlayerTextOffsetStore" )
			f5_arg0.PlayerTextTexture:AnimateSequence( "PlayerTextOffsetStore" )
			f5_arg0.PlayerTextBacker:AnimateSequence( "PlayerTextOffsetStore" )
		end
		
		f3_arg0.PlayerText:RegisterAnimationSequence( "PlayerTextOffsetDefault", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Top,
				value = _1080p * 192
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Bottom,
				value = _1080p * 216
			}
		} )
		f3_arg0.PlayerTextTexture:RegisterAnimationSequence( "PlayerTextOffsetDefault", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Top,
				value = _1080p * 190
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Bottom,
				value = _1080p * 218
			}
		} )
		f3_arg0.PlayerTextBacker:RegisterAnimationSequence( "PlayerTextOffsetDefault", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Top,
				value = _1080p * 190
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Bottom,
				value = _1080p * 218
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Left,
				value = _1080p * -295
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Right,
				value = _1080p * -89
			}
		} )
		f3_arg0._sequences = {
			DefaultSequence = f3_local0,
			PlayerTextOn = f3_local1,
			PlayerTextOff = f3_local2,
			PlayerTextOffsetStore = f3_local3,
			PlayerTextOffsetDefault = function ( f4_arg0, f4_arg1 )
				f4_arg0.PlayerText:AnimateSequence( "PlayerTextOffsetDefault" )
				f4_arg0.PlayerTextTexture:AnimateSequence( "PlayerTextOffsetDefault" )
				f4_arg0.PlayerTextBacker:AnimateSequence( "PlayerTextOffsetDefault" )
			end
		}
		f3_arg0._sequenceLengths = {
			PlayerTextOn = 0,
			PlayerTextOff = 0,
			PlayerTextOffsetDefault = 0,
			PlayerTextOffsetStore = 0,
			DefaultSequence = 0
		}
	end
}
function MPTabsMenu( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "MPTabsMenu"
	self.__states = States
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local PartyWidget = nil
	
	PartyWidget = MenuBuilder.BuildRegisteredType( "SocialPartyWidget", {
		controllerIndex = f1_local1
	} )
	PartyWidget.id = "PartyWidget"
	PartyWidget:SetAlpha( 0, 0 )
	PartyWidget:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1224, _1080p * 1824, _1080p * 10, _1080p * 180 )
	self:addElement( PartyWidget )
	self.PartyWidget = PartyWidget
	
	local PlayerText = nil
	
	PlayerText = LUI.UIStyledText.new()
	PlayerText.id = "PlayerText"
	PlayerText:SetRGBFromTable( SWATCHES.BattlePass.Purchased, 0 )
	PlayerText:SetAlpha( 0, 0 )
	PlayerText:setText( Engine[0xED84C33EC5F01EA]( 0x8CAD23C58806878 ), 0 )
	PlayerText:SetFont( FONTS.GetFont( FONTS.PrimaryRegular.File ) )
	PlayerText:SetFontSize( 24 * _PT )
	PlayerText:SetMinFontSize( 18 * _PT )
	PlayerText:SetWordWrap( false )
	PlayerText:SetAlignment( LUI.Alignment.Right )
	PlayerText:SetOptOutRightToLeftAlignmentFlip( true )
	PlayerText:SetShadowRGBFromTable( SWATCHES.Reticles.White, 0 )
	PlayerText:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -296, _1080p * -99, _1080p * 192, _1080p * 216 )
	self:addElement( PlayerText )
	self.PlayerText = PlayerText
	
	local PlayerTextTexture = nil
	
	PlayerTextTexture = LUI.UIImage.new()
	PlayerTextTexture.id = "PlayerTextTexture"
	PlayerTextTexture:SetRGBFromTable( SWATCHES.BattlePass.Purchased, 0 )
	PlayerTextTexture:SetAlpha( 0, 0 )
	PlayerTextTexture:SetPixelGridEnabled( true )
	PlayerTextTexture:SetPixelGridContrast( 0.5, 0 )
	PlayerTextTexture:SetPixelGridBlockWidth( 2, 0 )
	PlayerTextTexture:SetPixelGridBlockHeight( 2, 0 )
	PlayerTextTexture:SetPixelGridGutterWidth( 1, 0 )
	PlayerTextTexture:SetPixelGridGutterHeight( 1, 0 )
	PlayerTextTexture:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -295, _1080p * -89, _1080p * 190, _1080p * 218 )
	self:addElement( PlayerTextTexture )
	self.PlayerTextTexture = PlayerTextTexture
	
	local PlayerTextBacker = nil
	
	PlayerTextBacker = LUI.UIImage.new()
	PlayerTextBacker.id = "PlayerTextBacker"
	PlayerTextBacker:SetRGBFromTable( SWATCHES.BattlePass.Purchased, 0 )
	PlayerTextBacker:SetAlpha( 0, 0 )
	PlayerTextBacker:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -295, _1080p * -89, _1080p * 190, _1080p * 218 )
	self:addElement( PlayerTextBacker )
	self.PlayerTextBacker = PlayerTextBacker
	
	local MenuTitle = nil
	
	MenuTitle = MenuBuilder.BuildRegisteredType( "MenuTitle", {
		controllerIndex = f1_local1
	} )
	MenuTitle.id = "MenuTitle"
	MenuTitle.MenuTitle:setText( "", 0 )
	MenuTitle.ModeTitle:setText( "", 0 )
	MenuTitle:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 80 )
	self:addElement( MenuTitle )
	self.MenuTitle = MenuTitle
	
	local Tabs = nil
	
	Tabs = LUI.TabManager.new( {
		spacing = 0,
		wrap = true,
		tabHeight = _1080p * 80,
		buildTab = function ()
			return MenuBuilder.BuildRegisteredType( "MenuTab", {
				controllerIndex = menu
			} )
		end,
		controllerIndex = f1_local1
	} )
	Tabs.id = "Tabs"
	Tabs:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -516, _1080p * 516, _1080p * 8, _1080p * 88 )
	self:addElement( Tabs )
	self.Tabs = Tabs
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "MPTabsMenu", MPTabsMenu )
LockTable( _M )
