-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
module( ..., package.seeall )
local f0_local0 = function ( f6_arg0, f6_arg1, f6_arg2 )
	local f6_local0, f6_local1, f6_local2, f6_local3 = f6_arg0.StockCount:getLocalRect()
	local f6_local4, f6_local5, f6_local6, f6_local7 = GetTextDimensions( f6_arg1, f6_arg0.StockCount:GetCurrentFont(), math.abs( f6_local3 - f6_local1 ) )
	local f6_local8 = f6_local6 - f6_local4
	local f6_local9 = 0
	local f6_local10 = -1 * f6_local8
	f6_arg0.StockCount:SetRight( f6_local9 )
	f6_arg0.StockCount:SetLeft( f6_local10 )
	f6_arg0.StockTest:SetRight( f6_local9 )
	f6_arg0.StockTest:SetLeft( f6_local10 )
	local f6_local11 = f6_local10 - 10
	local f6_local12 = f6_local10
	f6_arg0.Divider:SetRight( f6_local12 )
	f6_arg0.Divider:SetLeft( f6_local11 )
	f6_arg0.DividerTest:SetRight( f6_local12 )
	f6_arg0.DividerTest:SetLeft( f6_local11 )
	local f6_local13, f6_local14, f6_local15, f6_local16 = f6_arg0.ClipCount:getLocalRect()
	local f6_local17, f6_local18, f6_local19, f6_local20 = GetTextDimensions( f6_arg2, f6_arg0.ClipCount:GetCurrentFont(), math.abs( f6_local16 - f6_local14 ) )
	local f6_local21 = -1 * (f6_local19 - f6_local17) / 2
	local f6_local22 = f6_local19 - f6_local17
	f6_arg0.ClipCount:SetRight( f6_local11 )
	f6_arg0.ClipCount:SetLeft( f6_local11 - f6_local22 )
	f6_arg0.ClipTest:SetRight( f6_local11 )
	f6_arg0.ClipTest:SetLeft( f6_local11 - f6_local22 )
end

local f0_local1 = function ( f4_arg0, f4_arg1, f4_arg2 )
	local f4_local0 = math.ceil( 8 * 0.33 )
	local f4_local1 = "ui_veh_occupant_0"
	local f4_local2 = "ui_veh_occupant_1"
	local f4_local3 = "ui_veh_ammo_0"
	local f4_local4 = LUI.DataSourceFromOmnvar.new( f4_local2 )
	local f4_local5 = LUI.DataSourceFromOmnvar.new( f4_local1 )
	local f4_local6 = LUI.DataSourceFromOmnvar.new( f4_local3 )
	local f4_local7 = "âˆž"
	local f4_local8 = -1
	local f4_local9 = function ()
		local f5_local0 = f4_arg0:GetValue( f4_arg0 )
		local f5_local1 = f4_arg0:GetValue( f4_arg0 )
		local f5_local2 = LUI.DataSourceFromOmnvar.new( f4_arg0 )
		f5_local2 = f5_local2:GetValue( f4_arg0 )
		if f4_arg0 ~= -1 and f5_local2 < f4_arg0 - 1 then
			f5_local2 = f4_arg0
		end
		f4_arg0 = f5_local2
		if 10 <= f5_local2 then
			f4_arg0.ClipCount:setText( "0" .. f5_local2 )
		elseif f5_local2 < 10 then
			f4_arg0.ClipCount:setText( "00" .. f5_local2 )
		else
			f4_arg0.ClipCount:setText( f5_local2 )
		end
		if f5_local2 <= f4_arg0 then
			f4_arg0.ClipCount:SetRGBFromTable( SWATCHES.HUD.warning )
		else
			f4_arg0.ClipCount:SetRGBFromTable( SWATCHES.HUD.normal )
		end
		if f5_local2 == 0 and not f4_arg0.reloading then
			f4_arg0.reloading = true
			ACTIONS.AnimateSequence( f4_arg0, "Reloading" )
		elseif f4_arg0.reloading then
			f4_arg0.reloading = false
			ACTIONS.AnimateSequence( f4_arg0, "DefaultSequence" )
		end
		if Engine.EAAHGICFBD() then
			if f5_local0 == Game.DBACJGFHDD( f4_arg0 ) then
				f4_arg0.WeaponName:setText( ToUpperCase( Engine.CBBHFCGDIC( "HUD/BRADLEY_DRIVER_LABEL" ) ) )
				f4_arg0.ClipCount:SetAlpha( 1 )
			elseif f5_local1 == Game.DBACJGFHDD( f4_arg0 ) then
				f4_arg0.WeaponName:setText( ToUpperCase( Engine.CBBHFCGDIC( "HUD/BRADLEY_GUNNER_LABEL" ) ) )
				f4_arg0.ClipCount:SetAlpha( 0 )
			end
		else
			f4_arg0.WeaponName:setText( ToUpperCase( Engine.CBBHFCGDIC( "HUD/BRADLEY_DRIVER_LABEL" ) ) )
			local f5_local3 = LUI.DataSourceFromOmnvar.new( "ui_veh_ammo_0" )
			f5_local3 = f5_local3:GetValue( f4_arg0 )
			if not f5_local3 then
				f5_local3 = ""
			end
			f4_arg0.ClipCount:setText( f5_local3, 0 )
			f4_arg0.ClipCount:SetAlpha( 0 )
		end
	end
	
	f4_arg0:SubscribeToModel( f4_local5:GetModel( f4_arg1 ), f4_local9 )
	f4_arg0:SubscribeToModel( f4_local4:GetModel( f4_arg1 ), f4_local9 )
	f4_arg0:SubscribeToModel( f4_local6:GetModel( f4_arg1 ), f4_local9 )
	f4_local9()
end

function BradleyAmmoCounter( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 248 * _1080p, 0, 68 * _1080p )
	self.id = "BradleyAmmoCounter"
	self._animationSets = {}
	self._sequences = {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local ClipCount = nil
	
	ClipCount = LUI.UIStyledText.new()
	ClipCount.id = "ClipCount"
	ClipCount:SetRGBFromTable( SWATCHES.HUD.HUDMain, 0 )
	ClipCount:setText( "100", 0 )
	ClipCount:SetFont( FONTS.GetFont( FONTS.MainBold.File ) )
	ClipCount:SetAlignment( LUI.Alignment.Left )
	ClipCount:SetAnchorsAndPosition( 0, 0, 0, 1, _1080p * 15, _1080p * -5, _1080p * 16, _1080p * 52 )
	self:addElement( ClipCount )
	self.ClipCount = ClipCount
	
	local WeaponName = nil
	
	WeaponName = LUI.UIStyledText.new()
	WeaponName.id = "WeaponName"
	WeaponName:SetAlpha( 0, 0 )
	WeaponName:setText( "Cannon", 0 )
	WeaponName:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	WeaponName:SetAlignment( LUI.Alignment.Right )
	WeaponName:SetShadowMinDistance( -0.5, 0 )
	WeaponName:SetShadowMaxDistance( 0.5, 0 )
	WeaponName:SetShadowRGBFromTable( SWATCHES.HUD.TextGlow, 0 )
	WeaponName:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -112, _1080p * -90 )
	self:addElement( WeaponName )
	self.WeaponName = WeaponName
	
	local CannonIcon = nil
	
	CannonIcon = LUI.UIImage.new()
	CannonIcon.id = "CannonIcon"
	CannonIcon:setImage( RegisterMaterial( "overlay_tank_cannon_icon" ), 0 )
	CannonIcon:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 117, _1080p * 248, _1080p * -30, _1080p * 100 )
	self:addElement( CannonIcon )
	self.CannonIcon = CannonIcon
	
	local ReloadText = nil
	
	ReloadText = LUI.UIStyledText.new()
	ReloadText.id = "ReloadText"
	ReloadText:SetRGBFromTable( SWATCHES.HUD.warning, 0 )
	ReloadText:SetAlpha( 0, 0 )
	ReloadText:setText( Engine.CBBHFCGDIC( "HUD/BRADLEY_AMMO_EMPTY" ), 0 )
	ReloadText:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	ReloadText:SetAlignment( LUI.Alignment.Right )
	ReloadText:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, _1080p * -24, _1080p * -2 )
	self:addElement( ReloadText )
	self.ReloadText = ReloadText
	
	WeaponName:RegisterAnimationSequence( "DefaultSequence", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 14
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 14
		}
	} )
	ReloadText:RegisterAnimationSequence( "DefaultSequence", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.DefaultSequence = function ()
		menu:AnimateSequence( "DefaultSequence" )
		menu:AnimateSequence( "DefaultSequence" )
	end
	
	ReloadText:RegisterAnimationSequence( "Reloading", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.Reloading = function ()
		menu:AnimateSequence( "Reloading" )
	end
	
	f0_local0( self, f1_local1, controller )
	ACTIONS.AnimateSequence( self, "DefaultSequence" )
	return self
end

MenuBuilder.registerType( "BradleyAmmoCounter", BradleyAmmoCounter )
LockTable( _M )
