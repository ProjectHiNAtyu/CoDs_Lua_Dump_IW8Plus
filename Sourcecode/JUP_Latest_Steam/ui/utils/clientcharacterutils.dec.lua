-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:02
CLIENTCHARACTER = CLIENTCHARACTER or {}
CLIENTCHARACTER.GetCharacterDataSources = function ( f10_arg0, f10_arg1, f10_arg2 )
	local f10_local0 = LUI.DataSourceFromList.new( LUI.DataSourceInGlobalModel.new( f10_arg2 .. ".count" ) )
	f10_local0.MakeDataSourceAtIndex = Lobby.GetLobbyMemberDataSourceAtIndex( f10_arg2 )
	return f10_local0:GetDataSourceAtIndex( f10_arg1, f10_arg0 )
end

CLIENTCHARACTER.GetDataSourcesOfTeam = function ( f9_arg0, f9_arg1, f9_arg2, f9_arg3 )
	local f9_local0 = {}
	local f9_local1 = LUI.DataSourceInGlobalModel.new( f9_arg2 .. ".count" )
	local f9_local2 = LUI.DataSourceFromList.new( f9_local1 )
	f9_local2.MakeDataSourceAtIndex = Lobby.GetLobbyMemberDataSourceAtIndex( f9_arg2 )
	local f9_local3 = math.min( f9_arg3, f9_local1:GetValue( f9_arg0 ) or 0 )
	for f9_local4 = 0, f9_local3, 1 do
		local f9_local7 = f9_local2:GetDataSourceAtIndex( f9_local4, f9_arg0 )
		if f9_local7.team:GetValue( f9_arg0 ) == f9_arg1 then
			table.insert( f9_local0, f9_local7 )
		end
	end
	return f9_local0
end

CLIENTCHARACTER.GetLocalPlayerCharacterIndex = function ( f8_arg0, f8_arg1 )
	local f8_local0 = LUI.DataSourceInGlobalModel.new( f8_arg1 .. ".localPlayerModelIndex" )
	return f8_local0:GetValue( f8_arg0 )
end

CLIENTCHARACTER.InvalidatePlayerCustomizationVersion = function ( f6_arg0 )
	local f6_local0 = function ( f7_arg0 )
		local f7_local0 = LUI.DataSourceInGlobalModel.new( f7_arg0 .. "." .. CLIENTCHARACTER.GetLocalPlayerCharacterIndex( f6_arg0, f7_arg0 ) .. ".clientCharacterCustomizationVersion" )
		f7_local0:SetValue( f6_arg0, -1 )
	end
	
	f6_local0( Lobby.AllMembersPath )
	f6_local0( Lobby.SquadMembersPath )
	if CONDITIONS.IsMagmaGameMode() and IsPrivateMatch() then
		local f6_local1 = LUI.DataSourceInGlobalModel.new( Lobby.BRPrivateLobbySquadMembersPath .. ".localSquadIndex" )
		f6_local1 = f6_local1:GetValue( f6_arg0 )
		if f6_local1 < Lobby.MaxSquadsPerTeam then
			f6_local0( Lobby.BRPrivateLobbySquadMembersPath .. "." .. f6_local1 )
		end
	end
end

CLIENTCHARACTER.GetSuperFactionIndex = function ( f5_arg0, f5_arg1, f5_arg2 )
	local f5_local0 = f5_arg1.selectedOperatorIndex:GetValue( f5_arg0 )
	if f5_arg2 then
		local f5_local1 = f5_arg1.team:GetValue( f5_arg0 )
		if f5_local1 == Teams.team2 then
			f5_local0 = OPERATOR.SuperFaction.WEST
		elseif f5_local1 == Teams.team1 then
			f5_local0 = OPERATOR.SuperFaction.EAST
		end
	end
	return f5_local0
end

CLIENTCHARACTER.GetData = function ( f4_arg0, f4_arg1, f4_arg2, f4_arg3, f4_arg4 )
	local f4_local0 = f4_arg2
	local f4_local1 = {
		isMyPlayer = f4_local0.isMyPlayer:GetValue( f4_arg0 )
	}
	local f4_local2 = Lobby.GetPlayerCardDataForPartyMember( f4_arg0, f4_local0 )
	if not f4_arg4 then
		f4_arg4 = CLIENTCHARACTER.GetSuperFactionIndex( f4_arg0, f4_local0, f4_arg3 )
	end
	if IsPrivateMatch() and Lobby[0x5F08AE99089E550]( f4_local0.memberIndex:GetValue( f4_arg0 ) ) then
		if f4_arg4 == OPERATOR.SuperFaction.WEST then
			f4_local1.headModel = OPERATOR[0x43F2E00C1D78E65]( OPERATOR.SuperFaction.WEST )
			f4_local1.bodyModel = OPERATOR[0x9CCDD29E2406B27]( OPERATOR.SuperFaction.WEST )
		else
			f4_local1.headModel = OPERATOR[0x43F2E00C1D78E65]( OPERATOR.SuperFaction.EAST )
			f4_local1.bodyModel = OPERATOR[0x9CCDD29E2406B27]( OPERATOR.SuperFaction.EAST )
		end
	else
		f4_local1.bodyModel, f4_local1.headModel = Lobby.GetModelDetailsFromPlayerCard( f4_local2, f4_arg4, f4_arg0, f4_local1.isMyPlayer )
	end
	if CoD.IsDMZMatch() and f4_local1.isMyPlayer and DMZ.IsInstanceInventoryEnabled() then
		local f4_local3 = DMZ.GetEquippedInstanceWeaponTable( WEAPON.PrimarySlot )
		f4_local1.primaryWeaponModel = WEAPON.GetWeaponModelName( f4_local3.weapon, f4_local3, {
			includeStickers = true,
			includeCamos = true,
			includeAttachments = true
		} )
		local f4_local4 = DMZ.GetEquippedInstanceWeaponTable( WEAPON.SecondarySlot )
		f4_local1.secondaryWeaponModel = WEAPON.GetWeaponModelName( f4_local4.weapon, f4_local4, {
			includeStickers = true,
			includeCamos = true,
			includeAttachments = true
		} )
	else
		local f4_local3, f4_local4 = Lobby.GetWeaponLoadoutDetailsFromPlayerCard( f4_local2, 1, f4_arg0 )
		f4_local1.primaryRef = f4_local4
		local f4_local5, f4_local6 = Lobby.GetWeaponLoadoutDetailsFromPlayerCard( f4_local2, 2, f4_arg0 )
		f4_local1.secondaryRef = f4_local6
		f4_local1.primaryWeaponModel, f4_local1.secondaryWeaponModel = Lobby.TrySwapWeapons( f4_local3, f4_local5 )
	end
	f4_local1.petRef, f4_local1.petAnimId = Lobby.GetPetFromPlayerCard( f4_local2, f4_arg4 )
	if f4_local1.petRef then
		f4_local1.petModel = OPERATOR.GetPetModel( f4_local1.petRef )
	end
	f4_local1.xuid = f4_local0.xuid:GetValue( f4_arg0 )
	return f4_local1
end

CLIENTCHARACTER.GetLocalPlayerData = function ( f3_arg0, f3_arg1 )
	local f3_local0 = OPERATOR.GetLocalPlayerCharacterData( f3_arg0, f3_arg1 )
	f3_local0.isMyPlayer = true
	local f3_local1 = OPERATOR.GetPetForEquippedOperator
	local f3_local2 = f3_arg0
	local f3_local3
	if not f3_arg1 then
		f3_local3 = f3_arg1
	else
		f3_local3 = OPERATOR.GetSelectedOperatorIndex( f3_arg0 )
	end
	f3_local0.petRef = f3_local1( f3_local2, f3_local3 )
	f3_local0.petModel = OPERATOR.GetPetModel( f3_local0.petRef )
	f3_local0.xuid = Engine[0x29DFACECF20DE0E]( f3_arg0 )
	return f3_local0
end

CLIENTCHARACTER.BuildContainerAndWidgets = function ( f2_arg0, f2_arg1, f2_arg2 )
	local f2_local0 = {
		menu = f2_arg0,
		controllerIndex = f2_arg1
	}
	local f2_local1 = f2_arg2.dataSourcePath
	if not f2_local1 then
		f2_local1 = Lobby.AllMembersPath
	end
	f2_local0.dataSourcePath = f2_local1
	f2_local1 = f2_arg2.maxCharacterNum
	if not f2_local1 then
		f2_local1 = FrontEndScene.MaxLobbyCharacters
	end
	f2_local0.maxCharacterNum = f2_local1
	f2_local0.teamToDisplay = f2_arg2.teamToDisplay
	f2_local0.brPrivateMatchSquads = f2_arg2.brPrivateMatchSquads
	f2_local0.forceSuperfactionBasedOnTeam = f2_arg2.forceSuperfactionBasedOnTeam or false
	f2_local0.showDetailWidget = f2_arg2.showDetailWidget or false
	f2_local0.playIdleAnimations = f2_arg2.playIdleAnimations and f2_arg2.playIdleAnimations or not Engine[0xCBCF315DE9B8AC6]()
	f2_local0.playIntroAnimations = f2_arg2.playIntroAnimations or false
	f2_local0.waitForFastFileGameWorkComplete = f2_arg2.waitForFastFileGameWorkComplete or false
	f2_local0.streamModelsForAllSuperfactions = f2_arg2.streamModelsForAllSuperfactions or false
	if not f2_arg0.clientCharacterContainer then
		f2_local1 = MenuBuilder.BuildRegisteredType( "ClientCharacterContainer", f2_local0 )
		f2_local1.id = "ClientCharacterContainer"
		f2_arg0:addElement( f2_local1 )
		f2_arg0.clientCharacterContainer = f2_local1
	end
	return f2_arg0.clientCharacterContainer
end

CLIENTCHARACTER.HidePets = function ( f1_arg0 )
	for f1_local0 = 1, #f1_arg0, 1 do
		FrontEndScene.SetCharacterVisible( f1_arg0[f1_local0], false, true )
	end
end

