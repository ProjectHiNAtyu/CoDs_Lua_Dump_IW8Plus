-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
module( ..., package.seeall )
local f0_local0 = {
	Random = 2,
	PickUp = 3,
	ReversProgression = 5,
	Progression = 4,
	Normal = 1
}
local f0_local1 = function ( f8_arg0, f8_arg1 )
	local f8_local0 = {
		{
			widget = f8_arg0.ArenaLoadout.PrimaryEquipment,
			dataSource = DataSources.inGame.player.primaryEquipment
		},
		{
			widget = f8_arg0.ArenaLoadout.SecondaryEquipment,
			dataSource = DataSources.inGame.player.secondaryEquipment
		}
	}
	local f8_local1 = function ( f13_arg0 )
		if f8_arg0[f13_arg0].name ~= nil and f8_arg0[f13_arg0].icon ~= nil then
			f8_arg0[f13_arg0].widget:SetupEquipment( {
				equipmentName = f8_arg0[f13_arg0].name,
				equipmentIcon = f8_arg0[f13_arg0].icon
			} )
		end
	end
	
	local f8_local2 = function ( f11_arg0 )
		return function ()
			f11_arg0[f11_arg0].name = f11_arg0[f11_arg0].dataSource.name:GetValue( f11_arg0 )
			f11_arg0( f11_arg0 )
		end
		
	end
	
	local f8_local3 = function ( f9_arg0 )
		return function ()
			f9_arg0[f9_arg0].icon = f9_arg0[f9_arg0].dataSource.icon:GetValue( f9_arg0 )
			f9_arg0( f9_arg0 )
		end
		
	end
	
	for f8_local4 = 1, #f8_local0, 1 do
		f8_arg0:SubscribeToModel( f8_local0[f8_local4].dataSource.name:GetModel( f8_arg1 ), f8_local2( f8_local4 ) )
		f8_arg0:SubscribeToModel( f8_local0[f8_local4].dataSource.icon:GetModel( f8_arg1 ), f8_local3( f8_local4 ) )
	end
end

local f0_local2 = function ( f6_arg0, f6_arg1, f6_arg2 )
	assert( f6_arg0.ArenaLoadout )
	f6_arg0:SubscribeToModel( DataSources.inGame.HUD.loadoutNotify:GetModel( f6_arg1 ), function ()
		local f7_local0 = LUI.DataSourceFromOmnvar.new( "ui_current_round" )
		f7_local0 = f7_local0:GetValue( f6_arg0 )
		local f7_local1 = DataSources.inGame.MP.match.countdownTime:GetValue( f6_arg0 )
		local f7_local2 = false
		if f7_local1 ~= nil and f7_local1 ~= -1 then
			if f7_local0 == 1 then
				if 0 < f7_local1 then
					f7_local2 = true
				end
			else
				f7_local2 = true
			end
		end
		if f7_local2 == true then
			local f7_local3 = Game.BIGIBEDBJI( f6_arg0 )
			if DYN_ATTACHMENT.IsDynamicAttachmentIconsEnabled() and f7_local3 then
				if f7_local3.primaryWeaponName and f7_local3.primaryWeaponRef and WEAPON.GetDynamicWeaponEnableValue( f7_local3.primaryWeaponRef ) then
					local f7_local4 = Game.CGCEDCJCEE( f6_arg0, true )
					DYN_ATTACHMENT.SetupWeaponAttachmentStreamer( f6_arg0.ArenaLoadout, DYN_ATTACHMENT.GetDynamicAttachmentsTableByRef( f7_local4[1] ), true )
				end
				if f7_local3.secondaryWeaponName and f7_local3.secondaryWeaponName ~= "Combat Knife" and f7_local3.secondaryWeaponRef and WEAPON.GetDynamicWeaponEnableValue( f7_local3.secondaryWeaponRef ) then
					local f7_local4 = Game.CGCEDCJCEE( f6_arg0, true )
					DYN_ATTACHMENT.SetupWeaponAttachmentStreamer( f6_arg0.ArenaLoadout, DYN_ATTACHMENT.GetDynamicAttachmentsTableByRef( f7_local4[2] ), true )
				end
			end
			local f7_local4 = Game.CGCEDCJCEE( f6_arg0 )
			local f7_local5 = f7_local4[1]
			local f7_local6 = f7_local4[2]
			local f7_local7 = DataSources.inGame.HUD.arenaLoadoutType:GetValue( f6_arg0 )
			local f7_local8 = Game.BFEEGCHICA( f6_arg0, "ui_arena_en_primary" )
			local f7_local9
			if f7_local5 then
				f7_local9 = f7_local5
			else
				f7_local9 = f7_local5[1] ~= nil
			end
			local f7_local10
			if f7_local6 then
				f7_local10 = f7_local6
			else
				f7_local10 = f7_local6[1] ~= nil
			end
			if f7_local9 then
				f6_arg0.ArenaLoadout.PrimaryWeapon:UpdateAttachments( f7_local5 )
			end
			if f7_local10 then
				f6_arg0.ArenaLoadout.SecondaryWeapon:UpdateAttachments( f7_local6 )
			end
			if f7_local3 then
				if f7_local7 == f6_arg0.PickUp then
					f6_arg0.ArenaLoadout.SecondaryWeapon.Name:SetAlpha( 0, 0 )
					f6_arg0.ArenaLoadout.SecondaryWeapon.DynamicAttachmentIcon:SetAlpha( 0, 0 )
				end
				if f7_local3.primaryWeaponIcon and f7_local3.primaryWeaponName then
					local f7_local11 = Game.CGCEDCJCEE( f6_arg0, true )
					local f7_local12 = nil
					if f7_local3.primaryWeaponFullName and 0 < #f7_local3.primaryWeaponFullName then
						f7_local12 = DYN_ATTACHMENT.GetDynamicAttachmentsTable( f7_local3.primaryWeaponFullName )
					else
						f7_local12 = DYN_ATTACHMENT.GetDynamicAttachmentsTableByRef( f7_local11[1] )
					end
					f6_arg0.ArenaLoadout.PrimaryWeapon:UpdateWeaponInfo( f6_arg0, {
						slot = "primary",
						displayAttachmentRefTable = DYN_ATTACHMENT.GetDisplayedAttachmentRefTable( f7_local11[1] ),
						weaponIcon = f7_local3.primaryWeaponIcon,
						weaponName = f7_local3.primaryWeaponName,
						weaponRef = f7_local3.primaryWeaponRef
					}, f7_local12 )
				end
				if f7_local3.secondaryWeaponIcon and f7_local3.secondaryWeaponName and f7_local3.secondaryWeaponName ~= "Combat Knife" and not Dvar.CFHDGABACF( "scr_arena_knivesout" ) then
					local f7_local12 = Game.CGCEDCJCEE( f6_arg0, true )
					local f7_local13 = nil
					if f7_local3.secondaryWeaponFullName and 0 < #f7_local3.secondaryWeaponFullName then
						f7_local13 = DYN_ATTACHMENT.GetDynamicAttachmentsTable( f7_local3.secondaryWeaponFullName )
					else
						f7_local13 = DYN_ATTACHMENT.GetDynamicAttachmentsTableByRef( f7_local12[2] )
					end
					f6_arg0.ArenaLoadout.SecondaryWeapon:UpdateWeaponInfo( f6_arg0, {
						slot = "secondary",
						displayAttachmentRefTable = DYN_ATTACHMENT.GetDisplayedAttachmentRefTable( f7_local12[2] ),
						weaponIcon = f7_local3.secondaryWeaponIcon,
						weaponName = f7_local3.secondaryWeaponName,
						weaponRef = f7_local3.secondaryWeaponRef
					}, f7_local13 )
					ACTIONS.AnimateSequence( f6_arg0.ArenaLoadout, "PrimaryAndSecondary" )
				else
					f6_arg0.ArenaLoadout.SecondaryWeapon.Name:SetAlpha( 0, 0 )
					f6_arg0.ArenaLoadout.SecondaryWeapon.DynamicAttachmentIcon:SetAlpha( 0, 0 )
					ACTIONS.AnimateSequence( f6_arg0.ArenaLoadout, "PrimaryOnly" )
				end
				if DataSources.inGame.HUD.arena.loadout.primaryWeapon:GetValue( f6_arg0 ) ~= f7_local3.primaryWeaponIcon then
					DataSources.inGame.HUD.arena.loadout.primaryWeapon:SetValue( f6_arg0, f7_local3.primaryWeaponIcon )
					ACTIONS.AnimateSequence( f6_arg0, "NewLoadout" )
				end
				if CONDITIONS.IsSplitscreen( f6_arg0 ) then
					ACTIONS.AnimateSequence( f6_arg0.ArenaLoadout, "Splitscreen" )
				end
				ACTIONS.AnimateSequence( f6_arg0, "Show" )
			end
			if f7_local8 ~= -1 then
				ACTIONS.AnimateSequence( f6_arg0, "ShowEnemyLoadout" )
			end
		end
	end )
	f0_local0( f6_arg0, f6_arg1 )
end

function ArenaLoadoutContainer( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "ArenaLoadoutContainer"
	self._animationSets = {}
	self._sequences = {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local Flash = nil
	
	Flash = LUI.UIImage.new()
	Flash.id = "Flash"
	Flash:SetRGBFromTable( SWATCHES.Arena.NewSecondary, 0 )
	Flash:SetPixelGridEnabled( true )
	Flash:SetPixelGridContrast( 0.5, 0 )
	Flash:SetPixelGridBlockWidth( 2, 0 )
	Flash:SetPixelGridBlockHeight( 2, 0 )
	Flash:SetPixelGridGutterWidth( 1, 0 )
	Flash:SetPixelGridGutterHeight( 1, 0 )
	Flash:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, 0, 0, _1080p * -33, _1080p * 1 )
	self:addElement( Flash )
	self.Flash = Flash
	
	local NewLoadoutMessage = nil
	
	NewLoadoutMessage = MenuBuilder.BuildRegisteredType( "ArenaNewLoadoutMessage", {
		controllerIndex = f1_local1
	} )
	NewLoadoutMessage.id = "NewLoadoutMessage"
	NewLoadoutMessage:SetAlpha( 0, 0 )
	NewLoadoutMessage:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 100, _1080p * 500, _1080p * 100, _1080p * 130 )
	self:addElement( NewLoadoutMessage )
	self.NewLoadoutMessage = NewLoadoutMessage
	
	local ArenaLoadoutEnemy = nil
	
	ArenaLoadoutEnemy = MenuBuilder.BuildRegisteredType( "ArenaLoadoutEnemy", {
		controllerIndex = f1_local1
	} )
	ArenaLoadoutEnemy.id = "ArenaLoadoutEnemy"
	ArenaLoadoutEnemy:SetAlpha( 0, 0 )
	ArenaLoadoutEnemy:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -500, _1080p * -100, _1080p * 150, _1080p * 950 )
	self:addElement( ArenaLoadoutEnemy )
	self.ArenaLoadoutEnemy = ArenaLoadoutEnemy
	
	local ArenaLoadout = nil
	
	ArenaLoadout = MenuBuilder.BuildRegisteredType( "ArenaLoadout", {
		controllerIndex = f1_local1
	} )
	ArenaLoadout.id = "ArenaLoadout"
	ArenaLoadout:SetAlpha( 0, 0 )
	ArenaLoadout:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 100, _1080p * 500, _1080p * 150, _1080p * 950 )
	self:addElement( ArenaLoadout )
	self.ArenaLoadout = ArenaLoadout
	
	NewLoadoutMessage:RegisterAnimationSequence( "DefaultSequence", {} )
	ArenaLoadoutEnemy:RegisterAnimationSequence( "DefaultSequence", {} )
	ArenaLoadout:RegisterAnimationSequence( "DefaultSequence", {} )
	self._sequences.DefaultSequence = function ()
		menu:AnimateSequence( "DefaultSequence" )
		menu:AnimateSequence( "DefaultSequence" )
		menu:AnimateSequence( "DefaultSequence" )
	end
	
	ArenaLoadout:RegisterAnimationSequence( "Show", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 436
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 836
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 140
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 940
		},
		{
			value = 1,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.inQuadratic
		},
		{
			duration = 200,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 100,
			easing = LUI.EASING.inQuadratic
		},
		{
			duration = 200,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 500,
			easing = LUI.EASING.inQuadratic
		},
		{
			duration = 4800,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 100
		},
		{
			duration = 4800,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 500
		},
		{
			value = 1,
			duration = 4800,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = 1000,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.outQuadratic
		},
		{
			duration = 1000,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 90,
			easing = LUI.EASING.outQuadratic
		},
		{
			duration = 1000,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 490,
			easing = LUI.EASING.outQuadratic
		}
	} )
	self._sequences.Show = function ()
		menu:AnimateSequence( "Show" )
	end
	
	ArenaLoadoutEnemy:RegisterAnimationSequence( "ShowEnemyLoadout", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -490
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -90
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 200,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -500
		},
		{
			duration = 200,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -100
		},
		{
			value = 1,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 8.029892509424649E+283,
			duration = 4800,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 4800,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -500
		},
		{
			duration = 4800,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -100
		},
		{
			value = 0,
			duration = 1000,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 1000,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -490
		},
		{
			duration = 1000,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -90
		}
	} )
	self._sequences.ShowEnemyLoadout = function ()
		menu:AnimateSequence( "ShowEnemyLoadout" )
	end
	
	Flash:RegisterAnimationSequence( "NewLoadout", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 864
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -980
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 860
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * -950
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 250,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 250,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -860
		},
		{
			duration = 400,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 860,
			easing = LUI.EASING.inOutCubic
		},
		{
			duration = 150,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -860,
			easing = LUI.EASING.inOutCubic
		},
		{
			value = 0,
			duration = 250,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = -28,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -860
		},
		{
			duration = -28,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -860
		}
	} )
	NewLoadoutMessage:RegisterAnimationSequence( "NewLoadout", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 90
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 490
		},
		{
			value = 1,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.inQuadratic
		},
		{
			duration = 200,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 100,
			easing = LUI.EASING.inQuadratic
		},
		{
			duration = 200,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 500,
			easing = LUI.EASING.inQuadratic
		},
		{
			value = 1,
			duration = 4790,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 4790,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 500
		},
		{
			duration = 4790,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 100
		},
		{
			value = 0,
			duration = 1010,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.outQuadratic
		},
		{
			duration = 1010,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 90,
			easing = LUI.EASING.outQuadratic
		},
		{
			duration = 1010,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 490,
			easing = LUI.EASING.outQuadratic
		}
	} )
	self._sequences.NewLoadout = function ()
		menu:AnimateSequence( "NewLoadout" )
		menu:AnimateSequence( "NewLoadout" )
	end
	
	f0_local0( self, f1_local1, controller )
	ACTIONS.AnimateSequence( self, "DefaultSequence" )
	return self
end

MenuBuilder.registerType( "ArenaLoadoutContainer", ArenaLoadoutContainer )
LockTable( _M )
