-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
LUI.CodcasterLayer = LUI.Class( LUI.UIElement )
LUI.CodcasterLayer.init = function ( f11_arg0, f11_arg1 )
	LUI.CodcasterLayer.super.init( f11_arg0 )
	f11_arg0.id = "CodcasterLayer"
	f11_arg0._controllerIndex = f11_arg1
	f11_arg0:registerEventHandler( "esports_codcaster_preset_saved", function ( element, event )
		element:dispatchEventToRoot( {
			name = "send_toast_notification",
			immediate = true,
			options = {
				iconScale = 4.667263495923649E-62,
				displayTime = 3000,
				icon = "cac_equip_fill",
				iconColor = SWATCHES.genericMenu.title,
				header = Engine[0xED84C33EC5F01EA]( "CODCASTER/FREECAM_PRESET_TOAST_HEADER" ),
				description = Engine[0xED84C33EC5F01EA]( "CODCASTER/FREECAM_PRESET_TOAST" ),
				controllerIndex = element._controllerIndex,
				type = LUI.ToastManager.NotificationType.CodcasterPreset
			}
		} )
	end )
end

LUI.CodcasterLayer.ShouldBeVisible = function ( f10_arg0 )
	local f10_local0 = Game[0xA988866C889EAAD]()
	if f10_local0 then
		f10_local0 = IsCodcaster()
	end
	return f10_local0
end

LUI.CodcasterLayer.InitLayer = function ( f6_arg0 )
	Engine[0x20F70AE94873E0B]( "LUI.CodcasterLayer.InitLayer" )
	local f6_local0 = f6_arg0._controllerIndex
	f6_arg0:SubscribeToModel( DataSources.inGame.MP.codcaster.selectedClientNum:GetModel( f6_local0 ), function ( f9_arg0 )
		MLG[0xFB9724B13CB2AF]( DataModel[0x614D394F6F9A18D]( f9_arg0 ) )
	end )
	DisableMousePointer.RoundEndButtons = true
	if not MLG[0x9894ED459E76619]() then
		f6_arg0:SubscribeToModel( DataSources.inGame.MP.match.postGameState:GetModel( f6_local0 ), function ( f8_arg0 )
			if DataModel[0x614D394F6F9A18D]( f8_arg0 ) == PostGameState.SCOREBOARD then
				CODCASTER.SendAnalyticsDLogEvent( f6_arg0, CODCASTER.ANALYTICS_EVENT_ID.MATCH_END )
				CODCASTER.SendAnalyticsDLogEvent( f6_arg0, CODCASTER.ANALYTICS_EVENT_ID.OPTIONS )
				CODCASTER.SendAnalyticsDLogEvent( f6_arg0, CODCASTER.ANALYTICS_EVENT_ID.KEYBINDS )
			end
		end )
		if CODCASTER.IsFirstRound( f6_local0 ) then
			local f6_local1 = DataSources.inGame.MP.match.countdownTime:GetModel( f6_local0 )
			f6_arg0:SubscribeToModel( f6_local1, PackedFunctionWrapper( {
				element = f6_arg0,
				controllerIndex = f6_local0,
				dataSource = f6_local1
			}, function ( f7_arg0, f7_arg1 )
				if DataModel[0x614D394F6F9A18D]( f7_arg1 ) == 0 then
					CODCASTER.SendAnalyticsDLogEvent( f7_arg0.controllerIndex, CODCASTER.ANALYTICS_EVENT_ID.MATCH_START )
					local f7_local0 = f7_arg0.element
					local f7_local1 = f7_arg0.dataSource
					if f7_local0 and f7_local1 then
						f7_local0:UnsubscribeFromModel( f7_local1 )
					end
				end
			end ) )
		end
	end
	Engine[0xFE34BB8C92CDBEE]( "LUI.CodcasterLayer.InitLayer" )
	Engine[0xE8C8CBD2C0EAF6B]()
end

LUI.CodcasterLayer.ClearLayer = function ( f5_arg0, f5_arg1 )
	f5_arg0:closeChildren()
end

LUI.CodcasterLayer.TrapsInput = function ( f4_arg0, f4_arg1 )
	if f4_arg1.name == "gamepad_button" and f4_arg1.button == "start" and f4_arg1.qualifier == "gamepad" then
		return false
	else
		return CODCASTER.TRAPPED_INPUTS[f4_arg1.button] ~= nil
	end
end

LUI.CodcasterLayer.processEvent = function ( f3_arg0, f3_arg1 )
	if IsInputEvent( f3_arg1.name ) then
		return f3_arg0:DispatchEventsToChildren( f3_arg1 )
	else
		return LUI.CodcasterLayer.super.processEvent( f3_arg0, f3_arg1 )
	end
end

LUI.CodcasterLayer.DispatchEventsToChildren = function ( f1_arg0, f1_arg1 )
	local f1_local0 = f1_arg1.controller
	if f1_arg1.name == "mousemove" then
		local f1_local1 = false
	end
	if f1_arg1.down then
		local f1_local2 = f1_arg1.button
		local f1_local3 = false
		local f1_local4 = CODCASTER.ExecuteCallbackIfPossibleThenWait( f1_arg0, CODCASTER.KEYPRESS_COOLDOWN, "keypress", function ()
			return CODCASTER_SETTINGS.ToggleSettingValue( f1_arg0, f1_arg0 )
		end )
		if not f1_local4 then
			f1_local3 = f1_local4
		else
			f1_local3 = false
		end
		if string.find( f1_local2, "codcaster_spectate_player" ) then
			CODCASTER.SpectatePlayerFromOrderNumber( f1_local0, tonumber( string.gsub( f1_local2, "codcaster_spectate_player", "" ) ) )
			f1_local3 = true
		elseif f1_local2 == "codcaster_spectate_next_player" then
			CODCASTER.SpectateNextPlayer( f1_local0, true )
			f1_local3 = true
		elseif f1_local2 == "codcaster_spectate_previous_player" then
			CODCASTER.SpectateNextPlayer( f1_local0, false )
			f1_local3 = true
		elseif f1_local2 == "codcaster_player_list_next" then
			CODCASTER.SelectNextPlayer( f1_local0, true )
			f1_local3 = true
		elseif f1_local2 == "codcaster_player_list_previous" then
			CODCASTER.SelectNextPlayer( f1_local0, false )
			f1_local3 = true
		elseif f1_local2 == "codcaster_spectate_selected_player" then
			CODCASTER.SpectateSelectedPlayer( f1_local0 )
			f1_local3 = true
		elseif f1_local2 == "codcaster_settings_menu" then
			ACTIONS.OpenOptionsMenu( f1_local0, "codCaster" )
			f1_local3 = true
		elseif f1_local2 == "codcaster_freecam_toggle_mode" then
			f1_local3 = CODCASTER_SETTINGS.ToggleSettingValue( f1_local0, "freecam_translation_ignore_pitch" )
		elseif f1_local2 == "codcaster_orbitalcam_toggle_mode" then
			f1_local3 = CODCASTER_SETTINGS.ToggleSettingValue( f1_local0, "orbitalcam_angle_is_fixed" )
		end
		if not MLG[0x9894ED459E76619]() then
			f1_local4 = nil
			if CODCASTER_SETTINGS.GetSettingValue( f1_local0, f1_local2 ) ~= false then
				f1_local4 = string.gsub( f1_local2, "codcaster_", "" )
			elseif f1_local2 == "codcaster_playerlist" then
				f1_local4 = "portraitlist"
			end
			if f1_local4 then
				CODCASTER.IncrementCachedTelemetryData( CODCASTER.ANALYTICS_EVENT_ID.MATCH_END, f1_local4 )
			end
		end
		f1_local4 = f1_arg0:dispatchEventToRoot( {
			name = f1_local2 .. CODCASTER.EVENT_TYPES.KEYPRESS,
			eventData = f1_arg1
		} )
		local f1_local5
		if not f1_local4 then
			f1_local5 = f1_local4
		else
			f1_local5 = f1_local3
		end
		return f1_local5
	else
		return false
	end
end

