-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
module( ..., package.seeall )
local f0_local0 = function ( f2_arg0, f2_arg1, f2_arg2 )
	assert( f2_arg0.StatusTxt )
	local f2_local0 = DataSources.inGame.MP.cmdCurrentObjectiveIndex
	local f2_local1 = DataSources.inGame.MP.cmdOwnerTeam
	local f2_local2 = f2_local0:GetValue( f2_arg1 )
	local f2_local3 = nil
	local f2_local4 = {
		[Teams.axis] = {
			f2_arg0.Obj0,
			f2_arg0.Obj1,
			f2_arg0.Obj2,
			f2_arg0.Obj3,
			f2_arg0.Obj4
		},
		[Teams.allies] = {
			f2_arg0.Obj4,
			f2_arg0.Obj3,
			f2_arg0.Obj2,
			f2_arg0.Obj1,
			f2_arg0.Obj0
		}
	}
	local f2_local5 = f2_local4[Teams.allies]
	local f2_local6 = {
		[Teams.axis] = false,
		[Teams.allies] = true
	}
	local f2_local7 = true
	local f2_local8 = f2_arg0.Obj2
	local f2_local9 = nil
	local f2_local10 = 2
	local f2_local11 = -1
	local f2_local12 = ""
	local f2_local13 = Dvar[0x54084D7CA2317BB]( "#x36d16f02578d0ee10" )
	local f2_local14 = function ( f10_arg0 )
		return StringTable[0x2DCF0973239E909]( CSV.COPMapData.file, CSV.COPMapData.cols.mapRef, f2_arg0, CSV.COPMapData.cols["objName" .. f10_arg0] )
	end
	
	local f2_local15 = function ()
		f2_arg0 = Game[0x395DE1E9756DA1F]( Game[0x51CB5C434C63793]( f2_arg0 ) )
		if f2_arg0 == Teams.spectator then
			f2_arg0 = Teams.allies
		end
		f2_arg0 = f2_arg0[f2_arg0]
		f2_arg0 = f2_arg0[f2_arg0]
	end
	
	local f2_local16 = function ()
		if f2_arg0 and f2_arg0 then
			local f8_local0 = nil
			for f8_local4, f8_local5 in ipairs( f2_arg0 ) do
				f8_local0 = SWATCHES.HUD.HUDMain
				if f2_arg0 then
					if f2_arg0 + 1 < f8_local4 then
						f8_local0 = SWATCHES.Global.keyColor
					elseif f8_local4 < f2_arg0 + 1 then
						f8_local0 = SWATCHES.HUD.enemyTeam
					end
				elseif f2_arg0 + 1 < f8_local4 then
					f8_local0 = SWATCHES.HUD.enemyTeam
				elseif f8_local4 < f2_arg0 + 1 then
					f8_local0 = SWATCHES.Global.keyColor
				end
				f8_local5.CapturePointStatus.Point:SetRGBFromTable( f8_local0 )
			end
		end
	end
	
	local f2_local17 = function ()
		local f7_local0 = 0
		local f7_local1 = 0
		if f2_arg0 ~= -1 then
			if f2_arg0 then
				if f2_arg0 < f2_arg0 then
					f7_local0 = 1
				elseif f2_arg0 < f2_arg0 then
					f7_local1 = 1
				end
			elseif f2_arg0 < f2_arg0 then
				f7_local0 = 1
			elseif f2_arg0 < f2_arg0 then
				f7_local1 = 1
			end
		else
			f7_local0 = 1
		end
		f2_arg0.LeftProgress:SetAlpha( f7_local0, 100 )
		f2_arg0.RightProgress:SetAlpha( f7_local1, 100 )
	end
	
	local f2_local18 = function ()
		f2_arg0.CMDMessage.Text:setText( f2_arg0 )
		f2_arg0.StatusTxt:setText( f2_arg0 )
		ACTIONS.AnimateSequence( f2_arg0.CMDMessage, "MessageUpdate" )
	end
	
	f2_arg0:SubscribeToModel( f2_local0:GetModel( f2_arg1 ), function ()
		f2_arg0()
		f2_arg0 = f2_arg0:GetValue( f2_arg0 )
		if f2_arg0 ~= nil and f2_arg0 ~= -1 then
			f2_arg0 = f2_arg0
		end
		if f2_arg0 ~= -1 and f2_arg0 and f2_arg0[f2_arg0 + 1] then
			f2_arg0 = f2_arg0[f2_arg0 + 1]
		end
		if f2_arg0 ~= nil then
			f2_arg0:SetInactive()
			f2_arg0.Timer:SetAlpha( 0 )
			f2_arg0.LeftProgress:SetAlpha( 0, 100 )
			f2_arg0.RightProgress:SetAlpha( 0, 100 )
		end
		if f2_arg0 then
			f2_arg0()
			f2_arg0.CapturePointStatus.Point:SetScale( 0.35, 100 )
			f2_arg0.CapturePointStatus.PointIcon:SetScale( 0.35, 100 )
			f2_arg0.Timer:SetAlpha( 1 )
		end
		f2_arg0()
		if 0 <= f2_arg0 then
			f2_arg0 = Engine[0xED84C33EC5F01EA]( "MP/CMD_OBJ_ACTIVATION", tostring( f2_arg0( f2_arg0 ) ) )
			f2_arg0()
		end
	end )
	f2_arg0:SubscribeToModel( f2_local1:GetModel( f2_arg1 ), function ()
		local f4_local0 = f2_arg0:GetValue( f2_arg0 )
		if f2_arg0 and f4_local0 ~= -3 then
			if 0 <= f2_arg0 then
				if not (f2_arg0 ~= 0 or f4_local0 ~= Teams.allies) or f2_arg0 == 4 and f4_local0 == Teams.axis then
					if f4_local0 ~= f2_arg0 then
						f2_arg0 = Engine[0xED84C33EC5F01EA]( "MP/CMD_OBJ_BOMB_DEFEND" )
					else
						f2_arg0 = Engine[0xED84C33EC5F01EA]( "MP/CMD_OBJ_BOMB_CAPTURE" )
					end
				elseif f4_local0 ~= f2_arg0 then
					f2_arg0 = Engine[0xED84C33EC5F01EA]( "MP/CMD_OBJ_CAPTURE", tostring( f2_arg0( f2_arg0 ) ) )
				else
					f2_arg0 = Engine[0xED84C33EC5F01EA]( "MP/CMD_OBJ_DEFEND", tostring( f2_arg0( f2_arg0 ) ) )
				end
			end
			f2_arg0()
			if f2_arg0 then
				f2_arg0.LeftProgress:SetAlpha( 0, 100 )
				f2_arg0.RightProgress:SetAlpha( 0, 100 )
				if f2_arg0 == 0 or f2_arg0 == 4 then
					f2_arg0:SetActive( f2_arg0, true )
					if not (f2_arg0 ~= 0 or f2_arg0 ~= Teams.allies) or f2_arg0 == 4 and f2_arg0 == Teams.axis then
						f2_arg0.CapturePointStatus.Progress:SetAlpha( 1, 100 )
						f2_arg0.CapturePointStatus.ProgressBacker:SetAlpha( 0.6, 100 )
					elseif not (f2_arg0 ~= 0 or f2_arg0 == Teams.allies) or f2_arg0 == 4 and f2_arg0 ~= Teams.axis then
						f2_arg0.CapturePointStatus.Progress:SetAlpha( 0, 100 )
						f2_arg0.CapturePointStatus.ProgressBacker:SetAlpha( 0, 100 )
					end
				else
					f2_arg0:SetActive( f2_arg0 )
					f2_arg0.Timer:SetAlpha( 0 )
				end
			end
			f2_arg0 = f2_arg0
		end
	end )
	f2_arg0:SubscribeToModel( DataSources.inGame.MP.match.team:GetModel( f2_arg1 ), function ()
		f2_arg0.LeftProgress:SetAlpha( 0, 100 )
		f2_arg0.RightProgress:SetAlpha( 0, 100 )
		f2_arg0.CapturePointStatus.Point:SetScale( 0.1, 100 )
		f2_arg0.CapturePointStatus.PointIcon:SetScale( 0.1, 100 )
		f2_arg0.Timer:SetAlpha( 0 )
		f2_arg0()
		f2_arg0()
	end, true )
end

function CMDStatus( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 342 * _1080p, 0, 120 * _1080p )
	self.id = "CMDStatus"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "CMDStatus", CMDStatus )
LockTable( _M )
