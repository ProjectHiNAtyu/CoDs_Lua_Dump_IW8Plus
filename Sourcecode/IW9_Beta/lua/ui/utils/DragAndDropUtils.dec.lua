-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
DragAndDrop = DragAndDrop or {}
DragAndDrop.TargetStates = {
	ElementOverlapsTarget = BitwiseOperators.lshift( 1, 0 ),
	ElementInsideTarget = BitwiseOperators.lshift( 1, 1 ),
	MovePointInsideTarget = BitwiseOperators.lshift( 1, 2 ),
	Invalid = BitwiseOperators.lshift( 1, 3 )
}
local f0_local0 = function ( f12_arg0, f12_arg1, f12_arg2 )
	local f12_local0 = f12_arg0._dragAndDrop
	if not f12_local0 or not f12_local0.enabled then
		return 
	elseif not f12_local0.initialUnitsX or not f12_local0.initialUnitsY then
		return 
	end
	local f12_local1 = f12_local0.options
	f12_local0.currentUnitsX = f12_arg1
	f12_local0.currentUnitsY = f12_arg2
	local f12_local2 = f12_local0.currentUnitsX - f12_local0.initialUnitsX
	local f12_local3 = f12_local0.currentUnitsY - f12_local0.initialUnitsY
	if not f12_local0.inProgress then
		if math.abs( f12_local2 ) < (f12_local1.minUnitsMovementThresholdX or f12_local1.minUnitsMovementThreshold) and math.abs( f12_local3 ) < (f12_local1.minUnitsMovementThresholdY or f12_local1.minUnitsMovementThreshold) then
			return 
		end
		local f12_local4 = f12_local1.getDragDummyFunction and f12_local1.getDragDummyFunction() or f12_arg0
		local f12_local5
		if f12_local1.useDummyInitialAnchorsAndPos then
			f12_local5 = f12_local4:GetAnchorsAndPosition()
			if not f12_local5 then
			
			else
				f12_local0.initialAnchorsAndPos = f12_local5
				f12_local0.draggedElement = f12_local4
				f12_local0.inProgress = true
				f12_arg0:processEventNoDispatch( {
					name = "drag_and_drop_begin"
				} )
			end
		end
		f12_local5 = f12_arg0:GetAnchorsAndPosition()
	end
	local f12_local6 = f12_local0.draggedElement
	local f12_local7 = f12_local1.maxUnitsMovementTable
	if f12_local7 then
		if f12_local7.left then
			f12_local2 = math.max( -f12_local7.left, f12_local2 )
		end
		if f12_local7.right then
			f12_local2 = math.min( f12_local2, f12_local7.right )
		end
		if f12_local7.top then
			f12_local3 = math.max( -f12_local7.top, f12_local3 )
		end
		if f12_local7.bottom then
			f12_local3 = math.min( f12_local3, f12_local7.bottom )
		end
	end
	local f12_local4 = f12_local0.initialAnchorsAndPos
	f12_local6:SetAnchorsAndPosition( f12_local4.leftAnchor, f12_local4.rightAnchor, f12_local4.topAnchor, f12_local4.bottomAnchor, f12_local4.left + f12_local2, f12_local4.right + f12_local2, f12_local4.top + f12_local3, f12_local4.bottom + f12_local3 )
end

local f0_local1 = function ( f11_arg0 )
	local f11_local0 = f11_arg0._dragAndDrop
	if not f11_local0 or not f11_local0.enabled or not f11_local0.inProgress or not f11_local0.targets then
		return 
	end
	local f11_local1, f11_local2, f11_local3, f11_local4 = f11_local0.draggedElement:getCurrentGlobalRect()
	if not f11_local1 or not f11_local2 or not f11_local3 or not f11_local4 then
		return 
	end
	local f11_local5 = f11_local0.currentUnitsX
	local f11_local6 = f11_local0.currentUnitsY
	for f11_local15, f11_local16 in pairs( f11_local0.targets ) do
		local f11_local17 = f11_local16.state
		local f11_local14 = 0
		local f11_local18, f11_local19, f11_local20, f11_local21 = f11_local15:getCurrentGlobalRect()
		local f11_local10
		if f11_local18 >= f11_local1 or f11_local1 >= f11_local20 then
			f11_local10 = false
		else
			f11_local10 = true
		end
		local f11_local11
		if f11_local18 >= f11_local3 or f11_local3 >= f11_local20 then
			f11_local11 = false
		else
			f11_local11 = true
		end
		local f11_local12
		if f11_local19 >= f11_local2 or f11_local2 >= f11_local21 then
			f11_local12 = false
		else
			f11_local12 = true
		end
		local f11_local13
		if f11_local19 >= f11_local4 or f11_local4 >= f11_local21 then
			f11_local13 = false
		else
			f11_local13 = true
		end
		if f11_local10 and f11_local11 and f11_local12 and f11_local13 then
			f11_local14 = DragAndDrop.TargetStates.ElementInsideTarget
		elseif (f11_local10 or f11_local11) and (f11_local12 or f11_local13) then
			f11_local14 = DragAndDrop.TargetStates.ElementOverlapsTarget
		end
		if f11_local18 < f11_local5 and f11_local5 < f11_local20 and f11_local19 < f11_local6 and f11_local6 < f11_local21 then
			f11_local14 = BitwiseOperators.bor( f11_local14, DragAndDrop.TargetStates.MovePointInsideTarget )
		end
		if f11_local14 ~= f11_local17 then
			f11_local0.targets[f11_local15].state = f11_local14
			f11_arg0:processEventNoDispatch( {
				name = "drag_and_drop_target_state",
				target = f11_local15,
				state = f11_local14
			} )
		end
	end
end

DragAndDrop.SetupForTouch = function ( f7_arg0, f7_arg1 )
	local f7_local0 = f7_arg0._dragAndDrop or {}
	local f7_local1
	if not f7_arg1 then
		f7_local1 = f7_arg1
	else
		f7_local1 = {}
	end
	f7_local0.options = f7_local1
	f7_local0.inProgress = false
	f7_local0.enabled = true
	f7_arg0._dragAndDrop = f7_local0
	if not f7_arg0._dragAndDrop.touchEventHandlersAdded then
		f7_arg0:addEventHandler( "touchbegin", function ( f10_arg0, f10_arg1 )
			local f10_local0 = f10_arg0._dragAndDrop
			if not f10_local0 or not f10_local0.enabled then
				return false
			else
				f10_local0.initialUnitsX = f10_arg1.unitsX
				f10_local0.initialUnitsY = f10_arg1.unitsY
			end
		end )
		f7_arg0:addEventHandler( "touchmove", function ( f9_arg0, f9_arg1 )
			local f9_local0 = f9_arg0._dragAndDrop
			if not f9_local0 or not f9_local0.enabled then
				return false
			end
			f7_arg0( f9_arg0, f9_arg1.unitsX, f9_arg1.unitsY )
			if f9_local0.inProgress then
				f7_arg0( f9_arg0 )
			end
			return f9_local0.inProgress
		end )
		f7_arg0:addEventHandler( "touchend", function ( f8_arg0, f8_arg1 )
			local f8_local0 = f8_arg0._dragAndDrop
			if not f8_local0 or not f8_local0.enabled or not f8_local0.inProgress then
				return false
			else
				DragAndDrop.EndInProgress( f8_arg0, f8_arg1.x, f8_arg1.y )
				return true
			end
		end )
		f7_arg0._dragAndDrop.touchEventHandlersAdded = true
	end
end

DragAndDrop.AddTarget = function ( f6_arg0, f6_arg1 )
	f6_arg0._dragAndDrop = f6_arg0._dragAndDrop or {}
	f6_arg0._dragAndDrop.targets = f6_arg0._dragAndDrop.targets or {}
	if not f6_arg0._dragAndDrop.targets[f6_arg1] then
		f6_arg0._dragAndDrop.targets[f6_arg1] = {}
	end
end

DragAndDrop.RemoveTarget = function ( f5_arg0, f5_arg1 )
	if f5_arg0._dragAndDrop and f5_arg0._dragAndDrop.targets then
		f5_arg0._dragAndDrop.targets[f5_arg1] = nil
	end
end

DragAndDrop.GetTargetState = function ( f4_arg0, f4_arg1 )
	if f4_arg0._dragAndDrop and f4_arg0._dragAndDrop.targets and f4_arg0._dragAndDrop.targets[f4_arg1] then
		return f4_arg0._dragAndDrop.targets[f4_arg1].state
	else
		
	end
end

DragAndDrop.EndInProgress = function ( f3_arg0, f3_arg1, f3_arg2 )
	local f3_local0 = f3_arg0._dragAndDrop
	if f3_local0 then
		f3_local0.initialUnitsX = nil
		f3_local0.initialUnitsY = nil
	end
	if not f3_local0 or not f3_local0.enabled or not f3_local0.inProgress then
		return 
	elseif f3_local0.options.restoreInitialPosAtEnd then
		local f3_local1 = f3_local0.draggedElement.initialAnchorsAndPos
		f3_local0.draggedElement:SetAnchorsAndPosition( f3_local1.leftAnchor, f3_local1.rightAnchor, f3_local1.topAnchor, f3_local1.bottomAnchor, f3_local1.left, f3_local1.right, f3_local1.top, f3_local1.bottom )
	end
	f3_local0.inProgress = false
	local f3_local1 = {
		name = "drag_and_drop_end"
	}
	if f3_arg1 and f3_arg2 then
		f3_local1.endPosX = f3_arg1
		f3_local1.endPosY = f3_arg2
	end
	f3_arg0:processEventNoDispatch( f3_local1 )
end

DragAndDrop.Enable = function ( f2_arg0 )
	if f2_arg0._dragAndDrop then
		f2_arg0._dragAndDrop.enabled = true
	end
end

DragAndDrop.Disable = function ( f1_arg0 )
	if f1_arg0._dragAndDrop then
		DragAndDrop.EndInProgress( f1_arg0 )
		f1_arg0._dragAndDrop.enabled = false
	end
end

