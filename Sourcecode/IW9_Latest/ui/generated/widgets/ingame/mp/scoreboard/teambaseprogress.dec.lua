-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
module( ..., package.seeall )
require( "ui.generated.widgets.genericprogressbar" )
local f0_local0 = 240
local f0_local1 = 6
local f0_local2 = 3
local f0_local3 = 10
local f0_local4 = function ( f3_arg0, f3_arg1, f3_arg2 )
	if f3_arg2 == nil then
		if CONDITIONS.InGame() then
			if MatchRules[0x1A6D0B2E15DF8CF]() then
				f3_arg2 = MatchRules[0x3A9F1F51625857F]( Lobby.MatchRulesClasses.CommonOption, Lobby.MatchRulesMembers.WinLimit )
			else
				f3_arg2 = Dvar[0x22EAAB59AA27E9B]( 0x98C82B5A26DC973 .. SCOREBOARD.GetGameType( f3_arg0._controllerIndex ) .. "_winlimit" )
			end
		else
			assert( f3_arg2 )
			return 
		end
	end
	if f0_local0 < f3_arg2 then
		f3_arg0.RoundCount:setText( Engine[0xED84C33EC5F01EA]( 0x74821ADAF79FD0F, f3_arg1, f3_arg2 ) )
		ACTIONS.AnimateSequence( f3_arg0:getParent(), "UsingRoundText" )
	else
		local f3_local0 = math.floor( f0_local0 / f3_arg2 ) - f0_local0
		local f3_local1 = {}
		f3_arg0.ProgressRounds:removeAllChildren()
		for f3_local2 = 1, f3_arg2, 1 do
			local self = LUI.UIImage.new()
			self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * f0_local0, 0, _1080p * f0_local0 )
			self:SetAlpha( 0 )
			f3_arg0.ProgressRounds:addElement( self )
			f3_local1[f3_local2] = LUI.UIImage.new()
			f3_local1[f3_local2].id = "Pip" .. f3_local2
			f3_local1[f3_local2]:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * f3_local0, 0, _1080p * f0_local0 )
			if f3_arg1 < f3_local2 then
				f3_local1[f3_local2]:SetAlpha( 0.2 )
			else
				f3_local1[f3_local2]:SetAlpha( 1 )
			end
			f3_arg0.ProgressRounds:addElement( f3_local1[f3_local2] )
		end
	end
end

local f0_local5 = function ( f2_arg0, f2_arg1, f2_arg2 )
	if MP.IsRoundBasedGameType( Game[0x58158428CFFFEF5]() ) then
		f2_arg0.ProgressBar:SetAlpha( 0 )
	end
	f2_arg0._controllerIndex = f2_arg1
	f2_arg0.SetProgressRounds = f0_local0
end

function TeamBaseProgress( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 240 * _1080p, 0, 88 * _1080p )
	self.id = "TeamBaseProgress"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local ProgressBar = nil
	
	ProgressBar = MenuBuilder.BuildRegisteredType( "GenericProgressBar", {
		controllerIndex = f1_local1
	} )
	ProgressBar.id = "ProgressBar"
	ProgressBar.DialogueBackground:SetRGBFromInt( 16777215, 0 )
	ProgressBar.Fill:SetRGBFromInt( 16777215, 0 )
	ProgressBar.Frame:SetAlpha( 0, 0 )
	ProgressBar.Cap:SetAlpha( 0, 0 )
	ProgressBar:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 6 )
	self:addElement( ProgressBar )
	self.ProgressBar = ProgressBar
	
	local ProgressRounds = nil
	
	ProgressRounds = LUI.UIHorizontalList.new( {
		controller = f1_local1,
		direction = LUI.DIRECTION.horizontal,
		horizontalAlignment = LUI.Alignment.Left
	} )
	ProgressRounds.id = "ProgressRounds"
	ProgressRounds:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 6 )
	self:addElement( ProgressRounds )
	self.ProgressRounds = ProgressRounds
	
	local RoundCount = nil
	
	RoundCount = LUI.UIStyledText.new()
	RoundCount.id = "RoundCount"
	RoundCount:setText( "", 0 )
	RoundCount:setCaseStyle( LUI.CaseStyle.Uppercase )
	RoundCount:SetFont( FONTS.GetFont( FONTS.SecondaryRegular.File ) )
	RoundCount:SetFontSize( 20 * _PT )
	RoundCount:SetMinFontSize( 20 * _PT )
	RoundCount:SetWordWrap( true )
	RoundCount:SetAlignment( LUI.Alignment.Left )
	RoundCount:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, _1080p * -16, _1080p * 11 )
	self:addElement( RoundCount )
	self.RoundCount = RoundCount
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "TeamBaseProgress", TeamBaseProgress )
LockTable( _M )
