-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
module( ..., package.seeall )
require( "ui.inGame.mp.CodcasterStatusIcon" )
local f0_local0 = {
	{
		name = "Spectate",
		handle = true,
		visibilityEnum = LUI.Visibility.Visible,
		animationsFunction = function ( f27_arg0, f27_arg1, f27_arg2 )
			if f27_arg0._isSecondaryBlack then
				return {
					nil,
					"Spectate",
					"BlackSecondaryColor"
				}
			else
				return {
					nil,
					"Spectate"
				}
			end
		end,
		stateHandler = function ( f26_arg0, f26_arg1, f26_arg2 )
			local f26_local0 = f26_arg0._colors
			f26_arg0.Selection:SetRGBFromInt( f26_local0.spectated )
			COLORS_UTILS.SetElementsRGBFromInt( {
				f26_arg0.Name,
				f26_arg0.KD,
				f26_arg0.PlayerIndex,
				f26_arg0.Objective,
				f26_arg0.Streak,
				f26_arg0.StatusIcon.StatusIcon
			}, f26_local0.contrast )
		end,
		condition = function ( f25_arg0, f25_arg1, f25_arg2 )
			return f25_arg0._isSpectated
		end
	},
	{
		name = "Select",
		handle = true,
		animate = true,
		visibilityEnum = LUI.Visibility.Visible,
		stateHandler = function ( f24_arg0, f24_arg1, f24_arg2 )
			local f24_local0 = f24_arg0._colors
			f24_arg0.Selection:SetRGBFromInt( f24_local0.spectated )
			COLORS_UTILS.SetElementsRGBFromInt( {
				f24_arg0.Name,
				f24_arg0.KD,
				f24_arg0.PlayerIndex,
				f24_arg0.Objective,
				f24_arg0.Streak,
				f24_arg0.StatusIcon.StatusIcon
			}, f24_local0.alphaBlend )
		end,
		condition = function ( f23_arg0, f23_arg1, f23_arg2 )
			local f23_local0 = f23_arg0._isPreselected
			if f23_local0 then
				f23_local0 = f23_arg0._lastVisualState ~= "Spectate"
			end
			return f23_local0
		end
	},
	{
		name = "UnSpectate",
		handle = true,
		animate = true,
		visibilityEnum = LUI.Visibility.Visible,
		stateHandler = function ( f22_arg0, f22_arg1, f22_arg2 )
			local f22_local0 = f22_arg0._colors
			f22_arg0.Selection:SetRGBFromInt( f22_local0.background )
			COLORS_UTILS.SetElementsRGBFromInt( {
				f22_arg0.Name,
				f22_arg0.KD,
				f22_arg0.PlayerIndex,
				f22_arg0.Objective,
				f22_arg0.Streak,
				f22_arg0.StatusIcon.StatusIcon
			}, f22_local0.white )
		end,
		condition = function ( f21_arg0, f21_arg1, f21_arg2 )
			return true
		end
	}
}
local f0_local1 = function ( f20_arg0, f20_arg1, f20_arg2 )
	local f20_local0, f20_local1 = CODCASTER.GetTeamColors( f20_arg2, f20_arg1.teamId:GetValue( f20_arg2 ), CODCASTER.COLOR_FLAGS.PRIMARY_SECONDARY )
	local f20_local2 = COLORS_UTILS.GetBlackWhiteContrastFromInt( f20_local1 )
	local f20_local3 = GetIntForColor( COLORS.codcasterDark )
	local f20_local4 = GetIntForColor( COLORS.white )
	local f20_local5 = COLORS_UTILS.GetBlackWhiteAlphaBlendedColorFromTable( COLORS.codcasterDark, 1, GetColorTableFromIntColor( f20_local1 ), 0.5 )
	local f20_local6 = f20_local1
	if f20_local1 == GetIntForColor( COLORS.black ) then
		f20_arg0._isSecondaryBlack = true
		f20_local6 = f20_local0
	end
	f20_arg0._colors = {
		spectated = f20_local6,
		background = f20_local3,
		contrast = GetIntForColor( f20_local2 ),
		alphaBlend = GetIntForColor( f20_local5 ),
		white = f20_local4
	}
end

local f0_local2 = function ( f17_arg0, f17_arg1, f17_arg2 )
	if f17_arg1 and not f17_arg0.isVisualStateSetup then
		f17_arg0:PrepareSpectatedColors( f17_arg1, f17_arg2 )
		CODCASTER.SetupVisualStateHandler( f17_arg0, f17_arg2, f0_local0, {
			dataSources = {
				teamId = f17_arg1.teamId,
				isSpectated = f17_arg1.isSpectated,
				isPreselected = f17_arg1.isPreselected
			},
			events = {
				"codcaster_fullscreen_map" .. CODCASTER.EVENT_TYPES.SETTING_CHANGED
			}
		}, {
			preState = function ( f19_arg0, f19_arg1, f19_arg2 )
				local f19_local0 = false
				local f19_local1 = false
				if not CODCASTER_SETTINGS.GetSettingValue( f19_arg1, "codcaster_fullscreen_map" ) then
					local f19_local2 = f19_arg2.dataSources
					f19_local0 = f19_local2.isSpectated:GetValue( f19_arg1 )
					f19_local1 = f19_local2.isPreselected:GetValue( f19_arg1 )
				end
				f19_arg0._isSpectated = f19_local0
				f19_arg0._isPreselected = f19_local1
			end,
			onState = function ( f18_arg0, f18_arg1, f18_arg2 )
				f18_arg0._lastVisualState = f18_arg0._currentVisualState
			end
		} )
		f17_arg0.isVisualStateSetup = true
	end
	LUI.UIElement.SetDataSource( f17_arg0, f17_arg1, f17_arg2 )
end

local f0_local3 = function ( f9_arg0, f9_arg1, f9_arg2 )
	f9_arg0.SetDataSource = f0_local0
	f9_arg0.PrepareSpectatedColors = f0_local0
	f9_arg0.StatusIcon:SetDataSourceThroughElement( f9_arg0, nil )
	f9_arg0:SubscribeToModelThroughElement( f9_arg0, "name", function ( f16_arg0 )
		local f16_local0 = DataModel[0x614D394F6F9A18D]( f16_arg0 )
		if f16_local0 then
			f9_arg0.Name:setText( f16_local0 )
		end
	end )
	f9_arg0:SubscribeToModelThroughElement( f9_arg0, "playerNumber", function ( f15_arg0 )
		f9_arg0.PlayerIndex:setText( DataModel[0x614D394F6F9A18D]( f15_arg0 ), 0 )
	end )
	f9_arg0:SubscribeToModelThroughElement( f9_arg0, "teamId", function ( f14_arg0 )
		f9_arg0:PrepareSpectatedColors( f9_arg0:GetDataSource(), f9_arg0 )
	end )
	f9_arg0:SubscribeToModelThroughElement( f9_arg0, "stats.consecutiveKills", function ( f13_arg0 )
		local f13_local0 = DataModel[0x614D394F6F9A18D]( f13_arg0 )
		if f13_local0 then
			f9_arg0.Streak:setText( f13_local0, 0 )
		end
	end )
	f9_arg0:SubscribeToModelThroughElement( f9_arg0, "stats.objectiveStat", function ( f12_arg0 )
		local f12_local0 = DataModel[0x614D394F6F9A18D]( f12_arg0 )
		if f12_local0 then
			f9_arg0.Objective:setText( f12_local0, 0 )
		end
	end )
	local f9_local0 = function ( f11_arg0 )
		local f11_local0 = f9_arg0:GetDataSource()
		local f11_local1 = f11_local0.stats.deaths:GetValue( f9_arg0 )
		local f11_local2 = f11_local0.stats.kills:GetValue( f9_arg0 )
		if f11_local2 and f11_local1 then
			f9_arg0.KD:setText( f11_local2 .. "/" .. f11_local1, 0 )
		end
	end
	
	f9_arg0:SubscribeToModelThroughElement( f9_arg0, "stats.kills", f9_local0 )
	f9_arg0:SubscribeToModelThroughElement( f9_arg0, "stats.deaths", f9_local0 )
	local f9_local1 = function ( f10_arg0, f10_arg1 )
		local f10_local0 = f10_arg1.controller
		local f10_local1 = CODCASTER_SETTINGS.GetSettingValue( f10_local0, "codcaster_playernumbers" )
		local f10_local2 = CODCASTER_SETTINGS.GetSettingValue( f10_local0, "codcaster_playernumbers_teamlist" )
		local f10_local3
		if f10_local1 then
			f10_local3 = f10_local1
		else
			f10_local3 = f10_local2
		end
		local f10_local4 = ACTIONS.AnimateSequence
		local f10_local5 = f10_arg0
		local f10_local6
		if f10_local3 then
			f10_local6 = "ShowPlayerNumber"
		else
			f10_local6 = "HidePlayerNumber"
		end
		f10_local4( f10_local5, f10_local6 )
	end
	
	f9_arg0:addEventHandler( "codcaster_playernumbers" .. CODCASTER.EVENT_TYPES.SETTING_CHANGED, f9_local1 )
	f9_arg0:addAndCallEventHandler( "codcaster_playernumbers_teamlist" .. CODCASTER.EVENT_TYPES.SETTING_CHANGED, f9_local1, {
		controller = f9_arg1
	} )
end

function CodCasterPlayerListRowWidget( menu, controller )
	local self = LUI.UIButton.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 610 * _1080p, 0, 32 * _1080p )
	self.id = "CodCasterPlayerListRowWidget"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	self._sequenceLengths = self._sequenceLengths or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local Background = nil
	
	Background = LUI.UIImage.new()
	Background.id = "Background"
	Background:SetRGBFromTable( SWATCHES.codcasterColors.codcasterDark, 0 )
	Background:setImage( RegisterMaterial( "ui_default_white" ), 0 )
	self:addElement( Background )
	self.Background = Background
	
	local Selection = nil
	
	Selection = LUI.UIImage.new()
	Selection.id = "Selection"
	Selection:SetVisibility( LUI.Visibility.Hidden )
	Selection:SetRGBFromInt( 8881284, 0 )
	Selection:setImage( RegisterMaterial( "ui_default_white" ), 0 )
	self:addElement( Selection )
	self.Selection = Selection
	
	local Name = nil
	
	Name = LUI.UIStyledText.new()
	Name.id = "Name"
	Name:SetAlpha( 0.9, 0 )
	Name:setText( "", 0 )
	Name:SetFont( FONTS.GetFont( FONTS.Abolition.File ) )
	Name:SetFontSize( 30 * _PT )
	Name:SetMinFontSize( 22 * _PT )
	Name:SetWordWrap( true )
	Name:SetLeading( -2 * _1080p, 0 )
	Name:SetAlignment( LUI.Alignment.Left )
	Name:SetVerticalAlignment( LUI.Alignment.Center )
	Name:SetEllipsesEnabled( true )
	Name:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -217, _1080p * 101, _1080p * -16, _1080p * 16 )
	self:addElement( Name )
	self.Name = Name
	
	local PlayerIndex = nil
	
	PlayerIndex = LUI.UIStyledText.new()
	PlayerIndex.id = "PlayerIndex"
	PlayerIndex:SetAlpha( 0.9, 0 )
	PlayerIndex:setText( "", 0 )
	PlayerIndex:SetFont( FONTS.GetFont( FONTS.Abolition.File ) )
	PlayerIndex:SetFontSize( 28 * _PT )
	PlayerIndex:SetMinFontSize( 22 * _PT )
	PlayerIndex:SetWordWrap( true )
	PlayerIndex:SetLeading( -2 * _1080p, 0 )
	PlayerIndex:SetAlignment( LUI.Alignment.Center )
	PlayerIndex:SetVerticalAlignment( LUI.Alignment.Center )
	PlayerIndex:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -263, _1080p * -232, _1080p * -16, _1080p * 16 )
	self:addElement( PlayerIndex )
	self.PlayerIndex = PlayerIndex
	
	local KD = nil
	
	KD = LUI.UIStyledText.new()
	KD.id = "KD"
	KD:setText( "", 0 )
	KD:SetFont( FONTS.GetFont( FONTS.Abolition.File ) )
	KD:SetFontSize( 28 * _PT )
	KD:SetMinFontSize( 22 * _PT )
	KD:SetWordWrap( true )
	KD:SetLeading( -2 * _1080p, 0 )
	KD:SetAlignment( LUI.Alignment.Center )
	KD:SetVerticalAlignment( LUI.Alignment.Center )
	KD:SetAnchorsAndPosition( 1, 0, 0.5, 0.5, _1080p * -198, _1080p * -134, _1080p * -15, _1080p * 15 )
	self:addElement( KD )
	self.KD = KD
	
	local Streak = nil
	
	Streak = LUI.UIStyledText.new()
	Streak.id = "Streak"
	Streak:setText( "", 0 )
	Streak:SetFont( FONTS.GetFont( FONTS.Abolition.File ) )
	Streak:SetFontSize( 28 * _PT )
	Streak:SetMinFontSize( 22 * _PT )
	Streak:SetWordWrap( true )
	Streak:SetLeading( -2 * _1080p, 0 )
	Streak:SetAlignment( LUI.Alignment.Center )
	Streak:SetVerticalAlignment( LUI.Alignment.Center )
	Streak:SetAnchorsAndPosition( 1, 0, 0.5, 0.5, _1080p * -131, _1080p * -67, _1080p * -15, _1080p * 15 )
	self:addElement( Streak )
	self.Streak = Streak
	
	local Objective = nil
	
	Objective = LUI.UIStyledText.new()
	Objective.id = "Objective"
	Objective:setText( "", 0 )
	Objective:SetFont( FONTS.GetFont( FONTS.Abolition.File ) )
	Objective:SetFontSize( 28 * _PT )
	Objective:SetMinFontSize( 22 * _PT )
	Objective:SetWordWrap( true )
	Objective:SetLeading( -2 * _1080p, 0 )
	Objective:SetAlignment( LUI.Alignment.Center )
	Objective:SetVerticalAlignment( LUI.Alignment.Center )
	Objective:SetAnchorsAndPosition( 1, 0, 0.5, 0.5, _1080p * -64, 0, _1080p * -15, _1080p * 15 )
	self:addElement( Objective )
	self.Objective = Objective
	
	local BorderRight = nil
	
	BorderRight = LUI.UIBorder.new( {
		borderThicknessLeft = _1080p * 1,
		borderThicknessRight = _1080p * 0,
		borderThicknessTop = _1080p * 0,
		borderThicknessBottom = _1080p * 0
	} )
	BorderRight.id = "BorderRight"
	BorderRight:SetRGBFromInt( 7368816, 0 )
	BorderRight:SetBorderThicknessRight( _1080p * 0, 0 )
	BorderRight:SetBorderThicknessTop( _1080p * 0, 0 )
	BorderRight:SetBorderThicknessBottom( _1080p * 0, 0 )
	BorderRight:SetAnchorsAndPosition( 1, 0, 0, 0, _1080p * -200, 0, 0, 0 )
	self:addElement( BorderRight )
	self.BorderRight = BorderRight
	
	local BorderLeft = nil
	
	BorderLeft = LUI.UIBorder.new( {
		borderThicknessLeft = _1080p * 0,
		borderThicknessRight = _1080p * 1,
		borderThicknessTop = _1080p * 0,
		borderThicknessBottom = _1080p * 0
	} )
	BorderLeft.id = "BorderLeft"
	BorderLeft:SetRGBFromInt( 7368816, 0 )
	BorderLeft:SetBorderThicknessLeft( _1080p * 0, 0 )
	BorderLeft:SetBorderThicknessTop( _1080p * 0, 0 )
	BorderLeft:SetBorderThicknessBottom( _1080p * 0, 0 )
	BorderLeft:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 37, 0, _1080p * 32 )
	self:addElement( BorderLeft )
	self.BorderLeft = BorderLeft
	
	local StatusIcon = nil
	
	StatusIcon = MenuBuilder.BuildRegisteredType( "CodcasterStatusIcon", {
		controllerIndex = f1_local1
	} )
	StatusIcon.id = "StatusIcon"
	StatusIcon:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -302, _1080p * -272, _1080p * -16, _1080p * 14 )
	self:addElement( StatusIcon )
	self.StatusIcon = StatusIcon
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	self._sequenceLengths.DefaultSequence = 0
	local f1_local13 = nil
	Background:RegisterAnimationSequence( "UnSpectate", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Visibility,
			value = LUI.Visibility.Visible
		}
	} )
	Selection:RegisterAnimationSequence( "UnSpectate", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Visibility,
			value = LUI.Visibility.Hidden
		}
	} )
	self._sequences.UnSpectate = function ()
		menu:AnimateSequence( "UnSpectate" )
		menu:AnimateSequence( "UnSpectate" )
	end
	
	self._sequenceLengths.UnSpectate = 0
	local f1_local14 = nil
	Selection:RegisterAnimationSequence( "Spectate", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Visibility,
			value = LUI.Visibility.Visible
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.Spectate = function ()
		menu:AnimateSequence( "Spectate" )
	end
	
	self._sequenceLengths.Spectate = 0
	local f1_local15 = nil
	Selection:RegisterAnimationSequence( "Select", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Visibility,
			value = LUI.Visibility.Visible
		},
		{
			value = 5.29462817E-315,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.Select = function ()
		menu:AnimateSequence( "Select" )
	end
	
	self._sequenceLengths.Select = 0
	local f1_local16 = nil
	Selection:RegisterAnimationSequence( "BlackSecondaryColor", {
		{
			value = 4.6672616413205735E-62,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.BlackSecondaryColor = function ()
		menu:AnimateSequence( "BlackSecondaryColor" )
	end
	
	self._sequenceLengths.BlackSecondaryColor = 0
	local f1_local17 = nil
	Name:RegisterAnimationSequence( "HidePlayerNumber", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -261
		}
	} )
	PlayerIndex:RegisterAnimationSequence( "HidePlayerNumber", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Visibility,
			value = LUI.Visibility.Hidden
		}
	} )
	self._sequences.HidePlayerNumber = function ()
		menu:AnimateSequence( "HidePlayerNumber" )
		menu:AnimateSequence( "HidePlayerNumber" )
	end
	
	self._sequenceLengths.HidePlayerNumber = 0
	local f1_local18 = nil
	Name:RegisterAnimationSequence( "ShowPlayerNumber", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -231
		}
	} )
	PlayerIndex:RegisterAnimationSequence( "ShowPlayerNumber", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Visibility,
			value = LUI.Visibility.Visible
		}
	} )
	self._sequences.ShowPlayerNumber = function ()
		menu:AnimateSequence( "ShowPlayerNumber" )
		menu:AnimateSequence( "ShowPlayerNumber" )
	end
	
	self._sequenceLengths.ShowPlayerNumber = 0
	if not CODCASTER_CONDITIONS.IsCDLClient() then
		ACTIONS.SetFontLeading( self.Name, -4 )
		ACTIONS.SetFont( self.Name, FONTS.BattleNetCondensed )
	end
	if not CODCASTER_CONDITIONS.IsCDLClient() then
		ACTIONS.SetFontLeading( self.PlayerIndex, 0 )
	end
	if not CODCASTER_CONDITIONS.IsCDLClient() then
		ACTIONS.SetFontLeading( self.KD, 0 )
	end
	if not CODCASTER_CONDITIONS.IsCDLClient() then
		ACTIONS.SetFontLeading( self.Streak, 0 )
	end
	if not CODCASTER_CONDITIONS.IsCDLClient() then
		ACTIONS.SetFontLeading( self.Objective, 0 )
	end
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "CodCasterPlayerListRowWidget", CodCasterPlayerListRowWidget )
LockTable( _M )
