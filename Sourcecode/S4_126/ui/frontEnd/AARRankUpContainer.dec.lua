-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
module( ..., package.seeall )
require( "ui.frontEnd.AARParadeUnlockItem" )
require( "ui.frontEnd.AARRankUpItem" )
local f0_local0 = 2200
local f0_local1 = 2000
local f0_local2 = 300
local f0_local3 = function ( f21_arg0, f21_arg1, f21_arg2 )
	for f21_local0 = 1, #f21_arg0._unlockWidgets, 1 do
		local f21_local3
		if f21_arg2 then
			f21_local3 = 0
		else
			f21_local3 = f0_local0
		end
		f21_arg0._unlockWidgets[f21_local0]:SetAlpha( 0 )
		local f21_local4 = f21_arg0._unlockWidgets[f21_local0]
		local f21_local5 = f21_local4
		f21_local4 = f21_local4.SetAlpha
		local f21_local6
		if f21_arg2 then
			f21_local6 = 1
		else
			f21_local6 = 0
		end
		f21_local4( f21_local5, f21_local6, f21_local3 )
	end
end

local f0_local4 = function ( f18_arg0, f18_arg1 )
	local f18_local0 = nil
	local f18_local1 = function ()
		if f18_arg0._unlockAnimationCounter <= AAR.MAX_UNLOCK_DISPLAY_NUM then
			local f19_local0 = f18_arg0._unlockWidgets[f18_arg0._unlockAnimationCounter]
			if f19_local0 then
				f19_local0:PlayIntro()
				f19_local0:SetAlpha( 0 )
				f19_local0:SetAlpha( 1, f18_arg0 )
				f18_arg0._unlockAnimationCounter = f18_arg0._unlockAnimationCounter + 1
				local f19_local1 = f18_arg0:Wait( f18_arg0 / 2 )
				f19_local1.onComplete = function ()
					return f19_local0()
				end
				
			end
		end
	end
	
	f18_local1()
end

local f0_local5 = function ( f17_arg0, f17_arg1, f17_arg2 )
	f17_arg0._unlocks = f17_arg2
	if f17_arg0._unlocks and 0 < #f17_arg0._unlocks then
		for f17_local0 = 1, AAR.MAX_UNLOCK_DISPLAY_NUM, 1 do
			local f17_local3 = f17_arg0._unlocks[f17_local0]
			local f17_local4 = f17_arg0._unlockWidgets[f17_local0]
			if f17_local3 then
				f17_local4.Type:setText( AAR.GetUnlockTypeName( f17_local3.lootType ) )
				f17_local4.Title:setText( f17_local3.name )
				f17_local4:SetUpLayout( f17_arg1, f17_local3.icon )
				f17_local4._unlockTypeSound = SOUND_SETS.aarrewards.unlocks
				if f17_local4.Type == LOOT.itemTypes.WEAPON then
					f17_local4._unlockTypeSound = SOUND_SETS.aarrewards.weaponUnlocks
				end
				if f17_local4.Type == LOOT.itemTypes.PERK then
					f17_local4._unlockTypeSound = SOUND_SETS.aarrewards.perkRankUp
				end
				if f17_local4.Type == LOOT.itemTypes.STREAK then
					f17_local4._unlockTypeSound = SOUND_SETS.aarrewards.killstreakUnlock
				end
				if f17_local4.Type == LOOT.itemTypes.EQUIPMENT then
					f17_local4._unlockTypeSound = SOUND_SETS.aarrewards.equipmentRankUp
				end
			end
			f17_local4.Title:setText( "" )
			f17_local4.Icon:SetAlpha( 0 )
		end
		ACTIONS.AnimateSequence( f17_arg0, "UnlocksLayout" .. math.min( #f17_arg0._unlocks, AAR.MAX_UNLOCK_DISPLAY_NUM ) )
	end
end

local f0_local6 = function ( f14_arg0, f14_arg1 )
	local f14_local0 = f14_arg0._unlocks
	if f14_local0 then
		f14_local0 = 0 < #f14_arg0._unlocks
	end
	local f14_local1 = f0_local0
	if f14_local0 then
		f14_local1 = 1000 + f0_local0 + math.min( #f14_arg0._unlocks, AAR.MAX_UNLOCK_DISPLAY_NUM ) * f0_local0
	end
	ACTIONS.AnimateSequence( f14_arg0.RankUpItem, "Intro" )
	f14_arg0.Cinematic:SetAlpha( 1 )
	ACTIONS.AnimateSequence( f14_arg0, "RankUp" )
	Engine[0xFCF332AA8AC9B0F]( "mp_aar_rankup" )
	local f14_local2 = f14_arg0:Wait( 450 )
	f14_local2.onComplete = function ()
		Engine[0xC4146BA76D0F982]( SOUND_SETS.aarrewards.playerRankUp )
	end
	
	f14_local2 = f14_arg0:Wait( f0_local0 )
	f14_local2.onComplete = function ()
		f14_arg0.Cinematic:SetAlpha( 0 )
		Engine[0x3DACD106DDC0D71]()
		if f14_arg0 then
			f14_arg0( f14_arg0, f14_arg0 )
		end
	end
	
	return f14_local1
end

local f0_local7 = function ( f12_arg0, f12_arg1, f12_arg2, f12_arg3 )
	local f12_local0 = 120
	local f12_local1, f12_local2, f12_local3, f12_local4 = f12_arg0.RankUpItem.RankValue:getLocalRect()
	f12_arg0.RankUpItem.RankValue:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, f12_local1, f12_local3, -f12_local0 * _1080p, 0 )
	f12_arg0.RankUpItem.RankValue:SetFontSize( f12_local0 * _1080p )
	f12_arg0.RankUpItem.RankValue:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU/RANK_VALUE", f12_arg2.rankDisplay ) )
	if f12_arg2.rankIcon and 0 < #f12_arg2.rankIcon then
		f12_arg0.RankUpItem.RankIcon:setImage( RegisterMaterial( f12_arg2.rankIcon ) )
	end
	if f12_arg3 then
		local f12_local5 = f12_arg0:Wait( f0_local0( f12_arg0, f12_arg1 ) )
		f12_local5.onComplete = function ()
			f12_arg0._unlockAnimationCounter = 1
			f12_arg0( f12_arg0, f12_arg0, false )
			f12_arg0:dispatchEventToCurrentMenu( {
				name = AAR.PARADE_PROGRESS_DONE
			} )
		end
		
	end
end

local f0_local8 = function ( f10_arg0, f10_arg1 )
	local f10_local0 = f0_local0
	ACTIONS.AnimateSequence( f10_arg0.RankUpItem, "Intro" )
	f10_arg0.Cinematic:SetAlpha( 1 )
	ACTIONS.AnimateSequence( f10_arg0, "RankUp" )
	Engine[0xFCF332AA8AC9B0F]( "mp_aar_rankup" )
	Engine[0xC4146BA76D0F982]( SOUND_SETS.aarrewards.playerRankUp )
	local f10_local1 = f10_arg0:Wait( f10_local0 )
	f10_local1.onComplete = function ()
		f10_arg0.Cinematic:SetAlpha( 0 )
		Engine[0x3DACD106DDC0D71]()
	end
	
	return f10_local0
end

local f0_local9 = function ( f8_arg0, f8_arg1, f8_arg2 )
	local f8_local0 = 50
	local f8_local1, f8_local2, f8_local3, f8_local4 = f8_arg0.RankUpItem.RankValue:getLocalRect()
	f8_arg0.RankUpItem.RankValue:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, f8_local1, f8_local3, -f8_local0 * _1080p, 0 )
	f8_arg0.RankUpItem.RankValue:SetFontSize( f8_local0 * _1080p )
	f8_arg0.RankUpItem.RankValue:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( "AAR/OFFICER_RANK_UNLOCKED" ) ) )
	f8_arg0.RankUpItem.RankIcon:setImage( RegisterMaterial( "icon_rank_officer_00" ) )
	local f8_local5 = f8_arg0:Wait( f0_local0( f8_arg0, f8_arg1 ) )
	f8_local5.onComplete = function ()
		f8_arg0._unlockAnimationCounter = 1
		f8_arg0( f8_arg0, f8_arg0, false )
		f8_arg0:dispatchEventToCurrentMenu( {
			name = AAR.PARADE_ELDER_RANK_INTRO_DONE
		} )
	end
	
end

local f0_local10 = function ( f7_arg0, f7_arg1, f7_arg2 )
	f7_arg0._unlockAnimationCounter = 1
	f7_arg0.PlayAARRankUpSequence = f0_local0
	f7_arg0.PlayAARElderRankIntroSequence = f0_local0
	f7_arg0.SetupAARUnlocksData = f0_local0
	f7_arg0._unlockWidgets = {
		f7_arg0.Unlock1,
		f7_arg0.Unlock2,
		f7_arg0.Unlock3
	}
end

function AARRankUpContainer( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "AARRankUpContainer"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	self._sequenceLengths = self._sequenceLengths or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local Background = nil
	
	Background = LUI.UIImage.new()
	Background.id = "Background"
	Background:SetRGBFromInt( 0, 0 )
	self:addElement( Background )
	self.Background = Background
	
	local Cinematic = nil
	
	Cinematic = MenuBuilder.BuildRegisteredType( "Cinematic", {
		controllerIndex = f1_local1
	} )
	Cinematic.id = "Cinematic"
	Cinematic:SetVisibility( LUI.Visibility.Hidden )
	Cinematic:SetAlpha( 0, 0 )
	self:addElement( Cinematic )
	self.Cinematic = Cinematic
	
	local Unlock3 = nil
	
	Unlock3 = MenuBuilder.BuildRegisteredType( "AARParadeUnlockItem", {
		controllerIndex = f1_local1
	} )
	Unlock3.id = "Unlock3"
	Unlock3:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, _1080p * 194, _1080p * 444, _1080p * -735, _1080p * -435 )
	self:addElement( Unlock3 )
	self.Unlock3 = Unlock3
	
	local Unlock2 = nil
	
	Unlock2 = MenuBuilder.BuildRegisteredType( "AARParadeUnlockItem", {
		controllerIndex = f1_local1
	} )
	Unlock2.id = "Unlock2"
	Unlock2:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, _1080p * -125, _1080p * 125, _1080p * -735, _1080p * -435 )
	self:addElement( Unlock2 )
	self.Unlock2 = Unlock2
	
	local Unlock1 = nil
	
	Unlock1 = MenuBuilder.BuildRegisteredType( "AARParadeUnlockItem", {
		controllerIndex = f1_local1
	} )
	Unlock1.id = "Unlock1"
	Unlock1:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, _1080p * -444, _1080p * -194, _1080p * -735, _1080p * -435 )
	self:addElement( Unlock1 )
	self.Unlock1 = Unlock1
	
	local RankUpItem = nil
	
	RankUpItem = MenuBuilder.BuildRegisteredType( "AARRankUpItem", {
		controllerIndex = f1_local1
	} )
	RankUpItem.id = "RankUpItem"
	RankUpItem:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -180, _1080p * 180, _1080p * -355, _1080p * 159 )
	self:addElement( RankUpItem )
	self.RankUpItem = RankUpItem
	
	local f1_local9 = nil
	Unlock3:RegisterAnimationSequence( "DefaultSequence", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	Unlock2:RegisterAnimationSequence( "DefaultSequence", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	Unlock1:RegisterAnimationSequence( "DefaultSequence", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.DefaultSequence = function ()
		menu:AnimateSequence( "DefaultSequence" )
		menu:AnimateSequence( "DefaultSequence" )
		menu:AnimateSequence( "DefaultSequence" )
	end
	
	self._sequenceLengths.DefaultSequence = 0
	local f1_local10 = nil
	Unlock3:RegisterAnimationSequence( "RankUp", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	Unlock2:RegisterAnimationSequence( "RankUp", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	Unlock1:RegisterAnimationSequence( "RankUp", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.RankUp = function ()
		menu:AnimateSequence( "RankUp" )
		menu:AnimateSequence( "RankUp" )
		menu:AnimateSequence( "RankUp" )
	end
	
	self._sequenceLengths.RankUp = 0
	local f1_local11 = nil
	Unlock3:RegisterAnimationSequence( "UnlocksLayout3", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 194
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 444
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -735
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * -435
		}
	} )
	Unlock2:RegisterAnimationSequence( "UnlocksLayout3", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -125
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 125
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -735
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * -435
		}
	} )
	Unlock1:RegisterAnimationSequence( "UnlocksLayout3", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -444
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -194
		}
	} )
	self._sequences.UnlocksLayout3 = function ()
		menu:AnimateSequence( "UnlocksLayout3" )
		menu:AnimateSequence( "UnlocksLayout3" )
		menu:AnimateSequence( "UnlocksLayout3" )
	end
	
	self._sequenceLengths.UnlocksLayout3 = 0
	local f1_local12 = nil
	Unlock3:RegisterAnimationSequence( "UnlocksLayout2", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 245
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 100
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 645
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 324
		}
	} )
	Unlock2:RegisterAnimationSequence( "UnlocksLayout2", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * -435
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -735
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 120
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 370
		}
	} )
	Unlock1:RegisterAnimationSequence( "UnlocksLayout2", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -350
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -100
		}
	} )
	self._sequences.UnlocksLayout2 = function ()
		menu:AnimateSequence( "UnlocksLayout2" )
		menu:AnimateSequence( "UnlocksLayout2" )
		menu:AnimateSequence( "UnlocksLayout2" )
	end
	
	self._sequenceLengths.UnlocksLayout2 = 0
	local f1_local13 = nil
	Unlock3:RegisterAnimationSequence( "UnlocksLayout1", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 100
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 324
		}
	} )
	Unlock2:RegisterAnimationSequence( "UnlocksLayout1", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 100
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 324
		}
	} )
	Unlock1:RegisterAnimationSequence( "UnlocksLayout1", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -125
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 125
		}
	} )
	self._sequences.UnlocksLayout1 = function ()
		menu:AnimateSequence( "UnlocksLayout1" )
		menu:AnimateSequence( "UnlocksLayout1" )
		menu:AnimateSequence( "UnlocksLayout1" )
	end
	
	self._sequenceLengths.UnlocksLayout1 = 0
	f0_local0( self, f1_local1, controller )
	ACTIONS.AnimateSequence( self, "DefaultSequence" )
	return self
end

MenuBuilder.registerType( "AARRankUpContainer", AARRankUpContainer )
LockTable( _M )
