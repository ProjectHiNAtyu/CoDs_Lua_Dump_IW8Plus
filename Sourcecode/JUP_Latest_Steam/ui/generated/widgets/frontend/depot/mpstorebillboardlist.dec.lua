-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
module( ..., package.seeall )
require( "ui.generated.widgets.frontend.store.storebillboarditem" )
require( "ui.generated.widgets.frontend.depot.billboardfocusarea" )
require( "ui.generated.widgets.frontend.depot.billboardarrows" )
require( "ui.generated.widgets.frontend.pipswithnavigation" )
require( "ui.generated.widgets.frontend.depot.nomoreitemsmessage" )
require( "ui.generated.widgets.frontend.mp.eventbanner" )
require( "ui.generated.widgets.supportingcreatorcode", false )
local f0_local0 = 600
local f0_local1 = 400
local f0_local2 = 328
local f0_local3 = 256
local f0_local4 = 20
local f0_local5 = 70
local f0_local6 = 3000
local f0_local7 = function ( f65_arg0, f65_arg1 )
	f65_arg0.BillboardArrows:SetAlpha( f65_arg1 )
end

local f0_local8 = function ( f64_arg0, f64_arg1 )
	local f64_local0 = LUI.FlowManager.GetScopedData( f64_arg0 )
	local f64_local1 = f64_local0._selectedColumn or 1
	if f64_local0.previewBundleID then
		if 0 < PROXY_LOOT.IsOwned( f64_arg0._controllerIndex, tonumber( f64_local0.previewBundleID ) ) then
			f64_local1 = f64_arg1
		end
		f64_local0.previewBundleID = nil
	end
	f64_arg0.BillboardGrid:SetNumColumns( f64_arg1 + 2 )
	f64_arg0.BillboardGrid:RefreshContent()
	f64_arg0.BillboardGrid:SetTargetColumn( f64_local1, false, true )
	local f64_local2 = LUI.IsLastInputKeyboardMouse( f64_arg0._controllerIndex )
	if 1 < f64_arg1 then
		f64_arg0.PipsWithNavigation.Pips:Resize( f64_arg1 )
		f64_arg0.PipsWithNavigation.Pips:UpdateChildren( f64_local1 - 1, 0 )
		f64_arg0.PipsWithNavigation:SetAlpha( 1 )
		f64_arg0.BillboardFocusArea:SetArrowsState( f64_local2 )
		if not f64_local2 then
			f0_local0( f64_arg0, 1 )
		end
	else
		f64_arg0.PipsWithNavigation:SetAlpha( 0 )
		f64_arg0.BillboardFocusArea:SetArrowsState( false )
		if not f64_local2 then
			f0_local0( f64_arg0, 0 )
		end
	end
	f64_arg0.BillboardGrid._selectedColumn = f64_local1
end

local f0_local9 = function ( f63_arg0 )
	if f63_arg0._storeEmpty then
		if f63_arg0._lowestAvailableTime ~= "9999999999" and f63_arg0._lowestTimeDvar ~= "" then
			local f63_local0, f63_local1, f63_local2 = STORE.GetCategoryTimeLeft( f63_arg0._lowestTimeDvar )
			local f63_local3 = Engine[0xED84C33EC5F01EA]( 0x31E1A8651A3B742, f63_local1 )
			ACTIONS.AnimateSequence( f63_arg0.StoreEmpty, "Big" )
			f63_arg0.StoreEmpty:SetupEventBanner( f63_local3, 15 )
		end
	else
		f63_arg0.StoreEmpty:SetAlpha( 0 )
	end
end

local f0_local10 = function ( f62_arg0 )
	f62_arg0._storeEmpty = true
	f62_arg0._lowestAvailableTime = "9999999999"
	f62_arg0._lowestTimeDvar = ""
	for f62_local0 = 1, #f62_arg0._allCategoryData, 1 do
		local f62_local3 = f62_arg0._allCategoryData[f62_local0]
		if f62_local3.timerPubVar then
			local f62_local4 = Dvar[0x54084D7CA2317BB]( f62_local3.timerPubVar )
			if not f62_local4 or 0 >= #f62_local4 or not f62_local4 then
				f62_local4 = CoD.GetUTC()
			end
			if 0 < Engine[0x81B9C166599CE22]( tostring( f62_local4 ) ) and f62_local4 < f62_arg0._lowestAvailableTime then
				f62_arg0._lowestAvailableTime = f62_local4
				f62_arg0._lowestTimeDvar = f62_local3.timerPubVar
			end
		end
		if not f62_local3.items[1].emptyCategory and not f62_local3.items[1].usesFirstPartyStore then
			f62_arg0._storeEmpty = false
		end
	end
	f0_local0( f62_arg0 )
end

local f0_local11 = function ( f61_arg0, f61_arg1, f61_arg2 )
	local f61_local0 = {}
	local f61_local1 = f61_arg2.items[1] or {}
	if f61_arg2.idPubVar and f61_local1.layoutOnlyItem then
		local f61_local2 = Dvar[0x54084D7CA2317BB]( f61_arg2.idPubVar ) or ""
		if f61_arg2.justForYou and f61_arg0._recommendations then
			f61_arg0.recommendationData = {
				items = f61_arg0._recommendations,
				isEnabled = true
			}
			f61_local2 = STORE.FormatRecommendationItems( f61_arg0._recommendations .. "," .. f61_local2 )
		end
		local f61_local3 = split( f61_local2, "," )
		local f61_local4 = 0
		for f61_local5 = 1, #f61_local3, 1 do
			local f61_local8 = tonumber( f61_local3[f61_local5] )
			if STORE.BundleAvailable( f61_arg1, f61_local8 ) then
				local f61_local9 = LUI.DeepCopy( f61_local1 )
				f61_local9.emptyCategory = false
				f61_local9.id = f61_local8
				local f61_local10 = CSV.ReadRow( {
					file = CSV.bundleIDs.file,
					cols = CSV.bundleIDs.cols
				}, StringTable[0x8073B436CDE1BF]( CSV.bundleIDs.file, CSV.bundleIDs.cols.id, f61_local3[f61_local5] ) )
				f61_local9.name = f61_local10.name
				f61_local9.asset = f61_local10.image
				f61_local9.description = STORE.GetBundleDescription( f61_local9.id, f61_arg0._totalCP )
				f61_local9.rarity = f61_local10.rarity
				f61_local9.bundleType = f61_local10.bundleType
				f61_local9.titleImage = f61_local10.titleImage
				f61_local9.currencyID = tonumber( f61_local10.currencyID )
				f61_local9.currencyAmount = tonumber( f61_local10.currencyAmount )
				local f61_local11
				if 0 < #f61_local10.firstPartyProductID then
					f61_local11 = f61_local10.firstPartyProductID
					if not f61_local11 then
					
					else
						f61_local9.firstPartyProductID = f61_local11
						table.insert( f61_local0, f61_local9 )
						f61_local4 = f61_local4 + 1
					end
				end
				f61_local11 = nil
			end
			if f61_local4 == f61_arg2.numItemsShown then
				break
			end
		end
	end
	if #f61_local0 == 0 then
		local f61_local2 = LUI.DeepCopy( f61_local1 )
		if not f61_local2.usesFirstPartyStore then
			f61_local2.emptyCategory = true
			f61_local2.titleImage = nil
			f61_local2.asset = "mw_store_billboard_placeholder"
		end
		table.insert( f61_local0, f61_local2 )
	end
	f61_arg2.items = f61_local0
end

local f0_local12 = function ( f53_arg0 )
	return function ( f54_arg0, f54_arg1, f54_arg2 )
		f53_arg0._scrollDirection = {
			LEFT = 1,
			RIGHT = 2
		}
		local f54_local0 = {
			{
				columnChange = 4294967295,
				resetScrollTimer = f53_arg0._gridRightScrollTimerHolder,
				scrollTimerHolder = f53_arg0._gridLeftScrollTimerHolder
			},
			{
				columnChange = 1,
				resetScrollTimer = f53_arg0._gridLeftScrollTimerHolder,
				scrollTimerHolder = f53_arg0._gridRightScrollTimerHolder
			}
		}
		f53_arg0.ChangeSelection = function ( f59_arg0, f59_arg1 )
			Engine[0xC4146BA76D0F982]( SOUND_SETS.storefront.triggerNavigation )
			if f59_arg1 and f54_arg0.DisableAutoScrollTimer then
				f54_arg0.DisableAutoScrollTimer()
			end
			if not f54_arg0._selectedCategory or not f54_arg0 or not f54_arg0[f54_arg0._selectedCategory] or not f54_arg0[f54_arg0._selectedCategory].items then
				
			end
			local f59_local0 = #f54_arg0[f54_arg0._selectedCategory].items
			if 1 < f59_local0 then
				f54_arg0.PipsWithNavigation.Pips:Resize( f59_local0 )
				local f59_local1 = f54_arg0[f59_arg0]
				local f59_local2 = 0
				local f59_local3 = f59_local0
				if f59_arg0 == f54_arg0.RIGHT then
					f59_local2 = f59_local0 + 1
					f59_local3 = 1
				end
				f59_local1.resetScrollTimer:Wait( 1, true )
				if f59_arg0 == f54_arg0.LEFT then
					f54_arg0._gridRightWaitTweenActive = false
				else
					f54_arg0._gridLeftWaitTweenActive = false
				end
				if not (f59_arg0 ~= f54_arg0.LEFT or not f54_arg0._gridLeftWaitTweenActive) or f59_arg0 == f54_arg0.RIGHT and f54_arg0._gridRightWaitTweenActive then
					f59_local1.scrollTimerHolder:Wait( 1, true )
					f54_arg0.BillboardGrid:SetTargetColumn( f59_local3, false, true )
					f54_arg0.BillboardGrid._selectedColumn = f59_local3
					if f59_arg0 == f54_arg0.LEFT then
						f54_arg0._gridLeftWaitTweenActive = false
					else
						f54_arg0._gridRightWaitTweenActive = false
					end
				end
				local f59_local4 = f54_arg0.BillboardGrid._selectedColumn + f59_local1.columnChange
				f54_arg0.BillboardGrid._selectedColumn = f59_local4
				f54_arg0.BillboardGrid:SetTargetColumn( f59_local4, false, false )
				if f59_local4 == f59_local2 then
					f59_local4 = f59_local3
					if f59_arg0 == f54_arg0.LEFT then
						f54_arg0._gridLeftWaitTweenActive = true
					else
						f54_arg0._gridRightWaitTweenActive = true
					end
					local f59_local5 = f59_local1.scrollTimerHolder:Wait( f54_arg0 )
					f59_local5.onComplete = function ()
						f59_arg0.BillboardGrid:SetTargetColumn( f59_arg0, false, true )
						f59_arg0.BillboardGrid._selectedColumn = f59_arg0
						if f59_arg0 == f59_arg0.LEFT then
							f59_arg0._gridLeftWaitTweenActive = false
						else
							f59_arg0._gridRightWaitTweenActive = false
						end
					end
					
				end
				f54_arg0.PipsWithNavigation.Pips:UpdateChildren( f59_local4 - 1, 0 )
			end
		end
		
		local f54_local1 = function ()
			local f58_local0 = #f54_arg0[f54_arg0._selectedCategory].items
			local f58_local1 = f54_arg0.BillboardGrid._selectedColumn
			if f58_local1 == 0 then
				f58_local1 = f58_local0
			elseif f58_local0 < f58_local1 then
				f58_local1 = 1
			end
			local f58_local2 = f54_arg0[f54_arg0._selectedCategory]
			local f58_local3 = f58_local2.items[f58_local1]
			if QUARTERMASTER.itemData.sessionId ~= nil then
				QUARTERMASTER.RecordMenuBrowseEvent( f54_arg0._controllerIndex, false )
			end
			QUARTERMASTER.BeginMenuBrowseEvent( f58_local2, f58_local3 )
		end
		
		local f54_local2 = function ( f57_arg0, f57_arg1 )
			f54_arg0( f54_arg0.LEFT, true )
			if 1 < #f54_arg0[f54_arg0._selectedCategory].items then
				f54_arg0()
			end
			return true
		end
		
		local f54_local3 = function ( f56_arg0, f56_arg1 )
			f54_arg0( f54_arg0.RIGHT, true )
			if 1 < #f54_arg0[f54_arg0._selectedCategory].items then
				f54_arg0()
			end
			return true
		end
		
		local f54_local4 = function ( f55_arg0, f55_arg1 )
			if f55_arg1.down and f55_arg1.qualifier == "mousewheel" then
				if f55_arg1.button == "up" then
					f54_arg0( f55_arg0, f55_arg1 )
				else
					f54_arg0( f55_arg0, f55_arg1 )
				end
			end
		end
		
		f53_arg0:AddGamepadEventCallback( "button_left_trigger", f54_local2 )
		f53_arg0:AddGamepadEventCallback( "button_right_trigger", f54_local3 )
		f53_arg0.BillboardFocusArea:SetLeftNavigationHandler( f54_local2 )
		f53_arg0.BillboardFocusArea:SetRightNavigationHandler( f54_local3 )
		f53_arg0.BillboardFocusArea:SetGamepadButtonHandler( f54_local4 )
	end
	
end

local f0_local13 = function ( f52_arg0, f52_arg1, f52_arg2 )
	local f52_local0, f52_local1 = STORE.GetIndexForBundle( f52_arg1, f52_arg0._controllerIndex )
	if f52_local0 and f52_local1 then
		local f52_local2 = f52_arg0.categoryButtonsContainer:GetElementAtIndex( f52_local0 )
		if f52_local2 then
			f52_arg0.categoryButtonsContainer:processEvent( {
				name = "lose_focus"
			} )
			f52_local2:processEvent( {
				name = "gain_focus"
			} )
			f52_arg0.BillboardGrid._selectedColumn = f52_local1
			f52_arg0.BillboardGrid:SetTargetColumn( f52_local1, false, true )
			if f52_arg2 then
				f52_local2:processEvent( {
					name = "button_action"
				} )
			end
		end
	else
		LUI.FlowManager.RequestPopupMenu( f52_arg0, "PopupOK", true, controllerIndex, false, {
			message = Engine[0xED84C33EC5F01EA]( 0x9E5E1EC4414E3B5 )
		} )
	end
end

local f0_local14 = function ( f51_arg0, f51_arg1 )
	local f51_local0 = STORE.GetCategoryIndex( f51_arg0._controllerIndex, f51_arg1 )
	if f51_local0 and f51_arg0.categoryButtonsContainer then
		local f51_local1 = f51_arg0.categoryButtonsContainer:GetElementAtIndex( f51_local0 )
		if f51_local1 then
			f51_arg0.categoryButtonsContainer:processEvent( {
				name = "lose_focus"
			} )
			f51_local1:processEvent( {
				name = "gain_focus"
			} )
			return 
		end
	end
end

local f0_local15 = function ( f4_arg0, f4_arg1, f4_arg2 )
	f4_arg0.FocusBundleByID = function ( f50_arg0, f50_arg1, f50_arg2 )
		f4_arg0( f4_arg0, f50_arg1, f50_arg2 )
	end
	
	f4_arg0.FocusButtonByName = function ( f49_arg0, f49_arg1 )
		f4_arg0( f4_arg0, f49_arg1 )
	end
	
	ACTIONS.AnimateSequence( f4_arg0.BillboardArrows, "Intro" )
	Engine[0x685AE31DEDA30A4]( "quartermaster" )
	f4_arg0:addElement( LOOT.GetLootFlareMaterialStreamer() )
	f4_arg0._controllerIndex = f4_arg1
	f4_arg0._totalCP = 0
	if QUARTERMASTER.itemData then
		QUARTERMASTER.itemData = {}
	end
	f4_arg0._itemsFocused = false
	f4_arg0.BackButtonOverride = function ( f48_arg0, f48_arg1 )
		local f48_local0 = LUI.FlowManager.GetScopedData( f48_arg0 )
		if f48_local0.useStandaloneStore then
			LUI.FlowManager.RequestLeaveMenu( f48_arg0 )
		elseif f4_arg0._itemsFocused and f4_arg0.container then
			f4_arg0.container:processEvent( {
				name = "lose_focus"
			} )
			f4_arg0._categoryWidget:processEvent( {
				name = "gain_focus"
			} )
			f4_arg0._itemsFocused = false
		else
			local f48_local1
			if f48_arg1.qualifier == "keyboard" or f48_arg1.qualifier == "gamepad" then
				f48_local1 = false
			else
				f48_local1 = true
			end
			local f48_local2
			if f48_local1 then
				f48_local2 = FocusType.MouseOver
				if not f48_local2 then
				
				else
					local f48_local3 = f48_arg0:getParent()
					f48_local3.Tabs:FocusTab( f48_arg1.controller or f4_arg0, 0, f48_local2 )
				end
			end
			f48_local2 = FocusType.Gamepad
		end
		return false
	end
	
	f4_arg0:addEventHandler( "menu_create", function ( f47_arg0, f47_arg1 )
		local f47_local0 = LUI.FlowManager.GetScopedData( f47_arg0 )
		if f47_local0._selectedCategory then
			local f47_local1 = f4_arg0.categoryButtonsContainer:GetElementAtIndex( f47_local0._selectedCategory )
			f4_arg0._categoryWidget = f47_local1
			f4_arg0._itemsFocused = true
			f47_local1:processEvent( {
				name = "gain_focus"
			} )
			f4_arg0.categoryButtonsContainer:processEvent( {
				name = "lose_focus"
			} )
		end
	end )
	local f4_local0 = function ( f46_arg0 )
		local self = LUI.UIHorizontalList.new()
		self:SetAnchorsAndPosition( 0, 1, 0, 1, 616, 1790, 216, 800 )
		self:SetSpacing( 8 )
		f46_arg0.container = self
		f46_arg0:addElement( self )
	end
	
	local f4_local1 = function ()
		if f4_arg0.container then
			f4_arg0.container:closeTree()
			f4_arg0.container = nil
		end
		f4_arg0.ContainerBuilder = f4_arg0
		f4_arg0( f4_arg0 )
	end
	
	f4_arg0._gridLeftScrollTimerHolder = LUI.UIElement.new()
	f4_arg0:addElement( f4_arg0._gridLeftScrollTimerHolder )
	f4_arg0._gridLeftWaitTweenActive = false
	f4_arg0._gridRightScrollTimerHolder = LUI.UIElement.new()
	f4_arg0:addElement( f4_arg0._gridRightScrollTimerHolder )
	f4_arg0._gridRightWaitTweenActive = false
	local f4_local2 = {
		default = {
			categoryButtonContainer = {
				widgetType = "MPDepotMenuVerticalButtons",
				anchors = {
					top = 0,
					bot = 1,
					left = 0,
					right = 1
				},
				positions = {
					top = 216,
					bot = 503,
					left = 130,
					right = 590
				}
			},
			categoryButton = {
				widgetType = "MPMenuButton",
				anchors = {
					top = 0,
					bot = 1,
					left = 0,
					right = 1
				},
				positions = {
					top = 0,
					bot = 40,
					left = 0,
					right = 460
				},
				events = {
					nil,
					"button_over",
					"button_action"
				}
			},
			storeCustomizations = {
				pre = {
					f4_local1
				}
			}
		},
		[StoreItemLayout.BILLBOARD_LIST] = {
			categoryButtonContainer = {
				widgetType = "MPDepotMenuHorizontalButtons",
				anchors = {
					top = 5.29462817E-315,
					bot = 5.29462817E-315,
					left = 0,
					right = 0
				},
				positions = {
					top = 256,
					bot = 440,
					left = f0_local0,
					right = -f0_local0
				}
			},
			categoryButton = {
				widgetType = "MPBillboardMenuButton",
				anchors = {
					top = 5.29462817E-315,
					bot = 5.29462817E-315,
					left = 5.29462817E-315,
					right = 5.29462817E-315
				},
				positions = {
					top = 4294967204,
					bot = -36,
					left = 4294967132,
					right = 164
				},
				events = {
					nil,
					"button_over",
					"button_action",
					"gain_focus"
				},
				buttonCustomizations = {}
			},
			storeCustomizations = {
				pre = {
					f0_local0( f4_arg0 ),
					function ( f43_arg0, f43_arg1, f43_arg2 )
						f4_arg0.BillboardGrid._disableMouseWheel = true
						if LUI.IsLastInputKeyboardMouse( f4_arg0 ) then
							f4_arg0.BillboardGrid:SetAlpha( 1 )
						end
						f4_arg0.BillboardFocusArea:SetBackgroundLeftMouseHandler( function ( f44_arg0, f44_arg1 )
							f43_arg0.BillboardCategoryButtonAction( f44_arg0._element, f44_arg1, f44_arg0._categoryData, f43_arg0 )
							return true
						end )
					end
				},
				post = {
					function ( f41_arg0, f41_arg1, f41_arg2 )
						f4_arg0.categoryButtonsContainer:SetNotifyOnLayoutInit( true )
						f4_arg0.categoryButtonsContainer:registerEventHandler( "layout_initialized", function ( element, event )
							if not f41_arg0._selectedCategory then
								f41_arg0:processEvent( {
									name = "lose_focus"
								} )
								element:processEvent( {
									name = "gain_focus"
								} )
							end
						end )
					end,
					function ( f39_arg0, f39_arg1, f39_arg2 )
						f4_arg0:SubscribeToInputTypeModel( f4_arg0._controllerIndex, function ( f40_arg0, f40_arg1 )
							if f40_arg1.BillboardFocusArea:isInFocus() then
								f40_arg1:processEvent( {
									name = "lose_focus"
								} )
								f40_arg1.categoryButtonsContainer:processEvent( {
									name = "gain_focus"
								} )
							end
							local f40_local0
							if CONDITION.IsKbm( f40_arg1._controllerIndex ) then
								f40_local0 = 0
							else
								f40_local0 = 1
							end
							f39_arg0( f40_arg1, f40_local0 )
						end )
					end
				}
			}
		}
	}
	local f4_local3 = function ( f38_arg0 )
		local f38_local0 = f4_arg0[f38_arg0]
		local f38_local1
		if not f38_local0 then
			f38_local1 = f38_local0
		else
			f38_local1 = f4_arg0.default
		end
		return f38_local1
	end
	
	local f4_local4 = function ( f37_arg0, f37_arg1, f37_arg2, f37_arg3 )
		if f37_arg0 then
			for f37_local3, f37_local4 in ipairs( f37_arg0 ) do
				f37_local4( f37_arg1, f37_arg2, f37_arg3 )
			end
		end
	end
	
	local f4_local5 = function ( f35_arg0, f35_arg1 )
		f35_arg0.Name:setText( Engine[0xED84C33EC5F01EA]( f35_arg1.name ) )
		if f35_arg0.Owned.Text then
			local f35_local0 = PROXY_LOOT.IsOwned( f4_arg0, f35_arg1.id )
			if 0 < f35_local0 then
				f35_arg0.Owned.Text:setText( f35_local0 )
				f35_arg0.Owned:SetAlpha( 1 )
			else
				f35_arg0.Owned.Text:setText( "" )
				f35_arg0.Owned:SetAlpha( 0 )
			end
		end
		f35_arg0:registerEventHandler( "button_action", function ( element, event )
			LUI.FlowManager.RequestAddMenu( "PurchaseItemMenu", true, f35_arg0, false, {
				crateID = f35_arg0.id
			} )
		end )
	end
	
	local f4_local6 = function ()
		if f4_arg0.container then
			f4_arg0.container:closeTree()
			f4_arg0.container = nil
		end
	end
	
	local f4_local7 = {
		{
			nil,
			"ItemAtom",
			"ItemTall"
		},
		{
			nil,
			"Item2x1Wide",
			"Item2x2Square"
		},
		{
			nil,
			"Item3x1Wide"
		}
	}
	local f4_local8 = {}
	local f4_local9 = function ( f33_arg0, f33_arg1, f33_arg2, f33_arg3, f33_arg4 )
		if not f4_arg0[f33_arg4] then
			local f33_local0 = 1
			local f33_local1 = 1
			if f33_arg1[f33_arg3 + 1] then
				
			else
				
			end
			if f33_arg2 == 1 and f33_arg0[f33_arg2 + 1][f33_arg3] == f33_arg4 then
				f33_local1 = f33_local1 + 1
			end
			f4_arg0[f33_arg4] = {
				width = f33_local0,
				height = f33_local1
			}
		end
	end
	
	local f4_local10 = {}
	local f4_local11 = function ( f32_arg0, f32_arg1, f32_arg2 )
		if not f4_arg0[f32_arg2] then
			f4_arg0[f32_arg2] = {
				row = f32_arg0,
				column = f32_arg1
			}
		end
	end
	
	local f4_local12 = 350 + 10
	local f4_local13 = {
		{
			{
				posL = 0,
				anchorL = 0,
				anchorT = 0,
				posB = 0,
				posT = 0,
				anchorB = 1,
				anchorR = 1,
				posR = 0
			},
			{
				anchorL = 0,
				anchorT = 0,
				posB = 0,
				posT = 0,
				anchorB = 1,
				anchorR = 1,
				posL = f4_local12,
				posR = f4_local12
			},
			{
				anchorL = 0,
				anchorT = 0,
				posB = 0,
				posT = 0,
				anchorB = 1,
				anchorR = 1,
				posL = 2 * f4_local12,
				posR = 2 * f4_local12
			}
		},
		{
			{
				posL = 0,
				anchorL = 0,
				anchorT = 0,
				anchorB = 1,
				anchorR = 1,
				posR = 0,
				posT = f4_local12,
				posB = f4_local12
			},
			{
				anchorL = 0,
				anchorT = 0,
				anchorB = 1,
				anchorR = 1,
				posL = f4_local12,
				posR = f4_local12,
				posT = f4_local12,
				posB = f4_local12
			},
			{
				anchorL = 0,
				anchorT = 0,
				anchorB = 1,
				anchorR = 1,
				posL = 2 * f4_local12,
				posR = 2 * f4_local12,
				posT = f4_local12,
				posB = f4_local12
			}
		}
	}
	local f4_local14 = {}
	local f4_local15 = function ( f31_arg0 )
		for f31_local0 = 1, #f31_arg0.items, 1 do
			local f31_local3 = f31_arg0.items[f31_local0]
			local f31_local4 = nil
			local f31_local5 = f31_local3.order
			local f31_local6 = f4_arg0[f31_local5]
			local f31_local7 = f4_arg0[f31_local6.width][f31_local6.height]
			local f31_local8 = f4_arg0[f31_local5]
			local f31_local9 = f4_arg0[f31_local8.row][f31_local8.column]
			f31_local4 = MenuBuilder.BuildRegisteredType( f31_local7, {
				controllerIndex = f4_arg0
			} )
			f31_local4.id = tostring( f31_local3.id )
			f4_arg0( f31_local4, f31_local3 )
			f4_arg0.container:addElement( f31_local4 )
			local f31_local10 = 0
			local f31_local11 = 0
			if 1 < f31_local6.width then
				f31_local10 = f4_arg0 * (f31_local6.width - 1)
			end
			if 1 < f31_local6.height then
				f31_local11 = f4_arg0 * (f31_local6.height - 1)
			end
			f31_local4:SetAnchorsAndPosition( f31_local9.anchorL, f31_local9.anchorR, f31_local9.anchorT, f31_local9.anchorB, f31_local9.posL, f31_local9.posR + f31_local6.width * f4_arg0 + f31_local10, f31_local9.posT, f31_local9.posB + f31_local6.height * f4_arg0 + f31_local11 )
			f4_arg0[f31_local5] = f31_local4
		end
	end
	
	local f4_local16 = {}
	local f4_local17 = function ( f30_arg0, f30_arg1, f30_arg2, f30_arg3, f30_arg4 )
		local f30_local0, f30_local1, f30_local2, f30_local3 = nil
		if not f4_arg0[f30_arg4] then
			f4_arg0[f30_arg4] = {}
			if f30_arg1[f30_arg3 - 1] and f30_arg1[f30_arg3 - 1] ~= f30_arg4 then
				f4_arg0[f30_arg4].left = f30_arg1[f30_arg3 - 1]
			end
			if f30_arg2 == 1 then
				local f30_local4 = f30_arg0[f30_arg2 + 1]
				if f30_local4[f30_arg3] ~= f30_arg4 and not f30_local3 then
					f4_arg0[f30_arg4].down = f30_local4[f30_arg3]
				end
			elseif f30_arg2 == 2 then
				local f30_local4 = f30_arg0[f30_arg2 - 1]
				if f30_local4[f30_arg3] ~= f30_arg4 and not f30_local2 then
					f4_arg0[f30_arg4].up = f30_local4[f30_arg3]
				end
			end
			if f30_arg1[f30_arg3 + 1] then
				
			else
				
			end
		end
	end
	
	local f4_local18 = function ()
		for f29_local0 = 1, #f4_arg0, 1 do
			local f29_local3 = f4_arg0[f29_local0]
			local f29_local4 = f4_arg0[f29_local0]
			f29_local3.navigation = {}
			if f29_local4.left then
				f29_local3.navigation.left = f4_arg0[f29_local4.left]
			end
			if f29_local4.right then
				f29_local3.navigation.right = f4_arg0[f29_local4.right]
			end
			if f29_local4.up then
				f29_local3.navigation.up = f4_arg0[f29_local4.up]
			end
			if f29_local4.down then
				f29_local3.navigation.down = f4_arg0[f29_local4.down]
			end
		end
	end
	
	local f4_local19 = function ( f28_arg0 )
		f4_arg0 = {}
		f4_arg0 = {}
		f4_arg0 = {}
		f4_arg0 = {}
		for f28_local0 = 1, #f28_arg0, 1 do
			local f28_local3 = f28_arg0[f28_local0]
			for f28_local7, f28_local8 in ipairs( f28_local3 ) do
				f4_arg0( f28_local0, f28_local7, f28_local8 )
				f4_arg0( f28_arg0, f28_local3, f28_local0, f28_local7, f28_local8 )
				f4_arg0( f28_arg0, f28_local3, f28_local0, f28_local7, f28_local8 )
			end
		end
	end
	
	local f4_local20 = {
		button_over = {
			default = function ( f27_arg0, f27_arg1, f27_arg2, f27_arg3 )
				f4_arg0()
				local self = LUI.UIHorizontalList.new()
				self:SetAnchorsAndPosition( 0, 1, 0, 1, 616, 1790, 253, 800 )
				self:SetSpacing( 8 )
				f4_arg0.container = self
				f4_arg0:addElement( self )
				for f27_local1 = 1, #f27_arg2.items, 1 do
					local f27_local4 = f27_arg2.items[f27_local1]
					local f27_local5 = nil
					if f27_arg2.layoutType == StoreItemLayout.COMPACT then
						f27_local5 = MenuBuilder.BuildRegisteredType( "ItemCompact", {
							controllerIndex = f4_arg0
						} )
					elseif f27_arg2.layoutType == StoreItemLayout.TALL then
						f27_local5 = MenuBuilder.BuildRegisteredType( "ItemTall", {
							controllerIndex = f4_arg0
						} )
					else
						
					end
					f27_local5.id = tostring( f27_local4.id )
					f4_arg0( f27_local5, f27_local4 )
					f4_arg0.container:addElement( f27_local5 )
				end
			end,
			[StoreItemLayout.SQUARES] = function ( f24_arg0, f24_arg1, f24_arg2, f24_arg3 )
				f4_arg0()
				local self = LUI.UIGrid.new( {
					scrollingThresholdX = 1,
					spacingX = 2,
					buildArrowsLabel = false,
					maxVelocity = 5000,
					wrapX = true,
					adjustSizeToContent = false,
					scrollingThresholdY = 1,
					columnWidth = 300,
					maxVisibleColumns = 4,
					maxVisibleRows = 2,
					wrapY = true,
					rowHeight = 300,
					spacingY = 2,
					springCoefficient = 400,
					controllerIndex = f4_arg0,
					buildChild = function ()
						return MenuBuilder.BuildRegisteredType( "ItemSquare", {
							controllerIndex = f24_arg0
						} )
					end,
					refreshChild = function ( f25_arg0, f25_arg1, f25_arg2 )
						local f25_local0 = f24_arg0.items[f25_arg1 + 1 + f25_arg2 * 4]
						if not f25_local0 then
							f25_local0 = f24_arg0.items[2]
						end
						if f25_local0 then
							f24_arg0( f25_arg0, f25_local0 )
						end
					end,
					horizontalAlignment = LUI.Alignment.Left,
					verticalAlignment = LUI.Alignment.Top
				} )
				self.id = "container"
				self:setUseStencil( true )
				self:SetAnchorsAndPosition( 0, 1, 0, 1, 584, 1790, 239, 841 )
				f4_arg0.container = self
				f4_arg0:addElement( self )
				self:SetNumChildren( 8 )
			end,
			[StoreItemLayout.CUSTOM] = function ( f23_arg0, f23_arg1, f23_arg2, f23_arg3 )
				f4_arg0()
				f4_arg0( Engine[0x7EC0C425E339DCD]( f4_arg0, f23_arg2.layoutName ) )
				local self = LUI.UIElement.new()
				self:SetAnchorsAndPosition( 0, 1, 0, 1, 616, 1790, 216, 800 )
				self:SetSpacing( 8 )
				self.custom = true
				self.elements = f4_arg0
				f4_arg0.container = self
				f4_arg0:addElement( self )
				f4_arg0( f23_arg2 )
				f4_arg0()
			end,
			[StoreItemLayout.BILLBOARD_LIST] = function ( f21_arg0, f21_arg1, f21_arg2, f21_arg3 )
				local f21_local0 = f21_arg2.items
				if QUARTERMASTER.itemData and QUARTERMASTER.itemData.sessionId ~= nil and f21_arg2.categoryIndex ~= QUARTERMASTER.itemData.category_index then
					QUARTERMASTER.RecordMenuBrowseEvent( f4_arg0, false )
				end
				QUARTERMASTER.BeginMenuBrowseEvent( f21_arg2, f21_local0[1] )
				f4_arg0.BillboardFocusArea:SetCurrentCategoryData( f21_arg0, f21_arg2 )
				local f21_local1 = function ( f22_arg0, f22_arg1, f22_arg2 )
					local f22_local0 = f22_arg1
					if f22_arg1 == 0 then
						f22_local0 = #f21_arg0.items
					elseif f22_arg1 == #f21_arg0.items + 1 then
						f22_local0 = 1
					end
					local f22_local1 = f21_arg0.items[f22_local0]
					if not f22_local1.usesFirstPartyStore then
						f22_local1.usesFirstPartyStore = false
					end
					f22_arg0:UpdateBillboard( f22_local1, f22_local1.usesFirstPartyStore )
				end
				
				f4_arg0.BillboardGrid:SetAlpha( 1 )
				f4_arg0.BillboardGrid:SetRefreshChild( f21_local1 )
				f4_arg0.BillboardGrid:SetNumRows( 1 )
				local f21_local2 = f21_arg2.categoryIndex - 1
				local f21_local3 = f21_local2 * f4_arg0
				local f21_local4 = f21_local2 * f4_arg0
				local f21_local5 = (f4_arg0 - f4_arg0) / 2
				if f4_arg0.categoryButtonsContainer._currentActiveButton ~= f21_arg0 then
					f4_arg0( f4_arg0, #f21_local0 )
				end
				f4_arg0.BillboardFocusArea:SetCurrentCategoryData( f21_arg0, f21_arg2 )
				local f21_local6 = LUI.FlowManager.GetScopedData( f4_arg0 )
				f21_local6._selectedColumn = 1
				f4_arg0._selectedCategory = f21_arg2.categoryIndex
				f4_arg0:dispatchEventToChildren( {
					name = "categoryTimerUpdate"
				} )
				if f4_arg0.DisableAutoScrollTimer then
					f4_arg0.DisableAutoScrollTimer()
				end
			end
		},
		button_action = {
			default = function ( f20_arg0, f20_arg1, f20_arg2, f20_arg3 )
				f20_arg0:processEvent( {
					name = "lose_focus"
				} )
				f4_arg0.container:processEvent( {
					name = "gain_focus"
				} )
				f4_arg0._itemsFocused = true
				f4_arg0._categoryWidget = f20_arg0
				local f20_local0 = LUI.FlowManager.GetScopedData( f4_arg0 )
				f20_local0._selectedCategory = f4_arg0.categoryButtonsContainer:GetIndexForElement( f20_arg0 )
			end,
			[StoreItemLayout.CUSTOM] = function ( f19_arg0, f19_arg1, f19_arg2, f19_arg3 )
				f19_arg0:processEvent( {
					name = "lose_focus"
				} )
				f4_arg0.container.elements[1]:processEvent( {
					name = "gain_focus"
				} )
				f4_arg0._itemsFocused = true
				f4_arg0._categoryWidget = f19_arg0
				local f19_local0 = LUI.FlowManager.GetScopedData( f4_arg0 )
				f19_local0._selectedCategory = f4_arg0.categoryButtonsContainer:GetIndexForElement( f19_arg0 )
			end,
			[StoreItemLayout.BILLBOARD_LIST] = function ( f18_arg0, f18_arg1, f18_arg2, f18_arg3 )
				local f18_local0 = f4_arg0.BillboardGrid._selectedColumn or 1
				if f18_local0 == 0 then
					f18_local0 = #f18_arg2.items
				elseif f18_local0 == #f18_arg2.items + 1 then
					f18_local0 = 1
				end
				local f18_local1 = LUI.FlowManager.GetScopedData( f4_arg0 )
				f18_local1._selectedColumn = f18_local0
				local f18_local2 = f18_arg2.items[f18_local0]
				f18_local1._selectedCategory = f18_arg2.categoryIndex
				if not f18_local2.usesFirstPartyStore then
					if f18_local2.emptyCategory then
						return 
					end
					QUARTERMASTER.CoalesceBrowseData()
					QUARTERMASTER.RecordMenuBrowseEvent( f4_arg0, true )
					STORE.MarkItemSeen( f4_arg0, f18_local2.id )
					f4_arg0.BillboardGrid:RefreshContent()
					if f18_local2.firstPartyProductID then
						if STORE.IsGameUpsellBundle( f18_local2.id ) then
							LUI.FlowManager.RequestPopupMenu( f4_arg0, "StoreGameUpsellPopup", true, f4_arg0, false, {
								defaultProductId = f18_local2.firstPartyProductID
							} )
						else
							InGameStore.SelectProduct( f4_arg0, f18_local2.firstPartyProductID, InGameStorePurchaseType.BROWSE )
						end
						return 
					end
					local f18_local3 = {
						bundleID = f18_local2.id,
						rarity = f18_local2.rarity,
						description = f18_local2.description,
						bundleType = f18_local2.bundleType,
						titleImage = f18_local2.titleImage,
						currencyID = f18_local2.currencyID,
						currencyAmount = f18_local2.currencyAmount,
						startPurchaseImmediately = f4_arg0._startPurchaseImmediately
					}
					if not f18_arg2.justForYou then
						f18_local3.timerPubVar = f18_arg2.timerPubVar
					end
					f18_local1.previewBundleID = f18_local2.id
					LUI.FlowManager.RequestAddMenu( "StoreBundlePreview", true, f4_arg0, false, f18_local3 )
				else
					QUARTERMASTER.RecordMenuBrowseEvent( f4_arg0, true )
					local f18_local3 = STORE.GoToStore
					local f18_local4 = f4_arg0
					local f18_local5 = f4_arg0:GetCurrentMenu()
					f18_local3( f18_local4, f18_local5.id, f18_arg0.id )
				end
			end
		},
		gain_focus = {
			[StoreItemLayout.BILLBOARD_LIST] = function ( f17_arg0, f17_arg1, f17_arg2, f17_arg3 )
				f17_arg0:ScaleButtonUp()
				if f4_arg0.categoryButtonsContainer then
					if f4_arg0.categoryButtonsContainer._currentActiveButton and f4_arg0.categoryButtonsContainer._currentActiveButton ~= f17_arg0 then
						ACTIONS.AnimateSequence( f4_arg0.categoryButtonsContainer._currentActiveButton, "ButtonUp" )
						f4_arg0.categoryButtonsContainer._currentActiveButton:ScaleButtonDown()
					end
					f4_arg0.categoryButtonsContainer._currentActiveButton = f17_arg0
				end
			end
		}
	}
	f4_arg0.BillboardCategoryButtonAction = f4_local20.button_action[StoreItemLayout.BILLBOARD_LIST]
	local f4_local21 = function ( f15_arg0, f15_arg1, f15_arg2, f15_arg3 )
		return function ( f16_arg0, f16_arg1 )
			local f16_local0 = f15_arg0[f15_arg0][f15_arg0]
			if f16_local0 then
				f16_local0( f16_arg0, f16_arg1, f15_arg0, f15_arg0 )
			elseif f15_arg0[f15_arg0].default then
				f16_local0 = f15_arg0[f15_arg0].default( f16_arg0, f16_arg1, f15_arg0, f15_arg0 )
			else
				return false
			end
		end
		
	end
	
	local f4_local22 = function ( f14_arg0, f14_arg1, f14_arg2, f14_arg3 )
		local f14_local0 = f14_arg2.events
		if f14_local0 then
			for f14_local4, f14_local5 in ipairs( f14_local0 ) do
				local f14_local6 = f4_arg0( f14_local5, f14_arg1, f14_arg3, f14_arg2 )
				if f14_local6 then
					f14_arg0:addEventHandler( f14_local5, f14_local6 )
				end
			end
		end
	end
	
	local f4_local23 = function ( f13_arg0 )
		local f13_local0 = f4_arg0( f13_arg0 )
		f13_local0 = f13_local0.categoryButtonContainer
		
		local categoryButtonsContainer = MenuBuilder.BuildRegisteredType( f13_local0.widgetType, {
			controllerIndex = f4_arg0,
			storeMenu = f4_arg0
		} )
		categoryButtonsContainer.id = "categoryButtonsContainer"
		local f13_local2 = f13_local0.anchors
		local f13_local3 = f13_local0.positions
		categoryButtonsContainer:SetAnchorsAndPosition( f13_local2.left, f13_local2.right, f13_local2.top, f13_local2.bot, f13_local3.left, f13_local3.right, f13_local3.top, f13_local3.bot )
		f4_arg0:addElement( categoryButtonsContainer )
		f4_arg0.categoryButtonsContainer = categoryButtonsContainer
		
	end
	
	local f4_local24 = function ( f11_arg0, f11_arg1 )
		local f11_local0 = f4_arg0( f11_arg0 )
		f11_local0 = f11_local0.categoryButton
		local f11_local1 = MenuBuilder.BuildRegisteredType( f11_local0.widgetType, {
			controllerIndex = f4_arg0
		} )
		local f11_local2 = Engine[0xED84C33EC5F01EA]( f11_arg1.name )
		f11_local1.id = f11_local2
		f11_local1.Text:setText( ToUpperCase( f11_local2 ) )
		local f11_local3 = f11_local0.anchors
		local f11_local4 = f11_local0.positions
		f11_local1:SetAnchorsAndPosition( f11_local3.left, f11_local3.right, f11_local3.top, f11_local3.bot, f11_local4.left, f11_local4.right, f11_local4.top, f11_local4.bot )
		f11_local1:setPriority( f11_arg1.categoryIndex - #f11_arg1 - 1 )
		if f11_arg1.asset then
			f11_local1.ItemImage:setImage( RegisterMaterial( f11_arg1.asset ) )
		end
		f4_arg0.categoryButtonsContainer:addElement( f11_local1 )
		f11_local1:registerEventHandler( "categoryTimerUpdate", function ( element, event )
			local f12_local0 = f11_arg0.items[1]
			if not f12_local0.usesFirstPartyStore then
				if f11_arg0.justForYou then
					if f11_arg0.categoryIndex == f11_arg0._selectedCategory then
						if f12_local0.emptyCategory then
							ACTIONS.AnimateSequence( f11_arg0.NoMoreItemsMessage, "Message" )
							f11_arg0.NoMoreItemsMessage.Title:setText( Engine[0xED84C33EC5F01EA]( 0xC6EF3C384D36B3B ) )
							f11_arg0.NoMoreItemsMessage:SetAlpha( 1 )
							ACTIONS.AnimateSequence( element, "CategoryEmpty" )
						else
							f11_arg0.NoMoreItemsMessage:SetAlpha( 0 )
							ACTIONS.AnimateSequence( element, "CategoryNotEmpty" )
						end
					end
				else
					local f12_local1, f12_local2, f12_local3 = STORE.GetCategoryTimeLeft( f11_arg0.timerPubVar )
					if not f11_arg0._timerValue and f12_local3 ~= "" then
						f11_arg0._timerValue = f12_local3
					end
					local f12_local4 = Dvar[0x54084D7CA2317BB]( f11_arg0.idPubVar ) or ""
					if not f11_arg0._idPubVarString and f12_local4 ~= "" then
						f11_arg0._idPubVarString = f12_local4
					end
					local f12_local5 = f12_local1 <= 0
					if f11_arg0.categoryIndex == f11_arg0._selectedCategory then
						if f12_local0.emptyCategory then
							ACTIONS.AnimateSequence( f11_arg0.NoMoreItemsMessage, "Message" )
							f11_arg0.NoMoreItemsMessage.Title:setText( Engine[0xED84C33EC5F01EA]( 0xC6EF3C384D36B3B ) )
							f11_arg0.NoMoreItemsMessage:SetAlpha( 1 )
						elseif f12_local0.emptyCategory then
							ACTIONS.AnimateSequence( f11_arg0.NoMoreItemsMessage, "Message" )
							f11_arg0.NoMoreItemsMessage.Title:setText( Engine[0xED84C33EC5F01EA]( 0xC6EF3C384D36B3B ) )
							f11_arg0.NoMoreItemsMessage:SetAlpha( 1 )
						else
							f11_arg0.NoMoreItemsMessage:SetAlpha( 0 )
						end
					end
					if f12_local0.emptyCategory then
						ACTIONS.AnimateSequence( element, "CategoryEmpty" )
					else
						ACTIONS.AnimateSequence( element, "CategoryNotEmpty" )
					end
					if not (not f11_arg0._timerValue or f11_arg0._timerValue == f12_local3) or f11_arg0._idPubVarString and f11_arg0._idPubVarString ~= f12_local4 then
						f11_arg0( f11_arg0, f11_arg0, f11_arg0 )
						f11_arg0( f11_arg0 )
						if f11_arg0.categoryIndex == f11_arg0._selectedCategory then
							f11_arg0( f11_arg0, #f11_arg0.items )
						end
						f11_arg0._timerValue = f12_local3
						f11_arg0._idPubVarString = f11_arg0.idPubVarString
					end
				end
			elseif f11_arg0.categoryIndex == f11_arg0._selectedCategory then
				f11_arg0.NoMoreItemsMessage:SetAlpha( 0 )
			end
			if element.NewItemNotification and STORE.CategoryHasNewItems( f11_arg0, f11_arg0 ) then
				element.NewItemNotification:SetAlpha( 1 )
			else
				element.NewItemNotification:SetAlpha( 0 )
			end
		end )
		return f11_local1
	end
	
	local f4_local25 = JSON[0x2165A8104C064EE]( Store[0xB6B0898C7795778]( f4_arg1 ) )
	local f4_local26 = STORE.GetCategoryData( f4_arg1 )
	f4_arg0._allCategoryData = f4_local26
	f4_arg0._recommendations = STORE.CheckForPersonalRecommendations( f4_arg1 )
	f4_arg0._categoryIndex = nil
	f4_arg0._currentButton = nil
	if not f4_arg0._recommendations then
		f4_arg0.recommendationData = {
			isEnabled = false
		}
	end
	for f4_local27 = 1, #f4_local26, 1 do
		local f4_local30 = f4_local26[f4_local27]
		f4_local30.items = f4_local30.items or {}
		f0_local0( f4_arg0, f4_arg1, f4_local30 )
	end
	f0_local0( f4_arg0 )
	f4_arg0.StoreEmpty:registerEventHandler( "categoryTimerUpdate", function ( element, event )
		f4_arg0( f4_arg0 )
	end )
	local f4_local27 = f4_local25.layoutType
	local f4_local28 = f4_local3( f4_local27 )
	QUARTERMASTER.RecordStoreEnterEvent( f4_arg1, f4_local27, f4_arg0.recommendationData )
	f4_local23( f4_local27 )
	if f4_local28.storeCustomizations then
		f4_local4( f4_local28.storeCustomizations.pre, f4_local26, f4_local28 )
	end
	for f4_local29 = 1, #f4_local26, 1 do
		local f4_local32 = f4_local26[f4_local29]
		f4_local32.categoryIndex = f4_local29
		if f4_local32.name then
			local f4_local33 = f4_local24( f4_local32.layoutType or f4_local27, f4_local32 )
			f4_local22( f4_local33, f4_local32.layoutType or f4_local27, f4_local28.categoryButton, f4_local32 )
			f4_local4( f4_local28.categoryButton.buttonCustomizations, f4_local32, f4_local28, {
				categoryButton = f4_local33
			} )
			f4_local33:addEventHandler( "button_over", function ( f9_arg0, f9_arg1 )
				f4_arg0._currentButton = f9_arg0
				f4_arg0._categoryIndex = f4_arg0
			end )
		end
	end
	if f4_local28.storeCustomizations then
		f4_local4( f4_local28.storeCustomizations.post, f4_local26, f4_local28, {
			buttonToFocus = f4_arg2.buttonToFocus
		} )
	end
	f4_arg0.BillboardGrid:SetNumRows( 1 )
	f4_arg0.BillboardGrid:SetNumColumns( 0 )
	local f4_local29 = LUI.UITimer.new( {
		interval = 1000,
		event = "categoryTimerUpdate"
	} )
	f4_local29.id = "timer"
	f4_arg0:addElement( f4_local29 )
	local f4_local31 = LUI.UITimer.new( {
		event = "autoScrollTimerUpdate",
		interval = f0_local0
	} )
	f4_local31.id = "autoScrollTimer"
	f4_arg0:addElement( f4_local31 )
	f4_arg0._autoScrollEnabled = true
	f4_arg0:registerEventHandler( "autoScrollTimerUpdate", function ( element, event )
		if f4_arg0.ChangeSelection and f4_arg0._autoScrollEnabled then
			f4_arg0.ChangeSelection( f4_arg0._scrollDirection.RIGHT, false )
		end
	end )
	f4_arg0._autoScrollEnabledTimerHolder = LUI.UIElement.new()
	f4_arg0:addElement( f4_arg0._autoScrollEnabledTimerHolder )
	f4_arg0.DisableAutoScrollTimer = function ()
		f4_arg0._autoScrollEnabled = false
		local f6_local0 = f4_arg0._autoScrollEnabledTimerHolder:Wait( Dvar[0x22EAAB59AA27E9B]( 0xD87E5A3D853D2F2 ), true )
		f6_local0.onComplete = function ()
			f6_local0._autoScrollEnabled = true
		end
		
	end
	
	f4_arg0:addEventHandler( "gamepad_button", function ( f5_arg0, f5_arg1 )
		if f5_arg1.controller ~= f4_arg0 then
			if f5_arg1.button == "primary" or f5_arg1.button == "alt1" or f5_arg1.button == "left_trigger" or f5_arg1.button == "right_trigger" or f5_arg1.button == "left" or f5_arg1.button == "right" then
				return true
			end
		elseif CONDITIONS.ButtonAltOne( f5_arg0, f5_arg1 ) then
			f5_arg0._startPurchaseImmediately = true
			f5_arg0.BillboardCategoryButtonAction( f5_arg0._currentButton, f5_arg1, f5_arg0._allCategoryData[f5_arg0._categoryIndex], f4_arg0 )
		elseif CONDITIONS.ButtonLeftStick( f5_arg0, f5_arg1 ) then
			local f5_local0 = Dvar[0x9E5BE3B4BBA4E0E]( 0x3DC3E3930B5C57D )
			local f5_local1 = f5_arg1.controller
			if f5_local0 then
				LUI.FlowManager.RequestPopupMenu( f5_arg0, "CreatorCodePopup", true, f5_local1, false )
			end
		end
	end )
end

function MPStoreBillboardList( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = MenuBuilder
	local f1_local2 = f1_local0.UIElement.new()
	f1_local2:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920, 0, 1080 )
	f1_local2.id = "MPStoreBillboardList"
	local f1_local3
	if f1_arg1 then
		f1_local3 = f1_arg1
	else
		f1_local3 = f1_arg1.controllerIndex
	end
	f1_local3 = f1_local0.ValidateControllerIndex( f1_local2, f1_local3 )
	local f1_local4 = nil
	f1_local4 = f1_local0.UIImage.new()
	f1_local4[0x8B72E07B55C3AC0] = "Background"
	ACTIONS.ScaleFullscreen( f1_local4 )
	f1_local4:SetRGB( 0, 0 )
	f1_local4:SetAlpha( 0.9, 0 )
	f1_local4:setImage( RegisterMaterial( 0x3A8F29C0EC8E46E ), 0 )
	f1_local2:addElement( f1_local4 )
	f1_local2[0xD4176E7CA246EDD] = f1_local4
	local f1_local5 = nil
	f1_local5 = f1_local0.UIGrid.new( {
		maxVisibleRows = 1,
		maxVisibleColumns = 1,
		spacingX = 0,
		wrapY = false,
		columnWidth = 1920,
		rowHeight = 580,
		spacingY = 0,
		controllerIndex = f1_local3,
		buildChild = function ()
			return f1_arg0.BuildRegisteredType( 0x13EDF1CE0AC8AB6, {
				controllerIndex = f1_arg0
			} )
		end,
		refreshChild = function ( f2_arg0, f2_arg1, f2_arg2 )
			
		end,
		primaryAxis = f1_local0.DIRECTION.horizontal
	} )
	f1_local5[0x8B72E07B55C3AC0] = "BillboardGrid"
	f1_local5:SetAlpha( 0, 0 )
	f1_local5:setUseStencil( true )
	f1_local5:SetAnchorsAndPosition( 0, 0, 0.5, 0.5, 0, 0, -290, 290 )
	f1_local2:addElement( f1_local5 )
	f1_local2[0xC254B4CBA15F84] = f1_local5
	local f1_local6 = nil
	f1_local6 = f1_local0.UIImage.new()
	f1_local6[0x8B72E07B55C3AC0] = "Overlay"
	f1_local6:SetRGB( 0, 0 )
	f1_local6:SetAlpha( 0.8, 0 )
	f1_local6:setImage( RegisterMaterial( 0x3A8F29C0EC8E46E ), 0 )
	f1_local6:SetAnchorsAndPosition( 0, 0, 0.5, 0.5, 0, 0, 100, 290 )
	f1_local2:addElement( f1_local6 )
	f1_local2[0xCB272120B109463] = f1_local6
	local f1_local7 = nil
	f1_local7 = f1_local1.BuildRegisteredType( 0x74F0CDD57D6B0BD, {
		controllerIndex = f1_local3
	} )
	f1_local7[0x8B72E07B55C3AC0] = "BillboardFocusArea"
	f1_local7:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -960, 960, -290, 290 )
	f1_local2:addElement( f1_local7 )
	f1_local2[0x74F0CDD57D6B0BD] = f1_local7
	local f1_local8 = nil
	f1_local8 = f1_local1.BuildRegisteredType( 0x63740231D00F622, {
		controllerIndex = f1_local3
	} )
	f1_local8[0x8B72E07B55C3AC0] = "BillboardArrows"
	f1_local8:SetAnchorsAndPosition( 0, 0, 0.5, 0.5, 0, 0, -290, 290 )
	f1_local2:addElement( f1_local8 )
	f1_local2[0x63740231D00F622] = f1_local8
	local f1_local9 = nil
	f1_local9 = f1_local1.BuildRegisteredType( 0xD47B24792F12BC9, {
		controllerIndex = f1_local3
	} )
	f1_local9[0x8B72E07B55C3AC0] = "PipsWithNavigation"
	f1_local9:SetAlpha( 0, 0 )
	f1_local9:SetScale( 0.5, 0 )
	f1_local9:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -128, 128, 200, 232 )
	f1_local2:addElement( f1_local9 )
	f1_local2[0xD47B24792F12BC9] = f1_local9
	local f1_local10 = nil
	f1_local10 = f1_local1.BuildRegisteredType( 0x75496EAAFE5BEF4, {
		controllerIndex = f1_local3
	} )
	f1_local10[0x8B72E07B55C3AC0] = "NoMoreItemsMessage"
	f1_local10:SetAlpha( 0, 0 )
	f1_local10:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -512, 512, -40, 40 )
	f1_local2:addElement( f1_local10 )
	f1_local2[0x75496EAAFE5BEF4] = f1_local10
	local f1_local11 = nil
	f1_local11 = f1_local1.BuildRegisteredType( 0x31B7C74FCC524F9, {
		controllerIndex = f1_local3
	} )
	f1_local11[0x8B72E07B55C3AC0] = "StoreEmpty"
	f1_local11:SetAlpha( 0, 0 )
	f1_local11[0xF3FC81DFCEB7D35]:SetRGB( SWATCHES[0x4EE54AD76B0BD8E][0x97A39F29ABD59A9], 0 )
	f1_local11[0xF3FC81DFCEB7D35]:SetAlpha( 1, 0 )
	f1_local11[0xC2F1BBAD18642AD]:SetRGB( SWATCHES[0x4EE54AD76B0BD8E][0xC83E71342B5A30E], 0 )
	f1_local11:SetAnchorsAndPosition( 0, 1, 0, 1, 96, 246, 196, 230 )
	f1_local2:addElement( f1_local11 )
	f1_local2[0xCDD4D5D376063A3] = f1_local11
	local f1_local12 = nil
	f1_local12 = f1_local0.UIImage.new()
	f1_local12[0x8B72E07B55C3AC0] = "CategoryLine"
	f1_local12:SetRGB( SWATCHES[0x1F5A9ABAC207F9D][0xA90E492E2D9DE74], 0 )
	f1_local12:setImage( RegisterMaterial( 0x5576BB3DF9CFC11 ), 0 )
	f1_local12:SetAnchorsAndPosition( 0, 0, 0.5, 0.5, 0, -700, 240, 241 )
	f1_local2:addElement( f1_local12 )
	f1_local2[0xB100A7229BC790B] = f1_local12
	local f1_local13 = nil
	f1_local13 = f1_local0.UIStyledText.new()
	f1_local13[0x8B72E07B55C3AC0] = "CategoryText"
	f1_local13:SetRGB( SWATCHES[0x1F5A9ABAC207F9D][0xA90E492E2D9DE74], 0 )
	f1_local13:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x8658037ABFC9F6 ) ), 0 )
	f1_local13:SetFont( FONTS.GetFont( FONTS.PrimaryBold.File ) )
	f1_local13:SetFontSize( 30 * _PT )
	f1_local13:SetMinFontSize( 18 * _PT )
	f1_local13:SetWordWrap( false )
	f1_local13:SetAlignment( f1_local0.Alignment.Left )
	f1_local13:SetOptOutRightToLeftAlignmentFlip( true )
	f1_local13:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, 70, 570, 209, 239 )
	f1_local2:addElement( f1_local13 )
	f1_local2[0x2E9D0AD87FA0242] = f1_local13
	local f1_local14 = nil
	f1_local14 = f1_local1.BuildRegisteredType( 0xDFF41418B5CE475, {
		controllerIndex = f1_local3
	} )
	f1_local14[0x8B72E07B55C3AC0] = "SupportingCreatorCode"
	f1_local14:SetAnchorsAndPosition( 0, 1, 0, 1, 1162, 1522, 172, 196 )
	f1_local2:addElement( f1_local14 )
	f1_local2[0xDFF41418B5CE475] = f1_local14
	f0_local0( f1_local2, f1_local3, f1_arg1 )
	return f1_local2
end

MenuBuilder.registerType( 0xF3347B33C95E3D8, MPStoreBillboardList )
LockTable( _M )
