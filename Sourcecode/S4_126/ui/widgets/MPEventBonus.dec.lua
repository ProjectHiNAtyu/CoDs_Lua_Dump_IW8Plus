-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
module( ..., package.seeall )
require( "ui.widgets.ButtonPromptContainer" )
require( "ui.widgets.LootItemCardMini" )
local f0_local0 = function ( f10_arg0, f10_arg1 )
	assert( f10_arg0._eventData and f10_arg0._challengesData )
	if f10_arg1 == LUI.GAME_SOURCE_ID.WARZONE then
		ACTIONS.AnimateSequence( f10_arg0, "Warzone" )
	else
		ACTIONS.AnimateSequence( f10_arg0, "Vanguard" )
	end
	f10_arg0.ItemList:closeChildren()
	local f10_local0 = 0
	local f10_local1 = 0
	for f10_local10, f10_local11 in ipairs( f10_arg0._challengesData.challenges ) do
		local f10_local5 = nil
		for f10_local6, f10_local7 in ipairs( f10_local11 ) do
			if f10_local7.gameSourceID == f10_arg1 then
				f10_local5 = f10_local7
			end
		end
		if f10_local5 then
			f10_local9 = MenuBuilder.BuildRegisteredType( "MPEventBonusItem", {
				controllerIndex = f10_arg0._controllerIndex
			} )
			f10_local9.id = "MPEventBonusItem_" .. f10_local10
			if f10_local5.complete then
				ACTIONS.AnimateSequence( f10_local9, "Checked" )
				f10_local0 = f10_local0 + 1
			else
				ACTIONS.AnimateSequence( f10_local9, "Unchecked" )
			end
			f10_local1 = f10_local1 + 1
			f10_arg0.ItemList:addElement( f10_local9 )
		end
	end
	f10_arg0.CompletedCountLabel:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU/X_OF_Y", f10_local0, f10_local1 ) )
	if IsLanguageChinese() or IsLanguageJapanese() then
		ACTIONS.AnimateSequence( f10_arg0, "JPZH" )
	end
end

local f0_local1 = function ( f9_arg0, f9_arg1, f9_arg2 )
	f9_arg0._eventData = f9_arg1
	f9_arg0._challengesData = f9_arg2
	if f9_arg0._eventData.bonusAchievementDescription then
		f9_arg0.BonusDescription:setText( Engine[0xED84C33EC5F01EA]( f9_arg0._eventData.bonusAchievementDescription ) )
	end
	if f9_arg0._eventData.bonusAchievementTitle then
		f9_arg0.BonusLabel:setText( Engine[0xED84C33EC5F01EA]( f9_arg0._eventData.bonusAchievementTitle ) )
	end
	f9_arg0._bonusLootType = nil
	f9_arg0._bonusLootItemID = nil
	if f9_arg2.bonusChallenge then
		f9_arg0.LootItemCard:SetVisible( true )
		local f9_local0 = Challenge.GetRewardDataForTier( f9_arg0._controllerIndex, f9_arg2.bonusChallenge, f9_arg2.bonusChallenge.activeTier )
		local f9_local1
		if f9_local0 then
			f9_local1 = f9_local0
		else
			f9_local1 = f9_local0[1]
		end
		if not f9_local1 then
			LUI.FlowManager.RequestErrorPopup( "Invalid Data", "Bonus Challenge has no reward" )
			f9_arg0.LootItemCard:SetVisible( false )
			f9_arg0.PreviewBonusPromptContainer:SetVisible( false )
		else
			f9_arg0.LootItemCard:UpdateCardConfig( f9_local1 )
			local f9_local2 = f9_arg2.bonusChallenge.complete
			local f9_local3 = f9_arg0.LootItemCard.UnlockStateImage
			local f9_local4 = f9_local3
			f9_local3 = f9_local3.setImage
			local f9_local5 = RegisterMaterial
			local f9_local6
			if f9_local2 then
				f9_local6 = "v_ui_icon_checkmark_01"
			else
				f9_local6 = "v_ui_icon_lock"
			end
			f9_local3( f9_local4, f9_local5( f9_local6 ) )
			f9_local3 = f9_arg0.LootItemCard.UnlockStateImage
			f9_local4 = f9_local3
			f9_local3 = f9_local3.SetRGBFromTable
			if f9_local2 then
				f9_local5 = SWATCHES.highlight.vYellowHighlight
				if not f9_local5 then
				
				else
					f9_local3( f9_local4, f9_local5 )
					f9_arg0.LootItemCard.UnlockStateImage:SetVisible( true )
					ACTIONS.AnimateSequence( f9_arg0.LootItemCard, "Mini" )
					f9_arg0.PreviewBonusPromptContainer:SetVisible( true )
					f9_local3 = f9_local1.itemID or f9_local1.ID
					local f9_local7 = f9_local1.type
					if f9_local1.type == LOOT.itemTypes.T9_MISC or f9_local1.type == LOOT.itemTypes.WZ_MISC then
						f9_local7 = LOOT.GetMiscItemRealType( f9_local1.type, f9_local1.ref )
					end
					f9_arg0._bonusLootType = f9_local7
					f9_arg0._bonusLootItemID = f9_local3
				end
			end
			f9_local5 = SWATCHES.highlight.vDefaultHighlight
		end
	else
		f9_arg0.LootItemCard:SetVisible( false )
		f9_arg0.PreviewBonusPromptContainer:SetVisible( false )
	end
end

local f0_local2 = function ( f6_arg0, f6_arg1, f6_arg2 )
	f6_arg0._controllerIndex = f6_arg1
	f6_arg0._eventData = nil
	f6_arg0._challengesData = nil
	f6_arg0._bonusLootType = nil
	f6_arg0._bonusLootItemID = nil
	f6_arg0.Setup = f0_local0
	f6_arg0.SetGameSourceID = f0_local0
	if not f6_arg0.bindButton then
		local self = LUI.UIBindButton.new()
		self.id = "selfBindButton"
		f6_arg0:addElement( self )
		f6_arg0.bindButton = self
	end
	f6_arg0.bindButton:registerEventHandler( "button_right_trigger", function ( element, event )
		if f6_arg0._bonusLootType and f6_arg0._bonusLootItemID then
			STORE.PreviewItem( f6_arg0, f6_arg0._bonusLootType, f6_arg0._bonusLootItemID, nil, nil, true )
		end
	end )
	f6_arg0:registerEventHandler( "on_close", function ( element )
		element:RemoveButtonHelperText( "button_right_trigger", "left" )
	end )
end

function MPEventBonus( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 525 * _1080p, 0, 200 * _1080p )
	self.id = "MPEventBonus"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	self._sequenceLengths = self._sequenceLengths or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local Prompt = nil
	
	Prompt = LUI.UIStyledText.new()
	Prompt.id = "Prompt"
	Prompt:SetVisibility( LUI.Visibility.Hidden )
	Prompt:setText( "(R2) PREVIEW", 0 )
	Prompt:SetFont( FONTS.GetFont( FONTS.MainRegularHeader.File ) )
	Prompt:SetFontSize( 16 * _PT )
	Prompt:SetMinFontSize( 16 * _PT )
	Prompt:SetWordWrap( false )
	Prompt:SetAlignment( LUI.Alignment.Left )
	Prompt:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 148, _1080p * 280, _1080p * 150, _1080p * 179 )
	self:addElement( Prompt )
	self.Prompt = Prompt
	
	local CompletedCountLabel = nil
	
	CompletedCountLabel = LUI.UIStyledText.new()
	CompletedCountLabel.id = "CompletedCountLabel"
	CompletedCountLabel:SetRGBFromTable( SWATCHES.text.offwhite, 0 )
	CompletedCountLabel:setText( "0/6", 0 )
	CompletedCountLabel:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_MHeader.font.File ) )
	CompletedCountLabel:SetFontSize( FONT_STYLES.fontStyle_MHeader.size )
	CompletedCountLabel:SetMinFontSize( FONT_STYLES.fontStyle_MHeader.minSize )
	CompletedCountLabel:SetWordWrap( false )
	CompletedCountLabel:SetTracking( -1 * _1080p, 0 )
	CompletedCountLabel:SetLeading( -2 * _1080p, 0 )
	CompletedCountLabel:SetAlignment( LUI.Alignment.Left )
	CompletedCountLabel:SetVerticalAlignment( LUI.Alignment.Center )
	CompletedCountLabel:SetMaxVisibleLines( 1 )
	CompletedCountLabel:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 474, _1080p * 524, _1080p * 110, _1080p * 142 )
	self:addElement( CompletedCountLabel )
	self.CompletedCountLabel = CompletedCountLabel
	
	local ItemList = nil
	
	ItemList = LUI.UIHorizontalList.new( {
		controller = f1_local1,
		direction = LUI.DIRECTION.horizontal,
		horizontalAlignment = LUI.Alignment.None,
		verticalAlignment = LUI.Alignment.None,
		spacing = 5 * _1080p
	} )
	ItemList.id = "ItemList"
	ItemList:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 270, _1080p * 466, _1080p * 112, _1080p * 136 )
	self:addElement( ItemList )
	self.ItemList = ItemList
	
	local GameLogo = nil
	
	GameLogo = LUI.UIImage.new()
	GameLogo.id = "GameLogo"
	GameLogo:setImage( RegisterMaterial( "v_ui_icon_snipe_warzone" ), 0 )
	GameLogo:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 160, _1080p * 256, _1080p * 110, _1080p * 146 )
	self:addElement( GameLogo )
	self.GameLogo = GameLogo
	
	local Divider = nil
	
	Divider = LUI.UIImage.new()
	Divider.id = "Divider"
	Divider:SetRGBFromTable( SWATCHES.highlight.vDefaultHighlight, 0 )
	Divider:SetAlpha( 0.35, 0 )
	Divider:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 158, _1080p * 510, _1080p * 102, _1080p * 103 )
	self:addElement( Divider )
	self.Divider = Divider
	
	local BonusDescription = nil
	
	BonusDescription = LUI.UIStyledText.new()
	BonusDescription.id = "BonusDescription"
	BonusDescription:SetRGBFromTable( SWATCHES.text.vTextOffWhite, 0 )
	BonusDescription:SetAlpha( 0.75, 0 )
	BonusDescription:setText( Engine[0xED84C33EC5F01EA]( "LEP/ONBOARDING_3_DESC" ), 0 )
	BonusDescription:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_MBodyText.font.File ) )
	BonusDescription:SetFontSize( FONT_STYLES.fontStyle_MBodyText.size )
	BonusDescription:SetMinFontSize( FONT_STYLES.fontStyle_MBodyText.minSize )
	BonusDescription:SetWordWrap( true )
	BonusDescription:SetTracking( FONT_STYLES.fontStyle_MBodyText.tracking * _1080p, 0 )
	BonusDescription:SetLeading( FONT_STYLES.fontStyle_MBodyText.leading * _1080p, 0 )
	BonusDescription:SetAlignment( LUI.Alignment.Left )
	BonusDescription:SetMaxVisibleLines( 4 )
	BonusDescription:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 158, _1080p * 510, _1080p * 25, _1080p * 104 )
	self:addElement( BonusDescription )
	self.BonusDescription = BonusDescription
	
	local BonusLabel = nil
	
	BonusLabel = LUI.UIStyledText.new()
	BonusLabel.id = "BonusLabel"
	BonusLabel:SetRGBFromTable( SWATCHES.text.vTextOffWhite, 0 )
	BonusLabel:SetAlpha( 0.75, 0 )
	BonusLabel:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU/CHURN_TITLE_1" ), 0 )
	BonusLabel:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_MHeaderBold.font.File ) )
	BonusLabel:SetFontSize( FONT_STYLES.fontStyle_MHeaderBold.size )
	BonusLabel:SetMinFontSize( FONT_STYLES.fontStyle_MHeaderBold.minSize )
	BonusLabel:SetWordWrap( false )
	BonusLabel:SetAlignment( LUI.Alignment.Left )
	BonusLabel:SetMaxVisibleLines( 1 )
	BonusLabel:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 157, _1080p * 509, _1080p * -8, _1080p * 32 )
	self:addElement( BonusLabel )
	self.BonusLabel = BonusLabel
	
	local PreviewBonusPromptContainer = nil
	PreviewBonusPromptContainer = MenuBuilder.BuildRegisteredType( "ButtonPromptContainer", {
		controllerIndex = f1_local1
	} )
	PreviewBonusPromptContainer.id = "PreviewBonusPromptContainer"
	if CONDITIONS.AlwaysFalse() then
		PreviewBonusPromptContainer.Label:setText( "", 0 )
	end
	if CONDITIONS.AlwaysFalse() then
		PreviewBonusPromptContainer.Label:SetAlignment( LUI.Alignment.Left )
	end
	PreviewBonusPromptContainer:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 15, _1080p * 479, _1080p * 174, _1080p * 206 )
	self:addElement( PreviewBonusPromptContainer )
	self.PreviewBonusPromptContainer = PreviewBonusPromptContainer
	
	local LootItemCard = nil
	
	LootItemCard = MenuBuilder.BuildRegisteredType( "LootItemCardMini", {
		controllerIndex = f1_local1
	} )
	LootItemCard.id = "LootItemCard"
	LootItemCard:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 15, _1080p * 138, 0, _1080p * 164 )
	self:addElement( LootItemCard )
	self.LootItemCard = LootItemCard
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	self._sequenceLengths.DefaultSequence = 0
	local f1_local12 = nil
	GameLogo:RegisterAnimationSequence( "Warzone", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Material,
			value = RegisterMaterial( "v_ui_icon_snipe_warzone" )
		}
	} )
	self._sequences.Warzone = function ()
		menu:AnimateSequence( "Warzone" )
	end
	
	self._sequenceLengths.Warzone = 0
	local f1_local13 = nil
	GameLogo:RegisterAnimationSequence( "Vanguard", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Material,
			value = RegisterMaterial( "v_ui_icon_snipe_vanguard" )
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 254
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 143
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 158
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 111
		}
	} )
	self._sequences.Vanguard = function ()
		menu:AnimateSequence( "Vanguard" )
	end
	
	self._sequenceLengths.Vanguard = 0
	local f1_local14 = nil
	f1_local14 = {}
	f1_local14 = {}
	self._sequences.JPZH = function ()
		menu:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_SSubHeader.font.File ) )
		menu:SetFontSize( FONT_STYLES.fontStyle_SSubHeader.size )
		menu:SetMinFontSize( FONT_STYLES.fontStyle_SSubHeader.minSize )
		menu:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_SHeaderBold.font.File ) )
		menu:SetFontSize( FONT_STYLES.fontStyle_SHeaderBold.size )
		menu:SetMinFontSize( FONT_STYLES.fontStyle_SHeaderBold.minSize )
	end
	
	self._sequenceLengths.JPZH = 0
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "MPEventBonus", MPEventBonus )
LockTable( _M )
