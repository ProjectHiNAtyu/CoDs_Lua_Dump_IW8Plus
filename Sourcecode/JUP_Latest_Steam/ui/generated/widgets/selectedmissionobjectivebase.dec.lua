-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:02
module( ..., package.seeall )
local f0_local0 = 500
local f0_local1 = 356
local f0_local2 = 56
local f0_local3 = -56
local f0_local4 = -356
local f0_local5 = function ( f10_arg0, f10_arg1 )
	ACTIONS.AnimateSequence( f10_arg0, "TempProgressOn" )
	if f10_arg0.ProgressBarTemp then
		f10_arg0.ProgressBarTemp:SetImmediateProgress( 0 )
	end
	local f10_local0 = DMZ.GetPMCMissionLootItems( f10_arg1 )
	local f10_local1 = DMZ.GetPMCMissionLootFormat( f10_arg1 )
	if f10_arg1 and f10_local0 and f10_local1 then
		local f10_local2 = false
		local f10_local3 = 0
		local f10_local4 = f10_arg1.amountNeeded
		local f10_local5 = f10_arg1.amountEarned
		if 0 < #f10_local0 then
			local f10_local6 = {}
			if f10_local1 == DMZ.PMCMissionLootFormat.MULTIPLE_LOOT_IDS then
				for f10_local7 = 1, #f10_local0, 1 do
					f10_local6.lootID = f10_local0[f10_local7]
					f10_local3 = f10_local3 + (INVENTORY.GetItemCountInInventory( f10_local6 ) or 0)
				end
			elseif f10_local1 == DMZ.PMCMissionLootFormat.SINGLE_LOOT_ID then
				f10_local6.lootID = f10_local0[1]
				f10_local3 = f10_local3 + (INVENTORY.GetItemCountInInventory( f10_local6 ) or 0)
			elseif f10_local1 == DMZ.PMCMissionLootFormat.LOOT_TYPE then
				f10_local6.itemType = f10_local0[1]
				f10_local3 = f10_local3 + (INVENTORY.GetItemCountInInventory( f10_local6 ) or 0)
			end
		end
		f10_local5 = f10_local5 + f10_local3
		f10_local2 = f10_local4 <= f10_local5
		local f10_local6 = LUI.clamp( tonumber( string.format( "%.2f", f10_local5 / f10_local4 ) ), 0, 1 )
		if f10_arg0.ProgressBarTemp then
			local f10_local7 = f10_arg0.ProgressBarTemp
			local f10_local9 = f10_local7
			f10_local7 = f10_local7.SetImmediateProgress
			local f10_local10
			if not f10_local6 then
				f10_local10 = f10_local6
			else
				f10_local10 = 0
			end
			f10_local7( f10_local9, f10_local10 )
		end
		local f10_local7
		if f10_local2 then
			f10_local7 = f10_local2
		else
			f10_local7 = f10_arg1.lootMethod == "EXTRACT"
		end
		local f10_local8 = ACTIONS.AnimateSequence
		local f10_local10 = f10_arg0
		local f10_local11
		if f10_local7 then
			f10_local11 = "ExtractIconOn"
		else
			f10_local11 = "ExtractIconOff"
		end
		f10_local8( f10_local10, f10_local11 )
		f10_local8 = 0 and 0xA7DF0E51076E7D4 or 0x858FC6D8EE26029
		if f10_arg0.ProgressCount then
			f10_arg0.ProgressCount:setText( Engine[0xED84C33EC5F01EA]( f10_local8, LUI.clamp( f10_local5, 0, f10_local4 ), f10_local4 ) )
		end
	end
end

local f0_local6 = function ( f9_arg0, f9_arg1, f9_arg2 )
	local f9_local0 = f9_arg1.forAAR and f9_arg1.wasMissionCompleteBeforeMatch
	f9_arg0._objectiveID = f9_arg1.id
	if not (f9_arg1.forAAR or not f9_arg1.completed) or f9_local0 then
		ACTIONS.AnimateSequence( f9_arg0, "Completed" )
	else
		ACTIONS.AnimateSequence( f9_arg0, "InProgress" )
	end
	if IsLanguageRightToLeft( GetCurrentLanguage() ) then
		if f9_arg0.ProgressBar then
			f9_arg0.ProgressBar:SetAnchorsAndPosition( 1, 0, 0, 1, f0_local0, f0_local0, 53, 61 )
		end
		if f9_arg0.ProgressBarTemp then
			f9_arg0.ProgressBarTemp:SetAnchorsAndPosition( 1, 0, 0, 1, f0_local0, f0_local0, 53, 61 )
		end
	else
		if f9_arg0.ProgressBar then
			f9_arg0.ProgressBar:SetAnchorsAndPosition( 0, 1, 0, 1, f0_local0, f0_local0, 53, 61 )
		end
		if f9_arg0.ProgressBarTemp then
			f9_arg0.ProgressBarTemp:SetAnchorsAndPosition( 0, 1, 0, 1, f0_local0, f0_local0, 53, 61 )
		end
	end
	local f9_local1 = string.format( "%0d", f9_arg1.amountEarned )
	local f9_local2 = f9_arg1.amountNeeded
	local f9_local3 = 0
	if 9999 < f9_local2 then
		f9_local3 = 72
		f9_local1 = string.format( "%05d", f9_arg1.amountEarned )
	elseif 999 < f9_local2 then
		f9_local3 = 54
		f9_local1 = string.format( "%04d", f9_arg1.amountEarned )
	elseif 99 < f9_local2 then
		f9_local3 = 32
		f9_local1 = string.format( "%03d", f9_arg1.amountEarned )
	elseif 9 < f9_local2 then
		f9_local3 = 18
		f9_local1 = string.format( "%02d", f9_arg1.amountEarned )
	end
	local f9_local4 = f0_local0 - f9_local3
	local f9_local5 = f0_local0 + f9_local3
	if IsLanguageRightToLeft( GetCurrentLanguage() ) then
		if f9_arg0.ProgressBarCompleted then
			f9_arg0.ProgressBarCompleted:SetLeft( f9_local5 )
		end
		if f9_arg0.ProgressBar then
			f9_arg0.ProgressBar:SetLeft( f9_local5 )
		end
		if f9_arg0.ProgressBarTemp then
			f9_arg0.ProgressBarTemp:SetLeft( f9_local5 )
		end
	else
		if f9_arg0.ProgressBarCompleted then
			f9_arg0.ProgressBarCompleted:SetRight( f9_local4 )
		end
		if f9_arg0.ProgressBar then
			f9_arg0.ProgressBar:SetRight( f9_local4 )
		end
		if f9_arg0.ProgressBarTemp then
			f9_arg0.ProgressBarTemp:SetRight( f9_local4 )
		end
	end
	if f9_arg0.ProgressCircle then
		f9_arg0.ProgressCircle:SetProgress( LUI.Round( f9_arg1.amountEarned / f9_arg1.amountNeeded, 2 ), 0, nil, true )
	end
	if f9_arg0.Icon then
		f9_arg0.Icon:setImage( RegisterMaterial( String.IsNilOrEmpty( f9_arg1.pmc ) and 0xE0C4E8294C46316 or 0x0 .. f9_arg1.pmc ) )
	end
	if f9_arg0.ObjectiveText then
		f9_arg0.ObjectiveText:setText( Engine[0xED84C33EC5F01EA]( f9_arg1.desc, f9_arg1.amountNeeded ) )
	end
	if f9_arg0.ProgressBar then
		local f9_local6 = f9_arg0.ProgressBar
		local f9_local7 = f9_local6
		f9_local6 = f9_local6.SetImmediateProgress
		local f9_local8
		if not f9_arg1.forAAR or f9_local0 then
			f9_local8 = f9_arg1.progress
			if not f9_local8 then
			
			else
				f9_local6( f9_local7, f9_local8 )
			end
		end
		f9_local8 = 0
	end
	if f9_arg0.ProgressCount then
		f9_arg0.ProgressCount:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU_MP/PROGRESS_TOTAL", f9_local1, f9_arg1.amountNeeded ) )
	end
	if f9_arg0.DashedLine then
		f9_arg0.DashedLine:SetVisible( not f9_arg2 )
	end
	if f9_arg1.forAAR then
		f9_arg0.missionComplete = f9_arg1.missionComplete
		f9_arg0.progress = f9_arg1.progress
		f9_arg0.completed = f9_arg1.completed
		f9_arg0.wasMissionCompleteBeforeMatch = f9_arg1.wasMissionCompleteBeforeMatch
	end
	if not Engine[0x12586A3F4FB490E]() and not f9_arg1.forAAR and f9_arg0._isLocalPlayerMission then
		f9_arg0:UpdateTempProgress( f9_arg1 )
	else
		ACTIONS.AnimateSequence( f9_arg0, "TempProgressOff" )
		ACTIONS.AnimateSequence( f9_arg0, "ExtractIconOff" )
	end
	if IsLanguageArabic() then
		ACTIONS.AnimateSequence( f9_arg0, "AR" )
	end
end

local f0_local7 = function ( f7_arg0 )
	if 0 < f7_arg0.progress and f7_arg0.ProgressBar then
		f7_arg0.ProgressBar:SetProgress( f7_arg0.progress, f0_local0 )
	end
	if f7_arg0.completed then
		local f7_local0 = f7_arg0:Wait( f0_local0 )
		f7_local0.onComplete = function ( f8_arg0 )
			if f8_arg0.wasMissionCompleteBeforeMatch then
				ACTIONS.AnimateSequence( f8_arg0, "Completed" )
			elseif f8_arg0.missionComplete then
				ACTIONS.AnimateSequence( f8_arg0, "MissionCompleted" )
			else
				ACTIONS.AnimateSequence( f8_arg0, "JustCompleted" )
			end
		end
		
	end
end

local f0_local8 = function ( f6_arg0 )
	if f6_arg0.ProgressCount then
		f6_arg0.ProgressCount:SetSDFRenderingEnabled( true )
	end
	if f6_arg0.ObjectiveText then
		f6_arg0.ObjectiveText:SetSDFRenderingEnabled( true )
	end
end

local f0_local9 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0.UpdateTempProgress = f0_local0
	f3_arg0.SetupObjective = f0_local0
	f3_arg0.AARCelebrationStart = f0_local0
	f3_arg0.EnableTextsSDF = f0_local0
	f3_arg0:addEventHandler( "set_mission_equipped", function ( f5_arg0, f5_arg1 )
		ACTIONS.AnimateSequence( f3_arg0, "Equipped" )
	end )
	f3_arg0:addEventHandler( "set_mission_replace", function ( f4_arg0, f4_arg1 )
		ACTIONS.AnimateSequence( f3_arg0, "Replace" )
	end )
	if Engine[0x12586A3F4FB490E]() then
		if f3_arg0.ProgressCount then
			f3_arg0.ProgressCount:SetSDFRenderingEnabled( false )
		end
		if f3_arg0.ObjectiveText then
			f3_arg0.ObjectiveText:SetSDFRenderingEnabled( false )
		end
	end
end

local f0_local10 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PostLoadShared = f0_local0
end

function SelectedMissionObjectiveBase( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = f1_local0.UIElement.new()
	f1_local1:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 424, 0, 70 )
	f1_local1.id = "SelectedMissionObjectiveBase"
	local f1_local2
	if f1_arg1 then
		f1_local2 = f1_arg1
	else
		f1_local2 = f1_arg1.controllerIndex
	end
	f0_local0( f1_local1, f1_local0.ValidateControllerIndex( f1_local1, f1_local2 ), f1_arg1 )
	return f1_local1
end

MenuBuilder.registerType( 0x5DE13924924B678, SelectedMissionObjectiveBase )
LockTable( _M )
