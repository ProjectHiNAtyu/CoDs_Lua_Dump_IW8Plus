-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:04
module( ..., package.seeall )
local f0_local0 = 6
local f0_local1 = 0
local f0_local2 = nil
f0_local2 = function ( f13_arg0, f13_arg1 )
	f13_arg0.NewWeaponIndicator:Play()
	local f13_local0 = f13_arg0:Wait( f13_arg1 )
	f13_local0.onComplete = function ()
		f13_arg0( f13_arg0, f13_arg0 )
	end
	
end

local f0_local3 = function ( f12_arg0, f12_arg1 )
	local f12_local0
	if f12_arg0._state == BATTLEMAP.SectorState.ACTIVE or f12_arg0._state == BATTLEMAP.SectorState.LOCKED then
		f12_local0 = f12_arg0._bundle[0x798CCE7C8B48389]
		if not f12_local0 then
		
		else
			if not String.IsNilOrEmpty( f12_local0 ) then
				f12_arg0.Border:setImage( RegisterMaterial( f12_local0 ) )
			end
			f12_arg0._state = BATTLEMAP.GetSectorState( f12_arg0._controllerIndex, f12_arg0._index )
			f12_arg0.Map:SetBlendMode( BLEND_MODE.multiply )
			if f12_arg0._state == BATTLEMAP.SectorState.ACTIVE and Dvar[0x9E5BE3B4BBA4E0E]( 0x59F15DDED5895DE ) then
				f12_arg0.Map:SetBlendMode( BLEND_MODE.blend )
				f12_arg0.Map:SetRGB( SWATCHES[0x5E2F4190CE482DE][0x9851D8A844AAE2] )
				f12_arg0.Map:SetAlpha( 1 )
				f12_arg0.Gradient:SetRGB( SWATCHES[0x5E2F4190CE482DE][0x9851D8A844AAE2] )
				f12_arg0.Gradient:SetAlpha( 1 )
				f12_arg0.Border:SetRGB( SWATCHES[0x5E2F4190CE482DE][0x9851D8A844AAE2] )
				f12_arg0.Border:SetAlpha( 1 )
				f12_arg0.SectorID:SetRGB( SWATCHES[0x5E2F4190CE482DE][0x9851D8A844AAE2] )
				f12_arg0.SectorID:SetAlpha( 1 )
				f12_arg0.Border:SetRGB( SWATCHES[0x5E2F4190CE482DE][0x9851D8A844AAE2] )
				f12_arg0.Border:SetAlpha( 1 )
			elseif f12_arg0._state == BATTLEMAP.SectorState.ACTIVE then
				ACTIONS.AnimateSequence( f12_arg0, "Active" )
			elseif f12_arg0._state == BATTLEMAP.SectorState.COMPLETED then
				ACTIONS.AnimateSequence( f12_arg0, "Completed" )
				local f12_local1 = ACTIONS.AnimateSequence
				local f12_local2 = f12_arg0
				local f12_local3
				if f12_arg0._isPremium then
					f12_local3 = "PremiumComplete"
				else
					f12_local3 = "FreeComplete"
				end
				f12_local1( f12_local2, f12_local3 )
				f12_local1 = f12_arg0.SectorID
				f12_local2 = f12_local1
				f12_local1 = f12_local1.SetRGB
				f12_local3 = f12_arg0._isPremium and SWATCHES[0xAE02465B3F418FB][0x5C8B82A2FF6FC21] or SWATCHES[0xAE02465B3F418FB][0x9853FA0F469126B]
				local f12_local4
				if f12_arg1 then
					f12_local4 = 0
				else
					f12_local4 = 150
				end
				f12_local1( f12_local2, f12_local3, f12_local4 )
				f12_local1 = f12_arg0.SectorID
				f12_local2 = f12_local1
				f12_local1 = f12_local1.SetAlpha
				if f12_arg0._isPremium then
					f12_local3 = 1
				else
					f12_local3 = 0.8
				end
				f12_local1( f12_local2, f12_local3 )
				f12_local1 = f12_arg0.Map
				f12_local2 = f12_local1
				f12_local1 = f12_local1.SetRGB
				f12_local3 = f12_arg0._isPremium and SWATCHES[0xAE02465B3F418FB][0xCA036E99CA61AD] or SWATCHES[0xAE02465B3F418FB][0x3D12BC7F4316927]
				if f12_arg1 then
					f12_local4 = 0
				else
					f12_local4 = 150
				end
				f12_local1( f12_local2, f12_local3, f12_local4 )
				f12_local1 = f12_arg0.Map
				f12_local2 = f12_local1
				f12_local1 = f12_local1.SetAlpha
				if f12_arg0._isPremium then
					f12_local3 = 0.3
				else
					f12_local3 = 0.85
				end
				if f12_arg1 then
					f12_local4 = 0
				else
					f12_local4 = 150
				end
				f12_local1( f12_local2, f12_local3, f12_local4 )
				f12_arg0.Mid:SetRGB( f12_arg0._isPremium and SWATCHES[0xAE02465B3F418FB][0x4866A27404B40A4] or SWATCHES[0xAE02465B3F418FB][0x9853FA0F469126B] )
				f12_local1 = f12_arg0.Mid
				f12_local2 = f12_local1
				f12_local1 = f12_local1.SetAlpha
				if f12_arg0._isPremium then
					f12_local3 = 0.25
				else
					f12_local3 = 0.15
				end
				f12_local1( f12_local2, f12_local3 )
				f12_arg0.Gradient:SetRGB( f12_arg0._isPremium and SWATCHES[0xAE02465B3F418FB][0xEC652635C7DD9EB] or SWATCHES[0xAE02465B3F418FB][0x9853FA0F469126B] )
				f12_local1 = f12_arg0.Gradient
				f12_local2 = f12_local1
				f12_local1 = f12_local1.SetAlpha
				if f12_arg0._isPremium then
					f12_local3 = 0.6
				else
					f12_local3 = 0.7
				end
				f12_local1( f12_local2, f12_local3 )
				f12_arg0.Border:SetRGB( f12_arg0._isPremium and SWATCHES[0xAE02465B3F418FB][0x5C8B82A2FF6FC21] or SWATCHES[0xAE02465B3F418FB][0x9853FA0F469126B] )
			else
				ACTIONS.AnimateSequence( f12_arg0, "Locked" )
			end
		end
	end
	f12_local0 = f12_arg0._bundle[0x32311E4EB4BA8E8]
end

local f0_local4 = function ( f11_arg0 )
	local f11_local0 = f11_arg0._bundle[0xBB1F7EEF03C9500]
	if not String.IsNilOrEmpty( f11_local0 ) then
		f11_arg0.Border:setImage( RegisterMaterial( f11_local0 ) )
	end
	ACTIONS.AnimateSequence( f11_arg0, "GradientSelectLoop" )
	f11_arg0._state = BATTLEMAP.GetSectorState( f11_arg0._controllerIndex, f11_arg0._index )
	f11_arg0.Map:SetBlendMode( BLEND_MODE.multiply )
	if f11_arg0._state == BATTLEMAP.SectorState.ACTIVE and Dvar[0x9E5BE3B4BBA4E0E]( 0x59F15DDED5895DE ) then
		f11_arg0.Map:SetBlendMode( BLEND_MODE.blend )
		f11_arg0.Map:SetRGB( SWATCHES[0x5E2F4190CE482DE][0x9851D8A844AAE2] )
		f11_arg0.Map:SetAlpha( 1 )
		f11_arg0.Gradient:SetRGB( SWATCHES[0x5E2F4190CE482DE][0x9851D8A844AAE2] )
		f11_arg0.Gradient:SetAlpha( 1 )
		f11_arg0.Border:SetRGB( SWATCHES[0x5E2F4190CE482DE][0x9851D8A844AAE2] )
		f11_arg0.Border:SetAlpha( 1 )
		f11_arg0.SectorID:SetRGB( SWATCHES[0x5E2F4190CE482DE][0x9851D8A844AAE2] )
		f11_arg0.SectorID:SetAlpha( 1 )
		f11_arg0.Border:SetRGB( SWATCHES[0x5E2F4190CE482DE][0x9851D8A844AAE2] )
		f11_arg0.Border:SetAlpha( 1 )
	elseif f11_arg0._state == BATTLEMAP.SectorState.ACTIVE then
		ACTIONS.AnimateSequence( f11_arg0, "ActiveOver" )
	elseif f11_arg0._state == BATTLEMAP.SectorState.COMPLETED then
		ACTIONS.AnimateSequence( f11_arg0, "CompletedOver" )
		f11_arg0.SectorID:SetRGB( f11_arg0._isPremium and SWATCHES[0xAE02465B3F418FB][0xF38D8B3EED94F0B] or SWATCHES[0xAE02465B3F418FB][0x9853FA0F469126B], 150 )
		f11_arg0.Border:SetRGB( f11_arg0._isPremium and SWATCHES[0xAE02465B3F418FB][0x5C8B82A2FF6FC21] or SWATCHES[0xAE02465B3F418FB][0x9853FA0F469126B], 150 )
		local f11_local1 = f11_arg0.Mid
		local f11_local2 = f11_local1
		f11_local1 = f11_local1.SetAlpha
		local f11_local3
		if f11_arg0._isPremium then
			f11_local3 = 0.6
		else
			f11_local3 = 0.5
		end
		f11_local1( f11_local2, f11_local3 )
		f11_local1 = f11_arg0.Gradient
		f11_local2 = f11_local1
		f11_local1 = f11_local1.SetAlpha
		if f11_arg0._isPremium then
			f11_local3 = 0.7
		else
			f11_local3 = 0.6
		end
		f11_local1( f11_local2, f11_local3 )
	else
		ACTIONS.AnimateSequence( f11_arg0, "LockedOver" )
	end
	local f11_local1
	if f11_arg0._state == BATTLEMAP.SectorState.LOCKED then
		f11_local1 = not f11_arg0._isBPComplete
	else
		f11_local1 = false
	end
	local f11_local4 = LAYOUT.GetTextWidth( f11_arg0.SectorID )
	local f11_local2 = f11_arg0.SectorBacker
	local f11_local5 = f11_local2
	f11_local2 = f11_local2.SetLeft
	local f11_local6
	if f11_local1 then
		f11_local6 = f11_arg0._lockLeft
		if not f11_local6 then
		
		else
			f11_local2( f11_local5, f11_local6 )
			f11_arg0.SectorBacker:SetRight( f11_arg0._sectorIdLeft )
			f11_arg0.SectorBacker:SetRight( f11_arg0._sectorIdLeft + f11_local4 + f0_local0, 300, LUI.EASING.outCubic )
		end
	end
	f11_local6 = f11_arg0._sectorBackerLeft
end

local f0_local5 = function ( f10_arg0 )
	f10_arg0._state = BATTLEMAP.SectorState.COMPLETED
	ACTIONS.AnimateSequence( f10_arg0, "UnlockSector" )
	f10_arg0.Overlay:SetRGB( f10_arg0._isPremium and SWATCHES[0xAE02465B3F418FB][0x5C8B52A2FF6F708] or SWATCHES[0xAE02465B3F418FB][0x9853FA0F469126B] )
	ACTIONS.AnimateSequence( f10_arg0, "Completed" )
	ACTIONS.AnimateSequence( f10_arg0, "CompletedOver" )
	ACTIONS.AnimateSequence( f10_arg0, "ButtonOver" )
	f10_arg0.SectorID:SetRGB( f10_arg0._isPremium and SWATCHES[0xAE02465B3F418FB][0x5C8B52A2FF6F708] or SWATCHES[0xAE02465B3F418FB][0x9853FA0F469126B], 150 )
	f10_arg0.Border:SetRGB( f10_arg0._isPremium and SWATCHES[0xAE02465B3F418FB][0x5C8B52A2FF6F708] or SWATCHES[0xAE02465B3F418FB][0x9853FA0F469126B], 150 )
	f10_arg0.Map:SetRGB( f10_arg0._isPremium and SWATCHES[0xAE02465B3F418FB][0x5C8B52A2FF6F708] or SWATCHES[0xAE02465B3F418FB][0x21EBFD06F5EEE8C], 150 )
	f10_arg0.Map:SetAlpha( 0.5, 150 )
	f10_arg0.Gradient:SetRGB( f10_arg0._isPremium and SWATCHES[0xAE02465B3F418FB][0x5C8B52A2FF6F708] or SWATCHES[0xAE02465B3F418FB][0x9853FA0F469126B], 150 )
	for f10_local3, f10_local4 in ipairs( f10_arg0._pips ) do
		f10_local4:setImage( RegisterMaterial( 0xAA63CEFAF8C2F4D ) )
		f10_local4:SetAlpha( 0.7 )
	end
end

local f0_local6 = function ( f9_arg0 )
	f9_arg0._isBPComplete = true
	f0_local0( f9_arg0, true )
	ACTIONS.AnimateSequence( f9_arg0, "CompleteGlow" )
	f9_arg0.Overlay:SetRGB( f9_arg0._isPremium and SWATCHES[0xAE02465B3F418FB][0x5C8B52A2FF6F708] or SWATCHES[0xAE02465B3F418FB][0x9853FA0F469126B] )
end

local f0_local7 = function ( f4_arg0, f4_arg1, f4_arg2, f4_arg3, f4_arg4, f4_arg5 )
	local f4_local0 = f4_arg0._index ~= f4_arg2
	f4_arg0._index = f4_arg2
	f4_arg0._isPremium = f4_arg4
	f4_arg0._isBPComplete = f4_arg5
	f4_arg0.SectorID:setText( BATTLEMAP.GetSectorDisplayName( f4_arg2 - 1 ) )
	if f4_arg3 then
		f4_arg0._bundle = f4_arg3
		local f4_local1 = f4_arg3[0x5565F5840C0FF4D]
		if not String.IsNilOrEmpty( f4_local1 ) then
			f4_arg0.SectorMask:setImage( RegisterMaterial( f4_local1 ) )
		end
		local f4_local2 = f4_arg3[0x8B19946AE405D35]
		if not String.IsNilOrEmpty( f4_local2 ) then
			f4_arg0.FocusShadow:setImage( RegisterMaterial( f4_local2 ) )
		end
	end
	local f4_local1 = SEASON.GetCurrentSeason()
	local f4_local2 = BATTLEMAP.GetSectorUnlockData( f4_arg1, f4_local1, f4_arg2 )
	local f4_local3 = f4_local2[BATTLEMAP.NUM_UNLOCKS_PER_SECTOR]
	if f4_local3 then
		local f4_local4 = RegisterMaterial( f4_local3.lootImage )
		local f4_local5 = Engine[0x5B4AB50CF5D1DDD]( f4_local4 )
		if 1 < f4_local5 then
			ACTIONS.AnimateSequence( f4_arg0, "HVT_2x1" )
		elseif f4_local5 < 1 then
			ACTIONS.AnimateSequence( f4_arg0, "HVT_1x2" )
		else
			ACTIONS.AnimateSequence( f4_arg0, "HVT_1x1" )
		end
		f4_arg0.HVT:setImage( f4_local4 )
		if f4_arg0.HVTBracketRight and f4_arg0.HVTBracketLeft then
			if f4_local3.lootType == LOOT.itemTypes.OPERATOR or f4_local3.lootType == LOOT.itemTypes.OPERATOR_SKIN then
				f4_arg0.HVTBracketRight:SetVisible( true )
				f4_arg0.HVTBracketLeft:SetVisible( true )
			else
				f4_arg0.HVTBracketRight:SetVisible( false )
				f4_arg0.HVTBracketLeft:SetVisible( false )
			end
		end
		if (not (f4_local3.lootType ~= LOOT.itemTypes.WEAPON or WEAPON.IsVariant( f4_arg1, f4_local3.lootID ) ~= false) or f4_local3.lootType == LOOT.itemTypes.OPERATOR) and not CONDITIONS.IsMobileOrMobileSim() then
			f4_arg0.NewWeaponIndicator:SetVisible( true )
			f0_local0( f4_arg0, 3000 )
		end
	end
	for f4_local4 = 1, #f4_arg0._pips, 1 do
		f4_arg0._pips[f4_local4]:setImage( RegisterMaterial( f4_local2[f4_local4].isOwned and 0xAA63CEFAF8C2F4D or 0xA01D2A89D7292CC ) )
		local f4_local7 = f4_arg0._pips[f4_local4]
		local f4_local8 = f4_local7
		f4_local7 = f4_local7.SetRGB
		local f4_local9
		if f4_local2[f4_local4].isOwned then
			if f4_arg4 then
				f4_local9 = BATTLEMAP.ButtonHighlightColors.CLAIMED_PREMIUM
				if not f4_local9 then
				
				else
					f4_local7( f4_local8, f4_local9 )
					f4_local7 = f4_arg0._pips[f4_local4]
					f4_local8 = f4_local7
					f4_local7 = f4_local7.SetAlpha
					if f4_local2[f4_local4].isOwned then
						f4_local9 = 0.7
					else
						f4_local9 = 0.5
					end
					f4_local7( f4_local8, f4_local9 )
				end
			end
			f4_local9 = BATTLEMAP.ButtonHighlightColors.CLAIMED_FREE
			if not f4_local9 then
				f4_local9 = BATTLEMAP.ButtonHighlightColors.UNCLAIMED_FREE
			end
		else
			f4_local9 = BATTLEMAP.ButtonHighlightColors.UNCLAIMED_FREE
		end
		f4_local7( f4_local8, f4_local9 )
		f4_local7 = f4_arg0._pips[f4_local4]
		f4_local8 = f4_local7
		f4_local7 = f4_local7.SetAlpha
		if f4_local2[f4_local4].isOwned then
			f4_local9 = 0.7
		else
			f4_local9 = 0.5
		end
		f4_local7( f4_local8, f4_local9 )
	end
	local f4_local4 = BATTLEMAP.GetSectorState( f4_arg1, f4_arg2, f4_local1 )
	if f4_local4 ~= f4_arg0._state then
		f4_local0 = true
	end
	f4_arg0._state = f4_local4
	if f4_local0 then
		f0_local0( f4_arg0, true )
	end
	if not f4_arg0.eventHandlersAdded then
		f4_arg0:addEventHandler( "button_over", function ( f8_arg0, f8_arg1 )
			f4_arg0( f8_arg0 )
			if f8_arg0.menu and f8_arg0.menu.UpdateFocusSector then
				if f8_arg0._state == BATTLEMAP.SectorState.ACTIVE then
					f8_arg0.menu._canClaim = BATTLEMAP.CanSpendTokenMaxSector( f4_arg0, f8_arg0._index, {
						errorCode = BATTLEPASS.SpendTokenError.NONE
					} )
				else
					f8_arg0.menu._canClaim = false
				end
				f8_arg0.menu:UpdateFocusSector( f8_arg0._index, f4_arg0, f8_arg0 )
			end
		end )
		f4_arg0:addEventHandler( "button_up", function ( f7_arg0, f7_arg1 )
			f4_arg0( f7_arg0 )
			f7_arg0:setPriority( f4_arg0 )
			if f7_arg0.menu and f7_arg0.menu.UpdateFocusReticleVisibility then
				f7_arg0.menu:UpdateFocusReticleVisibility( false )
			end
		end )
		f4_arg0:addEventHandler( "button_over_active", function ( f6_arg0, f6_arg1 )
			if f6_arg0.menu and f6_arg0.menu.UpdateFocusSector then
				f6_arg0.menu:UpdateFocusSector( f6_arg0._index, f4_arg0, f6_arg0 )
			end
		end )
		f4_arg0:addEventHandler( "button_active", function ( f5_arg0, f5_arg1 )
			if f5_arg0.menu and f5_arg0.menu.UpdateFocusReticleVisibility then
				f5_arg0.menu:UpdateFocusReticleVisibility( false )
			end
		end )
	end
end

local f0_local8 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0._controllerIndex = f3_arg1
	f3_arg0.SetupSector = f0_local0
	f3_arg0.UnlockSector = f0_local0
	f3_arg0.PlayComplete = f0_local0
	f3_arg0._pips = {
		f3_arg0.RewardPip1,
		f3_arg0.RewardPip2,
		f3_arg0.RewardPip3,
		f3_arg0.RewardPip4
	}
	local f3_local0 = f3_arg0.Lock:GetAnchorsAndPosition()
	f3_arg0._lockLeft = f3_local0.left
	f3_local0 = f3_arg0.SectorBacker:GetAnchorsAndPosition()
	f3_arg0._sectorBackerLeft = f3_local0.left
	f3_local0 = f3_arg0.SectorID:GetAnchorsAndPosition()
	f3_arg0._sectorIdLeft = f3_local0.left
	f3_arg0:setActionSFX( nil )
	f3_arg0:setActionDisabledSFX( nil )
	f3_arg0:setGainFocusSFX( SOUND_SETS.battlePass.bpHighlight )
	f3_arg0:setGainFocusGamepadSFX( SOUND_SETS.battlePass.bpHighlight )
end

local f0_local9 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PostLoadShared = f0_local0
end

function BattleMapSectorButtonBase( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = f1_local0.UIButton.new()
	f1_local1:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 416, 0, 288 )
	f1_local1.id = "BattleMapSectorButtonBase"
	local f1_local2
	if f1_arg1 then
		f1_local2 = f1_arg1
	else
		f1_local2 = f1_arg1.controllerIndex
	end
	f0_local0( f1_local1, f1_local0.ValidateControllerIndex( f1_local1, f1_local2 ), f1_arg1 )
	return f1_local1
end

MenuBuilder.registerType( 0x4D88BE509DB7D00, BattleMapSectorButtonBase )
LockTable( _M )
