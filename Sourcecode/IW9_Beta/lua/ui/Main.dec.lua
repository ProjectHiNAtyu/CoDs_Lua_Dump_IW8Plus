-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
DebugPrint( "Running main.lua" )
function OpenTitleScreen()
	if CONDITIONS.IsUsingMobileLayout() then
		LUI.FlowManager.RequestRestoreMenu( "MainMenuMobile", nil, nil )
	elseif Engine[0x575E9C5B9AAB6F4]() then
		if DCache[0xEA6960AEA147A12]() then
			LUI.FlowManager.RequestPopupMenu( nil, "PopupYesNo", false, nil, false, {
				title = Engine[0xED84C33EC5F01EA]( 0x1CCA5C59ECE1EA6 ),
				message = Engine[0xED84C33EC5F01EA]( 0xB528A174980DA31 ),
				yesAction = function ()
					DCache[0xD38A06F227CF0D0]( 1 )
					Engine[0x34C623E28A1C5E7]( Engine[0xED84C33EC5F01EA]( 0xAB9B75907E3EA41 ) )
				end,
				noAction = function ()
					DCache[0xEE1C22A69B780CE]()
					Engine[0x34C623E28A1C5E7]( Engine[0xED84C33EC5F01EA]( 0xAB9B75907E3EA41 ) )
				end
			}, nil, false, true )
		else
			if Dvar[0x9E5BE3B4BBA4E0E]( 0xCBA8CE32B95599C ) then
				LUI.FlowManager.RequestRestoreMenu( "WorldMap", nil, nil )
			elseif Dvar[0x9E5BE3B4BBA4E0E]( 0xE2361C5F364C9DA ) then
				LUI.FlowManager.RequestRestoreMenu( "MainMenuOffline", nil, nil )
			else
				LUI.FlowManager.RequestRestoreMenu( "MainLockoutMenu", nil, nil )
				local f5_local0 = LUI.FlowManager.GetVisibleMenu()
				if f5_local0 then
					if f5_local0.ActionText then
						f5_local0.ActionText:SetVisible( false )
					end
					f5_local0:processEvent( {
						name = "leftmouseup",
						controller = f5_local0._controllerIndex
					} )
				end
			end
			Engine[0x4B0C2D659AE39D3]( "Opening PC Main Menu", 0 )
		end
	else
		LUI.FlowManager.RequestRestoreMenu( "MainLockoutMenu", nil, nil )
	end
end

function PrepareForceOpenHighlightPanel()
	if Engine[0x575E9C5B9AAB6F4]() and Dvar[0x9E5BE3B4BBA4E0E]( 0xADBFDCF624F6519 ) and Engine[0xD3BD9AE9A8840D8]() and Engine[0x4C63E8C3DFC342D]() then
		Dvar[0x8EA06EEDB58D872]( 0x687D9B259CB5CCF, true )
	end
end

function SetActiveProject( f3_arg0, f3_arg1 )
	PROJECT[0x2E1889B2FD148F6]( f3_arg1 )
end

function OpenInitialMenu( f2_arg0 )
	local f2_local0 = CoD.UseCentralHUB()
	if Engine[0x575E9C5B9AAB6F4]() then
		Dvar[0x8EA06EEDB58D872]( 0x79F3B6F9FC74228, false )
		if Engine[0x12586A3F4FB490E]() then
			Dvar[0x8EA06EEDB58D872]( 0x3EC3B87FCEEF73B, true )
			MAIN_MENU.RegisterTitleUpdateAvailableEventHandler()
		else
			Dvar[0x8EA06EEDB58D872]( 0x3EC3B87FCEEF73B, false )
		end
	end
	local f2_local1 = Engine[0x5C96050629B5D19]()
	local f2_local2 = Engine[0x8E5B41A4B79E5D1]()
	local f2_local3
	if not Engine[0x9258F49F515F97B]() then
		f2_local3 = not Engine[0x74423E76DECE3E4]()
	else
		f2_local3 = false
	end
	if Dvar[0x9E5BE3B4BBA4E0E]( 0xCBA8CE32B95599C ) then
		LUI.FlowManager.RequestRestoreMenu( "WorldMap", nil, nil, f2_arg0 )
		return 
	elseif Dvar[0x9E5BE3B4BBA4E0E]( 0x37F514F864BF0D6 ) then
		LUI.FlowManager.RequestRestoreMenu( "LevelSelectMenu", nil, nil, f2_arg0 )
	elseif Engine[0x12586A3F4FB490E]() and f2_local3 then
		Dvar[0x8EA06EEDB58D872]( 0x3EC3B87FCEEF73B, false )
		if not f2_local1 or Engine[0xC6AD5341E93DFB3]() or not f2_local2 then
			if Engine[0xA2ED71B185EA50F]() then
				LUI.FlowManager.RequestRestoreMenu( "splash_screens", nil, nil, f2_arg0 )
			else
				OpenTitleScreen()
			end
		else
			if Engine[0x575E9C5B9AAB6F4]() then
				Engine[0x4B0C2D659AE39D3]( "Opening PC Main Menu", 0 )
			end
			local f2_local4 = Engine[0x45B054C920178E9]()
			if Dvar[0x9E5BE3B4BBA4E0E]( 0xD7862EAA83B3B27 ) then
				LUI.FlowManager.RequestRestoreMenu( "MainMenuMobile", nil, f2_local4, f2_arg0 )
			else
				LUI.FlowManager.RequestRestoreMenu( "MainMenu", nil, f2_local4, f2_arg0 )
			end
		end
	elseif Engine[0x12586A3F4FB490E]() and Engine[0x9258F49F515F97B]() then
		local f2_local4 = Engine[0x45B054C920178E9]()
		if Dvar[0x9E5BE3B4BBA4E0E]( 0xD7862EAA83B3B27 ) then
			LUI.FlowManager.RequestRestoreMenu( "MainMenuMobile", nil, f2_local4, f2_arg0 )
		elseif Tournament[0x7E86050E6607699]() then
			LUI.FlowManager.RequestRestoreMenu( TOURNAMENT.GetMenuName( "arena" ), nil, f2_local4, f2_arg0 )
		elseif IsPublicMatch() and Engine[0x8FF0F1C5B20321E]() then
			if Engine[0x220CB915CEFC1FE]() then
				LUI.FlowManager.RequestRestoreMenu( "BRPublicLobby", nil, f2_local4, f2_arg0 )
			elseif Engine[0xCA085C21FCBD7CA]() then
				LUI.FlowManager.RequestRestoreMenu( "CPPublicMatchMenu", nil, f2_local4, f2_arg0 )
			elseif CoD.IsDMZMatch() then
				LUI.FlowManager.RequestRestoreMenu( "DMZMainMenu", nil, f2_local4, f2_arg0 )
			else
				LUI.FlowManager.RequestRestoreMenu( "MPPublicLobby", nil, f2_local4, f2_arg0 )
			end
		elseif IsPrivateMatch() then
			if Engine[0xCA085C21FCBD7CA]() then
				LUI.FlowManager.RequestRestoreMenu( "CPPrivateMatchLobby", nil, f2_local4, f2_arg0 )
			elseif Dvar[0x9E5BE3B4BBA4E0E]( 0xC7061888C9EC27F ) == true then
				local f2_local5
				if CONDITIONS.IsMagmaGameMode() then
					f2_local5 = "TrialsBR"
				else
					f2_local5 = "TrialsMP"
				end
				LUI.FlowManager.RequestRestoreMenu( f2_local5, nil, f2_local4, f2_arg0 )
				Dvar[0x8EA06EEDB58D872]( 0xC7061888C9EC27F, false )
			elseif Dvar[0x9E5BE3B4BBA4E0E]( 0x9DED5859EDCD109 ) == true then
				local f2_local5
				if CONDITIONS.IsMagmaGameMode() then
					f2_local5 = "TrialEventBR"
				else
					f2_local5 = "TrialEventMP"
				end
				Dvar[0x8EA06EEDB58D872]( 0x9DED5859EDCD109, false )
				LUI.FlowManager.RequestRestoreMenu( f2_local5, nil, f2_local4, f2_arg0 )
			elseif Dvar[0x9E5BE3B4BBA4E0E]( 0x77A1EC53BD776DB ) then
				if CONDITIONS.IsMagmaGameMode() then
					local f2_local5 = Dvar[0x22EAAB59AA27E9B]( 0xFC78EFF561EBE50 )
					local f2_local6 = Dvar[0x9E5BE3B4BBA4E0E]( 0xBC3FE1A3B388160 )
					if f2_local5 == MP.WarzonePracticePopupStatus.GO_TO_WARZONE_LOBBY or f2_local5 == MP.WarzonePracticePopupStatus.GO_TO_BLOODMONEY_LOBBY then
						local f2_local7 = PlaylistUtils.FindBRPostTutorialPlaylist( f2_local4, f2_local5 )
						if f2_local7 then
							if f2_local5 == MP.WarzonePracticePopupStatus.GO_TO_WARZONE_LOBBY then
								if Playlist[0x55D7805DA008136]( f2_local7.categoryIndex, f2_local7.playlistIndex ) then
									LUI.FlowManager.RequestAddMenu( "BRPublicLobby", false, f2_local4, false )
								else
									LUI.FlowManager.RequestAddMenu( "LobbyWarzoneTutorial", true, f2_local4, false, {
										tutorialType = Lobby.BRTutorialLobbyType.TUTORIAL,
										needContinue = f2_local6
									}, true )
								end
							elseif Playlist[0x55D7805DA008136]( f2_local7.categoryIndex, f2_local7.playlistIndex ) then
								LUI.FlowManager.RequestAddMenu( "BRPublicLobby", false, f2_local4, false )
							else
								LUI.FlowManager.RequestAddMenu( "LobbyWarzoneTutorial", true, f2_local4, false, {
									tutorialType = Lobby.BRTutorialLobbyType.TUTORIAL,
									needContinue = f2_local6
								}, true )
							end
						else
							LUI.FlowManager.RequestRestoreMenu( "BRMainMenu", nil, f2_local4, f2_arg0 )
							LUI.FlowManager.RequestAddMenu( "LobbyWarzoneTutorial", true, f2_local4, false, {
								tutorialType = Lobby.BRTutorialLobbyType.TUTORIAL,
								needContinue = f2_local6
							}, true )
						end
					else
						LUI.FlowManager.RequestRestoreMenu( "BRMainMenu", nil, f2_local4, f2_arg0 )
						if f2_local5 == MP.WarzonePracticePopupStatus.GO_TO_PRACTICE_LOBBY and Dvar[0x9E5BE3B4BBA4E0E]( 0xBB1C4DDDA7EFA2F ) then
							LUI.FlowManager.RequestAddMenu( "LobbyWarzoneTutorial", true, f2_local4, false, {
								tutorialType = Lobby.BRTutorialLobbyType.PRACTICE,
								needContinue = f2_local6
							}, true )
						elseif f2_local5 == MP.WarzonePracticePopupStatus.GO_TO_BLOODMONEY_TUTORIAL_LOBBY and CONDITIONS.IsBMTutorialMapAvailable() then
							LUI.FlowManager.RequestAddMenu( "LobbyWarzoneTutorial", true, f2_local4, false, {
								tutorialType = Lobby.BRTutorialLobbyType.BLOODMONEY,
								needContinue = f2_local6
							}, true )
						else
							LUI.FlowManager.RequestAddMenu( "LobbyWarzoneTutorial", true, f2_local4, false, {
								tutorialType = Lobby.BRTutorialLobbyType.TUTORIAL,
								needContinue = f2_local6
							}, true )
						end
					end
					Dvar[0x8EA06EEDB58D872]( 0xBC3FE1A3B388160, false )
					Dvar[0x2414681ECAB880F]( 0xFC78EFF561EBE50, 0 )
				end
			elseif CONDITIONS.IsMagmaGameMode() then
				LUI.FlowManager.RequestRestoreMenu( "WarzonePrivateMatchLobby", nil, f2_local4, f2_arg0 )
			else
				LUI.FlowManager.RequestRestoreMenu( "PrivateMatchLobby", nil, f2_local4, f2_arg0 )
			end
		elseif IsSystemLink() then
			if Engine[0x5F560D51BFEECB7]() then
				LUI.FlowManager.RequestRestoreMenu( "MainMenu", nil, f2_local4, f2_arg0 )
			elseif Engine[0xCBCF315DE9B8AC6]() then
				if Engine[0xCA085C21FCBD7CA]() then
					LUI.FlowManager.RequestRestoreMenu( "CPSystemLinkLobby", nil, f2_local4, f2_arg0 )
				else
					LUI.FlowManager.RequestRestoreMenu( "MPSystemLinkLobby", nil, f2_local4, f2_arg0 )
				end
			elseif Engine[0xCA085C21FCBD7CA]() then
				LUI.FlowManager.RequestRestoreMenu( "CPSystemLinkMenu", nil, f2_local4, f2_arg0 )
			else
				LUI.FlowManager.RequestRestoreMenu( "MPSystemLinkMenu", nil, f2_local4, f2_arg0 )
			end
		elseif IsOnlineMatch() then
			local f2_local5 = nil
			if not f2_local5 then
				if Engine[0xCA085C21FCBD7CA]() then
					f2_local5 = "CPMainMenu"
				elseif CONDITIONS.IsMagmaGameMode() then
					f2_local5 = "BRMainMenu"
					PrepareForceOpenHighlightPanel()
				elseif CoD.IsDMZMatch() then
					f2_local5 = "DMZMainMenu"
				else
					f2_local5 = "MPMainMenu"
				end
			end
			LUI.FlowManager.RequestRestoreMenu( f2_local5, nil, f2_local4, f2_arg0 )
		else
			OpenTitleScreen()
		end
	elseif Engine[0x12586A3F4FB490E]() and (f2_local0 or Engine[0x74423E76DECE3E4]()) then
		if not Engine[0x5F560D51BFEECB7]() then
			local f2_local4 = Engine[0x45B054C920178E9]()
			if f2_local0 then
				LUI.FlowManager.RequestAddMenu( "MainMenu", false, f2_local4, false, {
					bootToMp = true
				} )
			elseif Engine[0xBBF0609667DBEA]() then
				LUI.FlowManager.RequestRestoreMenu( "CampaignMenu", nil, f2_local4, f2_arg0 )
			else
				LUI.FlowManager.RequestRestoreMenu( "CampaignMenuOffline", nil, f2_local4, f2_arg0 )
			end
		end
	elseif Engine[0x74423E76DECE3E4]() and not Engine[0x12586A3F4FB490E]() and Dvar[0x9E5BE3B4BBA4E0E]( 0xC7E51CF1D4CB29D ) then
		LUI.FlowManager.RequestRestoreMenu( "pre_game", nil, Engine[0x45B054C920178E9](), f2_arg0 )
	end
	if Dvar[0x9E5BE3B4BBA4E0E]( 0x1BB397B823DFC8B ) then
		LUI.FlowManager.RequestRestoreMenu( "MobileTestMenuTabs", nil, Engine[0x45B054C920178E9](), f2_arg0 )
	end
end

function Main()
	if CDNI[0xE5E728E3949799D]() then
		LUI.FlowManager.RequestAddMenu( "CDNInstallMenu", false, controllerIndex )
		return 
	elseif Engine[0x7AE6126734FCDB]() then
		InitFrontEndDataSources()
	elseif Engine[0x12586A3F4FB490E]() then
		InitFrontEndDataSources()
		PersistentBackground.SetToDefault()
	elseif Dvar[0x9E5BE3B4BBA4E0E]( 0x1A2F29C06CA71EA ) then
		COLOR_BLIND.UpdateSwatches()
	end
	math.randomseed( Engine[0x6991337AE950F99]() )
	CoD.UpdateGameMode( Engine[0xCFB814FF4C67F87](), CoD.PlayMode.None )
	local f1_local0, f1_local1 = pcall( OpenInitialMenu )
	if not f1_local0 then
		if f1_local1 then
			DebugPrint( "Error opening Initial Menu with error " .. tostring( f1_local1 ) )
		end
		LUI.FlowManager.RequestRestoreMenu( "MainMenu", nil, nil )
	end
end

