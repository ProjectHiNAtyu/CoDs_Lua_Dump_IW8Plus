-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:49
GunScreenUtils = {}
local f0_local0 = 250
GunScreenUtils.LoadSoundTable = function ()
	return setmetatable( {
		_count = StringTable[0xFD4E49A34DD43AE]( CSV.TalkingGunScreenLines.file )
	}, {
		__index = function ( f7_arg0, f7_arg1 )
			if f7_arg0._count < f7_arg1 or f7_arg1 < 1 then
				return nil
			else
				local f7_local0 = StringTable[0x2077452C28AB2FC]( CSV.TalkingGunScreenLines.file, f7_arg1, CSV.TalkingGunScreenLines.cols.playAudio )
				rawset( f7_arg0, f7_arg1, f7_local0 )
				return f7_local0
			end
		end
		
	} )
end

GunScreenUtils.SoundPlayAwaiter = function ( f3_arg0, f3_arg1, f3_arg2, f3_arg3, f3_arg4 )
	local f3_local0 = f3_arg0:Wait( f0_local0, true )
	f3_local0.onComplete = function ()
		if not Engine[0x1F61B16806D3CA2]( f3_arg0 ) then
			if f3_arg0 then
				ACTIONS.AnimateSequence( f3_arg0, "ShowIcon" )
				Engine[0xC4146BA76D0F982]( SOUND_SETS.GunScreens.npc_gunscreen_explosion )
			end
			if f3_arg0 then
				local f4_local0 = f3_arg0[math.random( #f3_arg0 )]
				ACTIONS.AnimateSequence( f3_arg0, f4_local0, {
					onComplete = function ()
						ACTIONS.AnimateSequence( f4_local0, "Idle" )
						if f4_local0 then
							ACTIONS.AnimateSequence( f4_local0, "White" )
						end
					end
				} )
			else
				ACTIONS.AnimateSequence( f3_arg0, "Idle" )
			end
		else
			GunScreenUtils.SoundPlayAwaiter( f3_arg0, f3_arg0, f3_arg0, f3_arg0, f3_arg0 )
		end
	end
	
end

GunScreenUtils.SelectAndPlayAnimation = function ( f2_arg0, f2_arg1, f2_arg2, f2_arg3, f2_arg4 )
	local f2_local0 = nil
	local f2_local1 = Game[0x28624DEF6F708C8]( f2_arg0._controllerIndex, "ui_talkinggun_soundid" )
	local f2_local2 = StringTable[0x2077452C28AB2FC]( CSV.TalkingGunScreenLines.file, f2_local1, CSV.TalkingGunScreenLines.cols.icon )
	if not String.IsNilOrEmpty( f2_local2 ) and f2_arg0.EmojiIcon then
		f2_arg0.EmojiIcon:setImage( RegisterMaterial( f2_local2 ) )
	end
	if f2_arg0.allSoundsTable then
		local f2_local3 = f2_arg0.allSoundsTable[f2_local1]
		if f2_local3 then
			local f2_local4 = Engine[0xC4146BA76D0F982]( f2_local3 )
			if f2_arg3 then
				f2_local0 = true
				ACTIONS.AnimateSequence( f2_arg0, f2_arg3[math.random( #f2_arg3 )] )
			end
			ACTIONS.AnimateSequence( f2_arg0, f2_arg1[math.random( #f2_arg1 )] )
			GunScreenUtils.SoundPlayAwaiter( f2_arg0, f2_local4, f2_arg2, f2_local0, f2_arg4 )
		end
	end
end

GunScreenUtils.GetGhostTrackerData = function ( f1_arg0 )
	local f1_local0 = Game[0x28624DEF6F708C8]( f1_arg0, "ui_ghostfinder_screen_data" ) or 0
	local f1_local1 = Game[0x28624DEF6F708C8]( f1_arg0, "ui_ghostfinder_soul_absorb" ) or 0
	return {
		radarIntensity = BitwiseOperators.band( f1_local0, 127 ),
		dotIntensity = BitwiseOperators.band( BitwiseOperators.rshift( f1_local0, 7 ), 127 ),
		arrowRotation = BitwiseOperators.band( BitwiseOperators.rshift( f1_local0, 14 ), 511 ),
		absorbingSoul = BitwiseOperators.band( f1_local1, 1 ),
		numSoulsCollected = BitwiseOperators.band( BitwiseOperators.rshift( f1_local1, 1 ), 767 )
	}
end

