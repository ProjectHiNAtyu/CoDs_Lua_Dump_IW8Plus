-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
ATTACHMENT = ATTACHMENT or {}
ATTACHMENT.opticCategory = "optic"
ATTACHMENT.perkCategory = "gunperk"
ATTACHMENT.boltCategory = "bolts"
ATTACHMENT.charmCategory = "charm"
ATTACHMENT.gunscreenCategory = "gunscreen"
ATTACHMENT.stickerCategory = "sticker"
ATTACHMENT.receiverCategory = "receiver"
ATTACHMENT.backpieceCategory = "backpiece"
ATTACHMENT.magazineCategory = "magazine"
ATTACHMENT.loaderCategory = "loader"
ATTACHMENT.undermountCategory = "undermount"
ATTACHMENT.frontpieceCategory = "frontpiece"
ATTACHMENT.reargripCategory = "reargrip"
ATTACHMENT.camoCategory = "camo"
ATTACHMENT.none = "none"
ATTACHMENT.baseVariant = 0
ATTACHMENT.perkFlag = "gunperk_"
ATTACHMENT.akimbo = "akimbo"
ATTACHMENT.scopeSlot = "scope"
ATTACHMENT.conversionKitCategory = "conversionkit"
ATTACHMENT.laserTag = "tag_laser_attach"
ATTACHMENT.opticTag = "tag_reflex"
ATTACHMENT.charmTag = "tag_cosmetic"
ATTACHMENT.stickerTag = "tag_sticker"
ATTACHMENT.gunscreenTag = "tag_cosdisplay"
ATTACHMENT.defaultSWhiskeyMag = "cylinder_pi_p26"
ATTACHMENT.bpTuneString = "bp_tune"
ATTACHMENT.AMMO_DISPLAY_ANGLE = -90
ATTACHMENT.MAX_CATEGORY_NUM = 12
ATTACHMENT.FireType = {
	BURST = 2,
	FULLAUTO = 0,
	DOUBLEBARREL = 3,
	DOUBLEBARREL_DUALTRIGGER = 4,
	SEMIAUTO = 1,
	BEAM = 5
}
ATTACHMENT.FireTypeIcon = {
	[ATTACHMENT.FireType.FULLAUTO] = "ui_firetype_fullauto",
	[ATTACHMENT.FireType.SEMIAUTO] = "ui_firetype_semiauto",
	[ATTACHMENT.FireType.BURST] = "ui_firetype_burst",
	[ATTACHMENT.FireType.DOUBLEBARREL] = "ui_firetype_semiauto",
	[ATTACHMENT.FireType.DOUBLEBARREL_DUALTRIGGER] = "ui_firetype_semiauto",
	[ATTACHMENT.FireType.BEAM] = "ui_firetype_spread"
}
ATTACHMENT.MobileFireTypeIcon = {
	[ATTACHMENT.FireType.FULLAUTO] = 0x3DE91F70481B45A,
	[ATTACHMENT.FireType.SEMIAUTO] = 0x25DA77FFED2662F,
	[ATTACHMENT.FireType.BURST] = 0x245B0D69FB6179C,
	[ATTACHMENT.FireType.DOUBLEBARREL] = 0x39FA5F2C442E801,
	[ATTACHMENT.FireType.DOUBLEBARREL_DUALTRIGGER] = 0x39FA5F2C442E801,
	[ATTACHMENT.FireType.BEAM] = 0x56C70A37A088F4D
}
ATTACHMENT.FireModeString = {
	[ATTACHMENT.FireType.SEMIAUTO] = 0x83A78B86F92D7EA,
	[ATTACHMENT.FireType.BURST] = 0x488A9AD429892A8,
	[ATTACHMENT.FireType.FULLAUTO] = 0xEA8840FEF58833D,
	[ATTACHMENT.FireType.DOUBLEBARREL] = 0x13C4552823F947F
}
ATTACHMENT.FireTypeStringRef = {
	full_auto_fire_mode = 0x993CC3B88C9FA0A,
	single_fire_mode = 0xCB269F6786D467B,
	burst_fire_mode = 0xB136D71FB14E42B,
	semi_auto_fire_mode = 0xB04E6977BFC5F95,
	pump_action_fire_mode = 0x596EE49A547F437,
	doublebarrel_fire_mode = 0xF980FB3D96A97C0,
	melee_fire_mode = 0xB34719585515E87,
	bolt_action_fire_mode = 0x6DAF8CB9D08D97A
}
ATTACHMENT.AltModeFireTypeStringRef = {
	[ATTACHMENT.FireType.FULLAUTO] = 0x993CC3B88C9FA0A,
	[ATTACHMENT.FireType.BURST] = 0xB136D71FB14E42B,
	[ATTACHMENT.FireType.SEMIAUTO] = 0xB04E6977BFC5F95
}
ATTACHMENT.AttachmentSlots = {
	nil,
	"override",
	"scope",
	"modifier",
	"visual",
	"other",
	"extra",
	"trigger",
	"reargrip",
	"muzzle",
	"underbarrel",
	"magazine",
	"backpiece",
	"frontpiece",
	"receiver",
	"conversionkit"
}
ATTACHMENT.UnlockAttachmentExceptions = {
	MWII_WZ_EXCLUSIVE = hashset( {
		nil,
		"ub_gl_drill_akilo"
	} )
}
ATTACHMENT.HyperburstIcon = "ui_firetype_hyperburst"
ATTACHMENT.listBundle = 0x6F910033B84FC58
ATTACHMENT.listBundleMGL = 0xCC2FCAE4B88731D
ATTACHMENT.BASE_ID = 10000
ATTACHMENT.STOCK_OFFSET = {
	Z = 4294967290,
	X = 0,
	Y = 0
}
ATTACHMENT.BULLPUP_STOCK_OFFSET = {
	Z = 4294967292,
	X = 4294967291,
	Y = 3
}
ATTACHMENT.LMG_STOCK_Z_OFFSET = -2
ATTACHMENT.PISTOL_STOCK_Z_OFFSET = -0.5
ATTACHMENT.FTAC_SEIGE_STOCK_Z_OFFSET = -5
ATTACHMENT.GetBundleReference = function ()
	return CONDITIONS.IsMagellanJupiterEnabled() and ATTACHMENT.listBundleMGL or ATTACHMENT.listBundle
end

ATTACHMENT.GetListBundle = function ()
	return Engine[0x6093D047200548]( ATTACHMENT.GetBundleReference() )
end

ATTACHMENT.IsValidAttachmentString = function ( f117_arg0 )
	local f117_local0
	if not String.IsNilOrEmpty( f117_arg0 ) and not ATTACHMENT.IsAttachmentRefLootIndexString( f117_arg0 ) and not ATTACHMENT.IsAttachmentRefBPTuneString( f117_arg0 ) then
		f117_local0 = not ATTACHMENT.IsStickerString( f117_arg0 )
	else
		f117_local0 = false
	end
	return f117_local0
end

ATTACHMENT.IsAttachmentRefLootIndexString = function ( f116_arg0 )
	return string.sub( f116_arg0, 1, string.len( "loot" ) ) == "loot"
end

ATTACHMENT.IsAttachmentRefBPTuneString = function ( f115_arg0 )
	return string.sub( f115_arg0, 1, string.len( ATTACHMENT.bpTuneString ) ) == ATTACHMENT.bpTuneString
end

ATTACHMENT.IsStickerString = function ( f114_arg0 )
	return string.sub( f114_arg0, 1, string.len( ATTACHMENT.stickerCategory ) ) == ATTACHMENT.stickerCategory
end

ATTACHMENT.GetStickerIndexFromCategory = function ( f113_arg0 )
	return string.sub( f113_arg0, string.len( ATTACHMENT.stickerCategory ) + 1, -1 )
end

ATTACHMENT.MobileIsAfterMarketPart = function ( f112_arg0 )
	if not f112_arg0 then
		return false
	end
	local f112_local0 = ATTACHMENT.GetBundleByRef( f112_arg0 )
	local f112_local1
	if f112_local0 then
		f112_local1 = f112_local0[0x3E623FAC6959829]
		if not f112_local1 then
		
		else
			local f112_local2 = CONDITIONS.IsMobileOrMobileSim()
			if f112_local2 then
				f112_local2 = f112_local1
			end
			return f112_local2
		end
	end
	f112_local1 = false
end

ATTACHMENT.MobileGetAttachmentTitleIconState = function ( f111_arg0 )
	local f111_local0 = ATTACHMENT.MobileIsAfterMarketPart( f111_arg0 )
	local f111_local1
	if f111_local0 then
		f111_local1 = f111_local0
	else
		f111_local1 = ItemDetailsUtils[0x982E9B9FD9C37B8][0x6F3A519051C2179]
	end
	return f111_local1
end

ATTACHMENT.GetBundleByRef = function ( f110_arg0 )
	Engine[0xD344B7DE66AFA81]( "ATTACHMENT.GetBundleByRef" )
	if not f110_arg0 or GL_HACK.IsInvalidAttachment( f110_arg0 ) or f110_arg0 == ATTACHMENT.none or not ATTACHMENT.GetBundleReference() then
		Engine[0xC99CAB76F12E539]()
		return nil
	elseif not ATTACHMENT.IsValidAttachmentString( f110_arg0 ) then
		Engine[0xC99CAB76F12E539]()
		return 
	end
	local f110_local0 = ATTACHMENT.GetBaseRefForTunedAttachment( f110_arg0 )
	if String.IsNilOrEmpty( f110_local0 ) then
		Engine[0xC99CAB76F12E539]()
		return nil
	elseif String.IsNilOrEmpty( GL_HACK.GetRefXHash( f110_local0 ) ) then
		Engine[0xC99CAB76F12E539]()
		return nil
	end
	local f110_local1 = Engine[0x6093D047200548]( 0xC2C9813BB16552F .. f110_arg0 )
	Engine[0xC99CAB76F12E539]()
	local f110_local2
	if f110_local1 and f110_local1[0x28887F70BF5EBA] and not f110_local1 then
		f110_local2 = f110_local1
	else
		f110_local2 = nil
	end
	return f110_local2
end

ATTACHMENT.GetBundleByBlueprintRefXhash = function ( f109_arg0 )
	local f109_local0 = ATTACHMENT.GetListBundle()
	for f109_local4, f109_local5 in pairs( f109_local0[0xA8636246CD7AB2A] ) do
		if f109_local5[0x8B6F2336E5960E5] and f109_arg0 == 0x0 .. f109_local5[0x8B6F2336E5960E5] then
			return ATTACHMENT.GetBundleByRef( f109_local5[0x8B6F2336E5960E5] )
		end
	end
	return nil
end

ATTACHMENT.GetIDByRef = function ( f108_arg0 )
	Engine[0xD344B7DE66AFA81]( "ATTACHMENT.GetIDByRef" )
	if GL_HACK.IsInvalidAttachment( f108_arg0 ) or f108_arg0 == ATTACHMENT.none or not ATTACHMENT.GetBundleReference() then
		Engine[0xC99CAB76F12E539]()
		return nil
	else
		local f108_local0 = ATTACHMENT.GetBundleByRef( f108_arg0 )
		Engine[0xC99CAB76F12E539]()
		if f108_local0 and f108_local0[0x28887F70BF5EBA] then
			return f108_local0[0x28887F70BF5EBA]
		else
			return nil
		end
	end
end

ATTACHMENT.GetBundleByID = function ( f107_arg0 )
	if Dvar[0x9E5BE3B4BBA4E0E]( 0xAE750DB994EB2DC ) then
		local f107_local0 = ATTACHMENT.GetListBundle()
		assert( f107_local0 )
		assert( f107_arg0 )
		for f107_local5, f107_local6 in pairs( f107_local0[0xA8636246CD7AB2A] ) do
			if f107_local6[0x8B6F2336E5960E5] then
				local f107_local4 = Engine[0x6093D047200548]( 0xC2C9813BB16552F .. f107_local6[0x8B6F2336E5960E5] )
				if f107_local4[0x28887F70BF5EBA] == f107_arg0 then
					return f107_local4
				end
			end
		end
		return nil
	else
		return ATTACHMENT.GetBundleByRef( LOOT.GetItemRef( f107_arg0 ) )
	end
end

ATTACHMENT.GetRefByID = function ( f106_arg0 )
	assert( f106_arg0 )
	if Dvar[0x9E5BE3B4BBA4E0E]( 0xAE750DB994EB2DC ) then
		local f106_local0 = ATTACHMENT.GetListBundle()
		assert( f106_local0 )
		for f106_local5, f106_local6 in pairs( f106_local0[0xA8636246CD7AB2A] ) do
			if f106_local6[0x8B6F2336E5960E5] then
				local f106_local4 = Engine[0x6093D047200548]( 0xC2C9813BB16552F .. f106_local6[0x8B6F2336E5960E5] )
				if f106_local4[0x28887F70BF5EBA] == f106_arg0 then
					return f106_local6[0x8B6F2336E5960E5]
				end
			end
		end
		return nil
	else
		return LOOT.GetItemRef( f106_arg0 )
	end
end

ATTACHMENT.GetAllRefsByID = function ( f105_arg0 )
	local f105_local0 = ATTACHMENT.GetListBundle()
	assert( f105_local0 )
	assert( f105_arg0 )
	local f105_local1 = {}
	for f105_local6, f105_local7 in pairs( f105_local0[0xA8636246CD7AB2A] ) do
		if Dvar[0x9E5BE3B4BBA4E0E]( 0xBCBEBF199EEEBE2 ) then
			if f105_local7[0x8B6F2336E5960E5] then
				local f105_local5 = Engine[0x6093D047200548]( 0xC2C9813BB16552F .. f105_local7[0x8B6F2336E5960E5] )
				if f105_local5[0x28887F70BF5EBA] == f105_arg0 then
					table.insert( f105_local1, f105_local7[0x8B6F2336E5960E5] )
				end
			end
		end
		if f105_local7[0x28887F70BF5EBA] and f105_local7[0x28887F70BF5EBA] == f105_arg0 then
			table.insert( f105_local1, f105_local7[0x8B6F2336E5960E5] )
		end
	end
	return f105_local1
end

ATTACHMENT.GetImage = function ( f104_arg0 )
	local f104_local0 = ATTACHMENT.GetBundleByRef( f104_arg0 )
	local f104_local1 = CoD.ERROR_TEXTURE
	if f104_local0 then
		if not String.IsNilOrEmpty( f104_local0[0xAB612888528489A] ) then
			f104_local1 = f104_local0[0xAB612888528489A]
		elseif not String.IsNilOrEmpty( f104_local0[0xF238C2876631349] ) then
			f104_local1 = f104_local0[0xF238C2876631349]
		end
	end
	if String.IsNilOrEmpty( f104_local1 ) then
		local f104_local2 = CoD.ERROR_TEXTURE
		if not f104_local2 then
			f104_local1 = f104_local2
		else
			
		end
	end
	return f104_local1
end

ATTACHMENT.GetBaseName = function ( f103_arg0, f103_arg1, f103_arg2, f103_arg3, f103_arg4 )
	if not LUI.StringIsNilOrEmpty( f103_arg1 ) and not LUI.StringIsNilOrEmpty( f103_arg0 ) then
		if Dvar[0x9E5BE3B4BBA4E0E]( 0xDF90BB5C754A36F ) then
			local f103_local0 = nil
			local f103_local1 = GL_HACK.GetWeaponMPRef( f103_arg2 )
			if LUI.FlowManager.GetMenuByName( LOADOUT.GetGunsmithTabsMenuRef() ) then
				local f103_local2 = LUI.FlowManager.GetScopedData( LOADOUT.GetGunsmithTabsMenuRef() )
				if f103_local2 and f103_local2.attachmentData and f103_local2.attachmentData[f103_local1] and f103_local2.attachmentData[f103_local1].attachments then
					f103_local0 = f103_local2.attachmentData[f103_local1].attachments
				end
			end
			if not f103_local0 then
				if f103_arg4 and f103_arg4.attachmentLookupFunc then
					local f103_local2 = f103_arg4.attachmentLookupFunc( f103_arg3, f103_local1 )
					if not f103_local2 then
						f103_local0 = f103_local2
					else
						f103_local0 = GL_HACK.GetAttachmentsAndBucketItems( f103_arg3, {
							isForceRequestingAttachmentData = true,
							weaponRef = f103_local1,
							wantSpecificCategory = f103_arg1
						} )
					end
				end
				f103_local0 = GL_HACK.GetAttachmentsAndBucketItems( f103_arg3, {
					isForceRequestingAttachmentData = true,
					weaponRef = f103_local1,
					wantSpecificCategory = f103_arg1
				} )
			end
			if f103_local0[f103_arg1] then
				for f103_local5, f103_local6 in ipairs( f103_local0[f103_arg1] ) do
					if f103_local6.ref == f103_arg0 then
						return f103_local6.baseName
					end
				end
			end
		else
			local f103_local0 = Engine[0x160CE6B682CC3D7]( GL_HACK.GetWeaponMPRef( f103_arg2 ), f103_arg0 )
			local f103_local1
			if f103_local0 then
				f103_local1 = f103_local0
			else
				f103_local1 = f103_local0.baseName
			end
			return f103_local1
		end
	end
	return nil
end

ATTACHMENT.GetAttachmentsWithBaseName = function ( f102_arg0, f102_arg1, f102_arg2, f102_arg3, f102_arg4 )
	local f102_local0 = {}
	if not LUI.StringIsNilOrEmpty( f102_arg1 ) and not LUI.StringIsNilOrEmpty( f102_arg0 ) then
		if Dvar[0x9E5BE3B4BBA4E0E]( 0xDF90BB5C754A36F ) then
			local f102_local1 = nil
			local f102_local2 = GL_HACK.GetWeaponMPRef( f102_arg2 )
			if LUI.FlowManager.GetMenuByName( LOADOUT.GetGunsmithTabsMenuRef() ) then
				local f102_local3 = LUI.FlowManager.GetScopedData( LOADOUT.GetGunsmithTabsMenuRef() )
				if f102_local3 and f102_local3.attachmentData and f102_local3.attachmentData[f102_local2] and f102_local3.attachmentData[f102_local2].attachments then
					f102_local1 = f102_local3.attachmentData[f102_local2].attachments
				end
			end
			if not f102_local1 then
				if f102_arg4 and f102_arg4.attachmentLookupFunc then
					local f102_local3 = f102_arg4.attachmentLookupFunc( f102_arg3, f102_local2 )
					if not f102_local3 then
						f102_local1 = f102_local3
					else
						f102_local1 = GL_HACK.GetAttachmentsAndBucketItems( f102_arg3, {
							isForceRequestingAttachmentData = true,
							weaponRef = f102_local2,
							wantSpecificCategory = f102_arg1
						} )
					end
				end
				f102_local1 = GL_HACK.GetAttachmentsAndBucketItems( f102_arg3, {
					isForceRequestingAttachmentData = true,
					weaponRef = f102_local2,
					wantSpecificCategory = f102_arg1
				} )
			end
			for f102_local6, f102_local7 in ipairs( f102_local1[f102_arg1] ) do
				if f102_local7.baseName == f102_arg0 then
					table.insert( f102_local0, f102_local7.ref )
				end
			end
		else
			for f102_local4, f102_local5 in ipairs( Engine[0x402E4C91B9A0535]( GL_HACK.GetWeaponMPRef( f102_arg2 ), f102_arg0 ) ) do
				table.insert( f102_local0, f102_local5.ref )
			end
		end
	end
	return f102_local0
end

ATTACHMENT.GetRefAndVariantID = function ( f101_arg0 )
	local f101_local0 = LUI.Split( ATTACHMENT.GetBaseRefForTunedAttachment( f101_arg0 ), "|" )
	return f101_local0[1], f101_local0[2]
end

ATTACHMENT.GetAttachmentModifierString = function ( f100_arg0, f100_arg1 )
	local f100_local0 = ""
	local f100_local1 = ""
	if f100_arg0 and f100_arg1 then
		if 0 < f100_arg1 then
			f100_local0 = "+"
		else
			f100_local0 = "-"
		end
		f100_local1 = Engine[0xED84C33EC5F01EA]( f100_arg0 )
	end
	return f100_local0, f100_local1
end

ATTACHMENT.GetTableFromWeaponSetup = function ( f99_arg0 )
	local f99_local0 = {}
	if f99_arg0 and f99_arg0.attachmentSetup then
		for f99_local1 = 0, #f99_arg0.attachmentSetup - 1, 1 do
			table.insert( f99_local0, ATTACHMENT.GetRefFromSetup( f99_arg0.attachmentSetup[f99_local1] ) )
		end
	end
	return f99_local0
end

ATTACHMENT.GetBaseRef = function ( f98_arg0 )
	local f98_local0 = ATTACHMENT.GetBundleByRef( f98_arg0 )
	return f98_local0[0xBE72D7E1D0B16E5]
end

ATTACHMENT.GetRefInternal = function ( f97_arg0, f97_arg1, f97_arg2, f97_arg3 )
	if f97_arg1 == nil or f97_arg1 == "none" then
		return f97_arg0
	end
	local f97_local0 = f97_arg0
	local f97_local1 = ""
	local f97_local2 = 0
	if f97_local1 == f97_arg0 then
		local f97_local3 = StringTable[0x2DCF0973239E909]( f97_arg2.file, f97_arg2.cols.weapOrClass, f97_arg1, f97_local2 )
		if f97_local3 == "" then
			local f97_local4 = StringTable[0x2DCF0973239E909]
			local f97_local5 = f97_arg2.file
			local f97_local6 = f97_arg2.cols.weapOrClass
			local f97_local7 = WEAPON.GetWeaponClass
			local f97_local8
			if not f97_arg3 then
				f97_local8 = f97_arg3
			else
				f97_local8 = f97_arg1
			end
			f97_local3 = f97_local4( f97_local5, f97_local6, f97_local7( f97_local8 ), f97_local2 )
		end
		if f97_local3 ~= "" then
			f97_local0 = f97_local3
		end
	end
	return f97_local0
end

ATTACHMENT.GetRef = function ( f96_arg0, f96_arg1, f96_arg2 )
	return f96_arg0
end

ATTACHMENT.IsTuningLootRef = function ( f95_arg0 )
	if not String.IsNilOrEmpty( f95_arg0 ) then
		local f95_local0, f95_local1 = string.find( f95_arg0, "_tuning" )
		return f95_local1 == #f95_arg0
	else
		return false
	end
end

ATTACHMENT.GetAttachmentAddition = function ( f94_arg0, f94_arg1 )
	local f94_local0 = ATTACHMENT.GetBundleByRef( f94_arg0 )
	local f94_local1 = {}
	if f94_local0 and f94_local0[0xEBD8701371CDFFE] then
		for f94_local6, f94_local7 in ipairs( f94_local0[0xEBD8701371CDFFE] ) do
			local f94_local5
			if f94_local7 then
				f94_local5 = f94_local7
			else
				f94_local5 = f94_local7[0xBD767A7E1F8180E]
			end
			if not String.IsNilOrEmpty( f94_local5 ) then
				if ATTACHMENT.IsTuningLootRef( f94_local5 ) then
					if f94_arg1 then
						table.insert( f94_local1, f94_local5 )
					end
				end
				table.insert( f94_local1, f94_local5 )
			end
		end
	end
	return f94_local1
end

ATTACHMENT.GetName = function ( f93_arg0 )
	return Engine[0xED84C33EC5F01EA]( ATTACHMENT.GetNameUnlocalized( f93_arg0 ) )
end

ATTACHMENT.GetNameUnlocalized = function ( f92_arg0 )
	local f92_local0 = ATTACHMENT.GetBundleByRef( f92_arg0 )
	if f92_local0 then
		local f92_local1 = f92_local0[0x4BCADBA8E631B86]
		local f92_local2 = f92_local0[0x4BCADBA8E631B86]
	end
	return f92_local1 and f92_local2 or 0x0
end

ATTACHMENT.GetDesc = function ( f91_arg0 )
	local f91_local0 = ATTACHMENT.GetBundleByRef( f91_arg0 )
	if f91_local0 then
		local f91_local1 = f91_local0[0xCC44970C8397929]
		local f91_local2 = f91_local0[0xCC44970C8397929]
	end
	return Engine[0xED84C33EC5F01EA]( f91_local1 and f91_local2 or 0x0 )
end

ATTACHMENT.GetEquippedOptic = function ( f90_arg0 )
	local f90_local0 = f90_arg0.weapon:get()
	for f90_local4, f90_local5 in ddlpairs( f90_arg0.attachmentSetup ) do
		local f90_local6 = ATTACHMENT.GetRef( ATTACHMENT.GetRefFromSetup( f90_local5 ), f90_local0 )
		if ATTACHMENT.GetCategory( f90_local6 ) == ATTACHMENT.opticCategory then
			return f90_local6
		end
	end
	f90_local1 = StringTable[0x2DCF0973239E909]( CSV.MPWeapons.file, CSV.MPWeapons.cols.ref, f90_local0, CSV.MPWeapons.cols.asset )
	for f90_local6, f90_local7 in pairs( Engine[0xC03D2E893CA114A]( f90_local1 ) ) do
		if Engine[0xC39811B3E085D86]( f90_local1, f90_local7 ) == ATTACHMENT.opticCategory then
			return ATTACHMENT.GetRef( f90_local7, f90_local0 )
		end
	end
	return ""
end

ATTACHMENT.GetOpticRef = function ( f89_arg0 )
	return 0x0
end

ATTACHMENT.GetOpticReticleCategory = function ( f88_arg0 )
	if String.IsNilOrEmpty( f88_arg0 ) then
		return ""
	end
	local f88_local0 = WEAPON.GetReticleCategoryForRef( f88_arg0 )
	local f88_local1
	if f88_local0 then
		f88_local1 = f88_local0[0x6C6E9BC1769C076]
		if not f88_local1 then
		
		else
			return f88_local1
		end
	end
	f88_local1 = ""
end

ATTACHMENT.SupportsCustomReticles = function ( f87_arg0 )
	if f87_arg0 == nil or #f87_arg0 == 0 then
		return false
	end
	local f87_local0 = ATTACHMENT.GetBundleByRef( f87_arg0 )
	local f87_local1
	if f87_local0 then
		f87_local1 = f87_local0[0xA51E8E50DB8EB6F]
		if not f87_local1 then
		
		else
			return not String.IsNilOrEmpty( f87_local1 )
		end
	end
	f87_local1 = 0x0
end

ATTACHMENT.ReticleTypeSupportsAltImage = function ( f86_arg0 )
	local f86_local0
	if f86_arg0 ~= "hybrid" and f86_arg0 ~= "hybridthermal" then
		f86_local0 = false
	else
		f86_local0 = true
	end
	return f86_local0
end

ATTACHMENT.GetWeaponCustomAttachmentCount = function ( f85_arg0 )
	local f85_local0 = LUI.Split( f85_arg0, "|+" )
	local f85_local1 = 0
	table.remove( f85_local0, 1 )
	for f85_local5, f85_local6 in ipairs( f85_local0 ) do
		if ATTACHMENT.IsSelectableAttachment( f85_local6 ) then
			f85_local1 = f85_local1 + 1
		end
	end
	return f85_local1
end

ATTACHMENT.IsSelectableAttachment = function ( f84_arg0, f84_arg1 )
	local f84_local0 = f84_arg0
	if type( f84_arg0 ) == "table" then
		f84_local0 = f84_arg0.ref
	end
	if f84_local0 == ATTACHMENT.camoCategory then
		return false
	end
	local f84_local1 = ATTACHMENT.GetCategory( f84_local0 )
	local f84_local2
	if String.IsNilOrEmpty( f84_local1 ) or f84_local1 == ATTACHMENT.receiverCategory or f84_local1 == ATTACHMENT.camoCategory or f84_local1 == ATTACHMENT.none then
		f84_local2 = false
	else
		f84_local2 = true
	end
	return f84_local2
end

ATTACHMENT.ClearAttachment = function ( f83_arg0 )
	ATTACHMENT.SetPlayerDataRef( f83_arg0, ATTACHMENT.none )
	f83_arg0.variantID:set( ATTACHMENT.baseVariant )
	f83_arg0.hasBPTune:set( GUNSMITH.CAN_PRO_TUNE )
	f83_arg0.customTune[0]:set( GUNSMITH.NO_CUSTOM_TUNING_VALUE )
	f83_arg0.customTune[1]:set( GUNSMITH.NO_CUSTOM_TUNING_VALUE )
end

ATTACHMENT.ClearAllAttachments = function ( f82_arg0 )
	for f82_local3, f82_local4 in ddlpairs( f82_arg0.attachmentSetup ) do
		ATTACHMENT.ClearAttachment( f82_local4 )
	end
	WEAPON.SetEquippedReticle( f82_arg0, WEAPON.ReticleNoneValue )
end

ATTACHMENT.GetCategory = function ( f81_arg0 )
	local f81_local0 = ATTACHMENT.GetBundleByRef( f81_arg0 )
	local f81_local1
	if f81_local0 then
		f81_local1 = string.lower( f81_local0[0xBD2E7FFB1224E91] )
		if not f81_local1 then
		
		else
			return f81_local1
		end
	end
	f81_local1 = 0x0
end

ATTACHMENT.GetAttachmentAvailableProjectsByID = function ( f80_arg0 )
	local f80_local0 = ATTACHMENT.GetBundleByID( f80_arg0 )
	local f80_local1
	if f80_local0 then
		f80_local1 = f80_local0
	else
		f80_local1 = f80_local0[0x429E8B8C45B9CBA]
	end
	return f80_local1
end

ATTACHMENT.IsUnlocked = function ( f79_arg0, f79_arg1, f79_arg2 )
	return Unlocks[0x3D8BD2B211DB6CC]( f79_arg2, WEAPON.GetWeaponClassAttachUnlockTablePrefix( WEAPON.GetWeaponClass( f79_arg1 ) ) .. "Attach", f79_arg1 .. "+" .. f79_arg0 )
end

ATTACHMENT.GetUnlockText = function ( f78_arg0, f78_arg1, f78_arg2, f78_arg3 )
	local f78_local0 = WEAPON.GetWeaponClass( f78_arg1 )
	local f78_local1 = ATTACHMENT.GetUnlockTable( f78_arg1 )
	local f78_local2 = f78_arg1 .. "+" .. f78_arg0
	if f78_arg3 then
		return Engine[0xED84C33EC5F01EA]( 0x7EE30798B4B0310 )
	else
		return Engine[0xED84C33EC5F01EA]( StringTable[0x2DCF0973239E909]( f78_local1, CSV.attachmentUnlockTable.cols.weaponAttachRef, f78_local2, CSV.attachmentUnlockTable.cols.ui_text ), StringTable[0x2DCF0973239E909]( f78_local1, CSV.attachmentUnlockTable.cols.weaponAttachRef, f78_local2, CSV.attachmentUnlockTable.cols.ui_text_var1 ), StringTable[0x2DCF0973239E909]( f78_local1, CSV.attachmentUnlockTable.cols.weaponAttachRef, f78_local2, CSV.attachmentUnlockTable.cols.ui_text_var2 ) )
	end
end

ATTACHMENT.GetUnlockTable = function ( f77_arg0 )
	return CSV.attachmentUnlockTable.fileRoot .. WEAPON.GetWeaponClassAttachUnlockTablePrefix( WEAPON.GetWeaponClass( f77_arg0 ) ) .. CSV.attachmentUnlockTable.fileSuffix
end

ATTACHMENT.IsNew = function ( f76_arg0, f76_arg1, f76_arg2 )
	return false
end

ATTACHMENT.ClearNew = function ( f75_arg0, f75_arg1, f75_arg2 )
	
end

ATTACHMENT.GetConflictingAttachment = function ( f74_arg0, f74_arg1 )
	local f74_local0 = ATTACHMENT.GetCategory( f74_arg1 )
	for f74_local4, f74_local5 in pairs( f74_arg0.attachments ) do
		local f74_local6 = f74_local5.ref
		if ATTACHMENT.GetCategory( f74_local6 ) == f74_local0 then
			return f74_local6
		end
	end
	return false
end

ATTACHMENT.GetAttachmentCategoryName = function ( f73_arg0 )
	return StringTable[0x2DCF0973239E909]( CSV.attachmentCategories.file, CSV.attachmentCategories.cols.ref, f73_arg0, CSV.attachmentCategories.cols.name )
end

ATTACHMENT.GetAttachmentCategoryButton = function ( f72_arg0 )
	return tonumber( StringTable[0x2DCF0973239E909]( CSV.attachmentCategories.file, CSV.attachmentCategories.cols.ref, f72_arg0, CSV.attachmentCategories.cols.buttonIndex ) )
end

ATTACHMENT.GetBlockedCategory = function ( f71_arg0 )
	return 0x0
end

ATTACHMENT.GetBlockedCategorySlot = function ( f70_arg0, f70_arg1 )
	local f70_local0 = ATTACHMENT.GetBlockedCategory( ATTACHMENT.GetRef( f70_arg0, f70_arg1.weapon ) )
	if String.IsNilOrEmpty( f70_local0 ) then
		return 
	end
	for f70_local4, f70_local5 in ipairs( f70_arg1.attachments ) do
		if ATTACHMENT.GetCategory( ATTACHMENT.GetRef( f70_local5.ref, f70_arg1.weapon ) ) == f70_local0 then
			return f70_local4
		end
	end
end

ATTACHMENT.GetConfigString = function ( f69_arg0 )
	local f69_local0 = ""
	for f69_local4, f69_local5 in ipairs( f69_arg0.attachments ) do
		if f69_local5.ref ~= ATTACHMENT.none then
			if 0 < #f69_local0 then
				f69_local0 = f69_local0 .. "+"
			end
			f69_local0 = f69_local0 .. f69_local5.ref .. "|" .. f69_local5.variantID
		end
	end
	return f69_local0
end

ATTACHMENT.GetCategoryByLootID = function ( f68_arg0 )
	local f68_local0 = ATTACHMENT.GetBundleByID( f68_arg0 )
	return string.lower( f68_local0[0xBD2E7FFB1224E91] )
end

ATTACHMENT.GetNewAttachmentIDsByCategory = function ( f67_arg0, f67_arg1, f67_arg2 )
	local f67_local0 = {}
	local f67_local1 = Loot[0x3CB161A5685F7FF]( f67_arg0, f67_arg2 .. GUNSMITH.typeNamePostFix.attachment )
	if f67_local1 and 0 < #f67_local1 then
		for f67_local5, f67_local6 in ipairs( f67_local1 ) do
			if ATTACHMENT.GetCategoryByLootID( f67_local6 ) == f67_arg1 then
				table.insert( f67_local0, f67_local6 )
			end
		end
	end
	return f67_local0
end

ATTACHMENT.GetLootIDForVariant = function ( f66_arg0, f66_arg1, f66_arg2 )
	if f66_arg2 == 0 then
		return ATTACHMENT.GetIDByRef( f66_arg1 )
	end
	local f66_local0 = Engine[0xD3946E1B3E34A42]( GL_HACK.GetWeaponMPRef( f66_arg0 ), f66_arg1 )
	local f66_local1 = f66_local0[f66_arg2]
	if f66_local1 then
		local f66_local2
		if f66_local1[0x55F116BF695C8F6] then
			f66_local2 = f66_local1[0xAE1E225E2DD2DF4]( f66_local1 )
			if not f66_local2 then
			
			else
				local f66_local3 = ATTACHMENT.GetBundleByBlueprintRefXhash( f66_local2 )
				if f66_local3 then
					return f66_local3[0x28887F70BF5EBA]
				end
			end
		end
		f66_local2 = 0x0
	end
	return 0
end

ATTACHMENT.GetLootIDForRef = function ( f65_arg0 )
	if f65_arg0 ~= ATTACHMENT.none then
		local f65_local0 = ATTACHMENT.GetBundleByRef( f65_arg0 )
		return f65_local0[0x28887F70BF5EBA]
	else
		return LOOT.emptyID
	end
end

ATTACHMENT.IsDisplayNameAvailable = function ( f64_arg0 )
	if f64_arg0 == nil or #f64_arg0 == 0 or f64_arg0 == "none" then
		return false
	else
		local f64_local0 = StringTable[0x2DCF0973239E909]( CSV.MPAttachments.file, CSV.MPAttachments.cols.ref, f64_arg0, CSV.MPAttachments.cols.category )
		return false
	end
end

ATTACHMENT.AreVariantsEnabled = function ()
	return Dvar[0x9E5BE3B4BBA4E0E]( 0x2B6191240B8445D )
end

ATTACHMENT.GetOverrideDesc = function ( f62_arg0, f62_arg1, f62_arg2 )
	local f62_local0 = Engine[0x756D55D24F7B53]( GL_HACK.GetWeaponMPRef( f62_arg1 ) )
	if f62_arg2 <= #f62_local0 and 0 < f62_arg2 and f62_local0[f62_arg2][0x195253356D84EA3] then
		local f62_local1 = ATTACHMENT.GetBundleByRef( f62_arg0 )
		local f62_local2 = f62_local1[0xCC44970C8397929]
		if not String.IsNilOrEmpty( f62_local2 ) then
			return f62_local2
		end
	end
	return 0x0
end

ATTACHMENT.IsDismembermentEnabled = function ( f61_arg0 )
	return StringTable[0x2DCF0973239E909]( CSV.MPAttachments.file, CSV.MPAttachments.cols.ref, f61_arg0, CSV.MPAttachments.cols.dismembermentEnabled ) ~= ""
end

ATTACHMENT.GetRefFromSetup = function ( f60_arg0 )
	return f60_arg0.attachment:get()
end

ATTACHMENT.SetPlayerDataRef = function ( f59_arg0, f59_arg1 )
	if String.IsNilOrEmpty( f59_arg1 ) then
		f59_arg0.attachment:set( ATTACHMENT.none )
		assert( false, "Attempting to store empty string to attachment player data. Instead of an empty string, ATTACHMENT.none should have been passed." )
	else
		f59_arg0.attachment:set( f59_arg1 )
	end
end

ATTACHMENT.SetBaseAttachment = function ( f58_arg0, f58_arg1, f58_arg2 )
	if String.IsNilOrEmpty( f58_arg2 ) then
		f58_arg0.attachmentSetup[f58_arg1].attachment:set( ATTACHMENT.none )
		assert( false, "Attempting to store empty string to attachment player data. Instead of an empty string, ATTACHMENT.none should have been passed." )
	else
		f58_arg0.attachmentSetup[f58_arg1].attachment:set( f58_arg2 )
	end
	f58_arg0.attachmentSetup[f58_arg1].variantID:set( ATTACHMENT.baseVariant )
end

ATTACHMENT.FindFirstFreeAttachmentIndex = function ( f57_arg0 )
	for f57_local3, f57_local4 in ddlpairs( f57_arg0.attachmentSetup ) do
		if 5 <= f57_local3 then
			return false
		elseif f57_local4.attachment:get() == ATTACHMENT.none then
			return f57_local3
		end
	end
	return false
end

ATTACHMENT.IsDefaultAttachment = function ( f56_arg0, f56_arg1 )
	return LUI.IsItemInArray( GL_HACK.GetDefaultAttachmentData( f56_arg0 ), f56_arg1 )
end

ATTACHMENT.GetDefaultAttachmentRefForSlotIndex = function ( f55_arg0, f55_arg1 )
	for f55_local3, f55_local4 in pairs( Engine[0xC03D2E893CA114A]( f55_arg0 ) ) do
		if Engine[0x603B6AC5797050A]( f55_arg0, f55_local4 ) == f55_arg1 then
			return f55_local4
		end
	end
end

ATTACHMENT.GetAttachmentAdditionFullRefForSlotIndex = function ( f54_arg0, f54_arg1, f54_arg2 )
	local f54_local0 = nil
	for f54_local10, f54_local11 in ipairs( f54_arg1 ) do
		local f54_local12 = f54_local11.ref
		if f54_local12 and f54_local12 ~= ATTACHMENT.none then
			for f54_local8, f54_local9 in ipairs( ATTACHMENT.GetAttachmentAddition( f54_local12 ) ) do
				if not String.IsNilOrEmpty( f54_local9 ) and f54_local9 ~= ATTACHMENT.none and f54_arg2 == Engine[0x603B6AC5797050A]( f54_arg0, f54_local9 ) then
					f54_local0 = f54_local9
					local f54_local7 = f54_arg1[f54_local10].variantID
					if f54_local7 and 0 <= f54_local7 then
						f54_local0 = f54_local0 .. "|" .. f54_local7
					end
					return f54_local0
				end
			end
		end
	end
	return f54_local0
end

ATTACHMENT.IsSelectedAttachmentInCategoryTunable = function ( f53_arg0, f53_arg1, f53_arg2, f53_arg3, f53_arg4 )
	local f53_local0 = nil
	local f53_local1 = f53_arg4
	if not f53_local1 then
		f53_local1 = ClientWeapon[0x8E1E8769A4A0774]( f53_arg0, f53_arg2 )
	end
	local f53_local2 = nil
	for f53_local6, f53_local7 in ipairs( f53_arg3.attachments ) do
		if f53_local7.ref ~= "none" and ATTACHMENT.GetCategory( f53_local7.ref ) == f53_arg1 then
			f53_local2 = f53_local7.ref
			break
		end
	end
	if f53_local2 and f53_local2 ~= "none" and f53_local1[f53_local2] ~= nil then
		if ATTACHMENT.IsDefaultAttachment( f53_arg2, f53_local2 ) or f53_local1[f53_local2].tuningEnabled ~= true then
			f53_local4 = false
		else
			f53_local4 = true
		end
		return f53_local4
	else
		return false
	end
end

ATTACHMENT.GetTableWithCurrentAttachment = function ( f52_arg0, f52_arg1, f52_arg2, f52_arg3, f52_arg4 )
	local f52_local0 = LUI.DeepCopy( f52_arg0 )
	if f52_arg2 then
		f52_local0.attachments[f52_arg2].ref = ATTACHMENT.none
		f52_local0.attachments[f52_arg2].variantID = ATTACHMENT.baseVariant
	end
	if not f52_arg1 then
		f52_arg1 = #f52_local0.attachments + 1
	end
	if f52_arg3 then
		f52_local0.attachments[f52_arg1] = f52_local0.attachments[f52_arg1] or {}
		f52_local0.attachments[f52_arg1].ref = ATTACHMENT.GetRef( f52_arg3, f52_local0.weapon )
		local f52_local1 = f52_local0.attachments[f52_arg1]
		local f52_local2
		if not f52_arg4 then
			f52_local2 = f52_arg4
		else
			f52_local2 = ATTACHMENT.baseVariant
		end
		f52_local1.variantID = f52_local2
	end
	return f52_local0
end

ATTACHMENT.GetTableWithAttachmentEquipped = function ( f51_arg0, f51_arg1, f51_arg2, f51_arg3, f51_arg4, f51_arg5, f51_arg6, f51_arg7, f51_arg8 )
	local f51_local0 = ATTACHMENT.GetTableWithCurrentAttachment( f51_arg1, f51_arg6, f51_arg7.blockedCategorySlot, f51_arg3, f51_arg5 )
	local f51_local1
	if f51_arg2 and not f51_arg2 then
		f51_local1 = f51_arg2
	else
		f51_local1 = ATTACHMENT.none
	end
	local f51_local2
	if f51_arg3 ~= ATTACHMENT.none and not f51_arg3 then
		f51_local2 = f51_arg3
	else
		f51_local2 = f51_local1
	end
	local f51_local3, f51_local4, f51_local5 = GUNSMITH.CheckBlockedEquippedAttachmentLogic( f51_arg0, f51_arg1, f51_arg2, f51_local0, f51_local2, f51_arg4, f51_arg7, f51_arg8 )
	for f51_local9, f51_local10 in ipairs( f51_local3 ) do
		f51_local0 = ATTACHMENT.GetTableWithoutAttachment( f51_local0, f51_local10.ref )
	end
	for f51_local9, f51_local10 in ipairs( f51_local5 ) do
		f51_local0 = ATTACHMENT.GetTableWithCurrentAttachment( f51_local0, GUNSMITH.GetSelectedAttachIndexForCategory( ATTACHMENT.GetCategory( f51_local10.ref ), f51_local0 ), nil, f51_local10.ref, ATTACHMENT.baseVariant )
	end
	for f51_local9, f51_local10 in ipairs( f51_local4 ) do
		f51_local0 = ATTACHMENT.GetTableWithCurrentAttachment( f51_local0, GUNSMITH.GetSelectedAttachIndexForCategory( ATTACHMENT.GetCategory( f51_local10.ref ), f51_local0 ), nil, f51_local10.ref, ATTACHMENT.baseVariant )
	end
	return f51_local0
end

ATTACHMENT.GetTableWithoutAttachment = function ( f50_arg0, f50_arg1 )
	local f50_local0 = LUI.DeepCopy( f50_arg0 )
	if not String.IsNilOrEmpty( f50_arg1 ) and f50_local0.attachments then
		for f50_local4, f50_local5 in ipairs( f50_local0.attachments ) do
			if f50_local5.ref == f50_arg1 then
				f50_local5.category = ATTACHMENT.none
				f50_local5.ref = ATTACHMENT.none
				f50_local5.variantID = ATTACHMENT.baseVariant
				break
			end
		end
	end
	return f50_local0
end

ATTACHMENT.GetModifiersValuesFromAttachmentData = function ( f49_arg0, f49_arg1, f49_arg2, f49_arg3 )
	local f49_local0 = {}
	if f49_arg1.ref ~= ATTACHMENT.none and not f49_arg1.isClassified then
		if f49_arg1.modifierData then
			f49_local0 = f49_arg1.modifierData
		else
			local f49_local1 = WEAPON.GetWeaponModelName( f49_arg2.weapon, f49_arg3, {
				showSWhiskeyMag = true,
				includeAttachments = true,
				keepAkimbo = true
			} )
			local f49_local2 = Engine[0x603B6AC5797050A]( f49_local1, f49_arg1.ref )
			if f49_local2 ~= Enum[0x540F63FFAF44174][0xBEA71FD0CCA2F6D] then
				local f49_local3 = ClientWeapon[0xA41C97AC6ADDC24]( f49_arg0, f49_local1, f49_local2 )
				if f49_local3 ~= nil then
					f49_local0 = f49_local3
				end
			end
		end
	end
	return f49_local0
end

ATTACHMENT.GetAttachmentData = function ( f48_arg0, f48_arg1, f48_arg2, f48_arg3 )
	local f48_local0 = GL_HACK.GetAttachmentData( f48_arg0, f48_arg3 )
	f48_local0.category = ATTACHMENT.GetCategory( f48_arg3 )
	f48_local0.categoryName = ATTACHMENT.GetAttachmentCategoryName( f48_local0.category )
	f48_local0.weaponReference = f48_arg1
	local f48_local1 = WEAPON.GetWeaponModelName( f48_arg1, f48_arg2, {
		includeAttachments = true
	} )
	f48_local0.isTunable = ATTACHMENT.IsSelectedAttachmentInCategoryTunable( f48_arg0, f48_local0.category, f48_local1, f48_arg2, ClientWeapon[0x8E1E8769A4A0774]( f48_arg0, f48_local1 ) )
	return f48_local0
end

ATTACHMENT.GetBaseRefForTunedAttachment = function ( f47_arg0 )
	local f47_local0 = String.Split( f47_arg0, "[" )
	return f47_local0[1]
end

ATTACHMENT.GetAttachmentRefsFromAttachmentsData = function ( f45_arg0 )
	return Table.Map( f45_arg0, function ( f46_arg0, f46_arg1, f46_arg2 )
		return f46_arg0.ref
	end
	 )
end

ATTACHMENT.GetBlockedEquippedAttachments = function ( f44_arg0, f44_arg1, f44_arg2, f44_arg3 )
	local f44_local0 = {}
	local f44_local1 = WEAPON.GetWeaponModelName( f44_arg1.weapon, f44_arg1, {
		showSWhiskeyMag = true,
		includeAttachments = true,
		keepAkimbo = true
	} )
	local f44_local2 = Engine[0x603B6AC5797050A]( f44_local1, f44_arg2 )
	local f44_local3 = nil
	if f44_local2 == Enum[0x540F63FFAF44174][0x8BA9A9EF1FB673C] then
		f44_local3 = ClientWeapon[0x66604FC8FC4DA18]( f44_arg0, f44_local1, f44_arg2 )
	else
		f44_local3 = ClientWeapon[0xD3CE47FE2479379]( f44_arg0, f44_local1, f44_local2 )
	end
	if f44_local3 then
		local f44_local4 = {}
		for f44_local8, f44_local9 in pairs( f44_local3.blockedAttachmentCategories ) do
			if LUI.IsItemInArray( ATTACHMENT.AttachmentSlots, f44_local9 ) then
				table.insert( f44_local4, f44_local9 )
			end
		end
		f44_local5 = GUNSMITH.AttachmentSetupDataMap[GUNSMITH.AttachmentSetupType.ATTACHMENT].minIndex + 1
		f44_local6 = GUNSMITH.AttachmentSetupDataMap[GUNSMITH.AttachmentSetupType.ATTACHMENT].maxIndex + 1
		for f44_local7 = f44_local5, f44_local6, 1 do
			local f44_local10 = f44_arg1.attachments[f44_local7]
			if f44_local10 and f44_local10.ref ~= ATTACHMENT.none and f44_local10.ref ~= f44_arg2 then
				local f44_local11 = false
				if f44_local3.blockedAttachmentCategories and LUI.IsItemInArray( f44_local3.blockedAttachmentCategories, f44_local10.category ) then
					table.insert( f44_local0, f44_local10 )
					f44_local11 = true
				end
				local f44_local12 = f44_local3.blockedBaseTypes
				if f44_local12 then
					f44_local12 = 0 < #f44_local3.blockedBaseTypes
				end
				local f44_local13 = 0 < #f44_local4
				if not f44_local11 and (f44_local12 or f44_local13) then
					local f44_local14
					if f44_arg3 then
						f44_local14 = f44_arg3
					else
						f44_local14 = f44_arg3[f44_local10.category]
					end
					if f44_local14 then
						for f44_local20, f44_local21 in ipairs( f44_local14 ) do
							if f44_local21.ref == f44_local10.ref then
								local f44_local18
								if f44_local12 then
									f44_local18 = f44_local12
								else
									f44_local18 = LUI.IsItemInArray( f44_local3.blockedBaseTypes, f44_local21.baseTypeName )
								end
								local f44_local19
								if f44_local13 then
								
								else
									f44_local19 = LUI.IsItemInArray( f44_local4, f44_local21.weaponAttachmentCategory )
								end
								f44_local19 = f44_local13
							end
						end
					end
				end
				if not f44_local11 and f44_local3.blockedAttachments and LUI.IsItemInArray( f44_local3.blockedAttachments, f44_local10.ref ) then
					table.insert( f44_local0, f44_local10 )
					f44_local11 = true
				end
			end
		end
	end
	return f44_local0
end

ATTACHMENT.GenerateBlockedAttachmentsString = function ( f43_arg0 )
	local f43_local0 = ""
	for f43_local5, f43_local6 in pairs( f43_arg0 ) do
		local f43_local4 = f43_local6.category
		if not f43_local4 then
			f43_local4 = ATTACHMENT.GetCategory( f43_local6.ref )
		end
		f43_local0 = f43_local0 .. Engine[0xED84C33EC5F01EA]( ATTACHMENT.GetAttachmentCategoryName( f43_local4 ) ) .. " - " .. ATTACHMENT.GetName( f43_local6.ref ) .. "\n"
	end
	return f43_local0
end

ATTACHMENT.AddListToBlockedMessage = function ( f42_arg0, f42_arg1 )
	local f42_local0 = f42_arg0 .. "\n"
	for f42_local5, f42_local6 in pairs( f42_arg1 ) do
		local f42_local4 = f42_local6.category
		if not f42_local4 then
			f42_local4 = ATTACHMENT.GetCategory( f42_local6.ref )
		end
		f42_local0 = f42_local0 .. "\n" .. Engine[0xED84C33EC5F01EA]( ATTACHMENT.GetAttachmentCategoryName( f42_local4 ) ) .. " - " .. ATTACHMENT.GetName( f42_local6.ref )
	end
	return f42_local0
end

ATTACHMENT.GetAttachmentsToCheck = function ( f41_arg0 )
	local f41_local0 = GL_HACK.GetWeaponMPRef( f41_arg0.weapon )
	local f41_local1, f41_local2 = GL_HACK.GetDefaultAttachmentData( f41_local0 )
	local f41_local3
	if not f41_local1 then
		f41_local3 = f41_local1
	else
		f41_local3 = {}
	end
	for f41_local12, f41_local13 in ipairs( f41_arg0.attachments ) do
		local f41_local14 = f41_local13.variantID
		local f41_local15 = f41_local13.ref
		if f41_local15 and f41_local15 ~= ATTACHMENT.none then
			table.insert( f41_local3, f41_local15 )
			for f41_local10, f41_local11 in ipairs( ATTACHMENT.GetAttachmentAddition( f41_local15 ) ) do
				if not String.IsNilOrEmpty( f41_local11 ) and f41_local11 ~= ATTACHMENT.none then
					table.insert( f41_local3, f41_local11 )
				end
			end
		end
	end
	return WEAPON.FilterAttachments( f41_local3, f41_local0, {
		isUniqueAttachRefRequested = f41_local2
	} )
end

ATTACHMENT.SetBlockedAttachments = function ( f40_arg0, f40_arg1, f40_arg2, f40_arg3, f40_arg4, f40_arg5 )
	for f40_local0 = 1, #f40_arg1, 1 do
		f40_arg1[f40_local0].uiOrder = f40_local0
		f40_arg1[f40_local0].isBlocked = false
	end
	local f40_local0 = 0
	if f40_arg5 ~= nil and not f40_arg5 then
		f40_local1 = f40_arg5
	else
		local f40_local1 = f40_arg2
	end
	local f40_local2 = WEAPON.GetWeaponModelName( f40_local1.weapon, f40_local1, {
		showSWhiskeyMag = true,
		includeAttachments = true,
		keepAkimbo = true
	} )
	for f40_local18, f40_local19 in ipairs( ATTACHMENT.GetAttachmentsToCheck( f40_local1 ) ) do
		if f40_local19 and f40_local19 ~= ATTACHMENT.none then
			local f40_local6 = Engine[0x603B6AC5797050A]( f40_local2, f40_local19 )
			local f40_local7 = nil
			if f40_local6 == Enum[0x540F63FFAF44174][0x8BA9A9EF1FB673C] then
				f40_local7 = ClientWeapon[0x66604FC8FC4DA18]( f40_arg0, f40_local2, f40_local19 )
			else
				f40_local7 = ClientWeapon[0xD3CE47FE2479379]( f40_arg0, f40_local2, f40_local6 )
			end
			local f40_local8 = ATTACHMENT.GetCategory( f40_local19 )
			local f40_local9 = ATTACHMENT.GetName( f40_local19 )
			local f40_local10 = ATTACHMENT.GetAttachmentCategoryName( f40_local8 )
			local f40_local11 = nil
			if String.IsNilOrEmpty( f40_local10 ) or not CONDITIONS.IsMobileOrMobileSim() then
				f40_local11 = Engine[0xED84C33EC5F01EA]( 0xFA36F63F49F92E1, f40_local9 )
			else
				f40_local11 = Engine[0xED84C33EC5F01EA]( 0xA95A450F8771EF2, f40_local9, f40_local10 )
			end
			if f40_local7 then
				local f40_local12 = {}
				for f40_local16, f40_local17 in pairs( f40_local7.blockedAttachmentCategories ) do
					if LUI.IsItemInArray( ATTACHMENT.AttachmentSlots, f40_local17 ) then
						table.insert( f40_local12, f40_local17 )
					end
				end
				if LUI.IsItemInArray( f40_local7.blockedAttachmentCategories, f40_arg4 ) then
					for f40_local16, f40_local17 in ipairs( f40_arg1 ) do
						if f40_local17.ref ~= ATTACHMENT.none then
							f40_local17.isBlocked = true
							f40_local17.blockedBy = f40_local11
							f40_local17.blockedByRef = f40_local19
							f40_local17.blockedByCategory = f40_local10
							f40_local0 = f40_local0 + 1
						end
					end
				end
				if f40_local7.blockedBaseTypes or f40_local7.blockedAttachments or 0 < #f40_local12 then
					for f40_local16, f40_local17 in ipairs( f40_arg1 ) do
						if f40_local17.ref ~= f40_arg3 and f40_local8 ~= f40_local17.category then
							if f40_local7.blockedBaseTypes and LUI.IsItemInArray( f40_local7.blockedBaseTypes, f40_local17.baseTypeName ) then
								f40_local17.isBlocked = true
								f40_local17.blockedBy = f40_local11
								f40_local17.blockedByRef = f40_local19
								f40_local17.blockedByCategory = f40_local10
								f40_local0 = f40_local0 + 1
							end
							if f40_local7.blockedAttachments and LUI.IsItemInArray( f40_local7.blockedAttachments, f40_local17.ref ) then
								f40_local17.isBlocked = true
								f40_local17.blockedBy = f40_local11
								f40_local17.blockedByRef = f40_local19
								f40_local17.blockedByCategory = f40_local10
								f40_local0 = f40_local0 + 1
							end
							if LUI.IsItemInArray( f40_local12, f40_local17.weaponAttachmentCategory ) then
								f40_local17.isBlocked = true
								f40_local17.blockedBy = f40_local11
								f40_local17.blockedByRef = f40_local19
								f40_local17.blockedByCategory = f40_local10
								f40_local0 = f40_local0 + 1
							end
						end
					end
				end
			end
		end
	end
	return f40_local0
end

ATTACHMENT.ShouldAllowBlockedRemoveWidgets = function ()
	if Engine[0x2DA54CF5D6B7F02]() or Engine[0xDD9D856EA1C159E]() then
		return true
	else
		return Dvar[0x9E5BE3B4BBA4E0E]( 0xD5607B103AB81FC )
	end
end

ATTACHMENT.ShouldAttachmentCatageoryTuningTipPointLeft = function ( f38_arg0 )
	local f38_local0
	if f38_arg0 ~= "muzzle" and f38_arg0 ~= "frontpiece" and f38_arg0 ~= "undermount" and f38_arg0 ~= "gunperk" then
		f38_local0 = false
	else
		f38_local0 = true
	end
	return f38_local0
end

ATTACHMENT.GetReceiverBlueprintFromWeaponTable = function ( f37_arg0 )
	local f37_local0 = GUNSMITH.GetSelectedAttachIndexForCategory( ATTACHMENT.receiverCategory, f37_arg0 )
	local f37_local1
	if f37_local0 then
		f37_local1 = f37_local0
	else
		f37_local1 = f37_arg0.attachments[f37_local0]
		if f37_local1 then
			f37_local1 = f37_arg0.attachments[f37_local0].ref
		end
	end
	local f37_local2
	if f37_local0 then
		f37_local2 = f37_local0
	else
		f37_local2 = f37_arg0.attachments[f37_local0]
		if f37_local2 then
			f37_local2 = f37_arg0.attachments[f37_local0].variantID
		end
	end
	if f37_local1 and f37_local2 then
		return Engine[0xFC084BF31D917C5]( GL_HACK.GetWeaponMPRef( f37_arg0.weapon ), f37_local1, f37_local2 )
	else
		
	end
end

ATTACHMENT.ValidateAttachmentsForWeaponSetup = function ( f36_arg0 )
	if Dvar[0x9E5BE3B4BBA4E0E]( 0x4E46B0101D55429 ) and Engine[0x636BC8C3AA71FAE]() and f36_arg0 then
		local f36_local0 = f36_arg0.weapon:get()
		if not String.IsNilOrEmpty( f36_local0 ) and f36_local0 ~= WEAPON.none then
			local f36_local1 = GL_HACK.GetWeaponMPRef( f36_local0 )
			local f36_local2 = {}
			for f36_local3 = 0, #f36_arg0.attachmentSetup - 1, 1 do
				local f36_local6 = ATTACHMENT.GetRefFromSetup( f36_arg0.attachmentSetup[f36_local3] )
				if not String.IsNilOrEmpty( f36_local6 ) and f36_local6 ~= ATTACHMENT.none then
					f36_local2[f36_local6] = f36_local3
				end
			end
			for f36_local3 = 0, Enum[0x540F63FFAF44174][0x5060D14D549205D] - 1, 1 do
				for f36_local10, f36_local11 in ipairs( Engine[0x898B12D07DF49BE]( f36_local1, f36_local3 ) ) do
					f36_local2[f36_local11.ref] = nil
				end
			end
			for f36_local12, f36_local6 in pairs( f36_local2 ) do
				DebugPrintLogFileOnly( "Clearing invalid attachment ( " .. f36_local12 .. " ) at index " .. f36_local6 .. "." )
				ATTACHMENT.ClearAttachment( f36_arg0.attachmentSetup[f36_local6] )
			end
		end
	end
end

ATTACHMENT.IsAttachmentsTableValid = function ( f35_arg0, f35_arg1 )
	local f35_local0 = true
	local f35_local1 = {
		[LOADOUT.DLOG_VALIDATION_UNOWNED_ROOT] = {},
		[LOADOUT.DLOG_VALIDATION_DUP_ATTACH_CATEGORY_ROOT] = {},
		[LOADOUT.DLOG_VALIDATION_EXCESS_ATTACH_ROOT] = {},
		[LOADOUT.DLOG_VALIDATION_UNSUPPORTED_ATTACH_ROOT] = {}
	}
	local f35_local2 = {}
	local f35_local3 = {}
	local f35_local4 = 0
	for f35_local5 = 1, WEAPON.maxAttachmentsPerWeapon, 1 do
		local f35_local8 = f35_arg1.attachments[f35_local5]
		if f35_local8 and ATTACHMENT.IsAttachmentNeitherReceiverNorNone( f35_local8.ref, f35_local8.category ) then
			local f35_local9 = ATTACHMENT.GetLootIDForVariant( f35_arg1.weapon, f35_local8.ref, f35_local8.variantID )
			if f35_local9 then
				local f35_local10 = f35_local8.category
				if not f35_local10 then
					f35_local10 = ATTACHMENT.GetCategory( f35_local8.ref )
				end
				if f35_local10 ~= ATTACHMENT.none and f35_local2[f35_local10] then
					f35_local0 = false
					table.insert( f35_local1[LOADOUT.DLOG_VALIDATION_DUP_ATTACH_CATEGORY_ROOT], tostring( f35_local2[f35_local10] ) .. "," .. tostring( f35_local9 ) )
				end
				f35_local2[f35_local10] = f35_local9
				if LOADOUT.IsValidLootIDForValidation( f35_local9 ) and not LOOT.IsUnlockedWithID( f35_arg0, f35_local9 ) then
					f35_local0 = false
					table.insert( f35_local1[LOADOUT.DLOG_VALIDATION_UNOWNED_ROOT], tostring( f35_local9 ) )
				end
				if ATTACHMENT.IsSelectableAttachment( f35_local8.ref, f35_arg1.weapon ) and 5 < f35_local4 + 1 then
					f35_local0 = false
					table.insert( f35_local1[LOADOUT.DLOG_VALIDATION_EXCESS_ATTACH_ROOT], tostring( f35_local9 ) )
				end
				if not String.IsNilOrEmpty( f35_local8.ref ) and f35_local8.ref ~= ATTACHMENT.none then
					f35_local3[f35_local8.ref] = f35_local9
				end
			end
		end
	end
	local f35_local5 = GL_HACK.GetWeaponMPRef( f35_arg1.weapon )
	if Dvar[0x9E5BE3B4BBA4E0E]( 0xE689DDED4C7A0A ) then
		for f35_local6 = 0, Enum[0x540F63FFAF44174][0x5060D14D549205D] - 1, 1 do
			for f35_local14, f35_local15 in ipairs( Engine[0x898B12D07DF49BE]( f35_local5, f35_local6 ) ) do
				f35_local3[f35_local15.ref] = nil
			end
		end
	else
		local f35_local6 = {}
		for f35_local9, f35_local10 in pairs( f35_local3 ) do
			if Engine[0x603B6AC5797050A]( f35_local5, f35_local9 ) ~= -1 then
				table.insert( f35_local6, f35_local9 )
			end
		end
		for f35_local9, f35_local10 in ipairs( f35_local6 ) do
			f35_local3[f35_local10] = nil
		end
	end
	for f35_local8, f35_local9 in pairs( f35_local3 ) do
		f35_local0 = false
		table.insert( f35_local1[LOADOUT.DLOG_VALIDATION_UNSUPPORTED_ATTACH_ROOT], tostring( f35_local9 ) )
	end
	return f35_local0, f35_local1
end

ATTACHMENT.GetAttachmentDetails = function ( f34_arg0 )
	return {
		name = ATTACHMENT.GetName( f34_arg0 ),
		category = Engine[0xED84C33EC5F01EA]( ATTACHMENT.GetAttachmentCategoryName( ATTACHMENT.GetCategory( f34_arg0 ) ) ),
		image = ATTACHMENT.GetImage( f34_arg0 ),
		ref = f34_arg0
	}
end

ATTACHMENT.IsWeaponAttachmentTunable = function ( f33_arg0, f33_arg1, f33_arg2, f33_arg3, f33_arg4, f33_arg5 )
	if f33_arg3 == nil then
		local f33_local0 = f33_arg1.weapon .. "_tuning"
		local f33_local1 = LOOT.IsUnlockedWithID
		local f33_local2 = f33_arg0
		local f33_local3 = ATTACHMENT.GetBundleByRef( f33_local0 )
		f33_arg3 = f33_local1( f33_local2, f33_local3[0x28887F70BF5EBA] )
	end
	local f33_local0
	if not f33_arg4 then
		f33_local0 = f33_arg4
	else
		f33_local0 = WEAPON.GetWeaponModelName( f33_arg1.weapon, f33_arg1, {
			includeAttachments = true
		} )
	end
	local f33_local1
	if not f33_arg5 then
		f33_local1 = f33_arg5
	else
		f33_local1 = ClientWeapon[0x8E1E8769A4A0774]( f33_arg0, f33_local0 )
	end
	local f33_local4 = ATTACHMENT.IsSelectedAttachmentInCategoryTunable( f33_arg0, f33_arg2, f33_local0, f33_arg1, f33_local1 )
	local f33_local2
	if f33_local4 then
		f33_local2 = f33_local4
	else
		f33_local2 = f33_arg3
	end
	return f33_local2
end

ATTACHMENT.IsAttachmentNeitherReceiverNorNone = function ( f32_arg0, f32_arg1 )
	if not f32_arg1 then
		f32_arg1 = ATTACHMENT.GetCategory( f32_arg0 )
	end
	local f32_local0
	if String.IsNilOrEmpty( f32_arg0 ) or f32_arg0 == ATTACHMENT.none or f32_arg1 == ATTACHMENT.receiverCategory then
		f32_local0 = false
	else
		f32_local0 = true
	end
	return f32_local0
end

ATTACHMENT.GetAttachmentCompareDetails = function ( f31_arg0, f31_arg1, f31_arg2 )
	return ATTACHMENT.GetModifiersValuesFromAttachmentData( f31_arg0, f31_arg1, f31_arg2, ATTACHMENT.GetTableWithCurrentAttachment( f31_arg2, nil, nil, f31_arg1.baseRef ) )
end

ATTACHMENT.GetWeaponPreviewAttachmentsData = function ( f30_arg0 )
	local f30_local0 = {}
	for f30_local5, f30_local6 in ipairs( f30_arg0 ) do
		if f30_local6.ref ~= ATTACHMENT.none then
			local f30_local4 = f30_local6.category
			if f30_local4 and f30_local4 == ATTACHMENT.none then
				f30_local4 = ATTACHMENT.GetCategory( f30_local6.ref )
			end
			if f30_local4 == ATTACHMENT.receiverCategory then
				table.insert( f30_local0, 1, f30_local6 )
			else
				table.insert( f30_local0, f30_local6 )
			end
		end
	end
	return f30_local0
end

ATTACHMENT.GetAttachmentDataWithRef = function ( f29_arg0, f29_arg1 )
	for f29_local3, f29_local4 in ipairs( f29_arg0 ) do
		if f29_local4.ref == f29_arg1 then
			return f29_local4
		end
	end
	return nil
end

ATTACHMENT.SetAttachSlot = function ( f28_arg0, f28_arg1 )
	DataSources.alwaysLoaded.loadout.attachSlot:SetValue( f28_arg0, f28_arg1 )
end

ATTACHMENT.GetAttachSlot = function ( f27_arg0 )
	return DataSources.alwaysLoaded.loadout.attachSlot:GetValue( f27_arg0 )
end

ATTACHMENT.GetVariantIDFromWeaponTableAndRef = function ( f26_arg0, f26_arg1, f26_arg2 )
	local f26_local0 = ATTACHMENT.baseVariant
	local f26_local1 = f26_arg1.lootID
	if f26_local1 ~= LOOT.emptyID then
		local f26_local2 = WEAPON.GetModificationAttachments( f26_arg0, f26_arg1.weapon, f26_local1 )
		if f26_local2[f26_arg2] then
			f26_local0 = f26_local2[f26_arg2]
		end
	end
	return f26_local0
end

ATTACHMENT.GetAttachmentFullDetails = function ( f25_arg0, f25_arg1, f25_arg2, f25_arg3, f25_arg4 )
	if not f25_arg4 then
		f25_arg4 = {}
	end
	local f25_local0 = f25_arg2.name
	local f25_local1 = f25_arg2.desc
	if f25_arg2.isClassified then
		f25_local0 = 0x99E24C4EADB96DB
		f25_local1 = 0x3BEECC97875C519
	end
	if CONDITIONS.IsMobileOrMobileSim() then
		f25_local1 = nil
	end
	local f25_local2 = f25_arg1.weapon
	local f25_local3 = f25_arg2.ref
	local f25_local4 = ATTACHMENT.GetRefWithClassifiedSupport( f25_arg2 )
	local f25_local5 = f25_arg4.variantID
	if not f25_local5 then
		f25_local5 = ATTACHMENT.GetVariantIDFromWeaponTableAndRef( f25_arg0, f25_arg1, f25_local4 )
	end
	if f25_local1 then
		if f25_local5 > WEAPON.baseVariant then
			local f25_local6 = ATTACHMENT.GetOverrideDesc( f25_local3, f25_local2, f25_arg1.variantID )
			if f25_local6 and not f25_local6 then
				f25_local1 = f25_local6
			else
				
			end
		end
		if not Engine[0x54F2E859F96A9DB]() and ATTACHMENT.IsDismembermentEnabled( f25_local3 ) then
			f25_local1 = Engine[0xED84C33EC5F01EA]( f25_local1 ) .. " " .. Engine[0xED84C33EC5F01EA]( 0xB9F00A594F8376D )
		else
			f25_local1 = Engine[0xED84C33EC5F01EA]( f25_local1 )
		end
	end
	local f25_local6
	if f25_local3 ~= ATTACHMENT.none then
		f25_local6 = not f25_arg2.isClassified
	else
		f25_local6 = false
	end
	local f25_local7 = GUNSMITH.GetEquipCounts( f25_local2, f25_arg1, f25_arg1.attachments )
	local f25_local8 = GUNSMITH.maxMods
	local f25_local9 = Engine[0xFC084BF31D917C5]( GL_HACK.GetWeaponMPRef( f25_local2 ), f25_local3, f25_local5 )
	local f25_local10
	if f25_local9 then
		f25_local10 = f25_local9
	else
		f25_local10 = f25_local9[0x2EAB902F6509817]
	end
	local f25_local11 = GUNSMITH.GetBrandingSmallMaterialName( f25_local10 )
	local f25_local12 = f25_arg4.modifiersValues
	if not f25_local12 then
		f25_local12 = ATTACHMENT.GetModifiersValuesFromAttachmentData( f25_arg0, f25_arg2, f25_arg1, f25_arg3 )
	end
	local f25_local13 = false
	for f25_local14 = 1, #f25_local12, 1 do
		if f25_local12[f25_local14].value ~= 0 then
			f25_local13 = true
			break
		end
	end
	if not f25_local12 then
		f25_local12 = {}
	end
	local f25_local14 = nil
	if not CONDITIONS.IsMobileOrMobileSim() and f25_arg2.category == ATTACHMENT.opticCategory then
		f25_local14 = Reticle[0x15C60EB1A12545F]( f25_arg0, WEAPON.GetWeaponModelName( f25_arg3.weapon, f25_arg3, {
			includeAttachments = true
		} ), false )
	end
	local f25_local15 = f25_arg2.gunsmithAttach.challengeID
	local f25_local16 = ""
	local f25_local17 = StringTable[0x2DCF0973239E909]( CSV.gunChallenges.file, CSV.gunChallenges.cols.loot, f25_arg2.gunsmithAttach.lootID, CSV.gunChallenges.cols.desc )
	local f25_local18 = tonumber( StringTable[0x2DCF0973239E909]( CSV.gunChallenges.file, CSV.gunChallenges.cols.id, f25_arg2.gunsmithAttach.challengeID, CSV.gunChallenges.cols.amount ) )
	local f25_local19 = Engine[0xED84C33EC5F01EA]( f25_local17, f25_local18 )
	local f25_local20 = false
	if f25_local15 and 0 < #f25_local15 then
		f25_local20 = Challenge.IsChallengeComplete( f25_arg0, f25_local15 )
	end
	if CONDITIONS.IsMobileOrMobileSim() and ATTACHMENT.UnlockAttachmentExceptions.MWII_WZ_EXCLUSIVE[f25_arg2.ref] then
		f25_local16 = Engine[0xED84C33EC5F01EA]( 0x8DF8CB381C4A26D )
	elseif LUI.StringIsNilOrEmpty( f25_local17 ) then
		f25_local16 = ""
	else
		f25_local16 = f25_local19
	end
	if f25_arg2.weaponUnlock and f25_arg2.levelUnlock then
		f25_local16 = Engine[0xED84C33EC5F01EA]( 0x71D13D9BEC47528, WEAPON.GetName( f25_arg2.weaponUnlock ), f25_arg2.levelUnlock + 1 )
	end
	local f25_local21 = not LUI.StringIsNilOrEmpty( StringTable[0x2DCF0973239E909]( CSV.gunChallenges.file, CSV.gunChallenges.cols.loot, f25_arg2.gunsmithAttach.lootID, CSV.gunChallenges.cols.challenge2Desc ) )
	local f25_local22 = GUNSMITH.IsAttachVariantCategoryBlacklisted( f25_local2, ATTACHMENT.GetCategory( f25_local3 ) )
	local f25_local23 = ATTACHMENT.AreVariantsEnabled()
	if f25_local23 then
		if not f25_local22 and f25_local5 > WEAPON.baseVariant then
			f25_local23 = f25_arg2.unlocked
			if f25_local23 then
				f25_local23 = Engine[0x12586A3F4FB490E]()
				if f25_local23 then
					f25_local23 = Engine[0x5EA7EB683287036]( f25_arg0 )
				end
			end
		else
			f25_local23 = false
		end
	end
	local f25_local24 = nil
	if f25_arg2.blockedCategorySlot then
		f25_local24 = GUNSMITH.GetBlockedCategoryWarning( f25_arg1, f25_arg2.blockedCategorySlot )
	end
	f25_arg4.lockExpander = not f25_local13
	f25_arg4.modifiersValues = f25_local12
	local f25_local25 = ATTACHMENT.GetAttachmentStatsDetails( f25_arg0, f25_arg1, f25_arg2, f25_arg3, f25_arg4 )
	local f25_local26 = nil
	if f25_arg2.isBlocked then
		local f25_local27 = {}
		local f25_local28 = f25_arg2.isBlocked
		if f25_local28 then
			f25_local28 = ItemDetailsUtils[0x982E9B9FD9C37B8][0xEFBF1594F60E733]
		end
		f25_local27.itemState = f25_local28
		f25_local27.itemStateText = f25_arg2.blockedBy
		f25_local26 = f25_local27
	end
	local f25_local27 = {
		isDescAlreadyLocalized = true,
		isNameAlreadyLocalized = true
	}
	local f25_local28
	if f25_local0 then
		f25_local28 = Engine[0xED84C33EC5F01EA]( f25_local0 )
		if not f25_local28 then
		
		else
			f25_local27.name = f25_local28
			f25_local27.desc = f25_local1
			f25_local27.showFullDetails = f25_local6
			f25_local27.weaponRef = f25_local2
			f25_local27.lootID = ATTACHMENT.GetLootIDForRef( f25_local3 )
			f25_local27.titleIconState = ATTACHMENT.MobileGetAttachmentTitleIconState( f25_local3 )
			f25_local27.equipCounts = f25_local7
			f25_local27.maxModCount = f25_local8
			f25_local27.brandDataRef = f25_local10
			f25_local27.brandingMaterialName = f25_local11
			f25_local27.isBlocked = f25_arg2.isBlocked
			f25_local27.blockedBy = f25_arg2.blockedBy
			f25_local27.itemStateDetails = f25_local26
			f25_local27.modifiersValues = f25_local12
			f25_local27.showModifiers = f25_local13
			f25_local27.reticlePreviewImageName = f25_local14
			f25_local27.isUnlocked = f25_arg2.unlocked
			f25_local27.gunsmithAttach = f25_arg2.gunsmithAttach
			f25_local27.unlockCriteria = f25_local16
			f25_local27.showChooseAppearance = f25_local23
			f25_local27.blockedCategoryWarningText = f25_local24
			f25_local27.statsDetails = f25_local25
			f25_local27.attachmentRef = f25_arg2.ref
			f25_local27.category = f25_arg2.category
			f25_local27.isChallengeLocked = not f25_local20
			f25_local27.hasSecondaryChallenge = f25_local21
			if not f25_local18 or 1 >= f25_local18 then
				f25_local28 = false
			else
				f25_local28 = true
			end
			f25_local27.hasProgressChallenge = f25_local28
			return f25_local27
		end
	end
	f25_local28 = ""
end

ATTACHMENT.GetValidAttachmentRefForCategory = function ( f24_arg0, f24_arg1 )
	if not f24_arg0 or ATTACHMENT.GetCategory( f24_arg0 ) ~= f24_arg1 then
		return ATTACHMENT.none
	else
		return f24_arg0
	end
end

ATTACHMENT.GetCurrentAttachmentFullDetails = function ( f23_arg0, f23_arg1, f23_arg2 )
	local f23_local0 = LOADOUT.GetLoadoutIndex( f23_arg0 )
	local f23_local1 = WEAPON.GetWeaponSlot( f23_arg0 )
	local f23_local2 = ATTACHMENT.GetAttachSlot( f23_arg0 )
	local f23_local3 = GUNSMITH.GetCurrentEquippedWeaponData( f23_arg0, f23_local1 )
	local f23_local4 = f23_local3
	local f23_local5 = ATTACHMENT.GetEquippedAttachmentRef( f23_arg0, f23_local0, f23_local1, f23_local2 )
	if f23_local5 ~= ATTACHMENT.none then
		f23_local4 = ATTACHMENT.GetWeaponTableWithOnlyEquippedAttachmentRef( f23_arg0, f23_local3, f23_local5 )
	end
	local f23_local6 = ATTACHMENT.GetAttachmentDataWithRef( ATTACHMENT.GetCompleteAttachmentsListData( f23_arg1, f23_arg2 ), ATTACHMENT.GetValidAttachmentRefForCategory( f23_local5, f23_arg2 ) )
	local f23_local7 = ATTACHMENT.GetModifiersValuesFromAttachmentData( f23_arg0, f23_local6, f23_local3, f23_local4 )
	local f23_local8, f23_local9 = ATTACHMENT.GetBaseCompareAttachmentAttributesDetails( f23_arg0, f23_local3, f23_local6, f23_local4, {
		modifiersValues = Table.DeepCopy( f23_local7 )
	} )
	return ATTACHMENT.GetAttachmentFullDetails( f23_arg0, f23_local3, f23_local6, f23_local4, {
		modifiersValues = f23_local7,
		weaponAttributes = f23_local8,
		defaultAttachmentData = f23_local9
	} )
end

ATTACHMENT.GetCompleteAttachmentsListData = function ( f22_arg0, f22_arg1 )
	if f22_arg1 ~= ATTACHMENT.receiverCategory and 0 < #f22_arg0 and f22_arg0[1].ref ~= ATTACHMENT.none then
		table.insert( f22_arg0, 1, {
			name = 0x7B61AC6C95CC247,
			unlocked = true,
			image = nil,
			ref = ATTACHMENT.none,
			category = f22_arg1,
			variants = {},
			gunsmithAttach = {
				lootID = 4294967295,
				challengeID = {}
			}
		} )
	end
	return f22_arg0
end

ATTACHMENT.SetupAttachmentSelectMenu = function ( f21_arg0, f21_arg1, f21_arg2 )
	if f21_arg2.query then
		f21_arg2.loadoutIndex = LOADOUT.GetLoadoutIndex( f21_arg1 )
		f21_arg2.weaponSlot = WEAPON.GetWeaponSlot( f21_arg1 )
		f21_arg2.category = f21_arg2.query.category
		f21_arg2.attachSlot = tonumber( f21_arg2.query.attachSlot )
	end
	LOADOUT.SetLoadoutIndex( f21_arg1, f21_arg2.loadoutIndex )
	WEAPON.SetWeaponSlot( f21_arg1, f21_arg2.weaponSlot )
	local f21_local0 = f21_arg2.attachSlot
	if not f21_local0 then
		f21_local0 = ATTACHMENT.GetAvailableAttachSlot( f21_arg1, f21_arg2.weaponSlot, f21_arg2.category, f21_arg2.forShowcase )
	end
	f21_arg2.attachSlot = f21_local0
	ATTACHMENT.SetAttachSlot( f21_arg1, f21_arg2.attachSlot )
	if CONDITIONS.IsMobileOrMobileSim() then
		GUNSMITH.SetupWeaponData( f21_arg0, f21_arg1, f21_arg2.weaponSlot, f21_arg2.forShowcase )
		f21_local0 = GL_HACK.GetWeaponMPRef( f21_arg0._weaponTable.weapon )
		local f21_local1 = LUI.FlowManager.GetScopedData( "MobileGunsmithTabsMenu" )
		f21_arg2.attachments = f21_local1.attachmentData[f21_local0].attachments[f21_arg2.category]
		local f21_local2 = ATTACHMENT.GetCurrentAttachmentFullDetails( f21_arg1, f21_arg2.attachments, f21_arg2.category )
		local f21_local3 = f21_local2.statsDetails
		f21_arg0._weaponAttributes = f21_local3.weaponAttributes
		f21_arg0._defaultAttachmentData = f21_local3.defaultAttachmentData
		f21_arg0.detailsDataSource = LUI.SetupDataSourceUpdate( f21_arg0, f21_arg1, "UpdateDetailsDataSources", "alwaysLoaded.menu.attachment.details", f21_local2, ItemDetailsUtils.FormatDetailsDataTable, {
			rootField = "detailsDataSource",
			listHandlersData = Table.Merge( ItemDetailsUtils.GetHeaderTagsDataSourcesListHandlers(), ItemDetailsUtils.GetModifiersValuesDataSourcesListHandlersData() )
		} )
		ItemDetailsUtils.MobileSetMenuItemDetailsType( f21_arg0, ItemDetailsUtils[0x5ABE5FD362B0038][0x901AA0340249A41] )
	end
end

ATTACHMENT.GetAvailableAttachSlot = function ( f20_arg0, f20_arg1, f20_arg2, f20_arg3 )
	local f20_local0 = GUNSMITH.GetWeaponsPlayerData( f20_arg0, LOADOUT.GetLoadoutIndex( f20_arg0 ), f20_arg3 )
	local f20_local1 = f20_local0[f20_arg1]
	local f20_local2 = GUNSMITH.GetAvailableAttachmentSetupIndex( f20_arg2, f20_local1 )
	if f20_local2 == nil then
		f20_local2 = GUNSMITH.GetSelectedBlueprintAttachIndexForCategory( f20_arg2, WEAPON.GenerateWeaponTable( f20_local1 ) )
	end
	return f20_local2
end

ATTACHMENT.GetEquippedAttachmentData = function ( f19_arg0, f19_arg1, f19_arg2, f19_arg3, f19_arg4 )
	local f19_local0 = GUNSMITH.GetEquippedWeaponTable( f19_arg0, f19_arg1, f19_arg2, f19_arg4 )
	return f19_local0.attachments[f19_arg3]
end

ATTACHMENT.GetEquippedAttachmentRef = function ( f18_arg0, f18_arg1, f18_arg2, f18_arg3 )
	local f18_local0 = ATTACHMENT.GetEquippedAttachmentData( f18_arg0, f18_arg1, f18_arg2, f18_arg3 )
	local f18_local1
	if f18_local0 then
		f18_local1 = f18_local0.ref
		if not f18_local1 then
		
		else
			return f18_local1
		end
	end
	f18_local1 = nil
end

ATTACHMENT.GetEquippedAttachmentVariantID = function ( f17_arg0, f17_arg1, f17_arg2, f17_arg3 )
	local f17_local0 = ATTACHMENT.GetEquippedAttachmentData( f17_arg0, f17_arg1, f17_arg2, f17_arg3 )
	local f17_local1
	if f17_local0 then
		f17_local1 = f17_local0.variantID
		if not f17_local1 then
		
		else
			return f17_local1
		end
	end
	f17_local1 = nil
end

ATTACHMENT.IsAttachmentEquipped = function ( f16_arg0, f16_arg1, f16_arg2, f16_arg3, f16_arg4 )
	local f16_local0 = ATTACHMENT.GetEquippedAttachmentData( f16_arg0, LOADOUT.GetLoadoutIndex( f16_arg0 ), f16_arg1, f16_arg2, f16_arg4 )
	if f16_local0 then
		return f16_local0.ref == f16_arg3
	else
		return false
	end
end

ATTACHMENT.GetRefWithClassifiedSupport = function ( f15_arg0 )
	return f15_arg0.isClassified and ATTACHMENT.none or f15_arg0.ref
end

ATTACHMENT.GetWeaponTableWithOnlyEquippedAttachmentRef = function ( f14_arg0, f14_arg1, f14_arg2, f14_arg3 )
	if ATTACHMENT.IsAttachmentEquipped( f14_arg0, WEAPON.GetWeaponSlot( f14_arg0 ), ATTACHMENT.GetAttachSlot( f14_arg0 ), f14_arg2, f14_arg3 ) then
		for f14_local3, f14_local4 in ipairs( f14_arg1.attachments ) do
			if f14_local4.ref == f14_arg2 then
				return GUNSMITH.GetTableWithOnlyEquippedAttachment( f14_arg1.weapon, f14_local4 )
			end
		end
	end
	return nil
end

ATTACHMENT.GetAltReceiverTable = function ( f13_arg0, f13_arg1, f13_arg2 )
	if f13_arg2.category == ATTACHMENT.receiverCategory then
		local f13_local0 = WEAPON.GenerateWeaponTableFromRef( WEAPON.GetWeaponRefByRec( f13_arg2.ref ) )
		local f13_local1 = ATTACHMENT.GetAttachSlot( f13_arg0 )
		local f13_local2 = ATTACHMENT.GetRefWithClassifiedSupport( f13_arg2 )
		return ATTACHMENT.GetTableWithCurrentAttachment( f13_local0, f13_local1, f13_arg2.blockedCategorySlot, f13_local2, ATTACHMENT.GetVariantIDFromWeaponTableAndRef( f13_arg0, f13_arg1, f13_local2 ) )
	else
		return nil
	end
end

ATTACHMENT.GetAttachmentWeaponTableForAmmoData = function ( f12_arg0, f12_arg1, f12_arg2, f12_arg3 )
	local f12_local0 = ATTACHMENT.GetAltReceiverTable( f12_arg0, f12_arg1, f12_arg2 )
	local f12_local1 = f12_arg2.ref
	local f12_local2 = WEAPON.GetWeaponSlot( f12_arg0 )
	local f12_local3 = ATTACHMENT.GetAttachSlot( f12_arg0 )
	local f12_local4
	if f12_local2 then
		f12_local4 = ATTACHMENT.IsAttachmentEquipped( f12_arg0, f12_local2, f12_local3, f12_local1 )
		if not f12_local4 then
		
		else
			local f12_local5 = f12_arg3
			if f12_arg2.category == ATTACHMENT.receiverCategory and f12_local0 then
				f12_local5 = f12_local0
			elseif f12_local4 and not CONDITIONS.IsMobileOrMobileSim() then
				assert( WEAPON.IsAttachmentRefInAttachmentsTable( f12_arg1, f12_local1 ), "`attachmentData` is expected to be equipped in `weaponTable` because `equipped` is true." )
				f12_local5 = f12_arg1
			end
			return f12_local5
		end
	end
	f12_local4 = false
end

ATTACHMENT.GetBaseCompareAttachmentAttributesDetails = function ( f11_arg0, f11_arg1, f11_arg2, f11_arg3, f11_arg4 )
	if not f11_arg4 then
		f11_arg4 = {}
	end
	local f11_local0 = f11_arg4.isTuning
	local f11_local1 = f11_arg1.weapon
	local f11_local2 = WEAPON.GetWeaponModelName( f11_local1, f11_arg1, {
		showSWhiskeyMag = true,
		keepAkimbo = true,
		includeBlueprintTune = true,
		includeAttachments = true
	} )
	local f11_local3 = ClientWeapon[0x75228338D174290]( f11_arg0, f11_local2, false, true, true )
	local f11_local4 = ClientWeapon[0x75228338D174290]( f11_arg0, WEAPON.GetWeaponModelNameFromRef( f11_local1 ), false, true, true )
	local f11_local5 = nil
	if f11_arg2.ref == ATTACHMENT.none then
		f11_local5 = ATTACHMENT.GetAttachmentSlotIndexFromCategory( f11_arg2.category )
	else
		f11_local5 = Engine[0x603B6AC5797050A]( f11_local2, f11_arg2.ref )
	end
	local f11_local6, f11_local7 = nil
	if f11_local3 and f11_local4 then
		local f11_local8 = nil
		if f11_arg2.category ~= ATTACHMENT.receiverCategory then
			local f11_local9 = {}
			GUNSMITH.SetupWeaponDefaultAttachmentDataForEquippedAttachment( f11_local9, f11_arg0, GL_HACK.GetWeaponMPRef( f11_local1 ), f11_local2, f11_arg1.attachments, f11_local5, f11_arg2.ref, f11_arg3 )
			if f11_local9.defaultAttachmentStats and f11_local9.defaultModifierValues then
				f11_local7 = f11_local9
			end
			if not String.IsNilOrEmpty( f11_local9.weaponStringWithNewAttachment ) then
				f11_local8 = ClientWeapon[0xFE24333F9BC2CAB]( f11_arg0, f11_local9.weaponStringWithNewAttachment, f11_local5 )
				f11_local9.weaponStringWithNewAttachment = nil
			end
		end
		if not f11_local8 then
			f11_local8 = ClientWeapon[0xFE24333F9BC2CAB]( f11_arg0, f11_local2, f11_local5 )
		end
		f11_local6 = {}
		for f11_local14, f11_local15 in pairs( f11_local3 ) do
			local f11_local12 = f11_local8.tunedStats and f11_local8.tunedStats[f11_local14] or f11_local8.unTunedStats[f11_local14]
			if not f11_local12 or f11_local12 ~= f11_local12 then
				f11_local12 = 0
			end
			if f11_local7 then
				local f11_local13 = f11_local7.defaultAttachmentStats
				if not f11_local13[f11_local14] or f11_local13[f11_local14] ~= f11_local13[f11_local14] then
					f11_local13[f11_local14] = 0
				else
					f11_local12 = f11_local12 - f11_local13[f11_local14]
				end
			end
			f11_local6[f11_local14] = {
				total = f11_local15 - f11_local12,
				weapon = f11_local15 - f11_local12,
				attachment = f11_local12
			}
		end
	end
	local f11_local8 = nil
	if f11_local0 then
		f11_local8 = WEAPON.GetAttributeSetModifiedByAttachmentAndTuning( f11_arg0, f11_local2, f11_local5 )
	end
	if f11_local7 then
		GUNSMITH.ApplyDefaultModifierAdjustments( f11_local7.defaultModifierValues, f11_arg4.modifiersValues )
	end
	return f11_local6, f11_local7, f11_local8
end

ATTACHMENT.UpdateWeaponAttributesWithAttachmentStats = function ( f10_arg0, f10_arg1, f10_arg2 )
	for f10_local5, f10_local6 in pairs( f10_arg0 ) do
		local f10_local4 = f10_arg1[f10_local5]
		if f10_arg2 then
			local f10_local3 = f10_arg2.defaultAttachmentStats
			if f10_local3[f10_local5] then
				f10_local4 = f10_local4 - f10_local3[f10_local5]
			end
		end
		f10_local6.attachment = f10_local4
	end
	return f10_arg0
end

ATTACHMENT.GetCompareAttachmentAttributesDetails = function ( f9_arg0, f9_arg1, f9_arg2, f9_arg3, f9_arg4, f9_arg5, f9_arg6 )
	if not f9_arg6 then
		f9_arg6 = {}
	end
	local f9_local0 = WEAPON.GetWeaponModelName( f9_arg5.weapon, f9_arg5, {
		showSWhiskeyMag = true,
		includeAttachments = true,
		keepAkimbo = true
	} )
	local f9_local1 = Engine[0x603B6AC5797050A]( f9_local0, f9_arg2.ref )
	local f9_local2 = ClientWeapon[0xFE24333F9BC2CAB]( f9_arg0, f9_local0, f9_local1 )
	if f9_local1 == Enum[0x540F63FFAF44174][0xBEA71FD0CCA2F6D] and f9_arg2.category == ATTACHMENT.receiverCategory then
		local f9_local3 = StringTable[0x2DCF0973239E909]( CSV.receiverTable.file, CSV.receiverTable.cols.receiverRef, f9_arg2.ref, CSV.receiverTable.cols.weaponRef )
		if not LUI.StringIsNilOrEmpty( f9_local3 ) then
			local f9_local4 = LUI.ShallowCopy( f9_arg5 )
			f9_local4.weapon = f9_local3
			local f9_local5 = ClientWeapon[0x75228338D174290]( f9_arg0, WEAPON.GetWeaponModelName( f9_local4.weapon, f9_local4, {
				includeAttachments = true
			} ), true, true, true )
			local f9_local6 = ClientWeapon[0x75228338D174290]( f9_arg0, f9_local0, false, true, true )
			local f9_local7 = f9_local2.tunedStats or f9_local2.unTunedStats
			for f9_local11, f9_local12 in pairs( f9_arg4 ) do
				f9_local7[f9_local11] = f9_local5[f9_local11] - f9_local6[f9_local11]
			end
		end
	end
	return ATTACHMENT.UpdateWeaponAttributesWithAttachmentStats( f9_arg4, f9_local2.tunedStats or f9_local2.unTunedStats, f9_arg6.defaultAttachmentData )
end

ATTACHMENT.GetAttachmentStatsDetails = function ( f8_arg0, f8_arg1, f8_arg2, f8_arg3, f8_arg4 )
	if not f8_arg4 then
		f8_arg4 = {}
	end
	local f8_local0 = f8_arg4.weaponPlayerData
	local f8_local1 = f8_arg4.weaponAttributes
	local f8_local2 = f8_arg4.isSetup
	local f8_local3 = {}
	local f8_local4 = WEAPON.GetAmmoData( f8_arg0, ATTACHMENT.GetAttachmentWeaponTableForAmmoData( f8_arg0, f8_arg1, f8_arg2, f8_arg3, f8_arg4 ) )
	f8_local3.ammoData = f8_local4
	local f8_local5, f8_local6, f8_local7 = nil
	if f8_local2 then
		f8_local5, f8_local6, f8_local7 = ATTACHMENT.GetBaseCompareAttachmentAttributesDetails( f8_arg0, f8_arg1, f8_arg2, f8_arg3, f8_arg4 )
	else
		f8_local5 = ATTACHMENT.GetCompareAttachmentAttributesDetails( f8_arg0, f8_arg1, f8_arg2, f8_local0, f8_local1, f8_arg3, f8_arg4 )
	end
	f8_local3.weaponAttributes = f8_local5
	f8_local3.modifiedAttributeSet = f8_local7
	f8_local3.defaultAttachmentData = f8_local6
	if CONDITIONS.IsMobileOrMobileSim() then
		local f8_local8 = f8_arg4.modifiersValues
		if f8_local8 then
			f8_local8 = GUNSMITH.GetSortedModifiersValues( f8_local8 )
		end
		local f8_local9 = {}
		local f8_local10 = f8_arg2.category
		local f8_local11 = ATTACHMENT.receiverCategory
		f8_local9.expanderType = REG23 and ItemDetailsUtils.StatsExpandedAnims.RECEIVER_COMPARE or ItemDetailsUtils.StatsExpandedAnims.MODIFIERS
		f8_local9.lockExpander = f8_arg4.lockExpander
		f8_local9.ammoData = f8_local4
		f8_local9.details = {
			weapon = f8_arg1,
			ammo = f8_local4,
			weaponAttributes = f8_local5,
			modifiersValues = f8_local8
		}
		f8_local3.expanderData = f8_local9
	end
	return f8_local3
end

ATTACHMENT.DoesWeaponHaveEquippedAttachments = function ( f7_arg0 )
	local f7_local0 = WEAPON.GenerateWeaponTable( f7_arg0 )
	for f7_local4, f7_local5 in ipairs( f7_local0.attachments ) do
		if f7_local5.ref ~= ATTACHMENT.none and f7_local5.category ~= ATTACHMENT.receiverCategory and f7_local5.category ~= ATTACHMENT.none then
			return true
		end
	end
	return false
end

ATTACHMENT.SendAttachmentTagDataToServer = function ( f6_arg0, f6_arg1, f6_arg2 )
	local f6_local0 = ClientWeapon[0x5DD69014A9C290]( FrontEndScene.ClientWeapons.Preview )
	local f6_local1 = ""
	local f6_local2 = ""
	local f6_local3 = WEAPON.IsBullpup( f6_arg0._weaponRef )
	local f6_local4 = ATTACHMENT.STOCK_OFFSET
	if f6_arg2 == ATTACHMENT.perkCategory or f6_arg2 == ATTACHMENT.boltCategory then
		f6_local1 = "ammo_display_origin"
		local f6_local5 = CLIENT_MODEL.GetClientModelIndex( CLIENT_MODEL.coreMPModels.AMMO_DISPLAY )
		if f6_local5 then
			local f6_local6 = ClientModel[0x9088CC2C1E6A1E9]( f6_local5, CLIENT_MODEL.coreMPModels.GUN_VISE_BASE.tagOrigin )
			local f6_local7 = ClientModel[0x7FE4C5AFE1F4377]( f6_local5 )
			f6_local7.xAngle = ATTACHMENT.AMMO_DISPLAY_ANGLE
			f6_local2 = f6_local1 .. "," .. f6_local6.xPosition .. "," .. f6_local6.yPosition .. "," .. f6_local6.zPosition .. "," .. f6_local7.xAngle .. "," .. f6_local7.yAngle .. "," .. f6_local7.zAngle
		end
	else
		f6_local1 = StringTable[0x2DCF0973239E909]( CSV.attachmentCategories.file, CSV.attachmentCategories.cols.ref, f6_arg2, CSV.attachmentCategories.cols.bone )
		local f6_local5 = Engine[0xC3B7925CCAC9430]( f6_arg1, f6_local0, f6_local1 )
		local f6_local6 = WEAPON.GetWeaponClass( f6_arg0._weaponRef )
		if f6_arg2 == "frontpiece" then
			if f6_local6 == WEAPON.sniperClass or f6_local6 == WEAPON.LMGClass then
				f6_local1 = "tag_barrel_attach_large"
			elseif f6_local6 == WEAPON.pistolClass then
				f6_local1 = "tag_barrel_attach_small"
			end
		elseif f6_arg2 == ATTACHMENT.backpieceCategory and f6_local6 == WEAPON.pistolClass then
			f6_local1 = "tag_stock_attach_small"
			f6_local4.Z = ATTACHMENT.PISTOL_STOCK_Z_OFFSET
			if f6_arg0._weaponRef == WEAPON.FtacSeige then
				f6_local4.Z = ATTACHMENT.FTAC_SEIGE_STOCK_Z_OFFSET
			end
			f6_local5.xPosition = f6_local5.xPosition + f6_local4.X
			f6_local5.yPosition = f6_local5.yPosition + f6_local4.Y
			f6_local5.zPosition = f6_local5.zPosition + f6_local4.Z
		elseif f6_arg2 == ATTACHMENT.backpieceCategory and f6_local6 ~= WEAPON.pistolClass then
			if f6_local3 then
				f6_local4 = ATTACHMENT.BULLPUP_STOCK_OFFSET
				if f6_local6 == WEAPON.LMGClass then
					f6_local4.Z = ATTACHMENT.LMG_STOCK_Z_OFFSET
				end
			end
			f6_local5.xPosition = f6_local5.xPosition + f6_local4.X
			f6_local5.yPosition = f6_local5.yPosition + f6_local4.Y
			f6_local5.zPosition = f6_local5.zPosition + f6_local4.Z
		elseif f6_arg0._focusedAttachmentData and f6_arg0._focusedAttachmentData.baseTypeName == "bipod" then
			f6_local1 = "tag_bipod_attach"
			f6_local5 = Engine[0xC3B7925CCAC9430]( f6_arg1, f6_local0, f6_local1 )
		end
		f6_local2 = f6_local1 .. "," .. f6_local5.xPosition .. "," .. f6_local5.yPosition .. "," .. f6_local5.zPosition .. "," .. f6_local5.xAngle .. "," .. f6_local5.yAngle .. "," .. f6_local5.zAngle
	end
	Engine[0x6055C55456F05DF]( f6_local2, 1 )
end

ATTACHMENT.GetTacticalBuildData = function ( f5_arg0, f5_arg1, f5_arg2 )
	if not String.IsNilOrEmpty( f5_arg0 ) and not String.IsNilOrEmpty( f5_arg1 ) and f5_arg2 then
		local f5_local0 = Engine[0xC1071CB24322BA5]( f5_arg0, f5_arg1, f5_arg2 )
		if f5_local0 and not Table.IsEmpty( f5_local0 ) then
			if type( f5_local0.tracerColor ) == "string" and not String.IsNilOrEmpty( f5_local0.tracerColor ) and COLORS_UTILS.IsStringHexCode( f5_local0.tracerColor ) then
				f5_local0.tracerColor = COLORS_UTILS.HexToRGB( f5_local0.tracerColor )
			else
				f5_local0.tracerColor = nil
			end
			if type( f5_local0.dismembermentColor ) == "string" and not String.IsNilOrEmpty( f5_local0.dismembermentColor ) and COLORS_UTILS.IsStringHexCode( f5_local0.dismembermentColor ) then
				f5_local0.dismembermentColor = COLORS_UTILS.HexToRGB( f5_local0.dismembermentColor )
			else
				f5_local0.dismembermentColor = nil
			end
			return f5_local0
		end
	end
end

ATTACHMENT.GetAttachmentSlotIndexFromCategory = function ( f4_arg0 )
	local f4_local0
	if f4_arg0 == ATTACHMENT.opticCategory then
		f4_local0 = ATTACHMENT.scopeSlot
		if not f4_local0 then
		
		else
			return Engine[0x45258A710ADDE0D]( f4_local0 )
		end
	end
	f4_local0 = f4_arg0
end

ATTACHMENT.GetChildAttachmentRef = function ( f3_arg0, f3_arg1 )
	local f3_local0 = ATTACHMENT.GetAttachmentSlotIndexFromCategory( ATTACHMENT.GetCategoryByLootID( f3_arg1 ) )
	if 0 < f3_local0 then
		for f3_local4, f3_local5 in ipairs( Engine[0x898B12D07DF49BE]( GL_HACK.GetWeaponMPRef( f3_arg0 ), f3_local0 ) ) do
			if ATTACHMENT.GetLootIDForRef( f3_local5.ref ) == f3_arg1 then
				return f3_local5.ref
			end
		end
	end
	return nil
end

ATTACHMENT.GetDefaultAttachmentRefIfNone = function ( f2_arg0, f2_arg1, f2_arg2 )
	if not f2_arg0 or f2_arg0 == "none" then
		f2_arg0 = ATTACHMENT.GetDefaultAttachmentRefForSlotIndex( GL_HACK.GetWeaponMPRef( f2_arg1 ), f2_arg2 )
	end
	return f2_arg0
end

ATTACHMENT.GetAttachmentRefFromBaseRefOrLootID = function ( f1_arg0, f1_arg1, f1_arg2, f1_arg3 )
	for f1_local6, f1_local7 in pairs( f1_arg3 ) do
		for f1_local3, f1_local4 in pairs( f1_local7 ) do
			if ATTACHMENT.GetLootIDForRef( f1_local4.ref ) == f1_arg2 or f1_local4.baseName == f1_arg1 or f1_local4.baseRef == f1_arg1 then
				return f1_local4.ref
			end
		end
	end
	return nil
end

