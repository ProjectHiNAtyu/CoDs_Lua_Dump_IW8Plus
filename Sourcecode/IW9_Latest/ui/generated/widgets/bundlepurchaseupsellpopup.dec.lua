-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
module( ..., package.seeall )
require( "ui.generated.widgets.genericpopupwindow" )
require( "ui.generated.widgets.frontend.bundlebutton" )
require( "ui.generated.widgets.frontend.timedbutton" )
require( "ui.generated.widgets.genericholdbutton" )
require( "ui.generated.widgets.buttonhelperbar" )
local f0_local0 = function ( f4_arg0, f4_arg1, f4_arg2 )
	f4_arg0._controllerIndex = f4_arg1
	local f4_local0 = f4_arg2.items
	assert( 0 < #f4_local0, "This popup is not made to work with no items in it." )
	f4_arg0.Grid:SetRefreshChild( function ( f7_arg0, f7_arg1, f7_arg2 )
		f7_arg0:SetupButtonData( f4_arg0[f4_arg0.Grid:GetContentIndex( f7_arg1, f7_arg2 ) + 1] )
	end )
	f4_arg0.Grid:SetNumChildren( #f4_local0 )
	f4_arg0.Grid:RefreshContent()
	f4_arg0.GoToStore:addEventHandler( "button_action", function ( f6_arg0, f6_arg1 )
		Lobby.AttemptOpenBRMenu( f4_arg0, {
			useStandaloneStore = true,
			activeTabIndex = TAB.GetIndex( TAB.MP.STORE )
		} )
		LUI.FlowManager.RequestLeaveMenu( f4_arg0, true )
	end )
	f4_arg0.ContinueButton:addEventHandler( "button_action", function ( f5_arg0, f5_arg1 )
		LUI.FlowManager.RequestLeaveMenu( f4_arg0, true )
	end )
	f4_arg0.ButtonHelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_primary",
		priority = 0,
		helper_text = Engine[0xED84C33EC5F01EA]( 0x7D9DC9E3291E103 )
	} )
	f4_arg0.ContinueButton:StartTimer()
	ACTIONS.ScaleFullscreen( f4_arg0, Background )
end

function BundlePurchaseUpsellPopup( menu, controller )
	local self = LUI.UIVerticalNavigator.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "BundlePurchaseUpsellPopup"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local Background = nil
	
	Background = LUI.UIImage.new()
	Background.id = "Background"
	Background:SetRGBFromInt( 0, 0 )
	Background:SetAlpha( 0.9, 0 )
	self:addElement( Background )
	self.Background = Background
	
	local GenericPopupWindow = nil
	
	GenericPopupWindow = MenuBuilder.BuildRegisteredType( "GenericPopupWindow", {
		controllerIndex = f1_local1
	} )
	GenericPopupWindow.id = "GenericPopupWindow"
	GenericPopupWindow.PopupBackground:SetRGBFromTable( SWATCHES.Popups.popupbggradient, 0 )
	GenericPopupWindow:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -810, _1080p * 810, _1080p * -287, _1080p * 323 )
	self:addElement( GenericPopupWindow )
	self.GenericPopupWindow = GenericPopupWindow
	
	local Grid = nil
	
	Grid = LUI.UIGrid.new( {
		scrollingThresholdX = 0,
		maxVisibleColumns = 3,
		maxVisibleRows = 1,
		controllerIndex = f1_local1,
		buildChild = function ()
			return MenuBuilder.BuildRegisteredType( "BundleButton", {
				controllerIndex = menu
			} )
		end,
		refreshChild = function ( f2_arg0, f2_arg1, f2_arg2 )
			
		end,
		spacingX = _1080p * 0,
		spacingY = _1080p * 0,
		columnWidth = _1080p * 540,
		rowHeight = _1080p * 350,
		horizontalAlignment = LUI.Alignment.Center,
		verticalAlignment = LUI.Alignment.Middle
	} )
	Grid.id = "Grid"
	Grid:SetHorizontalAlignment( LUI.Alignment.Center )
	Grid:SetVerticalAlignment( LUI.Alignment.Middle )
	Grid:SetMaxVisibleColumns( 3 )
	Grid:SetRowSpacing( 0 )
	Grid:setUseStencil( true )
	Grid:SetScrollThresholdX( 0 )
	Grid:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -810, _1080p * 810, _1080p * -175, _1080p * 175 )
	self:addElement( Grid )
	self.Grid = Grid
	
	local ContinueButton = nil
	
	ContinueButton = MenuBuilder.BuildRegisteredType( "TimedButton", {
		controllerIndex = f1_local1
	} )
	ContinueButton.id = "ContinueButton"
	ContinueButton.Text:setText( Engine[0xED84C33EC5F01EA]( 0x2C4A6ACC018870A ), 0 )
	ContinueButton.Text:SetAlignment( LUI.Alignment.Center )
	ContinueButton:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -210, _1080p * 210, _1080p * 211, _1080p * 249 )
	self:addElement( ContinueButton )
	self.ContinueButton = ContinueButton
	
	local GoToStore = nil
	
	GoToStore = MenuBuilder.BuildRegisteredType( "GenericHoldButton", {
		controllerIndex = f1_local1
	} )
	GoToStore.id = "GoToStore"
	GoToStore.GenericProgressBar.DialogueBackground:SetAlpha( 0, 0 )
	GoToStore.Text:SetLeft( _1080p * 20, 0 )
	GoToStore.Text:setText( Engine[0xED84C33EC5F01EA]( 0x481ED36AD602C19 ), 0 )
	GoToStore.Text:SetAlignment( LUI.Alignment.Center )
	GoToStore:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -210, _1080p * 210, _1080p * 256, _1080p * 294 )
	self:addElement( GoToStore )
	self.GoToStore = GoToStore
	
	local Title = nil
	
	Title = LUI.UIStyledText.new()
	Title.id = "Title"
	Title:SetRGBFromTable( SWATCHES.genericMenu.title, 0 )
	Title:setText( Engine[0xED84C33EC5F01EA]( 0xCD53E5ED845EEC0 ), 0 )
	Title:SetFont( FONTS.GetFont( FONTS.PrimaryLight.File ) )
	Title:SetFontSize( 40 * _PT )
	Title:SetMinFontSize( 24 * _PT )
	Title:SetWordWrap( false )
	Title:SetAlignment( LUI.Alignment.Center )
	Title:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -810, _1080p * 810, _1080p * -260, _1080p * -200 )
	self:addElement( Title )
	self.Title = Title
	
	local ButtonHelperBar = nil
	
	ButtonHelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	ButtonHelperBar.id = "ButtonHelperBar"
	ButtonHelperBar.Background:SetAlpha( 0, 0 )
	ButtonHelperBar:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 105, _1080p * 1815, _1080p * 863, _1080p * 923 )
	self:addElement( ButtonHelperBar )
	self.ButtonHelperBar = ButtonHelperBar
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "BundlePurchaseUpsellPopup", BundlePurchaseUpsellPopup )
LockTable( _M )
