-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
module( ..., package.seeall )
require( "ui.widgets.LobbyMembersFooter" )
require( "ui.widgets.VerticalScrollbar" )
require( "ui.frontEnd.LootItemCardWrapper" )
require( "ui.frontEnd.PurchaseBundleButton" )
require( "ui.widgets.MPPlayerDetails" )
require( "ui.widgets.MenuTitle" )
require( "ui.frontEnd.LimitedTimeItem" )
local f0_local0 = 200
local f0_local1 = function ()
	if Engine[0x836C8AD984F14F6]() then
		InGameStore.ShowStoreIcon( false )
	end
end

MenuBuilder.registerType( "PurchaseCODPointsPopup", function ( f55_arg0, f55_arg1 )
	local f55_local0 = MenuBuilder.BuildRegisteredType( "FlyInPopup", {
		primaryButtonText = "LUA_MENU/PURCHASE",
		flyInLeftNarrow = true,
		controllerIndex = f55_arg1.controllerIndex,
		widget = MenuBuilder.BuildRegisteredType( "PurchaseCPPopup", f55_arg1 )
	} )
	f55_local0.id = "PurchaseCODPointsPopup"
	return f55_local0
end )
LUI.FlowManager.RegisterStackPopBehaviour( "PurchaseCODPointsPopup", f0_local1 )
local f0_local2 = function ( f54_arg0 )
	local f54_local0 = {
		nil,
		"base",
		"common",
		"rare",
		"epic",
		"legendary",
		"ultra",
		"heroic"
	}
	if f54_arg0 then
		return "v_ui_spritesheet_lootcardunlock_" .. f54_local0[f54_arg0 + 1]
	else
		return "v_ui_spritesheet_lootcardunlock_base"
	end
end

local f0_local3 = function ( f44_arg0, f44_arg1, f44_arg2 )
	local f44_local0 = Dvar[0x9E5BE3B4BBA4E0E]( "#x31890e2f54690a463" )
	local f44_local1, f44_local2, f44_local3, f44_local4 = f44_arg1.Card:getLocalRect()
	ACTIONS.AnimateSequence( f44_arg1.Card, "ShowPurchasedFrame" )
	f44_arg1.UnlockEffectFrame.SpriteSheet:setImage( RegisterMaterial( f0_local0( f44_arg1._rarity ) ) )
	local f44_local5 = function ()
		local f50_local0 = LOOT.GetBundleItemsMappedByType( f44_arg0._bundleID )
		if f50_local0[LOOT.itemTypes.BATTLE_PASS] and f44_arg0 then
			local f50_local1 = f44_arg0:Wait( 3000 )
			f50_local1.onComplete = function ()
				if BATTLEPASS.GetTier( f50_local0._controllerIndex ) < BATTLEPASS.GetMaxTier() then
					local f52_local0 = {
						tierSkipID = f50_local0[LOOT.itemTypes.BATTLE_PASS][1]
					}
					Engine[0xC4146BA76D0F982]( SOUND_SETS.storefront.smokeCardSlam )
					LUI.FlowManager.RequestPopupMenu( nil, "BattlePassPurchaseProgressPopup", true, f50_local0._controllerIndex, false, f52_local0 )
					local f52_local1 = f50_local0:Wait( 1500 )
					f52_local1.onComplete = function ()
						f52_local0._purchasedAnimation = false
						f52_local0._previewsEnabled = true
						LUI.FlowManager.RequestLeaveMenuByName( "BattlePassPurchaseProgressPopup", true, true )
						f52_local0.displayUpsellPopup = f52_local0._displayUpsellPopup
						if f52_local0._bundleID == tonumber( BATTLEPASS.GetTierSkipGiftID() ) then
							local f53_local0 = LUI.FlowManager.GetScopedData( "MainMenu" )
							if f53_local0.returnToMainMenu then
								f52_local0.returnToMainMenu = f53_local0.returnToMainMenu
								f53_local0.returnToMainMenu = nil
							end
						end
						LUI.FlowManager.RequestAddMenu( "BattlePassMenuPopup", true, f52_local0._controllerIndex, false, f52_local0, true )
					end
					
				end
				f50_local0._purchasedAnimation = false
				f50_local0._previewsEnabled = true
				f50_local0.ItemsGrid:RefreshContent()
			end
			
		else
			if f44_arg0._displayUpsellPopup then
				local f50_local1 = f44_arg0:Wait( 3000 )
				f50_local1.onComplete = function ()
					STORE.OpenBundleUpsellPopup( f50_local0._controllerIndex )
				end
				
			end
			f44_arg0._purchasedAnimation = false
			f44_arg0._previewsEnabled = true
			f44_arg0.ItemsGrid:RefreshContent()
		end
	end
	
	local f44_local6 = nil
	f44_local6 = function ()
		local f48_local0 = math.random( -10, 10 ) * _1080p
		local f48_local1 = math.random( -10, 10 ) * _1080p
		local f48_local2 = LUI.EASING.linear
		local f48_local3 = math.random( 10, 30 )
		local f48_local4 = math.random( -4, 4 )
		local f48_local5 = f44_arg0.Card:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, f44_arg0 + f48_local1, f44_arg0 + f48_local1, f44_arg0 + f48_local0, f44_arg0 + f48_local0, f48_local3, f48_local2 )
		f48_local5.onComplete = function ()
			if f48_local0.shake then
				f48_local0()
			else
				f48_local0.Card:SetZRotation( 0, f48_local0, f48_local0 )
				f48_local0.Card:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, f48_local0, f48_local0, f48_local0, f48_local0, f48_local0, f48_local0 )
				if f48_local0 then
					f48_local0()
				end
			end
		end
		
	end
	
	local f44_local7 = 100
	f44_arg1:SetScale( 1 )
	f44_arg1:SetAlpha( 1, f44_local7, LUI.EASING.outBack )
	f44_arg1:SetScale( 0, f44_local7, LUI.EASING.outBack )
	local f44_local8 = f44_arg1:Wait( f44_local7 )
	f44_local8.onComplete = function ()
		f44_arg0.shake = true
		f44_arg0( f44_arg0 )
		if f44_arg0._lootType == LOOT.itemTypes.BATTLE_PASS and f44_arg0 then
			local f45_local0 = f44_arg0:Wait( 1500 )
			f45_local0.onComplete = function ()
				Engine[0xC4146BA76D0F982]( SOUND_SETS.storefront.smokePoof )
				f45_local0:SetAlpha( 0.3, 1500 )
			end
			
		else
			f44_arg0.UnlockEffectFrame:SetFrame( 1 )
			f44_arg0.UnlockEffectFrame:Play()
			ACTIONS.AnimateSequence( f44_arg0, "ShowUnlockEffect" )
		end
		local f45_local0 = f44_arg0:Wait( 50 )
		f45_local0.onComplete = function ()
			f45_local0.shake = false
		end
		
	end
	
end

local f0_local4 = function ( f41_arg0, f41_arg1 )
	local f41_local0 = function ()
		f41_arg0:processEvent( {
			name = "bundle_purchase_complete"
		} )
		Loot[0x431F0C8AEEAEB79]( f41_arg0, STORE.GetBundlePurchaseID( f41_arg0, f41_arg0._bundleID ) )
		LUI.FlowManager.RequestPopupMenu( nil, "LootPurchasingPopup", true, f41_arg0, false, {
			message = "LUA_MENU_MP/PURCHASE"
		} )
		f41_arg0.HelperBar:SetAlpha( 0 )
	end
	
	if Engine[0x5575DCFF312365A]() and CONDITIONS.IsKoreanAccountAndPC() then
		LUI.FlowManager.RequestPopupMenu( nil, "StoreConfirmPurchaseKoreaLegalPupup", true, f41_arg1, false, {
			itemName = f41_arg0._itemName,
			itemImage = f41_arg0._itemImage,
			itemCurrencyID = f41_arg0._currencyID,
			itemCurrencyAmount = f41_arg0._currencyAmount,
			confirmAction = function ()
				f41_arg0()
			end
		}, nil, false, true )
	else
		f41_local0()
	end
end

local f0_local5 = function ( f39_arg0, f39_arg1, f39_arg2, f39_arg3, f39_arg4 )
	if f39_arg0._isOwned then
		
	else
		
	end
	if QUARTERMASTER.itemData then
		QUARTERMASTER.RecordItemBrowseEvent( f39_arg0._controllerIndex, false )
	end
	if f39_arg0._isFirstParty and f39_arg0._firstPartyPurchase then
		if Engine[0x836C8AD984F14F6]() then
			InGameStore.ShowStoreIcon( false )
		end
		f39_arg0._firstPartyPurchase()
	end
	if Commerce[0xFCE51EA6B7B00CC]( f39_arg3, f39_arg0._currencyID ) < f39_arg0._currencyAmount then
		STORE.EnterStore( f39_arg3, f39_arg1, f39_arg2.id, {
			showBalance = true,
			controllerIndex = f39_arg3,
			currencyID = f39_arg0._currencyID,
			currencyAmount = f39_arg0._currencyAmount
		}, "PurchaseCODPointsPopup", true )
	else
		local f39_local0 = {
			itemName = f39_arg0._itemName,
			itemImage = f39_arg0._itemImage,
			itemCurrencyID = f39_arg0._currencyID,
			itemCurrencyAmount = f39_arg0._currencyAmount,
			showDisclaimer = f39_arg0._showDisclaimer,
			startPurchaseImmediately = f39_arg4,
			confirmAction = function ()
				f39_arg0( f39_arg0, f39_arg0 )
			end
		}
		Engine[0xC4146BA76D0F982]( SOUND_SETS.storefront.purchaseBundle )
		LUI.FlowManager.RequestPopupMenu( nil, "StoreConfirmPurchasePopup", true, f39_arg3, false, f39_local0, nil, false, true )
	end
end

local f0_local6 = function ( f38_arg0, f38_arg1, f38_arg2, f38_arg3 )
	STORE.EnterStore( f38_arg3, f38_arg1, f38_arg2.id, {
		showBalance = true,
		controllerIndex = f38_arg3,
		currencyID = f38_arg0._currencyID,
		currencyAmount = f38_arg0._currencyAmount,
		bundleID = f38_arg0._bundleID
	}, "PurchaseCODPointsPopup", true )
end

local f0_local7 = function ( f36_arg0 )
	return function ( f37_arg0, f37_arg1 )
		local f37_local0 = f36_arg0
		local f37_local1 = f36_arg0
		local f37_local2 = f36_arg0:GetCurrentMenu()
		f37_local0( f37_local1, f37_local2.id, f37_arg0, f37_arg1.controller, false )
	end
	
end

local f0_local8 = function ( f34_arg0 )
	return function ( f35_arg0, f35_arg1 )
		local f35_local0 = f34_arg0
		local f35_local1 = f34_arg0
		local f35_local2 = f34_arg0:GetCurrentMenu()
		f35_local0( f35_local1, f35_local2.id, f35_arg0, f35_arg1.controller )
	end
	
end

local f0_local9 = function ( f33_arg0 )
	if f33_arg0._video and 0 < #f33_arg0._video then
		f33_arg0:RemoveElement( f33_arg0.Cinematic )
		f33_arg0.Cinematic:addElementAfter( f33_arg0.Background )
		f33_arg0.Cinematic:SetAlpha( 1 )
		f33_arg0.Background:SetAlpha( 0 )
		Engine[0xFCF332AA8AC9B0F]( f33_arg0._video, VideoPlaybackFlags.LOOP )
	end
end

local f0_local10 = function ( f32_arg0, f32_arg1 )
	local f32_local0 = CONDITIONS.QuickEquipEnabled()
	if f32_local0 then
		if f32_arg1 ~= nil then
			f32_local0 = LOOT.CanBeQuickEquipped( f32_arg0, f32_arg1 )
		else
			f32_local0 = false
		end
	end
	return f32_local0
end

local f0_local11 = function ( f31_arg0, f31_arg1, f31_arg2 )
	assert( CONDITIONS.QuickEquipEnabled() )
	LOOT.QuickEquipItem( f31_arg0, f31_arg1, f31_arg2 )
end

local f0_local12 = function ( f10_arg0, f10_arg1, f10_arg2 )
	assert( f10_arg2.bundleID )
	Engine[0xC4146BA76D0F982]( SOUND_SETS.storefront.windowAppear )
	f10_arg0.isQuickAccessShortcutsDisabled = true
	f10_arg0._bundleID = f10_arg2.bundleID
	f10_arg0._timerValue = f10_arg2.timerValue
	local f10_local0
	if not f10_arg1 then
		f10_local0 = f10_arg1
	else
		f10_local0 = Engine[0x45B054C920178E9]()
	end
	f10_arg0._controllerIndex = f10_local0
	f10_arg0._previewsEnabled = true
	f10_arg0._promotedItems = STORE.ParsePromotedItems( f10_arg1 )
	f10_arg0._showDisclaimer = false
	f10_arg0._totalTierSkips = 0
	f10_arg0._curBattlePassTier = BATTLEPASS.GetTier( f10_arg1 )
	f10_arg0._displayUpsellPopup = f10_arg2.displayUpsellPopup
	f10_arg0._itemName = StringTable[0x2DCF0973239E909]( CSV.bundleIDs.file, CSV.bundleIDs.cols.id, f10_arg0._bundleID, CSV.bundleIDs.cols.name )
	f10_arg0._itemImage = StringTable[0x2DCF0973239E909]( CSV.bundleIDs.file, CSV.bundleIDs.cols.id, f10_arg0._bundleID, CSV.bundleIDs.cols.titleImage )
	f10_arg0._billboardImage = StringTable[0x2DCF0973239E909]( CSV.bundleIDs.file, CSV.bundleIDs.cols.id, f10_arg0._bundleID, CSV.bundleIDs.cols.image )
	f10_arg0._video = StringTable[0x2DCF0973239E909]( CSV.bundleIDs.file, CSV.bundleIDs.cols.id, f10_arg0._bundleID, CSV.bundleIDs.cols.video )
	f10_arg0._lastFocusedRowInPurchaseAnim = 0
	f10_arg0._currentlySelectedItemID = nil
	f10_arg0.PlayBundleVideo = f0_local0
	if IsLanguageJapanese() then
		f10_arg0.LocalizedTitle:SetFontSize( 23 * _PT )
	end
	f10_local0 = LUI.FlowManager.GetScopedData( f10_arg0 )
	f10_arg0.PurchaseButton:AddTooltipData( f10_arg1, {
		promptsData = {
			{
				kbmTooltipPromptOverload = "button_alt1",
				button_ref = "button_alt1",
				helper_text = nil
			}
		}
	} )
	if f10_arg2.isFirstParty then
		f10_arg0._isFirstParty = f10_arg2.isFirstParty
		f10_arg0._isOwned = f10_local0.firstPartyOwned or f10_arg2.owned
		f10_arg0._firstPartyPurchase = f10_arg2.firstPartyPurchase
		if Engine[0x836C8AD984F14F6]() then
			InGameStore.ShowStoreIcon( true, InGameStoreStoreIconPosition.CENTER )
		end
		f10_arg0.PurchaseButton:SetPrice( f10_arg2.price )
	else
		local f10_local1, f10_local2 = STORE.GetBundleCost( f10_arg0._controllerIndex, f10_arg2.bundleID )
		if f10_local2 and f10_local2 < f10_local1 then
			f10_arg0._currencyAmount = f10_local2
		else
			f10_arg0._currencyAmount = f10_local1
		end
		f10_arg0._currencyID = f10_arg2.currencyID
		f10_arg0._isOwned = 0 < Loot[0xB7D304F1F31158E]( f10_arg0._controllerIndex, f10_arg0._bundleID )
		local f10_local3 = STORE.GetSentinelItemForBundle( f10_arg0._bundleID )
		if f10_local3 and 0 < Loot[0xB7D304F1F31158E]( f10_arg1, f10_local3 ) then
			f10_arg0._isOwned = true
		end
		f10_arg0.PurchaseButton:SetPrice( f10_local1, f10_local2 )
	end
	local f10_local1 = LUI.FlowManager.GetMenuNameAtIndex( -1 )
	if f10_arg2.currencyID == LOOT.CurrencyIDs.COD_POINTS then
		f10_arg0.PurchaseButton.CurrencyIcon:setImage( RegisterMaterial( "v_ui_icon_currency_codpoints01" ) )
	elseif f10_arg2.currencyID == LOOT.CurrencyIDs.KEYS then
		f10_arg0.PurchaseButton.CurrencyIcon:setImage( RegisterMaterial( "icon_currency_key" ) )
	elseif not f10_arg0._isFirstParty then
		assert( false, "Unsupported currency!" )
	end
	local f10_local3 = function ()
		if f10_arg0._isOwned then
			ACTIONS.AnimateSequence( f10_arg0, "Purchased" )
			f10_arg0.PurchaseButton:SetButtonDisabled( true )
			f10_arg0.PurchaseButton:processEvent( {
				name = "Purchased"
			} )
			f10_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
				side = "left",
				button_ref = "button_alt1"
			} )
		end
	end
	
	f10_local3()
	Engine[0x685AE31DEDA30A4]( "loadout_showcase_preview" )
	FrontEndScene.HideWeaponModels()
	f10_arg0.MenuTitle:SetTitle( ToUpperCase( Engine[0xED84C33EC5F01EA]( "MENU/BUNDLE_PREVIEW" ) ), true )
	local f10_local4 = LOOT.GetItemsInBundle( f10_arg0._bundleID )
	local f10_local5 = 0
	if f10_arg0._isFirstParty then
		f10_local5 = StringTable[0x2DCF0973239E909]( CSV.dlcIDs.file, CSV.dlcIDs.cols.name, StringTable[0x2DCF0973239E909]( CSV.bundleIDs.file, CSV.bundleIDs.cols.id, f10_arg0._bundleID, CSV.bundleIDs.cols.firstPartyProductID ), CSV.dlcIDs.cols.CPAmount )
		if f10_local5 and 0 < #f10_local5 then
			table.insert( f10_local4, LOOT.COD_POINTS_ID )
		end
	end
	f10_arg0._totalTierSkips = LOOT.GetTierSkipsInBundle( f10_arg0._bundleID ) or 0
	if f10_arg0._showDisclaimer == false and f10_arg0._curBattlePassTier + f10_arg0._totalTierSkips > BATTLEPASS.GetMaxTier() then
		f10_arg0._showDisclaimer = true
	end
	if f10_arg0._billboardImage and 0 < #f10_arg0._billboardImage then
		local f10_local6 = RegisterMaterial( f10_arg0._billboardImage )
		if f10_local6 then
			f10_arg0.Background:SetAlpha( 0.25 )
			f10_arg0.Background:setImage( f10_local6 )
		end
	else
		f10_arg0.Background:SetAlpha( 0 )
	end
	f10_arg0:PlayBundleVideo()
	f10_arg0.ItemsGrid:SetRefreshChild( function ( f25_arg0, f25_arg1, f25_arg2 )
		f10_arg0.bundleData = {
			startPurchaseImmediately = false,
			bundleID = f10_arg0._bundleID,
			itemCurrencyID = f10_arg0._currencyID,
			itemCurrencyAmount = f10_arg0._currencyAmount,
			timerValue = f10_arg0._timerValue,
			showDisclaimer = f10_arg0._showDisclaimer,
			isBundlePurchased = f10_arg0._isOwned
		}
		local f25_local0 = f10_arg0.ItemsGrid:GetContentIndex( f25_arg1, f25_arg2 ) + 1
		local f25_local1 = tonumber( f10_arg0[f25_local0] )
		local f25_local2 = {}
		local f25_local3 = LOOT.GetTypeForID( f25_local1 )
		local f25_local4 = LOOT.GetItemRef( f25_local3, f25_local1 )
		local f25_local5 = "placeholder_x"
		local f25_local6 = false
		if f25_local4 and 0 < #f25_local4 then
			local f25_local7 = LOOT.GetItemQuality( f25_local3, f25_local4, f25_local1 )
			if f25_local1 == LOOT.TIER_SKIP_ID then
				f25_local7 = LOOT.GetTierSkipRarity( f10_arg0._totalTierSkips )
			end
			local f25_local8 = LOOT.GetRarityColor( f25_local7 )
			local f25_local9 = LOOT.GetDarkRarityColor( f25_local7 )
			f25_arg0._previewsEnabled = f10_arg0._previewsEnabled
			f25_arg0.Card._previewsEnabled = f10_arg0._previewsEnabled
			f25_arg0.Card:SetHandleMouse( f10_arg0._previewsEnabled )
			f25_arg0.Card:SetFocusable( f10_arg0._previewsEnabled )
			f25_arg0._rarity = f25_local7
			f25_arg0.Card.RarityBG:SetRGBFromTable( f25_local9 )
			f25_arg0.Card.Border:SetRGBFromTable( f25_local8 )
			f25_arg0.Card.RarityImage:setImage( RegisterMaterial( LOOT.GetRarityImage( f25_local7 ) ) )
			f25_arg0.Card.RarityImage:SetRGBFromTable( f25_local8 )
			local f25_local10 = LOOT.GetTypeForID( f25_local1 )
			f25_arg0._lootType = f25_local10
			if f25_local7 == LOOT.Rarity.LEGENDARY then
				ACTIONS.AnimateSequence( f25_arg0.Card, "GlintAnime" )
			end
			if f25_local10 == LOOT.itemTypes.WEAPON then
				if WEAPON.IsVariant( f10_arg0, f25_local1 ) then
					f25_arg0.Card.BlueprintIcon:SetAlpha( 0.7 )
					f25_arg0.Card.BlueprintIcon:SetRGBFromTable( f25_local8 )
				else
					f25_arg0.Card.BlueprintIcon:SetAlpha( 0 )
				end
				f25_arg0.Card:SetupTracer( f10_arg0, f25_local1 )
				f25_arg0.Card:SetupDismemberment( f10_arg0, f25_local1 )
			else
				f25_arg0.Card:ClearTracerAndDismemberment()
			end
			local f25_local11 = nil
			if f25_local6 then
				f25_local11 = f25_local5
			else
				f25_local11 = LOOT.GetItemImage( f25_local10, f25_local4, f25_local1 )
			end
			if f25_local10 == LOOT.itemTypes.TITLES then
				f25_arg0.Card:UpdateCardConfig( f25_local10, nil, LOOT.GetItemName( f25_local10, f25_local4 ), f25_local1, f25_local6 )
			elseif f25_local11 and 0 < #f25_local11 then
				f25_arg0.Card:UpdateCardConfig( f25_local10, f25_local11, nil, f25_local1, f25_local6 )
				f25_arg0.Card.Foreground:setImage( RegisterMaterial( f25_local11 ) )
			else
				DebugPrint( "Could not find image asset for type: " .. f25_local10 .. ", and ref: " .. f25_local4 )
			end
			local f25_local12 = nil
			if f25_local4 == "battlepass" then
				f25_local12 = Engine[0xED84C33EC5F01EA]( "BATTLEPASS/SEASON_X_BATTLEPASS", SEASON.GetCurrentSeason() )
			elseif f25_local1 == LOOT.COD_POINTS_ID then
				f25_local12 = Engine[0xED84C33EC5F01EA]( "LUA_MENU/COD_POINT_AMOUNT", f10_arg0 )
			elseif f25_local1 == LOOT.TIER_SKIP_ID and 1 < f10_arg0._totalTierSkips then
				f25_local12 = Engine[0xED84C33EC5F01EA]( "BATTLEPASS/N_TIER_SKIPS", f10_arg0._totalTierSkips )
			else
				f25_local12 = LOOT.GetItemName( f25_local10, f25_local4, f25_local1 )
			end
			if f25_local12 and 0 < #f25_local12 then
				f25_arg0.Card.ItemName:setText( ToUpperCase( f25_local12 ) )
			else
				DebugPrint( "Could not find item name for type: " .. f25_local10 .. ", and ref: " .. f25_local4 )
			end
			local f25_local13 = LOOT.GetItemClassName( f25_local10, f25_local4 )
			if f25_local1 == LOOT.COD_POINTS_ID then
				f25_local13 = LOOT.GetItemName( f25_local10, f25_local4, f25_local1 )
			end
			if f25_local10 == LOOT.itemTypes.RETICLE then
				f25_local13 = Engine[0xED84C33EC5F01EA]( "LOOT_MP/RETICLE_W_TYPE", Engine[0xED84C33EC5F01EA]( WEAPON.GetReticleCategoryName( StringTable[0x2DCF0973239E909]( CSV.reticles.file, CSV.reticles.cols.ref, f25_local4, CSV.reticles.cols.category ) ) ) )
			end
			if f25_local13 and 0 < #f25_local13 then
				f25_arg0.Card.ItemType:setText( f25_local13 )
			else
				DebugPrint( "Could not find item class name for type: " .. f25_local10 .. ", and ref: " .. f25_local4 )
			end
			f25_local2.id = f25_local1
			f25_local2.rarity = f25_local7
			f25_local2.type = f25_local10
			f25_local2.image = f25_local11
			f25_local2.name = f25_local12
			f25_local2.className = f25_local13
			f25_local2.bundleID = f10_arg0.bundleID
			f25_local2.endDate = f10_arg0._timerValue
			f25_arg0.Card.itemData = f25_local2
			if not f25_arg0._buttonHandlerAdded then
				f25_arg0.Card:addEventHandler( "button_action", function ( f29_arg0, f29_arg1 )
					if f25_arg0._previewsEnabled and STORE.PreviewSupported( f29_arg0.itemData.type ) then
						if f25_arg0._isFirstParty and Engine[0x836C8AD984F14F6]() then
							InGameStore.ShowStoreIcon( false )
						end
						f25_arg0._overrideStopVideo = f29_arg0.itemData.type == LOOT.itemTypes.KILLCAM_VANITY
						STORE.PreviewItem( f25_arg0, f29_arg0.itemData.type, f29_arg0.itemData.id, f25_arg0._bundleID, f25_arg0._timerValue, false, false, f25_arg0.bundleData )
						QUARTERMASTER.RecordItemBrowseEvent( f25_arg0._controllerIndex, true )
					end
				end )
				f25_arg0.Card:addEventHandler( "button_over", function ( f28_arg0, f28_arg1 )
					if f25_arg0._previewsEnabled then
						if QUARTERMASTER.itemData then
							QUARTERMASTER.RecordItemBrowseEvent( f25_arg0._controllerIndex, false )
						end
						QUARTERMASTER.BeginItemBrowseEvent( f28_arg0.itemData )
						if CONDITIONS.QuickEquipEnabled() then
							f25_arg0._currentlySelectedItemID = f28_arg0.itemData.id
							f25_arg0.PurchaseButton:processEvent( {
								name = "displayQuickEquipButton",
								displayButton = f25_arg0( f25_arg0._controllerIndex, f25_arg0._currentlySelectedItemID )
							} )
						end
						if CONDITIONS.IsMTXDebugOverlayEnabled() then
							MTXDebugOverlayUtils.UpdateInfo( f25_arg0, MTXDebugOverlayUtils.Categories.STORE_BUNDLE, {
								{
									infoId = MTXDebugOverlayUtils.StoreBundleInfoIds.FOCUSED_ITEM_ID,
									infoValue = f28_arg0.itemData.id
								},
								{
									infoId = MTXDebugOverlayUtils.StoreBundleInfoIds.FOCUSED_ITEM_NAME,
									infoValue = LOOT.GetItemRef( f28_arg0.itemData.type, f28_arg0.itemData.id )
								}
							} )
						end
					end
				end )
				f25_arg0._buttonHandlerAdded = true
			end
			if not f25_arg0._contextMenuAdded and CONDITIONS.QuickEquipEnabled() and f10_arg0._isOwned and LOOT.CanBeQuickEquipped( f10_arg0._controllerIndex, f25_arg0.Card.itemData.id ) then
				f25_arg0.Card:SetupContextualMenu( {
					title = f25_arg0.Card.itemData.name
				} )
				f25_arg0.Card:AddContextualMenuAction( {
					button = "button_alt1",
					actionName = Engine[0xED84C33EC5F01EA]( "LUA_MENU_MP/QUICK_EQUIP" ),
					actionFunction = function ()
						f25_arg0( f25_arg0, f25_arg0._controllerIndex, f25_arg0.Card.itemData.id )
					end,
					id = f25_arg0.Card.itemData.id
				} )
				f25_arg0._contextMenuAdded = true
			end
			if f10_arg0._purchasedAnimation or f10_arg0._isOwned then
				ACTIONS.AnimateSequence( f10_arg0, "Purchased" )
			elseif f10_arg0._showDisclaimer then
				ACTIONS.AnimateSequence( f10_arg0, "TierDisclaimer" )
			end
			local f25_local14 = LAYOUT.GetTextHeight( f10_arg0.WarzoneExclusive )
			local f25_local15 = LAYOUT.GetElementHeight( f10_arg0.Disclaimer )
			local f25_local16 = f10_arg0.WarzoneExclusive:GetCurrentAnchorsAndPositions()
			local f25_local17 = f25_local14 + f25_local16.top + 8 * _1080p
			f10_arg0.Disclaimer:SetTop( f25_local17 )
			f10_arg0.Disclaimer:SetBottom( f25_local17 + f25_local15 )
		end
		if f10_arg0._purchasedAnimation then
			f25_arg0:SetAlpha( 0 )
			local f25_local7 = f10_arg0 * f25_local0
			if 10 < #f10_arg0 and 1 < f25_arg2 then
				f25_local7 = f10_arg0 * (f25_arg1 + 1)
			end
			local f25_local8 = f25_arg0:Wait( f25_local7 )
			f25_local8.onComplete = function ()
				if f25_arg0 == 1 then
					Engine[0xC4146BA76D0F982]( SOUND_SETS.storefront.cardFlipFirst )
				end
				Engine[0xC4146BA76D0F982]( SOUND_SETS.storefront.cardFlipMiddle )
				if f25_arg0 == #f25_arg0 then
					Engine[0xC4146BA76D0F982]( SOUND_SETS.storefront.cardFlipLast )
				end
				if f25_arg0._lastFocusedRowInPurchaseAnim < f25_arg0 and f25_arg0 == 4 then
					f25_arg0._lastFocusedRowInPurchaseAnim = f25_arg0
					f25_arg0.ItemsGrid:SetFocusedPosition( {
						x = f25_arg0,
						y = f25_arg0
					}, false, true )
				end
				f25_arg0( f25_arg0, f25_arg0, f25_arg0 == #f25_arg0, f25_arg0, f25_arg0 )
			end
			
		elseif f10_arg0._isOwned then
			ACTIONS.AnimateSequence( f25_arg0.Card, "ShowPurchasedFrame" )
			if f25_local2.type == LOOT.itemTypes.BATTLE_PASS then
				f25_arg0:SetAlpha( 0.3 )
				f25_arg0.Card.Border:SetAlpha( 0 )
				f25_arg0.Card.ItemType:setText( Engine[0xED84C33EC5F01EA]( "BATTLEPASS/REDEEMED" ) )
			end
		end
	end )
	f10_arg0.ItemsGrid:SetNumRows( math.ceil( #f10_local4 / 5 ) )
	local f10_local7 = f10_arg0.ItemsGrid
	local f10_local8 = f10_local7
	f10_local7 = f10_local7.SetNumColumns
	local f10_local9
	if 5 < #f10_local4 then
		f10_local9 = 5
	else
		f10_local9 = #f10_local4
	end
	f10_local7( f10_local8, f10_local9 )
	f10_arg0.ItemsGrid:SetNumChildren( #f10_local4 )
	f10_arg0.ItemsGrid:RefreshContent()
	f10_arg0.PurchaseButton:addEventHandler( "button_action", f0_local0( f10_arg0 ) )
	f10_arg0:addEventHandler( "bundle_purchase_complete", function ( f24_arg0, f24_arg1 )
		f10_arg0._previewsEnabled = false
		f24_arg0.ItemsGrid:RefreshContent()
		Engine[0xC4146BA76D0F982]( SOUND_SETS.storefront.purchaseBundleComplete )
		if f10_arg0._video and 0 < #f10_arg0._video then
			f10_arg0:RemoveElement( f10_arg0.Cinematic )
			f10_arg0.Cinematic:addElementAfter( f10_arg0.Lock )
		end
		Engine[0xFCF332AA8AC9B0F]( "mp_store_bundle_purchase" )
		ACTIONS.AnimateSequence( f24_arg0, "BundlePurchaseShow" )
		local f24_local0 = Dvar[0x22EAAB59AA27E9B]( "#x33fc8dd37cd9a08ee" )
		local f24_local1
		if f24_local0 ~= AspectRatioIdentifiers.MEDIUM_WIDE and f24_local0 ~= AspectRatioIdentifiers.WIDE then
			f24_local1 = false
		else
			f24_local1 = true
		end
		if Engine[0x575E9C5B9AAB6F4]() and f24_local1 == true then
			ACTIONS.AnimateSequence( f10_arg0, "WideAspectRatioFrame" )
		end
	end )
	f10_local7 = function ()
		QUARTERMASTER.RecordPurchaseConfirmEvent( f10_arg0, f10_arg0, true, false )
		f10_arg0._purchasedAnimation = 0 < f10_arg0.ItemsGrid:GetNumChildren()
		if f10_arg0._purchasedAnimation then
			f10_arg0.ItemsGrid:SetFocusedPosition( {
				x = 0,
				y = 0
			}, false, true )
		end
		if f10_arg0._isFirstParty then
			f10_arg0._isOwned = true
		else
			f10_arg0._isOwned = 0 < Loot[0xB7D304F1F31158E]( f10_arg0._controllerIndex, f10_arg0._bundleID )
			local f22_local0 = STORE.GetSentinelItemForBundle( f10_arg0._bundleID )
			if f22_local0 and 0 < Loot[0xB7D304F1F31158E]( f10_arg0, f22_local0 ) then
				f10_arg0._isOwned = true
			end
		end
		LUI.FlowManager.RequestLeaveMenuByName( "LootPurchasingPopup", true )
		f10_arg0()
		Engine[0xC4146BA76D0F982]( SOUND_SETS.storefront.selectionConfirmed )
		local f22_local0 = f10_arg0:Wait( 3000 )
		f22_local0.onComplete = function ()
			Engine[0x3DACD106DDC0D71]()
			ACTIONS.AnimateSequence( f22_local0, "BundlePurchaseHide" )
			STORE.RefreshActiveRecommendations( f22_local0 )
			f22_local0.ItemsGrid:RefreshContent()
			f22_local0.HelperBar:SetAlpha( 1 )
			f22_local0:PlayBundleVideo()
		end
		
	end
	
	if f10_arg0._isFirstParty then
		f10_arg0:addEventHandler( "exchanged_item", function ( f21_arg0, f21_arg1 )
			if not f21_arg1.fromSignIn then
				f21_arg0._firstPartyPurchaseSuccess = true
				f10_arg0.firstPartyOwned = true
				return true
			else
				
			end
		end )
		f10_arg0:addEventHandler( "exchanged_item_failed", function ( f20_arg0, f20_arg1 )
			if not f20_arg1.fromSignIn then
				QUARTERMASTER.RecordPurchaseConfirmEvent( f10_arg0, f10_arg0, false, true )
				f10_arg0._previewsEnabled = true
			end
		end )
		f10_arg0:addEventHandler( "ingamestore_purchased_product", function ( f19_arg0, f19_arg1 )
			if f19_arg1.transactionResult == STORE.TransactionResult.TRANSACTION_SUCCEEDED then
				f19_arg0._firstPartyPurchaseSuccess = true
				f10_arg0.firstPartyOwned = true
				LUI.FlowManager.RequestLeaveMenuByName( "ItemExchangeFencePopup" )
			end
		end )
	else
		f10_arg0:addEventHandler( "loot_item_transaction_complete", f10_local7 )
		f10_arg0:addEventHandler( "loot_item_transaction_error", function ( f18_arg0, f18_arg1 )
			if f18_arg1.errorCode == STORE.ProductNoLongerAvailableError then
				LUI.FlowManager.RequestPopupMenu( nil, "MessagePopup", true, f10_arg0, false, {
					headerText = Engine[0xED84C33EC5F01EA]( "MENU/ERROR" ),
					messageText = Engine[0xED84C33EC5F01EA]( "LUA_MENU/PRODUCT_NOT_AVAILABLE" )
				} )
			end
			QUARTERMASTER.RecordPurchaseConfirmEvent( f10_arg0, f10_arg0, false, true )
			LUI.FlowManager.RequestLeaveMenuByName( "LootPurchasingPopup", true )
			LUI.FlowManager.RequestPopupMenu( nil, "HandleLootcratePopup", true, f10_arg0, false, {
				cratePopupType = STORE.CratePopupType.PURCHASE_FAIL
			} )
			Engine[0x3DACD106DDC0D71]()
			ACTIONS.AnimateSequence( f10_arg0, "BundlePurchaseHide" )
			f10_arg0._previewsEnabled = true
			f10_arg0.ItemsGrid:RefreshContent()
			f10_arg0.HelperBar:SetAlpha( 1 )
			f10_arg0:PlayBundleVideo()
		end )
	end
	f10_arg0:addEventHandler( "restore_focus", function ( f17_arg0, f17_arg1 )
		if f10_arg0._isFirstParty then
			if Engine[0x836C8AD984F14F6]() then
				InGameStore.ShowStoreIcon( true, InGameStoreStoreIconPosition.CENTER )
			end
			if f10_arg0._firstPartyPurchaseSuccess and not f10_arg0.hasPlayedPurchaseAnimation then
				f10_arg0._firstPartyPurchaseSuccess = nil
				f10_arg0:processEvent( {
					name = "bundle_purchase_complete"
				} )
				f10_arg0.hasPlayedPurchaseAnimation = true
				f10_arg0()
			end
		end
	end )
	f10_arg0.bindButton:registerEventHandler( "button_alt1", function ( element, event )
		if f10_arg0._isOwned and f10_arg0( f10_arg0._controllerIndex, f10_arg0._currentlySelectedItemID ) then
			f10_arg0( f10_arg0, f10_arg0._controllerIndex, f10_arg0._currentlySelectedItemID )
		elseif not f10_arg0._isOwned then
			local f16_local0 = f10_arg0
			local f16_local1 = f10_arg0
			local f16_local2 = f10_arg0:GetCurrentMenu()
			f16_local0( f16_local1, f16_local2.id, element, event.controller, false )
		end
	end )
	if CONDITIONS.IsMTXDebugOverlayEnabled() then
		MTXDebugOverlayUtils.ShowOverlay( f10_arg0 )
		MTXDebugOverlayUtils.UpdateOverlayDetails( f10_arg0, MTXDebugOverlayUtils.Categories.STORE_BUNDLE, {
			{
				infoId = MTXDebugOverlayUtils.StoreBundleInfoIds.BUNDLE_ID,
				infoValue = f10_arg0._bundleID
			},
			{
				infoId = MTXDebugOverlayUtils.StoreBundleInfoIds.BUNDLE_NAME,
				infoValue = StringTable[0x2DCF0973239E909]( CSV.bundleIDs.file, CSV.bundleIDs.cols.id, f10_arg0._bundleID, CSV.bundleIDs.cols.bundleRef )
			}
		} )
	end
	if not f10_arg0._isFirstParty and CONDITIONS.AreCODPointsEnabled( f10_arg0 ) then
		f10_arg0.bindButton:registerEventHandler( "button_alt2", f0_local0( f10_arg0 ) )
		f10_arg0.PlayerDetails.Wallet.CoDPoints.Btn:SetAlpha( 1 )
	end
	local f10_local10 = StringTable[0x2DCF0973239E909]( CSV.bundleIDs.file, CSV.bundleIDs.cols.id, f10_arg0._bundleID, CSV.bundleIDs.cols.titleImage )
	if f10_local10 and 0 < #f10_local10 then
		f10_arg0.TitleImage:setImage( RegisterMaterial( f10_local10 ) )
	else
		f10_arg0.TitleImage:SetAlpha( 0 )
	end
	f10_local8 = STORE.GetBundleDescription( f10_arg0._bundleID )
	if f10_local8 then
		f10_arg0.DescriptionText:setText( f10_local8 )
	end
	f10_local9 = StringTable[0x2DCF0973239E909]( CSV.bundleIDs.file, CSV.bundleIDs.cols.id, f10_arg0._bundleID, CSV.bundleIDs.cols.name )
	if f10_local9 then
		local f10_local11 = Engine[0xF35D89342CF7712]()
		local f10_local12
		if f10_local11 ~= 0 and f10_local11 ~= 1 then
			f10_local12 = false
		else
			f10_local12 = true
		end
		if not f10_local12 then
			f10_arg0.LocalizedTitle:setText( Engine[0xED84C33EC5F01EA]( f10_local9 ) )
		end
	end
	if f10_arg0._isOwned then
		ACTIONS.AnimateSequence( f10_arg0, "Purchased" )
		f10_arg0.PurchaseButton:SetButtonDisabled( true )
		f10_arg0.PurchaseButton:processEvent( {
			name = "Purchased"
		} )
		f10_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
			side = "left",
			button_ref = "button_alt1"
		} )
	elseif LUI.IsLastInputKeyboardMouse( f10_arg1 ) then
		f10_arg0.PurchaseButton:processEvent( {
			name = "button_up"
		} )
	else
		f10_arg0.PurchaseButton:processEvent( {
			name = "button_over"
		} )
	end
	f10_arg0:registerEventHandler( "menu_close", function ( element, event )
		if not f10_arg0._overrideStopVideo then
			Engine[0x3DACD106DDC0D71]()
		end
		LUI.FlowManager.RequestLeaveMenuByName( "LootPurchasingPopup" )
		if Engine[0x836C8AD984F14F6]() then
			InGameStore.ShowStoreIcon( false )
		end
		if f10_arg0._bundleID == tonumber( BATTLEPASS.GetTierSkipGiftID() ) then
			local f15_local0 = LUI.FlowManager.GetScopedData( "MainMenu" )
			if f15_local0.returnToMainMenu then
				f15_local0.returnToMainMenu = nil
			end
		end
		if CONDITIONS.IsMTXDebugOverlayEnabled() then
			local f15_local0 = MTXDebugOverlayUtils.DEFAULT_DATA_ENTRY
			MTXDebugOverlayUtils.UpdateInfo( f10_arg0, MTXDebugOverlayUtils.Categories.STORE_BUNDLE, {
				{
					infoId = MTXDebugOverlayUtils.StoreBundleInfoIds.BUNDLE_ID,
					infoValue = f15_local0
				},
				{
					infoId = MTXDebugOverlayUtils.StoreBundleInfoIds.BUNDLE_NAME,
					infoValue = f15_local0
				},
				{
					infoId = MTXDebugOverlayUtils.StoreBundleInfoIds.FOCUSED_ITEM_ID,
					infoValue = f15_local0
				},
				{
					infoId = MTXDebugOverlayUtils.StoreBundleInfoIds.FOCUSED_ITEM_NAME,
					infoValue = f15_local0
				}
			} )
		end
	end )
	f10_arg0:addEventHandler( "menu_close_all", function ( f14_arg0, f14_arg1 )
		if not f10_arg0._overrideStopVideo then
			Engine[0x3DACD106DDC0D71]()
		end
		if Engine[0x836C8AD984F14F6]() then
			InGameStore.ShowStoreIcon( false )
		end
	end )
	f10_arg0.bindButton:addEventHandler( "button_secondary", function ( f13_arg0, f13_arg1 )
		if not f10_arg0._purchasedAnimation then
			LUI.FlowManager.RequestLeaveMenu( f13_arg0, false, false, true )
		end
	end )
	ACTIONS.ScaleFullscreen( f10_arg0.Darkener )
	ACTIONS.ScaleFullscreen( f10_arg0.Transition )
	local f10_local11 = function ()
		f10_arg0( f10_arg0, f10_arg0.id, f10_arg0.PurchaseButton, f10_arg0, f10_arg0.startPurchaseImmediately )
		f10_arg0.startPurchaseImmediately = false
		f10_arg0.startPurchaseImmediately = false
	end
	
	if f10_arg2.startPurchaseImmediately or f10_local0.startPurchaseImmediately then
		f10_local11()
	end
	if not f10_arg2.isQuickPurchasePopupInPreview then
		if f10_arg0.ItemsGrid then
			f10_arg0.ItemsGrid:FocusFirstItem()
		end
		f10_arg0:saveState()
	end
	f10_arg0:addEventHandler( "restore_focus", function ( f11_arg0, f11_arg1 )
		if f10_arg0.startPurchaseImmediately or f10_arg0.startPurchaseImmediately then
			f10_arg0()
		elseif f10_arg0.isQuickPurchasePopupInPreview then
			f10_arg0.isQuickPurchasePopupInPreview = false
			f10_arg0( f10_arg0, f11_arg1.controller )
		end
	end )
	if f10_arg0._timerValue then
		f10_arg0.LimitedTimeItem:SetupTimeLimit( nil, nil, f10_arg0._timerValue, true, true )
	else
		f10_arg0.LimitedTimeItem:SetAlpha( 0 )
	end
	if CONDITIONS.IsLaze() then
		f10_arg0.WarzoneExclusive:setText( Engine[0xED84C33EC5F01EA]( "STORE_TUJULIET/DISCLAIMER_BUNDLEPREVIEW_LAZE" ) )
	else
		f10_arg0.WarzoneExclusive:setText( Engine[0xED84C33EC5F01EA]( "STORE_TUJULIET/DISCLAIMER_BUNDLEPREVIEW" ) )
	end
	SEQUENCEPRESETS.RegisterAnimation( f10_arg0, LUI.Transition.TransFrom, "OutDepthForward", 0 )
	SEQUENCEPRESETS.RegisterAnimation( f10_arg0, LUI.Transition.TransTo, "InDepthForward", 0 )
	SEQUENCEPRESETS.RegisterAnimation( f10_arg0, LUI.Transition.TransBackFrom, "OutDepthBack", 0 )
	SEQUENCEPRESETS.RegisterAnimation( f10_arg0, LUI.Transition.TransBackTo, "InDepthBack", 0 )
end

function StoreBundlePreview( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "StoreBundlePreview"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	self._sequenceLengths = self._sequenceLengths or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	self.HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	self.HelperBar.id = "HelperBar"
	self.HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
	self.HelperBar:setPriority( 10 )
	self:addElement( self.HelperBar )
	local f1_local2 = self
	local Darkener = nil
	Darkener = LUI.UIImage.new()
	Darkener.id = "Darkener"
	if Engine[0x575E9C5B9AAB6F4]() then
		LAYOUT.AddHandlerAspectRatioScaleAdjustment( self, Darkener, LAYOUT.AspectRatioImageScalePct.STANDARD )
	end
	Darkener:setImage( RegisterMaterial( "v_ui_bg_generic" ), 0 )
	self:addElement( Darkener )
	self.Darkener = Darkener
	
	local Background = nil
	Background = LUI.UIImage.new()
	Background.id = "Background"
	if Engine[0x575E9C5B9AAB6F4]() then
		LAYOUT.AddHandlerAspectRatioScaleAdjustment( self, Background, LAYOUT.AspectRatioImageScalePct.STANDARD )
	end
	Background:SetAlpha( 0, 0 )
	Background:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -960, _1080p * 960, 0, _1080p * 1080 )
	self:addElement( Background )
	self.Background = Background
	
	local DescriptionText = nil
	
	DescriptionText = LUI.UIStyledText.new()
	DescriptionText.id = "DescriptionText"
	DescriptionText:SetRGBFromTable( SWATCHES.text.vTextOffWhite, 0 )
	DescriptionText:SetAlpha( 0.8, 0 )
	DescriptionText:setText( "", 0 )
	DescriptionText:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_MBodyText.font.File ) )
	DescriptionText:SetFontSize( FONT_STYLES.fontStyle_MBodyText.size )
	DescriptionText:SetMinFontSize( FONT_STYLES.fontStyle_MBodyText.minSize )
	DescriptionText:SetWordWrap( true )
	DescriptionText:SetTracking( FONT_STYLES.fontStyle_MBodyText.tracking * _1080p, 0 )
	DescriptionText:SetLeading( FONT_STYLES.fontStyle_MBodyText.leading * _1080p, 0 )
	DescriptionText:SetAlignment( LUI.Alignment.Left )
	DescriptionText:SetOptOutRightToLeftAlignmentFlip( true )
	DescriptionText:SetAutoScroll( AUTOSCROLL.enabled )
	DescriptionText:SetAutoScrollStyle( LUI.UIStyledText.AutoScrollStyle.ScrollV )
	DescriptionText:SetStartupDelay( 1200 )
	DescriptionText:SetLineHoldTime( 0 )
	DescriptionText:SetAnimMoveTime( 1000 )
	DescriptionText:SetAnimMoveSpeed( 50 )
	DescriptionText:SetEndDelay( 1000 )
	DescriptionText:SetCrossfadeTime( 400 )
	DescriptionText:SetFadeInTime( 300 )
	DescriptionText:SetFadeOutTime( 300 )
	DescriptionText:SetMaxVisibleLines( 8 )
	DescriptionText:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 546, _1080p * 497, _1080p * 686 )
	self:addElement( DescriptionText )
	self.DescriptionText = DescriptionText
	
	local f1_local6 = nil
	if CONDITIONS.InFrontend() then
		f1_local6 = MenuBuilder.BuildRegisteredType( "LobbyMembersFooter", {
			controllerIndex = f1_local1
		} )
		f1_local6.id = "LobbyMembersFooter"
		f1_local6:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 150 )
		self:addElement( f1_local6 )
		self.LobbyMembersFooter = f1_local6
	end
	local VerticalScrollbar = nil
	
	VerticalScrollbar = MenuBuilder.BuildRegisteredType( "VerticalScrollbar", {
		controllerIndex = f1_local1
	} )
	VerticalScrollbar.id = "VerticalScrollbar"
	VerticalScrollbar:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -107, _1080p * -96, _1080p * 216, _1080p * 890 )
	self:addElement( VerticalScrollbar )
	self.VerticalScrollbar = VerticalScrollbar
	
	local ItemsGrid = nil
	
	ItemsGrid = LUI.UIGrid.new( {
		maxVisibleRows = 2,
		maxVisibleColumns = 5,
		wrapY = false,
		adjustSizeToContent = true,
		wrapX = false,
		controllerIndex = f1_local1,
		buildChild = function ()
			return MenuBuilder.BuildRegisteredType( "LootItemCardWrapper", {
				controllerIndex = menu
			} )
		end,
		refreshChild = function ( f8_arg0, f8_arg1, f8_arg2 )
			
		end,
		spacingX = _1080p * 0,
		spacingY = _1080p * 0,
		columnWidth = _1080p * 230,
		rowHeight = _1080p * 350
	} )
	ItemsGrid.id = "ItemsGrid"
	ItemsGrid:SetMaxVisibleColumns( 5 )
	ItemsGrid:SetMaxVisibleRows( 2 )
	ItemsGrid:SetRowSpacing( 0 )
	ItemsGrid:setUseStencil( true )
	ItemsGrid:SetWraps( false, nil )
	ItemsGrid:SetWraps( nil, false )
	ItemsGrid:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -1344, _1080p * -130, _1080p * 216, _1080p * 995 )
	self:addElement( ItemsGrid )
	self.ItemsGrid = ItemsGrid
	
	local PurchaseButton = nil
	
	PurchaseButton = MenuBuilder.BuildRegisteredType( "PurchaseBundleButton", {
		controllerIndex = f1_local1
	} )
	PurchaseButton.id = "PurchaseButton"
	PurchaseButton:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 101, _1080p * 501, _1080p * 698, _1080p * 818 )
	self:addElement( PurchaseButton )
	self.PurchaseButton = PurchaseButton
	
	local PlayerDetails = nil
	
	PlayerDetails = MenuBuilder.BuildRegisteredType( "MPPlayerDetails", {
		controllerIndex = f1_local1
	} )
	PlayerDetails.id = "PlayerDetails"
	PlayerDetails:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -596, _1080p * -96, _1080p * 54, _1080p * 114 )
	self:addElement( PlayerDetails )
	self.PlayerDetails = PlayerDetails
	
	local MenuTitle = nil
	
	MenuTitle = MenuBuilder.BuildRegisteredType( "MenuTitle", {
		controllerIndex = f1_local1
	} )
	MenuTitle.id = "MenuTitle"
	MenuTitle.MenuTitle:SetAlpha( 0.15, 0 )
	MenuTitle.MenuTitle:setText( Engine[0xED84C33EC5F01EA]( "MENU/BUNDLE_PREVIEW" ), 0 )
	MenuTitle.Line:SetLeft( 0, 0 )
	MenuTitle:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1020, 0, _1080p * 100 )
	self:addElement( MenuTitle )
	self.MenuTitle = MenuTitle
	
	local TitleImage = nil
	
	TitleImage = LUI.UIImage.new()
	TitleImage.id = "TitleImage"
	TitleImage:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 548, _1080p * 216, _1080p * 442 )
	self:addElement( TitleImage )
	self.TitleImage = TitleImage
	
	local LocalizedTitle = nil
	
	LocalizedTitle = LUI.UIStyledText.new()
	LocalizedTitle.id = "LocalizedTitle"
	LocalizedTitle:SetRGBFromTable( SWATCHES.text.vTextOffWhite, 0 )
	LocalizedTitle:setText( "", 0 )
	LocalizedTitle:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_MHeaderBold.font.File ) )
	LocalizedTitle:SetFontSize( FONT_STYLES.fontStyle_MHeaderBold.size )
	LocalizedTitle:SetMinFontSize( FONT_STYLES.fontStyle_MHeaderBold.minSize )
	LocalizedTitle:SetWordWrap( false )
	LocalizedTitle:SetAlignment( LUI.Alignment.Left )
	LocalizedTitle:SetOptOutRightToLeftAlignmentFlip( true )
	LocalizedTitle:SetAutoScroll( AUTOSCROLL.enabled_default )
	LocalizedTitle:SetAutoScrollStyle( LUI.UIStyledText.AutoScrollStyle.ScrollH )
	LocalizedTitle:SetMaxVisibleLines( 1 )
	LocalizedTitle:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 546, _1080p * 452, _1080p * 490 )
	self:addElement( LocalizedTitle )
	self.LocalizedTitle = LocalizedTitle
	
	local Disclaimer = nil
	
	Disclaimer = LUI.UIStyledText.new()
	Disclaimer.id = "Disclaimer"
	Disclaimer:SetRGBFromTable( SWATCHES.genericButton.description, 0 )
	Disclaimer:SetAlpha( 0, 0 )
	Disclaimer:setText( Engine[0xED84C33EC5F01EA]( "MENU/BUNDLE_TIER_DISCLAIMER" ), 0 )
	Disclaimer:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_MBodyText.font.File ) )
	Disclaimer:SetFontSize( FONT_STYLES.fontStyle_MBodyText.size )
	Disclaimer:SetMinFontSize( FONT_STYLES.fontStyle_MBodyText.minSize )
	Disclaimer:SetWordWrap( true )
	Disclaimer:SetTracking( FONT_STYLES.fontStyle_MBodyText.tracking * _1080p, 0 )
	Disclaimer:SetLeading( FONT_STYLES.fontStyle_MBodyText.leading * _1080p, 0 )
	Disclaimer:SetAlignment( LUI.Alignment.Left )
	Disclaimer:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 138, _1080p * 501, _1080p * 877, _1080p * 941 )
	self:addElement( Disclaimer )
	self.Disclaimer = Disclaimer
	
	local WarzoneExclusive = nil
	
	WarzoneExclusive = LUI.UIStyledText.new()
	WarzoneExclusive.id = "WarzoneExclusive"
	WarzoneExclusive:SetRGBFromTable( SWATCHES.genericButton.description, 0 )
	WarzoneExclusive:setText( Engine[0xED84C33EC5F01EA]( "STORE_TUJULIET/DISCLAIMER_BUNDLEPREVIEW" ), 0 )
	WarzoneExclusive:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_MBodyText.font.File ) )
	WarzoneExclusive:SetFontSize( FONT_STYLES.fontStyle_MBodyText.size )
	WarzoneExclusive:SetMinFontSize( FONT_STYLES.fontStyle_MBodyText.minSize )
	WarzoneExclusive:SetWordWrap( true )
	WarzoneExclusive:SetTracking( FONT_STYLES.fontStyle_MBodyText.tracking * _1080p, 0 )
	WarzoneExclusive:SetLeading( FONT_STYLES.fontStyle_MBodyText.leading * _1080p, 0 )
	WarzoneExclusive:SetAlignment( LUI.Alignment.Left )
	WarzoneExclusive:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 138, _1080p * 534, _1080p * 845, _1080p * 909 )
	self:addElement( WarzoneExclusive )
	self.WarzoneExclusive = WarzoneExclusive
	
	local Lock = nil
	
	Lock = LUI.UIImage.new()
	Lock.id = "Lock"
	Lock:setImage( RegisterMaterial( "ui_streak_warning" ), 0 )
	Lock:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 99, _1080p * 131, _1080p * 840, _1080p * 872 )
	self:addElement( Lock )
	self.Lock = Lock
	
	local Cinematic = nil
	Cinematic = MenuBuilder.BuildRegisteredType( "Cinematic", {
		controllerIndex = f1_local1
	} )
	Cinematic.id = "Cinematic"
	if Engine[0x575E9C5B9AAB6F4]() then
		LAYOUT.AddHandlerAspectRatioScaleAdjustment( self, Cinematic, LAYOUT.AspectRatioImageScalePct.STANDARD )
	end
	Cinematic:SetAlpha( 0, 0 )
	self:addElement( Cinematic )
	self.Cinematic = Cinematic
	
	local VignetteRight = nil
	
	VignetteRight = LUI.UIImage.new()
	VignetteRight.id = "VignetteRight"
	VignetteRight:SetRGBFromTable( SWATCHES.genericMenu.blackBackground, 0 )
	VignetteRight:SetAlpha( 0, 0 )
	VignetteRight:setImage( RegisterMaterial( "gradient_curve" ), 0 )
	VignetteRight:SetAnchorsAndPosition( 0.5, 0.5, 0, 0, _1080p * 1032, _1080p * 565, 0, 0 )
	self:addElement( VignetteRight )
	self.VignetteRight = VignetteRight
	
	local VignetteLeft = nil
	
	VignetteLeft = LUI.UIImage.new()
	VignetteLeft.id = "VignetteLeft"
	VignetteLeft:SetRGBFromTable( SWATCHES.genericMenu.blackBackground, 0 )
	VignetteLeft:SetAlpha( 0, 0 )
	VignetteLeft:SetYRotation( 180, 0 )
	VignetteLeft:setImage( RegisterMaterial( "gradient_curve" ), 0 )
	VignetteLeft:SetAnchorsAndPosition( 0.5, 0.5, 0, 0, _1080p * -565, _1080p * -1032, 0, 0 )
	self:addElement( VignetteLeft )
	self.VignetteLeft = VignetteLeft
	
	local PurchasedMessage = nil
	
	PurchasedMessage = LUI.UIStyledText.new()
	PurchasedMessage.id = "PurchasedMessage"
	PurchasedMessage:SetRGBFromTable( SWATCHES.BattlePass.Free, 0 )
	PurchasedMessage:SetAlpha( 0, 0 )
	PurchasedMessage:SetScale( 0.5, 0 )
	PurchasedMessage:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( "MENU/BUNDLE_PURCHASED" ) ), 0 )
	PurchasedMessage:setCaseStyle( LUI.CaseStyle.Uppercase )
	PurchasedMessage:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_XLHeaderBold.font.File ) )
	PurchasedMessage:SetFontSize( FONT_STYLES.fontStyle_XLHeaderBold.size )
	PurchasedMessage:SetMinFontSize( FONT_STYLES.fontStyle_XLHeaderBold.minSize )
	PurchasedMessage:SetWordWrap( true )
	PurchasedMessage:SetAlignment( LUI.Alignment.Center )
	PurchasedMessage:SetAnchorsAndPosition( 0, 0, 0.5, 0.5, 0, 0, _1080p * -35, _1080p * 35 )
	self:addElement( PurchasedMessage )
	self.PurchasedMessage = PurchasedMessage
	
	local Transition = nil
	
	Transition = LUI.UIImage.new()
	Transition.id = "Transition"
	Transition:SetRGBFromTable( SWATCHES.genericMenu.blackBackground, 0 )
	Transition:SetAlpha( 0, 0 )
	self:addElement( Transition )
	self.Transition = Transition
	
	local LimitedTimeItem = nil
	
	LimitedTimeItem = MenuBuilder.BuildRegisteredType( "LimitedTimeItem", {
		controllerIndex = f1_local1
	} )
	LimitedTimeItem.id = "LimitedTimeItem"
	LimitedTimeItem:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 396, _1080p * 140, _1080p * 170 )
	self:addElement( LimitedTimeItem )
	self.LimitedTimeItem = LimitedTimeItem
	
	local f1_local23 = nil
	Transition:RegisterAnimationSequence( "DefaultSequence", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.DefaultSequence = function ()
		menu:AnimateSequence( "DefaultSequence" )
	end
	
	self._sequenceLengths.DefaultSequence = 200
	local f1_local24 = nil
	Cinematic:RegisterAnimationSequence( "BundlePurchaseShow", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	PurchasedMessage:RegisterAnimationSequence( "BundlePurchaseShow", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 6,
			duration = 700,
			property = TWEEN_PROPERTY.Scale
		},
		{
			value = 1,
			duration = 700,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.snap
		},
		{
			value = 1,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.outQuadratic
		},
		{
			value = 0,
			duration = -28,
			property = TWEEN_PROPERTY.Scale,
			easing = LUI.EASING.outQuadratic
		},
		{
			value = -2.3534382792352958E-185,
			duration = -58,
			property = TWEEN_PROPERTY.Scale,
			easing = LUI.EASING.outQuadratic
		},
		{
			value = 5.297218497E-315,
			duration = 130,
			property = TWEEN_PROPERTY.Scale
		}
	} )
	self._sequences.BundlePurchaseShow = function ()
		menu:AnimateSequence( "BundlePurchaseShow" )
		menu:AnimateSequence( "BundlePurchaseShow" )
	end
	
	self._sequenceLengths.BundlePurchaseShow = 1000
	local f1_local25 = nil
	Cinematic:RegisterAnimationSequence( "BundlePurchaseHide", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	VignetteRight:RegisterAnimationSequence( "BundlePurchaseHide", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	VignetteLeft:RegisterAnimationSequence( "BundlePurchaseHide", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	PurchasedMessage:RegisterAnimationSequence( "BundlePurchaseHide", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.BundlePurchaseHide = function ()
		menu:AnimateSequence( "BundlePurchaseHide" )
		menu:AnimateSequence( "BundlePurchaseHide" )
		menu:AnimateSequence( "BundlePurchaseHide" )
		menu:AnimateSequence( "BundlePurchaseHide" )
	end
	
	self._sequenceLengths.BundlePurchaseHide = 0
	local f1_local26 = nil
	Disclaimer:RegisterAnimationSequence( "TierDisclaimer", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Text,
			value = Engine[0xED84C33EC5F01EA]( "MENU/BUNDLE_TIER_DISCLAIMER" )
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	Lock:RegisterAnimationSequence( "TierDisclaimer", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 99
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 131
		}
	} )
	self._sequences.TierDisclaimer = function ()
		menu:AnimateSequence( "TierDisclaimer" )
		menu:AnimateSequence( "TierDisclaimer" )
	end
	
	self._sequenceLengths.TierDisclaimer = 0
	local f1_local27 = nil
	Disclaimer:RegisterAnimationSequence( "Purchased", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Text,
			value = Engine[0xED84C33EC5F01EA]( "MENU/BUNDLE_ADDED_TO_INVENTORY" )
		}
	} )
	Lock:RegisterAnimationSequence( "Purchased", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 99
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 131
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 840
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 872
		}
	} )
	self._sequences.Purchased = function ()
		menu:AnimateSequence( "Purchased" )
		menu:AnimateSequence( "Purchased" )
	end
	
	self._sequenceLengths.Purchased = 0
	local f1_local28 = nil
	VignetteRight:RegisterAnimationSequence( "WideAspectRatioFrame", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	VignetteLeft:RegisterAnimationSequence( "WideAspectRatioFrame", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.WideAspectRatioFrame = function ()
		menu:AnimateSequence( "WideAspectRatioFrame" )
		menu:AnimateSequence( "WideAspectRatioFrame" )
	end
	
	self._sequenceLengths.WideAspectRatioFrame = 0
	local f1_local29 = LUI.UIScrollbar.new
	local f1_local30 = {
		direction = LUI.DIRECTION.vertical,
		eventListener = VerticalScrollbar,
		startCap = VerticalScrollbar.startCap,
		endCap = VerticalScrollbar.endCap,
		sliderArea = VerticalScrollbar.sliderArea
	}
	local f1_local31 = VerticalScrollbar.sliderArea
	if f1_local31 then
		f1_local31 = VerticalScrollbar.sliderArea.slider
	end
	f1_local30.slider = f1_local31
	f1_local31 = VerticalScrollbar.sliderArea
	if f1_local31 then
		f1_local31 = VerticalScrollbar.sliderArea.fixedSizeSlider
	end
	f1_local30.fixedSizeSlider = f1_local31
	ItemsGrid:AddScrollbar( f1_local29( f1_local30 ) )
	self.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_secondary",
		helper_text = Engine[0xED84C33EC5F01EA]( "LUA_MENU/BACK" )
	} )
	self.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_primary",
		helper_text = Engine[0xED84C33EC5F01EA]( "LUA_MENU/SELECT" )
	} )
	if not self.bindButton then
		local f1_local32 = LUI.UIBindButton.new()
		f1_local32.id = "selfBindButton"
		self:addElement( f1_local32 )
		self.bindButton = f1_local32
	end
	f0_local0( self, f1_local1, controller )
	ACTIONS.AnimateSequence( self, "DefaultSequence" )
	return self
end

MenuBuilder.registerType( "StoreBundlePreview", StoreBundlePreview )
LockTable( _M )
