-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
BROKEN_ARROW = BROKEN_ARROW or {}
BROKEN_ARROW.ELEMENT_DATA = {}
BROKEN_ARROW.MAXIMUM_ELEMENT_STATES = 3
BROKEN_ARROW.MAXIMUM_ALLY_INDEXES = 4
BROKEN_ARROW.MAXIMUM_ENEMY_INDEXES = 4
BROKEN_ARROW.MINIMUM_ELEMENTS = 3
BROKEN_ARROW.ELEMENT_STATES_BITS = 4
BROKEN_ARROW.ALLY_INDEXES_BITS = 2
BROKEN_ARROW.ELEMENT_COUNT_BITS = 3
BROKEN_ARROW.CQ_CHALLENGE_REF = "iw9_ch_br_complete_champions_quest_S"
BROKEN_ARROW.CQ_CHALLENGE_REF_DELTA = "iw9_ch_br_complete_champions_quest_delta_S"
BROKEN_ARROW.NUM_STREAK_FOR_TOKEN = 5
BROKEN_ARROW.IW9_CHAMPIONS_QUEST_TOKEN_ID_COMBINED = "21459"
BROKEN_ARROW.PLAYLISTS_WITH_CQ_TRACKING_COMBINED = {
	nil,
	-41,
	-40,
	-39,
	129,
	39,
	-19,
	-14,
	134
}
BROKEN_ARROW.PLAYLISTS_WITH_CQ_TRACKING_COMBINED_DEV = {
	nil,
	-39,
	129,
	-40,
	-41,
	130,
	-21,
	131,
	132,
	133,
	-14,
	134
}
BROKEN_ARROW.aarStates = {
	INTO = 1,
	OUTRO = 2
}
BROKEN_ARROW.InitializeElementIcons = function ()
	if 0 < #BROKEN_ARROW.ELEMENT_DATA then
		return 
	end
	local f7_local0 = Engine[0x6093D047200548]( 0x41DB1832924CC00 )
	f7_local0 = f7_local0[0x3E6604B8991BA7F]
	local f7_local1 = 0xC5D658248B22217
	if not f7_local0 or #f7_local0 == 0 then
		return 
	end
	for f7_local2 = 1, #f7_local0, 1 do
		local f7_local5 = nil
		if f7_local0[f7_local2][0x691D5826A3CBE3F] then
			f7_local5 = Engine[0x6093D047200548]( f7_local1 .. f7_local0[f7_local2][0x691D5826A3CBE3F] )
			if f7_local5 and f7_local5[0xAF6E427751D019A] then
				BROKEN_ARROW.ELEMENT_DATA[f7_local5[0xAF6E427751D019A]] = {}
				BROKEN_ARROW.ELEMENT_DATA[f7_local5[0xAF6E427751D019A]].icon = f7_local5[0xF79326465BE61B6]
			end
		end
	end
end

BROKEN_ARROW.InitializeElementList = function ()
	local f6_local0 = {}
	local f6_local1 = Dvar[0x54084D7CA2317BB]( 0x87FBE54205F4583 ) or "ber plu tri"
	if not f6_local1 or #f6_local1 < BROKEN_ARROW.MINIMUM_ELEMENTS then
		return 
	end
	for f6_local5 in string.gmatch( f6_local1, "%S+" ) do
		if not BROKEN_ARROW.ELEMENT_DATA[f6_local5] then
			return {}
		end
		table.insert( f6_local0, f6_local5 )
	end
	return f6_local0
end

BROKEN_ARROW.CONTRACT_STATE = {
	LOCATE_ELEMENTS = 2,
	DEFEND_TARGET = 6,
	FAILED = 1,
	ARM_TARGET = 5,
	DEPOSIT_ELEMENTS = 4,
	COMPLETED = 7,
	WAITING_BOMB = 3
}
BROKEN_ARROW.CONTRACT_STATE_TEXT = {
	[BROKEN_ARROW.CONTRACT_STATE.LOCATE_ELEMENTS] = 0x9995B9954498C4,
	[BROKEN_ARROW.CONTRACT_STATE.WAITING_BOMB] = 0xFF7110B8F1F36CD,
	[BROKEN_ARROW.CONTRACT_STATE.DEPOSIT_ELEMENTS] = 0x2C7BB004C6DF39A,
	[BROKEN_ARROW.CONTRACT_STATE.ARM_TARGET] = 0x4EFB4BD90BBDD3E,
	[BROKEN_ARROW.CONTRACT_STATE.DEFEND_TARGET] = 0x8F62C9E9927B8AB
}
BROKEN_ARROW.ELEMENT_STATUS = {
	AVAILABLE = 3,
	DEPOSITED_4TH = 9,
	NUMBER = 10,
	LOCATING = 2,
	TRIGGERED = 11,
	DEPOSITED_3RD = 8,
	UNDISCOVERED = 1,
	DEPOSITED_2ND = 7,
	DEPOSITED_1ST = 6,
	ACQUIRED_ENEMY = 5,
	ACQUIRED_FRIENDLY = 4
}
BROKEN_ARROW.ELEMENT_STATUS_TEXT = {
	[BROKEN_ARROW.ELEMENT_STATUS.UNDISCOVERED] = "Undiscovered",
	[BROKEN_ARROW.ELEMENT_STATUS.LOCATING] = "Locating",
	[BROKEN_ARROW.ELEMENT_STATUS.AVAILABLE] = "Available",
	[BROKEN_ARROW.ELEMENT_STATUS.ACQUIRED_FRIENDLY] = "Acquired_Friendly",
	[BROKEN_ARROW.ELEMENT_STATUS.ACQUIRED_ENEMY] = "Acquired_Enemy",
	[BROKEN_ARROW.ELEMENT_STATUS.DEPOSITED_1ST] = "Deposited",
	[BROKEN_ARROW.ELEMENT_STATUS.DEPOSITED_2ND] = "Deposited",
	[BROKEN_ARROW.ELEMENT_STATUS.DEPOSITED_3RD] = "Deposited",
	[BROKEN_ARROW.ELEMENT_STATUS.DEPOSITED_4TH] = "Deposited",
	[BROKEN_ARROW.ELEMENT_STATUS.NUMBER] = "Number",
	[BROKEN_ARROW.ELEMENT_STATUS.TRIGGERED] = "Triggered"
}
BROKEN_ARROW.IsDepositedElementStatus = function ( f5_arg0 )
	local f5_local0
	if f5_arg0 < BROKEN_ARROW.ELEMENT_STATUS.DEPOSITED_1ST or f5_arg0 > BROKEN_ARROW.ELEMENT_STATUS.DEPOSITED_4TH then
		f5_local0 = false
	else
		f5_local0 = true
	end
	return f5_local0
end

BROKEN_ARROW.ShouldShowChampionsQuestRewardsAAR = function ( f4_arg0 )
	if not CONDITIONS.IsChampionsQuestFeatureEnabled() then
		return false
	elseif Dvar[0x9E5BE3B4BBA4E0E]( "lui_force_cq_rewards" ) then
		return true
	elseif Dvar[0x9E5BE3B4BBA4E0E]( "lui_force_disable_cq_rewards_parade" ) then
		return false
	end
	local f4_local0 = DataSources.inGame.MP.brPlayerPosition:GetValue( f4_arg0 ) == 1
	local f4_local1 = DataModel[0x614D394F6F9A18D]( DataSources.inGame.shouldShowCQRewards:GetModel( f4_arg0 ) ) == true
	local f4_local2 = DataSources.inGame.player.BRData.championsQuestData.missionSuccess:GetValue( f4_arg0 ) == 1
	local f4_local3
	if f4_local0 then
		f4_local3 = f4_local0
	elseif f4_local1 then
		f4_local3 = f4_local1
	else
		f4_local3 = f4_local2
	end
	return f4_local3
end

BROKEN_ARROW.GetChampionsQuestRewards = function ()
	local f3_local0 = SEASON.GetCurrentSeason()
	local f3_local1 = BROKEN_ARROW.CQ_CHALLENGE_REF .. f3_local0
	if CONDITIONS.IsMapDelta() then
		f3_local1 = BROKEN_ARROW.CQ_CHALLENGE_REF_DELTA .. f3_local0
	end
	local f3_local2 = Challenge.GetRewardFromID( Challenge.GetIDFromRef( f3_local1, AEKinds.IW9_AE_KIND_BR.ID ), AEKinds.IW9_AE_KIND_BR.ID )
	if not f3_local2 or #f3_local2 == 0 then
		return {}
	end
	local f3_local3 = LUI.Split( tostring( f3_local2 ), "|" )
	f3_local2 = {}
	for f3_local4 = 1, #f3_local3, 1 do
		table.insert( f3_local2, Challenge.GetLootReward( f3_local3[f3_local4] ) )
	end
	return f3_local2
end

BROKEN_ARROW.GetCQCombinedProgressData = function ( f2_arg0 )
	local f2_local0 = {}
	local f2_local1 = OnlineChallenges[0x1EEE6570EF4BB8B]( f2_arg0, BROKEN_ARROW.IW9_CHAMPIONS_QUEST_TOKEN_ID_COMBINED )
	if not f2_local1 then
		return f2_local0
	end
	local f2_local2 = f2_local1.progress.progress
	local f2_local3 = f2_local1.progress.sub_progress
	local f2_local4 = {}
	local f2_local5
	if f2_local2 == nil or 0 >= f2_local2 then
		f2_local5 = false
	else
		f2_local5 = true
	end
	f2_local4.hasCQToken = f2_local5
	if f2_local3 ~= nil and not f2_local3 then
		f2_local5 = f2_local3
	else
		f2_local5 = 0
	end
	f2_local4.winStreakCount = f2_local5
	return f2_local4
end

BROKEN_ARROW.ShouldShowCQTrackerForPlaylist = function ()
	if Engine[0x2DA54CF5D6B7F02]() and Dvar[0x9E5BE3B4BBA4E0E]( 0x1655EC8FA84FDA8 ) then
		return true
	end
	local f1_local0 = Lobby[0xB92DA1948EDB47D]( Lobby.PartyUIData.PLAYLIST_ID )
	local f1_local1 = BROKEN_ARROW.PLAYLISTS_WITH_CQ_TRACKING_COMBINED
	if Engine[0x499B17212705D5F]() == "DEV" then
		f1_local1 = BROKEN_ARROW.PLAYLISTS_WITH_CQ_TRACKING_COMBINED_DEV
	end
	for f1_local5, f1_local6 in pairs( f1_local1 ) do
		if f1_local6 == f1_local0 then
			return true
		end
	end
	return false
end

