-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
module( ..., package.seeall )
require( "ui.generated.widgets.receiverwithattachments" )
local f0_local0 = function ( f7_arg0, f7_arg1, f7_arg2 )
	f7_arg0.Receiver:SetAlpha( 0 )
	local f7_local0 = RegisterMaterial( f7_arg2 )
	if 1 < Engine[0x5B4AB50CF5D1DDD]( f7_local0 ) then
		f7_arg0.Icon:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -128, 128, -64, 64 )
	else
		f7_arg0.Icon:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -64, 64, -64, 64 )
	end
	if f7_arg2 == "white" then
		f7_arg0.Icon:SetAlpha( 0 )
	else
		f7_arg0.Icon:SetAlpha( 1 )
		f7_arg0.Icon:setImage( f7_local0 )
	end
end

local f0_local1 = function ( f6_arg0, f6_arg1, f6_arg2, f6_arg3 )
	if not WEAPON.IsBulletWeapon( WEAPON.GetWeaponClass( f6_arg3.weapon ) ) then
		local f6_local0 = WEAPON.GetBWImage( f6_arg3.weapon )
		local f6_local1 = WEAPON.GetVariantOverridenIcon( f6_arg3.weapon, f6_arg3.variantID )
		if f6_local1 and 0 < #f6_local1 then
			f6_local0 = f6_local1
		end
		f6_arg0.Receiver:SetAlpha( 0 )
		f0_local0( f6_arg0, f6_arg1, f6_local0 )
		return 
	else
		f6_arg0:PerformUpdate( f6_arg1, {
			isInteractive = f6_arg2,
			attachmentsData = DYN_ATTACHMENT.GetDynamicAttachmentsTable( WEAPON.GetWeaponModelName( f6_arg3.weapon, f6_arg3, {
				includeStickers = true,
				includeAttachments = true,
				keepAkimbo = true,
				showSWhiskeyMag = true,
				includeCamos = true,
				controllerIndex = f6_arg1
			} ) ),
			weaponRef = f6_arg3.weapon
		} )
	end
end

local f0_local2 = function ( f5_arg0, f5_arg1, f5_arg2, f5_arg3 )
	f5_arg0:UpdateWithWeaponTable( f5_arg1, f5_arg2, WEAPON.GetModification( f5_arg1, WEAPON.GetBlueprintBaseRefbyID( f5_arg3 ), f5_arg3 ) )
end

local f0_local3 = function ( f4_arg0, f4_arg1, f4_arg2 )
	local f4_local0 = f4_arg2.isInteractive
	local f4_local1 = f4_arg2.attachmentsData
	local f4_local2 = f4_arg2.weaponRef
	local f4_local3 = f4_arg2.weaponFullName
	if f4_local2 == nil or #f4_local2 == 0 or f4_local2 == "none" then
		return 
	elseif WEAPON.GetDynamicWeaponEnableValue( f4_local2 ) and DYN_ATTACHMENT.IsDynamicAttachmentIconsEnabled() then
		f4_arg0.Receiver:SetAlpha( 1 )
		f4_arg0.Icon:SetAlpha( 0 )
		f4_arg0.Receiver:PerformUpdate( f4_arg1, f4_local0, f4_local1, f4_local2 )
		local f4_local4 = WEAPON.GetDynamicWeaponAnimationSeq( f4_local2 )
		if f4_local4 and 0 < #f4_local4 then
			DYN_ATTACHMENT.PlayDynamicAttachmentAnimation( f4_arg0, nil, f4_local4, "Receiver", true )
		end
	else
		f4_arg0.Receiver:SetAlpha( 0 )
		f4_local2 = WEAPON.StripSuffix( f4_local2, "_mp" )
		local f4_local4 = WEAPON.GetBWImage( f4_local2 )
		local f4_local5 = WEAPON.GetWeaponVariantID( f4_local2, f4_local3 )
		if f4_local5 and 0 < tonumber( f4_local5 ) and WEAPON.GetBaseRef( f4_local2 ) then
			local f4_local6 = Engine[0x756D55D24F7B53]( f4_local2 )
			f4_local6 = f4_local6[tonumber( f4_local5 )]
			if f4_local6 and f4_local6[0x6DDC9E0081A8540] ~= "" then
				f4_local4 = f4_local6[0x6DDC9E0081A8540]
			end
		end
		f0_local0( f4_arg0, f4_arg1, f4_local4 )
	end
end

function PostLoadFunc( f3_arg0, f3_arg1 )
	f3_arg0.PerformUpdate = f0_local0
	f3_arg0.UpdateWithWeaponTable = f0_local0
	f3_arg0.UpdateWithLootID = f0_local0
	f3_arg0.UpdateRegularIcon = f0_local0
end

States = {
	[0xAD14C6E7156B923] = function ( f2_arg0, f2_arg1 )
		f2_arg0[0x49D85F0EF1CEC84] = {
			[0xEF6C3AB55C07BEF] = DefaultSequence,
			[0xD876936D6E02964] = arMike4,
			[0xBADA5168620C5FE] = default,
			[0x6311207286093BE] = arKilo47,
			[0xE4BF43904159B37] = piGolf21,
			[0x1D3D84F2BEDBB73] = piDecho,
			[0x3C006160A2832E1] = piPapa320,
			[0x90C2F06EB78814] = piMike1911,
			[0xC9BD4D79F0B62DB] = piCpapa,
			[0x3E6671BCFAADF7B] = smAugolf,
			[0x5D88396361B9FE7] = smMpapa5,
			[0xF7444B4068D59F] = smBeta,
			[0x5D88596361BA34D] = smMpapa7,
			[0x6E1B76B24D2971C] = smPapa90,
			[0xB32E79309BF6EBE] = smUzulu,
			[0xA2D832322290E48] = arAsierra12,
			[0xF96805975280972] = arFalima,
			[0x1D3855951DB12E8] = arFalpha,
			[0x60327299C26E85B] = arKilo433,
			[0x3A20EE82BAC1FF1] = arMcharlie,
			[0x8C571F81BBA7D5B] = arScharlie,
			[0xD2B9B17668D0E7C] = shCharlie725,
			[0xEED936295E3DF05] = shDpapa12,
			[0xBD1454072D6F1FD] = shOscar12,
			[0xB29A79B7EAEA1EB] = shRomeo870,
			[0x5190E120D2E7771] = lmLima86,
			[0xC14C2D92D565517] = lmPkilo,
			[0x30C624840D88357] = lmKilo121,
			[0xAF6352318AE2B26] = lmMgolf34,
			[0xA359E11E3946A5] = snAlpha50,
			[0xC25B4721499E77E] = snHdromeo,
			[0x441D6AD2F790BD2] = snDelta,
			[0x8E9EAA314E9758C] = snKilo98,
			[0xF7126C6DADEEAC3] = snMike14,
			[0x9DF1A6456F64F37] = snSbeta,
			[0x5659A6A9A006988] = snCrossbow,
			[0x238AAC48C36A6C] = arSierra552,
			[0x4792D702F59ACA6] = smSmgolf45,
			[0xC5DDE8CD60D7274] = shMike26,
			[0xF625135128CE108] = snSksierra,
			[0x943FE2C6B0D52BB] = piMike9,
			[0xAF6332318AE27C0] = lmMgolf36,
			[0x3FBB1E08DB11481] = lmMkilo3,
			[0x6FE4050EDB31AC6] = smVictor,
			[0x9D39EAC1BAD797] = arGalima,
			[0xA8B650030B7A324] = meKnife,
			[0x3B82C15357EA272] = snXmike109,
			[0x9C5366368D729A9] = meKalisticks,
			[0xE3284C0E2E9E666] = arAnovember94,
			[0xE2128A109FB5F40] = smCharlie9,
			[0xCD9127AD2B85C58] = lmSierrax
		}
		f2_arg0[0xD97E59A206E4A54] = {
			[0x5190E120D2E7771] = 0,
			[0x30C624840D88357] = 0,
			[0xC14C2D92D565517] = 0,
			[0x1D3855951DB12E8] = 0,
			[0x3C006160A2832E1] = 0,
			[0x5D88396361B9FE7] = 0,
			[0x6311207286093BE] = 0,
			[0x90C2F06EB78814] = 0,
			[0xC25B4721499E77E] = 0,
			[0xEED936295E3DF05] = 0,
			[0xBADA5168620C5FE] = 0,
			[0xBD1454072D6F1FD] = 0,
			[0xB32E79309BF6EBE] = 0,
			[0xE4BF43904159B37] = 0,
			[0x238AAC48C36A6C] = 0,
			[0x3A20EE82BAC1FF1] = 0,
			[0x8E9EAA314E9758C] = 0,
			[0xF7444B4068D59F] = 0,
			[0x5659A6A9A006988] = 0,
			[0x9DF1A6456F64F37] = 0,
			[0xF7126C6DADEEAC3] = 0,
			[0xC5DDE8CD60D7274] = 0,
			[0xA8B650030B7A324] = 0,
			[0xEF6C3AB55C07BEF] = 0,
			[0xF625135128CE108] = 0,
			[0x441D6AD2F790BD2] = 0,
			[0x60327299C26E85B] = 0,
			[0x3E6671BCFAADF7B] = 0,
			[0x3FBB1E08DB11481] = 0,
			[0x9D39EAC1BAD797] = 0,
			[0x4792D702F59ACA6] = 0,
			[0x1D3D84F2BEDBB73] = 0,
			[0xD876936D6E02964] = 0,
			[0xC9BD4D79F0B62DB] = 0,
			[0x6FE4050EDB31AC6] = 0,
			[0x9C5366368D729A9] = 0,
			[0xB29A79B7EAEA1EB] = 0,
			[0x943FE2C6B0D52BB] = 0,
			[0xE3284C0E2E9E666] = 0,
			[0xE2128A109FB5F40] = 0,
			[0xA2D832322290E48] = 0,
			[0xCD9127AD2B85C58] = 0,
			[0xD2B9B17668D0E7C] = 0,
			[0x6E1B76B24D2971C] = 0,
			[0xF96805975280972] = 0,
			[0x5D88596361BA34D] = 0,
			[0xAF6352318AE2B26] = 0,
			[0x8C571F81BBA7D5B] = 0,
			[0xAF6332318AE27C0] = 0,
			[0xA359E11E3946A5] = 0,
			[0x3B82C15357EA272] = 0
		}
	end
}
function WeaponWithAttachments( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = MenuBuilder
	local f1_local2 = TWEEN_PROPERTY
	local f1_local3 = f1_local0.UIElement.new()
	f1_local3:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 256, 0, 128 )
	f1_local3.id = "WeaponWithAttachments"
	f1_local3[0xBD5D934D3CD91E5] = States
	local f1_local4
	if f1_arg1 then
		f1_local4 = f1_arg1
	else
		f1_local4 = f1_arg1.controllerIndex
	end
	f1_local4 = f1_local0.ValidateControllerIndex( f1_local3, f1_local4 )
	local f1_local5 = nil
	f1_local5 = f1_local0.UIImage.new()
	f1_local5[0x8B72E07B55C3AC0] = "Icon"
	f1_local5:setImage( RegisterMaterial( 0x3214ADB8B9E14F6 ), 0 )
	f1_local3:addElement( f1_local5 )
	f1_local3[0xBFF4CC56C2092F0] = f1_local5
	local f1_local6 = nil
	f1_local6 = f1_local1.BuildRegisteredType( 0x5F260A02002A1F2, {
		controllerIndex = f1_local4
	} )
	f1_local6[0x8B72E07B55C3AC0] = "Receiver"
	f1_local6:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
	f1_local3:addElement( f1_local6 )
	f1_local3[0x5E1AD671457EA90] = f1_local6
	PostLoadFunc( f1_local3, f1_local4, f1_arg1 )
	return f1_local3
end

MenuBuilder.registerType( 0xCCA1DA53AF2CBB1, WeaponWithAttachments )
LockTable( _M )
