-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
module( ..., package.seeall )
require( "ui.widgets.PlayMenuButton" )
require( "ui.widgets.EquippedItemPanel" )
local f0_local0 = 52 * _1080p
local f0_local1 = 0 * _1080p
local f0_local2 = function ( f8_arg0, f8_arg1, f8_arg2 )
	local f8_local0 = IsLanguageArabic()
	local f8_local1 = f8_arg0:GetDecoratorSlot( f8_arg2, not f8_arg2, f8_local0 )
	local f8_local2 = (f8_local1.top + f8_local1.bottom) / 2
	if f8_local0 then
		local f8_local3 = f8_arg0.UpgradeLeft
		local f8_local4 = f8_arg0._usingProMode and f8_arg0.UpgradeRight or nil
		local f8_local5 = LAYOUT.GetElementHeight( f8_local3 )
		local f8_local6 = LAYOUT.GetElementWidth( f8_local3 )
		local f8_local7 = f8_local1.left
		f8_local3:SetAnchorsAndPosition( 0, 1, 0, 1, f8_local7, f8_local7 + f8_local6, f8_local2 - f8_local5 / 2, f8_local2 + f8_local5 / 2, f8_arg1 )
		if f8_local4 then
			f8_local5 = LAYOUT.GetElementHeight( f8_local4 )
			f8_local6 = LAYOUT.GetElementWidth( f8_local4 )
			if f8_arg2 then
				f8_local7 = LAYOUT.GetElementWidth( f8_local3.TextInfo )
				if not f8_local7 then
				
				else
					local f8_local8 = f8_local1.left + f8_arg0._iconOffset + f8_local7
					f8_local4:SetAnchorsAndPosition( 0, 1, 0, 1, f8_local8, f8_local8 + f8_local6, f8_local2 - f8_local5 / 2, f8_local2 + f8_local5 / 2, f8_arg1 )
				end
			end
			f8_local7 = 0
		end
	else
		local f8_local3 = f8_arg0.UpgradeLeft
		local f8_local4 = f8_arg0._usingProMode and f8_arg0.UpgradeRight or nil
		if f8_local4 then
			local f8_local5 = f8_local4
			f8_local4 = f8_local3
			f8_local3 = f8_local5
		end
		local f8_local5 = LAYOUT.GetElementHeight( f8_local3 )
		local f8_local6 = LAYOUT.GetElementWidth( f8_local3 )
		local f8_local7 = f8_local1.right
		f8_local3:SetAnchorsAndPosition( 0, 1, 0, 1, f8_local7 - f8_local6, f8_local7, f8_local2 - f8_local5 / 2, f8_local2 + f8_local5 / 2, f8_arg1 )
		if f8_local4 then
			f8_local5 = LAYOUT.GetElementHeight( f8_local4 )
			f8_local6 = LAYOUT.GetElementWidth( f8_local4 )
			if f8_arg2 then
				f8_local7 = LAYOUT.GetElementWidth( f8_local3.TextInfo )
				if not f8_local7 then
				
				else
					local f8_local8 = f8_local1.right - f8_arg0._iconOffset - f8_local7
					f8_local4:SetAnchorsAndPosition( 0, 1, 0, 1, f8_local8 - f8_local6, f8_local8, f8_local2 - f8_local5 / 2, f8_local2 + f8_local5 / 2, f8_arg1 )
				end
			end
			f8_local7 = 0
		end
	end
end

local f0_local3 = function ( f7_arg0, f7_arg1 )
	local f7_local0 = PlayerData[0x8B73907B55C4D71]( f7_arg1, LOADOUT.GetLoadoutStatsGroup() )
	f7_local0 = f7_local0.squadMembers
	local f7_local1 = RegisterMaterial( SUPER.GetImage( f7_local0.fieldUpgrades[0]:get() ) )
	local f7_local2 = f7_local0.fieldUpgrades[1]:get()
	local f7_local3 = RegisterMaterial( SUPER.GetImage( f7_local2 ) )
	if CONDITIONS.IsThirdGameMode() then
		local f7_local4 = f7_local0.cpFieldUpgrade:get()
		f7_local2 = Cac.superNoneValue
		f7_local1 = RegisterMaterial( MUNITION.GetRoleImage( f7_local4 ) )
		f7_local3 = f7_local1
	end
	local f7_local5
	if f7_local2 ~= Cac.superNoneValue then
		f7_local5 = not MLG.IsCDLActive( f7_arg1 )
	else
		f7_local5 = false
	end
	f7_arg0._usingProMode = f7_local5
	f7_arg0.UpgradeLeft.Image:setImage( f7_local1 )
	f7_arg0.UpgradeRight.Image:setImage( f7_local3 )
	f7_arg0.UpgradeLeft.TextInfo:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU_MP/FIELDUPGRADE_BTN_LEFT_HEADER" ) )
	f7_arg0.UpgradeRight.TextInfo:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU_MP/FIELDUPGRADE_BTN_RIGHT_HEADER" ) )
	if not f7_arg0._usingProMode then
		f7_arg0.UpgradeRight:SetVisibility( LUI.Visibility.Hidden )
	end
end

local f0_local4 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PlayMenuButton:SetContainer( f2_arg0 )
	f2_arg0.PlayMenuButton:SetHeightFunction( function ( f6_arg0, f6_arg1 )
		f2_arg0:SetTop( 0, f6_arg1 )
		f2_arg0:SetBottom( f6_arg0, f6_arg1 )
		f2_arg0.PlayMenuButton:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0, f6_arg1 )
	end )
	f2_arg0.PlayMenuButton:InheritAccordionAPI( f2_arg0 )
	f2_arg0.SetNewItemNotificationVisible = function ( f5_arg0, f5_arg1 )
		local f5_local0 = assert
		local f5_local1
		if f5_arg1 ~= true and f5_arg1 ~= false then
			f5_local1 = false
		else
			f5_local1 = true
		end
		f5_local0( f5_local1 )
		f5_arg0.PlayMenuButton:SetNewItemNotificationVisible( f5_arg1 )
		f2_arg0( f5_arg0, 0, f5_arg0:IsExpanded() )
	end
	
	f2_arg0.UpgradeLeft.TextInfo:SetVisibility( LUI.Visibility.Hidden )
	f2_arg0.UpgradeRight.TextInfo:SetVisibility( LUI.Visibility.Hidden )
	f2_arg0._usingProMode = false
	local f2_local0 = f2_arg0.UpgradeRight:GetCurrentAnchorsAndPositions()
	f2_local0 = f2_local0.right
	local f2_local1 = f2_arg0.UpgradeLeft:GetCurrentAnchorsAndPositions()
	f2_arg0._iconOffset = f2_local0 - f2_local1.right
	f0_local0( f2_arg0, f2_arg1 )
	f2_arg0:addEventHandler( "accordion_over", function ( f4_arg0, f4_arg1 )
		if f4_arg1.expanded then
			f2_arg0( f2_arg0, f4_arg1.duration, true )
			ACTIONS.AnimateSequence( f4_arg0.UpgradeLeft, "Maximize" )
			ACTIONS.AnimateSequence( f4_arg0.UpgradeRight, "Maximize" )
		end
	end )
	f2_arg0:addEventHandler( "accordion_up", function ( f3_arg0, f3_arg1 )
		if not f3_arg1.expanded then
			f2_arg0( f2_arg0, f3_arg1.duration, false )
			ACTIONS.AnimateSequence( f3_arg0.UpgradeLeft, "Minimize" )
			ACTIONS.AnimateSequence( f3_arg0.UpgradeRight, "Minimize" )
		end
	end )
	if f2_arg0._usingProMode then
		f2_arg0:SetDecoratorWidths( f0_local0 * 2 + f0_local0 + 8 * _1080p, 0, 0 )
	else
		f2_arg0:SetDecoratorWidths( f0_local0 + 8 * _1080p, 0, 0 )
	end
	f0_local0( f2_arg0, 0, false )
end

function EditFieldUpgradesButton( menu, controller )
	local self = LUI.UIButton.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 400 * _1080p, 0, 128 * _1080p )
	self.id = "EditFieldUpgradesButton"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local PlayMenuButton = nil
	
	PlayMenuButton = MenuBuilder.BuildRegisteredType( "PlayMenuButton", {
		controllerIndex = f1_local1
	} )
	PlayMenuButton.id = "PlayMenuButton"
	PlayMenuButton.AccordionButton.Background.BackgroundImage:SetAlpha( 0, 0 )
	PlayMenuButton.Text:setText( "", 0 )
	PlayMenuButton.Description:setText( "", 0 )
	PlayMenuButton.DisabledText:setText( Engine[0xED84C33EC5F01EA]( "MENU/LOCKED" ), 0 )
	PlayMenuButton:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
	self:addElement( PlayMenuButton )
	self.PlayMenuButton = PlayMenuButton
	
	local UpgradeRight = nil
	
	UpgradeRight = MenuBuilder.BuildRegisteredType( "EquippedItemPanel", {
		controllerIndex = f1_local1
	} )
	UpgradeRight.id = "UpgradeRight"
	UpgradeRight:SetAnchorsAndPosition( 1, 0, 0.5, 0.5, _1080p * -114, _1080p * -14, _1080p * -26, _1080p * 26 )
	self:addElement( UpgradeRight )
	self.UpgradeRight = UpgradeRight
	
	local UpgradeLeft = nil
	
	UpgradeLeft = MenuBuilder.BuildRegisteredType( "EquippedItemPanel", {
		controllerIndex = f1_local1
	} )
	UpgradeLeft.id = "UpgradeLeft"
	UpgradeLeft:SetAnchorsAndPosition( 1, 0, 0.5, 0.5, _1080p * -184, _1080p * -84, _1080p * -26, _1080p * 26 )
	self:addElement( UpgradeLeft )
	self.UpgradeLeft = UpgradeLeft
	
	local EquippedText = nil
	
	EquippedText = LUI.UIStyledText.new()
	EquippedText.id = "EquippedText"
	EquippedText:SetRGBFromTable( SWATCHES.text.buttonTextDefault, 0 )
	EquippedText:SetAlpha( 0, 0 )
	EquippedText:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU/EQUIPPED" ), 0 )
	EquippedText:SetFont( FONTS.GetFont( FONTS.MainRegularHeader.File ) )
	EquippedText:SetFontSize( 20 * _PT )
	EquippedText:SetMinFontSize( 24 * _PT )
	EquippedText:SetWordWrap( true )
	EquippedText:SetAlignment( LUI.Alignment.Left )
	EquippedText:SetVerticalAlignment( LUI.Alignment.Center )
	EquippedText:SetShadowRGBFromInt( 0, 0 )
	EquippedText:SetOutlineRGBFromInt( 0, 0 )
	EquippedText:SetEllipsesEnabled( true )
	EquippedText:SetAnchorsAndPosition( 0, 0, 1, 0, _1080p * 20, _1080p * -23, _1080p * -32, _1080p * -10 )
	self:addElement( EquippedText )
	self.EquippedText = EquippedText
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "EditFieldUpgradesButton", EditFieldUpgradesButton )
LockTable( _M )
