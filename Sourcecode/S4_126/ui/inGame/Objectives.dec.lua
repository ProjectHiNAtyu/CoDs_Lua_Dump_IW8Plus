-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
module( ..., package.seeall )
require( "ui.inGame.ObjectiveHeading" )
require( "ui.inGame.ObjectivePinnedProgress" )
require( "ui.inGame.mp.CodcasterObjectiveStatus" )
require( "ui.inGame.sp.SatchelChargeCountdownTimer" )
local f0_local0 = 6000
local f0_local1 = 2000
local f0_local2 = 400
local f0_local3 = 1500
local f0_local4 = 500
local f0_local5 = 1000
local f0_local6 = 2500
local f0_local7 = 400
local f0_local8 = {
	[ObjectiveState.DONE] = {
		anim = "CompleteObjective",
		title = "HUD/OBJECTIVE_DONE",
		callback = "Complete"
	},
	[ObjectiveState.FAILED] = {
		anim = "FailedObjective",
		title = "HUD/OBJECTIVE_FAILED",
		callback = "Failed"
	}
}
local f0_local9 = {
	Update = 1,
	New = 0,
	Complete = 2
}
local f0_local10 = {
	Complete = 1,
	Reveal = 0
}
local f0_local11 = function ( f40_arg0 )
	local f40_local0
	if f40_arg0 ~= ObjectiveState.CURRENT and f40_arg0 ~= ObjectiveState.ACTIVE and f40_arg0 ~= ObjectiveState.INVISIBLE then
		f40_local0 = false
	else
		f40_local0 = true
	end
	return f40_local0
end

local f0_local12 = function ( f39_arg0 )
	local f39_local0
	if f39_arg0 ~= ObjectiveState.CURRENT and f39_arg0 ~= ObjectiveState.INVISIBLE then
		f39_local0 = false
	else
		f39_local0 = true
	end
	return f39_local0
end

local f0_local13 = function ( f38_arg0 )
	return f38_arg0 == ObjectiveState.CURRENT
end

local f0_local14 = function ( f37_arg0 )
	local f37_local0
	if Engine[0x74423E76DECE3E4]() then
		f37_local0 = Game[0x28624DEF6F708C8]( f37_arg0._controllerIndex, "ui_objective_reveal_fanfare_enabled" )
	else
		f37_local0 = true
	end
	return f37_local0
end

local f0_local15 = function ( f36_arg0 )
	local f36_local0 = Engine[0x74423E76DECE3E4]()
	if f36_local0 then
		f36_local0 = Game[0x28624DEF6F708C8]( f36_arg0._controllerIndex, "ui_objective_dismiss_fanfare_enabled" )
	end
	return f36_local0
end

local f0_local16 = function ( f35_arg0, f35_arg1, f35_arg2, f35_arg3 )
	if not f35_arg0[f35_arg1] then
		local self = LUI.UIElement.new()
		self.id = f35_arg1
		f35_arg0:addElement( self )
		f35_arg0[f35_arg1] = self
	end
	local self = f35_arg0[f35_arg1]:Wait( f35_arg2, true )
	self.onComplete = f35_arg3
end

local f0_local17 = function ( f33_arg0 )
	for f33_local0 = 1, #f33_arg0._widgets, 1 do
		for f33_local6, f33_local7 in pairs( f33_arg0._widgets[f33_local0] ) do
			f33_local7:Reveal()
		end
	end
	if f33_arg0._descriptions then
		for f33_local8, f33_local3 in pairs( f33_arg0._descriptions ) do
			f33_local3:Reveal()
		end
	end
	if f33_arg0._usingHiddenObjectives and f0_local0( f33_arg0 ) then
		f0_local0( f33_arg0, "RevealAnimTimer", f0_local0, function ()
			f33_arg0._blockUpdate = false
			f33_arg0:Update()
		end )
	end
end

local f0_local18 = function ( f32_arg0, f32_arg1 )
	f32_arg0._currentState = f32_arg1
	f32_arg0._blockUpdate = f32_arg0._currentState ~= nil
	f32_arg0:UpdateVisibility()
	if f32_arg0._currentState == f0_local0.Reveal then
		f0_local0( f32_arg0 )
	end
end

local f0_local19 = function ( f31_arg0 )
	local f31_local0
	if f31_arg0._currentState == nil then
		f31_local0 = f31_arg0._usingHiddenObjectives
		if f31_local0 then
			f31_local0 = f31_arg0._showObjectives
		end
	else
		f31_local0 = true
	end
	if f31_arg0._statusVisible ~= f31_local0 then
		if f31_local0 then
			f31_arg0.Status:SetAlpha( 1, f0_local0, LUI.EASING.linear )
		else
			f31_arg0.Status:SetAlpha( 0, f0_local0, LUI.EASING.outQuadratic )
		end
		f31_arg0._statusVisible = f31_local0
	end
	local f31_local1 = f31_arg0._showObjectives
	if not f31_local1 then
		f31_local1 = f31_arg0._currentState ~= nil
	end
	if f31_arg0.HeaderList and f31_arg0._contentVisible ~= f31_local1 then
		if f31_local1 then
			f31_arg0.HeaderList:SetAlpha( 1, f0_local0, LUI.EASING.linear )
		else
			f31_arg0.HeaderList:SetAlpha( 0, f0_local0, LUI.EASING.outQuadratic )
		end
		f31_arg0._contentVisible = f31_local1
	end
	local f31_local2
	if not f31_local1 then
		f31_local2 = f31_local1
	else
		f31_local2 = f31_arg0._usingHiddenObjectives and f31_arg0._forceShowObjectiveMarkers
	end
	if f31_arg0._objectivesVisible ~= f31_local2 then
		if f31_local2 then
			f31_arg0.ObjectiveWidgets:SetAlpha( 1, f0_local0, LUI.EASING.linear )
		else
			f31_arg0.ObjectiveWidgets:SetAlpha( 0, f0_local0, LUI.EASING.outQuadratic )
		end
		f31_arg0._objectivesVisible = f31_local2
	end
end

local f0_local20 = function ( f30_arg0 )
	if f30_arg0._currentState or f30_arg0._showObjectives then
		return 
	elseif f30_arg0._showFocusHint then
		f30_arg0.Status:UpdateMessage( "GAME/FOCUS_HINT" )
		f30_arg0.Status:SetAlpha( 1, f0_local0, LUI.EASING.linear )
	else
		f30_arg0.Status:SetAlpha( 0, f0_local0, LUI.EASING.outQuadratic )
	end
end

local f0_local21 = nil
f0_local21 = function ( f26_arg0, f26_arg1 )
	if f26_arg0._currentState then
		
	else
		
	end
	local f26_local0 = function ()
		f26_arg0( f26_arg0, nil )
		local f28_local0 = f26_arg0:Wait( f26_arg0._usingHiddenObjectives and f26_arg0 or 0 )
		f28_local0.onComplete = function ()
			for f29_local8, f29_local9 in pairs( f28_local0.objectiveTable ) do
				if f28_local0._widgets[f29_local9.index] then
					for f29_local6, f29_local7 in pairs( f28_local0._widgets[f29_local9.index] ) do
						f29_local7.wrapper:closeTree()
					end
					f28_local0._widgets[f29_local9.index] = {}
				end
				if f28_local0._descriptions and f28_local0._descriptions[f29_local9.index] then
					f28_local0._descriptions[f29_local9.index]:closeTree()
					f28_local0._descriptions[f29_local9.index] = nil
				end
			end
			f28_local0:Update()
			if f28_local0.additionalObjectives and 0 < #f28_local0.additionalObjectives then
				f28_local0( f28_local0, {
					objectiveTable = f28_local0.additionalObjectives,
					status = f28_local0.additionalStatus
				} )
			end
		end
		
	end
	
	if f0_local0( f26_arg0 ) then
		local f26_local1 = f26_arg1.status
		if not f26_local1 then
			f26_local1 = ObjectiveState.DONE
		end
		f26_arg1.status = f26_local1
		f26_local1 = f0_local0[f26_arg1.status]
		ACTIONS.AnimateSequence( f26_arg0.Status, f26_local1.anim )
		f26_arg0.Status:UpdateMessage( f26_local1.title )
		f0_local0( f26_arg0, f0_local0.Complete )
		for f26_local10, f26_local11 in pairs( f26_arg1.objectiveTable ) do
			if f26_arg0._widgets[f26_local11.index] then
				for f26_local8, f26_local9 in pairs( f26_arg0._widgets[f26_local11.index] ) do
					f26_local9[f26_local1.callback]( f26_local9 )
				end
			end
			if f26_arg0._descriptions and f26_arg0._descriptions[f26_local11.index] then
				f26_arg0._descriptions[f26_local11.index]:Complete()
			end
		end
		f26_local2 = f26_arg0:Wait( f0_local0 )
		f26_local2.onComplete = function ()
			f26_arg0()
		end
		
	else
		f26_local0()
	end
end

local f0_local22 = function ( f24_arg0, f24_arg1 )
	if f24_arg0._currentState or not f0_local0( f24_arg0 ) then
		
	end
	if f24_arg0._usingHiddenObjectives then
		local f24_local0 = false
		for f24_local4, f24_local5 in pairs( f24_arg1 ) do
			if 0 < #f24_local5.description then
				f24_local0 = true
				break
			end
		end
		if f24_local0 then
			f24_arg0.Status:UpdateMessage( "MENU/NEW_OBJECTIVE" )
			ACTIONS.AnimateSequence( f24_arg0.Status, "NewObjective" )
			f0_local0( f24_arg0, f0_local0.Reveal )
		end
		f24_arg0.Status:UpdateMessage( "MENU/OBJECTIVE" )
		f0_local0( f24_arg0 )
	else
		f0_local0( f24_arg0, f0_local0.Reveal )
	end
	f0_local0( f24_arg0, "RevealFadeTimer", f0_local0, function ()
		f24_arg0( f24_arg0, nil )
		f24_arg0:Update()
	end )
end

local f0_local23 = function ( f23_arg0, f23_arg1 )
	f23_arg1.objectiveStatus = f0_local0.Complete
	if not Engine[0x74423E76DECE3E4]() then
		f23_arg1.controllerIndex = f23_arg0._controllerIndex
		f23_arg1.displayLocation = LUI.SplashManager.MessageType.Objective.key
		f23_arg0:dispatchEventToRoot( {
			name = "add_message_splash_manager",
			immediate = true,
			options = f23_arg1
		} )
	else
		f0_local0( f23_arg0, f23_arg1 )
	end
end

local f0_local24 = function ( f22_arg0, f22_arg1, f22_arg2 )
	if 0 < #f22_arg1 and 0 < #f22_arg2 then
		f22_arg0:ProcessObjectivesUtility( {
			objectiveTable = f22_arg1,
			status = ObjectiveState.DONE,
			additionalObjectives = f22_arg2,
			additionalStatus = ObjectiveState.FAILED
		} )
	elseif 0 < #f22_arg1 then
		f22_arg0:ProcessObjectivesUtility( {
			objectiveTable = f22_arg1,
			status = ObjectiveState.DONE
		} )
	elseif 0 < #f22_arg2 then
		f22_arg0:ProcessObjectivesUtility( {
			objectiveTable = f22_arg2,
			status = ObjectiveState.FAILED
		} )
	end
end

local f0_local25 = function ( f18_arg0, f18_arg1 )
	local f18_local0 = {}
	local f18_local1 = {}
	local f18_local2 = function ( f20_arg0, f20_arg1 )
		local f20_local0 = f18_arg0._widgets[f20_arg0][f20_arg1]
		f18_arg0._widgets[f20_arg0][f20_arg1] = nil
		if f18_arg0( f18_arg0 ) then
			f20_local0:Dismiss()
			f18_arg0._blockUpdate = true
			f18_arg0( f18_arg0, "RemoveLocationTimer", f18_arg0, function ()
				assert( f20_arg0, "Trying to remove objective location that no longer exists. Did you try to remove the same objective twice before the dismiss animation could complete?" )
				if f20_arg0 then
					f20_arg0.wrapper:closeTree()
				end
				f20_arg0._blockUpdate = false
				f20_arg0:Update()
			end )
		else
			f20_local0.wrapper:closeTree()
		end
	end
	
	local f18_local3 = function ( f19_arg0 )
		if f18_arg0._descriptions and f18_arg0._descriptions[f19_arg0] then
			f18_arg0._descriptions[f19_arg0]:closeTree()
			f18_arg0._descriptions[f19_arg0] = nil
		end
	end
	
	for f18_local15, f18_local16 in ipairs( f18_arg1 ) do
		f18_arg0._widgets[f18_local15] = f18_arg0._widgets[f18_local15] or {}
		if not f0_local0( f18_local16.state ) then
			f18_arg0._currentObjectives[f18_local15] = nil
		end
		if (f18_local16.state == ObjectiveState.DONE or f18_local16.state == ObjectiveState.FAILED) and f18_local16.playOutro then
			if not (not f18_arg0._descriptions or not f18_arg0._descriptions[f18_local15]) or 0 < CountTableKeys( f18_arg0._widgets[f18_local15] ) then
				if f18_local16.state == ObjectiveState.DONE then
					table.insert( f18_local0, f18_local16 )
				else
					table.insert( f18_local1, f18_local16 )
					goto basicblock_31:
				end
			end
		end
		if not f0_local0( f18_local16.state ) then
			for f18_local10, f18_local11 in pairs( f18_arg0._widgets[f18_local15] ) do
				f18_local2( f18_local15, f18_local10 )
			end
		end
		if not f0_local0( f18_local16.state ) then
			f18_local3( f18_local15 )
		end
		for f18_local10, f18_local11 in pairs( f18_arg0._widgets[f18_local15] ) do
			local f18_local12 = false
			if f18_arg0._isCodcasterReorderUpdate then
				f18_local12 = true
			else
				local f18_local13 = f18_local16.locations[f18_local10]
				local f18_local14 = f18_local13.entNum
				if not f18_local14 then
					f18_local14 = f18_local13.scriptableIndex or f18_local13.x
				end
				f18_local12 = not f18_local14
			end
			if f18_arg0._widgets[f18_local15][f18_local10] and f18_local12 then
				f18_local2( f18_local15, f18_local10 )
			end
		end
	end
	f18_arg0:ProcessObjectives( f18_local0, f18_local1 )
end

local f0_local26 = function ( f16_arg0, f16_arg1 )
	local f16_local0 = f16_arg0._controllerIndex
	local f16_local1 = {}
	local f16_local2 = false
	local f16_local3
	if IsCodcaster() and CODCASTER.HasWaypointSupportForGameType() then
		f16_local3 = "CodcasterWaypoint"
	else
		f16_local3 = "Objective"
	end
	local f16_local4 = nil
	for f16_local21, f16_local22 in ipairs( f16_arg1 ) do
		f16_arg0._widgets[f16_local21] = f16_arg0._widgets[f16_local21] or {}
		if f0_local0( f16_local22.state ) then
			local f16_local8 = false
			local f16_local9 = f16_arg0._currentObjectives[f16_local21]
			f16_arg0._currentObjectives[f16_local21] = true
			if f0_local0( f16_local22.state ) then
				for f16_local19, f16_local20 in pairs( f16_local22.locations ) do
					local f16_local13 = f16_local20.entNum
					if not f16_local13 then
						f16_local13 = f16_local20.scriptableIndex or f16_local20.x
					end
					if f16_local13 and not f16_arg0._widgets[f16_local21][f16_local19] then
						local self = LUI.UIElement.new()
						local f16_local15 = MenuBuilder.BuildRegisteredType
						local f16_local16
						if f16_local22.isCalloutMarkerPing then
							f16_local16 = "CalloutMarkerPing"
						else
							f16_local16 = f16_local3
						end
						local f16_local17 = {
							controllerIndex = f16_local0,
							objectiveIndex = f16_local21,
							objectiveIdentifier = f16_local22.index,
							locationIndex = f16_local19,
							wrapper = self
						}
						local f16_local18
						if not f16_arg0.disableDistanceBasedSnapCheck then
							f16_local18 = not f16_local22.isCalloutMarkerPing
						else
							f16_local18 = false
						end
						f16_local17.enableDistanceBasedSnapCheck = f16_local18
						f16_local17.screenCenterFadeDisabled = f16_arg0.screenCenterFadeDisabled or f16_local22.fadeDisabled
						f16_local17.perspectiveScalingDisabled = f16_arg0.perspectiveScalingDisabled
						f16_local17.showDistanceDisabled = f16_arg0.showDistanceDisabled and f16_arg0.showDistanceDisabled or nil
						f16_local17.tacOpsMapSettings = f16_arg0.tacOpsMapSettings
						if not f16_arg0.distanceBasedFadingDisabled then
							f16_local18 = not f16_local22.isCalloutMarkerPing
						else
							f16_local18 = false
						end
						f16_local17.useDistanceBasedFading = f16_local18
						f16_local17.screenOffsetY = f16_local22.screenOffsetY
						f16_local17.entityTag = f16_local20.entityTag
						f16_local15 = f16_local15( f16_local16, f16_local17 )
						f16_local15:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -64 * _1080p, 64 * _1080p, 90 * _1080p, 218 * _1080p )
						f16_local15:Update( f16_local22 )
						f16_arg0._widgets[f16_local21][f16_local19] = f16_local15
						f16_local15.wrapper = self
						self:addElement( f16_local15 )
						f16_arg0.ObjectiveWidgets:addElement( self )
						f16_local8 = true
					end
				end
				if f16_local22.pinned then
					f16_local22.objectiveIndex = f16_local21
				end
			end
			if f0_local0( f16_local22.state ) and f16_arg0._descriptions and 0 < #f16_local22.description and not f16_arg0._descriptions[f16_local21] then
				local f16_local10 = MenuBuilder.BuildRegisteredType( "ObjectiveDescription", {
					controllerIndex = f16_local0
				} )
				f16_local10:SetLeftAnchor( 0 )
				f16_local10:SetRightAnchor( 0 )
				f16_local10:SetLeft( 0 )
				f16_local10:SetRight( 0 )
				f16_arg0._descriptions[f16_local21] = f16_local10
				f16_arg0._descriptions[f16_local21]:SetText( Engine[0xED84C33EC5F01EA]( f16_local22.description ) )
				f16_local10:setPriority( f16_local21 )
				local f16_local11 = f16_arg0:Wait( f16_arg0._usingHiddenObjectives and f0_local0 or 0 )
				f16_local11.onComplete = function ()
					f16_arg0.HeaderList:addElement( f16_arg0 )
				end
				
				f16_local8 = true
			end
			if f16_local8 and (f16_local22.playIntro or f16_local22.isCalloutMarkerPing) and not f16_local9 then
				table.insert( f16_local1, f16_local22 )
				if not f16_local22.isCalloutMarkerPing or f16_local22.isCalloutMarkerPing == false or f16_local22.isCalloutMarkerPing == "" then
					f16_local2 = true
				end
			end
		end
	end
	if f16_arg0._pinnedObjectiveWidget then
		f16_arg0._pinnedObjectiveWidget:Update( f16_local4 )
	end
	if not (f16_arg0._initialized == nil) and 0 < #f16_local1 then
		if not Engine[0x74423E76DECE3E4]() then
			if not CONDITIONS.IsBRGameType() or f16_local2 then
				f16_local6 = {
					objectiveStatus = f0_local0.New,
					controllerIndex = f16_arg0._controllerIndex,
					displayLocation = LUI.SplashManager.MessageType.Objective.key,
					objectiveTable = f16_local1
				}
				for f16_local8, f16_local9 in ipairs( f16_local1 ) do
					for f16_local19, f16_local20 in pairs( f16_local9.locations ) do
						local f16_local13 = f16_arg0._widgets[f16_local9.index][f16_local19]
						if f16_local13 then
							f16_local13:SetVisibility( LUI.Visibility.Hidden )
						end
					end
				end
				f16_arg0:dispatchEventToRoot( {
					name = "add_message_splash_manager",
					immediate = true,
					options = f16_local6
				} )
			end
		elseif f0_local0( f16_arg0 ) then
			f0_local0( f16_arg0, nil )
			f0_local0( f16_arg0, f16_local1 )
		elseif f16_arg0._showObjectives then
			f0_local0( f16_arg0 )
			f0_local0( f16_arg0 )
		end
	end
end

local f0_local27 = function ( f15_arg0, f15_arg1 )
	local f15_local0 = nil
	local f15_local1 = false
	for f15_local9, f15_local10 in ipairs( f15_arg1 ) do
		f15_arg0._widgets[f15_local9] = f15_arg0._widgets[f15_local9] or {}
		for f15_local5, f15_local6 in pairs( f15_local10.locations ) do
			if f15_arg0._widgets[f15_local9][f15_local5] then
				f15_arg0._widgets[f15_local9][f15_local5]:Update( f15_local10 )
			end
		end
		if f15_arg0._descriptions and f15_arg0._descriptions[f15_local9] then
			f15_arg0._descriptions[f15_local9]:SetText( Engine[0xED84C33EC5F01EA]( f15_local10.description ) )
		end
		f15_local8 = f15_local10.pinned
		if not f15_local8 then
			f15_local1 = f15_local8
		else
			
		end
		if f15_local8 then
			f15_local10.objectiveIndex = f15_local9
		end
	end
	if f15_arg0._pinnedObjectiveWidget then
		f15_arg0._pinnedObjectiveWidget:Update( f15_local0 )
	end
	if CONDITIONS.IsBRGameType() and f15_arg0._pinnedObjectiveWidget and f15_local1 == false then
		ACTIONS.AnimateSequence( f15_arg0._pinnedObjectiveWidget, "Hide" )
	end
end

local f0_local28 = function ( f14_arg0 )
	local f14_local0 = LUI.HudManager.GetObjectiveData( f14_arg0._controllerIndex )
	if f14_arg0._blockUpdate and not f14_arg0._isCodcasterReorderUpdate then
		return 
	else
		f0_local0( f14_arg0, f14_local0 )
		if f14_arg0._blockUpdate and not f14_arg0._isCodcasterReorderUpdate then
			return 
		else
			f0_local0( f14_arg0, f14_local0 )
			if f14_arg0._blockUpdate and not f14_arg0._isCodcasterReorderUpdate then
				return 
			else
				f0_local0( f14_arg0, f14_local0 )
				f14_arg0._initialized = true
			end
		end
	end
end

local f0_local29 = function ( f13_arg0, f13_arg1, f13_arg2, f13_arg3 )
	local f13_local0 = f13_arg0._widgets[f13_arg1][f13_arg2]
	if f13_local0 then
		local f13_local1 = f13_local0
		local f13_local2 = f13_local0.SetVisibility
		local f13_local3
		if f13_arg3 then
			f13_local3 = LUI.Visibility.Hidden
			if not f13_local3 then
			
			else
				f13_local2( f13_local1, f13_local3 )
				f13_local0._hidden = f13_arg3
			end
		end
		f13_local3 = LUI.Visibility.Visible
	end
end

local f0_local30 = function ( f9_arg0, f9_arg1 )
	f9_arg0.Status:SetAlpha( 0 )
	f9_arg0.ObjectiveWidgets:SetAlpha( 0 )
	if f9_arg0.HeaderList then
		f9_arg0.HeaderList:SetAlpha( 0 )
	end
	f9_arg0._usingHiddenObjectives = true
	f9_arg0._showObjectives = false
	local f9_local0 = LUI.DataSourceFromOmnvar.new( "ui_focus_activate" )
	local f9_local1 = LUI.DataSourceFromOmnvar.new( "ui_show_objectives_update" )
	local f9_local2 = function ( f12_arg0 )
		f9_arg0( f9_arg0 )
		local f12_local0 = f9_arg0._showObjectives
		local f12_local1 = f9_arg0:GetValue( f9_arg0 )
		f9_arg0._showObjectives = f9_arg0:GetValue( f9_arg0 ) or f12_local1
		if f12_local0 ~= f9_arg0._showObjectives then
			if f9_arg0._showObjectives and not f9_arg0._currentState then
				local f12_local2 = f9_arg0.ObjectiveWidgets:getFirstChild()
				if not f12_local2 then
					f12_local2 = f9_arg0.HeaderList
					if f12_local2 then
						f12_local2 = f9_arg0.HeaderList:getFirstChild()
					end
				end
				local f12_local3 = nil
				if f12_local1 then
					f12_local3 = "MENU/OBJECTIVE_UPDATED"
				elseif f12_local2 then
					f12_local3 = "MENU/OBJECTIVE"
				else
					f12_local3 = "MENU/NO_OBJECTIVE"
				end
				f9_arg0.Status:UpdateMessage( f12_local3 )
			end
			f9_arg0( f9_arg0 )
		end
	end
	
	f9_arg0:SubscribeToModel( f9_local0:GetModel( f9_arg1 ), f9_local2 )
	f9_arg0:SubscribeToModel( f9_local1:GetModel( f9_arg1 ), f9_local2 )
	local f9_local3 = LUI.DataSourceFromOmnvar.new( "ui_show_objectives_force" )
	f9_arg0:SubscribeToModel( f9_local3:GetModel( f9_arg1 ), function ( f11_arg0 )
		f9_arg0._forceShowObjectiveMarkers = DataModel[0x614D394F6F9A18D]( f11_arg0 )
		f9_arg0( f9_arg0 )
	end )
	local f9_local4 = LUI.DataSourceFromOmnvar.new( "ui_show_objectives_reminder" )
	f9_arg0:SubscribeToModel( f9_local4:GetModel( f9_arg1 ), function ( f10_arg0 )
		f9_arg0._showFocusHint = DataModel[0x614D394F6F9A18D]( f10_arg0 )
		f9_arg0( f9_arg0 )
	end )
end

local f0_local31 = function ( f8_arg0, f8_arg1 )
	if f8_arg1.objectiveStatus == f0_local0.Complete then
		f8_arg0:PlayFanfareAndRemoveObjective( f8_arg1 )
	elseif f8_arg1.objectiveStatus == f0_local0.New then
		f8_arg0:PlayRevealFanfare( f8_arg1.objectiveTable )
	end
	return true
end

local f0_local32 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0._controllerIndex = f2_arg1
	f2_arg0._widgets = {}
	f2_arg0._currentObjectives = {}
	f2_arg0._currentState = nil
	f2_arg0._usingHiddenObjectives = false
	f2_arg0._isCodcasterReorderUpdate = false
	f2_arg0.screenCenterFadeDisabled = f2_arg2.screenCenterFadeDisabled
	f2_arg0.perspectiveScalingDisabled = f2_arg2.perspectiveScalingDisabled
	f2_arg0.showDistanceDisabled = f2_arg2.showDistanceDisabled
	f2_arg0.distanceBasedFadingDisabled = f2_arg2.distanceBasedFadingDisabled
	f2_arg0.disableDistanceBasedSnapCheck = f2_arg2.disableDistanceBasedSnapCheck
	f2_arg0.tacOpsMapSettings = f2_arg2.tacOpsMapSettings
	f2_arg0.Update = f0_local0
	f2_arg0.UpdateAnimState = f0_local0
	f2_arg0.UpdateVisibility = f0_local0
	f2_arg0.UpdateFocusHint = f0_local0
	f2_arg0.PlayFanfareAndRemoveObjective = f0_local0
	f2_arg0.PlayRevealFanfare = f0_local0
	f2_arg0.ProcessObjectives = f0_local0
	f2_arg0.ProcessObjectivesUtility = f0_local0
	f2_arg0.ShowSplash = f0_local0
	f2_arg0.ToggleHideObjective = f0_local0
	local f2_local0 = f2_arg0.CodcasterObjectiveStatus
	if f2_local0 then
		f2_local0 = IsCodcaster()
		if f2_local0 then
			f2_local0 = CODCASTER.HasWaypointSupportForGameType()
		end
	end
	if f2_local0 then
		f2_arg0._pinnedObjectiveWidget = f2_arg0.CodcasterObjectiveStatus
		f2_arg0.ObjectiveProgress:closeTree()
	else
		f2_arg0._pinnedObjectiveWidget = f2_arg0.ObjectiveProgress
		if f2_arg0.CodcasterObjectiveStatus then
			f2_arg0.CodcasterObjectiveStatus:closeTree()
		end
	end
	f2_arg0.ObjectiveWidgets = LUI.UIElement.new()
	if CONDITIONS.IsDominationGameType( f2_arg0 ) then
		f2_arg0.ObjectiveWidgets:addElementBefore( f2_arg0._pinnedObjectiveWidget )
	else
		f2_arg0:addElement( f2_arg0.ObjectiveWidgets )
	end
	if Engine[0x74423E76DECE3E4]() then
		f2_arg0._descriptions = {}
		f2_arg0.HeaderList = LUI.UIVerticalStackedLayout.new()
		f2_arg0.HeaderList:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 42 * _1080p, 78 * _1080p )
		if CONDITIONS.IsLanguageAsian() then
			f2_arg0.HeaderList:SetSpacing( 8 )
		end
		f2_arg0:addElement( f2_arg0.HeaderList )
	end
	if Dvar[0x9E5BE3B4BBA4E0E]( "#x39461de5a849c4e71" ) then
		f2_arg0:registerAndCallEventHandler( "objectives_ping", function ( f7_arg0, f7_arg1 )
			f7_arg0:Update()
		end )
		if IsCodcaster() then
			f2_arg0:addEventHandler( "codcaster_waypoint_update_order", function ( f6_arg0, f6_arg1 )
				f6_arg0._isCodcasterReorderUpdate = true
				f6_arg0:Update()
				f6_arg0._isCodcasterReorderUpdate = false
			end )
		end
		if Engine[0x74423E76DECE3E4]() then
			f0_local0( f2_arg0, f2_arg1 )
		else
			f2_arg0._showObjectives = true
		end
	end
	if CONDITIONS.IsBRGameType() then
		f2_arg0:registerOmnvarHandler( "ui_gulag", function ( f5_arg0, f5_arg1 )
			f5_arg0:dispatchEventToRoot( {
				immediate = true,
				name = "objectives_update"
			} )
		end )
	end
	f2_arg0:registerOmnvarHandler( "ui_hide_objectives", function ( f4_arg0, f4_arg1 )
		local f4_local0 = f4_arg1.value
		local f4_local1 = f4_arg0
		local f4_local2 = f4_arg0.SetAlpha
		local f4_local3
		if f4_local0 then
			f4_local3 = 0
		else
			f4_local3 = 1
		end
		f4_local2( f4_local1, f4_local3 )
	end )
	if IsCodcaster() then
		CODCASTER.SetupObjectivesVisualStates( f2_arg0, f2_arg1 )
	end
	if Engine[0x74423E76DECE3E4]() and f2_arg0.SatchelChargeCountdownTimer then
		f2_arg0:registerOmnvarHandler( "ui_satchel_charge_planted_endtime", function ( f3_arg0, f3_arg1 )
			if f3_arg1.value == nil or f3_arg1.value <= 0 then
				f3_arg0.HeaderList:SetVisible( true )
				f3_arg0.SatchelChargeCountdownTimer:SetVisible( false )
			else
				f3_arg0.HeaderList:SetVisible( false )
				f3_arg0.SatchelChargeCountdownTimer:SetVisible( true )
				f3_arg0.SatchelChargeCountdownTimer:DisplayCountdownTimer( f3_arg1.value - Game[0x49FC972008AE526]() )
			end
		end )
	end
end

function Objectives( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 300 * _1080p, 0, 340 * _1080p )
	self.id = "Objectives"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local BannerMask = nil
	
	BannerMask = LUI.UIImage.new()
	BannerMask.id = "BannerMask"
	BannerMask:SetVisibility( LUI.Visibility.Hidden )
	BannerMask:setImage( RegisterMaterial( "stencil_mask" ), 0 )
	BannerMask:Setup9SliceImage( _1080p * 6, _1080p * 6, 0.3, 0.3 )
	BannerMask:SetAnchorsAndPosition( 0, 0, 0, 0, _1080p * -136, _1080p * 136, 0, _1080p * -304 )
	self:addElement( BannerMask )
	self.BannerMask = BannerMask
	
	local BoxExpanding = nil
	
	BoxExpanding = LUI.UIImage.new()
	BoxExpanding.id = "BoxExpanding"
	BoxExpanding:SetVisibility( LUI.Visibility.Hidden )
	BoxExpanding:SetAlpha( 0, 0 )
	BoxExpanding:setImage( RegisterMaterial( "ui_default_white" ), 0 )
	BoxExpanding:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -64, _1080p * 64, 0, _1080p * 36 )
	self:addElement( BoxExpanding )
	self.BoxExpanding = BoxExpanding
	
	local Flash = nil
	
	Flash = LUI.UIImage.new()
	Flash.id = "Flash"
	Flash:SetAlpha( 0, 0 )
	Flash:setImage( RegisterMaterial( "widg_gradient_center_out" ), 0 )
	Flash:Setup3SliceHorizontalImage( _1080p * 18, 0 )
	Flash:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, 0, 0, _1080p * -2, _1080p * 38 )
	self:addElement( Flash )
	self.Flash = Flash
	
	local Status = nil
	
	Status = MenuBuilder.BuildRegisteredType( "ObjectiveHeading", {
		controllerIndex = f1_local1
	} )
	Status.id = "Status"
	Status:setPriority( 1 )
	Status:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -150, _1080p * 150, 0, _1080p * 36 )
	self:addElement( Status )
	self.Status = Status
	
	local f1_local7 = nil
	if Engine[0x9258F49F515F97B]() then
		f1_local7 = MenuBuilder.BuildRegisteredType( "ObjectivePinnedProgress", {
			controllerIndex = f1_local1
		} )
		f1_local7.id = "ObjectiveProgress"
		f1_local7.Text:SetRGBFromInt( 16777215, 0 )
		f1_local7:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, _1080p * -150, _1080p * 150, _1080p * -111, _1080p * -61 )
		self:addElement( f1_local7 )
		self.ObjectiveProgress = f1_local7
	end
	local f1_local8 = nil
	if Engine[0x9258F49F515F97B]() and CODCASTER_CONDITIONS.IsCodcaster() then
		f1_local8 = MenuBuilder.BuildRegisteredType( "CodcasterObjectiveStatus", {
			controllerIndex = f1_local1
		} )
		f1_local8.id = "CodcasterObjectiveStatus"
		f1_local8:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -150, _1080p * 150, _1080p * 186, _1080p * 386 )
		self:addElement( f1_local8 )
		self.CodcasterObjectiveStatus = f1_local8
	end
	local f1_local9 = nil
	if not Engine[0x9258F49F515F97B]() then
		f1_local9 = MenuBuilder.BuildRegisteredType( "SatchelChargeCountdownTimer", {
			controllerIndex = f1_local1
		} )
		f1_local9.id = "SatchelChargeCountdownTimer"
		f1_local9:SetVisibility( LUI.Visibility.Hidden )
		f1_local9:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -64, _1080p * 64, _1080p * 42, _1080p * 170 )
		self:addElement( f1_local9 )
		self.SatchelChargeCountdownTimer = f1_local9
	end
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "Objectives", Objectives )
LockTable( _M )
