-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
module( ..., package.seeall )
local f0_local0 = 500
local f0_local1 = 500
local f0_local2 = 10
local f0_local3 = 10
local f0_local4 = 40
local f0_local5 = FONTS.GetFont( FONTS.MainRegular.File )
local f0_local6 = 28 * _1080p
local f0_local7 = function ( f24_arg0, f24_arg1, f24_arg2, f24_arg3, f24_arg4, f24_arg5, f24_arg6, f24_arg7, f24_arg8, f24_arg9, f24_arg10, f24_arg11, f24_arg12, f24_arg13 )
	if f24_arg0._currentState then
		return 
	end
	local f24_local0 = not Engine.BGGJFFFAFG( f24_arg1 )
	local f24_local1 = DataModel.JJEHAEBDF( f24_arg2 )
	local f24_local2 = DataModel.JJEHAEBDF( f24_arg5 )
	local f24_local3 = DataModel.JJEHAEBDF( f24_arg10 )
	local f24_local4 = DataModel.JJEHAEBDF( f24_arg11 )
	local f24_local5 = DataModel.JJEHAEBDF( f24_arg4 )
	local f24_local6 = DataModel.JJEHAEBDF( f24_arg8 )
	local f24_local7 = DataModel.JJEHAEBDF( f24_arg9 )
	local f24_local8 = DataModel.JJEHAEBDF( f24_arg12 )
	if CONDITIONS.IsWZPayload() then
		if f24_local3 and DataModel.JJEHAEBDF( f24_arg13 ) == 1 then
			f24_local3 = false
		end
	end
	if string.find( f24_local5, Engine.CBBHFCGDIC( "MP/LASTSTAND_REVIVE_USE" ) ) and CONDITIONS.IsPlayerAZombie( f24_arg1 ) then
		return 
	elseif not f24_local5 then
		f24_arg0.MessageText:setText( "" )
	end
	if Game.BFEEGCHICA( f24_arg1, "ui_graverobber" ) and f24_local7 then
		f24_local5 = Engine.CBBHFCGDIC( "LUA_MENU/SCRAP_GUN" )
	end
	if f24_local2 or f24_local3 or f24_local4 or f24_local6 == 1 or f24_local6 == 2 or f24_local1 and f24_local5 ~= "" then
		local f24_local9 = DataModel.JJEHAEBDF( f24_arg6 )
		if f24_local9 ~= nil then
			f24_arg0.InteractiveObjectIcon:UpdateImage( f24_arg1, f24_local9 )
		end
		local f24_local10 = DataModel.JJEHAEBDF( f24_arg3 )
		local f24_local11 = false
		if CONDITIONS.IsMagmaGameMode( f24_arg0 ) then
			f24_local11 = BRLOOT.ShouldShowLootCard( f24_arg1 )
		end
		if f24_local2 and f24_local10 == false then
			f24_arg0._currentState = "VisibleMantle"
			f24_arg0.MantleHint:setText( Engine.CBBHFCGDIC( "PLATFORM/MANTLE" ) )
			f24_arg0.MantleHint:SetAlpha( 1 )
			f24_arg0.MessageText:SetAlpha( 0 )
			f24_arg0.InteractiveObjectIcon:SetAlpha( 0 )
			f24_arg0.ProgressButton:SetAlpha( 0 )
			f24_arg0.AmmoName:SetAlpha( 0 )
		elseif f24_local3 and f24_local10 == false then
			f24_arg0._currentState = "VisibleDeployParachute"
			f24_arg0.MantleHint:setText( Engine.CBBHFCGDIC( "MP/DEPLOY_PARACHUTE_HINT" ) )
			f24_arg0.MantleHint:SetAlpha( 1 )
			f24_arg0.MessageText:SetAlpha( 0 )
			f24_arg0.InteractiveObjectIcon:SetAlpha( 0 )
			f24_arg0.ProgressButton:SetAlpha( 0 )
			f24_arg0.AmmoName:SetAlpha( 0 )
			if CONDITIONS.IsMagmaGameMode() then
				DataSources.inGame.player.BRData.isMantleHintTheDeployParachuteHint:SetValue( f24_arg1, true )
			end
		elseif f24_local4 and f24_local10 == false then
			if CONDITIONS.IsMagmaGameMode() then
				DataSources.inGame.player.BRData.isMantleHintTheDeployParachuteHint:SetValue( f24_arg1, false )
			end
			ACTIONS.AnimateSequence( f24_arg0, "HideHintBG" )
			f24_arg0._currentState = "VisibleCutParachute"
			f24_arg0.MantleHint:setText( Engine.CBBHFCGDIC( "MP/PARACHUTING_CONTROL_HINTS" ) )
			f24_arg0.MantleHint:SetAlpha( 1 )
			f24_arg0.MessageText:SetAlpha( 0 )
			f24_arg0.InteractiveObjectIcon:SetAlpha( 0 )
			f24_arg0.ProgressButton:SetAlpha( 0 )
			f24_arg0.AmmoName:SetAlpha( 0 )
		elseif (f24_local6 == 1 or f24_local6 == 2) and f24_local10 == false then
			if not CONDITIONS.IsBRGameType( f24_arg0 ) then
				f24_arg0._currentState = "VisibleTurret"
				f24_arg0.MantleHint:setText( Engine.CBBHFCGDIC( "KILLSTREAKS_HINTS/SENTRY_PLACE" ) )
				f24_arg0.MantleHint:SetAlpha( 1 )
				f24_arg0.MessageText:SetAlpha( 0 )
				f24_arg0.InteractiveObjectIcon:SetAlpha( 0 )
				f24_arg0.ProgressButton:SetAlpha( 0 )
				f24_arg0.AmmoName:SetAlpha( 0 )
			else
				f24_arg0.MantleHint:SetAlpha( 0 )
				f24_arg0.MessageText:SetAlpha( 0 )
				f24_arg0.InteractiveObjectIcon:SetAlpha( 0 )
				f24_arg0.ProgressButton:SetAlpha( 0 )
				f24_arg0.AmmoName:SetAlpha( 0 )
			end
		elseif f24_local10 and not f24_local11 then
			f24_arg0._currentState = "VisibleIcon"
			local f24_local12, f24_local13, f24_local14, f24_local15 = GetTextDimensions( f24_local5, f0_local0, f0_local0 )
			local f24_local16 = (f24_local14 - f24_local12) / 2 / _1080p + f0_local0
			local f24_local17 = f24_local16 + f0_local0
			f24_arg0.InteractiveObjectIcon:SetAlpha( 1 )
			f24_arg0.MantleHint:SetAlpha( 0 )
			f24_arg0.ProgressButton:SetAlpha( 1 )
			f24_arg0.ProgressButton:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -f24_local17, _1080p * -f24_local16, _1080p * -20, _1080p * 20 )
			f24_arg0:SizePromptPositionToContent( f24_arg1 )
			f24_arg0.MessageText:SetAlpha( 1 )
			f24_arg0.MessageText:SetAlignment( LUI.Alignment.Center )
			f24_arg0.MessageText:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -f24_local16, _1080p * f24_local16, f0_local0 / -2, f0_local0 / 2 )
			local f24_local18, f24_local19, f24_local20, f24_local21 = f24_arg0.MessageText:getLocalRect()
			local f24_local22 = f24_local18 + f0_local0 - 4 * _1080p
			f24_arg0.AmmoName:SetLeft( f24_local22 )
			f24_arg0.AmmoName:SetRight( f24_local22 + 200 * _1080p )
			if WEAPON.IsCurrentBulletWeapon( f24_arg1, true ) then
				f24_arg0.AmmoName:SetAlpha( 1 )
			else
				f24_arg0.AmmoName:SetAlpha( 0 )
			end
			ACTIONS.AnimateSequence( f24_arg0.ProgressButton, "Visible" )
		elseif not f24_local11 then
			f24_arg0._currentState = "VisibleNoIcon"
			local f24_local12, f24_local13, f24_local14, f24_local15 = GetTextDimensions( f24_local5, f0_local0, f0_local0 )
			local f24_local23 = (f24_local14 - f24_local12) / 2 / _1080p + f0_local0
			local f24_local16 = f24_local23 + f0_local0
			f24_arg0.InteractiveObjectIcon:SetAlpha( 0 )
			f24_arg0.MantleHint:SetAlpha( 0 )
			f24_arg0.ProgressButton:SetAlpha( 1 )
			f24_arg0.ProgressButton:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -f24_local16, _1080p * -f24_local23, _1080p * -20, _1080p * 20 )
			f24_arg0:SizePromptPositionToContent( f24_arg1 )
			f24_arg0.MessageText:SetAlpha( 1 )
			f24_arg0.MessageText:SetAlignment( LUI.Alignment.Center )
			f24_arg0.AmmoName:SetAlpha( 0 )
			f24_arg0.MessageText:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -300, _1080p * 300, f0_local0 / -2, f0_local0 / 2 )
			ACTIONS.AnimateSequence( f24_arg0.ProgressButton, "Visible" )
		end
		local f24_local12 = f24_arg0.ProgressButton.InteractiveObjectButtonIcon:GetDataSource()
		f24_local12 = f24_local12.icon:GetValue( f24_arg1 )
		local f24_local13 = nil
		if f24_local12 ~= nil then
			f24_local13 = Engine.DFEIGFBEH( RegisterMaterial( f24_local12 ) )
		end
		if f24_local12 == nil or f24_local13 == nil or f24_local13 <= 1 then
			if f24_local0 then
				ACTIONS.AnimateSequence( f24_arg0.ProgressButton, "KeyboardOn" )
			else
				ACTIONS.AnimateSequence( f24_arg0.ProgressButton, "KeyboardOff" )
			end
		end
		f24_arg0.HandleHoldAnimation()
		f24_arg0.MessageText:setText( f24_local5 )
		f24_arg0._currentState = nil
		f24_arg0:SetAlpha( 1 )
	else
		if f24_arg0._widgetInitialized then
			f24_arg0:SetAlpha( 0, 100 )
		else
			f24_arg0:SetAlpha( 0 )
		end
		f24_arg0.progressStarted = false
	end
	if f24_local8 then
		f24_arg0.ProgressButton:SetAlpha( 0 )
	end
	f24_arg0._widgetInitialized = true
end

local f0_local8 = function ( f23_arg0, f23_arg1 )
	local f23_local0 = f23_arg0.ProgressButton:GetCurrentAnchorsAndPositions()
	local f23_local1 = nil
	if Engine.BGGJFFFAFG( f23_arg1 ) then
		f23_local1 = f23_arg0.ProgressButton.InteractiveObjectButtonIcon:GetCurrentAnchorsAndPositions()
	else
		f23_local1 = f23_arg0.ProgressButton.KBMProgress:GetCurrentAnchorsAndPositions()
	end
	f23_arg0.ProgressButton:SetAnchorsAndPosition( f23_local0.leftAnchor, f23_local0.rightAnchor, f23_local0.topAnchor, f23_local0.bottomAnchor, f23_local0.right - f23_local1.right - f23_local1.left, f23_local0.right, f23_local0.top, f23_local0.bottom )
end

local f0_local9 = function ( f22_arg0, f22_arg1, f22_arg2, f22_arg3, f22_arg4 )
	if f22_arg4 then
		if f22_arg2 and 0 < f22_arg3 then
			f22_arg0._requiresHolding = true
			ACTIONS.AnimateSequence( f22_arg0.ProgressButton.InteractiveObjectButtonIcon, "Hold" )
			f22_arg0.ProgressButton.KBMProgress:SetHoldAnimation()
		elseif f22_arg1 then
			if f22_arg0._requiresHolding ~= f22_arg1 then
				f22_arg0._requiresHolding = true
				ACTIONS.AnimateSequence( f22_arg0.ProgressButton.InteractiveObjectButtonIcon, "Hold" )
				f22_arg0.ProgressButton.KBMProgress:SetHoldAnimation()
			end
		else
			f22_arg0._requiresHolding = false
			ACTIONS.AnimateSequence( f22_arg0.ProgressButton.InteractiveObjectButtonIcon, "DontHold" )
			f22_arg0.ProgressButton.KBMProgress:SetPressAnimation()
		end
	end
end

function PostLoadFunc( f8_arg0, f8_arg1 )
	assert( f8_arg0.MessageText and f8_arg0.MantleHint, "WARNING: Message specific elements are missing..." )
	assert( f8_arg0.InteractiveObjectIcon.GeneralIcon )
	assert( f8_arg0.ProgressButton )
	assert( f8_arg0.ProgressButton.ProgressBar )
	assert( f8_arg0.ProgressButton.KBMProgress )
	f8_arg0.SizePromptPositionToContent = f0_local0
	f8_arg0.HandleHoldAnimation = f0_local0
	local f8_local0 = DataSources.inGame.HUD.hints.interactiveObject.popup.shouldShow:GetModel( f8_arg1 )
	local f8_local1 = DataSources.inGame.HUD.hints.interactiveObject.popup.shouldShowIcon:GetModel( f8_arg1 )
	local f8_local2 = DataSources.inGame.HUD.hints.interactiveObject.popup.string:GetModel( f8_arg1 )
	local f8_local3 = DataSources.inGame.HUD.hints.canMantle:GetModel( f8_arg1 )
	local f8_local4 = DataSources.inGame.HUD.hints.canDeployParachute:GetModel( f8_arg1 )
	local f8_local5 = DataSources.inGame.HUD.hints.canCutParachute:GetModel( f8_arg1 )
	local f8_local6 = DataSources.inGame.HUD.hints.interactiveObject.popup.material:GetModel( f8_arg1 )
	local f8_local7 = DataSources.inGame.HUD.hints.interactiveObject.button.requiresHolding:GetModel( f8_arg1 )
	local f8_local8 = DataSources.inGame.HUD.hints.interactiveObject.button.isBulletWeapon:GetModel( f8_arg1 )
	local f8_local9 = DataSources.inGame.HUD.hints.placeTurret:GetModel( f8_arg1 )
	local f8_local10 = DataSources.inGame.player.useReloadProfile:GetModel( f8_arg1 )
	local f8_local11 = DataSources.inGame.HUD.hints.interactiveObject.popup.hideButton:GetModel( f8_arg1 )
	local f8_local12 = DataSources.inGame.player.holdKBMEnabled:GetModel( f8_arg1 )
	local f8_local13 = DataSources.inGame.HUD.hints.interactiveObject.progress.duration:GetModel( f8_arg1 )
	local f8_local14 = DataSources.inGame.HUD.hints.interactiveObject.button.isHintValid:GetModel( f8_arg1 )
	local f8_local15 = nil
	if CONDITIONS.IsWZPayload() then
		f8_local15 = DataSources.inGame.HUD.payloadInCinematicControlsLocked:GetModel( f8_arg1 )
	end
	f8_arg0.ProgressButton.KBMProgress:SetProgress( 0 )
	f8_arg0.HandleHoldAnimation = function ()
		f8_arg0( f8_arg0, DataModel.JJEHAEBDF( f8_arg0 ), DataModel.JJEHAEBDF( f8_arg0 ), DataModel.JJEHAEBDF( f8_arg0 ) or -1, DataModel.JJEHAEBDF( f8_arg0 ) )
	end
	
	f8_arg0:SubscribeToModel( f8_local12, f8_arg0.HandleHoldAnimation )
	f8_arg0:SubscribeToModel( f8_local13, f8_arg0.HandleHoldAnimation )
	f8_arg0:registerEventHandler( "empty_menu_stack", function ( element, event )
		element:HandleHoldAnimation()
	end )
	f8_arg0.Update = function ()
		f8_arg0( f8_arg0, f8_arg0, f8_arg0, f8_arg0, f8_arg0, f8_arg0, f8_arg0, f8_arg0, f8_arg0, f8_arg0, f8_arg0, f8_arg0, f8_arg0, f8_arg0 )
	end
	
	f8_arg0:SubscribeToModel( f8_local0, f8_arg0.Update, true )
	f8_arg0:SubscribeToModel( f8_local2, f8_arg0.Update, true )
	f8_arg0:SubscribeToModel( f8_local3, f8_arg0.Update )
	f8_arg0:SubscribeToModel( f8_local4, f8_arg0.Update )
	f8_arg0:SubscribeToModel( f8_local5, f8_arg0.Update )
	f8_arg0:SubscribeToModel( f8_local9, f8_arg0.Update )
	f8_arg0:SubscribeToModel( f8_local11, f8_arg0.Update )
	if CONDITIONS.IsWZPayload() then
		f8_arg0:SubscribeToModel( f8_local15, f8_arg0.Update )
	end
	if CONDITIONS.IsBRGameType( f8_arg0 ) then
		DataSources.inGame.player.BRData.isMantleHintTheDeployParachuteHint:SetValue( f8_arg1, false )
		local f8_local16 = false
		local f8_local17 = false
		local f8_local18 = DataSources.inGame.player.BRData.skydiveList:GetDataSourceAtIndex( 0, f8_arg1 )
		local f8_local19 = {}
		local f8_local20 = 8
		local f8_local21 = 0
		for f8_local22 = 0, f8_local20, 1 do
			f8_local19[f8_local22] = 0
		end
		local f8_local22 = 8000
		local f8_local23 = 6000
		local f8_local24 = 3000
		local f8_local25 = function ( f17_arg0, f17_arg1 )
			local f17_local0 = {
				AlphaMin = 0,
				AlphaMax = 4.667261642226141E-62,
				UpdateDelta = 10
			}
			local f17_local1 = "update_blink_tick_" .. f17_arg1.id
			f17_arg1.updateBlinkTimer = LUI.UITimer.new( {
				interval = f17_local0.UpdateDelta,
				event = f17_local1
			} )
			f17_arg1.blinkTimeElapsed = 0
			f17_arg0:registerEventHandler( f17_local1, function ( element, event )
				f17_arg0.blinkTimeElapsed = f17_arg0.blinkTimeElapsed + f17_arg0.UpdateDelta / 1000 * f17_arg0
				if f17_arg0 == false and f17_arg0.updateBlinkTimer then
					f17_arg0:SetAlpha( 0 )
					element:RemoveElement( f17_arg0.updateBlinkTimer )
					return true
				elseif f17_arg0 and f17_arg0.updateBlinkTimer then
					f17_arg0:SetAlpha( f17_arg0.AlphaMax )
					return true
				elseif not f17_arg0.updateBlinkTimer then
					return true
				else
					f17_arg0:SetAlpha( (math.sin( f17_arg0.blinkTimeElapsed ) * 0.5 + 0.5) * (f17_arg0.AlphaMax - f17_arg0.AlphaMin) + f17_arg0.AlphaMin )
					return true
				end
			end )
			f17_arg0:addElement( f17_arg1.updateBlinkTimer )
		end
		
		local f8_local26 = function ( f16_arg0, f16_arg1 )
			local f16_local0 = Dvar.CFHDGABACF( "ui_br_height_for_first_warning" ) or f8_arg0
			local f16_local1 = Dvar.CFHDGABACF( "ui_br_height_for_second_warning" ) or f8_arg0
			local f16_local2 = Dvar.CFHDGABACF( "ui_br_height_for_third_warning" ) or f8_arg0
			if f16_arg1 <= f16_arg0 + f16_local0 and f16_arg0 + f16_local1 < f16_arg1 then
				f8_arg0 = 10
			elseif f16_arg1 <= f16_arg0 + f16_local1 and f16_arg0 + f16_local2 < f16_arg1 then
				f8_arg0 = 30
			else
				f8_arg0 = 60
			end
		end
		
		local f8_local27 = function ()
			local f15_local0 = DataSources.inGame.player.BRData.AltimeterState:GetValue( f8_arg0 )
			if f15_local0 and f15_local0 ~= 0 then
				local f15_local1 = DataSources.inGame.player.BRData.autoDeployHeight:GetValue( f8_arg0 ) or 0
				local f15_local2 = Game.BFEEGCHICA( f8_arg0, "ui_br_altimeter_sea_height" )
				local f15_local3 = Game.BFEEGCHICA( f8_arg0, "ui_br_altimeter_c130_height" ) - f15_local2
				f8_arg0[f8_arg0] = f15_local1
				f8_arg0 = (f8_arg0 + 1) % f8_arg0
				local f15_local4 = 0
				for f15_local5 = 0, f8_arg0, 1 do
					f15_local4 = f15_local4 + f8_arg0[f15_local5]
				end
				local f15_local5 = math.floor( f15_local4 / f8_arg0 + 0.5 ) - f15_local2
				local f15_local7 = (f8_arg0.altitude:GetValue( f8_arg0 ) or 0) * f15_local3
				local f15_local8 = DataSources.inGame.player.BRData.isMantleHintTheDeployParachuteHint:GetValue( f8_arg0 )
				local f15_local9 = Dvar.CFHDGABACF( "ui_br_height_for_first_warning" ) or f8_arg0
				local f15_local10 = Dvar.CFHDGABACF( "ui_br_height_for_second_warning" ) or f8_arg0
				local f15_local11 = Dvar.CFHDGABACF( "ui_br_height_for_third_warning" ) or f8_arg0
				if f15_local7 ~= nil and f15_local8 ~= nil and f15_local7 <= f15_local5 + f15_local9 and f15_local5 < f15_local7 and f15_local8 == true then
					f8_arg0( f15_local5, f15_local7 )
					if f8_arg0 == false then
						f8_arg0 = true
						f8_arg0:addElement( f8_arg0.HintBG.updateBlinkTimer )
					end
				elseif f15_local7 ~= nil and f15_local7 <= f15_local5 and f15_local8 ~= nil and f15_local8 == true then
					if f8_arg0 == false then
						f8_arg0 = true
						f8_arg0:addElement( f8_arg0.HintBG.updateBlinkTimer )
					end
					f8_arg0 = true
				end
				f8_arg0 = false
				f8_arg0 = false
			else
				DataSources.inGame.player.BRData.isMantleHintTheDeployParachuteHint:SetValue( f8_arg0, false )
				f8_arg0 = false
				f8_arg0 = false
			end
		end
		
		f8_local25( f8_arg0, f8_arg0.HintBG )
		if DataSources.inGame.player.BRData.autoDeployHeight ~= nil then
			f8_arg0:SubscribeToModel( DataSources.inGame.player.BRData.autoDeployHeight:GetModel( f8_arg1 ), f8_local27 )
		end
		f8_arg0:SubscribeToModel( DataSources.inGame.player.BRData.AltimeterState:GetModel( f8_arg1 ), f8_local27 )
		f8_arg0:SubscribeToModel( DataSources.inGame.player.BRData.isMantleHintTheDeployParachuteHint:GetModel( f8_arg1 ), f8_local27 )
		f8_arg0:SubscribeToModel( f8_local18.altitude:GetModel( f8_arg1 ), f8_local27 )
	end
	local f8_local16 = DataSources.inGame.HUD.hints.interactiveObject.button.targetEntity:GetModel( f8_arg1 )
	local f8_local17 = DataSources.inGame.HUD.hints.interactiveObject.progress:GetModel( f8_arg1 )
	local f8_local18 = DataSources.inGame.HUD.hints.interactiveObject.progress.hideBar:GetModel( f8_arg1 )
	local f8_local19 = DataSources.inGame.HUD.hints.interactiveObject.progress.entity:GetModel( f8_arg1 )
	local f8_local20 = LUI.DataSourceInControllerModel.new( "cg.HUD.hints.interactiveObject.interactionComplete" )
	local f8_local21 = f8_local20:GetModel( f8_arg1 )
	DataModel.DBEBGEAJHJ( f8_local21, false )
	local f8_local22 = function ()
		local f13_local0 = DataSources.inGame.player.useReloadProfile:GetValue( f8_arg0 ) or -1
		local f13_local1 = DataModel.JJEHAEBDF( f8_arg0 ) or -1
		if not Engine.BGGJFFFAFG( f8_arg0 ) or f13_local0 == 0 or 250 < f13_local1 then
			if DataModel.JJEHAEBDF( f8_arg0 ) then
				DataModel.DBEBGEAJHJ( f8_arg0, false )
				if f8_arg0._currentState then
					
				else
					
				end
				if DataModel.JJEHAEBDF( f8_arg0 ) or f13_local1 == 0 then
					f8_arg0:Update()
				else
					f8_arg0._currentState = "Completed"
					if Engine.BGGJFFFAFG( f8_arg0 ) then
						ACTIONS.AnimateSequence( f8_arg0.ProgressButton, "Completed" )
						local f13_local2 = f8_arg0:Wait( f8_arg0 )
						f13_local2.onComplete = function ()
							f13_local0._currentState = nil
							f13_local0:Update()
						end
						
					else
						f8_arg0._currentState = nil
						f8_arg0:Update()
					end
				end
			else
				local f13_local3 = DataModel.JJEHAEBDF( f8_arg0 )
				if DataModel.JJEHAEBDF( f8_arg0 ) == GameScriptConstants.EntityNumNone then
					f8_arg0.ProgressButton.KBMProgress:SetProgress( 0 )
				end
			end
		end
	end
	
	f8_arg0:SubscribeToModel( f8_local21, f8_local22 )
	f8_arg0:SubscribeToModel( f8_local19, f8_local22 )
	f8_arg0:SubscribeToModel( f8_local17, f8_local22 )
	f8_arg0:SubscribeToModel( f8_local10, f8_local22 )
	local f8_local23 = f8_arg0.ProgressButton.ProgressBar
	local f8_local24 = f8_arg0.ProgressButton.KBMProgress
	local f8_local25 = function ()
		if f8_arg0._currentState then
			
		else
			
		end
		local f11_local0 = DataModel.JJEHAEBDF( f8_arg0 )
		local f11_local1 = DataModel.JJEHAEBDF( f8_arg0 ) or -1
		local f11_local2 = DataModel.JJEHAEBDF( f8_arg0 )
		local f11_local3 = DataModel.JJEHAEBDF( f8_arg0 )
		if f11_local0 or f11_local1 == 0 then
			f8_arg0:Update()
		else
			if (f11_local2 == 1 or f11_local2 == 2) and f11_local3 == false and not CONDITIONS.IsBRGameType( f8_arg0 ) then
				f8_arg0.MantleHint:setText( Engine.CBBHFCGDIC( "KILLSTREAKS_HINTS/SENTRY_PLACE" ) )
			end
			if DataModel.JJEHAEBDF( f8_arg0 ) ~= GameScriptConstants.EntityNumNone and (not Engine.BGGJFFFAFG( f8_arg0 ) or (DataSources.inGame.player.useReloadProfile:GetValue( f8_arg0 ) or -1) == 0 or 250 < f11_local1) then
				local f11_local4 = DataModel.JJEHAEBDF( f8_arg0 )
				if f11_local4 == 1 then
					f11_local4 = 0
					f8_arg0.progressStarted = false
				elseif 0 < f11_local4 then
					f8_arg0.progressStarted = true
					f8_arg0._requiresHolding = false
					ACTIONS.AnimateSequence( f8_arg0.ProgressButton.InteractiveObjectButtonIcon, "DontHold" )
				end
				if Engine.BGGJFFFAFG( f8_arg0 ) then
					f8_arg0:SetProgress( f11_local4 )
					f8_arg0:SetAlpha( 1 )
				else
					f8_arg0:SetProgress( f11_local4 )
				end
			else
				f8_arg0:SetProgress( 0 )
				f8_arg0:SetProgress( 0 )
				f8_arg0:SetAlpha( 0 )
				if DataModel.JJEHAEBDF( f8_arg0 ) then
					f8_arg0.progressStarted = false
				end
				if f8_arg0.progressStarted then
					f8_arg0.progressStarted = false
					f8_arg0._currentState = "NotCompleted"
					ACTIONS.AnimateSequence( f8_arg0.ProgressButton, "NotCompleted" )
					local f11_local5 = f8_arg0:Wait( f8_arg0 )
					f11_local5.onComplete = function ()
						f11_local0._currentState = nil
						f11_local0:Update()
					end
					
				end
			end
		end
	end
	
	f8_arg0:SubscribeToModel( f8_local16, f8_local25 )
	f8_arg0:SubscribeToModel( f8_local19, f8_local25 )
	f8_arg0:SubscribeToModel( f8_local17, f8_local25 )
	f8_arg0:SubscribeToModel( f8_local10, f8_local25 )
	f8_arg0:SubscribeToModel( DataSources.inGame.HUD.hints.interactiveObject.weapon.ammoName:GetModel( f8_arg1 ), function ()
		local f10_local0 = f8_arg0:GetValue( f8_arg0 )
		if f10_local0 and 0 < #f10_local0 then
			if WEAPON.IsBaseWeaponDismemberment( f8_arg0, DataSources.inGame.HUD.hints.interactiveObject.weapon.baseName ) then
				f10_local0 = f10_local0 .. WEAPON.dismembermentAmmoSuffix
			end
			f8_arg0.AmmoName:setText( Engine.CBBHFCGDIC( f10_local0 ) )
		end
	end )
	f8_arg0.ProgressButton.KBMProgress.KeyString.onDirectiveInvalidated = function ( f9_arg0 )
		f8_arg0.ProgressButton.KBMProgress:DirectiveInvalidated( f9_arg0 )
		f8_arg0.HandleHoldAnimation()
		f8_arg0:SizePromptPositionToContent( f8_arg0 )
	end
	
end

function InteractiveObjectPopup( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 600 * _1080p, 0, 32 * _1080p )
	self.id = "InteractiveObjectPopup"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local HintBG = nil
	
	HintBG = LUI.UIImage.new()
	HintBG.id = "HintBG"
	HintBG:SetRGBFromTable( SWATCHES.HUD.warning, 0 )
	HintBG:SetAlpha( 0, 0 )
	HintBG:SetPixelGridEnabled( true )
	HintBG:SetPixelGridContrast( 0.5, 0 )
	HintBG:SetPixelGridBlockWidth( 2, 0 )
	HintBG:SetPixelGridBlockHeight( 2, 0 )
	HintBG:SetPixelGridGutterWidth( 1, 0 )
	HintBG:SetPixelGridGutterHeight( 1, 0 )
	HintBG:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 600, _1080p * -8, _1080p * 44 )
	self:addElement( HintBG )
	self.HintBG = HintBG
	
	local MessageText = nil
	
	MessageText = LUI.UIStyledText.new()
	MessageText.id = "MessageText"
	MessageText:SetRGBFromTable( SWATCHES.HUD.HUDMain, 0 )
	MessageText:setText( "", 0 )
	MessageText:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	MessageText:SetAlignment( LUI.Alignment.Left )
	MessageText:SetOptOutRightToLeftAlignmentFlip( true )
	MessageText:SetShadowMinDistance( -0.2, 0 )
	MessageText:SetShadowMaxDistance( 0.2, 0 )
	MessageText:SetShadowUOffset( -0.002, 0 )
	MessageText:SetShadowRGBFromTable( SWATCHES.HUD.HUDShadow, 0 )
	MessageText:SetDecodeUseSystemTime( false )
	MessageText:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -300, _1080p * 300, _1080p * -14, _1080p * 14 )
	self:addElement( MessageText )
	self.MessageText = MessageText
	
	local MantleHint = nil
	
	MantleHint = LUI.UIStyledText.new()
	MantleHint.id = "MantleHint"
	MantleHint:SetRGBFromTable( SWATCHES.HUD.HUDMain, 0 )
	MantleHint:setText( Engine.CBBHFCGDIC( "PLATFORM/MANTLE" ), 0 )
	MantleHint:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	MantleHint:SetAlignment( LUI.Alignment.Center )
	MantleHint:SetTintFontIcons( true )
	MantleHint:SetShadowMaxDistance( 0.01, 0 )
	MantleHint:SetShadowUOffset( -0.002, 0 )
	MantleHint:SetShadowVOffset( -0.001, 0 )
	MantleHint:SetShadowRGBFromTable( SWATCHES.HUD.HUDShadow, 0 )
	MantleHint:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -300, _1080p * 300, _1080p * -12, _1080p * 12 )
	self:addElement( MantleHint )
	self.MantleHint = MantleHint
	
	local InteractiveObjectIcon = nil
	
	InteractiveObjectIcon = MenuBuilder.BuildRegisteredType( "InteractiveObjectIcon", {
		controllerIndex = f1_local1
	} )
	InteractiveObjectIcon.id = "InteractiveObjectIcon"
	InteractiveObjectIcon:SetScale( -0.1, 0 )
	InteractiveObjectIcon:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -130, _1080p * 126, _1080p * 2, _1080p * 130 )
	self:addElement( InteractiveObjectIcon )
	self.InteractiveObjectIcon = InteractiveObjectIcon
	
	local ProgressButton = nil
	
	ProgressButton = MenuBuilder.BuildRegisteredType( "InteractiveObjectPopupButton", {
		controllerIndex = f1_local1
	} )
	ProgressButton.id = "ProgressButton"
	ProgressButton:SetAlpha( 0, 0 )
	ProgressButton:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -127, _1080p * -87, _1080p * -20, _1080p * 20 )
	self:addElement( ProgressButton )
	self.ProgressButton = ProgressButton
	
	local AmmoName = nil
	
	AmmoName = LUI.UIStyledText.new()
	AmmoName.id = "AmmoName"
	AmmoName:SetRGBFromTable( SWATCHES.HUD.overcharged, 0 )
	AmmoName:setText( "AmmoName", 0 )
	AmmoName:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	AmmoName:SetAlignment( LUI.Alignment.Left )
	AmmoName:SetOptOutRightToLeftAlignmentFlip( true )
	AmmoName:SetShadowMaxDistance( 0.01, 0 )
	AmmoName:SetShadowUOffset( -0.002, 0 )
	AmmoName:SetShadowVOffset( -0.001, 0 )
	AmmoName:SetShadowRGBFromTable( SWATCHES.HUD.HUDShadow, 0 )
	AmmoName:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -250, _1080p * 250, _1080p * 12, _1080p * 32 )
	self:addElement( AmmoName )
	self.AmmoName = AmmoName
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	local f1_local9 = nil
	HintBG:RegisterAnimationSequence( "ShowHintBG", {
		{
			value = -9.255965339091385E+61,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ShowHintBG = function ()
		menu:AnimateSequence( "ShowHintBG" )
	end
	
	local f1_local10 = nil
	HintBG:RegisterAnimationSequence( "HideHintBG", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.HideHintBG = function ()
		menu:AnimateSequence( "HideHintBG" )
	end
	
	local f1_local11 = nil
	HintBG:RegisterAnimationSequence( "ShowHintWarning", {
		{
			value = -2.3534382785503553E-185,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 4.6672616413205735E-62,
			duration = 780,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = -2.3534382785503553E-185,
			duration = 620,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ShowHintWarning = function ()
		menu:AnimateLoop( "ShowHintWarning" )
	end
	
	local f1_local12 = nil
	HintBG:RegisterAnimationSequence( "ShowHintWarning1", {
		{
			value = -2.3534382785503553E-185,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 5.29462817E-315,
			duration = 400,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = -2.3534382785503553E-185,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ShowHintWarning1 = function ()
		menu:AnimateLoop( "ShowHintWarning1" )
	end
	
	local f1_local13 = nil
	HintBG:RegisterAnimationSequence( "ShowHintWarning2", {
		{
			value = 5.297218497E-315,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 4.6672616413205735E-62,
			duration = 150,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 5.297218497E-315,
			duration = -18,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ShowHintWarning2 = function ()
		menu:AnimateLoop( "ShowHintWarning2" )
	end
	
	PostLoadFunc( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "InteractiveObjectPopup", InteractiveObjectPopup )
LockTable( _M )
