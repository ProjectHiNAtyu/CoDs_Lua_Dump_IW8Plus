-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:04
BROKEN_ARROW = BROKEN_ARROW or {}
BROKEN_ARROW.ELEMENT_DATA = {}
BROKEN_ARROW.MAXIMUM_ELEMENT_STATES = 3
BROKEN_ARROW.MAXIMUM_ALLY_INDEXES = 4
BROKEN_ARROW.MAXIMUM_ENEMY_INDEXES = 4
BROKEN_ARROW.MINIMUM_ELEMENTS = 3
BROKEN_ARROW.ELEMENT_STATES_BITS = 4
BROKEN_ARROW.ALLY_INDEXES_BITS = 2
BROKEN_ARROW.ELEMENT_COUNT_BITS = 3
BROKEN_ARROW.CQ_CHALLENGE_WIN_GENERIC = "jup_br_cq_win_generic"
BROKEN_ARROW.CQ_CHALLENGE_WIN_SEASONAL = "jup_br_cq_win_s"
BROKEN_ARROW.CQ_CHALLENGE_DEFUSAL_GENERIC = "jup_br_cq_defusal_generic"
BROKEN_ARROW.CQ_CHALLENGE_WITNESS_GENERIC = "jup_br_cq_witness_generic"
BROKEN_ARROW.CQ_CHALLENGE_WIN_GENERIC_RESURGENCE = "jup_res_cq_win_generic2"
BROKEN_ARROW.CQ_CHALLENGE_WIN_SEASONAL_RESURGENCE = "jup_res_cq_win_s"
BROKEN_ARROW.NUM_STREAK_FOR_TOKEN = Dvar[0x22EAAB59AA27E9B]( 0x4DF4E3F3001D986 ) or 30
BROKEN_ARROW.NUM_STREAK_FOR_TOKEN_RESURGENCE = Dvar[0x22EAAB59AA27E9B]( 0x656FA6B1C0D6A58 ) or 30
BROKEN_ARROW.CHAMPIONS_QUEST_TOKEN_ID = "29387"
BROKEN_ARROW.CHAMPIONS_QUEST_TOKEN_RESURGENCE_ID = "28423"
BROKEN_ARROW.CHAMPIONS_QUEST_IS_ATTAINABLE_DVAR = 0x5A1ED391DD67630
BROKEN_ARROW.aarStates = {
	INTO = 1,
	OUTRO = 3
}
BROKEN_ARROW.EVENT_COMPLETED_CALLED = false
BROKEN_ARROW.InitializeElementIcons = function ()
	if 0 < #BROKEN_ARROW.ELEMENT_DATA then
		return 
	end
	local f11_local0 = Game[0x83E0D59EFF44E21]()
	local f11_local1 = Engine[0x6093D047200548]( 0xF91E0713B3E26DF .. f11_local0[0x4D26C2E49211EDE] )
	f11_local1 = f11_local1[0x3E6604B8991BA7F]
	local f11_local2 = 0xC5D658248B22217
	if not f11_local1 or #f11_local1 == 0 then
		return 
	end
	for f11_local3 = 1, #f11_local1, 1 do
		local f11_local6 = nil
		if f11_local1[f11_local3][0x691D5826A3CBE3F] then
			f11_local6 = Engine[0x6093D047200548]( f11_local2 .. f11_local1[f11_local3][0x691D5826A3CBE3F] )
			if f11_local6 and f11_local6[0xAF6E427751D019A] then
				BROKEN_ARROW.ELEMENT_DATA[f11_local6[0xAF6E427751D019A]] = {}
				BROKEN_ARROW.ELEMENT_DATA[f11_local6[0xAF6E427751D019A]].icon = f11_local6[0xF79326465BE61B6]
			end
		end
	end
end

BROKEN_ARROW.InitializeElementList = function ()
	local f10_local0 = {}
	local f10_local1 = Dvar[0x54084D7CA2317BB]( 0x87FBE54205F4583 ) or "ber plu tri"
	if not f10_local1 or #f10_local1 < BROKEN_ARROW.MINIMUM_ELEMENTS then
		return 
	end
	for f10_local5 in string.gmatch( f10_local1, "%S+" ) do
		if not BROKEN_ARROW.ELEMENT_DATA[f10_local5] then
			return {}
		end
		table.insert( f10_local0, f10_local5 )
	end
	if BROKEN_ARROW.EVENT_COMPLETED_CALLED then
		BROKEN_ARROW.EVENT_COMPLETED_CALLED = false
	end
	return f10_local0
end

BROKEN_ARROW.CONTRACT_STATE = {
	LOCATE_ELEMENTS = 2,
	DEFEND_TARGET = 6,
	FAILED = 1,
	ARM_TARGET = 5,
	DEPOSIT_ELEMENTS = 4,
	COMPLETED = 7,
	WAITING_BOMB = 3
}
BROKEN_ARROW.CONTRACT_STATE_TEXT = {
	[BROKEN_ARROW.CONTRACT_STATE.LOCATE_ELEMENTS] = 0x9995B9954498C4,
	[BROKEN_ARROW.CONTRACT_STATE.WAITING_BOMB] = 0xFF7110B8F1F36CD,
	[BROKEN_ARROW.CONTRACT_STATE.DEPOSIT_ELEMENTS] = 0x2C7BB004C6DF39A,
	[BROKEN_ARROW.CONTRACT_STATE.ARM_TARGET] = 0x4EFB4BD90BBDD3E,
	[BROKEN_ARROW.CONTRACT_STATE.DEFEND_TARGET] = 0x8F62C9E9927B8AB
}
BROKEN_ARROW.RESURGENCE_LOCATING_OVERRIDE = 0x71E11B449C77AA8
BROKEN_ARROW.ELEMENT_STATUS = {
	AVAILABLE = 3,
	DEPOSITED_4TH = 9,
	NUMBER = 10,
	LOCATING = 2,
	TRIGGERED = 11,
	DEPOSITED_3RD = 8,
	UNDISCOVERED = 1,
	DEPOSITED_2ND = 7,
	DEPOSITED_1ST = 6,
	ACQUIRED_ENEMY = 5,
	ACQUIRED_FRIENDLY = 4
}
BROKEN_ARROW.ELEMENT_STATUS_TEXT = {
	[BROKEN_ARROW.ELEMENT_STATUS.UNDISCOVERED] = "Undiscovered",
	[BROKEN_ARROW.ELEMENT_STATUS.LOCATING] = "Locating",
	[BROKEN_ARROW.ELEMENT_STATUS.AVAILABLE] = "Available",
	[BROKEN_ARROW.ELEMENT_STATUS.ACQUIRED_FRIENDLY] = "Acquired_Friendly",
	[BROKEN_ARROW.ELEMENT_STATUS.ACQUIRED_ENEMY] = "Acquired_Enemy",
	[BROKEN_ARROW.ELEMENT_STATUS.DEPOSITED_1ST] = "Deposited",
	[BROKEN_ARROW.ELEMENT_STATUS.DEPOSITED_2ND] = "Deposited",
	[BROKEN_ARROW.ELEMENT_STATUS.DEPOSITED_3RD] = "Deposited",
	[BROKEN_ARROW.ELEMENT_STATUS.DEPOSITED_4TH] = "Deposited",
	[BROKEN_ARROW.ELEMENT_STATUS.NUMBER] = "Number",
	[BROKEN_ARROW.ELEMENT_STATUS.TRIGGERED] = "Triggered"
}
BROKEN_ARROW.BOMBSITE_STATUS = {
	AVAILABLE = 2,
	UNDISCOVERED = 0,
	WIPED_CAN_STILL_WIN = 3,
	LOCATING = 1
}
BROKEN_ARROW.BOMBSITE_STATE = {
	[BROKEN_ARROW.BOMBSITE_STATUS.UNDISCOVERED] = "Undiscovered",
	[BROKEN_ARROW.BOMBSITE_STATUS.LOCATING] = "Locating",
	[BROKEN_ARROW.BOMBSITE_STATUS.AVAILABLE] = "Available",
	[BROKEN_ARROW.BOMBSITE_STATUS.WIPED_CAN_STILL_WIN] = "Wiped_can_still_win"
}
BROKEN_ARROW.IsDepositedElementStatus = function ( f9_arg0 )
	local f9_local0
	if f9_arg0 < BROKEN_ARROW.ELEMENT_STATUS.DEPOSITED_1ST or f9_arg0 > BROKEN_ARROW.ELEMENT_STATUS.DEPOSITED_4TH then
		f9_local0 = false
	else
		f9_local0 = true
	end
	return f9_local0
end

BROKEN_ARROW.ShouldShowChampionsQuestRewardsAAR = function ( f8_arg0 )
	if not CONDITIONS.IsChampionsQuestFeatureEnabled() then
		return false
	elseif Dvar[0x9E5BE3B4BBA4E0E]( 0x2A15AC628F7543E ) then
		return true
	elseif Dvar[0x9E5BE3B4BBA4E0E]( 0x3413794A39F878D ) then
		return false
	end
	local f8_local0 = DataSources.inGame.MP.brPlayerPosition:GetValue( f8_arg0 ) == 1
	local f8_local1 = DataSources.inGame.player.BRData.championsQuestData.missionSuccess:GetValue( f8_arg0 ) == 1
	local f8_local2
	if f8_local0 then
		f8_local2 = f8_local0
	else
		f8_local2 = f8_local1
	end
	return f8_local2
end

local f0_local0 = function ( f7_arg0, f7_arg1 )
	local f7_local0 = Challenge.GetRewardFromID( Challenge.GetIDFromRef( f7_arg0, f7_arg1 ), f7_arg1 )
	if not String.IsNilOrEmpty( f7_local0 ) then
		return LUI.Split( tostring( f7_local0 ), "+" )
	else
		return {}
	end
end

BROKEN_ARROW.IsChampionsQuestChallenge = function ( f6_arg0 )
	local f6_local0 = Challenge.GetAEKindID( 0xFA05B54240772A3 )
	local f6_local1, f6_local2 = BROKEN_ARROW.GetChampionsQuestChallengeIDs()
	return f6_arg0 == Challenge.GetIDFromRef( f6_local1, f6_local0 )
end

BROKEN_ARROW.SetChallengeCompleted = function ()
	BROKEN_ARROW.EVENT_COMPLETED_CALLED = true
end

BROKEN_ARROW.GetChampionsQuestChallengeIDs = function ()
	local f4_local0 = BROKEN_ARROW.CQ_CHALLENGE_WIN_GENERIC
	local f4_local1 = BROKEN_ARROW.CQ_CHALLENGE_WIN_SEASONAL
	if CONDITIONS.IsResurgence() then
		f4_local0 = BROKEN_ARROW.CQ_CHALLENGE_WIN_GENERIC_RESURGENCE
		f4_local1 = BROKEN_ARROW.CQ_CHALLENGE_WIN_SEASONAL_RESURGENCE
	end
	return f4_local0, f4_local1
end

BROKEN_ARROW.GetChampionsQuestRewards = function ( f3_arg0 )
	local f3_local0 = Challenge.GetAEKindID( 0xFA05B54240772A3 )
	local f3_local1, f3_local2 = BROKEN_ARROW.GetChampionsQuestChallengeIDs()
	local f3_local3 = f0_local0( f3_local1, f3_local0 )
	local f3_local4 = f0_local0( f3_local2 .. SEASON.GetCurrentSeason(), f3_local0 )
	local f3_local5 = {}
	local f3_local6 = 0
	for f3_local7 = 1, #f3_local3, 1 do
		if BROKEN_ARROW.EVENT_COMPLETED_CALLED or Dvar[0x9E5BE3B4BBA4E0E]( 0xEFE7B12B6B57F29 ) then
			local f3_local10 = Challenge.GetLootReward( f3_local3[f3_local7] )
			if f3_local10 then
				f3_local6 = f3_local6 + 1
				table.insert( f3_local5, f3_local10 )
			end
		end
	end
	for f3_local7 = 1, #f3_local4, 1 do
		local f3_local10 = Challenge.GetLootReward( f3_local4[f3_local7] )
		if f3_local10 then
			f3_local6 = f3_local6 + 1
			table.insert( f3_local5, f3_local10 )
		end
	end
	return f3_local5, f3_local6
end

BROKEN_ARROW.GetCQCombinedProgressData = function ( f2_arg0, f2_arg1 )
	local f2_local0 = {
		numWins = 0,
		hasCQToken = false
	}
	local f2_local1 = BROKEN_ARROW.CHAMPIONS_QUEST_TOKEN_ID
	if f2_arg1 or CONDITIONS.IsResurgence() then
		f2_local1 = BROKEN_ARROW.CHAMPIONS_QUEST_TOKEN_RESURGENCE_ID
	end
	local f2_local2 = OnlineChallenges[0x1EEE6570EF4BB8B]( f2_arg0, f2_local1, Challenge.AccountType.PLAYER )
	if not f2_local2 then
		return f2_local0
	end
	local f2_local3 = f2_local2.progress.progress
	local f2_local4 = f2_local2.progress.sub_progress
	local f2_local5 = {}
	local f2_local6
	if f2_local3 == nil or 0 >= f2_local3 then
		f2_local6 = false
	else
		f2_local6 = true
	end
	f2_local5.hasCQToken = f2_local6
	if f2_local4 ~= nil and not f2_local4 then
		f2_local6 = f2_local4
	else
		f2_local6 = 0
	end
	f2_local5.numWins = f2_local6
	return f2_local5
end

BROKEN_ARROW.ShouldShowCQTrackerForPlaylist = function ( f1_arg0 )
	if Engine[0x2DA54CF5D6B7F02]() and Dvar[0x9E5BE3B4BBA4E0E]( 0x1655EC8FA84FDA8 ) then
		return true
	end
	local f1_local0 = false
	local f1_local1 = 0
	local f1_local2, f1_local3 = Lobby[0xE282396C3A4C54B]()
	if f1_local2 and f1_local2 == Enum[0x6898CF1A0F3B21E][0xC0D17BAD169557B] then
		f1_local1 = Lobby[0xB92DA1948EDB47D]( Lobby.PartyUIData.PLAYLIST_ID )
	else
		f1_local1 = Playlist[0x7B3B2B73B53EB34]()
	end
	if f1_local1 ~= 0 and Playlist[0x51BD000E00A13D3]( f1_local1 ) then
		f1_local1 = Playlist[0xA0DB94230B1AFC2]( f1_local1 )
	end
	local f1_local4 = 0x5389A9F15E7449
	if f1_arg0 and f1_arg0 == true then
		f1_local4 = 0x3B01D195989B905
	end
	local f1_local5 = String.Split( Dvar[0x54084D7CA2317BB]( f1_local4 ) or "", " " )
	if f1_local5 and 0 < #f1_local5 then
		for f1_local6 = 1, #f1_local5, 1 do
			if tonumber( f1_local5[f1_local6] ) == f1_local1 then
				f1_local0 = true
			end
		end
	end
	return f1_local0
end

