-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
module( ..., package.seeall )
local f0_local0 = SWATCHES.genericButton.textFocus
local f0_local1 = SWATCHES.CAC.equipped
local f0_local2 = SWATCHES.genericMenu.bodycopy
local f0_local3 = 0.5
local f0_local4 = SWATCHES.genericButton.description
local f0_local5 = 1
local f0_local6 = function ( f6_arg0, f6_arg1 )
	local f6_local0 = assert
	local f6_local1 = f6_arg0._pips
	if f6_local1 then
		f6_local1 = f6_arg1 <= #f6_arg0._pips
	end
	f6_local0( f6_local1 )
	for f6_local7, f6_local8 in ipairs( f6_arg0._pips ) do
		local f6_local9 = f6_local8.Pip
		if f6_local8.selected then
			f6_local8.selected = false
			if f6_local8.complete then
				f6_local9:SetRGBFromTable( f0_local0 )
				f6_local9:SetAlpha( f0_local0 )
			elseif f6_arg0._isActiveObjective and f6_local8.isActive then
				f6_local9:SetRGBFromTable( f0_local0 )
				f6_local9:SetAlpha( f0_local0 )
			else
				f6_local9:SetRGBFromTable( f0_local0 )
				f6_local9:SetAlpha( f0_local0 )
			end
			f6_local8.Lock:SetRGBFromTable( SWATCHES.genericButton.description )
		end
		if f6_local7 == f6_arg1 then
			local f6_local3 = f6_arg0._isActiveObjective and f6_local8.isActive
			local f6_local4 = f6_local9
			local f6_local5 = f6_local9.SetRGBFromTable
			local f6_local6
			if f6_local3 then
				f6_local6 = f0_local0
				if not f6_local6 then
				
				else
					f6_local5( f6_local4, f6_local6 )
					f6_local9:SetAlpha( f0_local0 )
					f6_local8.Lock:SetRGBFromTable( SWATCHES.tabManager.tabTextDisabled )
					f6_local8.selected = true
				end
			end
			f6_local6 = f0_local0
		end
	end
end

local f0_local7 = function ( f5_arg0, f5_arg1 )
	f5_arg0._isActiveObjective = f5_arg1
end

local f0_local8 = function ( f3_arg0, f3_arg1, f3_arg2, f3_arg3, f3_arg4 )
	local f3_local0 = assert
	local f3_local1
	if f3_arg1 then
		f3_local1 = f3_arg1
	else
		f3_local1 = 0 < f3_arg1
	end
	f3_local0( f3_local1 )
	for f3_local0 = 1, #f3_arg0._pips, 1 do
		f3_arg0._pips[f3_local0]:closeTree()
	end
	f3_arg0._pips = {}
	f3_local0 = not f3_arg4
	local f3_local2 = f3_arg0._pipHeight / 2
	for f3_local1 = 1, f3_arg1, 1 do
		local self = LUI.UIButton.new()
		self.id = "Pip" .. f3_local1
		self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, f3_arg0._pipWidth, -f3_local2, f3_local2 )
		local f3_local6 = 6 * _1080p
		local f3_local7 = 6 * _1080p
		local f3_local8 = LUI.UIImage.new()
		f3_local8.id = "Pip" .. f3_local1 .. "Image"
		f3_local8:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -f3_local7, f3_local7, -f3_local7, f3_local7 )
		local f3_local9 = LUI.UIImage.new()
		f3_local9.id = "Lock"
		f3_local9:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -f3_local6, f3_local6, -f3_local6, f3_local6 )
		f3_local9:SetRGBFromTable( SWATCHES.genericButton.description )
		f3_local9:setImage( RegisterMaterial( "icon_lock" ) )
		self:addElement( f3_local8 )
		self:addElement( f3_local9 )
		self.Pip = f3_local8
		self.Lock = f3_local9
		f3_arg0._pipContainer:addElement( self )
		self.complete = f3_local1 <= f3_arg2
		self.index = f3_local1
		local f3_local10 = self.Pip
		if self.complete then
			f3_local10:SetRGBFromTable( f0_local0 )
			f3_local10:SetAlpha( f0_local0 )
			self.Lock:SetAlpha( 0 )
		else
			if f3_local0 then
				f3_local0 = false
				self.isActive = true
			else
				self.isActive = false
			end
			if f3_arg0._isActiveObjective and self.isActive then
				f3_local10:SetRGBFromTable( f0_local0 )
				f3_local10:SetAlpha( f0_local0 )
			else
				f3_local10:SetRGBFromTable( f0_local0 )
				f3_local10:SetAlpha( f0_local0 )
			end
			if not self.isActive then
				self.Lock:SetAlpha( 0.9 )
			else
				self.Lock:SetAlpha( 0 )
			end
		end
		self:registerEventHandler( "leftmouseup", function ( self, event )
			local f4_local0 = self:getParent()
			f4_local0:dispatchEventToParent( {
				name = "mission_details_mouse_navigate",
				index = self.index
			} )
		end )
		table.insert( f3_arg0._pips, self )
	end
	if f3_arg3 and f3_arg3 == LUI.Alignment.Center then
		f3_arg0._pipContainer:SetLeft( -(f3_arg1 * (f3_arg0._pipWidth + f3_arg0._spacing) / 2) )
	end
end

local f0_local9 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.Setup = f0_local0
	f2_arg0.SetSelected = f0_local0
	f2_arg0.SetActive = f0_local0
	f2_arg0._isActiveObjective = false
	local f2_local0, f2_local1, f2_local2, f2_local3 = f2_arg0.Pip:getLocalRect()
	f2_arg0._pipContainer = LUI.UIHorizontalStackedLayout.new()
	f2_arg0._pipContainer.id = "PipContainer"
	f2_arg0._pipContainer:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
	f2_arg0._pipContainer:SetSpacing( 3 * _1080p )
	f2_arg0:addElement( f2_arg0._pipContainer )
	f2_arg0._pipWidth = f2_local2 - f2_local0
	f2_arg0._pipHeight = f2_local3 - f2_local1
	f2_arg0._spacing = f2_arg0:GetSpacing()
	f2_arg0._pips = {}
	f2_arg0.Pip:closeTree()
	f2_arg0.Pip = nil
end

function BarracksChallengeMissionDetailsPips( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 15 * _1080p, 0, 5 * _1080p )
	self.id = "BarracksChallengeMissionDetailsPips"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local Pip = nil
	
	Pip = LUI.UIImage.new()
	Pip.id = "Pip"
	Pip:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, 0, _1080p * 15, _1080p * -2.5, _1080p * 2.5 )
	self:addElement( Pip )
	self.Pip = Pip
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "BarracksChallengeMissionDetailsPips", BarracksChallengeMissionDetailsPips )
LockTable( _M )
