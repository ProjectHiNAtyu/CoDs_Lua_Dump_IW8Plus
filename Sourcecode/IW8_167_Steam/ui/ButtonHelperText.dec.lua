-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 17-11-2025 01:21
LUI.ButtonHelperText = LUI.Class( LUI.UIElement )
local f0_local0 = CoD.TextSettings.ButtonHelperFont
local f0_local1 = 30 * _1080p
local f0_local2 = 12
local f0_local3 = 2
local f0_local4 = 10.66
local f0_local5 = 10 * _1080p
local f0_local6 = SWATCHES.tabManager.tabText
LUI.ButtonHelperText.GAMEPAD_BUTTON_ICON_HEIGHT = 20
LUI.ButtonHelperText.PROMPT_ORDER = {
	nil,
	"button_primary",
	"button_secondary",
	"button_start",
	"button_alt1"
}
TOOLTIPS = {
	EXIT = {
		key = Engine.CBEAHDFCFC( Engine.CBBHFCGDIC( "LUA_MENU/QUIT_DESKTOP" ) ),
		text = Engine.CBBHFCGDIC( "LUA_MENU/FOOTER_TOOLTIP_QUIT" )
	},
	OPTIONS = {
		key = Engine.CBEAHDFCFC( Engine.CBBHFCGDIC( "LUA_MENU/OPTIONS_CAPS" ) ),
		text = Engine.CBBHFCGDIC( "LUA_MENU/FOOTER_TOOLTIP_OPTIONS" )
	},
	DISMISS = {
		key = Engine.CBEAHDFCFC( Engine.CBBHFCGDIC( "LUA_MENU/DISMISS_MENU" ) ),
		text = Engine.CBBHFCGDIC( "LUA_MENU/FOOTER_TOOLTIP_DISMISS_GAME" )
	},
	INSTALL = {
		key = Engine.CBEAHDFCFC( Engine.CBBHFCGDIC( "LUA_MENU/MODIFY_INSTALL" ) ),
		text = Engine.CBBHFCGDIC( "LUA_MENU/FOOTER_TOOLTIP_MODIFY_INSTALL" )
	}
}
LUI.ButtonHelperText.AutomaticIcons = {
	{
		icon = "FooterBackIcon",
		text = Engine.CBBHFCGDIC( "LUA_MENU/BACK" )
	},
	{
		icon = "FooterBackIcon",
		text = Engine.CBBHFCGDIC( "LUA_MENU/CLOSE" )
	},
	{
		icon = "FooterOptionsIcon",
		text = Engine.CBBHFCGDIC( "LUA_MENU/OPTIONS" )
	},
	{
		icon = "FooterCursorIcon",
		text = Engine.CBBHFCGDIC( "MPUI/ENABLE_CURSOR" )
	},
	{
		icon = "MuteAllIcon",
		text = Engine.CBBHFCGDIC( "LUA_MENU/MUTE_ALL" )
	},
	{
		icon = "UnmuteAllIcon",
		text = Engine.CBBHFCGDIC( "LUA_MENU/UNMUTE_ALL" )
	},
	{
		icon = "FooterNVidiaIcon",
		text = Engine.CBBHFCGDIC( "LUA_MENU/NVIDIA_SUMMARY" )
	},
	{
		icon = "FooterMouseIcon",
		text = Engine.CBBHFCGDIC( "LUA_MENU/NVIDIA_HIGHLIGHTS" )
	}
}
local f0_local7 = function ( f31_arg0 )
	if f31_arg0.optOutOfAutomaticKBMIcon then
		return nil
	end
	for f31_local3, f31_local4 in ipairs( LUI.ButtonHelperText.AutomaticIcons ) do
		if string.find( f31_arg0.helper_text, f31_local4.text ) then
			return f31_local4
		end
	end
	return nil
end

local f0_local8 = function ( f30_arg0 )
	local f30_local0 = ""
	for f30_local4, f30_local5 in pairs( TOOLTIPS ) do
		if f30_arg0 == f30_local5.key then
			f30_local0 = f30_local5.text
			break
		end
	end
	return f30_local0
end

local f0_local9 = function ( f29_arg0, f29_arg1 )
	local f29_local0
	if not f29_arg1.clickable then
		f29_local0 = f29_arg1.kbm_only
		if f29_local0 then
		
		else
			return f29_local0
		end
	end
	f29_local0 = LUI.IsLastInputKeyboardMouse( f29_arg0 )
end

local f0_local10 = function ( f28_arg0 )
	return f28_arg0.button_ref and f28_arg0.button_ref or f28_arg0.button_ref2
end

local f0_local11 = function ( f27_arg0 )
	local f27_local0 = Engine.HDGDBCJFG()
	if not f27_local0 then
		f27_local0 = LUI.IsLastInputGamepad( f27_arg0 )
	end
	local f27_local1
	if f27_local0 then
		f27_local1 = LUI.ButtonHelperText.GAMEPAD_BUTTON_ICON_HEIGHT
		if not f27_local1 then
		
		else
			return f27_local1
		end
	end
	f27_local1 = f0_local0.Height
end

local f0_local12 = function ( f26_arg0, f26_arg1, f26_arg2 )
	assert( ButtonMap[f26_arg1] )
	if not f26_arg2.useTextButtons or LUI.IsLastInputGamepad( f26_arg0 ) then
		return CoD.GetIconForButton( f26_arg1 )
	else
		return CoD.GetTextForButton( f26_arg1 )
	end
end

local f0_local13 = function ( f25_arg0, f25_arg1, f25_arg2 )
	if not f0_local0( f25_arg0, f25_arg2 ) then
		local f25_local0, f25_local1, f25_local2, f25_local3 = GetTextDimensions( f0_local0( f25_arg0, f25_arg1, f25_arg2 ), f0_local0.Font, f0_local0( f25_arg0 ) )
		return f25_local2 - f25_local0
	elseif f0_local0( f25_arg2 ) then
		return f0_local0
	else
		return 0
	end
end

local f0_local14 = function ( f24_arg0, f24_arg1 )
	local f24_local0 = 5
	local f24_local1 = 0.1
	local f24_local2, f24_local3, f24_local4, f24_local5 = GetTextDimensions( f24_arg0, f0_local0.Font, f0_local0.Height )
	local f24_local6 = f24_local4 - f24_local2
	if not f24_arg1 then
		f24_local6 = f24_local6 + f24_local0
	else
		local f24_local7 = f24_local6 * f24_local1
		if f24_local7 < f24_local0 and not f24_local0 then
			f24_local7 = f24_local0
		else
			
		end
		f24_local6 = f24_local6 + f24_local7
	end
	return f24_local6 * _1080p
end

local f0_local15 = function ( f23_arg0, f23_arg1, f23_arg2, f23_arg3, f23_arg4 )
	local f23_local0 = f0_local0( f23_arg0, f23_arg1 )
	local f23_local1 = 0
	local f23_local2 = 0
	local f23_local3 = 0
	local f23_local4 = 0
	local f23_local5 = 0
	if f23_arg2 and not f23_local0 then
		f23_local2 = f0_local0( f23_arg0, f23_arg2, f23_arg1 )
	end
	f23_local4 = f0_local0( f23_arg1.helper_text, f23_local0 )
	if f23_arg3 and not f23_local0 then
		f23_local3 = f0_local0( f23_arg0, f23_arg3, f23_arg1 )
	end
	return (f23_arg4 - f23_local2 + f23_local4 + f23_local3) / 2
end

local f0_local16 = function ( f22_arg0, f22_arg1, f22_arg2 )
	local f22_local0 = f0_local0( f22_arg0, f22_arg2 ) or f22_arg2.always_use_alt_PC_icon
	local f22_local1 = f0_local0( f22_arg0, f22_arg1, f22_arg2 )
	local f22_local2 = f0_local0( f22_arg0, f22_arg1, f22_arg2 )
	local f22_local3 = f0_local0( f22_arg0 )
	local self = nil
	if not f22_local0 then
		self = LUI.UIStyledText.new()
		self:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, 0, f22_local2, -f22_local3 / 2, f22_local3 / 2 )
		self:SetRGBFromTable( f0_local0 )
		self:SetFont( f0_local0.Font )
		self:SetAlignment( LUI.Alignment.Center )
		self:SetTintFontIcons( true )
		self:SetAlpha( 0.8, 0 )
		self:SetWordWrap( false )
		self.id = f22_arg2.side .. "Icon"
		self:setText( f22_local1 )
	else
		local f22_local5 = f0_local0( f22_arg2 )
		if f22_local5 then
			self = MenuBuilder.BuildRegisteredType( f22_local5.icon, {
				controllerIndex = f22_arg0
			} )
			local f22_local6, f22_local7, f22_local8, f22_local9 = self:getLocalRect()
			self:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, 0, f22_local8 - f22_local6, -f22_local3 / 2, f22_local3 / 2 )
			self:SetTintFontIcons( true )
			self:SetRGBFromTable( f0_local0 )
			self:SetAlpha( 1, 0 )
			self.id = f22_arg2.side .. "Icon"
		end
	end
	return self
end

local f0_local17 = function ( f19_arg0, f19_arg1, f19_arg2 )
	local f19_local0 = f0_local0( f19_arg0, f19_arg1 )
	local f19_local1 = f0_local0( f19_arg1.helper_text, f19_local0 )
	if not f19_local0 or not SWATCHES.genericButton.listButtonDefault then
		local f19_local2 = f0_local0
	end
	if f19_arg1.overrideTextUpColor then
		local f19_local2 = f19_arg1.overrideTextUpColor
	end
	if not f19_local0 or not SWATCHES.genericButton.textFocus then
		local f19_local3 = SWATCHES.buttonHelper.helperText
	end
	if f19_arg1.overrideTextOverColor then
		local f19_local2 = f19_arg1.overrideTextOverColor
	end
	if CONDITIONS.IsWZWipDvarEnabled() then
		local f19_local3 = SWATCHES.CH2.WZGenericText
		local f19_local2 = SWATCHES.CH2.WZGenericTabText
	end
	local f19_local4 = {
		{
			duration = 10,
			property = TWEEN_PROPERTY.RGB,
			value = f19_local3
		}
	}
	local f19_local5 = {
		{
			duration = 10,
			property = TWEEN_PROPERTY.RGB,
			value = f19_local2
		}
	}
	local self = LUI.UIText.new()
	local f19_local7 = f0_local0.Height * _1080p * 0.5
	self:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, 0, f19_local1, -f19_local7, f19_local7 )
	self:SetFont( f0_local0.Font )
	local f19_local8 = self
	local f19_local9 = self.SetAlignment
	local f19_local10
	if f19_arg2 then
		f19_local10 = LUI.Alignment.Center
		if not f19_local10 then
		
		else
			f19_local9( f19_local8, f19_local10 )
			self:SetRGBFromTable( f19_local2 )
			self.id = "promptText" .. f19_arg1.primaryRef
			self.ref = f19_arg1.primaryRef
			self:setText( f19_arg1.helper_text )
			self:SetOptOutRightToLeftAlignmentFlip( true )
			self:SetWordWrap( false )
			self:RegisterAnimationSequence( "buttonOver", f19_local4 )
			self:RegisterAnimationSequence( "buttonUp", f19_local5 )
			self:AnimateSequence( "buttonUp" )
			self:registerEventHandler( "button_up", function ( self, event )
				self:AnimateSequence( "buttonUp" )
			end )
			self:registerEventHandler( "button_over", function ( self, event )
				self:AnimateSequence( "buttonOver" )
			end )
			return self
		end
	end
	f19_local10 = LUI.Alignment.Left
end

function SendButtonEvent( f18_arg0, f18_arg1 )
	if f18_arg0.data.clickable and f18_arg1.mouse == true then
		local f18_local0 = {}
		assert( ButtonMap[f18_arg0.data.primaryRef].raw_button )
		local f18_local1 = ButtonMap[f18_arg0.data.primaryRef]
		f18_local0.name = "gamepad_button"
		f18_local0.immediate = true
		f18_local0.button = f18_local1.raw_button
		f18_local0.down = f18_local0.button ~= "select"
		f18_local0.controller = f18_arg1.controller
		if f18_local1.qualifier then
			f18_local0.qualifier = f18_local1.qualifier
		end
		f18_arg0:dispatchEventToRoot( f18_local0 )
	end
end

local f0_local18 = function ( f17_arg0, f17_arg1, f17_arg2, f17_arg3 )
	local f17_local0 = nil
	local f17_local1 = f0_local0( f17_arg0, f17_arg1 )
	if f17_arg1.width then
		f17_local0 = f17_arg1.width
	else
		local f17_local2 = 0
		local f17_local3 = 0
		if f17_arg2 then
			f17_local2 = f0_local0( f17_arg0, f17_arg2, f17_arg1 )
		end
		local f17_local4 = f0_local0( f17_arg1.helper_text, f17_local1 )
		if f17_arg3 then
			f17_local3 = f0_local0( f17_arg0, f17_arg3, f17_arg1 )
		end
		if f17_local1 then
			local f17_local5 = f0_local0( f17_arg1 )
			f17_local0 = f17_local2 + f17_local4 + f17_local3 + f0_local0 * 2
			if f17_arg2 and f17_local5 then
				f17_local0 = f17_local0 + f0_local0
			end
			if f17_arg3 and f17_local5 then
				f17_local0 = f17_local0 + f0_local0
			end
		else
			f17_local0 = f17_local2 + f17_local4 + f17_local3
		end
	end
	return f17_local0
end

local f0_local19 = function ( f16_arg0, f16_arg1 )
	local f16_local0 = f16_arg1.button_ref
	local f16_local1 = f16_arg1.button_ref2
	local f16_local2 = f0_local0( f16_arg0, f16_arg1, f16_local0, f16_local1 )
	local f16_local3 = f0_local0( f16_arg0, f16_arg1 )
	f16_arg1.primaryRef = f0_local0( f16_arg1 )
	if f16_arg1.useTextButtons == nil then
		f16_arg1.useTextButtons = false
	end
	local self = LUI.UIButton.new()
	if f16_arg1.container then
		local f16_local5 = f16_arg1.container:GetCurrentAnchorsAndPositions()
		local f16_local6 = (f16_local5.right - f16_local5.left) / 2
		if f16_arg1.containerAlignment == LUI.Alignment.Right then
			self:SetAnchorsAndPosition( 1, 0, 0, 0, -f16_local2, 0, 0, 0 )
		elseif f16_arg1.containerAlignment == LUI.Alignment.Center then
			self:SetAnchorsAndPosition( 0.5, 0.5, 0, 0, f16_local6 - f16_local2 / 2, f16_local6 + f16_local2 / 2, 0, 0 )
		else
			self:SetAnchorsAndPosition( 0, 1, 0, 0, 0, f16_local2, 0, 0 )
		end
	else
		self:SetAnchorsAndPosition( 0, 1, 0, 0, 0, f16_local2, 0, 0 )
	end
	self.id = f16_arg1.primaryRef
	self.data = f16_arg1
	self.m_requireFocusType = FocusType.MouseOver
	self.ref = f16_arg1.primaryRef
	self.hasTwoButtons = f16_arg1.button_ref and f16_arg1.button_ref2
	self.blockKeyboardSound = true
	if f16_local3 then
		if not f16_arg1.ignoreButtonBackground then
			local f16_local5 = MenuBuilder.BuildRegisteredType( "GenericFooterButtonBackground", {
				controllerIndex = f16_arg0
			} )
			f16_local5.id = "ButtonBackground"
			f16_local5:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
			self:addElement( f16_local5 )
			self.ButtonBackground = f16_local5
		end
		if f16_local0 then
			local f16_local5 = CoD.GetTextForButton( f16_local0 )
			local f16_local6 = f16_arg1.helper_text
			if f16_arg1.kbmTooltipPromptOverload and f16_arg1.kbmTooltipPromptOverload ~= "" then
				f16_local5 = CoD.GetTextForButton( f16_arg1.kbmTooltipPromptOverload )
			end
			for f16_local10, f16_local11 in ipairs( LUI.ButtonHelperText.PROMPT_ORDER ) do
				if f16_local11 == f16_local0 then
					f16_local6 = f0_local0( Engine.CBEAHDFCFC( f16_local6 ) )
				end
			end
			if f16_local6 == f16_arg1.helper_text then
				f16_local6 = ""
			end
			if f16_local5 then
				f16_local7 = {
					{
						keyprompt_text = f16_local5,
						helper_text = f16_local6,
						button_ref = f16_local0,
						ignoreTooltipPrompt = f16_arg1.ignoreTooltipPrompt
					}
				}
				if not f16_arg1.ignoreTooltip then
					self:AddTooltipData( f16_arg0, {
						promptsData = f16_local7
					} )
				end
			end
		end
	end
	self:registerEventHandler( "button_action", SendButtonEvent )
	local f16_local5 = LUI.UIHorizontalList.new()
	if f16_local3 then
		f16_local5:SetAnchorsAndPosition( 0, 0, 0, 0, f0_local0, 0, 0, 0 )
	else
		f16_local5:SetAnchorsAndPosition( 0, 0, 0, 0, f0_local0( f16_arg0, f16_arg1, f16_local0, f16_local1, f16_local2 ), f16_local2, 0, 0 )
	end
	f16_local5:SetSpacing( f0_local0 )
	f16_local5.id = "helperHorizontalList"
	if f16_local0 then
		local f16_local6 = f0_local0( f16_arg0, f16_local0, f16_arg1 )
		if f16_local6 then
			f16_local6:SetRGBFromTable( f0_local0 )
			f16_local5:addElement( f16_local6 )
		end
	end
	f16_local5:addElement( f0_local0( f16_arg0, f16_arg1, self.hasTwoButtons ) )
	if f16_local1 then
		local f16_local6 = f0_local0( f16_arg0, f16_local1, f16_arg1 )
		if f16_local6 then
			f16_local6:SetRGBFromTable( f0_local0 )
			f16_local5:addElement( f16_local6 )
		end
	end
	if f16_local5:getNumChildren() == 1 then
		f16_local5:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
		f16_local5:SetAlignment( LUI.Alignment.Center )
	end
	self:addElement( f16_local5 )
	if f16_arg1.priority then
		self:setPriority( f16_arg1.priority )
	end
	if not f16_arg1.clickable then
		self:SetFocusable( false )
		self:SetHandleMouseButton( false )
	end
	return self
end

local f0_local20 = function ( f14_arg0 )
	local f14_local0 = 75
	local f14_local1 = -75
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 5, 26 )
	self.id = "buttonHelperListContainer"
	f14_arg0._buttonHelperLists = {}
	
	local buttonHelperLeftList = LUI.UIHorizontalList.new()
	buttonHelperLeftList:SetLeft( f14_local0 )
	buttonHelperLeftList:SetAlignment( LUI.Alignment.Left )
	buttonHelperLeftList:SetSpacing( f0_local0 )
	buttonHelperLeftList.id = "buttonHelperLeftList"
	buttonHelperLeftList.side = "left"
	self:addElement( buttonHelperLeftList )
	self.buttonHelperLeftList = buttonHelperLeftList
	
	f14_arg0._buttonHelperLists.left = buttonHelperLeftList
	
	local buttonHelperRightList = LUI.UIHorizontalList.new()
	buttonHelperRightList:SetRight( f14_local1 )
	buttonHelperRightList:SetAlignment( LUI.Alignment.Right )
	buttonHelperRightList:SetSpacing( f0_local0 )
	buttonHelperRightList.id = "buttonHelperRightList"
	buttonHelperRightList.side = "right"
	self:addElement( buttonHelperRightList )
	self.buttonHelperRightList = buttonHelperRightList
	
	f14_arg0._buttonHelperLists.right = buttonHelperRightList
	
	local buttonHelperCenterList = LUI.UIHorizontalList.new()
	buttonHelperCenterList:SetLeft( f14_local0 )
	buttonHelperCenterList:SetRight( f14_local1 )
	buttonHelperCenterList:SetAlignment( LUI.Alignment.Center )
	buttonHelperCenterList:SetSpacing( f0_local0 )
	buttonHelperCenterList.id = "buttonHelperCenterList"
	buttonHelperCenterList.side = "center"
	self:addElement( buttonHelperCenterList )
	self.buttonHelperCenterList = buttonHelperCenterList
	
	f14_arg0._buttonHelperLists.center = buttonHelperCenterList
	if LUI.IsLastInputKeyboardMouse( f14_arg0._controllerIndex ) then
		buttonHelperLeftList:SetSpacing( f0_local0 )
		buttonHelperCenterList:SetSpacing( f0_local0 )
		buttonHelperRightList:SetSpacing( f0_local0 )
	end
	self:registerEventHandler( "update_input_type", function ( self, event )
		if LUI.IsLastInputKeyboardMouse( event.controllerIndex ) then
			self.buttonHelperLeftList:SetSpacing( f14_arg0 )
			self.buttonHelperCenterList:SetSpacing( f14_arg0 )
			self.buttonHelperRightList:SetSpacing( f14_arg0 )
		else
			self.buttonHelperLeftList:SetSpacing( f14_arg0 )
			self.buttonHelperCenterList:SetSpacing( f14_arg0 )
			self.buttonHelperRightList:SetSpacing( f14_arg0 )
		end
	end )
	return self
end

LUI.ButtonHelperText.GetPromptByButtonRef = function ( f13_arg0, f13_arg1 )
	for f13_local3, f13_local4 in pairs( f13_arg0._buttonHelperLists ) do
		if f13_local4:getFirstChild() then
			
		end
	end
end

LUI.ButtonHelperText.AddHelperListContainer = function ( f12_arg0, f12_arg1 )
	assert( f12_arg0._buttonHelperLists )
	local f12_local0 = assert
	local f12_local1
	if f12_arg1.id == "left" or f12_arg1.id == "right" then
		f12_local1 = false
	else
		f12_local1 = true
	end
	f12_local0( f12_local1, "Custom button helper containers cannot be named \"left\" or \"right\". These are reserved" )
	if f12_arg0._buttonHelperLists[f12_arg1.id] then
		return 
	else
		f12_arg0._buttonHelperLists[f12_arg1.id] = f12_arg1
	end
end

LUI.ButtonHelperText.AttemptRemoveHelperListContainer = function ( f11_arg0, f11_arg1 )
	assert( f11_arg0._buttonHelperLists )
	assert( f11_arg1 )
	local f11_local0 = nil
	if f11_arg0._promptStack and f11_arg0._promptStack[f11_arg1] and 0 < #f11_arg0._promptStack[f11_arg1] then
		f11_local0 = f11_arg0._promptStack[f11_arg1][#f11_arg0._promptStack[f11_arg1]].side
	end
	if f11_local0 == "left" or f11_local0 == "right" or f11_local0 == "center" or f11_local0 == nil then
		return 
	else
		local f11_local1 = f11_arg0._buttonHelperLists[f11_local0]
		if not f11_local1 then
			return 
		elseif f11_local1:getFirstChild() then
			return 
		else
			f11_arg0._buttonHelperLists[f11_local0] = nil
		end
	end
end

LUI.ButtonHelperText.PushButtonPrompt = function ( f10_arg0, f10_arg1 )
	local f10_local0 = assert
	local f10_local1
	if not f10_arg1.button_ref or 0 >= #f10_arg1.button_ref then
		f10_local1 = f10_arg1.button_ref2
		if f10_local1 then
			if 0 >= #f10_arg1.button_ref2 then
				f10_local1 = false
			else
				f10_local1 = true
			end
		end
	else
		f10_local1 = true
	end
	f10_local0( f10_local1 )
	assert( f10_arg1.helper_text )
	f10_arg1.replaceTop = f10_arg1.replaceTop or false
	if f10_arg1.container then
		f10_arg0:AddHelperListContainer( f10_arg1.container )
		f10_arg1.side = f10_arg1.container.id
	end
	if f10_arg1.useTextButtons == nil then
		f10_arg1.useTextButtons = false
	end
	f10_arg1.side = f10_arg1.side or "left"
	if f10_arg1.clickable == nil then
		f10_arg1.clickable = true
	end
	f10_local0 = f0_local0( f10_arg1 )
	assert( ButtonMap[f10_local0] )
	if not f10_arg0._promptStack[f10_local0] then
		f10_arg0._promptStack[f10_local0] = {}
	end
	local f10_local2 = f10_arg0.wasLastInputGamepad
	if f10_local2 then
		f10_local2 = not LUI.IsLastInputGamepad( f10_arg0._controllerIndex )
	end
	f10_arg0.wasLastInputGamepad = LUI.IsLastInputGamepad( f10_arg0._controllerIndex )
	f10_local1 = #f10_arg0._promptStack[f10_local0]
	if f10_arg1.helper_text == "" then
		DebugPrint( "Push button helper debug: Helper text is empty! " )
		f10_arg0:RemoveButtonPrompt( f10_local0 )
		return 
	elseif 0 < f10_local1 then
		f10_arg1.primaryRef = f0_local0( f10_arg1 )
		if LUI.AreTableContentsEqual( f10_arg1, f10_arg0._promptStack[f10_local0][f10_local1] ) and not f10_local2 then
			return 
		elseif f10_arg1.replaceTop then
			f10_arg0:RemoveButtonPrompt( f10_local0 )
			if f10_arg1.container then
				f10_arg0:AddHelperListContainer( f10_arg1.container )
			end
		else
			f10_arg0:CloseButtonPrompt( f10_local0 )
		end
	end
	table.insert( f10_arg0._promptStack[f10_local0], f10_arg1 )
	local f10_local3 = false
	if f10_arg1.force_display then
		f10_local3 = true
	elseif LUI.IsLastInputGamepad( f10_arg0._controllerIndex ) then
		if not f10_arg1.kbm_only then
			f10_local3 = true
		end
	elseif not f10_arg1.gamepad_only and f10_local0 ~= "button_primary" then
		f10_local3 = true
	end
	if f10_local3 then
		f10_arg0._buttonHelperLists[f10_arg1.side]:addElement( f0_local0( f10_arg0._controllerIndex, f10_arg1 ) )
	end
end

LUI.ButtonHelperText.RemoveButtonPrompt = function ( f9_arg0, f9_arg1 )
	if f9_arg0._promptStack == nil or f9_arg1 == nil then
		return 
	elseif f9_arg0._promptStack[f9_arg1] == nil then
		return 
	else
		f9_arg0:CloseButtonPrompt( f9_arg1 )
		f9_arg0:AttemptRemoveHelperListContainer( f9_arg1 )
		table.remove( f9_arg0._promptStack[f9_arg1] )
	end
end

LUI.ButtonHelperText.CloseButtonPrompt = function ( f8_arg0, f8_arg1 )
	local f8_local0 = f8_arg0:GetPromptByButtonRef( f8_arg1 )
	if f8_local0 then
		f8_local0:processEvent( {
			immediate = true,
			name = "lose_focus"
		} )
		f8_local0:closeTree()
	end
end

LUI.ButtonHelperText.RefreshButtonHelpers = function ( f7_arg0, f7_arg1 )
	f7_arg0._controllerIndex = f7_arg1.controllerIndex
	local f7_local0 = LUI.DeepCopy( f7_arg0._promptStack )
	for f7_local4, f7_local5 in pairs( f7_arg0._promptStack ) do
		if 0 < #f7_local5 then
			f7_arg0:RemoveButtonPrompt( f7_local4 )
		end
	end
	for f7_local4, f7_local5 in ipairs( f7_arg0.PROMPT_ORDER ) do
		if f7_local0[f7_local5] then
			local f7_local6 = f7_local0[f7_local5][#f7_local0[f7_local5]]
			if f7_local6 then
				f7_arg0:PushButtonPrompt( f7_local6 )
			end
			f7_local0[f7_local5] = nil
		end
	end
	for f7_local4, f7_local5 in pairs( f7_local0 ) do
		if 0 < #f7_local5 then
			f7_arg0:PushButtonPrompt( f7_local5[#f7_local5] )
		end
	end
end

LUI.ButtonHelperText.PopButtonPrompt = function ( f6_arg0, f6_arg1 )
	assert( f6_arg0._buttonHelperLists )
	local f6_local0 = f0_local0( f6_arg1 )
	if not f6_arg0._promptStack[f6_local0] then
		DebugPrint( "PopButtonPrompt: '" .. f6_local0 .. "' doesn't exist" )
		return 
	end
	f6_arg0:RemoveButtonPrompt( f6_local0 )
	local f6_local1 = f6_arg0._promptStack[f6_local0]
	if f6_local1 and 0 < #f6_local1 then
		f6_arg0:PushButtonPrompt( f6_local1[#f6_local1] )
	end
end

LUI.ButtonHelperText.SetupFocusOnlyButtonPrompt = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg1:addEventHandler( "gain_focus", function ( f5_arg0, f5_arg1 )
		f3_arg0:PushButtonPrompt( f3_arg0 )
	end )
	f3_arg1:addEventHandler( "lose_focus", function ( f4_arg0, f4_arg1 )
		if f4_arg0:isInFocus() then
			f3_arg0:PopButtonPrompt( f3_arg0 )
		end
	end )
end

local f0_local21 = function ( f2_arg0, f2_arg1 )
	f2_arg0:SetupFocusOnlyButtonPrompt( f2_arg1.focusButton, f2_arg1 )
end

LUI.ButtonHelperText.init = function ( f1_arg0, f1_arg1 )
	assert( f1_arg1.controllerIndex )
	f1_arg0._controllerIndex = f1_arg1.controllerIndex
	LUI.ButtonHelperText.super.init( f1_arg0 )
	f1_arg0:addElement( f0_local0( f1_arg0 ) )
	f1_arg0:registerEventHandler( "update_input_type", f1_arg0.RefreshButtonHelpers )
	f1_arg0:registerEventHandler( "add_button_helper_text", f1_arg0.PushButtonPrompt )
	f1_arg0:registerEventHandler( "remove_button_helper_text", f1_arg0.PopButtonPrompt )
	f1_arg0:registerEventHandler( "setup_focus_only_button_prompt", f0_local0 )
	f1_arg0._promptStack = {}
end

