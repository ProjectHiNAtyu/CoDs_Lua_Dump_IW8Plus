-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
LUI.UIAnchoredElement = {}
LUI.UIElementOnEntitySpawner = LUI.Class( LUI.UIElement )
LUI.UIAnchoredElement.ON_OBSTRUCTION = {
	ignore = 0,
	hide = 2,
	sendEvent = 1
}
LUI.UIAnchoredElement.ON_SCOPE = {
	ignore = 0,
	hide = 2,
	sendEvent = 1
}
LUI.UIElementOnEntitySpawner.FILTER = {
	priorityFlyingTargetAce = 512,
	characters = 1,
	underCrosshair = 16,
	offscreenHazardIndicator = 65536,
	smallTarget = 1024,
	aceTargetIndicator = 131072,
	largeFlyingTarget = 128,
	flyingTarget = -64,
	specialTarget = -8192,
	flyingAllyTarget = 262144,
	dogTags = 32,
	enemyObjective = -1048576,
	thermalVisionDefault = 2097152,
	largeTarget = 4096,
	mediumTarget = 2048,
	clients = 2,
	largeWeakspot = 4194304,
	friendlies = 4,
	offscreenEnemyIndicator = 32768,
	allyObjective = 524288,
	priorityFlyingTarget = 256,
	enemies = 8,
	self = 8388608,
	offscreenAllyIndicator = 16384
}
LUI.AnchoredElement = {}
LUI.AnchoredElement.IgnoreTraceOffsetFlags = {
	TAG = 2,
	ENTITY = 4,
	WORLD = 1
}
LUI.UIElementOnEntitySpawner.init = function ( f5_arg0, f5_arg1 )
	if not f5_arg1 then
		f5_arg1 = {}
	end
	local f5_local0 = assert
	local f5_local1
	if f5_arg1.spawnDistance ~= nil and type( f5_arg1.spawnDistance ) ~= "number" then
		f5_local1 = false
	else
		f5_local1 = true
	end
	f5_local0( f5_local1 )
	f5_local0 = assert
	if f5_arg1.spawnAngle ~= nil and type( f5_arg1.spawnAngle ) ~= "number" then
		f5_local1 = false
	else
		f5_local1 = true
	end
	f5_local0( f5_local1 )
	f5_local0 = assert
	if f5_arg1.targetEntities ~= nil and type( f5_arg1.targetEntities ) ~= "number" then
		f5_local1 = false
	else
		f5_local1 = true
	end
	f5_local0( f5_local1 )
	assert( type( f5_arg1.buildChild ) == "function" )
	f5_local0 = assert
	if f5_arg1.removeDataLinksOnDespawn ~= nil and type( f5_arg1.removeDataLinksOnDespawn ) ~= "boolean" then
		f5_local1 = false
	else
		f5_local1 = true
	end
	f5_local0( f5_local1 )
	f5_arg1.renderingOptions = f5_arg1.renderingOptions or {}
	f5_local0 = assert
	if f5_arg1.renderingOptions ~= nil and type( f5_arg1.renderingOptions ) ~= "table" and type( f5_arg1.renderingOptions ) ~= "function" then
		f5_local1 = false
	else
		f5_local1 = true
	end
	f5_local0( f5_local1 )
	if type( f5_arg1.renderingOptions ) == "table" then
		f5_local0 = assert
		if f5_arg1.renderingOptions.entityTag ~= nil and type( f5_arg1.renderingOptions.entityTag ) ~= "string" then
			f5_local1 = false
		else
			f5_local1 = true
		end
		f5_local0( f5_local1 )
		f5_local0 = assert
		if f5_arg1.renderingOptions.screenOffsetX ~= nil and type( f5_arg1.renderingOptions.screenOffsetX ) ~= "number" then
			f5_local1 = false
		else
			f5_local1 = true
		end
		f5_local0( f5_local1 )
		f5_local0 = assert
		if f5_arg1.renderingOptions.screenOffsetY ~= nil and type( f5_arg1.renderingOptions.screenOffsetY ) ~= "number" then
			f5_local1 = false
		else
			f5_local1 = true
		end
		f5_local0( f5_local1 )
		f5_local0 = assert
		if f5_arg1.renderingOptions.entityOffsetX ~= nil and type( f5_arg1.renderingOptions.entityOffsetX ) ~= "number" then
			f5_local1 = false
		else
			f5_local1 = true
		end
		f5_local0( f5_local1 )
		f5_local0 = assert
		if f5_arg1.renderingOptions.entityOffsetY ~= nil and type( f5_arg1.renderingOptions.entityOffsetY ) ~= "number" then
			f5_local1 = false
		else
			f5_local1 = true
		end
		f5_local0( f5_local1 )
		f5_local0 = assert
		if f5_arg1.renderingOptions.entityOffsetZ ~= nil and type( f5_arg1.renderingOptions.entityOffsetZ ) ~= "number" then
			f5_local1 = false
		else
			f5_local1 = true
		end
		f5_local0( f5_local1 )
		f5_local0 = assert
		if f5_arg1.renderingOptions.worldOffsetX ~= nil and type( f5_arg1.renderingOptions.worldOffsetX ) ~= "number" then
			f5_local1 = false
		else
			f5_local1 = true
		end
		f5_local0( f5_local1 )
		f5_local0 = assert
		if f5_arg1.renderingOptions.worldOffsetY ~= nil and type( f5_arg1.renderingOptions.worldOffsetY ) ~= "number" then
			f5_local1 = false
		else
			f5_local1 = true
		end
		f5_local0( f5_local1 )
		f5_local0 = assert
		if f5_arg1.renderingOptions.worldOffsetZ ~= nil and type( f5_arg1.renderingOptions.worldOffsetZ ) ~= "number" then
			f5_local1 = false
		else
			f5_local1 = true
		end
		f5_local0( f5_local1 )
		f5_local0 = assert
		if f5_arg1.renderingOptions.minScale ~= nil and type( f5_arg1.renderingOptions.minScale ) ~= "number" then
			f5_local1 = false
		else
			f5_local1 = true
		end
		f5_local0( f5_local1 )
		f5_local0 = assert
		if f5_arg1.renderingOptions.maxScale ~= nil and type( f5_arg1.renderingOptions.maxScale ) ~= "number" then
			f5_local1 = false
		else
			f5_local1 = true
		end
		f5_local0( f5_local1 )
		f5_local0 = assert
		if f5_arg1.renderingOptions.naturalDistance ~= nil and type( f5_arg1.renderingOptions.naturalDistance ) ~= "number" then
			f5_local1 = false
		else
			f5_local1 = true
		end
		f5_local0( f5_local1 )
		f5_local0 = assert
		if f5_arg1.renderingOptions.snapToScreenEdges ~= nil and type( f5_arg1.renderingOptions.snapToScreenEdges ) ~= "boolean" then
			f5_local1 = false
		else
			f5_local1 = true
		end
		f5_local0( f5_local1 )
		f5_local0 = assert
		if f5_arg1.renderingOptions.snapSmoothing ~= nil and type( f5_arg1.renderingOptions.snapSmoothing ) ~= "number" then
			f5_local1 = false
		else
			f5_local1 = true
		end
		f5_local0( f5_local1 )
		f5_local0 = assert
		if f5_arg1.renderingOptions.onObstruction ~= nil and type( f5_arg1.renderingOptions.onObstruction ) ~= "number" then
			f5_local1 = false
		else
			f5_local1 = true
		end
		f5_local0( f5_local1 )
		f5_local0 = assert
		if f5_arg1.renderingOptions.obstructionEntityTag ~= nil and type( f5_arg1.renderingOptions.obstructionEntityTag ) ~= "string" then
			f5_local1 = false
		else
			f5_local1 = true
		end
		f5_local0( f5_local1 )
		f5_local0 = assert
		if f5_arg1.renderingOptions.displayOnObstructionUnknown ~= nil and type( f5_arg1.renderingOptions.displayOnObstructionUnknown ) ~= "boolean" then
			f5_local1 = false
		else
			f5_local1 = true
		end
		f5_local0( f5_local1 )
		f5_local0 = assert
		if f5_arg1.renderingOptions.ignoreOffsetsForTraces ~= nil and type( f5_arg1.renderingOptions.ignoreOffsetsForTraces ) ~= "number" then
			f5_local1 = false
		else
			f5_local1 = true
		end
		f5_local0( f5_local1 )
		f5_local0 = assert
		if f5_arg1.renderingOptions.alwaysShowUnderCrosshair ~= nil and type( f5_arg1.renderingOptions.alwaysShowUnderCrosshair ) ~= "boolean" then
			f5_local1 = false
		else
			f5_local1 = true
		end
		f5_local0( f5_local1 )
	end
	LUI.UIElementOnEntitySpawner.super.init( f5_arg0, nil )
	f5_arg0.id = "UIElementOnEntitySpawner_" .. (f5_arg1.id or "")
	f5_arg0._renderingOptions = f5_arg1.renderingOptions
	f5_arg0._buildChild = f5_arg1.buildChild
	f5_arg0._removeDataLinksOnDespawn = f5_arg1.removeDataLinksOnDespawn ~= false
	f5_arg0._onSpawn = f5_arg1.onSpawn or nil
	f5_arg0._spawned = {}
	f5_arg0._initialPoolSize = f5_arg1.initialPoolSize or 0
	f5_arg0._maxPoolSize = f5_arg1.maxPoolSize or 10
	if 0 < f5_arg0._initialPoolSize then
		f5_arg0._pool = LUI.LUIElementPool.new( {
			buildElement = f5_arg0._buildChild,
			initialPoolSize = f5_arg0._initialPoolSize,
			maxPoolSize = f5_arg0._maxPoolSize,
			id = f5_arg0.id .. "_" .. (f5_arg1.id or "")
		} )
	end
	f5_arg1.maxVisibleElements = f5_arg1.maxVisibleElements or 3
	f5_arg1.targetEntities = f5_arg1.targetEntities or 0
	f5_arg0:SetupOnEntityElementSpawner( f5_arg1 )
	f5_arg0:registerEventHandler( "onEntityElementSpawn", f5_arg0.SpawnHandler )
	f5_arg0:registerEventHandler( "onEntityElementDespawn", f5_arg0.DespawnHandler )
end

LUI.UIElementOnEntitySpawner.SpawnHandler = function ( f4_arg0, f4_arg1 )
	assert( type( f4_arg1.entityNum ) == "number" )
	f4_arg0:Spawn( f4_arg1.entityNum )
end

LUI.UIElementOnEntitySpawner.DespawnHandler = function ( f3_arg0, f3_arg1 )
	assert( type( f3_arg1.entityNum ) == "number" )
	f3_arg0:Despawn( f3_arg1.entityNum )
end

LUI.UIElementOnEntitySpawner.Spawn = function ( f2_arg0, f2_arg1 )
	local f2_local0 = nil
	if type( f2_arg0._renderingOptions ) == "function" then
		f2_local0 = f2_arg0._renderingOptions( f2_arg1 )
	else
		f2_local0 = f2_arg0._renderingOptions
	end
	f2_local0.entityNum = f2_arg1
	assert( f2_arg0._spawned[f2_arg1] == nil )
	local f2_local1 = nil
	if 0 < f2_arg0._initialPoolSize then
		f2_local1 = f2_arg0._pool:AllocateElement()
	else
		f2_local1 = f2_arg0._buildChild( f2_arg1 )
	end
	if f2_local1 ~= nil then
		f2_arg0._spawned[f2_arg1] = f2_local1
		if f2_local1._anchorHasBeenSetup == nil then
			if f2_local0 and f2_local0.rotateElementStrings ~= nil then
				f2_local0.rotateElements = {}
				for f2_local5, f2_local6 in ipairs( f2_local0.rotateElementStrings ) do
					if f2_local1[f2_local6] == nil then
						DebugPrint( "WARNING: Trying to add a LUI element that doesn't exist to rotateElement: " .. f2_local6 )
						assert( f2_local1[f2_local6 == nil] )
					end
					table.insert( f2_local0.rotateElements, f2_local1[f2_local6] )
				end
			end
			if f2_local1._anchorHasBeenSetup == nil then
				f2_local1:SetupAnchoredElement( f2_local0 )
				f2_local1._anchorHasBeenSetup = true
			end
		end
		f2_local1:SetEntityNum( f2_arg1 )
		if f2_arg0._onSpawn ~= nil then
			f2_arg0._onSpawn( f2_local1, f2_arg1 )
		end
		f2_arg0:addElement( f2_local1 )
	end
end

LUI.UIElementOnEntitySpawner.Despawn = function ( f1_arg0, f1_arg1 )
	local f1_local0 = f1_arg0._spawned[f1_arg1]
	if f1_local0 then
		if 0 < f1_arg0._initialPoolSize then
			f1_arg0._pool:DeallocateElement( f1_local0 )
			if f1_local0._anchorHasBeenSetup then
				f1_local0:ResetAnchor()
			end
			if f1_arg0._removeDataLinksOnDespawn then
				f1_local0:closeTree()
			else
				f1_local0:RemoveFromParent()
				f1_local0:SetDataSource( nil, nil )
			end
		else
			f1_local0:closeTree()
		end
		f1_arg0._spawned[f1_arg1] = nil
	end
end

