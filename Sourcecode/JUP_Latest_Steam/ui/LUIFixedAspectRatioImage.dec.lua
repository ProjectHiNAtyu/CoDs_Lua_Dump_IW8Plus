-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
LUI.UIFixedAspectRatioImage = LUI.Class( LUI.UIElement )
LUI.UIFixedAspectRatioImage.Dimensions = {
	STRETCH_H_FROM_CENTER = 1,
	STRETCH_V_FROM_BOTTOM = 5,
	FIT_WITHIN_ELEMENT = 8,
	STRETCH_H_FROM_LEFT = 0,
	STRETCH_V_FROM_MIDDLE = 4,
	STRETCH_V_FROM_TOP = 3,
	SMART_STRETCH = 7,
	FILL_SCREEN = 6,
	STRETCH_H_FROM_RIGHT = 2
}
LUI.UIFixedAspectRatioImage.build = function ( f14_arg0, f14_arg1 )
	return LUI.UIFixedAspectRatioImage.new()
end

LUI.UIFixedAspectRatioImage.init = function ( f12_arg0 )
	LUI.UIElement.init( f12_arg0 )
	f12_arg0.id = "LUIFixedAspectRatioImage"
	f12_arg0.imageElement = LUI.UIImage.new( 0, 0, 0, 0, 0, 0, 0, 0 )
	f12_arg0:addElement( f12_arg0.imageElement )
	f12_arg0._dimension = LUI.UIFixedAspectRatioImage.Dimensions.STRETCH_H_FROM_CENTER
	f12_arg0._imageRows = 1
	f12_arg0._imageCols = 1
	if CONDITIONS.IsMobileOrMobileSim() then
		f12_arg0.imageElement:SetNotifyOnLayoutInit( true )
		f12_arg0.imageElement:addEventHandler( "layout_initialized", function ( f13_arg0, f13_arg1 )
			local f13_local0 = f13_arg0:getParent()
			if f13_local0._layoutDelay then
				f13_local0:_layoutDelay()
			end
		end )
	end
end

LUI.UIFixedAspectRatioImage.updateImageDimensions = function ( f7_arg0, f7_arg1 )
	local f7_local0, f7_local1 = nil
	if f7_arg0._autoSize then
		if not f7_arg0._autoSize.lp then
			local f7_local2 = f7_arg0._autoSize
			local f7_local3 = f7_arg0._autoSize
			local f7_local4 = f7_arg0._autoSize
			local f7_local5 = f7_arg0._autoSize
			f7_local2.lp, f7_local3.tp, f7_local4.rp, f7_local5.bp = f7_arg0:GetAnchorData()
			f7_local2 = f7_arg0._autoSize
			f7_local3 = f7_arg0._autoSize
			f7_local4 = f7_arg0._autoSize
			f7_local5 = f7_arg0._autoSize
			f7_local2.lpx, f7_local3.tpx, f7_local4.rpx, f7_local5.bpx = f7_arg0:getLocalRect()
		end
		f7_local0 = f7_arg0._autoSize.rpx - f7_arg0._autoSize.lpx
		f7_local1 = f7_arg0._autoSize.bpx - f7_arg0._autoSize.tpx
	else
		local f7_local2, f7_local3, f7_local4, f7_local5 = f7_arg0:getLocalRect()
		f7_local0 = f7_local4 - f7_local2
		f7_local1 = f7_local5 - f7_local3
	end
	if CONDITIONS.IsMobileOrMobileSim() then
		if f7_arg0.imageElement:IsLayoutInitialized() then
			f7_arg0._layoutDelay = nil
			f7_local0 = f7_arg0.imageElement:getWidth()
			f7_local1 = f7_arg0.imageElement:getHeight()
		else
			local f7_local2, f7_local3, f7_local4, f7_local5 = f7_arg0:GetAnchorData()
			if (f7_local2 + f7_local4 ~= 1) or f7_local3 + f7_local5 ~= 1 then
				f7_arg0._layoutDelay = function ( f10_arg0 )
					local f10_local0 = f10_arg0:Wait( 0, true )
					f10_local0.onComplete = function ()
						LUI.UIFixedAspectRatioImage.updateImageDimensions( f10_arg0 )
					end
					
				end
				
				return 
			end
		end
	elseif f7_local0 == 0 and f7_local1 == 0 then
		local f7_local2, f7_local3, f7_local4, f7_local5 = f7_arg0:getRect()
		if f7_local2 == nil then
			return 
		end
		f7_local0 = f7_local3 - f7_local2
		f7_local1 = f7_local5 - f7_local4
		if f7_local0 == 0 and f7_local1 == 0 then
			if not f7_arg1 then
				local f7_local6 = f7_arg0:Wait( 1, true )
				f7_local6.onComplete = function ()
					f7_arg0:updateImageDimensions( true )
				end
				
			end
			return 
		end
	end
	local f7_local2, f7_local3 = f7_arg0.imageElement:GetImageDimensions()
	f7_local2 = f7_local2 / f7_arg0._imageCols
	f7_local3 = f7_local3 / f7_arg0._imageRows
	if f7_local2 == 0 or f7_local3 == 0 then
		return 
	end
	local f7_local4 = f7_local2 * f7_local1 / f7_local3
	local f7_local5 = f7_local3 * f7_local0 / f7_local2
	if f7_arg0._dimension == LUI.UIFixedAspectRatioImage.Dimensions.STRETCH_H_FROM_LEFT then
		f7_arg0.imageElement:SetAnchorsAndPosition( 0, 1, 0, 0, 0, f7_local4, 0, 0 )
	elseif f7_arg0._dimension == LUI.UIFixedAspectRatioImage.Dimensions.STRETCH_H_FROM_RIGHT then
		f7_arg0.imageElement:SetAnchorsAndPosition( 1, 0, 0, 0, -f7_local4, 0, 0, 0 )
	elseif f7_arg0._dimension == LUI.UIFixedAspectRatioImage.Dimensions.STRETCH_V_FROM_TOP then
		f7_arg0.imageElement:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, f7_local5 )
	elseif f7_arg0._dimension == LUI.UIFixedAspectRatioImage.Dimensions.STRETCH_V_FROM_MIDDLE then
		f7_arg0.imageElement:SetAnchorsAndPosition( 0, 0, 0.5, 0.5, 0, 0, -f7_local5 / 2, f7_local5 / 2 )
	elseif f7_arg0._dimension == LUI.UIFixedAspectRatioImage.Dimensions.STRETCH_V_FROM_BOTTOM then
		f7_arg0.imageElement:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, -f7_local5, 0 )
	elseif f7_arg0._dimension == LUI.UIFixedAspectRatioImage.Dimensions.FILL_SCREEN then
		f7_arg0:setupScaleFullscreen()
		local f7_local6 = function ()
			local f8_local0 = Engine[0xEE6F69FEA944B13]()
			if f7_arg0 / f7_arg0 < Engine[0x51968F9BE4A326]() then
				f7_arg0 = f7_arg0 * f8_local0:getWidth() / f7_arg0
				f7_arg0.imageElement:SetAnchorsAndPosition( 0, 0, 0.5, 0.5, 0, 0, -f7_arg0 / 2, f7_arg0 / 2 )
			else
				f7_arg0 = f7_arg0 * f8_local0:getHeight() / f7_arg0
				f7_arg0.imageElement:SetAnchorsAndPosition( 0.5, 0.5, 0, 0, -f7_arg0 / 2, f7_arg0 / 2, 0, 0 )
			end
		end
		
		if not f7_arg0._fixedARImageMobileHandlerAdded then
			f7_arg0:addAndCallEventHandler( "onVideoChange", f7_local6 )
			f7_arg0._fixedARImageMobileHandlerAdded = true
		end
	elseif f7_arg0._dimension == LUI.UIFixedAspectRatioImage.Dimensions.SMART_STRETCH then
		if 0 < f7_local3 and 0 < f7_local1 then
			local f7_local6 = f7_local2 / f7_local3
			local f7_local7 = f7_local0 / f7_local1
			if f7_local6 < f7_local7 then
				local f7_local8 = f7_local3 * f7_local0 / f7_local2
				f7_arg0.imageElement:SetAnchorsAndPosition( 0, 0, 0.5, 0.5, 0, 0, -f7_local8 / 2, f7_local8 / 2 )
			elseif f7_local7 < f7_local6 then
				local f7_local8 = f7_local2 * f7_local1 / f7_local3
				f7_arg0.imageElement:SetAnchorsAndPosition( 0.5, 0.5, 0, 0, -f7_local8 / 2, f7_local8 / 2, 0, 0 )
			elseif f7_local2 % f7_local0 == 0 and f7_local3 % f7_local1 == 0 then
				f7_arg0.imageElement:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
			elseif f7_local1 < f7_local0 then
				f7_arg0.imageElement:SetAnchorsAndPosition( 0.5, 0.5, 0, 0, -f7_local1 / 2, f7_local1 / 2, 0, 0 )
			else
				f7_arg0.imageElement:SetAnchorsAndPosition( 0, 0, 0.5, 0.5, 0, 0, -f7_local0 / 2, f7_local0 / 2 )
			end
		end
	elseif f7_arg0._dimension == LUI.UIFixedAspectRatioImage.Dimensions.FIT_WITHIN_ELEMENT then
		if 0 < f7_local3 and 0 < f7_local1 then
			local f7_local6 = f7_local2 / f7_local3
			local f7_local7 = f7_local0 / f7_local1
			local f7_local8 = f7_local2
			local f7_local9 = f7_local3
			if f7_local0 < f7_local2 or f7_local1 < f7_local3 then
				if f7_local7 < f7_local6 then
					f7_local8 = f7_local0
					f7_local9 = f7_local8 / f7_local6
				else
					f7_local9 = f7_local1
					f7_local8 = f7_local9 * f7_local6
				end
			end
			f7_arg0.imageElement:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -f7_local8 / 2, f7_local8 / 2, -f7_local9 / 2, f7_local9 / 2 )
		end
	else
		f7_arg0.imageElement:SetAnchorsAndPosition( 0.5, 0.5, 0, 0, -f7_local4 / 2, f7_local4 / 2, 0, 0 )
	end
	if f7_arg0._autoSize then
		if f7_arg0._dimension == LUI.UIFixedAspectRatioImage.Dimensions.STRETCH_H_FROM_LEFT or f7_arg0._dimension == LUI.UIFixedAspectRatioImage.Dimensions.STRETCH_H_FROM_CENTER or f7_arg0._dimension == LUI.UIFixedAspectRatioImage.Dimensions.STRETCH_H_FROM_RIGHT then
			f7_arg0:SetLeftAnchor( f7_arg0._autoSize.lp )
			f7_arg0:SetRightAnchor( f7_arg0._autoSize.rp )
			f7_arg0:SetLeft( f7_arg0._autoSize.lpx )
			f7_arg0:SetRight( f7_arg0._autoSize.lpx + f7_local4 )
		else
			f7_arg0:SetTopAnchor( f7_arg0._autoSize.tp )
			f7_arg0:SetBottomAnchor( f7_arg0._autoSize.bp )
			f7_arg0:SetTop( f7_arg0._autoSize.tpx )
			f7_arg0:SetBottom( f7_arg0._autoSize.bpx + f7_local5 )
		end
	end
end

LUI.UIFixedAspectRatioImage.setImage = function ( f6_arg0, f6_arg1 )
	f6_arg0.imageElement:setImage( f6_arg1 )
	f6_arg0:updateImageDimensions()
end

LUI.UIFixedAspectRatioImage.setAnimImage = function ( f5_arg0, f5_arg1, f5_arg2, f5_arg3 )
	f5_arg2 = math.max( f5_arg2, 1 )
	f5_arg3 = math.max( f5_arg3, 1 )
	f5_arg0._imageRows = f5_arg2
	f5_arg0._imageCols = f5_arg3
	f5_arg0:setImage( f5_arg1 )
end

LUI.UIFixedAspectRatioImage.SetAnchorsAndPosition = function ( f4_arg0, f4_arg1, f4_arg2, f4_arg3, f4_arg4, f4_arg5, f4_arg6, f4_arg7, f4_arg8 )
	LUI.UIElement.SetAnchorsAndPosition( f4_arg0, f4_arg1, f4_arg2, f4_arg3, f4_arg4, f4_arg5, f4_arg6, f4_arg7, f4_arg8 )
	f4_arg0:updateImageDimensions()
end

LUI.UIFixedAspectRatioImage.setAutoSizeProperty = function ( f3_arg0, f3_arg1 )
	local f3_local0
	if f3_arg1 then
		f3_local0 = {}
		if not f3_local0 then
		
		else
			f3_arg0._autoSize = f3_local0
		end
	end
	f3_local0 = nil
end

LUI.UIFixedAspectRatioImage.setMaterial = function ( f2_arg0, f2_arg1 )
	local f2_local0 = GetMaterialAtlasInfo( f2_arg1 )
	f2_arg0._imageRows = f2_local0.rows
	f2_arg0._imageCols = f2_local0.columns
	f2_arg0:setImage( RegisterMaterial( f2_arg1 ) )
end

LUI.UIFixedAspectRatioImage.setStretchedDimension = function ( f1_arg0, f1_arg1 )
	f1_arg0._dimension = f1_arg1
	f1_arg0:updateImageDimensions()
end

LUI.UIFixedAspectRatioImage.id = "LUIFixedAspectRatioImage"
