-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:04
module( ..., package.seeall )
local f0_local0 = function ( f6_arg0, f6_arg1 )
	local f6_local0 = {
		[#f6_local0 + 1] = {
			menuName = "VehicleCamoSelect",
			disabled = false,
			hasDefaultFocus = true,
			name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xD4463A566EAB153 ) ),
			lootType = LOOT.itemTypes.VEHICLE_CAMO,
			menuSound = SOUND_SETS.mpMainMenu.tabPlay
		}
	}
	if CONDITIONS.IsVehicleHornsEnabled() and not f6_arg0._vehicleInfo.hideHornTab then
		f6_local0[#f6_local0 + 1] = {
			menuName = "VehicleHornSelect",
			disabled = false,
			hasDefaultFocus = false,
			name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xC8F454EC2AFDAF6 ) ),
			lootType = LOOT.itemTypes.VEHICLE_HORN,
			menuSound = SOUND_SETS.mpMainMenu.tabPlay
		}
	end
	if CONDITIONS.IsBattleTracksEnabled() and not f6_arg0._vehicleInfo.hideTrackTab then
		f6_local0[#f6_local0 + 1] = {
			menuName = "VehicleTrackSelect",
			disabled = false,
			hasDefaultFocus = false,
			name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xEF8FD3D6079ED17 ) ),
			lootType = LOOT.itemTypes.VEHICLE_TRACK,
			menuSound = SOUND_SETS.mpMainMenu.tabPlay
		}
	end
	return f6_local0
end

local f0_local1 = function ( f4_arg0, f4_arg1 )
	f4_arg0._tabsData = f0_local0( f4_arg0, f4_arg1 )
	local f4_local0 = {}
	if 1 <= #f4_arg0._tabsData then
		for f4_local5, f4_local6 in pairs( f4_arg0._tabsData ) do
			local f4_local7 = {
				name = f4_local6.name,
				disabled = f4_local6.disabled
			}
			local f4_local4 = f4_local6.hasDefaultFocus
			if f4_local4 then
				f4_local4 = not f4_local6.disabled
			end
			f4_local7.hasDefaultFocus = f4_local4
			f4_local7.focusFunction = function ( f5_arg0, f5_arg1, f5_arg2, f5_arg3 )
				if f4_arg0.activeTabWidget then
					if f4_arg0.activeTabWidget.VehicleLootPanel or f4_arg0.activeTabWidget.itemAudioID then
						VEHICLE.StopVehicleSound( f4_arg0.activeTabWidget )
					end
					f4_arg0.activeTabWidget:closeTree()
					f4_arg0.activeTabWidget = nil
				end
				local f5_local0 = {
					controllerIndex = f5_arg1,
					vehicleInfo = f4_arg0._vehicleInfo,
					lootType = f4_arg0.lootType
				}
				if f4_arg0.lootType == LOOT.itemTypes.VEHICLE_CAMO then
					if not CONDITIONS.IsIW9BetaBuildEnabled() then
						f4_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
							side = "left",
							button_ref = "button_l3",
							helper_text = Engine[0xED84C33EC5F01EA]( 0x723B50246C20EF6 ),
							helper_definition = Engine[0xED84C33EC5F01EA]( 0x5DA3DC831D93AA8 )
						} )
					end
				elseif f4_arg0.lootType == LOOT.itemTypes.VEHICLE_HORN then
					f4_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
						button_ref = "button_r3"
					} )
					f4_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
						button_ref = "button_alt2"
					} )
					if f4_arg0.RemoveFavoriteButtonPrompt then
						f4_arg0:RemoveFavoriteButtonPrompt()
					end
				elseif f4_arg0.lootType == LOOT.itemTypes.VEHICLE_TRACK then
					f4_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
						button_ref = "button_l3"
					} )
					f4_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
						button_ref = "button_r3"
					} )
					f4_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
						button_ref = "button_alt2"
					} )
					if f4_arg0.RemoveFavoriteButtonPrompt then
						f4_arg0:RemoveFavoriteButtonPrompt()
					end
				end
				f4_arg0.activeTabWidget = MenuBuilder.BuildRegisteredType( f4_arg0.menuName, f5_local0 )
				f4_arg0:addElement( f4_arg0.activeTabWidget )
				if f5_arg3 ~= FocusType.MouseOver and f5_arg3 ~= FocusType.MenuFlow then
					f4_arg0.activeTabWidget:processEvent( {
						name = "gain_focus"
					} )
				end
				if f4_arg0.menuSound then
					Engine[0xC4146BA76D0F982]( f4_arg0.menuSound )
				end
			end
			
			table.insert( f4_local0, f4_local7 )
		end
	else
		f4_arg0.CustomizationTabs:closeTree()
		f4_arg0.CustomizationTabs = nil
		f4_arg0:addElement( MenuBuilder.BuildRegisteredType( f4_arg0._tabsData[1].menuName, {
			controllerIndex = f4_arg1,
			vehicleInfo = f4_arg0._vehicleInfo,
			lootType = f4_arg0._tabsData[1].lootType
		} ) )
		f4_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			side = "left",
			button_ref = "button_r3",
			helper_text = Engine[0xED84C33EC5F01EA]( 0x723B50246C20EF6 ),
			helper_definition = Engine[0xED84C33EC5F01EA]( 0x5DA3DC831D93AA8 )
		} )
		f4_arg0.HelperBar:AddButtonHelperTextToElement( f4_arg0, {
			kbm_only = true,
			priority = 4,
			side = "left",
			button_ref = "button_right_trigger",
			helper_text = Engine[0xED84C33EC5F01EA]( 0x59D7A2BADD1083E ),
			helper_definition = Engine[0xED84C33EC5F01EA]( 0xE272C3C014D638E )
		} )
	end
	return f4_local0
end

local f0_local2 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0.GetVehicleCustomTabsData = f0_local0
	f3_arg0._controllerIndex = f3_arg1
	f3_arg0._vehicleInfo = f3_arg2.vehicleInfo
	f3_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0x6A68D5DC9CE77CF, f3_arg2.vehicleInfo.name ) )
end

local f0_local3 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PostLoadShared = f0_local0
end

function VehicleCustomizationBase( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = f1_local0.UIMenu.new()
	f1_local1.id = "VehicleCustomizationBase"
	local f1_local2
	if f1_arg1 then
		f1_local2 = f1_arg1
	else
		f1_local2 = f1_arg1.controllerIndex
	end
	f1_local2 = f1_local0.ValidateControllerIndex( f1_local1, f1_local2 )
	local f1_local3 = f1_local1
	f0_local0( f1_local1, f1_local2, f1_arg1 )
	return f1_local1
end

MenuBuilder.registerType( 0xBFDD62112A6A1, VehicleCustomizationBase )
LockTable( _M )
