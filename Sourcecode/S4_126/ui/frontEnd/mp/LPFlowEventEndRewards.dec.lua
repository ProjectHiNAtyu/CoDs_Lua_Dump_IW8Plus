-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
module( ..., package.seeall )
require( "ui.frontEnd.mp.LPDeltaRankProgress" )
require( "ui.widgets.LootItemCardMiniButton" )
require( "ui.widgets.LabelWithBackground" )
local f0_local0 = 300
local f0_local1 = _1080p * 192
local f0_local2 = _1080p * 12
local f0_local3 = 150
local f0_local4 = 200
local f0_local5 = function ( f13_arg0, f13_arg1, f13_arg2, f13_arg3 )
	if f13_arg0.LPDeltaRankProgress then
		f13_arg0.LPDeltaRankProgress:InitRankAnimComplete( f13_arg1, f13_arg2, f13_arg3 )
	end
	ANIMATION_FLOW.ExecuteAnimationFlow( f13_arg0, f13_arg1, f13_arg2, f13_arg3 )
end

local f0_local6 = function ( f12_arg0, f12_arg1 )
	LEAGUE_PLAY.InitEventEndRewardGrid( f12_arg1, f0_local0, f0_local0, f12_arg0.Rewards, f12_arg0.UnlocksBanner, f0_local0 )
end

local f0_local7 = function ( f10_arg0 )
	local f10_local0 = 1 + f0_local0
	f10_arg0.Rewards:SetAlpha( 1 )
	f10_arg0.Rewards:SetVisibility( LUI.Visibility.Visible )
	for f10_local1 = 0, f10_arg0.Rewards:GetNumChildren(), 1 do
		local f10_local4 = f10_arg0.Rewards:GetElementAtPosition( f10_local1, 0 )
		if f10_local4 then
			f10_local4:SetAlpha( 0.3 )
			f10_local4.Frame:SetAlpha( 0 )
			f10_local4:SetVisibility( LUI.Visibility.Visible )
			local f10_local5 = f10_arg0:Wait( f10_local0 )
			f10_local5.onComplete = function ()
				f10_arg0:SetAlpha( 1, f10_arg0, LUI.EASING.inQuadratic )
				ACTIONS.AnimateSequence( f10_arg0, "UnlockShake" )
				ACTIONS.AnimateSequence( f10_arg0.LootItemCardMini, "UnlockedCurrent" )
				Engine[0xC4146BA76D0F982]( SOUND_SETS.aar.cardUnlock )
			end
			
			f10_local0 = f10_local0 + f0_local0 + f0_local0
		end
	end
	return f10_local0 + LEAGUE_PLAY.GetTunable( LEAGUE_PLAY.Dvars.Tunables.EndOfEventAnim.rewardsBufferTime )
end

local f0_local8 = function ( f9_arg0, f9_arg1, f9_arg2 )
	f9_arg0.InitRankAnimComplete = f0_local0
	f9_arg0.InitEventEndRewardGrid = f0_local0
	f9_arg0.PlayRewardsUnlockSequence = f0_local0
	f9_arg0.Rewards:SetNumChildren( 0 )
	ANIMATION_FLOW.ExecuteAnimationFlow( f9_arg0, f9_arg1, f9_arg2.flowName )
end

function LPFlowEventEndRewards( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "LPFlowEventEndRewards"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	self._sequenceLengths = self._sequenceLengths or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	self.HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	self.HelperBar.id = "HelperBar"
	self.HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
	self.HelperBar:setPriority( 10 )
	self:addElement( self.HelperBar )
	local f1_local2 = self
	local Header = nil
	
	Header = LUI.UIStyledText.new()
	Header.id = "Header"
	Header:SetRGBFromInt( 7303023, 0 )
	Header:setText( Engine[0xED84C33EC5F01EA]( "LP/PLACEMENT_REWARDS" ), 0 )
	Header:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_XLHeaderBold.font.File ) )
	Header:SetFontSize( FONT_STYLES.fontStyle_XLHeaderBold.size )
	Header:SetMinFontSize( FONT_STYLES.fontStyle_XLHeaderBold.minSize )
	Header:SetWordWrap( false )
	Header:SetAlignment( LUI.Alignment.Center )
	Header:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1920, _1080p * 84, _1080p * 182 )
	self:addElement( Header )
	self.Header = Header
	
	local LadderPlacementTrophy = nil
	
	LadderPlacementTrophy = LUI.UIImage.new()
	LadderPlacementTrophy.id = "LadderPlacementTrophy"
	LadderPlacementTrophy:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 771, _1080p * 975, _1080p * 185, _1080p * 389 )
	LadderPlacementTrophy:SubscribeToModel( DataSources.frontEnd.LP.EventEndData.placementIcon:GetModel( f1_local1 ), function ()
		local f8_local0 = DataSources.frontEnd.LP.EventEndData.placementIcon:GetValue( menu )
		if f8_local0 ~= nil then
			menu:setImage( RegisterMaterial( f8_local0 ), 0 )
		end
	end )
	self:addElement( LadderPlacementTrophy )
	self.LadderPlacementTrophy = LadderPlacementTrophy
	
	local RankText = nil
	
	RankText = LUI.UIStyledText.new()
	RankText.id = "RankText"
	RankText:SetRGBFromInt( 16758785, 0 )
	RankText:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_XLHeaderBold.font.File ) )
	RankText:SetFontSize( FONT_STYLES.fontStyle_XLHeaderBold.size )
	RankText:SetMinFontSize( FONT_STYLES.fontStyle_XLHeaderBold.minSize )
	RankText:SetWordWrap( false )
	RankText:SetAlignment( LUI.Alignment.Left )
	RankText:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 979, _1080p * 1329, _1080p * 163, _1080p * 357 )
	RankText:SubscribeToModel( DataSources.frontEnd.LP.EventEndData.ladderPlacementStr:GetModel( f1_local1 ), function ()
		local f7_local0 = DataSources.frontEnd.LP.EventEndData.ladderPlacementStr:GetValue( menu )
		if f7_local0 ~= nil then
			menu:setText( f7_local0, 0 )
		end
	end )
	self:addElement( RankText )
	self.RankText = RankText
	
	local PlaceText = nil
	
	PlaceText = LUI.UIStyledText.new()
	PlaceText.id = "PlaceText"
	PlaceText:setText( Engine[0xED84C33EC5F01EA]( "LP/EVENTENDPLACETITLE" ), 0 )
	PlaceText:setCaseStyle( LUI.CaseStyle.Uppercase )
	PlaceText:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_XLHeaderBold.font.File ) )
	PlaceText:SetFontSize( FONT_STYLES.fontStyle_XLHeaderBold.size )
	PlaceText:SetMinFontSize( FONT_STYLES.fontStyle_XLHeaderBold.minSize )
	PlaceText:SetWordWrap( false )
	PlaceText:SetAlignment( LUI.Alignment.Left )
	PlaceText:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 985, _1080p * 1154, _1080p * 313, _1080p * 389 )
	self:addElement( PlaceText )
	self.PlaceText = PlaceText
	
	local BorderLineTop = nil
	
	BorderLineTop = LUI.UIImage.new()
	BorderLineTop.id = "BorderLineTop"
	BorderLineTop:SetRGBFromInt( 7303023, 0 )
	BorderLineTop:SetAnchorsAndPosition( 0, 0, 0, 1, _1080p * 718, _1080p * -718, _1080p * 170, _1080p * 174 )
	self:addElement( BorderLineTop )
	self.BorderLineTop = BorderLineTop
	
	local BorderLineBottom = nil
	
	BorderLineBottom = LUI.UIImage.new()
	BorderLineBottom.id = "BorderLineBottom"
	BorderLineBottom:SetRGBFromInt( 7303023, 0 )
	BorderLineBottom:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 718, _1080p * 1202, _1080p * 400, _1080p * 404 )
	self:addElement( BorderLineBottom )
	self.BorderLineBottom = BorderLineBottom
	
	local LPDeltaRankProgress = nil
	
	LPDeltaRankProgress = MenuBuilder.BuildRegisteredType( "LPDeltaRankProgress", {
		controllerIndex = f1_local1
	} )
	LPDeltaRankProgress.id = "LPDeltaRankProgress"
	LPDeltaRankProgress:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 554, _1080p * 1366, _1080p * 797, _1080p * 996 )
	self:addElement( LPDeltaRankProgress )
	self.LPDeltaRankProgress = LPDeltaRankProgress
	
	local Rewards = nil
	
	Rewards = LUI.UIGrid.new( {
		maxVisibleRows = 1,
		maxVisibleColumns = 3,
		controllerIndex = f1_local1,
		buildChild = function ()
			return MenuBuilder.BuildRegisteredType( "LootItemCardMiniButton", {
				controllerIndex = menu
			} )
		end,
		refreshChild = function ( f5_arg0, f5_arg1, f5_arg2 )
			
		end,
		spacingX = _1080p * 12,
		spacingY = _1080p * 12,
		columnWidth = _1080p * 192,
		rowHeight = _1080p * 256
	} )
	Rewards.id = "Rewards"
	Rewards:SetMaxVisibleColumns( 3 )
	Rewards:SetRowSpacing( 12 )
	Rewards:setUseStencil( true )
	Rewards:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -298, _1080p * 300, _1080p * 535, _1080p * 851 )
	self:addElement( Rewards )
	self.Rewards = Rewards
	
	local UnlocksBanner = nil
	
	UnlocksBanner = MenuBuilder.BuildRegisteredType( "LabelWithBackground", {
		controllerIndex = f1_local1
	} )
	UnlocksBanner.id = "UnlocksBanner"
	UnlocksBanner.Backer:SetRGBFromTable( SWATCHES.highlight.vDefaultHighlight, 0 )
	UnlocksBanner.Text:SetRGBFromInt( 1514010, 0 )
	UnlocksBanner.Text:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU/UNLOCKS_CAPS" ), 0 )
	UnlocksBanner.Text:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_SSubHeaderBold.font.File ) )
	UnlocksBanner.Text:SetAlignment( LUI.Alignment.Center )
	UnlocksBanner:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -298, _1080p * 300, _1080p * -38, _1080p * -12 )
	self:addElement( UnlocksBanner )
	self.UnlocksBanner = UnlocksBanner
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	self._sequenceLengths.DefaultSequence = 0
	local f1_local12 = nil
	Header:RegisterAnimationSequence( "ShowRewards", {
		{
			value = 1,
			duration = 500,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ShowRewards = function ()
		menu:AnimateSequence( "ShowRewards" )
	end
	
	self._sequenceLengths.ShowRewards = 500
	self.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_secondary",
		helper_text = Engine[0xED84C33EC5F01EA]( "LUA_MENU/BACK" )
	} )
	if not self.bindButton then
		local f1_local13 = LUI.UIBindButton.new()
		f1_local13.id = "selfBindButton"
		self:addElement( f1_local13 )
		self.bindButton = f1_local13
	end
	self.bindButton:addEventHandler( "button_secondary", function ( f2_arg0, f2_arg1 )
		local f2_local0 = f2_arg1.controller or menu
		if CONDITIONS.IsDevelopmentBuild() then
			ACTIONS.LeaveMenu( menu, true )
		end
	end )
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "LPFlowEventEndRewards", LPFlowEventEndRewards )
LockTable( _M )
