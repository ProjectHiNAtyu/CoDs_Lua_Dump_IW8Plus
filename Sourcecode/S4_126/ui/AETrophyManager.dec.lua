-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
LUI.AETrophyManager = LUI.Class( LUI.UIElement )
LUI.AETrophyManager.init = function ( f11_arg0, f11_arg1, f11_arg2 )
	LUI.AETrophyManager.super.init( f11_arg0 )
	f11_arg0.id = "AETrophyManager"
	f11_arg0._root = f11_arg1
	f11_arg0._controllerIndex = f11_arg2
	f11_arg0._obtainedThisSession = {
		MP_BLING_PRO_2 = false,
		MP_LEET_SKILLS = false,
		MP_TOP_OF_THE_MOUNTAIN = false,
		MP_HELLO_THERE = false
	}
	f11_arg0:addEventHandler( "completed_challenge", LUI.AETrophyManager.ChallengeCompleted )
	f11_arg0:addEventHandler( CLANS.ClansNotification, LUI.AETrophyManager.ClansNotification )
	f11_arg0:addEventHandler( "online_data_fences_passed", LUI.AETrophyManager.OnlineDataFencesPassed )
end

LUI.AETrophyManager.ShouldBeVisible = function ( f10_arg0 )
	local f10_local0 = Engine[0x12586A3F4FB490E]()
	if not f10_local0 then
		f10_local0 = Game[0xA988866C889EAAD]()
	end
	return f10_local0
end

LUI.AETrophyManager.InitLayer = function ( f9_arg0 )
	
end

LUI.AETrophyManager.ClearLayer = function ( f8_arg0, f8_arg1 )
	
end

LUI.AETrophyManager.GiveAchievement = function ( f7_arg0, f7_arg1 )
	local f7_local0 = Engine[0xEE6F69FEA944B13]()
	local f7_local1 = assert
	local f7_local2
	if f7_local0 then
		f7_local2 = f7_local0
	else
		f7_local2 = f7_local0.aeTrophyManager
	end
	f7_local1( f7_local2 )
	if not f7_local0.aeTrophyManager._obtainedThisSession[f7_arg1] then
		Engine[0x4E5E0164DB5269B]( f7_arg0, f7_arg1 )
		f7_local0.aeTrophyManager._obtainedThisSession[f7_arg1] = true
	end
end

LUI.AETrophyManager.CheckChallenge = function ( f6_arg0, f6_arg1 )
	if not f6_arg0 or type( f6_arg1 ) ~= "number" then
		return 
	elseif f6_arg0.kind == AEKinds.S4_AE_KIND_PROGRESSION.ID then
		local f6_local0 = PROGRESSION.GetPlayerProgressionChallengeID()
		if type( f6_local0 ) ~= "string" or f6_local0 == "" then
			return 
		elseif f6_arg0.id == f6_local0 then
			local f6_local1 = f6_arg0.progress.rank
			if type( f6_local1 ) ~= "number" then
				return 
			end
			local f6_local2 = PROGRESSION.GetMaxRank()
			if type( f6_local2 ) ~= "number" or 0 >= f6_local2 then
				return 
			elseif f6_local2 <= f6_local1 then
				LUI.AETrophyManager.GiveAchievement( f6_arg1, "MP_LEET_SKILLS" )
			end
		end
	elseif f6_arg0.kind == AEKinds.S4_AE_KIND_GUNSMITH.ID then
		local f6_local0 = f6_arg0.progress.rank
		if type( f6_local0 ) ~= "number" then
			return 
		end
		local f6_local1 = PROGRESSION.GetWeaponRefForProgressionChallengeID( f6_arg0.id )
		if type( f6_local1 ) ~= "string" or f6_local1 == "" then
			return 
		else
			local f6_local2
			if f6_local1 then
				f6_local2 = f6_local1
			else
				f6_local2 = PROGRESSION.GetMaxWeaponLevel( f6_local1 )
			end
		end
		if type( f6_local2 ) ~= "number" or 0 >= f6_local2 then
			return 
		elseif f6_local2 <= f6_local0 then
			LUI.AETrophyManager.GiveAchievement( f6_arg1, "MP_BLING_PRO_2" )
		end
	elseif f6_arg0.kind == AEKinds.S4_AE_KIND_OPERATOR_PROGRESSION.ID then
		local f6_local0 = f6_arg0.progress.rank
		if type( f6_local0 ) ~= "number" then
			return 
		end
		local f6_local1 = OPERATOR.GetOperatorRefForProgressionChallengeID( f6_arg0.id )
		if type( f6_local1 ) ~= "string" or f6_local1 == "" then
			return 
		end
		local f6_local2 = OPERATOR.GetMaxRank( f6_local1 )
		if type( f6_local2 ) ~= "number" or 0 >= f6_local2 then
			return 
		elseif f6_local2 <= f6_local0 then
			LUI.AETrophyManager.GiveAchievement( f6_arg1, "MP_TOP_OF_THE_MOUNTAIN" )
		end
	end
end

LUI.AETrophyManager.AddWeaponChallenges = function ( f5_arg0, f5_arg1 )
	local f5_local0 = OnlineChallenges[0x5AFF5CA0A9FFC57]( f5_arg1, AEKinds.S4_AE_KIND_GUNSMITH.ID )
	if f5_local0 ~= nil then
		for f5_local4, f5_local5 in pairs( f5_local0 ) do
			table.insert( f5_arg0, f5_local5 )
		end
	end
end

LUI.AETrophyManager.AddOperatorChallenges = function ( f4_arg0, f4_arg1 )
	local f4_local0 = OnlineChallenges[0x5AFF5CA0A9FFC57]( f4_arg1, AEKinds.S4_AE_KIND_OPERATOR_PROGRESSION.ID )
	if f4_local0 ~= nil then
		for f4_local4, f4_local5 in pairs( f4_local0 ) do
			table.insert( f4_arg0, f4_local5 )
		end
	end
end

LUI.AETrophyManager.OnlineDataFencesPassed = function ( f3_arg0, f3_arg1 )
	local f3_local0 = {
		PROGRESSION.GetPlayerProgressionChallengeProgress( f3_arg1.controller )
	}
	LUI.AETrophyManager.AddWeaponChallenges( f3_local0, f3_arg1.controller )
	LUI.AETrophyManager.AddOperatorChallenges( f3_local0, f3_arg1.controller )
	for f3_local4, f3_local5 in pairs( f3_local0 ) do
		LUI.AETrophyManager.CheckChallenge( f3_local5, f3_arg1.controller )
	end
	f3_local1 = Clans[0x798165264495B93]( f3_arg1.controller ) or {}
	f3_local2 = Clans[0x43F567012B7061]( f3_arg1.controller )
	if cladID or 0 < #f3_local1 then
		LUI.AETrophyManager.GiveAchievement( f3_arg1.controller, "MP_HELLO_THERE" )
	end
	return false
end

LUI.AETrophyManager.ChallengeCompleted = function ( f2_arg0, f2_arg1 )
	local f2_local0 = Engine[0xEE6F69FEA944B13]()
	local f2_local1 = assert
	local f2_local2
	if f2_local0 then
		f2_local2 = f2_local0
	else
		f2_local2 = f2_local0.aeTrophyManager
	end
	f2_local1( f2_local2 )
	if f2_arg1.controller ~= f2_local0.aeTrophyManager._controllerIndex then
		return 
	else
		LUI.AETrophyManager.CheckChallenge( f2_arg1, f2_arg1.controller )
	end
end

LUI.AETrophyManager.ClansNotification = function ( f1_arg0, f1_arg1 )
	local f1_local0 = Engine[0xEE6F69FEA944B13]()
	local f1_local1 = assert
	local f1_local2
	if f1_local0 then
		f1_local2 = f1_local0
	else
		f1_local2 = f1_local0.aeTrophyManager
	end
	f1_local1( f1_local2 )
	if f1_arg1.options.controllerIndex ~= f1_local0.aeTrophyManager._controllerIndex then
		return 
	elseif f1_arg1.options.genEventName == "clans_created" or f1_arg1.options.genEventName == "clans_invite_accepted" or f1_arg1.options.genEventName == "clans_initialized_clan" then
		if f1_arg1.options.success ~= true and f1_arg1.options.success ~= 1 then
			f1_local1 = false
		else
			f1_local1 = true
		end
		if f1_local1 then
			LUI.AETrophyManager.GiveAchievement( f1_arg1.options.controllerIndex, "MP_HELLO_THERE" )
		end
	end
end

