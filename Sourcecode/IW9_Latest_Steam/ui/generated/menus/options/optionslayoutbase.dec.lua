-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
module( ..., package.seeall )
local f0_local0 = "RelatedSettingsList"
local f0_local1 = 1024 * _1080p
local f0_local2 = 776 * _1080p
local f0_local3 = function ( f6_arg0, f6_arg1, f6_arg2 )
	f6_arg0.selectedOptionId = f6_arg1.previewOption.id
	local f6_local0 = f6_arg0.OptionWindow:GetChildIndexInGrid( f6_arg1.previewOption ) + 1
	if f6_arg0.ignoreUpdate then
		return 
	elseif f6_local0 == f6_arg0.selectedOptionIndex then
		local f6_local1 = f6_arg1.previewOption.getParent
		if f6_local1 then
			f6_local1 = f6_arg1.previewOption:getParent()
		end
		if f6_local1.id ~= "ChildrenContainer" and not f6_arg0._lastSelectedOptionInExpander then
			f6_arg0._lastSelectedOptionInExpander = false
			return 
		end
		f6_arg0._lastSelectedOptionInExpander = true
	end
	f6_arg0.selectedOptionIndex = f6_local0
	if f6_arg1.description then
		f6_arg0.ButtonDescriptionText.Description:SetVisible( true )
		f6_arg0.ButtonDescriptionText.Description:setText( f6_arg1.description )
	else
		f6_arg0.ButtonDescriptionText.Description:SetVisible( false )
		f6_arg0.ButtonDescriptionText.Description:setText( "" )
	end
	if f6_arg1.buttonName then
		f6_arg0.OptionName:SetAlpha( 0.8 )
		f6_arg0.OptionName:setText( ToUpperCase( f6_arg1.buttonName ) )
	end
	local f6_local1 = f6_arg1.modeEffect
	if not f6_local1 then
		f6_local1 = f6_arg1.vramEffect
		if not f6_local1 then
			f6_local1 = f6_arg1.cpuEffect or f6_arg1.gpuEffect
		end
	end
	local f6_local2
	if not LUI.StringIsNilOrEmpty( f6_arg1.image ) then
		f6_local2 = not CONDITIONS.IsSplitscreen()
	else
		f6_local2 = false
	end
	if f6_local2 then
		f6_arg0.ImagePreview:setImage( RegisterMaterial( f6_arg1.image ) )
	end
	if f6_local1 then
		if f6_local2 and f6_arg0.effectAnimation ~= "SettingEffectWithImage" and not CONDITIONS.IsSplitscreen() then
			ACTIONS.AnimateSequence( f6_arg0, "SettingEffectWithImage" )
			f6_arg0.effectAnimation = "SettingEffectWithImage"
		elseif not f6_local2 and f6_arg0.effectAnimation ~= "SettingEffectNoImage" then
			ACTIONS.AnimateSequence( f6_arg0, "SettingEffectNoImage" )
			f6_arg0.effectAnimation = "SettingEffectNoImage"
		end
	elseif f6_local2 and f6_arg0.effectAnimation ~= "ShowImagePreview" and not CONDITIONS.IsSplitscreen() then
		ACTIONS.AnimateSequence( f6_arg0, "ShowImagePreview" )
		f6_arg0.effectAnimation = "ShowImagePreview"
	elseif not f6_local2 and f6_arg0.effectAnimation ~= "HideImagePreview" then
		ACTIONS.AnimateSequence( f6_arg0, "HideImagePreview" )
		f6_arg0.effectAnimation = "HideImagePreview"
	end
	OPTIONS.Menu.UpdateSettingEffect( f6_arg0, f6_arg2, f6_arg1.modeEffect, f6_arg1.vramEffect, f6_arg1.cpuEffect, f6_arg1.gpuEffect )
	local f6_local3 = f6_arg0.OptionWindow.categoryIndexList
	if 0 < #f6_local3 then
		OPTIONS.UpdateSeparator( f6_arg0, f6_arg2, OPTIONS.GetCategoryIndexWithSettingIndex( f6_local3, f6_local0 ) )
	end
	OPTIONS.UpdateResetButtonVisibility( f6_arg0, f6_arg2, f6_arg1 )
	OPTIONS.HandleRelatedSettingsPosition( f6_arg0, f6_arg2, f6_arg1, f0_local0 )
	OPTIONS.HandleNavigationToRelatedSettings( f6_arg0, f6_arg1 )
	if f6_arg0.FavoriteOption then
		local f6_local4 = OPTIONS.IsOptionFavorite( f6_arg2, f6_arg0.selectedOptionId )
		local f6_local5 = LAYOUT.GetTextWidth( f6_arg0.OptionName, f6_arg2 )
		local f6_local6 = f6_arg0.id == "EditButtonLayout"
		local f6_local7
		if f6_local6 then
			f6_local7 = 164
		else
			f6_local7 = 204
		end
		local f6_local8
		if f6_local6 then
			f6_local8 = 196
		else
			f6_local8 = 236
		end
		f6_arg0.FavoriteOption:SetVisible( f6_local4 )
		if CONDITIONS.IsArabic() then
			f6_arg0.FavoriteOption:SetAnchorsAndPosition( 0, 1, 0, 1, 1790 * _1080p - f6_local5, 1790 * _1080p - f6_local5 - 32 * _1080p, _1080p * f6_local7, _1080p * f6_local8 )
		else
			f6_arg0.FavoriteOption:SetAnchorsAndPosition( 0, 1, 0, 1, f6_local5 + f0_local0, f6_local5 + f0_local0 + 32 * _1080p, _1080p * f6_local7, _1080p * f6_local8 )
			if f0_local0 < f6_local5 then
				f6_arg0.FavoriteOption:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1800, _1080p * 1832, _1080p * f6_local7, _1080p * f6_local8 )
			end
		end
	end
	f6_arg0:UpdateFavoritePrompt( f6_arg2 )
end

local f0_local4 = function ( f5_arg0, f5_arg1 )
	f5_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
		button_ref = "button_alt2"
	} )
	if OPTIONS.ShowFavoritePrompt( f5_arg0, f5_arg1, true ) then
		f5_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			side = "left",
			priority = 2,
			gamepad_only = true,
			button_ref = "button_alt2",
			helper_text = OPTIONS.GetFavoritePromptString( OPTIONS.IsOptionFavorite( f5_arg1, f5_arg0.selectedOptionId ), f5_arg1 )
		} )
	end
end

local f0_local5 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0.UpdateFavoritePrompt = f0_local0
	OPTIONS.SetupFavorite( f3_arg0, f3_arg1 )
	f0_local0( f3_arg0, f3_arg1 )
	f3_arg0:addEventHandler( "update_button_selected", function ( f4_arg0, f4_arg1 )
		f4_arg0:UpdateOptionSelectedShared( f4_arg1, f3_arg0 )
		return true
	end )
end

local f0_local6 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PostLoadShared = f0_local0
	f2_arg0.UpdateOptionSelectedShared = f0_local0
end

function OptionsLayoutBase( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "OptionsLayoutBase"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "OptionsLayoutBase", OptionsLayoutBase )
LockTable( _M )
