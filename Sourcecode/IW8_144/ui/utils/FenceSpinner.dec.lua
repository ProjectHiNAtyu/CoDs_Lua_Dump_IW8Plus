-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 27-09-2025 22:41
module( ..., package.seeall )
LUI.FenceSpinner = LUI.Class( LUI.Fence )
LUI.FenceSpinner.CODE_STATE = {
	inProgress = 1,
	success = 2,
	idle = 0,
	failure = 3
}
LUI.FenceSpinner.FAILURE_ACTION = {
	fence = 1,
	none = 0
}
LUI.FenceSpinner.init = function ( f8_arg0 )
	LUI.Fence.init( f8_arg0 )
	f8_arg0.fenceChannel = CoD.FenceChannel.Default
end

LUI.FenceSpinner.Start = function ( f7_arg0 )
	f7_arg0:ShowInProgressPopup()
end

LUI.FenceSpinner.Stop = function ( f6_arg0 )
	local f6_local0, f6_local1 = Fences.DIDICIBJAC( f6_arg0.fenceChannel )
	LUI.FlowManager.RequestLeaveMenuByName( "spinner_inprogress_popup", true )
	if f6_local0 ~= LUI.FenceSpinner.CODE_STATE.idle then
		if f6_local0 == LUI.FenceSpinner.CODE_STATE.success then
			if Fences.ECCCADFEDB( f6_arg0.fenceChannel ) == true then
				f6_arg0:ShowSuccessPopup()
			end
			Fences.CABJICFBDA( f6_arg0.fenceChannel )
		elseif f6_local0 == LUI.FenceSpinner.CODE_STATE.failure and Fences.CEDAAIBBCB( f6_arg0.fenceChannel ) == LUI.FenceSpinner.FAILURE_ACTION.none then
			f6_arg0:ShowFailurePopup()
			Fences.CABJICFBDA( f6_arg0.fenceChannel )
		end
	end
end

LUI.FenceSpinner.PostFail = function ( f5_arg0 )
	if f5_arg0._state == LUI.Fence.STATE.fail then
		f5_arg0:ShowFailurePopup()
		Fences.CABJICFBDA( f5_arg0.fenceChannel )
	end
end

LUI.FenceSpinner.ShowInProgressPopup = function ( f4_arg0 )
	local f4_local0, f4_local1 = Fences.DIDICIBJAC( f4_arg0.fenceChannel )
	LUI.FlowManager.RequestPopupMenu( nil, "spinner_inprogress_popup", false, nil, false, {
		message = f4_local1
	}, nil, true, true )
end

LUI.FenceSpinner.ShowSuccessPopup = function ( f3_arg0 )
	local f3_local0, f3_local1 = Fences.DIDICIBJAC( f3_arg0.fenceChannel )
	LUI.FlowManager.RequestPopupMenu( nil, "spinner_confirmation_popup", false, nil, false, {
		message = f3_local1
	}, nil, true, true )
end

LUI.FenceSpinner.ShowFailurePopup = function ( f2_arg0 )
	local f2_local0, f2_local1 = Fences.DIDICIBJAC( f2_arg0.fenceChannel )
	LUI.FlowManager.RequestPopupMenu( nil, "generic_error_popup", false, nil, false, {
		message = f2_local1
	}, nil, true, true )
end

LUI.FenceSpinner.UpdateState = function ( f1_arg0 )
	assert( f1_arg0._state ~= LUI.Fence.STATE.fail )
	local f1_local0, f1_local1 = Fences.DIDICIBJAC( f1_arg0.fenceChannel )
	if f1_local0 == LUI.FenceSpinner.CODE_STATE.idle then
		if f1_arg0._state == LUI.Fence.STATE.block then
			f1_arg0._state = LUI.Fence.STATE.pass
		end
	elseif f1_local0 == LUI.FenceSpinner.CODE_STATE.inProgress then
		if f1_arg0._state == LUI.Fence.STATE.pass then
			f1_arg0._state = LUI.Fence.STATE.block
		end
	elseif f1_local0 == LUI.FenceSpinner.CODE_STATE.success then
		if f1_arg0._state ~= LUI.Fence.STATE.pass then
			f1_arg0._state = LUI.Fence.STATE.pass
		else
			f1_arg0._state = LUI.Fence.STATE.block
		end
	elseif f1_local0 == LUI.FenceSpinner.CODE_STATE.failure then
		if Fences.CEDAAIBBCB( f1_arg0.fenceChannel ) == LUI.FenceSpinner.FAILURE_ACTION.fence then
			f1_arg0._state = LUI.Fence.STATE.fail
		elseif f1_arg0._state ~= LUI.Fence.STATE.pass then
			f1_arg0._state = LUI.Fence.STATE.pass
		else
			f1_arg0._state = LUI.Fence.STATE.block
		end
	end
end

LUI.Fence.Register( "fenceSpinner", LUI.FenceSpinner )
LockTable( _M )
