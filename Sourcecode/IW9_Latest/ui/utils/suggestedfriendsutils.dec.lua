-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
SuggestedFriendsUtils = SuggestedFriendsUtils or {}
local f0_local0 = 20
local f0_local1 = 10
local f0_local2 = 15000
local f0_local3 = {}
local f0_local4 = {}
local f0_local5 = {
	MetOnMatch = 5,
	SameSquad = 2,
	MutualFriends = 3,
	SameChannel = 4,
	SameParty = 1
}
local f0_local6 = function ( f14_arg0, f14_arg1 )
	if not f0_local0[f14_arg0] then
		return true
	else
		return f0_local0 < f14_arg1 - f0_local0[f14_arg0]
	end
end

local f0_local7 = function ( f13_arg0, f13_arg1 )
	local f13_local0 = {
		reasonCode = f13_arg1
	}
	if f13_arg1 == f0_local0.MutualFriends then
		local f13_local1 = Social[0xCAEB442C1068A40]( f13_arg0, false ) or 0
		assert( 0 < f13_local1, "Was expecting at least 1 mutual friend" )
		f13_local0.mutualFriendsCount = f13_local1
	end
	return f13_local0
end

local f0_local8 = function ( f12_arg0, f12_arg1 )
	local f12_local0 = {}
	local f12_local1 = Lobby.GetLocalPlayerDataSource( f12_arg0 )
	local f12_local2 = f12_local1.xuid:GetValue( f12_arg0 )
	for f12_local6, f12_local7 in ipairs( f12_arg1 ) do
		if f12_local7.friendsListType or f12_local7.xuid == f12_local2 then
			table.insert( f12_local0, f12_local6 )
		end
	end
	for f12_local3 = #f12_local0, 1, -1 do
		table.remove( f12_arg1, f12_local0[f12_local3] )
	end
end

local f0_local9 = function ( f11_arg0, f11_arg1, f11_arg2 )
	if not f0_local0[f11_arg2] then
		f0_local0[f11_arg2] = {}
	end
	local f11_local0 = f0_local0[f11_arg2]
	local f11_local1 = Friends[0xA1964D04E992249]( f11_arg2, FRIENDS.GetXUIDUserData( f11_arg0 ) )
	if not f11_local1 then
		f11_local1 = Friends[0x4885E2E9199F800]( f11_arg2, FRIENDS.GetXUIDUserData( f11_arg0 ) )
	end
	if not f11_arg0 or f11_local0[f11_arg0.xuid] or f11_local1 then
		return false
	else
		f11_arg0.reason = f0_local0( f11_arg0.xuid, f11_arg1 )
		f11_local0[f11_arg0.xuid] = f11_arg0
		return true
	end
end

local f0_local10 = function ( f10_arg0 )
	local f10_local0 = {
		{
			type = 2,
			reasonCode = f0_local0.SameParty
		},
		{
			type = 1,
			reasonCode = f0_local0.SameSquad
		}
	}
	local f10_local1 = 0
	for f10_local2 = 1, #f10_local0, 1 do
		local f10_local5 = SOCIAL.GetFilteredRecentPlayersData( f10_arg0, f0_local0, f10_local0[f10_local2].type )
		f10_local5 = f10_local5.players or {}
		local f10_local6 = math.min( #f10_local5, SuggestedFriendsUtils.MAX_SUGGESTED_SIZE )
		for f10_local7 = 1, f10_local6, 1 do
			if f0_local0( f10_local5[f10_local7], f10_local0[f10_local2].reasonCode, f10_arg0 ) and SuggestedFriendsUtils.MAX_SUGGESTED_SIZE <= f10_local6 + 1 then
				
			end
		end
	end
end

local f0_local11 = function ( f9_arg0 )
	if Table.CountKeys( f0_local0[f9_arg0] ) >= SuggestedFriendsUtils.MAX_SUGGESTED_SIZE then
		return 
	end
	local f9_local0 = SOCIAL.GetFilteredRecentPlayersData( f9_arg0, f0_local0, 0 )
	f9_local0 = f9_local0.players or {}
	local f9_local1 = math.min( #f9_local0, SuggestedFriendsUtils.MAX_SUGGESTED_SIZE )
	local f9_local2 = 0
	for f9_local3 = 1, #f9_local0, 1 do
		if f9_local0[f9_local3].xuid and 0 < (Social[0xCAEB442C1068A40]( f9_local0[f9_local3].xuid, false ) or 0) and f0_local0( f9_local0[f9_local3], f0_local0.MutualFriends, f9_arg0 ) and f9_local2 + 1 == f9_local1 then
			break
		end
	end
end

local f0_local12 = function ( f8_arg0 )
	local f8_local0 = Table.CountKeys( f0_local0[f8_arg0] )
	if f8_local0 >= SuggestedFriendsUtils.MAX_SUGGESTED_SIZE then
		return 
	end
	local f8_local1 = GL_HACK.GetJoinedParties( f8_arg0 )
	Table.Shuffle( f8_local1 )
	local f8_local2 = f8_local0
	for f8_local13, f8_local14 in ipairs( f8_local1 ) do
		assert( CHANNELS.IsValidPartyID( f8_local14 ) )
		local f8_local15 = Social[0x18C8869C97BE161]( f8_local14 )
		if not (f8_local15 == Enum[0x71816B8A6999EAF][0x56160C1DC06A01]) and not (f8_local15 == Enum[0x71816B8A6999EAF][0x6779FA46C0A2058]) then
			local f8_local6 = Social[0xB9EF7ED6B33977C]( f8_local14 )
			f0_local0( f8_arg0, f8_local6 )
			local f8_local7 = 0
			for f8_local11, f8_local12 in ipairs( f8_local6 ) do
				if f0_local0( f8_local12, f0_local0.SameChannel, f8_arg0 ) then
				
				elseif f8_local7 ~= f0_local0 then
					if f8_local2 >= SuggestedFriendsUtils.MAX_SUGGESTED_SIZE then
						break
					end
				end
				f8_local7 = f8_local7 + 1
				f8_local2 = f8_local2 + 1
			end
		end
		if f8_local2 >= SuggestedFriendsUtils.MAX_SUGGESTED_SIZE then
			
		end
	end
end

local f0_local13 = function ( f7_arg0 )
	if Table.CountKeys( f0_local0[f7_arg0] ) >= SuggestedFriendsUtils.MAX_SUGGESTED_SIZE then
		return 
	end
	local f7_local0 = Social[0x78EFF3CEBEB804E]( f7_arg0, f0_local0 )
	for f7_local4, f7_local5 in ipairs( f7_local0.players or {} ) do
		if f0_local0( f7_local5, f0_local0.MetOnMatch, f7_arg0 ) and REG1 + 1 >= SuggestedFriendsUtils.MAX_SUGGESTED_SIZE then
			break
		end
	end
end

local f0_local14 = function ( f6_arg0 )
	f0_local0[f6_arg0] = {}
	f0_local0( f6_arg0 )
	f0_local0( f6_arg0 )
	f0_local0( f6_arg0 )
	f0_local0( f6_arg0 )
end

local f0_local15 = function ( f5_arg0 )
	local f5_local0 = Engine[0x6991337AE950F99]()
	if not f0_local0[f5_arg0] or f0_local0( f5_arg0, f5_local0 ) then
		f0_local0( f5_arg0 )
		f0_local0[f5_arg0] = f5_local0
	end
	local f5_local1 = f0_local0[f5_arg0]
	if CONDITIONS.IsUsingDummySocialContent() then
		f5_local1 = SocialAndLobbyDev.GetFakeSuggestedList()
	end
	local f5_local2 = 1
	local f5_local3 = {}
	for f5_local7, f5_local8 in pairs( f5_local1 ) do
		if f5_local8 then
			table.insert( f5_local3, f5_local2, f5_local8 )
			if f5_local2 == SuggestedFriendsUtils.MAX_SUGGESTED_SIZE then
				break
			end
			f5_local2 = f5_local2 + 1
		end
	end
	return f5_local3
end

SuggestedFriendsUtils.MAX_SUGGESTED_SIZE = 10
SuggestedFriendsUtils.InvalidateCache = function ( f4_arg0 )
	f0_local0[f4_arg0] = nil
end

SuggestedFriendsUtils.GetSuggestions = function ( f3_arg0 )
	return f0_local0( f3_arg0 )
end

SuggestedFriendsUtils.RemoveFromList = function ( f2_arg0, f2_arg1 )
	if not f0_local0[f2_arg0] then
		return 
	end
	for f2_local3, f2_local4 in pairs( f0_local0[f2_arg0] ) do
		if f2_local4.xuid == f2_arg1 then
			table.remove( f0_local0[f2_arg0], f2_local3 )
			return 
		end
	end
end

SuggestedFriendsUtils.GetReasonString = function ( f1_arg0 )
	local f1_local0 = f1_arg0.reasonCode
	if f1_local0 == f0_local0.SameParty then
		return Engine[0xED84C33EC5F01EA]( 0xE1E77037648E4B5 )
	elseif f1_local0 == f0_local0.SameSquad then
		return Engine[0xED84C33EC5F01EA]( 0x6B03A18D9A26127 )
	elseif f1_local0 == f0_local0.SameChannel then
		return Engine[0xED84C33EC5F01EA]( 0x306473A5BEF715A )
	elseif f1_local0 == f0_local0.SameClan then
		return Engine[0xED84C33EC5F01EA]( 0x49515D42738DEF3 )
	elseif f1_local0 == f0_local0.MetOnMatch then
		return Engine[0xED84C33EC5F01EA]( 0x57177671CDF346C )
	elseif f1_local0 == f0_local0.MutualFriends then
		local f1_local1 = f1_arg0.mutualFriendsCount
		if f1_local1 == 1 then
			return Engine[0xED84C33EC5F01EA]( 0x957B1A857688251, f1_local1 )
		else
			return Engine[0xED84C33EC5F01EA]( 0x885030C86951FC6, f1_local1 )
		end
	else
		assert( false, "The received reason code does not match with any mapped number" )
		return ""
	end
end

