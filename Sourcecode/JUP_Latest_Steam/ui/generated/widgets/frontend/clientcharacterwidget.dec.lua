-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:02
module( ..., package.seeall )
require( "ui.generated.widgets.frontend.mp.lobby.lobbycharacterdetails" )
local f0_local0 = 100
local f0_local1 = function ( f37_arg0, f37_arg1, f37_arg2 )
	local f37_local0 = f37_arg0.DetailWidget
	if f37_local0 then
		local f37_local1 = ClientCharacter[0xAB49E1B2150A83B]( f37_arg2 )
		f37_local0:Setup( f37_arg1, {
			gamerTag = f37_arg0._characterDataSources.gamertag:GetValue( f37_arg1 ),
			missingGamertag = f37_arg0._characterDataSources.missingGamertag:GetValue( f37_arg1 ),
			clanTag = f37_arg0._characterDataSources.clanTag:GetValue( f37_arg1 ),
			micAlphaDataSource = f37_arg0._characterDataSources.microphoneAlpha,
			micIconDataSource = f37_arg0._characterDataSources.microphoneIcon,
			kitDataSource = f37_arg0._characterDataSources.cpKit,
			kitStarsDataSource = f37_arg0._characterDataSources.cpKitStars,
			presencePlatform = f37_arg0._characterDataSources.presencePlatform:GetValue( f37_arg1 ),
			isMyPlayer = f37_arg0._characterDataSources.isMyPlayer:GetValue( f37_arg1 ),
			isPrivatePartyHost = f37_arg0._characterDataSources.isPrivatePartyHost:GetValue( f37_arg1 ),
			displayRank = f37_arg0._characterDataSources.displayRank:GetValue( f37_arg1 ),
			rankIcon = f37_arg0._characterDataSources.rankIcon:GetValue( f37_arg1 ),
			usingGamepad = f37_arg0._characterDataSources.usingGamepad:GetValue( f37_arg1 ),
			localControllerIndex = f37_arg0._characterDataSources.controllerIndex:GetValue( f37_arg1 ),
			xuid = f37_arg0._characterDataSources.xuid:GetValue( f37_arg1 )
		} )
		f37_local0:SetEntityNum( f37_local1 )
		f37_local0:SetEntityTag( "j_head" )
		f37_local0:SetAlpha( 1 )
		local f37_local2 = {
			x = 0,
			y = 0
		}
		local f37_local3 = f37_arg2 + 1
		if f37_local3 <= #Lobby.CharacterDetailsWidgetOffsets then
			f37_local2 = Lobby.CharacterDetailsWidgetOffsets[f37_local3]
			f37_local0:SetWorldSpacePosition( f37_local2.x, 0, f37_local2.y )
		end
	end
end

local f0_local2 = function ( f36_arg0 )
	f36_arg0:RemoveEventTimer( "checkForInvalidState" )
	f36_arg0:RemoveEventTimer( "showOperatorWhenLoaded" )
	f36_arg0:RemoveEventTimer( "showPetWhenLoaded" )
	FrontEndScene.SetCharacterVisible( f36_arg0._characterIndex, false, true )
	ClientCharacter[0x813BDB5DDDF1A24]( f36_arg0._characterIndex, false )
	if f36_arg0._petCharacterIndex then
		FrontEndScene.SetCharacterVisible( f36_arg0._petCharacterIndex, false, true )
	end
	if f36_arg0.DetailWidget then
		f36_arg0.DetailWidget:SetAlpha( 0 )
	end
end

local f0_local3 = function ( f35_arg0, f35_arg1, f35_arg2, f35_arg3, f35_arg4, f35_arg5 )
	ClientCharacter[0xFB5C3935C674824]( f35_arg0._characterIndex, f35_arg2, f35_arg1 )
	if f35_arg4 then
		f35_arg4 = OPERATOR.TryOverrideStowedWeapon( f35_arg0._characterIndex, f35_arg4 )
	end
	if f35_arg3 then
		ClientCharacter[0x1AEA65ACE3F1203]( f35_arg0._characterIndex, f35_arg3, f35_arg4, f35_arg5 )
	end
	f35_arg0._currentPrimaryWeaponModel = f35_arg3
end

local f0_local4 = function ( f34_arg0 )
	return Engine[0xBD71010D9F2BF04]( f34_arg0._controllerIndex, {
		f34_arg0._introAnim,
		f34_arg0._idleAnim,
		f34_arg0._matchmakingAnim,
		f34_arg0._animation
	} )
end

local f0_local5 = function ( f33_arg0 )
	return Engine[0xBD71010D9F2BF04]( f33_arg0._controllerIndex, {
		f33_arg0._petIntroAnim,
		f33_arg0._petIdleAnim,
		f33_arg0._petMatchmakingAnim,
		f33_arg0._petAnimation
	} )
end

local f0_local6 = function ( f32_arg0, f32_arg1, f32_arg2, f32_arg3, f32_arg4 )
	if not f32_arg2 and not f32_arg4 then
		return 
	end
	local f32_local0 = ClientCharacter[0xC4D5E9810D26F7E]( f32_arg0 )
	local f32_local1 = ClientCharacter[0xE6F30798441706C]( f32_arg0 )
	local f32_local2 = false
	if f32_arg2 and not String.IsNilOrEmpty( f32_arg1 ) and (f32_local0 ~= f32_arg1 or not String.IsNilOrEmpty( f32_local1 ) and f32_local1 ~= f32_arg1) then
		ClientCharacter[0xAA614EB46957F3B]( f32_arg0, f32_arg1, 0 )
		f32_local1 = f32_arg1
		f32_local2 = true
	end
	if f32_arg4 and not String.IsNilOrEmpty( f32_arg3 ) and (f32_local0 ~= f32_arg3 or not String.IsNilOrEmpty( f32_local1 ) and f32_local1 ~= f32_arg3) then
		if f32_local2 then
			ClientCharacter[0x524D4D5B140E36E]( f32_arg0, f32_arg3 )
		else
			ClientCharacter[0xAA614EB46957F3B]( f32_arg0, f32_arg3, 0 )
		end
	end
end

local f0_local7 = function ( f31_arg0, f31_arg1 )
	OPERATOR.ShowCharacterWhenLoaded( f31_arg0, f31_arg1, f31_arg0._petCharacterIndex, {
		timerName = "showPetWhenLoaded",
		isPet = true,
		operatorVFX = "",
		requiredAnimations = {
			f31_arg0._petIntroAnim,
			f31_arg0._petIdleAnim,
			f31_arg0._petMatchmakingAnim,
			f31_arg0._petAnimation
		}
	} )
end

local f0_local8 = function ( f29_arg0, f29_arg1 )
	local f29_local0 = function ()
		if f29_arg0._animation then
			f29_arg0:PlayAnimation( f29_arg0._characterIndex, f29_arg0._animation, f29_arg0._animationSynchronizationStartTime )
		else
			f29_arg0( f29_arg0._characterIndex, f29_arg0._introAnim, f29_arg0._playIntroAnimation, f29_arg0._idleAnim, f29_arg0._playIdleAnimation )
		end
		if f29_arg0._petCharacterIndex then
			if f29_arg0._petAnimation then
				f29_arg0:PlayAnimation( f29_arg0._petCharacterIndex, f29_arg0._petAnimation, f29_arg0._animationSynchronizationStartTime )
			else
				f29_arg0( f29_arg0._petCharacterIndex, f29_arg0._petIntroAnim, f29_arg0._playIntroAnimation, f29_arg0._petIdleAnim, f29_arg0._playIdleAnimation )
			end
			f29_arg0( f29_arg0, f29_arg0 )
		end
		if (Dvar[0x9E5BE3B4BBA4E0E]( 0x2454BD5628C8708 ) or f29_arg0._characterData.isMyPlayer) and f29_arg0._active then
			f29_arg0( f29_arg0, f29_arg0, f29_arg0._characterIndex )
		end
	end
	
	local f29_local1 = OPERATOR.GetOperatorSkinRef( f29_arg0._characterData.bodyModel, nil )
	local f29_local2 = ""
	if f29_local1 then
		local f29_local3 = OPERATOR.GetSkinByRef( f29_local1 )
		if f29_local3 then
			f29_local2 = f29_local3[0x474931F3A449B2A]
		end
	end
	local f29_local3 = OPERATOR.ShowCharacterWhenLoaded
	local f29_local4 = f29_arg0
	local f29_local5 = f29_arg1
	local f29_local6 = f29_arg0._characterIndex
	local f29_local7 = {
		timerName = "showOperatorWhenLoaded"
	}
	local f29_local8 = WEAPON.IsWeaponNoneValue( f29_arg0._currentPrimaryWeaponModel )
	if not f29_local8 then
		f29_local8 = WEAPON.IsWeaponFists( f29_arg0._currentPrimaryWeaponModel )
	end
	f29_local7.hideWeapon = f29_local8
	f29_local7.requiredAnimations = {
		f29_arg0._introAnim,
		f29_arg0._idleAnim,
		f29_arg0._matchmakingAnim,
		f29_arg0._animation
	}
	f29_local7.skinRef = f29_local1
	f29_local7.operatorVFX = f29_local2
	f29_local7.callback = f29_local0
	f29_local3( f29_local4, f29_local5, f29_local6, f29_local7 )
end

local f0_local9 = function ( f28_arg0, f28_arg1, f28_arg2, f28_arg3, f28_arg4, f28_arg5 )
	if f28_arg5 then
		f28_arg5 = OPERATOR.TryOverrideStowedWeapon( f28_arg0._characterIndex, f28_arg5 )
	end
	if not ClientCharacter[0x6342B7DDEEDA5F4]( f28_arg0._characterIndex, f28_arg2 ) then
		return true
	elseif not ClientCharacter[0x6342B7DDEEDA5F4]( f28_arg0._characterIndex, f28_arg3 ) then
		return true
	elseif ClientCharacter[0x24D8346FF9D35DC]( f28_arg1, f28_arg0._characterIndex ) ~= f28_arg4 then
		return true
	elseif ClientCharacter[0xF2A95FEC11E1817]( f28_arg1, f28_arg0._characterIndex ) ~= f28_arg5 then
		return true
	else
		return false
	end
end

local f0_local10 = function ( f27_arg0, f27_arg1 )
	if not ClientCharacter[0x6342B7DDEEDA5F4]( f27_arg0._petCharacterIndex, f27_arg1 ) then
		return true
	else
		return false
	end
end

local f0_local11 = function ( f26_arg0 )
	return f26_arg0._characterDataSources.clientCharacterCustomizationVersion:GetValue( f26_arg0._controllerIndex ) == -1
end

local f0_local12 = function ( f25_arg0 )
	if f0_local0( f25_arg0 ) and f25_arg0._characterDataSources.playercardCacheUploadRequested and f25_arg0._characterDataSources.playercardCacheUploadRequested:GetValue( f25_arg0._controllerIndex ) then
		return true
	else
		
	end
end

local f0_local13 = function ( f24_arg0 )
	f24_arg0._characterDataSources.clientCharacterCustomizationVersion:SetValue( f24_arg0._controllerIndex, f24_arg0._characterDataSources.customizationVersion:GetValue( f24_arg0._controllerIndex ) )
end

local f0_local14 = function ( f23_arg0 )
	local f23_local0
	if f23_arg0._characterDataSources.selectedOperatorIndex:GetValue( f23_arg0._controllerIndex ) == OPERATOR.SuperFaction.WEST then
		f23_local0 = OPERATOR.SuperFaction.EAST
		if not f23_local0 then
		
		else
			local f23_local1 = nil
			if f0_local0( f23_arg0 ) and f23_arg0._characterDataSources.isMyPlayer:GetValue( f23_arg0._controllerIndex, {
				defaultValue = false
			} ) then
				return CLIENTCHARACTER.GetLocalPlayerData( f23_arg0._controllerIndex, f23_local0 )
			else
				return CLIENTCHARACTER.GetData( f23_arg0._controllerIndex, f23_arg0._characterIndex, f23_arg0._characterDataSources, f23_arg0._forceSuperfactionBasedOnTeam, f23_local0 )
			end
		end
	end
	f23_local0 = OPERATOR.SuperFaction.WEST
end

local f0_local15 = function ( f22_arg0 )
	local f22_local0 = f22_arg0:getParent()
	return math.min( f22_local0:GetActiveCharacterNum(), FrontEndScene.MaxClientCharactersMPMainMenu )
end

local f0_local16 = function ( f21_arg0, f21_arg1 )
	if f0_local0( f21_arg0 ) then
		if f21_arg0._characterDataSources.isMyPlayer:GetValue( f21_arg1 ) then
			local f21_local0 = nil
			if f21_arg0._forceSuperfactionBasedOnTeam then
				f21_local0 = CLIENTCHARACTER.GetSuperFactionIndex( f21_arg1, f21_arg0._characterDataSources, f21_arg0._forceSuperfactionBasedOnTeam )
			end
			f21_arg0._characterData = CLIENTCHARACTER.GetLocalPlayerData( f21_arg1, f21_local0 )
		else
			f0_local0( f21_arg0 )
			return 
		end
	else
		f21_arg0._characterData = CLIENTCHARACTER.GetData( f21_arg1, f21_arg0._characterIndex, f21_arg0._characterDataSources, f21_arg0._forceSuperfactionBasedOnTeam )
		f0_local0( f21_arg0 )
	end
	OPERATOR.OverrideRiotshieldOverkill( f21_arg0._characterData )
end

local f0_local17 = function ( f20_arg0, f20_arg1 )
	return f0_local0( f20_arg0, f20_arg1, f20_arg0._characterData.headModel, f20_arg0._characterData.bodyModel, f20_arg0._characterData.primaryWeaponModel, f20_arg0._characterData.secondaryWeaponModel )
end

local f0_local18 = function ( f19_arg0, f19_arg1 )
	local f19_local0 = false
	if f0_local0( f19_arg0, f19_arg1 ) then
		STREAMING.RequestModels( f19_arg1, {
			requesterWidget = f19_arg0._menu,
			modelType = STREAMING.ModelTypes.Head,
			models = {
				f19_arg0._characterData.headModel
			}
		} )
		STREAMING.RequestModels( f19_arg1, {
			requesterWidget = f19_arg0._menu,
			modelType = STREAMING.ModelTypes.Body,
			models = {
				f19_arg0._characterData.bodyModel
			}
		} )
		STREAMING.RequestModels( f19_arg1, {
			requesterWidget = f19_arg0._menu,
			modelType = STREAMING.ModelTypes.WeaponWorld,
			models = {
				f19_arg0._characterData.primaryWeaponModel,
				f19_arg0._characterData.secondaryWeaponModel
			}
		} )
		ClientCharacter[0xB6D1A33AC2622D0]( f19_arg0._characterIndex, 0, 0, 0 )
		f19_local0 = true
		f0_local0( f19_arg0, f19_arg0._characterData.headModel, f19_arg0._characterData.bodyModel, f19_arg0._characterData.primaryWeaponModel, f19_arg0._characterData.secondaryWeaponModel )
	else
		f19_arg0._currentPrimaryWeaponModel = f19_arg0._characterData.primaryWeaponModel
	end
	if f19_arg0._streamModelsForAllSuperfactions then
		local f19_local1 = f0_local0( f19_arg0 )
		STREAMING.RequestModels( f19_arg1, {
			requesterWidget = f19_arg0._menu,
			modelType = STREAMING.ModelTypes.Head,
			models = {
				f19_local1.headModel
			}
		} )
		STREAMING.RequestModels( f19_arg1, {
			requesterWidget = f19_arg0._menu,
			modelType = STREAMING.ModelTypes.Body,
			models = {
				f19_local1.bodyModel
			}
		} )
		STREAMING.RequestModels( f19_arg1, {
			requesterWidget = f19_arg0._menu,
			modelType = STREAMING.ModelTypes.WeaponWorld,
			models = {
				f19_local1.primaryWeaponModel,
				f19_local1.secondaryWeaponModel
			}
		} )
	end
	f19_arg0._introAnim, f19_arg0._idleAnim, f19_arg0._matchmakingAnim = OPERATOR.GetMatchMakingAnimations( f19_arg0._characterIndex, f0_local0( f19_arg0 ), {
		characterData = f19_arg0._characterData
	} )
	STREAMING.RequestModels( f19_arg1, {
		requesterWidget = f19_arg0._menu,
		modelType = STREAMING.ModelTypes.Animation,
		models = {
			f19_arg0._introAnim,
			f19_arg0._idleAnim,
			f19_arg0._matchmakingAnim,
			f19_arg0._animation
		}
	} )
	if not f0_local0( f19_arg0 ) then
		f19_local0 = true
	end
	if f19_local0 then
		f0_local0( f19_arg0, false )
	end
end

local f0_local19 = function ( f18_arg0, f18_arg1 )
	f18_arg0._petCharacterIndex = nil
	local f18_local0 = Lobby.GetPetIndexForCharacter( f18_arg0._characterIndex )
	if f18_local0 then
		if not String.IsNilOrEmpty( f18_arg0._characterData.petRef ) then
			f18_arg0._petCharacterIndex = f18_local0
		else
			FrontEndScene.SetCharacterVisible( f18_local0, false, true )
		end
	end
	if f18_arg0._petCharacterIndex then
		local f18_local1 = false
		if f0_local0( f18_arg0, f18_arg0._characterData.petModel ) then
			STREAMING.RequestModels( f18_arg1, {
				requesterWidget = f18_arg0._menu,
				modelType = STREAMING.ModelTypes.Body,
				models = {
					f18_arg0._characterData.petModel
				}
			} )
			ClientCharacter[0xFB5C3935C674824]( f18_arg0._petCharacterIndex, f18_arg0._characterData.petModel )
			f18_local1 = true
		end
		if f18_arg0._streamModelsForAllSuperfactions then
			local f18_local2 = f0_local0( f18_arg0 )
			STREAMING.RequestModels( f18_arg1, {
				requesterWidget = f18_arg0._menu,
				modelType = STREAMING.ModelTypes.Body,
				models = {
					f18_local2.petModel
				}
			} )
		end
		f18_arg0._petIntroAnim, f18_arg0._petIdleAnim, f18_arg0._petMatchmakingAnim = OPERATOR.GetPetMatchMakingAnimations( f18_arg0._characterIndex, f0_local0( f18_arg0 ), f18_arg0._characterData.petAnimId )
		STREAMING.RequestModels( f18_arg1, {
			requesterWidget = f18_arg0._menu,
			modelType = STREAMING.ModelTypes.Animation,
			models = {
				f18_arg0._petIntroAnim,
				f18_arg0._petIdleAnim,
				f18_arg0._petMatchmakingAnim,
				f18_arg0._petAnimation
			}
		} )
		if not f0_local0( f18_arg0 ) then
			f18_local1 = true
		end
		if f18_local1 then
			FrontEndScene.SetCharacterVisible( f18_arg0._petCharacterIndex, false, true )
		end
	end
end

local f0_local20 = function ( f15_arg0, f15_arg1 )
	f15_arg0:RemoveEventTimer( "waitForFrontendReady" )
	f15_arg0:RemoveEventTimer( "checkForInvalidState" )
	f15_arg0:RemoveEventTimer( "showOperatorWhenLoaded" )
	f15_arg0:RemoveEventTimer( "showPetWhenLoaded" )
	local f15_local0 = false
	f15_arg0:CreateEventTimer( "waitForFrontendReady", 50, {
		immediate = true,
		callbackFunc = function ()
			if not Engine[0x636BC8C3AA71FAE]() then
				
			else
				
			end
			if not f15_arg0 then
				f15_arg0( f15_arg0, f15_arg0 )
				f15_arg0( f15_arg0, f15_arg0 )
				f15_arg0( f15_arg0, f15_arg0 )
				f15_arg0 = true
			end
			if not Engine[0x283B38F2501D924]() or not ClientModel[0xA988866C889EAAD]() then
				
			end
			local f16_local0 = f15_arg0._waitForFastFileGameWorkComplete and Engine[0xB47EFEF093F744D]() or f16_local1
			local f16_local1 = Dvar
			if #f16_local0[0x54084D7CA2317BB]( 0x8CC749B90DD2705 ) ~= 0 then
				
			else
				
			end
			f15_arg0( f15_arg0, f15_arg0 )
			f15_arg0:RemoveEventTimer( "waitForFrontendReady" )
			f16_local0 = f15_arg0
			local f16_local2 = f16_local0
			f16_local0 = f16_local0.CreateEventTimer
			f16_local0( f16_local2, "checkForInvalidState", 50, {
				immediate = true,
				callbackFunc = function ()
					f16_local0:CheckForInvalidCharacterState( f16_local0 )
				end
			} )
		end
	} )
end

local f0_local21 = function ( f14_arg0, f14_arg1 )
	if f0_local0( f14_arg0, f14_arg1 ) then
		f0_local0( f14_arg0, f14_arg1 )
	end
end

local f0_local22 = function ( f10_arg0, f10_arg1, f10_arg2 )
	local f10_local0 = function ()
		f10_arg0( f10_arg0, f10_arg0 )
	end
	
	if not GL_HACK.IsTmpFixDublicateGamerTagsKilled() then
		f10_arg0._xuidSubscription = f10_arg0:SubscribeToModel( f10_arg2.xuid:GetModel( f10_arg1 ), f10_local0, true )
	end
	f10_arg0._customizationVersionSubscription = f10_arg0:SubscribeToModel( f10_arg2.customizationVersion:GetModel( f10_arg1 ), f10_local0, true )
	if f10_arg0._forceSuperfactionBasedOnTeam then
		f10_arg0._teamSubscription = f10_arg0:SubscribeToModel( f10_arg2.team:GetModel( f10_arg1 ), function ()
			if IsPrivateMatch() then
				f10_arg0:dispatchEventToRoot( {
					name = "update_all_client_character_widgets"
				} )
			else
				f10_arg0()
			end
		end, true )
	end
	local f10_local1 = function ()
		if f10_arg0( f10_arg0 ) then
			f10_arg0()
		end
	end
	
	f10_arg0._clientCharacterCustomizationVersionSubscription = f10_arg0:SubscribeToModel( f10_arg2.clientCharacterCustomizationVersion:GetModel( f10_arg1 ), f10_local1, true )
	if f10_arg2.playercardCacheUploadRequested then
		f10_arg0._playercardCacheUploadRequestedSubscription = f10_arg0:SubscribeToModel( f10_arg2.playercardCacheUploadRequested:GetModel( f10_arg1 ), f10_local1, true )
	end
	f10_local0()
end

local f0_local23 = function ( f9_arg0, f9_arg1 )
	if f9_arg0._xuidSubscription then
		f9_arg0:UnsubscribeFromModel( f9_arg0._xuidSubscription )
		f9_arg0._xuidSubscription = nil
	end
	if f9_arg0._customizationVersionSubscription then
		f9_arg0:UnsubscribeFromModel( f9_arg0._customizationVersionSubscription )
		f9_arg0._customizationVersionSubscription = nil
	end
	if f9_arg0._clientCharacterCustomizationVersionSubscription then
		f9_arg0:UnsubscribeFromModel( f9_arg0._clientCharacterCustomizationVersionSubscription )
		f9_arg0._clientCharacterCustomizationVersionSubscription = nil
	end
	if f9_arg0._teamSubscription then
		f9_arg0:UnsubscribeFromModel( f9_arg0._teamSubscription )
		f9_arg0._teamSubscription = nil
	end
	if f9_arg0._playercardCacheUploadRequestedSubscription then
		f9_arg0:UnsubscribeFromModel( f9_arg0._playercardCacheUploadRequestedSubscription )
		f9_arg0._playercardCacheUploadRequestedSubscription = nil
	end
end

local f0_local24 = function ( f8_arg0, f8_arg1, f8_arg2, f8_arg3 )
	if f8_arg0._active == f8_arg2 and not f8_arg3 then
		return 
	elseif f8_arg0._characterDataSources then
		f0_local0( f8_arg0, f8_arg0._characterDataSources )
	end
	f8_arg0:RemoveEventTimer( "waitForFrontendReady" )
	f8_arg0:RemoveEventTimer( "checkForInvalidState" )
	f8_arg0:RemoveEventTimer( "showOperatorWhenLoaded" )
	f8_arg0:RemoveEventTimer( "showPetWhenLoaded" )
	f8_arg0._active = f8_arg2
	if f8_arg2 then
		if not f8_arg0._characterDataSources then
			f8_arg0._characterDataSources = CLIENTCHARACTER.GetCharacterDataSources( f8_arg1, f8_arg0._characterIndex, f8_arg0._dataSourcePath )
		end
		f0_local0( f8_arg0, f8_arg1, f8_arg0._characterDataSources )
		f0_local0( f8_arg0, f8_arg1 )
	else
		f0_local0( f8_arg0 )
	end
end

local f0_local25 = function ( f7_arg0, f7_arg1 )
	if f7_arg0._characterDataSources then
		f0_local0( f7_arg0, f7_arg0._characterDataSources )
	end
	f7_arg0._characterDataSources = f7_arg1
end

local f0_local26 = function ( f6_arg0, f6_arg1, f6_arg2, f6_arg3 )
	f6_arg0._animation = f6_arg1
	f6_arg0._petAnimation = f6_arg2
	f6_arg0._animationSynchronizationStartTime = f6_arg3
	if f6_arg0._active then
		f0_local0( f6_arg0, f6_arg0._controllerIndex )
	end
end

local f0_local27 = function ( f5_arg0, f5_arg1, f5_arg2, f5_arg3 )
	if f5_arg2 and Engine[0x22090BA9DCF62DC]( f5_arg0._controllerIndex ) and Engine[0x17C889BDEF27EED]() then
		local f5_local0 = nil
		if f5_arg3 then
			f5_local0 = Math.Clamp( (Engine[0x6991337AE950F99]() / 1000 - f5_arg3) / ClientCharacter[0x9D65588E886D72F]( f5_arg0._controllerIndex, f5_arg1, f5_arg2 ), 0, 0.999 )
		end
		ClientCharacter[0xAA614EB46957F3B]( f5_arg1, f5_arg2, nil, f5_local0 )
	end
end

local f0_local28 = function ( f4_arg0, f4_arg1 )
	f4_arg0._noHideOnNextMenus = f4_arg0._noHideOnNextMenus or {}
	table.insert( f4_arg0._noHideOnNextMenus, f4_arg1 )
end

local f0_local29 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0._characterIndex = f2_arg2.characterIndex
	f2_arg0._controllerIndex = f2_arg1
	f2_arg0._menu = f2_arg2.menu
	local f2_local0 = f2_arg2.dataSourcePath
	if not f2_local0 then
		f2_local0 = Lobby.AllMembersPath
	end
	f2_arg0._dataSourcePath = f2_local0
	f2_arg0._forceSuperfactionBasedOnTeam = f2_arg2.forceSuperfactionBasedOnTeam
	f2_arg0._active = false
	f2_arg0._playIdleAnimation = f2_arg2.playIdleAnimation
	f2_arg0._playIntroAnimation = f2_arg2.playIntroAnimation
	f2_arg0._waitForFastFileGameWorkComplete = f2_arg2.waitForFastFileGameWorkComplete
	f2_arg0._streamModelsForAllSuperfactions = f2_arg2.streamModelsForAllSuperfactions
	f2_arg0.SetActive = f0_local0
	f2_arg0.SetAnimation = f0_local0
	f2_arg0.PlayAnimation = f0_local0
	f2_arg0.DontHideOnSwitchToMenu = f0_local0
	f2_arg0.SetCharacterDataSources = f0_local0
	f2_arg0.CheckForInvalidCharacterState = f0_local0
	f2_arg0._loadTimerElement = LUI.UIElement.new()
	f2_arg0:addElement( f2_arg0._loadTimerElement )
	f2_arg0:registerEventHandler( "on_close", function ()
		local f3_local0 = true
		for f3_local4, f3_local5 in ipairs( f2_arg0._noHideOnNextMenus or {} ) do
			if LUI.FlowManager.IsInStack( f3_local5 ) then
				f3_local0 = false
				break
			end
		end
		if f3_local0 then
			f2_arg0( f2_arg0 )
		end
	end )
	if f2_arg0.DetailWidget then
		f2_arg0.DetailWidget:SetupAnchoredElement( {
			maxScale = 1,
			roundScreenPosition = true,
			minScale = 1
		} )
	end
end

function ClientCharacterWidget( f1_arg0, f1_arg1 )
	local f1_local0 = CONDITIONS
	local f1_local1 = LUI
	local f1_local2 = MenuBuilder
	local f1_local3 = f1_local1.UIElement.new()
	f1_local3:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920, 0, 1080 )
	f1_local3.id = "ClientCharacterWidget"
	local f1_local4
	if f1_arg1 then
		f1_local4 = f1_arg1
	else
		f1_local4 = f1_arg1.controllerIndex
	end
	f1_local4 = f1_local1.ValidateControllerIndex( f1_local3, f1_local4 )
	local f1_local5 = nil
	if f1_local0.IsDvarBoolEnabled( 0x2454BD5628C8708 ) and WIDGETOPTIONS.IsOptionsPropertyTrue( f1_arg1, "showDetailWidget" ) then
		f1_local5 = f1_local2.BuildRegisteredType( 0xC325A1234ABE850, {
			controllerIndex = f1_local4
		} )
		f1_local5[0x8B72E07B55C3AC0] = "DetailWidget"
		f1_local5:SetAlpha( 0, 0 )
		f1_local5:SetAnchorsAndPosition( 0, 1, 0, 1, 19.2, 269.2, 10.8, 44.8 )
		f1_local3:addElement( f1_local5 )
		f1_local3[0xF24ECCAAEE79708] = f1_local5
	end
	f0_local0( f1_local3, f1_local4, f1_arg1 )
	return f1_local3
end

MenuBuilder.registerType( 0xC1A5BD38E635141, ClientCharacterWidget )
LockTable( _M )
