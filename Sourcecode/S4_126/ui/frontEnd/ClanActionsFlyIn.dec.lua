-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
module( ..., package.seeall )
require( "ui.widgets.MenuTitle" )
require( "ui.widgets.ClanActionsDetails" )
local f0_local0 = function ( f51_arg0, f51_arg1, f51_arg2, f51_arg3, f51_arg4, f51_arg5, f51_arg6 )
	if not f51_arg0[f51_arg2] then
		local f51_local0 = MenuBuilder.BuildRegisteredType
		local f51_local1
		if f51_arg6 and not f51_arg6 then
			f51_local1 = f51_arg6
		else
			f51_local1 = "GenericButton"
		end
		f51_local0 = f51_local0( f51_local1, {
			controllerIndex = f51_arg1
		} )
		f51_local0.id = f51_arg2
		f51_local0:SetText( ToUpperCase( Engine[0xED84C33EC5F01EA]( f51_arg3 ) ) )
		f51_arg0.ButtonList:addElement( f51_local0 )
		f51_arg0[f51_arg2] = f51_local0
	end
	f51_arg0[f51_arg2]:addEventHandler( "button_action", f51_arg4 )
	table.insert( f51_arg0._buttons, f51_arg2 )
	if f51_arg5 then
		f51_arg0[f51_arg2]:addEventHandler( "button_over", f51_arg5 )
		f51_arg0[f51_arg2]:addEventHandler( "button_over_disable", f51_arg5 )
	end
	if f51_arg6 then
		f51_arg0[f51_arg2]:UpdateLockElement( f51_arg0[f51_arg2].Equipped )
	end
end

local f0_local1 = function ( f50_arg0 )
	for f50_local3, f50_local4 in ipairs( f50_arg0._buttons ) do
		if f50_arg0[f50_local4] then
			f50_arg0.ButtonList:RemoveElement( f50_arg0[f50_local4] )
			f50_arg0[f50_local4]:closeTree()
			f50_arg0[f50_local4] = nil
		end
	end
	f50_arg0._buttons = {}
	f50_arg0._numSpacers = 0
end

local f0_local2 = function ( f49_arg0, f49_arg1 )
	f49_arg0._numSpacers = f49_arg0._numSpacers and f49_arg0._numSpacers + 1 or 0
	local self = LUI.UIImage.new()
	self.id = "Spacer" .. f49_arg0._numSpacers
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 0, 0, _1080p * 36 )
	f49_arg0.ButtonList:addElement( self )
	f49_arg0[self.id] = self
	table.insert( f49_arg0._buttons, self.id )
end

local f0_local3 = function ( f45_arg0, f45_arg1 )
	f45_arg0:AddButton( f45_arg1, "EditNameButton", "CLANS/EDIT_CLAN_NAME", function ( f47_arg0, f47_arg1 )
		LUI.FlowManager.RequestAddMenu( "EditBoxPopup", true, f45_arg0, false, {
			headerText = Engine[0xED84C33EC5F01EA]( "CLANS/EDIT_CLAN_NAME" ),
			hintText = f45_arg0._clanData.clanName,
			maxLength = CLANS.CLANS_MAX_NAME_LENGTH,
			acceptCallbackFunc = function ( f48_arg0, f48_arg1 )
				local f48_local0 = Clans[0x43F567012B7061]( f48_arg1 )
				local f48_local1 = f48_arg0:GetCurrentMenu()
				local f48_local2 = f48_local1.GenericEditBox:GetText()
				if CLANS.ValidateStringUGC( f48_local2, f48_arg1 ) then
					Clans[0x4EB3A01FA73CD03]( f48_arg1, f48_local0, f48_local2 )
					
				else
					return true
				end
			end
		}, true, true )
	end, function ( f46_arg0, f46_arg1 )
		f45_arg0.ClanActionsDetails:ShowClanNameLayout( f45_arg0._clanData )
	end )
end

local f0_local4 = function ( f41_arg0, f41_arg1 )
	f41_arg0:AddButton( f41_arg1, "EditTagButton", "CLANS/EDIT_CLAN_TAG", function ( f43_arg0, f43_arg1 )
		LUI.FlowManager.RequestAddMenu( "EditBoxPopup", true, f41_arg0, false, {
			headerText = Engine[0xED84C33EC5F01EA]( "CLANS/EDIT_CLAN_TAG" ),
			hintText = f41_arg0._clanData.clanTag,
			maxLength = CLANS.CLANS_CLANTAG_LENGTH,
			acceptCallbackFunc = function ( f44_arg0, f44_arg1 )
				local f44_local0 = Clans[0x43F567012B7061]( f44_arg1 )
				local f44_local1 = f44_arg0:GetCurrentMenu()
				local f44_local2 = f44_local1.GenericEditBox:GetText()
				if f44_local2 ~= nil and 0 < #f44_local2 then
					if OSK[0x5D3D40218D04CB8]( f44_arg1, f44_local2 ) then
						if Clans[0x8314629E69027C0]( f44_arg1, f44_local0, f44_local2 ) then
							local f44_local3 = LUI.FlowManager.GetScopedData( f43_arg0 )
							f44_local3.updatingClanTag = f44_local2
						end
					else
						return true
					end
				end
			end
		}, true, true )
	end, function ( f42_arg0, f42_arg1 )
		f41_arg0.ClanActionsDetails:ShowClanTagLayout( f41_arg0._clanData )
	end )
end

local f0_local5 = function ( f38_arg0, f38_arg1 )
	f38_arg0:AddButton( f38_arg1, "EditEmblemButton", "CLANS/EDIT_CLAN_EMBLEM", function ( f40_arg0, f40_arg1 )
		LUI.FlowManager.RequestAddMenu( "ClanEmblemEditor", true, f38_arg0, false, {
			clanID = f38_arg0._clanID
		}, true, true )
	end, function ( f39_arg0, f39_arg1 )
		f38_arg0.ClanActionsDetails:ShowEmblemLayout( f38_arg0._clanData )
	end )
end

local f0_local6 = function ( f35_arg0, f35_arg1 )
	f35_arg0:AddButton( f35_arg1, "EditAnnouncementButton", "CLANS/EDIT_ANNOUNCEMENT", function ( f37_arg0, f37_arg1 )
		CLANS.OpenEditAnnouncementPopup( f35_arg0._clanData, f35_arg0 )
	end, function ( f36_arg0, f36_arg1 )
		f35_arg0.ClanActionsDetails:ShowAnnouncementLayout( f35_arg0._clanData )
	end )
end

local f0_local7 = function ( f31_arg0, f31_arg1 )
	f31_arg0:AddButton( f31_arg1, "EditDescriptionButton", "CLANS/EDIT_DESCRIPTION", function ( f33_arg0, f33_arg1 )
		local f33_local0 = {
			headerText = Engine[0xED84C33EC5F01EA]( "CLANS/EDIT_DESCRIPTION" )
		}
		local f33_local1
		if 0 < #f31_arg0._clanData.clanDescription then
			f33_local1 = f31_arg0._clanData.clanDescription
			if not f33_local1 then
			
			else
				f33_local0.hintText = f33_local1
				f33_local0.maxLength = CLANS.MAX_DESC_LENGTH
				f33_local0.acceptCallbackFunc = function ( f34_arg0, f34_arg1 )
					local f34_local0 = Clans[0x43F567012B7061]( f34_arg1 )
					local f34_local1 = f34_arg0:GetCurrentMenu()
					local f34_local2 = f34_local1.GenericEditBox:GetText()
					if CLANS.ValidateStringUGC( f34_local2, f34_arg1 ) then
						Clans[0xD7DCB3648B113EA]( f34_arg1, f34_local0, f34_local2 )
						Engine[0x15D98DF5F61904B]( f34_arg1, "clan_profile_updated", {
							description_updated = true
						} )
						
					else
						return true
					end
				end
				
				LUI.FlowManager.RequestAddMenu( "EditBoxPopup", true, f31_arg0, false, f33_local0, true, true )
			end
		end
		f33_local1 = Engine[0xED84C33EC5F01EA]( "CLANS/CLAN_DESCRIPTION_HINT" )
	end, function ( f32_arg0, f32_arg1 )
		f31_arg0.ClanActionsDetails:ShowDescriptionLayout( f31_arg0._clanData )
	end )
end

local f0_local8 = function ( f28_arg0, f28_arg1 )
	f28_arg0:AddButton( f28_arg1, "EditLabelsButton", "CLANS/EDIT_SEARCH_LABELS", function ( f30_arg0, f30_arg1 )
		LUI.FlowManager.RequestAddMenu( "ClanEditSearchLabels", true, f28_arg0, false, {
			clanID = f28_arg0._clanID,
			clanSearchLabels = f28_arg0._clanSearchLabels
		}, true, true )
	end, function ( f29_arg0, f29_arg1 )
		f28_arg0.ClanActionsDetails:ShowSearchLabelsLayout( f28_arg0._clanData )
	end )
end

local f0_local9 = function ( f25_arg0, f25_arg1 )
	f25_arg0:AddButton( f25_arg1, "ClanPrivacyButton", "CLANS/EDIT_PRIVACY", function ( f27_arg0, f27_arg1 )
		LUI.FlowManager.RequestAddMenu( "ClanEditJoinRequirements", true, f25_arg0, false, {
			clanID = f25_arg0._clanID
		}, true, true )
	end, function ( f26_arg0, f26_arg1 )
		f25_arg0.ClanActionsDetails:ShowPrivacyLayout( f25_arg0._clanData )
	end )
end

local f0_local10 = function ( f22_arg0, f22_arg1 )
	f22_arg0:AddButton( f22_arg1, "UseClanEmblemButton", "CLANS/USE_CLAN_EMBLEM_NO_HINT", function ( f24_arg0, f24_arg1 )
		f22_arg0._isUsingClanEmblem = not f22_arg0._isUsingClanEmblem
		Engine[0xF78719F4FBFB925]( f22_arg0, f22_arg0._isUsingClanEmblem and LOOT.EmblemType.CLAN or LOOT.EmblemType.CUSTOM )
		f24_arg0:SetEquipped( f22_arg0._isUsingClanEmblem )
		local f24_local0 = "v_ui_icon_clan"
		local f24_local1 = Engine[0xED84C33EC5F01EA]( "CLANS/CLAN_EMBLEM_EQUIPPED" )
		if not f22_arg0._isUsingClanEmblem then
			f24_local1 = Engine[0xED84C33EC5F01EA]( "LUA_MENU/EMBLEM_EQUIPPED" )
			f24_local0 = EmblemEditorUtils.GetEmblemImageFromID( EmblemEditorUtils.GetEmblemIDFromRef( LOOT.GetEquippedEmblemRef( f22_arg0 ) ) )
		end
		f22_arg0:dispatchEventToRoot( {
			name = "send_toast_notification",
			immediate = true,
			options = {
				displayTime = 3000,
				icon = f24_local0,
				header = f24_local1
			}
		} )
	end, function ( f23_arg0, f23_arg1 )
		f22_arg0.ClanActionsDetails:ShowEmblemLayout( f22_arg0._clanData )
	end, "GenericSelectionButton" )
	f22_arg0.UseClanEmblemButton:ShowEmpty( true )
	f22_arg0.UseClanEmblemButton:SetEquipped( f22_arg0._isUsingClanEmblem )
end

local f0_local11 = function ( f19_arg0, f19_arg1 )
	f19_arg0:AddButton( f19_arg1, "UseClanTagButton", "CLANS/USE_CLAN_TAG", function ( f21_arg0, f21_arg1 )
		f19_arg0._isUsingClanTag = not f19_arg0._isUsingClanTag
		Engine[0x83EEB60522A30A9]( f19_arg0, f19_arg0._isUsingClanTag and ClanTagType.CLAN or ClanTagType.DEFAULT )
		f21_arg0:SetEquipped( f19_arg0._isUsingClanTag )
		local f21_local0
		if f19_arg0._isUsingClanTag then
			f21_local0 = "v_ui_icon_clan"
		else
			f21_local0 = "v_ui_ic_equipped_indicator"
		end
		f19_arg0:dispatchEventToRoot( {
			name = "send_toast_notification",
			immediate = true,
			options = {
				displayTime = 3000,
				icon = f21_local0,
				header = Engine[0xED84C33EC5F01EA]( "CLANS/CLAN_TAG_EQUIPPED" ),
				description = "[" .. (f19_arg0._isUsingClanTag and f19_arg0._clanData.clanTag or Engine[0x415F61B3A63785D]( f19_arg0 )) .. "]"
			}
		} )
	end, function ( f20_arg0, f20_arg1 )
		f19_arg0.ClanActionsDetails:ShowClanTagLayout( f19_arg0._clanData )
	end, "GenericSelectionButton" )
	f19_arg0.UseClanTagButton:ShowEmpty( true )
	f19_arg0.UseClanTagButton:SetEquipped( f19_arg0._isUsingClanTag )
end

local f0_local12 = function ( f16_arg0, f16_arg1 )
	f16_arg0:AddButton( f16_arg1, "TransferOwnershipButton", "LUA_MENU/TRANSFER_OWNERSHIP", function ( f18_arg0, f18_arg1 )
		LUI.FlowManager.RequestPopupMenu( nil, "ClanTransferOwnershipPopup", true, f16_arg0, false, {
			controllerIndex = f16_arg0,
			clanID = f16_arg0._clanID
		} )
	end, function ( f17_arg0, f17_arg1 )
		f16_arg0.ClanActionsDetails:ShowTransferOwnershipLayout( f16_arg0._clanData )
	end )
end

local f0_local13 = function ( f13_arg0, f13_arg1 )
	f13_arg0:AddButton( f13_arg1, "DisbandClanButton", "CLANS/DISBAND_CLAN", function ( f15_arg0, f15_arg1 )
		local f15_local0 = f13_arg0._clanData.numClanMembers
		if f13_arg0._localClientRole == OnlineClanRole.OWNER and f15_local0 == 1 then
			LUI.FlowManager.RequestPopupMenu( nil, "LeaveClanConfirmPopup", true, f13_arg0, true, {
				disbandClan = true,
				controllerIndex = f13_arg0,
				clanID = f13_arg0._clanID
			} )
		else
			local f15_local1 = Engine[0xED84C33EC5F01EA]( "MENU/ERROR" )
			local f15_local2 = Engine[0xED84C33EC5F01EA]
			local f15_local3
			if 1 < f15_local0 then
				f15_local3 = "CLANS/DISBAND_CLAN_DISABLED_MESSAGE"
			else
				f15_local3 = "CLANS/CLAN_GENERIC_ERROR"
			end
			LUI.FlowManager.RequestPopupMenu( f13_arg0, "MessagePopup", true, f13_arg0._controllerIndex, false, {
				headerText = f15_local1,
				messageText = f15_local2( f15_local3 )
			} )
		end
	end, function ( f14_arg0, f14_arg1 )
		f13_arg0.ClanActionsDetails:ShowDisbandLayout( f13_arg0._clanData )
	end )
	if 1 < f13_arg0._clanData.numClanMembers then
		f13_arg0.DisbandClanButton:SetButtonDisabled( true )
	end
	f13_arg0.DisbandClanButton:UseWarningHoverState( true )
end

local f0_local14 = function ( f11_arg0, f11_arg1 )
	f11_arg0:AddButton( f11_arg1, "LeaveClanButton", "CLANS/LEAVE_CLAN", function ( f12_arg0, f12_arg1 )
		if f11_arg0._localClientRole ~= OnlineClanRole.OWNER then
			LUI.FlowManager.RequestPopupMenu( nil, "LeaveClanConfirmPopup", true, f11_arg0, true, {
				controllerIndex = f11_arg0,
				clanID = f11_arg0._clanID
			} )
		else
			LUI.FlowManager.RequestPopupMenu( f11_arg0, "MessagePopup", true, f11_arg0._controllerIndex, false, {
				headerText = Engine[0xED84C33EC5F01EA]( "MENU/ERROR" ),
				messageText = Engine[0xED84C33EC5F01EA]( "CLANS/CLAN_GENERIC_ERROR" )
			} )
		end
	end )
end

local f0_local15 = function ( f9_arg0, f9_arg1 )
	if f9_arg0.EditLabelsButton then
		f9_arg0.EditLabelsButton:SetButtonDisabled( true )
		f9_arg0.ClanActionsDetails.ClanLabels:UpdateClanLabels( f9_arg0._clanID, function ( f10_arg0 )
			f9_arg0._clanSearchLabels = f10_arg0
			f9_arg0.EditLabelsButton:SetButtonDisabled( false )
		end )
	end
end

local f0_local16 = function ( f8_arg0, f8_arg1 )
	f8_arg0._localClientRole = Clans[0xADB1DEE75D4529]( f8_arg1, f8_arg0._clanID, Engine[0x29DFACECF20DE0E]( f8_arg1 ) )
	f8_arg0:RemoveButtons()
	if f8_arg0._localClientRole == OnlineClanRole.OWNER then
		f0_local0( f8_arg0, f8_arg1 )
		f0_local0( f8_arg0, f8_arg1 )
		f0_local0( f8_arg0, f8_arg1 )
	end
	if f8_arg0._localClientRole >= OnlineClanRole.ADMIN then
		f0_local0( f8_arg0, f8_arg1 )
		f0_local0( f8_arg0, f8_arg1 )
		f0_local0( f8_arg0, f8_arg1 )
		f0_local0( f8_arg0, f8_arg1 )
		f0_local0( f8_arg0, f8_arg1 )
		f0_local0( f8_arg0, f8_arg1 )
	end
	f0_local0( f8_arg0, f8_arg1 )
	f0_local0( f8_arg0, f8_arg1 )
	f0_local0( f8_arg0, f8_arg1 )
	if f8_arg0._localClientRole == OnlineClanRole.OWNER then
		if 1 < f8_arg0._clanData.numClanMembers then
			f0_local0( f8_arg0, f8_arg1 )
		end
		f0_local0( f8_arg0, f8_arg1 )
	else
		f0_local0( f8_arg0, f8_arg1 )
	end
end

local f0_local17 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.AddButton = f0_local0
	f2_arg0.RemoveButtons = f0_local0
	f2_arg0.AddSpacer = f0_local0
	f2_arg0.SetupForRole = f0_local0
	f2_arg0._buttons = {}
	f2_arg0._spacers = {}
	f2_arg0._clanData = f2_arg2.clanData
	f2_arg0._clanID = f2_arg0._clanData.clanId
	f2_arg0._isUsingClanEmblem = Engine[0xCFB24E159372CA1]( f2_arg1 ) == LOOT.EmblemType.CLAN
	f2_arg0._isUsingClanTag = Engine[0x27D348B83E00B35]( f2_arg1 ) == ClanTagType.CLAN
	f2_arg0._clanSearchLabels = f2_arg2.clanSearchLabels or {}
	f2_arg0:SetupForRole( f2_arg1 )
	f2_arg0.backButtonOverride = function ()
		f2_arg0.ClanActionsDetails:SetAlpha( 0 )
	end
	
	local f2_local0 = LUI.FlowManager.GetScopedData( f2_arg0 )
	CLANS.AddClanEventHandlers( f2_arg0, {
		[CLANS.ClanEvents.SEARCH_TAGS_UPDATED] = function ( f6_arg0 )
			if f6_arg0.success == true or f6_arg0.success == 1 then
				f2_arg0( f2_arg0, f2_arg0 )
			end
		end,
		[CLANS.ClanEvents.INFO_UPDATED] = function ( f5_arg0 )
			if f5_arg0.success == false or f5_arg0.success == 0 then
				if f5_arg0.error == CLANS.ClanFailureReason.TAG_IN_USE_ERROR then
					LUI.FlowManager.RequestPopupMenu( f2_arg0, "ClanTagSuggestionPopup", false, f2_arg0, false, {
						controllerIndex = f2_arg0,
						clanName = f2_arg0._clanData.clanName,
						clanTag = f2_arg0.updatingClanTag
					} )
					f2_arg0.updatingClanTag = nil
				else
					local f5_local0 = Engine[0xED84C33EC5F01EA]( "MENU/ERROR" )
					local f5_local1 = CLANS.GetClanErrorMessage( f5_arg0.error )
					LUI.FlowManager.RequestLeaveMenuByName( "FenceDialogPopup", true, true )
					LUI.FlowManager.RequestPopupMenu( f2_arg0, "MessagePopup", true, f2_arg0, false, {
						headerText = f5_local0,
						messageText = f5_local1
					} )
				end
			elseif CLANS.IsValidClan( f2_arg0._clanID ) then
				f2_arg0._clanData = Clans[0xBAF6E7E287BB61F]( f2_arg0, f2_arg0._clanID )
				f2_arg0.ClanActionsDetails:UpdateDetails( f2_arg0._clanData )
			end
		end,
		[CLANS.ClanEvents.TAG_UPDATED] = function ( f4_arg0 )
			f2_arg0.updatingClanTag = nil
		end
	} )
	CLANS.AddClanRankChangeEventHandlers( f2_arg0, function ( f3_arg0 )
		f2_arg0:SetupForRole( f2_arg0 )
		f2_arg0:processEvent( {
			name = "gain_focus"
		} )
	end )
end

function ClanActionsFlyIn( menu, controller )
	local self = LUI.UIVerticalNavigator.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 730 * _1080p, 0, 1080 * _1080p )
	self.id = "ClanActionsFlyIn"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local ButtonList = nil
	
	ButtonList = LUI.UIVerticalList.new( {
		controller = f1_local1,
		direction = LUI.DIRECTION.vertical,
		horizontalAlignment = LUI.Alignment.None,
		verticalAlignment = LUI.Alignment.None,
		spacing = 6 * _1080p
	} )
	ButtonList.id = "ButtonList"
	ButtonList:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 80, _1080p * 680, _1080p * 210, _1080p * 950 )
	self:addElement( ButtonList )
	self.ButtonList = ButtonList
	
	local MenuTitle = nil
	
	MenuTitle = MenuBuilder.BuildRegisteredType( "MenuTitle", {
		controllerIndex = f1_local1
	} )
	MenuTitle.id = "MenuTitle"
	MenuTitle.MenuTitle:SetAlpha( 0.5, 0 )
	MenuTitle.MenuTitle:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( "CLANS/CLAN_ACTIONS" ) ), 0 )
	MenuTitle.Line:SetLeft( 0, 0 )
	MenuTitle:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1020, 0, _1080p * 105 )
	self:addElement( MenuTitle )
	self.MenuTitle = MenuTitle
	
	local ClanActionsDetails = nil
	
	ClanActionsDetails = MenuBuilder.BuildRegisteredType( "ClanActionsDetails", {
		controllerIndex = f1_local1
	} )
	ClanActionsDetails.id = "ClanActionsDetails"
	ClanActionsDetails:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 760, _1080p * 1760, _1080p * 161, _1080p * 961 )
	self:addElement( ClanActionsDetails )
	self.ClanActionsDetails = ClanActionsDetails
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "ClanActionsFlyIn", ClanActionsFlyIn )
LockTable( _M )
