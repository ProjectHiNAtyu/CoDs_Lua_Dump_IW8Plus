-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:04
module( ..., package.seeall )
require( "ui.generated.widgets.globalpanelbackground" )
require( "ui.generated.widgets.globalpaneltab" )
require( "ui.generated.widgets.frontend.menutitletext" )
require( "ui.generated.widgets.frontend.xpbonuslist" )
require( "ui.generated.widgets.channelconnecttoggle" )
local f0_local0 = 500
local f0_local1 = 5000
local f0_local2 = -11
local f0_local3 = function ( f25_arg0, f25_arg1 )
	for f25_local3, f25_local4 in ipairs( f25_arg0._channelTabs ) do
		if f25_local4.tabID == f25_arg1 then
			return f25_local3
		end
	end
end

local f0_local4 = function ( f24_arg0, f24_arg1 )
	local f24_local0 = f24_arg0:GetTabIndexByID( f24_arg1 )
	if f24_local0 then
		local f24_local1 = LUI.TabManager.GetTabAtIndex( f24_arg0.Tabs, f24_local0 )
		if f24_local1 and f24_local1:IsEnabled() then
			f24_arg0.Tabs:FocusTab( f24_arg0._controllerIndex, f24_local0 )
			return true
		end
	end
	return false
end

local f0_local5 = function ( f23_arg0 )
	if not CHANNELS.IsValidPartyID( f23_arg0._channelID ) or f23_arg0._channelType == Enum[0x71816B8A6999EAF][0xC0E29ADAA5D346F] then
		return 
	end
	local f23_local0 = CHANNELS.GetChannelDetails( f23_arg0._controllerIndex, f23_arg0._channelID )
	if not f23_local0 then
		return 
	elseif f23_local0.maxPlayers ~= f23_arg0._maxPlayers or f23_arg0._memberCount ~= f23_local0.memberCount then
		f23_arg0.MenuTitleText:SetTitle( ToUpperCase( CHANNELS.GetChannelName( f23_arg0._controllerIndex, f23_arg0._channelID ) ) )
		f23_arg0._memberCount = f23_local0.memberCount
		f23_arg0._maxPlayers = f23_local0.maxPlayers
	end
	if CHANNELS.IsGameChannel( f23_arg0._channelType ) then
		local f23_local1 = PARTY.GetPartyMembers( Social[0x446FFD0DEAD15E3]() )
		f23_arg0.XPBonusList:UpdateBonusList()
	end
end

local f0_local6 = function ( f22_arg0 )
	if CHANNELS.IsValidPartyID( f22_arg0._channelID ) then
		local f22_local0 = CHANNELS.IsVoicePartyConnectionStable( f22_arg0._controllerIndex )
		if f22_local0 ~= f22_arg0._isVoicePartyConnectionStable then
			f22_arg0._isVoicePartyConnectionStable = f22_local0
			f22_arg0.ChannelConnectToggle:SetToggleWarningState( not f22_local0 )
		end
	end
	if TEXTCHAT.IsValidChatID( f22_arg0._chatID ) then
		local f22_local0 = TEXTCHAT.CanConnectToTextChat()
		if f22_local0 ~= f22_arg0._isChatConnectionStable then
			f22_arg0._isChatConnectionStable = f22_local0
			for f22_local5, f22_local6 in ipairs( f22_arg0._channelTabs ) do
				if f22_local6.tabID == CHANNELS.TAB_ID.CHAT then
					local f22_local4 = f22_arg0.Tabs:GetTabAtIndex( f22_local5 )
					f22_local4:SetWarningState( not f22_local0 )
					break
				end
			end
		end
	end
end

local f0_local7 = function ( f19_arg0 )
	f19_arg0._channelTabs = {}
	if CHANNELS.IsValidPartyID( f19_arg0._channelID ) then
		table.insert( f19_arg0._channelTabs, {
			description = 0xED3697E7F6B8702,
			menuName = "ChannelMembers",
			icon = "icon_global_party",
			disabled = false,
			tabID = CHANNELS.TAB_ID.MEMBERS
		} )
	end
	if TEXTCHAT.IsValidChatID( f19_arg0._chatID ) and CONDITIONS.IsChannelsTextChatEnabled( f19_arg0._controllerIndex ) then
		if TEXTCHAT.IsWhisper( f19_arg0._controllerIndex, f19_arg0._chatID ) and not CONDITIONS.WhispersEnabled( f19_arg0._controllerIndex ) then
			
		elseif TEXTCHAT.IsGroupChat( f19_arg0._controllerIndex, f19_arg0._chatID ) and not CONDITIONS.GroupChatEnabled( f19_arg0._controllerIndex ) then
			
		else
			table.insert( f19_arg0._channelTabs, {
				description = 0x22026DBC96AC853,
				menuName = "ChannelChat",
				icon = "icon_global_chat",
				disabled = false,
				tabID = CHANNELS.TAB_ID.CHAT
			} )
		end
	end
	if CHANNELS.IsValidPartyID( f19_arg0._channelID ) then
		table.insert( f19_arg0._channelTabs, {
			description = 0x29781B66C812DAE,
			menuName = "ChannelSettings",
			icon = "icon_global_options",
			disabled = false,
			tabID = CHANNELS.TAB_ID.SETTINGS
		} )
	end
	f19_arg0.Tabs:SetSendEventOnTabChange( true )
	f19_arg0:addEventHandler( LUI.TabManager.TAB_SWITCH_EVENT, function ( f21_arg0, f21_arg1 )
		f19_arg0.activeTabWidget:processEvent( f21_arg1 )
		return true
	end )
	local f19_local0 = LUI.FlowManager.GetScopedData( f19_arg0 )
	local f19_local1 = f19_arg0._channelScopedData.selectedChannelDefaultTabIndex
	if not f19_local1 then
		f19_local1 = CHANNELS.TAB_ID.MEMBERS
	end
	local f19_local2 = {}
	for f19_local6, f19_local7 in ipairs( f19_arg0._channelTabs ) do
		table.insert( f19_local2, {
			name = f19_local7.name,
			icon = f19_local7.icon,
			widget = f19_local7.widget,
			disabled = f19_local7.disabled,
			hasDefaultFocus = f19_local7.tabID == f19_local1,
			focusFunction = function ( f20_arg0, f20_arg1, f20_arg2, f20_arg3 )
				TAB.UpdateBuiltWidget( f19_arg0, f19_arg0.menuName, f20_arg2, f20_arg3, {
					buildPriority = 4294967295,
					controllerIndex = f20_arg1
				} )
				DataSources.alwaysLoaded.textChat.lastActiveChannelTab:SetValue( f20_arg1, f19_arg0._channelTabs[f20_arg2 + 1].tabID )
			end,
			tooltipData = {
				lockedDescription = nil,
				verticalAlignement = true,
				title = nil,
				horizontalAlignement = true,
				description = f19_local7.description,
				orientation = LUI.ORIENTATION.down,
				controllerIndex = f19_arg0._controllerIndex
			}
		} )
	end
	if 0 < #f19_local2 then
		f19_arg0.Tabs:SetTabs( f19_local2 )
		f19_arg0.Tabs:SizeTabsToFit()
		f19_arg0.Tabs:SetAlignment( LUI.Alignment.Center )
	end
	if #f19_local2 <= 1 then
		f19_arg0.Tabs:SetVisible( false )
		f19_arg0.TabsBackerLeft:SetVisible( false )
		f19_arg0.TabsBackerRight:SetVisible( false )
		f19_arg0.TabsBacker:SetVisible( false )
	end
	if TEXTCHAT.IsWhisper( f19_arg0._controllerIndex, f19_arg0._chatID ) then
		ACTIONS.AnimateSequence( f19_arg0.Background, "WhisperChat" )
	end
end

local f0_local8 = function ( f17_arg0 )
	if CHANNELS.IsValidPartyID( f17_arg0._channelID ) then
		local f17_local0 = CHANNELS.GetChannelName( f17_arg0._controllerIndex, f17_arg0._channelID, false )
		ACTIONS.AnimateSequence( f17_arg0, "TitleDefaultWidth" )
		f17_arg0.MenuTitleText:SetTitle( f17_local0, nil, true )
		if f17_arg0._channelType == Enum[0x71816B8A6999EAF][0x56160C1DC06A01] or f17_arg0._channelType == Enum[0x71816B8A6999EAF][0x6779FA46C0A2058] then
			f17_arg0:CreateEventTimer( "memberCountRefreshTimer", f0_local0, {
				immediate = true,
				callbackFunc = function ( f18_arg0, f18_arg1 )
					f17_arg0( f18_arg0 )
					return true
				end
			} )
		end
	elseif TEXTCHAT.IsWhisper( f17_arg0._controllerIndex, f17_arg0._chatID ) then
		local f17_local0 = TEXTCHAT.GetWhisperMemberGamertag( f17_arg0._controllerIndex, f17_arg0._chatID )
		ACTIONS.AnimateSequence( f17_arg0, "TitleWhisperWidth" )
		f17_arg0.MenuTitleText:SetTitle( f17_local0, nil, true )
	elseif TEXTCHAT.IsGroupChat( f17_arg0._controllerIndex, f17_arg0._chatID ) then
		ACTIONS.AnimateSequence( f17_arg0, "TitleWhisperWidth" )
		local f17_local0 = GROUPS.GetGroupDetails( f17_arg0._controllerIndex, f17_arg0._groupID )
		f17_arg0.MenuTitleText:SetTitle( GROUPS.GetGroupNameToDisplay( GROUPS.SplitNameAndTag( f17_local0.groupName ) ), nil, true )
	end
	f17_arg0.MenuTitleText:DisableTypingEffect()
end

local f0_local9 = function ( f16_arg0 )
	local f16_local0 = f16_arg0._voicePartyID == f16_arg0._channelID
	local f16_local1 = f16_arg0.ToggleButton
	local f16_local2
	if f16_local0 then
		f16_local2 = 0x9CAB7D7A8514321
		if not f16_local2 then
		
		else
			local f16_local3 = {
				isMouseOnly = true,
				promptsData = {
					{
						button_ref = "button_channel_connect",
						keyprompt_text = "[{channel_connect}]",
						helper_text = Engine[0xED84C33EC5F01EA]( f16_local2 ),
						helper_definition = Engine[0xED84C33EC5F01EA]( f16_local2 )
					}
				},
				orientation = LUI.ORIENTATION.down
			}
			if not f16_local1._tootipDataAdded then
				f16_local1:AddTooltipData( f16_arg0._controllerIndex, f16_local3 )
				f16_local1._tootipDataAdded = true
			else
				f16_local1:RefreshTooltipData( f16_arg0._controllerIndex, f16_local3 )
			end
			f16_local1:SetToggleState( f16_local0 )
			f16_arg0.ConnectionIcon:SetVoiceChatDisabled( not CONDITIONS.IsVoiceChatEnabled() )
			f16_arg0.ConnectionIcon:SetVoiceConnectedState( f16_local0 )
		end
	end
	f16_local2 = 0xC76DBFACBB6C7B
end

local f0_local10 = function ( f11_arg0 )
	if CHANNELS.IsValidPartyID( f11_arg0._channelID ) then
		f11_arg0._voicePartyID = CHANNELS.GetVoiceParty( f11_arg0._controllerIndex )
		f0_local0( f11_arg0 )
		f11_arg0.ToggleButton.Action = function ( f14_arg0 )
			if CONDITIONS.IsVoiceChatEnabled() then
				CHANNELS.ToggleVoicePartyConnection( f11_arg0._controllerIndex, f11_arg0._channelID )
				f11_arg0._voicePartyID = CHANNELS.GetVoiceParty( f11_arg0._controllerIndex )
				f11_arg0( f11_arg0 )
			else
				CHANNELS.OpenEnableVoiceChatPopup( f11_arg0._controllerIndex, function ()
					Social[0x2DCEF319E8CCDEF]( f14_arg0._controllerIndex, CHANNELS.GetChannelType( f14_arg0._channelID ), f14_arg0._channelID )
					f14_arg0._voicePartyID = f14_arg0._channelID
					f14_arg0( f14_arg0 )
				end )
			end
			Engine[0xC4146BA76D0F982]( SOUND_SETS.mpMainMenu.toggleSwitch )
		end
		
		f11_arg0:AddGamepadEventCallback( "button_right_trigger", function ( f13_arg0, f13_arg1 )
			if CONDITIONS.IsGamepadInput( f13_arg1 ) then
				f13_arg0.ToggleButton:Action()
				return true
			else
				
			end
		end )
		f11_arg0:AddGamepadEventCallback( "button_channel_connect", function ( f12_arg0, f12_arg1 )
			if CONDITIONS.IsKeyboardInput( f12_arg1 ) then
				f12_arg0.ToggleButton:Action()
				return true
			else
				
			end
		end )
	else
		f11_arg0._voicePartyID = nil
		f11_arg0:RemoveElement( f11_arg0.ToggleButton )
		f11_arg0.ToggleButton:closeTree()
		f11_arg0.ToggleButton = nil
		f11_arg0:RemoveElement( f11_arg0.ConnectionIcon )
		f11_arg0.ConnectionIcon:closeTree()
		f11_arg0.ConnectionIcon = nil
		f11_arg0:RemoveElement( f11_arg0.VoiceConnectPrompt )
		f11_arg0.VoiceConnectPrompt:closeTree()
		f11_arg0.VoiceConnectPrompt = nil
	end
end

local f0_local11 = function ( f8_arg0, f8_arg1, f8_arg2 )
	f8_arg0.SetupTitle = f0_local0
	f8_arg0.GetTabIndexByID = f0_local0
	f8_arg0.FocusTabByID = f0_local0
	f8_arg0._controllerIndex = f8_arg1
	f8_arg0._channelScopedData = CHANNELS.GetChannelScopedData()
	f8_arg0._channelID = f8_arg0._channelScopedData.selectedChannelID
	f8_arg0._channelType = f8_arg0._channelScopedData.selectedChannelType
	f8_arg0._chatID = f8_arg0._channelScopedData.selectedChannelChatID
	f8_arg0._groupID = f8_arg0._channelScopedData.selectedGroupId
	f0_local0( f8_arg0 )
	f0_local0( f8_arg0 )
	if CHANNELS.IsValidPartyID( f8_arg0._channelID ) then
		f8_arg0.ChannelConnectToggle:SetupToggleButton( {
			hookGamepadEvents = true,
			channelID = f8_arg0._channelID
		} )
	else
		f8_arg0.ChannelConnectToggle:closeTree()
		f8_arg0.ChannelConnectToggle = nil
		f8_arg0.VoiceConnectPrompt:closeTree()
		f8_arg0.VoiceConnectPrompt = nil
	end
	f8_arg0:CreateEventTimer( "serviceRefreshTimer", f0_local0, {
		immediate = true,
		callbackFunc = function ( f10_arg0, f10_arg1 )
			f8_arg0( f10_arg0 )
			return true
		end
	} )
	f8_arg0:SubscribeToInputTypeModel( f8_arg1, function ( f9_arg0, f9_arg1 )
		if not f9_arg1.VoiceConnectPrompt then
			return 
		end
		local f9_local0 = LUI.IsGamepadActiveInputMethodForPrompts( f8_arg0 )
		local f9_local1 = f9_arg1.VoiceConnectPrompt
		local f9_local2 = f9_local1
		f9_local1 = f9_local1.setText
		local f9_local3
		if f9_local0 then
			f9_local3 = Engine[0xED84C33EC5F01EA]( 0x5C20288124BC9EE )
			if not f9_local3 then
			
			else
				f9_local1( f9_local2, f9_local3, 0 )
			end
		end
		f9_local3 = Engine[0xED84C33EC5F01EA]( 0x1AC7D7BB72917D9 )
	end )
end

States = {
	[0xAD14C6E7156B923] = function ( f4_arg0, f4_arg1 )
		local f4_local0 = function ( f7_arg0, f7_arg1 )
			
		end
		
		f4_arg0[0xA0E3FE61561D56B]:RegisterAnimationSequence( 0xBE4793705A3B803, {
			nil,
			nil,
			475,
			0,
			[1] = Bit.Pack( 2, TWEEN_PROPERTY.Right, NUM_FIELDS_BIT_POSITION ),
			[4] = f4_arg0[0xA0E3FE61561D56B][0xA04F4EF1995407E]
		} )
		local f4_local1 = function ( f6_arg0, f6_arg1 )
			f6_arg0[0xA0E3FE61561D56B]:AnimateSequence( 0xBE4793705A3B803 )
		end
		
		f4_arg0[0xA0E3FE61561D56B]:RegisterAnimationSequence( 0x92FADDD7A502206, {
			nil,
			nil,
			268,
			0,
			[1] = Bit.Pack( 2, TWEEN_PROPERTY.Right, NUM_FIELDS_BIT_POSITION ),
			[4] = f4_arg0[0xA0E3FE61561D56B][0xA04F4EF1995407E]
		} )
		f4_arg0[0x49D85F0EF1CEC84] = {
			[0xEF6C3AB55C07BEF] = f4_local0,
			[0xBE4793705A3B803] = f4_local1,
			[0x92FADDD7A502206] = function ( f5_arg0, f5_arg1 )
				f5_arg0[0xA0E3FE61561D56B]:AnimateSequence( 0x92FADDD7A502206 )
			end
		}
		f4_arg0[0xD97E59A206E4A54] = {
			[0x92FADDD7A502206] = 0,
			[0xBE4793705A3B803] = 0,
			[0xEF6C3AB55C07BEF] = 0
		}
	end
}
function ChannelPanel( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = MenuBuilder
	local f1_local2 = TWEEN_PROPERTY
	local f1_local3 = f1_local0.UIElement.new()
	f1_local3:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 620, 0, 1080 )
	f1_local3.id = "ChannelPanel"
	f1_local3[0xBD5D934D3CD91E5] = States
	local f1_local4
	if f1_arg1 then
		f1_local4 = f1_arg1
	else
		f1_local4 = f1_arg1.controllerIndex
	end
	f1_local4 = f1_local0.ValidateControllerIndex( f1_local3, f1_local4 )
	local f1_local5 = nil
	f1_local5 = f1_local1.BuildRegisteredType( 0xF5E61721CFB0CD8, {
		controllerIndex = f1_local4
	} )
	f1_local5[0x8B72E07B55C3AC0] = "Background"
	f1_local5:setPriority( -1 )
	f1_local5:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
	f1_local3:addElement( f1_local5 )
	f1_local3[0xD4176E7CA246EDD] = f1_local5
	local f1_local6 = nil
	f1_local6 = f1_local0.UIImage.new()
	f1_local6[0x8B72E07B55C3AC0] = "SubBacker"
	f1_local6:SetRGB( 1908255, 0 )
	f1_local6:setPriority( -1 )
	f1_local6:setImage( RegisterMaterial( 0xD4247DF2A39F4B0 ), 0 )
	f1_local6:SetAnchorsAndPosition( 0, 1, 1, 0, 1, 619, -82, 0 )
	f1_local3:addElement( f1_local6 )
	f1_local3[0xAC33016FD367625] = f1_local6
	local f1_local7 = nil
	f1_local7 = f1_local0.UIImage.new()
	f1_local7[0x8B72E07B55C3AC0] = "TabsBacker"
	f1_local7:SetRGB( 3026992, 0 )
	f1_local7:SetAnchorsAndPosition( 0, 0, 0, 1, 54, -54, 85, 145 )
	f1_local3:addElement( f1_local7 )
	f1_local3[0xA24FA7664E6920D] = f1_local7
	local f1_local8 = nil
	f1_local8 = f1_local0.UIImage.new()
	f1_local8[0x8B72E07B55C3AC0] = "TabsBackerRight"
	f1_local8:SetRGB( 2500648, 0 )
	f1_local8:SetAnchorsAndPosition( 1, 0, 0, 1, -54, -1, 85, 145 )
	f1_local3:addElement( f1_local8 )
	f1_local3[0xA111BC07E8212FD] = f1_local8
	local f1_local9 = nil
	f1_local9 = f1_local0.UIImage.new()
	f1_local9[0x8B72E07B55C3AC0] = "TabsBackerLeft"
	f1_local9:SetRGB( 2500648, 0 )
	f1_local9:SetAnchorsAndPosition( 0, 1, 0, 1, 1, 54, 85, 145 )
	f1_local3:addElement( f1_local9 )
	f1_local3[0xEF83018CF8EF788] = f1_local9
	local f1_local10 = nil
	f1_local10 = f1_local0.TabManager.new( {
		tabHeight = 60,
		spacing = 4,
		wrap = true,
		buildTab = function ()
			return f1_arg0.BuildRegisteredType( 0x7982BA93FAA1EAB, {
				controllerIndex = f1_arg0
			} )
		end,
		controllerIndex = f1_local4
	} )
	f1_local10[0x8B72E07B55C3AC0] = "Tabs"
	f1_local10:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, -278, 278, 85, 145 )
	f1_local10:SubscribeToModel( DataSources.alwaysLoaded.themes[0x1FCB6A4979FA718]:GetModel( f1_local4 ), function ()
		local f2_local0 = DataSources.alwaysLoaded.themes[0x1FCB6A4979FA718]:GetValue( f1_arg0 )
		if f2_local0 ~= nil then
			f1_arg0:SetTabSpacing( f2_local0 )
		end
	end )
	f1_local3:addElement( f1_local10 )
	f1_local3[0x92753EF0779B5CD] = f1_local10
	local f1_local11 = nil
	f1_local11 = f1_local0.UIStyledText.new()
	f1_local11[0x8B72E07B55C3AC0] = "VoiceConnectPrompt"
	f1_local11:SetRGB( SWATCHES[0xA04F4EF1995407E][0xD62FA474ADD1FC7], 0 )
	f1_local11:setText( Engine[0xED84C33EC5F01EA]( 0x5C20288124BC9EE ), 0 )
	f1_local11:setCaseStyle( f1_local0.CaseStyle.Uppercase )
	f1_local11:SetFont( FONTS.GetFont( FONTS.PrimaryBold.File ) )
	f1_local11:SetFontSize( 20 * _PT )
	f1_local11:SetMinFontSize( 20 * _PT )
	f1_local11:SetWordWrap( false )
	f1_local11:SetAlignment( f1_local0.Alignment.Left )
	f1_local11:SetVerticalAlignment( f1_local0.Alignment.Middle )
	f1_local11:SetTintFontIcons( true )
	f1_local11:SetShadowRGB( SWATCHES[0xEAF2060ABE5269B][0x25ECEAC112DE079], 0 )
	f1_local11:SetAnchorsAndPosition( 1, 0, 0, 1, -44, -14, 31, 61 )
	f1_local3:addElement( f1_local11 )
	f1_local3[0x22F8C1AEB2CA983] = f1_local11
	local f1_local12 = nil
	f1_local12 = f1_local1.BuildRegisteredType( 0xA0E3FE61561D56B, {
		controllerIndex = f1_local4
	} )
	f1_local12[0x8B72E07B55C3AC0] = "MenuTitleText"
	f1_local12[0xA04F4EF1995407E]:setCaseStyle( f1_local0.CaseStyle.Regular )
	f1_local12:SetAnchorsAndPosition( 0, 1, 0, 1, 87, 355, 29, 61 )
	f1_local3:addElement( f1_local12 )
	f1_local3[0xA0E3FE61561D56B] = f1_local12
	local f1_local13 = nil
	f1_local13 = f1_local1.BuildRegisteredType( 0xDBF8778D932185C, {
		controllerIndex = f1_local4
	} )
	f1_local13[0x8B72E07B55C3AC0] = "XPBonusList"
	f1_local13:SetAnchorsAndPosition( 0, 1, 0, 1, -389, -39, 328, 651 )
	f1_local3:addElement( f1_local13 )
	f1_local3[0xDBF8778D932185C] = f1_local13
	local f1_local14 = nil
	f1_local14 = f1_local1.BuildRegisteredType( 0xCDF8C357F12FE92, {
		controllerIndex = f1_local4
	} )
	f1_local14[0x8B72E07B55C3AC0] = "ChannelConnectToggle"
	f1_local14:SetAnchorsAndPosition( 0, 1, 0, 1, 447, 567, 22, 70 )
	f1_local3:addElement( f1_local14 )
	f1_local3[0xCDF8C357F12FE92] = f1_local14
	f0_local0( f1_local3, f1_local4, f1_arg1 )
	return f1_local3
end

MenuBuilder.registerType( 0x8CE7403990FCA12, ChannelPanel )
LockTable( _M )
