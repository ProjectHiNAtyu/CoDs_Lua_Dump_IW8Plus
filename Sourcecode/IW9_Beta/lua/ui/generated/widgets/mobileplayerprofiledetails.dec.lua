-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
module( ..., package.seeall )
require( "ui.generated.widgets.wzm.mobilegenerictextbutton" )
require( "ui.generated.widgets.wzm.mobilesingleiconbutton" )
require( "ui.generated.widgets.mobileplayerprogression" )
require( "ui.generated.widgets.frontend.mp.callingcards.mobilecallingcardimage" )
require( "ui.generated.widgets.mobileediticon" )
require( "ui.generated.widgets.frontend.social.mobileemblemimage" )
local f0_local0 = function ( f20_arg0, f20_arg1 )
	local f20_local0 = f20_arg0._playerData
	local f20_local1 = nil
	if f20_local0.emblem and f20_local0.emblem ~= "" then
		f20_local1 = f20_local0.emblem
	elseif f20_local0.emblemIndex then
		f20_local1 = EmblemEditorUtils.GetEmblemImageFromID( f20_local0.emblemIndex )
	end
	if f20_local1 then
		f20_arg0.Emblem:SetEmblem( f20_local1 )
	end
	local f20_local2 = f20_local0.fullNameWithHash
	local f20_local3 = SOCIAL.IsSelfXUID( f20_arg0, f20_arg1 )
	if f20_local3 then
		local f20_local4 = AccountRegistration[0x556651EAC41256A]( f20_arg1 )
		if f20_local4.success and f20_local4.username then
			f20_local2 = f20_local4.username
		end
	end
	f20_arg0.Name:setText( f20_local2 )
	f20_arg0.PlayerProgression:SetPlayerProgression( f20_arg1, f20_local0.baseRank, f20_local0.prestige, f20_local3 )
	f20_arg0.CallingCard:SetCallingCard( f20_local0.background )
	local f20_local4 = LAYOUT.GetTextWidth( f20_arg0.Name )
	local f20_local5, f20_local6, f20_local7, f20_local8 = f20_arg0.CopyButton:getCurrentGlobalRect()
	local f20_local9 = f20_local7 - f20_local5
	local f20_local10, f20_local11, f20_local12, f20_local13 = f20_arg0.Name:getCurrentGlobalRect()
	f20_arg0.CopyButton:SetLeft( f20_local10 + f20_local4 )
	f20_arg0.CopyButton:SetRight( f20_local10 + f20_local4 + f20_local9 )
end

local f0_local1 = function ( f9_arg0, f9_arg1, f9_arg2 )
	assert( f9_arg2.playerData )
	f9_arg0._playerData = f9_arg2.playerData
	f9_arg0.controllerIndex = f9_arg1
	if Dvar[0x9E5BE3B4BBA4E0E]( 0x6CE0AFBEFE7BD29 ) then
		Engine[0x685AE31DEDA30A4]( "character_faction_select_l" )
		OPERATOR.ShowPlayerCharacter( f9_arg0, f9_arg0._playerData.xuid, 0 )
	end
	f0_local0( f9_arg0, f9_arg1 )
	local f9_local0 = function ( f17_arg0, f17_arg1 )
		f17_arg0._controllerIndex = f17_arg1
		if SOCIAL.CanAddFriend( f17_arg0, f17_arg1 ) then
			f17_arg0.AddFriendButton:SetVisible( true )
			f17_arg0.AddFriendButton:registerEventHandler( "button_action", function ( element, event )
				element:SetButtonDisabled( true )
				element.Label.LabelText:setText( Engine[0xED84C33EC5F01EA]( 0xE7B83A4D49CEF27 ), 0 )
				SOCIAL.MobileAddFriend( element, f17_arg0, f17_arg0._playerData, function ()
					element:SetButtonDisabled( false )
					element.Label.LabelText:setText( Engine[0xED84C33EC5F01EA]( 0x1A45E04A4EFC64F ), 0 )
				end, {
					waitOffset = -28
				} )
			end )
		else
			f17_arg0.AddFriendButton:SetVisible( false )
		end
	end
	
	f9_local0( f9_arg0, f9_arg1 )
	f9_arg0:addEventHandler( "remove_friend_complete", function ( f16_arg0, f16_arg1 )
		f9_arg0( f16_arg0, f16_arg0.controllerIndex )
	end )
	f9_arg0:addEventHandler( "player_accept_friend_request", function ( f15_arg0, f15_arg1 )
		if f15_arg1.xuidString == f15_arg0._playerData.xuid then
			f9_arg0( f15_arg0, f15_arg0.controllerIndex )
		end
	end )
	if SOCIAL.IsSelfXUID( f9_arg0, f9_arg1 ) and Dvar[0x9E5BE3B4BBA4E0E]( 0xF0E6ACB76C93792 ) then
		ACTIONS.AnimateSequence( f9_arg0, "LocalPlayer" )
		f9_local0 = LUI.DataSourceInControllerModel.new( PlayercardUtils.PlayerCardModelPath .. ".emblemIndex" )
		local f9_local1 = LUI.DataSourceInControllerModel.new( PlayercardUtils.PlayerCardModelPath .. ".backgroundIndex" )
		f9_arg0:SubscribeToModel( f9_local0:GetModel( f9_arg1 ), function ( f14_arg0 )
			local f14_local0 = DataModel[0x614D394F6F9A18D]( f14_arg0 )
			f9_arg0._playerData.emblemIndex = f14_local0
			f9_arg0.Emblem:SetEmblem( EmblemEditorUtils.GetEmblemImageFromID( f14_local0 ) )
		end )
		f9_arg0:SubscribeToModel( f9_local1:GetModel( f9_arg1 ), function ( f13_arg0 )
			local f13_local0 = DataModel[0x614D394F6F9A18D]( f13_arg0 )
			f9_arg0._playerData.background = f13_local0
			f9_arg0.CallingCard:SetCallingCard( f13_local0 )
		end )
		f9_arg0.Emblem:addEventHandler( "button_action", function ( f12_arg0, f12_arg1 )
			LUI.FlowManager.RequestPopupMenu( nil, LOOT.GetEmblemSelectMenuRef(), true, f9_arg0, false, {}, nil, false, true )
			return true
		end )
		f9_arg0.CallingCard:addEventHandler( "button_action", function ( f11_arg0, f11_arg1 )
			LUI.FlowManager.RequestPopupMenu( nil, LOOT.GetPlayerCardSelectMenuRef(), true, f9_arg0, false, {}, nil, false, true )
			return true
		end )
	else
		f9_arg0.CallingCard:addEventHandler( "button_action", function ( f10_arg0, f10_arg1 )
			LUI.FlowManager.RequestPopupMenu( nil, "MobileCallingCardDetailsPopupWindow", false, f9_arg0, false, {
				PlayerData = f9_arg0._playerData
			}, nil, true, true )
			return true
		end )
	end
end

States = {
	[0xAD14C6E7156B923] = function ( f6_arg0, f6_arg1 )
		local f6_local0 = function ( f8_arg0, f8_arg1 )
			
		end
		
		f6_arg0.AddFriendButton:RegisterAnimationSequence( "LocalPlayer", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Visibility,
				value = LUI.Visibility.Hidden
			}
		} )
		f6_arg0.WhisperButton:RegisterAnimationSequence( "LocalPlayer", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Visibility,
				value = LUI.Visibility.Hidden
			}
		} )
		f6_arg0.SettingsButton:RegisterAnimationSequence( "LocalPlayer", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Visibility,
				value = LUI.Visibility.Hidden
			}
		} )
		f6_arg0.CopyButton:RegisterAnimationSequence( "LocalPlayer", {
			{
				duration = 1200,
				property = TWEEN_PROPERTY.Visibility,
				value = LUI.Visibility.Visible
			}
		} )
		f6_arg0.CallingCardEdit:RegisterAnimationSequence( "LocalPlayer", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Visibility,
				value = LUI.Visibility.Visible
			}
		} )
		f6_arg0.CallingCardMoreInfo:RegisterAnimationSequence( "LocalPlayer", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Visibility,
				value = LUI.Visibility.Hidden
			}
		} )
		f6_arg0.EmblemEdit:RegisterAnimationSequence( "LocalPlayer", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Visibility,
				value = LUI.Visibility.Visible
			}
		} )
		f6_arg0._sequences = {
			DefaultSequence = f6_local0,
			LocalPlayer = function ( f7_arg0, f7_arg1 )
				f7_arg0.AddFriendButton:AnimateSequence( "LocalPlayer" )
				f7_arg0.WhisperButton:AnimateSequence( "LocalPlayer" )
				f7_arg0.SettingsButton:AnimateSequence( "LocalPlayer" )
				f7_arg0.CopyButton:AnimateSequence( "LocalPlayer" )
				f7_arg0.CallingCardEdit:AnimateSequence( "LocalPlayer" )
				f7_arg0.CallingCardMoreInfo:AnimateSequence( "LocalPlayer" )
				f7_arg0.EmblemEdit:AnimateSequence( "LocalPlayer" )
			end
		}
		f6_arg0._sequenceLengths = {
			DefaultSequence = 0,
			LocalPlayer = 1200
		}
	end
}
function MobilePlayerProfileDetails( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "MobilePlayerProfileDetails"
	self.__states = States
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local AddFriendButton = nil
	
	AddFriendButton = MenuBuilder.BuildRegisteredType( "MobileGenericTextButton", {
		controllerIndex = f1_local1
	} )
	AddFriendButton.id = "AddFriendButton"
	AddFriendButton.Label.LabelText:setText( Engine[0xED84C33EC5F01EA]( 0x1A45E04A4EFC64F ), 0 )
	AddFriendButton:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1362, _1080p * 1815, _1080p * 864, _1080p * 919 )
	self:addElement( AddFriendButton )
	self.AddFriendButton = AddFriendButton
	
	local WhisperButton = nil
	
	WhisperButton = MenuBuilder.BuildRegisteredType( "MobileSingleIconButton", {
		controllerIndex = f1_local1
	} )
	WhisperButton.id = "WhisperButton"
	WhisperButton.Background:SetRGBFromTable( SWATCHES.genericMenu.blackBackground, 0 )
	WhisperButton.Icon:setImage( RegisterMaterial( 0x27D65A1EABFDDE2 ), 0 )
	WhisperButton:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * 795, _1080p * 915, _1080p * 188, _1080p * 308 )
	self:addElement( WhisperButton )
	self.WhisperButton = WhisperButton
	
	local SettingsButton = nil
	
	SettingsButton = MenuBuilder.BuildRegisteredType( "MobileSingleIconButton", {
		controllerIndex = f1_local1
	} )
	SettingsButton.id = "SettingsButton"
	SettingsButton.Background:SetRGBFromTable( SWATCHES.genericMenu.blackBackground, 0 )
	SettingsButton.Icon:setImage( RegisterMaterial( 0x684CC372C7687E4 ), 0 )
	SettingsButton:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * 795, _1080p * 915, _1080p * 68, _1080p * 188 )
	self:addElement( SettingsButton )
	self.SettingsButton = SettingsButton
	
	local CopyButton = nil
	
	CopyButton = MenuBuilder.BuildRegisteredType( "MobileSingleIconButton", {
		controllerIndex = f1_local1
	} )
	CopyButton.id = "CopyButton"
	CopyButton:SetVisibility( LUI.Visibility.Hidden )
	CopyButton:SetRGBFromTable( SWATCHES.IW9StyleGuide.styleGuideCool01, 0 )
	CopyButton:SetAlpha( 0.5, 0 )
	CopyButton.Background:setImage( RegisterMaterial( 0x605BADACD03BBDB ), 0 )
	CopyButton.Icon:setImage( RegisterMaterial( 0x9FACE7DDF933685 ), 0 )
	CopyButton:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 846, _1080p * 946, _1080p * 300, _1080p * 400 )
	self:addElement( CopyButton )
	self.CopyButton = CopyButton
	
	local PlayerProgression = nil
	
	PlayerProgression = MenuBuilder.BuildRegisteredType( "MobilePlayerProgression", {
		controllerIndex = f1_local1
	} )
	PlayerProgression.id = "PlayerProgression"
	PlayerProgression:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 73, _1080p * 373, _1080p * 383, _1080p * 463 )
	self:addElement( PlayerProgression )
	self.PlayerProgression = PlayerProgression
	
	local Name = nil
	
	Name = LUI.UIText.new()
	Name.id = "Name"
	Name:SetRGBFromTable( SWATCHES.text.primaryText, 0 )
	Name:SetBlendMode( BLEND_MODE.addWithAlpha )
	Name:setText( "", 0 )
	Name:SetFont( FONTS.GetFont( FONTS.SecondaryMedium.File ) )
	Name:SetFontSize( 42 * _PT )
	Name:SetMinFontSize( 42 * _PT )
	Name:SetWordWrap( false )
	Name:SetAlignment( LUI.Alignment.Left )
	Name:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 70, _1080p * 189, _1080p * 330, _1080p * 371 )
	self:addElement( Name )
	self.Name = Name
	
	local CallingCard = nil
	
	CallingCard = MenuBuilder.BuildRegisteredType( "MobileCallingCardImage", {
		controllerIndex = f1_local1
	} )
	CallingCard.id = "CallingCard"
	CallingCard:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 265, _1080p * 925, _1080p * 150, _1080p * 325 )
	CallingCard:SubscribeToModelThroughElement( self, "texture", function ()
		local f5_local0 = menu:GetDataSource()
		f5_local0 = f5_local0.texture:GetValue( menu )
		if f5_local0 ~= nil then
			menu.CallingCardTexture:setImage( RegisterMaterial( f5_local0 ), 0 )
		end
	end )
	self:addElement( CallingCard )
	self.CallingCard = CallingCard
	
	local CallingCardEdit = nil
	
	CallingCardEdit = MenuBuilder.BuildRegisteredType( "MobileEditIcon", {
		controllerIndex = f1_local1
	} )
	CallingCardEdit.id = "CallingCardEdit"
	CallingCardEdit:SetVisibility( LUI.Visibility.Hidden )
	CallingCardEdit:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 845, _1080p * 925, _1080p * 245, _1080p * 325 )
	self:addElement( CallingCardEdit )
	self.CallingCardEdit = CallingCardEdit
	
	local CallingCardMoreInfo = nil
	
	CallingCardMoreInfo = LUI.UIImage.new()
	CallingCardMoreInfo.id = "CallingCardMoreInfo"
	CallingCardMoreInfo:setImage( RegisterMaterial( 0x23F40ADED379D36 ), 0 )
	CallingCardMoreInfo:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 825, _1080p * 905, _1080p * 168, _1080p * 248 )
	self:addElement( CallingCardMoreInfo )
	self.CallingCardMoreInfo = CallingCardMoreInfo
	
	local Emblem = nil
	
	Emblem = MenuBuilder.BuildRegisteredType( "MobileEmblemImage", {
		controllerIndex = f1_local1
	} )
	Emblem.id = "Emblem"
	Emblem:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 70, _1080p * 245, _1080p * 150, _1080p * 325 )
	self:addElement( Emblem )
	self.Emblem = Emblem
	
	local EmblemEdit = nil
	
	EmblemEdit = MenuBuilder.BuildRegisteredType( "MobileEditIcon", {
		controllerIndex = f1_local1
	} )
	EmblemEdit.id = "EmblemEdit"
	EmblemEdit:SetVisibility( LUI.Visibility.Hidden )
	EmblemEdit:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 165, _1080p * 245, _1080p * 245, _1080p * 325 )
	self:addElement( EmblemEdit )
	self.EmblemEdit = EmblemEdit
	
	WhisperButton:addEventHandler( "button_action", function ( f4_arg0, f4_arg1 )
		CHANNELS.WhisperPlayer( menu, f4_arg1.controller or menu )
		return true
	end )
	SettingsButton:addEventHandler( "button_action", function ( f3_arg0, f3_arg1 )
		SOCIAL.OpenPlayerSettingsPopup( menu, f3_arg1.controller or menu )
		return true
	end )
	CopyButton:addEventHandler( "button_action", function ( f2_arg0, f2_arg1 )
		SOCIAL.CopyUserNameToClipboard( menu, f2_arg1.controller or menu )
		return true
	end )
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "MobilePlayerProfileDetails", MobilePlayerProfileDetails )
LockTable( _M )
