-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
LUI.UIModelRotationArea = LUI.Class( LUI.UIElement )
LUI.UIModelRotationArea.Types = {
	Weapon = 0,
	Character = 1
}
LUI.UIModelRotationArea.MaxScrollDistance = 200
local f0_local0 = -30
local f0_local1 = 50
local f0_local2 = -80
local f0_local3 = 80
local f0_local4 = -180
local f0_local5 = 180
local f0_local6 = 2
local f0_local7 = 9
local f0_local8 = 6
local f0_local9 = 0.2
local f0_local10 = 100
local f0_local11 = 100
local f0_local12 = 0.7
local f0_local13 = 35
local f0_local14 = {
	Idle = 0,
	Right = 2,
	Left = 1
}
local f0_local15 = function ( f56_arg0 )
	local f56_local0 = WEAPON.GetBaseRefFromWeaponString( f56_arg0 )
	local f56_local1
	if WEAPON.GetWeaponClass( f56_local0 ) == WEAPON.MELEEClass2 and f56_local0 ~= WEAPON.Baton then
		f56_local1 = not GL_HACK.IsDoomChainsawBlueprintFromRef( f56_arg0 )
	else
		f56_local1 = false
	end
	return f56_local1
end

local f0_local16 = function ( f55_arg0, f55_arg1, f55_arg2 )
	f55_arg0._currentYawDirection = f55_arg1
	local f55_local0 = 0 and f0_local0 or -f0_local0
	local f55_local1 = f55_arg2 * f55_local0
	f55_arg0._currentRoll = f55_local0
	if not f0_local0( f55_arg0._modelName ) then
		f55_local0 = f55_arg0._currentRoll
		if not f55_local0 then
		
		else
			f55_arg0._currentRoll = f55_local0
			if not f0_local0( f55_arg0._modelName ) then
				f55_local0 = f55_arg0._currentYaw
				if not f55_local0 then
				
				else
					local f55_local2
					if not f0_local0( f55_arg0._modelName ) then
						f55_local2 = f55_arg0._currentRoll
						if not f55_local2 then
						
						else
							ClientWeapon[0x9803AC1AFAF4BE]( f55_arg0._modelIndex, f55_arg0._offsetData.pitch + 0, f55_arg0._offsetData.yaw + f55_local0, f55_arg0._offsetData.roll + f55_local2 )
							f55_arg0:dispatchEventToRoot( {
								name = "weapon_rotation",
								rotating = f55_arg2 ~= 0,
								currentRoll = f55_arg0._currentRoll
							} )
						end
					end
					f55_local2 = f55_arg0._currentYaw
				end
			end
			f55_local0 = f55_arg0._currentRoll
		end
	end
	f55_local0 = 0
end

local f0_local17 = function ( f54_arg0 )
	if math.abs( f54_arg0._currentYawDirection ) < f0_local0 then
		if f54_arg0._sentRotationEvent then
			f54_arg0:dispatchEventToRoot( {
				rotating = false,
				name = "weapon_rotation",
				currentRoll = f54_arg0._currentRoll
			} )
			f54_arg0._sentRotationEvent = false
		end
		return 
	end
	local f54_local0 = f54_arg0._currentYaw
	local f54_local1 = f0_local0
	local f54_local2
	if 0 < f54_arg0._currentYawDirection then
		f54_local2 = 1
	else
		f54_local2 = -1
	end
	f54_arg0._currentYaw = f54_local0 + f54_local1 * f54_local2
	f54_arg0:dispatchEventToRoot( {
		rotating = true,
		name = "weapon_rotation"
	} )
	f54_arg0._sentRotationEvent = true
	if not f0_local0( f54_arg0._modelName ) then
		f54_local1 = f54_arg0._currentRoll
		if not f54_local1 then
		
		else
			f54_arg0._currentRoll = f54_local1
			if not f0_local0( f54_arg0._modelName ) then
				f54_local1 = f54_arg0._currentYaw
				if not f54_local1 then
				
				else
					if not f0_local0( f54_arg0._modelName ) then
						f54_local2 = f54_arg0._currentRoll
						if not f54_local2 then
						
						else
							ClientWeapon[0x9803AC1AFAF4BE]( f54_arg0._modelIndex, f54_arg0._offsetData.pitch + 0, f54_arg0._offsetData.yaw + f54_local1, f54_arg0._offsetData.roll + f54_local2 )
						end
					end
					f54_local2 = f54_arg0._currentYaw
				end
			end
			f54_local1 = f54_arg0._currentRoll
		end
	end
	f54_local1 = 0
end

local f0_local18 = function ( f53_arg0, f53_arg1 )
	if math.abs( f53_arg1 ) < f0_local0 then
		if f53_arg0._sentMovementEvent then
			f53_arg0:dispatchEventToRoot( {
				movement = false,
				name = "weapon_rotation"
			} )
			f53_arg0._sentMovementEvent = false
		end
		return 
	end
	local f53_local0 = f53_arg0._currentPositionX
	local f53_local1
	if 0 < f53_arg1 then
		f53_local1 = 1
	else
		f53_local1 = -1
	end
	f53_arg0._currentPositionX = f53_local0 + 0.1 * f53_local1
	f53_arg0:dispatchEventToRoot( {
		movement = true,
		name = "weapon_rotation"
	} )
	f53_arg0._sentMovementEvent = true
	ClientWeapon[0x8B8A4E0355DF0C0]( f53_arg0._modelIndex, f53_arg0._currentPositionX, 0, 0 )
end

local f0_local19 = function ( f52_arg0, f52_arg1, f52_arg2 )
	local f52_local0 = f52_arg1 - f52_arg0._lastYaw
	local f52_local1 = f52_arg2 - f52_arg0._lastRoll
	local f52_local2 = 1
	if CONDITIONS.IsMobileOrMobileSim() then
		local f52_local3 = math.abs( f52_arg0._startTouchYaw )
		f52_local3 = (f52_local3 / 360 - math.floor( f52_local3 / 360 )) * 360
		if f52_local3 < 90 or 270 < f52_local3 then
			f52_local2 = -1
		end
	end
	f52_arg0._currentRoll = f52_arg0._currentRoll + f52_local1 * f0_local0 * f52_local2
	f52_arg0._currentRoll = LUI.clamp( f52_arg0._currentRoll, f0_local0, f0_local0 )
	f52_arg0._currentYaw = f52_arg0._currentYaw + f52_local0 * f0_local0
	f52_arg0._currentRoll = f52_arg0._offsetData.pitch and f52_arg0._currentRoll or 0
	local f52_local3, f52_local4 = nil
	if CONDITIONS.IsMobileOrMobileSim() then
		local f52_local5 = f52_arg0._offsetData
		if f52_local5.minYaw and f52_local5.maxYaw then
			f52_arg0._currentYaw = Math.Clamp( f52_arg0._currentYaw, f52_local5.minYaw, f52_local5.maxYaw )
		end
		f52_local3 = f52_arg0._currentYaw
		if f52_local5.minRoll and f52_local5.maxRoll then
			f52_arg0._currentRoll = Math.Clamp( f52_arg0._currentRoll, f52_local5.minRoll, f52_local5.maxRoll )
		end
		f52_local4 = f52_arg0._currentRoll
	else
		if not f0_local0( f52_arg0._modelName ) then
			local f52_local5 = f52_arg0._currentYaw
			if not f52_local5 then
				f52_local3 = f52_local5
			end
		end
		f52_local3 = -1 * f52_arg0._currentRoll
	end
	ClientWeapon[0x9803AC1AFAF4BE]( f52_arg0._modelIndex, f52_arg0._offsetData.pitch + 0, f52_arg0._offsetData.yaw + f52_local3, f52_arg0._offsetData.roll + f52_local4 )
	f52_arg0._lastYaw = f52_arg1
	f52_arg0._lastRoll = f52_arg2
end

local f0_local20 = function ( f51_arg0 )
	f51_arg0._currentRoll = 0
end

local f0_local21 = function ( f50_arg0 )
	f50_arg0._operatorGender = tonumber( StringTable[0x2DCF0973239E909]( CSV.operators.file, CSV.operators.cols.ref, f50_arg0.operatorRef, CSV.operators.cols.gender ) )
	f50_arg0._operatorVariantRef = f50_arg0._scoped and f50_arg0._scoped.itemRef or OPERATOR.GetEquippedItemForLootType( f50_arg0._controllerIndex, f50_arg0.operatorRef, LOOT.itemTypes.OPERATOR_SKIN )
	local f50_local0 = OPERATOR.WEAPON_ARMED.ARMED
	local f50_local1 = f50_arg0.weapon
	if f50_local1 then
		f50_local1 = WEAPON.GetWeaponDetailsFromModel( f50_arg0.weapon )
	end
	local f50_local2
	if f50_local1 then
		f50_local2 = f50_local1.weaponRef
		if not f50_local2 then
		
		else
			if WEAPON.IsWeaponNoneValue( f50_local2 ) or WEAPON.IsBadWeaponForLobbyAnimations( f50_local2 ) then
				f50_local0 = OPERATOR.WEAPON_ARMED.UNARMED
			end
			local f50_local3 = {
				{
					col = CSV.operatorTurnAnimations.cols.operatorRef,
					key = f50_arg0._operatorVariantRef
				},
				{
					col = CSV.operatorTurnAnimations.cols.unarmed,
					key = tostring( f50_local0 )
				}
			}
			local f50_local4 = StringTable[0x412BDBFB84C120D]( CSV.operatorTurnAnimations.file, f50_local3, CSV.operatorTurnAnimations.cols.operatorRef )
			local f50_local5 = {}
			if not LUI.StringIsNilOrEmpty( f50_local4 ) then
				f50_local5 = f50_local3
			else
				table.insert( f50_local5, {
					col = CSV.operatorTurnAnimations.cols.gender,
					key = f50_arg0._operatorGender
				} )
				table.insert( f50_local5, {
					col = CSV.operatorTurnAnimations.cols.unarmed,
					key = tostring( f50_local0 )
				} )
			end
			return f50_local5
		end
	end
	f50_local2 = WEAPON.NoneValue
end

local f0_local22 = function ( f49_arg0, f49_arg1 )
	return CSV.ReadRow( CSV.operatorTurnAnimations, StringTable[0xF6B0CC3002991DB]( CSV.operatorTurnAnimations.file, f0_local0( f49_arg0 ) ) )
end

local f0_local23 = function ( f48_arg0, f48_arg1 )
	return StringTable[0x412BDBFB84C120D]( CSV.operatorTurnAnimations.file, f0_local0( f48_arg0 ), f48_arg1 + f48_arg0.turnCounter )
end

local f0_local24 = function ( f47_arg0, f47_arg1 )
	if not f47_arg0.operatorRef then
		if f47_arg0.UpdateCharacterRotation then
			f47_arg0:UpdateCharacterRotation( f47_arg1 )
		end
		return 
	elseif f47_arg0._waitingForAnimationLoading then
		return 
	end
	f47_arg0._rotationInput = f47_arg1
	if f47_arg0._rotationInput < 0.25 and -0.25 < f47_arg0._rotationInput then
		f47_arg0._rotationInput = 0
	end
	local f47_local0 = 0 < f47_arg0._rotationInput
	local f47_local1 = f47_arg0._rotationInput < 0
	local f47_local2 = f0_local0( f47_arg0 )
	local f47_local3 = ClientCharacter[0xC4D5E9810D26F7E]( f47_arg0._modelIndex )
	if f47_arg0.currentState ~= f0_local0.Idle then
		if Table.FindItemIndexInArray( {
			f47_local2.idleFront,
			f47_local2.idleLeft,
			f47_local2.idleRight,
			f47_local2.idleBack
		}, f47_local3 ) ~= nil and not (Table.FindItemIndexInArray( {
			f47_local2.leftTurnFront,
			f47_local2.leftTurnLeft,
			f47_local2.leftTurnBack,
			f47_local2.leftTurnRight,
			f47_local2.rightTurnFront,
			f47_local2.rightTurnLeft,
			f47_local2.rightTurnBack,
			f47_local2.rightTurnRight
		}, ClientCharacter[0xE6F30798441706C]( f47_arg0._modelIndex ) ) ~= nil) then
			f47_arg0.currentState = f0_local0.Idle
			f47_arg0.lockTurnAnimUpdate = false
		end
	end
	local f47_local4 = nil
	if f47_arg0.currentState ~= f0_local0.Right and f47_local1 then
		f47_local4 = f0_local0.Right
	elseif f47_arg0.currentState ~= f0_local0.Left and f47_local0 then
		f47_local4 = f0_local0.Left
	end
	if f47_local4 and f47_arg0.currentState ~= f47_local4 and not f47_arg0.lockTurnAnimUpdate then
		local f47_local5, f47_local6, f47_local7, f47_local8, f47_local9 = nil
		if f47_local4 == f0_local0.Left then
			f47_local5 = f0_local0( f47_arg0, CSV.operatorTurnAnimations.cols.leftTurnFront )
			f47_arg0.turnCounter = f47_arg0.turnCounter + 1
		elseif f47_local4 == f0_local0.Right then
			f47_local5 = f0_local0( f47_arg0, CSV.operatorTurnAnimations.cols.rightTurnFront )
			f47_arg0.turnCounter = f47_arg0.turnCounter - 1
		end
		if 3 < f47_arg0.turnCounter then
			f47_arg0.turnCounter = 0
		end
		if f47_arg0.turnCounter < 0 then
			f47_arg0.turnCounter = 3
		end
		f47_local7, f47_local8, f47_local9 = OPERATOR.GetTransitionInfoFromAnimation( f47_local3 )
		if f47_arg0.currentState == f0_local0.Idle then
			OPERATOR.PlayAnimation( f47_arg0, f47_arg0._controllerIndex, f47_arg0._modelIndex, f47_local5, {
				blendTime = f47_local7
			} )
		else
			f47_arg0.lockTurnAnimUpdate = true
			OPERATOR.QueueAnimation( f47_arg0, f47_arg0._controllerIndex, f47_arg0._modelIndex, f47_local5, {
				clearAnimQueue = true,
				noteName = f47_local9,
				blendTime = f47_local7,
				startTime = f47_local8
			} )
		end
		f47_local6 = f0_local0( f47_arg0, CSV.operatorTurnAnimations.cols.idleFront )
		local f47_local10, f47_local11 = OPERATOR.GetTransitionInfoFromAnimation( f47_local5 )
		f47_local8 = f47_local11
		OPERATOR.QueueAnimation( f47_arg0, f47_arg0._controllerIndex, f47_arg0._modelIndex, f47_local6, {
			blendTime = f47_local10
		} )
		f47_arg0.currentState = f47_local4
	end
end

local f0_local25 = function ( f45_arg0 )
	f45_arg0:addEventHandler( "menu_create", function ()
		local f46_local0 = f45_arg0( f45_arg0 )
		STREAMING.RequestModels( f45_arg0._controllerIndex, {
			requesterWidget = f45_arg0,
			modelType = STREAMING.ModelTypes.Animation,
			models = {
				f46_local0.idleFront,
				f46_local0.idleLeft,
				f46_local0.idleBack,
				f46_local0.idleRight,
				f46_local0.leftTurnFront,
				f46_local0.leftTurnLeft,
				f46_local0.leftTurnBack,
				f46_local0.leftTurnRight,
				f46_local0.rightTurnFront,
				f46_local0.rightTurnLeft,
				f46_local0.rightTurnBack,
				f46_local0.rightTurnRight
			}
		} )
	end )
end

local f0_local26 = function ( f44_arg0, f44_arg1 )
	local f44_local0 = 0
	local f44_local1 = 0
	if f44_arg0._initialX and f44_arg0._initialY then
		local f44_local2 = f44_arg0._initialX - LUI.UIModelRotationArea.MaxScrollDistance
		local f44_local3 = f44_arg0._initialX + LUI.UIModelRotationArea.MaxScrollDistance
		local f44_local4 = f44_arg0._initialY - LUI.UIModelRotationArea.MaxScrollDistance
		local f44_local5 = f44_arg0._initialY + LUI.UIModelRotationArea.MaxScrollDistance
		local f44_local6, f44_local7 = f44_arg1.root:PixelsToUnits( f44_arg1.x, f44_arg1.y )
		f44_local2, f44_local4 = f44_arg1.root:PixelsToUnits( f44_local2, f44_local4 )
		local f44_local8, f44_local9 = f44_arg1.root:PixelsToUnits( f44_local3, f44_local5 )
		f44_local5 = f44_local9
		f44_local0 = (f44_local6 - f44_local2) / (f44_local8 - f44_local2)
		f44_local1 = (f44_local7 - f44_local4) / (f44_local5 - f44_local4)
	end
	return f44_local0, f44_local1
end

local f0_local27 = function ( f43_arg0, f43_arg1 )
	if not LUI.IsLastInputKeyboardMouse( f43_arg1.controller ) then
		return 
	elseif f43_arg0._modelIndex then
		f43_arg0._rotating = true
		f43_arg0._initialX = f43_arg1.x
		f43_arg0._initialY = f43_arg1.y
		f43_arg0._lastInputX = f43_arg1.x
		f43_arg0._lastInputY = f43_arg1.y
		f43_arg0._lastYaw, f43_arg0._lastRoll = f0_local0( f43_arg0, f43_arg1 )
		Engine[0xD1619221CBAF878]( true )
	end
end

local f0_local28 = function ( f42_arg0, f42_arg1 )
	f42_arg0._rotating = false
	f42_arg0._initialX = nil
	f42_arg0._initialY = nil
	f42_arg0._currentYawDirection = 0
	f0_local0( f42_arg0 )
end

local f0_local29 = function ( f41_arg0, f41_arg1 )
	f41_arg0._mouseMovement = true
	f41_arg0._initialX = f41_arg1.x
	f41_arg0._initialY = f41_arg1.y
	Engine[0xD1619221CBAF878]( true )
end

local f0_local30 = function ( f40_arg0, f40_arg1 )
	if f40_arg1.name ~= "rightmouseup" then
		f40_arg0._mouseMovement = false
	end
end

local f0_local31 = function ( f39_arg0, f39_arg1 )
	if f39_arg0._modelIndex then
		f39_arg0._rotating = true
		f39_arg0._initialX = f39_arg1.x
		f39_arg0._initialY = f39_arg1.y
		f39_arg0._lastInputX = f39_arg1.x
		f39_arg0._lastInputY = f39_arg1.y
		f39_arg0._startTouchYaw = f39_arg0._currentYaw
		f39_arg0._lastYaw, f39_arg0._lastRoll = f0_local0( f39_arg0, f39_arg1 )
	end
end

local f0_local32 = function ( f38_arg0, f38_arg1 )
	f38_arg0._rotating = false
	f38_arg0._initialX = nil
	f38_arg0._initialY = nil
	f38_arg0._currentYawDirection = 0
end

local f0_local33 = function ( f37_arg0, f37_arg1 )
	if CONDITIONS.IsPC() and f37_arg0:IsMouseHidden( f37_arg1 ) then
		f0_local0( f37_arg0, f37_arg1 )
		f37_arg0:dispatchEventToRoot( {
			rotating = false,
			name = "weapon_rotation",
			currentRoll = f37_arg0._currentRoll
		} )
		f37_arg0:ResetRotation()
		return 
	end
	local f37_local0, f37_local1 = f0_local0( f37_arg0, f37_arg1 )
	if f37_arg0._type == LUI.UIModelRotationArea.Types.Weapon then
		f0_local0( f37_arg0, f37_local0, f37_local1 )
	elseif f37_arg0._type == LUI.UIModelRotationArea.Types.Character then
		local f37_local2, f37_local3 = f37_arg1.root:PixelsToUnits( f37_arg1.x, f37_arg1.y )
		local f37_local4, f37_local5 = f37_arg1.root:PixelsToUnits( f37_arg0._lastInputX, f37_arg0._lastInputY )
		f0_local0( f37_arg0, LUI.clamp( (f37_local2 - f37_local4) / LUI.UIModelRotationArea.MaxScrollDistance, -1, 1 ) * f0_local0 )
	end
	f37_arg0._lastInputX = f37_arg1.x
	f37_arg0._lastInputY = f37_arg1.y
end

local f0_local34 = function ( f36_arg0, f36_arg1 )
	if not LUI.IsLastInputKeyboardMouse( f36_arg1.controller ) then
		return 
	elseif f36_arg0._rotating then
		f0_local0( f36_arg0, {
			controller = f36_arg1.controller,
			root = f36_arg1.root,
			x = f36_arg1.x,
			y = f36_arg1.y
		} )
	elseif f36_arg0._mouseMovement and f36_arg0._type == LUI.UIModelRotationArea.Types.Weapon and not Dvar[0x9E5BE3B4BBA4E0E]( 0x8C266DDC4A68FE7 ) then
		local f36_local0, f36_local1 = f0_local0( f36_arg0, f36_arg1 )
		f0_local0( f36_arg0, f36_local0 )
	end
end

local f0_local35 = function ( f35_arg0, f35_arg1 )
	if f35_arg0._rotating and f35_arg0._touchCount == 1 then
		f0_local0( f35_arg0, {
			controller = f35_arg1.controller,
			root = f35_arg1.root,
			x = f35_arg1.x,
			y = f35_arg1.y
		} )
	end
end

local f0_local36 = function ( f34_arg0, f34_arg1 )
	if f34_arg1.controller ~= f34_arg0._controllerIndex or not LUI.IsLastInputGamepad( f34_arg1.controller ) then
		return 
	elseif f34_arg0._type == LUI.UIModelRotationArea.Types.Weapon then
		if f34_arg1.rightStickYaw and f34_arg1.rightStickPitch then
			f0_local0( f34_arg0, f34_arg1.rightStickYaw, f34_arg1.rightStickPitch )
		end
	elseif f34_arg0._type == LUI.UIModelRotationArea.Types.Character and f34_arg1.rightStickYaw then
		f0_local0( f34_arg0, f34_arg1.rightStickYaw )
	end
	if f34_arg0._type == LUI.UIModelRotationArea.Types.Weapon and f34_arg1.leftStickYaw and f34_arg1.leftStickYaw ~= 0 and not Dvar[0x9E5BE3B4BBA4E0E]( 0x8C266DDC4A68FE7 ) then
		f0_local0( f34_arg0, f34_arg1.leftStickYaw )
	end
	return true
end

LUI.UIModelRotationArea.ResetRotation = function ( f33_arg0, f33_arg1, f33_arg2 )
	if not f33_arg1 then
		f33_arg1 = {
			nil,
			0,
			0,
			0
		}
	end
	if f33_arg0._modelIndex and f33_arg0._type == LUI.UIModelRotationArea.Types.Weapon then
		ClientWeapon[0x9803AC1AFAF4BE]( f33_arg0._modelIndex, f33_arg1[1], f33_arg1[2], f33_arg1[3] )
	end
	f33_arg0._currentYaw = f33_arg1[2]
	if not CONDITIONS.IsMobileOrMobileSim() then
		f33_arg0._currentYawDirection = f33_arg1[2]
	end
	f33_arg0._currentRoll = f33_arg1[3]
	if CONDITIONS.IsMobileItemPreviewSceneActive() then
		if not f33_arg2 then
			f33_arg2 = {}
		end
		local f33_local0 = f33_arg2.min or {}
		local f33_local1 = f33_arg2.max or {}
		f33_arg0._currentYaw = 0
		f33_arg0._currentRoll = 0
		f33_arg0._currentPitch = 0
		f33_arg0._offsetData = {
			pitch = f33_arg1[1],
			yaw = f33_arg1[2],
			roll = f33_arg1[3],
			minYaw = f33_local0.y,
			maxYaw = f33_local1.y,
			minRoll = f33_local0.z,
			maxRoll = f33_local1.z
		}
	end
end

LUI.UIModelRotationArea.ResetZoom = function ( f32_arg0, f32_arg1 )
	f32_arg0.FrontendCameraMover:ResetCamera()
end

local f0_local37 = function ( f31_arg0, f31_arg1 )
	f31_arg0._currentYaw = f31_arg0._currentYaw + f0_local0 * f31_arg0._rotationInput
end

local f0_local38 = function ( f30_arg0, f30_arg1 )
	local f30_local0 = f30_arg1.controller
	if not f30_local0 then
		f30_local0 = Engine[0x45B054C920178E9]()
	end
	if not LUI.IsLastInputKeyboardMouse( f30_local0 ) then
		return 
	else
		Engine[0xD1619221CBAF878]( false )
		f0_local0( f30_arg0, f30_arg1 )
		f0_local0( f30_arg0, f30_arg1 )
	end
end

LUI.UIModelRotationArea.ResetTurnCounter = function ( f29_arg0 )
	f29_arg0.turnCounter = 0
end

LUI.UIModelRotationArea.ButtonInput = function ( f28_arg0, f28_arg1 )
	f0_local0( f28_arg0, f28_arg1 )
end

local f0_local39 = function ( f27_arg0 )
	f27_arg0:ResetRotation()
	f0_local0( f27_arg0, nil )
	f0_local0( f27_arg0, nil )
end

LUI.UIModelRotationArea.GetCurrentYaw = function ( f26_arg0 )
	return f26_arg0._currentYaw
end

LUI.UIModelRotationArea.GetLastYaw = function ( f25_arg0 )
	return f25_arg0._lastYaw
end

LUI.UIModelRotationArea.GetCurrentRoll = function ( f24_arg0 )
	return f24_arg0._currentRoll
end

LUI.UIModelRotationArea.GetLastRoll = function ( f23_arg0 )
	return f23_arg0._lastRoll
end

LUI.UIModelRotationArea.GetCurrentPosition = function ( f22_arg0 )
	return f22_arg0._currentPositionX
end

LUI.UIModelRotationArea.SetModelIndex = function ( f21_arg0, f21_arg1 )
	assert( type( f21_arg1 ) == "number" )
	f21_arg0._modelIndex = f21_arg1
	f21_arg0:ResetRotation()
end

LUI.UIModelRotationArea.SetModel = function ( f20_arg0, f20_arg1 )
	assert( type( f20_arg1 ) == "userdata" )
	f20_arg0._model = f20_arg1
	f20_arg0:ResetRotation()
end

LUI.UIModelRotationArea.SetModelName = function ( f19_arg0, f19_arg1 )
	assert( type( f19_arg1 ) == "string" )
	f19_arg0._modelName = f19_arg1
	f19_arg0:ResetRotation()
end

LUI.UIModelRotationArea.SetModelOffsetData = function ( f18_arg0 )
	assert( f18_arg0._modelName, "Make sure you set up _modelName before calling this function" )
	assert( f18_arg0._model, "Make sure you set up _model before calling this function" )
	local f18_local0 = f18_arg0._model:GetCurrentOffsetsAndRotations()
	if not f18_local0 then
		f18_local0 = f18_arg0._model:GetOffsetsAndRotations( f18_arg0._modelName )
	end
	f18_arg0._offsetData = f18_local0
end

LUI.UIModelRotationArea.SetCharacterInfo = function ( f17_arg0, f17_arg1, f17_arg2, f17_arg3 )
	assert( type( f17_arg1 ) == "number" )
	f17_arg0._modelIndex = f17_arg1
	f17_arg0.operatorRef = f17_arg2
	f17_arg0.turnCounter = 0
	f17_arg0.currentState = f0_local0.Idle
	if f17_arg3 then
		f17_arg0.weapon = f17_arg3
	end
	if f17_arg2 then
		f0_local0( f17_arg0 )
	end
end

local f0_local40 = function ( f16_arg0, f16_arg1 )
	f0_local0( f16_arg0, f16_arg1 )
	f0_local0( f16_arg0, f16_arg1 )
end

LUI.UIModelRotationArea.init = function ( f1_arg0, f1_arg1 )
	LUI.UIModelRotationArea.super.init( f1_arg0, f1_arg1 )
	assert( f1_arg1 )
	assert( f1_arg1.type )
	f1_arg0._type = f1_arg1.type
	f1_arg0._controllerIndex = f1_arg1.controllerIndex
	local f1_local0
	if f1_arg1.enableZoom ~= nil then
		f1_local0 = f1_arg1.enableZoom
	else
		f1_local0 = true
	end
	local FrontendCameraMover = MenuBuilder.BuildRegisteredType( "FrontendCameraMover", {
		useMousePan = true,
		disableStick = true,
		controllerIndex = f1_arg0._controllerIndex,
		enableZoom = f1_local0,
		enableTouchZoom = f1_local0,
		enableWheelZoom = f1_local0,
		enableSway = f1_arg1.enableSway
	} )
	if f1_local0 then
		FrontendCameraMover:SetZoomSpeed( f1_arg1.zoomSpeed or f0_local0 )
		FrontendCameraMover:SetMaxZoom( f1_arg1.maxZoom or f0_local0 )
	end
	f1_arg0:addElement( FrontendCameraMover )
	f1_arg0.FrontendCameraMover = FrontendCameraMover
	
	f1_arg0.Reset = f0_local0
	f1_arg0._rotationInput = 0
	f1_arg0._currentYaw = 0
	f1_arg0._currentRoll = 0
	f1_arg0._currentYawDirection = 0
	f1_arg0._currentPositionX = 0
	f1_arg0._touchCount = 0
	if CONDITIONS.IsMobileOrMobileSim() then
		f1_arg0:registerEventHandler( "touchbegin", function ( element, event )
			element._touchCount = element._touchCount + 1
			f1_arg0( element, event )
			element:dispatchEventToRoot( {
				rotating = true,
				name = "weapon_rotation"
			} )
		end )
		f1_arg0:registerEventHandler( "touchend", function ( element, event )
			local f14_local0
			if element._touchCount <= 0 then
				f14_local0 = 0
			else
				f14_local0 = element._touchCount - 1
			end
			element._touchCount = f14_local0
			f1_arg0( element, event )
			element:dispatchEventToRoot( {
				rotating = false,
				name = "weapon_rotation",
				currentRoll = element._currentRoll
			} )
		end )
		f1_arg0:addEventHandler( "touchmove", f0_local0 )
		f1_arg0:SetHandleTouchInput( true )
		f1_arg0:SetHandleMultiFinger( true )
	else
		local f1_local2 = LUI.DataSourceInControllerModel.new( "stick.l.notify" )
		local f1_local3 = LUI.DataSourceInControllerModel.new( "stick.r.notify" )
		f1_arg0:SubscribeToModel( f1_local2:GetModel( f1_arg0._controllerIndex ), function ()
			if not f1_arg0._disableInput then
				local f13_local0 = {
					controller = f1_arg0._controllerIndex
				}
				local f13_local1 = LUI.DataSourceInControllerModel.new( "stick.l.x" )
				f13_local0.leftStickYaw = f13_local1:GetValue( f1_arg0._controllerIndex )
				f13_local1 = LUI.DataSourceInControllerModel.new( "stick.l.y" )
				f13_local0.leftStickPitch = f13_local1:GetValue( f1_arg0._controllerIndex )
				f1_arg0( f1_arg0, f13_local0 )
			end
		end, true )
		f1_arg0:SubscribeToModel( f1_local3:GetModel( f1_arg0._controllerIndex ), function ()
			if not f1_arg0._disableInput then
				local f12_local0 = {
					controller = f1_arg0._controllerIndex
				}
				local f12_local1 = LUI.DataSourceInControllerModel.new( "stick.r.x" )
				f12_local0.rightStickYaw = f12_local1:GetValue( f1_arg0._controllerIndex )
				f12_local1 = LUI.DataSourceInControllerModel.new( "stick.r.y" )
				f12_local0.rightStickPitch = f12_local1:GetValue( f1_arg0._controllerIndex )
				f1_arg0( f1_arg0, f12_local0 )
				f1_arg0._rightStickInput = true
			end
		end, true )
		f1_arg0:registerEventHandler( "leftmousedown", function ( element, event )
			f1_arg0( element, event )
			element:dispatchEventToRoot( {
				rotating = true,
				name = "weapon_rotation"
			} )
		end )
		f1_arg0:registerEventHandler( "leftmouseup", function ( element, event )
			f1_arg0( element, event )
			element:dispatchEventToRoot( {
				rotating = false,
				name = "weapon_rotation",
				currentRoll = element._currentRoll
			} )
		end )
		f1_arg0:registerEventHandler( "stackCleared", function ( element, event )
			f1_arg0( element, event )
			element:dispatchEventToRoot( {
				rotating = false,
				name = "weapon_rotation",
				currentRoll = element._currentRoll
			} )
			element.m_leftMouseDown = false
		end )
		f1_arg0:registerEventHandler( "rightmousedown", f0_local0 )
		f1_arg0:registerEventHandler( "rightmouseup", function ( element, event )
			f1_arg0( element, event )
			element:dispatchEventToRoot( {
				movement = false,
				name = "weapon_rotation"
			} )
		end )
		f1_arg0:addEventHandler( "mousemove", f0_local0 )
		f1_arg0:addEventHandler( "mouse_capture_lost", function ( f7_arg0, f7_arg1 )
			f1_arg0( f7_arg0, f7_arg1 )
			f7_arg0:dispatchEventToRoot( {
				rotating = false,
				name = "weapon_rotation",
				currentRoll = f7_arg0._currentRoll
			} )
			f7_arg0:dispatchEventToRoot( {
				movement = false,
				name = "weapon_rotation"
			} )
		end )
		f1_arg0:SetHandleMouse( true )
		f1_arg0:addEventHandler( "popup_active", function ( f6_arg0, f6_arg1 )
			f1_arg0( f6_arg0, f6_arg1 )
			f6_arg0:dispatchEventToRoot( {
				rotating = false,
				name = "weapon_rotation",
				currentRoll = f6_arg0._currentRoll
			} )
			f6_arg0:dispatchEventToRoot( {
				movement = false,
				name = "weapon_rotation"
			} )
		end )
		f1_arg0:registerEventHandler( "tick", f0_local0 )
		f1_arg0.AcceptsFocusType = function ( f5_arg0, f5_arg1 )
			return f5_arg1 == FocusType.MouseOver
		end
		
		if f1_arg0._type == LUI.UIModelRotationArea.Types.Weapon then
			f1_arg0.weaponYawRotationTimer = LUI.UITimer.new( {
				interval = 50,
				event = "update_weapon_yaw_rotation"
			} )
			f1_arg0.weaponYawRotationTimer.id = "lobbyTimer"
			f1_arg0:addElement( f1_arg0.weaponYawRotationTimer )
			f1_arg0:addEventHandler( "update_weapon_yaw_rotation", function ( f4_arg0, f4_arg1 )
				if LUI.IsLastInputGamepad( f1_arg0._controllerIndex ) then
					if f1_arg0._rightStickInput == false then
						f1_arg0._rotating = false
						f1_arg0._initialX = nil
						f1_arg0._initialY = nil
						f1_arg0._currentYawDirection = 0
					else
						f1_arg0._rightStickInput = false
					end
				end
				f1_arg0( f4_arg0 )
			end )
		end
		if f1_arg0._type == LUI.UIModelRotationArea.Types.Character then
			f1_arg0.FrontendCameraMover:OverrideMouseCursorType( MouseCursorType.CURSOR_TYPE_ARROW_PANFOURWAYS )
		else
			f1_arg0.FrontendCameraMover:OverrideMouseCursorType( MouseCursorType.CURSOR_TYPE_ROTATION_NORMAL )
		end
		local f1_local4 = function ( f3_arg0, f3_arg1 )
			if LUI.IsLastInputKeyboardMouse( f3_arg1 ) then
				if f3_arg0.timer then
					f3_arg0.timer:closeTree()
					f3_arg0.timer = nil
				end
			elseif f3_arg0._type == LUI.UIModelRotationArea.Types.Character and not f3_arg0.timer then
				local self = LUI.UITimer.new( {
					interval = 15,
					event = "tick"
				} )
				self.id = "UIModelRotationAreaTimer"
				f3_arg0:addElement( self )
				f3_arg0.timer = self
			end
		end
		
		f1_arg0:registerEventHandler( "update_input_type", function ( element, event )
			f1_arg0( element, event.controllerIndex )
		end )
	end
end

