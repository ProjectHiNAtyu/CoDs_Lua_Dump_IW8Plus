-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
GUNSMITH = {
	maxCategories = 11,
	lineDuration = 200,
	maxMods = 5,
	modSlotChars = 3,
	modSlotBaseID = 7000000,
	NUM_BLOCKED_CATEGORIES = 10,
	HIDDEN_SIBLINGS_STRING = "hiddensiblings",
	defaultTag = "j_gun",
	progressionTag = "tag_progression",
	CAMO_OFFSET = 3,
	CAMO_COMPLETION_CATEGORY = "completion",
	STORE_TAB_INDEX = 1,
	bucketItems = 5,
	DisplayedGunsmithStats = false
}
local f0_local0 = 2
local f0_local1 = 3
local f0_local2 = 4
GUNSMITH.CAMO_CATEGORY_SPECIAL = "camo_category_special"
GUNSMITH.CAMO_CATEGORY_COMPLETIONIST = "camo_category_completion"
GUNSMITH.NO_CUSTOM_TUNING_VALUE = 0
GUNSMITH.CAN_PRO_TUNE = 0
GUNSMITH.CLEAR_PRO_TUNING = 1
GUNSMITH.COMPLETIONIST_CAMO_TYPE = {
	ORION = 4,
	INVALID = 0,
	ELEMENT = 3,
	GOLD = 1,
	PLAT = 2
}
GUNSMITH.COMPLETIONIST_CAMO_TYPE_COLOR = {
	[GUNSMITH.COMPLETIONIST_CAMO_TYPE.GOLD] = SWATCHES[0x5B14DE9B77E4451].Gold,
	[GUNSMITH.COMPLETIONIST_CAMO_TYPE.PLAT] = SWATCHES[0x5B14DE9B77E4451].Platinum,
	[GUNSMITH.COMPLETIONIST_CAMO_TYPE.ELEMENT] = SWATCHES[0x5B14DE9B77E4451].Element,
	[GUNSMITH.COMPLETIONIST_CAMO_TYPE.ORION] = SWATCHES[0x5B14DE9B77E4451].Orion
}
GUNSMITH.buttonState = {
	CONFLICT = 5,
	MODIFICATION_LOCKED = 3,
	SWAP = 6,
	EQUIPPED = 7,
	UNLOCKED = 4,
	CHALLENGE_LOCKED = 2,
	PROGRESSION_LOCKED = 1
}
GUNSMITH.modificationSteps = {
	NAME = 2,
	GUNSMITH = 1,
	WARNING = 3
}
GUNSMITH.typeNamePostFix = {
	attachment = "_attachment",
	camos = "_camos"
}
GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE = {
	BIG_SHOTGUN = 2,
	BIG_GUN = 1,
	SMALL_GUN = 3,
	NONE = 0
}
GUNSMITH.WEAPON_PART_COMPARE_STATE = {
	SWAP = 2,
	REMOVE = 1,
	BLOCK = 3,
	PRESERVED = 4,
	NONE = 0
}
GUNSMITH.CAMO_MASTERY_CATEGORY = {
	UNIQUE = "unique",
	COMPLETIONIST = "completionist"
}
GUNSMITH.AttachmentSetupType = {
	WEAPON_PART = 1,
	ATTACHMENT = 0
}
GUNSMITH[0x5BBD3303AAAC2C9] = {
	[0xA7CE19BAA54C278] = 0,
	[0x7F2A8FDB358E5E0] = 1,
	[0x862DF34652CF74E] = 2
}
GUNSMITH.AttachmentSetupTypeMap = {
	receiver = GUNSMITH.AttachmentSetupType.WEAPON_PART,
	frontpiece = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	backpiece = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	magazine = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	optic = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	muzzle = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	undermount = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	reargrip = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	trigger = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	gunperk = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	other = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	extra = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	extrapstl = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	unique = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	rail = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	bolt = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	loader = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	comb = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	guard = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	guardtwo = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	lever = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	guardthree = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	reargriptwo = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	boltaction = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	reargripthree = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	arms = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	bolts = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	wires = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	backpiecetwo = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	carryhandle = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	triggertwo = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	eventcategory = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	conversionkit = GUNSMITH.AttachmentSetupType.ATTACHMENT
}
GUNSMITH.AttachmentSetupDataMap = {
	[GUNSMITH.AttachmentSetupType.ATTACHMENT] = {
		maxIndex = 4,
		offset = 0,
		minIndex = 0
	},
	[GUNSMITH.AttachmentSetupType.WEAPON_PART] = {
		maxIndex = 5,
		offset = 5,
		minIndex = 5
	}
}
GUNSMITH.Tuning = {
	HANDLING = 5,
	RANGE = 1,
	ACCURACY = 2,
	DAMAGE = 6,
	FIRE_RATE = 7,
	RECOIL = 3,
	MOBILITY = 4
}
GUNSMITH.EquipIndicatorTable = {
	muzzle = {
		index = 1,
		categoryName = Engine[0xED84C33EC5F01EA]( 0xED37D6CB095DEC6 )
	},
	undermount = {
		index = 2,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x52DE5D73C0FEDC )
	},
	extra = {
		index = 3,
		categoryName = Engine[0xED84C33EC5F01EA]( 0xADC15AC66FC74CB )
	},
	gunperk = {
		index = 4,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x67B87DFB62C30B7 )
	},
	optic = {
		index = 5,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x1C54345DACD739C )
	},
	reargrip = {
		index = 6,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x8C0E1D5AB309D85 )
	},
	comb = {
		index = 7,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x83D2843AFEF49BA )
	},
	trigger = {
		index = 13,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x37E34173E8678C9 )
	},
	boltaction = {
		index = 14,
		categoryName = Engine[0xED84C33EC5F01EA]( 0xA93C0FC1190025A )
	},
	guardtwo = {
		index = 15,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x9FE152A4A1AF544 )
	},
	extrapstl = {
		index = 16,
		categoryName = Engine[0xED84C33EC5F01EA]( 0xADC15AC66FC74CB )
	},
	guardthree = {
		index = 18,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x9FE152A4A1AF544 )
	},
	reargriptwo = {
		index = 19,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x8C0E1D5AB309D85 )
	},
	conversionkit = {
		index = 26,
		categoryName = Engine[0xED84C33EC5F01EA]( 0xFB459A3E4FD6C45 )
	},
	frontpiece = {
		index = 8,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x5D0A6F90F7E614E )
	},
	magazine = {
		index = 9,
		categoryName = Engine[0xED84C33EC5F01EA]( 0xBB0E195863DD6F1 )
	},
	receiver = {
		index = 10,
		categoryName = Engine[0xED84C33EC5F01EA]( 0xB66D67A0D5C9E6A )
	},
	backpiece = {
		index = 11,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x332774AF370C770 )
	},
	guard = {
		index = 12,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x9FE152A4A1AF544 )
	},
	bolt = {
		index = 17,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x867224AAD752C20 )
	}
}
GUNSMITH.ExcludedDefaultModifiersStringRef = {
	mod_magnification_12_5x = 0x37BD859F1007E13,
	mod_magnification_12x = 0x43D6242DA769CAF,
	mod_magnification_9_5x = 0xB304D555B00CE4B,
	mod_magnification_6_6 = 0x1FC4D60A5822973,
	mod_magnification_5_5x = 0xB489579ECE715DF,
	mod_magnification_9x = 0x2F8C7D53141DDF7,
	mod_magnification_6x = 0x2FCBDD53145B5D0,
	mod_magnification_8_4x = 0x9858D5033951803,
	mod_magnification_13x = 0x43A5C42DA745CA6,
	mod_magnification_toggle_13x = 0x6FC8F9579D14ACD,
	mod_magnification_3_7x = 0x3C0558A5ED5DA4F,
	mod_magnification_toggle_8_4x = 0xD125DC56EDBD9AE,
	mod_magnification_toggle_8_7x = 0xD0F67C56ED9B4D5,
	mod_magnification_toggle_11x = 0x7028B9579D5AFAF,
	mod_glint_xsml = 0x3CB5C21E932F11,
	mod_magnification_toggle_11_5x = 0x5EAF8A4EB138913,
	mod_glint_sml = 0xF070F735EE4BF4F,
	mod_hybrid_scope = 0xC722F53FFF78771,
	mod_magnification_3x = 0x30DCBD5315440CD,
	mod_scope_bulletdrop = 0xA1D68DAF62D090C,
	mod_glint_lrg = 0xABAAB72F9395B10,
	mod_magnification_11_5x = 0xA5B9E40A9C0E45C,
	mod_thermal_identification = 0x93B1187AB2802C6,
	mod_magnification_5x = 0x306BFD5314E0DBB,
	mod_sight_picture = 0x25C3CE123698E50,
	mod_scope_rangefinder = 0xA4D0422999EC0EA,
	mod_magnification_6_3x = 0x2064F60A58A815E,
	mod_magnification_7_5x = 0x85E916840E8D059,
	mod_magnification_level = 0x3994628945030CC,
	mod_magnification_11x = 0x4336042DA6E44C4,
	mod_magnification_8_7x = 0x97A8B50338B0D18,
	mod_magnification_toggle_8x = 0xA5B48A35C02D883,
	mod_magnification_4x = 0x302C9D5314A35E2,
	mod_nightvision = 0xCAA8940E0491146,
	mod_glint_xlrg = 0x8EAB1C21ACF306E,
	mod_magnification_toggle_12_5x = 0xCCABE8BA3D3EF5C,
	mod_magnification_3_4x = 0x3B5538A5ECBCF64,
	mod_glint_med = 0x31D7572F5351BFD,
	mod_magnification_10x = 0x4376642DA7237CD,
	mod_magnification_8x = 0x2F5C1D5313F9DEE,
	mod_magnification_4_3x = 0x5AB8B6EA3678D78,
	mod_magnification_7x = 0x2FFC3D53147F5D9,
	mod_magnification_4_8x = 0x5D18D6EA388601B
}
GUNSMITH.AttachmentTypeSFX = {
	receiver = SOUND_SETS.gunsmith.receiverSelect,
	frontpiece = SOUND_SETS.gunsmith.barrelSelect,
	backpiece = SOUND_SETS.gunsmith.stockSelect,
	magazine = SOUND_SETS.gunsmith.magazineSelect,
	optic = SOUND_SETS.gunsmith.opticSelect,
	muzzle = SOUND_SETS.gunsmith.muzzleSelect,
	undermount = SOUND_SETS.gunsmith.underBarrelSelect,
	reargrip = SOUND_SETS.gunsmith.gripSelect,
	comb = SOUND_SETS.gunsmith.gripSelect,
	extra = SOUND_SETS.gunsmith.laserSelect,
	gunperk = SOUND_SETS.gunsmith.ammoSelect,
	guard = SOUND_SETS.gunsmith.barrelSelect
}
GUNSMITH.BlueprintEditStatus = {
	ChangeProTunedAttachment = 2,
	EditTuning = 5,
	EditBlueprint = 6,
	AddNewAttachment = 1,
	ChangeNonProTunedAttachment = 3,
	EditTuningFirstTime = 4
}
GUNSMITH.BlockedWarningType = {
	Charm = 2,
	Gunscreen = 3,
	Stickers = 1
}
GUNSMITH.ProgressionWeaponTreeTable = {}
GUNSMITH[0x11893264D5DB88C] = {
	[0xBB55B0771781158] = 5,
	[0x7328F764C0BBB70] = 3,
	[0xBB55E0771781671] = 6,
	[0xEA3A9D58A836C51] = 2,
	[0x5135790E8393359] = 1,
	[0xBB55D07717814BE] = 7,
	[0xA322451D89260FF] = 4
}
GUNSMITH.GetCustomizationSelectMenuRef = function ()
	if CONDITIONS.IsMobileOrMobileSim() then
		return "MobileEquippableItemsSelectMenu"
	else
		assert( false, "GetCustomizationSelectMenuRef is not supported on IW9 yet" )
		return nil
	end
end

GUNSMITH.GetCharmSelectMenuRef = function ()
	if CONDITIONS.IsMobileOrMobileSim() then
		return "MobileEquippableItemsSelectMenu"
	else
		return "CharmSelect"
	end
end

GUNSMITH.GetCamoCategorySelectMenuRef = function ()
	if CONDITIONS.IsMobileOrMobileSim() then
		return "MobileCamoCategorySelect"
	else
		return "CamoCategorySelect"
	end
end

GUNSMITH.GetCamoSelectMenuRef = function ()
	if CONDITIONS.IsMobileOrMobileSim() then
		return "MobileEquippableItemsSelectMenu"
	else
		return "CamoSelect"
	end
end

GUNSMITH.GetStickerSelectMenuRef = function ()
	if CONDITIONS.IsMobileOrMobileSim() then
		return "MobileEquippableItemsSelectMenu"
	else
		return "StickerSelect"
	end
end

GUNSMITH.GetVinylSelectMenuRef = function ()
	if CONDITIONS.IsMobileOrMobileSim() then
		return "MobileEquippableItemsSelectMenu"
	else
		return "VinylSelect"
	end
end

GUNSMITH.GetGunsmithTabFrameRef = function ()
	if CONDITIONS.IsMobileOrMobileSim() then
		return "MobileGunsmith"
	else
		return "Gunsmith"
	end
end

GUNSMITH.GetGunsmithCustomizeTabFrameRef = function ()
	if CONDITIONS.IsMobileOrMobileSim() then
		return "MobileGunsmithCustomize"
	else
		return "GunsmithCustomize"
	end
end

GUNSMITH.GetGunsmithProgressionTabFrameRef = function ()
	if CONDITIONS.IsMobileOrMobileSim() then
		return "MobileWeaponProgressionMenu"
	else
		return "PlatformProgressionMenu"
	end
end

GUNSMITH.GetWeaponPreviewMenuRef = function ()
	if CONDITIONS.IsMobileOrMobileSim() then
		return "MobileWeaponPreview"
	else
		return "WeaponPreview"
	end
end

GUNSMITH.GetTuningMenuRef = function ()
	if CONDITIONS.IsMobileOrMobileSim() then
		return "MobileGunsmithTuningMenu"
	else
		return "GunsmithTuningMenu"
	end
end

GUNSMITH.SetupWeaponDefaultAttachmentDataForEquippedAttachment = function ( f258_arg0, f258_arg1, f258_arg2, f258_arg3, f258_arg4, f258_arg5, f258_arg6, f258_arg7 )
	local f258_local0 = nil
	local f258_local1 = ATTACHMENT.GetDefaultAttachmentRefForSlotIndex( f258_arg2, f258_arg5 )
	if not String.IsNilOrEmpty( f258_local1 ) then
		local f258_local2 = ATTACHMENT.GetAttachmentAdditionFullRefForSlotIndex( f258_arg2, f258_arg4, f258_arg5 )
		local f258_local3 = nil
		if f258_local2 then
			if string.gsub( f258_arg3, f258_local2, f258_local1 ) == f258_arg3 and f258_arg6 ~= ATTACHMENT.none then
				f258_local3 = string.gsub( f258_arg3, f258_arg6, f258_local1 )
			end
			f258_local0 = string.gsub( f258_arg3, f258_local2, f258_arg6 )
		else
			f258_local3 = string.gsub( f258_arg3, f258_arg6, f258_local1 )
			if f258_local3 == f258_arg3 then
				f258_local0 = string.gsub( f258_arg3, f258_local1, f258_arg6 )
			end
		end
		local f258_local4 = ClientWeapon[0xFE24333F9BC2CAB]( f258_arg1, f258_local3, f258_arg5 )
		f258_arg0.defaultAttachmentStats = f258_local4.tunedStats or f258_local4.unTunedStats
		f258_arg0.defaultModifierValues = ClientWeapon[0xA41C97AC6ADDC24]( f258_arg1, f258_local3, f258_arg5 )
	else
		f258_local0 = WEAPON.GetWeaponModelName( f258_arg7.weapon, f258_arg7, {
			showSWhiskeyMag = true,
			includeAttachments = true,
			keepAkimbo = true
		} )
	end
	f258_arg0.weaponStringWithNewAttachment = f258_local0
end

GUNSMITH.IsAllowedForDefaultModifierAdjustments = function ( f257_arg0 )
	return not LUI.IsItemInArray( GUNSMITH.ExcludedDefaultModifiersStringRef, f257_arg0 )
end

GUNSMITH.ApplyDefaultModifierAdjustments = function ( f256_arg0, f256_arg1 )
	if f256_arg0 then
		for f256_local8, f256_local9 in pairs( f256_arg1 ) do
			if not String.IsNilOrEmpty( f256_local9.name ) and GUNSMITH.IsAllowedForDefaultModifierAdjustments( f256_local9.name ) then
				for f256_local6, f256_local7 in pairs( f256_arg0 ) do
					if f256_local9.name == f256_local7.name then
						f256_local9.value = f256_local9.value - f256_local7.value
					end
				end
			end
		end
	end
end

GUNSMITH.GetDefaultModificationName = function ()
	local f255_local0 = StringTable[0xFD4E49A34DD43AE]( CSV.modificationDefaults.file )
	math.randomseed( Engine[0x6991337AE950F99]() )
	return StringTable[0x2077452C28AB2FC]( CSV.modificationDefaults.file, math.random( 0, f255_local0 - 1 ), CSV.modificationDefaults.cols.name )
end

GUNSMITH.GetAttachmentCategories = function ( f254_arg0, f254_arg1 )
	if GUNSMITH.IsDisabled( f254_arg0, f254_arg1 ) then
		return {}
	end
	local f254_local0 = WEAPON.GetClassBundleByWeaponClass( WEAPON.GetWeaponClass( f254_arg0 ) )
	local f254_local1 = {}
	local f254_local2
	if f254_local0 then
		f254_local2 = #f254_local0[0x3F3922AD742F2E9]
		if not f254_local2 then
		
		else
			for f254_local3 = 1, f254_local2, 1 do
				local f254_local6 = f254_local0[0x3F3922AD742F2E9][f254_local3] or ""
				table.insert( f254_local1, string.lower( f254_local6[0xBD2E7FFB1224E91] ) )
			end
			local f254_local3 = WEAPON.GetWeaponDataForRef( f254_arg0 )
			if f254_local3 then
				for f254_local4 = 1, #f254_local3[0x19652145F566787], 1 do
					local f254_local8 = f254_local3[0x19652145F566787][f254_local4] or ""
					local f254_local9 = string.lower( f254_local8[0xBD2E7FFB1224E91] )
					for f254_local13, f254_local14 in ipairs( f254_local1 ) do
						if f254_local14 == f254_local9 then
							table.remove( f254_local1, f254_local13 )
						end
					end
				end
			end
			return f254_local1
		end
	end
	f254_local2 = 0
end

GUNSMITH.IsAttachVariantCategoryBlacklisted = function ( f253_arg0, f253_arg1 )
	local f253_local0 = WEAPON.GetWeaponDataForRef( f253_arg0 )
	if f253_local0 then
		local f253_local1 = f253_local0[0xBDB53E3FCA21828]
		for f253_local2 = 1, #f253_local1, 1 do
			if f253_local1[f253_local2].category == f253_arg1 then
				return true
			end
		end
	end
	return false
end

GUNSMITH.GetBlockedCategories = function ( f252_arg0 )
	local f252_local0 = {}
	for f252_local4, f252_local5 in ipairs( f252_arg0.attachments ) do
		local f252_local6 = ATTACHMENT.GetRef( f252_local5.ref, f252_arg0.weapon )
		local f252_local7 = ATTACHMENT.GetBlockedCategory( f252_local6 )
		if not String.IsNilOrEmpty( f252_local7 ) then
			f252_local0[f252_local7] = f252_local6
		end
	end
	return f252_local0
end

GUNSMITH.GetBlockedCategoryWarning = function ( f251_arg0, f251_arg1 )
	local f251_local0 = ATTACHMENT.GetRef( f251_arg0.attachments[f251_arg1].ref, f251_arg0.weapon )
	local f251_local1 = ATTACHMENT.GetAttachmentCategoryName( ATTACHMENT.GetCategory( f251_local0 ) )
	local f251_local2 = Engine[0xED84C33EC5F01EA]
	local f251_local3 = 0xA40C8E247024F5E
	local f251_local4 = f251_local1
	return f251_local2( f251_local3, ATTACHMENT.GetName( f251_local0 ) )
end

GUNSMITH.GetBlockedCategoryButtonWarning = function ( f250_arg0, f250_arg1 )
	local f250_local0 = ATTACHMENT.GetAttachmentCategoryName( ATTACHMENT.GetCategory( f250_arg1 ) )
	local f250_local1 = Engine[0xED84C33EC5F01EA]
	local f250_local2 = 0xFA36F63F49F92E1
	return f250_local1( ATTACHMENT.GetName( f250_arg1 ) )
end

GUNSMITH.GetChallengeXPReward = function ( f249_arg0 )
	return StringTable[0x2DCF0973239E909]( CSV.gunsmithChallenges.file, CSV.gunsmithChallenges.cols.id, f249_arg0, CSV.gunsmithChallenges.cols.XPReward )
end

GUNSMITH.GetAttachmentsAndBucketItems = function ( f248_arg0, f248_arg1, f248_arg2 )
	local f248_local0 = {}
	local f248_local1 = {}
	local f248_local2 = WEAPON.GetWeaponDataForRef( f248_arg1 )
	local f248_local3 = {}
	if not f248_local2 then
		return f248_local3
	end
	local f248_local4 = f248_local2[0x49DB2AF7D3296E4]
	if not f248_local4 then
		return f248_local3
	elseif not Engine[0x12586A3F4FB490E]() then
		local f248_local5 = CONDITIONS.AreRestrictionsActive( f248_arg0 )
	else
		local f248_local5 = false
	end
	local f248_local6 = WEAPON.GetModificationAttachments( f248_arg0, f248_arg1, f248_arg2 )
	for f248_local10, f248_local11 in ipairs( f248_local4 ) do
		local f248_local12 = 1
		local f248_local13 = f248_local11[0x1CBA5DD1F23977A] or {}
		local f248_local14 = f248_local13[f248_local12] or {}
		local f248_local15 = f248_local11[0x8DDC90A9D7C709D] and f248_local11[0x8DDC90A9D7C709D] or 0
		if f248_local14[0x28887F70BF5EBA] and 0 < #f248_local14[0x28887F70BF5EBA] then
			
		end
	end
	for f248_local10, f248_local11 in pairs( f248_local1 ) do
		for f248_local15, f248_local16 in pairs( f248_local11 ) do
			table.insert( f248_local0[f248_local10], f248_local16 )
		end
	end
	return f248_local0, f248_local3
end

GUNSMITH.IsDisabled = function ( f247_arg0, f247_arg1 )
	local f247_local0 = WEAPON.GetWeaponClass( f247_arg0 )
	local f247_local1 = false
	if f247_local0 and 0 < #f247_local0 then
		local f247_local2 = WEAPON.GetClassBundleByWeaponClass( f247_local0 )
		if f247_local2 then
			local f247_local3 = f247_local2[0xC00B707A9E7820C]
			if not f247_local3 then
				f247_local1 = f247_local3
			else
				f247_local1 = false
			end
		end
		f247_local1 = false
	end
	local f247_local2 = WEAPON.GetWeaponDataForRef( f247_arg0 )
	local f247_local3
	if f247_local2 then
		f247_local3 = f247_local2
	else
		f247_local3 = f247_local2[0x4FDAECD20551368]
	end
	local f247_local4 = false
	if f247_arg1 then
		local f247_local5 = Engine[0x879C2878DB98F92]( GL_HACK.GetWeaponMPRef( f247_arg0 ), f247_arg1 )
		if f247_local5 then
			f247_local4 = f247_local5
		else
			f247_local4 = f247_local5[0x4FDAECD20551368]
		end
	end
	local f247_local6
	if f247_local1 then
		if not f247_local3 then
			f247_local6 = f247_local3
		else
			f247_local6 = f247_local4
		end
	else
		f247_local6 = true
	end
	return f247_local6
end

GUNSMITH.MobileIsDisabledForWeaponRef = function ( f246_arg0, f246_arg1 )
	local f246_local0 = not CONDITIONS.IsMobileGunsmithEnabled()
	local f246_local1 = GUNSMITH.IsDisabled( f246_arg0, f246_arg1 )
	local f246_local2 = GUNSMITH.MobileIsCustomizationDisabled( f246_arg0 )
	local f246_local3
	if not f246_local0 then
		f246_local3 = f246_local0
	elseif f246_local1 then
		f246_local3 = f246_local1
	else
		f246_local3 = f246_local2
	end
	return f246_local3
end

GUNSMITH.MobileIsCustomizationCurrentlyEnabled = function ()
	return Dvar[0x9E5BE3B4BBA4E0E]( 0xE0D44A3A52BBFA4 )
end

GUNSMITH.MobileIsCustomizationDisabled = function ( f244_arg0 )
	local f244_local0 = GUNSMITH.IsCustomizationDisabled( f244_arg0 )
	local f244_local1
	if GUNSMITH.MobileIsCustomizationCurrentlyEnabled() then
		f244_local1 = f244_local0
	else
		f244_local1 = true
	end
	return f244_local1
end

GUNSMITH.IsCustomizationDisabled = function ( f243_arg0 )
	local f243_local0 = WEAPON.GetWeaponDataForRef( f243_arg0 )
	local f243_local1
	if f243_local0 then
		f243_local1 = f243_local0
	else
		f243_local1 = f243_local0[0x4348964940172BE]
	end
	return f243_local1
end

GUNSMITH.IsGunsmithCustomsAvailable = function ( f242_arg0, f242_arg1, f242_arg2, f242_arg3, f242_arg4, f242_arg5 )
	if not f242_arg2 then
		f242_arg2 = {}
	end
	local f242_local0
	if f242_arg1 then
		f242_local0 = f242_arg1
	else
		f242_local0 = 1 < #f242_arg2
	end
	local f242_local1 = GUNSMITH.IsAttachVariantCategoryBlacklisted( f242_arg3, f242_arg4 )
	local f242_local2 = ATTACHMENT.AreVariantsEnabled()
	if f242_local2 then
		if not f242_arg5 then
			if f242_local0 then
				f242_local2 = f242_local0
			elseif not f242_local1 then
				f242_local2 = Engine[0x12586A3F4FB490E]()
				if f242_local2 then
					f242_local2 = Engine[0x5EA7EB683287036]( f242_arg0 )
				end
			else
				f242_local2 = false
			end
		end
		f242_local2 = false
	end
	return f242_local2
end

GUNSMITH.AreMasterChallengesEnabled = function ( f241_arg0, f241_arg1 )
	if f241_arg0 == nil or f241_arg1 == nil then
		return false
	end
	local f241_local0 = Dvar[0x9E5BE3B4BBA4E0E]( 0x4D9E8158F4A4271 )
	local f241_local1 = WEAPON.IsGoldCamoUnlocked( f241_arg0, f241_arg1 )
	local f241_local2
	if f241_local0 and CONDITIONS.InFrontendPublic() and not f241_local1 then
		f241_local2 = f241_local1
	else
		f241_local2 = Dvar[0x9E5BE3B4BBA4E0E]( 0xED4A31155340345 )
	end
	return f241_local2
end

GUNSMITH.EquipAttachment = function ( f240_arg0, f240_arg1, f240_arg2, f240_arg3, f240_arg4 )
	local f240_local0 = f240_arg4.attachSlot
	local f240_local1 = f240_arg4.isSwappingAttachment
	if f240_local0 then
		local f240_local2 = f240_arg4.variantID
		local f240_local3 = ATTACHMENT.GetRefFromSetup( f240_arg3.attachmentSetup[f240_local0 - 1] )
		local f240_local4 = false
		local f240_local5 = f240_arg3.weapon:get()
		local f240_local6 = {
			weaponRef = f240_local5,
			attachmentRef = f240_local3
		}
		local f240_local7 = f240_arg3.attachmentSetup[f240_arg4.attachSlot - 1].variantID:get()
		if not f240_local7 then
			f240_local7 = ATTACHMENT.baseVariant
		end
		f240_local6.variantID = f240_local7
		f240_local7 = {
			weaponRef = f240_local5,
			attachmentRef = f240_arg2
		}
		local f240_local8 = f240_arg4.variantID
		if not f240_local8 then
			f240_local8 = ATTACHMENT.baseVariant
		end
		f240_local7.variantID = f240_local8
		LOOT.SendDlogLootEquipped( f240_arg1, LOOT.itemTypes.ATTACHMENT, f240_local6, f240_local7 )
		if f240_local3 == f240_arg2 and not f240_local2 then
			f240_arg2 = ATTACHMENT.none
			f240_local4 = true
		end
		if not f240_local2 then
			f240_local2 = ATTACHMENT.baseVariant
			if f240_arg3.lootItemID:get() ~= LOOT.emptyID then
				f240_local8 = WEAPON.GetModificationAttachments( f240_arg1, f240_local5, f240_arg3.lootItemID:get() )
				if f240_local8[f240_arg2] then
					f240_local2 = f240_local8[f240_arg2]
				end
			end
		end
		f240_local8 = true
		if CONDITIONS.IsPlayerDataWeaponSetupsValidationEnabled() then
			local f240_local9 = WEAPON.GenerateWeaponTable( f240_arg3 )
			f240_local9.attachments[f240_local0].ref = f240_arg2
			local f240_local10 = f240_local9.attachments[f240_local0]
			local f240_local11
			if not f240_local2 then
				f240_local11 = f240_local2
			else
				f240_local11 = ATTACHMENT.baseVariant
			end
			f240_local10.variantID = f240_local11
			f240_local10, f240_local11 = ATTACHMENT.IsAttachmentsTableValid( f240_arg1, f240_local9 )
			if not f240_local10 then
				METRICS.SendDLogWeaponSetupValidationResults( f240_arg1, f240_local11, LOADOUT.DLOG_VALIDATION_DENY_EQUIP_SUFFIX )
				if CONDITIONS.IsPlayerDataWeaponSetupsValidationResetWeaponEnabled() then
					f240_local8 = false
					f240_local4 = false
					LUI.FlowManager.RequestErrorPopup( f240_arg1, Engine[0xED84C33EC5F01EA]( 0xD09E09A43DE9B80 ), Engine[0xED84C33EC5F01EA]( 0xE0AC73017303D25 ) )
				end
			end
		end
		if f240_local8 then
			ATTACHMENT.SetPlayerDataRef( f240_arg3.attachmentSetup[f240_local0 - 1], f240_arg2 )
			f240_arg3.attachmentSetup[f240_local0 - 1].variantID:set( f240_local2 )
			f240_arg3.attachmentSetup[f240_local0 - 1].customTune[0]:set( GUNSMITH.NO_CUSTOM_TUNING_VALUE )
			f240_arg3.attachmentSetup[f240_local0 - 1].customTune[1]:set( GUNSMITH.NO_CUSTOM_TUNING_VALUE )
			GUNSMITH.TryClearProTuningInSetup( WEAPON.GenerateWeaponTable( f240_arg3 ), f240_arg3.attachmentSetup[f240_local0 - 1] )
			local f240_local10
			if ATTACHMENT.GetCategory( f240_local3 ) ~= ATTACHMENT.opticCategory and ATTACHMENT.GetCategory( f240_arg2 ) ~= ATTACHMENT.opticCategory then
				f240_local10 = false
			else
				f240_local10 = true
			end
			if f240_local10 then
				if not ATTACHMENT.SupportsCustomReticles( f240_arg2 ) or ATTACHMENT.GetOpticReticleCategory( f240_local3 ) ~= ATTACHMENT.GetOpticReticleCategory( f240_arg2 ) then
					WEAPON.SetEquippedReticle( f240_arg3, WEAPON.ReticleNoneValue )
				end
			end
		end
		if f240_arg4.menusToLeave and not f240_local4 then
			for f240_local12, f240_local13 in ipairs( f240_arg4.menusToLeave ) do
				LUI.FlowManager.RequestLeaveMenuByName( f240_local13 )
			end
			return true
		else
			return false
		end
	elseif f240_arg2 == ATTACHMENT.none then
		if f240_arg4.menusToLeave then
			for f240_local5, f240_local6 in ipairs( f240_arg4.menusToLeave ) do
				LUI.FlowManager.RequestLeaveMenuByName( f240_local6 )
			end
			return true
		else
			return false
		end
	else
		local f240_local2 = {
			attachToReplaceWith = f240_arg2,
			weaponPlayerData = f240_arg3,
			menusToLeave = f240_arg4.menusToLeave,
			variantID = f240_arg4.variantID,
			lootID = f240_arg4.lootID,
			survivalCost = f240_arg4.survivalCost,
			allAttachments = f240_arg4.allAttachments
		}
		if CONDITIONS.IsMobileOrMobileSim() then
			LUI.FlowManager.RequestAddMenu( "MobileSwapAttachmentPopup", true, f240_arg1, false, f240_local2 )
		else
			LUI.FlowManager.RequestAddMenu( "SwapAttachmentPopup", true, f240_arg1, nil, f240_local2 )
		end
	end
end

GUNSMITH.GetAttachmentSceneOverride = function ( f239_arg0, f239_arg1, f239_arg2 )
	local f239_local0 = {
		{
			col = CSV.gunsmithSetup.cols.weapon,
			key = f239_arg0
		},
		{
			col = CSV.gunsmithSetup.cols.category,
			key = f239_arg2
		},
		{
			col = CSV.gunsmithSetup.cols.variantID,
			key = f239_arg1
		}
	}
	local f239_local1 = StringTable[0x412BDBFB84C120D]( CSV.gunsmithSetup.file, f239_local0, CSV.gunsmithSetup.cols.scene )
	if not f239_local1 or #f239_local1 == 0 then
		f239_local0[3] = {
			col = CSV.gunsmithSetup.cols.variantID,
			key = WEAPON.baseVariant
		}
		f239_local1 = StringTable[0x412BDBFB84C120D]( CSV.gunsmithSetup.file, f239_local0, CSV.gunsmithSetup.cols.scene )
	end
	return f239_local1
end

GUNSMITH.GetAttachmentCategoryScene = function ( f238_arg0, f238_arg1, f238_arg2 )
	local f238_local0 = WEAPON.GetWeaponClass( f238_arg0 )
	local f238_local1 = GUNSMITH.GetAttachmentSceneOverride( f238_arg0, f238_arg1, f238_arg2 )
	if f238_local1 and 0 < #f238_local1 then
		return f238_local1
	elseif f238_local0 == WEAPON.LAUNCHERClass then
		local f238_local2 = WEAPON.GetClassBundleByWeaponClass( f238_local0 )
		local f238_local3
		if f238_local2 then
			f238_local3 = f238_local2[0x8F5A9FD7BEC1DD5]
			if not f238_local3 then
			
			else
				return f238_local3
			end
		end
		f238_local3 = ""
	end
	local f238_local2 = CSV.attachmentCategories.cols.categoryScene
	if f238_local0 == WEAPON.pistolClass then
		f238_local2 = CSV.attachmentCategories.cols.smallCategoryScene
	elseif f238_local0 == WEAPON.LMGClass or f238_local0 == WEAPON.sniperClass then
		f238_local2 = CSV.attachmentCategories.cols.largeCategoryScene
	end
	return StringTable[0x2DCF0973239E909]( CSV.attachmentCategories.file, CSV.attachmentCategories.cols.ref, f238_arg2, f238_local2 )
end

local f0_local3 = function ( f237_arg0, f237_arg1, f237_arg2 )
	local f237_local0 = {}
	for f237_local4, f237_local5 in pairs( f237_arg0 ) do
		if f237_local5.data["slot" .. f237_arg2] == "1" and not f237_arg1[f237_local4] then
			table.insert( f237_local0, f237_local5 )
		end
	end
	return f237_local0
end

local f0_local4 = function ( f236_arg0, f236_arg1 )
	local f236_local0 = {}
	local f236_local1 = 0
	local f236_local2 = "selectionPriority"
	for f236_local6, f236_local7 in ipairs( f236_arg0[f236_arg1.slotIndex] ) do
		if f236_arg1.cellIndex == 4 then
			if f236_arg1.cellIndex - 1 <= f236_local7.cellRequirement then
				table.insert( f236_local0, f236_local7 )
				f236_local1 = f236_local1 + f236_local7[f236_local2]
			end
		end
		if f236_local7.cellRequirement == f236_arg1.cellIndex then
			table.insert( f236_local0, f236_local7 )
			f236_local1 = f236_local1 + f236_local7[f236_local2]
		end
	end
	if #f236_local0 == 0 then
		return nil
	end
	f236_local3 = 0
	f236_local4 = math.floor( math.random() * 100 + 0.5 ) / 100 * f236_local1
	f236_local5 = 1
	for f236_local9, f236_local10 in ipairs( f236_local0 ) do
		if f236_local4 <= f236_local3 + f236_local10[f236_local2] then
			f236_local5 = f236_local9
			break
		end
		f236_local3 = f236_local3 + f236_local10[f236_local2]
	end
	for f236_local9, f236_local10 in ipairs( f236_arg0[f236_arg1.slotIndex] ) do
		if f236_local10.ref == f236_local0[f236_local5].ref then
			table.remove( f236_arg0[f236_arg1.slotIndex], f236_local9 )
			break
		end
	end
	return f236_local0[f236_local5]
end

GUNSMITH.GetVariantName = function ( f235_arg0, f235_arg1 )
	if f235_arg0 == 0 then
		return Engine[0xED84C33EC5F01EA]( 0x23ABF974ED0021F )
	else
		return WEAPON.GetLootWeaponName( WEAPON.GetBlueprintBaseRefbyID( f235_arg1 ), f235_arg1 )
	end
end

GUNSMITH.GetSelectedBlueprintAttachIndexForCategory = function ( f234_arg0, f234_arg1 )
	for f234_local4, f234_local5 in ipairs( f234_arg1.attachments ) do
		if not String.IsNilOrEmpty( f234_local5.ref ) and f234_local5.ref ~= ATTACHMENT.none then
			local f234_local3 = LUI.Split( f234_local5.ref, "|" )
			if not ATTACHMENT.IsDefaultAttachment( WEAPON.GetWeaponModelName( f234_arg1.weapon, f234_arg1, {
				includeAttachments = true
			} ), f234_local3[1] ) and ATTACHMENT.GetCategory( f234_local5.ref ) == f234_arg0 then
				return f234_local4
			end
		end
	end
end

GUNSMITH.GetSelectedAttachIndexForCategory = function ( f233_arg0, f233_arg1 )
	for f233_local3, f233_local4 in ipairs( f233_arg1.attachments ) do
		if ATTACHMENT.GetCategory( f233_local4.ref ) == f233_arg0 then
			return f233_local3
		end
	end
end

GUNSMITH.GetAttachmentAndIndexForCategory = function ( f232_arg0, f232_arg1 )
	for f232_local4, f232_local5 in ipairs( f232_arg1.attachments ) do
		local f232_local3 = f232_local5.category
		if not f232_local3 then
			f232_local3 = ATTACHMENT.GetCategory( f232_local5.ref )
		end
		if f232_local3 == f232_arg0 then
			return f232_local5, f232_local4
		end
	end
end

GUNSMITH.GetGunsmithMenu = function ()
	local f231_local0
	if Engine[0x12586A3F4FB490E]() then
		f231_local0 = "Gunsmith"
	else
		f231_local0 = "InGameGunsmith"
	end
	return f231_local0
end

GUNSMITH.OpenShowcaseGunsmith = function ( f230_arg0 )
	LUI.FlowManager.RequestAddMenu( LOADOUT.GetGunsmithTabsMenuRef(), true, f230_arg0, false, {
		loadoutIndex = 0,
		forShowcase = true,
		weaponSlot = 0
	}, true )
end

GUNSMITH.OpenGunsmith = function ( f229_arg0, f229_arg1, f229_arg2, f229_arg3 )
	if not Dvar[0x9E5BE3B4BBA4E0E]( 0x4F74CEB67644978 ) then
		return 
	end
	local f229_local0 = LOADOUT.GetLoadoutSquadMember( f229_arg0 )
	f229_local0 = f229_local0.loadouts
	local f229_local1 = f229_local0[f229_arg1].loadoutPerks[0]:get()
	local f229_local2 = f229_local0[f229_arg1].loadoutPerks[1]:get()
	local f229_local3 = f229_local0[f229_arg1].loadoutPerks[2]:get()
	if not PERK.IsPerkOverkill( f229_local1 ) and not PERK.IsPerkOverkill( f229_local2 ) then
		local f229_local4 = PERK.IsPerkOverkill( f229_local3 )
	end
	local f229_local5 = {
		weaponSlot = f229_arg2,
		loadoutIndex = f229_arg1
	}
	if CONDITIONS.IsWaveGameType() then
		f229_arg3 = false
	end
	LUI.FlowManager.RequestAddMenu( LOADOUT.GetGunsmithTabsMenuRef(), true, f229_arg0, f229_arg3, f229_local5, true )
end

GUNSMITH.OpenMobileAttachmentSelectMenu = function ( f228_arg0, f228_arg1, f228_arg2, f228_arg3 )
	local f228_local0 = "?category=" .. f228_arg1
	if f228_arg2 then
		f228_local0 = f228_local0 .. "&attachSlot=" .. f228_arg2
	end
	if not String.IsNilOrEmpty( f228_arg3 ) then
		f228_local0 = f228_local0 .. "&unlockedBlueprintAttachmentRef=" .. f228_arg3
	end
	URI.QueueURI( "./MobileAttachmentSelect" .. f228_local0, f228_arg0 )
end

GUNSMITH.OpenMobileGunsmithCustomizationMenu = function ( f227_arg0, f227_arg1, f227_arg2 )
	URI.QueueURI( "./" .. GUNSMITH.GetCustomizationSelectMenuRef() .. "?category=" .. f227_arg1 .. "&gridType=" .. f227_arg2, f227_arg0 )
end

GUNSMITH.OpenMobileWeaponProgressionMenu = function ( f226_arg0 )
	URI.QueueURI( "./" .. GUNSMITH.GetGunsmithProgressionTabFrameRef(), f226_arg0 )
end

GUNSMITH.GetLineOffsets = function ( f225_arg0, f225_arg1, f225_arg2 )
	local f225_local0 = {
		{
			col = CSV.gunsmithSetup.cols.weapon,
			key = f225_arg0
		},
		{
			col = CSV.gunsmithSetup.cols.category,
			key = f225_arg2
		},
		{
			col = CSV.gunsmithSetup.cols.variantID,
			key = f225_arg1
		}
	}
	local f225_local1 = StringTable[0xF6B0CC3002991DB]( CSV.gunsmithSetup.file, f225_local0 )
	if not f225_local1 or f225_local1 == -1 then
		f225_local0[3] = {
			col = CSV.gunsmithSetup.cols.variantID,
			key = WEAPON.baseVariant
		}
		f225_local1 = StringTable[0xF6B0CC3002991DB]( CSV.gunsmithSetup.file, f225_local0 )
	end
	return StringTable[0x2077452C28AB2FC]( CSV.gunsmithSetup.file, f225_local1, CSV.gunsmithSetup.cols.lineOffsetX ), StringTable[0x2077452C28AB2FC]( CSV.gunsmithSetup.file, f225_local1, CSV.gunsmithSetup.cols.lineOffsetY ), StringTable[0x2077452C28AB2FC]( CSV.gunsmithSetup.file, f225_local1, CSV.gunsmithSetup.cols.lineOffsetZ )
end

GUNSMITH.GetDefaultLineOffsets = function ( f224_arg0 )
	local f224_local0 = StringTable[0x8073B436CDE1BF]( CSV.attachmentCategories.file, CSV.attachmentCategories.cols.ref, f224_arg0 )
	local f224_local1 = StringTable[0x2077452C28AB2FC]( CSV.attachmentCategories.file, f224_local0, CSV.attachmentCategories.cols.defaultLineOffsetX )
	local f224_local2 = StringTable[0x2077452C28AB2FC]( CSV.attachmentCategories.file, f224_local0, CSV.attachmentCategories.cols.defaultLineOffsetY )
	local f224_local3 = StringTable[0x2077452C28AB2FC]( CSV.attachmentCategories.file, f224_local0, CSV.attachmentCategories.cols.defaultLineOffsetZ )
	if f224_local1 and 0 < #f224_local1 then
		local f224_local4 = tonumber( f224_local1 )
		if not f224_local4 then
			f224_local1 = f224_local4
		end
	end
	f224_local1 = 0
end

GUNSMITH.GetFinalLineOffsets = function ( f223_arg0, f223_arg1, f223_arg2 )
	local f223_local0, f223_local1, f223_local2 = GUNSMITH.GetDefaultLineOffsets( f223_arg2 )
	local f223_local3, f223_local4, f223_local5 = GUNSMITH.GetLineOffsets( f223_arg0, f223_arg1, f223_arg2 )
	if f223_local3 and 0 < #f223_local3 then
		local f223_local6 = tonumber( f223_local3 )
		if not f223_local6 then
			f223_local0 = f223_local6
		else
			
		end
	end
	if f223_local4 and 0 < #f223_local4 then
		local f223_local6 = tonumber( f223_local4 )
		if not f223_local6 then
			f223_local1 = f223_local6
		else
			
		end
	end
	if f223_local5 and 0 < #f223_local5 then
		local f223_local6 = tonumber( f223_local5 )
		if not f223_local6 then
			f223_local2 = f223_local6
		else
			
		end
	end
	if Dvar[0x9E5BE3B4BBA4E0E]( 0x207212EF5C79A3A ) then
		f223_local0 = Dvar[0xEDCFC612B39E0C0]( 0x6A261C4324491B7 )
		f223_local1 = Dvar[0xEDCFC612B39E0C0]( 0x914534761F93E4 )
		f223_local2 = Dvar[0xEDCFC612B39E0C0]( 0xF6E39204F9D9DD5 )
	end
	return f223_local0, f223_local1, f223_local2
end

GUNSMITH.GetOverrideLineBone = function ( f222_arg0, f222_arg1, f222_arg2 )
	local f222_local0 = {
		{
			col = CSV.gunsmithSetup.cols.weapon,
			key = f222_arg0
		},
		{
			col = CSV.gunsmithSetup.cols.category,
			key = f222_arg2
		},
		{
			col = CSV.gunsmithSetup.cols.variantID,
			key = f222_arg1
		}
	}
	local f222_local1 = StringTable[0x412BDBFB84C120D]( CSV.gunsmithSetup.file, f222_local0, CSV.gunsmithSetup.cols.overrideLineBone )
	if not f222_local1 or #f222_local1 == 0 then
		f222_local0[3] = {
			col = CSV.gunsmithSetup.cols.variantID,
			key = WEAPON.baseVariant
		}
		f222_local1 = StringTable[0x412BDBFB84C120D]( CSV.gunsmithSetup.file, f222_local0, CSV.gunsmithSetup.cols.overrideLineBone )
	end
	return f222_local1
end

GUNSMITH.GetLineBone = function ( f221_arg0, f221_arg1, f221_arg2 )
	local f221_local0 = GUNSMITH.GetOverrideLineBone( f221_arg0, f221_arg1, f221_arg2 )
	local f221_local1
	if f221_local0 and 0 < #f221_local0 and not f221_local0 then
		f221_local1 = f221_local0
	else
		f221_local1 = StringTable[0x2DCF0973239E909]( CSV.attachmentCategories.file, CSV.attachmentCategories.cols.ref, f221_arg2, CSV.attachmentCategories.cols.bone )
	end
	return f221_local1
end

GUNSMITH.CanMakeModification = function ( f220_arg0, f220_arg1 )
	local f220_local0 = GUNSMITH.AreAnyModSlotsUnlocked( f220_arg0, LOOT.GetItemID( f220_arg1 ) )
	local f220_local1 = Dvar[0x9E5BE3B4BBA4E0E]( 0x65DC343A69576B4 )
	if f220_local1 then
		f220_local1 = f220_local0
	end
	return f220_local1
end

GUNSMITH.CheckNewAttachmentAndCustomization = function ( f219_arg0, f219_arg1 )
	local f219_local0 = false
	local f219_local1 = false
	if f219_arg1 then
		local f219_local2 = f219_arg1.weapon:get()
		local f219_local3 = ATTACHMENT.GetEquippedOptic( f219_arg1 )
		f219_local0 = Loot[0x2370C5DAF88C3CD]( f219_arg0, f219_local2 .. GUNSMITH.typeNamePostFix.attachment )
		local f219_local4 = Loot[0x2370C5DAF88C3CD]( f219_arg0, f219_local2 .. GUNSMITH.typeNamePostFix.camos )
		local f219_local5 = WEAPON.SupportsOptics( f219_local2 )
		if f219_local5 then
			f219_local5 = GUNSMITH.CheckNewReticleForOptic( f219_arg0, f219_local3 )
		end
		local f219_local6 = WEAPON.SupportsCosmetics( f219_local2 )
		if f219_local6 then
			f219_local6 = LOOT.IsCategoryNew( f219_arg0, LOOT.itemTypes.CHARM )
		end
		local f219_local7
		if 0 < WEAPON.GetMaxStickerSlotsForWeapon( f219_local2 ) then
			f219_local7 = LOOT.IsCategoryNew( f219_arg0, LOOT.itemTypes.STICKER )
		else
			f219_local7 = false
		end
		if not f219_local4 then
			f219_local1 = f219_local4
		elseif not f219_local5 then
			f219_local1 = f219_local5
		elseif not f219_local6 then
			f219_local1 = f219_local6
		else
			f219_local1 = f219_local7
		end
	end
	return f219_local0, f219_local1
end

GUNSMITH.CheckNewGunsmithByWeapon = function ( f218_arg0, f218_arg1 )
	local f218_local0, f218_local1 = GUNSMITH.CheckNewAttachmentAndCustomization( f218_arg0, f218_arg1 )
	local f218_local2
	if not f218_local0 then
		f218_local2 = f218_local0
	else
		f218_local2 = f218_local1
	end
	return f218_local2
end

GUNSMITH.CheckNewReticleForOptic = function ( f217_arg0, f217_arg1 )
	if ATTACHMENT.SupportsCustomReticles( f217_arg1 ) then
		local f217_local0 = ATTACHMENT.GetOpticReticleCategory( ATTACHMENT.GetOpticRef( f217_arg1 ) )
		local f217_local1 = Loot[0x3CB161A5685F7FF]( f217_arg0, LOOT.typeNames[LOOT.itemTypes.RETICLE] )
		for f217_local2 = 1, #f217_local1, 1 do
			if f217_local0 == WEAPON.GetReticleCategory( LOOT.GetItemRef( f217_local1[f217_local2] ) ) then
				return true
			end
		end
	end
	return false
end

GUNSMITH.SetupAttachPoint = function ( f216_arg0, f216_arg1, f216_arg2, f216_arg3, f216_arg4 )
	local f216_local0 = GUNSMITH.GetLineBone( f216_arg1, f216_arg2, f216_arg3 )
	if not String.IsNilOrEmpty( f216_arg4 ) then
		f216_local0 = f216_arg4
	end
	if not String.IsNilOrEmpty( f216_local0 ) then
		if not f216_arg0._attachPoint then
			f216_arg0._attachPoint = MenuBuilder.BuildRegisteredType( "GunsmithAttachmentPointer", {
				controllerIndex = Engine[0x45B054C920178E9]()
			} )
			f216_arg0:addElement( f216_arg0._attachPoint )
			f216_arg0._attachPoint:SetAlpha( 0 )
		end
		f216_arg0._attachPoint:SetupAnchoredElement( {
			perspectiveScalingEnabled = false,
			entityNum = ClientWeapon[0x5DD69014A9C290]( FrontEndScene.ClientWeapons.Preview ),
			entityTag = f216_local0
		} )
		local f216_local1, f216_local2, f216_local3 = GUNSMITH.GetFinalLineOffsets( f216_arg1, f216_arg2, f216_arg3 )
		f216_arg0._attachPoint:SetTagOffsets( f216_local1, f216_local2, f216_local3 )
		f216_arg0._attachPoint:SetVisible( GL_HACK.ShowAttachmentPointers() )
	elseif f216_arg0._attachPoint then
		f216_arg0._attachPoint:closeTree()
		f216_arg0._attachPoint = nil
	end
end

GUNSMITH.SetupAttachLine = function ( f215_arg0, f215_arg1, f215_arg2, f215_arg3, f215_arg4 )
	local f215_local0 = GUNSMITH.GetLineBone( f215_arg1, f215_arg2, f215_arg3 )
	if not String.IsNilOrEmpty( f215_arg4 ) then
		f215_local0 = f215_arg4
	end
	if not String.IsNilOrEmpty( f215_local0 ) then
		if not f215_arg0._attachLine then
			f215_arg0._attachLine = LUI.UILine.new()
			f215_arg0._attachLine:setPriority( -5 )
			f215_arg0._attachLine:SetAlpha( 0 )
			if not CONDITIONS.IsGLGunsmithEnabled() then
				f215_arg0._attachLine:SetThickness( 1 * _1080p )
				f215_arg0._attachLine:SetVertexPosition( LUI.UILine.START, 0, 0, 220 * _1080p, 32 * _1080p )
			end
			f215_arg0:addElement( f215_arg0._attachLine )
		end
		f215_arg0._attachLine:SetVertexEntity( LUI.UILine.END, ClientWeapon[0x5DD69014A9C290]( FrontEndScene.ClientWeapons.Preview ) )
		f215_arg0._attachLine:SetVertexEntityTag( LUI.UILine.END, f215_local0 )
		f215_arg0._attachLine:AttachVertexToWorldModel( LUI.UILine.END )
		local f215_local1, f215_local2, f215_local3 = GUNSMITH.GetFinalLineOffsets( f215_arg1, f215_arg2, f215_arg3 )
		f215_arg0._attachLine:SetVertexTagSpacePosition( LUI.UILine.END, f215_local1, f215_local2, f215_local3 )
	elseif f215_arg0._attachLine then
		f215_arg0._attachLine:closeTree()
		f215_arg0._attachLine = nil
	end
end

GUNSMITH.GetFrontendTagWorldPositionAndAxis = function ( f214_arg0, f214_arg1, f214_arg2, f214_arg3 )
	local f214_local0 = GUNSMITH.GetLineBone( f214_arg1, f214_arg2, f214_arg3 )
	if f214_local0 and 0 < #f214_local0 then
		return Engine[0xC3B7925CCAC9430]( f214_arg0, ClientWeapon[0x5DD69014A9C290]( FrontEndScene.ClientWeapons.Preview ), f214_local0 )
	else
		
	end
end

GUNSMITH.GetCustomModPath = function ( f213_arg0, f213_arg1 )
	return "blueprints." .. f213_arg0 .. ".weaponSetup." .. f213_arg1
end

GUNSMITH.IsModSlotInUse = function ( f212_arg0, f212_arg1, f212_arg2 )
	local f212_local0 = Gunsmith[0x74F8974028A5B02]( f212_arg0, GUNSMITH.GetCustomModPath( f212_arg1, f212_arg2 ) .. ".blueprintName" )
	if f212_local0 ~= nil then
		return 0 < #f212_local0
	else
		return false
	end
end

GUNSMITH.GetAllCustomMods = function ( f211_arg0, f211_arg1, f211_arg2 )
	if not f211_arg1 then
		f211_arg1 = {}
	end
	if not f211_arg2 then
		f211_arg2 = {}
	end
	for f211_local9, f211_local10 in pairs( WEAPON.GetWeapons() ) do
		if f211_local10 and f211_local10[0x6D696AD252F1CB1] then
			local f211_local3 = f211_local10[0x6D696AD252F1CB1]
			local f211_local4 = WEAPON.GetWeaponDataForRef( f211_local3 )
			if f211_local4 then
				local f211_local5 = f211_arg2.byWeapons
				if f211_local5 then
					f211_local5 = not f211_arg2.byWeapons[f211_local3]
				end
				if not f211_local5 and f211_local4[0x4FB3C98AEEAB347] and 0 <= f211_local4[0x4FB3C98AEEAB347] then
					for f211_local6 = 0, GUNSMITH.maxMods - 1, 1 do
						if GUNSMITH.IsModSlotInUse( f211_arg0, f211_local3, f211_local6 ) then
							table.insert( f211_arg1, GUNSMITH.GetCustomMod( f211_arg0, f211_local3, f211_local6 ) )
						end
					end
				end
			end
		end
	end
	return f211_arg1
end

GUNSMITH.GetCustomModsForWeapon = function ( f210_arg0, f210_arg1 )
	local f210_local0 = {}
	for f210_local1 = 0, GUNSMITH.maxMods - 1, 1 do
		if GUNSMITH.IsModSlotInUse( f210_arg0, f210_arg1, f210_local1 ) then
			table.insert( f210_local0, GUNSMITH.GetCustomMod( f210_arg0, f210_arg1, f210_local1 ) )
		end
	end
	return f210_local0
end

GUNSMITH.GetCustomMod = function ( f209_arg0, f209_arg1, f209_arg2 )
	local f209_local0 = GUNSMITH.GetCustomModPath( f209_arg1, f209_arg2 )
	local f209_local1 = {
		blueprintName = Gunsmith[0x74F8974028A5B02]( f209_arg0, f209_local0 .. ".blueprintName" ),
		weapon = Gunsmith[0x74F8974028A5B02]( f209_arg0, f209_local0 .. ".weapon" ),
		lootID = tonumber( Gunsmith[0x74F8974028A5B02]( f209_arg0, f209_local0 .. ".lootItemID" ) ),
		variantID = Gunsmith[0x74F8974028A5B02]( f209_arg0, f209_local0 .. ".variantID" ),
		camo = Gunsmith[0x74F8974028A5B02]( f209_arg0, f209_local0 .. ".camo" ),
		cosmeticAttachment = Gunsmith[0x74F8974028A5B02]( f209_arg0, f209_local0 .. ".cosmeticAttachment" ),
		reticle = Gunsmith[0x74F8974028A5B02]( f209_arg0, f209_local0 .. ".reticle" ),
		isBlueprintIntact = Gunsmith[0x74F8974028A5B02]( f209_arg0, f209_local0 .. ".blueprintTuned" ) ~= 0
	}
	local f209_local2 = f209_local0 .. ".attachmentSetup"
	f209_local1.attachments = {}
	for f209_local3 = 0, WEAPON.maxAttachmentsPerWeapon - 1, 1 do
		local f209_local6 = f209_local2 .. "." .. f209_local3
		local f209_local7 = {
			ref = Gunsmith[0x74F8974028A5B02]( f209_arg0, f209_local6 .. ".attachment" ),
			variantID = Gunsmith[0x74F8974028A5B02]( f209_arg0, f209_local6 .. ".variantID" ),
			hasBPTune = Gunsmith[0x74F8974028A5B02]( f209_arg0, f209_local6 .. ".hasBPTune" )
		}
		if ATTACHMENT.IsAttachmentNeitherReceiverNorNone( f209_local7.ref ) then
			local f209_local8 = ClientWeapon[0xEA43B74913590D5]( Gunsmith[0x74F8974028A5B02]( f209_arg0, f209_local6 .. ".customTune.0" ), Gunsmith[0x74F8974028A5B02]( f209_arg0, f209_local6 .. ".customTune.1" ) )
			if next( f209_local8 ) ~= nil then
				f209_local7.tuningData = {
					x = f209_local8.customX or 0,
					y = f209_local8.customY or 0
				}
			end
		end
		table.insert( f209_local1.attachments, f209_local7 )
	end
	local f209_local3 = f209_local0 .. ".sticker"
	f209_local1.stickers = {}
	for f209_local4 = 0, WEAPON.maxStickersPerWeapon - 1, 1 do
		table.insert( f209_local1.stickers, Gunsmith[0x74F8974028A5B02]( f209_arg0, f209_local3 .. "." .. f209_local4 ) )
	end
	f209_local1.isCustom = true
	f209_local1.displayOrder = WEAPON.GetDisplayOrder( f209_local1.weapon )
	f209_local1.modSlot = f209_arg2
	return f209_local1
end

GUNSMITH.GetFirstFreeCustomModSlot = function ( f208_arg0, f208_arg1, f208_arg2 )
	for f208_local0 = 0, GUNSMITH.maxMods - 1, 1 do
		if GUNSMITH.IsModSlotUnlocked( f208_arg0, f208_arg2, f208_local0 ) and #Gunsmith[0x74F8974028A5B02]( f208_arg0, GUNSMITH.GetCustomModPath( f208_arg1, f208_local0 ) .. ".blueprintName" ) == 0 then
			return f208_local0
		end
	end
	return false
end

GUNSMITH.GetSlotUnlockRank = function ( f207_arg0, f207_arg1, f207_arg2 )
	return 0
end

GUNSMITH.GetNextModUnlockRank = function ( f206_arg0, f206_arg1, f206_arg2 )
	local f206_local0 = GUNSMITH.CountModSlotsUnlocked( f206_arg0, f206_arg2 )
	if f206_local0 <= GUNSMITH.maxMods then
		return GUNSMITH.GetSlotUnlockRank( f206_arg1, f206_arg2, f206_local0 )
	else
		return nil
	end
end

GUNSMITH.CountAvailableCustomModSlots = function ( f205_arg0, f205_arg1, f205_arg2 )
	local f205_local0 = 0
	for f205_local1 = 0, GUNSMITH.maxMods - 1, 1 do
		if GUNSMITH.IsModSlotUnlocked( f205_arg0, f205_arg2, f205_local1 ) and #Gunsmith[0x74F8974028A5B02]( f205_arg0, GUNSMITH.GetCustomModPath( f205_arg1, f205_local1 ) .. ".blueprintName" ) == 0 then
			f205_local0 = f205_local0 + 1
		end
	end
	return f205_local0
end

GUNSMITH.SaveAsCustomMod = function ( f204_arg0, f204_arg1, f204_arg2, f204_arg3 )
	assert( f204_arg2 )
	assert( type( f204_arg2 ) == "number" )
	local f204_local0 = assert
	local f204_local1
	if 0 > f204_arg2 or f204_arg2 > GUNSMITH.maxMods - 1 then
		f204_local1 = false
	else
		f204_local1 = true
	end
	f204_local0( f204_local1 )
	if CONDITIONS.IsPlayerDataWeaponSetupsValidationEnabled() then
		local f204_local0, f204_local2 = WEAPON.IsWeaponTableValid( f204_arg0, f204_arg1 )
		if not f204_local0 then
			METRICS.SendDLogWeaponSetupValidationResults( f204_arg0, f204_local2, LOADOUT.DLOG_VALIDATION_DENY_EQUIP_SUFFIX, CoD.StatsGroup.NonGame )
			if CONDITIONS.IsPlayerDataWeaponSetupsValidationResetWeaponEnabled() then
				LUI.FlowManager.RequestErrorPopup( controller, Engine[0xED84C33EC5F01EA]( 0xD09E09A43DE9B80 ), Engine[0xED84C33EC5F01EA]( 0xE0AC73017303D25 ) )
				return false
			end
		end
	end
	f204_local0 = GUNSMITH.GetCustomModPath( f204_arg1.weapon, f204_arg2 )
	Gunsmith[0x458814B87A126EE]( f204_arg0, f204_local0 .. ".blueprintName", f204_arg1.blueprintName )
	Gunsmith[0x458814B87A126EE]( f204_arg0, f204_local0 .. ".weapon", f204_arg1.weapon )
	Gunsmith[0x458814B87A126EE]( f204_arg0, f204_local0 .. ".variantID", f204_arg1.variantID )
	Gunsmith[0x458814B87A126EE]( f204_arg0, f204_local0 .. ".camo", f204_arg1.camo )
	Gunsmith[0x458814B87A126EE]( f204_arg0, f204_local0 .. ".cosmeticAttachment", f204_arg1.cosmeticAttachment )
	Gunsmith[0x458814B87A126EE]( f204_arg0, f204_local0 .. ".reticle", f204_arg1.reticle )
	Gunsmith[0x458814B87A126EE]( f204_arg0, f204_local0 .. ".lootItemID", f204_arg1.lootID )
	Gunsmith[0x458814B87A126EE]( f204_arg0, f204_local0 .. ".blueprintTuned", f204_arg3.blueprintTuned:get() )
	local f204_local2 = f204_local0 .. ".attachmentSetup"
	for f204_local1 = 0, #f204_arg1.attachments - 1, 1 do
		local f204_local5 = f204_local2 .. "." .. f204_local1
		Gunsmith[0x458814B87A126EE]( f204_arg0, f204_local5 .. ".attachment", f204_arg1.attachments[f204_local1 + 1].ref )
		Gunsmith[0x458814B87A126EE]( f204_arg0, f204_local5 .. ".variantID", f204_arg1.attachments[f204_local1 + 1].variantID )
		local f204_local6 = Gunsmith[0x458814B87A126EE]
		local f204_local7 = f204_arg0
		local f204_local8 = f204_local5 .. ".hasBPTune"
		local f204_local9 = f204_arg1.attachments[f204_local1 + 1].hasBPTune
		if not f204_local9 then
			f204_local9 = GUNSMITH.CAN_PRO_TUNE
		end
		f204_local6( f204_local7, f204_local8, f204_local9 )
		if ATTACHMENT.IsAttachmentNeitherReceiverNorNone( f204_arg1.attachments[f204_local1 + 1].ref, f204_arg1.attachments[f204_local1 + 1].category ) then
			Gunsmith[0x458814B87A126EE]( f204_arg0, f204_local5 .. ".customTune.0", f204_arg3.attachmentSetup[f204_local1].customTune[0]:get() )
			Gunsmith[0x458814B87A126EE]( f204_arg0, f204_local5 .. ".customTune.1", f204_arg3.attachmentSetup[f204_local1].customTune[1]:get() )
		end
	end
	f204_local1 = f204_local0 .. ".sticker"
	for f204_local3 = 0, #f204_arg1.stickers - 1, 1 do
		Gunsmith[0x458814B87A126EE]( f204_arg0, f204_local1 .. "." .. f204_local3, f204_arg1.stickers[f204_local3 + 1] )
	end
	Gunsmith[0x72A7A297BA6F63F]( f204_arg0 )
	return true
end

GUNSMITH.DeleteCustomMod = function ( f203_arg0, f203_arg1, f203_arg2 )
	local f203_local0 = GUNSMITH.GetCustomModPath( f203_arg1, f203_arg2 )
	local f203_local1 = Gunsmith[0x74F8974028A5B02]( f203_arg0, f203_local0 .. ".blueprintName" )
	Gunsmith[0x458814B87A126EE]( f203_arg0, f203_local0 .. ".blueprintName", "" )
	Gunsmith[0x458814B87A126EE]( f203_arg0, f203_local0 .. ".weapon", WEAPON.none )
	Gunsmith[0x458814B87A126EE]( f203_arg0, f203_local0 .. ".variantID", WEAPON.baseVariant )
	Gunsmith[0x458814B87A126EE]( f203_arg0, f203_local0 .. ".camo", WEAPON.CamoNoneValue )
	Gunsmith[0x458814B87A126EE]( f203_arg0, f203_local0 .. ".cosmeticAttachment", WEAPON.CharmNoneValue )
	Gunsmith[0x458814B87A126EE]( f203_arg0, f203_local0 .. ".reticle", WEAPON.ReticleNoneValue )
	Gunsmith[0x458814B87A126EE]( f203_arg0, f203_local0 .. ".lootItemID", LOOT.emptyID )
	Gunsmith[0x458814B87A126EE]( f203_arg0, f203_local0 .. ".blueprintTuned", 0 )
	local f203_local2 = f203_local0 .. ".attachmentSetup"
	for f203_local3 = 0, WEAPON.maxAttachmentsPerWeapon - 1, 1 do
		local f203_local6 = f203_local2 .. "." .. f203_local3
		Gunsmith[0x458814B87A126EE]( f203_arg0, f203_local6 .. ".attachment", ATTACHMENT.none )
		Gunsmith[0x458814B87A126EE]( f203_arg0, f203_local6 .. ".variantID", ATTACHMENT.baseVariant )
		Gunsmith[0x458814B87A126EE]( f203_arg0, f203_local6 .. ".hasBPTune", GUNSMITH.CAN_PRO_TUNE )
		Gunsmith[0x458814B87A126EE]( f203_arg0, f203_local6 .. ".customTune.0", GUNSMITH.NO_CUSTOM_TUNING_VALUE )
		Gunsmith[0x458814B87A126EE]( f203_arg0, f203_local6 .. ".customTune.1", GUNSMITH.NO_CUSTOM_TUNING_VALUE )
	end
	local f203_local3 = f203_local0 .. ".sticker"
	for f203_local4 = 0, WEAPON.maxStickersPerWeapon - 1, 1 do
		Gunsmith[0x458814B87A126EE]( f203_arg0, f203_local3 .. "." .. f203_local4, WEAPON.StickerNoneValue )
	end
	local f203_local4 = LOADOUT.GetLoadoutSquadMember( f203_arg0 )
	for f203_local11, f203_local12 in ddlpairs( f203_local4.loadouts ) do
		for f203_local8, f203_local9 in ddlpairs( f203_local12.weaponSetups ) do
			if f203_local9.blueprintName:get() == f203_local1 then
				f203_local9.blueprintName:set( "" )
			end
		end
	end
	Gunsmith[0x72A7A297BA6F63F]( f203_arg0 )
end

GUNSMITH.GetUsedAttachmentIndices = function ( f202_arg0, f202_arg1, f202_arg2 )
	local f202_local0 = GUNSMITH.GetAttachmentCategories( f202_arg0, f202_arg2 )
	local f202_local1 = {}
	for f202_local9, f202_local10 in ipairs( f202_local0 ) do
		if f202_arg1[f202_local10] and 0 < #f202_arg1[f202_local10] then
			local f202_local5 = ATTACHMENT.GetAttachmentCategoryButton( f202_local10 )
			assert( f202_local5, "Gunsmith button index for " .. f202_local10 .. " is invalid." )
			if f202_local1[f202_local5] then
				DebugPrint( "Tried to use button index " .. f202_local5 .. " for category " .. f202_local10 .. " but it was already in use. Attempting to use first unused index." )
				for f202_local6 = 1, GUNSMITH.maxCategories, 1 do
					if not f202_local1[f202_local6] then
						f202_local1[f202_local6] = f202_local10
					end
				end
			end
			f202_local1[f202_local5] = f202_local10
		end
	end
	return f202_local1
end

GUNSMITH.GetCustomModName = function ( f201_arg0 )
	if 0 < #f201_arg0 then
		return string.sub( f201_arg0, GUNSMITH.modSlotChars + 1 )
	else
		return ""
	end
end

GUNSMITH.GetCustomModSlot = function ( f200_arg0 )
	return tonumber( string.sub( f200_arg0, 1, GUNSMITH.modSlotChars ) )
end

GUNSMITH.AreCustomModsEqual = function ( f199_arg0, f199_arg1 )
	local f199_local0
	if f199_arg0.blueprintName ~= f199_arg1.blueprintName or f199_arg0.weapon ~= f199_arg1.weapon then
		f199_local0 = false
	else
		f199_local0 = true
	end
	return f199_local0
end

GUNSMITH.AreModsEqual = function ( f198_arg0, f198_arg1 )
	if f198_arg0 then
		if f198_arg1.isCustom or 0 < #f198_arg0.blueprintName then
			return GUNSMITH.AreCustomModsEqual( f198_arg0, f198_arg1 )
		else
			local f198_local0
			if f198_arg0.weapon ~= f198_arg1.weapon or f198_arg0.variantID ~= f198_arg1.variantID then
				f198_local0 = false
			else
				f198_local0 = true
			end
		end
		return f198_local0
	else
		return false
	end
end

GUNSMITH.GenerateModName = function ( f197_arg0, f197_arg1 )
	return string.format( "%03d", f197_arg1 ) .. f197_arg0
end

GUNSMITH.GetWeaponPreviewCameraType = function ( f196_arg0 )
	local f196_local0 = WEAPON.GetWeaponClass( f196_arg0 )
	local f196_local1 = GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.NONE
	local f196_local2
	if f196_local0 ~= WEAPON.ARClass and f196_local0 ~= WEAPON.LMGClass and f196_local0 ~= WEAPON.sniperClass and f196_local0 ~= WEAPON.SMGClass and f196_local0 ~= WEAPON.DMRClass and f196_local0 ~= WEAPON.battleClass and f196_local0 ~= WEAPON.LAUNCHERClass and f196_local0 ~= WEAPON.MELEEClass and f196_local0 ~= WEAPON.MELEEClass2 then
		f196_local2 = false
	else
		f196_local2 = true
	end
	if f196_local2 then
		f196_local1 = GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.BIG_GUN
	elseif f196_local0 == WEAPON.SHOTGUNClass then
		f196_local1 = GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.BIG_SHOTGUN
	elseif f196_local0 == WEAPON.pistolClass then
		f196_local1 = GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.SMALL_GUN
	end
	return f196_local1
end

GUNSMITH.GetWeaponAvailableCategoryPreviewTable = function ( f195_arg0 )
	local f195_local0 = GUNSMITH.GetWeaponPreviewCameraType( f195_arg0 )
	local f195_local1 = StringTable[0xFD4E49A34DD43AE]( CSV.attachmentCategories.file )
	local f195_local2 = {}
	local f195_local3 = false
	for f195_local4 = 0, f195_local1 - 1, 1 do
		f195_local3 = nil
		if f195_local0 == GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.BIG_GUN then
			f195_local3 = StringTable[0x2077452C28AB2FC]( CSV.attachmentCategories.file, f195_local4, CSV.attachmentCategories.cols.enableBigGunPreviewCamera )
		elseif f195_local0 == GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.BIG_SHOTGUN then
			f195_local3 = StringTable[0x2077452C28AB2FC]( CSV.attachmentCategories.file, f195_local4, CSV.attachmentCategories.cols.enableBigShotgunPreviewCamera )
		elseif f195_local0 == GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.SMALL_GUN then
			f195_local3 = StringTable[0x2077452C28AB2FC]( CSV.attachmentCategories.file, f195_local4, CSV.attachmentCategories.cols.enableSmallGunPreviewCamera )
		end
		if tonumber( f195_local3 ) == 1 then
			table.insert( f195_local2, StringTable[0x2077452C28AB2FC]( CSV.attachmentCategories.file, f195_local4, CSV.attachmentCategories.cols.ref ) )
		end
	end
	return f195_local2
end

GUNSMITH.IsAnyWeaponAvailableCategoryPreviewData = function ( f194_arg0 )
	local f194_local0 = GUNSMITH.GetWeaponPreviewCameraType( f194_arg0 )
	local f194_local1 = StringTable[0xFD4E49A34DD43AE]( CSV.attachmentCategories.file )
	local f194_local2 = {}
	local f194_local3 = nil
	for f194_local4 = 0, f194_local1 - 1, 1 do
		f194_local3 = nil
		if f194_local0 == GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.BIG_GUN then
			f194_local3 = StringTable[0x2077452C28AB2FC]( CSV.attachmentCategories.file, f194_local4, CSV.attachmentCategories.cols.enableBigGunPreviewCamera )
		elseif f194_local0 == GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.BIG_SHOTGUN then
			f194_local3 = StringTable[0x2077452C28AB2FC]( CSV.attachmentCategories.file, f194_local4, CSV.attachmentCategories.cols.enableBigShotgunPreviewCamera )
		elseif f194_local0 == GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.SMALL_GUN then
			f194_local3 = StringTable[0x2077452C28AB2FC]( CSV.attachmentCategories.file, f194_local4, CSV.attachmentCategories.cols.enableSmallGunPreviewCamera )
		end
		if tonumber( f194_local3 ) == 1 then
			return true
		end
	end
	return false
end

GUNSMITH.IsRemoveAllAttachmentsEnabled = function ()
	if Engine[0xDD9D856EA1C159E]() or Engine[0x2DA54CF5D6B7F02]() then
		return true
	else
		return Dvar[0x9E5BE3B4BBA4E0E]( 0x54D200B29ECC996 )
	end
end

GUNSMITH.AllowSaveCustomWeapon = function ()
	if Engine[0x2DA54CF5D6B7F02]() or Engine[0xDD9D856EA1C159E]() then
		return true
	else
		return Dvar[0x9E5BE3B4BBA4E0E]( 0x83AF5CA6980D576 )
	end
end

GUNSMITH.GetModSlotLootID = function ( f191_arg0, f191_arg1 )
	return GUNSMITH.modSlotBaseID + f191_arg0 * 1000 + f191_arg1
end

GUNSMITH.IsModSlotUnlocked = function ( f190_arg0, f190_arg1, f190_arg2 )
	if GUNSMITH.AllowSaveCustomWeapon() then
		return true
	else
		return LOOT.IsUnlockedWithID( f190_arg0, GUNSMITH.GetModSlotLootID( f190_arg1, f190_arg2 ) )
	end
end

GUNSMITH.AreAnyModSlotsUnlocked = function ( f189_arg0, f189_arg1 )
	for f189_local0 = 0, GUNSMITH.maxMods - 1, 1 do
		if GUNSMITH.IsModSlotUnlocked( f189_arg0, f189_arg1, f189_local0 ) then
			return true
		end
	end
	return false
end

GUNSMITH.CountModSlotsUnlocked = function ( f188_arg0, f188_arg1 )
	local f188_local0 = 0
	for f188_local1 = 0, GUNSMITH.maxMods - 1, 1 do
		if GUNSMITH.IsModSlotUnlocked( f188_arg0, f188_arg1, f188_local1 ) then
			f188_local0 = f188_local0 + 1
		end
	end
	return f188_local0
end

GUNSMITH.GetGunsmithChallengeCamoCategory = function ( f187_arg0, f187_arg1, f187_arg2 )
	local f187_local0 = Challenge.GetLootID( f187_arg0, f187_arg1, f187_arg2 )
	if not String.IsNilOrEmpty( f187_local0 ) then
		local f187_local1 = split( f187_local0, "|" )
		local f187_local2 = tonumber( f187_local1[1] )
		if f187_local2 and LOOT.GetTypeForID( f187_local2 ) == LOOT.itemTypes.CAMO then
			local f187_local3 = LOOT.GetScriptBundleForName( LOOT.itemTypes.CAMO, WEAPON.GetCamoRef( f187_local2 ) )
			return WEAPON.GetCamoCategory( f187_local3[0x9E9C01960F4C582] )
		end
	end
	return nil
end

GUNSMITH.GetGunsmithChallengeRelatedWeaponID = function ( f186_arg0, f186_arg1, f186_arg2 )
	local f186_local0 = Challenge.GetLootID( f186_arg0, f186_arg1, f186_arg2 )
	if not String.IsNilOrEmpty( f186_local0 ) then
		local f186_local1 = split( f186_local0, "|" )
		local f186_local2 = tonumber( f186_local1[1] )
		if f186_local2 and LOOT.GetTypeForID( f186_local2 ) == LOOT.itemTypes.CAMO then
			return LOOT.GetLootItemRelatedWeapon( f186_local2, LOOT.itemTypes.CAMO )
		end
	end
	return nil
end

GUNSMITH.GetGunsmithChallengeRelatedCamoInfo = function ( f185_arg0, f185_arg1, f185_arg2 )
	local f185_local0 = Challenge.GetLootID( f185_arg0, f185_arg1, f185_arg2 )
	if not String.IsNilOrEmpty( f185_local0 ) then
		local f185_local1 = split( f185_local0, "|" )
		local f185_local2 = tonumber( f185_local1[1] )
		if f185_local2 and LOOT.GetTypeForID( f185_local2 ) == LOOT.itemTypes.CAMO then
			local f185_local3 = WEAPON.GetCamoDataByID( f185_local2 )
			if f185_local3 then
				local f185_local4 = f185_local3[0x4BCADBA8E631B86] and Engine[0xED84C33EC5F01EA]( f185_local3[0x4BCADBA8E631B86] ) or ""
				local f185_local5 = f185_local3[0xAB612888528489A] and f185_local3[0xAB612888528489A] or ""
				local f185_local6 = SWATCHES[0x5B14DE9B77E4451].Yellow
				if f185_local3[0xA86D464182EDEB5] == GUNSMITH.CAMO_CATEGORY_COMPLETIONIST then
					local f185_local7 = GUNSMITH.COMPLETIONIST_CAMO_TYPE_COLOR[GUNSMITH.GetCompletionistCamoTypeFromCamoRef( f185_local3[0x9E9C01960F4C582] )]
					if not f185_local7 then
						LUI.FlowManager.RequestDevErrorPopup( "ERROR", "CamoData.@ref contains incorrect data about the type of mastery" )
					else
						f185_local6 = f185_local7
					end
				end
				return {
					name = f185_local4,
					image = f185_local5,
					color = f185_local6
				}
			end
			LUI.FlowManager.RequestDevErrorPopup( "ERROR", "CamoData is not found for camoID " .. f185_local1[1] )
		end
	end
	return nil
end

GUNSMITH.IsWeaponPartsAttachment = function ( f184_arg0 )
	return GUNSMITH.AttachmentSetupTypeMap[f184_arg0] == GUNSMITH.AttachmentSetupType.WEAPON_PART
end

GUNSMITH.IsWeaponPartsAttachmentByRef = function ( f183_arg0 )
	return GUNSMITH.IsWeaponPartsAttachment( ATTACHMENT.GetCategory( f183_arg0 ) )
end

GUNSMITH.IsAttachmentSetupFull = function ( f182_arg0, f182_arg1 )
	local f182_local0 = GUNSMITH.AttachmentSetupTypeMap[f182_arg0]
	local f182_local1 = GUNSMITH.AttachmentSetupDataMap[f182_local0].minIndex
	local f182_local2 = GUNSMITH.AttachmentSetupDataMap[f182_local0].maxIndex
	for f182_local7, f182_local8 in ddlpairs( f182_arg1.attachmentSetup ) do
		if f182_local1 <= f182_local7 and f182_local7 <= f182_local2 then
			local f182_local6 = ATTACHMENT.GetRefFromSetup( f182_local8 )
			if f182_local6 == nil or f182_local6 == ATTACHMENT.none then
				return false
			end
		end
	end
	return true
end

GUNSMITH.GetAvailableAttachmentSetupIndex = function ( f181_arg0, f181_arg1 )
	local f181_local0 = nil
	local f181_local1 = GUNSMITH.AttachmentSetupTypeMap[f181_arg0]
	local f181_local2 = GUNSMITH.AttachmentSetupDataMap[f181_local1].minIndex
	local f181_local3 = GUNSMITH.AttachmentSetupDataMap[f181_local1].maxIndex
	for f181_local7, f181_local8 in ddlpairs( f181_arg1.attachmentSetup ) do
		if f181_local2 <= f181_local7 and f181_local7 <= f181_local3 and ATTACHMENT.GetRefFromSetup( f181_local8 ) == ATTACHMENT.none then
			f181_local0 = f181_local7 + 1
		end
	end
	return f181_local0
end

GUNSMITH.EquipBaseWeaponPartsAttachment = function ( f180_arg0, f180_arg1 )
	local f180_local0 = WEAPON.GetWeaponModelNameFromPlayerData( f180_arg1.weapon:get(), f180_arg1, {
		includeAttachments = true,
		controllerIndex = f180_arg0
	} )
	local f180_local1 = LUI.Split( f180_local0, "+" )
	local f180_local2 = GUNSMITH.AttachmentSetupDataMap[GUNSMITH.AttachmentSetupType.WEAPON_PART].minIndex
	local f180_local3 = GUNSMITH.AttachmentSetupDataMap[GUNSMITH.AttachmentSetupType.WEAPON_PART].maxIndex
	for f180_local4 = 2, #f180_local1, 1 do
		local f180_local7 = f180_local1[f180_local4]
		if not String.IsNilOrEmpty( f180_local7 ) then
			local f180_local8 = ATTACHMENT.GetBaseRefForTunedAttachment( f180_local7 )
			local f180_local9 = LUI.Split( f180_local8, "|" )
			if 1 < #f180_local9 then
				local f180_local10 = Engine[0xFC084BF31D917C5]( f180_local1[1], f180_local9[1], tonumber( f180_local9[2] ) )
				local f180_local11
				if f180_local10 then
					f180_local11 = f180_local10[0xAE1E225E2DD2DF4]( f180_local10 )
					if not f180_local11 then
					
					else
						local f180_local12 = ATTACHMENT.GetBundleByBlueprintRefXhash( f180_local11 )
						if f180_local12 and f180_local12[0xBE72D7E1D0B16E5] then
							f180_local8 = f180_local12[0xBE72D7E1D0B16E5]
						else
							f180_local8 = f180_local9[1]
						end
					end
				end
				f180_local11 = 0x0
			end
			if GUNSMITH.IsWeaponPartsAttachment( ATTACHMENT.GetCategory( f180_local8 ) ) then
				assert( f180_local2 <= f180_local3, "Trying to equip attachment" .. tostring( f180_local8 ) .. " in attachment setup slot" .. tostring( f180_local2 ) .. " which is out of range. The weapon model name is " .. f180_local0 )
				local f180_local12 = ATTACHMENT.GetRefFromSetup( f180_arg1.attachmentSetup[f180_local2] )
				if f180_local12 ~= nil and f180_local12 == ATTACHMENT.none then
					ATTACHMENT.SetPlayerDataRef( f180_arg1.attachmentSetup[f180_local2], f180_local8 )
					f180_arg1.attachmentSetup[f180_local2].variantID:set( ATTACHMENT.baseVariant )
				end
				f180_local2 = f180_local2 + 1
			end
		end
	end
end

GUNSMITH.GetWeaponZOffset = function ( f178_arg0, f178_arg1, f178_arg2, f178_arg3 )
	local f178_local0, f178_local1, f178_local2 = nil
	local f178_local3 = false
	for f178_local7, f178_local8 in ipairs( f178_arg2 ) do
		local f178_local9 = f178_local8.ref
		local f178_local10 = ATTACHMENT.GetCategory( f178_local9 )
		if f178_local10 == ATTACHMENT.magazineCategory then
			f178_local0 = f178_local9
			f178_local3 = true
		end
		if f178_local10 == ATTACHMENT.undermountCategory then
			f178_local1 = f178_local9
			f178_local3 = true
		end
		if f178_local10 == ATTACHMENT.receiverCategory then
			f178_local2 = f178_local9
		end
	end
	if not f178_local3 and f178_arg3 then
		f178_local4 = f178_arg0._weaponModel._weaponModelName
		if f178_local4 == nil then
			f178_local4 = WEAPON.GetWeaponModelName( f178_arg0._weaponTable.weapon, f178_arg0._weaponTable, {
				includeAttachments = true
			} )
		end
		for f178_local9, f178_local10 in ipairs( GL_HACK.GetDefaultAttachmentData( f178_local4 ) ) do
			if string.match( f178_local10, "mag" ) or string.match( f178_local10, "drum" ) or string.match( f178_local10, "belt" ) then
				f178_local0 = f178_local10
			end
			if string.match( f178_local10, "rec" ) then
				f178_local2 = f178_local10
			end
		end
	end
	f178_local4 = function ( f179_arg0 )
		if not String.IsNilOrEmpty( f179_arg0 ) then
			local f179_local0 = Engine[0x6093D047200548]( 0xC2C9813BB16552F .. f179_arg0 )
			if f179_local0 and f179_local0[0x271998548F2F402] then
				return f179_local0[0x271998548F2F402]
			end
		end
		return 0
	end
	
	return math.max( f178_local4( f178_local0 ), f178_local4( f178_local1 ), f178_local4( f178_local2 ) )
end

GUNSMITH.UpdateAmmoModel = function ( f177_arg0, f177_arg1, f177_arg2 )
	if not f177_arg2 then
		f177_arg2 = Engine[0x17AFF3F28020742]( f177_arg1, FrontEndScene.ClientWeapons.Preview )
	end
	if f177_arg2 then
		CLIENT_MODEL.SetModel( CLIENT_MODEL.coreMPModels.AMMO_DISPLAY, f177_arg2 .. "_fe" )
	end
end

GUNSMITH.GetCategoryLockDetails = function ( f176_arg0, f176_arg1 )
	local f176_local0 = {}
	local f176_local1 = StringTable[0x8073B436CDE1BF]( CSV.attachmentCategoryLocks.file, CSV.attachmentCategoryLocks.cols.ref, f176_arg1 )
	if f176_local1 and 0 <= f176_local1 then
		local f176_local2 = CSV.ReadRow( CSV.attachmentCategoryLocks, f176_local1 )
		for f176_local3 = 1, GUNSMITH.NUM_BLOCKED_CATEGORIES, 1 do
			local f176_local6 = split( f176_local2["category" .. tostring( f176_local3 )], "|" )
			local f176_local7 = f176_local6[1]
			if not String.IsNilOrEmpty( f176_local7 ) then
				local f176_local8 = f176_local6[2]
				if not String.IsNilOrEmpty( f176_local8 ) then
					local f176_local9 = ATTACHMENT.GetIDByRef( f176_local8 )
					f176_local0[f176_local7] = {
						isLocked = not LOOT.IsUnlockedWithID( f176_arg0, f176_local9 ),
						unlockLevel = PROGRESSION.GetLootUnlockWeaponLevel( f176_arg1, f176_local9 ) + 1
					}
				end
			end
		end
	end
	return f176_local0
end

GUNSMITH.EquipPreservedAttachment = function ( f175_arg0, f175_arg1, f175_arg2, f175_arg3, f175_arg4 )
	local f175_local0 = assert
	local f175_local1
	if f175_arg3 then
		f175_local1 = f175_arg3
	else
		f175_local1 = type( f175_arg3 ) == "table"
	end
	f175_local0( f175_local1 )
	f175_local0 = GUNSMITH.AttachmentSetupDataMap[GUNSMITH.AttachmentSetupType.WEAPON_PART].minIndex
	local f175_local2 = GUNSMITH.AttachmentSetupDataMap[GUNSMITH.AttachmentSetupType.WEAPON_PART].maxIndex
	f175_local1 = GUNSMITH.AttachmentSetupDataMap[GUNSMITH.AttachmentSetupType.ATTACHMENT].minIndex
	local f175_local3 = GUNSMITH.AttachmentSetupDataMap[GUNSMITH.AttachmentSetupType.ATTACHMENT].maxIndex
	local f175_local4 = GUNSMITH.GetCategoryLockDetails( f175_arg0, f175_arg4 )
	local f175_local5 = {}
	for f175_local12, f175_local13 in pairs( f175_arg3 ) do
		local f175_local14 = ATTACHMENT.GetCategory( f175_local13 )
		local f175_local15 = GUNSMITH.IsWeaponPartsAttachment( f175_local14 )
		local f175_local16 = ATTACHMENT.GetBaseName( f175_local13, f175_local14, f175_arg2, f175_arg0 )
		local f175_local9
		if not f175_local4 or not f175_local4[f175_local14] or f175_local4[f175_local14].isLocked then
			f175_local9 = IsPrivateMatch()
		else
			f175_local9 = true
		end
		if f175_local9 then
			if f175_local15 then
				local f175_local10 = f175_local0
				if ATTACHMENT.GetCategory( ATTACHMENT.GetRefFromSetup( f175_arg1.attachmentSetup[f175_local10] ), f175_arg2 ) ~= f175_local14 then
					
				else
					
				end
				if not LUI.StringIsNilOrEmpty( f175_local16 ) then
					table.insert( f175_local5, f175_local13 )
				else
					ATTACHMENT.SetPlayerDataRef( f175_arg1.attachmentSetup[f175_local10], f175_local13 )
					f175_arg1.attachmentSetup[f175_local10].variantID:set( ATTACHMENT.baseVariant )
					goto basicblock_27:
				end
			end
			local f175_local10 = assert
			local f175_local11
			if f175_local1 > f175_local12 or f175_local12 > f175_local3 then
				f175_local11 = false
			else
				f175_local11 = true
			end
			f175_local10( f175_local11, " EquipPreservedAttachment: regular presverted attachment is out of range in attachment setup." )
			if not LUI.StringIsNilOrEmpty( f175_local16 ) then
				table.insert( f175_local5, f175_local13 )
			else
				ATTACHMENT.SetPlayerDataRef( f175_arg1.attachmentSetup[f175_local12], f175_local13 )
				f175_arg1.attachmentSetup[f175_local12].variantID:set( ATTACHMENT.baseVariant )
			end
		end
	end
	return f175_local5
end

GUNSMITH.InitLoadoutBaseWeaponPartsAttachment = function ( f174_arg0 )
	local f174_local0 = LOADOUT.GetLoadoutSquadMember( f174_arg0 )
	for f174_local5, f174_local6 in ddlpairs( f174_local0.loadouts ) do
		for f174_local4 = 0, 1, 1 do
			GUNSMITH.EquipBaseWeaponPartsAttachment( f174_arg0, f174_local6.weaponSetups[f174_local4] )
		end
	end
end

GUNSMITH.GetAttachmentRefsByType = function ( f173_arg0, f173_arg1 )
	local f173_local0 = {}
	local f173_local1 = GUNSMITH.AttachmentSetupTypeMap[f173_arg0]
	local f173_local2 = GUNSMITH.AttachmentSetupDataMap[f173_local1].minIndex
	local f173_local3 = GUNSMITH.AttachmentSetupDataMap[f173_local1].maxIndex
	for f173_local7, f173_local8 in ddlpairs( f173_arg1.attachmentSetup ) do
		local f173_local9 = ATTACHMENT.GetRefFromSetup( f173_local8 )
		if f173_local2 <= f173_local7 and f173_local7 <= f173_local3 and f173_local9 ~= ATTACHMENT.none then
			table.insert( f173_local0, f173_local9 )
		end
	end
	return f173_local0
end

GUNSMITH.GetEquipCounts = function ( f172_arg0, f172_arg1, f172_arg2, f172_arg3 )
	local f172_local0 = 0
	local f172_local1 = 0
	local f172_local2 = 0
	local f172_local3 = 0
	if not f172_arg3 then
		f172_arg3 = {}
	end
	f172_arg3.includeAttachments = true
	f172_arg3.includeCamos = false
	f172_arg3.includeStickers = false
	local f172_local4 = split( WEAPON.GetWeaponModelName( f172_arg0, f172_arg1, f172_arg3 ), "+" )
	local f172_local5 = f172_arg3.isDefault
	local f172_local6 = GL_HACK.GetWeaponMPRef( f172_arg0 )
	for f172_local12, f172_local13 in ipairs( f172_arg2 ) do
		local f172_local10 = f172_local13.ref
		if not f172_local10 then
			f172_local10 = f172_local13
		end
		local f172_local11
		if f172_local10 ~= ATTACHMENT.none and not ATTACHMENT.IsDefaultAttachment( f172_local6, f172_local10 ) then
			f172_local11 = ATTACHMENT.IsSelectableAttachment( f172_local10, f172_local6 )
		else
			f172_local11 = false
		end
		if f172_local11 then
			if GUNSMITH.IsWeaponPartsAttachment( ATTACHMENT.GetCategory( f172_local10 ) ) then
				f172_local2 = f172_local2 + 1
			end
			if ATTACHMENT.MobileIsAfterMarketPart( f172_local10 ) then
				f172_local1 = f172_local1 + 1
			end
			f172_local0 = f172_local0 + 1
			if MatchRules[0x722F56788C744E9]( f172_local10, f172_arg0 ) then
				f172_local3 = f172_local3 + 1
			end
		end
	end
	return {
		attachmentCount = f172_local0,
		afterMarketPartCount = f172_local1,
		weaponPartCount = f172_local2,
		restrictedAttachmentCount = f172_local3
	}
end

GUNSMITH.EnterFiringRange = function ( f171_arg0, f171_arg1, f171_arg2 )
	local f171_local0 = f171_arg2.weaponPlayerData
	local f171_local1 = f171_arg2.loadoutPlayerData
	local f171_local2 = f171_arg2.weaponSlot
	local f171_local3 = f171_arg2.qualifier
	local f171_local4 = {
		currentWeaponTable = WEAPON.GenerateWeaponTable( f171_local0 )
	}
	local f171_local5
	if f171_local2 == WEAPON.PrimarySlot then
		f171_local5 = WEAPON.SecondarySlot
		if not f171_local5 then
		
		else
			f171_local4.secondaryWeaponTable = WEAPON.GenerateWeaponTable( f171_local1.weaponSetups[f171_local5] )
			if 0 < tonumber( f171_local4.currentWeaponTable.variantID ) then
				f171_local4.currentWeaponTable.lootName = WEAPON.GetLootWeaponName( f171_local4.currentWeaponTable.weapon, f171_local4.currentWeaponTable.lootID )
			end
			if 0 < tonumber( f171_local4.secondaryWeaponTable.variantID ) then
				f171_local4.secondaryWeaponTable.lootName = WEAPON.GetLootWeaponName( f171_local4.secondaryWeaponTable.weapon, f171_local4.secondaryWeaponTable.lootID )
			end
			WEAPON.OpenFiringRange( f171_arg1, f171_local4 )
			if f171_local3 == "keyboard" or f171_local3 == "gamepad" then
				Engine[0xC4146BA76D0F982]( CoD.SFX.MouseClick )
			end
		end
	end
	f171_local5 = WEAPON.PrimarySlot
end

GUNSMITH.GetTableWithOnlyEquippedAttachment = function ( f170_arg0, f170_arg1 )
	local f170_local0 = {
		weapon = f170_arg0,
		attachments = {}
	}
	f170_local0.attachments[1] = {}
	f170_local0.attachments[1].ref = f170_arg1.ref
	local f170_local1 = f170_local0.attachments[1]
	local f170_local2 = f170_arg1.variantID
	if not f170_local2 then
		f170_local2 = ATTACHMENT.baseVariant
	end
	f170_local1.variantID = f170_local2
	f170_local0.attachments[1].hasBPTune = f170_arg1.hasBPTune
	f170_local0.attachments[1].tuningData = f170_arg1.tuningData
	for f170_local1 = 2, GUNSMITH.maxCategories, 1 do
		f170_local0.attachments[f170_local1] = {}
		f170_local0.attachments[f170_local1].ref = "none"
		f170_local0.attachments[f170_local1].variantID = -1
	end
	return f170_local0
end

GUNSMITH.GetCurAttachmentRefByCategory = function ( f169_arg0, f169_arg1 )
	local f169_local0 = nil
	for f169_local4, f169_local5 in ipairs( f169_arg1.attachments ) do
		local f169_local6 = ATTACHMENT.GetRef( f169_local5.ref, f169_arg1.weapon )
		if ATTACHMENT.GetCategory( f169_local6 ) == f169_arg0 then
			f169_local0 = f169_local6
			break
		end
	end
	return f169_local0
end

GUNSMITH.GetWeaponsPlayerData = function ( f168_arg0, f168_arg1, f168_arg2 )
	local f168_local0 = LOADOUT.GetFrontendLoadoutWithShowcase( f168_arg0, f168_arg1, f168_arg2 )
	return f168_local0.weaponSetups
end

GUNSMITH.GetWeaponPlayerData = function ( f167_arg0, f167_arg1, f167_arg2, f167_arg3 )
	local f167_local0 = GUNSMITH.GetWeaponsPlayerData( f167_arg0, f167_arg1, f167_arg3 )
	return f167_local0[f167_arg2]
end

GUNSMITH.GetEquippedWeaponTable = function ( f166_arg0, f166_arg1, f166_arg2, f166_arg3 )
	return WEAPON.GenerateWeaponTable( GUNSMITH.GetWeaponPlayerData( f166_arg0, f166_arg1, f166_arg2, f166_arg3 ) )
end

GUNSMITH.GetEquippedWeaponRef = function ( f165_arg0, f165_arg1, f165_arg2 )
	local f165_local0 = GUNSMITH.GetEquippedWeaponTable( f165_arg0, f165_arg1, f165_arg2 )
	return f165_local0.weapon
end

GUNSMITH.GetCurrentEquippedWeaponData = function ( f164_arg0, f164_arg1 )
	if not f164_arg1 then
		f164_arg1 = WEAPON.PrimarySlot
	end
	return GUNSMITH.GetEquippedWeaponTable( f164_arg0, LOADOUT.GetLoadoutIndex( f164_arg0 ), f164_arg1 )
end

GUNSMITH.GetSortedModifiersValuesTables = function ( f161_arg0 )
	local f161_local0 = #f161_arg0
	local f161_local1 = CONDITIONS.IsMobileOrMobileSim()
	local f161_local2 = 0xFC7B718DE97078B
	local f161_local3 = false
	local f161_local4 = false
	local f161_local5 = {}
	local f161_local6 = {}
	if 0 < f161_local0 or not f161_local1 then
		for f161_local7 = 1, f161_local0, 1 do
			local f161_local10 = f161_arg0[f161_local7].name
			local f161_local11 = f161_arg0[f161_local7].value
			if 0 < f161_local11 then
				f161_local3 = true
				table.insert( f161_local5, {
					name = f161_local10,
					value = f161_local11
				} )
			end
			if f161_local11 < 0 then
				f161_local4 = true
				table.insert( f161_local6, {
					name = f161_local10,
					value = f161_local11
				} )
			end
		end
		table.sort( f161_local5, function ( f163_arg0, f163_arg1 )
			return f163_arg1.value < f163_arg0.value
		end )
		table.sort( f161_local6, function ( f162_arg0, f162_arg1 )
			return f162_arg0.value < f162_arg1.value
		end )
	end
	if f161_local1 then
		if not f161_local3 then
			table.insert( f161_local5, {
				value = 1,
				name = f161_local2
			} )
		end
		if not f161_local4 then
			table.insert( f161_local6, {
				value = 4294967295,
				name = f161_local2
			} )
		end
	end
	return f161_local5, f161_local6
end

GUNSMITH.GetSortedModifiersValues = function ( f160_arg0 )
	local f160_local0, f160_local1 = GUNSMITH.GetSortedModifiersValuesTables( f160_arg0 )
	return {
		positiveModifiers = f160_local0,
		negativeModifiers = f160_local1
	}
end

GUNSMITH.GetWeaponDetails = function ( f159_arg0, f159_arg1, f159_arg2 )
	if not f159_arg2 then
		f159_arg2 = {}
	end
	local f159_local0 = WEAPON.GetAmmoData( f159_arg0, f159_arg1 )
	if f159_arg1 then
		if f159_arg1.lootID == LOOT.emptyID then
			f159_arg1.lootID = LOOT.GetItemID( f159_arg1.weapon )
		end
		f159_local0.baseName = WEAPON.GetName( f159_arg1.weapon )
		f159_local0.name = WEAPON.GetLootWeaponNameFromWeaponTable( f159_arg0, f159_arg1 )
	end
	f159_local0.lootID = f159_arg1.lootID
	f159_local0.itemQualityIndex = LOOT.GetItemQualityWithID( LOOT.itemTypes.WEAPON, f159_arg1.lootID )
	f159_local0.isNameAlreadyLocalized = true
	if f159_arg2.showMods ~= false then
		f159_local0.equipCounts = GUNSMITH.GetEquipCounts( f159_arg1.weapon, f159_arg1, f159_arg1.attachments )
		f159_local0.maxModCount = GUNSMITH.maxMods
	end
	if CONDITIONS.IsMobileOrMobileSim() then
		f159_local0.headerTags = {
			{
				name = f159_local0.type
			}
		}
		if f159_arg1.variantID and 0 < f159_arg1.variantID then
			f159_local0.titleIconState = ItemDetailsUtils[0x982E9B9FD9C37B8][0x7F2A8FDB358E5E0]
		end
	end
	return f159_local0
end

GUNSMITH.GetBaseWeaponAttributesDetails = function ( f158_arg0, f158_arg1 )
	local f158_local0 = WEAPON.GetWeaponModelName
	local f158_local1 = f158_arg1.weapon
	local f158_local2 = f158_arg1
	local f158_local3 = {
		includeAttachments = true
	}
	local f158_local4 = f158_arg1.variantID
	if f158_local4 then
		if f158_arg1.variantID > WEAPON.baseVariant then
			f158_local4 = not f158_arg1.isCustom
		else
			f158_local4 = false
		end
	end
	f158_local3.includeBlueprintTune = f158_local4
	local f158_local5 = ClientWeapon[0x75228338D174290]( f158_arg0, f158_local0( f158_local1, f158_local2, f158_local3 ), false, true, true )
	f158_local2 = ClientWeapon[0x75228338D174290]( f158_arg0, WEAPON.GetWeaponModelNameFromRef( f158_arg1.weapon ), false, true, true )
	f158_local3 = nil
	if f158_local5 and f158_local2 then
		f158_local3 = {}
		for f158_local8, f158_local9 in pairs( f158_local5 ) do
			f158_local3[f158_local8] = {
				total = f158_local2[f158_local8],
				weapon = f158_local2[f158_local8],
				attachment = f158_local9 - f158_local2[f158_local8]
			}
		end
	end
	return f158_local3
end

GUNSMITH.GetBaseCompareWeaponAttributesDetails = function ( f157_arg0, f157_arg1, f157_arg2 )
	local f157_local0 = ClientWeapon[0x75228338D174290]( f157_arg0, WEAPON.GetWeaponModelName( f157_arg1.weapon, f157_arg1, {
		includeAttachments = true,
		includeBlueprintTune = true
	} ), false, true, true )
	local f157_local1 = ClientWeapon[0x75228338D174290]( f157_arg0, WEAPON.GetWeaponModelNameFromRef( f157_arg1.weapon ), false, true, false )
	local f157_local2 = nil
	if f157_local0 and f157_local1 then
		f157_local2 = {}
		for f157_local6, f157_local7 in pairs( f157_local0 ) do
			f157_local2[f157_local6] = {
				attachment = 0,
				total = f157_local7,
				weapon = f157_local1[f157_local6]
			}
		end
	end
	return f157_local2
end

GUNSMITH.GetCompareWeaponAttributesDetails = function ( f156_arg0, f156_arg1, f156_arg2, f156_arg3 )
	local f156_local0 = GUNSMITH.GetBaseCompareWeaponAttributesDetails( f156_arg0, f156_arg2, f156_arg3 )
	local f156_local1 = WEAPON.GetWeaponModelName
	local f156_local2 = f156_arg1.weapon
	local f156_local3 = f156_arg1
	local f156_local4 = {
		includeAttachments = true
	}
	local f156_local5
	if not f156_arg1.isBase then
		f156_local5 = not f156_arg1.isCustom
	else
		f156_local5 = false
	end
	f156_local4.includeBlueprintTune = f156_local5
	local f156_local6 = ClientWeapon[0x75228338D174290]( f156_arg0, f156_local1( f156_local2, f156_local3, f156_local4 ), false, true, true )
	for f156_local5, f156_local7 in pairs( f156_local0 ) do
		f156_local7.attachment = f156_local6[f156_local5] - f156_local7.total
	end
	return f156_local0
end

GUNSMITH.GetWeaponStatsDetails = function ( f155_arg0, f155_arg1, f155_arg2 )
	if not f155_arg2 then
		f155_arg2 = {}
	end
	local f155_local0 = f155_arg2.currentWeapon
	local f155_local1 = f155_arg2.curWeaponSetup
	local f155_local2 = f155_arg2.isSetup
	local f155_local3 = {}
	local f155_local4 = WEAPON.GetAmmoData( f155_arg0, f155_arg1 )
	f155_local3.ammoData = f155_local4
	local f155_local5 = nil
	if f155_local0 then
		f155_local3.comparedWeaponName = WEAPON.GetName( f155_local0.weapon )
		if f155_local2 then
			f155_local5 = GUNSMITH.GetBaseCompareWeaponAttributesDetails( f155_arg0, f155_local0, f155_local1 )
		else
			f155_local5 = GUNSMITH.GetCompareWeaponAttributesDetails( f155_arg0, f155_arg1, f155_local0, f155_local1 )
		end
	else
		f155_local5 = GUNSMITH.GetBaseWeaponAttributesDetails( f155_arg0, f155_arg1 )
	end
	f155_local3.weaponAttributes = f155_local5
	local f155_local6 = f155_arg1.lootID
	local f155_local7 = WEAPON.GenerateWeaponTableFromID( f155_arg0, f155_local6 )
	local f155_local8 = nil
	if f155_local7 then
		f155_local8 = WEAPON.GetDismembermentType( f155_local7 )
	end
	local f155_local9 = WEAPON.GetTracerType( f155_local6 )
	local f155_local10 = nil
	if f155_local8 or f155_local9 then
		f155_local10 = {
			dismemberment = f155_local8,
			tracer = f155_local9
		}
	end
	if CONDITIONS.IsMobileOrMobileSim() then
		local f155_local11 = f155_local10 ~= nil
		local f155_local12 = {
			lockExpander = false
		}
		local f155_local13
		if f155_local11 then
			f155_local13 = ItemDetailsUtils.StatsExpandedAnims.WEAPON_EFFECTS
			if not f155_local13 then
			
			else
				f155_local12.expanderType = f155_local13
				f155_local12.isWeaponProgression = f155_arg2.isWeaponProgression or false
				f155_local12.details = {
					isSetup = f155_local2,
					weapon = f155_arg1,
					ammo = f155_local4,
					currentWeapon = f155_local0,
					currentWeaponSetup = f155_local1,
					weaponAttributes = f155_local5,
					weaponEffectsAttributes = f155_local10
				}
				f155_local3.expanderData = f155_local12
			end
		end
		f155_local13 = ItemDetailsUtils.StatsExpandedAnims.DEFAULT
	end
	local f155_local11 = GUNSMITH.GetBrandingMaterialNameFromWeaponTable( f155_local7 )
	local f155_local12
	if not f155_local11 then
		f155_local12 = f155_local11
	else
		f155_local12 = ""
	end
	f155_local3.brandingMaterialName = f155_local12
	return f155_local3
end

GUNSMITH.GetStatsExpanderWeaponDetails = function ( f154_arg0, f154_arg1 )
	local f154_local0 = f154_arg1.weaponTable
	local f154_local1 = nil
	if f154_arg1.addModifiers then
		f154_local1 = ATTACHMENT.GetModifiersValuesFromAttachmentData( f154_arg0, f154_arg1.attachmentData, f154_local0, f154_arg1.currentAttachmentTable )
		if CONDITIONS.IsMobileOrMobileSim() then
			f154_local1 = GUNSMITH.GetSortedModifiersValues( f154_local1 )
		end
	end
	local f154_local2 = f154_arg1.ammoTable
	return {
		lootID = f154_local0.lootID,
		statsDetails = {
			ammoData = f154_local2,
			expanderData = {
				lockExpander = true,
				expanded = true,
				expanderType = ItemDetailsUtils.StatsExpandedAnims.MODIFIERS,
				ammoData = f154_local2,
				details = {
					weapon = f154_local0,
					ammo = f154_local2,
					weaponAttributes = f154_arg1.weaponAttributes,
					modifiersValues = f154_local1
				}
			}
		}
	}
end

GUNSMITH.GetStatsDetailsForWeaponAttributes = function ( f153_arg0, f153_arg1, f153_arg2 )
	local f153_local0 = WEAPON.GetAmmoData( f153_arg0, f153_arg1 )
	return {
		ammoData = f153_local0,
		expanderData = {
			details = {
				ammo = f153_local0,
				weaponAttributes = f153_arg2
			}
		}
	}
end

GUNSMITH.GetWeaponArmoryDetails = function ( f151_arg0, f151_arg1, f151_arg2 )
	local f151_local0 = {}
	local f151_local1 = CONDITIONS.IsMobileOrMobileSim()
	f151_local0.type = Engine[0xED84C33EC5F01EA]( WEAPON.GetWeaponClassName( f151_arg1.weapon ) )
	if f151_local1 then
		f151_local0.headerTags = {
			{
				name = f151_local0.type
			}
		}
	end
	f151_local0.name = f151_arg1.header
	f151_local0.isNameAlreadyLocalized = true
	if not f151_local1 then
		f151_local0.desc = f151_arg1.desc
		f151_local0.isDescAlreadyLocalized = true
	end
	f151_local0.lootID = f151_arg1.lootID
	f151_local0.itemQualityIndex = LOOT.GetItemQualityWithID( LOOT.itemTypes.WEAPON, f151_arg1.lootID )
	local f151_local2
	if f151_arg1.variantID and 0 < f151_arg1.variantID then
		f151_local2 = false
	else
		f151_local2 = true
	end
	f151_local0.showDesc = f151_local2
	f151_local2 = nil
	if not (not f151_arg1.variantID or 0 >= f151_arg1.variantID) or f151_arg1.isCustom and GUNSMITH.AllowSaveCustomWeapon() then
		f151_local2 = WEAPON.GetName( f151_arg1.weapon )
	end
	f151_local0.baseName = f151_local2
	local f151_local3 = nil
	if f151_arg1.isBase then
		f151_local3 = GUNSMITH[0x5BBD3303AAAC2C9][0xA7CE19BAA54C278]
	elseif f151_arg1.isCustom and GUNSMITH.AllowSaveCustomWeapon() then
		f151_local3 = GUNSMITH[0x5BBD3303AAAC2C9][0x862DF34652CF74E]
	elseif f151_arg1.variantID and 0 < f151_arg1.variantID then
		f151_local3 = GUNSMITH[0x5BBD3303AAAC2C9][0x7F2A8FDB358E5E0]
		f151_local0.titleIconState = ItemDetailsUtils[0x982E9B9FD9C37B8][0x7F2A8FDB358E5E0]
	end
	f151_local0.weaponType = f151_local3
	f151_local0.tacticalBuild = WEAPON.GetWeaponBlueprintTacticalBuildDataByLootID( f151_arg0, f151_arg1.lootID )
	local f151_local4 = WEAPON.GenerateWeaponTableFromID( f151_arg0, f151_arg1.lootID )
	local f151_local5
	if f151_local4 then
		f151_local5 = ATTACHMENT.GetReceiverBlueprintFromWeaponTable( f151_local4 )
		if not f151_local5 then
		
		else
			local f151_local6
			if f151_local5 then
				f151_local6 = f151_local5
			else
				f151_local6 = f151_local5[0x2EAB902F6509817]
			end
			f151_local0.brandingMaterialName = GUNSMITH.GetBrandingMaterialName( f151_local6 )
			local f151_local7 = nil
			f151_local7 = function ( f152_arg0, f152_arg1 )
				local f152_local0 = GUNSMITH.GetProgressionUnlockWeaponAndLevel( f152_arg0 )
				if f152_local0 and tonumber( f152_local0.unlockLevel ) ~= -1 then
					table.insert( f152_arg1, 1, f152_local0 )
					f151_arg0( f152_local0.ref, f152_arg1 )
				end
			end
			
			local f151_local8 = nil
			local f151_local9 = ""
			local f151_local10 = false
			local f151_local11 = false
			local f151_local12 = f151_arg1.isBase
			if not f151_local12 then
				f151_local12 = f151_arg1.isBase == nil
			end
			if f151_local12 and (not f151_arg1.isUnlocked or f151_arg1.isBaseUnlocked == false) then
				f151_local8 = StringTable[0x2DCF0973239E909]( CSV.gunChallenges.file, CSV.gunChallenges.cols.loot, f151_arg1.lootID, CSV.gunChallenges.cols.id )
				local f151_local13 = GUNSMITH.GetProgressionUnlockWeaponAndLevel( f151_arg1.weapon )
				local f151_local14
				if f151_local13 then
					f151_local14 = tonumber( f151_local13.unlockLevel )
					if not f151_local14 then
					
					else
						local f151_local15 = {}
						f151_local7( f151_arg1.weapon, f151_local15 )
						if not LUI.StringIsNilOrEmpty( f151_local8 ) then
							local f151_local16 = StringTable[0x2DCF0973239E909]( CSV.gunChallenges.file, CSV.gunChallenges.cols.loot, f151_arg1.lootID, CSV.gunChallenges.cols.challenge2Desc )
							if not LUI.StringIsNilOrEmpty( f151_local16 ) then
								if f151_local1 then
									f151_local9 = Engine[0xED84C33EC5F01EA]( f151_local16 )
								elseif WEAPON.IsWeaponWithBattlePassChallenge( f151_arg1.lootID ) then
									if Challenge.IsChallengeActive( f151_arg0, f151_local8 ) then
										f151_local11 = true
										f151_local10 = true
									else
										f151_local9 = Engine[0xED84C33EC5F01EA]( f151_local16 )
									end
								else
									f151_local10 = true
								end
							else
								f151_local9 = Engine[0xED84C33EC5F01EA]( StringTable[0x2DCF0973239E909]( CSV.gunChallenges.file, CSV.gunChallenges.cols.loot, f151_arg1.lootID, CSV.gunChallenges.cols.desc ), tonumber( StringTable[0x2DCF0973239E909]( CSV.gunChallenges.file, CSV.gunChallenges.cols.id, f151_local8, CSV.gunChallenges.cols.amount ) ) )
							end
						elseif 1 < #f151_local15 then
							f151_local0.isDoubleWeaponLock = true
							f151_local0.weaponDataNeededToUnlock = f151_local15
							if f151_local1 then
								f151_local0.unlockConditions = GUNSMITH.GetWeaponMultiUnlockConditions( f151_arg0, f151_local15 )
							end
						elseif f151_local14 and 0 < f151_local14 then
							local f151_local16 = PROGRESSION.GetUnlockWeaponAndLevelText( f151_arg1.weapon )
							if not LUI.StringIsNilOrEmpty( f151_local16 ) then
								f151_local9 = f151_local16
							end
						else
							f151_local9 = PROGRESSION.GetUnlockText( LOOT.itemTypes.WEAPON, f151_arg1.weapon )
						end
						if not LOOT.IsItemUnlockableForCurrentProjectFromLootId( LOOT.itemTypes.WEAPON, f151_arg1.lootID ) and f151_local1 then
							f151_local9 = Engine[0xED84C33EC5F01EA]( 0x5FBAAEEB2035C66 )
						end
					end
				end
				f151_local14 = -1
			elseif f151_arg1.isAlreadyEquipped then
				f151_local9 = Engine[0xED84C33EC5F01EA]( 0xCB5133149EB6E5E, f151_arg1.weaponSlot and 0xEC8F813D58DEE57 or 0xCB74A303611CCB3 )
			end
			f151_local0.unlockCriteria = f151_local9
			f151_local0.isUnlocked = f151_arg1.isUnlocked
			f151_local0.challengeId = f151_local8
			f151_local0.isChallengeLocked = f151_local10
			f151_local0.dontUseSecondChallenge = f151_local11
			f151_local0.weaponCost = WEAPON.GetWeaponCost( f151_arg1.weapon, ATTACHMENT.GetAttachmentRefsFromAttachmentsData( f151_arg1.attachments ) )
			f151_local0.isContraband = f151_arg1.showContrabandWarning
			local f151_local15
			if f151_arg1.isUnlocked then
				f151_local15 = f151_arg1.isAlreadyEquipped
				if not f151_local15 then
					if f151_local12 then
						f151_local15 = f151_local12
					elseif f151_arg1.isBaseUnlocked ~= false then
						f151_local15 = false
					else
						f151_local15 = true
					end
				end
			else
				f151_local15 = true
			end
			local f151_local16
			if f151_local1 then
				f151_local16 = f0_local0
				if not f151_local16 then
				
				else
					local f151_local17
					if f151_local15 then
						f151_local17 = f0_local0
						if not f151_local17 then
						
						else
							f151_local0.showLocked = f151_local15
							f151_local0.descMaxLines = f151_local17
							f151_local0.numBlueprints = f151_arg1.numBlueprints
							f151_local0.savedMods = f151_arg1.savedMods
							f151_local0.weaponRef = f151_arg1.weapon
							f151_local0.statsDetails = GUNSMITH.GetWeaponStatsDetails( f151_arg0, f151_arg1, f151_arg2 )
							local f151_local18 = f151_arg1.variantID
							if f151_local18 then
								if 0 >= f151_arg1.variantID or f151_arg1.isBlueprintIntact == false then
									f151_local18 = false
								else
									f151_local18 = true
								end
							end
							f151_local0.isBlueprintIntact = f151_local18
							f151_local18 = f151_local0.isBlueprintIntact
							if f151_local18 then
								f151_local18 = GUNSMITH.DoesWeaponTableContainProtunedAttachment( f151_arg1 )
							end
							f151_local0.isBlueprintProtuned = f151_local18
							return f151_local0
						end
					end
					f151_local17 = f151_local16
				end
			end
			f151_local16 = f0_local0
		end
	end
	f151_local5 = nil
end

GUNSMITH.GetWeaponMultiUnlockConditions = function ( f150_arg0, f150_arg1 )
	local f150_local0 = {}
	for f150_local4 in ipairs( f150_arg1 ) do
		local f150_local5 = f150_arg1[f150_local4]
		f150_local0["condition" .. tostring( f150_local4 )] = {
			unlockProgressionText = nil,
			unlockCriteria = Engine[0xED84C33EC5F01EA]( 0x71D13D9BEC47528, WEAPON.GetName( f150_local5.ref ), f150_local5.unlockLevel + 1 ),
			isCompleted = tonumber( f150_local5.unlockLevel ) <= PROGRESSION.GetWeaponLevel( f150_arg0, f150_local5.ref )
		}
	end
	f150_local0.count = #f150_arg1
	return f150_local0
end

GUNSMITH.GetCurrentWeaponDetails = function ( f149_arg0, f149_arg1 )
	return GUNSMITH.GetWeaponDetails( f149_arg0, GUNSMITH.GetCurrentEquippedWeaponData( f149_arg0, f149_arg1 ) )
end

GUNSMITH.GetWeaponArmoryDetailsForRef = function ( f148_arg0, f148_arg1, f148_arg2, f148_arg3 )
	local f148_local0 = GUNSMITH.GetCurrentEquippedWeaponData( f148_arg0, f148_arg1 )
	local f148_local1, f148_local2 = nil
	if f148_local0.weapon == f148_arg2 then
		f148_local1 = f148_local0.weapon
		f148_local2 = f148_local0.lootID
	else
		f148_local1 = f148_arg2
		f148_local2 = WEAPON.GetBlueprintBaseID( f148_arg2 )
	end
	return GUNSMITH.GetWeaponArmoryDetails( f148_arg0, WEAPON.GetModificationDetails( f148_arg0, WEAPON.GetModification( f148_arg0, f148_local1, f148_local2 ) ), f148_arg3 )
end

GUNSMITH.SetupGunsmithMenu = function ( f147_arg0, f147_arg1, f147_arg2 )
	if CONDITIONS.IsMobileOrMobileSim() then
		f147_arg2.loadoutIndex = LOADOUT.GetLoadoutIndex( f147_arg1 )
		f147_arg2.weaponSlot = WEAPON.GetWeaponSlot( f147_arg1 )
		f147_arg0.detailsDataSource = LUI.SetupDataSourceUpdate( f147_arg0, f147_arg1, "UpdateDetailsDataSources", "alwaysLoaded.menu.gunsmith.details", GUNSMITH.GetCurrentWeaponDetails( f147_arg1, f147_arg2.weaponSlot ), ItemDetailsUtils.FormatDetailsDataTable, {
			rootField = "detailsDataSource",
			listHandlersData = ItemDetailsUtils.GetHeaderTagsDataSourcesListHandlers()
		} )
		ItemDetailsUtils.MobileSetMenuItemDetailsType( f147_arg0, ItemDetailsUtils[0x5ABE5FD362B0038][0x371B88BD6DADD70] )
	else
		LOADOUT.SetLoadoutIndex( f147_arg1, f147_arg2.loadoutIndex )
	end
end

GUNSMITH.SetupWeaponArmoryMenu = function ( f146_arg0, f146_arg1, f146_arg2 )
	if CONDITIONS.IsMobileOrMobileSim() then
		f146_arg2.loadoutIndex = LOADOUT.GetLoadoutIndex( f146_arg1 )
		f146_arg2.weaponSlot = WEAPON.GetWeaponSlot( f146_arg1 )
		f146_arg2.weaponRef = f146_arg2.query.weaponRef
		f146_arg0.detailsDataSource = LUI.SetupDataSourceUpdate( f146_arg0, f146_arg1, "UpdateDetailsDataSources", "alwaysLoaded.menu.armory.details", GUNSMITH.GetWeaponArmoryDetailsForRef( f146_arg1, f146_arg2.weaponSlot, f146_arg2.weaponRef ), ItemDetailsUtils.FormatDetailsDataTable, {
			rootField = "detailsDataSource",
			listHandlersData = ItemDetailsUtils.GetHeaderTagsDataSourcesListHandlers()
		} )
		ItemDetailsUtils.MobileSetMenuItemDetailsType( f146_arg0, ItemDetailsUtils[0x5ABE5FD362B0038][0x1753B18CD62F5B7] )
	else
		LOADOUT.SetLoadoutIndex( f146_arg1, f146_arg2.loadoutIndex )
	end
end

GUNSMITH.MobileGetWeaponAttachmentDetails = function ( f145_arg0, f145_arg1 )
	local f145_local0 = WEAPON.GenerateWeaponTableFromRef( f145_arg1.weaponReference )
	if f145_arg1.category ~= ATTACHMENT.receiverCategory then
		f145_local0 = ATTACHMENT.GetTableWithCurrentAttachment( f145_local0, nil, f145_arg1.blockedCategorySlot, f145_arg1.ref, 0 )
	end
	return {
		isNameAlreadyLocalized = true,
		isDescAlreadyLocalized = true,
		type = Engine[0xED84C33EC5F01EA]( f145_arg1.categoryName or 0xEC05F4D03271416 ),
		name = f145_arg1.name and Engine[0xED84C33EC5F01EA]( f145_arg1.name ) or "",
		desc = f145_arg1.desc and Engine[0xED84C33EC5F01EA]( f145_arg1.desc ) or "",
		isUnlocked = f145_arg1.unlocked,
		unlockCriteria = PROGRESSION.GetUnlockAttachmentAndLevelText( f145_local0.weapon, f145_arg1.unlockLevel ),
		lootID = ATTACHMENT.GetLootIDForRef( f145_arg1.ref ),
		compareDetails = ATTACHMENT.GetAttachmentCompareDetails( f145_arg0, f145_arg1, f145_local0 ),
		itemQualityIndex = f145_arg1.itemQualityIndex
	}
end

GUNSMITH.MobileSetupWeaponProgressionMenu = function ( f144_arg0, f144_arg1, f144_arg2 )
	f144_arg2.loadoutIndex = LOADOUT.GetLoadoutIndex( f144_arg1 )
	f144_arg2.weaponSlot = WEAPON.GetWeaponSlot( f144_arg1 )
	f144_arg0.detailsDataSource = LUI.SetupDataSourceUpdate( f144_arg0, f144_arg1, "UpdateDetailsDataSources", "alwaysLoaded.menu.weaponProgression.details", GUNSMITH.GetWeaponArmoryDetailsForRef( f144_arg1, f144_arg2.weaponSlot, GUNSMITH.GetEquippedWeaponRef( f144_arg1, f144_arg2.loadoutIndex, f144_arg2.weaponSlot ), {
		isWeaponProgression = true
	} ), ItemDetailsUtils.FormatDetailsDataTable, {
		rootField = "detailsDataSource",
		listHandlersData = Table.Merge( ItemDetailsUtils.GetHeaderTagsDataSourcesListHandlers(), ItemDetailsUtils.GetModifiersValuesDataSourcesListHandlersData() )
	} )
	ItemDetailsUtils.MobileSetMenuItemDetailsType( f144_arg0, ItemDetailsUtils[0x5ABE5FD362B0038][0xA9B8733591D10E8] )
end

GUNSMITH.SetupWeaponData = function ( f143_arg0, f143_arg1, f143_arg2, f143_arg3 )
	f143_arg0._loadoutPlayerData = LOADOUT.GetFrontendLoadoutWithShowcase( f143_arg1, LOADOUT.GetLoadoutIndex( f143_arg1 ), f143_arg3 )
	f143_arg0._weaponPlayerData = f143_arg0._loadoutPlayerData.weaponSetups[f143_arg2]
	f143_arg0._weaponTable = WEAPON.GenerateWeaponTable( f143_arg0._weaponPlayerData )
	f143_arg0._weaponRef = f143_arg0._weaponTable.weapon
end

GUNSMITH.SetupWeaponModel = function ( f142_arg0, f142_arg1 )
	if CONDITIONS.IsGLGunsmithEnabled() then
		if f142_arg0._weaponModel == nil then
			f142_arg0._weaponModel = WEAPON.GetWeaponModel( f142_arg1, FrontEndScene.ClientWeapons.Preview, CSV.weaponOffsets.previewFile )
		end
		WEAPON.LoadAndSetModel( f142_arg1, f142_arg0._weaponModel, f142_arg0._weaponTable )
	end
end

GUNSMITH.SetupWeaponAttributes = function ( f141_arg0, f141_arg1, f141_arg2 )
	local f141_local0 = ClientWeapon[0x75228338D174290]( f141_arg0, WEAPON.GetWeaponModelName( f141_arg1.weapon, f141_arg1, {
		includeAttachments = true,
		includeBlueprintTune = true
	} ), false, true, true )
	local f141_local1 = ClientWeapon[0x75228338D174290]( f141_arg0, Engine[0xD9887C00CF2B985]( GL_HACK.GetWeaponMPRef( f141_arg1.weapon ) ), false, true, false )
	local f141_local2 = {}
	if f141_local0 and f141_local1 then
		for f141_local6, f141_local7 in pairs( f141_local0 ) do
			f141_local2[f141_local6] = {
				total = f141_local1[f141_local6],
				weapon = f141_local1[f141_local6],
				attachment = f141_local7 - f141_local1[f141_local6]
			}
		end
	end
	return f141_local2
end

GUNSMITH.MobileOpenGunsmith = function ( f140_arg0, f140_arg1, f140_arg2 )
	if not Dvar[0x9E5BE3B4BBA4E0E]( 0x4F74CEB67644978 ) then
		return 
	else
		URI.QueueURI( "./MobileGunsmithTabsMenu" .. "?loadoutIndex=" .. f140_arg1 .. "&weaponSlot=" .. f140_arg2, f140_arg0 )
	end
end

GUNSMITH.SetupDefaultFocus = function ( f139_arg0, f139_arg1 )
	f139_arg0:dispatchEventToParent( {
		unlockLevel = 0,
		name = "progression_button_over",
		isOverview = true,
		weaponRef = f139_arg1
	} )
	local f139_local0 = GUNSMITH.FindButtonForWeaponRef( f139_arg0, f139_arg1 )
	if f139_local0 then
		f139_local0:processEvent( {
			name = "gain_focus"
		} )
		return true
	else
		
	end
end

GUNSMITH.FindButtonForWeaponRef = function ( f138_arg0, f138_arg1 )
	if f138_arg0._firstButton and f138_arg0._firstButton.weaponRef == f138_arg1 then
		return f138_arg0._firstButton
	end
	for f138_local3, f138_local4 in ipairs( f138_arg0._upButtons ) do
		if f138_local4.weaponRef == f138_arg1 then
			return f138_local4
		end
	end
	for f138_local3, f138_local4 in ipairs( f138_arg0._downButtons ) do
		if f138_local4.weaponRef == f138_arg1 then
			return f138_local4
		end
	end
end

GUNSMITH.MobileOpenWeaponStatsPopup = function ( f137_arg0, f137_arg1, f137_arg2 )
	local f137_local0 = f137_arg0._loadoutPlayerData
	local f137_local1 = f137_arg0._weaponPlayerData
	local f137_local2 = f137_arg0._weaponTable
	if not f137_local2 then
		if not f137_local0 then
			f137_local0 = LOADOUT.GetFrontendLoadoutWithShowcase( f137_arg1, f137_arg0._loadoutIndex, f137_arg0._forShowcase )
		end
		if not f137_local1 then
			f137_local1 = f137_local0.weaponSetups[f137_arg0._weaponSlot]
		end
		f137_local2 = WEAPON.GenerateWeaponTable( f137_local1 )
	end
	local f137_local3 = f137_arg0._curAmmoDataTable
	if not f137_local3 then
		f137_local3 = WEAPON.GetAmmoData( f137_arg1, f137_local2 )
	end
	local f137_local4 = f137_arg0._weaponAttributes
	if not f137_local4 then
		f137_local4 = GUNSMITH.SetupWeaponAttributes( f137_arg1, f137_local2, f137_local1 )
	end
	local f137_local5 = {
		weaponTable = f137_local2,
		ammoTable = f137_local3,
		weaponAttributes = f137_local4
	}
	if f137_arg2 then
		f137_local5.addModifiers = true
		f137_local5.attachmentData = f137_arg0._focusedAttachmentData
		f137_local5.currentAttachmentTable = f137_arg0._isEquippedTable or f137_arg0._currentTable
	end
	LUI.FlowManager.RequestPopupMenu( nil, "MobileWeaponStatsPopup", false, f137_arg1, false, f137_local5, nil, true, true )
end

GUNSMITH.MobileGunsmithTuneAttachment = function ( f136_arg0, f136_arg1 )
	LUI.FlowManager.RequestAddMenu( GUNSMITH.GetTuningMenuRef(), true, f136_arg1, false, {
		weaponPlayerData = f136_arg0._weaponPlayerData,
		loadoutPlayerData = f136_arg0._loadoutPlayerData,
		weaponSlot = f136_arg0._weaponSlot,
		category = f136_arg0._category,
		weaponTable = f136_arg0._weaponTable,
		weaponModel = f136_arg0._weaponModel
	}, true )
end

GUNSMITH.RemoveAttachments = function ( f135_arg0 )
	LUI.FlowManager.RequestPopupMenu( nil, "remove_all_attachments_popup", true, f135_arg0.controller, false )
end

GUNSMITH.MobileGetFilteredEquipIndicatorTable = function ( f134_arg0 )
	local f134_local0 = {}
	for f134_local4, f134_local5 in ipairs( f134_arg0 ) do
		if f134_local5.ref and ((f134_local5.compareState == GUNSMITH.WEAPON_PART_COMPARE_STATE.REMOVE) or f134_local5.compareState == GUNSMITH.WEAPON_PART_COMPARE_STATE.SWAP) then
			f134_local0[#f134_local0 + 1] = f134_local5
		end
	end
	return f134_local0
end

GUNSMITH.GetUsedCategories = function ( f133_arg0, f133_arg1, f133_arg2 )
	local f133_local0 = {}
	for f133_local4, f133_local5 in ipairs( f133_arg0 ) do
		if f133_arg1[f133_local5] and (0 < #f133_arg1[f133_local5] or f133_arg2) then
			table.insert( f133_local0, f133_local5 )
		end
	end
	return f133_local0
end

GUNSMITH.GetWeaponPlatformProgressionFile = function ( f132_arg0 )
	local f132_local0 = StringTable[0x2DCF0973239E909]( CSV.receiverTable.file, CSV.receiverTable.cols.weaponRef, f132_arg0, CSV.receiverTable.cols.platform )
	if not String.IsNilOrEmpty( f132_local0 ) then
		return CSV.platformProgressionTable.GetFile( f132_local0 )
	else
		return nil
	end
end

GUNSMITH.IsWeaponProgressionAvailable = function ( f131_arg0 )
	local f131_local0 = GUNSMITH.GetWeaponPlatformProgressionFile( f131_arg0 )
	local f131_local1
	if not String.IsNilOrEmpty( f131_local0 ) then
		f131_local1 = StringTable[0x77153CA7EB211DF]( f131_local0 )
	else
		f131_local1 = false
	end
	return f131_local1
end

GUNSMITH.SetupCustomizationButton = function ( f130_arg0, f130_arg1, f130_arg2, f130_arg3, f130_arg4 )
	if f130_arg3 then
		f130_arg0:SetEquipped( false )
		local f130_local0 = {
			removeTextBacker = true,
			hasEmptyState = true,
			buttonSize = "Small",
			imageSize = f130_arg4,
			primaryActionText = Engine[0xED84C33EC5F01EA]( 0x582A97E6B28D01C ),
			showCategoryStack = f130_arg1.isCategory
		}
		if not CONDITIONS.IsMobileOrMobileSim() then
			f130_local0.buttonData = {
				image = 0xEF328481BC70E7D
			}
		end
		f130_arg0:SetupButton( f130_local0 )
	else
		local f130_local0 = {
			removeTextBacker = true,
			hasEmptyState = true,
			buttonData = {
				image = f130_arg1.image,
				header = f130_arg1.name,
				subHeader = f130_arg1.subHeader
			},
			imageSize = f130_arg4,
			localizeHeader = f130_arg1.localizeHeader,
			localizeSubHeader = f130_arg1.localizeSubHeader,
			showCategoryStack = f130_arg1.isCategory
		}
		if not CONDITIONS.IsMobileOrMobileSim() then
			local f130_local1
			if f130_arg3 then
				f130_local1 = Engine[0xED84C33EC5F01EA]( 0x582A97E6B28D01C )
				if not f130_local1 then
				
				else
					f130_local0.primaryActionText = f130_local1
					f130_arg0:SetPrimaryPromptText( 0xCA07A93FADF9E95 )
				end
			end
			f130_local1 = Engine[0xED84C33EC5F01EA]( 0x7D9DC9E3291E103 )
		end
		f130_arg0:SetupButton( f130_local0 )
		f130_arg0:SetEquipped( f130_arg2 )
	end
	f130_arg0:SetNegative( f130_arg3 )
	f130_arg0:SetEmpty( false )
end

GUNSMITH.FocusGunPart = function ( f129_arg0, f129_arg1, f129_arg2 )
	if f129_arg2 == "extra" then
		return 
	end
	local f129_local0 = ClientWeapon[0x5DD69014A9C290]( FrontEndScene.ClientWeapons.Preview )
	local f129_local1 = ""
	local f129_local2 = ""
	if f129_arg2 == ATTACHMENT.perkCategory or perk == ATTACHMENT.boltCategory then
		f129_local1 = "ammo_display_origin"
		local f129_local3 = CLIENT_MODEL.GetClientModelIndex( CLIENT_MODEL.coreMPModels.AMMO_DISPLAY )
		if f129_local3 then
			local f129_local4 = ClientModel[0x9088CC2C1E6A1E9]( f129_local3, CLIENT_MODEL.coreMPModels.GUN_VISE_BASE.tagOrigin )
			local f129_local5 = ClientModel[0x7FE4C5AFE1F4377]( f129_local3 )
			f129_local2 = "attach_zoom," .. f129_arg2 .. "," .. f129_local1 .. "," .. f129_local4.xPosition .. "," .. f129_local4.yPosition .. "," .. f129_local4.zPosition .. "," .. 0 .. "," .. f129_local5.yAngle .. "," .. f129_local5.zAngle
		end
	else
		f129_local1 = StringTable[0x2DCF0973239E909]( CSV.attachmentCategories.file, CSV.attachmentCategories.cols.ref, f129_arg2, CSV.attachmentCategories.cols.bone )
		local f129_local3 = Engine[0xC3B7925CCAC9430]( f129_arg1, f129_local0, f129_local1 )
		f129_local2 = "attach_zoom," .. f129_arg2 .. "," .. f129_local1 .. "," .. f129_local3.xPosition .. "," .. f129_local3.yPosition .. "," .. f129_local3.zPosition .. "," .. f129_local3.xAngle .. "," .. f129_local3.yAngle .. "," .. f129_local3.zAngle
	end
	Engine[0x6055C55456F05DF]( f129_local2, 1 )
end

GUNSMITH.AddTouchCustomizationButtonEventHandlers = function ( f126_arg0, f126_arg1, f126_arg2, f126_arg3 )
	f126_arg1:addEventHandler( "button_action", function ( f128_arg0, f128_arg1 )
		f126_arg0( f126_arg0, f128_arg0 )
	end )
	local f126_local0 = function ( f127_arg0, f127_arg1 )
		f126_arg0( f126_arg0, f127_arg0 )
	end
	
	f126_arg1:addEventHandler( "button_over_active", f126_local0 )
	f126_arg1:addEventHandler( "button_active", f126_local0 )
	f126_arg1:addEventHandler( "button_over_disable_active", f126_local0 )
	f126_arg1:addEventHandler( "button_disable_active", f126_local0 )
end

GUNSMITH.IsTuningUnlocked = function ( f125_arg0, f125_arg1 )
	return LOOT.IsUnlockedWithID( f125_arg1, ATTACHMENT.GetIDByRef( f125_arg0 .. "_tuning" ) )
end

GUNSMITH.WasInWeaponPreviewScene = function ()
	return Dvar[0x9E5BE3B4BBA4E0E]( 0x8315885BC8A2DD ) == true
end

GUNSMITH.WasInGunsmithScene = function ()
	return Dvar[0x9E5BE3B4BBA4E0E]( 0xC3477D65BD1203F ) == true
end

GUNSMITH.SetAreInWeaponPreviewScene = function ( f122_arg0 )
	Dvar[0x8EA06EEDB58D872]( 0x8315885BC8A2DD, f122_arg0 )
end

GUNSMITH.SetAreInGunsmithScene = function ( f121_arg0 )
	Dvar[0x8EA06EEDB58D872]( 0xC3477D65BD1203F, f121_arg0 )
end

GUNSMITH.InitGunsmithWeaponOffsetDataSources = function ()
	if DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets == nil then
		DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets = {}
		DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData = LUI.DataSourceInGlobalModel.new( "frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData" )
		DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.xOffset = LUI.DataSourceInGlobalModel.new( "frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.xOffset" )
		DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.yOffset = LUI.DataSourceInGlobalModel.new( "frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.yOffset" )
		DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.zOffset = LUI.DataSourceInGlobalModel.new( "frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.zOffset" )
		DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.tagDataString = LUI.DataSourceInGlobalModel.new( "frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.tagDataString" )
	end
end

GUNSMITH.SetGunsmithWeaponOffset = function ( f119_arg0, f119_arg1 )
	GUNSMITH.InitGunsmithWeaponOffsetDataSources()
	if f119_arg1 == nil then
		f119_arg1 = 0
	end
	ClientWeapon[0x8B8A4E0355DF0C0]( FrontEndScene.ClientWeapons.Preview, DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.xOffset:GetValue( f119_arg0 ) or 0, DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.yOffset:GetValue( f119_arg0 ) or 0, (DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.zOffset:GetValue( f119_arg0 ) or 0) + f119_arg1 )
end

GUNSMITH.ResetGunsmithWeaponXYOffset = function ( f118_arg0 )
	ClientWeapon[0x8B8A4E0355DF0C0]( FrontEndScene.ClientWeapons.Preview, 0, 0, DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.zOffset:GetValue( f118_arg0 ) )
end

GUNSMITH.SetGunsmithCameraPosition = function ( f117_arg0 )
	GUNSMITH.InitGunsmithWeaponOffsetDataSources()
	local f117_local0 = DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.tagDataString:GetValue( f117_arg0 )
	if f117_local0 then
		Engine[0x6055C55456F05DF]( f117_local0, 1 )
	end
end

GUNSMITH.SetWeaponPreviewCameraPosition = function ( f116_arg0, f116_arg1, f116_arg2 )
	if not f116_arg1 then
		f116_arg1 = GUNSMITH.defaultTag
	end
	if not f116_arg2 then
		f116_arg2 = {}
	end
	local f116_local0 = Engine[0xC3B7925CCAC9430]( f116_arg0, ClientWeapon[0x5DD69014A9C290]( FrontEndScene.ClientWeapons.Preview ), f116_arg1 )
	local f116_local1 = {
		z = 0,
		x = 0,
		y = 0
	}
	if f116_arg2.category == ATTACHMENT.stickerCategory then
		if f116_arg2.weaponClass == WEAPON.SHOTGUNClass then
			f116_arg1 = "tag_sticker_shotgun"
		else
			f116_arg1 = "tag_sticker"
		end
	end
	if GL_HACK.IsDoomGunscreenOffsetRequired( f116_arg2.weaponTable ) then
		if CONDITIONS.IsMenuInStack( STORE.GetStorePreviewMenuRef() ) then
			f116_local1.x = GL_HACK.DOOM_GUN_SCREEN_OFFSET.X
			f116_local1.y = GL_HACK.DOOM_GUN_SCREEN_OFFSET.Y
			f116_local1.z = GL_HACK.DOOM_GUN_SCREEN_OFFSET.Z
		else
			f116_local1 = GL_HACK.GetDoomGunCameraOffsetForCategory( f116_arg2.category )
		end
	end
	if f116_arg2.weaponTable and GL_HACK.IsDoomChainsawBlueprintFromLootID( f116_arg2.weaponTable.lootID ) and f116_arg2.category == ATTACHMENT.camoCategory then
		f116_local1.x = GL_HACK.DOOM_CHAINSAW_CAMERA_OFFSETS.XOFFSET
		f116_local1.y = GL_HACK.DOOM_CHAINSAW_CAMERA_OFFSETS.YOFFSET
		f116_local1.z = GL_HACK.DOOM_CHAINSAW_CAMERA_OFFSETS.ZOFFSET
	end
	Engine[0x6055C55456F05DF]( "weapon_preview,receiver," .. f116_arg1 .. "," .. f116_local0.xPosition + f116_local1.x .. "," .. f116_local0.yPosition + f116_local1.y .. "," .. f116_local0.zPosition + f116_local1.z .. "," .. f116_local0.xAngle .. "," .. f116_local0.yAngle .. "," .. f116_local0.zAngle .. "," .. (f116_arg2.weaponClass or "") .. "," .. (f116_arg2.weaponName or ""), 1 )
end

GUNSMITH.GetPlatformProgressionBaseWeapon = function ( f115_arg0 )
	local f115_local0 = GUNSMITH.GetWeaponPlatformProgressionFile( f115_arg0 )
	if f115_local0 then
		return StringTable[0x2077452C28AB2FC]( f115_local0, 0, CSV.platformProgressionTable.cols.ref )
	else
		return nil
	end
end

local f0_local5 = function ( f114_arg0, f114_arg1 )
	local f114_local0, f114_local1 = nil
	if tonumber( StringTable[0x2DCF0973239E909]( f114_arg0, CSV.platformProgressionTable.cols.ref, f114_arg1, CSV.platformProgressionTable.cols.unlockLevel ) ) < 0 then
		f114_local0 = StringTable[0x2DCF0973239E909]( f114_arg0, CSV.platformProgressionTable.cols.ref, f114_arg1, CSV.platformProgressionTable.cols.left )
		f114_local1 = StringTable[0x2DCF0973239E909]( f114_arg0, CSV.platformProgressionTable.cols.ref, f114_arg1, CSV.platformProgressionTable.cols.right )
	else
		f114_local0 = StringTable[0x2077452C28AB2FC]( f114_arg0, 0, CSV.platformProgressionTable.cols.left )
		f114_local1 = StringTable[0x2077452C28AB2FC]( f114_arg0, 0, CSV.platformProgressionTable.cols.right )
	end
	if String.IsNilOrEmpty( f114_local0 ) and String.IsNilOrEmpty( f114_local1 ) then
		return false
	else
		return true
	end
end

GUNSMITH.GetProgressionWeaponTreeTable = function ( f113_arg0 )
	local f113_local0 = GUNSMITH.GetWeaponPlatformProgressionFile( f113_arg0 )
	if String.IsNilOrEmpty( f113_local0 ) then
		return {}
	elseif f113_local0 and 0 < StringTable[0xFD4E49A34DD43AE]( f113_local0 ) then
		if GUNSMITH.ProgressionWeaponTreeTable[f113_local0] and GUNSMITH.DoesTreeContainWeapon( GUNSMITH.ProgressionWeaponTreeTable[f113_local0], f113_arg0 ) then
			return GUNSMITH.ProgressionWeaponTreeTable[f113_local0]
		elseif not f0_local0( f113_local0, f113_arg0 ) then
			GUNSMITH.ProgressionWeaponTreeTable[f113_local0] = GL_HACK.BuildTree( f113_local0, f113_arg0, tonumber( StringTable[0x2DCF0973239E909]( f113_local0, CSV.platformProgressionTable.cols.ref, f113_arg0, CSV.platformProgressionTable.cols.left ) ), tonumber( StringTable[0x2DCF0973239E909]( f113_local0, CSV.platformProgressionTable.cols.ref, f113_arg0, CSV.platformProgressionTable.cols.right ) ), StringTable[0x2DCF0973239E909]( f113_local0, CSV.platformProgressionTable.cols.ref, f113_arg0, CSV.platformProgressionTable.cols.unlockLevel ) )
			return GUNSMITH.ProgressionWeaponTreeTable[f113_local0]
		else
			GUNSMITH.ProgressionWeaponTreeTable[f113_local0] = GL_HACK.BuildTree( f113_local0, StringTable[0x2077452C28AB2FC]( f113_local0, 0, CSV.platformProgressionTable.cols.ref ), tonumber( StringTable[0x2077452C28AB2FC]( f113_local0, 0, CSV.platformProgressionTable.cols.left ) ), tonumber( StringTable[0x2077452C28AB2FC]( f113_local0, 0, CSV.platformProgressionTable.cols.right ) ), StringTable[0x2077452C28AB2FC]( f113_local0, 0, CSV.platformProgressionTable.cols.unlockLevel ) )
			return GUNSMITH.ProgressionWeaponTreeTable[f113_local0]
		end
	else
		return {}
	end
end

GUNSMITH.DoesTreeContainWeapon = function ( f112_arg0, f112_arg1 )
	local f112_local0 = {}
	local f112_local1 = nil
	table.insert( f112_local0, f112_arg0 )
	if 0 < #f112_local0 then
		
	else
		
	end
	return false
end

GUNSMITH.GetProgressionWeaponTable = function ( f110_arg0 )
	local f110_local0 = GUNSMITH.GetProgressionWeaponTreeTable( GUNSMITH.GetPlatformProgressionBaseWeapon( f110_arg0 ) )
	local f110_local1 = nil
	f110_local1 = function ( f111_arg0, f111_arg1 )
		if not f111_arg0 then
			return 
		else
			table.insert( f111_arg1, f111_arg0.ref )
			f110_arg0( f111_arg0.left, f111_arg1 )
			f110_arg0( f111_arg0.right, f111_arg1 )
		end
	end
	
	local f110_local2 = {}
	f110_local1( f110_local0, f110_local2 )
	return f110_local2
end

GUNSMITH.GetProgressionUnlockWeaponAndLevel = function ( f108_arg0 )
	local f108_local0 = GUNSMITH.GetProgressionWeaponTreeTable( GUNSMITH.GetPlatformProgressionBaseWeapon( f108_arg0 ) )
	local f108_local1 = nil
	local f108_local2 = function ( f109_arg0, f109_arg1 )
		if not f109_arg0 then
			return nil
		elseif f109_arg0.ref == f108_arg0 then
			return {
				ref = f109_arg1,
				unlockLevel = f109_arg0.unlockLevel
			}
		else
			local f109_local0 = f108_arg0( f109_arg0.left, f109_arg0.ref )
			if f109_local0 then
				return f109_local0
			else
				return f108_arg0( f109_arg0.right, f109_arg0.ref )
			end
		end
	end
	
	return f108_local2( f108_local0, f108_local0.ref )
end

GUNSMITH.InitOrGetHiddenSiblingAttachmentTable = function ( f107_arg0, f107_arg1 )
	f107_arg0[GUNSMITH.HIDDEN_SIBLINGS_STRING] = f107_arg0[GUNSMITH.HIDDEN_SIBLINGS_STRING] or {}
	f107_arg0[GUNSMITH.HIDDEN_SIBLINGS_STRING][f107_arg1] = f107_arg0[GUNSMITH.HIDDEN_SIBLINGS_STRING][f107_arg1] or {}
	return f107_arg0[GUNSMITH.HIDDEN_SIBLINGS_STRING][f107_arg1]
end

GUNSMITH.UnhideSiblingAttachmentsInCategory = function ( f106_arg0, f106_arg1 )
	local f106_local0 = GUNSMITH.InitOrGetHiddenSiblingAttachmentTable( f106_arg0, f106_arg1 )
	local f106_local1 = f106_arg0[f106_arg1]
	if f106_arg1 ~= ATTACHMENT.receiverCategory and f106_local1 then
		for f106_local2 = #f106_local0, 1, -1 do
			local f106_local5 = f106_local0[f106_local2]
			table.remove( f106_local0, f106_local2 )
			table.insert( f106_local1, f106_local5 )
		end
	end
end

GUNSMITH.FindSubstitubeSiblingForAttachment = function ( f105_arg0, f105_arg1, f105_arg2, f105_arg3, f105_arg4 )
	local f105_local0 = nil
	local f105_local1 = f105_arg4.ref
	local f105_local2 = f105_arg4.category
	local f105_local3 = ATTACHMENT.GetBaseName( f105_local1, f105_local2, f105_arg1.weapon, f105_arg0 )
	local f105_local4 = GUNSMITH.InitOrGetHiddenSiblingAttachmentTable( f105_arg3, f105_local2 )
	ATTACHMENT.SetBlockedAttachments( f105_arg0, f105_local4, f105_arg1, f105_arg2, f105_local2 )
	for f105_local8, f105_local9 in ipairs( f105_local4 ) do
		if not String.IsNilOrEmpty( f105_local9.baseName ) and f105_local9.baseName == f105_local3 and f105_local9.ref ~= f105_local1 and not f105_local9.isBlocked then
			f105_local0 = f105_local9
			break
		end
	end
	return f105_local0
end

GUNSMITH.FindSubstituteSiblingForEachAttachments = function ( f104_arg0, f104_arg1, f104_arg2, f104_arg3, f104_arg4 )
	local f104_local0 = {}
	for f104_local4, f104_local5 in pairs( f104_arg4 ) do
		f104_local0[f104_local5] = GUNSMITH.FindSubstitubeSiblingForAttachment( f104_arg0, f104_arg1, f104_arg2, f104_arg3, f104_local5 )
	end
	return f104_local0
end

GUNSMITH.HideSiblingAttachmentsInCategory = function ( f103_arg0, f103_arg1 )
	local f103_local0 = GUNSMITH.InitOrGetHiddenSiblingAttachmentTable( f103_arg0, f103_arg1 )
	local f103_local1 = f103_arg0[f103_arg1]
	if f103_arg1 ~= ATTACHMENT.receiverCategory and f103_local1 then
		local f103_local2 = {}
		local f103_local3 = {}
		for f103_local7, f103_local8 in ipairs( f103_local1 ) do
			if not String.IsNilOrEmpty( f103_local8.baseName ) then
				f103_local3[f103_local8.baseName] = f103_local3[f103_local8.baseName] or {}
				table.insert( f103_local2, f103_local7 )
				table.insert( f103_local3[f103_local8.baseName], f103_local7 )
			end
		end
		f103_local4 = {}
		for f103_local8, f103_local13 in pairs( f103_local3 ) do
			for f103_local9, f103_local10 in ipairs( f103_local13 ) do
				local f103_local12 = f103_local4[f103_local8] and f103_local1[f103_local4[f103_local8]] or nil
				if not f103_local12 or f103_local12.isBlocked and not f103_local1[f103_local10].isBlocked then
					f103_local4[f103_local8] = f103_local10
				end
			end
		end
		f103_local5 = {}
		for f103_local13, f103_local14 in pairs( f103_local4 ) do
			f103_local5[f103_local14] = true
		end
		for f103_local6 = #f103_local2, 1, -1 do
			f103_local14 = f103_local2[f103_local6]
			if not f103_local5[f103_local14] then
				local f103_local15 = f103_local1[f103_local14]
				table.remove( f103_local1, f103_local14 )
				table.insert( f103_local0, f103_local15 )
			end
		end
	end
end

GUNSMITH.UpdateBlockedAttachments = function ( f102_arg0, f102_arg1, f102_arg2, f102_arg3 )
	if f102_arg1 and f102_arg1.attachments and f102_arg2 and f102_arg3 then
		local f102_local0 = {}
		for f102_local4, f102_local5 in pairs( f102_arg1.attachments ) do
			if f102_arg2[f102_local5.category] then
				f102_local0[f102_local5.category] = f102_local5.ref
			end
		end
		for f102_local4, f102_local5 in pairs( f102_arg3 ) do
			local f102_local6 = f102_arg2[f102_local5]
			if f102_local5 ~= ATTACHMENT.receiverCategory and f102_local6 then
				GUNSMITH.UnhideSiblingAttachmentsInCategory( f102_arg2, f102_local5 )
				if 0 < ATTACHMENT.SetBlockedAttachments( f102_arg0, f102_local6, f102_arg1, f102_local0[f102_local5] and f102_local0[f102_local5] or ATTACHMENT.none, f102_local5 ) then
					GUNSMITH.HideSiblingAttachmentsInCategory( f102_arg2, f102_local5 )
				end
			end
		end
	end
end

GUNSMITH.FilterRestrictedAttachments = function ( f101_arg0, f101_arg1, f101_arg2 )
	local f101_local0 = {}
	for f101_local5, f101_local6 in ipairs( f101_arg0 ) do
		if f101_local6.ref == f101_arg2 then
			table.insert( f101_local0, f101_local6 )
		end
		if not MatchRules[0x722F56788C744E9]( f101_local6.ref, f101_arg1 ) then
			if CONDITIONS.AreRestrictionsActive() and f101_local6.category == ATTACHMENT.receiverCategory then
				local f101_local4 = WEAPON.GetWeaponRefByRec( f101_local6.ref )
				if not MatchRules[0x966A6F3A93A1200]( f101_local4 ) and not MatchRules[0xB0FA3D79A09CF96]( WEAPON.GetWeaponClass( f101_local4 ) ) then
					table.insert( f101_local0, f101_local6 )
				end
			end
			table.insert( f101_local0, f101_local6 )
		end
	end
	return f101_local0
end

GUNSMITH.CheckBlockedEquippedAttachmentLogic = function ( f100_arg0, f100_arg1, f100_arg2, f100_arg3, f100_arg4, f100_arg5, f100_arg6, f100_arg7 )
	local f100_local0 = ATTACHMENT.GetBlockedEquippedAttachments( f100_arg0, f100_arg3, f100_arg4, f100_arg7 )
	local f100_local1 = {}
	local f100_local2 = {}
	local f100_local3 = LUI.ShallowCopy( f100_local0 )
	for f100_local4 = 1, #f100_local0, 1 do
		local f100_local7 = f100_arg7[f100_local0[f100_local4].category]
		local f100_local8 = ""
		for f100_local12, f100_local13 in ipairs( f100_local7 ) do
			if f100_local13.ref == f100_local0[f100_local4].ref then
				f100_local8 = f100_local13.baseName
				break
			end
		end
		if not LUI.StringIsNilOrEmpty( f100_local8 ) then
			ATTACHMENT.SetBlockedAttachments( f100_arg0, GUNSMITH.FilterRestrictedAttachments( f100_local7, f100_arg1.weaponRef, f100_arg6 ), f100_arg1, f100_arg2, f100_arg5, WEAPON.GenerateCopyOfWeaponTableWithReplacementAttachment( f100_arg1, f100_arg6 ) )
			for f100_local14, f100_local15 in ipairs( f100_local7 ) do
				if f100_local15.baseName and f100_local15.baseName == f100_local8 and f100_local15.ref ~= f100_local0[f100_local4].ref and not f100_local15.isBlocked then
					table.insert( f100_local1, f100_local15 )
					table.remove( f100_local3, f100_local4 )
				end
			end
		end
	end
	for f100_local17, f100_local7 in pairs( GUNSMITH.FindSubstituteSiblingForEachAttachments( f100_arg0, f100_arg3, f100_arg4, f100_arg7, f100_local3 ) ) do
		local f100_local8 = LUI.IsItemInArray( f100_local3, f100_local17 )
		if 0 < f100_local8 then
			table.insert( f100_local2, f100_local7 )
			table.remove( f100_local3, f100_local8 )
		end
	end
	return LUI.ShallowCopy( f100_local3 ), f100_local1, f100_local2
end

GUNSMITH.GetBrandingMaterialName = function ( f99_arg0 )
	return StringTable[0x2DCF0973239E909]( CSV.weaponManufacturers.file, CSV.weaponManufacturers.cols.manufacturer, f99_arg0, CSV.weaponManufacturers.cols.Image )
end

GUNSMITH.GetBrandingSmallMaterialName = function ( f98_arg0 )
	return StringTable[0x2DCF0973239E909]( CSV.weaponManufacturers.file, CSV.weaponManufacturers.cols.manufacturer, f98_arg0, CSV.weaponManufacturers.cols.smallImage )
end

GUNSMITH.GetBrandingMaterialWidth = function ( f97_arg0 )
	return StringTable[0x2DCF0973239E909]( CSV.weaponManufacturers.file, CSV.weaponManufacturers.cols.manufacturer, f97_arg0, CSV.weaponManufacturers.cols.imageWidth ) * _1080p
end

GUNSMITH.GetBrandingSmallMaterialWidth = function ( f96_arg0 )
	return StringTable[0x2DCF0973239E909]( CSV.weaponManufacturers.file, CSV.weaponManufacturers.cols.manufacturer, f96_arg0, CSV.weaponManufacturers.cols.smallImageWidth ) * _1080p
end

GUNSMITH.GetBrandingMaterialNameFromWeaponTable = function ( f95_arg0 )
	local f95_local0
	if f95_arg0 then
		f95_local0 = ATTACHMENT.GetReceiverBlueprintFromWeaponTable( f95_arg0 )
		if not f95_local0 then
		
		else
			local f95_local1
			if f95_local0 then
				f95_local1 = f95_local0
			else
				f95_local1 = f95_local0[0x2EAB902F6509817]
			end
			return GUNSMITH.GetBrandingMaterialName( f95_local1 )
		end
	end
	f95_local0 = nil
end

GUNSMITH.GetBrandingImageWidthFromWeaponTable = function ( f94_arg0, f94_arg1 )
	if not f94_arg0._brandingOriginalHeight then
		local f94_local0, f94_local1 = f94_arg0:GetImageDimensions()
		f94_arg0._brandingOriginalImageHeight = f94_local1 * _1080p
	end
	local f94_local0 = ATTACHMENT.GetReceiverBlueprintFromWeaponTable( f94_arg1 )
	local f94_local2 = GUNSMITH.GetBrandingMaterialWidth( f94_local0[0x2EAB902F6509817] ) * f94_arg0:getHeight() / f94_arg0._brandingOriginalImageHeight
	local f94_local3 = f94_arg0:GetAnchorsAndPosition()
	return f94_local3.right - f94_local2
end

GUNSMITH.UpdateWeaponStatsBranding = function ( f93_arg0, f93_arg1, f93_arg2 )
	local f93_local0 = GUNSMITH.GetBrandingMaterialNameFromWeaponTable( f93_arg2 )
	local f93_local1 = String.IsNilOrEmpty( f93_local0 )
	if not f93_local1 then
		DataSources.alwaysLoaded.weaponStats.brandingMaterial:SetValue( f93_arg0, f93_local0 )
		DataSources.alwaysLoaded.weaponStats.brandingWidth:SetValue( f93_arg0, GUNSMITH.GetBrandingImageWidthFromWeaponTable( f93_arg1, f93_arg2 ) )
	end
	DataSources.alwaysLoaded.weaponStats.showBranding:SetValue( f93_arg0, not f93_local1 )
end

GUNSMITH.IsWeaponSetupBlueprintIntact = function ( f92_arg0 )
	local f92_local0
	if not f92_arg0 or f92_arg0.blueprintTuned:get() == 0 then
		f92_local0 = false
	else
		f92_local0 = true
	end
	return f92_local0
end

GUNSMITH.DoesWeaponSetupContainProtunedAttachment = function ( f91_arg0 )
	return GUNSMITH.DoesWeaponTableContainProtunedAttachment( WEAPON.GenerateWeaponTable( f91_arg0 ) )
end

GUNSMITH.DoesWeaponTableContainProtunedAttachment = function ( f90_arg0 )
	if f90_arg0 and not String.IsNilOrEmpty( f90_arg0.weapon ) and f90_arg0.variantID and f90_arg0.variantID > WEAPON.baseVariant and f90_arg0.attachments then
		local f90_local0 = GL_HACK.GetWeaponMPRef( f90_arg0.weapon )
		local f90_local1 = Engine[0x879C2878DB98F92]( f90_local0, f90_arg0.variantID )
		local f90_local2
		if f90_local1 then
			f90_local2 = f90_local1
		else
			f90_local2 = Engine[0x6CE34978E636774]( f90_local0, f90_local1[0xAE1E225E2DD2DF4]( f90_local1 ) )
		end
		if f90_local2 then
			local f90_local3 = WEAPON.GetWeaponModelName( f90_arg0.weapon, f90_arg0, {
				includeAttachments = true
			} )
			for f90_local7, f90_local8 in ipairs( f90_arg0.attachments ) do
				if GUNSMITH.IsAttachmentProtuned( f90_arg0, f90_local8, f90_local3, f90_local2 ) then
					return true
				end
			end
		end
	end
	return false
end

GUNSMITH.GetProtunedAttachmentMap = function ( f89_arg0 )
	local f89_local0 = {}
	local f89_local1 = 0
	if f89_arg0 and not String.IsNilOrEmpty( f89_arg0.weapon ) and f89_arg0.variantID and f89_arg0.variantID > WEAPON.baseVariant and f89_arg0.attachments then
		local f89_local2 = GL_HACK.GetWeaponMPRef( f89_arg0.weapon )
		local f89_local3 = Engine[0x879C2878DB98F92]( f89_local2, f89_arg0.variantID )
		local f89_local4
		if f89_local3 then
			f89_local4 = f89_local3
		else
			f89_local4 = Engine[0x6CE34978E636774]( f89_local2, f89_local3[0xAE1E225E2DD2DF4]( f89_local3 ) )
		end
		if f89_local4 then
			local f89_local5 = WEAPON.GetWeaponModelName( f89_arg0.weapon, f89_arg0, {
				includeAttachments = true
			} )
			for f89_local9, f89_local10 in ipairs( f89_arg0.attachments ) do
				if GUNSMITH.DoesAttachmentHaveProtuning( f89_arg0, f89_local10.ref, f89_local5, f89_local4 ) then
					f89_local0[f89_local10.ref] = f89_local10.hasBPTune ~= GUNSMITH.CLEAR_PRO_TUNING
					f89_local1 = f89_local1 + 1
				end
			end
		end
	end
	return f89_local0, f89_local1
end

GUNSMITH.DoesAttachmentHaveProtuning = function ( f88_arg0, f88_arg1, f88_arg2, f88_arg3 )
	if not f88_arg0 or not f88_arg1 then
		return false
	end
	local f88_local0 = GL_HACK.GetWeaponMPRef( f88_arg0.weapon )
	if not f88_arg3 then
		local f88_local1 = Engine[0x879C2878DB98F92]( f88_local0, f88_arg0.variantID )
		if f88_local1 then
			f88_arg3 = f88_local1
		else
			f88_arg3 = Engine[0x6CE34978E636774]( f88_local0, f88_local1[0xAE1E225E2DD2DF4]( f88_local1 ) )
		end
	end
	if f88_arg3 and f88_arg3[f88_arg1] then
		if String.IsNilOrEmpty( f88_arg2 ) or not f88_arg2 then
			f88_arg2 = WEAPON.GetWeaponModelName( f88_arg0.weapon, f88_arg0, {
				includeAttachments = true
			} )
		end
		local f88_local1 = Engine[0x603B6AC5797050A]( f88_arg2, f88_arg1 )
		if f88_local1 ~= Enum[0x540F63FFAF44174][0xBEA71FD0CCA2F6D] then
			return Engine[0x4AF1CF5FDA63B52]( f88_local0, f88_arg0.variantID, f88_local1 )
		end
	end
	return false
end

GUNSMITH.IsAttachmentProtuned = function ( f87_arg0, f87_arg1, f87_arg2, f87_arg3 )
	if f87_arg0 and f87_arg1 and f87_arg1.hasBPTune ~= GUNSMITH.CLEAR_PRO_TUNING then
		return GUNSMITH.DoesAttachmentHaveProtuning( f87_arg0, f87_arg1.ref, f87_arg2, f87_arg3 )
	else
		return false
	end
end

GUNSMITH.TryClearProTuningInSetup = function ( f86_arg0, f86_arg1, f86_arg2, f86_arg3, f86_arg4 )
	if GUNSMITH.DoesAttachmentHaveProtuning( f86_arg0, f86_arg1.attachment:get(), f86_arg3, f86_arg4 ) then
		f86_arg1.hasBPTune:set( GUNSMITH.CLEAR_PRO_TUNING )
	else
		f86_arg1.hasBPTune:set( GUNSMITH.CAN_PRO_TUNE )
	end
end

GUNSMITH.IsSwappingAttachmentRequired = function ( f85_arg0, f85_arg1, f85_arg2 )
	local f85_local0 = f85_arg2.category and f85_arg2.category or ATTACHMENT.GetCategory( f85_arg2.ref )
	local f85_local1 = GUNSMITH.IsAttachmentSetupFull( f85_local0, f85_arg0 )
	local f85_local2
	if f85_arg1 ~= nil and f85_local0 == ATTACHMENT.GetCategory( f85_arg1 ) then
		f85_local2 = false
	else
		f85_local2 = true
	end
	local f85_local3
	if f85_local1 then
		f85_local3 = f85_local1
	else
		f85_local3 = f85_local2
	end
	return f85_local3
end

GUNSMITH.GetBreakBlueprintConfirmPopupRef = function ()
	return "BreakBlueprintConfirmPopup"
end

GUNSMITH.SetupCallbackFuncForBlueprintEdit = function ( f81_arg0, f81_arg1, f81_arg2, f81_arg3 )
	local f81_local0, f81_local1 = nil
	if CONDITIONS.IsMobileOrMobileSim() then
		f81_local1 = {
			title = Engine[0xEB2A2834B76AEA4]( Engine[0xED84C33EC5F01EA]( 0xDC8F1B7E419BCCD ) ),
			message = Engine[0xED84C33EC5F01EA]( 0x1EA42D4543C75D6 ),
			typeOfPopup = PopupsUtils.typeOfPopup.POPUP_YESNO,
			yesAction = function ( f83_arg0 )
				ACTIONS.LeaveMenu( f83_arg0 )
				f81_arg0.blueprintTuned:set( 0 )
				f81_arg0()
			end,
			noAction = function ( f82_arg0 )
				ACTIONS.LeaveMenu( f82_arg0 )
			end
		}
		f81_local0 = "MobileGenericPopupWindow"
	else
		if f81_arg2 == nil then
			return 
		end
		f81_local1 = {
			weaponSetup = f81_arg1,
			blueprintEditingStatus = f81_arg2,
			callbackFunc = f81_arg3
		}
		f81_local0 = "BreakBlueprintConfirmPopup"
	end
	LUI.FlowManager.RequestPopupMenu( nil, f81_local0, true, f81_arg0, false, f81_local1 )
end

GUNSMITH.CreateCamoCategoryHeaderData = function ( f80_arg0, f80_arg1, f80_arg2, f80_arg3 )
	local f80_local0 = {
		localizeHeader = false,
		headerWidth = 0,
		displayCategorySize = true,
		localId = f80_arg0,
		categorySize = f80_arg1,
		countUnlocked = f80_arg2
	}
	local f80_local1
	if f80_arg3 then
		f80_local1 = 0xC932C5990538292
		if not f80_local1 then
		
		else
			f80_local0.categoryNameKey = f80_local1
			return f80_local0
		end
	end
	f80_local1 = 0x907417433A3FB47
end

GUNSMITH.CreateCamoCategoryData = function ( f79_arg0, f79_arg1, f79_arg2, f79_arg3, f79_arg4 )
	local f79_local0 = nil
	if CONDITIONS.IsMobileOrMobileSim() then
		local f79_local1
		if 0 < #f79_arg1 then
			f79_local1 = f79_arg1[1]
			if not f79_local1 then
			
			elseif f79_local1 then
				local f79_local2 = LOOT.GetScriptBundleForName( LOOT.itemTypes.CAMO, f79_local1.assetName )
				if f79_local2 then
					f79_local0 = f79_local2
				else
					f79_local0 = f79_local2[0xAB612888528489A]
				end
			end
		end
		f79_local1 = nil
	else
		if 0 < #f79_arg1 then
			local f79_local1 = f79_arg1[1][0xAB612888528489A]
			if not f79_local1 then
				f79_local0 = f79_local1
			else
				f79_local0 = nil
			end
		end
		f79_local0 = nil
	end
	return {
		name = f79_arg3,
		image = f79_local0,
		unlockCount = f79_arg2,
		camos = f79_arg1,
		isWeaponMastery = f79_arg4
	}
end

GUNSMITH.GetCamoCount = function ( f78_arg0, f78_arg1 )
	local f78_local0 = 0
	for f78_local4, f78_local5 in ipairs( f78_arg0 ) do
		f78_local0 = f78_local0 + #f78_arg1[f78_local5[0x9E9C01960F4C582]]
	end
	return f78_local0
end

GUNSMITH.GetMasteryCamoUnlockedCount = function ( f77_arg0, f77_arg1 )
	local f77_local0 = 0
	for f77_local4, f77_local5 in ipairs( f77_arg0 ) do
		if LOOT.IsUnlockedWithID( f77_arg1, tonumber( f77_local5[0x28887F70BF5EBA] ) ) then
			f77_local0 = f77_local0 + 1
		end
	end
	return f77_local0
end

GUNSMITH.GetMasteryCamoUnlockedCountFromDefs = function ( f76_arg0, f76_arg1 )
	local f76_local0 = 0
	for f76_local4, f76_local5 in ipairs( f76_arg0 ) do
		if LOOT.IsUnlockedWithID( f76_arg1, tonumber( f76_local5.lootID ) ) then
			f76_local0 = f76_local0 + 1
		end
	end
	return f76_local0
end

GUNSMITH.GetAllCamoCategoriesData = function ( f75_arg0, f75_arg1, f75_arg2, f75_arg3 )
	local f75_local0 = {}
	local f75_local1 = GUNSMITH.GetCamoCount( f75_arg0, f75_arg1 )
	local f75_local2 = GUNSMITH.GetCamoCount( f75_arg2, f75_arg3 )
	for f75_local8, f75_local9 in ipairs( f75_arg0 ) do
		local f75_local10 = f75_local9[0x9E9C01960F4C582]
		local f75_local11 = f75_arg1[f75_local10]
		local f75_local12 = f75_arg3[f75_local10]
		local f75_local6
		if f75_local12 then
			f75_local6 = #f75_local12
			if not f75_local6 then
			
			else
				local f75_local7 = GUNSMITH.CreateCamoCategoryData( f75_local8, f75_local11, f75_local6, f75_local9[0x4BCADBA8E631B86], false )
				f75_local7.categoryHeader = GUNSMITH.CreateCamoCategoryHeaderData( f75_local8, f75_local1, f75_local2, false )
				f75_local7.ref = f75_local10
				table.insert( f75_local0, f75_local7 )
			end
		end
		f75_local6 = 0
	end
	return f75_local0
end

GUNSMITH.GetWeaponClassCamos = function ( f74_arg0, f74_arg1, f74_arg2 )
	local f74_local0 = {}
	local f74_local1 = SEASON.GetCurrentSeason()
	for f74_local5, f74_local6 in ipairs( f74_arg2 ) do
		if not String.IsNilOrEmpty( f74_local6[0x94259E0A6DAC8AB] ) and (String.BeginsWith( f74_arg1, f74_local6[0x94259E0A6DAC8AB] ) or f74_local6[0x94259E0A6DAC8AB] == "NONE") and (LOOT.IsUnlockedWithID( f74_arg0, f74_local6[0x28887F70BF5EBA] ) or not f74_local6[0x8DFD5E2759BA3F8] or f74_local6[0x8DFD5E2759BA3F8] == f74_local1) then
			table.insert( f74_local0, f74_local6 )
		end
	end
	return f74_local0
end

GUNSMITH.GetWeaponClassCamosFromDef = function ( f73_arg0, f73_arg1, f73_arg2 )
	local f73_local0 = {}
	local f73_local1 = SEASON.GetCurrentSeason()
	for f73_local5, f73_local6 in ipairs( f73_arg2 ) do
		local f73_local7 = LOOT.GetScriptBundleForName( LOOT.itemTypes.CAMO, f73_local6.assetName )
		if not String.IsNilOrEmpty( f73_local7[0x94259E0A6DAC8AB] ) and (String.BeginsWith( f73_arg1, f73_local7[0x94259E0A6DAC8AB] ) or f73_local7[0x94259E0A6DAC8AB] == "NONE") and (LOOT.IsUnlockedWithID( f73_arg0, f73_local7[0x28887F70BF5EBA] ) or not f73_local7[0x8DFD5E2759BA3F8] or f73_local7[0x8DFD5E2759BA3F8] == f73_local1) then
			table.insert( f73_local0, f73_local6 )
		end
	end
	return f73_local0
end

GUNSMITH.GetWeaponMasteryCamoCategoriesData = function ( f72_arg0, f72_arg1, f72_arg2, f72_arg3, f72_arg4 )
	local f72_local0, f72_local1 = nil
	if CONDITIONS.IsMobileOrMobileSim() then
		f72_local0 = GUNSMITH.GetMasteryCamoUnlockedCountFromDefs( f72_arg2, f72_arg0 )
		f72_local1 = GUNSMITH.GetMasteryCamoUnlockedCountFromDefs( f72_arg3, f72_arg0 )
	else
		f72_local0 = GUNSMITH.GetMasteryCamoUnlockedCount( f72_arg2, f72_arg0 )
		f72_local1 = GUNSMITH.GetMasteryCamoUnlockedCount( f72_arg3, f72_arg0 )
	end
	local f72_local2 = f72_local0 + f72_local1
	local f72_local3 = 2
	local f72_local4 = #f72_arg2 + #f72_arg3
	local f72_local5, f72_local6, f72_local7 = nil
	for f72_local8 = 1, f72_local3, 1 do
		local f72_local11 = ""
		if f72_local8 == 1 then
			f72_local11 = GUNSMITH.CAMO_MASTERY_CATEGORY.UNIQUE
			local f72_local12 = WEAPON.GetWeaponDataForRef( f72_arg4 )
			f72_local6 = Engine[0xED84C33EC5F01EA]( 0x839C929D699AD2A, f72_local12[0x4BCADBA8E631B86] )
			f72_local5 = f72_arg2
			f72_local7 = f72_local0
		else
			f72_local11 = GUNSMITH.CAMO_MASTERY_CATEGORY.COMPLETIONIST
			f72_local6 = Engine[0xED84C33EC5F01EA]( 0xD0552B3B5B77423 )
			f72_local5 = f72_arg3
			f72_local7 = f72_local1
		end
		local f72_local13 = GUNSMITH.CreateCamoCategoryData( f72_local8, f72_local5, f72_local7, f72_local6, true )
		f72_local13.categoryHeader = GUNSMITH.CreateCamoCategoryHeaderData( f72_local8, f72_local4, f72_local2, true )
		f72_local13.localizeHeader = false
		f72_local13.ref = f72_local11
		table.insert( f72_arg1, f72_local8, f72_local13 )
	end
	return f72_arg1, f72_local3
end

GUNSMITH.IsCamoEquippedInCategory = function ( f71_arg0, f71_arg1 )
	for f71_local3, f71_local4 in ipairs( f71_arg1.camos ) do
		if f71_arg0 == f71_local4[0x9E9C01960F4C582] then
			return true
		end
	end
	return false
end

GUNSMITH.IsCamoDefEquippedInCategory = function ( f70_arg0, f70_arg1 )
	for f70_local3, f70_local4 in ipairs( f70_arg1.camos ) do
		if f70_arg0 == f70_local4.ref then
			return true
		end
	end
	return false
end

GUNSMITH.GetCamoCategoryDataFromId = function ( f69_arg0, f69_arg1 )
	local f69_local0 = 0
	for f69_local4, f69_local5 in pairs( f69_arg0 ) do
		if f69_arg1 <= f69_local0 + f69_local5 then
			return {
				categoryRef = f69_local4,
				localId = f69_arg1 - f69_local0
			}
		end
		f69_local0 = f69_local0 + f69_local5
	end
	return nil
end

GUNSMITH.SearchCamoData = function ( f68_arg0, f68_arg1 )
	for f68_local6, f68_local7 in pairs( f68_arg0 ) do
		for f68_local3, f68_local4 in ipairs( f68_local7 ) do
			if f68_local4[0x9E9C01960F4C582] == f68_arg1 then
				return f68_local4
			end
		end
	end
	return nil
end

GUNSMITH.SetupGunsmithTuningMenu = function ( f67_arg0, f67_arg1, f67_arg2 )
	WEAPON.SetWeaponSlot( f67_arg1, f67_arg2.weaponSlot )
end

GUNSMITH.GetCamoContextualDataMenu = function ( f64_arg0, f64_arg1 )
	return {
		button = "button_l3",
		id = "weaponPreview",
		actionName = Engine[0xED84C33EC5F01EA]( 0xCBEAF62674E5E75 ),
		actionFunction = function ()
			if not f64_arg0 or not f64_arg0._weaponTableWithHighlightedCamo then
				assert( false, "Contextual menu : Camo weapon preview data is incorrect -> GUNSMITH.GetCamoContextualDataMenu()" )
				return 
			else
				LUI.FlowManager.RequestAddMenu( "WeaponPreview", true, f64_arg0, nil, {
					weaponTable = f64_arg0._weaponTableWithHighlightedCamo
				}, true )
			end
		end
		,
		conditionFunction = function ()
			return CONDITIONS.IsWeaponPreviewEnabled()
		end
		,
		helper_definition = Engine[0xED84C33EC5F01EA]( 0xE272C3C014D638E )
	}
end

GUNSMITH.GetCompletionistCamoTypeFromCamoRef = function ( f63_arg0 )
	local f63_local0 = String.Split( f63_arg0, "camo_comp_0" )
	f63_local0 = f63_local0[1]
	if f63_local0 then
		return tonumber( f63_local0 )
	else
		return GUNSMITH.COMPLETIONIST_CAMO_TYPE.INVALID
	end
end

GUNSMITH.SetupCamoButton = function ( f62_arg0, f62_arg1, f62_arg2, f62_arg3, f62_arg4 )
	if CONDITIONS.IsMobileOrMobileSim() then
		GUNSMITH.SetupCustomizationButton( f62_arg1, {
			image = f62_arg2
		}, f62_arg3, false, "ImageFull" )
	else
		f62_arg1:SetupButton( {
			imageSize = "ImageFull",
			removeText = true,
			buttonData = {
				image = f62_arg2
			}
		} )
		f62_arg1:SetEquipped( f62_arg3 )
		local f62_local0 = GUNSMITH.GetCamoContextualDataMenu( f62_arg0, f62_arg4 )
		f62_arg1:SetupContextualMenu()
		f62_arg1:AddContextualMenuAction( f62_local0 )
	end
end

GUNSMITH.GetAltCamoChallenge = function ( f61_arg0, f61_arg1, f61_arg2, f61_arg3 )
	local f61_local0 = nil
	if f61_arg2 == GUNSMITH.COMPLETIONIST_CAMO_TYPE.GOLD then
		local f61_local1 = ""
		if CONDITIONS.IsMobileOrMobileSim() then
			f61_local1 = f61_arg3 .. "_camo_gold"
		else
			f61_local1 = StringTable[0x2DCF0973239E909]( CSV.gunsmithChallenges.file, CSV.gunsmithChallenges.cols.loot, f61_arg1, CSV.gunsmithChallenges.cols.ref )
		end
		f61_local0 = f61_local1 .. "_unlock"
	elseif f61_arg2 == GUNSMITH.COMPLETIONIST_CAMO_TYPE.PLAT then
		local f61_local1 = WEAPON.GetWeaponShortenedClassName( f61_arg3 )
		if not LUI.StringIsNilOrEmpty( f61_local1 ) then
			f61_local0 = "camo_platinum_" .. f61_local1 .. "_unlock"
		end
	elseif f61_arg2 == GUNSMITH.COMPLETIONIST_CAMO_TYPE.ELEMENT then
		f61_local0 = "camo_damascus_unlock"
	end
	if not LUI.StringIsNilOrEmpty( f61_local0 ) then
		local f61_local1 = tonumber( StringTable[0x2DCF0973239E909]( CSV.gunsmithChallenges.file, CSV.gunsmithChallenges.cols.ref, f61_local0, CSV.gunsmithChallenges.cols.amount ) )
		local f61_local2 = StringTable[0x2DCF0973239E909]( CSV.gunsmithChallenges.file, CSV.gunsmithChallenges.cols.ref, f61_local0, CSV.gunsmithChallenges.cols.id )
		local f61_local3 = Challenge.GetChallengeProgress( f61_arg0, f61_local2 )
		if f61_local1 and f61_local3 then
			return {
				altChallengeDesc = StringTable[0x2DCF0973239E909]( CSV.gunsmithChallenges.file, CSV.gunsmithChallenges.cols.ref, f61_local0, CSV.gunsmithChallenges.cols.desc ),
				altChallengeAmount = f61_local1,
				altChallengeID = f61_local2,
				altCurrentProgress = f61_local3
			}
		end
	end
	return nil
end

GUNSMITH.GetCamoChallenges = function ( f60_arg0, f60_arg1, f60_arg2 )
	if not f60_arg2 then
		f60_arg2 = {}
	end
	local f60_local0 = f60_arg2.camoData
	if not f60_local0 then
		f60_local0 = LOOT.GetScriptBundleForName( LOOT.itemTypes.CAMO, f60_arg1 )
	end
	local f60_local1 = f60_local0[0x28887F70BF5EBA]
	local f60_local2 = f60_arg2.weaponRef
	if not f60_local2 then
		f60_local2 = f60_local0[0x60F47DF1CFBB466]
	end
	local f60_local3 = StringTable[0x2DCF0973239E909]( CSV.gunsmithChallenges.file, CSV.gunsmithChallenges.cols.loot, f60_local1, CSV.gunsmithChallenges.cols.id )
	local f60_local4 = StringTable[0x2DCF0973239E909]( CSV.gunsmithChallenges.file, CSV.gunsmithChallenges.cols.loot, f60_local1, CSV.gunsmithChallenges.cols.desc )
	local f60_local5 = tonumber( StringTable[0x2DCF0973239E909]( CSV.gunsmithChallenges.file, CSV.gunsmithChallenges.cols.loot, f60_local1, CSV.gunsmithChallenges.cols.amount ) )
	local f60_local6 = Challenge.GetChallengeProgress( f60_arg0, f60_local3 )
	local f60_local7 = StringTable[0x2DCF0973239E909]( CSV.gunsmithChallenges.file, CSV.gunsmithChallenges.cols.loot, f60_local1, CSV.gunsmithChallenges.cols.ref )
	local f60_local8 = f60_local0[0xA86D464182EDEB5] == GUNSMITH.CAMO_CATEGORY_SPECIAL
	local f60_local9 = f60_local0[0xA86D464182EDEB5] == GUNSMITH.CAMO_CATEGORY_COMPLETIONIST
	local f60_local10 = GUNSMITH.GetCompletionistCamoTypeFromCamoRef( f60_local0[0x9E9C01960F4C582] )
	local f60_local11 = {
		challengeID = f60_local3,
		challengeDesc = f60_local4,
		challengeAmount = f60_local5,
		currentProgress = f60_local6,
		isCompletionist = f60_local9,
		challengeWeaponRef = f60_local2
	}
	if not LUI.StringIsNilOrEmpty( f60_local7 ) and not f60_local8 and not f60_local9 then
		local f60_local12 = String.Split( f60_local7, "_" )
		f60_local11.challengeWeaponRef = f60_local12[1] .. "_" .. f60_local12[2] .. "_" .. f60_local12[3]
	end
	if f60_local3 then
		f60_local11.isUnlocked = LOOT.IsUnlockedWithID( f60_arg0, tonumber( f60_local1 ) )
		local f60_local12
		if f60_local10 ~= GUNSMITH.COMPLETIONIST_CAMO_TYPE.PLAT and f60_local10 ~= GUNSMITH.COMPLETIONIST_CAMO_TYPE.ELEMENT then
			f60_local12 = false
		else
			f60_local12 = true
		end
		f60_local11.checkAltChallengeCompletion = f60_local12
		if f60_local9 then
			if CONDITIONS.IsMobileOrMobileSim() and not String.IsNilOrEmpty( f60_arg2.weaponRef ) then
				f60_local12 = f60_arg2.weaponRef
				if not f60_local12 then
					f60_local2 = f60_local12
				else
					
				end
			end
			f60_local12 = GUNSMITH.GetAltCamoChallenge( f60_arg0, f60_local1, f60_local10, f60_local2 )
			if f60_local12 then
				f60_local11.altChallengeDesc = f60_local12.altChallengeDesc
				f60_local11.altChallengeAmount = f60_local12.altChallengeAmount
				f60_local11.altChallengeID = f60_local12.altChallengeID
				f60_local11.altCurrentProgress = f60_local12.altCurrentProgress
			end
		end
	end
	return f60_local11
end

GUNSMITH.GetCamoUnlockCondition = function ( f59_arg0, f59_arg1, f59_arg2, f59_arg3 )
	local f59_local0 = f59_arg2.unlockDescData
	local f59_local1 = f59_arg2.unlockProgress
	local f59_local2 = f59_arg2.currentProgress
	local f59_local3 = f59_arg2.totalProgress
	local f59_local4 = f59_arg2.checkChallengeCompletion
	local f59_local5
	if not f59_arg1 then
		f59_local5 = f59_arg1
	else
		f59_local5 = f59_local3 <= f59_local2
	end
	if f59_local4 and f59_arg3 and not f59_local5 then
		f59_local5 = Challenge.IsChallengeComplete( f59_arg0, f59_arg3 )
	end
	return {
		isCompleted = f59_local5,
		unlockCriteria = Engine[0xED84C33EC5F01EA]( f59_local0.desc, f59_local0.param1, f59_local0.param2 ),
		unlockProgressionText = Engine[0xED84C33EC5F01EA]( 0xF3A654DF487E617, f59_local1.param1, f59_local1.param2 ),
		lootID = f59_arg3
	}
end

GUNSMITH.GetCamoUnlockConditions = function ( f58_arg0, f58_arg1, f58_arg2 )
	local f58_local0 = f58_arg1.isUnlocked
	local f58_local1 = f58_arg1.isCompletionist
	local f58_local2 = f58_arg1.challengeWeaponRef
	local f58_local3 = Engine[0x7D3158A9539A355]( "^%" .. WEAPON.GetName( f58_local2 ) .. "^7" )
	local f58_local4 = {}
	if LOOT.IsItemUnlockableForCurrentProjectFromLootId( LOOT.itemTypes.CAMO, f58_arg2 ) then
		if not f58_local1 and f58_local2 then
			local f58_local5 = PROGRESSION.GetChallengeUnlockWeaponLevel( f58_local2, tonumber( f58_arg1.challengeID ) )
			if not CONDITIONS.IsMobileOrMobileSim() or 0 < f58_local5 then
				table.insert( f58_local4, GUNSMITH.GetCamoUnlockCondition( f58_arg0, f58_local0, {
					unlockDescData = {
						desc = 0x69616E058817D85,
						param1 = f58_local3,
						param2 = f58_local5 + 1
					},
					unlockProgress = {
						param1 = Engine[0x7D3158A9539A355]( "^%" .. PROGRESSION.GetWeaponDisplayLevel( f58_arg0, f58_local2 ) .. "^7" ),
						param2 = f58_local5 + 1
					},
					currentProgress = PROGRESSION.GetWeaponLevel( f58_arg0, f58_local2 ),
					totalProgress = f58_local5
				} ) )
			end
		elseif f58_arg1.altChallengeAmount and f58_arg1.altCurrentProgress then
			table.insert( f58_local4, GUNSMITH.GetCamoUnlockCondition( f58_arg0, f58_local0, {
				unlockDescData = {
					desc = f58_arg1.altChallengeDesc,
					param1 = f58_arg1.altChallengeAmount,
					param2 = f58_local3
				},
				unlockProgress = {
					param1 = f58_arg1.altCurrentProgress,
					param2 = f58_arg1.altChallengeAmount
				},
				currentProgress = f58_arg1.altCurrentProgress,
				totalProgress = f58_arg1.altChallengeAmount,
				checkChallengeCompletion = f58_arg1.checkAltChallengeCompletion
			}, f58_arg1.altChallengeID ) )
		end
		if f58_arg1.challengeDesc and f58_arg1.challengeAmount and f58_arg1.currentProgress then
			table.insert( f58_local4, GUNSMITH.GetCamoUnlockCondition( f58_arg0, f58_local0, {
				unlockDescData = {
					desc = f58_arg1.challengeDesc,
					param1 = f58_arg1.challengeAmount,
					param2 = f58_local3
				},
				unlockProgress = {
					param1 = f58_arg1.currentProgress,
					param2 = f58_arg1.challengeAmount
				},
				currentProgress = f58_arg1.currentProgress,
				totalProgress = f58_arg1.challengeAmount
			}, f58_arg1.challengeID ) )
		end
	else
		table.insert( f58_local4, {
			unlockCriteria = Engine[0xED84C33EC5F01EA]( 0x5FBAAEEB2035C66 )
		} )
	end
	return f58_local4
end

GUNSMITH.GetCamoDetails = function ( f57_arg0, f57_arg1, f57_arg2 )
	local f57_local0 = LOOT.GetScriptBundleForName( LOOT.itemTypes.CAMO, f57_arg1 )
	if CONDITIONS.IsMobileOrMobileSim() then
		local f57_local1
		if not f57_arg2.isUnlocked then
			f57_local1 = GUNSMITH.GetCamoUnlockConditions( f57_arg0, f57_arg2, f57_local0[0x28887F70BF5EBA] )
			if not f57_local1 then
			
			else
				return {
					name = f57_local0[0x4BCADBA8E631B86],
					isUnlocked = f57_arg2.isUnlocked,
					unlockConditions = f57_local1
				}
			end
		end
		f57_local1 = {}
	else
		return {
			name = f57_local0[0x4BCADBA8E631B86],
			desc = f57_arg2.challengeDesc,
			totalProgress = f57_arg2.challengeAmount,
			currentProgress = f57_arg2.currentProgress,
			isUnlocked = f57_arg2.isUnlocked,
			id = f57_arg2.challengeID,
			altDesc = f57_arg2.altChallengeDesc,
			altTotalProgress = f57_arg2.altChallengeAmount,
			altCurrentProgress = f57_arg2.altCurrentProgress,
			altID = f57_arg2.altChallengeID,
			isCompletionist = f57_arg2.isCompletionist,
			checkAltChallengeCompletion = f57_arg2.checkAltChallengeCompletion,
			camoRef = f57_arg1
		}
	end
end

GUNSMITH.IsCamoChallengeDisabled = function ( f56_arg0, f56_arg1, f56_arg2, f56_arg3, f56_arg4 )
	local f56_local0 = false
	if StringTable[0x2DCF0973239E909]( CSV.gunsmithChallenges.file, CSV.gunsmithChallenges.cols.loot, f56_arg1, CSV.gunsmithChallenges.cols.id ) then
		f56_local0 = not LOOT.IsUnlockedWithID( f56_arg0, tonumber( f56_arg1 ) )
		if f56_arg2 and f56_arg3 == GUNSMITH.COMPLETIONIST_CAMO_TYPE.ORION and not PROGRESSION.AreGoldPlatAndPolyatomicCamosUnlocked( f56_arg4, f56_arg0 ) then
			f56_local0 = true
		end
	end
	return f56_local0
end

GUNSMITH.GetCamoChallengeProgression = function ( f55_arg0, f55_arg1 )
	if not f55_arg1.isUnlocked then
		local f55_local0 = f55_arg1.currentProgress
		local f55_local1 = f55_arg1.challengeAmount
		if f55_arg1.altCurrentProgress and f55_arg1.altChallengeAmount and f55_arg1.altCurrentProgress ~= f55_arg1.altChallengeAmount then
			f55_local0 = f55_arg1.altCurrentProgress
			f55_local1 = f55_arg1.altChallengeAmount
		end
		if f55_local1 and 0 < f55_local1 then
			return 1 - LUI.clamp( f55_local0 / f55_local1, 0, 1 )
		end
	end
	return nil
end

GUNSMITH.GetLootTypeForGridType = function ( f54_arg0 )
	if f54_arg0 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x910F53A9931F05E] then
		return LOOT.itemTypes.CAMO
	elseif f54_arg0 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x6A4C90337EEC619] then
		return LOOT.itemTypes.CHARM
	elseif f54_arg0 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x385B7DA5D50BDC6] then
		return LOOT.itemTypes.GUN_SCREEN
	elseif f54_arg0 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0xC9F7FC239586B7D] then
		return LOOT.itemTypes.STICKER
	elseif f54_arg0 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x594431300BA0DE4] then
		return LOOT.itemTypes.STICKER
	else
		return nil
	end
end

GUNSMITH.GetEquippedCustomizationItemForType = function ( f53_arg0, f53_arg1, f53_arg2 )
	local f53_local0 = GUNSMITH.GetLootTypeForGridType( f53_arg2 )
	local f53_local1 = nil
	if f53_arg2 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x910F53A9931F05E] then
		f53_local1 = WEAPON.GetEquippedCamo( f53_arg1 )
	elseif f53_arg2 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x6A4C90337EEC619] then
		local f53_local2 = WEAPON.GetEquippedCharm( f53_arg1 )
		if LOOT.GetScriptBundleForName( LOOT.itemTypes.CHARM, f53_local2 ) then
			f53_local1 = f53_local2
		end
	elseif f53_arg2 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x385B7DA5D50BDC6] then
		local f53_local2 = WEAPON.GetEquippedCharm( f53_arg1 )
		if LOOT.GetScriptBundleForName( LOOT.itemTypes.GUN_SCREEN, f53_local2 ) then
			f53_local1 = f53_local2
		end
	elseif f53_arg2 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0xC9F7FC239586B7D] then
		f53_local1 = WEAPON.GetEquippedStickers( f53_arg1 )
	elseif f53_arg2 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x594431300BA0DE4] then
		f53_local1 = WEAPON.GetEquippedVinyl( f53_arg1 )
	else
		return CONTENT_GRIDS.NoneValue
	end
	if f53_arg2 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0xC9F7FC239586B7D] then
		local f53_local2 = {}
		for f53_local6, f53_local7 in pairs( f53_local1 ) do
			if f53_local7 ~= CONTENT_GRIDS.NoneValue then
				f53_local2[f53_local6] = f53_local7
			end
		end
		return f53_local2
	elseif f53_arg2 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x594431300BA0DE4] then
		local f53_local2 = LOOT.GetScriptBundleForName( f53_local0, f53_local1 )
		if f53_local2 and f53_local2[0xFAB8095A1336A8F] then
			return f53_local1
		end
		return CONTENT_GRIDS.NoneValue
	end
	return f53_local1
end

GUNSMITH.GetEquippedCustomizationItems = function ( f52_arg0, f52_arg1 )
	local f52_local0 = {
		CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x910F53A9931F05E],
		CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0xC9F7FC239586B7D],
		CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x594431300BA0DE4],
		CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x6A4C90337EEC619],
		CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x385B7DA5D50BDC6]
	}
	local f52_local1 = {}
	for f52_local6, f52_local7 in ipairs( f52_local0 ) do
		local f52_local8 = GUNSMITH.GetEquippedCustomizationItemForType( f52_arg0, f52_arg1, f52_local7 )
		local f52_local5
		if f52_local8 ~= CONTENT_GRIDS.NoneValue and not f52_local8 then
			f52_local5 = f52_local8
		else
			f52_local5 = nil
		end
		f52_local1[f52_local7] = f52_local5
	end
	return f52_local1
end

GUNSMITH.GetMobileCustomizeButtonsData = function ( f51_arg0, f51_arg1 )
	local f51_local0 = GUNSMITH.GetEquippedCustomizationItems( f51_arg0, f51_arg1 )
	local f51_local1 = {}
	local f51_local2 = {}
	local f51_local3 = false
	local f51_local4 = f51_arg1.weapon:get()
	local f51_local5 = WEAPON.GetMaxStickerSlotsForWeapon( f51_local4 )
	local f51_local6 = WEAPON.SupportsCosmetics( f51_local4 )
	table.insert( f51_local1, GUNSMITH.GetMobileCustomizeButtonDataForType( f51_local0, CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x910F53A9931F05E] ) )
	if f51_local6 then
		local f51_local7 = WEAPON.GetWeaponClass( f51_local4 )
		local f51_local8 = GL_HACK.Enable_Gunscreens()
		if f51_local8 then
			f51_local8 = f51_local7 ~= WEAPON.pistolClass
		end
		if f51_local8 then
			local f51_local9 = GUNSMITH.GetMobileCustomizeButtonDataForType( f51_local0, CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x385B7DA5D50BDC6] )
			table.insert( f51_local1, f51_local9 )
			if f51_local9.isBlocked then
				table.insert( f51_local2, {
					text = customizeBlockedText
				} )
			end
		end
		local f51_local9 = GUNSMITH.GetMobileCustomizeButtonDataForType( f51_local0, CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x6A4C90337EEC619] )
		local f51_local10 = Engine[0xED84C33EC5F01EA]( 0xEC3ED1DF8109CB8 )
		table.insert( f51_local1, f51_local9 )
		if f51_local9.isBlocked then
			table.insert( f51_local2, {
				text = f51_local10
			} )
		end
	end
	if 0 < f51_local5 then
		local f51_local7 = GUNSMITH.GetMobileCustomizeButtonDataForType( f51_local0, CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x594431300BA0DE4] )
		table.insert( f51_local1, f51_local7 )
		for f51_local8 = LOADOUT.STICKER_1_SLOT, f51_local5, 1 do
			local f51_local11 = GUNSMITH.GetMobileCustomizeButtonDataForType( f51_local0, CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0xC9F7FC239586B7D], {
				stickerSlotIndex = f51_local8
			} )
			if f51_local11.isBlocked then
				f51_local3 = true
			end
			table.insert( f51_local1, f51_local11 )
		end
		if f51_local3 or f51_local7.isBlocked then
			table.insert( f51_local2, {
				text = Engine[0xED84C33EC5F01EA]( 0x21EDA66313F8CFC, f51_local5 - WEAPON.NumVinylSlots )
			} )
		else
			return f51_local1, f51_local2
		end
	end
	return f51_local1, f51_local2
end

GUNSMITH.GetMobileCustomizeButtonDataForType = function ( f50_arg0, f50_arg1, f50_arg2 )
	local f50_local0 = {}
	local f50_local1 = GUNSMITH.GetLootTypeForGridType( f50_arg1 )
	local f50_local2 = f50_arg0[f50_arg1]
	local f50_local3 = GUNSMITH.GetCustomizationSelectMenuRef()
	local f50_local4 = "&gridType=" .. f50_arg1
	local f50_local5 = 0
	local f50_local6 = f50_arg0[CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0xC9F7FC239586B7D]]
	for f50_local7 = LOADOUT.STICKER_1_SLOT, LOADOUT.STICKER_3_SLOT, 1 do
		local f50_local10 = f50_local6[f50_local7]
		if f50_local10 and f50_local10 ~= CONTENT_GRIDS.NoneValue then
			f50_local5 = f50_local5 + 1
		end
	end
	if f50_arg1 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x910F53A9931F05E] then
		f50_local0.ref = GUNSMITH[0x11893264D5DB88C][0x5135790E8393359]
		f50_local0.name = Engine[0xED84C33EC5F01EA]( 0xD9A75EC0BF4DF4D )
		f50_local3 = GUNSMITH.GetCamoCategorySelectMenuRef()
	elseif f50_arg1 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x6A4C90337EEC619] then
		f50_local0.ref = GUNSMITH[0x11893264D5DB88C][0x7328F764C0BBB70]
		f50_local0.name = Engine[0xED84C33EC5F01EA]( 0xE0537CFFFC0CBE4 )
		f50_local0.isBlocked = f50_arg0[CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x385B7DA5D50BDC6]] ~= nil
	elseif f50_arg1 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x385B7DA5D50BDC6] then
		f50_local0.ref = GUNSMITH[0x11893264D5DB88C][0xEA3A9D58A836C51]
		f50_local0.name = Engine[0xED84C33EC5F01EA]( 0x8017CED56890BFE )
		f50_local0.isBlocked = f50_arg0[CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x6A4C90337EEC619]] ~= nil
	elseif f50_arg1 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0xC9F7FC239586B7D] then
		f50_local7 = f50_arg2.stickerSlotIndex
		f50_local0.ref = GUNSMITH[0x11893264D5DB88C][0xBB55B0771781158] + f50_local7 - 3
		f50_local0.name = Engine[0xED84C33EC5F01EA]( 0xA4EAA7D17AED157, f50_local7 - 2 )
		f50_local4 = f50_local4 .. "&slotIndex=" .. f50_local7
		f50_local2 = f50_local2[f50_local7]
		if f50_local2 ~= nil or f50_arg0[CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x594431300BA0DE4]] == nil or 0 >= f50_local5 then
			f50_local9 = false
		else
			local f50_local9 = true
		end
		f50_local0.isBlocked = f50_local9
	elseif f50_arg1 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x594431300BA0DE4] then
		f50_local0.ref = GUNSMITH[0x11893264D5DB88C][0xA322451D89260FF]
		f50_local0.name = Engine[0xED84C33EC5F01EA]( 0x1F2F71F2D31EC23 )
		if f50_local2 ~= nil or 1 >= f50_local5 then
			f50_local7 = false
		else
			local f50_local7 = true
		end
		f50_local0.isBlocked = f50_local7
	end
	f50_local7 = LOOT.GetScriptBundleForName( f50_local1, f50_local2 )
	if f50_local7 then
		local f50_local8 = f50_local7[0x28887F70BF5EBA]
		if not f50_local8 then
		
		else
			f50_local0.lootID = f50_local8
			if f50_local7 then
				f50_local8 = f50_local7[0xAB612888528489A]
				if not f50_local8 then
				
				else
					f50_local0.image = f50_local8
					f50_local0.isEquipped = f50_local7 ~= nil
					if f50_local7 then
						f50_local8 = LOOT.GetItemQualityFromScriptBundle( f50_local7 )
						if not f50_local8 then
						
						else
							f50_local0.itemQualityIndex = f50_local8
							f50_local0.menuRef = f50_local3
							f50_local0.customQuery = f50_local4
							f50_local0.lootType = f50_local1
							return f50_local0
						end
					end
					f50_local8 = LOOT.Rarity.NONE
				end
			end
			f50_local8 = nil
		end
	end
	f50_local8 = nil
end

GUNSMITH.GetVinylCustomizeStickerButtonData = function ( f49_arg0, f49_arg1 )
	local f49_local0, f49_local1 = nil
	local f49_local2 = LOADOUT.VINYL_1_SLOT
	local f49_local3 = false
	for f49_local4 = LOADOUT.VINYL_1_SLOT, LOADOUT.VINYL_2_SLOT, 1 do
		local f49_local7 = f49_arg0[f49_local4]
		f49_local3 = f49_local7 ~= WEAPON.StickerNoneValue
		if f49_local3 then
			local f49_local8 = LOOT.GetScriptBundleForName( LOOT.itemTypes.STICKER, f49_local7 )
			f49_local0 = f49_local8[0xAB612888528489A]
			f49_local2 = f49_local4
			f49_local1 = LOOT.GetItemID( f49_local7 )
			break
		end
	end
	if f49_local3 or 1 >= f49_arg1 then
		f49_local4 = false
	else
		local f49_local4 = true
	end
	local f49_local5 = {
		lootID = f49_local1
	}
	if f49_local3 then
		local f49_local6 = LOOT.GetItemQualityWithID( LOOT.itemTypes.STICKER, f49_local1 )
		if not f49_local6 then
		
		else
			f49_local5.itemQualityIndex = f49_local6
			f49_local5.lootType = LOOT.itemTypes.STICKER
			f49_local5.name = Engine[0xED84C33EC5F01EA]( 0x1F2F71F2D31EC23 )
			f49_local5.image = f49_local0
			f49_local5.menuRef = GUNSMITH.GetStickerSelectMenuRef()
			f49_local5.isEquipped = f49_local3
			f49_local5.isBlocked = f49_local4
			f49_local5.options = {
				slotIndex = f49_local2
			}
			return f49_local5
		end
	end
	f49_local6 = LOOT.Rarity.NONE
end

GUNSMITH.BuildStickerTable = function ( f48_arg0 )
	local f48_local0 = {}
	local f48_local1 = 0
	local f48_local2 = 0
	local f48_local3 = Game[0x83E0D59EFF44E21]()
	if not f48_local3[0x684D9EB944CD339] then
		return f48_local0
	end
	local f48_local4 = #WEAPON.GetStickersAndVinyls()
	for f48_local5 = 1, f48_local4, 1 do
		local f48_local8 = WEAPON.STICKERS_LIST[f48_local5]
		if not f48_local8[0xAED63DFE5400760] then
			local f48_local9 = WEAPON.GetStickerDetailsData( f48_arg0._controllerIndex, f48_local8, CONDITIONS.IsMobileOrMobileSim() )
			table.insert( f48_local0, f48_local9 )
			if f48_local9.ref ~= WEAPON.StickerNoneValue then
				if f48_local9.isUnlocked then
					f48_local1 = f48_local1 + 1
					f48_local2 = f48_local2 + 1
				end
				if not f48_local9.isPremium then
					f48_local2 = f48_local2 + 1
				end
			end
		end
	end
	return f48_local0
end

GUNSMITH.BuildAndFilterStickerTable = function ( f47_arg0 )
	local f47_local0 = Game[0x83E0D59EFF44E21]()
	if not f47_local0[0x684D9EB944CD339] then
		return 
	end
	local f47_local1 = #WEAPON.STICKERS_LIST
	local f47_local2 = f47_arg0._slotIndex >= LOADOUT.STICKER_1_SLOT
	local f47_local3 = f47_arg0._slotIndex <= LOADOUT.VINYL_2_SLOT
	for f47_local4 = 1, f47_local1, 1 do
		local f47_local7 = WEAPON.STICKERS_LIST[f47_local4]
		if not f47_local7[0xAED63DFE5400760] then
			local f47_local8 = WEAPON.GetStickerDetailsData( f47_arg0._controllerIndex, f47_local7, CONDITIONS.IsMobileOrMobileSim() )
			local f47_local9
			if f47_local3 then
				f47_local9 = f47_local3
			else
				f47_local9 = f47_local8.isVinyl
			end
			local f47_local10
			if f47_local2 then
				f47_local10 = f47_local2
			else
				f47_local10 = not f47_local8.isVinyl
			end
			if f47_local8.isUnlocked and (f47_local10 or f47_local9) then
				table.insert( f47_arg0._stickerTable, f47_local8 )
			end
		end
	end
end

GUNSMITH.GetCustomizationItemsGridButtonConfig = function ( f46_arg0, f46_arg1, f46_arg2 )
	local f46_local0 = CONTENT_GRIDS.GetMetaDataTable( f46_arg0 )
	local f46_local1 = f46_local0.gridType
	local f46_local2 = f46_arg2.ref
	local f46_local3 = f46_local0.favoriteItemsRefs
	local f46_local4 = not f46_arg2.isUnlocked
	local f46_local5 = f46_local3[f46_local2]
	if not CONTENT_GRIDS.IsItemEquipped( f46_arg0, f46_local2 ) or not CONTENT_GRIDS.BUTTON_STATE_ANIMS.EQUIPPED then
		local f46_local6 = CONTENT_GRIDS.BUTTON_STATE_ANIMS.NORMAL
	end
	if f46_local4 then
		local f46_local7 = CONTENT_GRIDS.BUTTON_STATE_ANIMS.LOCKED
		if not f46_local7 then
			local f46_local6 = f46_local7
		else
			
		end
	end
	if f46_local2 == CONTENT_GRIDS.NoneValue then
		return {
			ref = f46_local2,
			labels = {
				primaryText = 0x582A97E6B28D01C
			},
			animation = {
				focus = CONTENT_GRIDS.BUTTON_FOCUS_ANIMS.UNFOCUSED,
				state = f46_local6
			},
			image = {
				textureName = f46_arg2.image or 0xED79000D4F83EF0,
				imageSize = CONTENT_GRIDS.IMAGE_SIZE.SIZE_1X1
			}
		}
	end
	local f46_local7 = LOOT.GetItemID( f46_local2 )
	local f46_local8 = f46_arg2.itemQualityIndex
	local f46_local9
	if f46_local8 then
		f46_local9 = f46_local8
	else
		f46_local9 = f46_local8 ~= LOOT.Rarity.NONE
	end
	local f46_local10 = nil
	if f46_local9 then
		f46_local10 = MobileStoreUtils.GetProductAvailabilityDataTable( {
			assetName = f46_arg1,
			id = f46_local7,
			rarity = f46_local8
		} )
		f46_local10.isEquippingType = true
	end
	local f46_local11 = {
		ref = f46_local2,
		labels = {
			primaryText = f46_arg2.name
		},
		animation = {
			focus = CONTENT_GRIDS.BUTTON_FOCUS_ANIMS.UNFOCUSED,
			state = f46_local6
		},
		image = {
			textureName = f46_arg2.image,
			size = CONTENT_GRIDS.IMAGE_SIZE.SIZE_1X1
		},
		loot = {
			isLocked = f46_local4,
			isFavorite = f46_local5,
			availabilityData = f46_local10
		}
	}
	if f46_local1 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x910F53A9931F05E] then
		f46_local11.image.size = CONTENT_GRIDS.IMAGE_SIZE.SIZE_FULL
		f46_local11.labels.primaryText = ""
	end
	return f46_local11
end

GUNSMITH.GetEquippableItemDetails = function ( f45_arg0, f45_arg1, f45_arg2, f45_arg3 )
	local f45_local0 = CONTENT_GRIDS.GetMetaDataTable( f45_arg0 )
	if f45_arg2 == CONTENT_GRIDS.NoneValue then
		local f45_local1 = {
			name = 0x582A97E6B28D01C,
			isUnlocked = true,
			ref = f45_arg2
		}
		local f45_local2
		if f45_arg3 then
			f45_local2 = f45_arg3
		else
			f45_local2 = f45_arg3[0xAB612888528489A]
		end
		f45_local1.image = f45_local2
		f45_local1.lootID = LOOT.emptyID
		f45_local1.unlockConditions = {}
		return f45_local1
	end
	local f45_local1 = {
		ref = f45_arg2,
		isEquipped = CONTENT_GRIDS.IsItemEquipped( f45_arg0, f45_arg2 ),
		name = f45_arg3[0x4BCADBA8E631B86] or "",
		image = f45_arg3[0xAB612888528489A],
		category = f45_arg3[0xBD2E7FFB1224E91],
		hideInUI = f45_arg3[0xAED63DFE5400760],
		unlockType = f45_arg3[0xCB47FF127258EDD],
		unlockString = f45_arg3[0x303083A60947F08],
		availableOffline = f45_arg3[0x5B6BD358EE022AF],
		availableProjects = f45_arg3[0x429E8B8C45B9CBA]
	}
	local f45_local2 = 0
	local f45_local3 = 0
	f45_local1.isPremium = false
	f45_local1.event = f45_local3
	f45_local1.season = f45_local2
	f45_local1.lootID = f45_arg3[0x28887F70BF5EBA] or 0
	f45_local1.desc = f45_arg3[0xCC44970C8397929]
	f45_local1.isUnlocked = LOOT.IsUnlocked( f45_arg1, f45_local0.lootType, f45_arg2 )
	if f45_local1.isUnlocked then
		f45_local2 = ""
	else
		f45_local2 = PROGRESSION.GetUnlockText( f45_local0.lootType, f45_arg2 )
	end
	f45_local1.unlockCriteria = f45_local2
	f45_local1.lootType = f45_local0.lootType
	f45_local1.itemQualityIndex = LOOT.GetItemQualityFromScriptBundle( f45_arg3 )
	if f45_local0.gridType == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x385B7DA5D50BDC6] then
		f45_local1.rttWidget = f45_arg3[0x287C1DA96264CE6]
		f45_local1.rttWidth = f45_arg3[0x1656AA6615672BF] or 512
		f45_local1.rttHeight = f45_arg3[0x683F393A1693D22] or 512
		f45_local1.isVO = f45_arg3[0x73AD84EF8BA9EED] == "VO"
	elseif f45_local0.gridType == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x594431300BA0DE4] then
		f45_local1.isVinyl = true
	elseif f45_local0.gridType == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x910F53A9931F05E] then
		f45_local2 = GUNSMITH.GetCamoChallenges( f45_arg1, f45_arg2, {
			weaponRef = f45_local0.weaponRef,
			camoData = f45_arg3
		} )
		if not f45_local2.isUnlocked then
			f45_local3 = GUNSMITH.GetCamoUnlockConditions( f45_arg1, f45_local2, f45_arg3[0x28887F70BF5EBA] )
			if not f45_local3 then
			
			else
				f45_local1.isUnlocked = f45_local2.isUnlocked
				f45_local1.unlockConditions = f45_local3
				f45_local1.unlockCriteria = nil
			end
		end
		f45_local3 = {}
	end
	return f45_local1
end

GUNSMITH[0x39FE74B4A7541C6] = function ( f44_arg0, f44_arg1 )
	local f44_local0, f44_local1 = nil
	if f44_arg1.isBlocked then
		f44_local0 = "mgl_ui_icon_blocked_shadow"
		f44_local1 = CONTENT_GRIDS.BUTTON_STATE_ANIMS.BLOCKED
	else
		f44_local0 = f44_arg1.image
		f44_local1 = CONTENT_GRIDS.BUTTON_STATE_ANIMS.EQUIPPED
		if String.IsNilOrEmpty( f44_local0 ) then
			f44_local0 = "mgl_ui_icon_add_shadow"
			f44_local1 = CONTENT_GRIDS.BUTTON_STATE_ANIMS.NORMAL
		end
	end
	local f44_local2 = f44_arg1.itemQualityIndex
	local f44_local3
	if f44_local2 then
		f44_local3 = f44_local2
	else
		f44_local3 = f44_local2 ~= LOOT.Rarity.NONE
	end
	local f44_local4 = nil
	if f44_local3 then
		f44_local4 = MobileStoreUtils.GetProductAvailabilityDataTable( {
			id = f44_arg1.lootID,
			rarity = f44_local2
		} )
		f44_local4.isEquippingType = true
	end
	return {
		ref = f44_arg1.ref,
		labels = {
			primaryLabelLocalized = true,
			primaryText = f44_arg1.name
		},
		image = {
			textureName = f44_local0,
			size = CONTENT_GRIDS.IMAGE_SIZE.SIZE_1X1
		},
		animation = {
			disableFocus = true,
			focus = CONTENT_GRIDS.BUTTON_FOCUS_ANIMS.UNFOCUSED,
			state = f44_local1
		},
		loot = {
			availabilityData = f44_local4
		}
	}
end

GUNSMITH.BuildCharmTable = function ( f43_arg0 )
	local f43_local0 = {}
	table.insert( f43_local0, {
		name = 0x582A97E6B28D01C,
		isUnlocked = true,
		ref = WEAPON.CharmNoneValue
	} )
	local f43_local1 = 0
	local f43_local2 = 0
	local f43_local3 = f43_arg0._isGunscreen and WEAPON.GetGunscreens() or WEAPON.GetCharms()
	if not f43_local3 then
		return f43_local0
	end
	local f43_local4 = #f43_local3
	for f43_local5 = 1, f43_local4, 1 do
		local f43_local8 = {}
		local f43_local9 = f43_local3[f43_local5]
		if f43_local9 and not f43_local9[0xAED63DFE5400760] then
			f43_local8 = WEAPON.GetCharmDetailsData( f43_arg0._controllerIndex, f43_local9, f43_arg0._isGunscreen )
			table.insert( f43_local0, f43_local8 )
			if f43_local8.ref ~= WEAPON.CharmNoneValue then
				if f43_local8.isUnlocked then
					f43_local1 = f43_local1 + 1
					f43_local2 = f43_local2 + 1
				end
				if not f43_local8.isPremium then
					f43_local2 = f43_local2 + 1
				end
			end
		end
	end
	return f43_local0
end

GUNSMITH.MobileUpdateCustomizeButtonRarity = function ( f42_arg0, f42_arg1 )
	local f42_local0 = nil
	local f42_local1 = f42_arg1.itemQualityIndex
	if f42_local1 then
		f42_local1 = f42_arg1.itemQualityIndex ~= LOOT.Rarity.NONE
	end
	if f42_local1 then
		f42_local0 = MobileStoreUtils.GetProductAvailabilityDataTable( {
			id = f42_arg1.lootID,
			rarity = f42_arg1.itemQualityIndex
		} )
		f42_local0.isEquippingType = true
		f42_arg0:SetupProductAvailability( f42_local0 )
	end
	f42_arg0:SetVisible( f42_local1 )
end

GUNSMITH.OpenWeaponPreviewMenu = function ( f41_arg0, f41_arg1, f41_arg2 )
	if not f41_arg2 then
		f41_arg2 = {}
	end
	f41_arg2.weaponTable = WEAPON.GenerateWeaponTable( f41_arg0 )
	f41_arg2.weaponPlayerData = f41_arg0
	if 0 < tonumber( f41_arg2.weaponTable.variantID ) then
		f41_arg2.weaponTable.lootName = WEAPON.GetLootWeaponName( f41_arg2.weaponTable.weapon, f41_arg2.weaponTable.lootID )
	end
	LUI.FlowManager.RequestAddMenu( GUNSMITH.GetWeaponPreviewMenuRef(), true, f41_arg1, false, f41_arg2, true )
	if f41_arg2.shouldPlaySound then
		Engine[0xC4146BA76D0F982]( CoD.SFX.MouseClick )
	end
end

GUNSMITH.ConvertProtuningPlayerData = function ( f40_arg0, f40_arg1 )
	local f40_local0, f40_local1 = LOADOUT.GetValidLoadouts( f40_arg0, f40_arg1 )
	for f40_local2 = 0, f40_local1 - 1, 1 do
		local f40_local5 = f40_local0[f40_local2].loadout
		for f40_local6 = 0, 1, 1 do
			local f40_local9 = f40_local5.weaponSetups[f40_local6]
			if f40_local9.blueprintTuned:get() ~= 0 then
				for f40_local10 = 0, #f40_local9.attachmentSetup - 1, 1 do
					f40_local9.attachmentSetup[f40_local10].hasBPTune:set( GUNSMITH.CAN_PRO_TUNE )
				end
			end
		end
	end
end

GUNSMITH.GetWeaponStatsExpandedData = function ( f39_arg0 )
	local f39_local0 = PLAYER_DATA.IO( f39_arg0, CoD.StatsGroup.NonGame )
	return f39_local0.isWeaponStatsExpanded:get() == 1
end

GUNSMITH.SetWeaponStatsExpandedData = function ( f38_arg0, f38_arg1 )
	local f38_local0 = PLAYER_DATA.IO( f38_arg0, CoD.StatsGroup.NonGame )
	local f38_local1 = f38_local0.isWeaponStatsExpanded
	local f38_local2 = f38_local1
	f38_local1 = f38_local1.set
	local f38_local3
	if f38_arg1 then
		f38_local3 = 1
	else
		f38_local3 = 0
	end
	f38_local1( f38_local2, f38_local3 )
	ACTIONS.UploadStats( nil, f38_arg0 )
end

GUNSMITH.IsSaveWeaponMenuAllowed = function ( f37_arg0 )
	if not f37_arg0 and not IsPrivateMatch() and not CONDITIONS.IsPrivateMatchInMenuStack() and not CONDITIONS.AreCDLRulesActive() and not CONDITIONS.IsInOfflineMenus() then
		return true
	else
		return false
	end
end

GUNSMITH.SetupSaveWeaponPopup = function ( f32_arg0, f32_arg1, f32_arg2 )
	if not GUNSMITH.AllowSaveCustomWeapon() or not GUNSMITH.IsSaveWeaponMenuAllowed( f32_arg2.forShowcase ) then
		
	end
	f32_arg0._SaveWeaponPopup = f32_arg0:AddGamepadEventCallback( "button_left_trigger", function ( f35_arg0, f35_arg1 )
		local f35_local0 = f35_arg1.controller or f32_arg0
		local f35_local1 = f35_arg0._weaponPlayerData
		local f35_local2 = f35_arg0._weaponTable
		local f35_local3 = f35_local2.weapon
		local f35_local4 = GUNSMITH.maxMods
		local f35_local5 = GUNSMITH.CountAvailableCustomModSlots( f35_local0, f35_local3, f35_local2.lootID )
		local f35_local6 = f35_local4 - f35_local5
		local f35_local7 = GUNSMITH.GetCustomModSlot( f35_local2.blueprintName )
		if not f35_local7 then
			f35_local7 = GUNSMITH.GetFirstFreeCustomModSlot( f35_local0, f35_local3, f35_local2.lootID )
		end
		local f35_local8 = GUNSMITH.GetCustomModSlot( f35_local2.blueprintName )
		local f35_local9 = Engine[0x29DFACECF20DE0E]( f35_local0 )
		local f35_local10 = false
		local f35_local11 = ""
		if f35_local7 == f35_local8 then
			f35_local11 = GUNSMITH.GetCustomModName( f35_local2.blueprintName )
			f35_local10 = true
		end
		if f35_local5 <= 0 and String.IsNilOrEmpty( f35_local11 ) then
			LUI.FlowManager.RequestErrorPopup( f35_local0, ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xDBEB0C43ECC2224, f35_local6, f35_local4 ) ), ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x9908B333647D894, WEAPON.GetName( f35_local3 ) ) ) )
		else
			local f35_local12 = {
				allowEmpty = false,
				verifyString = true,
				title = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x1F3FF546EEDC481, WEAPON.GetName( f35_local3 ) ) ),
				maxInputStringLength = LOADOUT.MAX_LOADOUT_NAME_CHARACTERS,
				description = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xDBEB0C43ECC2224, f35_local6, f35_local4 ) ),
				confirmButtonText = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x688D1D57B7905C5 ) ),
				defaultValue = f35_local11
			}
			local f35_local13 = CONDITIONS.IsUserSignedInDemonware( f35_local0 )
			if not f35_local13 then
				f35_local13 = Engine[0xDABAA414ED6AABD]( f35_local0 ) ~= CoD.StatsSource.OFFLINE
			end
			f35_local12.filterProfanity = f35_local13
			f35_local12.textEditCompleteFunc = function ( f36_arg0, f36_arg1 )
				local f36_local0 = f36_arg0._controllerIndex or f36_arg1.controllerIndex
				assert( f36_local0 )
				if not f36_arg1.cancelled then
					local f36_local1, f36_local2 = TEXT_EDIT.ValidateString( f36_local0, f36_arg1.text )
					if not String.IsNilOrEmpty( f35_arg0 ) then
						if f36_arg1.text == f35_arg0 then
							f35_arg0 = f35_arg0
						elseif f36_arg1.text ~= f35_arg0 and 0 <= f35_arg0 then
							f35_arg0 = GUNSMITH.GetFirstFreeCustomModSlot( f35_arg0, f35_arg0, f35_arg0.lootID )
						else
							f36_local1 = false
							f36_local2 = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x9908B333647D894, WEAPON.GetName( f35_arg0 ) ) .. "\n" .. ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xDBEB0C43ECC2224, f35_arg0, f35_arg0 ) ) )
						end
					end
					local f36_local3 = f35_arg0.camo:get()
					if f36_local3 ~= f35_arg0.camo or not WEAPON.IsCamoUnlocked( f35_arg0, f36_local3, f35_arg0 ) then
						WEAPON.ClearWeaponCamo( f35_arg0, f35_arg0 )
						local f36_local4 = WEAPON.GetWeaponModel( f35_arg0, FrontEndScene.ClientWeapons.Preview, CSV.weaponOffsets.previewFile )
						local f36_local5 = WEAPON.GetWeaponModelName( f35_arg0.weapon, f35_arg0, {
							includeCamos = true,
							includeAttachments = true,
							includeStickers = true,
							controllerIndex = f35_arg0
						} )
						FrontEndScene.RequestWeaponViewModels( {
							f36_local5
						}, f35_arg0 )
						WEAPON.SetModelIfLoaded( f35_arg0, f36_local4, f36_local5 )
						LUI.FlowManager.RequestErrorPopup( f36_local0, ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x2FFE8782D09E354 ) ), ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xF83A5D39E4FDD0 ) ) )
						return 
					elseif f36_local1 then
						local f36_local4 = ToUpperCase( f36_arg1.text )
						if f35_arg0 == 0 and f35_arg0 ~= f36_local4 then
							LUI.FlowManager.RequestErrorPopup( f35_arg0, ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xDBEB0C43ECC2224, f35_arg0, f35_arg0 ) ), ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x9908B333647D894, WEAPON.GetName( f35_arg0 ) ) ) )
							return 
						elseif f35_arg0 ~= Engine[0x29DFACECF20DE0E]( f35_arg0 ) then
							return 
						end
						f35_arg0.blueprintName = GUNSMITH.GenerateModName( f36_local4, f35_arg0 )
						if not GUNSMITH.SaveAsCustomMod( f35_arg0, f35_arg0, f35_arg0, f35_arg0 ) then
							return 
						end
						WEAPON.EquipModification( f35_arg0, f35_arg0, f35_arg0, true )
						f35_arg0 = f36_local4
						LUI.ToastManager.CreateToast( f35_arg0, LUI.ToastManager.StandardEmphasisToast( f35_arg0, ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x938838286796E2A, WEAPON.GetName( f35_arg0 ) ) ), LUI.ToastManager.ToastNotificationType.Player ) )
						if f36_arg0.GunsmithWeaponDetails then
							f36_arg0.GunsmithWeaponDetails.BaseWeaponName:setText( WEAPON.GetName( f35_arg0 ) )
							local f36_local6 = f36_arg0.GunsmithWeaponDetails.BaseWeaponName
							f36_arg0.GunsmithWeaponDetails.WeaponName:setText( f36_local4 )
							local f36_local7 = f36_arg0.GunsmithWeaponDetails.WeaponName
						end
					else
						LUI.FlowManager.RequestErrorPopup( f36_local0, Engine[0xED84C33EC5F01EA]( 0x1CCA5C59ECE1EA6 ), f36_local2 )
					end
				end
			end
			
			if f35_arg1.qualifier == "gamepad" or f35_arg1.qualifier == "keyboard" then
				Engine[0xC4146BA76D0F982]( SOUND_SETS.default.action )
			end
			ACTIONS.OpenGenericEditBoxPopup( f35_arg0, f35_local0, f35_local12 )
		end
	end )
	f32_arg0:addEventHandler( "attachment_count_update", function ( f34_arg0, f34_arg1 )
		f34_arg0._weaponTable = f34_arg1.weaponTable
	end )
	f32_arg0:addEventHandler( "update_attachments", function ( f33_arg0, f33_arg1 )
		f33_arg0._weaponTable = f33_arg1.weaponTable
	end )
end

GUNSMITH.AddHelperBarSaveWeaponButton = function ( f31_arg0, f31_arg1, f31_arg2 )
	if f31_arg0.HelperBar and GUNSMITH.AllowSaveCustomWeapon() and GUNSMITH.IsSaveWeaponMenuAllowed( f31_arg2 ) then
		f31_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			side = "left",
			priority = 1,
			replaceTop = true,
			button_ref = "button_left_trigger",
			helper_text = Engine[0xED84C33EC5F01EA]( 0x9ABCD1A3258EFA ),
			helper_definition = Engine[0xED84C33EC5F01EA]( 0xC2F34DEDB518C9E )
		} )
	end
end

GUNSMITH.SetupGunsmithScene = function ( f18_arg0, f18_arg1, f18_arg2 )
	local f18_local0 = function ( f30_arg0, f30_arg1 )
		return ClientModel[0x9088CC2C1E6A1E9]( CLIENT_MODEL.GetClientModelIndex( f30_arg0 ), f30_arg1 )
	end
	
	local f18_local1 = function ( f29_arg0, f29_arg1, f29_arg2, f29_arg3 )
		local f29_local0 = CLIENT_MODEL.GetClientModelIndex( f29_arg1 )
		local f29_local1 = ClientModel[0x7FE4C5AFE1F4377]( f29_local0 )
		local f29_local2 = Engine[0xC3B7925CCAC9430]( f29_arg0, f29_arg2, f29_arg3 )
		f29_local1.yAngle = f29_local2.yAngle
		f29_local1.xAngle = f29_local2.xAngle
		ClientModel[0xEFA1738E096A743]( f29_local0, f29_local1 )
	end
	
	local f18_local2 = function ( f24_arg0, f24_arg1, f24_arg2 )
		local f24_local0 = {
			base = CLIENT_MODEL.coreMPModels.GUN_VISE_MAGWELL_BASE,
			insert = CLIENT_MODEL.coreMPModels.GUN_VISE_MAGWELL_INSERT
		}
		local f24_local1 = ClientWeapon[0x5DD69014A9C290]( FrontEndScene.ClientWeapons.Preview )
		ClientWeapon[0x8B8A4E0355DF0C0]( FrontEndScene.ClientWeapons.Preview, 0, 0, 0 )
		local f24_local2
		if f24_arg2 then
			f24_local2 = f24_arg0.GunsmithWeaponDetails:Wait( 5 )
			if not f24_local2 then
			
			else
				f24_local2.onComplete = function ()
					GUNSMITH.UpdateAmmoModel( f24_arg0, f24_arg0 )
					local f25_local0 = Engine[0xF3C157C48E60860]( f24_arg0, f24_arg0, "offset_vise_attach" )
					local f25_local1 = Engine[0xF3C157C48E60860]( f24_arg0, f24_arg0, WEAPON.SilencedFlashTag )
					local f25_local2 = Engine[0xF3C157C48E60860]( f24_arg0, f24_arg0, WEAPON.MuzzleFlashTag )
					local f25_local3
					if f25_local1 then
						f25_local3 = WEAPON.SilencedFlashTag
						if not f25_local3 then
							if f25_local2 then
								f25_local3 = WEAPON.MuzzleFlashTag
								if not f25_local3 then
								
								else
									local f25_local4 = Engine[0xC3B7925CCAC9430]( f24_arg0, f24_arg0, GUNSMITH.defaultTag )
									local f25_local5 = Engine[0xC3B7925CCAC9430]( f24_arg0, f24_arg0, f25_local3 )
									local f25_local6 = Engine[0xC3B7925CCAC9430]( f24_arg0, f24_arg0, WEAPON.RearTag )
									local f25_local7 = f24_arg0( CLIENT_MODEL.coreMPModels.GUN_VISE_BASE, CLIENT_MODEL.coreMPModels.GUN_VISE_BASE.tagOrigin )
									local f25_local8 = (f25_local5.xPosition + f25_local6.xPosition) / 2
									local f25_local9 = (f25_local5.yPosition + f25_local6.yPosition) / 2
									local f25_local10 = f25_local4.xPosition - f25_local8
									local f25_local11 = f25_local4.yPosition - f25_local9
									local f25_local12 = f25_local4.xPosition - f25_local7.xPosition + f25_local10
									local f25_local13 = f25_local4.yPosition - f25_local7.yPosition + f25_local11
									local f25_local14 = Engine[0xC3B7925CCAC9430]( f24_arg0, f24_arg0, "tag_mag_attach" )
									local f25_local15 = f24_arg0( f24_arg0.insert, f24_arg0.insert.tagGunAttach )
									local f25_local16 = f25_local15.zPosition - f25_local14.zPosition + GUNSMITH.GetWeaponZOffset( f24_arg0, f24_arg0, f24_arg0._weaponTable.attachments, true )
									DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.xOffset:SetValue( f24_arg0, f25_local12 )
									DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.yOffset:SetValue( f24_arg0, f25_local13 )
									DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.zOffset:SetValue( f24_arg0, f25_local16 )
									ClientWeapon[0x8B8A4E0355DF0C0]( FrontEndScene.ClientWeapons.Preview, f25_local12, f25_local13, f25_local16 )
									CLIENT_MODEL.HideModels( f24_arg0 )
									f24_arg0( f24_arg0, f24_arg0.insert, f24_arg0, "offset_vise_attach" )
									local f25_local17 = f24_arg0 and f24_arg0.GunsmithWeaponDetails:Wait( 5 ) or f24_arg0:Wait( 5 )
									f25_local17.onComplete = function ()
										local f26_local0 = StringTable[0x2DCF0973239E909]( CSV.attachmentCategories.file, CSV.attachmentCategories.cols.ref, "receiver", CSV.attachmentCategories.cols.bone )
										local f26_local1 = Engine[0xC3B7925CCAC9430]( f25_local0, f25_local0, f26_local0 )
										local f26_local2 = "attach_zoom," .. "receiver" .. "," .. f26_local0 .. "," .. f26_local1.xPosition .. "," .. f26_local1.yPosition .. "," .. f26_local1.zPosition .. "," .. f26_local1.xAngle .. "," .. f26_local1.yAngle .. "," .. f26_local1.zAngle
										Engine[0x6055C55456F05DF]( f26_local2, 1 )
										if f25_local0 then
											local f26_local3 = f25_local0.GunsmithWeaponDetails:Wait( 5 )
											f26_local3.onComplete = function ()
												GUNSMITH.SetGunsmithWeaponOffset( f26_local0 )
												GUNSMITH.SetGunsmithCameraPosition( f26_local0 )
											end
											
										end
										DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.tagDataString:SetValue( f25_local0, f26_local2 )
										local f26_local3 = f25_local0( f25_local0.insert, f25_local0.insert.tagOrigin )
										local f26_local4 = f25_local0( f25_local0.insert, f25_local0.insert.tagGunAttach )
										local f26_local5 = Engine[0xC3B7925CCAC9430]( f25_local0, f25_local0, "offset_vise_attach" )
										f26_local3.xPosition = f26_local5.xPosition - f26_local4.xPosition - f26_local3.xPosition
										f26_local3.yPosition = f26_local5.yPosition - f26_local4.yPosition - f26_local3.yPosition
										ClientModel[0x9C89C00DF9B85ED]( CLIENT_MODEL.GetClientModelIndex( f25_local0.insert ), f26_local3 )
										local f26_local6 = f25_local0 and f25_local0.GunsmithWeaponDetails:Wait( 5 ) or f25_local0:Wait( 5 )
										f26_local6.onComplete = function ()
											local f27_local0 = f26_local0( f26_local0.base, f26_local0.base.tagOrigin )
											f26_local0 = f26_local0( f26_local0.insert, f26_local0.insert.tagOrigin )
											f27_local0.xPosition = f26_local0.xPosition
											f27_local0.yPosition = f26_local0.yPosition
											ClientModel[0x9C89C00DF9B85ED]( CLIENT_MODEL.GetClientModelIndex( f26_local0.base ), f27_local0 )
										end
										
									end
									
								end
							end
							f25_local3 = WEAPON.FlashTag
						end
					else
						if f25_local2 then
							f25_local3 = WEAPON.MuzzleFlashTag
							if not f25_local3 then
							
							else
								local f25_local4 = Engine[0xC3B7925CCAC9430]( f24_arg0, f24_arg0, GUNSMITH.defaultTag )
								local f25_local5 = Engine[0xC3B7925CCAC9430]( f24_arg0, f24_arg0, f25_local3 )
								local f25_local6 = Engine[0xC3B7925CCAC9430]( f24_arg0, f24_arg0, WEAPON.RearTag )
								local f25_local7 = f24_arg0( CLIENT_MODEL.coreMPModels.GUN_VISE_BASE, CLIENT_MODEL.coreMPModels.GUN_VISE_BASE.tagOrigin )
								local f25_local8 = (f25_local5.xPosition + f25_local6.xPosition) / 2
								local f25_local9 = (f25_local5.yPosition + f25_local6.yPosition) / 2
								local f25_local10 = f25_local4.xPosition - f25_local8
								local f25_local11 = f25_local4.yPosition - f25_local9
								local f25_local12 = f25_local4.xPosition - f25_local7.xPosition + f25_local10
								local f25_local13 = f25_local4.yPosition - f25_local7.yPosition + f25_local11
								local f25_local14 = Engine[0xC3B7925CCAC9430]( f24_arg0, f24_arg0, "tag_mag_attach" )
								local f25_local15 = f24_arg0( f24_arg0.insert, f24_arg0.insert.tagGunAttach )
								local f25_local16 = f25_local15.zPosition - f25_local14.zPosition + GUNSMITH.GetWeaponZOffset( f24_arg0, f24_arg0, f24_arg0._weaponTable.attachments, true )
								DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.xOffset:SetValue( f24_arg0, f25_local12 )
								DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.yOffset:SetValue( f24_arg0, f25_local13 )
								DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.zOffset:SetValue( f24_arg0, f25_local16 )
								ClientWeapon[0x8B8A4E0355DF0C0]( FrontEndScene.ClientWeapons.Preview, f25_local12, f25_local13, f25_local16 )
								CLIENT_MODEL.HideModels( f24_arg0 )
								f24_arg0( f24_arg0, f24_arg0.insert, f24_arg0, "offset_vise_attach" )
								local f25_local17 = f24_arg0 and f24_arg0.GunsmithWeaponDetails:Wait( 5 ) or f24_arg0:Wait( 5 )
								f25_local17.onComplete = function ()
									local f26_local0 = StringTable[0x2DCF0973239E909]( CSV.attachmentCategories.file, CSV.attachmentCategories.cols.ref, "receiver", CSV.attachmentCategories.cols.bone )
									local f26_local1 = Engine[0xC3B7925CCAC9430]( f25_local0, f25_local0, f26_local0 )
									local f26_local2 = "attach_zoom," .. "receiver" .. "," .. f26_local0 .. "," .. f26_local1.xPosition .. "," .. f26_local1.yPosition .. "," .. f26_local1.zPosition .. "," .. f26_local1.xAngle .. "," .. f26_local1.yAngle .. "," .. f26_local1.zAngle
									Engine[0x6055C55456F05DF]( f26_local2, 1 )
									if f25_local0 then
										local f26_local3 = f25_local0.GunsmithWeaponDetails:Wait( 5 )
										f26_local3.onComplete = function ()
											GUNSMITH.SetGunsmithWeaponOffset( f26_local0 )
											GUNSMITH.SetGunsmithCameraPosition( f26_local0 )
										end
										
									end
									DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.tagDataString:SetValue( f25_local0, f26_local2 )
									local f26_local3 = f25_local0( f25_local0.insert, f25_local0.insert.tagOrigin )
									local f26_local4 = f25_local0( f25_local0.insert, f25_local0.insert.tagGunAttach )
									local f26_local5 = Engine[0xC3B7925CCAC9430]( f25_local0, f25_local0, "offset_vise_attach" )
									f26_local3.xPosition = f26_local5.xPosition - f26_local4.xPosition - f26_local3.xPosition
									f26_local3.yPosition = f26_local5.yPosition - f26_local4.yPosition - f26_local3.yPosition
									ClientModel[0x9C89C00DF9B85ED]( CLIENT_MODEL.GetClientModelIndex( f25_local0.insert ), f26_local3 )
									local f26_local6 = f25_local0 and f25_local0.GunsmithWeaponDetails:Wait( 5 ) or f25_local0:Wait( 5 )
									f26_local6.onComplete = function ()
										local f27_local0 = f26_local0( f26_local0.base, f26_local0.base.tagOrigin )
										f26_local0 = f26_local0( f26_local0.insert, f26_local0.insert.tagOrigin )
										f27_local0.xPosition = f26_local0.xPosition
										f27_local0.yPosition = f26_local0.yPosition
										ClientModel[0x9C89C00DF9B85ED]( CLIENT_MODEL.GetClientModelIndex( f26_local0.base ), f27_local0 )
									end
									
								end
								
							end
						end
						f25_local3 = WEAPON.FlashTag
					end
					local f25_local4 = Engine[0xC3B7925CCAC9430]( f24_arg0, f24_arg0, GUNSMITH.defaultTag )
					local f25_local5 = Engine[0xC3B7925CCAC9430]( f24_arg0, f24_arg0, f25_local3 )
					local f25_local6 = Engine[0xC3B7925CCAC9430]( f24_arg0, f24_arg0, WEAPON.RearTag )
					local f25_local7 = f24_arg0( CLIENT_MODEL.coreMPModels.GUN_VISE_BASE, CLIENT_MODEL.coreMPModels.GUN_VISE_BASE.tagOrigin )
					local f25_local8 = (f25_local5.xPosition + f25_local6.xPosition) / 2
					local f25_local9 = (f25_local5.yPosition + f25_local6.yPosition) / 2
					local f25_local10 = f25_local4.xPosition - f25_local8
					local f25_local11 = f25_local4.yPosition - f25_local9
					local f25_local12 = f25_local4.xPosition - f25_local7.xPosition + f25_local10
					local f25_local13 = f25_local4.yPosition - f25_local7.yPosition + f25_local11
					local f25_local14 = Engine[0xC3B7925CCAC9430]( f24_arg0, f24_arg0, "tag_mag_attach" )
					local f25_local15 = f24_arg0( f24_arg0.insert, f24_arg0.insert.tagGunAttach )
					local f25_local16 = f25_local15.zPosition - f25_local14.zPosition + GUNSMITH.GetWeaponZOffset( f24_arg0, f24_arg0, f24_arg0._weaponTable.attachments, true )
					DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.xOffset:SetValue( f24_arg0, f25_local12 )
					DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.yOffset:SetValue( f24_arg0, f25_local13 )
					DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.zOffset:SetValue( f24_arg0, f25_local16 )
					ClientWeapon[0x8B8A4E0355DF0C0]( FrontEndScene.ClientWeapons.Preview, f25_local12, f25_local13, f25_local16 )
					CLIENT_MODEL.HideModels( f24_arg0 )
					f24_arg0( f24_arg0, f24_arg0.insert, f24_arg0, "offset_vise_attach" )
					local f25_local17 = f24_arg0 and f24_arg0.GunsmithWeaponDetails:Wait( 5 ) or f24_arg0:Wait( 5 )
					f25_local17.onComplete = function ()
						local f26_local0 = StringTable[0x2DCF0973239E909]( CSV.attachmentCategories.file, CSV.attachmentCategories.cols.ref, "receiver", CSV.attachmentCategories.cols.bone )
						local f26_local1 = Engine[0xC3B7925CCAC9430]( f25_local0, f25_local0, f26_local0 )
						local f26_local2 = "attach_zoom," .. "receiver" .. "," .. f26_local0 .. "," .. f26_local1.xPosition .. "," .. f26_local1.yPosition .. "," .. f26_local1.zPosition .. "," .. f26_local1.xAngle .. "," .. f26_local1.yAngle .. "," .. f26_local1.zAngle
						Engine[0x6055C55456F05DF]( f26_local2, 1 )
						if f25_local0 then
							local f26_local3 = f25_local0.GunsmithWeaponDetails:Wait( 5 )
							f26_local3.onComplete = function ()
								GUNSMITH.SetGunsmithWeaponOffset( f26_local0 )
								GUNSMITH.SetGunsmithCameraPosition( f26_local0 )
							end
							
						end
						DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.tagDataString:SetValue( f25_local0, f26_local2 )
						local f26_local3 = f25_local0( f25_local0.insert, f25_local0.insert.tagOrigin )
						local f26_local4 = f25_local0( f25_local0.insert, f25_local0.insert.tagGunAttach )
						local f26_local5 = Engine[0xC3B7925CCAC9430]( f25_local0, f25_local0, "offset_vise_attach" )
						f26_local3.xPosition = f26_local5.xPosition - f26_local4.xPosition - f26_local3.xPosition
						f26_local3.yPosition = f26_local5.yPosition - f26_local4.yPosition - f26_local3.yPosition
						ClientModel[0x9C89C00DF9B85ED]( CLIENT_MODEL.GetClientModelIndex( f25_local0.insert ), f26_local3 )
						local f26_local6 = f25_local0 and f25_local0.GunsmithWeaponDetails:Wait( 5 ) or f25_local0:Wait( 5 )
						f26_local6.onComplete = function ()
							local f27_local0 = f26_local0( f26_local0.base, f26_local0.base.tagOrigin )
							f26_local0 = f26_local0( f26_local0.insert, f26_local0.insert.tagOrigin )
							f27_local0.xPosition = f26_local0.xPosition
							f27_local0.yPosition = f26_local0.yPosition
							ClientModel[0x9C89C00DF9B85ED]( CLIENT_MODEL.GetClientModelIndex( f26_local0.base ), f27_local0 )
						end
						
					end
					
				end
				
			end
		end
		f24_local2 = f24_arg0:Wait( 5 )
	end
	
	local f18_local3 = function ( f22_arg0, f22_arg1 )
		f22_arg0:SubscribeToModel( f22_arg0._weaponPositionForceUpdateModel, function ( f23_arg0 )
			if DataModel[0x614D394F6F9A18D]( f23_arg0 ) then
				f22_arg0( f22_arg0, f22_arg0, true )
			end
		end, true )
	end
	
	local f18_local4 = function ( f21_arg0 )
		CLIENT_MODEL.SetAllModelsModifiable( f21_arg0 )
		CLIENT_MODEL.InitGunViseModels()
		CLIENT_MODEL.HideModels( {
			base = CLIENT_MODEL.coreMPModels.GUN_VISE_SUPPORT_BASE,
			insert = CLIENT_MODEL.coreMPModels.GUN_VISE_SUPPORT_INSERT
		} )
		CLIENT_MODEL.SetModel( CLIENT_MODEL.coreMPModels.MAG_DISPLAY, "tag_origin" )
	end
	
	local f18_local5 = function ( f19_arg0, f19_arg1 )
		if not f19_arg0.waitForTagDataTimer then
			f19_arg0.waitForTagDataTimer = LUI.UITimer.new( {
				interval = 50,
				event = "waitForTagData"
			} )
			f19_arg0:addElement( f19_arg0.waitForTagDataTimer )
		end
		local f19_local0 = ClientWeapon[0x5DD69014A9C290]( FrontEndScene.ClientWeapons.Preview )
		f19_arg0:registerEventHandler( "waitForTagData", function ( element, event )
			local f20_local0 = Engine[0xF3C157C48E60860]( f19_arg0, f19_arg0, WEAPON.SilencedFlashTag )
			local f20_local1 = Engine[0xF3C157C48E60860]( f19_arg0, f19_arg0, WEAPON.MuzzleFlashTag )
			local f20_local2
			if f20_local0 then
				f20_local2 = WEAPON.SilencedFlashTag
				if not f20_local2 then
					if f20_local1 then
						f20_local2 = WEAPON.MuzzleFlashTag
						if not f20_local2 then
						
						else
							local f20_local3 = Engine[0xC3B7925CCAC9430]( f19_arg0, f19_arg0, GUNSMITH.defaultTag )
							local f20_local4 = Engine[0xC3B7925CCAC9430]( f19_arg0, f19_arg0, f20_local2 )
							local f20_local5 = Engine[0xC3B7925CCAC9430]( f19_arg0, f19_arg0, WEAPON.RearTag )
							local f20_local6 = f19_arg0
							local f20_local7
							if f20_local3 then
								f20_local7 = f20_local3
							elseif f20_local4 then
								f20_local7 = f20_local4
							else
								f20_local7 = f20_local5
							end
							f20_local6.isTagDataAvailable = f20_local7
							if f19_arg0.isTagDataAvailable then
								f19_arg0( f19_arg0, f19_arg0 )
								if f19_arg0.waitForTagDataTimer then
									f19_arg0.waitForTagDataTimer:closeTree()
									f19_arg0.waitForTagDataTimer = nil
								end
							end
						end
					end
					f20_local2 = WEAPON.FlashTag
				end
			else
				if f20_local1 then
					f20_local2 = WEAPON.MuzzleFlashTag
					if not f20_local2 then
					
					else
						local f20_local3 = Engine[0xC3B7925CCAC9430]( f19_arg0, f19_arg0, GUNSMITH.defaultTag )
						local f20_local4 = Engine[0xC3B7925CCAC9430]( f19_arg0, f19_arg0, f20_local2 )
						local f20_local5 = Engine[0xC3B7925CCAC9430]( f19_arg0, f19_arg0, WEAPON.RearTag )
						local f20_local6 = f19_arg0
						local f20_local7
						if f20_local3 then
							f20_local7 = f20_local3
						elseif f20_local4 then
							f20_local7 = f20_local4
						else
							f20_local7 = f20_local5
						end
						f20_local6.isTagDataAvailable = f20_local7
						if f19_arg0.isTagDataAvailable then
							f19_arg0( f19_arg0, f19_arg0 )
							if f19_arg0.waitForTagDataTimer then
								f19_arg0.waitForTagDataTimer:closeTree()
								f19_arg0.waitForTagDataTimer = nil
							end
						end
					end
				end
				f20_local2 = WEAPON.FlashTag
			end
			local f20_local3 = Engine[0xC3B7925CCAC9430]( f19_arg0, f19_arg0, GUNSMITH.defaultTag )
			local f20_local4 = Engine[0xC3B7925CCAC9430]( f19_arg0, f19_arg0, f20_local2 )
			local f20_local5 = Engine[0xC3B7925CCAC9430]( f19_arg0, f19_arg0, WEAPON.RearTag )
			local f20_local6 = f19_arg0
			local f20_local7
			if f20_local3 then
				f20_local7 = f20_local3
			elseif f20_local4 then
				f20_local7 = f20_local4
			else
				f20_local7 = f20_local5
			end
			f20_local6.isTagDataAvailable = f20_local7
			if f19_arg0.isTagDataAvailable then
				f19_arg0( f19_arg0, f19_arg0 )
				if f19_arg0.waitForTagDataTimer then
					f19_arg0.waitForTagDataTimer:closeTree()
					f19_arg0.waitForTagDataTimer = nil
				end
			end
		end )
	end
	
	local f18_local6 = LUI.DataSourceFromOmnvar.new( "frontend_weapon_position_force_update" )
	f18_arg0._weaponPositionForceUpdateModel = f18_local6:GetModel( f18_arg1 )
	GUNSMITH.InitGunsmithWeaponOffsetDataSources()
	GUNSMITH.SetAreInGunsmithScene( true )
	f18_local4( f18_arg1 )
	f18_local5( f18_arg0, f18_arg1 )
	f18_local3( f18_arg0, f18_arg1 )
	WEAPON.SetGunsmithSceneForWeapon( f18_arg2 )
end

GUNSMITH.SetupCustomizationFrontendScene = function ( f16_arg0, f16_arg1, f16_arg2, f16_arg3 )
	local f16_local0 = CONTENT_GRIDS.GetMetaDataTable( f16_arg0 )
	local f16_local1, f16_local2 = nil
	if f16_local0.gridType == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x6A4C90337EEC619] or f16_local0.gridType == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x385B7DA5D50BDC6] then
		f16_local1 = ATTACHMENT.charmTag
	elseif f16_local0.gridType == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0xC9F7FC239586B7D] or f16_local0.gridType == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x594431300BA0DE4] then
		f16_local1 = ATTACHMENT.charmTag
		f16_local2 = ATTACHMENT.stickerCategory
	elseif f16_local0.gridType == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x910F53A9931F05E] then
		
	else
		assert( false, "Customization type not supported yet" )
	end
	FrontEndScene.SetExclusiveWeaponModels( {
		FrontEndScene.ClientWeapons.Preview
	} )
	f16_arg1.weaponModel = WEAPON.GetWeaponModel( f16_arg2, FrontEndScene.ClientWeapons.Preview, CSV.weaponOffsets.attachmentFile )
	f16_arg1:addElement( f16_arg1.weaponModel )
	local f16_local3 = {}
	if f16_local2 then
		f16_local3.category = f16_local2
	end
	f16_local3.weaponClass = f16_local0.weaponClass
	WEAPON.SetCustomizeSceneForWeapon( f16_local0.weaponPlayerData.weapon:get() )
	if WEAPON.IsBulletWeapon( f16_local3.weaponClass ) and not f16_arg3.ignoreXCam then
		if not f16_arg1.customizationSceneTimer then
			f16_arg1.customizationSceneTimer = LUI.UITimer.new( {
				interval = 50,
				event = "customizationScene"
			} )
			f16_arg1:addElement( f16_arg1.customizationSceneTimer )
		end
		f16_arg1:registerEventHandler( "customizationScene", function ( element, event )
			if Game[0x28624DEF6F708C8]( f16_arg0, "frontend_screen_black" ) then
				GUNSMITH.SetWeaponPreviewCameraPosition( f16_arg0, f16_arg0, f16_arg0 )
				if f16_arg0.customizationSceneTimer then
					f16_arg0.customizationSceneTimer:closeTree()
					f16_arg0.customizationSceneTimer = nil
				end
			end
		end )
		GUNSMITH.SetWeaponPreviewCameraPosition( f16_arg2, f16_local1, f16_local3 )
	end
	f16_arg3.ignoreXCam = false
end

GUNSMITH.SetupGunscreenUIWidget = function ( f15_arg0, f15_arg1, f15_arg2, f15_arg3 )
	if f15_arg1.screenUI then
		f15_arg1.screenUI:closeTree()
		f15_arg1.screenUI = nil
	end
	local f15_local0 = f15_arg3.rttWidget
	if not String.IsNilOrEmpty( f15_local0 ) then
		if not MenuBuilder.IsTypeAvailable( f15_local0 ) then
			DebugPrint( "ERROR: Attempting to use unknown UI widget " .. f15_local0 .. ". Ensure this widget is properly included for your game mode!" )
		else
			local f15_local1 = MenuBuilder.BuildRegisteredType
			local f15_local2 = f15_local0
			local f15_local3 = {
				controllerIndex = f15_arg2
			}
			local f15_local4 = f15_arg3.ref
			if not f15_local4 then
				f15_local4 = CONTENT_GRIDS.GetEquippedItemsRefs( f15_arg0 )
				f15_local4 = f15_local4[1]
			end
			f15_local3.gunscreenRef = f15_local4
			f15_arg1.screenUI = f15_local1( f15_local2, f15_local3 )
			f15_arg1.screenUI.id = "Accessory"
			f15_arg1.screenUI:SetupRenderTarget( "$rtt_watchlcd", f15_arg3.rttWidth, f15_arg3.rttHeight, 1, 0, 0, 0, 0, f15_arg2 )
			f15_arg1.screenUI:SetAnchorsAndPosition( 0, 1, 0, 1, 0, f15_arg3.rttWidth * _1080p, 0, f15_arg3.rttHeight * _1080p )
			f15_arg1.screenUI:ActivateDirtyCheck( true )
			f15_arg1:addElement( f15_arg1.screenUI )
			f15_arg1.accessoryUI = f15_arg1.screenUI
		end
	end
end

GUNSMITH.GetVinylSlotIndex = function ( f14_arg0, f14_arg1 )
	local f14_local0 = 1
	if f14_arg1 ~= WEAPON.none then
		local f14_local1 = ClientWeapon[0x3CFEF119C8C423E]( f14_arg0, f14_arg1 ) or 1
		if f14_local1 and 1 < f14_local1 then
			f14_local0 = 1
		else
			f14_local0 = 2
		end
	end
	return f14_local0
end

GUNSMITH.GetCamoCategoryDataFromParentMenu = function ( f13_arg0 )
	local f13_local0 = LUI.FlowManager.GetPreviousMenu()
	local f13_local1 = f13_local0.scopedData.camoCategories
	assert( f13_local1 )
	for f13_local5, f13_local6 in ipairs( f13_local1 ) do
		if string.lower( f13_local6.ref ) == string.lower( f13_arg0 ) then
			return f13_local6
		end
	end
	assert( false, "The requested camo category " .. f13_arg0 .. " could not be found" )
end

GUNSMITH.PreviewCustomizationItem = function ( f12_arg0, f12_arg1, f12_arg2, f12_arg3 )
	if Engine[0x12586A3F4FB490E]() then
		local f12_local0 = CONTENT_GRIDS.GetMetaDataTable( f12_arg0 )
		assert( f12_local0.gridType )
		assert( f12_arg1.weaponModel )
		assert( f12_local0.weaponPlayerData )
		local f12_local1 = WEAPON.GenerateWeaponTable( f12_local0.weaponPlayerData )
		local f12_local2 = f12_local0.gridType
		if f12_local2 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x6A4C90337EEC619] then
			f12_local1.cosmeticAttachment = f12_arg3
		elseif f12_local2 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x385B7DA5D50BDC6] then
			f12_local1.cosmeticAttachment = f12_arg3
		elseif f12_local2 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0xC9F7FC239586B7D] then
			assert( f12_local0.slotIndex )
			f12_local1.stickers[f12_local0.slotIndex] = f12_arg3
		elseif f12_local2 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x594431300BA0DE4] then
			local f12_local3 = GUNSMITH.GetVinylSlotIndex( f12_arg2, f12_arg3 )
			local f12_local4
			if f12_local3 == 2 then
				f12_local4 = 1
			else
				f12_local4 = 2
			end
			f12_local1.stickers[f12_local3] = f12_arg3
			f12_local1.stickers[f12_local4] = CONTENT_GRIDS.NoneValue
		elseif f12_local2 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x910F53A9931F05E] then
			f12_local1.camo = f12_arg3
		end
		WEAPON.LoadAndSetModel( f12_arg2, f12_arg1.weaponModel, f12_local1, {
			parentMenu = self
		} )
	end
end

GUNSMITH.EquipCustomizationItem = function ( f11_arg0, f11_arg1, f11_arg2 )
	local f11_local0 = CONTENT_GRIDS.GetMetaDataTable( f11_arg0 )
	assert( f11_local0.weaponPlayerData )
	assert( f11_local0.gridType )
	CONTENT_GRIDS.SetEquippedItemsRefs( f11_arg0, f11_arg1, f11_arg2 )
	local f11_local1 = f11_local0.gridType
	if f11_local1 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x6A4C90337EEC619] then
		WEAPON.SetEquippedCharm( f11_local0.weaponPlayerData, f11_arg2 )
	elseif f11_local1 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x385B7DA5D50BDC6] then
		WEAPON.SetEquippedCharm( f11_local0.weaponPlayerData, f11_arg2 )
	elseif f11_local1 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0xC9F7FC239586B7D] then
		assert( f11_local0.slotIndex )
		WEAPON.SetEquippedStickerForIndex( f11_local0.weaponPlayerData, f11_local0.slotIndex, f11_arg2 )
	elseif f11_local1 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x594431300BA0DE4] then
		local f11_local2 = GUNSMITH.GetVinylSlotIndex( f11_arg1, f11_arg2 )
		local f11_local3
		if f11_local2 == 2 then
			f11_local3 = 1
		else
			f11_local3 = 2
		end
		WEAPON.SetEquippedStickerForIndex( f11_local0.weaponPlayerData, f11_local2, f11_arg2 )
		WEAPON.SetEquippedStickerForIndex( f11_local0.weaponPlayerData, f11_local3, CONTENT_GRIDS.NoneValue )
	elseif f11_local1 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x910F53A9931F05E] then
		WEAPON.SetEquippedCamo( f11_local0.weaponPlayerData, f11_arg2 )
	end
	Playercard[0xE7F7308D27872C9]( f11_arg1 )
end

GUNSMITH.GetCustomizationContentGridContent = function ( f9_arg0, f9_arg1, f9_arg2 )
	local f9_local0 = CONTENT_GRIDS.GetMetaDataTable( f9_arg0 )
	local f9_local1 = f9_local0.gridType
	local f9_local2 = false
	local f9_local3 = {}
	if f9_local1 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x910F53A9931F05E] then
		local f9_local4 = GUNSMITH.GetCamoCategoryDataFromParentMenu( f9_local0.category )
		if f9_local4 then
			f9_local3 = f9_local4
		else
			f9_local3 = f9_local4.camos
		end
	else
		local f9_local4 = f9_local1 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0xC9F7FC239586B7D]
		local f9_local5 = f9_local1 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x594431300BA0DE4]
		local f9_local6 = {
			LOOT.IsUnlockedFilterFunction
		}
		if f9_local4 or f9_local5 then
			table.insert( f9_local6, function ( f10_arg0, f10_arg1, f10_arg2, f10_arg3 )
				return (f10_arg3[0xFAB8095A1336A8F] or false) == f9_arg0
			end )
		end
		local f9_local7 = {
			filterFunctions = f9_local6,
			controllerIndex = f9_arg2
		}
		if f9_local1 ~= CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x6A4C90337EEC619] and f9_local1 ~= CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x385B7DA5D50BDC6] then
			f9_local2 = false
		else
			f9_local2 = true
		end
		f9_local3 = LOOT.GetItemsDefsForType( f9_local0.lootType, f9_local7 )
	end
	if f9_local2 then
		table.insert( f9_local3, 1, {
			ref = CONTENT_GRIDS.NoneValue
		} )
	end
	return CONTENT_GRIDS.SortEquippableItemsLight( f9_arg0, f9_arg2, f9_local3 )
end

GUNSMITH.CustomizationContentGridItemRefreshFunction = function ( f8_arg0, f8_arg1, f8_arg2, f8_arg3 )
	local f8_local0 = CONTENT_GRIDS.GetMetaDataTable( f8_arg0 )
	local f8_local1 = LOOT.GetScriptBundleForName( f8_local0.lootType, f8_arg3.assetName )
	BREADCRUMBS.TryAddNewBreadcrumbForLoot( f8_arg2, f8_arg1, f8_arg3.lootID )
	local f8_local2 = GUNSMITH.GetCustomizationItemsGridButtonConfig( f8_arg0, f8_arg3.assetName, GUNSMITH.GetEquippableItemDetails( f8_arg0, f8_arg2, f8_arg3.ref, f8_local1 ) )
	local f8_local3 = f8_arg1
	local f8_local4 = f8_arg1.SetButtonDisabled
	local f8_local5 = f8_local2.loot
	if f8_local5 then
		f8_local5 = f8_local2.loot.isLocked
	end
	f8_local4( f8_local3, f8_local5 )
	f8_arg1:processEvent( {
		name = "grid_button_component_setup",
		config = f8_local2
	} )
end

GUNSMITH.CustomizationContentGridPreSetupFunction = function ( f7_arg0, f7_arg1, f7_arg2, f7_arg3, f7_arg4 )
	local f7_local0 = CONTENT_GRIDS.GetMetaDataTable( f7_arg0 )
	local f7_local1 = f7_local0.gridType
	f7_local0.lootType = GUNSMITH.GetLootTypeForGridType( f7_local1 )
	f7_local0.favoriteItemsRefs = LOOT.GetFavoritesForType( f7_local0.lootType )
	LOOT.SetupSortingBehavior( f7_arg1, f7_arg2, f7_local0.lootType )
	if f7_local1 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x910F53A9931F05E] then
		f7_local0.category = f7_arg4.query.category
		if f7_local0.category == "completionist" then
			f7_local0.sortByRef = true
		else
			f7_local0.disableItemsSort = true
		end
		local f7_local2 = GUNSMITH.GetCamoCategoryDataFromParentMenu( f7_local0.category )
		f7_arg1.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0x6A51E18DC8715B7, f7_local2.isWeaponMastery and Engine[0x7D3158A9539A355]( f7_local2.name ) or Engine[0xED84C33EC5F01EA]( f7_local2.name ) ) )
	elseif f7_local1 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x6A4C90337EEC619] then
		f7_arg1.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0x7F62DDA0B8B9F0E ) )
	elseif f7_local1 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x385B7DA5D50BDC6] then
		f7_arg1.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0x903CC1D02F697B5 ) )
	elseif f7_local1 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0xC9F7FC239586B7D] then
		f7_local0.slotIndex = tonumber( f7_arg4.query.slotIndex )
		f7_arg1.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0x523FCEC797D602C, f7_local0.slotIndex ) )
	elseif f7_local1 == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0x594431300BA0DE4] then
		f7_arg1.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( 0xD61486D698E5AF2 ) )
	end
	f7_local0.loadoutIndex = LOADOUT.GetLoadoutIndex( f7_arg2 )
	local f7_local2 = WEAPON.GetWeaponSlot( f7_arg2 )
	local f7_local3 = LOADOUT.GetFrontendLoadoutWithShowcase( f7_arg2, f7_local0.loadoutIndex, f7_arg4.forShowcase )
	f7_local0.weaponPlayerData = f7_local3.weaponSetups[f7_local2]
	f7_local0.weaponRef = f7_local0.weaponPlayerData.weapon:get()
	f7_local0.weaponClass = WEAPON.GetWeaponClass( f7_local0.weaponRef )
	local f7_local4 = GUNSMITH.GetEquippedCustomizationItemForType( f7_arg2, f7_local0.weaponPlayerData, f7_local0.gridType )
	if not f7_local4 then
		f7_local4 = CONTENT_GRIDS.NoneValue
	end
	if f7_local0.gridType == CONTENT_GRIDS[0xB7ACFEFAAD7B3BA][0xC9F7FC239586B7D] then
		local f7_local5 = f7_local4[f7_local0.slotIndex]
		if not f7_local5 then
			f7_local4 = f7_local5
		else
			f7_local4 = CONTENT_GRIDS.NoneValue
		end
	end
	CONTENT_GRIDS.SetEquippedItemsRefs( f7_arg0, f7_arg2, f7_local4, false )
	GUNSMITH.SetupCustomizationFrontendScene( f7_arg0, f7_arg1, f7_arg2, f7_arg4 )
	if CONDITIONS.IsDvarBoolEnabled( 0xF67FAEEC5C52BFA ) then
		MenuUtils.AddMobileSidebarButton( f7_arg1, MenuUtils.MobileSidebarButtonsEnum.EQUIPPABLE_ITEM_FAVORITE )
	end
	ItemDetailsUtils.MobileSetMenuItemDetailsType( f7_arg1, ItemDetailsUtils[0x5ABE5FD362B0038][0xE9687C04C669BEF] )
	local f7_local6 = LUI.SetupDataSourceUpdate( f7_arg1, f7_arg2, "UpdateDetailsDataSources", "alwaysLoaded.menu.weaponCustomization.details", GUNSMITH.GetEquippableItemDetails( f7_arg0, f7_arg2, f7_local4, LOOT.GetScriptBundleForName( f7_local0.lootType, f7_local4 ) ), ItemDetailsUtils.FormatDetailsDataTable )
	ItemDetailsUtils.SetupPlaceholderItemDetails( f7_arg1.ItemDetailsWrapper )
	f7_arg1.ItemDetailsWrapper.ItemDetails:SetDataSource( f7_local6, f7_arg2 )
	f7_arg3.activeMode = GRID_AND_LIST.ActiveBehaviorType.TOUCHEND
	return f7_arg3
end

GUNSMITH.CustomizationContentGridOnItemPressed = function ( f6_arg0, f6_arg1, f6_arg2, f6_arg3, f6_arg4 )
	GUNSMITH.EquipCustomizationItem( f6_arg0, f6_arg2, f6_arg4.ref )
	ACTIONS.LeaveMenu()
end

GUNSMITH.CustomizationContentGridOnItemFocused = function ( f5_arg0, f5_arg1, f5_arg2, f5_arg3, f5_arg4 )
	local f5_local0 = CONTENT_GRIDS.GetMetaDataTable( f5_arg0 )
	local f5_local1 = f5_local0.gridType
	local f5_local2 = GUNSMITH.GetEquippableItemDetails( f5_arg0, f5_arg2, f5_arg4.ref, LOOT.GetScriptBundleForName( f5_local0.lootType, f5_arg4.assetName ) )
	f5_local0.focusedItemDetails = f5_local2
	BREADCRUMBS.ClearBreadcrumbForLoot( f5_arg2, f5_arg4.lootID, f5_arg1, BREADCRUMBS.LOOT_TYPE_MAP[f5_local0.lootType] )
	GUNSMITH.PreviewCustomizationItem( f5_arg0, f5_arg3, f5_arg2, f5_arg4.assetName )
	f5_arg3:UpdateDetailsDataSources( f5_arg2, f5_local2 )
end

GUNSMITH.CustomizationContentGridOnCamoPressed = function ( f4_arg0, f4_arg1, f4_arg2, f4_arg3, f4_arg4 )
	local f4_local0 = CONTENT_GRIDS.IsItemEquipped( f4_arg0, f4_arg4.ref ) and CONTENT_GRIDS.NoneValue or f4_arg4.ref
	GUNSMITH.PreviewCustomizationItem( f4_arg0, f4_arg3, f4_arg2, f4_local0 )
	GUNSMITH.EquipCustomizationItem( f4_arg0, f4_arg2, f4_local0 )
end

GUNSMITH.CustomizationContentGridOnGunscreenFocused = function ( f3_arg0, f3_arg1, f3_arg2, f3_arg3, f3_arg4 )
	local f3_local0 = CONTENT_GRIDS.GetMetaDataTable( f3_arg0 )
	GUNSMITH.CustomizationContentGridOnItemFocused( f3_arg0, f3_arg1, f3_arg2, f3_arg3, f3_arg4 )
	GUNSMITH.SetupGunscreenUIWidget( f3_arg0, f3_arg3, f3_arg2, f3_local0.focusedItemDetails )
end

GUNSMITH.GetGunsmithCustomizationMenuContentGridContent = function ( f2_arg0, f2_arg1, f2_arg2 )
	local f2_local0, f2_local1 = GUNSMITH.GetMobileCustomizeButtonsData( f2_arg2, f2_arg1._weaponPlayerData )
	return f2_local0
end

GUNSMITH.GunsmithCustomizationMenuContentGridItemRefreshFunction = function ( f1_arg0, f1_arg1, f1_arg2, f1_arg3 )
	if not CONDITIONS.IsMobileOrMobileSim() then
		assert( false, "Gunsmith customization grid content isn't supported yet for IW9" )
		return 
	end
	local f1_local0 = f1_arg3.lootType
	local f1_local1 = BREADCRUMBS.LOOT_TYPE_MAP[f1_arg3.lootType]
	local f1_local2 = f1_local1 == BREADCRUMBS.FEATURE.WEAPON_STICKER
	local f1_local3 = f1_local1 == BREADCRUMBS.FEATURE.WEAPON_CAMO
	BREADCRUMBS.UpdateBreadcrumbForFeature( f1_arg2, f1_local1 )
	if f1_local2 then
		local f1_local4 = {
			VINYL_SLOT = 4,
			STICKER_1_SLOT = 5
		}
		local f1_local5 = f1_arg3.ref == f1_local4.VINYL_SLOT
		local f1_local6 = f1_arg3.ref == f1_local4.STICKER_1_SLOT
		if 0 < #BREADCRUMBS.NewStickerList and (f1_local5 or f1_local6) then
			for f1_local10, f1_local11 in ipairs( BREADCRUMBS.NewStickerList ) do
				local f1_local12 = LOOT.GetScriptBundleForName( LOOT.itemTypes.STICKER, LOOT.GetItemRef( f1_local11 ) )
				local f1_local13 = f1_local12[0xFAB8095A1336A8F]
				if not (not f1_local5 or not f1_local13) or f1_local6 and not f1_local13 then
					BREADCRUMBS.SubscribeToBreadcrumbs( f1_arg1, f1_arg2, f1_local1 )
				end
			end
		end
	elseif f1_local3 then
		local f1_local4 = LUI.FlowManager.GetScopedData( LOADOUT.GetGunsmithTabsMenuRef() )
		BREADCRUMBS.SubscribeToCamoForCurrentWeaponRef( f1_arg1, f1_arg2, f1_local4.currentWeaponRef )
	else
		BREADCRUMBS.SubscribeToBreadcrumbs( f1_arg1, f1_arg2, f1_local1 )
	end
	f1_arg1._ref = f1_arg3.ref
	f1_arg1:processEvent( {
		name = "grid_button_component_setup",
		config = GUNSMITH[0x39FE74B4A7541C6]( f1_arg0, f1_arg3 )
	} )
end

