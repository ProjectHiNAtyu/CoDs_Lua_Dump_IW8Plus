-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
module( ..., package.seeall )
local f0_local0 = 25
local f0_local1 = function ( f7_arg0, f7_arg1, f7_arg2 )
	local f7_local0 = {}
	local f7_local1 = 5
	local f7_local2 = -1
	if f7_arg2.radialMenu then
		f7_arg0.AvailableHighlight:SetAlpha( 0 )
		ACTIONS.AnimateSequence( f7_arg0, "InRadial" )
	end
	local f7_local3 = function ()
		local f11_local0 = f7_arg0:GetDataSource()
		f11_local0 = f11_local0.isActive:GetValue( f7_arg0 )
		local f11_local1 = f7_arg0:GetDataSource()
		f11_local1 = f11_local1.isSlotSelected:GetValue( f7_arg0 )
		local f11_local2 = f7_arg0:GetDataSource()
		f11_local2 = f11_local2.isSpecialist:GetValue( f7_arg0 )
		local f11_local3 = Game.BFEEGCHICA( f7_arg0, "ui_score_streak" )
		if not f7_arg0.radialMenu then
			if f11_local0 == 1 then
				ACTIONS.AnimateSequence( f7_arg0, "MinPipShow" )
			else
				ACTIONS.AnimateSequence( f7_arg0, "MinPipHide" )
			end
			return 
		elseif f7_arg0.isActive ~= 1 or f7_arg0.isActive == f11_local0 then
			local f11_local4 = false
		else
			local f11_local4 = true
		end
		f7_arg0.isActive = f11_local0
		if f7_arg0.UpdateKillstreakNavigation then
			f7_arg0:UpdateKillstreakNavigation()
		end
		if f7_arg0.isGimmeStreak then
			return 
		elseif f7_arg0.radialMenu and f7_arg0 <= 0 then
			return 
		elseif f7_arg0.radialMenu then
			if f7_arg0.UpdatePips then
				f7_arg0.UpdatePips( f7_arg0.streakIndex, relativeCost, earnedStreakIndex )
			end
		else
			for f11_local5 = 1, #f7_arg0, 1 do
				if f11_local5 <= earnedStreakIndex then
					ACTIONS.AnimateSequence( f7_arg0[f11_local5], "Earned" )
				else
					ACTIONS.AnimateSequence( f7_arg0[f11_local5], "DefaultSequence" )
				end
			end
		end
	end
	
	f7_arg0:SubscribeToModelThroughElement( f7_arg0, "index", f7_local3, true )
	f7_arg0:SubscribeToModelThroughElement( f7_arg0, "isActive", f7_local3, true )
	f7_arg0:SubscribeToModelThroughElement( f7_arg0, "isSlotSelected", f7_local3, true )
	f7_arg0:SubscribeToModelThroughElement( f7_arg0, "currentScore", f7_local3, true )
	f7_arg0:SubscribeToModelThroughElement( f7_arg0, "relativeCost", f7_local3, true )
	f7_arg0:SubscribeToModelThroughElement( f7_arg0, "isSpecialist", f7_local3, true )
	f7_arg0:SubscribeToModelThroughElement( f7_arg0, "relativeCost", function ()
		if f7_arg0.isGimmeStreak then
			return 
		elseif GameX.IsHardcoreMode() then
			return 
		elseif GameX.IsRealismMode() then
			return 
		end
		local f10_local0 = f7_arg0:GetDataSource()
		f10_local0 = f10_local0.relativeCost:GetValue( f7_arg0 )
		if f7_arg0.radialMenu then
			if 0 < f7_arg0 then
				if f10_local0 == f7_arg0 then
					return 
				elseif f7_arg0.DestroyPips then
					f7_arg0.DestroyPips( f7_arg0.streakIndex )
				end
				f7_arg0 = -1
				f7_arg0 = {}
			end
			if f7_arg0.CreateStreakPips then
				f7_arg0.CreateStreakPips( f7_arg0.streakIndex, f10_local0 )
				f7_arg0 = f10_local0
			end
		else
			if 0 < #f7_arg0 then
				if f10_local0 == #f7_arg0 then
					return 
				end
				for f10_local1 = 1, #f7_arg0, 1 do
					f7_arg0[f10_local1]:closeTree()
				end
				f7_arg0 = {}
			end
			for f10_local1 = 1, f10_local0, 1 do
				local f10_local4 = MenuBuilder.BuildRegisteredType( "StreakPip", {
					controllerIndex = f7_arg0
				} )
				local f10_local5, f10_local6, f10_local7, f10_local8 = f7_arg0:getLocalRect()
				local f10_local9 = (math.floor( f10_local8 / _1080p - f10_local6 / _1080p + 0.5 ) - f7_arg0 * (f10_local0 - 1)) / f10_local0
				f10_local4:SetAnchorsAndPosition( 1, 0, 1, 0, -5 * _1080p, 0, ((f10_local9 + f7_arg0) * (f10_local1 - 1) * -1 - f10_local9) * _1080p, (f10_local9 + f7_arg0) * (f10_local1 - 1) * -1 * _1080p )
				f7_arg0[f10_local1] = f10_local4
				f7_arg0:addElement( f7_arg0[f10_local1] )
			end
		end
		f7_arg0()
	end, true )
	f7_arg0:addEventHandler( "button_over", function ( f9_arg0, f9_arg1 )
		if f9_arg0.SelectKillstreak then
			f9_arg0:SelectKillstreak()
		end
	end )
	f7_arg0.widgetAction = function ()
		Engine.EBHIFJCGBH( "streak_select", f7_arg0.streakIndex )
	end
	
end

function StreakRealism( menu, controller )
	local self = LUI.UIButton.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 20 * _1080p, 0, 20 * _1080p )
	self.id = "StreakRealism"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local MinPipStreak = nil
	
	MinPipStreak = LUI.UIImage.new()
	MinPipStreak.id = "MinPipStreak"
	MinPipStreak:SetRGBFromTable( SWATCHES.Scoreboard.friendlyTeam, 0 )
	MinPipStreak:SetAlpha( 0, 0 )
	MinPipStreak:SetScale( -0.7, 0 )
	MinPipStreak:setImage( RegisterMaterial( "widg_gradient_right_to_left" ), 0 )
	MinPipStreak:SetAnchorsAndPosition( 1, 0, 0.5, 0.5, _1080p * -14, _1080p * -6, _1080p * -4, _1080p * 4 )
	self:addElement( MinPipStreak )
	self.MinPipStreak = MinPipStreak
	
	local MinPipShine = nil
	
	MinPipShine = LUI.UIImage.new()
	MinPipShine.id = "MinPipShine"
	MinPipShine:SetRGBFromTable( SWATCHES.HUD.HUDMain, 0 )
	MinPipShine:SetAlpha( 0, 0 )
	MinPipShine:SetScale( -0.7, 0 )
	MinPipShine:SetAnchorsAndPosition( 1, 0, 0.5, 0.5, _1080p * -14, _1080p * -6, _1080p * -4, _1080p * 4 )
	self:addElement( MinPipShine )
	self.MinPipShine = MinPipShine
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	MinPipStreak:RegisterAnimationSequence( "MinPipShow", {
		{
			value = 0,
			duration = -28,
			property = TWEEN_PROPERTY.Scale
		},
		{
			value = 1,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 700,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -120,
			easing = LUI.EASING.inOutQuadratic
		},
		{
			value = 0,
			duration = 700,
			property = TWEEN_PROPERTY.U_Max,
			easing = LUI.EASING.snap
		},
		{
			value = 1,
			duration = 400,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.outQuadratic
		}
	} )
	MinPipShine:RegisterAnimationSequence( "MinPipShow", {
		{
			value = 0,
			duration = -28,
			property = TWEEN_PROPERTY.Scale,
			easing = LUI.EASING.outQuadratic
		},
		{
			value = 1,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.outQuadratic
		}
	} )
	self._sequences.MinPipShow = function ()
		menu:AnimateSequence( "MinPipShow" )
		menu:AnimateSequence( "MinPipShow" )
	end
	
	MinPipStreak:RegisterAnimationSequence( "MinPipHide", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -6
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1.9035990196020258E+185,
			duration = 0,
			property = TWEEN_PROPERTY.Scale
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.U_Max
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -6
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -4
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 4
		}
	} )
	MinPipShine:RegisterAnimationSequence( "MinPipHide", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1.9035990196020258E+185,
			duration = 0,
			property = TWEEN_PROPERTY.Scale
		}
	} )
	self._sequences.MinPipHide = function ()
		menu:AnimateSequence( "MinPipHide" )
		menu:AnimateSequence( "MinPipHide" )
	end
	
	self:addEventHandler( "button_over", function ( f3_arg0, f3_arg1 )
		local f3_local0 = f3_arg1.controller or menu
		ACTIONS.AnimateSequence( menu, "Selected" )
	end )
	self:addEventHandler( "button_up", function ( f2_arg0, f2_arg1 )
		local f2_local0 = f2_arg1.controller or menu
		ACTIONS.AnimateSequence( menu, "NotSelected" )
	end )
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "StreakRealism", StreakRealism )
LockTable( _M )
