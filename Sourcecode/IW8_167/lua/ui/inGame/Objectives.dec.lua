-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:52
module( ..., package.seeall )
REMOVE_FANFARES = {
	[ObjectiveState.DONE] = {
		anim = "CompleteObjective",
		title = "HUD/OBJECTIVE_DONE",
		callback = "Complete"
	},
	[ObjectiveState.FAILED] = {
		anim = "FailedObjective",
		title = "HUD/OBJECTIVE_FAILED",
		callback = "Failed"
	}
}
local f0_local0 = {
	Reminder = 1,
	New = 2,
	Complete = 0
}
local f0_local1 = {
	All = 0,
	PS = 1
}
local f0_local2 = function ()
	local f43_local0 = CONDITIONS.IsSingleplayer()
	if not f43_local0 then
		f43_local0 = CONDITIONS.IsThirdGameMode()
	end
	return f43_local0
end

local f0_local3 = function ( f42_arg0 )
	local f42_local0
	if f42_arg0 ~= ObjectiveState.CURRENT and f42_arg0 ~= ObjectiveState.INVISIBLE then
		f42_local0 = false
	else
		f42_local0 = true
	end
	return f42_local0
end

local f0_local4 = function ( f41_arg0 )
	local f41_local0 = Engine.CAADCDEEIA()
	if f41_local0 then
		f41_local0 = Game.BFEEGCHICA( f41_arg0, "ui_disable_objective_reveal_fanfare" )
	end
	return f41_local0
end

local f0_local5 = function ( f40_arg0 )
	for f40_local0 = 1, #f40_arg0._widgets, 1 do
		for f40_local6, f40_local7 in pairs( f40_arg0._widgets[f40_local0] ) do
			f40_local7:Reveal()
		end
	end
end

local f0_local6 = function ( f39_arg0 )
	local f39_local0 = f39_arg0._visibleForGSC and Engine.CAADCDEEIA() or f39_arg0._currentState ~= nil
	if f39_arg0._statusVisible ~= f39_local0 then
		if f39_local0 then
			f39_arg0.Status:SetAlpha( 1, 400, LUI.EASING.linear )
			if Engine.CAADCDEEIA() then
				f0_local0( f39_arg0 )
			end
		else
			f39_arg0.Status:SetAlpha( 0, 1500, LUI.EASING.outQuadratic )
		end
		f39_arg0._statusVisible = f39_local0
	end
	local f39_local1 = f39_arg0.ObjectiveWidgets:getFirstChild()
	if f39_arg0.HeaderList and not f39_local1 then
		f39_local1 = f39_arg0.HeaderList:getFirstChild()
	end
	local f39_local2
	if f39_arg0._visibleForGSC and not f39_local1 then
		f39_local2 = f39_local1
	else
		f39_local2 = f39_arg0._currentState
		if f39_local2 then
			f39_local2 = f39_arg0._currentState ~= "reminder"
		end
	end
	if f39_arg0._contentVisible ~= f39_local2 then
		if f39_local2 then
			if f39_arg0.HeaderList then
				f39_arg0.HeaderList:SetAlpha( 1, 400, LUI.EASING.linear )
				if f39_arg0._currentState == "reveal" then
					f39_arg0.HeaderList:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 126 * _1080p, 162 * _1080p )
				else
					f39_arg0.HeaderList:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 42 * _1080p, 78 * _1080p, 100, LUI.EASING.outQuadratic )
				end
			end
			f39_arg0.ObjectiveWidgets:SetAlpha( 1, 400, LUI.EASING.linear )
		else
			if f39_arg0.HeaderList then
				f39_arg0.HeaderList:SetAlpha( 0, 1500, LUI.EASING.outQuadratic )
			end
			f39_arg0.ObjectiveWidgets:SetAlpha( 0, 1500, LUI.EASING.outQuadratic )
		end
		f39_arg0._contentVisible = f39_local2
	end
	if f39_arg0.codcasterWaypointsEnabled ~= nil then
		local f39_local3 = f39_arg0.ObjectiveWidgets
		local f39_local4 = f39_local3
		f39_local3 = f39_local3.SetAlpha
		local f39_local5
		if f39_arg0.codcasterWaypointsEnabled == true then
			f39_local5 = 1
		else
			f39_local5 = 0
		end
		f39_local3( f39_local4, f39_local5 )
	end
end

local f0_local7 = function ( f38_arg0 )
	if f38_arg0.ObjectivesType == f0_local0.All then
		f38_arg0:Update()
	elseif f38_arg0.ObjectivesType == f0_local0.PS then
		f38_arg0:UpdateObjectivesPS()
	end
end

local f0_local8 = function ( f36_arg0 )
	if f36_arg0._currentState or f36_arg0._visibleForGSC or f0_local0( f36_arg0._controllerIndex ) then
		
	end
	ACTIONS.AnimateSequence( f36_arg0, "Updated" )
	f36_arg0.Status:UpdateMessage( "MENU/OBJECTIVE_UPDATED" )
	f36_arg0._currentState = "reminder"
	f0_local0( f36_arg0 )
	local f36_local0 = f36_arg0:Wait( 2000 )
	f36_local0.onComplete = function ()
		f36_arg0._currentState = nil
		f36_arg0( f36_arg0 )
		f36_arg0( f36_arg0 )
	end
	
end

local f0_local9 = nil
f0_local9 = function ( f34_arg0, f34_arg1 )
	if f34_arg0._currentState then
		
	else
		
	end
	local f34_local0 = f0_local0( f34_arg0._controllerIndex )
	if not f34_local0 then
		local f34_local1 = f34_arg1.status
		if not f34_local1 then
			f34_local1 = ObjectiveState.DONE
		end
		f34_arg1.status = f34_local1
		assert( REMOVE_FANFARES[f34_arg1.status] )
		f34_local1 = REMOVE_FANFARES[f34_arg1.status]
		ACTIONS.AnimateSequence( f34_arg0, f34_local1.anim )
		if f34_arg1.status == ObjectiveState.FAILED then
			ACTIONS.AnimateSequence( f34_arg0.Status, "FailedObjective" )
		end
		f34_arg0.Status:UpdateMessage( f34_local1.title )
		f34_arg0._currentState = "complete"
		f0_local0( f34_arg0 )
		for f34_local10, f34_local11 in pairs( f34_arg1.objectiveTable ) do
			if f34_arg0._widgets[f34_local11.index] then
				for f34_local8, f34_local9 in pairs( f34_arg0._widgets[f34_local11.index] ) do
					f34_local9[f34_local1.callback]( f34_local9 )
				end
			end
			if f34_arg0._descriptions and f34_arg0._descriptions[f34_local11.index] then
				f34_arg0._descriptions[f34_local11.index]:Complete()
			end
		end
	end
	local f34_local1 = function ()
		for f35_local8, f35_local9 in pairs( f34_arg0.objectiveTable ) do
			if f34_arg0._widgets[f35_local9.index] then
				for f35_local6, f35_local7 in pairs( f34_arg0._widgets[f35_local9.index] ) do
					f35_local7.wrapper:closeTree()
				end
				f34_arg0._widgets[f35_local9.index] = {}
			end
			if f34_arg0._descriptions and f34_arg0._descriptions[f35_local9.index] then
				f34_arg0._descriptions[f35_local9.index]:closeTree()
				f34_arg0._descriptions[f35_local9.index] = nil
			end
		end
		f34_arg0._currentState = nil
		f34_arg0( f34_arg0 )
		f34_arg0( f34_arg0 )
		if f34_arg0.additionalObjectives and 0 < #f34_arg0.additionalObjectives then
			f34_arg0( f34_arg0, {
				objectiveTable = f34_arg0.additionalObjectives,
				status = f34_arg0.additionalStatus
			} )
		end
	end
	
	if f34_local0 then
		f34_local1()
	else
		local f34_local2 = f34_arg0:Wait( 2000 )
		f34_local2.onComplete = f34_local1
	end
end

local f0_local10 = function ( f32_arg0, f32_arg1 )
	if f32_arg0._currentState or f0_local0( f32_arg0._controllerIndex ) then
		
	end
	local f32_local0 = "MENU/NEW_OBJECTIVE"
	if Engine.EAIICIFIFA() and f32_arg1[1] and f32_arg1[1].description then
		f32_local0 = f32_arg1[1].description
	end
	if not Engine.ECHCFGDDDF() and not Engine.EAIICIFIFA() then
		f32_arg0.Status:UpdateMessage( f32_local0 )
		ACTIONS.AnimateSequence( f32_arg0, "NewObjective" )
		ACTIONS.AnimateSequence( f32_arg0.Status, "NewObjective" )
	end
	f32_arg0._currentState = "reveal"
	f0_local0( f32_arg0 )
	for f32_local9, f32_local10 in pairs( f32_arg1 ) do
		if f32_arg0._widgets[f32_local10.index] then
			for f32_local7, f32_local8 in pairs( f32_arg0._widgets[f32_local10.index] ) do
				f32_local8:Reveal()
			end
		end
		if f32_arg0._descriptions and f32_arg0._descriptions[f32_local10.index] then
			f32_arg0._descriptions[f32_local10.index]:Reveal()
		end
	end
	f32_local1 = f32_arg0:Wait( 3000 )
	f32_local1.onComplete = function ()
		f32_arg0._currentState = nil
		f32_arg0( f32_arg0 )
		f32_arg0( f32_arg0 )
	end
	
end

local f0_local11 = function ( f31_arg0, f31_arg1 )
	f31_arg1.objectiveStatus = f0_local0.Complete
	if not Engine.CAADCDEEIA() then
		f31_arg1.controllerIndex = f31_arg0._controllerIndex
		f31_arg1.displayLocation = LUI.SplashManager.MessageType.Objective.key
		f31_arg0:dispatchEventToRoot( {
			name = "add_message_splash_manager",
			immediate = true,
			options = f31_arg1
		} )
	else
		f0_local0( f31_arg0, f31_arg1 )
	end
end

local f0_local12 = function ( f30_arg0, f30_arg1, f30_arg2 )
	if 0 < #f30_arg1 and 0 < #f30_arg2 then
		f30_arg0:ProcessObjectivesUtility( {
			objectiveTable = f30_arg1,
			status = ObjectiveState.DONE,
			additionalObjectives = f30_arg2,
			additionalStatus = ObjectiveState.FAILED
		} )
	elseif 0 < #f30_arg1 then
		f30_arg0:ProcessObjectivesUtility( {
			objectiveTable = f30_arg1,
			status = ObjectiveState.DONE
		} )
	elseif 0 < #f30_arg2 then
		f30_arg0:ProcessObjectivesUtility( {
			objectiveTable = f30_arg2,
			status = ObjectiveState.FAILED
		} )
	end
end

local f0_local13 = function ( f29_arg0, f29_arg1 )
	local f29_local0 = {}
	local f29_local1 = {}
	for f29_local12, f29_local13 in ipairs( f29_arg1 ) do
		f29_arg0._widgets[f29_local12] = f29_arg0._widgets[f29_local12] or {}
		if (f29_local13.state == ObjectiveState.DONE or f29_local13.state == ObjectiveState.FAILED) and f29_local13.playOutro then
			if not (not f29_arg0._descriptions or not f29_arg0._descriptions[f29_local12]) or 0 < CountTableKeys( f29_arg0._widgets[f29_local12] ) then
				if f29_local13.state == ObjectiveState.DONE then
					table.insert( f29_local0, f29_local13 )
				else
					table.insert( f29_local1, f29_local13 )
					goto basicblock_30:
				end
			end
		end
		if not f0_local0( f29_local13.state ) then
			for f29_local8, f29_local9 in pairs( f29_arg0._widgets[f29_local12] ) do
				if f29_arg0._widgets[f29_local12][f29_local8]:GetPinned() and f29_arg0.ObjectiveProgress then
					ACTIONS.AnimateSequence( f29_arg0.ObjectiveProgress, "Hide" )
				end
				f29_arg0._widgets[f29_local12][f29_local8].wrapper:closeTree()
				f29_arg0._widgets[f29_local12][f29_local8] = nil
			end
			if f29_arg0._descriptions and f29_arg0._descriptions[f29_local12] then
				f29_arg0._descriptions[f29_local12]:closeTree()
				f29_arg0._descriptions[f29_local12] = nil
			end
		end
		for f29_local8, f29_local9 in pairs( f29_arg0._widgets[f29_local12] ) do
			local f29_local11 = f29_local13.locations[f29_local8]
			local f29_local10 = f29_local11.entNum
			if not f29_local10 then
				f29_local10 = f29_local11.scriptableIndex or f29_local11.x
			end
			if f29_arg0._widgets[f29_local12][f29_local8] and not f29_local10 then
				f29_arg0._widgets[f29_local12][f29_local8].wrapper:closeTree()
				f29_arg0._widgets[f29_local12][f29_local8] = nil
			end
		end
	end
	f29_arg0:ProcessObjectives( f29_local0, f29_local1 )
end

local f0_local14 = function ( f28_arg0, f28_arg1 )
	local f28_local0 = {}
	local f28_local1 = false
	for f28_local22, f28_local23 in ipairs( f28_arg1 ) do
		local f28_local24 = f0_local0( f28_local23.state )
		f28_arg0._widgets[f28_local22] = f28_arg0._widgets[f28_local22] or {}
		if f28_local24 then
			local f28_local5 = false
			local f28_local6 = f28_arg0._descriptions
			if f28_local6 then
				f28_local6 = f28_arg0._descriptions[f28_local22]
			end
			local f28_local7 = 0 < CountTableKeys( f28_arg0._widgets[f28_local22] )
			local f28_local8
			if not f28_local6 then
				f28_local8 = f28_local6
			else
				f28_local8 = f28_local7
			end
			local f28_local9 = false
			local f28_local10 = false
			if CONDITIONS.IsUsingDoomstation() then
				f28_local9 = f28_local23.icon == "ui_mp_br_doom_activate"
				if f28_local9 then
					f28_local10 = f28_local9
				else
					f28_local10 = f28_arg0._doomstationEncountered
				end
				if f28_local9 then
					f28_arg0._doomstationEncountered = true
				end
			end
			for f28_local20, f28_local21 in pairs( f28_local23.locations ) do
				local f28_local14 = f28_local21.entNum
				if not f28_local14 then
					f28_local14 = f28_local21.scriptableIndex or f28_local21.x
				end
				if f28_local14 and not f28_arg0._widgets[f28_local22][f28_local20] then
					local self = LUI.UIElement.new()
					local f28_local16 = MenuBuilder.BuildRegisteredType
					local f28_local17
					if f28_local23.isCalloutMarkerPing then
						f28_local17 = "CalloutMarkerPing"
					else
						f28_local17 = "Objective"
					end
					local f28_local18 = {
						controllerIndex = controllerIndex,
						objectiveIndex = f28_local22,
						locationIndex = f28_local20,
						wrapper = self
					}
					local f28_local19
					if not f28_arg0.disableDistanceBasedSnapCheck then
						f28_local19 = not f28_local23.isCalloutMarkerPing
					else
						f28_local19 = false
					end
					f28_local18.enableDistanceBasedSnapCheck = f28_local19
					f28_local18.screenCenterFadeDisabled = f28_arg0.screenCenterFadeDisabled or f28_local23.fadeDisabled
					f28_local18.perspectiveScalingDisabled = f28_arg0.perspectiveScalingDisabled
					f28_local18.showDistanceDisabled = f28_arg0.showDistanceDisabled and f28_arg0.showDistanceDisabled or nil
					f28_local18.tacOpsMapSettings = f28_arg0.tacOpsMapSettings
					if not f28_arg0.distanceBasedFadingDisabled and not f28_local23.isCalloutMarkerPing then
						f28_local19 = true
					else
						f28_local19 = false
					end
					f28_local18.useDistanceBasedFading = f28_local19
					f28_local18.enable2DDistanceFade = f28_local23.enable2DDistanceFade
					f28_local18.progressBar = f28_arg0.ObjectiveProgress and f28_arg0.ObjectiveProgress or nil
					f28_local18.fadeStart = f28_local23.fadeStart
					f28_local18.fadeEnd = f28_local23.fadeEnd
					f28_local18.minScale = f28_local23.minScale
					f28_local18.maxScale = f28_local23.maxScale
					f28_local18.disablePing = f28_local23.disablePing
					f28_local18.icon = f28_local23.icon
					f28_local16 = f28_local16( f28_local17, f28_local18 )
					f28_local16:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -64 * _1080p, 64 * _1080p, 90 * _1080p, 218 * _1080p )
					f28_local16:Update( f28_local23 )
					f28_arg0._widgets[f28_local22][f28_local20] = f28_local16
					f28_local16.wrapper = self
					self:addElement( f28_local16 )
					f28_arg0.ObjectiveWidgets:addElement( self )
					f28_local5 = true
				end
			end
			if f28_arg0._descriptions and 0 < #f28_local23.description and not f28_arg0._descriptions[f28_local22] then
				f28_local11 = MenuBuilder.BuildRegisteredType( "ObjectiveDescription", {
					controllerIndex = controllerIndex
				} )
				f28_local11:SetLeftAnchor( 0 )
				f28_local11:SetRightAnchor( 0 )
				f28_local11:SetLeft( 0 )
				f28_local11:SetRight( 0 )
				f28_arg0._descriptions[f28_local22] = f28_local11
				f28_arg0._descriptions[f28_local22]:SetText( Engine.CBBHFCGDIC( f28_local23.description ) )
				f28_local11:setPriority( f28_local22 )
				f28_arg0.HeaderList:addElement( f28_local11 )
				f28_local5 = true
			end
			if f28_local5 and (f28_local23.playIntro or f28_local23.isCalloutMarkerPing) and not f28_local8 then
				table.insert( f28_local0, f28_local23 )
				if not f28_local10 and (not f28_local23.isCalloutMarkerPing or f28_local23.isCalloutMarkerPing == false or f28_local23.isCalloutMarkerPing == "") then
					f28_local1 = true
				end
			end
		end
	end
	if not (f28_arg0._initialized == nil) and 0 < #f28_local0 then
		if not Engine.CAADCDEEIA() then
			f28_local3 = {
				objectiveStatus = f0_local0.New,
				controllerIndex = f28_arg0._controllerIndex,
				displayLocation = LUI.SplashManager.MessageType.Objective.key,
				objectiveTable = f28_local0
			}
			if not CONDITIONS.IsMagmaGameMode() or f28_local1 then
				f28_arg0:dispatchEventToRoot( {
					name = "add_message_splash_manager",
					immediate = true,
					options = f28_local3
				} )
			end
		elseif not f0_local0( f28_arg0._controllerIndex ) then
			f0_local0( f28_arg0, f28_local0 )
		elseif Game.BFEEGCHICA( f28_arg0._controllerIndex, "ui_show_objectives" ) then
			f0_local0( f28_arg0 )
			f0_local0( f28_arg0 )
		end
	end
end

local f0_local15 = function ( f27_arg0, f27_arg1 )
	local f27_local0 = false
	for f27_local8, f27_local9 in ipairs( f27_arg1 ) do
		f27_arg0._widgets[f27_local8] = f27_arg0._widgets[f27_local8] or {}
		for f27_local4, f27_local5 in pairs( f27_local9.locations ) do
			if f27_arg0._widgets[f27_local8][f27_local4] then
				f27_arg0._widgets[f27_local8][f27_local4]:Update( f27_local9 )
			end
		end
		if f27_arg0._descriptions and f27_arg0._descriptions[f27_local8] then
			f27_arg0._descriptions[f27_local8]:SetText( Engine.CBBHFCGDIC( f27_local9.description ) )
		end
		f27_local7 = f27_local9.pinned
		if not f27_local7 then
			f27_local0 = f27_local7
		end
	end
	if CONDITIONS.IsMagmaGameMode() and f27_arg0.ObjectiveProgress and f27_local0 == false then
		ACTIONS.AnimateSequence( f27_arg0.ObjectiveProgress, "Hide" )
	end
end

local f0_local16 = function ( f26_arg0, f26_arg1 )
	if f26_arg0._waitTimer ~= nil then
		f26_arg0._waitTimer:closeTree()
		f26_arg0._waitTimer = nil
	end
	f26_arg0:ProcessObjectivesData( f26_arg0._mostUpToDateObjectives )
end

local f0_local17 = function ( f25_arg0, f25_arg1 )
	local f25_local0 = 200
	local f25_local1 = Dvar.CFHDGABACF( "lui_objective_update_debuff_time" )
	local f25_local2
	if f25_local1 ~= nil and not f25_local1 then
		f25_local2 = f25_local1
	else
		f25_local2 = f25_local0
	end
	local f25_local3 = Engine.BFBIDEGDFB()
	f25_arg0._mostUpToDateObjectives = f25_arg1
	if f25_arg0._lastCompletedUpdateTime ~= nil and f25_local3 - f25_arg0._lastCompletedUpdateTime < f25_local2 then
		if f25_arg0._waitTimer == nil then
			local self = LUI.UITimer.new( {
				event = "run_queued_objectives_update",
				interval = f25_local2 - f25_local3 - f25_arg0._lastCompletedUpdateTime + 1
			} )
			f25_arg0:addElement( self )
			f25_arg0._waitTimer = self
		end
		return 
	elseif f25_arg0._currentState then
		return 
	else
		f0_local0( f25_arg0, f25_arg1 )
		if f25_arg0._currentState then
			return 
		else
			f0_local0( f25_arg0, f25_arg1 )
			if f25_arg0._currentState then
				return 
			else
				f0_local0( f25_arg0, f25_arg1 )
				f25_arg0._lastCompletedUpdateTime = Engine.BFBIDEGDFB()
				f25_arg0._initialized = true
			end
		end
	end
end

local f0_local18 = function ( f24_arg0 )
	local f24_local0 = f24_arg0._controllerIndex
	assert( f24_local0 )
	f0_local0( f24_arg0, LUI.HudManager.GetObjectiveData( f24_local0 ) )
end

local f0_local19 = function ( f23_arg0 )
	local f23_local0 = f23_arg0._controllerIndex
	assert( f23_local0 )
	f0_local0( f23_arg0, LUI.HudManager.GetObjectivePSData( f23_local0 ) )
end

local f0_local20 = function ( f20_arg0, f20_arg1 )
	f20_arg0.Status:SetAlpha( 0 )
	f20_arg0.HeaderList:SetAlpha( 0 )
	f20_arg0.ObjectiveWidgets:SetAlpha( 0 )
	f20_arg0._visibleForGSC = false
	local f20_local0 = LUI.DataSourceFromOmnvar.new( "ui_show_objectives" )
	f20_arg0:SubscribeToModel( f20_local0:GetModel( f20_arg1 ), function ( f22_arg0 )
		f20_arg0._visibleForGSC = DataModel.JJEHAEBDF( f22_arg0 )
		if f20_arg0._visibleForGSC and not f20_arg0._currentState then
			local f22_local0 = f20_arg0.HeaderList:getFirstChild()
			if not f22_local0 then
				f22_local0 = f20_arg0.ObjectiveWidgets:getFirstChild()
			end
			local f22_local1 = f20_arg0.Status
			local f22_local2 = f22_local1
			f22_local1 = f22_local1.UpdateMessage
			local f22_local3
			if f22_local0 then
				f22_local3 = "MENU/OBJECTIVE"
			else
				f22_local3 = "MENU/NO_OBJECTIVE"
			end
			f22_local1( f22_local2, f22_local3 )
		end
		f20_arg0( f20_arg0 )
	end )
	local f20_local1 = LUI.DataSourceFromOmnvar.new( "ui_show_objectives_reminder" )
	f20_arg0:SubscribeToModel( f20_local1:GetModel( f20_arg1 ), function ( f21_arg0 )
		f20_arg0( f20_arg0 )
	end, true )
end

local f0_local21 = function ( f19_arg0, f19_arg1 )
	if f19_arg1.objectiveStatus == f0_local0.Complete then
		f19_arg0:PlayFanfareAndRemoveObjective( f19_arg1 )
	elseif f19_arg1.objectiveStatus == f0_local0.Reminder then
		f19_arg0:ShowReminder()
	elseif f19_arg1.objectiveStatus == f0_local0.New then
		f19_arg0:PlayRevealFanfare( f19_arg1.objectiveTable )
	end
	return true
end

function PostLoadFunc( f8_arg0, f8_arg1, f8_arg2 )
	f8_arg0._controllerIndex = f8_arg1
	f8_arg0._widgets = {}
	f8_arg0._currentState = nil
	f8_arg0.Update = f0_local0
	f8_arg0.UpdateObjectivesPS = f0_local0
	f8_arg0.ProcessObjectivesData = f0_local0
	f8_arg0.screenCenterFadeDisabled = f8_arg2.screenCenterFadeDisabled
	f8_arg0.perspectiveScalingDisabled = f8_arg2.perspectiveScalingDisabled
	f8_arg0.showDistanceDisabled = f8_arg2.showDistanceDisabled
	f8_arg0.distanceBasedFadingDisabled = f8_arg2.distanceBasedFadingDisabled
	f8_arg0.disableDistanceBasedSnapCheck = f8_arg2.disableDistanceBasedSnapCheck
	f8_arg0.tacOpsMapSettings = f8_arg2.tacOpsMapSettings
	f8_arg0.ShowSplash = f0_local0
	f8_arg0.PlayFanfareAndRemoveObjective = f0_local0
	f8_arg0.ShowReminder = f0_local0
	f8_arg0.PlayRevealFanfare = f0_local0
	f8_arg0.ProcessObjectives = f0_local0
	f8_arg0.ProcessObjectivesUtility = f0_local0
	f8_arg0.SetupWaitTimerOnComplete = f0_local0
	f8_arg0.codcasterWaypointsEnabled = nil
	f8_arg0.ObjectiveWidgets = LUI.UIElement.new()
	f8_arg0:addElement( f8_arg0.ObjectiveWidgets )
	f8_arg0.ObjectivesType = f0_local0.All
	if Engine.CAADCDEEIA() then
		f8_arg0._descriptions = {}
		f8_arg0.HeaderList = LUI.UIVerticalStackedLayout.new()
		f8_arg0.HeaderList:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 126 * _1080p, 162 * _1080p )
		if IsLanguageChinese() or IsLanguageKorean() or IsLanguageJapanese() then
			f8_arg0.HeaderList:SetSpacing( 8 )
		end
		f8_arg0:addElement( f8_arg0.HeaderList )
	end
	if f8_arg0.ObjectiveProgress then
		ACTIONS.AnimateSequence( f8_arg0.ObjectiveProgress, "Hide" )
	end
	if Dvar.IBEGCHEFE( "NLNLNLKNQM" ) then
		f8_arg0:registerAndCallEventHandler( "objectives_ping", function ( f18_arg0, f18_arg1 )
			f18_arg0.ObjectivesType = f8_arg0.All
			f18_arg0:Update()
		end )
		f8_arg0:registerEventHandler( "objectives_ps_ping", function ( element, event )
			element.ObjectivesType = f8_arg0.PS
			element:UpdateObjectivesPS()
		end )
		if Engine.CAADCDEEIA() then
			f0_local0( f8_arg0, f8_arg1 )
		else
			f8_arg0._visibleForGSC = true
		end
	end
	local f8_local0 = Dvar.DHEEJCCJBH( "MOLPOSLOMO" )
	if f8_local0 == "hq" then
		local f8_local1 = LUI.DataSourceFromOmnvar.new( "ui_hq_status" )
		f8_arg0:SubscribeToModel( f8_local1:GetModel( f8_arg1 ), function ()
			if Game.BFEEGCHICA( f8_arg0, "ui_hq_status" ) == 5 then
				ACTIONS.AnimateSequence( f8_arg0.ObjectiveProgress, "Hide" )
			end
		end )
	elseif f8_local0 == "grnd" or f8_local0 == "koth" then
		local f8_local1 = LUI.DataSourceFromOmnvar.new( "ui_hq_status" )
		f8_arg0:SubscribeToModel( f8_local1:GetModel( f8_arg1 ), function ()
			if Game.BFEEGCHICA( f8_arg0, "ui_hq_status" ) == -1 then
				ACTIONS.AnimateSequence( f8_arg0.ObjectiveProgress, "Hide" )
			end
		end )
	elseif f8_local0 == "sd" then
		local f8_local1 = function ( f13_arg0 )
			f8_arg0:registerOmnvarHandler( "ui_bomb_planted_" .. f13_arg0, function ( f14_arg0, f14_arg1 )
				if f14_arg1.value then
					ACTIONS.AnimateSequence( f14_arg0.ObjectiveProgress, "Hide" )
				end
			end )
		end
		
		f8_local1( "a" )
		f8_local1( "b" )
	elseif f8_local0 == "cyber" then
		f8_arg0:registerOmnvarHandler( "ui_bomb_defuser", function ( f12_arg0, f12_arg1 )
			if f12_arg1.value == -1 then
				ACTIONS.AnimateSequence( f12_arg0.ObjectiveProgress, "Hide" )
			end
		end )
	elseif f8_local0 == "br" then
		f8_arg0:registerOmnvarHandler( "ui_gulag", function ( f11_arg0, f11_arg1 )
			f11_arg0:dispatchEventToRoot( {
				immediate = true,
				name = "objectives_update"
			} )
		end )
	end
	f8_arg0:registerOmnvarHandler( "ui_hide_objectives", function ( f10_arg0, f10_arg1 )
		local f10_local0 = f10_arg1.value
		local f10_local1 = f10_arg0
		local f10_local2 = f10_arg0.SetAlpha
		local f10_local3
		if f10_local0 then
			f10_local3 = 0
		else
			f10_local3 = 1
		end
		f10_local2( f10_local1, f10_local3 )
	end )
	f8_arg0:registerEventHandler( "codcaster_update_waypoints_visibility", function ( element, event )
		f8_arg0.codcasterWaypointsEnabled = event.waypointsEnabled
		local f9_local0 = f8_arg0.ObjectiveWidgets
		local f9_local1 = f9_local0
		f9_local0 = f9_local0.SetAlpha
		local f9_local2
		if f8_arg0.codcasterWaypointsEnabled == true then
			f9_local2 = 1
		else
			f9_local2 = 0
		end
		f9_local0( f9_local1, f9_local2 )
	end )
	f8_arg0:registerEventHandler( "run_queued_objectives_update", f0_local0 )
end

function Objectives( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 128 * _1080p, 0, 60 * _1080p )
	self.id = "Objectives"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local Flash = nil
	
	Flash = LUI.UIImage.new()
	Flash.id = "Flash"
	Flash:SetAlpha( 0, 0 )
	Flash:setImage( RegisterMaterial( "widg_gradient_center_out" ), 0 )
	Flash:Setup3SliceHorizontalImage( _1080p * 18, 0 )
	Flash:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, 0, 0, _1080p * -2, _1080p * 38 )
	self:addElement( Flash )
	self.Flash = Flash
	
	local Status = nil
	
	Status = MenuBuilder.BuildRegisteredType( "ObjectiveHeading", {
		controllerIndex = f1_local1
	} )
	Status.id = "Status"
	Status:SetAlpha( 0, 0 )
	Status:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -150, _1080p * 150, 0, _1080p * 36 )
	self:addElement( Status )
	self.Status = Status
	
	local UpdateHint = nil
	
	UpdateHint = LUI.UIStyledText.new()
	UpdateHint.id = "UpdateHint"
	UpdateHint:SetRGBFromTable( SWATCHES.HUD.HUDMain, 0 )
	UpdateHint:SetAlpha( 0, 0 )
	UpdateHint:setText( Engine.CBBHFCGDIC( "GAME/TO_VIEW_OBJECTIVES" ), 0 )
	UpdateHint:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	UpdateHint:SetAlignment( LUI.Alignment.Center )
	UpdateHint:SetShadowMinDistance( -0.3, 0 )
	UpdateHint:SetShadowRGBFromInt( 5066061, 0 )
	UpdateHint:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -400, _1080p * 400, _1080p * 36, _1080p * 64 )
	self:addElement( UpdateHint )
	self.UpdateHint = UpdateHint
	
	local f1_local6 = nil
	if Engine.EAAHGICFBD() then
		f1_local6 = MenuBuilder.BuildRegisteredType( "ObjectivePinnedProgress", {
			controllerIndex = f1_local1
		} )
		f1_local6.id = "ObjectiveProgress"
		f1_local6:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -150, _1080p * 150, _1080p * 260, _1080p * 310 )
		self:addElement( f1_local6 )
		self.ObjectiveProgress = f1_local6
	end
	self._sequences.DefaultSequence = function ()
		
	end
	
	local f1_local7 = nil
	Flash:RegisterAnimationSequence( "NewObjective", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -18
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 18
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 210,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -361
		},
		{
			duration = 210,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 361
		},
		{
			value = 0,
			duration = 300,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.inQuadratic
		},
		{
			duration = -38,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -717,
			easing = LUI.EASING.inQuadratic
		},
		{
			duration = -38,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 717,
			easing = LUI.EASING.inQuadratic
		}
	} )
	Status:RegisterAnimationSequence( "NewObjective", {
		{
			value = 1,
			duration = 1800,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.NewObjective = function ()
		menu:AnimateSequence( "NewObjective" )
		menu:AnimateSequence( "NewObjective" )
	end
	
	local f1_local8 = nil
	Status:RegisterAnimationSequence( "CompleteObjective", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 2000,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = 500,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.CompleteObjective = function ()
		menu:AnimateSequence( "CompleteObjective" )
	end
	
	local f1_local9 = nil
	Status:RegisterAnimationSequence( "Updated", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 2000,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = 500,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	UpdateHint:RegisterAnimationSequence( "Updated", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 60,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 1940,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = 500,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.Updated = function ()
		menu:AnimateSequence( "Updated" )
		menu:AnimateSequence( "Updated" )
	end
	
	local f1_local10 = nil
	Status:RegisterAnimationSequence( "FailedObjective", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = 3000,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.snap
		}
	} )
	self._sequences.FailedObjective = function ()
		menu:AnimateSequence( "FailedObjective" )
	end
	
	local f1_local11 = nil
	Flash:RegisterAnimationSequence( "CPNewObjective", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -18
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 18
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 210,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -361
		},
		{
			duration = 210,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 361
		},
		{
			value = 0,
			duration = 300,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.inQuadratic
		},
		{
			duration = -38,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -717,
			easing = LUI.EASING.inQuadratic
		},
		{
			duration = -38,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 717,
			easing = LUI.EASING.inQuadratic
		}
	} )
	Status:RegisterAnimationSequence( "CPNewObjective", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -400
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 400
		},
		{
			value = 1,
			duration = 5490,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.CPNewObjective = function ()
		menu:AnimateSequence( "CPNewObjective" )
		menu:AnimateSequence( "CPNewObjective" )
	end
	
	PostLoadFunc( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "Objectives", Objectives )
LockTable( _M )
