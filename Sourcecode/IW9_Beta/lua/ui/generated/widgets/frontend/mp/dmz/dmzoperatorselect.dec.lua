-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:01
module( ..., package.seeall )
require( "ui.generated.widgets.frontend.operator.operatorselectbutton" )
require( "ui.generated.widgets.scrollbar.verticalminimalscrollbar" )
require( "ui.generated.widgets.frontend.mp.partymemberstatusinfo" )
FrontEndScene.RegisterScene( "DMZOperatorSelect", "character_faction_select_l" )
local f0_local0 = function ( f26_arg0, f26_arg1, f26_arg2 )
	assert( f26_arg2.name )
	assert( f26_arg2.superfaction )
	local f26_local0 = FrontEndScene.ClientCharacters.OperatorWest
	f26_arg0.OperatorName:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( f26_arg2.name ) ) )
	local f26_local1 = OPERATOR.GetClientCharacterForSuperFaction( f26_local0 )
	f26_arg0.OperatorDesc:setText( Engine[0xED84C33EC5F01EA]( f26_arg2.background ) )
	local f26_local2 = OPERATOR.GetOperatorSkinByRef( f26_arg1, f26_arg2.defaultSkin, f26_arg2.ref )
	FrontEndScene.RequestBodyModels( {
		f26_local2.bodyModel
	} )
	FrontEndScene.RequestHeadModels( {
		f26_local2.headModel
	} )
	local f26_local3, f26_local4 = OPERATOR.GetWeaponDataFromLoadout( f26_arg1 )
	local f26_local5 = OPERATOR.ValidateAccessoryModel( OPERATOR.GetWeaponAccessoryModelFromLoadout( f26_arg1 ), f26_local2.bodyModel )
	local f26_local6 = WEAPON.GetWeaponDetailsFromModel( f26_local4 )
	if not OPERATOR.IsStowedWeaponAllowedInPreviewScreens( f26_local6.weaponAsset ) then
		f26_local4 = WEAPON.NoneValue
	end
	FrontEndScene.RequestWeaponWorldModels( {
		f26_local3,
		f26_local4,
		f26_local5
	} )
	local f26_local7 = nil
	if WEAPON.IsWeaponNoneValue( f26_local3 ) then
		f26_local7 = "fe_op_select_male_01_idle_01"
	else
		f26_local7 = "fe_op_select_male_01_idle_01"
	end
	OPERATOR.UpdateClientCharacter( f26_local1, f26_arg1, f26_local2.bodyModel, f26_local2.headModel, f26_local7, f26_arg0, f26_local3, f26_local4, #Dvar[0x54084D7CA2317BB]( 0x8CC749B90DD2705 ) == 0, f26_local5 )
	OPERATOR.UpdatePet( f26_arg1, OPERATOR.GetPetCharacterForSuperFaction( f26_local0 ), {
		idle = true,
		execution = OPERATOR.GetExecutionForOperator( f26_arg1, f26_arg2.ref ),
		element = f26_arg0
	} )
	ClientCharacter[0xB6D1A33AC2622D0]( f26_local1, 0, 10, 0 )
end

local f0_local1 = function ( f25_arg0, f25_arg1, f25_arg2, f25_arg3 )
	assert( f25_arg2 )
	local f25_local0 = StringTable[0x2DCF0973239E909]( CSV.operators.file, CSV.operators.cols.ref, f25_arg2, CSV.operators.cols.icon )
	assert( f25_local0 )
	local f25_local1 = {
		removeTextBacker = true,
		imageSize = "ImageFull",
		buttonData = {}
	}
	f25_local1.buttonData.image = f25_local0
	f25_local1.buttonData.header = StringTable[0x2DCF0973239E909]( CSV.operators.file, CSV.operators.cols.ref, f25_arg2, CSV.operators.cols.name )
	f25_local1.buttonData.isUnlocked = OPERATOR.IsUnlocked( f25_arg3, f25_arg2 )
	f25_arg1.ButtonSmallTall:SetupButton( f25_local1 )
	f25_arg1.ButtonSmallTall:SetPrimaryPromptText( 0x7D9DC9E3291E103 )
	local f25_local2 = PLAYER_DATA.IO( f25_arg3, LOADOUT.GetLoadoutStatsGroup() )
	local f25_local3 = f25_local2.customizationSetup.operators[tonumber( OPERATOR.GetSelectedOperatorIndex( f25_arg3 ) )]:get() == f25_arg2
	f25_arg1:SetSelected( f25_local3 )
	if f25_local3 then
		f25_arg0._currentSelectedButton = f25_arg1
	end
	if OPERATOR.IsUnlocked( f25_arg3, f25_arg2 ) then
		f25_arg1:SetButtonDisabled( false )
	else
		f25_arg1:SetButtonDisabled( true )
		if f25_local3 then
			ACTIONS.AnimateSequence( f25_arg1, "ButtonOverDisabled" )
		else
			ACTIONS.AnimateSequence( f25_arg1, "ButtonUpDisabled" )
		end
	end
end

local f0_local2 = function ( f24_arg0, f24_arg1, f24_arg2 )
	f0_local0( f24_arg0, f24_arg2, f24_arg1._operatorInfo )
end

local f0_local3 = function ( f23_arg0, f23_arg1 )
	f23_arg0:dispatchEventToRoot( {
		name = "send_toast_notification",
		immediate = true,
		options = {
			iconScale = 4.667263495923649E-62,
			displayTime = 3000,
			icon = "cac_equip_fill",
			iconColor = SWATCHES.genericMenu.notificationHighlight,
			header = Engine[0xED84C33EC5F01EA]( 0x4001E7BD10C7068 ),
			description = Engine[0xED84C33EC5F01EA]( f23_arg1 ),
			type = LUI.ToastManager.NotificationType.OperatorEquipped,
			controllerIndex = controllerIndex
		}
	} )
end

local f0_local4 = function ( f22_arg0, f22_arg1, f22_arg2 )
	local f22_local0 = f22_arg1._operatorInfo
	local f22_local1 = PLAYER_DATA.IO( f22_arg2, LOADOUT.GetLoadoutStatsGroup() )
	f22_local1 = f22_local1.customizationSetup
	if f22_local1.operators[tonumber( OPERATOR.GetSelectedOperatorIndex( f22_arg2 ) )]:get() ~= f22_local0.ref then
		if f22_arg0._currentSelectedButton then
			f22_arg0._currentSelectedButton:SetSelected( false )
		end
		f22_arg0._currentSelectedButton = f22_arg1
		f22_arg1:SetSelected( true )
		local f22_local2 = tonumber( f22_local0.superfaction )
		OPERATOR.SetSelectedOperatorIndex( f22_arg2, f22_local2 )
		f22_local1.operators[f22_local2]:set( f22_local0.ref )
		f0_local0( f22_arg0, f22_local0.name )
		Lobby.PreloadViewHandsForLocalPlayer( f22_arg2 )
		Engine[0xB81A5136C5503E4]( "uploadstats", f22_arg2 )
	end
end

local f0_local5 = function ( f14_arg0, f14_arg1, f14_arg2, f14_arg3 )
	local f14_local0 = function ( f21_arg0, f21_arg1 )
		ACTIONS.AnimateSequence( f21_arg0, "ButtonOver" )
		f14_arg0( f14_arg0, f21_arg0, f14_arg0 )
	end
	
	local f14_local1 = function ( f20_arg0, f20_arg1 )
		ACTIONS.AnimateSequence( f20_arg0, "ButtonOverDisabled" )
		f14_arg0( f14_arg0, f20_arg0, f14_arg0 )
	end
	
	local f14_local2 = function ( f19_arg0, f19_arg1 )
		ACTIONS.AnimateSequence( f19_arg0, "ButtonUpDisabled" )
	end
	
	local f14_local3 = function ( f18_arg0, f18_arg1 )
		ACTIONS.AnimateSequence( f18_arg0, "ButtonUp" )
	end
	
	local f14_local4 = function ( f17_arg0, f17_arg1 )
		f14_arg0( f14_arg0, f17_arg0, f14_arg0 )
	end
	
	local f14_local5 = function ( f16_arg0, f16_arg1 )
		f14_arg0:SetSelected( true )
		f14_arg0( f14_arg0, f16_arg0, f14_arg0 )
		return true
	end
	
	local f14_local6 = function ( f15_arg0, f15_arg1 )
		return true
	end
	
	f14_arg1._operatorInfo = f14_arg2
	f0_local0( f14_arg0, f14_arg1, f14_arg2.ref, f14_arg3 )
	f14_arg1:registerEventHandler( "button_over_disable", f14_local1 )
	f14_arg1:registerEventHandler( "button_disable", f14_local2 )
	f14_arg1:registerEventHandler( "button_over", f14_local0 )
	f14_arg1:registerEventHandler( "button_up", f14_local3 )
	f14_arg1:registerEventHandler( "button_action", f14_local5 )
	f14_arg1:registerEventHandler( "button_action_disable", f14_local6 )
	f14_arg1:registerEventHandler( "update_focused", f14_local4 )
end

local f0_local6 = function ( f13_arg0, f13_arg1 )
	local f13_local0 = 1
	for f13_local1 = 1, #f13_arg0._operators, 1 do
		if f13_arg0._operators[f13_local1].ref == f13_arg1 then
			f13_local0 = f13_local1 - 1
			break
		end
	end
	return f13_local0
end

local f0_local7 = function ( f12_arg0, f12_arg1 )
	local f12_local0 = PLAYER_DATA.IO( f12_arg1, LOADOUT.GetLoadoutStatsGroup() )
	return f0_local0( f12_arg0, f12_local0.customizationSetup.operators[tonumber( OPERATOR.GetSelectedOperatorIndex( f12_arg1 ) )]:get() )
end

local f0_local8 = function ( f8_arg0, f8_arg1, f8_arg2 )
	f8_arg0._operators = OPERATOR.GetOperators( f8_arg1 )
	assert( f8_arg0._operators )
	local f8_local0 = Dvar[0x9E5BE3B4BBA4E0E]( 0x46BD24DFF49A8F6 )
	local f8_local1 = function ()
		return f8_arg0.OperatorGrid:GetPositionForIndex( f8_arg0( f8_arg0, f8_arg0 ), {
			relativePosition = false
		} )
	end
	
	local f8_local2 = math.min
	local f8_local3 = #f8_arg0._operators
	local f8_local4
	if f8_local0 then
		f8_local4 = 35
	else
		f8_local4 = 15
	end
	f8_arg0.OperatorGrid:SetNumChildren( f8_local2( f8_local3, f8_local4 ) )
	f8_arg0.OperatorGrid:SetDefaultFocus( f8_local1 )
	f8_arg0.OperatorGrid:MouseSetActiveToDefaultFocusMenuCreate( f8_arg1 )
	f8_arg0.OperatorGrid:RefreshContent()
	LUI.DeferredFence.Attach( f8_arg0, f8_arg1, "CLIENT_CONNECT", LUI.DeferredFence.Criticality.LOW, LUI.DeferredFence.BackOutMethod.NONE, function ( f9_arg0, f9_arg1 )
		if f9_arg1.fenceState == LUI.Fence.FenceObjectState.PASSING then
			f8_arg0.OperatorGrid:SetRefreshChild( function ( f10_arg0, f10_arg1, f10_arg2 )
				f9_arg0( f9_arg0, f10_arg0, f9_arg0._operators[f9_arg0.OperatorGrid:GetContentIndex( f10_arg1, f10_arg2, {
					relativePosition = false
				} ) + 1], f9_arg0 )
			end )
			f8_arg0.OperatorGrid:RefreshContent()
			local f9_local0 = f8_arg0()
			local f9_local1 = f8_arg0.OperatorGrid:GetElementAtPosition( f9_local0.x, f9_local0.y )
			f8_arg0( f8_arg0, f8_arg0, f9_local1._operatorInfo )
		end
	end )
end

local f0_local9 = function ( f7_arg0, f7_arg1 )
	if Lobby.ShouldWakeParty() then
		Lobby[0xFD1ED6BA4CF64DD]( f7_arg1 )
	end
end

local f0_local10 = function ( f6_arg0, f6_arg1 )
	f6_arg0.PartyMemberStatusInfo:Setup( f6_arg1, Lobby.SquadMembersPath )
end

local f0_local11 = function ()
	local f5_local0 = OPERATOR.GetClientCharacterForSuperFaction( FrontEndScene.ClientCharacters.OperatorWest )
	FrontEndScene.SetCharacterVisible( f5_local0, true )
	ClientCharacter[0x813BDB5DDDF1A24]( f5_local0, true )
end

local f0_local12 = function ( f4_arg0, f4_arg1, f4_arg2 )
	GL_HACK.SetDMZModeDVar( true )
	Streaming[0xE493C1B436663F6]( true )
	FrontEndScene.HideAllCharacters()
	Engine[0x685AE31DEDA30A4]( "character_faction_select_l" )
	f0_local0( f4_arg0, f4_arg1, f4_arg2 )
	f0_local0( f4_arg0, f4_arg1 )
	MenuUtils.SetupSceneChangeCallback( f4_arg0, f0_local0 )
	f0_local0( f4_arg0, f4_arg1 )
	local f4_local0 = OPERATOR.GetClientCharacterForSuperFaction( f4_arg0.currentState )
	ClientCharacter[0x813BDB5DDDF1A24]( f4_local0, true )
	ClientCharacter[0xAA614EB46957F3B]( f4_local0, "fe_op_select_male_01_intro_01", 0 )
end

function DMZOperatorSelect( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "DMZOperatorSelect"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local OperatorName = nil
	
	OperatorName = LUI.UIStyledText.new()
	OperatorName.id = "OperatorName"
	OperatorName:SetRGBFromTable( SWATCHES.IW9StyleGuide.styleGuideCool03, 0 )
	OperatorName:SetAlpha( 0.6, 0 )
	OperatorName:setText( "WYATT", 0 )
	OperatorName:SetFont( FONTS.GetFont( FONTS.PrimaryBlack.File ) )
	OperatorName:SetFontSize( 90 * _PT )
	OperatorName:SetMinFontSize( 90 * _PT )
	OperatorName:SetWordWrap( true )
	OperatorName:SetAlignment( LUI.Alignment.Left )
	OperatorName:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 88, _1080p * 1011, _1080p * 174, _1080p * 258 )
	self:addElement( OperatorName )
	self.OperatorName = OperatorName
	
	local OperatorDesc = nil
	
	OperatorDesc = LUI.UIStyledText.new()
	OperatorDesc.id = "OperatorDesc"
	OperatorDesc:SetRGBFromTable( SWATCHES.IW9StyleGuide.styleGuideFeatured02, 0 )
	OperatorDesc:SetAlpha( 0, 0 )
	OperatorDesc:setText( "Cool Operator Description here", 0 )
	OperatorDesc:SetFont( FONTS.GetFont( FONTS.PrimaryRegular.File ) )
	OperatorDesc:SetFontSize( 24 * _PT )
	OperatorDesc:SetMinFontSize( 24 * _PT )
	OperatorDesc:SetWordWrap( true )
	OperatorDesc:SetAlignment( LUI.Alignment.Left )
	OperatorDesc:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 88, _1080p * 949, _1080p * 766, _1080p * 795 )
	self:addElement( OperatorDesc )
	self.OperatorDesc = OperatorDesc
	
	local OperatorGrid = nil
	
	OperatorGrid = LUI.UIGrid.new( {
		maxVisibleRows = 3,
		maxVisibleColumns = 5,
		adjustSizeToContent = true,
		buildArrowsLabel = true,
		wrapX = false,
		controllerIndex = f1_local1,
		buildChild = function ()
			return MenuBuilder.BuildRegisteredType( "OperatorSelectButton", {
				controllerIndex = menu
			} )
		end,
		refreshChild = function ( f2_arg0, f2_arg1, f2_arg2 )
			
		end,
		spacingX = _1080p * 16,
		spacingY = _1080p * 30,
		columnWidth = _1080p * 160,
		rowHeight = _1080p * 204
	} )
	OperatorGrid.id = "OperatorGrid"
	OperatorGrid:SetMaxVisibleColumns( 5 )
	OperatorGrid:SetMaxVisibleRows( 3 )
	OperatorGrid:SetRowSpacing( 30 )
	OperatorGrid:setUseStencil( false )
	OperatorGrid:SetWraps( false, nil )
	OperatorGrid:SetActiveOnMouseOverBehavior( f1_local1 )
	OperatorGrid:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 88, _1080p * 1032, _1080p * 300, _1080p * 790 )
	self:addElement( OperatorGrid )
	self.OperatorGrid = OperatorGrid
	
	local VerticalMinimalScrollbar = nil
	
	VerticalMinimalScrollbar = MenuBuilder.BuildRegisteredType( "VerticalMinimalScrollbar", {
		controllerIndex = f1_local1
	} )
	VerticalMinimalScrollbar.id = "VerticalMinimalScrollbar"
	VerticalMinimalScrollbar:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 65, _1080p * 76, _1080p * 203, _1080p * 877 )
	self:addElement( VerticalMinimalScrollbar )
	self.VerticalMinimalScrollbar = VerticalMinimalScrollbar
	
	local PartyMemberStatusInfo = nil
	
	PartyMemberStatusInfo = MenuBuilder.BuildRegisteredType( "PartyMemberStatusInfo", {
		controllerIndex = f1_local1
	} )
	PartyMemberStatusInfo.id = "PartyMemberStatusInfo"
	PartyMemberStatusInfo:SetAlpha( 0, 0 )
	PartyMemberStatusInfo:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1374, _1080p * 1824, _1080p * 276, _1080p * 576 )
	self:addElement( PartyMemberStatusInfo )
	self.PartyMemberStatusInfo = PartyMemberStatusInfo
	
	local f1_local7 = LUI.UIScrollbar.new
	local f1_local8 = {
		direction = LUI.DIRECTION.vertical,
		eventListener = VerticalMinimalScrollbar,
		startCap = VerticalMinimalScrollbar.startCap,
		endCap = VerticalMinimalScrollbar.endCap,
		sliderArea = VerticalMinimalScrollbar.sliderArea
	}
	local f1_local9 = VerticalMinimalScrollbar.sliderArea
	if f1_local9 then
		f1_local9 = VerticalMinimalScrollbar.sliderArea.slider
	end
	f1_local8.slider = f1_local9
	f1_local9 = VerticalMinimalScrollbar.sliderArea
	if f1_local9 then
		f1_local9 = VerticalMinimalScrollbar.sliderArea.fixedSizeSlider
	end
	f1_local8.fixedSizeSlider = f1_local9
	OperatorGrid:AddScrollbar( f1_local7( f1_local8 ) )
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "DMZOperatorSelect", DMZOperatorSelect )
LockTable( _M )
