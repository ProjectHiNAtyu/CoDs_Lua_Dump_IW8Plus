-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
SEARCH = {}
local f0_local0 = function ( f21_arg0 )
	local f21_local0 = nil
	if f21_arg0.optionId then
		f21_local0 = f21_arg0.optionId .. (f21_arg0.advCategory and "\\^%" .. f21_arg0.advCategory .. "^7" or "")
	else
		local f21_local1
		if 1 < #f21_arg0.menu.optionsList then
			f21_local1 = f21_arg0.tab.name() .. "\\^%"
			if not f21_local1 then
			
			else
				f21_local0 = f21_local1 .. f21_arg0.categoryName() .. "^7"
			end
		end
		f21_local1 = "^%"
	end
	return f21_local0
end

local f0_local1 = function ( f19_arg0, f19_arg1, f19_arg2 )
	local f19_local0, f19_local1 = OPTIONS.GetSettingsTabsData( f19_arg1 )
	local f19_local2 = {}
	local f19_local3 = OPTIONS.GetOptionsPath( f19_local0 )
	local f19_local4 = function ( f20_arg0 )
		return f19_arg0[f20_arg0] ~= nil
	end
	
	local f19_local5 = OPTIONS.InitOptionsList( f19_arg0, f19_arg1 )
	OPTIONS.InitKeybindOptionsList( f19_arg0, f19_arg1, f19_local5 )
	for f19_local10, f19_local11 in pairs( f19_local5 ) do
		if f19_local4( f19_local10 ) then
			local f19_local9 = Engine[0xED84C33EC5F01EA]( 0x499CE8C4775A89 )
			if f19_local11.name then
				if type( f19_local11.name ) == "function" then
					f19_local9 = f19_local11:name( f19_arg1 )
				else
					f19_local9 = f19_local11.name
				end
			end
			if f19_local9 then
				f19_local2[f19_local10] = Engine[0xEB2A2834B76AEA4]( f19_local9 )
			end
		end
	end
	f19_local6 = LUI.Trim( Engine[0xEB2A2834B76AEA4]( f19_arg2 ) )
	f19_local7 = nil
	if 0 < #f19_local6 then
		f19_local7 = Engine[0x20059E0829C593E]( f19_local2, f19_local6, Dvar[0x22EAAB59AA27E9B]( 0x825A131D6DD7A7A ) )
	end
	f19_local8 = {}
	f19_local10 = {}
	if f19_local7 then
		if #f19_local7 == 1 and f19_local7[1].key then
			f19_local11 = OPTIONS_DATA_GENERATED.options[f19_local7[1].key]
			if not f19_local11 then
				f19_local11 = OPTIONS_DATA_GENERATED.keyBindingsOptions[f19_local7[1].key]
			end
			if f19_local11 and f19_local11.relatedSettings then
				local f19_local9 = {}
				for f19_local18, f19_local19 in ipairs( f19_local11.relatedSettings ) do
					local f19_local15 = OPTIONS_DATA_GENERATED.options[f19_local19]
					if not f19_local15 then
						f19_local15 = OPTIONS_DATA_GENERATED.keyBindingsOptions[f19_local19]
					end
					if f19_local15 and f19_local3[f19_local19] and f19_local3[f19_local19][1] then
						local f19_local16 = f19_local15.name
						if f19_local16 then
							f19_local16 = OPTIONS.ReturnOrCallFunction( f19_local15.name() )
						end
						local f19_local17 = f19_local3[f19_local19][1]
						table.insert( f19_local9, {
							optionId = f19_local19,
							name = f19_local16,
							stringPath = f0_local0( f19_local17 ),
							icon = f19_local17.menu.icon,
							path = f19_local17
						} )
					end
				end
				f19_local10 = f19_local9
			end
		end
		for f19_local13, f19_local14 in ipairs( f19_local7 ) do
			for f19_local16, f19_local17 in ipairs( f19_local3[f19_local14.key] ) do
				table.insert( f19_local8, {
					optionId = f19_local14.key,
					name = f19_local14.name,
					stringPath = f0_local0( f19_local17 ),
					icon = f19_local17.menu.icon,
					path = f19_local17
				} )
			end
		end
	end
	return f19_local8, f19_local10
end

local f0_local2 = function ( f18_arg0, f18_arg1, f18_arg2 )
	local f18_local0 = {}
	local f18_local1 = {}
	if f18_arg2 and f18_arg2 ~= "" then
		f18_local0, f18_local1 = f0_local0( f18_arg0, f18_arg1, f18_arg2 )
	end
	if f18_arg0.UpdateSearchPanel then
		local f18_local2 = f18_arg0
		local f18_local3 = f18_arg0.UpdateSearchPanel
		local f18_local4
		if f18_arg2 == nil or f18_arg2 == "" then
			f18_local4 = false
		else
			f18_local4 = true
		end
		local f18_local5
		if not f18_local0 then
			f18_local5 = f18_local0
		else
			f18_local5 = {}
		end
		local f18_local6
		if not f18_local1 then
			f18_local6 = f18_local1
		else
			f18_local6 = {}
		end
		f18_local3( f18_local2, f18_local4, f18_local5, f18_local6 )
	end
end

SEARCH.SetupEditBox = function ( f14_arg0, f14_arg1, f14_arg2, f14_arg3 )
	local f14_local0 = {
		useAutoAlign = true,
		isNumericEmpty = false,
		icon = "icon_search",
		alwaysSendTypingEvents = true,
		autoConfirmOnOutsideClick = true,
		isNumeric = false,
		isPassword = false,
		autoConfirmOnTab = true,
		allowEmptyString = true,
		gamepadIcon = "icon_search",
		autoSelectAllOnActive = true,
		focusType = FocusType.MouseOver,
		defaultValue = Engine[0xED84C33EC5F01EA]( 0x3041BB7B9D30EB5 )
	}
	local f14_local1
	if f14_arg3 then
		f14_local1 = f14_arg3.autoSetActiveOnCreation
		if not f14_local1 then
		
		else
			f14_local0.autoSetActiveOnCreation = f14_local1
			f14_local0.textSelectionColor = {
				g = -28,
				a = 255,
				b = -28,
				r = -32
			}
			f14_local0.name = Engine[0xED84C33EC5F01EA]( 0x3041BB7B9D30EB5 )
			if f14_arg3 then
				f14_local1 = f14_arg3.disableClearText
				if not f14_local1 then
				
				else
					f14_local0.disableClearText = f14_local1
					if f14_arg3 then
						f14_local1 = f14_arg3.trailingCallback
						if not f14_local1 then
						
						else
							f14_local0.trailingCallback = f14_local1
							f14_arg1:SetupGenericEditBox( f14_arg2, f14_local0 )
							f14_local1 = f14_arg1:GetDefaultString()
							if 0 < #f14_local1 then
								local f14_local2 = f14_local1:sub( 2 )
								if not f14_local2 then
									f14_local1 = f14_local2
								end
							end
							f14_local1 = ""
						end
					end
					f14_local1 = false
				end
			end
			f14_local1 = false
		end
	end
	f14_local1 = false
end

local f0_local3 = function ( f11_arg0, f11_arg1, f11_arg2, f11_arg3, f11_arg4 )
	if f11_arg0.DynamicList.Grid:GetFocusPositionIndex() == f11_arg4 - 1 and not LUI.IsLastInputMouseNavigation( f11_arg2 ) then
		f11_arg1:processEvent( {
			name = "gain_focus",
			controller = f11_arg2
		} )
	end
	f11_arg1:addEventHandler( "button_over", function ( f13_arg0, f13_arg1 )
		f13_arg0:dispatchEventToParent( {
			name = "update_path",
			path = f11_arg0.stringPath
		} )
	end )
	f11_arg1:addEventHandler( "button_up", function ( f12_arg0, f12_arg1 )
		f12_arg0:dispatchEventToParent( {
			name = "update_path"
		} )
	end )
end

SEARCH.SetupSearchList = function ( f5_arg0, f5_arg1, f5_arg2 )
	f5_arg1:SetupList( {
		maxVisibleColumns = 1,
		maxVisibleRows = 15,
		spacingY = _1080p * 15,
		alignment = LUI.Alignment.Top
	}, f5_arg0.Scrollbar )
	f5_arg1:RegisterWidgetType( "Header", function ()
		return MenuBuilder.BuildRegisteredType( "SearchCategory", {
			controllerIndex = f5_arg0
		} )
	end, function ( f9_arg0, f9_arg1, f9_arg2 )
		f9_arg0.Label:setText( f9_arg2.text )
		if f9_arg2.height then
			f9_arg0:setHeight( f9_arg2.height )
		end
	end )
	f5_arg1:RegisterWidgetType( "Button", function ()
		return MenuBuilder.BuildRegisteredType( "GenericPanelButtonWithIcon", {
			controllerIndex = f5_arg0
		} )
	end, function ( f6_arg0, f6_arg1, f6_arg2 )
		local f6_local0 = f6_arg2.buttonData
		f6_arg0:SetText( f6_local0.name )
		f6_arg0:SetIcon( f6_local0.icon )
		if f5_arg0.isSearch ~= false then
			f5_arg0( f6_arg2.menu, f6_arg0, f6_arg2.menu._controllerIndex, f6_local0, f6_arg1 )
		end
		if f6_arg2.height then
			f6_arg0:setHeight( f6_arg2.height )
		end
		f6_arg0:registerEventHandler( "button_action", function ( element, event )
			if CONDITIONS.IsSplitScreenMenuInUse() then
				return 
			elseif f6_arg0.ButtonAction then
				f6_arg0:ButtonAction( f6_arg0, f6_arg0, f6_arg0 )
			else
				OPTIONS.GoToSetting( f6_arg0, event.controller, f6_arg0.path )
				local f7_local0 = "GlobalPanelOptionsSearch"
				if CONDITIONS.IsMenuInStack( f7_local0 ) then
					ACTIONS.LeaveMenuByName( f7_local0 )
				end
			end
			return true
		end )
	end )
end

SEARCH.AddListWidget = function ( f4_arg0, f4_arg1, f4_arg2, f4_arg3 )
	f4_arg2.menu = f4_arg0
	f4_arg0.DynamicList:AddWidget( f4_arg1, {
		adjustContentToFit = true,
		refreshGrid = false,
		widgetOptions = f4_arg2,
		focusable = f4_arg3,
		height = f4_arg2.height
	} )
end

local f0_local4 = function ( f3_arg0, f3_arg1, f3_arg2, f3_arg3, f3_arg4 )
	if f3_arg2._typeName == "GenericEditBox" then
		if f3_arg2:IsTextEditActive() then
			f3_arg2:TextEditOff()
		end
		f3_arg2:processEvent( {
			name = "lose_focus"
		} )
		f3_arg2:RefreshCurrentAnimation()
		if LUI.IsLastInputGamepad( f3_arg1 ) and f3_arg2:IsDefault() then
			f3_arg2:SetText( Engine[0xED84C33EC5F01EA]( 0x3041BB7B9D30EB5 ) )
		end
	elseif f3_arg2._typeName == "DynamicList" then
		f3_arg2:processEvent( {
			name = "lose_focus"
		} )
		f3_arg0.listIndex = nil
	end
	if f3_arg3._typeName == "GenericEditBox" then
		if Engine[0x575E9C5B9AAB6F4]() or LUI.IsLastInputKeyboardMouse( f3_arg1 ) then
			f3_arg3:processEvent( {
				name = "button_action",
				controller = f3_arg1
			} )
		elseif LUI.IsLastInputGamepad( f3_arg1 ) then
			f3_arg3:processEvent( {
				name = "gain_focus"
			} )
			if f3_arg3:IsDefault() then
				f3_arg3:SetText( Engine[0xED84C33EC5F01EA]( 0xE8760E5A51985F1 ) )
			end
		end
	elseif f3_arg3._typeName == "DynamicList" then
		f3_arg3:processEvent( {
			name = "gain_focus"
		} )
		local f3_local0 = f3_arg3.Grid:GetFirstFocusablePosition()
		if f3_arg4 or f3_local0 then
			local f3_local1 = f3_arg3
			local f3_local2 = f3_arg3.SetFocusedPosition
			local f3_local3 = {
				x = 0
			}
			local f3_local4
			if not f3_arg4 then
				f3_local4 = f3_arg4
			else
				f3_local4 = f3_local0.y
			end
			f3_local3.y = f3_local4
			f3_local2( f3_local1, f3_local3, true, true, true, false )
		end
	end
end

SEARCH.SetupEditBoxFocus = function ( f1_arg0, f1_arg1, f1_arg2 )
	assert( f1_arg0, "Need a reference to the menu to setup the EditBox focus" )
	assert( f1_arg1, "Need a reference to the EditBox to setup the EditBox focus" )
	assert( f1_arg2, "Need a reference to the grid to setup the EditBox focus" )
	f1_arg0:addEventHandler( "gamepad_button", function ( f2_arg0, f2_arg1 )
		if f2_arg1.button == "down" and f2_arg1.down and 0 < f1_arg0:GetNumChildren() then
			if f1_arg0:IsTextEditActive() or f1_arg0:isInFocus() then
				f1_arg0( f1_arg0, f2_arg1.controller, f1_arg0, f1_arg0 )
				f1_arg0.shouldFocus = false
				return true
			elseif f1_arg0:GetWidgetAtIndex( f1_arg0:GetNumChildren() - 1 ) then
				local f2_local0 = f1_arg0:GetWidgetAtIndex( f1_arg0:GetNumChildren() - 1 )
				if f2_local0:isInFocus() then
					f1_arg0( f1_arg0, f2_arg1.controller, f1_arg0, f1_arg0 )
					f1_arg0.shouldFocus = true
					return true
				end
			end
		elseif f2_arg1.button == "up" and f2_arg1.down and 0 < f1_arg0:GetNumChildren() then
			if f1_arg0:IsTextEditActive() or f1_arg0:isInFocus() then
				f1_arg0( f1_arg0, f2_arg1.controller, f1_arg0, f1_arg0, f1_arg0:GetNumChildren() - 1 )
				f1_arg0.shouldFocus = false
				return true
			end
			local f2_local0 = f1_arg0.Grid:GetFirstFocusablePosition()
			if f2_local0 then
				f2_local0 = f1_arg0:GetWidgetAtIndex( f2_local0.y )
			end
			if f2_local0 and f2_local0:isInFocus() then
				f1_arg0( f1_arg0, f2_arg1.controller, f1_arg0, f1_arg0 )
				f1_arg0.shouldFocus = true
				return true
			end
		elseif f2_arg1.button == "primary" and Engine[0x575E9C5B9AAB6F4]() and LUI.IsLastInputGamepad( f2_arg1.controller ) and (f1_arg0.shouldFocus or f1_arg0:isInFocus()) then
			f1_arg0:processEvent( {
				name = "button_action",
				controller = f2_arg1.controller
			} )
			f1_arg0.shouldFocus = nil
			return true
		end
	end )
end

