-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
module( ..., package.seeall )
local f0_local0 = 20 * _1080p
local f0_local1 = function ( f9_arg0, f9_arg1 )
	for f9_local3, f9_local4 in ipairs( f9_arg0._streakInfos ) do
		f9_local4:ShowKills( f9_arg1 )
	end
end

local f0_local2 = function ( f8_arg0, f8_arg1, f8_arg2 )
	for f8_local7, f8_local8 in ipairs( f8_arg0._streakInfos ) do
		if f8_arg1[f8_local7] ~= nil then
			local f8_local3 = f8_arg1[f8_local7]
			f8_local8:SetupStreak( f8_local3.ref, f8_arg2 )
			if f8_local3.isActive then
				f8_arg0._streakInfos[f8_local7]._unselectedAnim = "EquippedUnselected"
			else
				f8_arg0._streakInfos[f8_local7]._unselectedAnim = "Unequipped"
			end
			ACTIONS.AnimateSequence( f8_arg0._streakInfos[f8_local7], f8_arg0._streakInfos[f8_local7]._unselectedAnim )
			local f8_local4 = ACTIONS.AnimateSequence
			local f8_local5 = f8_arg0._streakInfos[f8_local7]
			local f8_local6
			if f8_local3.isRestricted then
				f8_local6 = "RestrictionOn"
			else
				f8_local6 = "RestrictionOff"
			end
			f8_local4( f8_local5, f8_local6 )
		end
	end
end

local f0_local3 = function ( f7_arg0, f7_arg1, f7_arg2 )
	local f7_local0 = LUI.DataSourceFromPlayerData.new( CoD.StatsGroup.Coop, CoD.PlayMode.Aliens )
	f7_local0 = f7_local0.coopCareerStats.currency:GetValue( f7_arg2 )
	local f7_local1, f7_local2, f7_local3 = nil
	for f7_local8, f7_local9 in ipairs( f7_arg0._streakInfos ) do
		if f7_arg1[f7_local8] ~= nil then
			if f7_local8 == 1 then
				f7_local1 = tonumber( f7_arg1[f7_local8].scoreCost )
				f7_local9:SetupStreak( "empty1" )
				local f7_local7 = PLAYER_DATA.IO( f7_arg2, LOADOUT.GetLoadoutStatsGroup() )
				f7_local7.squadMembers.munitionSetups[0].munition:set( "empty1" )
			end
			if f7_local8 == 2 then
				f7_local2 = tonumber( f7_arg1[f7_local8].scoreCost )
				f7_local9:SetupStreak( "empty2" )
				local f7_local7 = PLAYER_DATA.IO( f7_arg2, LOADOUT.GetLoadoutStatsGroup() )
				f7_local7.squadMembers.munitionSetups[1].munition:set( "empty2" )
			end
			if f7_local8 == 3 then
				f7_local3 = tonumber( f7_arg1[f7_local8].scoreCost )
				f7_local9:SetupStreak( "empty3" )
				local f7_local7 = PLAYER_DATA.IO( f7_arg2, LOADOUT.GetLoadoutStatsGroup() )
				f7_local7.squadMembers.munitionSetups[2].munition:set( "empty3" )
			end
		end
	end
	f7_local4 = PLAYER_DATA.IO( f7_arg2, CoD.StatsGroup.Coop )
	f7_local4.coopCareerStats.currency:set( f7_local0 + f7_local1 + f7_local2 + f7_local3 )
end

local f0_local4 = function ( f6_arg0, f6_arg1, f6_arg2 )
	for f6_local0 = 1, #f6_arg0._streakInfos, 1 do
		if f6_arg2 then
			if f6_arg0._streakInfos[f6_local0]._streakRef == f6_arg1 then
				ACTIONS.AnimateSequence( f6_arg0._streakInfos[f6_local0], "EquippedSelected" )
				f6_arg0._streakInfos[f6_local0]._highlighted = true
			else
				ACTIONS.AnimateSequence( f6_arg0._streakInfos[f6_local0], f6_arg0._streakInfos[f6_local0]._unselectedAnim )
				f6_arg0._streakInfos[f6_local0]._highlighted = false
			end
		end
		ACTIONS.AnimateSequence( f6_arg0._streakInfos[f6_local0], f6_arg0._streakInfos[f6_local0]._unselectedAnim )
		f6_arg0._streakInfos[f6_local0]._highlighted = false
	end
end

local f0_local5 = function ( f5_arg0, f5_arg1, f5_arg2 )
	for f5_local0 = 1, #f5_arg0._streakInfos, 1 do
		if not f5_arg0._streakInfos[f5_local0]._highlighted and f5_arg0._streakInfos[f5_local0]._streakRef == f5_arg1 then
			local f5_local3 = ACTIONS.AnimateSequence
			local f5_local4 = f5_arg0._streakInfos[f5_local0]
			local f5_local5
			if f5_arg2 then
				f5_local5 = "Pulse"
			else
				f5_local5 = "StopPulse"
			end
			f5_local3( f5_local4, f5_local5 )
			f5_local3 = ACTIONS.AnimateSequence
			f5_local4 = f5_arg0._streakInfos[f5_local0]
			if f5_arg2 then
				f5_local5 = "EquippedSelected"
			else
				f5_local5 = f5_arg0._streakInfos[f5_local0]._unselectedAnim
			end
			f5_local3( f5_local4, f5_local5 )
			return 
		end
	end
end

local f0_local6 = function ( f4_arg0 )
	f4_arg0.EquippedStreak1._unselectedAnim = "Unequipped"
	f4_arg0.EquippedStreak2._unselectedAnim = "Unequipped"
	f4_arg0.EquippedStreak3._unselectedAnim = "Unequipped"
	ACTIONS.AnimateSequence( f4_arg0, "Unequipped" )
	f4_arg0:UpdateHighlightedState( f4_arg0, nil, false )
end

local f0_local7 = function ( f3_arg0, f3_arg1, f3_arg2 )
	assert( f3_arg0.EquippedStreak1 )
	assert( f3_arg0.EquippedStreak2 )
	assert( f3_arg0.EquippedStreak3 )
	f3_arg0.Update = f0_local0
	f3_arg0.ShowKills = f0_local0
	f3_arg0.ClearMunitions = f0_local0
	f3_arg0.UpdateHighlightedState = f0_local0
	f3_arg0.DeselectAll = f0_local0
	f3_arg0.UpdateSwapPulse = f0_local0
	f3_arg0._streakInfos = {
		f3_arg0.EquippedStreak1,
		f3_arg0.EquippedStreak2,
		f3_arg0.EquippedStreak3
	}
	f3_arg0.EquippedStreak1._unselectedAnim = "EquippedUnselected"
	f3_arg0.EquippedStreak2._unselectedAnim = "EquippedUnselected"
	f3_arg0.EquippedStreak3._unselectedAnim = "EquippedUnselected"
	if IsLanguageArabic() then
		ACTIONS.AnimateSequence( f3_arg0, "AR" )
	end
	local f3_local0 = LAYOUT.GetTextWidth( f3_arg0.EquippedBannerText, f3_arg1 )
	local f3_local1 = f3_arg0.EquippedBannerText:GetAnchorsAndPosition()
	f3_arg0.EquippedBanner:SetRight( f3_local0 + f3_local1.left + f0_local0 )
end

local f0_local8 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PostLoadShared = f0_local0
end

function EquippedStreaksBase( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 682 * _1080p, 0, 128 * _1080p )
	self.id = "EquippedStreaksBase"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f0_local0( self, LUI.ValidateControllerIndex( self, f1_local1 ), controller )
	return self
end

MenuBuilder.registerType( "EquippedStreaksBase", EquippedStreaksBase )
LockTable( _M )
