-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
module( ..., package.seeall )
require( "ui.widgets.PopupFrame" )
require( "ui.widgets.ButtonHelperBar" )
require( "ui.widgets.GenericButton" )
local f0_local0 = function ( f15_arg0, f15_arg1 )
	local f15_local0 = {}
	if f15_arg1 then
		f15_local0.messageText = Engine[0xED84C33EC5F01EA]( "MENU/IMPORT_SETTINGS_SUCCESS" )
	else
		f15_local0.messageText = Engine[0xED84C33EC5F01EA]( "MENU/IMPORT_SETTINGS_FAILURE" )
	end
	f15_local0.buttonsClosePopup = true
	f15_local0.buttons = {
		{
			label = Engine[0xED84C33EC5F01EA]( "MENU/OK" ),
			action = function ( f16_arg0 )
				
			end
		}
	}
	LUI.FlowManager.RequestPopupMenu( unused, "MessagePopup", true, f15_arg0, false, f15_local0, nil, true, true )
end

local f0_local1 = function ()
	local f14_local0 = {}
	local f14_local1 = {}
	local f14_local2 = {}
	local f14_local3 = Engine[0xAB915E631B7B688]
	if f14_local3 then
		f14_local3 = Engine[0xAB915E631B7B688]()
	end
	local f14_local4 = Engine[0x6C7E20A9548F55E]
	if f14_local4 then
		f14_local4 = Engine[0x6C7E20A9548F55E]()
	end
	if f14_local3 and f14_local4 then
		f14_local2 = {
			Engine[0x4247AC314D3A9BB],
			Engine[0x165A94B20906F5D]
		}
	elseif f14_local3 then
		f14_local2 = {
			Engine[0x4247AC314D3A9BB]
		}
	elseif f14_local4 then
		f14_local2 = {
			Engine[0x165A94B20906F5D]
		}
	end
	if f14_local2 and 0 < #f14_local2 then
		table.insert( f14_local0, ToUpperCase( Engine[0xED84C33EC5F01EA]( "LUA_MENU/TEXTCHAT_GAMENAME_BO5" ) ) )
		table.insert( f14_local1, {
			imageAnimation = "ColdWar",
			importFunctions = f14_local2
		} )
		f14_local2 = {}
	end
	local f14_local5 = Engine[0x5AAB2A565E7930C]
	if f14_local5 then
		f14_local5 = Engine[0x5AAB2A565E7930C]()
	end
	local f14_local6 = Engine[0x5F53892A903AFFE]
	if f14_local6 then
		f14_local6 = Engine[0x5F53892A903AFFE]()
	end
	if f14_local5 and f14_local6 then
		f14_local2 = {
			Engine[0x7B5A002FA735EB],
			Engine[0x3B1E50FB8DBB79]
		}
	elseif f14_local5 then
		f14_local2 = {
			Engine[0x7B5A002FA735EB]
		}
	elseif f14_local6 then
		f14_local2 = {
			Engine[0x3B1E50FB8DBB79]
		}
	end
	if f14_local2 and 0 < #f14_local2 then
		if CONDITIONS.IsLaze() then
			table.insert( f14_local0, ToUpperCase( Engine[0xED84C33EC5F01EA]( "LUA_MENU/MODERN_WARFARE_CAPS" ) ) )
			table.insert( f14_local1, {
				imageAnimation = "ModernWarfare",
				importFunctions = f14_local2
			} )
		else
			table.insert( f14_local0, ToUpperCase( Engine[0xED84C33EC5F01EA]( "LUA_MENU/WARZONE_CAPS" ) ) )
			table.insert( f14_local1, {
				imageAnimation = "Warzone",
				importFunctions = f14_local2
			} )
		end
		f14_local2 = {}
	end
	if #f14_local0 == #f14_local1 then
		return f14_local0, f14_local1
	else
		
	end
end

local f0_local2 = function ( f7_arg0, f7_arg1, f7_arg2 )
	ACTIONS.ScaleFullscreen( f7_arg0 )
	assert( f7_arg0.PopupFrame )
	f7_arg0.PopupFrame.Stripe.HeaderText:setText( Engine[0xED84C33EC5F01EA]( "MENU/IMPORT_SETTINGS" ) )
	if IsLanguageArabic() then
		ACTIONS.AnimateSequence( f7_arg0, "AR" )
		f7_arg0.ButtonImport.Text:SetRight( _1080p * -21, 0 )
		f7_arg0.ButtonCancel.Text:SetRight( _1080p * -21, 0 )
	end
	local f7_local0, f7_local1 = f0_local0()
	if f7_local0 and #f7_local0 == 1 then
		f7_arg0.MessageText:setText( Engine[0xED84C33EC5F01EA]( "MENU/IMPORT_DESCRIPTION_SINGLE_GAMES", f7_local0[1] ) )
		f7_arg0.LabelImportFrom:SetAlpha( 0 )
		f7_arg0.selectedGame = 1
		if f7_local1 and f7_local1[f7_arg0.selectedGame] and f7_local1[f7_arg0.selectedGame].imageAnimation then
			ACTIONS.AnimateSequence( f7_arg0, f7_local1[f7_arg0.selectedGame].imageAnimation )
		end
	elseif f7_local0 and 1 < #f7_local0 then
		f7_arg0.MessageText:setText( Engine[0xED84C33EC5F01EA]( "MENU/IMPORT_DESCRIPTION_MULTIPLE_GAMES" ) )
		f7_arg0.LabelImportFrom:SetAlpha( 1 )
		local f7_local2 = {
			optionsList = f7_local0,
			name = Engine[0xED84C33EC5F01EA]( "MENU/IMPORT_FROM" ),
			parent = f7_arg0,
			valueGetter = function ( f13_arg0 )
				f7_arg0.selectedGame = 1
				if f7_arg0 and f7_arg0[f7_arg0.selectedGame] and f7_arg0[f7_arg0.selectedGame].imageAnimation then
					ACTIONS.AnimateSequence( f7_arg0, f7_arg0[f7_arg0.selectedGame].imageAnimation )
				end
				return f7_arg0.selectedGame
			end,
			valueSetter = function ( f12_arg0, f12_arg1, f12_arg2 )
				f7_arg0.selectedGame = f12_arg2
			end,
			onRefresh = function ( f11_arg0, f11_arg1, f11_arg2 )
				if f7_arg0 and f7_arg0[f11_arg2] and f7_arg0[f11_arg2].imageAnimation then
					ACTIONS.AnimateSequence( f7_arg0, f7_arg0[f11_arg2].imageAnimation )
				end
			end
		}
		local f7_local3, f7_local4, f7_local5, f7_local6 = f7_arg0.DropdownDummy:getLocalRect()
		local f7_local7, f7_local8, f7_local9, f7_local10 = f7_arg0.DropdownDummy:GetAnchorData()
		local f7_local11 = (f7_local6 - f7_local4) * 2
		local f7_local12 = OPTIONS.BuildGenericDropdown( f7_arg1, f7_local2 )
		f7_local12:SetAnchorsAndPosition( f7_local7, f7_local9, f7_local8, f7_local10, f7_local3, f7_local5, f7_local4, f7_local6 )
		f7_arg0.DropdownWidget = f7_local12
		f7_arg0.DropdownWidget:addElementBefore( f7_arg0.ButtonImport )
		f7_arg0.DropdownWidget.GenericOptionButtonBase.Title:SetFontSize( 24 * _PT )
	else
		f0_local0( f7_arg1, false )
		LUI.FlowManager.RequestLeaveMenu( f7_arg0, false )
	end
	f7_arg0.ButtonImport:addEventHandler( "button_action", function ()
		if f7_arg0 and f7_arg0[f7_arg0.selectedGame] and f7_arg0[f7_arg0.selectedGame].importFunctions then
			local f10_local0 = true
			for f10_local4, f10_local5 in ipairs( f7_arg0[f7_arg0.selectedGame].importFunctions ) do
				if f10_local0 then
					f10_local0 = f10_local5()
				end
			end
			if f10_local0 then
				if f7_arg0.fromBootOptions then
					f10_local1 = LUI.FlowManager.GetPerControllerPersistentData( f7_arg0 )
					f10_local1.quickSetupSettingsImportedGame = f7_arg0[f7_arg0.selectedGame]
				else
					METRICS.RecordImportSettingsUsage( f7_arg0, f7_arg0[f7_arg0.selectedGame] )
				end
			end
			f7_arg0( f7_arg0, f10_local0 )
			LUI.FlowManager.RequestLeaveMenu( f7_arg0, true )
		end
	end )
	f7_arg0.ButtonCancel:addEventHandler( "button_action", function ()
		LUI.FlowManager.RequestLeaveMenu( f7_arg0, true )
	end )
	f7_arg0.bindButton = LUI.UIBindButton.new()
	f7_arg0.bindButton.id = "selfBindButton"
	f7_arg0:addElement( f7_arg0.bindButton )
	f7_arg0.ButtonHelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_secondary",
		helper_text = Engine[0xED84C33EC5F01EA]( "MENU/BACK" )
	} )
	f7_arg0.bindButton:addEventHandler( "button_secondary", function ( f8_arg0, f8_arg1 )
		LUI.FlowManager.RequestLeaveMenu( f8_arg0, true )
		return true
	end )
end

function ImportSettingsPopup( menu, controller )
	local self = LUI.UIVerticalNavigator.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "ImportSettingsPopup"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	self._sequenceLengths = self._sequenceLengths or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local PopupFrame = nil
	
	PopupFrame = MenuBuilder.BuildRegisteredType( "PopupFrame", {
		controllerIndex = f1_local1
	} )
	PopupFrame.id = "PopupFrame"
	ACTIONS.ScaleFullscreen( PopupFrame )
	PopupFrame.Stripe:SetTop( _1080p * -230, 0 )
	PopupFrame.Stripe:SetBottom( _1080p * 230, 0 )
	PopupFrame.Stripe.HeaderText:SetLeft( _1080p * -393, 0 )
	PopupFrame.Stripe.HeaderText:SetRight( _1080p * 750, 0 )
	PopupFrame.Stripe.HeaderText:SetAlignment( LUI.Alignment.Left )
	PopupFrame:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
	self:addElement( PopupFrame )
	self.PopupFrame = PopupFrame
	
	local ButtonHelperBar = nil
	
	ButtonHelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	ButtonHelperBar.id = "ButtonHelperBar"
	ButtonHelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -60, 0 )
	self:addElement( ButtonHelperBar )
	self.ButtonHelperBar = ButtonHelperBar
	
	local DropdownDummy = nil
	
	DropdownDummy = LUI.UIElement.new()
	DropdownDummy.id = "DropdownDummy"
	DropdownDummy:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -387, _1080p * 376, _1080p * 7, _1080p * 63 )
	self:addElement( DropdownDummy )
	self.DropdownDummy = DropdownDummy
	
	local ButtonImport = nil
	
	ButtonImport = MenuBuilder.BuildRegisteredType( "GenericButton", {
		controllerIndex = f1_local1
	} )
	ButtonImport.id = "ButtonImport"
	ACTIONS.ScaleStretchAnchorFullscreen( ButtonImport )
	ButtonImport.Text:SetLeft( _1080p * 21, 0 )
	ButtonImport.Text:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( "MENU/START_IMPORTATION" ) ), 0 )
	ButtonImport.Text:SetAlignment( LUI.Alignment.Left )
	ButtonImport:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -387, _1080p * 13, _1080p * 73, _1080p * 129 )
	self:addElement( ButtonImport )
	self.ButtonImport = ButtonImport
	
	local ButtonCancel = nil
	
	ButtonCancel = MenuBuilder.BuildRegisteredType( "GenericButton", {
		controllerIndex = f1_local1
	} )
	ButtonCancel.id = "ButtonCancel"
	ButtonCancel.Text:SetLeft( _1080p * 21, 0 )
	ButtonCancel.Text:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( "MENU/CANCEL" ) ), 0 )
	ButtonCancel.Text:SetAlignment( LUI.Alignment.Left )
	ButtonCancel:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -387, _1080p * 13, _1080p * 139, _1080p * 195 )
	self:addElement( ButtonCancel )
	self.ButtonCancel = ButtonCancel
	
	local LabelImportFrom = nil
	
	LabelImportFrom = LUI.UIText.new()
	LabelImportFrom.id = "LabelImportFrom"
	LabelImportFrom:SetVisibility( LUI.Visibility.Hidden )
	LabelImportFrom:setText( Engine[0xED84C33EC5F01EA]( "MENU/IMPORT_FROM" ), 0 )
	LabelImportFrom:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	LabelImportFrom:SetFontSize( 24 * _PT )
	LabelImportFrom:SetMinFontSize( 16 * _PT )
	LabelImportFrom:SetWordWrap( false )
	LabelImportFrom:SetAlignment( LUI.Alignment.Right )
	LabelImportFrom:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -387, _1080p * -260, _1080p * 26, _1080p * 58 )
	self:addElement( LabelImportFrom )
	self.LabelImportFrom = LabelImportFrom
	
	local MessageText = nil
	
	MessageText = LUI.UIPagedText.new()
	MessageText.id = "MessageText"
	MessageText:SetRGBFromTable( SWATCHES.text.vTextOffWhite, 0 )
	MessageText:SetAlpha( 0.75, 0 )
	MessageText:setText( "", 0 )
	MessageText:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_MBodyText.font.File ) )
	MessageText:SetFontSize( FONT_STYLES.fontStyle_MBodyText.size )
	MessageText:SetMinFontSize( FONT_STYLES.fontStyle_MBodyText.minSize )
	MessageText:SetWordWrap( true )
	MessageText:SetTracking( FONT_STYLES.fontStyle_MBodyText.tracking * _1080p, 0 )
	MessageText:SetLeading( FONT_STYLES.fontStyle_MBodyText.leading * _1080p, 0 )
	MessageText:SetAlignment( LUI.Alignment.Left )
	MessageText:SetTextPageHeight( 112 * _1080p )
	MessageText:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -387, _1080p * 376, _1080p * -112, 0 )
	self:addElement( MessageText )
	self.MessageText = MessageText
	
	local GameLogo = nil
	
	GameLogo = LUI.UIImage.new()
	GameLogo.id = "GameLogo"
	GameLogo:setImage( RegisterMaterial( "v_ui_icon_game_cod_black_ops_cold_war_full" ), 0 )
	GameLogo:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -830, _1080p * -470, _1080p * -136, _1080p * 24 )
	self:addElement( GameLogo )
	self.GameLogo = GameLogo
	
	local ImportIcon = nil
	
	ImportIcon = LUI.UIImage.new()
	ImportIcon.id = "ImportIcon"
	ImportIcon:SetRGBFromTable( SWATCHES.highlight.vDefaultHighlight, 0 )
	ImportIcon:setImage( RegisterMaterial( "v_ui_ic_title_import" ), 0 )
	ImportIcon:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -714, _1080p * -586, _1080p * 30, _1080p * 158 )
	self:addElement( ImportIcon )
	self.ImportIcon = ImportIcon
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	self._sequenceLengths.DefaultSequence = 0
	local f1_local12 = nil
	GameLogo:RegisterAnimationSequence( "ColdWar", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Material,
			value = RegisterMaterial( "v_ui_icon_game_cod_black_ops_cold_war_full" )
		}
	} )
	self._sequences.ColdWar = function ()
		menu:AnimateSequence( "ColdWar" )
	end
	
	self._sequenceLengths.ColdWar = 0
	local f1_local13 = nil
	GameLogo:RegisterAnimationSequence( "Warzone", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Material,
			value = RegisterMaterial( "v_ui_icon_game_cod_warzone_full" )
		}
	} )
	self._sequences.Warzone = function ()
		menu:AnimateSequence( "Warzone" )
	end
	
	self._sequenceLengths.Warzone = 0
	local f1_local14 = nil
	DropdownDummy:RegisterAnimationSequence( "AR", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -369
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 4
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 394
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 60
		}
	} )
	ButtonImport:RegisterAnimationSequence( "AR", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -6
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 68
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 394
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 124
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 16,
			child = self.ButtonImport.Text
		}
	} )
	ButtonCancel:RegisterAnimationSequence( "AR", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -6
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 134
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 394
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 190
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 16,
			child = self.ButtonCancel.Text
		}
	} )
	MessageText:RegisterAnimationSequence( "AR", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 394
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -700
		}
	} )
	GameLogo:RegisterAnimationSequence( "AR", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 470
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 830
		}
	} )
	ImportIcon:RegisterAnimationSequence( "AR", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 586
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 714
		}
	} )
	self._sequences.AR = function ()
		menu:AnimateSequence( "AR" )
		menu:AnimateSequence( "AR" )
		menu:AnimateSequence( "AR" )
		menu:AnimateSequence( "AR" )
		menu:AnimateSequence( "AR" )
		menu:AnimateSequence( "AR" )
	end
	
	self._sequenceLengths.AR = 0
	local f1_local15 = nil
	GameLogo:RegisterAnimationSequence( "ModernWarfare", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Material,
			value = RegisterMaterial( "v_ui_icon_game_cod_modern_warfare_title" )
		}
	} )
	self._sequences.ModernWarfare = function ()
		menu:AnimateSequence( "ModernWarfare" )
	end
	
	self._sequenceLengths.ModernWarfare = 0
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "ImportSettingsPopup", ImportSettingsPopup )
LockTable( _M )
