-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
RejoinUtils = RejoinUtils or {}
RejoinUtils.Achievements = {
	name = "iw9_rejoin",
	csv = CSV.rejoinAchievements
}
RejoinUtils.REJOIN_POPUP_TYPE = {
	GENERIC = 2,
	RANKED = 1
}
RejoinUtils.RejoinProcessFunctions = {
	[RejoinUtils.REJOIN_POPUP_TYPE.RANKED] = {
		lobbyActiveFunc = function ( f51_arg0, f51_arg1, f51_arg2 )
			RejoinUtils.ProcessRankedPlayRejoinForActiveLobby( f51_arg0, f51_arg1, f51_arg2 )
		end,
		lobbyInactiveFunc = function ( f50_arg0, f50_arg1 )
			RejoinUtils.ProcessRankedPlayRejoinForInactiveLobby( f50_arg0, f50_arg1 )
		end
	},
	[RejoinUtils.REJOIN_POPUP_TYPE.GENERIC] = {
		lobbyActiveFunc = function ( f49_arg0, f49_arg1, f49_arg2 )
			RejoinUtils.ProcessGenericRejoin( f49_arg0, f49_arg1, f49_arg2 )
		end
	}
}
RejoinUtils.SEPARATORS = {
	COMMA = ","
}
local f0_local0 = function ( f48_arg0, f48_arg1 )
	local f48_local0 = ""
	for f48_local4, f48_local5 in ipairs( f48_arg0 ) do
		f48_local0 = f48_local0 .. tostring( f48_local5 ) .. RejoinUtils.SEPARATORS.COMMA
	end
	DataSources.inGame.HUD.rejoin.disconnectedMayRejoinXuids:SetValue( f48_arg1, f48_local0 )
end

local f0_local1 = function ( f47_arg0 )
	return String.Split( DataSources.inGame.HUD.rejoin.disconnectedMayRejoinXuids:GetValue( f47_arg0 ) or "", RejoinUtils.SEPARATORS.COMMA )
end

RejoinUtils.IsXuidInDisconnectedMayRejoinArray = function ( f46_arg0, f46_arg1 )
	return Table.IsItemIndexInArray( f0_local0( f46_arg1 ), f46_arg0 )
end

RejoinUtils.AddXuidToDisconnectedArray = function ( f45_arg0, f45_arg1 )
	local f45_local0 = f0_local0( f45_arg1 )
	if not Table.FindItemIndexInArray( f45_local0, f45_arg0 ) then
		table.insert( f45_local0, f45_arg0 )
	end
	f0_local0( f45_local0, f45_arg1 )
end

RejoinUtils.RemoveXuidFromDisconnectArray = function ( f44_arg0, f44_arg1 )
	local f44_local0 = f0_local0( f44_arg1 )
	local f44_local1 = Table.FindItemIndexInArray( f44_local0, f44_arg0 )
	if f44_local1 then
		table.remove( f44_local0, f44_local1 )
	end
	f0_local0( f44_local0, f44_arg1 )
end

RejoinUtils.SubscribeToDisconnectedMayRejoin = function ( f42_arg0, f42_arg1, f42_arg2, f42_arg3 )
	if f42_arg0._disconnectedRejoinSubscription then
		f42_arg0:UnsubscribeFromModel( f42_arg0._disconnectedRejoinSubscription )
		f42_arg0._disconnectedRejoinSubscription = nil
		if f42_arg3 then
			f42_arg3()
		end
	end
	f42_arg0._disconnectedRejoinSubscription = f42_arg0:SubscribeToModel( DataSources.inGame.HUD.rejoin.disconnectedMayRejoinXuids:GetModel( f42_arg1 ), function ()
		f42_arg0( f42_arg0, f42_arg0 )
	end, true )
end

RejoinUtils.PopupFunctions = {}
RejoinUtils.PopupFunctions.ConfirmQuitAcceptFunction = function ( f41_arg0 )
	RejoinUtils.SendRejoinSeenEvent( f41_arg0 )
end

RejoinUtils.PopupFunctions.OpenRejoinMatchPopup = function ( f37_arg0, f37_arg1 )
	local f37_local0 = nil
	if f37_arg1 == RejoinUtils.REJOIN_POPUP_TYPE.RANKED then
		f37_local0 = LeaguePlayUtils.GetPenaltyData( f37_arg0 )
	end
	local f37_local1 = RejoinUtils.GetRejoinAchievementProgression( f37_arg0, "expiry_t", RejoinUtils.Achievements.name, RejoinUtils.Achievements.csv ) or 0
	if f37_local1 <= 0 then
		DebugPrint( "[UI][RejoinUtils.lua] -> RejoinUtils.PopupFunctions.OpenRejoinMatchPopup: Player just rejected Rejoin. This popup should not show..." )
	end
	LUI.FlowManager.RequestPopupMenu( nil, "LobbyRejoinPopup", true, f37_arg0, false, {
		_isRejoinState = true,
		_rejoinType = f37_arg1,
		_penaltyData = f37_local0,
		_rejoinExpiry = f37_local1,
		_button1Action = function ()
			RejoinUtils.PopupFunctions.OpenRejoinAttemptPopup( f37_arg0, f37_arg0 )
		end,
		_button2Action = function ()
			RejoinUtils.PopupFunctions.OpenConfirmQuitPopup( f37_arg0, f37_arg0 )
		end,
		_timerEndAction = function ()
			RejoinUtils.PopupFunctions.OpenRejoinTimerExpiredPopup( f37_arg0, f37_arg0 )
		end
	} )
end

RejoinUtils.PopupFunctions.OpenRejoinAttemptPopup = function ( f35_arg0, f35_arg1 )
	LUI.FlowManager.RequestPopupMenu( nil, "LobbyRejoinConfirmPopup", true, f35_arg0, false, {
		_isRejoinAttempt = true,
		_button2Action = function ()
			RejoinUtils.PopupFunctions.OpenRejoinMatchPopup( f35_arg0, f35_arg0 )
		end
	} )
	Lobby[0x6AF379898C13E99]( f35_arg0 )
end

local f0_local2 = function ( f34_arg0 )
	LUI.ToastManager.CreateToast( f34_arg0, LUI.ToastManager.StandardEmphasisToast( Engine[0xED84C33EC5F01EA]( 0xF235F4BC6410A83 ), Engine[0xED84C33EC5F01EA]( 0x8846DB22F4BC615 ), LUI.ToastManager.ToastNotificationType.Warnings, FRIENDS.CrossTitleGameIDs.TITLE_NONE, false, LUI.ToastManager.ToastVisualEffect.Standard ), nil, nil, {
		displayTime = LeaguePlayUtils.RejoinReject.ToastDisplayTime
	} )
end

local f0_local3 = function ( f33_arg0 )
	DebugPrint( "[UI][RejoinUtils.lua] -> AutoRejectRejoinForPlaylistMismatch: Mismatched Playlist. Auto Rejecting Rejoin" )
	RejoinUtils.SendRejoinSeenEvent( f33_arg0 )
	LUI.ToastManager.CreateToast( f33_arg0, LUI.ToastManager.StandardEmphasisToast( Engine[0xED84C33EC5F01EA]( 0xF56CBDA50483430 ), Engine[0xED84C33EC5F01EA]( 0x300C4C434CDEE98 ), LUI.ToastManager.ToastNotificationType.Warnings, FRIENDS.CrossTitleGameIDs.TITLE_NONE, false, LUI.ToastManager.ToastVisualEffect.Standard ), nil, nil, {
		displayTime = LeaguePlayUtils.RejoinReject.ToastDisplayTime
	} )
end

local f0_local4 = function ( f32_arg0 )
	LUI.ToastManager.CreateToast( f32_arg0, LUI.ToastManager.StandardEmphasisToast( Engine[0xED84C33EC5F01EA]( 0x1DA655C5093FBA5 ), Engine[0xED84C33EC5F01EA]( 0x34BA70C16E4C361 ), LUI.ToastManager.ToastNotificationType.Warnings, FRIENDS.CrossTitleGameIDs.TITLE_NONE, false, LUI.ToastManager.ToastVisualEffect.Standard ), nil, nil, {
		displayTime = LeaguePlayUtils.RejoinCheck.ToastDisplayTime
	} )
end

RejoinUtils.PopupFunctions.OpenRejoinRejectedWaitPopup = function ( f29_arg0 )
	LUI.FlowManager.RequestPopupMenu( nil, "LobbyRejoinPopup", true, f29_arg0, false, {
		_isRejoinReject = true,
		_waitTime = LeaguePlayUtils.RejoinReject.WaitTime,
		_interval = LeaguePlayUtils.RejoinReject.IntervalTime,
		_intervalAction = function ( f31_arg0, f31_arg1 )
			local f31_local0 = RejoinUtils.GetLastLobbyDisconnectedReasonAchievement( f29_arg0 )
			if RejoinUtils.TempRejoinStateReason then
				if not RejoinUtils.TempRejoinStateReason.CanCheckForValidRejoinRejectState and f31_local0 == LeaguePlayUtils.RejoinStateReason.CLIENT_REJECTED_REJOIN then
					RejoinUtils.TempRejoinStateReason = {
						CanCheckForValidRejoinRejectState = true,
						StateId = f31_local0
					}
				elseif RejoinUtils.TempRejoinStateReason.CanCheckForValidRejoinRejectState and f31_local0 == LeaguePlayUtils.DisconnectReason.NONE then
					f29_arg0( f29_arg0 )
					ACTIONS.NonImmediateLeaveMenu( f31_arg0 )
				end
			end
		end,
		_timerEndAction = function ()
			f29_arg0( f29_arg0 )
		end
	} )
end

RejoinUtils.PopupFunctions.OpenRejoinCheckWaitPopup = function ( f26_arg0 )
	RejoinUtils.TempRejoinCheckState = nil
	LUI.FlowManager.RequestPopupMenu( nil, "LobbyRejoinPopup", true, f26_arg0, false, {
		_isRejoinCheckWait = true,
		_waitTime = LeaguePlayUtils.RejoinCheck.WaitTime,
		_interval = LeaguePlayUtils.RejoinCheck.IntervalTime,
		_intervalAction = function ( f28_arg0, f28_arg1 )
			local f28_local0 = RejoinUtils.GetLastLobbyDisconnectedReasonAchievement( f26_arg0 )
			if f28_local0 == LeaguePlayUtils.DisconnectReason.NONE then
				if not RejoinUtils.TempRejoinCheckState and f28_arg1 <= LeaguePlayUtils.RejoinCheck.RejectTriggerTime then
					RejoinUtils.TempRejoinCheckState = {
						RejoinRejectInitiated = true,
						StateId = f28_local0
					}
					RejoinUtils.SendRejoinSeenEvent( f26_arg0 )
				elseif RejoinUtils.TempRejoinCheckState then
					f26_arg0( f26_arg0 )
					ACTIONS.NonImmediateLeaveMenu( f28_arg0 )
				end
			elseif LUI.RejoinManager.IsDataFetchCompleted() and RejoinUtils.IsLobbyDisconnectReasonRejoinable( f28_local0 ) then
				ACTIONS.NonImmediateLeaveMenu( f28_arg0 )
				RejoinUtils.FetchAndUpdateRejoinState( f26_arg0 )
				return 
			end
		end,
		_timerEndAction = function ()
			f26_arg0( f26_arg0 )
		end
	} )
end

RejoinUtils.PopupFunctions.OpenConfirmQuitPopup = function ( f23_arg0, f23_arg1 )
	local f23_local0 = nil
	if f23_arg1 == RejoinUtils.REJOIN_POPUP_TYPE.RANKED then
		f23_local0 = LeaguePlayUtils.GetPenaltyData( f23_arg0 )
	end
	LUI.FlowManager.RequestPopupMenu( nil, "LobbyRejoinConfirmPopup", true, f23_arg0, false, {
		_isConfirmQuitMatch = true,
		_penaltyData = f23_local0,
		_confirmQuitType = f23_arg1,
		_button1Action = function ()
			RejoinUtils.PopupFunctions.ConfirmQuitAcceptFunction( f23_arg0 )
			RejoinUtils.TempRejoinStateReason = {
				StateId = 0,
				CanCheckForValidRejoinRejectState = false
			}
			RejoinUtils.PopupFunctions.OpenRejoinRejectedWaitPopup( f23_arg0 )
		end,
		_button2Action = function ()
			RejoinUtils.PopupFunctions.OpenRejoinMatchPopup( f23_arg0, f23_arg0 )
		end
	} )
end

RejoinUtils.PopupFunctions.OpenMatchEndedNoPenaltyPopup = function ( f21_arg0 )
	LUI.FlowManager.RequestPopupMenu( nil, "LobbyRejoinPopup", true, f21_arg0, false, {
		_isMatchEndedNoPenalty = true,
		_button1Action = function ()
			RejoinUtils.SendRejoinSeenEvent( f21_arg0 )
		end
	} )
end

RejoinUtils.PopupFunctions.OpenDisconnectedPopup = function ( f19_arg0, f19_arg1 )
	local f19_local0 = LeaguePlayUtils.GetPenaltyData( f19_arg0 )
	f19_local0.disconnectReason = f19_arg1
	LUI.FlowManager.RequestPopupMenu( nil, "LobbyRejoinPopup", true, f19_arg0, false, {
		_isDisconnected = true,
		_penaltyData = f19_local0,
		_button1Action = function ()
			RejoinUtils.SendRejoinSeenEvent( f19_arg0 )
		end
	} )
end

RejoinUtils.PopupFunctions.OpenSuspensionRecievedPopup = function ( f17_arg0, f17_arg1 )
	local f17_local0 = LeaguePlayUtils.GetPenaltyData( f17_arg0 )
	f17_local0.disconnectReason = f17_arg1
	LUI.FlowManager.RequestPopupMenu( nil, "LobbyRejoinPopup", true, f17_arg0, false, {
		_isSuspensionReceived = true,
		_penaltyData = f17_local0,
		_button1Action = function ()
			RejoinUtils.SendRejoinSeenEvent( f17_arg0 )
		end
	} )
end

RejoinUtils.PopupFunctions.OpenRejoinTimerExpiredPopup = function ( f15_arg0, f15_arg1 )
	LUI.FlowManager.RequestPopupMenu( nil, "LobbyRejoinPopup", true, f15_arg0, false, {
		_isRejoinTimerExpired = true,
		_button1Action = function ()
			if f15_arg0 == RejoinUtils.REJOIN_POPUP_TYPE.RANKED then
				RejoinUtils.PopupFunctions.OpenSuspensionRecievedPopup( f15_arg0 )
			end
		end
	} )
end

RejoinUtils.PopupFunctions.OpenTooManyDisconnectPenaltyPopup = function ( f13_arg0 )
	LUI.FlowManager.RequestPopupMenu( nil, "LobbyRejoinPopup", true, f13_arg0, false, {
		_isTooManyDisconnectPenalty = true,
		_penaltyData = LeaguePlayUtils.GetPenaltyData( f13_arg0 ),
		_button1Action = function ()
			RejoinUtils.SendRejoinSeenEvent( f13_arg0 )
		end
	} )
end

RejoinUtils.CheckAndOpenRejoinWaitPopup = function ( f12_arg0 )
	local f12_local0 = CONDITIONS.IsRejoinEnabled()
	local f12_local1 = OnlineRejoin[0x12C317C0631D9E2]( f12_arg0 )
	DebugPrint( "[UI][RejoinUtils.lua] -> RejoinUtils.CheckAndOpenRejoinWaitPopup: Is Rejoin Enabled: " .. tostring( f12_local0 ) .. ", Is Lobby Ids Equal: " .. tostring( f12_local1 ) )
	if f12_local0 and f12_local1 then
		RejoinUtils.PopupFunctions.OpenRejoinCheckWaitPopup( f12_arg0 )
	end
end

RejoinUtils.FetchAndUpdateRejoinState = function ( f11_arg0 )
	local f11_local0 = LUI.DataSourceInControllerModel.new( "frontend.rejoinState.fetchCompleted" )
	if f11_local0:GetValue( f11_arg0 ) == 0 then
		return 
	end
	f11_local0:SetValue( f11_arg0, 0 )
	local f11_local1 = RejoinUtils.GetLastLobbyDisconnectedReasonAchievement( f11_arg0 )
	DebugPrint( "[UI][RejoinUtils.lua] -> RejoinUtils.CheckAndOpenRejoinWaitPopup: Last Lobby Disconnect Reason: " .. tostring( f11_local1 ) )
	if RejoinUtils.IsLobbyDisconnectReasonRejoinable( f11_local1 ) then
		DebugPrint( "[UI][RejoinUtils.lua] -> RejoinUtils.FetchAndUpdateRejoinState: Rejoin State fetch completed" )
		RejoinUtils.CheckRejoinability( f11_arg0 )
	end
end

RejoinUtils.GetRejoinAchievementProgression = function ( f10_arg0, f10_arg1, f10_arg2, f10_arg3 )
	if CONDITIONS.IsDevelopmentBuild() and Dvar[0x22EAAB59AA27E9B]( f10_arg2 .. "_" .. f10_arg1 ) and 0 <= Dvar[0x22EAAB59AA27E9B]( f10_arg2 .. "_" .. f10_arg1 ) then
		return Dvar[0x22EAAB59AA27E9B]( f10_arg2 .. "_" .. f10_arg1 )
	end
	local f10_local0 = OnlineChallenges[0x1EEE6570EF4BB8B]( f10_arg0, StringTable[0x2DCF0973239E909]( f10_arg3.file, f10_arg3.cols.aeName, f10_arg2, f10_arg3.cols.aeID ) )
	if f10_local0 then
		local f10_local1 = f10_local0.progress
		if not f10_local1 then
			f10_local0 = f10_local1
		end
	end
	f10_local0 = {}
end

RejoinUtils.GetLastLobbyDisconnectedReasonAchievement = function ( f9_arg0 )
	local f9_local0 = RejoinUtils.GetRejoinAchievementProgression( f9_arg0, "sub_progress", RejoinUtils.Achievements.name, RejoinUtils.Achievements.csv )
	if not f9_local0 then
		f9_local0 = 0
	end
	return f9_local0
end

RejoinUtils.IsLobbyDisconnectReasonRejoinable = function ( f8_arg0 )
	local f8_local0
	if (f8_arg0 < LeaguePlayUtils.DisconnectReason.FIRST_LEAVE or f8_arg0 > LeaguePlayUtils.DisconnectReason.INACTIVITY) and f8_arg0 ~= LeaguePlayUtils.DisconnectReason.FORCE_DISCONNECT then
		f8_local0 = false
	else
		f8_local0 = true
	end
	return f8_local0
end

RejoinUtils.GetLobbyRejoinPopupType = function ( f7_arg0 )
	if f7_arg0 == Enum[0x3085A67688502CD][0xECB1AED3C240D60] then
		return RejoinUtils.REJOIN_POPUP_TYPE.RANKED
	else
		return RejoinUtils.REJOIN_POPUP_TYPE.GENERIC
	end
end

RejoinUtils.GetRejoinInfoFromAchievement = function ( f6_arg0 )
	local f6_local0 = RejoinUtils.GetRejoinAchievementProgression( f6_arg0, "lobby_id", RejoinUtils.Achievements.name, RejoinUtils.Achievements.csv ) or 0
	local f6_local1 = RejoinUtils.GetRejoinAchievementProgression( f6_arg0, "gametype", RejoinUtils.Achievements.name, RejoinUtils.Achievements.csv ) or 1
	local f6_local2 = RejoinUtils.GetLastLobbyDisconnectedReasonAchievement( f6_arg0 )
	local f6_local3 = RejoinUtils.GetRejoinAchievementProgression( f6_arg0, "expiry_t", RejoinUtils.Achievements.name, RejoinUtils.Achievements.csv ) or 0
	local f6_local4
	if f6_local3 == 0 or f6_local3 >= CoD.GetUTC() then
		f6_local4 = false
	else
		f6_local4 = true
	end
	DebugPrint( "[UI][RejoinUtils.lua] -> RejoinUtils.GetRejoinInfoFromAchievement: lobby_id:" .. f6_local0 .. ", gametype: " .. f6_local1 .. ", disconnectReason: " .. f6_local2 .. ", expiry:" .. f6_local3 )
	return {
		lastLobbyID = f6_local0,
		lastLobbyGametype = f6_local1,
		lastLobbyDisconnectReason = f6_local2,
		rejoinExpiry = f6_local3,
		isRejoinExpired = f6_local4
	}
end

RejoinUtils.CheckRejoinability = function ( f5_arg0 )
	DebugPrint( "[UI][RejoinUtils.lua] -> RejoinUtils.CheckRejoinability: Check rejoinablity." )
	local f5_local0 = LUI.DataSourceInControllerModel.new( "frontend.rejoinState.hasLastLobbyInfo" )
	if f5_local0:GetValue( f5_arg0 ) then
		DebugPrint( "[UI][RejoinUtils.lua] -> RejoinUtil.CheckRejoinability: Fetched last lobby info from matchmaker. Check whether we can rejoin." )
		local f5_local1 = LUI.DataSourceInControllerModel.new( "frontend.rejoinState.lobbySupportsRejoin" )
		if not f5_local1:GetValue( f5_arg0 ) then
			DebugPrint( "[UI][RejoinUtils.lua] -> RejoinUtil.CheckRejoinability: Last lobby does not support rejoin. Ignore." )
			return 
		end
		local f5_local2 = LUI.DataSourceInControllerModel.new( "frontend.rejoinState.isAllowedToRejoinPreviousLobby" )
		local f5_local3 = f5_local2:GetValue( f5_arg0 )
		local f5_local4 = LUI.DataSourceInControllerModel.new( "frontend.rejoinState.rejoinPlaylistID" )
		local f5_local5 = f5_local4:GetValue( f5_arg0 )
		local f5_local6 = LUI.DataSourceInControllerModel.new( "frontend.rejoinState.rejoinPlaylistVersion" )
		local f5_local7 = f5_local6:GetValue( f5_arg0 )
		local f5_local8 = LUI.DataSourceInControllerModel.new( "frontend.rejoinState.currentPlaylistVersion" )
		local f5_local9 = f5_local8:GetValue( f5_arg0 )
		local f5_local10 = f5_local7 ~= f5_local9
		local f5_local11 = LUI.DataSourceInControllerModel.new( "frontend.rejoinState.performanceGametype" )
		local f5_local12 = f5_local11:GetValue( f5_arg0 )
		DebugPrint( "[UI][RejoinUtils.lua] -> RejoinUtil.CheckRejoinability: lastLobbyPlaylistVersion " .. tostring( f5_local7 ) .. ", currentPlaylistVersion " .. tostring( f5_local9 ) )
		local f5_local13 = DebugPrint
		local f5_local14 = "[UI][RejoinUtils.lua] -> RejoinUtil.CheckRejoinability: lastLobbyIsAllowedToRejoin "
		local f5_local15
		if f5_local3 then
			f5_local15 = "true"
		else
			f5_local15 = "false"
		end
		f5_local13( f5_local14 .. f5_local15 .. ", lastLobbyPlaylistID " .. f5_local5 .. ", lastLobbyMatchmakingGametype " .. f5_local12 )
		local f5_local16 = RejoinUtils.RejoinProcessFunctions[RejoinUtils.GetLobbyRejoinPopupType( f5_local12 )]
		if f5_local16.lobbyActiveFunc then
			f5_local16.lobbyActiveFunc( f5_arg0, f5_local3, f5_local10 )
		end
	else
		DebugPrint( "[UI][RejoinUtils.lua] -> RejoinUtil.CheckRejoinability: No last lobby info. Check whether there is any active state from AE." )
		local f5_local1 = RejoinUtils.GetRejoinInfoFromAchievement( f5_arg0 )
		local f5_local2 = RejoinUtils.RejoinProcessFunctions[RejoinUtils.GetLobbyRejoinPopupType( f5_local1.lastLobbyGametype )]
		if f5_local2.lobbyInactiveFunc then
			f5_local2.lobbyInactiveFunc( f5_arg0, f5_local1 )
		end
	end
end

RejoinUtils.SendRejoinSeenEvent = function ( f4_arg0 )
	OnlineRejoin[0x95E2903C8049DB]( f4_arg0 )
end

RejoinUtils.ProcessRankedPlayRejoinForActiveLobby = function ( f3_arg0, f3_arg1, f3_arg2 )
	if not f3_arg1 then
		DebugPrint( "[UI][RejoinUtils.lua] -> RejoinUtils.ProcessRankedPlayRejoinForActiveLobby: We are not allowed to rejoin. League menu will show the reason so ignore here." )
		return 
	end
	local f3_local0 = LeaguePlayUtils.GetLocalPlayerStat( "reason", LeaguePlayUtils.Achievements.Progression, "penalty", true ) == LeaguePlayUtils.DisconnectReason.PENALTY_LIMIT_REACHED
	local f3_local1 = RejoinUtils.GetRejoinInfoFromAchievement( f3_arg0 )
	DebugPrint( "[UI][RejoinUtils.lua] -> RejoinUtils.ProcessRankedPlayRejoinForActiveLobby last lobby disconnect reason is " .. f3_local1.lastLobbyDisconnectReason )
	if f3_local0 then
		DebugPrint( "[UI][RejoinUtils.lua] -> RejoinUtils.ProcessRankedPlayRejoinForActiveLobby: We are not allowed to rejoin due to reaching the unpenalized disconnect limit." )
		RejoinUtils.PopupFunctions.OpenTooManyDisconnectPenaltyPopup( f3_arg0 )
	elseif f3_local1.isRejoinExpired then
		DebugPrint( "[UI][RejoinUtils.lua] -> RejoinUtils.ProcessRankedPlayRejoinForActiveLobby: Our rejoin has expired." )
		RejoinUtils.PopupFunctions.OpenRejoinTimerExpiredPopup( f3_arg0, RejoinUtils.REJOIN_POPUP_TYPE.RANKED )
	elseif f3_arg2 then
		DebugPrint( "[UI][RejoinUtils.lua] -> RejoinUtils.ProcessRankedPlayRejoinForActiveLobby: Playlist version mismatch. We can't rejoin the lobby." )
		f0_local0( f3_arg0 )
	else
		DebugPrint( "[UI][RejoinUtils.lua] -> RejoinUtils.ProcessRankedPlayRejoinForActiveLobby: We are allowed to rejoin." )
		RejoinUtils.PopupFunctions.OpenRejoinMatchPopup( f3_arg0, RejoinUtils.REJOIN_POPUP_TYPE.RANKED )
	end
end

RejoinUtils.ProcessRankedPlayRejoinForInactiveLobby = function ( f2_arg0, f2_arg1 )
	if f2_arg1.lastLobbyID ~= 0 then
		DebugPrint( "[UI][RejoinUtils.lua] -> RejoinUtils.ProcessRankedPlayRejoinForInactiveLobby: We have pending rejoin but the lobby is disbanded." )
		RejoinUtils.PopupFunctions.OpenMatchEndedNoPenaltyPopup( f2_arg0 )
	end
end

RejoinUtils.ProcessGenericRejoin = function ( f1_arg0, f1_arg1, f1_arg2 )
	if not f1_arg1 then
		DebugPrint( "[UI][RejoinUtils.lua] -> RejoinUtil.ProcessGenericRejoin: Last lobby supports generic popup and we are not allowed to rejoin. Ignore." )
		return 
	elseif f1_arg2 then
		DebugPrint( "[UI][RejoinUtils.lua] -> RejoinUtils.ProcessRankedPlayRejoinForActiveLobby: Playlist version mismatch. We can't rejoin the lobby." )
		f0_local0( f1_arg0 )
		return 
	else
		DebugPrint( "[UI][RejoinUtils.lua] -> RejoinUtil.ProcessGenericRejoin: Last lobby supports generic popup." )
		RejoinUtils.PopupFunctions.OpenRejoinMatchPopup( f1_arg0, RejoinUtils.REJOIN_POPUP_TYPE.GENERIC )
	end
end

