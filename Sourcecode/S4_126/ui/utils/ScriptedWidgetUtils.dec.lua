-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
ScriptedWidget = {
	omnvar_prefix = "ui_scripted_widget_",
	HorizontalAnchors = {
		Stretch = 3,
		Right = 2,
		Left = 0,
		Center = 1
	},
	VerticalAnchors = {
		Top = 0,
		Stretch = 3,
		Bottom = 2,
		Center = 1
	},
	PositionData = {
		horizontal_anchor_bits = 2,
		y_pos_max = 1564,
		horizontal_anchor_shift = 22,
		stretch_min = 4294966273,
		x_pos_shift = 0,
		vertical_anchor_shift = 24,
		stretch_max = 1024,
		x_pos_min = 4294967233,
		y_pos_min = 4294966813,
		y_pos_bits = 11,
		x_pos_bits = 11,
		x_pos_max = 1984,
		vertical_anchor_bits = 2,
		y_pos_shift = 11
	},
	InsertOrderedItem = function ( f38_arg0, f38_arg1 )
		if f38_arg0:getFirstChild() then
			
		else
			
		end
		f38_arg0:addElement( f38_arg1 )
	end,
	AnchorWidget = function ( f35_arg0, f35_arg1 )
		local f35_local0 = f35_arg1.value + 1
		local f35_local1 = ScriptedWidget.AnchorSettings[f35_local0][0x25E37D4275190C4]
		local f35_local2 = {
			entityNum = f35_arg0.ent_num,
			entityTag = ScriptedWidget.AnchorSettings[f35_local0][0x6D7AB194448A4F3],
			defaultScale = ScriptedWidget.AnchorSettings[f35_local0][0x60FC9EE285CF0EB],
			minScale = ScriptedWidget.AnchorSettings[f35_local0][0x8F4DC057E7623FA],
			maxScale = ScriptedWidget.AnchorSettings[f35_local0][0x2BC2422D6556B68],
			naturalDistance = ScriptedWidget.AnchorSettings[f35_local0][0x8CBEB1C8F83B204],
			naturalFOV = ScriptedWidget.AnchorSettings[f35_local0][0x32E0E1C68D1069A],
			fovScaleFactor = ScriptedWidget.AnchorSettings[f35_local0][0xD13A03C1AA95B21],
			screenOffsetX = ScriptedWidget.AnchorSettings[f35_local0][0xCF827F5443A0DBA],
			screenOffsetY = ScriptedWidget.AnchorSettings[f35_local0][0xCF828F5443A0F6D],
			worldOffsetX = ScriptedWidget.AnchorSettings[f35_local0][0x1316A9501388C28],
			worldOffsetY = ScriptedWidget.AnchorSettings[f35_local0][0x1316B9501388DDB],
			worldOffsetZ = ScriptedWidget.AnchorSettings[f35_local0][0x1316C9501388F8E],
			tagOffsetX = ScriptedWidget.AnchorSettings[f35_local0][0xD5ABDB1EDAA7A28],
			tagOffsetY = ScriptedWidget.AnchorSettings[f35_local0][0xD5ABEB1EDAA7BDB],
			tagOffsetZ = ScriptedWidget.AnchorSettings[f35_local0][0xD5ABFB1EDAA7D8E],
			snapSmoothing = ScriptedWidget.AnchorSettings[f35_local0][0xCE5DB3412F49BC8],
			snapToScreenEdges = ScriptedWidget.AnchorSettings[f35_local0][0xEC2950F3770BC2D]
		}
		local f35_local3 = ScriptedWidget.AnchorSettings[f35_local0][0x4D145EFD5DC3350]
		if not f35_local3 then
			f35_local3 = 0 <= f35_local1
		end
		f35_local2.sendVisibilityEvents = f35_local3
		f35_local2.onObstruction = ScriptedWidget.AnchorSettings[f35_local0][0xD9CBF086ABD5475]
		f35_arg0:SetupAnchoredElement( f35_local2 )
		if 0 <= f35_local1 then
			f35_arg0:SetAlpha( 0 )
			f35_arg0:registerEventHandler( "anchor_on_screen", function ( element )
				element:SetAlpha( 0, f35_arg0 * 1000 )
			end )
			f35_arg0:registerEventHandler( "anchor_off_screen", function ( element )
				element:SetAlpha( 1, f35_arg0 * 1000 )
			end )
		end
	end,
	StateCallback = function ( f34_arg0, f34_arg1 )
		local f34_local0 = ScriptedWidget.WidgetTypes[f34_arg0.type_index]
		local f34_local1
		if f34_local0 then
			f34_local1 = f34_local0
		else
			f34_local1 = f34_local0[0x8B6F2336E5960E5]
		end
		if not f34_local1 then
			return 
		end
		local f34_local2 = f34_arg1.value + 1
		local f34_local3 = f34_local1[0x50C696D6CF06E9F]
		if f34_local3 then
			f34_local3 = f34_local1[0x50C696D6CF06E9F][f34_local2]
		end
		if f34_local3 and f34_local3[0x140004C9A5B7B9D] ~= "" then
			ACTIONS.AnimateSequence( f34_arg0, f34_local3[0x140004C9A5B7B9D] )
		end
		if f34_arg0.ScriptedWidgetStateCallback then
			f34_arg0:ScriptedWidgetStateCallback( f34_arg1 )
		end
		if f34_arg0.list_index then
			local f34_local4 = f34_arg0:getParent()
			if f34_local4 and f34_local4.ScriptedWidgetListItemStateChangeCallback then
				f34_local4:ScriptedWidgetListItemStateChangeCallback( f34_arg1.controller, f34_local3 )
			end
		end
	end,
	SetPosition = function ( f33_arg0, f33_arg1 )
		local f33_local0, f33_local1, f33_local2, f33_local3 = f33_arg0:getLocalRect()
		local f33_local4 = f33_local2 - f33_local0
		local f33_local5 = f33_local3 - f33_local1
		local f33_local6 = false
		local f33_local7 = {
			anchor_left = 0,
			anchor_right = 1,
			anchor_top = 0,
			anchor_bottom = 1,
			left = 0,
			top = 0,
			right = f33_local4,
			bottom = f33_local5
		}
		if f33_arg1.value ~= 0 then
			local f33_local8 = LUI.UnpackBits( f33_arg1.value, ScriptedWidget.PositionData.x_pos_bits, ScriptedWidget.PositionData.x_pos_shift )
			local f33_local9 = LUI.UnpackBits( f33_arg1.value, ScriptedWidget.PositionData.y_pos_bits, ScriptedWidget.PositionData.y_pos_shift )
			local f33_local10 = LUI.UnpackBits( f33_arg1.value, ScriptedWidget.PositionData.horizontal_anchor_bits, ScriptedWidget.PositionData.horizontal_anchor_shift )
			local f33_local11 = LUI.UnpackBits( f33_arg1.value, ScriptedWidget.PositionData.vertical_anchor_bits, ScriptedWidget.PositionData.vertical_anchor_shift )
			if f33_local10 == ScriptedWidget.HorizontalAnchors.Left then
				f33_local7.left = (f33_local8 + ScriptedWidget.PositionData.x_pos_min) * _1080p
				f33_local7.right = f33_local7.left + f33_local4
			elseif f33_local10 == ScriptedWidget.HorizontalAnchors.Right then
				f33_local7.right = (f33_local8 - ScriptedWidget.PositionData.x_pos_max) * _1080p
				f33_local7.left = f33_local7.right - f33_local4
				f33_local7.anchor_left = 1
				f33_local7.anchor_right = 0
			elseif f33_local10 == ScriptedWidget.HorizontalAnchors.Center then
				f33_local7.left = (f33_local8 + ScriptedWidget.PositionData.stretch_min) * _1080p - f33_local4 / 2
				f33_local7.right = f33_local7.left + f33_local4
				f33_local7.anchor_left = 0.5
				f33_local7.anchor_right = 0.5
			elseif f33_local10 == ScriptedWidget.HorizontalAnchors.Stretch then
				f33_local7.left = (f33_local8 + ScriptedWidget.PositionData.stretch_min) * _1080p
				f33_local7.right = f33_local7.left + f33_local4
				f33_local7.anchor_left = 0
				f33_local7.anchor_right = 0
			end
			if f33_local11 == ScriptedWidget.VerticalAnchors.Top then
				f33_local7.top = (f33_local9 + ScriptedWidget.PositionData.y_pos_min) * _1080p
				f33_local7.bottom = f33_local7.top + f33_local5
			elseif f33_local11 == ScriptedWidget.VerticalAnchors.Bottom then
				f33_local7.bottom = (f33_local9 - ScriptedWidget.PositionData.y_pos_max) * _1080p
				f33_local7.top = f33_local7.bottom - f33_local5
				f33_local7.anchor_top = 1
				f33_local7.anchor_bottom = 0
			elseif f33_local11 == ScriptedWidget.VerticalAnchors.Center then
				f33_local7.top = (f33_local9 + ScriptedWidget.PositionData.stretch_min) * _1080p - f33_local5 / 2
				f33_local7.bottom = f33_local7.top + f33_local5
				f33_local7.anchor_top = 0.5
				f33_local7.anchor_bottom = 0.5
			elseif f33_local11 == ScriptedWidget.VerticalAnchors.Stretch then
				f33_local7.top = (f33_local9 + ScriptedWidget.PositionData.stretch_min) * _1080p
				f33_local7.bottom = f33_local7.top + f33_local5
				f33_local7.anchor_top = 0
				f33_local7.anchor_bottom = 0
			end
			if f33_local10 ~= ScriptedWidget.HorizontalAnchors.Stretch or f33_local11 ~= ScriptedWidget.VerticalAnchors.Stretch then
				f33_local6 = false
			else
				f33_local6 = true
			end
		end
		f33_arg0:SetAnchorsAndPosition( f33_local7.anchor_left, f33_local7.anchor_right, f33_local7.anchor_top, f33_local7.anchor_bottom, f33_local7.left, f33_local7.right, f33_local7.top, f33_local7.bottom )
		if f33_arg0._useSafeArea and not Engine[0x575E9C5B9AAB6F4]() then
			f33_arg0:SetupSafeArea()
		elseif f33_local6 then
			f33_arg0:setupScaleFullscreen()
			if Engine[0x575E9C5B9AAB6F4]() then
				f33_arg0:SetupHUDBounds()
			end
		end
	end,
	SetUseSafeArea = function ( f32_arg0, f32_arg1 )
		f32_arg0._useSafeArea = f32_arg1
	end,
	CreateAndInitWidget = function ( f31_arg0, f31_arg1, f31_arg2, f31_arg3, f31_arg4 )
		local f31_local0 = ScriptedWidget.WidgetTypes[f31_arg1]
		local f31_local1
		if f31_local0 then
			f31_local1 = f31_local0
		else
			f31_local1 = f31_local0[0x8B6F2336E5960E5][0x7F0119E3154625]
		end
		local f31_local2 = nil
		if f31_local1 then
			f31_local2 = MenuBuilder.BuildRegisteredType( f31_local1, {
				controllerIndex = f31_arg0
			} )
			f31_local2.id = f31_local1 .. f31_arg3
			f31_local2.type_index = f31_arg1
			f31_local2.widget_type = f31_local0[0xE7CD7633931DE6E]
			f31_local2.omnvar_prefix = f31_arg2
			f31_local2.omnvar_index = f31_arg3
			f31_local2.list_index = f31_arg4
			f31_local2.archetype = f31_local0[0x8B6F2336E5960E5][0x920D140D70ABEEC]
			f31_local2.param_omnvar = f31_arg2 .. "param_" .. f31_arg3
			f31_local2.state_omnvar = f31_arg2 .. "state_" .. f31_arg3
			f31_local2.data_omnvar = f31_arg2 .. "data_" .. f31_arg3
			f31_local2.time_omnvar = f31_arg2 .. "time_" .. f31_arg3
			if not f31_arg4 then
				f31_local2.position_omnvar = f31_arg2 .. "position_" .. f31_arg3
				f31_local2.priority_omnvar = f31_arg2 .. "priority_" .. f31_arg3
				f31_local2.ent_omnvar = f31_arg2 .. "ent_" .. f31_arg3
				f31_local2.ent_num = Game[0x28624DEF6F708C8]( f31_arg0, f31_local2.ent_omnvar )
				f31_local2.priority = Game[0x28624DEF6F708C8]( f31_arg0, f31_local2.priority_omnvar )
				if f31_local2.ent_num ~= CoD.ENTITYNUM_NONE then
					ScriptedWidget.AnchorWidget( f31_local2, {
						value = Game[0x28624DEF6F708C8]( f31_arg0, f31_local2.position_omnvar )
					} )
				else
					ScriptedWidget.SetPosition( f31_local2, {
						value = Game[0x28624DEF6F708C8]( f31_arg0, f31_local2.position_omnvar )
					} )
				end
			else
				f31_local2.type_omnvar = f31_arg2 .. "type_" .. f31_arg3
			end
		end
		return f31_local2
	end,
	InitWidgetOmnvarCallbacks = function ( f27_arg0, f27_arg1 )
		if f27_arg1.type_omnvar then
			f27_arg1:registerOmnvarHandler( f27_arg1.type_omnvar, ScriptedListWidget.ChangeListItemType )
		end
		if f27_arg1.ScriptedListWidget then
			f27_arg1.list_items = {}
			f27_arg1.list_order = {}
			ScriptedListWidget.CreateOrDeleteListItems( f27_arg1, {
				value = Game[0x28624DEF6F708C8]( f27_arg0, f27_arg1.data_omnvar ),
				controller = f27_arg0
			} )
			f27_arg1:registerOmnvarHandler( f27_arg1.data_omnvar, ScriptedListWidget.CreateOrDeleteListItems )
		else
			f27_arg1.archetype_func = nil
			f27_arg1.widget_archetype_func = nil
			f27_arg1.archetype_omnvar = nil
			if f27_arg1.archetype ~= "" and ScriptedWidget.ArchetypeData[f27_arg1.archetype] ~= nil then
				if ScriptedWidget.ArchetypeData[f27_arg1.archetype].widget_func and not f27_arg1[ScriptedWidget.ArchetypeData[f27_arg1.archetype].widget_func] and ScriptedWidget.ArchetypeData[f27_arg1.archetype].widget_func_is_required then
					assert( 0, f27_arg1.id .. " does not support widget archetype " .. f27_arg1.archetype .. ". The archetype requires self." .. ScriptedWidget.ArchetypeData[f27_arg1.archetype].widget_func .. " to exist." )
				elseif ScriptedWidget.ArchetypeData[f27_arg1.archetype].archetype_func then
					f27_arg1.archetype_func = ScriptedWidget.ArchetypeData[f27_arg1.archetype].archetype_func
					f27_arg1.widget_archetype_func = f27_arg1[ScriptedWidget.ArchetypeData[f27_arg1.archetype].widget_func]
					f27_arg1.acrhetype_omnvar = f27_arg1.omnvar_prefix .. ScriptedWidget.ArchetypeData[f27_arg1.archetype].omnvar_handler .. "_" .. f27_arg1.omnvar_index
					f27_arg1:archetype_func( {
						data = Game[0x28624DEF6F708C8]( f27_arg0, f27_arg1.data_omnvar ),
						time = Game[0x28624DEF6F708C8]( f27_arg0, f27_arg1.time_omnvar ),
						controller = f27_arg0
					}, f27_arg1.widget_archetype_func )
				end
			end
			if f27_arg1.ScriptedWidgetDataCallback then
				f27_arg1:ScriptedWidgetDataCallback( {
					value = Game[0x28624DEF6F708C8]( f27_arg0, f27_arg1.data_omnvar ),
					controller = f27_arg0
				} )
			end
			f27_arg1:registerOmnvarHandler( f27_arg1.data_omnvar, function ( f30_arg0, f30_arg1 )
				if f30_arg0.archetype_func and f30_arg0.acrhetype_omnvar == f30_arg0.data_omnvar then
					f30_arg0:archetype_func( {
						data = f30_arg1.value,
						time = Game[0x28624DEF6F708C8]( f30_arg1.controller, f30_arg0.time_omnvar ),
						controller = f30_arg1.controller
					}, f30_arg0.widget_archetype_func )
				end
				if f30_arg0.ScriptedWidgetDataCallback then
					f30_arg0:ScriptedWidgetDataCallback( {
						value = f30_arg1.value,
						time = Game[0x28624DEF6F708C8]( f30_arg1.controller, f30_arg0.time_omnvar ),
						controller = f30_arg1.controller
					} )
				end
			end )
		end
		if f27_arg1.ScriptedWidgetParamCallback then
			f27_arg1:ScriptedWidgetParamCallback( {
				value = Game[0x28624DEF6F708C8]( f27_arg0, f27_arg1.param_omnvar ),
				controller = f27_arg0
			} )
			f27_arg1:registerOmnvarHandler( f27_arg1.param_omnvar, f27_arg1.ScriptedWidgetParamCallback )
		end
		ScriptedWidget.StateCallback( f27_arg1, {
			value = Game[0x28624DEF6F708C8]( f27_arg0, f27_arg1.state_omnvar ),
			controller = f27_arg0
		} )
		f27_arg1:registerOmnvarHandler( f27_arg1.state_omnvar, ScriptedWidget.StateCallback )
		if f27_arg1.ScriptedWidgetTimeCallback then
			f27_arg1:ScriptedWidgetTimeCallback( {
				value = Game[0x28624DEF6F708C8]( f27_arg0, f27_arg1.time_omnvar ),
				controller = f27_arg0
			} )
		end
		if f27_arg1.ScriptedWidgetTimeCallback or f27_arg1.archetype_func and f27_arg1.acrhetype_omnvar == f27_arg1.time_omnvar then
			f27_arg1:registerOmnvarHandler( f27_arg1.time_omnvar, function ( f29_arg0, f29_arg1 )
				if f29_arg0.archetype_func and f29_arg0.acrhetype_omnvar == f29_arg0.time_omnvar then
					f29_arg0:archetype_func( {
						time = f29_arg1.value,
						data = Game[0x28624DEF6F708C8]( f29_arg1.controller, f29_arg0.data_omnvar ),
						controller = f29_arg1.controller
					}, f29_arg0.widget_archetype_func )
				end
				if f29_arg0.ScriptedWidgetTimeCallback then
					f29_arg0:ScriptedWidgetTimeCallback( f29_arg1 )
				end
			end )
		end
		if f27_arg1.position_omnvar then
			if f27_arg1.ent_num ~= CoD.ENTITYNUM_NONE then
				f27_arg1:registerOmnvarHandler( f27_arg1.position_omnvar, ScriptedWidget.AnchorWidget )
			else
				f27_arg1:registerOmnvarHandler( f27_arg1.position_omnvar, ScriptedWidget.SetPosition )
			end
		end
		if f27_arg1.priority_omnvar then
			f27_arg1:registerOmnvarHandler( f27_arg1.priority_omnvar, function ( f28_arg0, f28_arg1 )
				f28_arg0.priority = f28_arg1.value
				local f28_local0 = f28_arg0:getParent()
				if f28_local0 and f28_arg0 == f28_local0._widget then
					f28_local0.priority = f28_arg0.priority
					f28_arg0 = f28_local0
					f28_local0 = f28_local0:getParent()
				end
				f28_local0:RemoveElement( f28_arg0 )
				ScriptedWidget.InsertOrderedItem( f28_local0, f28_arg0 )
			end )
		end
	end,
	GetWidgetParameterProperties = function ( f26_arg0, f26_arg1 )
		return ScriptedWidget.WidgetTypes[f26_arg0.type_index][0x4B43B0A3234CD99][f26_arg1 + 1][0x42237CA53EDFE3C]
	end,
	GetWidgetParameterName = function ( f25_arg0, f25_arg1 )
		return ScriptedWidget.WidgetTypes[f25_arg0.type_index][0x8B6F2336E5960E5][0x4B43B0A3234CD99][f25_arg1 + 1][0x4BCADBA8E631B86]
	end,
	GetWidgetState = function ( f24_arg0, f24_arg1 )
		return ScriptedWidget.WidgetTypes[f24_arg0.type_index][0x8B6F2336E5960E5][0x50C696D6CF06E9F][f24_arg1 + 1]
	end,
	OnAdd = function ( f23_arg0, f23_arg1 )
		if not ScriptedWidget.container.ActiveTypes[f23_arg0.widget_type] then
			ScriptedWidget.container.ActiveTypes[f23_arg0.widget_type] = {}
		end
		table.insert( ScriptedWidget.container.ActiveTypes[f23_arg0.widget_type], f23_arg0 )
		ScriptedWidget.InitWidgetOmnvarCallbacks( f23_arg1, f23_arg0 )
		ScriptedWidget.UpdateWidgetsVisibility()
	end,
	OnRemove = function ( f22_arg0 )
		if ScriptedWidget.container.ActiveTypes[f22_arg0.widget_type] then
			local f22_local0 = LUI.IsItemInArray( ScriptedWidget.container.ActiveTypes[f22_arg0.widget_type], f22_arg0 )
			if f22_local0 then
				table.remove( ScriptedWidget.container.ActiveTypes[f22_arg0.widget_type], f22_local0 )
			end
		end
		local f22_local0 = f22_arg0:getParent()
		local f22_local1 = nil
		if f22_local0 and f22_arg0 == f22_local0._widget then
			f22_local1 = f22_local0
			local f22_local2 = LUI.HudManager.GetInstance()
			f22_local2 = f22_local2.activeHud or f22_arg0.activeHud
			local f22_local3
			if f22_local2 then
				f22_local3 = f22_local2
			else
				f22_local3 = LUI.IsItemInArray( f22_local2.allWidgets, f22_local0 )
			end
			if f22_local3 then
				table.remove( f22_local2.allWidgets, f22_local3 )
			end
		end
		if f22_arg0.list_items then
			for f22_local5, f22_local6 in pairs( f22_arg0.list_items ) do
				ScriptedWidget.OnRemove( f22_local6 )
			end
		end
		local f22_local2 = true
		if f22_arg0.ScriptedWidgetOnRemoveCallback then
			local f22_local3 = f22_arg0:ScriptedWidgetOnRemoveCallback( f22_local1 )
			if not f22_local3 then
				f22_local2 = f22_local3
			else
				f22_local2 = true
			end
		end
		if f22_local2 then
			if f22_local1 then
				f22_local1:closeTree()
			else
				f22_arg0:closeTree()
			end
		end
	end,
	CreateVisibilityWrapperForWidget = function ( f19_arg0 )
		local self = LUI.UIElement.new( defaultState )
		self.id = f19_arg0.id .. "VisibilityWrapper"
		self.priority = f19_arg0.priority
		self.ShowImmediately = function ( f21_arg0 )
			return f21_arg0:PlayHUDWidgetAnimation( "immediate", true )
		end
		
		self.PlayHUDWidgetAnimation = function ( f20_arg0, f20_arg1, f20_arg2 )
			if f19_arg0._widget then
				local f20_local0 = "hud_anim_"
				local f20_local1 = f20_arg1
				local f20_local2 = "_"
				local f20_local3
				if f20_arg2 then
					f20_local3 = "on"
				else
					f20_local3 = "off"
				end
				f20_local0 = f20_local0 .. f20_local1 .. f20_local2 .. f20_local3
				if f19_arg0._widget:HasEventHandler( f20_local0 ) then
					f19_arg0._widget:processEvent( {
						name = f20_local0
					} )
					return true
				end
			end
			return false
		end
		
		self:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
		self._widget = f19_arg0
		self:addElement( f19_arg0 )
		local f19_local1 = LUI.HudManager.GetInstance()
		f19_local1 = f19_local1.activeHud
		if f19_local1 then
			table.insert( f19_local1.allWidgets, self )
		end
		return self
	end,
	CreateOrDeleteScriptedWidget = function ( f18_arg0, f18_arg1, f18_arg2 )
		if f18_arg0.ScriptedWidgets[f18_arg2] then
			if ScriptedWidget.notify_server_message_on_close then
				Engine[0x6055C55456F05DF]( ScriptedWidget.notify_server_message_on_close, f18_arg2 )
			end
			ScriptedWidget.OnRemove( f18_arg0.ScriptedWidgets[f18_arg2] )
			f18_arg0.ScriptedWidgets[f18_arg2] = nil
		end
		if 0 < f18_arg1.value then
			local f18_local0 = ScriptedWidget.CreateAndInitWidget( f18_arg1.controller, f18_arg1.value, ScriptedWidget.omnvar_prefix, f18_arg2 )
			if f18_local0 then
				local f18_local1 = ScriptedWidget.CreateVisibilityWrapperForWidget( f18_local0 )
				if f18_local1 then
					ScriptedWidget.InsertOrderedItem( f18_arg0, f18_local1 )
				else
					ScriptedWidget.InsertOrderedItem( f18_arg0, f18_local0 )
				end
				f18_arg0.ScriptedWidgets[f18_arg2] = f18_local0
				ScriptedWidget.OnAdd( f18_local0, f18_arg1.controller )
				if f18_local0.Image then
					local f18_local2 = Engine[0x1DAB7B14CADB2E7]( f18_local0.Image:GetImage() )
					if f18_local2 and f18_local2 == "hud_icon_nameplate_chevron_enemy" then
						f18_local0.Image:SetRGBFromTable( COLORBLIND_UTILS.GetCustomColorFromColorNameAndColorBlindType( f18_arg1.controller, COLORBLIND_UTILS.CUSTOM_COLORS.ENEMY, SWATCHES.HUD.vEnemyTeamMarker ), 0 )
					end
				end
				local f18_local2 = LUI.HudManager.GetInstance()
				f18_local0.activeHud = f18_local2.activeHud
			end
		end
	end,
	GetVisibilityWrapper = function ( f17_arg0 )
		local f17_local0 = f17_arg0:getParent()
		if f17_local0 and f17_arg0 == f17_local0._widget then
			return f17_local0
		else
			
		end
	end,
	GetActiveWidgetsByType = function ( f16_arg0, f16_arg1 )
		if f16_arg0.ActiveTypes[f16_arg1] then
			return f16_arg0.ActiveTypes[f16_arg1]
		else
			return {}
		end
	end,
	FilterWidgetsToToggle = function ( f15_arg0, f15_arg1, f15_arg2 )
		if CSV.HideWidgets.omnvar ~= "" and 0 < CSV.HideWidgets.maxBits then
			local f15_local0 = Game[0x28624DEF6F708C8]( f15_arg1, CSV.HideWidgets.omnvar )
			for f15_local1 = 0, CSV.HideWidgets.maxBits, 1 do
				if Engine[0x77DA0DE401A96D0]( f15_local0, f15_local1 ) then
					local f15_local4 = 0
					local f15_local5 = StringTable[0x2077452C28AB2FC]( CSV.HideWidgets.file, f15_local1, CSV.HideWidgets.cols.widget )
				end
			end
		end
	end,
	GetToggleWidgets = function ( f14_arg0, f14_arg1, f14_arg2, f14_arg3 )
		local f14_local0 = {}
		if ScriptedWidget.VisibilityConditions and ScriptedWidget.VisibilityConditions[f14_arg3] then
			for f14_local7, f14_local8 in pairs( ScriptedWidget.VisibilityConditions[f14_arg3] ) do
				for f14_local4, f14_local5 in pairs( ScriptedWidget.GetActiveWidgetsByType( f14_arg0, f14_local8 ) ) do
					if not f14_local5.ScriptedWidgetVisibilityCallback or f14_local5:ScriptedWidgetVisibilityCallback( f14_arg1, f14_arg2, f14_arg3 ) then
						table.insert( f14_local0, ScriptedWidget.GetVisibilityWrapper( f14_local5 ) or f14_local5 )
					end
				end
			end
		end
		return f14_local0
	end,
	UpdateWidgetsVisibility = function ()
		local f13_local0 = LUI.HudManager.GetInstance()
		f13_local0 = f13_local0.activeHud
		if f13_local0 then
			f13_local0:UpdateWidgetsVisibility()
		end
	end
}
local f0_local0 = function ()
	local f12_local0 = {}
	for f12_local9, f12_local10 in pairs( VISIBILITY_CONDITIONS ) do
		local f12_local11 = 0x0 .. f12_local9
		if f12_local0[f12_local9] == nil then
			f12_local0[f12_local9] = {}
		end
		for f12_local7, f12_local8 in pairs( ScriptedWidget.WidgetTypes ) do
			if f12_local8[0x8B6F2336E5960E5][f12_local11] then
				table.insert( f12_local0[f12_local9], f12_local8[0xE7CD7633931DE6E] )
			end
		end
	end
	f12_local0.NormalGameplay = {}
	for f12_local9, f12_local10 in pairs( ScriptedWidget.WidgetTypes ) do
		if f12_local10[0x8B6F2336E5960E5][0x8896B2CC84D3642] == nil or f12_local10[0x8B6F2336E5960E5][0x8896B2CC84D3642] then
			table.insert( f12_local0.NormalGameplay, f12_local10[0xE7CD7633931DE6E] )
		end
	end
	return f12_local0
end

ScriptedWidget.InitScriptedWidgets = function ( f11_arg0 )
	if f11_arg0[0xA56744CAF755C65] and f11_arg0[0xA56744CAF755C65] ~= "" then
		ScriptedWidget.notify_server_message_on_close = f11_arg0[0xA56744CAF755C65]
	end
	ScriptedWidget.max_widgets = f11_arg0[0x339FFCE052E94BA]
	if f11_arg0[0xF7CDF46B971CA8E] then
		ScriptedListWidget.Init( f11_arg0[0xF7CDF46B971CA8E] )
	end
	ScriptedWidget.WidgetTypes = {}
	for f11_local14, f11_local15 in pairs( f11_arg0[0xF2A4DD4A17F2F59] ) do
		ScriptedWidget.WidgetTypes[f11_local14] = {
			[0x8B6F2336E5960E5] = Engine[0x6093D047200548]( "scriptedwidget:" .. f11_local15[0xA842FFCF5308CB0] )
		}
		ScriptedWidget.WidgetTypes[f11_local14][0xE7CD7633931DE6E] = f11_local15[0xA842FFCF5308CB0]
		if ScriptedWidget.WidgetTypes[f11_local14][0x8B6F2336E5960E5][0x4B43B0A3234CD99] ~= nil then
			ScriptedWidget.WidgetTypes[f11_local14][0x4B43B0A3234CD99] = {}
			for f11_local9, f11_local10 in pairs( ScriptedWidget.WidgetTypes[f11_local14][0x8B6F2336E5960E5][0x4B43B0A3234CD99] ) do
				local f11_local11 = {}
				for f11_local6, f11_local7 in pairs( f11_local10[0x42237CA53EDFE3C] ) do
					f11_local11[f11_local7[0x8DA6B1CCD7C4488]] = f11_local7[0xCE4FD9430E80CEA]
				end
				ScriptedWidget.WidgetTypes[f11_local14][0x4B43B0A3234CD99][f11_local9] = {
					[0x42237CA53EDFE3C] = f11_local11
				}
			end
		end
	end
	ScriptedWidget.VisibilityConditions = f0_local0()
end

ScriptedWidget.GetArchetypeData = function ( f10_arg0, f10_arg1, f10_arg2 )
	if f10_arg0 and ScriptedWidget.ArchetypeData[f10_arg1] and ScriptedWidget.ArchetypeData[f10_arg1].fields and ScriptedWidget.ArchetypeData[f10_arg1].fields[f10_arg2] then
		return LUI.UnpackBits( f10_arg0, ScriptedWidget.ArchetypeData[f10_arg1].fields[f10_arg2].bits, ScriptedWidget.ArchetypeData[f10_arg1].fields[f10_arg2].shift ) * ScriptedWidget.ArchetypeData[f10_arg1].fields[f10_arg2].step_increment, ScriptedWidget.ArchetypeData[f10_arg1].fields[f10_arg2].max_value
	else
		return 0, 0
	end
end

local f0_local1 = function ( f9_arg0, f9_arg1, f9_arg2 )
	local f9_local0, f9_local1 = ScriptedWidget.GetArchetypeData( f9_arg1.data, "scripted_widget_archetype_progress", "current_pct" )
	local f9_local2, f9_local3 = ScriptedWidget.GetArchetypeData( f9_arg1.data, "scripted_widget_archetype_progress", "target_pct" )
	local f9_local4, f9_local5 = ScriptedWidget.GetArchetypeData( f9_arg1.data, "scripted_widget_archetype_progress", "time" )
	f9_local2 = f9_local2 / f9_local3
	if f9_local4 == 0 then
		f9_arg2( f9_arg0, f9_local2, 0 )
	else
		f9_local4 = f9_local4 * 1000
		f9_local0 = f9_local0 / f9_local1
		local f9_local6 = Game[0x49FC972008AE526]() - f9_arg1.time
		local f9_local7 = (f9_local2 - f9_local0) * f9_local6 / f9_local4
		f9_local4 = f9_local4 - f9_local6
		f9_arg2( f9_arg0, f9_local0 + f9_local7, 0 )
		f9_arg2( f9_arg0, f9_local2, f9_local4 )
	end
end

local f0_local2 = function ( f8_arg0, f8_arg1, f8_arg2 )
	local f8_local0, f8_local1 = ScriptedWidget.GetArchetypeData( f8_arg1.data, "scripted_widget_archetype_progress_bool", "current_pct" )
	local f8_local2, f8_local3 = ScriptedWidget.GetArchetypeData( f8_arg1.data, "scripted_widget_archetype_progress_bool", "bool" )
	f8_arg2( f8_arg0, f8_local0, f8_local2 == 1 )
end

local f0_local3 = function ( f7_arg0, f7_arg1, f7_arg2 )
	local f7_local0, f7_local1 = ScriptedWidget.GetArchetypeData( f7_arg1.data, "scripted_widget_archetype_progress_alpha", "current_pct" )
	local f7_local2, f7_local3 = ScriptedWidget.GetArchetypeData( f7_arg1.data, "scripted_widget_archetype_progress_alpha", "current_alpha" )
	f7_arg2( f7_arg0, f7_local0, f7_local2 )
end

local f0_local4 = function ( f6_arg0, f6_arg1, f6_arg2 )
	local f6_local0 = ScriptedWidget.GetArchetypeData( f6_arg1.data, "scripted_widget_archetype_count", "count" )
	local f6_local1 = ScriptedWidget.GetArchetypeData( f6_arg1.data, "scripted_widget_archetype_count", "max_count" )
	local f6_local2, f6_local3 = ScriptedWidget.GetArchetypeData( f6_arg1.data, "scripted_widget_archetype_count", "time" )
	f6_arg2( f6_arg0, f6_local0, f6_local1, f6_local2 * 1000 )
end

ScriptedWidget.InitArchetypes = function ( f5_arg0 )
	ScriptedWidget.ArchetypeData = {}
	if f5_arg0 then
		local f5_local0 = {
			ArchetypeProgress = f0_local0,
			ArchetypeProgressBool = f0_local0,
			ArchetypeProgressAlpha = f0_local0,
			ArchetypeCount = f0_local0
		}
		for f5_local8, f5_local9 in pairs( f5_arg0 ) do
			local f5_local10 = Engine[0x6093D047200548]( "scriptedwidgetarchetype:" .. f5_local9[0x920D140D70ABEEC] )
			ScriptedWidget.ArchetypeData[f5_local9[0x920D140D70ABEEC]] = {}
			ScriptedWidget.ArchetypeData[f5_local9[0x920D140D70ABEEC]].archetype_func = f5_local0[f5_local10[0x8E88826DDEA6893]]
			ScriptedWidget.ArchetypeData[f5_local9[0x920D140D70ABEEC]].widget_func = f5_local10[0x399D0C91A38E9E8]
			ScriptedWidget.ArchetypeData[f5_local9[0x920D140D70ABEEC]].widget_func_required = f5_local10[0xC01DC7BD7351CD0] or false
			ScriptedWidget.ArchetypeData[f5_local9[0x920D140D70ABEEC]].omnvar_handler = f5_local10[0x39C34B2629FB0A5] or "data"
			ScriptedWidget.ArchetypeData[f5_local9[0x920D140D70ABEEC]].fields = {}
			local f5_local7 = 0
			for f5_local4, f5_local5 in pairs( f5_local10[0x90E596D24847EDC] ) do
				ScriptedWidget.ArchetypeData[f5_local9[0x920D140D70ABEEC]].fields[f5_local5[0xD562ECFDAB260AB]] = {}
				ScriptedWidget.ArchetypeData[f5_local9[0x920D140D70ABEEC]].fields[f5_local5[0xD562ECFDAB260AB]].max_value = math.max( f5_local5[0x41CB8AE2877AE1B], f5_local5[0xC5F52B9DE20EE6D] )
				ScriptedWidget.ArchetypeData[f5_local9[0x920D140D70ABEEC]].fields[f5_local5[0xD562ECFDAB260AB]].step_increment = f5_local5[0xC5F52B9DE20EE6D]
				ScriptedWidget.ArchetypeData[f5_local9[0x920D140D70ABEEC]].fields[f5_local5[0xD562ECFDAB260AB]].bits = math.ceil( math.log( ScriptedWidget.ArchetypeData[f5_local9[0x920D140D70ABEEC]].fields[f5_local5[0xD562ECFDAB260AB]].max_value / f5_local5[0xC5F52B9DE20EE6D] + 1 ) / math.log( 2 ) )
				ScriptedWidget.ArchetypeData[f5_local9[0x920D140D70ABEEC]].fields[f5_local5[0xD562ECFDAB260AB]].shift = f5_local7
				f5_local7 = f5_local7 + ScriptedWidget.ArchetypeData[f5_local9[0x920D140D70ABEEC]].fields[f5_local5[0xD562ECFDAB260AB]].bits
				assert( f5_local7 <= 32, "Too many bits required for widget archetype <" .. f5_local9[0x920D140D70ABEEC] .. ">.  Reduce the max values ( or increase the step increments ) of some of its fields" )
			end
		end
	end
end

ScriptedWidget.InitAnchors = function ( f4_arg0 )
	ScriptedWidget.AnchorSettings = {}
	if f4_arg0 then
		for f4_local3, f4_local4 in pairs( f4_arg0 ) do
			ScriptedWidget.AnchorSettings[f4_local3] = Engine[0x6093D047200548]( "scriptedwidgetanchorsettings:" .. f4_local4[0x9A0FA84C0ACFD94] )
		end
	end
end

ScriptedWidget.Init = function ( f1_arg0, f1_arg1, f1_arg2, f1_arg3, f1_arg4 )
	ScriptedWidget.container = f1_arg0
	local f1_local0 = Engine[0x6093D047200548]( "scriptedwidgetslist:" .. f1_arg2 )
	if not f1_local0 then
		f1_local0 = {
			[0x339FFCE052E94BA] = 0,
			[0xF2A4DD4A17F2F59] = {}
		}
	end
	ScriptedWidget.InitScriptedWidgets( f1_local0 )
	ScriptedWidget.InitArchetypes( f1_local0[0xD82302D6741E82D] )
	ScriptedWidget.InitAnchors( f1_local0[0x987969365F36F85] )
	f1_arg0.ScriptedWidgets = {}
	f1_arg0.ActiveTypes = {}
	f1_arg0:SetNotifyOnLayoutInit( true )
	f1_arg0:addEventHandler( "layout_initialized", function ( f2_arg0, f2_arg1 )
		local f2_local0 = LUI.HudManager.GetInstance()
		f2_local0 = f2_local0.activeHud
		if not f2_local0 then
			
		else
			
		end
		f2_local0.initialized = false
		for f2_local1 = 0, ScriptedWidget.max_widgets - 1, 1 do
			f1_arg0:registerOmnvarHandler( ScriptedWidget.omnvar_prefix .. "type_" .. f2_local1, function ( f3_arg0, f3_arg1 )
				ScriptedWidget.CreateOrDeleteScriptedWidget( f3_arg0, f3_arg1, f2_arg0 )
			end )
			local f2_local4 = Game[0x28624DEF6F708C8]( f1_arg0, ScriptedWidget.omnvar_prefix .. "type_" .. f2_local1 )
			if 0 <= f2_local4 then
				ScriptedWidget.CreateOrDeleteScriptedWidget( f1_arg0, {
					value = f2_local4,
					controller = f1_arg0
				}, f2_local1 )
			end
		end
		local f2_local1 = LUI.HudManager.GetInstance()
		f2_local1.activeHud.initialized = true
	end )
end

