-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 17-11-2025 01:21
LUI.FlowManager = LUI.Class( LUI.UIElement )
PushAndPopsTable = {}
DisableLetterbox = {}
DisableMousePointer = {}
FenceGroups = {}
SavedMenuStates = {}
AlwaysVisible = {}
PresetStacks = {}
IgnoreFollowHostCallbacks = {}
PartyUIRoot = {
	GAMEMODE_SP_MENUS_START = 4,
	BR_TRIALS = 14,
	BR_MAIN_MENU = 22,
	GAMEMODE_MP_MENUS_START = 7,
	TOURNAMENT_LOADING = 17,
	MP_PRIVATE_TOURNAMENT_LOBBY = 16,
	MP_MAIN_MENU = 8,
	GAMEMODE_CP_MENUS_END = 33,
	TOURNAMENT_MATCHMAKING = 18,
	GAMEMODE_NONE_MENUS_START = 1,
	GAME_BATTLES_MATCH = 15,
	CP_SYSTEM_LINK_LOBBY = 32,
	GAMEMODE_CP_MENUS_START = 27,
	GAMEMODE_WZ_MENUS_START = 34,
	SP_MAIN_MENU = 5,
	MP_SYSTEM_LINK_LOBBY = 12,
	WZ_TOURNAMENT_MATCHMAKING = 36,
	WZ_TOURNAMENT_BRACKET = 37,
	LAST = 43,
	CP_PRIVATE_MATCH = 29,
	WZ_LFP_LOBBY = 39,
	MP_SYSTEM_LINK = 11,
	MP_TRIALS = 13,
	LOADOUT_SELECT_MENU = 20,
	MP_TRIAL_EVENT = 41,
	CP_PUBLIC_MATCH_LOBBY = 30,
	GAMEMODE_NONE_MENUS_END = 3,
	BATTLE_ROYALE_MENU_TUTORIAL = 24,
	GAMEMODE_SP_MENUS_END = 6,
	MP_PUBLIC_MATCH_LOBBY = 10,
	FREE = 0,
	MP_PRIVATE_MATCH = 9,
	BATTLE_ROYALE_MENU_PUBLIC_LOBBY = 23,
	TOURNAMENT_BRACKET = 19,
	GAMEMODE_MP_MENUS_END = 26,
	GAMEMODE_WZ_MENUS_END = 40,
	WZ_PRIVATE_MATCH_LOBBY = 38,
	MAIN_MENU = 2,
	WZ_TOURNAMENT_LOADING = 35,
	BR_TRIAL_EVENT = 42,
	CP_MAIN_MENU = 28,
	CP_SYSTEM_LINK = 31,
	BATTLE_ROYALE_MENU = 21,
	PAYBACK_ONBOARDING_LOBBY = 25
}
BR_MENUS_START = PartyUIRoot.BATTLE_ROYALE_MENU
BR_MENUS_END = PartyUIRoot.PAYBACK_ONBOARDING_LOBBY
LUI.FlowManager.FlowMenus = {
	[PartyUIRoot.MAIN_MENU] = "MainMenu",
	[PartyUIRoot.SP_MAIN_MENU] = "CampaignMenu",
	[PartyUIRoot.MP_MAIN_MENU] = "MPMainMenu",
	[PartyUIRoot.MP_PRIVATE_MATCH] = "PrivateMatchLobby",
	[PartyUIRoot.MP_PUBLIC_MATCH_LOBBY] = "MPPublicLobby",
	[PartyUIRoot.MP_SYSTEM_LINK] = "MPSystemLinkMenu",
	[PartyUIRoot.MP_SYSTEM_LINK_LOBBY] = "MPSystemLinkLobby",
	[PartyUIRoot.MP_TRIALS] = "TrialsMP",
	[PartyUIRoot.BR_TRIALS] = "TrialsBR",
	[PartyUIRoot.GAME_BATTLES_MATCH] = "GameBattlesMatchLobby",
	[PartyUIRoot.MP_PRIVATE_TOURNAMENT_LOBBY] = "PrivateTournamentLobby",
	[PartyUIRoot.TOURNAMENT_LOADING] = "TournamentLoadingScreen",
	[PartyUIRoot.TOURNAMENT_MATCHMAKING] = "TournamentMatchmaking",
	[PartyUIRoot.TOURNAMENT_BRACKET] = "ArenaTournament",
	[PartyUIRoot.LOADOUT_SELECT_MENU] = "<disabled>",
	[PartyUIRoot.BATTLE_ROYALE_MENU] = "BattleRoyale",
	[PartyUIRoot.BR_MAIN_MENU] = "BRMainMenu",
	[PartyUIRoot.BATTLE_ROYALE_MENU_PUBLIC_LOBBY] = "BRPublicLobby",
	[PartyUIRoot.BATTLE_ROYALE_MENU_TUTORIAL] = "LobbyWarzoneTutorial",
	[PartyUIRoot.CP_MAIN_MENU] = "CPMainMenu",
	[PartyUIRoot.CP_PRIVATE_MATCH] = "CPPrivateMatchLobby",
	[PartyUIRoot.CP_PUBLIC_MATCH_LOBBY] = "CPPublicMatchMenu",
	[PartyUIRoot.CP_SYSTEM_LINK] = "CPSystemLinkMenu",
	[PartyUIRoot.CP_SYSTEM_LINK_LOBBY] = "CPSystemLinkLobby",
	[PartyUIRoot.PAYBACK_ONBOARDING_LOBBY] = "PayBackOnBoardingLobby",
	[PartyUIRoot.WZ_TOURNAMENT_LOADING] = "WZTournamentLoadingScreen",
	[PartyUIRoot.WZ_TOURNAMENT_MATCHMAKING] = "WZTournamentMatchmaking",
	[PartyUIRoot.WZ_TOURNAMENT_BRACKET] = "WZArenaTournament",
	[PartyUIRoot.WZ_PRIVATE_MATCH_LOBBY] = "WarzonePrivateMatchLobby",
	[PartyUIRoot.MP_TRIAL_EVENT] = "TrialEventMP",
	[PartyUIRoot.BR_TRIAL_EVENT] = "TrialEventBR"
}
LUI.FlowManager.IgnoreFollowHostMenus = {
	OperatorShowcase = true,
	LoadoutSelect = true,
	Gunsmith = true,
	BundleLockerMenu = true,
	LeaderboardMenu = true,
	SeasonalEventChallengeTabsMenu = true,
	PCAchievementsMenu = true,
	EmblemSelectMenu = true,
	PlayerCardFrameSelect = true,
	OptionsMenuNewLayout = true,
	PlayerCardSelect = true,
	BarracksRecords = true,
	BarracksChallengesDailyContainer = true,
	ProgressionMenu = true,
	VehicleSelect = true,
	AttachmentSelect = true,
	StoreBundlePreview = true,
	SeasonalProgressionMenu = true,
	BRMainMenu = true,
	FieldUpgrades = true,
	WatchSelect = true,
	WeaponLocker = true,
	RadialCustomizationMenu = true,
	WeaponPreview = true,
	WeaponPreviewFilm = true,
	BarracksCustomize = true,
	WeaponSelect = true,
	WZBarracksChallengesSelectionMenu = true,
	MasterChallengesMenu = true,
	PlayerTitleSelect = true,
	OperatorCustomization = true
}
LUI.FlowManager.RegisterStackPushBehaviour = function ( f115_arg0, f115_arg1 )
	assert( f115_arg1 )
	PushAndPopsTable[f115_arg0] = PushAndPopsTable[f115_arg0] or {}
	local f115_local0 = PushAndPopsTable[f115_arg0]
	f115_local0.pushFuncs = f115_local0.pushFuncs or {}
	table.insert( f115_local0.pushFuncs, f115_arg1 )
end

LUI.FlowManager.RegisterStackPopBehaviour = function ( f114_arg0, f114_arg1 )
	assert( f114_arg1 )
	PushAndPopsTable[f114_arg0] = PushAndPopsTable[f114_arg0] or {}
	local f114_local0 = PushAndPopsTable[f114_arg0]
	f114_local0.popFuncs = f114_local0.popFuncs or {}
	table.insert( f114_local0.popFuncs, f114_arg1 )
end

LUI.FlowManager.RegisterFenceGroup = function ( f113_arg0, f113_arg1 )
	assert( not FenceGroups[f113_arg0] )
	FenceGroups[f113_arg0] = f113_arg1
end

LUI.FlowManager.DisableLetterboxForMenu = function ( f112_arg0 )
	DisableLetterbox[f112_arg0] = true
end

LUI.FlowManager.AlwaysVisibleForMenu = function ( f111_arg0 )
	AlwaysVisible[f111_arg0] = true
end

LUI.FlowManager.RequestSetStack = function ( f110_arg0, f110_arg1 )
	assert( type( f110_arg0 ) == "string" )
	assert( type( f110_arg1 ) == "table" )
	PresetStacks[f110_arg0] = f110_arg1
end

LUI.FlowManager.DisableMousePointerForMenu = function ( f109_arg0 )
	DisableMousePointer[f109_arg0] = true
end

LUI.FlowManager.GetPerControllerPersistentData = function ( f108_arg0 )
	if not LUI.FlowManager._persistentData then
		LUI.FlowManager._persistentData = {}
	end
	if not LUI.FlowManager._persistentData[f108_arg0] then
		LUI.FlowManager._persistentData[f108_arg0] = {}
	end
	return LUI.FlowManager._persistentData[f108_arg0]
end

LUI.FlowManager.GetScopedData = function ( f107_arg0 )
	local f107_local0 = type( f107_arg0 )
	local f107_local1 = assert
	local f107_local2
	if f107_local0 ~= "string" and f107_local0 ~= "userdata" then
		f107_local2 = false
	else
		f107_local2 = true
	end
	f107_local1( f107_local2 )
	f107_local1 = Engine.DBFFAEEFGJ()
	local f107_local3 = assert
	local f107_local4
	if f107_local1 then
		f107_local4 = f107_local1
	else
		f107_local4 = f107_local1.flowManager
	end
	f107_local3( f107_local4 )
	f107_local3 = f107_local1.flowManager
	if f107_local0 == "string" then
		return f107_local3:GetScopedDataFromMenuName( f107_arg0 )
	elseif f107_local0 == "userdata" then
		return f107_local3:GetScopedDataFromElement( f107_arg0 )
	else
		
	end
end

LUI.FlowManager.RequestAddMenu = function ( f106_arg0, f106_arg1, f106_arg2, f106_arg3, f106_arg4, f106_arg5 )
	assert( type( f106_arg0 ) == "string" )
	local f106_local0 = {
		name = "addmenu",
		menu = f106_arg0,
		exclusiveController = f106_arg1,
		controller = f106_arg2,
		replaceTop = f106_arg3,
		immediate = f106_arg5,
		data = f106_arg4
	}
	local f106_local1 = Engine.DBFFAEEFGJ()
	LUI.UIRoot.BlockButtonInput( f106_local1, true, "RequestAddMenu " .. f106_arg0 )
	LUI.UIRoot.ProcessEvent( f106_local1, f106_local0 )
end

LUI.FlowManager.RequestSocialPopup = function ( f105_arg0 )
	LUI.FlowManager.RequestPopupMenu( nil, "ManagePartyPopup", true, controllerIndex, false, {
		disableQuickAccessShortcuts = false,
		controllerIndex = controllerIndex,
		areWeHost = FRIENDS.AreWeHost( Friends.BJDEIGDDCD() ),
		defaultTabFocus = FRIENDS.ManagePartyTabIDs.PARTY_INVITATIONS,
		menuTitle = Engine.CBBHFCGDIC( "LUA_MENU/SOCIAL_TITLE" ),
		inviteTabTitle = Engine.CBBHFCGDIC( "LUA_MENU/INVITE_TO_GAME" ),
		hasUsedShortcut = f105_arg0
	} )
end

LUI.FlowManager.RequestPopupMenu = function ( f104_arg0, f104_arg1, f104_arg2, f104_arg3, f104_arg4, f104_arg5, f104_arg6, f104_arg7, f104_arg8 )
	assert( f104_arg1 )
	local f104_local0 = {
		name = "popupmenu",
		menu = f104_arg1
	}
	if (f104_arg1 == "onboardingpopup" or f104_arg1 == "BattlePassOnboardingPopup") and CONDITIONS.IsQABotSkipActive() then
		return 
	end
	f104_local0.isModal = f104_arg7
	f104_local0.exclusiveController = f104_arg2
	f104_local0.controller = f104_arg3
	f104_local0.replaceTop = f104_arg4
	f104_local0.data = f104_arg5
	if f104_arg8 ~= nil then
		f104_local0.immediate = f104_arg8
	else
		f104_local0.immediate = true
	end
	local f104_local1 = Engine.DBFFAEEFGJ()
	LUI.UIRoot.BlockButtonInput( f104_local1, true, "RequestPopupMenu " .. f104_arg1 )
	LUI.UIRoot.ProcessEvent( f104_local1, f104_local0 )
end

LUI.FlowManager.RequestErrorPopup = function ( f103_arg0, f103_arg1 )
	if not LUI.FlowManager.IsInStack( "generic_error_popup" ) then
		local f103_local0 = Engine.DBFFAEEFGJ()
		local f103_local1 = assert
		local f103_local2
		if f103_local0 then
			f103_local2 = f103_local0
		else
			f103_local2 = f103_local0.flowManager
		end
		f103_local1( f103_local2 )
		local f103_local3 = f103_local0.flowManager._controllerIndex
		if not f103_local3 then
			f103_local3 = Engine.IJEBHJIJF()
		end
		LUI.FlowManager.RequestPopupMenu( nil, "generic_error_popup", true, f103_local3, false, {
			controllerIndex = f103_local3,
			title = Engine.CBBHFCGDIC( f103_arg0 ),
			message = Engine.CBBHFCGDIC( f103_arg1 )
		} )
	end
end

LUI.FlowManager.RequestDevErrorPopup = function ( f102_arg0, f102_arg1 )
	if CONDITIONS.IsDevelopmentBuild() and not LUI.FlowManager.IsInStack( "generic_error_popup" ) then
		local f102_local0 = Engine.DBFFAEEFGJ()
		local f102_local1 = assert
		local f102_local2
		if f102_local0 then
			f102_local2 = f102_local0
		else
			f102_local2 = f102_local0.flowManager
		end
		f102_local1( f102_local2 )
		local f102_local3 = f102_local0.flowManager._controllerIndex
		if not f102_local3 then
			f102_local3 = Engine.IJEBHJIJF()
		end
		LUI.FlowManager.RequestPopupMenu( nil, "generic_error_popup", true, f102_local3, false, {
			controllerIndex = f102_local3,
			title = f102_arg0,
			message = f102_arg1
		} )
	end
end

LUI.FlowManager.RequestLeaveMenu = function ( f101_arg0, f101_arg1, f101_arg2 )
	local f101_local0 = {
		name = "leavemenu",
		element = f101_arg0,
		immediate = f101_arg1,
		blockSound = f101_arg2
	}
	local f101_local1 = Engine.DBFFAEEFGJ()
	LUI.UIRoot.BlockButtonInput( f101_local1, true, "RequestLeaveMenu" )
	LUI.UIRoot.ProcessEvent( f101_local1, f101_local0 )
end

LUI.FlowManager.RequestLeaveMenuByName = function ( f100_arg0, f100_arg1, f100_arg2 )
	assert( f100_arg0 )
	local f100_local0 = {
		name = "leavemenu",
		menu = f100_arg0,
		immediate = f100_arg1,
		blockSound = f100_arg2
	}
	LUI.UIRoot.BlockButtonInput( Engine.DBFFAEEFGJ(), true, "RequestLeaveMenuByName " .. f100_arg0 )
	local f100_local1 = Engine.DBFFAEEFGJ()
	f100_local1:processEvent( f100_local0 )
end

LUI.FlowManager.RequestLeaveMenuByNameWithController = function ( f99_arg0, f99_arg1, f99_arg2, f99_arg3 )
	assert( f99_arg0 )
	local f99_local0 = {
		name = "leavemenu",
		menu = f99_arg0,
		immediate = f99_arg2,
		blockSound = f99_arg3,
		managerControllerIndex = f99_arg1
	}
	LUI.UIRoot.BlockButtonInput( Engine.DBFFAEEFGJ(), true, "RequestLeaveMenuByName " .. f99_arg0 )
	local f99_local1 = Engine.DBFFAEEFGJ()
	f99_local1:processEvent( f99_local0 )
end

LUI.FlowManager.RequestRestoreMenu = function ( f98_arg0, f98_arg1, f98_arg2 )
	local f98_local0 = {
		name = "restoreMenu",
		menu = f98_arg0,
		immediate = true,
		exclusiveController = f98_arg1,
		controller = f98_arg2
	}
	local f98_local1 = Engine.DBFFAEEFGJ()
	LUI.UIRoot.BlockButtonInput( f98_local1, true, "RequestRestoreMenu" )
	LUI.UIRoot.ProcessEvent( f98_local1, f98_local0 )
end

LUI.FlowManager.RequestCloseAllMenus = function ( f97_arg0, f97_arg1, f97_arg2 )
	LUI.UIRoot.ProcessEvent( Engine.DBFFAEEFGJ(), {
		name = "closeallmenus"
	} )
	if f97_arg0 then
		METRICS.RecordInGameDismissMenuUsage( f97_arg2, f97_arg0, f97_arg1 )
	end
end

LUI.FlowManager.RequestResumeMovement = function ( f96_arg0, f96_arg1, f96_arg2 )
	LUI.UIRoot.ProcessEvent( Engine.DBFFAEEFGJ(), {
		name = "resumemovement"
	} )
end

LUI.FlowManager.IsInStack = function ( f95_arg0 )
	local f95_local0 = Engine.DBFFAEEFGJ()
	local f95_local1 = assert
	local f95_local2
	if f95_local0 then
		f95_local2 = f95_local0
	else
		f95_local2 = f95_local0.flowManager
	end
	f95_local1( f95_local2 )
	return f95_local0.flowManager:StackContains( f95_arg0 )
end

LUI.FlowManager.IsAnyInStack = function ( f94_arg0 )
	local f94_local0 = Engine.DBFFAEEFGJ()
	local f94_local1 = assert
	local f94_local2
	if f94_local0 then
		f94_local2 = f94_local0
	else
		f94_local2 = f94_local0.flowManager
	end
	f94_local1( f94_local2 )
	return f94_local0.flowManager:StackContainsAny( f94_arg0 )
end

local f0_local0 = function ( f93_arg0 )
	if SavedMenuStates[f93_arg0] == nil then
		SavedMenuStates[f93_arg0] = {}
	end
	return SavedMenuStates[f93_arg0]
end

LUI.FlowManager.ClearSavedMenuStatesByControllerIndex = function ( f92_arg0, f92_arg1 )
	local f92_local0 = f0_local0( f92_arg0 )
	if f92_arg1 then
		f92_local0[f92_arg1] = nil
	end
end

LUI.FlowManager.IsTopMenuModal = function ()
	local f91_local0 = Engine.DBFFAEEFGJ()
	local f91_local1 = assert
	local f91_local2
	if f91_local0 then
		f91_local2 = f91_local0
	else
		f91_local2 = f91_local0.flowManager
	end
	f91_local1( f91_local2 )
	f91_local1 = f91_local0.flowManager.menuInfoStack
	local f91_local3 = f91_local1[#f91_local1]
	if f91_local3 then
		f91_local2 = f91_local3
	else
		f91_local2 = f91_local3.isModal
	end
	return f91_local2
end

LUI.FlowManager.IsMenuOnTop = function ( f90_arg0 )
	local f90_local0 = Engine.DBFFAEEFGJ()
	local f90_local1 = assert
	local f90_local2
	if f90_local0 then
		f90_local2 = f90_local0
	else
		f90_local2 = f90_local0.flowManager
	end
	f90_local1( f90_local2 )
	f90_local1 = f90_local0.flowManager:GetStackTop()
	local f90_local3
	if f90_local1 then
		f90_local3 = f90_local1
	else
		f90_local3 = f90_local1.name == f90_arg0
	end
	return f90_local3
end

LUI.FlowManager.GetCurrentMenu = function ( f89_arg0 )
	local f89_local0 = Engine.DBFFAEEFGJ()
	local f89_local1 = assert
	local f89_local2
	if f89_local0 then
		f89_local2 = f89_local0
	else
		f89_local2 = f89_local0.flowManager
	end
	f89_local1( f89_local2 )
	if f89_arg0:getParent() then
		
	else
		
	end
	assert( "Error getting current menu. Most likely, the element has not been added to a menu yet." )
end

LUI.FlowManager.GetVisibleMenu = function ()
	local f88_local0 = Engine.DBFFAEEFGJ()
	assert( f88_local0 )
	local f88_local1 = f88_local0.flowManager
	if f88_local1 and f88_local1.menuInfoStack then
		local f88_local2 = f88_local1.menuInfoStack[#f88_local1.menuInfoStack]
		if f88_local2 and f88_local2.menu then
			return f88_local2.menu
		end
	end
end

LUI.FlowManager.GetMenuNameAtIndex = function ( f87_arg0 )
	local f87_local0 = Engine.DBFFAEEFGJ()
	assert( f87_local0 )
	local f87_local1 = f87_local0.flowManager
	local f87_local2 = f87_local1.menuInfoStack
	if f87_arg0 < 0 then
		f87_arg0 = #f87_local2 + f87_arg0
	end
	assert( f87_local1.menuInfoStack[f87_arg0] )
	return f87_local1.menuInfoStack[f87_arg0].name
end

LUI.FlowManager.GetAllMenuNames = function ()
	local f86_local0 = Engine.DBFFAEEFGJ()
	assert( f86_local0 )
	local f86_local1 = f86_local0.flowManager
	local f86_local2 = nil
	if f86_local1 and f86_local1.menuInfoStack then
		for f86_local3 = #f86_local1.menuInfoStack, 1, -1 do
			local f86_local6 = f86_local1.menuInfoStack[f86_local3].name
			if f86_local6 and f86_local6 ~= "" then
				if f86_local3 == #f86_local1.menuInfoStack and not f86_local6 then
					f86_local2 = f86_local6
				else
					f86_local2 = f86_local2 .. ";" .. f86_local6
				end
			end
		end
	end
	return f86_local2
end

LUI.FlowManager.GetMenuByName = function ( f85_arg0 )
	local f85_local0 = Engine.DBFFAEEFGJ()
	assert( f85_local0 )
	local f85_local1 = f85_local0.flowManager
	if f85_local1 and f85_local1.menuInfoStack then
		for f85_local2 = #f85_local1.menuInfoStack, 1, -1 do
			local f85_local5 = f85_local1.menuInfoStack[f85_local2]
			if f85_arg0 == f85_local5.name then
				return f85_local5
			end
		end
	end
end

function SaveMenuStack( f84_arg0 )
	assert( f84_arg0 )
	assert( f84_arg0.flowManager )
	local f84_local0 = {}
	for f84_local4, f84_local5 in ipairs( f84_arg0.flowManager.menuInfoStack ) do
		table.insert( f84_local0, CreateMenuInfoSaveData( f84_local5 ) )
	end
	return mobdebug.dump( f84_local0, {
		sparse = false
	} )
end

function RestoreMenuStack( f83_arg0, f83_arg1 )
	assert( f83_arg0 )
	assert( f83_arg0.flowManager )
	assert( f83_arg1 )
	local f83_local0 = f83_arg0.flowManager
	f83_local0:closeAllMenus()
	local f83_local1, f83_local2 = loadstring( f83_arg1 )
	if f83_local1 then
		local f83_local3, f83_local4 = pcall( f83_local1 )
		for f83_local8, f83_local9 in ipairs( f83_local4 ) do
			local f83_local10 = f83_local9.name
			assert( f83_local10 )
			if FenceGroups[f83_local10] then
				f83_local9.fenceGroup = LUI.FenceGroup.new( FenceGroups[f83_local10], f83_local9.controller, f83_local9.buildData )
			end
			f83_local9.scopedData = MakeScopedDataForMenuInfo( f83_local9 )
			f83_local0:PushMenuInfo( f83_local9 )
		end
	end
	f83_arg0:TryAddMouseCursor()
end

function IsMenuInStack( f82_arg0, f82_arg1 )
	assert( f82_arg0 )
	local f82_local0 = f82_arg0.flowManager
	if not f82_local0 then
		return false
	else
		return f82_local0:StackContains( f82_arg1 )
	end
end

function IsMenuOpenAndVisible( f81_arg0, f81_arg1 )
	assert( f81_arg0 )
	local f81_local0 = f81_arg0.flowManager
	if not f81_local0 then
		return false
	elseif f81_local0.menuInfoStack then
		for f81_local4, f81_local5 in ipairs( f81_local0.menuInfoStack ) do
			if f81_local5.name == f81_arg1 and f81_local5.menu ~= nil then
				return true
			end
		end
	end
	return false
end

function AnyActiveMenusInStack( f80_arg0 )
	assert( f80_arg0 )
	local f80_local0 = f80_arg0.flowManager
	if not f80_local0 then
		return false
	elseif f80_local0.menuInfoStack then
		for f80_local4, f80_local5 in ipairs( f80_local0.menuInfoStack ) do
			if f80_local5.menu then
				return true
			end
		end
	end
	return false
end

function GetVisibleMenu( f79_arg0 )
	assert( f79_arg0 )
	local f79_local0 = f79_arg0.flowManager
	if not f79_local0 then
		return ""
	elseif f79_local0.menuInfoStack then
		local f79_local1 = f79_local0.menuInfoStack[#f79_local0.menuInfoStack]
		if f79_local1 and f79_local1.menu then
			if f79_local1.menu.id then
				return f79_local1.menu.id
			elseif f79_local1.menu.name then
				return f79_local1.menu.name
			end
		end
	end
	return ""
end

function GetAllMenuNames()
	local f78_local0 = Engine.DBFFAEEFGJ()
	assert( f78_local0 )
	local f78_local1 = f78_local0.flowManager
	local f78_local2 = nil
	if f78_local1 and f78_local1.menuInfoStack then
		for f78_local3 = #f78_local1.menuInfoStack, 1, -1 do
			local f78_local6 = f78_local1.menuInfoStack[f78_local3].name
			if f78_local6 and f78_local6 ~= "" then
				if f78_local3 == #f78_local1.menuInfoStack and not f78_local6 then
					f78_local2 = f78_local6
				else
					f78_local2 = f78_local2 .. ";" .. f78_local6
				end
			end
		end
	end
	return f78_local2
end

function GetLuiStreamerInfo( f77_arg0, f77_arg1 )
	if f77_arg0 and f77_arg0:getFirstChild() then
		
	else
		
	end
end

function GetLuiImageStreamersInfo()
	local f76_local0 = Engine.DBFFAEEFGJ()
	assert( f76_local0 )
	local f76_local1 = {
		value = nil
	}
	local f76_local2 = f76_local0.flowManager
	if f76_local2 and f76_local2.menuInfoStack then
		for f76_local3 = #f76_local2.menuInfoStack, 1, -1 do
			local f76_local6 = f76_local2.menuInfoStack[f76_local3]
			GetLuiStreamerInfo( f76_local6.menu, f76_local1 )
			f76_local1.value = ";" .. f76_local6.name .. ": " .. f76_local1.value .. ";"
		end
	end
	return f76_local1.value
end

function PrintLuiStreamedImageInfo( f75_arg0, f75_arg1 )
	if f75_arg0 and f75_arg0:getFirstChild() then
		
	else
		
	end
end

function GetLuiStreamedImageList( f74_arg0 )
	local f74_local0 = Engine.DBFFAEEFGJ()
	assert( f74_local0 )
	if f74_local0:getFirstChild() then
		
	else
		
	end
end

function GetAttachmentsReference( f73_arg0 )
	if CONDITIONS.InGame() then
		local f73_local0 = ""
		local f73_local1 = Game.EBGCIIBJHA( f73_arg0, true )
		if f73_local1 and 0 < #f73_local1 then
			for f73_local2 = 1, #f73_local1, 1 do
				if f73_local1[f73_local2].ref then
					local f73_local5 = f73_local1[f73_local2].ref
					local f73_local6 = f73_local1[f73_local2].variantID
					if f73_local6 and 0 < f73_local6 then
						f73_local5 = f73_local5 .. "|" .. f73_local6
					end
					if f73_local0 ~= "" then
						local f73_local7 = f73_local0 .. ";" .. f73_local5
						if not f73_local7 then
							f73_local0 = f73_local7
						else
							f73_local0 = f73_local5
						end
					end
					f73_local0 = f73_local5
				end
			end
			return f73_local0
		end
	end
	return ""
end

function GetFrontsceneWeaponModelName( f72_arg0 )
	if Engine.DDJFBBJAIG() then
		local f72_local0 = f72_arg0.flowManager
		if f72_local0 and f72_local0.menuInfoStack then
			local f72_local1 = f72_local0.menuInfoStack[#f72_local0.menuInfoStack]
			if f72_local1 and f72_local1.menu and f72_local1.menu.id == "AttachmentSelect" then
				local f72_local2 = LUI.FlowManager.GetScopedData( f72_local1.menu )
				if f72_local2.loadoutIndex then
					local f72_local3 = ""
					local f72_local4 = PlayerData.BFFBGAJGD( Engine.IJEBHJIJF(), LOADOUT.GetLoadoutStatsGroup() )
					local f72_local5 = f72_local4.squadMembers.loadouts[f72_local2.loadoutIndex].weaponSetups[f72_local2.weaponSlot]
					return WEAPON.GetWeaponModelName( f72_local5.weapon:get(), WEAPON.GenerateWeaponTable( f72_local5 ), {
						includeStickers = true,
						includeCamos = true,
						includeAttachments = true
					} )
				end
			end
		end
	end
	return ""
end

function IsTopSignInMenu( f71_arg0 )
	assert( f71_arg0 )
	if not CONDITIONS.IsSplitScreenEnabled() then
		return false
	end
	local f71_local0 = f71_arg0.flowManager
	if not f71_local0 then
		return false
	end
	local f71_local1 = false
	if not LUI.UIRoot.IsButtonInputBlocked( f71_arg0 ) and f71_local0.menuInfoStack then
		local f71_local2 = f71_local0.menuInfoStack[#f71_local0.menuInfoStack]
		if f71_local2 and f71_local2.menu and f71_local2.menu.isSignInMenu then
			local f71_local3 = LUI.FlowManager.GetScopedData( f71_local2.menu )
			if f71_local3 and f71_local3.focusedPage and 2 < f71_local3.focusedPage then
				
			else
				f71_local1 = true
			end
		end
	end
	return f71_local1
end

function CanSignoutSplitscreenPlayer( f70_arg0 )
	assert( f70_arg0 )
	local f70_local0 = f70_arg0.flowManager
	local f70_local1 = false
	if not LUI.UIRoot.IsButtonInputBlocked( f70_arg0 ) and f70_local0.menuInfoStack then
		local f70_local2 = f70_local0.menuInfoStack[#f70_local0.menuInfoStack]
		if f70_local2 and f70_local2.menu and f70_local2.menu.signoutSplitscreen ~= false then
			f70_local1 = true
		end
	end
	return f70_local1
end

function IsTopLocalSignInMenu( f69_arg0 )
	return false
end

LUI.FlowManager.closeAllMenusHandler = function ( f68_arg0, f68_arg1 )
	f68_arg0:closeAllMenus()
end

LUI.FlowManager.restoreMenuHandler = function ( f67_arg0, f67_arg1 )
	f67_arg0:restoreMenu( f67_arg1 )
	LUI.UIRoot.BlockButtonInput( f67_arg0.root, false, "RestoreMenuHandler" )
end

LUI.FlowManager.addMenuHandler = function ( f66_arg0, f66_arg1 )
	f66_arg0:addMenu( f66_arg1 )
	LUI.UIRoot.BlockButtonInput( f66_arg0.root, false, "AddMenuHandler" )
end

LUI.FlowManager.popupMenuHandler = function ( f65_arg0, f65_arg1 )
	f65_arg1.isPopup = true
	f65_arg0:addMenuHandler( f65_arg1 )
end

LUI.FlowManager.leaveMenuHandler = function ( f64_arg0, f64_arg1 )
	f64_arg0:leaveMenu( f64_arg1 )
	LUI.UIRoot.BlockButtonInput( f64_arg0.root, false, "leaveMenu" )
end

LUI.FlowManager.resumeMovementHandler = function ( f63_arg0, f63_arg1 )
	f63_arg0:resumeMovement()
end

LUI.FlowManager.closeAllMenus = function ( f62_arg0 )
	for f62_local0 = #f62_arg0.menuInfoStack, 1, -1 do
		local f62_local3 = f62_arg0.menuInfoStack[f62_local0]
		if not AlwaysVisible[f62_local3.name] then
			f62_arg0:CloseMenuInfo( f62_local3, true, false )
			f62_arg0:RemoveMenuInfo( f62_local3 )
		end
	end
end

LUI.FlowManager.restoreMenu = function ( f61_arg0, f61_arg1 )
	local f61_local0 = nil
	if f61_arg1.menuId ~= nil then
		f61_arg1.menu = LUI.FlowManager.FlowMenus[f61_arg1.menuId]
	end
	if not f61_arg0.IsInStack( f61_arg1.menu ) then
		f61_arg0:addMenu( f61_arg1 )
		return 
	end
	local f61_local1 = f61_arg0:GetStackTop()
	if f61_local1 and f61_local1.name == f61_arg1.menu then
		return 
	end
	local f61_local2 = nil
	for f61_local3 = #f61_arg0.menuInfoStack, 1, -1 do
		local f61_local6 = f61_arg0.menuInfoStack[f61_local3]
		if not f61_local6.isModal then
			if f61_local6.name ~= f61_arg1.menu then
				f61_arg0:CloseMenuInfo( f61_local6, false, false )
				f61_arg0:RemoveMenuInfo( f61_local6 )
			end
		end
	end
	f61_arg0:RefreshStack()
end

LUI.FlowManager.addMenu = function ( f60_arg0, f60_arg1 )
	local f60_local0 = f60_arg1.menu
	local f60_local1 = f60_arg1.data
	if f60_local1 then
		f60_local1 = f60_arg1.data.bypassDuplicateMenuCheck
	end
	if f60_arg0:StackContains( f60_local0 ) and not f60_local1 then
		return 
	end
	local f60_local2 = f60_arg0.menuInfoStack[#f60_arg0.menuInfoStack]
	if f60_local2 and f60_arg1.replaceTop then
		f60_arg0:CloseMenuInfo( f60_local2, false, false )
		f60_arg0:RemoveMenuInfo( f60_local2 )
	end
	local f60_local3 = f60_arg0:CreateMenuInfo( f60_local0, f60_arg1.data, f60_arg1.exclusiveController, f60_arg1.controller )
	f60_local3.isPopup = f60_arg1.isPopup or f60_arg1.isModal
	f60_local3.isModal = f60_arg1.isModal
	f60_arg0:PushMenuInfo( f60_local3 )
	f60_arg0:RefreshStack()
end

LUI.FlowManager.leaveMenu = function ( f59_arg0, f59_arg1 )
	local f59_local0 = nil
	if f59_arg1.menuId ~= nil then
		f59_arg1.menu = LUI.FlowManager.FlowMenus[f59_arg1.menuId]
	end
	if f59_arg1.element or f59_arg1.menu then
		for f59_local1 = #f59_arg0.menuInfoStack, 1, -1 do
			local f59_local4 = f59_arg0.menuInfoStack[f59_local1]
			local f59_local5 = f59_arg1.element
			if f59_local5 then
				f59_local5 = f59_arg1.element:isDescendentOf( f59_local4.menu )
			end
			local f59_local6 = f59_arg1.menu
			if f59_local6 then
				f59_local6 = f59_local4.name == f59_arg1.menu
			end
			if f59_local5 or f59_local6 then
				f59_local0 = f59_local4
			end
		end
	else
		f59_local0 = f59_arg0:GetStackTop()
	end
	if not f59_local0 then
		return 
	end
	f59_arg0:CloseMenuInfo( f59_local0, false, false )
	f59_arg0:RemoveMenuInfo( f59_local0 )
	if not f59_local0.isModal and not f59_arg1.blockSound then
		Engine.BJDBIAGIDA( CoD.SFX.SelectBack )
	end
	f59_arg0:RefreshStack()
end

LUI.FlowManager.resumeMovement = function ( f58_arg0 )
	Engine.BGHJAGAJAB()
end

LUI.FlowManager.swapPartyUIRoot = function ( f57_arg0, f57_arg1, f57_arg2 )
	for f57_local4, f57_local5 in ipairs( f57_arg0.menuInfoStack ) do
		for f57_local3 = PartyUIRoot.GAMEMODE_MP_MENUS_START, PartyUIRoot.LAST, 1 do
			if LUI.FlowManager.FlowMenus[f57_local3] == f57_local5.name then
				f57_arg0:InsertMenuInfo( f57_local4, f57_arg1 )
				if f57_local5 == f57_arg0:GetTopMostOpenMenuInfo() then
					table.insert( f57_arg1.scopedData, "activeTabIndex" )
					f57_arg1.scopedData.activeTabIndex = f57_local5.menu.MPTabsMenu.Tabs:GetCurrentTabIndex()
					f57_arg0:OpenMenuInfo( f57_arg1 )
				end
				f57_arg0:CloseMenuInfo( f57_local5 )
				f57_arg0:RemoveMenuInfo( f57_local5 )
				return 
			end
		end
	end
end

LUI.FlowManager.GetScopedDataFromElement = function ( f56_arg0, f56_arg1 )
	if f56_arg1._scoped then
		return f56_arg1._scoped
	else
		local f56_local0 = f56_arg1:getParent()
		if not f56_local0 then
			DebugPrint( "Could not find scoped data for supplied LUI element, attempting to get scoped data from visible menu." )
			local f56_local1 = LUI.FlowManager.GetVisibleMenu()
			if f56_local1 then
				return f56_arg0:GetScopedDataFromElement( f56_local1 )
			else
				assert( false, "Could not find scoped data for supplied LUI element and there is no visible menu." )
				
			end
		else
			return f56_arg0:GetScopedDataFromElement( f56_local0 )
		end
	end
end

LUI.FlowManager.GetScopedDataFromMenuName = function ( f55_arg0, f55_arg1 )
	for f55_local0 = #f55_arg0.menuInfoStack, 1, -1 do
		local f55_local3 = f55_arg0.menuInfoStack[f55_local0]
		if f55_local3.name == f55_arg1 then
			return f55_local3.scopedData
		end
	end
	assert( false, "Could not find scoped data for menu named " .. f55_arg1 .. "." )
end

function CreateMenuInfoSaveData( f54_arg0 )
	local f54_local0 = {}
	for f54_local9, f54_local10 in pairs( f54_arg0 ) do
		if f54_local9 ~= "fenceGroup" and f54_local9 ~= "scopedData" then
			if f54_local9 == "menu" then
				
			end
			if f54_local9 == "buildData" then
				for f54_local7, f54_local8 in pairs( f54_local10 ) do
					if type( f54_local8 ) == "table" and f54_local8.__serializable == false then
						DebugPrint( "WARNING: Not saving buildData field \"" .. tostring( f54_local7 ) .. "\" for LUI Reload of menu \"" .. tostring( f54_arg0.name ) .. "\"" )
						f54_local10[f54_local7] = nil
					end
				end
			end
			f54_local0[f54_local9] = f54_local10
		end
	end
	return f54_local0
end

function MakeScopedDataForMenuInfo( f53_arg0 )
	local f53_local0 = {
		menuName = f53_arg0.name
	}
	for f53_local4, f53_local5 in pairs( f53_arg0.buildData ) do
		f53_local0[f53_local4] = f53_local5
	end
	if f53_arg0.controller then
		f53_local0.controllerIndex = f53_arg0.controller
		f53_local0.exclusiveController = f53_arg0.controller
		f53_local0.exclusiveControllerIndex = f53_arg0.controller
		f53_local0.isControllerExclusive = f53_arg0.isControllerExclusive
	end
	return f53_local0
end

LUI.FlowManager.CreateMenuInfo = function ( f49_arg0, f49_arg1, f49_arg2, f49_arg3, f49_arg4 )
	local f49_local0 = f49_arg0
	local f49_local1 = {
		name = f49_arg1
	}
	local f49_local2
	if not f49_arg2 then
		f49_local2 = f49_arg2
	else
		f49_local2 = {}
	end
	f49_local1.buildData = f49_local2
	f49_local1.controller = f49_arg4
	if not Engine.DDJFBBJAIG() then
		f49_local1.controller = f49_arg0:getRootController()
	elseif not f49_arg4 then
		DebugPrint( "Warning: opening menu \"" .. f49_arg1 .. "\" for unspecified controllerIndex, defaulting to 0" )
		f49_local1.controller = 0
	end
	if f49_arg4 == nil or f49_arg3 ~= true then
		f49_local2 = false
	else
		f49_local2 = true
	end
	f49_local1.isControllerExclusive = f49_local2
	f49_local1.scopedData = MakeScopedDataForMenuInfo( f49_local1 )
	if FenceGroups[f49_arg1] then
		f49_local1.fenceGroup = LUI.FenceGroup.new( FenceGroups[f49_arg1], f49_local1.controller, f49_local1.buildData )
		f49_local1.fenceGroup.OnPass = function ( f52_arg0 )
			
		end
		
		f49_local1.fenceGroup.OnBlock = function ( f51_arg0 )
			
		end
		
		f49_local1.fenceGroup.OnFail = function ( f50_arg0 )
			DebugPrint( "Fencegroup failed for " .. f49_arg0 )
			if f49_arg0:StackContains( f49_arg0 ) then
				for f50_local0 = #f49_arg0.menuInfoStack, 1, -1 do
					local f50_local3 = f49_arg0.menuInfoStack[f50_local0]
					f49_arg0:CloseMenuInfo( f50_local3, true, false )
					f49_arg0:RemoveMenuInfo( f50_local3 )
					if f50_local3.name == f49_arg0 then
						
					end
				end
			else
				DebugPrint( "WARNING: Attempted to fail fencegroup for " .. f49_arg0 .. " but " .. f49_arg0 .. " is not in the stack." )
			end
		end
		
	end
	return f49_local1
end

LUI.FlowManager.OpenMenuInfo = function ( f48_arg0, f48_arg1 )
	if f48_arg1.opening then
		return 
	end
	local f48_local0 = Engine.CFCAICIAJC()
	if Engine.DDJFBBJAIG() then
		PlayerData.DHIICCFFFD()
	end
	assert( not f48_arg1.menu )
	LUI.ActiveScoped = f48_arg1.scopedData
	f48_arg1.opening = true
	f48_arg1.menu = MenuBuilder.buildMenu( f48_arg1.name, f48_arg1.scopedData )
	f48_arg1.opening = false
	for f48_local4, f48_local5 in ipairs( f48_arg0.menuInfoStack ) do
		if f48_local5.menu then
			f48_local5.menu:setPriority( f48_local4 )
		end
	end
	f48_arg0:addElement( f48_arg1.menu )
	f48_arg1.menu:processEvent( {
		dispatchChildren = true,
		name = "menu_create",
		controller = f48_arg1.controller
	} )
	assert( f48_arg1.menu )
	if not Engine.CGABICJHAI() and not Engine.BFIHBCBIHJ() and not DisableLetterbox[f48_arg1.name] then
		f48_arg1.menu:setupLetterboxElement()
	end
	LUI.ActiveScoped = nil
	f48_local1 = Engine.CFCAICIAJC()
	if not Engine.CEJJDJJHIJ( 0, "lua_menu_info", {
		completed_menu = true,
		menu_name = f48_arg1.name,
		memory_delta_bytes = f48_local1 - f48_local0,
		init_free_bytes = f48_local0,
		post_free_bytes = f48_local1,
		in_game = Engine.DDJFBBJAIG()
	} ) then
		DebugPrint( "Failed to write to blackbox" )
	end
	f48_arg0:LogMenuChangeTo( f48_arg1.controller, f48_arg1.name )
end

LUI.FlowManager.CloseMenuInfo = function ( f47_arg0, f47_arg1, f47_arg2, f47_arg3 )
	local f47_local0 = f47_arg0._controllerIndex
	if not f47_local0 then
		f47_local0 = Engine.IJEBHJIJF()
	end
	local f47_local1 = f0_local0( f47_local0 )
	if not f47_arg3 then
		f47_local1[f47_arg1.name] = nil
	end
	if f47_arg1.menu then
		if f47_arg3 and not f47_local1[f47_arg1.name] then
			f47_local1[f47_arg1.name] = f47_arg1.menu:saveState()
		end
		if not f47_arg2 then
			f47_arg1.menu:processEvent( {
				name = "lose_focus"
			} )
			f47_arg1.menu:processEvent( {
				dispatchChildren = true,
				name = "menu_close",
				controller = f47_arg1.controller
			} )
		else
			f47_arg1.menu:processEvent( {
				dispatchChildren = true,
				name = "menu_close_all",
				controller = f47_arg1.controller
			} )
		end
		f47_arg1.menu:closeTree()
		f47_arg1.menu = nil
	end
end

LUI.FlowManager.GetStackVersion = function ( f46_arg0 )
	assert( f46_arg0.stackVersion )
	return f46_arg0.stackVersion
end

LUI.FlowManager.InsertMenuInfo = function ( f45_arg0, f45_arg1, f45_arg2 )
	assert( f45_arg2 )
	f45_arg0.stackVersion = f45_arg0.stackVersion + 1
	table.insert( f45_arg0.menuInfoStack, f45_arg1, f45_arg2 )
	if PushAndPopsTable[f45_arg2.name] and PushAndPopsTable[f45_arg2.name].pushFuncs and 0 < #PushAndPopsTable[f45_arg2.name].pushFuncs then
		for f45_local3, f45_local4 in ipairs( PushAndPopsTable[f45_arg2.name].pushFuncs ) do
			f45_local4()
		end
	end
	Engine.DHFEGHHHFH( true )
	if #f45_arg0.menuInfoStack == 1 then
		f45_arg0.root:processEvent( {
			name = "non_empty_menu_stack",
			controllerIndex = f45_arg0._controllerIndex
		} )
	end
	if CONDITIONS.IsDemoBuildOrDevBuildOrAreDevFeaturesEnabled() then
		f45_arg0:PrintStack()
	end
end

LUI.FlowManager.RemoveMenuInfo = function ( f44_arg0, f44_arg1 )
	assert( f44_arg1 )
	local f44_local0 = nil
	local f44_local1 = #f44_arg0.menuInfoStack
	if 1 <= f44_local1 and f44_arg0.menuInfoStack[f44_local1] ~= f44_arg1 then
		
	else
		
	end
	if 1 <= f44_local1 then
		if f44_arg1.fenceGroup then
			f44_arg1.fenceGroup:Abort()
		end
		if PushAndPopsTable[f44_arg1.name] and PushAndPopsTable[f44_arg1.name].popFuncs and 0 < #PushAndPopsTable[f44_arg1.name].popFuncs then
			for f44_local5, f44_local6 in ipairs( PushAndPopsTable[f44_arg1.name].popFuncs ) do
				f44_local6()
			end
		end
		f44_arg0.stackVersion = f44_arg0.stackVersion + 1
		table.remove( f44_arg0.menuInfoStack, f44_local1 )
	end
	if #f44_arg0.menuInfoStack == 0 then
		if Engine.CAADCDEEIA() and not Engine.DDJFBBJAIG() then
			ACTIONS.ResumeGame( f44_arg0 )
		end
		f44_arg0.root:processEvent( {
			name = "empty_menu_stack",
			controllerIndex = f44_arg0._controllerIndex
		} )
		f44_arg0.root:RemoveMouseCursor()
	end
	if Engine.BHICADFIHA() then
		f44_arg0:PrintStack()
	end
	Engine.DHFEGHHHFH( 0 < #f44_arg0.menuInfoStack )
end

LUI.FlowManager.PushMenuInfo = function ( f43_arg0, f43_arg1 )
	f43_arg0:SetStack( f43_arg1 )
	if f43_arg1.isModal then
		f43_arg0:InsertMenuInfo( #f43_arg0.menuInfoStack + 1, f43_arg1 )
	else
		local f43_local0 = #f43_arg0.menuInfoStack + 1
		if 1 < f43_local0 and f43_arg0.menuInfoStack[f43_local0 - 1].isModal then
			
		else
			
		end
		f43_arg0:InsertMenuInfo( f43_local0, f43_arg1 )
	end
end

LUI.FlowManager.SetStack = function ( f42_arg0, f42_arg1 )
	assert( f42_arg1.name )
	local f42_local0 = PresetStacks[f42_arg1.name]
	if not f42_local0 then
		return 
	end
	local f42_local1 = f42_arg1.controller
	DebugPrint( "FlowManager: Rewriting menu stack for " .. f42_arg1.name )
	if Engine.BHICADFIHA() then
		local f42_local2 = ""
		for f42_local7, f42_local8 in ipairs( f42_arg0.menuInfoStack ) do
			local f42_local9 = f42_local2
			local f42_local6
			if 1 < f42_local7 then
				f42_local6 = " > "
			else
				f42_local6 = ""
			end
			f42_local2 = f42_local9 .. f42_local6 .. f42_local8.name
		end
		DebugPrint( "    Current stack: " .. f42_local2 )
		f42_local2 = ""
		for f42_local7, f42_local8 in ipairs( f42_local0 ) do
			local f42_local9 = f42_local2
			local f42_local6
			if 1 < f42_local7 then
				f42_local6 = " > "
			else
				f42_local6 = ""
			end
			f42_local2 = f42_local9 .. f42_local6 .. f42_local8.name
		end
		DebugPrint( "    Requesting: " .. f42_local2 .. " > " .. f42_arg1.name )
	end
	for f42_local5, f42_local7 in ipairs( f42_arg0.menuInfoStack ) do
		if #f42_local0 < f42_local5 or f42_local7.name ~= f42_local0[f42_local5].name then
			for f42_local8 = #f42_arg0.menuInfoStack, f42_local5, -1 do
				local f42_local10 = f42_arg0.menuInfoStack[f42_local8]
				if not f42_local10.isModal then
					f42_arg0:CloseMenuInfo( f42_local10 )
					f42_arg0:RemoveMenuInfo( f42_local10 )
				end
			end
		end
	end
	for f42_local5, f42_local7 in ipairs( f42_local0 ) do
		if #f42_arg0.menuInfoStack < f42_local5 or f42_local7.name ~= f42_arg0.menuInfoStack[f42_local5].name then
			f42_arg0:PushMenuInfo( f42_arg0:CreateMenuInfo( f42_local7.name, nil, f42_local7.exclusiveController, f42_local1 ) )
		end
	end
	DebugPrint( "Set stack complete" )
end

LUI.FlowManager.PrintStack = function ( f41_arg0 )
	local f41_local0 = "----MENU STACK TOP----" .. "\n"
	for f41_local1 = #f41_arg0.menuInfoStack, 1, -1 do
		local f41_local4 = f41_arg0.menuInfoStack[f41_local1]
		local f41_local5
		if f41_local4.menu then
			f41_local5 = "Opened"
		else
			f41_local5 = "Closed"
		end
		f41_local0 = f41_local0 .. f41_local1 .. ") " .. f41_local4.name .. " (" .. f41_local5 .. ")" .. "\n"
	end
	DebugPrint( f41_local0 .. "---MENU STACK BOTTOM---" .. "\n" )
end

LUI.FlowManager.StackContains = function ( f40_arg0, f40_arg1 )
	for f40_local3, f40_local4 in ipairs( f40_arg0.menuInfoStack ) do
		if f40_local4.name == f40_arg1 then
			return true
		end
	end
	return false
end

LUI.FlowManager.StackContainsAny = function ( f39_arg0, f39_arg1 )
	for f39_local6, f39_local7 in ipairs( f39_arg0.menuInfoStack ) do
		for f39_local3, f39_local4 in pairs( f39_arg1 ) do
			if f39_local7.name == f39_local4 then
				return true
			end
		end
	end
	return false
end

LUI.FlowManager.GetStackTop = function ( f38_arg0, f38_arg1 )
	local f38_local0 = #f38_arg0.menuInfoStack
	if not f38_arg1 and 1 <= f38_local0 and f38_arg0.menuInfoStack[f38_local0].isModal then
		
	else
		
	end
	if 1 <= f38_local0 then
		return f38_arg0.menuInfoStack[f38_local0]
	else
		return nil
	end
end

LUI.FlowManager.GetTopMostOpenMenuInfo = function ( f37_arg0 )
	local f37_local0 = #f37_arg0.menuInfoStack
	if 1 <= f37_local0 and not f37_arg0.menuInfoStack[f37_local0].menu then
		
	else
		
	end
	if 1 <= f37_local0 then
		return f37_arg0.menuInfoStack[f37_local0]
	else
		return nil
	end
end

LUI.FlowManager.IsStackEmpty = function ( f36_arg0 )
	return #f36_arg0.menuInfoStack == 0
end

LUI.FlowManager.AreMainMenuFencedOut = function ( f35_arg0 )
	for f35_local3, f35_local4 in ipairs( f35_arg0.menuInfoStack ) do
		if (f35_local4.name == "MainMenuOffline" or f35_local4.name == "MainMenu") and f35_local4.fenced then
			return true
		end
	end
	return false
end

local f0_local1 = function ( f34_arg0, f34_arg1, f34_arg2 )
	if not false then
		
	else
		
	end
end

local f0_local2 = function ( f33_arg0, f33_arg1 )
	local f33_local0 = f33_arg0:GetStackTop( true )
	local f33_local1
	if f33_local0 then
		f33_local1 = f33_local0
	else
		f33_local1 = f33_local0.name == f33_arg1
	end
	return f33_local1
end

local f0_local3 = function ( f32_arg0, f32_arg1 )
	local f32_local0 = Engine.DBFFAEEFGJ()
	assert( f32_local0 )
	if IsMenuInStack( f32_local0, "OptionsMenuNewLayout" ) then
		f32_arg0:dispatchEventToRoot( {
			name = "closing_quick_access_menu",
			controllerIndex = f32_arg1.controller
		} )
		if not f0_local0( f32_arg0, "OptionsMenuNewLayout" ) then
			f0_local0( f32_arg0, f32_arg1, "OptionsMenuNewLayout" )
		end
	elseif not OSK.FCIEJBIHA() then
		f32_arg0:dispatchEventToRoot( {
			immediate = true,
			name = "opening_quick_access_menu"
		} )
		if IsMenuInStack( f32_local0, "SocialMenu" ) then
			f0_local0( f32_arg0, f32_arg1, "SocialMenu" )
		end
		ACTIONS.OpenOptionsMenu( f32_arg1.controller, nil, true )
		if Engine.CAADCDEEIA() and CONDITIONS.InGame() then
			GAME.PauseGame()
		end
	end
	return true
end

local f0_local4 = function ( f31_arg0, f31_arg1 )
	local f31_local0 = Engine.DBFFAEEFGJ()
	assert( f31_local0 )
	if Engine.CDCCDDJAJJ( f31_arg1.controller ) then
		if CONDITIONS.InGame() then
			if IsMenuInStack( f31_local0, "ManagePartyPopup" ) then
				f31_arg0:dispatchEventToRoot( {
					name = "closing_quick_access_menu"
				} )
			else
				LUI.FlowManager.RequestSocialPopup( f31_arg1.qualifier == "keyboard" )
			end
		elseif CONDITIONS.IsSocialEnabledInMainMenu( f31_arg0 ) then
			if IsMenuInStack( f31_local0, "SocialMenu" ) then
				f31_arg0:dispatchEventToRoot( {
					name = "closing_quick_access_menu",
					controllerIndex = f31_arg1.controller
				} )
				f0_local0( f31_arg0, f31_arg1, "SocialMenu" )
			elseif not OSK.FCIEJBIHA() then
				f31_arg0:dispatchEventToRoot( {
					immediate = true,
					name = "opening_quick_access_menu"
				} )
				if IsMenuInStack( f31_local0, "OptionsMenuNewLayout" ) then
					f0_local0( f31_arg0, f31_arg1, "OptionsMenuNewLayout" )
				end
				LUI.FlowManager.RequestAddMenu( "SocialMenu", true, f31_arg1.controller, false, {
					hasUsedShortcut = true
				}, true )
				if Engine.CAADCDEEIA() and CONDITIONS.InGame() then
					GAME.PauseGame()
				end
			end
		end
		return true
	else
		return false
	end
end

local f0_local5 = function ( f30_arg0, f30_arg1 )
	Dvar.DHEGHJJJHI( "LMSLNRLNOT", not Dvar.IBEGCHEFE( "LMSLNRLNOT" ) )
	return true
end

local f0_local6 = function ( f29_arg0, f29_arg1 )
	Dvar.DHEGHJJJHI( "LOOTLTLRNN", not Dvar.IBEGCHEFE( "LOOTLTLRNN" ) )
	return true
end

local f0_local7 = function ( f28_arg0, f28_arg1 )
	if f28_arg1 == "quick_social" or f28_arg1 == "quick_options" then
		local f28_local0 = f28_arg0:GetTopMostOpenMenuInfo()
		if f28_local0 and f28_local0.menu and f28_local0.menu.isQuickAccessShortcutsDisabled then
			return false
		end
	end
	if f28_arg1 == "quick_social" and (LUI.FlowManager.IsInStack( "MainMenuOffline" ) or CONDITIONS.IsLaunchChunk() or Engine.CAADCDEEIA()) then
		return false
	end
	return true
end

local f0_local8 = function ( f27_arg0, f27_arg1 )
	if f27_arg1.down and f0_local0( f27_arg0, f27_arg1.button ) then
		if f27_arg1.button == "mute_sound" then
			return f0_local0( f27_arg0, f27_arg1 )
		elseif f27_arg1.button == "mute_voicechat" then
			return f0_local0( f27_arg0, f27_arg1 )
		elseif f27_arg1.button == "accept_notification" then
			f27_arg0:dispatchEventToRoot( {
				answer = true,
				name = "kbm_notification_prompt_answer"
			} )
		elseif f27_arg1.button == "decline_notification" then
			f27_arg0:dispatchEventToRoot( {
				answer = false,
				name = "kbm_notification_prompt_answer"
			} )
		elseif f27_arg1.button == "quick_options" then
			return f0_local0( f27_arg0, f27_arg1 )
		elseif f27_arg1.button == "quick_social" then
			return f0_local0( f27_arg0, f27_arg1 )
		end
	end
	return false
end

local f0_local9 = function ( f26_arg0 )
	local f26_local0
	if f26_arg0 ~= PartyUIRoot.MP_PRIVATE_MATCH and f26_arg0 ~= PartyUIRoot.CP_PRIVATE_MATCH then
		f26_local0 = false
	else
		f26_local0 = true
	end
	return f26_local0
end

local f0_local10 = function ( f25_arg0 )
	local f25_local0
	if f25_arg0 ~= PartyUIRoot.MP_MAIN_MENU and f25_arg0 ~= PartyUIRoot.CP_MAIN_MENU then
		f25_local0 = false
	else
		f25_local0 = true
	end
	return f25_local0
end

LUI.FlowManager.LeaveQuickMenus = function ()
	local f24_local0 = Engine.DBFFAEEFGJ()
	f24_local0:dispatchEventToRoot( {
		name = "closing_quick_access_menu"
	} )
	if LUI.FlowManager.IsInStack( "SocialMenu" ) then
		f0_local0( f24_local0.flowManager, nil, "SocialMenu" )
	end
	if LUI.FlowManager.IsInStack( "OptionsMenuNewLayout" ) then
		f0_local0( f24_local0.flowManager, nil, "OptionsMenuNewLayout" )
	end
end

LUI.FlowManager.init = function ( f21_arg0, f21_arg1, f21_arg2 )
	LUI.UIElement.init( f21_arg0 )
	f21_arg0.id = "flowManager"
	f21_arg0.root = f21_arg1
	f21_arg0._controllerIndex = f21_arg2
	f21_arg0.menuInfoStack = {}
	f21_arg0.stackVersion = 0
	f21_arg0.stackChangeTime = Engine.BFBIDEGDFB()
	f21_arg0.stackChangeMenu = 0
	f21_arg0.isPartyUIRootDirty = false
	f21_arg0:registerEventHandler( "gamepad_button", function ( element, event )
		if f21_arg0( element, event ) then
			return true
		end
		local f23_local0 = f21_arg0:GetTopMostOpenMenuInfo()
		if f23_local0 then
			local f23_local1
			if f23_local0.controller and event.controller and f23_local0.controller ~= event.controller then
				f23_local1 = false
			else
				f23_local1 = true
			end
			if f23_local1 or not f23_local0.isControllerExclusive then
				return element:ForwardEventToTopMostOpenMenu( event )
			end
		end
		return false
	end )
	if Engine.EABCCIBFIG() then
		f21_arg0:registerEventHandler( "mousemove", f21_arg0.ForwardMouseEventToTopMostOpenMenu )
		f21_arg0:registerEventHandler( "mousedown", f21_arg0.ForwardMouseEventToTopMostOpenMenu )
		f21_arg0:registerEventHandler( "mouseup", f21_arg0.ForwardMouseEventToTopMostOpenMenu )
	end
	f21_arg0:registerEventHandler( "addmenu", f21_arg0.addMenuHandler )
	f21_arg0:registerEventHandler( "popupmenu", f21_arg0.popupMenuHandler )
	f21_arg0:registerEventHandler( "leavemenu", f21_arg0.leaveMenuHandler )
	f21_arg0:registerEventHandler( "restoreMenu", f21_arg0.restoreMenuHandler )
	f21_arg0:registerEventHandler( "closeallmenus", f21_arg0.closeAllMenusHandler )
	f21_arg0:registerEventHandler( "resumemovement", f21_arg0.resumeMovementHandler )
	if Engine.EAAHGICFBD() and not Engine.DDJFBBJAIG() then
		f21_arg0:registerOmnvarHandler( "ui_options_menu", function ( f22_arg0, f22_arg1 )
			f22_arg0:OpenMenuByScriptRequest( f22_arg1.value )
		end )
		f21_arg0:OpenMenuByScriptRequest( Game.BFEEGCHICA( f21_arg2, "ui_options_menu" ) )
	end
end

LUI.FlowManager.GetGamemodeForUIRoot = function ( f20_arg0 )
	if f20_arg0 > PartyUIRoot.GAMEMODE_NONE_MENUS_START and f20_arg0 < PartyUIRoot.GAMEMODE_NONE_MENUS_END then
		return CoD.PlayMode.None
	elseif f20_arg0 > PartyUIRoot.GAMEMODE_MP_MENUS_START and f20_arg0 < PartyUIRoot.GAMEMODE_MP_MENUS_END then
		return CoD.PlayMode.Core
	elseif f20_arg0 > PartyUIRoot.GAMEMODE_CP_MENUS_START and f20_arg0 < PartyUIRoot.GAMEMODE_CP_MENUS_END then
		return CoD.PlayMode.Aliens
	elseif f20_arg0 > PartyUIRoot.GAMEMODE_SP_MENUS_START and f20_arg0 < PartyUIRoot.GAMEMODE_SP_MENUS_END then
		return CoD.PlayMode.SP
	elseif f20_arg0 > PartyUIRoot.GAMEMODE_WZ_MENUS_START and f20_arg0 < PartyUIRoot.GAMEMODE_WZ_MENUS_END then
		return CoD.PlayMode.Core
	else
		assert( "LUI.FlowManager.GetGamemodeForUIRoot invalid ui root " .. tostring( f20_arg0 ) )
	end
end

LUI.FlowManager.IsUIRootBRGamemode = function ( f19_arg0 )
	local f19_local0
	if (f19_arg0 < BR_MENUS_START or f19_arg0 > BR_MENUS_END) and (f19_arg0 <= PartyUIRoot.GAMEMODE_WZ_MENUS_START or f19_arg0 >= PartyUIRoot.GAMEMODE_WZ_MENUS_END) then
		f19_local0 = false
	else
		f19_local0 = true
	end
	return f19_local0
end

LUI.FlowManager.AutomaticNavigationFrame = function ( f18_arg0 )
	local f18_local0 = PartyUIRoot.FREE
	local f18_local1 = false
	local f18_local2 = false
	local f18_local3 = false
	local f18_local4 = false
	local f18_local5 = f18_arg0._controllerIndex
	if not f18_local5 then
		f18_local5 = Engine.IJEBHJIJF()
	end
	if f18_arg0.isPartyUIRootDirty then
		f18_local0 = Lobby.CGEIEECJJH()
	else
		local f18_local6 = Tournament.DEHIAGCHBD()
		local f18_local7 = MLG.DEHIAGCHBD()
		if f18_local6 ~= PartyUIRoot.FREE then
			f18_local0 = f18_local6
			f18_local1 = true
			f18_local3 = true
			f18_local4 = true
		elseif f18_local7 ~= PartyUIRoot.FREE then
			f18_local0 = f18_local7
			f18_local2 = true
			f18_local3 = true
			f18_local4 = false
		end
	end
	if f18_local0 ~= PartyUIRoot.FREE then
		if Friends.GHGFJIJBI() or not Engine.CFHBIHABCB( f18_local5 ) or not Engine.CGJEJFBEAG( f18_local5 ) and Dvar.IBEGCHEFE( "LSLLMKMTSL" ) then
			if f18_local0 == PartyUIRoot.MP_PUBLIC_MATCH_LOBBY then
				f18_local0 = PartyUIRoot.BATTLE_ROYALE_MENU_PUBLIC_LOBBY
			elseif f18_local0 == PartyUIRoot.MP_MAIN_MENU then
				f18_local0 = PartyUIRoot.BR_MAIN_MENU
			elseif f18_local0 == PartyUIRoot.TOURNAMENT_LOADING or f18_local0 == PartyUIRoot.TOURNAMENT_MATCHMAKING or f18_local0 == PartyUIRoot.TOURNAMENT_BRACKET then
				f18_local0 = TOURNAMENT.GetUIRootForF2PFromPremiumIfF2PAllowed( f18_local0 )
			end
		end
		if CONDITIONS.IsMagmaGameMode() and (f18_local0 == PartyUIRoot.TOURNAMENT_LOADING or f18_local0 == PartyUIRoot.TOURNAMENT_MATCHMAKING or f18_local0 == PartyUIRoot.TOURNAMENT_BRACKET) then
			f18_local0 = TOURNAMENT.GetUIRootForF2PFromPremiumIfF2PAllowed( f18_local0 )
		end
		local f18_local6 = f18_arg0:DoAutomaticNavigation( f18_local0, f18_local3, f18_local4 )
		if f18_local6 and f18_local1 then
			Tournament.CJAJGICGJB()
		elseif f18_local6 and f18_local2 then
			MLG.CJAJGICGJB()
			if Dvar.IBEGCHEFE( "LPQQSRQSMO" ) then
				GAMEBATTLES.ShowFenceToRefreshSchedule()
			end
		elseif not f18_local6 then
			LUI.MouseCursorContextualMenuLayer.ForceCloseContextualMenu()
		end
	end
end

LUI.FlowManager.DoAutomaticNavigation = function ( f17_arg0, f17_arg1, f17_arg2, f17_arg3 )
	if Engine.DHEJECBEE() then
		END_GAME.StopServerAndLeave( f17_arg0 )
		return false
	elseif not Engine.DDJFBBJAIG() then
		return false
	elseif Lobby.BJEABAEHDE() then
		return false
	elseif f17_arg2 and Lobby.BBDICGHE() then
		if IsPrivateMatch() then
			Lobby.LeaveCustomGameLobby()
		elseif IsPublicMatch() then
			Lobby.LeavePublicLobby()
		end
		return false
	end
	local f17_local0 = Engine.IJEBHJIJF()
	if f17_arg2 and IsSystemLink() then
		Engine.DAGFFDGFII( "xstopprivateparty 0", f17_local0 )
		Dvar.DHEGHJJJHI( "LPSPMQSNPQ", false )
		return false
	elseif f17_arg3 and not Lobby.GFFECBCCF() then
		Engine.EBIDFIDHIE( "xstartprivateparty" )
		return false
	end
	local f17_local1 = Engine.DGEFGAJIB()
	local f17_local2 = LUI.FlowManager.GetGamemodeForUIRoot( f17_arg1 )
	local f17_local3
	if LUI.FlowManager.IsUIRootBRGamemode( f17_arg1 ) ~= CONDITIONS.IsMagmaGameMode() and not f0_local0( f17_arg1 ) then
		f17_local3 = not f0_local0( f17_arg1 )
	else
		f17_local3 = false
	end
	if (f17_local1 ~= f17_local2 or f17_local3) and f17_local1 ~= CoD.PlayMode.None then
		local f17_local4 = Engine.IJEBHJIJF()
		f17_arg0:closeAllMenus()
		f17_arg0:addMenu( {
			menu = LUI.FlowManager.FlowMenus[PartyUIRoot.MAIN_MENU],
			controller = f17_local4
		} )
		return false
	end
	local f17_local4 = LUI.FlowManager.FlowMenus[f17_arg1]
	if not f17_local4 then
		return true
	elseif Dvar.IBEGCHEFE( "MMQLNQRRLO" ) then
		local f17_local5 = f17_arg0:GetStackTop()
		if LUI.FlowManager.IgnoreFollowHostMenus[f17_local5.name] then
			f17_arg0:swapPartyUIRoot( f17_arg0:CreateMenuInfo( f17_local4, nil, true, f17_local0 ), f17_local0 )
			f17_arg0.isPartyUIRootDirty = false
			return true
		end
	end
	local f17_local5 = f17_arg0:StackContains( f17_local4 )
	local f17_local6 = false
	for f17_local7 = f17_arg1 + 1, PartyUIRoot.LAST, 1 do
		if f17_arg0:StackContains( LUI.FlowManager.FlowMenus[f17_local7] ) then
			f17_local6 = true
			break
		end
	end
	if f17_local5 and not f17_local6 then
		f17_arg0.isPartyUIRootDirty = false
		return true
	end
	DebugPrint( "LUI.FlowManager.FollowPartyHost to " .. f17_local4 )
	f17_arg0:closeAllMenus()
	f17_arg0:addMenu( {
		menu = f17_local4,
		controller = f17_local0
	} )
	return false
end

LUI.FlowManager.OpenMenuByScriptRequest = function ( f13_arg0, f13_arg1 )
	assert( Engine.EAAHGICFBD() )
	if not Game.HJHDJDCBF() then
		
	else
		
	end
	local f13_local0 = nil
	f13_local0 = function ( f15_arg0 )
		local f15_local0 = f13_arg0:Wait( 16 )
		f15_local0.onComplete = function ()
			if f15_arg0.root.loadingScreenManager and f15_arg0.root.loadingScreenManager:ShouldBeVisible() then
				f15_arg0( f15_arg0 )
			else
				f15_arg0()
			end
		end
		
	end
	
	local f13_local1 = {
		nil,
		"TeamSelectMenu",
		"LoadoutSelect",
		"LaunchChunkNewPhasePopup"
	}
	if f13_local1[f13_arg1] then
		local f13_local2 = f13_arg0.root:GetControllerIndex()
		f13_local0( function ()
			LUI.FlowManager.RequestAddMenu( f13_arg0, true, f13_arg0, false, {
				openedFromScriptRequest = true
			}, true )
			if f13_arg0 ~= "LaunchChunkNewPhasePopup" then
				if CONDITIONS.IsMagmaGameMode() then
					LUI.FlowManager.RequestSetStack( f13_arg0, {
						{
							name = "BrPauseMenu"
						}
					} )
				else
					LUI.FlowManager.RequestSetStack( f13_arg0, {
						{
							name = "MPPauseMenu"
						}
					} )
				end
			end
		end )
	end
	LUI.FlowManager.RequestCloseAllMenus()
end

LUI.FlowManager.ShouldBeVisible = function ( f12_arg0 )
	local f12_local0 = Engine.DDJFBBJAIG()
	if not f12_local0 then
		f12_local0 = Game.HJHDJDCBF()
	end
	return f12_local0
end

LUI.FlowManager.LogMenuChangeTo = function ( f11_arg0, f11_arg1, f11_arg2 )
	if f11_arg0.stackChangeMenu ~= f11_arg2 then
		local f11_local0 = Engine.BFBIDEGDFB()
		local f11_local1 = f11_local0 - f11_arg0.stackChangeTime
		if f11_arg0.stackChangeMenu ~= 0 then
			Engine.BHCDIBBGGB( f11_arg1, f11_arg0.stackChangeMenu, f11_arg2, f11_local1 )
		end
		f11_arg0.stackChangeMenu = f11_arg2
		f11_arg0.stackChangeTime = f11_local0
	end
end

LUI.FlowManager.Frame = function ( f10_arg0 )
	f10_arg0:RefreshStack()
	f10_arg0:AutomaticNavigationFrame()
end

LUI.FlowManager.InitLayer = function ( f8_arg0 )
	if Engine.DDJFBBJAIG() and not f8_arg0._partyRootSubscription then
		local f8_local0 = LUI.DataSourceInGlobalModel.new( "frontEnd.lobby.partyUIRoot" )
		f8_arg0._partyRootSubscription = f8_arg0:SubscribeToModel( f8_local0:GetModel( 0 ), function ( f9_arg0 )
			local f9_local0 = Lobby.CGEIEECJJH()
			if f9_local0 > PartyUIRoot.FREE then
				DebugPrint( "Set isPartyUIRootDirty to true. The current partyUIRoot is " .. tostring( f9_local0 ) .. "\n" )
				f8_arg0.isPartyUIRootDirty = true
			end
		end )
	end
end

LUI.FlowManager.ClearLayer = function ( f7_arg0 )
	f7_arg0:closeAllMenus()
	if f7_arg0._partyRootSubscription then
		f7_arg0:UnsubscribeFromModel( f7_arg0._partyRootSubscription )
		f7_arg0._partyRootSubscription = nil
	end
end

LUI.FlowManager.RefreshStack = function ( f6_arg0 )
	if #f6_arg0.menuInfoStack == 0 then
		return 
	end
	for f6_local8, f6_local9 in ipairs( f6_arg0.menuInfoStack ) do
		if f6_local9.fenceGroup then
			f6_local9.fenceGroup:Frame()
		end
		local f6_local3 = f6_local9.fenceGroup
		if f6_local3 then
			f6_local3 = not f6_local9.fenceGroup:Passes()
		end
		f6_local9.fenced = f6_local3
		if f6_local9.fenced then
			for f6_local3 = f6_local8 + 1, #f6_arg0.menuInfoStack, 1 do
				local f6_local6 = f6_arg0.menuInfoStack[f6_local3]
				if f6_local6 then
					local f6_local7 = f6_local6.fenceGroup
					if f6_local7 then
						f6_local7:Reset()
					end
				end
			end
		end
	end
	f6_local0 = #f6_arg0.menuInfoStack
	for f6_local9, f6_local3 in ipairs( f6_arg0.menuInfoStack ) do
		if f6_local3.fenced then
			f6_local0 = f6_local9 - 1
			break
		end
	end
	f6_local1 = 1
	for f6_local3, f6_local4 in ipairs( f6_arg0.menuInfoStack ) do
		if not f6_local4.isPopup and (f6_local4.menu or f6_local3 <= f6_local0) then
			local f6_local5 = assert
			local f6_local6 = f6_local4.menu
			if not f6_local6 then
				f6_local6 = not f6_local4.fenced
			end
			f6_local5( f6_local6 )
			f6_local1 = f6_local3
		end
	end
	f6_local2 = f6_arg0:GetStackVersion()
	for f6_local4, f6_local5 in ipairs( f6_arg0.menuInfoStack ) do
		if f6_local2 ~= f6_arg0:GetStackVersion() then
			return f6_arg0:RefreshStack()
		elseif f6_local4 < f6_local1 then
			if f6_local5.menu and not AlwaysVisible[f6_local5.name] then
				f6_arg0:CloseMenuInfo( f6_local5, false, true )
			end
		end
		if not f6_local5.menu and (f6_local4 <= f6_local0 or f6_local5.isModal) then
			assert( not f6_local5.fenced )
			Engine.BHFFIBEFFH( "(FlowManager OpenMenuInfo) " .. f6_local5.name, "widget" )
			f6_arg0:OpenMenuInfo( f6_local5 )
			Engine.DCHDDCJCEG( "(FlowManager OpenMenuInfo) " .. f6_local5.name, "widget" )
		end
	end
	f6_local8 = f6_arg0._controllerIndex
	if not f6_local8 then
		f6_local8 = Engine.IJEBHJIJF()
	end
	f6_local9 = f0_local0( f6_local8 )
	for f6_local13, f6_local6 in ipairs( f6_arg0.menuInfoStack ) do
		local f6_local7 = f6_local6.onTop == true
		local f6_local10 = f6_local6.menu
		if f6_local10 then
			f6_local10 = f6_local13 == #f6_arg0.menuInfoStack
		end
		f6_local6.onTop = f6_local10
		if f6_local13 > f6_local0 or f6_local0 >= #f6_arg0.menuInfoStack then
			f6_local10 = false
		else
			f6_local10 = true
		end
		if f6_local6.menu then
			if f6_local6.onTop then
				if f6_local6.menu.popupActive then
					f6_local6.menu:processEvent( {
						dispatchChildren = true,
						name = "popup_inactive"
					} )
					f6_local6.menu.popupActive = nil
				end
				if not f6_local7 then
					if DisableMousePointer[f6_local6.name] then
						f6_arg0.root:RemoveMouseCursor()
					else
						f6_arg0.root:TryAddMouseCursor()
					end
					local f6_local11, f6_local12 = f6_local6.menu:restoreState( f6_local9[f6_local6.name], f6_local6.controller )
					if not LUI.IsLastInputMouseNavigation( f6_local6.controller ) then
						if not f6_local11 or f6_local12 == 0 then
							Engine.BHFFIBEFFH( "(FlowManager gain_focus) " .. f6_local6.name, "widget" )
							f6_local6.menu:processEvent( {
								name = "gain_focus",
								controller = f6_local6.controller,
								focusType = FocusType.MenuFlow
							} )
							Engine.DCHDDCJCEG( "(FlowManager gain_focus) " .. f6_local6.name, "widget" )
						end
					else
						Engine.HJJJIGAC( f6_local6.controller )
						LUI.MouseCursorTooltipLayer.ForceCloseTooltip( f6_local6.controller )
						if f6_local6.menu.MovedToStackTop then
							f6_local6.menu:MovedToStackTop( f6_local6.controller )
							if f6_local6 == nil or f6_local6.menu == nil then
								return 
							end
						end
					end
					LUI.MouseCursorContextualMenuLayer.ForceCloseContextualMenu()
					f6_local9[f6_local6.name] = nil
				end
			else
				if f6_local7 then
					f6_local9[f6_local6.name] = f6_local6.menu:saveState()
					f6_local6.menu:processEvent( {
						name = "lose_focus"
					} )
					f6_local6.menu:processEvent( {
						dispatchChildren = true,
						name = "popup_active"
					} )
				end
				f6_local6.menu.popupActive = true
			end
			if f6_local6.menu.isBelowBlockingFence ~= f6_local10 then
				f6_local6.menu.isBelowBlockingFence = f6_local10
				if f6_local10 then
					f6_local6.menu:processEvent( {
						name = "below_blocking_fence"
					} )
				else
					f6_local6.menu:processEvent( {
						name = "not_below_blocking_fence"
					} )
				end
			end
		end
	end
end

LUI.FlowManager.processEvent = function ( f5_arg0, f5_arg1 )
	local f5_local0 = nil
	local f5_local1 = f5_arg0.m_eventHandlers[f5_arg1.name]
	if f5_local1 then
		f5_local0 = f5_local1( f5_arg0, f5_arg1 )
	else
		f5_local0 = LUI.UIElement.processEvent( f5_arg0, f5_arg1 )
	end
	if not f5_local0 and f5_arg0.IsNavigationEvent( f5_arg1 ) then
		f5_arg0:EnsureFocus()
	end
	return f5_local0
end

LUI.FlowManager.EnsureFocus = function ( f4_arg0 )
	local f4_local0 = f4_arg0.menuInfoStack[#f4_arg0.menuInfoStack]
	if f4_local0 and f4_local0.menu and not f4_local0.menu:getFirstInFocus() then
		DebugPrint( "FlowManager: No child in focus, trying to restore focus.  This should probably only happen when using a mouse" )
		local f4_local1 = LUI.FlowManager.GetScopedData( f4_local0.menu )
		f4_local0.menu:processEvent( {
			name = "gain_focus",
			controller = f4_local1.controllerIndex
		} )
		DebugPrint( "CheckRestoreFocus to " .. f4_local0.name )
	end
end

LUI.FlowManager.ForwardEventToTopMostOpenMenu = function ( f3_arg0, f3_arg1 )
	local f3_local0 = f3_arg0:GetTopMostOpenMenuInfo()
	if f3_local0 then
		return f3_local0.menu:processEvent( f3_arg1 )
	else
		return false
	end
end

LUI.FlowManager.ForwardMouseEventToTopMostOpenMenu = function ( f2_arg0, f2_arg1 )
	f2_arg0:applyElementTransform()
	if LUI.FocusDebug ~= nil then
		LUI.FocusDebug.StartFocusChain( f2_arg0 )
	end
	local f2_local0 = f2_arg0:ForwardEventToTopMostOpenMenu( f2_arg1 )
	f2_arg0:undoElementTransform()
	if LUI.FocusDebug ~= nil then
		LUI.FocusDebug.EndFocusChain( f2_arg0 )
	end
	if f2_arg1.name == "mousemove" then
		return true
	else
		return f2_local0
	end
end

LUI.FlowManager.IsNavigationEvent = function ( f1_arg0 )
	if f1_arg0.name == "gamepad_button" and f1_arg0.down and f1_arg0.qualifier ~= "mousewheel" and (f1_arg0.button == "up" or f1_arg0.button == "down" or f1_arg0.button == "left" or f1_arg0.button == "right") then
		return true
	else
		return false
	end
end

