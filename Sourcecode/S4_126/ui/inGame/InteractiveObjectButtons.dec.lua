-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
module( ..., package.seeall )
local f0_local0 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.instances = {}
	local f2_local0 = DataSources.inGame.HUD.hints.interactiveObject.button
	local f2_local1 = f2_local0.targetEntity:GetModel( f2_arg1 )
	local f2_local2 = f2_local0.shouldShow:GetModel( f2_arg1 )
	local f2_local3 = f2_local0.style:GetModel( f2_arg1 )
	f2_arg0:SubscribeToModel( f2_local1, function ( f3_arg0 )
		local f3_local0 = DataModel[0x614D394F6F9A18D]( f3_arg0 )
		local f3_local1 = f2_arg0.dismiss:GetModel( f2_arg0 )
		DataModel[0x83C9B5DE1D9371]( f3_local1, true )
		for f3_local5, f3_local6 in pairs( f2_arg0.instances ) do
			local f3_local7 = f3_local6:Wait( 500 )
			f3_local7.onComplete = function ()
				f3_arg0:SetDataSource( nil, f3_arg0 )
				f3_arg0:SetEntityNum( nil )
				f3_arg0:closeTree()
				if f3_arg0.instances[f3_arg0] == f3_arg0 then
					f3_arg0.instances[f3_arg0] = nil
				end
			end
			
		end
		DataModel[0x83C9B5DE1D9371]( f3_local1, false )
		if f2_arg0.instances[f3_local0] then
			f2_arg0.instances[f3_local0]:closeTree()
			f2_arg0.instances[f3_local0] = nil
		end
		if Dvar[0x9E5BE3B4BBA4E0E]( "#x3cf95d339bd1c5469" ) and not CONDITIONS.IsRealismMode( f2_arg0, f2_arg0 ) and CONDITIONS.DoesGameTypeSupportItemPickupCards() then
			f3_local2 = Game[0x196F372D8C10CA1]( f2_arg0 )
			if BRLOOT.ShouldShowLootCard( f2_arg0 ) then
				if f3_local2 then
					f3_local3 = DataModel[0x83C9B5DE1D9371]
					f3_local5 = DataSources.inGame.HUD.hints.interactiveObject.lootCard.targetEntityOverride:GetModel( f2_arg0 )
					if f3_local0 > BRLOOT.MAX_GENTITIES and not f3_local0 then
						f3_local6 = f3_local0
					else
						f3_local6 = BRLOOT.INVALID_TARGET_ENTITY
					end
					f3_local3( f3_local5, f3_local6 )
				end
				f3_local3 = DataModel[0x83C9B5DE1D9371]
				f3_local5 = DataSources.inGame.HUD.hints.interactiveObject.lootCard.targetEntityOverride:GetModel( f2_arg0 )
				if f3_local0 > BRLOOT.MAX_GENTITIES and not f3_local0 then
					f3_local6 = f3_local0
				else
					f3_local6 = BRLOOT.INVALID_TARGET_ENTITY
				end
				f3_local3( f3_local5, f3_local6 )
				return 
			end
		end
		f3_local2 = DataModel[0x614D394F6F9A18D]( f2_arg0 )
		f3_local3 = DataModel[0x614D394F6F9A18D]( f2_arg0 )
		f3_local4, f3_local5 = nil
		if f3_local2 then
			if f3_local3 == HintStyles.LEADERSHIP then
				
			elseif f3_local3 == HintStyles.BUDDY_BOOST then
				f3_local4 = "InteractiveBuddyBoost"
				f3_local5 = {
					snapEdges = false,
					buttonHintMaxScale = 1,
					buttonHintNaturalDistance = 130,
					buttonHintMinScale = 4.6672616413205735E-62
				}
			else
				f3_local4 = "InteractiveObjectButton"
				f3_local5 = {
					snapEdges = true,
					buttonHintMinScale = Dvar[0xEDCFC612B39E0C0]( "#x38fd9b51511d2c94" ),
					buttonHintMaxScale = Dvar[0xEDCFC612B39E0C0]( "#x33af3867423de07e" ),
					buttonHintNaturalDistance = Dvar[0xEDCFC612B39E0C0]( "#x3ea25b1382d5f2d90" )
				}
			end
		end
		if f3_local4 then
			f3_local6 = MenuBuilder.BuildRegisteredType( f3_local4, {
				controllerIndex = f2_arg0,
				buttonStyle = f3_local3
			} )
			f3_local6.id = "hint_" .. f3_local0
			local f3_local7 = CONDITIONS.IsBRGameType( f2_arg0 )
			if f3_local6.rotateElements then
				f3_local5.sendVisibilityEvents = true
				f3_local5.rotateElements = f3_local6.rotateElements
			else
				f3_local5.sendVisibilityEvents = false
			end
			f3_local6:SetupAnchoredElement( {
				applyLensDistortion = true,
				entityNum = f3_local0,
				snapToScreenEdges = f3_local5.snapEdges,
				minScale = f3_local5.buttonHintMinScale,
				maxScale = f3_local5.buttonHintMaxScale,
				naturalDistance = f3_local5.buttonHintNaturalDistance,
				sendVisibilityEvents = f3_local5.sendVisibilityEvents,
				rotateElements = f3_local5.rotateElements,
				enableDistanceBasedSnapCheck = f3_local7,
				useDistanceBasedFading = f3_local7
			} )
			f3_local6:SubscribeToModelThroughElement( f3_local6, "targetEntityTag", function ( f4_arg0 )
				f3_arg0:SetEntityTag( DataModel[0x614D394F6F9A18D]( f4_arg0 ) )
			end )
			f3_local6:SetDataSource( f2_arg0, f2_arg0 )
			f2_arg0.instances[f3_local0] = f3_local6
			f2_arg0:addElement( f2_arg0.instances[f3_local0] )
		end
	end )
end

function InteractiveObjectButtons( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "InteractiveObjectButtons"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine[0x12586A3F4FB490E]() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1, "Missing controllerIndex!" )
	local f1_local2 = self
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "InteractiveObjectButtons", InteractiveObjectButtons )
LockTable( _M )
