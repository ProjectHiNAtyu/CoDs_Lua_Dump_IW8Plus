-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
module( ..., package.seeall )
local f0_local0 = function ( f6_arg0, f6_arg1, f6_arg2 )
	local f6_local0 = f6_arg2._currentOperators[f6_arg0._factionRef][f6_arg0._operatorIndex]
	if CONDITIONS.IsMobileOrMobileSim() then
		f6_arg0:SetupContextualMenu( {
			title = Engine[0xED84C33EC5F01EA]( f6_local0.name )
		} )
	else
		f6_arg0:SetupContextualMenu()
	end
	local f6_local1 = {
		id = "operatorBio",
		actionName = Engine[0xED84C33EC5F01EA]( 0x98FC33D8C8B4A85 ),
		conditionFunction = function ()
			return OPERATOR.IsOperatorBioAvailable( f6_arg0, f6_arg0 )
		end,
		actionFunction = function ()
			OPERATOR.OpenOperatorBio( f6_arg0, f6_arg0 )
		end
	}
	if not CONDITIONS.IsMobileOrMobileSim() then
		f6_local1.button = "button_left_trigger"
	end
	f6_arg0:AddContextualMenuAction( f6_local1 )
	local f6_local2 = {
		id = "operatorEditSkin",
		actionName = Engine[0xED84C33EC5F01EA]( 0x51511087A1E6608 ),
		conditionFunction = function ()
			return OPERATOR.IsOperatorSubMenuAvailable( f6_arg0, f6_arg0, "OperatorCustomization" )
		end,
		actionFunction = function ()
			OPERATOR.OpenOperatorSubMenu( f6_arg0, f6_arg0, "OperatorCustomization" )
		end
	}
	if not CONDITIONS.IsMobileOrMobileSim() then
		f6_local2.button = "button_alt2"
	end
	f6_arg0:AddContextualMenuAction( f6_local2 )
	local f6_local3 = {
		id = "operatorPreview",
		actionName = Engine[0xED84C33EC5F01EA]( 0xA13AD45F8BB9AA3 ),
		conditionFunction = function ()
			return OPERATOR.IsOperatorSubMenuAvailable( f6_arg0, f6_arg0, "OperatorShowcase" )
		end,
		actionFunction = function ()
			OPERATOR.OpenOperatorSubMenu( f6_arg0, f6_arg0, "OperatorShowcase" )
		end
	}
	if not CONDITIONS.IsMobileOrMobileSim() then
		f6_local3.button = "button_r3"
	end
	f6_arg0:AddContextualMenuAction( f6_local3 )
	f6_arg0:AddContextualMenuAction( {
		id = "operatorPreview",
		actionName = Engine[0xED84C33EC5F01EA]( 0x96A9A4BB7275CE5 ),
		conditionFunction = function ()
			local f10_local0 = f6_arg0._isFocusedOperatorUnlocked
			local f10_local1 = Dvar[0x9E5BE3B4BBA4E0E]( 0xBBF84FBDC361CAF )
			local f10_local2 = nil
			if f6_arg0.OperatorSelectChallengesLayout then
				f10_local2 = f6_arg0.OperatorSelectChallengesLayout.BundleUpsellButton._bundleData
			end
			local f10_local3
			if not f10_local0 then
				if f10_local1 then
					f10_local3 = f10_local1
				else
					f10_local3 = f10_local2
				end
			else
				f10_local3 = false
			end
			return f10_local3
		end,
		actionFunction = function ()
			f6_arg0.OperatorSelectChallengesLayout.BundleUpsellButton:processEvent( {
				name = "view_bundle"
			} )
		end
	} )
	f6_arg0:AddContextualMenuAction( {
		id = "allMissions",
		actionName = Engine[0xED84C33EC5F01EA]( 0x3D1A06A5843928B ),
		conditionFunction = function ()
			local f8_local0 = f6_arg0._isFocusedOperatorUnlocked
			local f8_local1 = OPERATOR.IsOperatorMissionsAvailable( f6_arg0, f6_arg0 )
			local f8_local2 = Engine[0x5EA7EB683287036]( f6_arg0 )
			local f8_local3
			if f8_local0 then
				f8_local3 = f8_local0
			elseif f8_local1 then
				f8_local3 = f8_local1
			else
				f8_local3 = f8_local2
			end
			return f8_local3
		end,
		actionFunction = function ()
			OPERATOR.OpenOperatorMissions( f6_arg0, f6_arg0, f6_arg0._currentEquippedOperator )
		end
	} )
end

local f0_local1 = function ( f5_arg0, f5_arg1, f5_arg2, f5_arg3, f5_arg4, f5_arg5 )
	f5_arg0.FactionName:setText( Engine[0xED84C33EC5F01EA]( StringTable[0x2DCF0973239E909]( CSV.FactionTable.file, CSV.FactionTable.cols.ref, f5_arg2, CSV.FactionTable.cols.name ) ) )
	f5_arg0._menu = f5_arg5
	f5_arg0._factionIndex = f5_arg3
	f5_arg0.OperatorSelectButtonList:RemoveAllButtonsFromList()
	local f5_local0 = 0
	for f5_local1 = 1, #f5_arg4, 1 do
		local f5_local4 = f5_arg0.OperatorSelectButtonList:AddButtonToList( f5_arg1 )
		local f5_local5 = {
			removeTextBacker = true,
			imageSize = "ImageFull",
			buttonData = {
				factionRef = f5_arg2,
				factionIndex = f5_arg3,
				operatorIndex = f5_local1,
				operatorRef = f5_arg4[f5_local1].ref
			}
		}
		f5_local5.buttonData.image = StringTable[0x2DCF0973239E909]( CSV.operators.file, CSV.operators.cols.ref, f5_arg4[f5_local1].ref, CSV.operators.cols.icon )
		f5_local5.buttonData.header = StringTable[0x2DCF0973239E909]( CSV.operators.file, CSV.operators.cols.ref, f5_arg4[f5_local1].ref, CSV.operators.cols.name )
		f5_local5.buttonData.isUnlocked = OPERATOR.IsUnlocked( f5_arg1, f5_arg4[f5_local1].ref )
		f5_local4.ButtonSmallTall:SetupButton( f5_local5 )
		f5_local4.ButtonSmallTall:SetPrimaryPromptText( 0x7D9DC9E3291E103 )
		f5_local4:SetButtonData( {
			factionRef = f5_arg2,
			factionIndex = f5_arg3,
			operatorIndex = f5_local1,
			operatorRef = f5_arg4[f5_local1].ref,
			container = f5_arg0
		} )
		f5_local4:SetupIfNewItem( f5_arg1 )
		f5_local4:SetupHandlers( f5_arg5, f5_arg4[f5_local1], f5_arg1 )
		if CONDITIONS.IsMobileOrMobileSim() or not GL_HACK.IsInfluencerBuild() then
			f0_local0( f5_local4, f5_arg1, f5_arg5 )
		end
		if f5_local5.buttonData.isUnlocked then
			f5_local0 = f5_local0 + 1
		end
	end
	f5_arg0:SetAnchorsAndPosition( 0, 1, 0, 1, 0, #f5_arg4 * 160 * _1080p + (#f5_arg4 - 1) * 15 * _1080p, 0, 146 * _1080p )
	if not CONDITIONS.IsMobileOrMobileSim() then
		f5_arg0.OperatorSelectButtonList:dispatchEventToChildren( {
			name = "parent_active_behavior"
		} )
		f5_arg0.OperatorSelectButtonList:MouseSetActiveToDefaultFocus( f5_arg1 )
	end
end

local f0_local2 = function ( f3_arg0, f3_arg1, f3_arg2 )
	assert( f3_arg0.OperatorSelectButtonList )
	assert( f3_arg0.FactionName )
	f3_arg0.SetupButtonContainer = f0_local0
	if IsLanguageArabic() then
		ACTIONS.AnimateSequence( f3_arg0, "AR" )
	end
	local f3_local0 = function ( f4_arg0, f4_arg1 )
		local f4_local0 = f3_arg0._menu
		if not f4_local0 then
			return 
		else
			local f4_local1 = LUI.FlowManager.GetScopedData( f3_arg0 )
			if f4_local1.operatorData.useEquippedOperatorFocusIndex then
				if CONDITIONS.IsMobileOrMobileSim() then
					f4_local1.operatorData.useEquippedOperatorFocusIndex = false
				end
				local f4_local2, f4_local3 = f4_local0:GetEquippedOperatorFocusIndex( f3_arg0 )
				return f4_local3
			else
				local f4_local2 = f4_local0:GetFocusedFactionListPosition()
				local f4_local3 = f4_local0:GetFactionPositionFromIndex( f3_arg0._factionIndex - 1 )
				local f4_local4 = f4_local0:GetFocusedOperatorIndex()
				if f4_local1.operatorData.useSelectedOperatorIndexForFocus then
					f4_local1.operatorData.useSelectedOperatorIndexForFocus = false
					return f4_local4
				elseif f4_local3.y < f4_local2.y then
					return f4_local4
				elseif f4_local2.y < f4_local3.y then
					return f4_local4
				elseif f4_local2.x == f4_local0:GetNumFactionColumns() - 1 and f4_local3.x == 0 then
					return 1
				elseif f4_local2.x == 0 and f4_local3.x == f4_local0:GetNumFactionColumns() - 1 then
					return #f3_arg0.OperatorSelectButtonList:GetOperatorButtons()
				elseif f4_local2.x < f4_local3.x then
					return 1
				elseif f4_local3.x < f4_local2.x then
					return #f3_arg0.OperatorSelectButtonList:GetOperatorButtons()
				else
					
				end
			end
		end
	end
	
	f3_arg0.OperatorSelectButtonList:SetForceDefaultFocus( true )
	f3_arg0.OperatorSelectButtonList:SetDefaultFocus( f3_local0 )
	if not CONDITIONS.IsMobileOrMobileSim() then
		f3_arg0.OperatorSelectButtonList:SetActiveOnMouseOverBehavior( f3_arg1 )
		f3_arg0.OperatorSelectButtonList:MouseSetActiveToDefaultFocus( f3_arg1 )
	end
	f3_arg0:SetGridChildDynamicSize( true, LUI.DIRECTION.horizontal )
end

local f0_local3 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PostLoadShared = f0_local0
end

function OperatorSelectButtonContainerBase( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 234 * _1080p, 0, 146 * _1080p )
	self.id = "OperatorSelectButtonContainerBase"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f0_local0( self, LUI.ValidateControllerIndex( self, f1_local1 ), controller )
	return self
end

MenuBuilder.registerType( "OperatorSelectButtonContainerBase", OperatorSelectButtonContainerBase )
LockTable( _M )
