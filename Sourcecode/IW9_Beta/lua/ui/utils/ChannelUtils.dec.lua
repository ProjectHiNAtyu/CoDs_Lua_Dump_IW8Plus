-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:01
CHANNELS = CHANNELS or {}
CHANNELS.CHANNEL_MENU_NAME = "ChannelPanelBase"
CHANNELS.INTRO_ANIMATION = "Intro"
CHANNELS.OUTRO_ANIMATION = "Outro"
CHANNELS.INVALID_PARTY_ID = "0"
CHANNELS.IN_CREATION_CHANNEL_ID = "-1"
CHANNELS.MAX_SOCIAL_CHANNELS = 5
CHANNELS.MAX_NAME_LENGTH = 28
CHANNELS.TAB_ID = {
	SETTINGS = 3,
	CHAT = 2,
	MEMBERS = 1
}
CHANNELS.IsValidPartyID = function ( f31_arg0 )
	if not f31_arg0 then
		return false
	else
		assert( type( f31_arg0 ) == "string", "channelID must be a string to support uint64" )
		return f31_arg0 ~= CHANNELS.INVALID_PARTY_ID
	end
end

CHANNELS.GetTextChatIDForChannelID = function ( f30_arg0, f30_arg1 )
	local f30_local0 = Social[0x18C8869C97BE161]( f30_arg1 )
	local f30_local1 = TEXTCHAT.INVALID_CHAT_ID
	if f30_local0 == Enum[0x71816B8A6999EAF][0x5F503BE0C38AF61] then
		f30_local1 = ChatChannel[0xBAE6C9991A144BD]( f30_arg0 )
	elseif f30_local0 == Enum[0x71816B8A6999EAF][0x6779FA46C0A2058] then
		f30_local1 = ChatChannel[0x92B8CF8FA5B2B9]( f30_arg0 )
	elseif f30_local0 == Enum[0x71816B8A6999EAF][0xC0E29ADAA5D346F] then
		f30_local1 = ChatChannel[0xC37FA7CEB5CDEDA]( f30_arg1 )
	end
	return f30_local1
end

CHANNELS.GetChannelIDForChatID = function ( f29_arg0, f29_arg1 )
	for f29_local3, f29_local4 in ipairs( Social[0xC57868DE2B09F52]( f29_arg0 ) ) do
		assert( CHANNELS.IsValidPartyID( f29_local4 ) )
		if f29_arg1 == CHANNELS.GetTextChatIDForChannelID( f29_arg0, f29_local4 ) then
			return f29_local4
		end
	end
	return CHANNELS.INVALID_PARTY_ID
end

CHANNELS.GetChannelType = function ( f28_arg0 )
	return Social[0x18C8869C97BE161]( f28_arg0 )
end

CHANNELS.GetChannelScopedData = function ()
	if CONDITIONS.IsMenuInStack( CHANNELS.CHANNEL_MENU_NAME ) then
		return LUI.FlowManager.GetScopedData( CHANNELS.CHANNEL_MENU_NAME )
	else
		assert( false, "GetChannelScopedData called when CHANNELS.CHANNEL_MENU_NAME not in stack" )
		return {}
	end
end

CHANNELS.GetChannelDataSourceValues = function ( f26_arg0 )
	return {
		channelID = DataSources.alwaysLoaded.voiceChat.partyId:GetValue( f26_arg0 ),
		chatID = DataSources.alwaysLoaded.textChat.chatID:GetValue( f26_arg0 ),
		isWhisper = DataSources.alwaysLoaded.textChat.chatType:GetValue( f26_arg0 ) == Enum[0xEBC6725912C9693][0x7C61CC549527A1],
		channelType = DataSources.alwaysLoaded.voiceChat.partyType:GetValue( f26_arg0 )
	}
end

CHANNELS.OpenChannelPanel = function ( f25_arg0, f25_arg1, f25_arg2, f25_arg3 )
	if not f25_arg3 then
		f25_arg3 = {}
	end
	if f25_arg3.openGlobalPanel and not LUI.FlowManager.IsInStack( GLOBAL_PANEL.NAME ) then
		GLOBAL_PANEL.OpenGlobalPanel( self, f25_arg0, GLOBAL_PANEL.TAB_INDEX.CHANNELS )
	end
	if LUI.FlowManager.IsInStack( CHANNELS.CHANNEL_MENU_NAME ) then
		CHANNELS.CloseChannelPanel( {
			immediate = true
		} )
	end
	LUI.FlowManager.RequestPopupMenu( self, CHANNELS.CHANNEL_MENU_NAME, true, f25_arg0, false, {
		selectedChannelID = f25_arg1,
		selectedChannelType = CHANNELS.IsValidPartyID( f25_arg1 ) and Social[0x18C8869C97BE161]( f25_arg1 ) or nil,
		selectedChannelChatID = f25_arg2,
		selectedChannelDefaultTabIndex = f25_arg3.defaultTabIndex,
		openedWithShortcut = f25_arg3.openedWithShortcut
	} )
	if not f25_arg3.immediate then
		local f25_local0 = LUI.FlowManager.GetMenuByName( CHANNELS.CHANNEL_MENU_NAME )
		f25_local0 = f25_local0.menu
		assert( f25_local0 )
		if f25_local0 then
			ACTIONS.AnimateSequence( f25_local0, CHANNELS.INTRO_ANIMATION )
		end
	end
end

CHANNELS.CloseChannelPanel = function ( f23_arg0 )
	local f23_local0
	if not f23_arg0 then
		f23_local0 = f23_arg0
	else
		f23_local0 = {}
	end
	local f23_local1 = LUI.FlowManager.GetMenuByName( CHANNELS.CHANNEL_MENU_NAME )
	f23_local1 = f23_local1.menu
	assert( f23_local1 )
	if f23_local1 then
		if not f23_local0.immediate then
			ACTIONS.AnimateSequence( f23_local1, CHANNELS.OUTRO_ANIMATION, {
				onComplete = function ()
					LUI.FlowManager.RequestLeaveMenuByName( CHANNELS.CHANNEL_MENU_NAME, true )
				end
			} )
		else
			LUI.FlowManager.RequestLeaveMenuByName( CHANNELS.CHANNEL_MENU_NAME, true )
		end
	end
end

CHANNELS.GetChannelMembers = function ( f22_arg0 )
	if not f22_arg0 then
		local f22_local0 = CHANNELS.GetChannelScopedData()
		assert( f22_local0.selectedChannelID )
		f22_arg0 = f22_local0.selectedChannelID
	end
	assert( CHANNELS.IsValidPartyID( f22_arg0 ), "Invalid party ID for channel" )
	local f22_local0 = {}
	if Social[0x18C8869C97BE161]( f22_arg0 ) == Enum[0x71816B8A6999EAF][0x6779FA46C0A2058] and Engine[0x4087D6C81C2FDB3]() then
		f22_local0 = Social[0x16CF81DE8C359B6]()
	else
		f22_local0 = Social[0xB9EF7ED6B33977C]( f22_arg0 )
	end
	if not f22_local0 then
		f22_local0 = {}
	end
	local f22_local1 = 1
	for f22_local2 = 1, #f22_local0, 1 do
		local f22_local5 = f22_local0[f22_local2]
		local f22_local6 = f22_local0[f22_local2 + 1]
		local f22_local7
		if f22_local5 then
			f22_local7 = f22_local5
		else
			f22_local7 = f22_local5.privatePartyId
		end
		local f22_local8
		if f22_local6 then
			f22_local8 = f22_local6
		else
			f22_local8 = f22_local6.privatePartyId
		end
		f22_local5.privatePartyMemberIndex = f22_local1
		if CHANNELS.IsValidPartyID( f22_local5.privatePartyId ) and f22_local7 == f22_local8 then
			f22_local5.lastInPrivateParty = false
			f22_local1 = f22_local1 + 1
		else
			f22_local5.lastInPrivateParty = true
			f22_local1 = 1
		end
	end
	return f22_local0
end

CHANNELS.GetChannelDetails = function ( f21_arg0, f21_arg1 )
	if not CHANNELS.IsValidPartyID( f21_arg1 ) or not f21_arg0 then
		return 
	end
	local f21_local0 = {}
	if Social[0x18C8869C97BE161]( f21_arg1 ) == Enum[0x71816B8A6999EAF][0x6779FA46C0A2058] and Engine[0x4087D6C81C2FDB3]() then
		f21_local0 = Social[0xA980A6B720DC7A5]( f21_arg0 )
	else
		f21_local0 = Social[0x163314C01029FB1]( f21_arg0, f21_arg1 )
	end
	return f21_local0
end

CHANNELS.GetChannelName = function ( f20_arg0, f20_arg1, f20_arg2 )
	if not f20_arg1 or not f20_arg0 then
		return 
	end
	local f20_local0 = ""
	local f20_local1 = Social[0x18C8869C97BE161]( f20_arg1 )
	if f20_local1 == Enum[0x71816B8A6999EAF][0x5F503BE0C38AF61] then
		f20_local0 = Engine[0xED84C33EC5F01EA]( 0x22533C4B873A3B5 )
	elseif f20_local1 == Enum[0x71816B8A6999EAF][0x6779FA46C0A2058] then
		if Engine[0x4087D6C81C2FDB3]() then
			f20_local0 = Engine[0xED84C33EC5F01EA]( 0xAB6F6DA1BCD2027 )
		else
			f20_local0 = Engine[0xED84C33EC5F01EA]( 0xBD6D6D5306A7A3E )
		end
	elseif f20_local1 == Enum[0x71816B8A6999EAF][0xC0E29ADAA5D346F] then
		f20_local0 = Social[0x14BFBB5992C20A2]( f20_arg0, f20_arg1 )
		if String.IsNilOrEmpty( f20_local0 ) then
			f20_local0 = Engine[0xED84C33EC5F01EA]( 0x92EFA75A07184DB )
		else
			
		end
	end
	if f20_arg2 then
		f20_local0 = ToUpperCase( f20_local0 )
	end
	return f20_local0
end

CHANNELS.ToggleMute = function ( f19_arg0, f19_arg1, f19_arg2 )
	if f19_arg1 and f19_arg1.inVoiceChat then
		if f19_arg1.isMyPlayer then
			Social[0x7FD640B7D8FD15E]( f19_arg0 )
		else
			Social[0xB55E6E9AFB2E809]( f19_arg2, f19_arg1.xuidString )
		end
	end
end

CHANNELS.ToggleVoicePartyConnection = function ( f18_arg0, f18_arg1 )
	local f18_local0 = Social[0xF12FC4AFD7A2A6D]( f18_arg0 )
	if f18_local0 and f18_arg1 then
		if f18_local0 == f18_arg1 then
			Social[0x1EBA9940863C671]( f18_arg0 )
		elseif CONDITIONS.IsVoiceChatEnabled() then
			Social[0x2DCEF319E8CCDEF]( f18_arg0, Social[0x18C8869C97BE161]( f18_arg1 ), f18_arg1 )
		end
	end
end

CHANNELS.IsPlayerInMyVoiceParty = function ( f17_arg0, f17_arg1 )
	local f17_local0 = Social[0xF12FC4AFD7A2A6D]( f17_arg0 )
	local f17_local1 = CHANNELS.IsValidPartyID( f17_local0 )
	if f17_local1 then
		f17_local1 = f17_local0 == f17_arg1.voicePartyId
	end
	return f17_local1
end

CHANNELS.IsMyVoiceParty = function ( f16_arg0, f16_arg1 )
	return Social[0xF12FC4AFD7A2A6D]( f16_arg0 ) == f16_arg1
end

CHANNELS.MobileTextChatFlyInPopup = function ( f15_arg0, f15_arg1 )
	local f15_local0 = MobileFlyInPopupUtils.PopupsEnum.CHAT_CHANNEL_PANEL
	local f15_local1 = MobileFlyInPopupUtils.Popups[f15_local0]
	local f15_local2 = MobileFlyInPopupUtils.GetCurrentFlyInPopup()
	local f15_local3 = LUI.TextChat.GetLayer()
	if f15_local2 == f15_local0 then
		LUI.FlowManager.closeFlyInPopup( true )
		if f15_local3 then
			f15_local3.selector = nil
			f15_local3.chat = nil
		end
		return 
	end
	local f15_local4 = SOCIAL.MobileOpenSocialFlyInPopup( f15_arg0, f15_arg1, f15_local1, "MobileTextChatMenu" )
	MobileFlyInPopupUtils.SetCurrentFlyInPopup( f15_local0 )
	if f15_local3 then
		f15_local3.selector = f15_local4
		f15_local3.chat = f15_local4.MGLTextChat
	end
	if f15_arg0.LastReceivedChatType and f15_arg0.LastReceivedChatId then
		CHANNELS.OpenExistingChannel( {
			chatType = f15_arg0.LastReceivedChatType,
			chatId = f15_arg0.LastReceivedChatId
		}, f15_arg1 )
		f15_arg0.LastReceivedChatType = nil
		f15_arg0.LastReceivedChatId = nil
	end
end

CHANNELS.OpenExistingChannel = function ( f14_arg0, f14_arg1 )
	local f14_local0 = LUI.TextChat.GetChat()
	local f14_local1 = LUI.TextChat.GetSelector()
	assert( f14_local0 )
	assert( f14_arg0.chatId )
	assert( f14_arg0.chatType )
	local f14_local2 = TEXTCHAT.ActiveChatID == CHANNELS.IN_CREATION_CHANNEL_ID
	if f14_local1:IsChatVisible() and f14_arg0.chatId == TEXTCHAT.ActiveChatID then
		f14_local1:SetChatVisible( false )
		ChatChannel[0x6ECCE804F929FDA]( f14_arg1, TEXTCHAT.ActiveChatID )
		TEXTCHAT.ActiveChatID = CHANNELS.INVALID_CHANNEL_ID
	else
		local f14_local3 = ChatChannel[0x3A9F1F51625857F]( f14_arg1, f14_arg0.chatId )
		if f14_local3 then
			TEXTCHAT.ActiveChatID = f14_arg0.chatId
			TEXTCHAT.ActiveChatType = f14_arg0.chatType
			ChatChannel[0xDE0B3EA8DDC5A8D]( f14_arg1, f14_arg0.chatId )
			ChatChannel[0xB0E9E0D7CEF4C75]( f14_arg1, TEXTCHAT.WantedChatLines )
			f14_local0:SetupChannel( {
				name = f14_local3.name,
				type = f14_arg0.chatType
			} )
			f14_local1:SetChatVisible( true )
			if f14_arg0.chatType == Enum[0xEBC6725912C9693][0x7DBC6C7E698D90F] then
				f14_local0:UpdatePartySettingsAccessPointVisibility()
			else
				f14_local0:HidePartySettingsAccessPoint()
			end
			TEXTCHAT.ChatMessages = ChatChannel[0xF6F1F4913ABA49F]()
			TEXTCHAT.SetupMessagesList( true )
		end
	end
	if f14_local2 then
		TEXTCHAT.RefreshNumChannelEntries( f14_arg1 )
	end
end

CHANNELS.OpenChannel = function ( f13_arg0, f13_arg1, f13_arg2 )
	if f13_arg1 then
		local f13_local0 = ChatChannel[0xCEA1A3A525F2C91]( f13_arg2.xuid )
		if not TEXTCHAT.IsValidChatID( f13_local0 ) then
			TEXTCHAT.ActiveChatID = CHANNELS.IN_CREATION_CHANNEL_ID
			TEXTCHAT.ActiveChatType = Enum[0xEBC6725912C9693][0x7C61CC549527A1]
			TEXTCHAT.ActiveChatData = f13_arg2
			local f13_local1 = LUI.TextChat.GetChat()
			local f13_local2 = LUI.TextChat.GetSelector()
			assert( f13_local1 )
			assert( f13_local2 )
			if f13_local1 and f13_local2 then
				f13_local1:SetupChannel( {
					name = f13_arg2.fullName
				} )
				f13_local2:SetChatVisible( true )
				f13_local1:HidePartySettingsAccessPoint()
				TEXTCHAT.RefreshNumChannelEntries( f13_arg0 )
				TEXTCHAT.ChatMessages = {}
				TEXTCHAT.SetupMessagesList( false )
			end
		else
			CHANNELS.OpenExistingChannel( {
				chatType = Enum[0xEBC6725912C9693][0x7C61CC549527A1],
				chatId = f13_local0
			}, f13_arg0 )
		end
	end
end

CHANNELS.CreateChannel = function ( f12_arg0, f12_arg1, f12_arg2 )
	local f12_local0 = ChatChannel[0x74E5FEADEA773FD]( f12_arg0, f12_arg1, f12_arg2 )
	TEXTCHAT.ActiveChatID = f12_local0
	if TEXTCHAT.IsValidChatID( f12_local0 ) then
		ChatChannel[0xDE0B3EA8DDC5A8D]( f12_arg0, TEXTCHAT.ActiveChatID )
		ChatChannel[0xB0E9E0D7CEF4C75]( f12_arg0, TEXTCHAT.WantedChatLines )
		TEXTCHAT.ChatMessages = ChatChannel[0xA8D765446F50021]( f12_arg0 )
		TEXTCHAT.SetupMessagesList( false )
	else
		
	end
	TEXTCHAT.RefreshNumChannelEntries( f12_arg0 )
end

CHANNELS.OverrideListNavigation = function ( f10_arg0 )
	if f10_arg0._allowCloseMenu == nil then
		f10_arg0._allowCloseMenu = true
	end
	f10_arg0:addEventHandler( "allow_close", function ( f11_arg0, f11_arg1 )
		f11_arg0._allowCloseMenu = f11_arg1.allowCloseMenu
		f11_arg0._handleNavigation = f11_arg0._allowCloseMenu
	end )
end

CHANNELS.WhisperPlayer = function ( f9_arg0, f9_arg1 )
	local f9_local0 = f9_arg0._playerData
	assert( f9_local0 )
	CHANNELS.MobileTextChatFlyInPopup( f9_arg0, f9_arg1 )
	CHANNELS.OpenChannel( f9_arg1, true, f9_local0 )
end

CHANNELS.GetCustomSocialChannels = function ( f8_arg0 )
	local f8_local0 = {}
	for f8_local4, f8_local5 in ipairs( Social[0xC57868DE2B09F52]( f8_arg0 ) ) do
		assert( CHANNELS.IsValidPartyID( f8_local5 ) )
		if Social[0x18C8869C97BE161]( f8_local5 ) == Enum[0x71816B8A6999EAF][0xC0E29ADAA5D346F] then
			table.insert( f8_local0, {
				isWhisper = false,
				channelID = f8_local5
			} )
		end
	end
	return f8_local0
end

CHANNELS.OpenEditChannelNamePopup = function ( f6_arg0, f6_arg1, f6_arg2 )
	OSK[0xC1C15C14B75864C]( f6_arg0, Engine[0xED84C33EC5F01EA]( 0xCBE4657B441DDCB ), CHANNELS.GetChannelName( f6_arg0, f6_arg1, false ), CHANNELS.MAX_NAME_LENGTH, true, true, false, function ( f7_arg0, f7_arg1, f7_arg2 )
		if not String.IsNilOrEmpty( f7_arg1 ) then
			local f7_local0, f7_local1 = TEXT_EDIT.ValidateString( f7_arg0, f7_arg1, {
				validateMaxDigits = true
			} )
			if f7_local0 then
				if not Social[0x1172BC007DF3786]( f7_arg0, f6_arg0, f7_arg1 ) then
					LUI.FlowManager.RequestErrorPopup( f7_arg0, Engine[0xED84C33EC5F01EA]( 0x1CCA5C59ECE1EA6 ), Engine[0xED84C33EC5F01EA]( 0x27DAE2037C8696F ) )
					return 
				elseif f6_arg0 and CONDITIONS.IsMenuInStack( CHANNELS.CHANNEL_MENU_NAME ) then
					local f7_local2 = LUI.FlowManager.GetMenuByName( CHANNELS.CHANNEL_MENU_NAME )
					local f7_local3
					if f7_local2 then
						f7_local3 = f7_local2
					else
						f7_local3 = f7_local2.menu
					end
					if f7_local3 and f7_local3.ChannelPanel and f7_local3.ChannelPanel.SetupTitle then
						f7_local3.ChannelPanel:SetupTitle()
					end
				end
			else
				LUI.FlowManager.RequestErrorPopup( f7_arg0, Engine[0xED84C33EC5F01EA]( 0x1CCA5C59ECE1EA6 ), f7_local1 )
			end
		end
	end )
end

CHANNELS.BlockPlayerAction = function ( f3_arg0, f3_arg1, f3_arg2 )
	if f3_arg1 ~= (f3_arg2.platformId or "0") then
		Social[0x668F2AB72D9D39F]( f3_arg0, f3_arg1 )
	else
		local f3_local0 = function ( f5_arg0 )
			local f5_local0 = Friends[0x1821B29F79F9A89]( f5_arg0, f3_arg0 )
			if not f5_local0 then
				f5_local0 = Friends[0x31182B53C5EC02E]( f5_arg0, f3_arg0, f3_arg0 )
			end
			return f5_local0
		end
		
		if f3_local0( f3_arg0 ) then
			LUI.FlowManager.RequestPopupMenu( nil, "BlockPlayerAndRemoveFromFriendsPopup", true, f3_arg0, false, {
				yesAction = function ( f4_arg0, f4_arg1 )
					Social[0xBA84F92B6D4F69B]( f4_arg1, f3_arg0 )
				end,
				fullName = f3_arg2.fullName
			} )
		else
			Social[0xBA84F92B6D4F69B]( f3_arg0, f3_arg1 )
		end
	end
end

CHANNELS.CanCreateSocialChannels = function ( f2_arg0 )
	return Engine[0x4CB15A94380FAF3]( f2_arg0 ) == false
end

CHANNELS.IsVoicePartyConnectionStable = function ( f1_arg0 )
	return Engine[0x5B95437851C0FD2]( f1_arg0 )
end

