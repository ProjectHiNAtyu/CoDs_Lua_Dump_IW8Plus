-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
MAIN_MENU = MAIN_MENU or {}
MAIN_MENU.BladeKeys = {
	CP = 7,
	BR = 5,
	SP = 2,
	MP = 3,
	NG = 4,
	STORE = 8,
	BuyMW = 1,
	LP = 9,
	DMZ = 6
}
MAIN_MENU.BladeType = {
	Accordion = 2,
	Shutter = 1
}
MAIN_MENU.BladeStates = {
	Neutral = 4,
	Installing = 1,
	New = 3,
	Blocked = 2
}
MAIN_MENU.LayoutWidths = {
	Kronos = 1520,
	MagmaOffline = 1920,
	Magma = 1920,
	KronosOffline = 1200
}
MAIN_MENU.GameModeEnumValues = {
	BR = 4,
	DMZ = 5,
	SP = CoD.PlayMode.SP,
	MP = CoD.PlayMode.Core,
	CP = CoD.PlayMode.Aliens
}
local f0_local0 = function ( f13_arg0, f13_arg1 )
	local f13_local0 = LUI.ShallowCopy( f13_arg0 )
	for f13_local4, f13_local5 in pairs( f13_arg1 ) do
		f13_local0[f13_local4] = f13_local5
	end
	return f13_local0
end

MAIN_MENU.TitleUpdateAvailablePopup = function ( f11_arg0, f11_arg1 )
	local f11_local0 = MenuBuilder.BuildRegisteredType( "generic_confirmation_popup", {
		popup_title = Engine[0xED84C33EC5F01EA]( 0x1CCA5C59ECE1EA6 ),
		message_text = Engine[0xED84C33EC5F01EA]( 0x2B937F628CA38D5 ),
		button_text = Engine[0xED84C33EC5F01EA]( 0x4E76830223A336F ),
		confirmation_action = function ()
			Engine[0xDEE6107B26F8BB6]()
		end
	} )
	f11_local0.id = "TitleUpdateAvailablePopup"
	f11_local0.isQuickAccessShortcutsDisabled = true
	return f11_local0
end

MenuBuilder.registerType( "TitleUpdateAvailablePopup", MAIN_MENU.TitleUpdateAvailablePopup )
MAIN_MENU.TryShowTitleUpdateAvailablePopup = function ()
	if Engine[0x575E9C5B9AAB6F4]() and Dvar[0x9E5BE3B4BBA4E0E]( 0xD23E335155CBE04 ) and Dvar[0x9E5BE3B4BBA4E0E]( 0x3EC3B87FCEEF73B ) and not Dvar[0x9E5BE3B4BBA4E0E]( 0x79F3B6F9FC74228 ) then
		if Dvar[0x9E5BE3B4BBA4E0E]( 0x16761DB27D36C60 ) then
			local f10_local0 = Engine[0x45B054C920178E9]()
			Engine[0x5DEE98AA6FB3C2]( f10_local0, CoD.LeavePartyMoveUI.NO, CoD.LeavePartyShowMessage.YES, "MAIN_MENU.TryShowTitleUpdateAvailablePopup" )
			if not LUI.FlowManager.IsMenuOnTop( "MainMenu" ) then
				LUI.FlowManager.RequestRestoreMenu( "MainMenu", true, f10_local0 )
			end
		end
		LUI.FlowManager.RequestPopupMenu( nil, "TitleUpdateAvailablePopup", false, nil, false, nil )
		Dvar[0x8EA06EEDB58D872]( 0x79F3B6F9FC74228, true )
		return true
	else
		return false
	end
end

MAIN_MENU.RegisterTitleUpdateAvailableEventHandler = function ()
	local f9_local0 = Engine[0xEE6F69FEA944B13]()
	f9_local0:registerEventHandler( "title_update_available", MAIN_MENU.TryShowTitleUpdateAvailablePopup )
end

MAIN_MENU.GetFocusRow = function ( f8_arg0, f8_arg1 )
	local f8_local0 = 1
	local f8_local1 = 2
	if not CONDITIONS.IsTelescopeMOTDEnabled() then
		local f8_local2
		if not f8_arg1 then
			f8_local2 = f8_arg1
		else
			f8_local2 = f8_arg0
		end
		return f8_local2
	end
	local f8_local2 = Engine[0x45B054C920178E9]()
	local f8_local3 = DataSources.alwaysLoaded.motdFenceApplied
	if f8_local3:GetValue( f8_local2 ) == nil then
		f8_local3:SetValue( f8_local2, true )
		local f8_local4
		if CONDITIONS.IsJupNexusBuildEnabled() and not f8_local0 then
			f8_local4 = f8_local0
		else
			f8_local4 = f8_local1
		end
		return f8_local4
	end
	local f8_local4 = LUI.WebViewManager.Instance()
	f8_local4 = f8_local4:GetAndResetEnterLobbyDirtyFlag()
	local f8_local5
	if not f8_arg1 then
		f8_local5 = f8_arg1
	else
		f8_local5 = f8_arg0
	end
	if f8_local5 == f8_local0 and f8_local4 and not CONDITIONS.IsJupNexusBuildEnabled() then
		f8_local5 = f8_local1
	end
	return f8_local5
end

MAIN_MENU.CrossTitleActionFunc = function ( f5_arg0, f5_arg1, f5_arg2, f5_arg3, f5_arg4 )
	local f5_local0 = Lobby[0x63537242F1D48FF]()
	if f5_local0 then
		f5_local0 = Lobby[0x6957722EF74F5D2]()
		if f5_local0 then
			f5_local0 = not Lobby[0xA04A6632DD06002]()
		end
	end
	local f5_local1 = function ()
		Engine[0xE28C46DFA655228]( f5_arg0, f5_arg0, f5_arg0 )
	end
	
	local f5_local2 = function ()
		if f5_arg0 and CONDITIONS.ArePartiesEnabledInMainMenu() then
			Engine[0xB81A5136C5503E4]( "xstopprivateparty 0", f5_arg0 )
			if not Lobby[0x63537242F1D48FF]() then
				Engine[0xB81A5136C5503E4]( "xstartprivateparty", f5_arg0 )
			end
		end
		LUI.FlowManager.RequestPopupMenu( nil, "CrossLaunchConfirmPopup", true, f5_arg0, false, {
			gameTitle = f5_arg0,
			controllerIndex = f5_arg0,
			onConfirmed = f5_arg0
		} )
		METRICS.SendDlogEventCODHQ_UISession( f5_arg0, f5_arg0 )
	end
	
	if f5_local0 then
		LUI.FlowManager.RequestPopupMenu( nil, "ConfirmShouldBreakupPrivateParty", true, f5_arg1, false, {
			title = f5_arg2,
			controllerIndex = f5_arg1,
			yesAction = f5_local2
		} )
	else
		f5_local2()
	end
end

MenuBuilder.registerType( "CrossLaunchConfirmPopup", function ( f1_arg0, f1_arg1 )
	local f1_local0 = MenuBuilder.BuildRegisteredType( "CrosslaunchingCountdownPopup", {
		title = Engine[0xED84C33EC5F01EA]( 0x1CCA5C59ECE1EA6 ),
		message = Engine[0xED84C33EC5F01EA]( 0x2B0D1E42DB41FD3, Engine[0x7D3158A9539A355]( f1_arg1.gameTitle ) or "" ),
		controllerIndex = f1_arg1.controllerIndex,
		timerData = {
			frequency = 500,
			time = f1_arg1.duration or 5,
			getTimeRemainingCallback = function ( f4_arg0 )
				return f4_arg0.endTime - CoD.GetUTC()
			end,
			onCountdownCompleteCallback = function ( f3_arg0, f3_arg1 )
				f1_arg0.onConfirmed()
			end
		},
		shouldAlwaysBeCancellable = true,
		onCancel = function ( f2_arg0, f2_arg1 )
			LUI.FlowManager.RequestLeaveMenu( f2_arg0, nil )
		end
	} )
	f1_local0.id = "CrossLaunchConfirmPopup"
	return f1_local0
end )
