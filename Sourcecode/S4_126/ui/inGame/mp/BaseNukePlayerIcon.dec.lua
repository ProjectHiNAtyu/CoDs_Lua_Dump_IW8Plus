-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
module( ..., package.seeall )
local f0_local0 = 1
local f0_local1 = 2
local f0_local2 = 1000
local f0_local3 = function ( f5_arg0, f5_arg1, f5_arg2 )
	local f5_local0 = Game[0x28624DEF6F708C8]( f5_arg1, "ui_base_carrying_nuke" )
	local f5_local1 = Game[0x28624DEF6F708C8]( f5_arg1, "ui_light_armor_state" ) == f0_local0
	local f5_local2 = f5_arg0.NebulaIcon
	local f5_local3 = f5_local2
	f5_local2 = f5_local2.SetVisibility
	local f5_local4
	if f5_local0 then
		f5_local4 = LUI.Visibility.Visible
		if not f5_local4 then
		
		else
			f5_local2( f5_local3, f5_local4 )
			f5_local2 = f5_arg0.NebulaIconBackground
			f5_local3 = f5_local2
			f5_local2 = f5_local2.SetVisibility
			if f5_local0 then
				f5_local4 = LUI.Visibility.Visible
				if not f5_local4 then
				
				else
					f5_local2( f5_local3, f5_local4 )
					f5_local2 = ACTIONS.AnimateSequence
					f5_local3 = f5_arg0
					if f5_local1 then
						f5_local4 = "ArmorIconActive"
					else
						f5_local4 = "DefaultSequence"
					end
					f5_local2( f5_local3, f5_local4 )
					f5_arg0:registerOmnvarHandler( "ui_base_carrying_nuke", function ( f10_arg0, f10_arg1 )
						f10_arg0.NebulaIcon:SetVisibility( f10_arg1.value and LUI.Visibility.Visible or LUI.Visibility.Hidden )
						f10_arg0.NebulaIconBackground:SetVisibility( f10_arg1.value and LUI.Visibility.Visible or LUI.Visibility.Hidden )
					end )
					f5_arg0:registerOmnvarHandler( "ui_light_armor_state", function ( f8_arg0, f8_arg1 )
						if f8_arg1.value == f5_arg0 then
							ACTIONS.AnimateSequence( f8_arg0, "ArmorIconActive" )
						else
							local f8_local0 = f8_arg0:Wait( f5_arg0, true )
							f8_local0.onComplete = function ()
								ACTIONS.AnimateSequence( f8_arg0, "ArmorIconInactive" )
							end
							
						end
					end )
					f5_local2 = function ( f7_arg0, f7_arg1 )
						f7_arg0.NebulaIconBackground:SetRGBFromTable( COLORBLIND_UTILS.GetCustomColorFromColorNameAndColorBlindType( f7_arg1, COLORBLIND_UTILS.CUSTOM_COLORS.ALLY, SWATCHES.highlight.vAllyHighlight ), 0 )
					end
					
					f5_arg0:addAndCallEventHandler( "update_color_blind_colors", function ()
						f5_arg0( f5_arg0, f5_arg0 )
					end )
				end
			end
			f5_local4 = LUI.Visibility.Hidden
		end
	end
	f5_local4 = LUI.Visibility.Hidden
end

function BaseNukePlayerIcon( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 128 * _1080p, 0, 128 * _1080p )
	self.id = "BaseNukePlayerIcon"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	self._sequenceLengths = self._sequenceLengths or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local NebulaIconBackground = nil
	
	NebulaIconBackground = LUI.UIImage.new()
	NebulaIconBackground.id = "NebulaIconBackground"
	NebulaIconBackground:SetRGBFromTable( SWATCHES.HUD.friendlyTeam, 0 )
	NebulaIconBackground:setImage( RegisterMaterial( "v_ui_elmnt_objective_circlebase_02" ), 0 )
	NebulaIconBackground:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -38, _1080p * 38, _1080p * -38, _1080p * 38 )
	self:addElement( NebulaIconBackground )
	self.NebulaIconBackground = NebulaIconBackground
	
	local f1_local4 = nil
	if CONDITIONS.IsArmsRaceGameType() then
		f1_local4 = LUI.UIImage.new()
		f1_local4.id = "NebulaIcon"
		f1_local4:SetRGBFromTable( SWATCHES.HUD.vHUDDefault, 0 )
		f1_local4:setImage( RegisterMaterial( "v_ui_icon_objective_nebula_00" ), 0 )
		f1_local4:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -38, _1080p * 38, _1080p * -38, _1080p * 38 )
		self:addElement( f1_local4 )
		self.NebulaIcon = f1_local4
	end
	self._sequences.DefaultSequence = function ()
		
	end
	
	self._sequenceLengths.DefaultSequence = 0
	local f1_local5 = nil
	NebulaIconBackground:RegisterAnimationSequence( "ArmorIconActive", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -71
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 5
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -88
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * -12
		}
	} )
	if CONDITIONS.IsArmsRaceGameType() then
		f1_local4:RegisterAnimationSequence( "ArmorIconActive", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Left,
				value = _1080p * -71
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Right,
				value = _1080p * 5
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Top,
				value = _1080p * -88
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Bottom,
				value = _1080p * -12
			}
		} )
	end
	self._sequences.ArmorIconActive = function ()
		menu:AnimateSequence( "ArmorIconActive" )
		if CONDITIONS.IsArmsRaceGameType() then
			menu:AnimateSequence( "ArmorIconActive" )
		end
	end
	
	self._sequenceLengths.ArmorIconActive = 0
	local f1_local6 = nil
	NebulaIconBackground:RegisterAnimationSequence( "ArmorIconInactive", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -38
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 38
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -38
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 38
		}
	} )
	if CONDITIONS.IsArmsRaceGameType() then
		f1_local4:RegisterAnimationSequence( "ArmorIconInactive", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Left,
				value = _1080p * -38
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Right,
				value = _1080p * 38
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Top,
				value = _1080p * -38
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Bottom,
				value = _1080p * 38
			}
		} )
	end
	self._sequences.ArmorIconInactive = function ()
		menu:AnimateSequence( "ArmorIconInactive" )
		if CONDITIONS.IsArmsRaceGameType() then
			menu:AnimateSequence( "ArmorIconInactive" )
		end
	end
	
	self._sequenceLengths.ArmorIconInactive = 0
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "BaseNukePlayerIcon", BaseNukePlayerIcon )
LockTable( _M )
