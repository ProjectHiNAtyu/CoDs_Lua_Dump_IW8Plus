-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
module( ..., package.seeall )
require( "ui.generated.widgets.frontend.store.storebillboarditem" )
require( "ui.generated.widgets.frontend.depot.mpstorebillboardgridrow" )
require( "ui.generated.widgets.scrollbar.verticalscrollbar" )
require( "ui.generated.widgets.frontend.depot.nomoreitemsmessage" )
require( "ui.generated.widgets.frontend.mp.eventbanner" )
require( "ui.generated.widgets.frontend.store.storescrollarrow" )
require( "ui.generated.widgets.frontend.promptbutton" )
require( "ui.generated.widgets.supportingcreatorcode", false )
require( "ui.generated.widgets.buttonpromptcontainer" )
local f0_local0 = 3000
local f0_local1 = true
local f0_local2 = function ( f54_arg0, f54_arg1, f54_arg2 )
	local f54_local0 = {}
	local f54_local1 = f54_arg2.items[1] or {}
	if f54_arg2.isFirstPartyCategory then
		table.insert( f54_local0, {
			asset = "mw_store_billboard_placeholder",
			name = 0xD0AB3A6290AC391,
			buttonAction = function ( f55_arg0, f55_arg1 )
				if not STORE.IsCatalogReady( f54_arg0 ) then
					LUI.FlowManager.RequestPopupMenu( nil, "generic_error_popup", false, nil, false, {
						message = f54_arg0._catalogFetchErrorMessage
					}, nil, false, true )
				end
			end
		} )
	elseif f54_arg2.idPubVar and f54_local1.layoutOnlyItem then
		local f54_local2 = ""
		if not Dvar[0x9E5BE3B4BBA4E0E]( 0x965B2C4568B9041 ) then
			if f54_arg0._storeSchedule then
				f54_local2 = STORE.GetScheduledProductsForCategory( f54_arg2, f54_arg0._storeSchedule )
			end
			local f54_local3 = ""
			if f54_arg2.justForYou and f54_arg0._recommendations then
				f54_arg0.recommendationData = {
					items = f54_arg0._recommendations,
					isEnabled = true
				}
				f54_local3 = f54_arg0._recommendations
			elseif f54_arg2.commsLocationId then
				f54_local3 = Store.GetAdditionalCategoryItems( f54_arg2.commsLocationId )
				if f54_local3 then
					f54_local3 = table.concat( STORE.TrimRecommendationsByBlacklistedItems( split( f54_local3, "," ) ), "," )
				end
			end
			f54_local2 = STORE.FormatRecommendationItems( f54_local2 .. "," .. f54_local3 )
		end
		if f54_arg2.idPubVar then
			f54_local2 = STORE.FormatRecommendationItems( f54_local2 .. "," .. (Dvar[0x54084D7CA2317BB]( f54_arg2.idPubVar ) or "") )
		end
		if STORE.CategoryType[f54_arg2.id] == STORE.CategoryType.featured and STORE.ShouldModifyFeaturedItems( f54_arg1 ) then
			f54_local2 = STORE.GetPriorityFeaturedItems() .. "," .. f54_local2
		end
		local f54_local3 = split( f54_local2, "," )
		local f54_local4 = 0
		f54_arg2.hasFirstPartyBundle = false
		for f54_local5 = 1, #f54_local3, 1 do
			local f54_local8 = tonumber( f54_local3[f54_local5] )
			if STORE.BundleAvailable( f54_arg1, f54_local8 ) then
				local f54_local9 = LUI.DeepCopy( f54_local1 )
				f54_local9.emptyCategory = false
				f54_local9.id = f54_local8
				local f54_local10 = CSV.ReadRow( {
					file = CSV.bundleIDs.file,
					cols = CSV.bundleIDs.cols
				}, StringTable[0x8073B436CDE1BF]( CSV.bundleIDs.file, CSV.bundleIDs.cols.id, f54_local3[f54_local5] ) )
				f54_local9.name = f54_local10.name
				f54_local9.asset = f54_local10.image
				f54_local9.description = STORE.GetBundleDescription( f54_local9.id, f54_arg0._totalCP )
				f54_local9.rarity = f54_local10.rarity
				f54_local9.bundleType = f54_local10.bundleType
				f54_local9.titleImage = f54_local10.titleImage
				f54_local9.currencyID = tonumber( f54_local10.currencyID )
				f54_local9.currencyAmount = tonumber( f54_local10.currencyAmount )
				local f54_local11
				if 0 < #f54_local10.firstPartyProductID then
					f54_local11 = f54_local10.firstPartyProductID
					if not f54_local11 then
					
					else
						f54_local9.firstPartyProductID = f54_local11
						f54_local9.purchaseEnd = f54_local10.purchaseEnd and f54_local10.purchaseEnd or nil
						if f54_local9.purchaseEnd and STORE.SeasonTimestampMapping[f54_local9.purchaseEnd] then
							f54_local9.purchaseEnd = STORE.SeasonTimestampMapping[f54_local9.purchaseEnd]
						end
						if f54_local8 == tonumber( BATTLEPASS.GetTierSkipGiftID() ) and BATTLEPASS.IsTierSkipGiftActive( f54_arg1 ) then
							f54_local9.purchaseEnd = BATTLEPASS.GetTierSkipGiftTimer()
						end
						f54_local11, f54_local12, f54_local13 = STORE.GetCategoryTimeLeft( nil, f54_local9.purchaseEnd )
						if not f54_local9.purchaseEnd or 0 < f54_local11 then
							table.insert( f54_local0, f54_local9 )
							f54_local4 = f54_local4 + 1
						end
						if f54_local9.firstPartyProductID then
							f54_arg2.hasFirstPartyBundle = true
						end
					end
				end
				f54_local11 = nil
			end
			if f54_local4 == f54_arg2.numItemsShown then
				break
			end
		end
	end
	if #f54_local0 == 0 then
		local f54_local2 = LUI.DeepCopy( f54_local1 )
		f54_local2.emptyCategory = true
		f54_local2.titleImage = nil
		f54_local2.purchaseEnd = nil
		f54_local2.asset = "mw_store_billboard_placeholder"
		f54_local2.name = 0xB6A4275A3437C60
		table.insert( f54_local0, f54_local2 )
	end
	f54_arg2.items = f54_local0
end

local f0_local3 = function ( f53_arg0, f53_arg1, f53_arg2 )
	local f53_local0, f53_local1 = STORE.GetIndexForBundle( f53_arg1, f53_arg0._controllerIndex )
	if f53_local0 and f53_local1 and f53_arg0.BundlesGrid then
		local f53_local2 = f53_arg0._allCategoryData[f53_local0]
		local f53_local3 = LUI.FlowManager.GetPerControllerPersistentData( f53_arg0._controllerIndex )
		f53_arg0._selectedCategory = f53_local0
		f53_local3._selectedCategory = f53_local2.categoryIndex
		f53_arg0._selectedBundle = f53_local1
		f53_arg0.BundlesGrid:SetFocusedPosition( {
			x = 0,
			y = f53_local0 - 1
		}, true )
		f53_arg0:BillboardCategoryButtonAction( element, event, f53_local2 )
	else
		LUI.FlowManager.RequestPopupMenu( f53_arg0, "PopupOK", true, f53_arg0._controllerIndex, false, {
			message = Engine[0xED84C33EC5F01EA]( 0x9E5E1EC4414E3B5 )
		} )
	end
end

local f0_local4 = function ( f52_arg0, f52_arg1 )
	local f52_local0 = STORE.GetCategoryIndex( f52_arg0._controllerIndex, f52_arg1 )
	if f52_local0 and f52_arg0.BundlesGrid then
		local f52_local1 = f52_arg0._allCategoryData[f52_local0]
		local f52_local2 = LUI.FlowManager.GetPerControllerPersistentData( f52_arg0._controllerIndex )
		f52_arg0._selectedCategory = f52_local0
		f52_local2._selectedCategory = f52_local1.categoryIndex
		f52_arg0.BundlesGrid:SetFocusedPosition( {
			x = 0,
			y = f52_local0 - 1
		}, true )
	end
end

local f0_local5 = function ( f51_arg0, f51_arg1, f51_arg2, f51_arg3 )
	local f51_local0 = f51_arg0._selectedBundle or 1
	local f51_local1 = f51_arg3.items[f51_local0]
	local f51_local2 = f51_local1.id
	if f51_local1.emptyCategory then
		f51_arg0._startPurchaseImmediately = false
		return 
	end
	local f51_local3 = LUI.FlowManager.GetScopedData( f51_arg0 )
	f51_local3.selectedBundleIndex = f51_local0
	if f51_arg3.isFirstPartyCategory then
		f51_local3.firstPartyColumnIndex = f51_local0
		if f51_local1.buttonAction then
			f51_arg0._startPurchaseImmediately = false
			f51_local1.buttonAction( f51_arg1, f51_arg2 )
			return 
		end
	else
		f51_local3.firstPartyColumnIndex = nil
	end
	if not f51_arg0._storeEnterComplete then
		QUARTERMASTER.RecordStoreEnterEvent( f51_arg0._controllerIndex, f51_arg0._storeLayout, f51_arg0.recommendationData, f51_arg0._sourceMenu )
		QUARTERMASTER.BeginMenuBrowseEvent( f51_arg0._controllerIndex, f51_arg3, f51_arg3.items[1], f51_arg0._storeLayout, f51_arg0.recommendationData )
		f51_arg0._storeEnterComplete = true
	end
	QUARTERMASTER.RecordMenuBrowseEvent( f51_arg0._controllerIndex, true )
	STORE.MarkItemSeen( f51_arg0._controllerIndex, f51_local2 )
	f51_arg0.BundlesGrid:RefreshContent()
	if f51_local1.firstPartyProductID then
		local f51_local4 = f51_local1.firstPartyProductID
		if STORE.IsGameUpsellBundle( f51_local2 ) then
			LUI.FlowManager.RequestPopupMenu( f51_arg0, "StoreGameUpsellPopup", true, f51_arg0._controllerIndex, false, {
				defaultProductId = f51_local4
			} )
		elseif STORE.IsZeusBundle( f51_local2 ) then
			LUI.FlowManager.RequestPopupMenu( f51_arg0, "StoreGameUpsellPopup", true, f51_arg0._controllerIndex, false, {
				isZeus = true,
				defaultProductId = f51_local4
			} )
		elseif STORE.IsCatalogReady( f51_arg0._controllerIndex ) then
			if 0 < STORE.GetNumItemsInBundle( f51_local2 ) then
				local f51_local5 = STORE.GetFirstPartyBundleData( f51_arg0._controllerIndex, f51_local2, f51_local4 )
				f51_local5.bundleIndex = f51_local0
				LUI.FlowManager.RequestAddMenu( "StoreBundlePreview", true, f51_arg0._controllerIndex, false, f51_local5 )
			else
				InGameStore.SelectProduct( f51_arg0._controllerIndex, f51_local4, InGameStorePurchaseType.BROWSE )
			end
		else
			LUI.FlowManager.RequestPopupMenu( nil, "generic_error_popup", false, nil, false, {
				message = f51_arg0._catalogFetchErrorMessage
			}, nil, false, true )
		end
		return 
	end
	local f51_local4 = {
		bundleID = f51_local1.id,
		rarity = f51_local1.rarity,
		description = f51_local1.description,
		bundleType = f51_local1.bundleType,
		titleImage = f51_local1.titleImage,
		currencyID = f51_local1.currencyID,
		currencyAmount = f51_local1.currencyAmount,
		startPurchaseImmediately = f51_arg0._startPurchaseImmediately,
		timerValue = f51_local1.purchaseEnd,
		bundleIndex = f51_local0,
		positionInGrid = f51_arg0._positionInGrid,
		categoryIndex = f51_arg3.categoryIndex,
		categoryName = f51_arg3.id,
		storeLayout = f51_arg0._storeLayout,
		sourceMenu = f51_arg0._sourceMenu,
		recommendationData = f51_arg0.recommendationData
	}
	f51_arg0._startPurchaseImmediately = false
	if not f51_arg3.justForYou then
		f51_local4.timerPubVar = f51_arg3.timerPubVar
	end
	if Dvar[0x9E5BE3B4BBA4E0E]( 0xBDC6E0303E8A88F ) and not BATTLEPASS.IsOwned( f51_arg0._controllerIndex ) and STORE.BundleContainsBattlePass( f51_local1.id ) then
		local f51_local6 = LUI.FlowManager.RequestAddMenu
		local f51_local7
		if BATTLEMAP.UseJUPBattleMapDesign() then
			f51_local7 = "JupBattlePassMenuPopup"
		else
			f51_local7 = "BattlePassMenuPopup"
		end
		f51_local6( f51_local7, true, f51_arg0._controllerIndex, false, {
			purchaseBattlePassInStore = true
		} )
	else
		LUI.FlowManager.RequestAddMenu( "StoreBundlePreview", true, f51_arg0._controllerIndex, false, f51_local4 )
	end
end

local f0_local6 = function ( f48_arg0, f48_arg1 )
	local f48_local0 = {
		{
			name = 0xA57ED7BA86C932F,
			titleImage = "mw_store_title_cod_points",
			asset = "mw_store_billboard_cod_points",
			id = STORE.CODPointsCategory
		},
		{
			name = 0x8719690F3B9D0A4,
			titleImage = "mw_store_title_cdl",
			asset = "mw_store_billboard_cdl",
			id = STORE.CDLCategory
		},
		{
			name = 0x4A0C945DA8015FB,
			titleImage = "mw_store_title_code_pack_ii",
			asset = "mw_store_billboard_code_pack_ii",
			id = STORE.MiscCategory
		},
		{
			name = 0xC58F6774721E829,
			titleImage = "mw_store_title_ghost_pack_oil_rig",
			asset = "mw_store_billboard_ghost_pack_oil_rig",
			id = STORE.TitlesCategory
		},
		{
			name = 0xBA2800536BEC5CF,
			titleImage = "mw_store_title_bocw_standard",
			asset = "mw_store_billboard_bocw_standard",
			id = STORE.ZeusCategory
		},
		{
			id = 4294967295,
			name = 0x217172E8F266058,
			titleImage = "mw_store_title_franchise_store",
			asset = "mw_store_billboard_franchise_store"
		}
	}
	f48_arg0._allCategoryData[#f48_arg0._allCategoryData].items = {}
	for f48_local1 = 1, #f48_local0, 1 do
		local f48_local4 = f48_local0[f48_local1]
		local f48_local5 = nil
		if f48_local4.id == -1 then
			f48_local5 = {
				asset = f48_local4.asset,
				name = f48_local4.name,
				titleImage = f48_local4.titleImage,
				buttonAction = function ( f50_arg0, f50_arg1 )
					local f50_local0 = STORE.GoToStore
					local f50_local1 = f48_arg0
					local f50_local2 = f48_arg0:GetCurrentMenu()
					f50_local0( f50_local1, f50_local2.id, f50_arg0.id )
				end
			}
		else
			local f48_local6 = InGameStore.GetCategoryProducts( f48_arg1, f48_local4.id )
			if f48_local6 and 0 < #f48_local6 then
				local f48_local7 = f48_local4.id == STORE.MiscCategory
				local f48_local8 = f48_local4.id == STORE.TitlesCategory
				local f48_local9 = f48_local4.id == STORE.ZeusCategory
				local f48_local10 = false
				local f48_local11 = false
				local f48_local12 = false
				local f48_local13 = nil
				if f48_local7 then
					for f48_local14 = 1, #f48_local6, 1 do
						if f48_local6[f48_local14].productId == STORE.CODEID or f48_local6[f48_local14].productId == STORE.CODE2ID then
							local f48_local17 = InGameStore.GetProduct( f48_arg1, f48_local6[f48_local14].productId )
							local f48_local18
							if f48_local17 then
							
							else
								f48_local18 = f48_local17.status ~= InGameStoreProductStatus.NOT_OWNED
							end
							f48_local18 = f48_local17
						end
					end
				end
				if f48_local8 then
					for f48_local14 = 1, #f48_local6, 1 do
						if f48_local6[f48_local14].productId == STORE.MW2RProductID then
							local f48_local17 = InGameStore.GetProduct( f48_arg1, STORE.MW2RProductID )
							local f48_local18
							if f48_local17 then
							
							else
								f48_local18 = f48_local17.status ~= InGameStoreProductStatus.NOT_OWNED
							end
							f48_local18 = f48_local17
						end
					end
				end
				if f48_local9 then
					local f48_local14 = false
					for f48_local15 = 1, #f48_local6, 1 do
						local f48_local18 = InGameStore.GetProduct( f48_arg1, f48_local6[f48_local15].productId )
						local f48_local20
						if f48_local18 then
							f48_local20 = f48_local18
						else
							f48_local20 = f48_local18.status ~= InGameStoreProductStatus.NOT_OWNED
						end
						if not f48_local12 then
							f48_local12 = not f48_local20
						end
						if f48_local12 and not f48_local13 then
							f48_local13 = f48_local6[f48_local15].productId
						end
						if f48_local20 and f48_local6[f48_local15].productId == STORE.ZeusStandardID then
							f48_local14 = true
						end
					end
					if f48_local14 and f48_local12 and Engine[0x575E9C5B9AAB6F4]() then
						local f48_local15 = InGameStore.GetProduct( f48_arg1, STORE.ZeusUltimateUpgradeID )
						if f48_local15 then
							f48_local16 = f48_local15
						else
							local f48_local16 = f48_local15.status ~= InGameStoreProductStatus.NOT_OWNED
						end
						if not f48_local16 then
							f48_local4.titleImage = "mw_store_title_bocw_ultimate"
							f48_local4.asset = "mw_store_billboard_bocw_ultimate"
						end
					end
				end
				local f48_local14
				if f48_local8 then
					f48_local14 = f48_local8
				else
					f48_local14 = f48_local11
				end
				local f48_local15
				if f48_local7 then
					f48_local15 = f48_local7
				else
					f48_local15 = f48_local10
				end
				local f48_local16
				if f48_local9 then
					f48_local16 = f48_local9
				else
					f48_local16 = f48_local12
				end
				local f48_local19
				if f48_local8 or f48_local7 or f48_local9 then
					if not f48_local14 then
						f48_local19 = f48_local14
					elseif not f48_local15 then
						f48_local19 = f48_local15
					else
						f48_local19 = f48_local16
					end
				else
					f48_local19 = true
				end
				if f48_local19 then
					local f48_local17 = {
						asset = f48_local4.asset,
						name = f48_local4.name,
						titleImage = f48_local4.titleImage,
						buttonAction = function ( f49_arg0, f49_arg1 )
							local f49_local0 = STORE.GoToStore
							local f49_local1 = f48_arg0
							local f49_local2 = f48_arg0:GetCurrentMenu()
							f49_local2 = f49_local2.id
							local f49_local3 = f49_arg0.id
							local f49_local4 = f48_arg0
							if not f49_local4 then
								f49_local4 = f48_arg0[1].productId
							end
							f49_local0( f49_local1, f49_local2, f49_local3, f49_local4 )
						end
					}
				end
			end
		end
		if f48_local5 then
			table.insert( f48_arg0._allCategoryData[#f48_arg0._allCategoryData].items, f48_local5 )
		end
	end
	f48_arg0:dispatchEventToChildren( {
		name = "categoryTimerUpdate"
	} )
	if f48_arg0._allCategoryData[#f48_arg0._allCategoryData].isFirstPartyCategory and f48_arg0._selectedCategory == f48_arg0._allCategoryData[#f48_arg0._allCategoryData].categoryIndex then
		local f48_local1 = f48_arg0.BundlesGrid:GetElementAtPosition( 0, f48_arg0._selectedCategory - 1 )
		if f48_local1 then
			local f48_local2 = LUI.FlowManager.GetScopedData( f48_arg0 )
			local f48_local3 = f48_local1.RowGrid
			if not f48_local2.firstPartyColumnIndex or f48_local2.firstPartyColumnIndex == 1 then
				local f48_local21 = f48_local3:GetElementAtPosition( 0, 0 )
				f48_local21:processEvent( {
					name = "button_over"
				} )
			else
				f48_local3:SetFocusedPosition( {
					y = 0,
					x = f48_local2.firstPartyColumnIndex - 1
				}, true )
			end
		end
	end
end

local f0_local7 = function ( f46_arg0, f46_arg1 )
	if STORE.CategoryType[f46_arg0._allCategoryData[STORE.ZeusCategoryIndex].id] ~= STORE.CategoryType.zeus_preorder then
		
	else
		
	end
	f46_arg0._allCategoryData[STORE.ZeusCategoryIndex].items = STORE.GetZeusCategoryData( f46_arg1 )
	local f46_local0 = LUI.FlowManager.GetScopedData( f46_arg0 )
	for f46_local1 = 1, #f46_arg0._allCategoryData[STORE.ZeusCategoryIndex].items, 1 do
		f46_arg0._allCategoryData[STORE.ZeusCategoryIndex].items[f46_local1].buttonAction = function ( f47_arg0, f47_arg1 )
			f46_arg0.openedZeusUpsell = true
			LUI.FlowManager.RequestAddMenu( "StoreGameUpsellPopup", true, f46_arg0, false, {
				preFetched = true,
				isZeus = true,
				defaultProductId = f46_arg0._allCategoryData[STORE.ZeusCategoryIndex].items[f46_arg0].productId
			}, true )
		end
		
	end
	f46_arg0:dispatchEventToChildren( {
		name = "categoryTimerUpdate"
	} )
	if f46_arg0._allCategoryData[STORE.ZeusCategoryIndex].isFirstPartyCategory and f46_arg0._selectedCategory == f46_arg0._allCategoryData[STORE.ZeusCategoryIndex].categoryIndex then
		local f46_local1 = f46_arg0.BundlesGrid:GetElementAtPosition( 0, f46_arg0._selectedCategory - 1 )
		if f46_local1 then
			local f46_local2 = LUI.FlowManager.GetScopedData( f46_arg0 )
			local f46_local3 = f46_local1.RowGrid
			if not f46_local2.firstPartyColumnIndex or f46_local2.firstPartyColumnIndex == 1 then
				local f46_local4 = f46_local3:GetElementAtPosition( 0, 0 )
				f46_local4:processEvent( {
					name = "button_over"
				} )
			else
				f46_local3:SetFocusedPosition( {
					y = 0,
					x = f46_local2.firstPartyColumnIndex - 1
				}, true )
			end
		end
	end
end

local f0_local8 = function ( f43_arg0, f43_arg1 )
	f43_arg0._catalogFetchErrorMessage = Engine[0xED84C33EC5F01EA]( 0xF9FA80C982BE8B8 )
	STORE.AsyncFetchCatalogue( f43_arg0, f43_arg1, {
		useCache = true,
		onFetchSuccess = function ( f45_arg0 )
			f43_arg0:dispatchEventToChildren( {
				catalogFetched = true,
				name = "categoryTimerUpdate"
			} )
			f43_arg0( f45_arg0, f43_arg0 )
			f43_arg0( f45_arg0, f43_arg0 )
		end,
		onFetchError = function ( f44_arg0, f44_arg1 )
			f43_arg0._catalogFetchErrorMessage = f44_arg1.message
			if Commerce[0x38D9AC0641AEF71]() then
				f43_arg0( f43_arg0, f43_arg0 )
				f43_arg0( f43_arg0, f43_arg0 )
			else
				f44_arg0._allCategoryData[#f44_arg0._allCategoryData].items[1].fetchingDataFailed = true
				f44_arg0:dispatchEventToChildren( {
					name = "categoryTimerUpdate"
				} )
			end
		end
	} )
end

local f0_local9 = function ( f42_arg0 )
	local f42_local0 = {}
	local f42_local1 = "DefaultSequence"
	local f42_local2 = "DefaultSequence"
	if 1 < f42_arg0._selectedCategory then
		for f42_local3 = f42_arg0._selectedCategory - 1, 1, -1 do
			table.insert( f42_local0, f42_arg0._allCategoryData[f42_local3] )
		end
	end
	if f42_arg0._selectedCategory < #f42_arg0._allCategoryData then
		for f42_local3 = f42_arg0._selectedCategory + 1, #f42_arg0._allCategoryData, 1 do
			table.insert( f42_local0, f42_arg0._allCategoryData[f42_local3] )
		end
	end
	for f42_local3 = 1, #f42_local0, 1 do
		local f42_local6 = f42_local0[f42_local3]
		f42_local6.hasNewItems = false
		f42_local6.hasFreeItems = false
		if f0_local0 and Dvar[0x9E5BE3B4BBA4E0E]( 0x21761462AFB421E ) then
			f42_local6.hasFreeItems = STORE.CategoryHasFreeItems( f42_arg0._controllerIndex, f42_local6 )
		end
		for f42_local7 = 1, #f42_local6.items, 1 do
			local f42_local10 = f42_local6.items[f42_local7]
			if f42_local10.id and not STORE.HasSeenItem( f42_arg0._controllerIndex, f42_local10.id ) then
				f42_local6.hasNewItems = true
				break
			end
		end
		if f42_local6.categoryIndex < f42_arg0._selectedCategory then
			if f42_local6.hasFreeItems then
				f42_local1 = "Free"
			end
			if f42_local1 ~= "Free" and f42_local6.hasNewItems then
				f42_local1 = "New"
			end
		end
		if f42_arg0._selectedCategory < f42_local6.categoryIndex then
			if f42_local6.hasFreeItems then
				f42_local2 = "Free"
			end
			if f42_local2 ~= "Free" and f42_local6.hasNewItems then
				f42_local2 = "New"
			end
		end
	end
	if f42_local1 == "Free" then
		f42_arg0.ArrowUp:SetFreeState()
	else
		f42_arg0.ArrowUp:ClearState()
		ACTIONS.AnimateSequence( f42_arg0.ArrowUp, f42_local1 )
	end
	if f42_local2 == "Free" then
		f42_arg0.ArrowDown:SetFreeState()
	else
		f42_arg0.ArrowDown:ClearState()
		ACTIONS.AnimateSequence( f42_arg0.ArrowDown, f42_local2 )
	end
end

local f0_local10 = function ( f4_arg0, f4_arg1, f4_arg2 )
	f4_arg0.BillboardCategoryButtonAction = f0_local0
	f4_arg0._gridChildMouseFocusCount = 0
	f4_arg0._controllerIndex = f4_arg1
	f4_arg0.FocusBundleByID = function ( f41_arg0, f41_arg1, f41_arg2 )
		f4_arg0( f4_arg0, f41_arg1, f41_arg2 )
	end
	
	f4_arg0.FocusButtonByName = function ( f40_arg0, f40_arg1 )
		f4_arg0( f4_arg0, f40_arg1 )
	end
	
	Engine[0x685AE31DEDA30A4]( "quartermaster" )
	f4_arg0.BundlesGrid:SetMask( f4_arg0.GridMask )
	f4_arg0.FranchiseStorePrompt:SetText( Engine[0xED84C33EC5F01EA]( 0x43DD9EF63A48D50 ) )
	f4_arg0:addElement( LOOT.GetLootFlareMaterialStreamer() )
	f4_arg0._controllerIndex = f4_arg1
	f4_arg0._promotedItems = STORE.ParsePromotedItems( f4_arg1 )
	f4_arg0._totalCP = 0
	f0_local0( f4_arg0, f4_arg1 )
	if QUARTERMASTER.itemData then
		QUARTERMASTER.itemData = {}
	end
	f4_arg0.BackButtonOverride = function ( f39_arg0, f39_arg1 )
		local f39_local0 = LUI.FlowManager.GetScopedData( f39_arg0 )
		local f39_local1 = LUI.FlowManager.GetPerControllerPersistentData( f4_arg0 )
		f39_local1._selectedCategory = nil
		if f39_local0.useStandaloneStore then
			LUI.FlowManager.RequestLeaveMenu( f39_arg0 )
		else
			local f39_local2
			if f39_arg1.qualifier == "keyboard" or f39_arg1.qualifier == "gamepad" then
				f39_local2 = false
			else
				f39_local2 = true
			end
			local f39_local3
			if f39_local2 then
				f39_local3 = FocusType.MouseOver
				if not f39_local3 then
				
				else
					local f39_local4 = f39_arg0:getParent()
					f39_local4.Tabs:FocusTab( f39_arg1.controller or f4_arg0, 0, f39_local3 )
				end
			end
			f39_local3 = FocusType.Gamepad
		end
		return false
	end
	
	local f4_local0 = function ( f38_arg0, f38_arg1, f38_arg2, f38_arg3, f38_arg4 )
		local f38_local0 = LUI.FlowManager.GetPerControllerPersistentData( f4_arg0 )
		f4_arg0._categoryData = f38_arg2
		if f4_arg0.DisableAutoScrollTimer and not f4_arg0._autoScroll then
			f4_arg0.DisableAutoScrollTimer()
		end
		if #f38_arg2.items < f38_arg3 then
			f38_arg3 = 1
		end
		local f38_local1 = f38_arg2.items[f38_arg3]
		if f38_arg4 then
			local f38_local2 = f38_arg4:GetFocusPosition( LUI.DIRECTION.horizontal )
			if f38_local2 then
				f38_local1.positionInGrid = f38_local2 + 1
				f4_arg0._positionInGrid = f38_local1.positionInGrid
			end
		end
		if f38_local1.purchaseEnd then
			local f38_local2, f38_local3, f38_local4 = STORE.GetCategoryTimeLeft( nil, f38_local1.purchaseEnd )
			if f38_local2 <= 0 then
				f4_arg0:dispatchEventToChildren( {
					expiredBundle = true,
					name = "categoryTimerUpdate"
				} )
				return 
			end
		end
		f4_arg0.BillboardItem:UpdateBillboard( f38_local1, f38_arg2.isFirstPartyCategory )
		if not f38_arg2.isFirstPartyCategory then
			if QUARTERMASTER.itemData and QUARTERMASTER.itemData.sessionId ~= nil then
				QUARTERMASTER.RecordMenuBrowseEvent( f4_arg0, false, f4_arg0._sourceMenu )
			end
			if f4_arg0._initialBrowse then
				if not f4_arg0._storeEnterComplete then
					QUARTERMASTER.RecordStoreEnterEvent( f4_arg0, f4_arg0._storeLayout, f4_arg0.recommendationData, f4_arg0._sourceMenu )
					f4_arg0._storeEnterComplete = true
				end
				QUARTERMASTER.BeginMenuBrowseEvent( f4_arg0, f38_arg2, f38_local1, f4_arg0._storeLayout, f4_arg0.recommendationData )
			else
				f4_arg0._initialBrowse = true
			end
		end
		local f38_local2 = f4_arg0._selectedCategory ~= f38_arg2.categoryIndex
		f4_arg0._selectedCategory = f38_arg2.categoryIndex
		f38_local0._selectedCategory = f38_arg2.categoryIndex
		f4_arg0._selectedBundle = f38_arg3
		if f38_local2 then
			f4_arg0:dispatchEventToChildren( {
				categoryChanged = true,
				name = "categoryTimerUpdate"
			} )
			f4_arg0( f4_arg0 )
		end
	end
	
	local f4_local1 = JSON[0x2165A8104C064EE]( Store[0xB6B0898C7795778]( f4_arg1 ) )
	local f4_local2 = STORE.GetCategoryData( f4_arg1 )
	f4_arg0._allCategoryData = f4_local2
	f4_arg0._recommendations = STORE.CheckForPersonalRecommendations( f4_arg1 )
	if f4_local1.scheduleFilename then
		f4_arg0._storeSchedule = Engine[0x8327159C82123B6]( f4_arg1, f4_local1.scheduleFilename )
		f4_arg0._storeSchedule = JSON[0x2165A8104C064EE]( f4_arg0._storeSchedule )
		f4_arg0._storeSchedule = f4_arg0._storeSchedule.schedule
		for f4_local6, f4_local7 in ipairs( f4_arg0._storeSchedule ) do
			f4_local7.startDate = tonumber( f4_local7.startDateUTC )
			f4_local7.endDate = tonumber( f4_local7.endDateUTC )
			f4_local7.startDateUTC = nil
			f4_local7.endDateUTC = nil
		end
	end
	if not f4_arg0._recommendations then
		f4_arg0.recommendationData = {
			isEnabled = false
		}
	end
	local f4_local8 = LUI.FlowManager.GetScopedData( f4_arg0 )
	local f4_local3 = f4_local8.openedZeusUpsell
	if f4_local3 then
		f4_local3 = STORE.IsZeusOwned( f4_arg1 )
	end
	f4_local8.openedZeusUpsell = nil
	if f4_local3 then
		f4_local8.selectedBundleIndex = nil
		f4_local8.firstPartyColumnIndex = nil
	end
	f4_arg0._allCategoryData[#f4_arg0._allCategoryData + 1] = {
		isFirstPartyCategory = true,
		name = 0x217172E8F266058
	}
	for f4_local4 = 1, #f4_local2, 1 do
		local f4_local9 = f4_local2[f4_local4]
		f4_local9.items = f4_local9.items or {}
		f0_local0( f4_arg0, f4_arg1, f4_local9 )
		f4_local9.categoryIndex = f4_local4
	end
	f4_arg0._storeLayout = f4_local1.layoutType
	local f4_local5 = nil
	if LUI.FlowManager.IsMenuOnTop( "BRMainMenuStore" ) then
		f4_local5 = "BladeMenu"
	else
		f4_local5 = -1
	end
	f4_arg0._sourceMenu = f4_local5
	f4_arg0._storeEnterComplete = false
	f4_arg0._initialBrowse = false
	local f4_local7 = f4_arg0:Wait( 2000, true )
	f4_local7.onComplete = function ()
		if not f4_arg0._storeEnterComplete then
			QUARTERMASTER.RecordStoreEnterEvent( f4_arg0, f4_arg0, f4_arg0.recommendationData, f4_arg0 )
			f4_arg0._storeEnterComplete = true
		end
	end
	
	local f4_local9 = function ( f36_arg0, f36_arg1 )
		if f36_arg1.name then
			if f36_arg1.items[1].emptyCategory then
				f36_arg0.CategoryText:setText( ToUpperCase(), Engine[0xED84C33EC5F01EA]( 0x6E9DDE77CEDA8C0, Engine[0xED84C33EC5F01EA]( f36_arg1.name ), Engine[0xED84C33EC5F01EA]( 0x28ED4B035A1D17 ) ) )
			else
				f36_arg0.CategoryText:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( f36_arg1.name ) ) )
			end
		else
			f36_arg0.CategoryText:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x28ED4B035A1D17 ) ) )
		end
	end
	
	f4_arg0.BundlesGrid:SetRefreshChild( function ( f22_arg0, f22_arg1, f22_arg2 )
		local f22_local0 = f4_arg0[f22_arg2 + 1]
		f22_arg0.RowGrid:SetDefaultFocus( function ()
			local f35_local0 = LUI.FlowManager.GetScopedData( f22_arg0 )
			local f35_local1 = f22_arg0._selectedBundle
			if not f35_local1 then
				f35_local1 = f35_local0.selectedBundleIndex or 1
			end
			if #f22_arg0.items < f35_local1 then
				f35_local1 = #f22_arg0.items
			end
			f35_local0.selectedBundleIndex = nil
			return {
				y = 0,
				x = f35_local1 - 1
			}
		end )
		f22_arg0.RowGrid:SetRefreshChild( function ( f24_arg0, f24_arg1, f24_arg2 )
			local f24_local0 = f22_arg0.items[f24_arg1 + 1]
			if not f24_local0 then
				f24_arg0:registerEventHandler( "button_over", function ( element, event )
					
				end )
				f24_arg0:registerEventHandler( "button_action", function ( element, event )
					
				end )
				f24_arg0:registerEventHandler( "mouseenter", function ( element, event )
					
				end )
				f24_arg0:registerEventHandler( "mouseleave", function ( element, event )
					
				end )
				f24_arg0:registerEventHandler( "categoryTimerUpdate", function ( element, event )
					
				end )
				f24_arg0:UpdateNewIndicator( 0 )
				return 
			end
			f24_arg0:UpdateButton( f24_local0, f22_arg0._promotedItems, f22_arg0.isFirstPartyCategory )
			if not f22_arg0.isFirstPartyCategory then
				if not f24_local0.emptyCategory and f24_arg0.NewItemNotification and not STORE.HasSeenItem( f22_arg0, f24_local0.id ) then
					f24_arg0:UpdateNewIndicator( 1 )
				else
					f24_arg0:UpdateNewIndicator( 0 )
				end
			else
				f24_arg0:UpdateNewIndicator( 0 )
			end
			f24_arg0:registerEventHandler( "button_over", function ( element, event )
				f24_arg0( element, event, f24_arg0, f24_arg0 + 1, f24_arg0.RowGrid )
				f24_arg0._focusedBundle = element
			end )
			f24_arg0:registerEventHandler( "button_action", function ( element, event )
				f24_arg0:BillboardCategoryButtonAction( element, event, f24_arg0 )
			end )
			f24_arg0:registerEventHandler( "mouseenter", function ( element, event )
				f24_arg0._gridChildMouseFocusCount = f24_arg0._gridChildMouseFocusCount + 1
			end )
			f24_arg0:registerEventHandler( "mouseleave", function ( element, event )
				f24_arg0._gridChildMouseFocusCount = math.max( 0, f24_arg0._gridChildMouseFocusCount - 1 )
			end )
			f24_arg0:registerEventHandler( "categoryTimerUpdate", function ( element, event )
				if not event.expiredBundle and f24_arg0.purchaseEnd then
					local f25_local0, f25_local1, f25_local2 = STORE.GetCategoryTimeLeft( nil, f24_arg0.purchaseEnd )
					if f25_local0 <= 0 then
						f24_arg0:dispatchEventToChildren( {
							expiredBundle = true,
							name = "categoryTimerUpdate"
						} )
					end
				end
			end )
		end )
		f22_arg0._timerValue = nil
		f22_arg0._idPubVarString = nil
		f22_arg0:registerEventHandler( "categoryTimerUpdate", function ( element, event )
			local f23_local0 = f22_arg0.categoryIndex == f22_arg0._selectedCategory
			if f22_arg0.isFirstPartyCategory and not event.firstPartyCategoryIgnoreUpdate then
				if not event.categoryChanged then
					f22_arg0.RowGrid:SetNumRows( 1 )
					f22_arg0.RowGrid:SetNumColumns( #f22_arg0.items )
					f22_arg0.RowGrid:RefreshContent()
				end
				if f23_local0 then
					f22_arg0.NoMoreItemsMessage:SetAlpha( 0 )
				end
				return 
			end
			local f23_local1 = f22_arg0.items[1]
			if f23_local0 then
				if f23_local1.emptyCategory then
					f22_arg0.NoMoreItemsMessage:SetAlpha( 1 )
				else
					f22_arg0.NoMoreItemsMessage:SetAlpha( 0 )
				end
			end
			if not f22_arg0.justForYou then
				local f23_local2, f23_local3, f23_local4 = STORE.GetCategoryTimeLeft( f22_arg0.timerPubVar )
				if not f22_arg0._timerValue and f22_arg0.timerPubVar and f23_local4 ~= "" then
					f22_arg0._timerValue = f23_local4
				end
				local f23_local5 = f22_arg0.idPubVar and Dvar[0x54084D7CA2317BB]( f22_arg0.idPubVar ) or ""
				if not f22_arg0._idPubVarString and f23_local5 ~= "" then
					f22_arg0._idPubVarString = f23_local5
				end
				local f23_local6 = event.expiredBundle and f23_local0
				local f23_local7 = event.catalogFetched
				local f23_local8 = f22_arg0._timerValue
				if f23_local8 then
					f23_local8 = f22_arg0._timerValue ~= f23_local4
				end
				local f23_local9 = f22_arg0._idPubVarString
				if f23_local9 then
					f23_local9 = f22_arg0._idPubVarString ~= f23_local5
				end
				local f23_local10 = event.categoryChanged
				local f23_local11
				if not f23_local6 then
					f23_local11 = f23_local6
				elseif not f23_local7 then
					f23_local11 = f23_local7
				elseif not f23_local8 then
					f23_local11 = f23_local8
				else
					f23_local11 = f23_local9
				end
				if f23_local11 or f23_local10 then
					f22_arg0( f22_arg0, f22_arg0, f22_arg0 )
					if f23_local11 then
						f22_arg0.RowGrid:SetNumRows( 1 )
						f22_arg0.RowGrid:SetNumColumns( #f22_arg0.items )
						f22_arg0.RowGrid:RefreshContent()
					end
					f22_arg0._timerValue = f23_local4
					f22_arg0._idPubVarString = f22_arg0.idPubVarString
					if f23_local6 or f23_local7 and f22_arg0.hasFirstPartyBundle then
						f22_arg0.RowGrid:processEvent( {
							name = "lose_focus"
						} )
						f22_arg0.RowGrid:SetFocusedPosition( {
							x = 0,
							y = 0
						}, true )
					end
				end
			end
			f22_arg0( f22_arg0, f22_arg0 )
		end )
		f22_arg0.RowGrid:SetNumRows( 1 )
		f22_arg0.RowGrid:SetNumColumns( #f22_local0.items )
		f22_arg0.RowGrid:RefreshContent()
		f4_arg0( f22_arg0, f22_local0 )
	end )
	f4_arg0.BundlesGrid:SetNumColumns( 1 )
	f4_arg0.BundlesGrid:SetNumRows( #f4_local2 )
	f4_arg0.BundlesGrid:RefreshContent()
	local self = LUI.UITimer.new( {
		interval = 1000,
		event = {
			firstPartyCategoryIgnoreUpdate = true,
			name = "categoryTimerUpdate"
		}
	} )
	self.id = "timer"
	f4_arg0:addElement( self )
	local f4_local11 = LUI.UITimer.new( {
		event = "autoScrollTimerUpdate",
		interval = f0_local0
	} )
	f4_local11.id = "autoScrollTimer"
	f4_arg0:addElement( f4_local11 )
	f4_arg0._autoScrollEnabled = true
	f4_arg0:registerEventHandler( "autoScrollTimerUpdate", function ( element, event )
		local f21_local0 = LUI.IsLastInputMouseNavigation( f4_arg0 )
		if f21_local0 then
			f21_local0 = 0 < f4_arg0._gridChildMouseFocusCount
		end
		if f4_arg0._autoScrollEnabled and not f21_local0 and f4_arg0._selectedCategory and f4_arg0._selectedBundle and 0 < #f4_arg0 then
			local f21_local1 = f4_arg0[f4_arg0._selectedCategory]
			local f21_local2 = f4_arg0._selectedBundle + 1
			if #f21_local1.items < f21_local2 then
				f21_local2 = 1
			end
			local f21_local3 = f4_arg0.BundlesGrid:GetElementAtPosition( 0, f4_arg0._selectedCategory - 1 )
			if f21_local3 then
				local f21_local4 = f21_local3.RowGrid
				f4_arg0._autoScroll = true
				f21_local4:SetFocusedPosition( {
					y = 0,
					x = f21_local2 - 1
				}, false )
				f4_arg0._autoScroll = false
			end
		end
	end )
	f4_arg0._autoScrollEnabledTimerHolder = LUI.UIElement.new()
	f4_arg0:addElement( f4_arg0._autoScrollEnabledTimerHolder )
	f4_arg0.DisableAutoScrollTimer = function ()
		f4_arg0._autoScrollEnabled = false
		local f19_local0 = f4_arg0._autoScrollEnabledTimerHolder:Wait( Dvar[0x22EAAB59AA27E9B]( 0xC6C7E2C8B16FC5 ), true )
		f19_local0.onComplete = function ()
			f19_local0._autoScrollEnabled = true
		end
		
	end
	
	f4_arg0:AddGamepadEventCallback( "button_alt1", function ( f18_arg0, f18_arg1 )
		if not f4_arg0[f18_arg0._selectedCategory].isFirstPartyCategory then
			f18_arg0._startPurchaseImmediately = true
			f18_arg0:BillboardCategoryButtonAction( nil, nil, f4_arg0[f18_arg0._selectedCategory] )
		end
	end )
	f4_arg0:AddGamepadEventCallback( "button_alt2", function ( f17_arg0, f17_arg1 )
		Engine[0xC4146BA76D0F982]( SOUND_SETS.default.action )
		local f17_local0 = f17_arg1.controller or f4_arg0
		if not f17_arg0._storeEnterComplete then
			QUARTERMASTER.RecordStoreEnterEvent( f17_local0, f17_arg0._storeLayout, f17_arg0.recommendationData, f17_arg0._sourceMenu )
			QUARTERMASTER.BeginMenuBrowseEvent( f17_local0, f17_arg0._categoryData, f17_arg0._categoryData.items[1], f17_arg0._storeLayout, f17_arg0.recommendationData )
			f17_arg0._storeEnterComplete = true
		end
		QUARTERMASTER.RecordMenuBrowseEvent( f17_local0, true )
		local f17_local1 = STORE.GoToStore
		local f17_local2 = f17_local0
		local f17_local3 = f17_arg0:GetCurrentMenu()
		f17_local1( f17_local2, f17_local3.id, f17_arg0.id )
	end )
	f4_arg0:AddGamepadEventCallback( "button_left_stick", function ( f16_arg0, f16_arg1 )
		local f16_local0 = Dvar[0x9E5BE3B4BBA4E0E]( 0x3DC3E3930B5C57D )
		local f16_local1 = f16_arg1.controller or f4_arg0
		if f16_local0 then
			LUI.FlowManager.RequestPopupMenu( f16_arg0, "CreatorCodePopup", true, f16_local1, false, f4_arg0 )
			Engine[0xC4146BA76D0F982]( SOUND_SETS.default.selectAlt )
		end
	end )
	f4_arg0:addEventHandler( "gamepad_button", function ( f15_arg0, f15_arg1 )
		if f15_arg1.controller ~= f4_arg0 then
			if f15_arg1.button == "primary" or f15_arg1.button == "alt1" or f15_arg1.button == "alt2" or f15_arg1.button == "left" or f15_arg1.button == "right" or f15_arg1.button == "up" or f15_arg1.button == "down" then
				return true
			end
		elseif CONDITIONS.ButtonLeftStick( f15_arg0, f15_arg1 ) then
			local f15_local0 = Dvar[0x9E5BE3B4BBA4E0E]( 0x3DC3E3930B5C57D )
			local f15_local1 = f15_arg1.controller or f4_arg0
			if f15_local0 then
				LUI.FlowManager.RequestPopupMenu( f15_arg0, "CreatorCodePopup", true, f15_local1, false, f4_arg0 )
				Engine[0xC4146BA76D0F982]( SOUND_SETS.default.selectAlt )
			end
		elseif CONDITIONS.ButtonAltTwo( f15_arg0, f15_arg1 ) then
			Engine[0xC4146BA76D0F982]( SOUND_SETS.default.action )
			local f15_local0 = f15_arg1.controller or f4_arg0
			if not f15_arg0._storeEnterComplete then
				QUARTERMASTER.RecordStoreEnterEvent( f15_local0, f15_arg0._storeLayout, f15_arg0.recommendationData, f15_arg0._sourceMenu )
				QUARTERMASTER.BeginMenuBrowseEvent( f15_local0, f15_arg0._categoryData, f15_arg0._categoryData.items[1], f15_arg0._storeLayout, f15_arg0.recommendationData )
				f15_arg0._storeEnterComplete = true
			end
			QUARTERMASTER.RecordMenuBrowseEvent( f15_local0, true )
			local f15_local1 = STORE.GoToStore
			local f15_local2 = f15_local0
			local f15_local3 = f15_arg0:GetCurrentMenu()
			f15_local1( f15_local2, f15_local3.id, f15_arg0.id )
		elseif CONDITIONS.ButtonAltOne( f15_arg0, f15_arg1 ) and not f4_arg0[f15_arg0._selectedCategory].isFirstPartyCategory then
			f15_arg0._startPurchaseImmediately = true
			f15_arg0:BillboardCategoryButtonAction( nil, nil, f4_arg0[f15_arg0._selectedCategory] )
		end
	end )
	local f4_local12 = function ( f14_arg0, f14_arg1 )
		if f14_arg0._menu then
			f14_arg0._menu:RemoveButtonHelperText( "button_alt2" )
			if CONDITIONS.IsGamepad( f14_arg1.controllerIndex ) then
				f14_arg0.FranchiseStorePrompt:SetAlpha( 1 )
				if f14_arg0._gridChildMouseFocusCount == 0 and f14_arg0._focusedBundle then
					f14_arg0._focusedBundle:GainFocus( f14_arg1 )
				end
			else
				f14_arg0.FranchiseStorePrompt:SetAlpha( 0 )
				f14_arg0._menu:AddButtonHelperText( {
					kbm_only = true,
					button_ref = "button_alt2",
					helper_text = Engine[0xED84C33EC5F01EA]( 0x217172E8F266058 ),
					container = f14_arg0.FranchisePromptContainer,
					containerAlignment = LUI.Alignment.Right
				} )
			end
		end
	end
	
	f4_arg0.BundlesGrid:addEventHandler( "layout_initialized", function ( f12_arg0, f12_arg1 )
		f4_arg0._menu = f12_arg0:GetCurrentMenu()
		local f12_local0 = f12_arg0:GetParent()
		f12_local0:SubscribeToInputTypeModel( f12_arg0._controllerIndex, function ( f13_arg0, f13_arg1 )
			f12_arg0( f13_arg1, {
				controllerIndex = f13_arg1._controllerIndex
			} )
		end )
		if LUI.IsLastInputMouseNavigation( f4_arg0 ) then
			local f12_local1 = LUI.FlowManager.GetPerControllerPersistentData( f4_arg0 )
			if f12_local1._selectedCategory then
				f12_arg0:SetFocusedPosition( {
					x = 0,
					y = f12_local1._selectedCategory - 1
				}, false )
			else
				f12_arg0:GainFocus( {
					controller = f4_arg0
				} )
			end
		end
	end )
	f4_arg0.ArrowUp:addEventHandler( "grid_focus_up_blocked", function ( f11_arg0, f11_arg1 )
		f11_arg0:SetAlpha( 0, 100 )
	end )
	f4_arg0.ArrowUp:addEventHandler( "grid_focus_up_not_blocked", function ( f10_arg0, f10_arg1 )
		f10_arg0:SetAlpha( 1, 200 )
	end )
	f4_arg0.ArrowDown:addEventHandler( "grid_focus_down_blocked", function ( f9_arg0, f9_arg1 )
		f9_arg0:SetAlpha( 0, 100 )
	end )
	f4_arg0.ArrowDown:addEventHandler( "grid_focus_down_not_blocked", function ( f8_arg0, f8_arg1 )
		f8_arg0:SetAlpha( 1, 200 )
	end )
	local f4_local13 = function ( f7_arg0, f7_arg1 )
		if f7_arg1.down and f7_arg1.qualifier == "mousewheel" then
			return f4_arg0.BundlesGrid:processEvent( f7_arg1 )
		else
			
		end
	end
	
	f4_arg0.BillboardItem.Image:SetHandleMouse( true )
	f4_arg0.BillboardItem.Image:registerEventHandler( "leftmousedown", function ( element, event )
		return true
	end )
	f4_arg0.BillboardItem.Image:registerEventHandler( "leftmouseup", function ( element, event )
		f4_arg0:BillboardCategoryButtonAction( element, event, f4_arg0._allCategoryData[f4_arg0._selectedCategory] )
		return true
	end )
	f4_arg0.BillboardItem.Image:addEventHandler( "gamepad_button", f4_local13 )
	f4_arg0.BundlesGrid._showNumbersAndArrowsKBM = true
	f4_arg0.BundlesGrid._updateArrowVisibilityOnRefresh = false
	f4_arg0.BundlesGrid._alwaysTrapMouseWheel = true
	f4_arg0.MouseScrollCatcher:SetHandleMouse( true )
	f4_arg0.MouseScrollCatcher:OverrideMouseCursorType( MouseCursorType.CURSOR_TYPE_ARROW_NORMAL )
	f4_arg0.MouseScrollCatcher:addEventHandler( "gamepad_button", f4_local13 )
end

function MPStoreBillboardGrid( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = MenuBuilder
	local f1_local2 = f1_local0.UIElement.new()
	f1_local2:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920, 0, 1080 )
	f1_local2.id = "MPStoreBillboardGrid"
	local f1_local3
	if f1_arg1 then
		f1_local3 = f1_arg1
	else
		f1_local3 = f1_arg1.controllerIndex
	end
	f1_local3 = f1_local0.ValidateControllerIndex( f1_local2, f1_local3 )
	local f1_local4 = nil
	f1_local4 = f1_local0.UIImage.new()
	f1_local4[0x8B72E07B55C3AC0] = "Background"
	ACTIONS.ScaleFullscreen( f1_local4 )
	f1_local4:SetRGB( 0, 0 )
	f1_local4:SetAlpha( 0.95, 0 )
	f1_local4:setImage( RegisterMaterial( 0x3A8F29C0EC8E46E ), 0 )
	f1_local4:SetVMin( 0.5, 0 )
	f1_local2:addElement( f1_local4 )
	f1_local2[0xD4176E7CA246EDD] = f1_local4
	local f1_local5 = nil
	f1_local5 = f1_local0.UIImage.new()
	f1_local5[0x8B72E07B55C3AC0] = "MouseScrollCatcher"
	f1_local5:SetRGB( 0, 0 )
	f1_local5:SetAlpha( 0, 0 )
	f1_local5:setImage( RegisterMaterial( 0x3A8F29C0EC8E46E ), 0 )
	f1_local5:SetVMin( 0.5, 0 )
	f1_local5:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 200, -85 )
	f1_local2:addElement( f1_local5 )
	f1_local2[0xEE7C6A8ADCEB0E3] = f1_local5
	local f1_local6 = nil
	f1_local6 = f1_local1.BuildRegisteredType( 0x13EDF1CE0AC8AB6, {
		controllerIndex = f1_local3
	} )
	f1_local6[0x8B72E07B55C3AC0] = "BillboardItem"
	f1_local6:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 200, 780 )
	f1_local2:addElement( f1_local6 )
	f1_local2[0xD5FD4080CF797BB] = f1_local6
	local f1_local7 = nil
	f1_local7 = f1_local0.UIPeekingGrid.new( {
		maxVisibleRows = 2,
		maxVisibleColumns = 1,
		spacingX = 0,
		wrapY = false,
		columnWidth = 1680,
		rowHeight = 190,
		spacingY = 0,
		wrapX = false,
		controllerIndex = f1_local3,
		buildChild = function ()
			return f1_arg0.BuildRegisteredType( 0xDF052F42DFEC04, {
				controllerIndex = f1_arg0
			} )
		end,
		refreshChild = function ( f2_arg0, f2_arg1, f2_arg2 )
			
		end
	} )
	f1_local7[0x8B72E07B55C3AC0] = "BundlesGrid"
	f1_local7:setUseStencil( true )
	f1_local7:SetAnchorsAndPosition( 0, 0, 1, 0, 130, -140, -370, 0 )
	f1_local2:addElement( f1_local7 )
	f1_local2[0xAE1AAE53B2D9C9A] = f1_local7
	local f1_local8 = nil
	f1_local8 = f1_local0.UIImage.new()
	f1_local8[0x8B72E07B55C3AC0] = "GridMask"
	f1_local8:setImage( RegisterMaterial( 0x968A6466E41BCBE ), 0 )
	f1_local8:SetAnchorsAndPosition( 0, 0, 1, 0, 120, -120, -370, -54 )
	f1_local2:addElement( f1_local8 )
	f1_local2[0xA695CD9470626ED] = f1_local8
	local f1_local9 = nil
	f1_local9 = f1_local1.BuildRegisteredType( 0x24844C1913DAD73, {
		controllerIndex = f1_local3
	} )
	f1_local9[0x8B72E07B55C3AC0] = "VerticalScrollbar"
	f1_local9:SetAnchorsAndPosition( 1, 0, 1, 0, -140, -129, -330, -85 )
	f1_local2:addElement( f1_local9 )
	f1_local2[0x24844C1913DAD73] = f1_local9
	local f1_local10 = nil
	f1_local10 = f1_local1.BuildRegisteredType( 0x75496EAAFE5BEF4, {
		controllerIndex = f1_local3
	} )
	f1_local10[0x8B72E07B55C3AC0] = "NoMoreItemsMessage"
	f1_local10:SetAlpha( 0, 0 )
	f1_local10:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -512, 512, -90, -10 )
	f1_local2:addElement( f1_local10 )
	f1_local2[0x75496EAAFE5BEF4] = f1_local10
	local f1_local11 = nil
	f1_local11 = f1_local1.BuildRegisteredType( 0x31B7C74FCC524F9, {
		controllerIndex = f1_local3
	} )
	f1_local11[0x8B72E07B55C3AC0] = "StoreEmpty"
	f1_local11:SetAlpha( 0, 0 )
	f1_local11[0xF3FC81DFCEB7D35]:SetRGB( SWATCHES[0x4EE54AD76B0BD8E][0x97A39F29ABD59A9], 0 )
	f1_local11[0xF3FC81DFCEB7D35]:SetAlpha( 1, 0 )
	f1_local11[0xC2F1BBAD18642AD]:SetRGB( SWATCHES[0x4EE54AD76B0BD8E][0xC83E71342B5A30E], 0 )
	f1_local11:SetAnchorsAndPosition( 0, 1, 0, 1, 96, 246, 160, 194 )
	f1_local2:addElement( f1_local11 )
	f1_local2[0xCDD4D5D376063A3] = f1_local11
	local f1_local12 = nil
	f1_local12 = f1_local1.BuildRegisteredType( 0x73A50203F32640C, {
		controllerIndex = f1_local3
	} )
	f1_local12[0x8B72E07B55C3AC0] = "ArrowDown"
	f1_local12:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, -250, 250, -110, -60 )
	f1_local2:addElement( f1_local12 )
	f1_local2[0x454B421C98F78E] = f1_local12
	local f1_local13 = nil
	f1_local13 = f1_local1.BuildRegisteredType( 0x73A50203F32640C, {
		controllerIndex = f1_local3
	} )
	f1_local13[0x8B72E07B55C3AC0] = "ArrowUp"
	f1_local13:SetZRotation( 180, 0 )
	f1_local13[0xD9D73179F479F6C]:SetZRotation( 180, 0 )
	f1_local13:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, -250, 250, -350, -300 )
	f1_local2:addElement( f1_local13 )
	f1_local2[0xA20D776391E31BB] = f1_local13
	local f1_local14 = nil
	f1_local14 = f1_local1.BuildRegisteredType( 0x2F74E2705788E23, {
		controllerIndex = f1_local3
	} )
	f1_local14[0x8B72E07B55C3AC0] = "FranchiseStorePrompt"
	f1_local14:SetAnchorsAndPosition( 1, 0, 0, 1, -270, -70, 164, 196 )
	f1_local2:addElement( f1_local14 )
	f1_local2[0xBCFFABC1F0A9E6B] = f1_local14
	local f1_local15 = nil
	f1_local15 = f1_local1.BuildRegisteredType( 0xDFF41418B5CE475, {
		controllerIndex = f1_local3
	} )
	f1_local15[0x8B72E07B55C3AC0] = "SupportingCreatorCode"
	f1_local15:SetAnchorsAndPosition( 0, 1, 0, 1, 1162, 1522, 172, 196 )
	f1_local2:addElement( f1_local15 )
	f1_local2[0xDFF41418B5CE475] = f1_local15
	local f1_local16 = nil
	f1_local16 = f1_local1.BuildRegisteredType( 0x9FA8F81DF68D5DA, {
		controllerIndex = f1_local3
	} )
	f1_local16[0x8B72E07B55C3AC0] = "FranchisePromptContainer"
	if f1_local16[0x9F7FCEC8FCB623D] then
		f1_local16[0x9F7FCEC8FCB623D]:setText( "", 0 )
	end
	f1_local16:SetAnchorsAndPosition( 0, 1, 0, 1, 1559, 1790, 165, 196 )
	f1_local2:addElement( f1_local16 )
	f1_local2[0x643D6DE2DC57331] = f1_local16
	local f1_local17 = f1_local0.UIScrollbar.new
	local f1_local18 = {
		direction = f1_local0.DIRECTION.vertical,
		eventListener = f1_local9,
		startCap = f1_local9[0x7C139B2191BD22D],
		endCap = f1_local9[0xC50558A6315134A],
		sliderArea = f1_local9[0x1267DA9A256716D]
	}
	local f1_local19 = f1_local9[0x1267DA9A256716D]
	if f1_local19 then
		f1_local19 = f1_local9[0x1267DA9A256716D][0x5EE00EDE8E0841C]
	end
	f1_local18.slider = f1_local19
	f1_local19 = f1_local9[0x1267DA9A256716D]
	if f1_local19 then
		f1_local19 = f1_local9[0x1267DA9A256716D][0x491B3F5BB7699CD]
	end
	f1_local18.fixedSizeSlider = f1_local19
	f1_local7:AddScrollbar( f1_local17( f1_local18 ) )
	f1_local7:AddArrow( f1_local13 )
	f1_local7:AddArrow( f1_local12 )
	f0_local0( f1_local2, f1_local3, f1_arg1 )
	return f1_local2
end

MenuBuilder.registerType( 0x725CA891BE6E4E0, MPStoreBillboardGrid )
LockTable( _M )
