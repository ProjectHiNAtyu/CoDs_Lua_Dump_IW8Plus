-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
module( ..., package.seeall )
require( "ui.generated.widgets.globalpanelbackground" )
require( "ui.generated.widgets.globalpaneltab" )
require( "ui.generated.widgets.frontend.menutitletext" )
require( "ui.generated.widgets.frontend.xpbonuslist" )
require( "ui.generated.widgets.channelconnecttoggle" )
local f0_local0 = 500
local f0_local1 = 5000
local f0_local2 = -11
local f0_local3 = function ( f18_arg0, f18_arg1 )
	for f18_local3, f18_local4 in ipairs( f18_arg0._channelTabs ) do
		if f18_local4.tabID == f18_arg1 then
			return f18_local3
		end
	end
end

local f0_local4 = function ( f17_arg0, f17_arg1 )
	local f17_local0 = f17_arg0:GetTabIndexByID( f17_arg1 )
	if f17_local0 then
		local f17_local1 = LUI.TabManager.GetTabAtIndex( f17_arg0.Tabs, f17_local0 )
		if f17_local1 and f17_local1:IsEnabled() then
			f17_arg0.Tabs:FocusTab( f17_arg0._controllerIndex, f17_local0 )
			return true
		end
	end
	return false
end

local f0_local5 = function ( f16_arg0 )
	if not CHANNELS.IsValidPartyID( f16_arg0._channelID ) or f16_arg0._channelType == Enum[0x71816B8A6999EAF][0xC0E29ADAA5D346F] then
		return 
	end
	local f16_local0 = CHANNELS.GetChannelDetails( f16_arg0._controllerIndex, f16_arg0._channelID )
	if not f16_local0 then
		return 
	elseif f16_local0.maxPlayers ~= f16_arg0._maxPlayers or f16_arg0._memberCount ~= f16_local0.memberCount then
		f16_arg0.MenuTitleText:SetTitle( ToUpperCase( CHANNELS.GetChannelName( f16_arg0._controllerIndex, f16_arg0._channelID ) ) )
		f16_arg0._memberCount = f16_local0.memberCount
		f16_arg0._maxPlayers = f16_local0.maxPlayers
	end
	if CHANNELS.IsGameChannel( f16_arg0._channelType ) then
		local f16_local1 = PARTY.GetPartyMembers( Social[0x446FFD0DEAD15E3]() )
		f16_arg0.XPBonusList:UpdateBonusList()
	end
end

local f0_local6 = function ( f15_arg0 )
	if CHANNELS.IsValidPartyID( f15_arg0._channelID ) then
		local f15_local0 = CHANNELS.IsVoicePartyConnectionStable( f15_arg0._controllerIndex )
		if f15_local0 ~= f15_arg0._isVoicePartyConnectionStable then
			f15_arg0._isVoicePartyConnectionStable = f15_local0
			f15_arg0.ChannelConnectToggle:SetToggleWarningState( not f15_local0 )
		end
	end
	if TEXTCHAT.IsValidChatID( f15_arg0._chatID ) then
		local f15_local0 = TEXTCHAT.CanConnectToTextChat()
		if f15_local0 ~= f15_arg0._isChatConnectionStable then
			f15_arg0._isChatConnectionStable = f15_local0
			for f15_local5, f15_local6 in ipairs( f15_arg0._channelTabs ) do
				if f15_local6.tabID == CHANNELS.TAB_ID.CHAT then
					local f15_local4 = f15_arg0.Tabs:GetTabAtIndex( f15_local5 )
					f15_local4:SetWarningState( not f15_local0 )
					break
				end
			end
		end
	end
end

local f0_local7 = function ( f12_arg0 )
	f12_arg0._channelTabs = {}
	if CHANNELS.IsValidPartyID( f12_arg0._channelID ) then
		table.insert( f12_arg0._channelTabs, {
			description = 0xED3697E7F6B8702,
			menuName = "ChannelMembers",
			icon = "icon_global_party",
			disabled = false,
			tabID = CHANNELS.TAB_ID.MEMBERS
		} )
	end
	if TEXTCHAT.IsValidChatID( f12_arg0._chatID ) and CONDITIONS.IsChannelsTextChatEnabled( f12_arg0._controllerIndex ) then
		if TEXTCHAT.IsWhisper( f12_arg0._controllerIndex, f12_arg0._chatID ) and not CONDITIONS.WhispersEnabled( f12_arg0._controllerIndex ) then
			assert( false, "Tried to open whisper channel while whispers are disabled" )
		elseif TEXTCHAT.IsGroupChat( f12_arg0._controllerIndex, f12_arg0._chatID ) and not CONDITIONS.GroupChatEnabled( f12_arg0._controllerIndex ) then
			assert( false, "Tried to open group channel while group chats are disabled" )
		else
			table.insert( f12_arg0._channelTabs, {
				description = 0x22026DBC96AC853,
				menuName = "ChannelChat",
				icon = "icon_global_chat",
				disabled = false,
				tabID = CHANNELS.TAB_ID.CHAT
			} )
		end
	end
	if CHANNELS.IsValidPartyID( f12_arg0._channelID ) then
		table.insert( f12_arg0._channelTabs, {
			description = 0x29781B66C812DAE,
			menuName = "ChannelSettings",
			icon = "icon_global_options",
			disabled = false,
			tabID = CHANNELS.TAB_ID.SETTINGS
		} )
	end
	f12_arg0.Tabs:SetSendEventOnTabChange( true )
	f12_arg0:addEventHandler( LUI.TabManager.TAB_SWITCH_EVENT, function ( f14_arg0, f14_arg1 )
		assert( f14_arg1.index )
		f12_arg0.activeTabWidget:processEvent( f14_arg1 )
		return true
	end )
	local f12_local0 = LUI.FlowManager.GetScopedData( f12_arg0 )
	local f12_local1 = f12_arg0._channelScopedData.selectedChannelDefaultTabIndex
	if not f12_local1 then
		f12_local1 = CHANNELS.TAB_ID.MEMBERS
	end
	local f12_local2 = {}
	for f12_local6, f12_local7 in ipairs( f12_arg0._channelTabs ) do
		table.insert( f12_local2, {
			name = f12_local7.name,
			icon = f12_local7.icon,
			widget = f12_local7.widget,
			disabled = f12_local7.disabled,
			hasDefaultFocus = f12_local7.tabID == f12_local1,
			focusFunction = function ( f13_arg0, f13_arg1, f13_arg2, f13_arg3 )
				local f13_local0 = f12_arg0._channelTabs[f13_arg2 + 1].tabID
				if f12_arg0.activeTabID and f13_local0 == f12_arg0.activeTabID and f12_arg0.activeTabWidget then
					return 
				else
					DataSources.alwaysLoaded.textChat.lastActiveChannelTab:SetValue( f13_arg1, f13_local0 )
					TAB.UpdateBuiltWidgetOnTabChange( f12_arg0, f12_arg0.activeTabID, "activeTabWidget", f13_arg2, f13_arg3, f12_arg0.menuName, {
						buildPriority = 1,
						controllerIndex = f13_arg1
					} )
					f12_arg0.activeTabID = f13_local0
				end
			end,
			tooltipData = {
				lockedDescription = nil,
				verticalAlignement = true,
				title = nil,
				horizontalAlignement = true,
				description = f12_local7.description,
				orientation = LUI.ORIENTATION.down,
				controllerIndex = f12_arg0._controllerIndex
			}
		} )
	end
	if 0 < #f12_local2 then
		f12_arg0.Tabs:SetTabs( f12_local2 )
		f12_arg0.Tabs:SizeTabsToFit()
		f12_arg0.Tabs:SetAlignment( LUI.Alignment.Center )
	end
	if #f12_local2 <= 1 then
		f12_arg0.Tabs:SetVisible( false )
		f12_arg0.TabsBackerLeft:SetVisible( false )
		f12_arg0.TabsBackerRight:SetVisible( false )
		f12_arg0.TabsBacker:SetVisible( false )
	end
	if TEXTCHAT.IsWhisper( f12_arg0._controllerIndex, f12_arg0._chatID ) then
		ACTIONS.AnimateSequence( f12_arg0.Background, "WhisperChat" )
	end
end

local f0_local8 = function ( f10_arg0 )
	if CHANNELS.IsValidPartyID( f10_arg0._channelID ) then
		local f10_local0 = CHANNELS.GetChannelName( f10_arg0._controllerIndex, f10_arg0._channelID, false )
		ACTIONS.AnimateSequence( f10_arg0, "TitleDefaultWidth" )
		f10_arg0.MenuTitleText:SetTitle( f10_local0, nil, true )
		if f10_arg0._channelType == Enum[0x71816B8A6999EAF][0x56160C1DC06A01] or f10_arg0._channelType == Enum[0x71816B8A6999EAF][0x6779FA46C0A2058] then
			f10_arg0:CreateEventTimer( "memberCountRefreshTimer", f0_local0, {
				immediate = true,
				callbackFunc = function ( f11_arg0, f11_arg1 )
					f10_arg0( f11_arg0 )
					return true
				end
			} )
		end
	elseif TEXTCHAT.IsWhisper( f10_arg0._controllerIndex, f10_arg0._chatID ) then
		local f10_local0 = TEXTCHAT.GetWhisperMemberGamertag( f10_arg0._controllerIndex, f10_arg0._chatID )
		ACTIONS.AnimateSequence( f10_arg0, "TitleWhisperWidth" )
		f10_arg0.MenuTitleText:SetTitle( f10_local0, nil, true )
	elseif TEXTCHAT.IsGroupChat( f10_arg0._controllerIndex, f10_arg0._chatID ) then
		ACTIONS.AnimateSequence( f10_arg0, "TitleWhisperWidth" )
		local f10_local0 = GROUPS.GetGroupDetails( f10_arg0._controllerIndex, f10_arg0._groupID )
		f10_arg0.MenuTitleText:SetTitle( GROUPS.GetGroupNameToDisplay( GROUPS.SplitNameAndTag( f10_local0.groupName ) ), nil, true )
	end
	f10_arg0.MenuTitleText:SetupBackButton( f10_arg0._controllerIndex )
	f10_arg0.MenuTitleText:DisableTypingEffect()
end

local f0_local9 = function ( f7_arg0, f7_arg1, f7_arg2 )
	f7_arg0.SetupTitle = f0_local0
	f7_arg0.GetTabIndexByID = f0_local0
	f7_arg0.FocusTabByID = f0_local0
	f7_arg0._controllerIndex = f7_arg1
	f7_arg0._channelScopedData = CHANNELS.GetChannelScopedData()
	f7_arg0._channelID = f7_arg0._channelScopedData.selectedChannelID
	f7_arg0._channelType = f7_arg0._channelScopedData.selectedChannelType
	f7_arg0._chatID = f7_arg0._channelScopedData.selectedChannelChatID
	f7_arg0._groupID = f7_arg0._channelScopedData.selectedGroupId
	f0_local0( f7_arg0 )
	f0_local0( f7_arg0 )
	if CHANNELS.IsValidPartyID( f7_arg0._channelID ) then
		f7_arg0.ChannelConnectToggle:SetupToggleButton( {
			hookGamepadEvents = true,
			channelID = f7_arg0._channelID
		} )
	else
		f7_arg0.ChannelConnectToggle:closeTree()
		f7_arg0.ChannelConnectToggle = nil
		f7_arg0.VoiceConnectPrompt:closeTree()
		f7_arg0.VoiceConnectPrompt = nil
	end
	f7_arg0:CreateEventTimer( "serviceRefreshTimer", f0_local0, {
		immediate = true,
		callbackFunc = function ( f9_arg0, f9_arg1 )
			f7_arg0( f9_arg0 )
			return true
		end
	} )
	f7_arg0:SubscribeToInputTypeModel( f7_arg1, function ( f8_arg0, f8_arg1 )
		if not f8_arg1.VoiceConnectPrompt then
			return 
		end
		local f8_local0 = LUI.IsGamepadActiveInputMethodForPrompts( f7_arg0 )
		local f8_local1 = f8_arg1.VoiceConnectPrompt
		local f8_local2 = f8_local1
		f8_local1 = f8_local1.setText
		local f8_local3
		if f8_local0 then
			f8_local3 = Engine[0xED84C33EC5F01EA]( 0x5C20288124BC9EE )
			if not f8_local3 then
			
			else
				f8_local1( f8_local2, f8_local3, 0 )
			end
		end
		f8_local3 = Engine[0xED84C33EC5F01EA]( 0x1AC7D7BB72917D9 )
	end )
end

States = {
	[0xAD14C6E7156B923] = function ( f3_arg0, f3_arg1 )
		local f3_local0 = function ( f6_arg0, f6_arg1 )
			
		end
		
		f3_arg0.MenuTitleText:RegisterAnimationSequence( "TitleWhisperWidth", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Right,
				value = _1080p * 475,
				child = f3_arg0.MenuTitleText.Text
			}
		} )
		local f3_local1 = function ( f5_arg0, f5_arg1 )
			f5_arg0.MenuTitleText:AnimateSequence( "TitleWhisperWidth" )
		end
		
		f3_arg0.MenuTitleText:RegisterAnimationSequence( "TitleDefaultWidth", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Right,
				value = _1080p * 268,
				child = f3_arg0.MenuTitleText.Text
			}
		} )
		f3_arg0._sequences = {
			DefaultSequence = f3_local0,
			TitleWhisperWidth = f3_local1,
			TitleDefaultWidth = function ( f4_arg0, f4_arg1 )
				f4_arg0.MenuTitleText:AnimateSequence( "TitleDefaultWidth" )
			end
		}
		f3_arg0._sequenceLengths = {
			TitleWhisperWidth = 0,
			DefaultSequence = 0,
			TitleDefaultWidth = 0
		}
	end
}
function ChannelPanel( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 620 * _1080p, 0, 1080 * _1080p )
	self.id = "ChannelPanel"
	self.__states = States
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local Background = nil
	
	Background = MenuBuilder.BuildRegisteredType( "GlobalPanelBackground", {
		controllerIndex = f1_local1
	} )
	Background.id = "Background"
	Background:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
	self:addElement( Background )
	self.Background = Background
	
	local SubBacker = nil
	
	SubBacker = LUI.UIImage.new()
	SubBacker.id = "SubBacker"
	SubBacker:SetRGBFromInt( 1908255, 0 )
	SubBacker:setImage( RegisterMaterial( 0xD4247DF2A39F4B0 ), 0 )
	SubBacker:SetAnchorsAndPosition( 0, 1, 1, 0, _1080p * 1, _1080p * 619, _1080p * -82, 0 )
	self:addElement( SubBacker )
	self.SubBacker = SubBacker
	
	local TabsBacker = nil
	
	TabsBacker = LUI.UIImage.new()
	TabsBacker.id = "TabsBacker"
	TabsBacker:SetRGBFromInt( 3026992, 0 )
	TabsBacker:SetAnchorsAndPosition( 0, 0, 0, 1, _1080p * 54, _1080p * -54, _1080p * 85, _1080p * 145 )
	self:addElement( TabsBacker )
	self.TabsBacker = TabsBacker
	
	local TabsBackerRight = nil
	
	TabsBackerRight = LUI.UIImage.new()
	TabsBackerRight.id = "TabsBackerRight"
	TabsBackerRight:SetRGBFromInt( 2500648, 0 )
	TabsBackerRight:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -54, _1080p * -1, _1080p * 85, _1080p * 145 )
	self:addElement( TabsBackerRight )
	self.TabsBackerRight = TabsBackerRight
	
	local TabsBackerLeft = nil
	
	TabsBackerLeft = LUI.UIImage.new()
	TabsBackerLeft.id = "TabsBackerLeft"
	TabsBackerLeft:SetRGBFromInt( 2500648, 0 )
	TabsBackerLeft:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1, _1080p * 54, _1080p * 85, _1080p * 145 )
	self:addElement( TabsBackerLeft )
	self.TabsBackerLeft = TabsBackerLeft
	
	local Tabs = nil
	
	Tabs = LUI.TabManager.new( {
		spacing = 8,
		wrap = true,
		tabHeight = _1080p * 60,
		buildTab = function ()
			return MenuBuilder.BuildRegisteredType( "GlobalPanelTab", {
				controllerIndex = menu
			} )
		end,
		controllerIndex = f1_local1
	} )
	Tabs.id = "Tabs"
	Tabs:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -278, _1080p * 278, _1080p * 85, _1080p * 145 )
	self:addElement( Tabs )
	self.Tabs = Tabs
	
	local VoiceConnectPrompt = nil
	
	VoiceConnectPrompt = LUI.UIStyledText.new()
	VoiceConnectPrompt.id = "VoiceConnectPrompt"
	VoiceConnectPrompt:SetRGBFromTable( SWATCHES.text.offwhite, 0 )
	VoiceConnectPrompt:setText( Engine[0xED84C33EC5F01EA]( 0x5C20288124BC9EE ), 0 )
	VoiceConnectPrompt:setCaseStyle( LUI.CaseStyle.Uppercase )
	VoiceConnectPrompt:SetFont( FONTS.GetFont( FONTS.PrimaryBold.File ) )
	VoiceConnectPrompt:SetFontSize( 22 * _PT )
	VoiceConnectPrompt:SetMinFontSize( 22 * _PT )
	VoiceConnectPrompt:SetWordWrap( false )
	VoiceConnectPrompt:SetAlignment( LUI.Alignment.Left )
	VoiceConnectPrompt:SetVerticalAlignment( LUI.Alignment.Middle )
	VoiceConnectPrompt:SetTintFontIcons( true )
	VoiceConnectPrompt:SetShadowRGBFromTable( SWATCHES.IW9StyleGuide.styleGuideCool02, 0 )
	VoiceConnectPrompt:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -44, _1080p * -14, _1080p * 31, _1080p * 61 )
	self:addElement( VoiceConnectPrompt )
	self.VoiceConnectPrompt = VoiceConnectPrompt
	
	local MenuTitleText = nil
	
	MenuTitleText = MenuBuilder.BuildRegisteredType( "MenuTitleText", {
		controllerIndex = f1_local1
	} )
	MenuTitleText.id = "MenuTitleText"
	MenuTitleText.Text:SetRight( _1080p * 933, 0 )
	MenuTitleText.Text:setText( "", 0 )
	MenuTitleText.Text:setCaseStyle( LUI.CaseStyle.Regular )
	MenuTitleText:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 87, _1080p * 355, _1080p * 29, _1080p * 61 )
	self:addElement( MenuTitleText )
	self.MenuTitleText = MenuTitleText
	
	local XPBonusList = nil
	
	XPBonusList = MenuBuilder.BuildRegisteredType( "XPBonusList", {
		controllerIndex = f1_local1
	} )
	XPBonusList.id = "XPBonusList"
	XPBonusList:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * -389, _1080p * -39, _1080p * 328, _1080p * 651 )
	self:addElement( XPBonusList )
	self.XPBonusList = XPBonusList
	
	local ChannelConnectToggle = nil
	
	ChannelConnectToggle = MenuBuilder.BuildRegisteredType( "ChannelConnectToggle", {
		controllerIndex = f1_local1
	} )
	ChannelConnectToggle.id = "ChannelConnectToggle"
	ChannelConnectToggle:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 447, _1080p * 567, _1080p * 22, _1080p * 70 )
	self:addElement( ChannelConnectToggle )
	self.ChannelConnectToggle = ChannelConnectToggle
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "ChannelPanel", ChannelPanel )
LockTable( _M )
