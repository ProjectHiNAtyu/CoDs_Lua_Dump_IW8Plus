-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:02
module( ..., package.seeall )
require( "ui.generated.widgets.genericarrowbutton" )
require( "ui.generated.widgets.scrollbar.verticalminimalscrollbar" )
local f0_local0 = function ( f11_arg0 )
	if f11_arg0.optionsGridEx then
		f11_arg0.optionsGridExScrollbar:closeTree()
		f11_arg0.optionsGridExScrollbar = nil
		f11_arg0.optionsGridEx:closeTree()
		f11_arg0.optionsGridEx = nil
	end
end

local f0_local1 = function ( f7_arg0 )
	f7_arg0:ClearOptionsGridEx()
	local f7_local0 = f7_arg0.controllerIndex
	
	local optionsGridEx = LUI.UIGrid.new( {
		spacingY = 16,
		maxVisibleColumns = 1,
		maxVisibleRows = 12,
		wrapY = true,
		maxRows = -28,
		mouseWheelScrollingOffsetPx = 32,
		allowScrollLimitFeedback = true,
		controllerIndex = f7_local0
	} )
	optionsGridEx.id = "optionsGridEx"
	local f7_local2 = f7_arg0.optionsGrid:GetAnchorsAndPosition()
	optionsGridEx:SetAnchorsAndPosition( f7_local2.leftAnchor, f7_local2.rightAnchor, f7_local2.topAnchor, f7_local2.bottomAnchor, f7_local2.left, f7_local2.right, f7_local2.top, f7_local2.bottom )
	optionsGridEx:setUseStencil( true )
	f7_arg0:addElement( optionsGridEx )
	f7_arg0.optionsGridEx = optionsGridEx
	
	optionsGridEx:SetActiveOnMouseOverBehavior( f7_local0, "InnerWidget" )
	optionsGridEx:registerEventHandler( "clear_active_option_menu", function ( self, event )
		if (self._activeElement or event.fromList ~= self.previousList) and self ~= event.fromList then
			self.previousList = event.fromList
			self:processEvent( {
				immediate = true,
				name = "request_active"
			} )
			local f10_local0, f10_local1 = self:GetChildPosition( event.fromList:getParent() )
			if f10_local1 then
				self._targetPosition = {
					x = 0,
					y = f10_local1
				}
				self._childInFocus = event.fromList:getParent()
			end
		end
	end )
	optionsGridEx:addEventHandler( "request_active", function ( f9_arg0, f9_arg1 )
		if f9_arg1.target then
			f9_arg0:dispatchEventToParent( {
				name = "clear_active_option_menu",
				fromList = f9_arg0
			} )
		end
	end )
	optionsGridEx.dispatchEventToChildren = function ( f8_arg0, f8_arg1 )
		if f8_arg1.name == "refresh" then
			for f8_local0 = 0, f7_arg0:GetNumRows() - 1, 1 do
				local f8_local3 = f7_arg0:GetElementAtPosition( 0, f8_local0 )
				if f8_local3.type == 0xBCD4325940FB45A then
					f8_local3:processEvent( f8_arg1 )
					if f8_local3.ChildrenContainer:getFirstChild() then
						
					end
				end
				f8_local3:processEvent( f8_arg1 )
			end
		elseif f8_arg0:getFirstChild() then
			
		else
			
		end
	end
	
	local f7_local3 = nil
	f7_local3 = MenuBuilder.BuildRegisteredType( 0x12A2D6C64C313D0, {
		controllerIndex = f7_local0
	} )
	f7_local3[0x8B72E07B55C3AC0] = "VerticalScrollbar"
	f7_local3:SetAnchorsAndPosition( 1, 0, 0, 0, -212, -200, 3, -89 )
	f7_arg0:addElement( f7_local3 )
	f7_arg0[0x1824338FCB437A] = f7_local3
	local f7_local4 = LUI.UIScrollbar.new
	local f7_local5 = {
		direction = LUI.DIRECTION.vertical,
		eventListener = f7_local3,
		startCap = f7_local3[0x7C139B2191BD22D],
		endCap = f7_local3[0xC50558A6315134A],
		sliderArea = f7_local3[0x1267DA9A256716D]
	}
	local f7_local6 = f7_local3[0x1267DA9A256716D]
	if f7_local6 then
		f7_local6 = f7_local3[0x1267DA9A256716D][0x5EE00EDE8E0841C]
	end
	f7_local5.slider = f7_local6
	f7_local6 = f7_local3[0x1267DA9A256716D]
	if f7_local6 then
		f7_local6 = f7_local3[0x1267DA9A256716D][0x491B3F5BB7699CD]
	end
	f7_local5.fixedSizeSlider = f7_local6
	f7_local4 = f7_local4( f7_local5 )
	f7_local4:UpdateSliderAreaVertical( false )
	f7_local4:SetKBMStyle( true )
	optionsGridEx:AddScrollbar( f7_local4 )
end

local f0_local2 = function ( f6_arg0, f6_arg1, f6_arg2 )
	if not f6_arg0.optionsGridEx then
		f6_arg0:CreateOptionsGridEx()
	end
	local f6_local0 = false
	for f6_local1 = 1, #f6_arg1, 1 do
		local f6_local4 = f6_arg1[f6_local1]
		if not f6_local4.type then
			f6_local4.type = 0x4DF62CF810D16C2
		end
		local f6_local5 = f6_arg2[f6_local4.type]( f6_arg0:GetCurrentMenu(), f6_arg0.controllerIndex, f6_local4 )
		if f6_local5 then
			f6_arg0.optionsGridEx:AddElement( f6_local5 )
			f6_local0 = true
		end
	end
	if f6_local0 and not LUI.IsLastInputMouseNavigation( f6_arg0.controllerIndex ) then
		f6_arg0.optionsGridEx:SetFocusedPosition( {
			x = 0,
			y = 1
		}, true, true, true, false )
	end
end

local f0_local3 = function ( f5_arg0, f5_arg1 )
	if f5_arg1 then
		f5_arg0:CreateOptionsGridEx()
		f5_arg0.VerticalScrollbar:SetVisible( false )
		f5_arg0.optionsGrid:SetVisible( false )
	else
		f5_arg0:ClearOptionsGridEx()
		f5_arg0.VerticalScrollbar:SetVisible( true )
		f5_arg0.optionsGrid:SetVisible( true )
	end
end

function PostLoadFunc( f4_arg0, f4_arg1, f4_arg2 )
	f4_arg0.controllerIndex = f4_arg1
	f4_arg0.CreateOptionsGridEx = f0_local0
	f4_arg0.ClearOptionsGridEx = f0_local0
	f4_arg0.UpdateOptionsEx = f0_local0
	f4_arg0.SetUseOptionsGridEx = f0_local0
end

function GameSetupCategoryOptions( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = MenuBuilder
	local f1_local2 = f1_local0.UIElement.new()
	f1_local2:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 650, 0, 650 )
	f1_local2.id = "GameSetupCategoryOptions"
	local f1_local3
	if f1_arg1 then
		f1_local3 = f1_arg1
	else
		f1_local3 = f1_arg1.controllerIndex
	end
	f1_local3 = f1_local0.ValidateControllerIndex( f1_local2, f1_local3 )
	local f1_local4 = nil
	f1_local4 = f1_local0.UIGrid.new( {
		maxVisibleColumns = 1,
		maxVisibleRows = 12,
		spacingY = 16,
		columnWidth = 630,
		rowHeight = 38,
		controllerIndex = f1_local3,
		buildChild = function ()
			return f1_arg0.BuildRegisteredType( 0x4ACA75F96D28DF7, {
				controllerIndex = f1_arg0
			} )
		end,
		refreshChild = function ( f2_arg0, f2_arg1, f2_arg2 )
			
		end
	} )
	f1_local4[0x8B72E07B55C3AC0] = "optionsGrid"
	f1_local4:setUseStencil( true )
	f1_local4:SetAnchorsAndPosition( 0, 1, 0, 1, 1, 636, 7, 645 )
	f1_local2:addElement( f1_local4 )
	f1_local2[0xA5548BE62D09B51] = f1_local4
	local f1_local5 = nil
	f1_local5 = f1_local1.BuildRegisteredType( 0x12A2D6C64C313D0, {
		controllerIndex = f1_local3
	} )
	f1_local5[0x8B72E07B55C3AC0] = "VerticalScrollbar"
	f1_local5:SetAnchorsAndPosition( 1, 0, 0, 0, -229, -217, 3, -89 )
	f1_local2:addElement( f1_local5 )
	f1_local2[0x24844C1913DAD73] = f1_local5
	local f1_local6 = f1_local0.UIScrollbar.new
	local f1_local7 = {
		direction = f1_local0.DIRECTION.vertical,
		eventListener = f1_local5,
		startCap = f1_local5[0x7C139B2191BD22D],
		endCap = f1_local5[0xC50558A6315134A],
		sliderArea = f1_local5[0x1267DA9A256716D]
	}
	local f1_local8 = f1_local5[0x1267DA9A256716D]
	if f1_local8 then
		f1_local8 = f1_local5[0x1267DA9A256716D][0x5EE00EDE8E0841C]
	end
	f1_local7.slider = f1_local8
	f1_local8 = f1_local5[0x1267DA9A256716D]
	if f1_local8 then
		f1_local8 = f1_local5[0x1267DA9A256716D][0x491B3F5BB7699CD]
	end
	f1_local7.fixedSizeSlider = f1_local8
	f1_local4:AddScrollbar( f1_local6( f1_local7 ) )
	PostLoadFunc( f1_local2, f1_local3, f1_arg1 )
	return f1_local2
end

MenuBuilder.registerType( 0x46B9FD6D257428E, GameSetupCategoryOptions )
LockTable( _M )
