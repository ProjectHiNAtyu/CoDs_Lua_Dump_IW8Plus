-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 02-09-2025 10:42
module( ..., package.seeall )
local f0_local0 = 12
local f0_local1 = 600
local f0_local2 = 50
local f0_local3 = 100
local f0_local4 = function ( menu, controller )
	local darkener = LUI.UIImage.new()
	darkener.id = "Darkener"
	darkener:SetRGBFromTable( COLORS.black )
	darkener:SetAnchorsAndPosition( 0, 0, 0, 0, _1080p * -564, _1080p * 1612, _1080p * -484, _1080p * 484 )
	menu:addElement( darkener )
	menu.darkener = darkener
	
	menu.darkener:SetAlpha( 0 )
	for levelSelectZoomMap = 1, #controller, 1 do
		local f17_local4 = controller[levelSelectZoomMap].positionLeft
		local f17_local5 = controller[levelSelectZoomMap].positionTop
		local f17_local6 = MenuBuilder.BuildRegisteredType( "LevelSelectNode", {
			controllerIndex = menu._controllerIndex,
			nodeSize = f0_local0,
			transitionDuration = f0_local0
		} )
		f17_local6.id = "Level" .. controller[levelSelectZoomMap].displayName
		f17_local6:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * f17_local4, _1080p * (f17_local4 + f0_local0), _1080p * f17_local5, _1080p * (f17_local5 + f0_local0) )
		if controller[levelSelectZoomMap].mapPosition == WORLD_MAP.Regions.GLOBAL_LOWER or controller[levelSelectZoomMap].mapPosition == WORLD_MAP.Regions.GLOBAL_UPPER then
			menu:addElement( f17_local6 )
		else
			table.insert( menu._overPopupNodes, f17_local6 )
			if controller[levelSelectZoomMap].mapPosition == WORLD_MAP.Regions.URZIKSTAN then
				table.insert( menu._urzPopupNodes, f17_local6 )
			elseif controller[levelSelectZoomMap].mapPosition == WORLD_MAP.Regions.UK then
				table.insert( menu._ukPopupNodes, f17_local6 )
			end
		end
		menu.levelNode = f17_local6
		table.insert( menu._nodes, menu.levelNode )
		menu.levelNode:SetupNode( controller[levelSelectZoomMap].levelIndex + 1 )
	end
	local levelSelectZoomMap = MenuBuilder.BuildRegisteredType( "LevelSelectZoomMap", {
		controllerIndex = menu._controllerIndex
	} )
	levelSelectZoomMap.id = "LevelSelectZoomMap"
	levelSelectZoomMap:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 2453, _1080p * 2589, _1080p * 713, _1080p * 781 )
	levelSelectZoomMap:setPriority( f0_local0 )
	menu:addElement( levelSelectZoomMap )
	menu.levelSelectZoomMap = levelSelectZoomMap
	
	menu.DynamicLine = LUI.UILine.new()
	menu.DynamicLine:setPriority( f0_local0 - 1 )
	menu:addElement( menu.DynamicLine )
	menu.DynamicLine:SetThickness( 2 )
	menu.DynamicLine:SetRGBFromTable( SWATCHES.MainMenu.ButtonText )
	menu.DynamicLine:SetAlpha( 0 )
	for details = 1, #menu._overPopupNodes, 1 do
		menu._overPopupNodes[details]:setPriority( f0_local0 + 1 )
		menu:addElement( menu._overPopupNodes[details] )
	end
	local details = MenuBuilder.BuildRegisteredType( "LevelSelectNodeDetails", {
		controllerIndex = menu._controllerIndex
	} )
	details.id = "Details"
	details:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 50, _1080p * (f0_local0 + 50), _1080p * 0, _1080p * f0_local0 )
	details:setPriority( f0_local0 )
	menu:addElement( details )
	menu.details = details
	
	menu.details:SetAlpha( 0 )
end

local f0_local5 = function ( f13_arg0, f13_arg1, f13_arg2, f13_arg3 )
	local f13_local0 = f0_local0
	if f13_arg0._isZoomIn and not f13_arg0._isZoomed then
		local f13_local1 = f13_arg2:Wait( f0_local0 )
		if f13_arg2._levelInfo.mapPosition == WORLD_MAP.Regions.URZIKSTAN then
			ACTIONS.AnimateSequence( f13_arg0, "UrzBlink" )
			ACTIONS.AnimateSequence( f13_arg0, "UrzFocusStart" )
			ACTIONS.AnimateSequence( f13_arg0, "UrzFocusLoop" )
			Engine.BJDBIAGIDA( SOUND_SETS.spMainMenu.mapOpen )
		end
		f13_local1.onComplete = function ()
			if f13_arg0._isZoomIn and not f13_arg0._isZoomed then
				for f16_local0 = 1, #f13_arg0._urzPopupNodes, 1 do
					f13_arg0._urzPopupNodes[f16_local0]:SetAlpha( 1, 600 )
				end
				f13_arg0.darkener:SetAlpha( 0.2, f13_arg0, LUI.EASING.outQuadratic )
				f13_arg0.levelSelectZoomMap.RegionName:setText( "" )
				ACTIONS.AnimateSequence( f13_arg0.levelSelectZoomMap, "ZoomIn" )
				f13_arg0._isZoomed = true
			end
		end
		
		f13_local0 = 800
	elseif not f13_arg0._isZoomIn then
		if f13_arg2._levelInfo.mapPosition ~= WORLD_MAP.Regions.URZIKSTAN then
			ACTIONS.AnimateSequence( f13_arg0, "UrzHide" )
			ACTIONS.AnimateSequence( f13_arg0, "UrzFocusEnd" )
		end
		for f13_local1 = 1, #f13_arg0._urzPopupNodes, 1 do
			f13_arg0._urzPopupNodes[f13_local1]:SetAlpha( 0, 0 )
		end
	end
	local f13_local1 = f13_arg0.details
	if f13_arg1 then
		if f13_arg1._details then
			Engine.BJDBIAGIDA( SOUND_SETS.spMainMenu.detailClose )
			f13_arg1._details:SetAlpha( 0 )
			f13_arg1._details = nil
		end
		local f13_local2 = f0_local0 / 2
		local f13_local3, f13_local4 = nil
		if f13_arg2._levelInfo.mapPosition ~= WORLD_MAP.Regions.URZIKSTAN and f13_arg1._levelInfo.mapPosition == WORLD_MAP.Regions.URZIKSTAN then
			f13_local3 = _1080p * (WORLD_MAP.UrzikstanLocation.left + f13_local2)
			f13_local4 = _1080p * (WORLD_MAP.UrzikstanLocation.top + f13_local2)
		else
			f13_local3 = _1080p * (f13_arg1._levelInfo.positionLeft + f13_local2)
			f13_local4 = _1080p * (f13_arg1._levelInfo.positionTop + f13_local2)
		end
		local f13_local5, f13_local6 = nil
		if f13_arg1._levelInfo.mapPosition ~= WORLD_MAP.Regions.URZIKSTAN and f13_arg2._levelInfo.mapPosition == WORLD_MAP.Regions.URZIKSTAN then
			f13_local5 = _1080p * (WORLD_MAP.UrzikstanLocation.left + f13_local2)
			f13_local6 = _1080p * (WORLD_MAP.UrzikstanLocation.top + f13_local2)
		else
			f13_local5 = _1080p * (f13_arg2._levelInfo.positionLeft + f13_local2)
			f13_local6 = _1080p * (f13_arg2._levelInfo.positionTop + f13_local2)
		end
		f13_arg0.DynamicLine:SetVertexPosition( LUI.UILine.START, 0, 0, f13_local3, f13_local4 )
		f13_arg0.DynamicLine:SetVertexPosition( LUI.UILine.END, 0, 0, f13_local5, f13_local6 )
		f13_arg0.DynamicLine:SetVertexPadding( LUI.UILine.START, 0 )
		f13_arg0.DynamicLine:SetVertexPadding( LUI.UILine.END, 1 )
		f13_arg0.DynamicLine:SetAlpha( 0.8 )
		f13_arg0.DynamicLine:SetVertexPadding( LUI.UILine.END, 0, f0_local0 / 2, LUI.EASING.outQuadratic )
		local f13_local7 = f13_arg0:Wait( f0_local0 / 2, true )
		f13_local7.onComplete = function ()
			f13_arg0.DynamicLine:SetAlpha( 0, f13_arg0 / 2, LUI.EASING.inQuadratic )
			f13_arg0.DynamicLine:SetVertexPadding( LUI.UILine.START, 1, f13_arg0 / 2, LUI.EASING.inQuadratic )
		end
		
	end
	local f13_local2 = f13_arg0.details:Wait( f13_local0, true )
	f13_local2.onComplete = function ()
		if f13_arg0._isSelected then
			Engine.BJDBIAGIDA( SOUND_SETS.spMainMenu.detailOpen )
			f13_arg0._details = f13_arg0
			local f14_local0 = f13_arg0._levelInfo.positionLeft
			local f14_local1 = f13_arg0._levelInfo.positionTop
			f13_arg0._details:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * f14_local0, _1080p * (f14_local0 + f13_arg0), _1080p * f14_local1, _1080p * (f14_local1 + f13_arg0) )
			f13_arg0._details:SetAlpha( 1 )
			f13_arg0._details.CollateralValue:SetAlpha( 0 )
			f13_arg0._details.DifficultyValue:SetAlpha( 0 )
			if f13_arg0._isZoomed then
				local f14_local2 = f13_arg0.mapPosition
				local f14_local3 = WORLD_MAP.Regions.URZIKSTAN
				f14_local2 = REG14 and Engine.CBBHFCGDIC( "LEVELS/URZIKSTAN" ) or Engine.CBBHFCGDIC( "LUA_MENU/BRITISH" )
				if f13_arg0.levelSelectZoomMap.RegionName:getText() ~= f14_local2 then
					f13_arg0.levelSelectZoomMap.RegionName:setText( f14_local2 )
				end
			end
			f13_arg0._details:UpdateContent( f13_arg0 )
		end
	end
	
end

local f0_local6 = function ( f12_arg0, f12_arg1, f12_arg2, f12_arg3 )
	f0_local0( f12_arg0, f12_arg1, f12_arg2, f12_arg3 )
end

local f0_local7 = function ( f11_arg0, f11_arg1, f11_arg2, f11_arg3 )
	if not f11_arg0._isZoomIn and f11_arg0._isZoomed then
		f11_arg0.darkener:SetAlpha( 0, f0_local0 / 2, LUI.EASING.outQuadratic )
		ACTIONS.AnimateSequence( f11_arg0.levelSelectZoomMap, "ZoomOut" )
		Engine.BJDBIAGIDA( SOUND_SETS.spMainMenu.mapClose )
	end
	f11_arg0._isZoomed = false
end

local f0_local8 = function ( f8_arg0, f8_arg1, f8_arg2 )
	f8_arg0.PopulateMap = f0_local0
	f8_arg0.UpdateDetails = f0_local0
	f8_arg0.ZoomIn = f0_local0
	f8_arg0.ZoomOut = f0_local0
	f8_arg0._controllerIndex = f8_arg1
	f8_arg0._nodes = {}
	f8_arg0._ZoomIn = false
	f8_arg0._Zoomed = false
	f8_arg0._overPopupNodes = {}
	f8_arg0._urzPopupNodes = {}
	f8_arg0._ukPopupNodes = {}
	local f8_local0 = nil
	local f8_local1 = function ()
		local f9_local0 = f8_arg0:Wait( math.random( 5000, 10000 ) )
		local f9_local1 = math.random( 0.01, 0.02 )
		f9_local0.onComplete = function ()
			f9_local0.Map:SetGlitchAmount( f9_local0, 0 )
			f9_local0.Map:SetGlitchAmount( 0, 100 )
			f9_local0()
		end
		
	end
	
	f8_local1()
end

function LevelSelectMap( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "LevelSelectMap"
	self._animationSets = {}
	self._sequences = {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local BG = nil
	
	BG = LUI.UIImage.new()
	BG.id = "BG"
	BG:SetRGBFromInt( 0, 0 )
	BG:SetAnchorsAndPosition( 0, 0, 0, 0, _1080p * -564, _1080p * 1612, _1080p * -484, _1080p * 484 )
	self:addElement( BG )
	self.BG = BG
	
	local Map = nil
	
	Map = LUI.UIImage.new()
	Map.id = "Map"
	Map:setImage( RegisterMaterial( "campaign_world_map" ), 0 )
	Map:SetAnchorsAndPosition( 0, 0, 0, 0, _1080p * -564, _1080p * 1612, _1080p * -484, _1080p * 484 )
	self:addElement( Map )
	self.Map = Map
	
	local Decoration1 = nil
	
	Decoration1 = MenuBuilder.BuildRegisteredType( "LevelMapDecoration", {
		controllerIndex = f1_local1
	} )
	Decoration1.id = "Decoration1"
	Decoration1:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 2042, _1080p * 2542, _1080p * -125, _1080p * 375 )
	self:addElement( Decoration1 )
	self.Decoration1 = Decoration1
	
	local Decoration2 = nil
	
	Decoration2 = MenuBuilder.BuildRegisteredType( "LevelMapDecoration", {
		controllerIndex = f1_local1
	} )
	Decoration2.id = "Decoration2"
	Decoration2:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 242, _1080p * 742, _1080p * 154, _1080p * 654 )
	self:addElement( Decoration2 )
	self.Decoration2 = Decoration2
	
	local Decoration3 = nil
	
	Decoration3 = MenuBuilder.BuildRegisteredType( "LevelMapDecoration", {
		controllerIndex = f1_local1
	} )
	Decoration3.id = "Decoration3"
	Decoration3:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1892, _1080p * 2392, _1080p * 457, _1080p * 957 )
	self:addElement( Decoration3 )
	self.Decoration3 = Decoration3
	
	local Decoration4 = nil
	
	Decoration4 = MenuBuilder.BuildRegisteredType( "LevelMapDecoration", {
		controllerIndex = f1_local1
	} )
	Decoration4.id = "Decoration4"
	Decoration4:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 819, _1080p * 1319, _1080p * 290, _1080p * 790 )
	self:addElement( Decoration4 )
	self.Decoration4 = Decoration4
	
	local Decoration5 = nil
	
	Decoration5 = MenuBuilder.BuildRegisteredType( "LevelMapDecoration", {
		controllerIndex = f1_local1
	} )
	Decoration5.id = "Decoration5"
	Decoration5:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1345, _1080p * 1845, _1080p * 54, _1080p * 554 )
	self:addElement( Decoration5 )
	self.Decoration5 = Decoration5
	
	local Decoration6 = nil
	
	Decoration6 = MenuBuilder.BuildRegisteredType( "LevelMapDecoration", {
		controllerIndex = f1_local1
	} )
	Decoration6.id = "Decoration6"
	Decoration6:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1345, _1080p * 1845, _1080p * 503, _1080p * 1003 )
	self:addElement( Decoration6 )
	self.Decoration6 = Decoration6
	
	local Decoration7 = nil
	
	Decoration7 = MenuBuilder.BuildRegisteredType( "LevelMapDecoration", {
		controllerIndex = f1_local1
	} )
	Decoration7.id = "Decoration7"
	Decoration7:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 2588, _1080p * 3088, _1080p * 872, _1080p * 1372 )
	self:addElement( Decoration7 )
	self.Decoration7 = Decoration7
	
	local Decoration8 = nil
	
	Decoration8 = MenuBuilder.BuildRegisteredType( "LevelMapDecoration", {
		controllerIndex = f1_local1
	} )
	Decoration8.id = "Decoration8"
	Decoration8:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 2655, _1080p * 3155, _1080p * 40, _1080p * 540 )
	self:addElement( Decoration8 )
	self.Decoration8 = Decoration8
	
	local UrzBox = nil
	
	UrzBox = LUI.UIImage.new()
	UrzBox.id = "UrzBox"
	UrzBox:SetAlpha( 0, 0 )
	UrzBox:SetPixelGridEnabled( true )
	UrzBox:SetPixelGridContrast( 0.8, 0 )
	UrzBox:SetPixelGridBlockWidth( 6, 0 )
	UrzBox:SetPixelGridBlockHeight( 6, 0 )
	UrzBox:SetPixelGridGutterWidth( 2, 0 )
	UrzBox:SetPixelGridGutterHeight( 2, 0 )
	UrzBox:setImage( RegisterMaterial( "campaign_urzikstan_map_mask" ), 0 )
	UrzBox:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 2478, _1080p * 2606, _1080p * 689, _1080p * 817 )
	self:addElement( UrzBox )
	self.UrzBox = UrzBox
	
	local UrzFocus = nil
	
	UrzFocus = LUI.UIImage.new()
	UrzFocus.id = "UrzFocus"
	UrzFocus:SetRGBFromTable( SWATCHES.Frontend.PanelBorder, 0 )
	UrzFocus:setImage( RegisterMaterial( "campaign_urzikstan_map_circles" ), 0 )
	UrzFocus:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 2460, _1080p * 2588, _1080p * 685, _1080p * 813 )
	self:addElement( UrzFocus )
	self.UrzFocus = UrzFocus
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	UrzBox:RegisterAnimationSequence( "UrzBlink", {
		{
			value = -2.3534382785503553E-185,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = -2.3534382788928255E-185,
			duration = 667,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = -2.3534382785503553E-185,
			duration = 667,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.outQuadratic
		}
	} )
	self._sequences.UrzBlink = function ()
		menu:AnimateLoop( "UrzBlink" )
	end
	
	UrzBox:RegisterAnimationSequence( "UrzHide", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.UrzHide = function ()
		menu:AnimateSequence( "UrzHide" )
	end
	
	UrzFocus:RegisterAnimationSequence( "UrzFocusStart", {
		{
			duration = 200,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 2460,
			easing = LUI.EASING.outCubic
		},
		{
			duration = 200,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 2588,
			easing = LUI.EASING.outCubic
		},
		{
			duration = 200,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 685,
			easing = LUI.EASING.outCubic
		},
		{
			duration = 200,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 813,
			easing = LUI.EASING.outCubic
		},
		{
			value = 1,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.outCubic
		}
	} )
	self._sequences.UrzFocusStart = function ()
		menu:AnimateSequence( "UrzFocusStart" )
	end
	
	UrzFocus:RegisterAnimationSequence( "UrzFocusLoop", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Z_Rotation
		},
		{
			value = 360,
			duration = 35000,
			property = TWEEN_PROPERTY.Z_Rotation
		}
	} )
	self._sequences.UrzFocusLoop = function ()
		menu:AnimateLoop( "UrzFocusLoop" )
	end
	
	UrzFocus:RegisterAnimationSequence( "UrzFocusEnd", {
		{
			duration = 200,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 2521,
			easing = LUI.EASING.inCubic
		},
		{
			duration = 200,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 746,
			easing = LUI.EASING.inCubic
		},
		{
			duration = 200,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 2527,
			easing = LUI.EASING.inCubic
		},
		{
			duration = 200,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 752,
			easing = LUI.EASING.inCubic
		},
		{
			value = 0,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.inCubic
		}
	} )
	self._sequences.UrzFocusEnd = function ()
		menu:AnimateSequence( "UrzFocusEnd" )
	end
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "LevelSelectMap", LevelSelectMap )
LockTable( _M )
