-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
module( ..., package.seeall )
require( "ui.inGame.InGameMenuBackground" )
require( "ui.widgets.MenuTitle" )
require( "ui.widgets.PerkDetails" )
require( "ui.widgets.PerkButton" )
require( "ui.widgets.PerkTab" )
require( "ui.widgets.MPPlayerDetails" )
require( "ui.widgets.PerkInfoPanel" )
require( "ui.widgets.LobbyMembersFooter" )
require( "ui.inGame.InGameMenuTimerStatus" )
require( "ui.widgets.VerticalMinimalScrollbar" )
require( "ui.widgets.CDLRestrictionTag" )
require( "ui.widgets.mp.BRWarningInfo" )
require( "ui.widgets.mp.BRWarningIcon" )
local f0_local0 = function ()
	local f64_local0
	if not CONDITIONS.IsThirdGameMode() and not CONDITIONS.InGameAndBR() then
		f64_local0 = CONDITIONS.SpecialistAllowed()
	else
		f64_local0 = false
	end
	return f64_local0
end

local f0_local1 = function ( f63_arg0, f63_arg1, f63_arg2, f63_arg3, f63_arg4, f63_arg5, f63_arg6, f63_arg7, f63_arg8, f63_arg9, f63_arg10, f63_arg11 )
	f63_arg0.InfoPanel.ItemName:setText( f63_arg2 )
	f63_arg0.InfoPanel:SetupPatchNotes( f63_arg1, f63_arg9 )
	local f63_local0 = nil
	if f63_arg11 and f63_arg11.unlockType == LOOT.unlockTypes.CHALLENGE and f63_arg11.challengeData then
		local f63_local1 = f63_arg11.challengeData.displayTier
		if not f63_local1 then
			f63_local1 = f63_arg11.challengeData.activeTier
		end
		f63_local0 = {
			title = f63_arg11.unlockMethod,
			displayData = Challenge.GetChallengeItemDisplayDataForTier( f63_arg11.challengeData, f63_local1 )
		}
	end
	local f63_local1 = f63_arg0.InfoPanel:UpdateDescription( {
		newDesc = f63_arg3,
		isUnlocked = f63_arg4,
		unlockText = f63_arg5,
		isNew = f63_arg6,
		extraDesc = f63_arg7,
		isCDLRestricted = f63_arg8,
		unlockRank = f63_arg10,
		challengeInfo = f63_local0
	} )
	if f63_arg0.BRWarningInfoFEPro then
		local f63_local2 = 120 * _1080p
		local f63_local3 = f63_arg0.InfoPanel:GetCurrentAnchorsAndPositions()
		f63_local3 = f63_local3.top
		local f63_local4 = LAYOUT.GetElementHeight( f63_arg0.BRWarningInfoFEPro )
		f63_arg0.BRWarningInfoFEPro:SetTop( f63_local3 + f63_local1 + f63_local2 + f63_local4, 200 )
		f63_arg0.BRWarningInfoFEPro:SetBottom( f63_local3 + f63_local1 + f63_local2 + f63_local4 * 2, 200 )
	end
end

local f0_local2 = function ( f62_arg0, f62_arg1, f62_arg2 )
	f62_arg0.BasePerk:UpdatePerk( f62_arg2.basePerk )
	f62_arg0.UpgradePerk1:UpdatePerk( f62_arg2.upgradePerk1 )
	f62_arg0.UpgradePerk2:UpdatePerk( f62_arg2.upgradePerk2 )
end

local f0_local3 = function ( f61_arg0, f61_arg1 )
	CLIENT_MODEL.SetModel( f61_arg0, f61_arg1 )
end

local f0_local4 = function ( f60_arg0, f60_arg1 )
	if Engine[0x12586A3F4FB490E]() then
		local f60_local0 = {}
		for f60_local4, f60_local5 in ipairs( f60_arg0.perkTable[f60_arg1] ) do
			f60_local0[f60_local5.model] = FrontEndScene.MakePriority( FrontEndScene.StreamPriorityImagePreload.MipDrop1, 50 )
		end
		FrontEndScene.RequestBodyModels( f60_local0 )
	end
end

local f0_local5 = function ( f59_arg0, f59_arg1, f59_arg2, f59_arg3, f59_arg4 )
	if CONDITIONS.InFrontend() and f59_arg0.perkType == f59_arg2 then
		if f59_arg2 == Cac.PerkTypes.CORE then
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_PATCH, f59_arg3 )
		elseif f59_arg2 == Cac.PerkTypes.ACTIVE then
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_ACTIVE_PATCH, f59_arg3 )
		elseif f59_arg2 == Cac.PerkTypes.PASSIVE then
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_PASSIVE_PATCH, f59_arg3 )
		elseif f59_arg2 == Cac.PerkTypes.SPECIAL_ONE then
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_PATCH_SPECIALIST, f59_arg3 )
		elseif f59_arg2 == Cac.PerkTypes.SPECIAL_TWO then
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_ACTIVE_PATCH_SPECIALIST, f59_arg3 )
		elseif f59_arg2 == Cac.PerkTypes.SPECIAL_THREE then
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_PASSIVE_PATCH_SPECIALIST, f59_arg3 )
		end
	end
end

local f0_local6 = function ( f58_arg0, f58_arg1, f58_arg2 )
	local f58_local0 = f58_arg2.perkData
	local f58_local1 = PlayerData[0x8B73907B55C4D71]( f58_arg1, LOADOUT.GetLoadoutStatsGroup() )
	f58_local1 = f58_local1.squadMembers
	local f58_local2 = LOADOUT.GetLoadoutSelectedPerk( f58_arg1, f58_arg0.loadoutIndex, f58_arg0.perkLoadoutIndex, LOADOUT.IsSpecialPerk( f58_arg2.perkData.perkType ) )
	local f58_local3 = MatchRules[0x1C6C7F044453B4]( f58_local0.ref )
	local f58_local4 = f58_local2:get() == f58_local0.ref
	if f58_local4 then
		f58_arg0.selectedPerkButton = f58_arg2
		f58_arg0._focusedPerkName = ToUpperCase( Engine[0xED84C33EC5F01EA]( f58_local0.name ) )
	end
	f58_arg2.Text:SetUseForceOpacityMode( true )
	f58_arg2.Text:setText( Engine[0xED84C33EC5F01EA]( f58_local0.name ) )
	f58_arg2.Icon:setImage( RegisterMaterial( f58_local0.image ) )
	local f58_local5 = f58_arg2
	local f58_local6 = f58_arg2.SetButtonDisabled
	local f58_local7
	if f58_local0.isUnlocked then
		f58_local7 = f58_local0.isConflict
		if not f58_local7 then
			f58_local7 = f58_local0.isRestricted
		end
	else
		f58_local7 = true
	end
	f58_local6( f58_local5, f58_local7 )
	f58_arg2:SetButtonConflicted( f58_local0.isConflict, not f58_local0.isUnlocked, f58_local3 )
	f58_arg2:SetSelected( f58_local4 )
	f58_arg2:SetNew( f58_local0.isNew, f58_local0.ref )
end

local f0_local7 = function ( f57_arg0, f57_arg1, f57_arg2, f57_arg3 )
	local f57_local0 = 1
	local f57_local1 = #f57_arg0.specialPerkTable
	local f57_local2, f57_local3, f57_local4, f57_local5, f57_local6 = nil
	local f57_local7 = {}
	for f57_local8 = 1, 3, 1 do
		if f57_local8 - 1 == f57_arg2 then
			local f57_local11 = LOADOUT.GetLoadoutSelectedPerk( f57_arg1, f57_arg0.loadoutIndex, f57_arg2, true )
			f57_local6 = f57_local11:get()
		else
			local f57_local11 = LOADOUT.GetLoadoutSelectedPerk( f57_arg1, f57_arg0.loadoutIndex, f57_local8 - 1, true )
			table.insert( f57_local7, {
				ref = f57_local11:get(),
				perkIndex = f57_local8 - 1
			} )
		end
	end
	if f57_arg3 then
		for f57_local8 = 1, #f57_local7, 1 do
			if f57_local6 == f57_local7[f57_local8].ref then
				LOADOUT.SetLoadoutSelectedPerk( f57_arg1, f57_arg0.loadoutIndex, f57_local7[f57_local8].perkIndex, f57_arg0.lastSelectedPerkRef, true )
				if Engine[0x12586A3F4FB490E]() then
					local f57_local11 = nil
					local f57_local12 = LOADOUT.GetPerkDataByField( f57_arg0.lastSelectedPerkRef, CSV.perks.cols.specialistModel )
					if f57_local7[f57_local8].perkIndex == 0 then
						f57_local11 = CLIENT_MODEL.coreMPModels.PERK_PATCH_SPECIALIST
					elseif f57_local7[f57_local8].perkIndex == 1 then
						f57_local11 = CLIENT_MODEL.coreMPModels.PERK_ACTIVE_PATCH_SPECIALIST
					elseif f57_local7[f57_local8].perkIndex == 2 then
						f57_local11 = CLIENT_MODEL.coreMPModels.PERK_PASSIVE_PATCH_SPECIALIST
					end
					if f57_local11 then
						f0_local0( f57_local11, f57_local12 )
					end
				end
			end
		end
	else
		if f57_local6 ~= f57_arg0.perk1 and f57_local6 ~= f57_arg0.perk2 and f57_local6 ~= f57_arg0.perk3 then
			f57_local8 = false
		else
			local f57_local8 = true
		end
		if (f57_local8 or f57_local6 == Cac.perkNoneValue) and f57_local0 <= f57_local1 then
			
		else
			
		end
	end
end

local f0_local8 = function ( f56_arg0 )
	local f56_local0
	if f56_arg0.perk1 ~= "specialty_hardline" and f56_arg0.perk2 ~= "specialty_hardline" and f56_arg0.perk3 ~= "specialty_hardline" then
		f56_local0 = false
	else
		f56_local0 = true
	end
	return f56_local0
end

local f0_local9 = function ( f55_arg0, f55_arg1, f55_arg2, f55_arg3 )
	local f55_local0 = LOADOUT.GetLoadoutSelectedPerk( f55_arg1, f55_arg0.loadoutIndex, 0 )
	f55_arg0.perk1 = f55_local0:get()
	f55_local0 = LOADOUT.GetLoadoutSelectedPerk( f55_arg1, f55_arg0.loadoutIndex, 1 )
	f55_arg0.perk2 = f55_local0:get()
	f55_local0 = LOADOUT.GetLoadoutSelectedPerk( f55_arg1, f55_arg0.loadoutIndex, 2 )
	f55_arg0.perk3 = f55_local0:get()
	if f55_arg3 then
		f0_local0( f55_arg0, f55_arg1, f55_arg2, true )
	else
		f0_local0( f55_arg0, f55_arg1, 0, false )
		f0_local0( f55_arg0, f55_arg1, 1, false )
		f0_local0( f55_arg0, f55_arg1, 2, false )
	end
	f55_local0 = LOADOUT.GetLoadoutSelectedPerk( f55_arg1, f55_arg0.loadoutIndex, 0, true )
	f55_arg0.specialPerk1 = f55_local0:get()
	f55_local0 = LOADOUT.GetLoadoutSelectedPerk( f55_arg1, f55_arg0.loadoutIndex, 1, true )
	f55_arg0.specialPerk2 = f55_local0:get()
	f55_local0 = LOADOUT.GetLoadoutSelectedPerk( f55_arg1, f55_arg0.loadoutIndex, 2, true )
	f55_arg0.specialPerk3 = f55_local0:get()
	if f55_arg0.Tabs:IsTabAvailable() and f55_arg0.isSpecialPerkActive then
		f55_local0 = f55_arg0.Tabs:GetTabAtIndex( Cac.PerkTypes.SPECIAL_ONE )
		local f55_local1 = f55_arg0.Tabs:GetTabAtIndex( Cac.PerkTypes.SPECIAL_TWO )
		local f55_local2 = f55_arg0.Tabs:GetTabAtIndex( Cac.PerkTypes.SPECIAL_THREE )
		local f55_local3
		if f55_arg0.perk1 ~= "specialty_hardline" and f55_arg0.perk2 ~= "specialty_hardline" and f55_arg0.perk3 ~= "specialty_hardline" then
			f55_local3 = false
		else
			f55_local3 = true
		end
		f55_local0:SetupPerkData( f55_arg1, f55_arg0.specialPerk1, true, f55_local3 )
		f55_local1:SetupPerkData( f55_arg1, f55_arg0.specialPerk2, true, f55_local3 )
		f55_local2:SetupPerkData( f55_arg1, f55_arg0.specialPerk3, true, f55_local3 )
	end
end

local f0_local10 = function ( f54_arg0, f54_arg1, f54_arg2, f54_arg3 )
	local f54_local0 = f54_arg0.perkTable[f54_arg2]
	local f54_local1 = LOADOUT.GetLoadoutSelectedPerk( f54_arg1, f54_arg0.loadoutIndex, 0, true )
	f54_local1 = f54_local1:get()
	local f54_local2 = LOADOUT.GetLoadoutSelectedPerk( f54_arg1, f54_arg0.loadoutIndex, 1, true )
	f54_local2 = f54_local2:get()
	local f54_local3 = LOADOUT.GetLoadoutSelectedPerk( f54_arg1, f54_arg0.loadoutIndex, 2, true )
	f54_local3 = f54_local3:get()
	for f54_local7, f54_local8 in ipairs( f54_local0 ) do
		f54_local8.perkType = f54_arg2
		f54_local8.isConflict = false
		if f54_arg3 and (f54_local8.ref == f54_arg0.perk1 or f54_local8.ref == f54_arg0.perk2 or f54_local8.ref == f54_arg0.perk3) then
			f54_local8.isConflict = true
		end
		if (f54_local8.ref == f54_local1 or f54_local8.ref == f54_local2 or f54_local8.ref == f54_local3) and f54_arg3 then
			f54_local8.isSpecialPerkEquipped = true
		else
			f54_local8.isSpecialPerkEquipped = false
		end
		if CONDITIONS.IsBRGameType() then
			f54_local8.isDisabledBR = Cac.GetIsPerkDisabledForBR( f54_local8.ref )
		else
			f54_local8.isDisabledBR = false
		end
	end
end

local f0_local11 = function ( f53_arg0, f53_arg1, f53_arg2 )
	return LOOT.IsNew( f53_arg1, LOOT.GetItemID( LOOT.itemTypes.PERK, f53_arg2.ref ) )
end

local f0_local12 = function ( f52_arg0, f52_arg1, f52_arg2, f52_arg3 )
	for f52_local3, f52_local4 in ipairs( f52_arg0.perkTable[f52_arg2] ) do
		if f0_local0( f52_arg0, f52_arg1, f52_local4 ) or f52_arg3 and f52_arg3[f52_local4.ref] then
			return true
		end
	end
	return false
end

local f0_local13 = function ( f51_arg0, f51_arg1 )
	local f51_local0 = nil
	if CONDITIONS.IsGetMockNewItemsEnabled() then
		local f51_local1 = f51_arg0.perkTable[f51_arg1]
		f51_local0 = {}
		for f51_local5, f51_local6 in ipairs( f51_local1 ) do
			if f51_arg1 == Cac.PerkTypes.ACTIVE then
				break
			elseif f51_local5 % 2 == 0 and f51_local6.ref then
				f51_local0[f51_local6.ref] = true
			end
		end
	end
	return f51_local0
end

local f0_local14 = function ( f47_arg0, f47_arg1, f47_arg2, f47_arg3, f47_arg4 )
	f0_local0( f47_arg0, f47_arg1, f47_arg3, f47_arg4 )
	f0_local0( f47_arg0, f47_arg1, f47_arg2, f47_arg4 )
	local f47_local0 = f47_arg0.perkTable[f47_arg2]
	table.sort( f47_local0, function ( f50_arg0, f50_arg1 )
		if f50_arg0.isRestricted ~= f50_arg1.isRestricted then
			local f50_local0 = f50_arg1.isRestricted
			if f50_local0 then
				f50_local0 = not f50_arg0.isRestricted
			end
			return f50_local0
		elseif f50_arg0.unlockRank ~= f50_arg1.unlockRank then
			return f50_arg0.unlockRank < f50_arg1.unlockRank
		else
			local f50_local0 = Engine[0xED84C33EC5F01EA]( f50_arg0.name )
			local f50_local1 = Engine[0xED84C33EC5F01EA]( f50_arg1.name )
			if f50_local0 ~= f50_local1 then
				return f50_local0 < f50_local1
			else
				return false
			end
		end
	end )
	local f47_local1 = 0
	local f47_local2 = LOADOUT.GetLoadoutSelectedPerk( f47_arg1, f47_arg0.loadoutIndex, f47_arg0.perkLoadoutIndex, f47_arg4 )
	local f47_local3 = f47_local2:get()
	for f47_local7, f47_local8 in ipairs( f47_local0 ) do
		if f47_local3 == f47_local8.ref then
			f47_local1 = f47_local7 - 1
		end
	end
	f47_local2 = f0_local0( f47_arg0, f47_arg2 )
	f47_arg0.perkGrid:SetRefreshChild( function ( f49_arg0, f49_arg1, f49_arg2 )
		local f49_local0 = f47_arg0.perkGrid:GetContentIndex( f49_arg1, f49_arg2, {
			relativePosition = false
		} )
		f49_arg0.perkData = f47_arg0[f49_local0 + 1]
		f47_arg0( f47_arg0, f47_arg0, f49_arg0 )
		if f47_arg0 then
			f49_arg0:SetNewItemNotificationVisible( f47_arg0[f49_arg0.perkData.ref] or false )
		end
		if f47_arg0 == f49_local0 then
			f49_arg0:HandleButtonFocus( f47_arg0 )
		end
	end )
	if LUI.HasHideableItemsLogic( f47_arg0.perkGrid, f47_arg1 ) then
		LUI.RemoveHideableItemsLogic( f47_arg0.perkGrid, f47_arg1 )
	end
	LUI.AddHideableItemsLogicToGrid( f47_arg0.perkGrid, f47_arg1, {
		animated = true,
		items = f47_local0,
		IsHideableItem = function ( f48_arg0 )
			local f48_local0
			if not f47_arg0( f47_arg0, f47_arg0, f48_arg0 ) then
				if f47_arg0 then
					f48_local0 = not f47_arg0[f48_arg0.ref]
				else
					f48_local0 = true
				end
			else
				f48_local0 = false
			end
			return f48_local0
		end,
		hidden = NewUnlockIndicatorUtils.InNewItemsMode( f47_arg1 ),
		defaultFocusIndex = f47_local1
	} )
	f47_arg0.perkGrid._shouldFocus = false
	f47_arg0.perkGrid:processEvent( {
		name = "gain_focus",
		shouldPlayButtonSound = false,
		controller = f47_arg1
	} )
	f47_arg0.perkGrid:RefreshContent()
	f0_local0( f47_arg0, f47_arg2 )
	if LUI.IsLastInputMouseNavigation( f47_arg1 ) then
		f47_arg0.perkGrid:processEvent( {
			name = "lose_focus",
			controller = f47_arg1
		} )
		f47_arg0.perkGrid:MouseSetActiveToDefaultFocus( f47_arg1 )
	end
end

local f0_local15 = function ( f46_arg0, f46_arg1, f46_arg2, f46_arg3 )
	local f46_local0 = f46_arg0
	if f46_local0 ~= nil and f46_local0.id ~= "PerkSelect" then
		
	else
		
	end
	if f46_local0.id == "PerkSelect" then
		if Engine[0x12586A3F4FB490E]() and Engine[0xD151EC5B41223B5]() then
			local f46_local1 = LOADOUT.GetLoadoutSelectedPerk( f46_arg1, f46_local0.loadoutIndex, f46_local0.perkLoadoutIndex, f46_local0._isSpecialPerk )
			local f46_local2 = f46_local1:get()
			local f46_local3 = LOADOUT.GetPerkDataByField( f46_local2, CSV.perks.cols.model )
			local f46_local4 = LOADOUT.GetPerkDataByField( f46_local2, CSV.perks.cols.modelSideFacingUp )
			local f46_local5 = f46_local3
			if f46_local0.perkType == Cac.PerkTypes.SPECIAL_ONE or f46_local0.perkType == Cac.PerkTypes.SPECIAL_TWO or f46_local0.perkType == Cac.PerkTypes.SPECIAL_THREE then
				local f46_local6 = LOADOUT.GetPerkDataByField( f46_local2, CSV.perks.cols.specialistModel )
				if f46_local6 and 0 < #f46_local6 then
					f46_local5 = f46_local6
				end
			end
			f0_local0( f46_local0, f46_arg1, f46_local0.perkType, f46_local5, f46_local4 )
		end
		local f46_local1
		if f46_arg3 then
			f46_local1 = f46_arg0:GetCurrentTabIndex() - 3
			if not f46_local1 then
			
			else
				f46_local0.perkLoadoutIndex = f46_local1
				f46_local0.perkType = f46_arg2
				f0_local0( f46_local0, f46_arg1, f46_arg2, f46_local0.perkLoadoutIndex, f46_arg3 )
				f46_local0._isSpecialPerk = f46_arg3
				f46_local1 = LOADOUT.GetLoadoutSelectedPerk( f46_arg1, f46_local0.loadoutIndex, f46_local0.perkLoadoutIndex, f46_arg3 )
				f46_local0.selectedPerkRef = f46_local1:get()
				local f46_local2 = f46_arg0:GetCurrentTab()
				f46_local2:SetupPerkData( f46_arg1, f46_local0.selectedPerkRef, f46_arg3, f0_local0( f46_local0 ) )
			end
		end
		f46_local1 = f46_arg0:GetCurrentTabIndex()
	end
end

local f0_local16 = function ( f45_arg0, f45_arg1, f45_arg2 )
	local f45_local0 = f45_arg0.Tabs:GetTabAtIndex( f45_arg2 )
	if not f45_local0:IsEnabled() then
		return 
	else
		f45_local0:SetBreadcrumb( f0_local0( f45_arg0, f45_arg1, f45_arg2, f0_local0( f45_arg0, f45_arg2 ) ) )
	end
end

local f0_local17 = function ( f44_arg0, f44_arg1, f44_arg2 )
	f44_arg0._hasNewItems = f0_local0( f44_arg0, f44_arg1, f44_arg2, f0_local0( f44_arg0, f44_arg2 ) )
	if f44_arg0._hasNewItems and not f44_arg0._newItemsActionVisible then
		NewUnlockIndicatorUtils.PushButtonPrompt( f44_arg0.HelperBar )
		f44_arg0._newItemsActionVisible = true
	elseif not f44_arg0._hasNewItems and f44_arg0._newItemsActionVisible then
		NewUnlockIndicatorUtils.PopButtonPrompt( f44_arg0.HelperBar )
		f44_arg0._newItemsActionVisible = false
	end
end

local f0_local18 = function ( f36_arg0, f36_arg1, f36_arg2 )
	local f36_local0 = function ( f43_arg0, f43_arg1, f43_arg2, f43_arg3 )
		
	end
	
	local f36_local1 = {
		perkLoadoutIndex = 0,
		isSpecialPerk = false,
		name = Engine[0xED84C33EC5F01EA]( "LUA_MENU/PERK_CORE" ),
		loadoutIndex = f36_arg0.loadoutIndex,
		loseFocusFunction = f36_local0,
		focusFunction = function ( f42_arg0, f42_arg1 )
			Engine[0x685AE31DEDA30A4]( "loadout_showcase_x" )
			f36_arg0( f42_arg0, f42_arg1, Cac.PerkTypes.CORE )
			if Engine[0x12586A3F4FB490E]() then
				f36_arg0( f36_arg0, f42_arg1, Cac.PerkTypes.CORE )
			end
		end
	}
	local f36_local2 = {
		perkLoadoutIndex = 1,
		isSpecialPerk = false,
		name = Engine[0xED84C33EC5F01EA]( "LUA_MENU/PERK_ACTIVE" ),
		loadoutIndex = f36_arg0.loadoutIndex,
		loseFocusFunction = f36_local0,
		focusFunction = function ( f41_arg0, f41_arg1 )
			Engine[0x685AE31DEDA30A4]( "loadout_showcase_y" )
			f36_arg0( f41_arg0, f41_arg1, Cac.PerkTypes.ACTIVE )
			if Engine[0x12586A3F4FB490E]() then
				f36_arg0( f36_arg0, f41_arg1, Cac.PerkTypes.ACTIVE )
			end
		end
	}
	local f36_local3 = {
		perkLoadoutIndex = 2,
		isSpecialPerk = false,
		name = Engine[0xED84C33EC5F01EA]( "LUA_MENU/PERK_PASSIVE" ),
		loadoutIndex = f36_arg0.loadoutIndex,
		loseFocusFunction = f36_local0,
		focusFunction = function ( f40_arg0, f40_arg1 )
			Engine[0x685AE31DEDA30A4]( "loadout_showcase_z" )
			f36_arg0( f40_arg0, f40_arg1, Cac.PerkTypes.PASSIVE )
			if Engine[0x12586A3F4FB490E]() then
				f36_arg0( f36_arg0, f40_arg1, Cac.PerkTypes.PASSIVE )
			end
		end
	}
	local f36_local4 = {
		perkLoadoutIndex = 0,
		isSpecialPerk = true,
		name = Engine[0xED84C33EC5F01EA]( "LUA_MENU/PERK_CORE" ),
		loadoutIndex = f36_arg0.loadoutIndex,
		loseFocusFunction = f36_local0,
		focusFunction = function ( f39_arg0, f39_arg1 )
			Engine[0x685AE31DEDA30A4]( "loadout_showcase_specialist" )
			f36_arg0( f39_arg0, f39_arg1, Cac.PerkTypes.SPECIAL_ONE, true )
			if Engine[0x12586A3F4FB490E]() then
				f36_arg0( f36_arg0, f39_arg1, Cac.PerkTypes.SPECIAL_ONE )
			end
		end
	}
	local f36_local5 = {
		perkLoadoutIndex = 1,
		isSpecialPerk = true,
		name = Engine[0xED84C33EC5F01EA]( "LUA_MENU/PERK_ACTIVE" ),
		loadoutIndex = f36_arg0.loadoutIndex,
		loseFocusFunction = f36_local0,
		focusFunction = function ( f38_arg0, f38_arg1 )
			Engine[0x685AE31DEDA30A4]( "loadout_showcase_specialist" )
			f36_arg0( f38_arg0, f38_arg1, Cac.PerkTypes.SPECIAL_TWO, true )
			if Engine[0x12586A3F4FB490E]() then
				f36_arg0( f36_arg0, f38_arg1, Cac.PerkTypes.SPECIAL_TWO )
			end
		end
	}
	local f36_local6 = {
		perkLoadoutIndex = 2,
		isSpecialPerk = true,
		name = Engine[0xED84C33EC5F01EA]( "LUA_MENU/PERK_PASSIVE" ),
		loadoutIndex = f36_arg0.loadoutIndex,
		loseFocusFunction = f36_local0,
		focusFunction = function ( f37_arg0, f37_arg1 )
			Engine[0x685AE31DEDA30A4]( "loadout_showcase_specialist" )
			f36_arg0( f37_arg0, f37_arg1, Cac.PerkTypes.SPECIAL_THREE, true )
			if Engine[0x12586A3F4FB490E]() then
				f36_arg0( f36_arg0, f37_arg1, Cac.PerkTypes.SPECIAL_THREE )
			end
		end
	}
	local f36_local7 = {
		f36_local1,
		f36_local2,
		f36_local3
	}
	if f36_arg2 then
		table.insert( f36_local7, f36_local4 )
		table.insert( f36_local7, f36_local5 )
		table.insert( f36_local7, f36_local6 )
	end
	f36_arg0.tabsData = f36_local7
	f36_arg0.Tabs:SetTabs( f36_local7 )
	f36_arg0.Tabs:SetAlignment( LUI.Alignment.Left )
	for f36_local8 = 1, #f36_local7, 1 do
		f36_arg0:UpdateTabBreadcrumb( f36_arg1, f36_local8 )
	end
end

local f0_local19 = function ( f35_arg0, f35_arg1 )
	PERK.CacheValidPerks( f35_arg1 )
	f35_arg0.perkTable = PERK.perkTable
	f35_arg0.newPerksRefTable = PERK.newPerksRefTable
	f35_arg0.selectedSpecialPerkTable = PERK.selectedSpecialPerkTable
	f35_arg0.specialPerkTable = PERK.specialPerkTable
end

local f0_local20 = function ( f34_arg0 )
	if f34_arg0.isSpecialPerkAvailable then
		if f34_arg0.BRWarningInfoFEPro then
			ACTIONS.AnimateSequence( f34_arg0.BRWarning, "Show" )
		end
		if f34_arg0.isSpecialPerkActive then
			ACTIONS.AnimateSequence( f34_arg0, "SpecialPerkEnabled" )
		else
			ACTIONS.AnimateSequence( f34_arg0, "SpecialPerkDisabled" )
		end
	else
		ACTIONS.AnimateSequence( f34_arg0, "HideSpecialPerkPrompt" )
		if f34_arg0.BRWarningInfoFEPro then
			ACTIONS.AnimateSequence( f34_arg0.BRWarningInfoFEPro, "Hide" )
			ACTIONS.AnimateSequence( f34_arg0.BRWarning, "Hide" )
		end
	end
end

local f0_local21 = function ( f33_arg0, f33_arg1 )
	f0_local0( f33_arg0 )
	f0_local0( f33_arg0, f33_arg1, f33_arg0.isSpecialPerkActive )
end

local f0_local22 = function ( f32_arg0, f32_arg1 )
	if CONDITIONS.InFrontend() then
		if f32_arg0.isSpecialPerkActive then
			local f32_local0 = LOADOUT.GetLoadoutSelectedPerk( f32_arg1, f32_arg0.loadoutIndex, 0, true )
			f32_local0 = f32_local0:get()
			local f32_local1 = LOADOUT.GetLoadoutSelectedPerk( f32_arg1, f32_arg0.loadoutIndex, 1, true )
			f32_local1 = f32_local1:get()
			local f32_local2 = LOADOUT.GetLoadoutSelectedPerk( f32_arg1, f32_arg0.loadoutIndex, 2, true )
			f32_local2 = f32_local2:get()
			local f32_local3 = LOADOUT.GetPerkDataByField( f32_local0, CSV.perks.cols.specialistModel )
			local f32_local4 = LOADOUT.GetPerkDataByField( f32_local1, CSV.perks.cols.specialistModel )
			local f32_local5 = LOADOUT.GetPerkDataByField( f32_local2, CSV.perks.cols.specialistModel )
			if f32_local3 == nil or #f32_local3 == 0 then
				f32_local3 = LOADOUT.GetPerkDataByField( f32_local0, CSV.perks.cols.model )
			end
			if f32_local4 == nil or #f32_local4 == 0 then
				f32_local4 = LOADOUT.GetPerkDataByField( f32_local1, CSV.perks.cols.model )
			end
			if f32_local5 == nil or #f32_local5 == 0 then
				f32_local5 = LOADOUT.GetPerkDataByField( f32_local2, CSV.perks.cols.model )
			end
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_PATCH_SPECIALIST, f32_local3 )
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_ACTIVE_PATCH_SPECIALIST, f32_local4 )
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_PASSIVE_PATCH_SPECIALIST, f32_local5 )
		else
			local f32_local0 = "tag_origin"
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_PATCH_SPECIALIST, f32_local0 )
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_ACTIVE_PATCH_SPECIALIST, f32_local0 )
			f0_local0( CLIENT_MODEL.coreMPModels.PERK_PASSIVE_PATCH_SPECIALIST, f32_local0 )
		end
	end
end

local f0_local23 = function ( f31_arg0, f31_arg1 )
	f31_arg0.isSpecialPerkActive = not f31_arg0.isSpecialPerkActive
	if CONDITIONS.InFrontend() then
		if f31_arg0.isSpecialPerkActive then
			CLIENT_MODEL.UpdatePatchSpecialistClientModels( f31_arg0, LOADOUT.GetLoadoutPlayerData( f31_arg1, f31_arg0.loadoutIndex ) )
		else
			CLIENT_MODEL.HidePatchSpecialistClientModels( f31_arg0.isSpecialPerkActive )
		end
	end
	local f31_local0 = LOADOUT.SetLoadoutUsingSpecialist
	local f31_local1 = f31_arg1
	local f31_local2 = f31_arg0.loadoutIndex
	local f31_local3
	if f31_arg0.isSpecialPerkActive then
		f31_local3 = 1
	else
		f31_local3 = 0
	end
	f31_local0( f31_local1, f31_local2, f31_local3 )
	f0_local0( f31_arg0, f31_arg1 )
	f0_local0( f31_arg0, f31_arg1 )
end

local f0_local24 = function ( f29_arg0, f29_arg1 )
	f29_arg0.bindButton:addEventHandler( "button_alt1", function ( f30_arg0, f30_arg1 )
		if f29_arg0.isSpecialPerkAvailable then
			local f30_local0 = f30_arg0
			if f30_local0 ~= nil and f30_local0.id ~= "PerkSelect" then
				
			else
				
			end
			f29_arg0( f30_local0, f29_arg0 )
		end
	end )
	f29_arg0.isSpecialPerkAvailable = PROGRESSION.IsSpecialistPerkUnlocked( f29_arg1 )
	f29_arg0.isSpecialPerkActive = 0 < LOADOUT.GetLoadoutUsingSpecialist( f29_arg1, f29_arg0.loadoutIndex )
	f0_local0( f29_arg0, f29_arg1 )
	if f29_arg0.isSpecialPerkActive then
		f0_local0( f29_arg0, f29_arg1 )
	end
end

local f0_local25 = function ( f28_arg0, f28_arg1, f28_arg2 )
	for f28_local0 = 1, #f28_arg0.newPerksRefTable[f28_arg1], 1 do
		if f28_arg0.newPerksRefTable[f28_arg1][f28_local0] == f28_arg2 then
			table.remove( f28_arg0.newPerksRefTable[f28_arg1], f28_local0 )
			break
		end
	end
	if #f28_arg0.newPerksRefTable[f28_arg1] <= 0 then
		local f28_local0 = f28_arg0.Tabs:GetCurrentTab()
		f28_local0.NewItemSmallIcon:SetAlpha( 0 )
	end
end

local f0_local26 = function ( f24_arg0, f24_arg1 )
	if Engine[0x12586A3F4FB490E]() then
		local f24_local0 = CONDITIONS.IsThirdGameMode()
		local f24_local1 = LUI.FlowManager.IsInStack( "BRMainMenu" )
		local f24_local2
		if not f24_local0 or Onboarding.PerksCP.WasCompleted( f24_arg0, f24_arg1 ) then
			if not f24_local0 then
				f24_local2 = not Onboarding.Perks.WasCompleted( f24_arg0, f24_arg1 )
			else
				f24_local2 = false
			end
		else
			f24_local2 = true
		end
		local f24_local3 = function ( f26_arg0, f26_arg1 )
			if not MLG.IsCDLActive( f26_arg1 ) and not Onboarding.SpecialistPerk.WasCompleted( f26_arg0, f26_arg1 ) then
				local f26_local0 = function ( f27_arg0, f27_arg1 )
					f26_arg0( f26_arg0, f27_arg1 )
					ACTIONS.LeaveMenu( f27_arg0 )
				end
				
				local f26_local1 = ONBOARDING_DATA.GetOnboardingSpecialistPerkData()
				f26_local1.confirmButton.action = f26_local0
				LUI.FlowManager.RequestPopupMenu( f26_arg0, "onboardingfeaturepopup", true, f26_arg1, false, f26_local1 )
				Onboarding.SpecialistPerk.MarkCompleted( f26_arg0, f26_arg1 )
			end
		end
		
		if not f24_local1 and f24_local2 then
			local f24_local4 = ONBOARDING_DATA.GetOnboardingPerkData()
			if PROGRESSION.IsSpecialistPerkUnlocked( f24_arg1 ) and f0_local0() then
				f24_local4.confirmButton.action = function ( f25_arg0, f25_arg1 )
					ACTIONS.LeaveMenu( f25_arg0 )
					f24_arg0( f24_arg0, f25_arg1 )
				end
				
			end
			LUI.FlowManager.RequestPopupMenu( f24_arg0, "onboardingpopup", true, f24_arg1, false, f24_local4 )
			if f24_local0 then
				Onboarding.PerksCP.MarkCompleted( f24_arg0, f24_arg1 )
			else
				Onboarding.Perks.MarkCompleted( f24_arg0, f24_arg1 )
			end
		elseif PROGRESSION.IsSpecialistPerkUnlocked( f24_arg1 ) and f0_local0() then
			f24_local3( f24_arg0, f24_arg1 )
		end
	end
end

local f0_local27 = function ( f23_arg0, f23_arg1 )
	if Engine[0x12586A3F4FB490E]() then
		local f23_local0 = MenuBuilder.BuildRegisteredType( "FrontendCameraMover", {
			enableSway = true,
			controllerIndex = f23_arg1
		} )
		f23_local0:SetSwayValues( 4500, 0.06, 0.1 )
		f23_local0:SetLimits( -0.3, 0.3, -0.3, 0.3 )
		f23_arg0:addElement( f23_local0 )
		local f23_local1 = WATCH.GetEquippedWatch( f23_arg1 )
		FrontEndScene.SetExclusiveWeaponModels( {
			FrontEndScene.ClientWeapons.GunTablePrimary,
			FrontEndScene.ClientWeapons.GunTableSecondary,
			FrontEndScene.ClientWeapons.Watch
		} )
		local f23_local2 = WEAPON.GetWeaponModel( f23_arg1, FrontEndScene.ClientWeapons.Watch, CSV.weaponOffsets.watchFile )
		f23_arg0:addElement( f23_local2 )
		LOADOUT.RequestWatchAndWeaponModels( f23_arg1, f23_arg0.loadoutIndex )
		WATCH.SetWatchModelIfLoaded( f23_arg0, f23_arg1, f23_local2, f23_local1 )
	end
end

local f0_local28 = function ( f12_arg0, f12_arg1, f12_arg2 )
	assert( f12_arg0.InfoPanel )
	f12_arg0.UpdatePerkTree = f0_local0
	f12_arg0.UpdatePerkClientModel = f0_local0
	f12_arg0.UpdatePerkDisplayData = f0_local0
	f12_arg0.UpdatePerkList = f0_local0
	f12_arg0.RemovePerkFromTable = f0_local0
	f12_arg0.UpdateTabBreadcrumb = f0_local0
	f12_arg0._isSpecialPerk = false
	f12_arg0._isDescPromptShow = false
	if Engine[0x2DA54CF5D6B7F02]() and not f12_arg2.loadoutIndex then
		DebugPrint( "WARNING: Missing \"loadoutIndex\" option for PerkSelect menu. Only OK after a MyChanges." )
		f12_arg2.loadoutIndex = 0
	end
	assert( f12_arg2.loadoutIndex )
	f12_arg0.loadoutIndex = f12_arg2.loadoutIndex
	f12_arg0.perkLoadoutIndex = 0
	f12_arg0.selectedPerkButton = nil
	f12_arg0.MenuTitle:SetTitle( ToUpperCase( Engine[0xED84C33EC5F01EA]( "LUA_MENU/TITLE_PERK_SELECT" ) ) )
	f0_local0( f12_arg0, f12_arg1 )
	f12_arg0.InfoPanel:SetupPanel( f12_arg0.InfoPanel:GetCurrentAnchorsAndPositions() )
	f0_local0( f12_arg0, f12_arg1 )
	f0_local0( f12_arg0, f12_arg1, Cac.PerkTypes.CORE )
	f12_arg0.bindButton:addEventHandler( "button_secondary", function ( f22_arg0, f22_arg1 )
		local f22_local0 = f22_arg1.controller or f12_arg0
		if CONDITIONS.InNewItemsMode( f22_local0 ) then
			ACTIONS.TurnOffNewItemsMode( f12_arg0, f22_local0 )
		else
			ACTIONS.LeaveMenu( f12_arg0 )
		end
	end )
	local f12_local0 = function ( f21_arg0, f21_arg1, f21_arg2 )
		local f21_local0 = LOOT.IsNew( f21_arg1, LOOT.GetItemID( LOOT.itemTypes.PERK, f21_arg2.ref ) )
		local f21_local1 = f21_arg2.desc
		if CONDITIONS.IsBRGameType() then
			f21_local1 = f21_arg2.brDesc
		elseif CONDITIONS.IsThirdGameMode() then
			f21_local1 = f21_arg2.cpDesc
		end
		local f21_local2 = MLG.IsCDLActive( f21_arg1 )
		local f21_local3 = f21_arg0
		local f21_local4 = f21_arg0.UpdatePerkDisplayData
		local f21_local5 = f21_arg1
		local f21_local6 = f21_arg0._focusedPerkName
		local f21_local7 = Engine[0xED84C33EC5F01EA]( f21_local1 )
		local f21_local8
		if not f21_arg2.isConflict then
			f21_local8 = f21_arg2.isUnlocked
		else
			f21_local8 = false
		end
		local f21_local9 = f21_arg2.isConflict and Engine[0xED84C33EC5F01EA]( "LUA_MENU/PERK_IN_CONFLICT" ) or f21_arg2.unlockCriteria
		local f21_local10 = f21_local0
		local f21_local11
		if f21_arg2.extraInfo and 0 < #f21_arg2.extraInfo then
			f21_local11 = Engine[0xED84C33EC5F01EA]( f21_arg2.extraInfo )
			if not f21_local11 then
			
			else
				local f21_local12 = MatchRules[0x1C6C7F044453B4]( f21_arg2.ref )
				if f21_local12 then
					f21_local12 = f21_local2
				end
				f21_local4( f21_local3, f21_local5, f21_local6, f21_local7, f21_local8, f21_local9, f21_local10, f21_local11, f21_local12, PERK.GetPerkPatchNotes( f21_arg2.ref ), f21_arg2.unlockRank, f21_arg2.unlockInfo )
			end
		end
		f21_local11 = ""
	end
	
	local f12_local1 = function ( f20_arg0, f20_arg1 )
		f20_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
			button_ref = "button_alt2"
		} )
		if f20_arg0.InfoPanel._showExtraDesc then
			f20_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
				side = "left",
				priority = 1,
				ignoreTooltipPrompt = true,
				button_ref = "button_alt2",
				helper_text = Engine[0xED84C33EC5F01EA]( "LUA_MENU/SHOW_LESS_INFO" ),
				container = f20_arg0.InfoPanel.ActionPrompt
			} )
		else
			f20_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
				side = "left",
				priority = 1,
				ignoreTooltipPrompt = true,
				button_ref = "button_alt2",
				helper_text = Engine[0xED84C33EC5F01EA]( "LUA_MENU/SHOW_MORE_INFO" ),
				container = f20_arg0.InfoPanel.ActionPrompt
			} )
		end
	end
	
	f12_arg0:addEventHandler( "perk_button_over", function ( f19_arg0, f19_arg1 )
		local f19_local0 = f19_arg1.perkData
		if f19_arg1.isSelect then
			f19_arg0.InfoPanel:SetEquipped( true )
		else
			f19_arg0.InfoPanel:SetEquipped( false )
		end
		f19_arg0._focusedPerkName = ToUpperCase( Engine[0xED84C33EC5F01EA]( f19_local0.name ) )
		if Engine[0x12586A3F4FB490E]() then
			if f19_local0.extraInfo and 0 < #f19_local0.extraInfo and Engine[0xD151EC5B41223B5]() then
				f12_arg0.InfoPanel.ActionPrompt:SetAlpha( 1 )
				f12_arg0( f12_arg0, f12_arg0 )
				f12_arg0._isDescPromptShow = true
			else
				f12_arg0.InfoPanel.ActionPrompt:SetAlpha( 0 )
				f12_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
					button_ref = "button_alt2"
				} )
				f12_arg0._isDescPromptShow = false
			end
		end
		if CONDITIONS.IsBRGameType( f12_arg0 ) then
			f12_arg0.InfoPanel:SetShouldShowDisabledInfoBR( Cac.GetIsPerkDisabledForBR( f19_local0.ref ) )
		end
		f12_arg0( f19_arg0, f12_arg0, f19_local0 )
		f19_arg0:UpdatePerkTree( f12_arg0, f19_local0 )
		if Engine[0x12586A3F4FB490E]() then
			local f19_local1 = f19_local0.perkType
			if f19_local1 and f19_local1 > Cac.PerkTypes.NONE then
				local f19_local2 = f19_local0.model
				local f19_local3 = LOADOUT.GetPerkDataByField( f19_local0.ref, CSV.perks.cols.modelSideFacingUp )
				if f19_local1 == Cac.PerkTypes.SPECIAL_ONE or f19_local1 == Cac.PerkTypes.SPECIAL_TWO or f19_local1 == Cac.PerkTypes.SPECIAL_THREE then
					local f19_local4 = LOADOUT.GetPerkDataByField( f19_local0.ref, CSV.perks.cols.specialistModel )
					if f19_local4 and 0 < #f19_local4 then
						f19_local2 = f19_local4
					end
				end
				f19_arg0:UpdatePerkClientModel( f12_arg0, tonumber( f19_local1 ), f19_local2, f19_local3 )
			end
		end
		f12_arg0._perkData = f19_local0
	end )
	f12_arg0:addEventHandler( "perk_button_action", function ( f18_arg0, f18_arg1 )
		local f18_local0 = f18_arg1.perkData
		local f18_local1 = f18_arg1.playerData
		local f18_local2 = LOADOUT.GetLoadoutSelectedPerk( f12_arg0, f12_arg0.loadoutIndex, f12_arg0.perkLoadoutIndex, LOADOUT.IsSpecialPerk( f18_local0.perkType ) )
		if f18_arg0.selectedPerkRef ~= f18_local0.ref then
			f18_arg0:dispatchEventToRoot( {
				name = "send_toast_notification",
				immediate = true,
				options = {
					iconScale = 4.667263495923649E-62,
					displayTime = 3000,
					icon = "cac_equip_fill",
					iconColor = SWATCHES.genericMenu.title,
					header = Engine[0xED84C33EC5F01EA]( "LUA_MENU/PERK_EQUIPPED" ),
					description = Engine[0xED84C33EC5F01EA]( f18_local0.name ),
					type = LUI.ToastManager.NotificationType.PerkEquipped,
					controllerIndex = f12_arg0
				}
			} )
			f18_arg0.InfoPanel:SetEquipped( 1 )
			local f18_local3 = PERK.IsPerkOverkill( f18_local2:get() )
			local f18_local4 = PERK.IsPerkOverkill( f18_local0.ref )
			local f18_local5 = f18_local1.loadouts[f18_arg0.loadoutIndex].weaponSetups[1]
			if f18_local3 and not f18_local4 then
				f18_local5.weapon:set( WEAPON.DefaultSecondary )
				WEAPON.WipeWeaponSetup( f18_local5 )
			elseif f18_local4 and not f18_local3 then
				local f18_local6
				if f18_local1.loadouts[f18_arg0.loadoutIndex].weaponSetups[0].weapon:get() == "s4_sh_becho" then
					f18_local6 = "s4_ar_stango44"
				else
					f18_local6 = "s4_sh_becho"
				end
				f18_local5.weapon:set( f18_local6 )
				WEAPON.WipeWeaponSetup( f18_local5 )
			end
			f18_arg0.lastSelectedPerkRef = f18_local2:get()
			f18_local2:set( f18_local0.ref )
			f18_arg0.selectedPerkRef = f18_local0.ref
			if f18_arg0.selectedPerkButton then
				f18_arg0.selectedPerkButton:SetSelected( false )
			end
			f18_arg0.selectedPerkButton = f18_arg1.source
			f18_arg1.source:SetSelected( true )
			local f18_local7 = f18_arg0.Tabs:GetCurrentTab()
			f18_local7:SetupPerkData( f12_arg0, f18_local0.ref, LOADOUT.IsSpecialPerk( f18_local0.perkType ), f12_arg0( f12_arg0 ) )
			f18_arg0:UpdatePerkList( f12_arg0, f18_local0.perkType, f18_arg0.perkLoadoutIndex, LOADOUT.IsSpecialPerk( f18_local0.perkType ) )
			if CONDITIONS.InGame() then
				Engine[0x6055C55456F05DF]( "equip_item_ingame", 1 )
			end
		end
	end )
	f12_arg0:addEventHandler( "perk_button_up", function ( f17_arg0, f17_arg1 )
		f17_arg0:RemovePerkFromTable( f17_arg1.perkData.perkType, f17_arg1.perkData.ref )
	end )
	if CONDITIONS.InGame() and not CONDITIONS.IsThirdGameMode() then
		f12_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			clickable = true,
			priority = 5,
			ignoreTooltip = false,
			side = "left",
			kbmTooltipPromptOverload = "button_dismiss_pause_menu",
			button_ref = "button_start",
			helper_text = Engine[0xED84C33EC5F01EA]( "LUA_MENU/DISMISS_MENU" )
		} )
		f12_arg0.bindButton:addEventHandler( "button_start", function ( f16_arg0, f16_arg1 )
			LUI.FlowManager.RequestCloseAllMenus( nil, nil, nil, true )
		end )
	end
	f0_local0( f12_arg0, f12_arg1 )
	if Engine[0x12586A3F4FB490E]() then
		if CONDITIONS.IsCoreMultiplayer() then
			f12_arg0.bindButton:addEventHandler( "button_alt2", function ( f15_arg0, f15_arg1 )
				if f12_arg0._perkData then
					f12_arg0.InfoPanel:ToggleExtraDesc()
					f12_arg0( f12_arg0, f12_arg0 )
					if f12_arg0._isDescPromptShow then
						Engine[0xC4146BA76D0F982]( CoD.SFX.MouseClick )
					end
					f12_arg0( f12_arg0, f12_arg0, f12_arg0._perkData )
				end
			end )
		else
			f12_arg0.InfoPanel.ActionPrompt:SetAlpha( 0 )
		end
	end
	f0_local0( f12_arg0, f12_arg1, false )
	if f0_local0() then
		f0_local0( f12_arg0, f12_arg1 )
	end
	if f12_arg0.selectedPerkButton then
		f12_local0( f12_arg0, f12_arg1, f12_arg0.selectedPerkButton.perkData )
	end
	f12_arg0:registerEventHandler( "toggle_new_items_mode", function ( element, event )
		f12_arg0.perkGrid:SetItemsHidden( event.enabled, event.controllerIndex, event.instantly )
		if event.enabled and f12_arg0.perkGrid:GetNumChildren() == 0 then
			f12_arg0.InfoPanel:SetAlpha( 0, 200 )
		else
			f12_arg0.InfoPanel:SetAlpha( 1, 200 )
		end
		f12_arg0.Tabs:processEvent( {
			canDisable = true,
			name = "toggle_tab_display",
			enabled = event.enabled
		} )
		return true
	end )
	assert( f12_arg0.Vignette )
	LAYOUT.AddHandlerAspectRatioScaleAdjustment( f12_arg0, f12_arg0.Vignette, LAYOUT.AspectRatioImageScalePct.LARGE )
	if CONDITIONS.IsSplitscreen( f12_arg0 ) and CONDITIONS.InGame( f12_arg0 ) then
		ACTIONS.AnimateSequence( f12_arg0, "Splitscreen" )
	end
	if f12_arg0.BRWarningInfoFEPro then
		f12_arg0.BRWarningInfoFEPro:SetupWarning( "LUA_MENU/BR_WARNING_PERK_SPECIALIST_DESC", 3 )
	end
	if Engine[0x12586A3F4FB490E]() then
		f0_local0( f12_arg0, f12_arg1, Cac.PerkTypes.CORE )
		NewUnlockIndicatorUtils.SetupButtonHandler( f12_arg0, f12_arg0.bindButton, f12_arg1, function ( f13_arg0, f13_arg1 )
			if f12_arg0._hasNewItems then
				ACTIONS.ToggleNewItemsMode( f13_arg0, f13_arg1 )
			end
		end )
	end
	SEQUENCEPRESETS.RegisterAnimation( f12_arg0, LUI.Transition.TransTo, "InDepthForward", 0 )
	SEQUENCEPRESETS.RegisterAnimation( f12_arg0, LUI.Transition.TransBackFrom, "OutDepthBack", 0 )
end

function PerkSelect( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "PerkSelect"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	self._sequenceLengths = self._sequenceLengths or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	self.HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	self.HelperBar.id = "HelperBar"
	self.HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
	self.HelperBar:setPriority( 10 )
	self:addElement( self.HelperBar )
	local f1_local2 = self
	local f1_local3 = nil
	if CONDITIONS.InGame() then
		f1_local3 = MenuBuilder.BuildRegisteredType( "InGameMenuBackground", {
			controllerIndex = f1_local1
		} )
		f1_local3.id = "InGameMenuBackground"
		f1_local3:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
		self:addElement( f1_local3 )
		self.InGameMenuBackground = f1_local3
	end
	local Vignette = nil
	
	Vignette = LUI.UIImage.new()
	Vignette.id = "Vignette"
	Vignette:SetRGBFromTable( SWATCHES.genericMenu.blackBackground, 0 )
	Vignette:SetAlpha( 0.5, 0 )
	Vignette:setImage( RegisterMaterial( "widg_gradient_left_to_right" ), 0 )
	Vignette:SetAnchorsAndPosition( 0, 0, 0, 0, 0, _1080p * -900, 0, 0 )
	self:addElement( Vignette )
	self.Vignette = Vignette
	
	local MenuTitle = nil
	
	MenuTitle = MenuBuilder.BuildRegisteredType( "MenuTitle", {
		controllerIndex = f1_local1
	} )
	MenuTitle.id = "MenuTitle"
	MenuTitle.MenuTitle:SetAlpha( 0.15, 0 )
	MenuTitle.MenuTitle:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( "LUA_MENU/TITLE_PERK_SELECT" ) ), 0 )
	MenuTitle.Line:SetLeft( 0, 0 )
	MenuTitle:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1020, 0, _1080p * 100 )
	self:addElement( MenuTitle )
	self.MenuTitle = MenuTitle
	
	local Cinematic = nil
	
	Cinematic = MenuBuilder.BuildRegisteredType( "Cinematic", {
		controllerIndex = f1_local1
	} )
	Cinematic.id = "Cinematic"
	Cinematic:SetAlpha( 0, 0 )
	Cinematic:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1609, _1080p * 1790, _1080p * 278, _1080p * 457 )
	self:addElement( Cinematic )
	self.Cinematic = Cinematic
	
	local BasePerk = nil
	
	BasePerk = MenuBuilder.BuildRegisteredType( "PerkDetails", {
		controllerIndex = f1_local1
	} )
	BasePerk.id = "BasePerk"
	BasePerk:SetAlpha( 0, 0 )
	BasePerk:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 751, _1080p * 1067, _1080p * 524, _1080p * 840 )
	self:addElement( BasePerk )
	self.BasePerk = BasePerk
	
	local UpgradePerk1 = nil
	
	UpgradePerk1 = MenuBuilder.BuildRegisteredType( "PerkDetails", {
		controllerIndex = f1_local1
	} )
	UpgradePerk1.id = "UpgradePerk1"
	UpgradePerk1:SetAlpha( 0, 0 )
	UpgradePerk1:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1309, _1080p * 1625, _1080p * 299, _1080p * 615 )
	self:addElement( UpgradePerk1 )
	self.UpgradePerk1 = UpgradePerk1
	
	local UpgradePerk2 = nil
	
	UpgradePerk2 = MenuBuilder.BuildRegisteredType( "PerkDetails", {
		controllerIndex = f1_local1
	} )
	UpgradePerk2.id = "UpgradePerk2"
	UpgradePerk2:SetAlpha( 0, 0 )
	UpgradePerk2:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1309, _1080p * 1625, _1080p * 664, _1080p * 980 )
	self:addElement( UpgradePerk2 )
	self.UpgradePerk2 = UpgradePerk2
	
	local perkGrid = nil
	
	perkGrid = LUI.UIGrid.new( {
		maxVisibleColumns = 1,
		adjustSizeToContent = true,
		buildArrowsLabel = true,
		arrowsVerticalOffset = 5,
		wrapX = false,
		maxVisibleRows = SubtractForSplitscreen( 10, 6 ),
		controllerIndex = f1_local1,
		buildChild = function ()
			return MenuBuilder.BuildRegisteredType( "PerkButton", {
				controllerIndex = menu
			} )
		end,
		refreshChild = function ( f10_arg0, f10_arg1, f10_arg2 )
			
		end,
		spacingX = _1080p * 6,
		spacingY = _1080p * 6,
		columnWidth = _1080p * 450,
		rowHeight = _1080p * 56
	} )
	perkGrid.id = "perkGrid"
	perkGrid:SetMaxVisibleRows( SubtractForSplitscreen( 10, 6 ) )
	perkGrid:SetRowSpacing( 6 )
	perkGrid:setUseStencil( true )
	perkGrid:SetWraps( false, nil )
	perkGrid:SetActiveOnMouseOverBehavior( f1_local1 )
	perkGrid:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 546, _1080p * 290, _1080p * 910 )
	self:addElement( perkGrid )
	self.perkGrid = perkGrid
	
	local Tabs = nil
	
	Tabs = LUI.TabManager.new( {
		spacing = 12,
		wrap = true,
		tabHeight = _1080p * 132,
		buildTab = function ()
			return MenuBuilder.BuildRegisteredType( "PerkTab", {
				controllerIndex = menu
			} )
		end,
		controllerIndex = f1_local1
	} )
	Tabs.id = "Tabs"
	Tabs:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 83, _1080p * 629, _1080p * 128, _1080p * 204 )
	self:addElement( Tabs )
	self.Tabs = Tabs
	
	local f1_local12 = nil
	if CONDITIONS.InFrontendPublicMP() then
		f1_local12 = MenuBuilder.BuildRegisteredType( "MPPlayerDetails", {
			controllerIndex = f1_local1
		} )
		f1_local12.id = "MPPlayerDetails"
		f1_local12:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -596, _1080p * -96, _1080p * 54, _1080p * 114 )
		self:addElement( f1_local12 )
		self.MPPlayerDetails = f1_local12
	end
	local InfoPanel = nil
	
	InfoPanel = MenuBuilder.BuildRegisteredType( "PerkInfoPanel", {
		controllerIndex = f1_local1
	} )
	InfoPanel.id = "InfoPanel"
	InfoPanel:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 656, _1080p * 1183, _1080p * 270, _1080p * 361 )
	self:addElement( InfoPanel )
	self.InfoPanel = InfoPanel
	
	local SpecialPerkButtonText = nil
	
	SpecialPerkButtonText = LUI.UIStyledText.new()
	SpecialPerkButtonText.id = "SpecialPerkButtonText"
	SpecialPerkButtonText:SetRGBFromTable( SWATCHES.text.buttonTextDefault, 0 )
	SpecialPerkButtonText:SetAlpha( 0, 0 )
	SpecialPerkButtonText:SetUseForceOpacityMode( true )
	SpecialPerkButtonText:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU/ACTIVIATE_SPECIAL_PERKS" ), 0 )
	SpecialPerkButtonText:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_XSSubHeader.font.File ) )
	SpecialPerkButtonText:SetFontSize( FONT_STYLES.fontStyle_XSSubHeader.size )
	SpecialPerkButtonText:SetMinFontSize( FONT_STYLES.fontStyle_XSSubHeader.minSize )
	SpecialPerkButtonText:SetWordWrap( true )
	SpecialPerkButtonText:SetLeading( -2 * _1080p, 0 )
	SpecialPerkButtonText:SetAlignment( LUI.Alignment.Left )
	SpecialPerkButtonText:SetEllipsesEnabled( true )
	SpecialPerkButtonText:SetMaxVisibleLines( 1 )
	SpecialPerkButtonText:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 647, _1080p * 999, _1080p * 166, _1080p * 198 )
	self:addElement( SpecialPerkButtonText )
	self.SpecialPerkButtonText = SpecialPerkButtonText
	
	local f1_local15 = nil
	if CONDITIONS.InFrontend() then
		f1_local15 = MenuBuilder.BuildRegisteredType( "LobbyMembersFooter", {
			controllerIndex = f1_local1
		} )
		f1_local15.id = "LobbyMembersFooter"
		f1_local15:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 150 )
		self:addElement( f1_local15 )
		self.LobbyMembersFooter = f1_local15
	end
	local f1_local16 = nil
	if CONDITIONS.InGame() then
		f1_local16 = MenuBuilder.BuildRegisteredType( "InGameMenuTimerStatus", {
			controllerIndex = f1_local1
		} )
		f1_local16.id = "InGameMenuTimerStatus"
		f1_local16:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -140, _1080p * 260, _1080p * 54, _1080p * 104 )
		self:addElement( f1_local16 )
		self.InGameMenuTimerStatus = f1_local16
	end
	local VerticalMinimalScrollbar = nil
	
	VerticalMinimalScrollbar = MenuBuilder.BuildRegisteredType( "VerticalMinimalScrollbar", {
		controllerIndex = f1_local1
	} )
	VerticalMinimalScrollbar.id = "VerticalMinimalScrollbar"
	VerticalMinimalScrollbar:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 550, _1080p * 560, _1080p * 329, _1080p * 919 )
	self:addElement( VerticalMinimalScrollbar )
	self.VerticalMinimalScrollbar = VerticalMinimalScrollbar
	
	local f1_local18 = nil
	if Engine[0x12586A3F4FB490E]() then
		f1_local18 = MenuBuilder.BuildRegisteredType( "CDLRestrictionTag", {
			controllerIndex = f1_local1
		} )
		f1_local18.id = "CDLRestrictionTag"
		f1_local18:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1508, _1080p * 1824, _1080p * 186, _1080p * 216 )
		self:addElement( f1_local18 )
		self.CDLRestrictionTag = f1_local18
	end
	local f1_local19 = nil
	if CONDITIONS.IsMagmaGameMode() then
		f1_local19 = MenuBuilder.BuildRegisteredType( "BRWarningInfo", {
			controllerIndex = f1_local1
		} )
		f1_local19.id = "BRWarningInfoFEPro"
		f1_local19:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 656, _1080p * 1179, _1080p * 591, _1080p * 621 )
		self:addElement( f1_local19 )
		self.BRWarningInfoFEPro = f1_local19
	end
	local f1_local20 = nil
	if CONDITIONS.IsMagmaGameMode() then
		f1_local20 = MenuBuilder.BuildRegisteredType( "BRWarningIcon", {
			controllerIndex = f1_local1
		} )
		f1_local20.id = "BRWarning"
		f1_local20:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 649, _1080p * 713, _1080p * 136, _1080p * 174 )
		self:addElement( f1_local20 )
		self.BRWarning = f1_local20
	end
	local f1_local21 = nil
	Vignette:RegisterAnimationSequence( "DefaultSequence", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 5.29462817E-315,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.DefaultSequence = function ()
		menu:AnimateSequence( "DefaultSequence" )
	end
	
	self._sequenceLengths.DefaultSequence = 400
	local f1_local22 = nil
	SpecialPerkButtonText:RegisterAnimationSequence( "SpecialPerkDisabled", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Text,
			value = Engine[0xED84C33EC5F01EA]( "LUA_MENU/ACTIVIATE_SPECIAL_PERKS" )
		},
		{
			value = 4.667261642226141E-62,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	if CONDITIONS.IsMagmaGameMode() then
		f1_local20:RegisterAnimationSequence( "SpecialPerkDisabled", {
			{
				value = 1,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	self._sequences.SpecialPerkDisabled = function ()
		menu:AnimateSequence( "SpecialPerkDisabled" )
		if CONDITIONS.IsMagmaGameMode() then
			menu:AnimateSequence( "SpecialPerkDisabled" )
		end
	end
	
	self._sequenceLengths.SpecialPerkDisabled = 0
	local f1_local23 = nil
	SpecialPerkButtonText:RegisterAnimationSequence( "SpecialPerkEnabled", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 1322
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1675
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Text,
			value = Engine[0xED84C33EC5F01EA]( "LUA_MENU/DEACTIVIATE_SPECIAL_PERKS" )
		},
		{
			value = 4.667261642226141E-62,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	if CONDITIONS.IsMagmaGameMode() then
		f1_local20:RegisterAnimationSequence( "SpecialPerkEnabled", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Left,
				value = _1080p * 1316
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Right,
				value = _1080p * 1380
			},
			{
				value = 1,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	self._sequences.SpecialPerkEnabled = function ()
		menu:AnimateSequence( "SpecialPerkEnabled" )
		if CONDITIONS.IsMagmaGameMode() then
			menu:AnimateSequence( "SpecialPerkEnabled" )
		end
	end
	
	self._sequenceLengths.SpecialPerkEnabled = 0
	local f1_local24 = nil
	perkGrid:RegisterAnimationSequence( "Splitscreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 551
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 639
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 124
		}
	} )
	VerticalMinimalScrollbar:RegisterAnimationSequence( "Splitscreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 524
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 692
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 703
		}
	} )
	self._sequences.Splitscreen = function ()
		menu:AnimateSequence( "Splitscreen" )
		menu:AnimateSequence( "Splitscreen" )
	end
	
	self._sequenceLengths.Splitscreen = 0
	local f1_local25 = nil
	SpecialPerkButtonText:RegisterAnimationSequence( "HideSpecialPerkPrompt", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	if CONDITIONS.IsMagmaGameMode() then
		f1_local20:RegisterAnimationSequence( "HideSpecialPerkPrompt", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	self._sequences.HideSpecialPerkPrompt = function ()
		menu:AnimateSequence( "HideSpecialPerkPrompt" )
		if CONDITIONS.IsMagmaGameMode() then
			menu:AnimateSequence( "HideSpecialPerkPrompt" )
		end
	end
	
	self._sequenceLengths.HideSpecialPerkPrompt = 0
	if CONDITIONS.InGame() then
		f1_local3:addEventHandler( "menu_create", function ( f3_arg0, f3_arg1 )
			local f3_local0 = f3_arg1.controller or menu
			ACTIONS.ScaleFullscreen( menu.InGameMenuBackground )
		end )
	end
	Vignette:addEventHandler( "menu_create", function ( f2_arg0, f2_arg1 )
		local f2_local0 = f2_arg1.controller or menu
		ACTIONS.ScaleFullscreen( menu.Vignette )
	end )
	local f1_local26 = LUI.UIScrollbar.new
	local f1_local27 = {
		direction = LUI.DIRECTION.vertical,
		eventListener = VerticalMinimalScrollbar,
		startCap = VerticalMinimalScrollbar.startCap,
		endCap = VerticalMinimalScrollbar.endCap,
		sliderArea = VerticalMinimalScrollbar.sliderArea
	}
	local f1_local28 = VerticalMinimalScrollbar.sliderArea
	if f1_local28 then
		f1_local28 = VerticalMinimalScrollbar.sliderArea.slider
	end
	f1_local27.slider = f1_local28
	f1_local28 = VerticalMinimalScrollbar.sliderArea
	if f1_local28 then
		f1_local28 = VerticalMinimalScrollbar.sliderArea.fixedSizeSlider
	end
	f1_local27.fixedSizeSlider = f1_local28
	perkGrid:AddScrollbar( f1_local26( f1_local27 ) )
	self.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_secondary",
		helper_text = Engine[0xED84C33EC5F01EA]( "MENU/BACK" )
	} )
	self.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_primary",
		priority = 1,
		helper_text = Engine[0xED84C33EC5F01EA]( "LUA_MENU/EQUIP" )
	} )
	if not self.bindButton then
		local f1_local29 = LUI.UIBindButton.new()
		f1_local29.id = "selfBindButton"
		self:addElement( f1_local29 )
		self.bindButton = f1_local29
	end
	f0_local0( self, f1_local1, controller )
	ACTIONS.AnimateSequence( self, "DefaultSequence" )
	return self
end

MenuBuilder.registerType( "PerkSelect", PerkSelect )
LockTable( _M )
