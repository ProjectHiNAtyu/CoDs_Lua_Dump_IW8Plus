-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
BRCONTRACTS = BRCONTRACTS or {}
BRCONTRACTS.PLUNDER_TINY_ID = "plunder_tiny"
BRCONTRACTS.PLUNDER_SMALL_ID = "plunder_small"
BRCONTRACTS.PLUNDER_MEDIUM_ID = "plunder_medium"
BRCONTRACTS.PLUNDER_LARGE_ID = "plunder_large"
BRCONTRACTS.PLUNDER_HUGE_ID = "plunder_huge"
BRCONTRACTS.PLUNDER_ASN_ID = "plunder_asn"
BRCONTRACTS.PLUNDER_MASTERASN_ID = "plunder_masterasn"
BRCONTRACTS.PLUNDER_ASN_FAIL_ID = "plunder_asn_fail"
BRCONTRACTS.PLUNDER_SCAV_ID = "plunder_scav"
BRCONTRACTS.PLUNDER_DOM_ID = "plunder_dom"
BRCONTRACTS.PLUNDER_EXTRACT_ID = "plunder_extract"
BRCONTRACTS.PLUNDER_TIMED_ID = "plunder_timed"
BRCONTRACTS.NO_SCALE_ID = "no_scale"
BRCONTRACTS.CIRCLE_PEEK_ID = "circle_peek"
BRCONTRACTS.GAS_MASK_ID = "loot_gasmask_nosplash"
BRCONTRACTS.TEAM_REVIVE_ID = "team_revive"
BRCONTRACTS.LOOT_PLATE_ID = "loot_platepouch_nosplash"
BRCONTRACTS.FIRE_SALE_ID = "fire_sale_nosplash"
BRCONTRACTS.SUPPLY_DROP_ID = "supply_drop"
BRCONTRACTS.REWARD_REF_PREFIX = "rewardRef"
BRCONTRACTS.SCALER_REF_PREFIX = "scalerRef"
BRCONTRACTS.REWARD_TIER_REF_SUBSTR = "reward_tier"
BRCONTRACTS.STR_KEY = "str"
BRCONTRACTS.VAL_KEY = "val"
BRCONTRACTS.ICON_KEY = "icon"
BRCONTRACTS.SFX_KEY = "sfx"
BRCONTRACTS.SCALER_KEY = "scaler"
BRCONTRACTS.PLUNDER_MULTIPLIER = 100
BRCONTRACTS.DEFAULT_SCALE = 1
BRCONTRACTS.DEFAULT_TIER = 1
BRCONTRACTS.DEFAULT_SWATCH_COLOR = SWATCHES.BRLootItemRarity.Mission
BRCONTRACTS.Types = {
	LOOTING = "MP_BR_INGAME/CONTRACT_TYPE_LOOTING",
	COMBAT = "MP_BR_INGAME/CONTRACT_TYPE_COMBAT",
	LOCATION = "MP_BR_INGAME/CONTRACT_TYPE_LOCATION"
}
BRCONTRACTS.PLUNDER_IDS = {
	[BRCONTRACTS.PLUNDER_TINY_ID] = true,
	[BRCONTRACTS.PLUNDER_SMALL_ID] = true,
	[BRCONTRACTS.PLUNDER_MEDIUM_ID] = true,
	[BRCONTRACTS.PLUNDER_LARGE_ID] = true,
	[BRCONTRACTS.PLUNDER_HUGE_ID] = true,
	[BRCONTRACTS.PLUNDER_ASN_ID] = true,
	[BRCONTRACTS.PLUNDER_MASTERASN_ID] = true,
	[BRCONTRACTS.PLUNDER_ASN_FAIL_ID] = true,
	[BRCONTRACTS.PLUNDER_SCAV_ID] = true,
	[BRCONTRACTS.PLUNDER_DOM_ID] = true,
	[BRCONTRACTS.PLUNDER_EXTRACT_ID] = true,
	[BRCONTRACTS.PLUNDER_TIMED_ID] = true
}
BRCONTRACTS.EXCEPTION_REWARD_IDS = {
	[BRCONTRACTS.CIRCLE_PEEK_ID] = true,
	[BRCONTRACTS.GAS_MASK_ID] = true,
	[BRCONTRACTS.TEAM_REVIVE_ID] = true,
	[BRCONTRACTS.LOOT_PLATE_ID] = true,
	[BRCONTRACTS.FIRE_SALE_ID] = true,
	[BRCONTRACTS.SUPPLY_DROP_ID] = true
}
BRCONTRACTS.ContractTypeData = {
	[BRCONTRACTS.Types.COMBAT] = {
		swatch = SWATCHES.Scoreboard.enemyTeam
	},
	[BRCONTRACTS.Types.LOOTING] = {
		swatch = SWATCHES.BRLootItemRarity.Mission
	},
	[BRCONTRACTS.Types.LOCATION] = {
		swatch = SWATCHES.BRLootItemRarity.Mission
	}
}
BRCONTRACTS.BBLITZ = {
	COMPLETE_OBJ1 = "OBJ1Complete",
	HIDE = "Hide",
	MAX_CONTRACTS = 2,
	SHOW = "Show",
	COMPLETE_OBJ2 = "OBJ2Complete"
}
BRCONTRACTS.GetContractTimeOverride = function ( f20_arg0 )
	local f20_local0 = {
		vip = "scr_br_VIP_questTimeBase"
	}
	if CONDITIONS.IsWZIncursion() then
		f20_local0.assassination = "scr_br_AQ_questTimeBase"
	end
	if f20_local0[f20_arg0] then
		return Dvar.CFHDGABACF( f20_local0[f20_arg0] )
	else
		return nil
	end
end

BRCONTRACTS.InitRewardCsvs = function ()
	local f19_local0 = Dvar.DHEEJCCJBH( "br_mission_reward_filename" )
	local f19_local1
	if f19_local0 then
		f19_local1 = f19_local0
	else
		f19_local1 = f19_local0 ~= ""
	end
	if f19_local1 then
		CSV.BRMissionRewards.file = f19_local0
	end
	local f19_local2 = Dvar.DHEEJCCJBH( "br_mission_reward_groups_filename" )
	local f19_local3
	if f19_local2 then
		f19_local3 = f19_local2
	else
		f19_local3 = f19_local2 ~= ""
	end
	if f19_local3 then
		CSV.BRMissionRewardGroups.file = f19_local2
	end
end

BRCONTRACTS.CheckForValidScaler = function ( f18_arg0, f18_arg1 )
	local f18_local0
	if f18_arg0 then
		f18_local0 = f18_arg0
	elseif f18_arg1 then
		f18_local0 = f18_arg1
	elseif f18_arg1 == "" or f18_arg1 == "noScale" or f18_arg1 == BRCONTRACTS.NO_SCALE_ID or f18_arg1 == "none" then
		f18_local0 = false
	else
		f18_local0 = true
	end
	return f18_local0
end

BRCONTRACTS.CheckForIsPlunderReward = function ( f17_arg0 )
	return BRCONTRACTS.PLUNDER_IDS[f17_arg0] == true
end

BRCONTRACTS.CheckForIsExceptionReward = function ( f16_arg0 )
	return BRCONTRACTS.EXCEPTION_REWARD_IDS[f16_arg0] == true
end

BRCONTRACTS.ApplyPlunderMultiplier = function ( f15_arg0 )
	return f15_arg0 * BRCONTRACTS.PLUNDER_MULTIPLIER
end

BRCONTRACTS.IsValidValue = function ( f14_arg0 )
	local f14_local0
	if f14_arg0 then
		f14_local0 = f14_arg0
	elseif f14_arg0 == "" or f14_arg0 == " " or f14_arg0 == "none" then
		f14_local0 = false
	else
		f14_local0 = true
	end
	return f14_local0
end

BRCONTRACTS.IsNilOrNoScale = function ( f13_arg0 )
	if not f13_arg0 or f13_arg0 == BRCONTRACTS.NO_SCALE_ID or f13_arg0 == "" then
		return true
	else
		return false
	end
end

BRCONTRACTS.GetMissionRewardScaler = function ( f12_arg0, f12_arg1 )
	local f12_local0 = BRCONTRACTS.DEFAULT_SCALE
	if StringTable.BJJBBCJGEJ( CSV.BRMissionRewardScalers.file, CSV.BRMissionRewardScalers.cols.ref, f12_arg0 ) < 0 then
		return f12_local0
	end
	local f12_local1 = CSV.BRMissionRewardScalers.cols.tierOverrideStart
	local f12_local2 = CSV.BRMissionRewardScalers.cols.scaleOverrideStart
	local f12_local3 = {}
	local f12_local4 = 0
	for f12_local5 = 1, f12_arg1, 1 do
		if f12_local3[f12_local5] ~= nil then
			f12_local4 = f12_local3[f12_local5]
		end
		f12_local0 = f12_local0 + f12_local4
	end
	local f12_local5 = Dvar.CFHDGABACF( "scr_br_teamsize" )
	if not f12_local5 then
		f12_local5 = GetMaxTeamSize()
	end
	if 4 < f12_local5 then
		f12_local0 = 1 + (f12_local0 - 1) * 4 / f12_local5
	end
	return f12_local0
end

BRCONTRACTS.FloorGscRewardScaledCashVal = function ( f11_arg0 )
	return math.floor( f11_arg0 / 100 ) * 100
end

BRCONTRACTS.GetMissionRewardCash = function ( f10_arg0, f10_arg1 )
	local f10_local0 = 0
	local f10_local1 = StringTable.DIFCHIGDFB( CSV.BRMissionRewardGroups.file, CSV.BRMissionRewardGroups.cols.ref, f10_arg0, CSV.BRMissionRewardGroups.cols.rewardRef1 )
	if CSV.BRMissionRewards.file and CSV.BRMissionRewards.file ~= "" and f10_local1 and rewardIcon ~= "" then
		f10_local0 = BRCONTRACTS.GetMissionRewardValue( f10_local1 )
		local f10_local2 = StringTable.DIFCHIGDFB( CSV.BRMissionRewardGroups.file, CSV.BRMissionRewardGroups.cols.ref, f10_arg0, CSV.BRMissionRewardGroups.cols.scalerRef1 )
		if BRCONTRACTS.CheckForValidScaler( f10_arg1, f10_local2 ) then
			f10_local0 = BRCONTRACTS.ApplyPlunderMultiplier( tonumber( f10_local0 * BRCONTRACTS.GetMissionRewardScaler( f10_local2, f10_arg1 ) ) )
		end
	end
	return BRCONTRACTS.FloorGscRewardScaledCashVal( f10_local0 )
end

BRCONTRACTS.CheckMissionRewardScalers = function ( f9_arg0, f9_arg1 )
	if f9_arg0 then
		local f9_local0 = StringTable.DIFCHIGDFB( CSV.BRMissionRewardGroups.file, CSV.BRMissionRewardGroups.cols.ref, f9_arg0, CSV.BRMissionRewardGroups.cols.scalerRef1 )
		local f9_local1 = StringTable.DIFCHIGDFB( CSV.BRMissionRewardGroups.file, CSV.BRMissionRewardGroups.cols.ref, f9_arg0, CSV.BRMissionRewardGroups.cols.scalerRef2 )
		local f9_local2 = StringTable.DIFCHIGDFB( CSV.BRMissionRewardGroups.file, CSV.BRMissionRewardGroups.cols.ref, f9_arg0, CSV.BRMissionRewardGroups.cols.scalerRef3 )
		local f9_local3 = StringTable.DIFCHIGDFB( CSV.BRMissionRewardGroups.file, CSV.BRMissionRewardGroups.cols.ref, f9_arg0, CSV.BRMissionRewardGroups.cols.scalerRef4 )
		local f9_local4 = StringTable.DIFCHIGDFB( CSV.BRMissionRewardGroups.file, CSV.BRMissionRewardGroups.cols.ref, f9_arg0, CSV.BRMissionRewardGroups.cols.scalerRef5 )
		local f9_local5 = StringTable.DIFCHIGDFB( CSV.BRMissionRewardGroups.file, CSV.BRMissionRewardGroups.cols.ref, f9_arg0, CSV.BRMissionRewardGroups.cols.scalerRef6 )
		local f9_local6 = StringTable.DIFCHIGDFB( CSV.BRMissionRewardGroups.file, CSV.BRMissionRewardGroups.cols.ref, f9_arg0, CSV.BRMissionRewardGroups.cols.scalerRef7 )
		if f9_local0 and f9_local1 and f9_local2 then
			local f9_local7 = "Contracts can only scale their first 3 rewards per current design"
			local f9_local8 = BRCONTRACTS.IsNilOrNoScale( f9_local3 )
			if f9_local8 then
				f9_local8 = BRCONTRACTS.IsNilOrNoScale( f9_local4 )
				if f9_local8 then
					f9_local8 = BRCONTRACTS.IsNilOrNoScale( f9_local5 )
					if f9_local8 then
						f9_local8 = BRCONTRACTS.IsNilOrNoScale( f9_local6 )
					end
				end
			end
			assert( f9_local8, f9_local7 )
		end
	end
end

BRCONTRACTS.GetScalePercentFromMissionRewardScaler = function ( f8_arg0 )
	local f8_local0 = -1
	if f8_arg0 and f8_arg0.rewardScalerNum and tonumber( f8_arg0.rewardScalerNum ) then
		local f8_local1 = 100
		f8_local0 = f8_arg0.rewardScalerNum * f8_local1 - f8_local1
	end
	return f8_local0
end

BRCONTRACTS.GetMissionRewardData = function ( f7_arg0, f7_arg1 )
	local f7_local0 = {}
	for f7_local1 = 1, CSV.BRMissionRewardGroups.maxUniqueRewards, 1 do
		local f7_local4 = StringTable.DIFCHIGDFB( CSV.BRMissionRewardGroups.file, CSV.BRMissionRewardGroups.cols.ref, f7_arg0, CSV.BRMissionRewardGroups.cols[BRCONTRACTS.REWARD_REF_PREFIX .. tostring( f7_local1 )] )
		if f7_local4 and f7_local4 ~= "" and f7_local4 ~= " " and f7_local4 ~= "none" then
			local f7_local5 = {}
			local f7_local6 = StringTable.DIFCHIGDFB( CSV.BRMissionRewards.file, CSV.BRMissionRewards.cols.ref, f7_local4, CSV.BRMissionRewards.cols.icon )
			local f7_local7 = BRCONTRACTS.GetMissionRewardValue( f7_local4 )
			local f7_local8 = StringTable.DIFCHIGDFB( CSV.BRMissionRewards.file, CSV.BRMissionRewards.cols.ref, f7_local4, CSV.BRMissionRewards.cols.stringRef )
			local f7_local9 = StringTable.DIFCHIGDFB( CSV.BRMissionRewards.file, CSV.BRMissionRewards.cols.ref, f7_local4, CSV.BRMissionRewards.cols.sfx )
			if BRCONTRACTS.IsValidValue( f7_local6 ) then
				f7_local5[BRCONTRACTS.ICON_KEY] = f7_local6
			end
			if BRCONTRACTS.IsValidValue( f7_local7 ) then
				local f7_local10 = StringTable.DIFCHIGDFB( CSV.BRMissionRewardGroups.file, CSV.BRMissionRewardGroups.cols.ref, f7_arg0, CSV.BRMissionRewardGroups.cols[BRCONTRACTS.SCALER_REF_PREFIX .. tostring( f7_local1 )] )
				if BRCONTRACTS.CheckForValidScaler( f7_arg1, f7_local10 ) then
					local f7_local11 = BRCONTRACTS.GetMissionRewardScaler( f7_local10, f7_arg1 )
					f7_local7 = tonumber( f7_local7 * f7_local11 )
					f7_local5[BRCONTRACTS.SCALER_KEY] = f7_local11
				end
				if BRCONTRACTS.CheckForIsPlunderReward( f7_local4 ) then
					f7_local7 = BRCONTRACTS.FloorGscRewardScaledCashVal( BRCONTRACTS.ApplyPlunderMultiplier( f7_local7 ) )
				end
				f7_local5[BRCONTRACTS.VAL_KEY] = f7_local7
			end
			if f7_local8 and f7_local8 ~= "" and f7_local8 ~= " " and f7_local8 ~= "none" then
				f7_local5[BRCONTRACTS.STR_KEY] = f7_local8
			end
			if f7_local9 and f7_local9 ~= "" and f7_local9 ~= " " and f7_local9 ~= "none" then
				f7_local5[BRCONTRACTS.SFX_KEY] = f7_local9
			end
			if f7_local5[BRCONTRACTS.ICON_KEY] then
				table.insert( f7_local0, f7_local5 )
			end
		end
	end
	return f7_local0
end

BRCONTRACTS.GetMissionRewardLootCardDatum = function ( f6_arg0, f6_arg1, f6_arg2 )
	local f6_local0 = {}
	local f6_local1 = nil
	for f6_local2 = 1, CSV.BRMissionRewardGroups.maxUniqueRewards, 1 do
		local f6_local5 = StringTable.DIFCHIGDFB( CSV.BRMissionRewardGroups.file, CSV.BRMissionRewardGroups.cols.ref, f6_arg0, CSV.BRMissionRewardGroups.cols[BRCONTRACTS.REWARD_REF_PREFIX .. tostring( f6_local2 )] )
		if f6_local5 == f6_arg1 then
			if BRCONTRACTS.CheckForIsExceptionReward( f6_local5 ) then
				f6_local0[BRCONTRACTS.STR_KEY] = StringTable.DIFCHIGDFB( CSV.BRMissionRewards.file, CSV.BRMissionRewards.cols.ref, f6_local5, CSV.BRMissionRewards.cols.stringRef )
				return f6_local0
			end
			f6_local1 = BRCONTRACTS.GetMissionRewardValue( f6_local5 )
			if BRCONTRACTS.CheckForIsPlunderReward( f6_local5 ) then
				local f6_local6 = StringTable.DIFCHIGDFB( CSV.BRMissionRewardGroups.file, CSV.BRMissionRewardGroups.cols.ref, f6_arg0, CSV.BRMissionRewardGroups.cols[BRCONTRACTS.SCALER_REF_PREFIX .. tostring( f6_local2 )] )
				if BRCONTRACTS.CheckForValidScaler( f6_arg2, f6_local6 ) then
					local f6_local7 = BRCONTRACTS.GetMissionRewardScaler( f6_local6, f6_arg2 )
					f6_local1 = tonumber( f6_local1 * f6_local7 )
					f6_local0[BRCONTRACTS.SCALER_KEY] = f6_local7
				end
				if BRCONTRACTS.CheckForIsPlunderReward( f6_local5 ) then
					f6_local1 = BRCONTRACTS.FloorGscRewardScaledCashVal( BRCONTRACTS.ApplyPlunderMultiplier( f6_local1 ) )
				end
				f6_local0[BRCONTRACTS.STR_KEY] = f6_local1
				return f6_local0
			end
		end
	end
	return f6_local0
end

BRCONTRACTS.GetMissionRewardValueColumnIndex = function ()
	local f5_local0 = Dvar.CFHDGABACF( "scr_br_teamsize" ) or 0
	if f5_local0 == 4 then
		return CSV.BRMissionRewards.cols.scriptValueQuads
	elseif f5_local0 == 3 then
		return CSV.BRMissionRewards.cols.scriptValueTrios
	elseif f5_local0 == 2 then
		return CSV.BRMissionRewards.cols.scriptValueDuos
	elseif f5_local0 == 1 then
		return CSV.BRMissionRewards.cols.scriptValueSolos
	else
		return CSV.BRMissionRewards.cols.scriptValueTrios
	end
end

BRCONTRACTS.GetMissionRewardValue = function ( f4_arg0 )
	local f4_local0 = nil
	local f4_local1 = -1
	local f4_local2 = Dvar.CFHDGABACF( "scr_questReward_" .. f4_arg0 )
	if f4_local2 ~= nil and f4_local2 ~= f4_local1 then
		f4_local0 = f4_local2
	else
		f4_local0 = StringTable.DIFCHIGDFB( CSV.BRMissionRewards.file, CSV.BRMissionRewards.cols.ref, f4_arg0, BRCONTRACTS.GetMissionRewardValueColumnIndex() )
	end
	local f4_local3 = tonumber( f4_local0 )
	if not f4_local3 then
		f4_local0 = f4_local3
	else
		f4_local0 = f4_local1
	end
	f4_local3 = CONDITIONS.IsUsingOvertimeGameplayTimer()
	if f4_local3 then
		f4_local3 = DataSources.inGame.MP.showOvertimeGameplayTimer:GetValue( Engine.IJEBHJIJF() )
	end
	if f4_local3 and (CONDITIONS.IsBloodMoney() or CONDITIONS.IsWZRatRace()) then
		local f4_local4 = tonumber( Dvar.BJJCJHDBII( "scr_bmo_overtimeCashMultiplier" ) or 2 )
		if f4_local4 then
			f4_local0 = f4_local0 * f4_local4
		end
	end
	return f4_local0
end

BRCONTRACTS.GetAvailableMissionIndexes = function ( f3_arg0 )
	local f3_local0 = DataSources.inGame.player.BRData.missions.isAvailableIndexBitfield:GetValue( f3_arg0 )
	if f3_local0 then
		local f3_local1 = {}
		local f3_local2 = 32
		for f3_local3 = 0, f3_local2 - 1, 1 do
			if Engine.CHJJIAHHGE( f3_local0, f3_local3 ) then
				table.insert( f3_local1, f3_local3 )
			end
		end
		return f3_local1
	else
		return {
			nil,
			1,
			4,
			6
		}
	end
end

BRCONTRACTS.GetMissionHasTierReward = function ( f2_arg0 )
	for f2_local0 = 1, CSV.BRMissionRewardGroups.maxUniqueRewards, 1 do
		if string.find( StringTable.DIFCHIGDFB( CSV.BRMissionRewardGroups.file, CSV.BRMissionRewardGroups.cols.ref, f2_arg0, CSV.BRMissionRewardGroups.cols[BRCONTRACTS.REWARD_REF_PREFIX .. tostring( f2_local0 )] ), BRCONTRACTS.REWARD_TIER_REF_SUBSTR ) then
			return true
		end
	end
	return false
end

BRCONTRACTS.GetMissionUnlockableLootIDFromIndex = function ( f1_arg0 )
	if not f1_arg0 or f1_arg0 <= 0 then
		return nil
	else
		return tonumber( StringTable.DIFCHIGDFB( CSV.BRUnlockables.file, CSV.BRUnlockables.cols.lootIndex, f1_arg0, CSV.BRUnlockables.cols.lootID ) )
	end
end

