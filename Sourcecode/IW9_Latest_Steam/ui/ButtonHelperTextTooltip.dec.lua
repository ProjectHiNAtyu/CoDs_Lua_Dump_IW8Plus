-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
LUI.ButtonHelperTextTooltip = LUI.Class( LUI.UIElement )
local f0_local0 = 5
local f0_local1 = 7
local f0_local2 = function ( f14_arg0 )
	return f14_arg0.button_ref
end

local f0_local3 = function ( f13_arg0, f13_arg1, f13_arg2 )
	if CONDITIONS.IsMobileOrMobileSim() then
		return 
	end
	local f13_local0 = f13_arg2.keyprompt_text
	if f13_arg2.kbmTooltipPromptOverload then
		f13_local0 = CoD.GetTextForButton( f13_arg2.kbmTooltipPromptOverload )
	end
	if f13_local0 ~= nil and f13_local0 ~= "" then
		local f13_local1 = StripColorMarkers( f13_local0 )
		local f13_local2 = MenuBuilder.BuildRegisteredType( "KBMButtonWithProgress", {
			controllerIndex = f13_arg0,
			finalPromptText = f13_local1
		} )
		assert( f13_local2.KeyString )
		f13_local2:SetPromptText( f13_local1, f13_arg2.isHardcodedKey )
		f13_local2.id = f13_local0 .. "KBMButtonPrompt"
		local f13_local3 = f13_local2:GetAnchorsAndPosition()
		local f13_local4 = math.abs( f13_local3.right - f13_local3.left )
		f13_local2:SetPressAnimation( f13_arg2.isHardcodedKey )
		f13_local2.KeyString._scoped = {}
		f13_local2.KeyString._scoped.exclusiveController = f13_arg0
		f13_local2.KeyString._scoped.isControllerExclusive = true
		return f13_local2, f13_local4
	end
	return nil, 0
end

local f0_local4 = function ( f12_arg0, f12_arg1 )
	local f12_local0 = f12_arg1.helper_text
	if f12_local0 ~= nil and f12_local0 ~= "" then
		local self = LUI.UIText.new()
		local f12_local2 = f0_local0 * Engine[0x7B17D94988FD5D0]( "TextScaling" )
		self:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, 0, 0, -f12_local2, f12_local2 )
		self:SetAlignment( bothButtonRef and LUI.Alignment.Center or LUI.Alignment.Left )
		self:SetRGBFromTable( COLORS.white )
		self:SetFont( FONTS.GetFont( FONTS.PrimaryRegular.File ) )
		self.id = "promptText" .. f12_arg1.primaryRef
		self.ref = f12_arg1.primaryRef
		self:setText( f12_arg1.helper_text )
		self:SetOptOutRightToLeftAlignmentFlip( true )
		self:SetWordWrap( false )
		return self, LAYOUT.GetTextWidth( self )
	else
		return nil, 0
	end
end

local f0_local5 = function ( f11_arg0, f11_arg1, f11_arg2, f11_arg3 )
	local f11_local0 = 2
	if f11_arg3 <= 0 or f11_arg2 <= 0 then
		f11_local0 = 1
	end
	return f11_arg2 + f11_arg3 + f0_local0 * f11_local0
end

LUI.ButtonHelperTextTooltip.TooltipButtonPrompt = function ( f10_arg0, f10_arg1 )
	local f10_local0 = f10_arg1.button_ref
	local f10_local1, f10_local2 = nil
	f10_arg1.primaryRef = f0_local0( f10_arg1 )
	local f10_local3, f10_local4 = f0_local0( f10_arg0, f10_local0, f10_arg1 )
	local f10_local5, f10_local6 = f0_local0( f10_arg0, f10_arg1 )
	local f10_local7 = f0_local0( f10_arg0, f10_arg1, f10_local4, f10_local6 )
	local self = LUI.UIButton.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 0, 0, f10_local7, 0, 0 )
	self.id = f10_arg1.primaryRef
	self.data = f10_arg1
	self.ref = f10_arg1.primaryRef
	self.savedWidth = f10_local7
	local f10_local9 = LUI.UIHorizontalList.new()
	f10_local9:SetAnchorsAndPosition( 0, 1, 0, 0, 0, 0, 0, 0 )
	f10_local9:SetSpacing( f0_local0 )
	f10_local9.id = "helperHorizontalList"
	if f10_local3 then
		f10_local9:addElement( f10_local3 )
	end
	if f10_local5 then
		f10_local9:addElement( f10_local5 )
	end
	self:addElement( f10_local9 )
	return self
end

local f0_local6 = function ( f9_arg0 )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 30 )
	self.id = "buttonHelperListContainer"
	
	local _promptList = LUI.UIHorizontalList.new()
	_promptList:SetLeft( f0_local0 )
	_promptList:SetAlignment( LUI.Alignment.Left )
	_promptList:SetSpacing( f0_local0 )
	_promptList.id = "buttonHelperLeftList"
	_promptList:SetAdjustSizeToContent( true )
	self:addElement( _promptList )
	f9_arg0._promptList = _promptList
	
	return self
end

LUI.ButtonHelperTextTooltip.GetPromptByButtonRef = function ( f8_arg0, f8_arg1 )
	assert( f8_arg0._promptList )
	for f8_local3, f8_local4 in ipairs( {
		f8_arg0._promptList
	} ) do
		if f8_local4:getFirstChild() then
			
		end
	end
end

LUI.ButtonHelperTextTooltip.PushTooltipButtonPrompt = function ( f7_arg0, f7_arg1, f7_arg2 )
	local f7_local0 = assert
	local f7_local1 = f7_arg1.button_ref
	if f7_local1 then
		f7_local1 = 0 < #f7_arg1.button_ref
	end
	f7_local0( f7_local1 )
	assert( f7_arg1.helper_text )
	f7_local0 = f0_local0( f7_arg1 )
	assert( ButtonMap[f7_local0] )
	if not f7_arg0._promptStack[f7_local0] then
		f7_arg0._promptStack[f7_local0] = {}
	end
	local f7_local2 = #f7_arg0._promptStack[f7_local0]
	if 0 < f7_local2 then
		if LUI.AreTableContentsEqual( f7_arg1, f7_arg0._promptStack[f7_local0][f7_local2] ) then
			return 
		end
		f7_arg0:CloseButtonPrompt( f7_local0 )
	end
	table.insert( f7_arg0._promptStack[f7_local0], f7_arg1 )
	f7_arg0._promptList:addElement( LUI.ButtonHelperTextTooltip.TooltipButtonPrompt( f7_arg0._controllerIndex, f7_arg1 ) )
end

LUI.ButtonHelperTextTooltip.GetTooltipPromptsTotalWidth = function ( f6_arg0, f6_arg1 )
	assert( f6_arg0._promptList )
	local f6_local0
	if not f6_arg1 then
		f6_local0 = f6_arg1
	else
		f6_local0 = false
	end
	local f6_local1 = f6_arg0._promptList:getFirstChild()
	local f6_local2 = 0
	local f6_local3 = 0
	if f6_local1 then
		
	else
		
	end
	local f6_local4 = f6_local3
	if 1 < f6_local3 then
		f6_local4 = f6_local4 + 1
	end
	local f6_local5 = 0
	if not f6_local0 then
		f6_local5 = f0_local0 * f6_local4
	end
	return f6_local2 + f6_local5
end

LUI.ButtonHelperTextTooltip.TryRemoveAllButtonPrompts = function ( f5_arg0 )
	for f5_local3, f5_local4 in pairs( f5_arg0._promptStack ) do
		if 0 < #f5_local4 then
			f5_arg0:RemoveButtonPrompt( f5_local3 )
		end
	end
end

LUI.ButtonHelperTextTooltip.RemoveButtonPrompt = function ( f4_arg0, f4_arg1 )
	f4_arg0:CloseButtonPrompt( f4_arg1 )
	assert( f4_arg0._promptStack[f4_arg1], "Attempting to remove a button prompt that doesn't exist." )
	table.remove( f4_arg0._promptStack[f4_arg1] )
end

LUI.ButtonHelperTextTooltip.CloseButtonPrompt = function ( f3_arg0, f3_arg1 )
	local f3_local0 = f3_arg0:GetPromptByButtonRef( f3_arg1 )
	if f3_local0 then
		f3_local0:closeTree()
	end
end

LUI.ButtonHelperTextTooltip.RefreshButtonHelpers = function ( f2_arg0 )
	for f2_local4, f2_local5 in pairs( f2_arg0._promptStack ) do
		if 0 < #f2_local5 then
			local f2_local3 = f2_local5[#f2_local5]
			f2_arg0:RemoveButtonPrompt( f2_local4 )
			f2_arg0:PushTooltipButtonPrompt( f2_local3 )
		end
	end
end

LUI.ButtonHelperTextTooltip.init = function ( f1_arg0, f1_arg1 )
	assert( f1_arg1.controllerIndex )
	f1_arg0._controllerIndex = f1_arg1.controllerIndex
	LUI.ButtonHelperTextTooltip.super.init( f1_arg0 )
	f1_arg0:addElement( f0_local0( f1_arg0 ) )
	f1_arg0:registerEventHandler( "update_input_type", f1_arg0.RefreshButtonHelpers )
	f1_arg0._promptStack = {}
end

