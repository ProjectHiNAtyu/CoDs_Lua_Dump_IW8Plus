-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 02-09-2025 10:42
LUI.WebViewManager = LUI.Class( LUI.UIElement )
LUI.WebViewManager.USAGE_FULLSCREEN = 0
LUI.WebViewManager.USAGE_MOTD = 1
LUI.WebViewManager.ButtonMap = {
	alt2 = 8,
	down = 4,
	alt1 = 7,
	right_stick = 14,
	secondary = 6,
	shoulderr = 10,
	left = 1,
	left_trigger = 11,
	left_stick = 13,
	up = 3,
	shoulderl = 9,
	right_trigger = 12,
	primary = 5,
	right = 2
}
LUI.WebViewManager.Instance = function ()
	return LUI.WebViewManager.GetLayer()
end

LUI.WebViewManager.GetLayer = function ()
	local f56_local0 = Engine.DBFFAEEFGJ()
	return f56_local0.webviewManager
end

LUI.WebViewManager.TelescopeEnabled = function ()
	if Engine.BHICADFIHA() then
		local f55_local0 = Dvar.CFHDGABACF( "OKMLNRSSNO" )
		if f55_local0 == 1 then
			return true
		elseif f55_local0 == 2 then
			return false
		end
	end
	return Dvar.IBEGCHEFE( "LPKOSTRNOL" )
end

LUI.WebViewManager.MotdEnabled = function ()
	local f54_local0 = LUI.WebViewManager.TelescopeEnabled()
	if f54_local0 then
		f54_local0 = Dvar.IBEGCHEFE( "LMTLRTPSOK" )
	end
	return f54_local0
end

LUI.WebViewManager.CdlEnabled = function ()
	local f53_local0 = LUI.WebViewManager.TelescopeEnabled()
	if f53_local0 then
		f53_local0 = Dvar.IBEGCHEFE( "NMPQRPKTTR" )
	end
	return f53_local0
end

LUI.WebViewManager.GetUsage = function ( f52_arg0 )
	return f52_arg0.options.usage
end

LUI.WebViewManager.GetContext = function ( f51_arg0 )
	if f51_arg0 == LUI.WebViewManager.USAGE_MOTD then
		if Engine.EAAHGICFBD() and Engine.ECHCFGDDDF() and not MP.IsBRGameType( Lobby.GetCurrentGameType() ) then
			return "motd_mp_lobby"
		elseif Engine.EAAHGICFBD() and Engine.ECHCFGDDDF() and MP.IsBRGameType( Lobby.GetCurrentGameType() ) then
			return "motd_wz_lobby"
		elseif Engine.EAIICIFIFA() then
			return "motd_cp_lobby"
		end
	end
	return nil
end

LUI.WebViewManager.ShouldBeVisible = function ( f50_arg0 )
	return true
end

LUI.WebViewManager.TrapsInput = function ( f49_arg0 )
	return false
end

LUI.WebViewManager.InitLayer = function ( f48_arg0 )
	
end

LUI.WebViewManager.ClearLayer = function ( f47_arg0, f47_arg1 )
	f47_arg0.closeChildren()
end

LUI.WebViewManager.Reset = function ( f46_arg0 )
	f46_arg0._currentElement = nil
	f46_arg0._isSystemReady = nil
	f46_arg0._usageBeingOpened = nil
end

LUI.WebViewManager.ResetLoadComplete = function ( f45_arg0 )
	local f45_local0 = LUI.DataSourceInGlobalModel.new( "telescope.loadcomplete" )
	DataModel.DBEBGEAJHJ( f45_local0:GetModel(), false )
end

LUI.WebViewManager.SetPendingOpen = function ( f44_arg0, f44_arg1, f44_arg2, f44_arg3 )
	if f44_arg1 == nil then
		f44_arg0._pendingOpen = nil
	else
		f44_arg0._pendingOpen = {
			usage = f44_arg1,
			width = f44_arg2,
			height = f44_arg3
		}
	end
end

LUI.WebViewManager.SystemIsReady = function ( f43_arg0 )
	return f43_arg0._isSystemReady
end

LUI.WebViewManager.ReadyStateChanged = function ( f42_arg0, f42_arg1 )
	f42_arg0._isSystemReady = DataModel.JJEHAEBDF( f42_arg1 )
	if f42_arg0._isSystemReady then
		local f42_local0 = f42_arg0._pendingOpen
		if f42_local0 then
			f42_arg0:Open( f42_local0.usage, f42_local0.width, f42_local0.height )
		end
	else
		f42_arg0:Reset()
	end
end

LUI.WebViewManager.FullScreenChanged = function ( f41_arg0, f41_arg1 )
	local f41_local0 = DataModel.JJEHAEBDF( f41_arg1 )
	if f41_local0 == f41_arg0:IsFullScreenOpened() then
		return 
	elseif f41_local0 then
		f41_arg0:RequestOpenFullScreen( nil, false )
	else
		f41_arg0:RequestCloseFullScreen( false )
	end
end

LUI.WebViewManager.LoadCompleteChanged = function ( f40_arg0, f40_arg1 )
	f40_arg0._isLoadComplete = DataModel.JJEHAEBDF( f40_arg1 )
end

LUI.WebViewManager.ReserveMotdConfig = function ( f39_arg0, f39_arg1, f39_arg2, f39_arg3 )
	f39_arg0._reservedMotdConfig = {
		usage = f39_arg1,
		width = f39_arg2,
		height = f39_arg3
	}
end

LUI.WebViewManager.CanInteractive = function ( f38_arg0 )
	return f38_arg0._isLoadComplete
end

LUI.WebViewManager.UpdateInputDevice = function ( f37_arg0 )
	if f37_arg0._usageBeingOpened ~= nil then
		WebViewUpdateInputType( f37_arg0._usageBeingOpened )
	end
end

LUI.WebViewManager.init = function ( f36_arg0, f36_arg1 )
	LUI.UIElement.init( f36_arg0 )
	f36_arg0.id = "WebViewManager"
end

LUI.WebViewManager.PostInit = function ( f29_arg0 )
	f29_arg0._isLoadComplete = false
	f29_arg0._currentElement = nil
	f29_arg0._isSystemReady = false
	f29_arg0._usageBeingOpen = nil
	f29_arg0._pendingOpen = nil
	f29_arg0._context = nil
	f29_arg0._reservedMotdConfig = nil
	local f29_local0 = nil
	f29_local0 = LUI.DataSourceInGlobalModel.new( "telescope.ready" )
	f29_arg0:SubscribeToModel( f29_local0:GetModel( 0 ), function ( f35_arg0 )
		f29_arg0:ReadyStateChanged( f35_arg0 )
	end )
	f29_local0 = LUI.DataSourceInGlobalModel.new( "telescope.fullscreen" )
	f29_arg0:SubscribeToModel( f29_local0:GetModel( 0 ), function ( f34_arg0 )
		f29_arg0:FullScreenChanged( f34_arg0 )
	end )
	f29_local0 = LUI.DataSourceInGlobalModel.new( "telescope.loadcomplete" )
	f29_arg0:SubscribeToModel( f29_local0:GetModel( 0 ), function ( f33_arg0 )
		f29_arg0:LoadCompleteChanged( f33_arg0 )
	end )
	f29_arg0:registerEventHandler( "webview_navigate_menu", function ( element, event )
		f29_arg0:NavigateMenu( event.jumpType, event.jumpIntArg, event.jumpStrArg )
	end )
	f29_arg0:registerEventHandler( "update_input_type", function ( element, event )
		element:UpdateInputDevice()
	end )
	f29_arg0:registerEventHandler( "input_connection", function ( element, event )
		element:UpdateInputDevice()
	end )
end

LUI.WebViewManager.Setup = function ( f28_arg0, f28_arg1 )
	SetupWebView( f28_arg1 )
end

LUI.WebViewManager.OpenByElement = function ( f27_arg0, f27_arg1 )
	f27_arg0:Open( LUI.WebViewManager.GetUsage( f27_arg1 ), f27_arg1:GetSize() )
end

LUI.WebViewManager.CloseByElement = function ( f26_arg0, f26_arg1 )
	f26_arg0:Close( LUI.WebViewManager.GetUsage( f26_arg1 ) )
end

LUI.WebViewManager.OpenCdl = function ( f25_arg0 )
	if not f25_arg0:SystemIsReady() then
		return 
	elseif not LUI.WebViewManager.CdlEnabled() then
		return 
	else
		LUI.FlowManager.RequestPopupMenu( nil, "FullScreenWeb", true, Engine.IJEBHJIJF(), false, nil )
		f25_arg0:Open( LUI.WebViewManager.USAGE_FULLSCREEN, 1920, 1080, "cdl" )
	end
end

LUI.WebViewManager.Open = function ( f24_arg0, f24_arg1, f24_arg2, f24_arg3, f24_arg4 )
	local f24_local0 = false
	local f24_local1
	if not f24_arg4 then
		f24_local1 = f24_arg4
	else
		f24_local1 = LUI.WebViewManager.GetContext( f24_arg1 )
	end
	if f24_arg0._usageBeingOpened ~= f24_arg1 then
		f24_local0 = true
	end
	if f24_local1 ~= nil and f24_arg0._context ~= f24_local1 then
		f24_arg0._context = f24_local1
		f24_local0 = true
	end
	if not f24_local0 then
		return 
	elseif f24_arg0:SystemIsReady() then
		f24_arg0:ResetLoadComplete()
		OpenWebView( f24_arg1, f24_arg2, f24_arg3, f24_arg0._context )
		f24_arg0._usageBeingOpened = f24_arg1
		if f24_arg1 == LUI.WebViewManager.USAGE_MOTD then
			f24_arg0:ReserveMotdConfig( f24_arg1, f24_arg2, f24_arg3 )
		end
	else
		f24_arg0:SetPendingOpen( f24_arg1, f24_arg2, f24_arg3 )
	end
end

LUI.WebViewManager.Close = function ( f23_arg0, f23_arg1 )
	local f23_local0 = f23_arg0._pendingOpen
	if f23_local0 and f23_local0.usage == f23_arg1 then
		f23_arg0:SetPendingOpen( nil )
	end
end

LUI.WebViewManager.GainFocus = function ( f22_arg0, f22_arg1 )
	f22_arg0._currentElement = f22_arg1
	GainFocusWebView( LUI.WebViewManager.GetUsage( f22_arg1 ), f22_arg1.m_mouseOver == true )
end

LUI.WebViewManager.LoseFocus = function ( f21_arg0, f21_arg1 )
	f21_arg0._currentElement = nil
	LoseFocusWebView( LUI.WebViewManager.GetUsage( f21_arg1 ) )
end

LUI.WebViewManager.ButtonPress = function ( f20_arg0, f20_arg1, f20_arg2 )
	if not f20_arg0:CanInteractive() then
		return 
	elseif f20_arg1 ~= f20_arg0._currentElement then
		return 
	elseif f20_arg2.down == false then
		return 
	else
		local f20_local0 = LUI.WebViewManager.ButtonMap[f20_arg2.button]
		if f20_local0 == nil then
			return 
		else
			ButtonPressWebView( LUI.WebViewManager.GetUsage( f20_arg1 ), f20_local0 )
		end
	end
end

LUI.WebViewManager.GetMousePositionByEvent = function ( f19_arg0, f19_arg1, f19_arg2, f19_arg3 )
	local f19_local0 = f19_arg2.x
	local f19_local1 = f19_arg2.y
	if f19_arg3 == false then
		f19_local0, f19_local1 = ProjectRootCoordinate( f19_arg2.rootName, f19_local0, f19_local1 )
	end
	local f19_local2, f19_local3 = f19_arg2.root:PixelsToUnits( f19_local0, f19_local1 )
	local f19_local4, f19_local5 = f19_arg1:getCurrentGlobalRect()
	if f19_local4 == nil or f19_local5 == nil then
		return 
	else
		return math.floor( (f19_local2 - f19_local4) / _1080p + 0.5 ), math.floor( (f19_local3 - f19_local5) / _1080p + 0.5 )
	end
end

LUI.WebViewManager.MouseMove = function ( f18_arg0, f18_arg1, f18_arg2 )
	if not f18_arg0:CanInteractive() then
		return 
	end
	local f18_local0, f18_local1 = f18_arg0:GetMousePositionByEvent( f18_arg1, f18_arg2, false )
	if f18_local0 ~= nil and f18_local1 ~= nil then
		MouseMoveWebView( f18_arg2.controller, LUI.WebViewManager.GetUsage( f18_arg1 ), f18_local0, f18_local1 )
	end
end

LUI.WebViewManager.MouseAction = function ( f17_arg0, f17_arg1, f17_arg2 )
	if not f17_arg0:CanInteractive() then
		return 
	end
	local f17_local0, f17_local1 = f17_arg0:GetMousePositionByEvent( f17_arg1, f17_arg2, true )
	if f17_local0 ~= nil and f17_local1 ~= nil then
		local f17_local2
		if f17_arg2.name ~= "leftmousedown" and f17_arg2.name ~= "leftmouseup" then
			f17_local2 = false
		else
			f17_local2 = true
		end
		local f17_local3
		if f17_arg2.name ~= "leftmousedown" and f17_arg2.name ~= "rightmousedown" then
			f17_local3 = false
		else
			f17_local3 = true
		end
		MouseActionWebView( LUI.WebViewManager.GetUsage( f17_arg1 ), f17_local0, f17_local1, f17_local2, f17_local3 )
	end
end

LUI.WebViewManager.MouseWheel = function ( f16_arg0, f16_arg1, f16_arg2 )
	if not f16_arg0:CanInteractive() then
		return 
	end
	local f16_local0, f16_local1 = f16_arg0:GetMousePositionByEvent( f16_arg1, f16_arg2, false )
	if f16_local0 ~= nil and f16_local1 ~= nil then
		local f16_local2 = {
			down = 1,
			up = 0,
			left = 2,
			right = 3
		}
		local f16_local3 = f16_local2[f16_arg2.button]
		if f16_local3 == nil then
			return 
		end
		MouseWheelWebView( LUI.WebViewManager.GetUsage( f16_arg1 ), f16_local3, f16_local0, f16_local1 )
	end
end

LUI.WebViewManager.GetFullScreenMenu = function ()
	local f15_local0 = "FullScreenWeb"
	if LUI.FlowManager.IsInStack( f15_local0 ) then
		local f15_local1 = LUI.FlowManager.GetMenuByName( f15_local0 )
		f15_local1 = f15_local1.menu
		if f15_local1 then
			return f15_local1
		end
	end
	return nil
end

LUI.WebViewManager.IsFullScreenOpened = function ( f14_arg0 )
	return f14_arg0:GetFullScreenMenu() ~= nil
end

LUI.WebViewManager.MakeSureFullScreenClosed = function ( f13_arg0 )
	if f13_arg0:IsFullScreenOpened() then
		local f13_local0 = f13_arg0
		local f13_local1 = f13_arg0.RequestCloseFullScreen
		local f13_local2 = f13_arg0:GetFullScreenMenu()
		f13_local1( f13_local0, f13_local2.WebView, true )
	end
end

LUI.WebViewManager.RequestOpenFullScreen = function ( f12_arg0, f12_arg1, f12_arg2 )
	local f12_local0 = LUI.DataSourceInControllerModel.new( "alwaysLoaded.openedSeasonalFlow" )
	local f12_local1 = f12_local0:GetValue( Engine.IJEBHJIJF() )
	if f12_arg2 and not f12_arg0:CanInteractive() then
		return 
	elseif f12_local1 then
		RequestCloseBigView( LUI.WebViewManager.USAGE_FULLSCREEN )
	else
		LUI.FlowManager.RequestPopupMenu( nil, "FullScreenWeb", true, Engine.IJEBHJIJF(), false, nil )
		if f12_arg2 and f12_arg1 then
			RequestOpenBigView( LUI.WebViewManager.GetUsage( f12_arg1 ) )
		end
	end
end

LUI.WebViewManager.RequestCloseFullScreen = function ( f11_arg0, f11_arg1 )
	if not f11_arg0:IsFullScreenOpened() then
		return 
	end
	local f11_local0 = LUI.WebViewManager.GetUsage
	local f11_local1 = f11_arg0:GetFullScreenMenu()
	f11_local0 = f11_local0( f11_local1.WebView )
	LUI.FlowManager.RequestLeaveMenuByName( "FullScreenWeb", true, true )
	if f11_arg0._context == "cdl" then
		local f11_local2 = f11_arg0._reservedMotdConfig
		if f11_local2 then
			f11_arg0:Open( f11_local2.usage, f11_local2.width, f11_local2.height )
		else
			f11_arg0._context = nil
		end
	elseif (f11_arg0._context == "motd_wz_lobby" or f11_arg0._context == "motd_mp_lobby" or f11_arg0._context == "motd_cp_lobby") and f11_arg1 then
		RequestCloseBigView( f11_local0 )
	end
end

LUI.WebViewManager.NavigateEnum = {
	battlepass = 8,
	operators = 2,
	redeem = 17,
	goto_url = 9,
	battlepass_tier_gift = 18,
	tournaments = 14,
	barracks = 3,
	trials = 13,
	armory = 12,
	store_item = 5,
	loadouts = 1,
	cdl = 7,
	store = 10,
	missions = 15,
	register = 16,
	social = 11,
	goto_franchise_store = 0,
	cdl_web = 6
}
local f0_local0 = function ()
	local f10_local0 = {
		nil,
		"MPMainMenu",
		"BRMainMenu",
		"CPMainMenu",
		"MPPublicLobby",
		"BRPublicLobby",
		"CPPublicMatchMenu"
	}
	for f10_local1 = 1, #f10_local0, 1 do
		local f10_local4 = f10_local0[f10_local1]
		if LUI.FlowManager.IsInStack( f10_local4 ) then
			local f10_local5 = LUI.FlowManager.GetMenuByName( f10_local4 )
			f10_local5 = f10_local5.menu
			if f10_local5 then
				return f10_local5.MPTabsMenu
			end
		end
	end
end

local f0_local1 = function ( f9_arg0, f9_arg1 )
	f9_arg0[CRM.keys.STORE_ITEM] = f9_arg1
end

local f0_local2 = function ( f8_arg0, f8_arg1 )
	f8_arg0[CRM.keys.STORE_ITEM] = f8_arg1
end

local f0_local3 = function ( f7_arg0, f7_arg1 )
	f7_arg0[CRM.keys.STORE_ITEM] = f7_arg1
end

local f0_local4 = function ( f6_arg0, f6_arg1 )
	f6_arg0[CRM.keys.ACTION_LOCATION] = f6_arg1
end

local f0_local5 = function ( f5_arg0, f5_arg1 )
	f5_arg0[CRM.keys.STORE_ITEM] = f5_arg1
end

local f0_local6 = function ( f4_arg0 )
	for f4_local3, f4_local4 in pairs( LUI.WebViewManager.NavigateEnum ) do
		if f4_local4 == f4_arg0 then
			return f4_local3
		end
	end
end

local f0_local7 = function ( f3_arg0 )
	local f3_local0 = CRM.LocationFunctions[f3_arg0]
	if not f3_local0 then
		f3_local0 = CRM.actionFunctions[f3_arg0]
	end
	return f3_local0
end

local f0_local8 = function ( f2_arg0 )
	local f2_local0 = {}
	local f2_local1 = {}
	f2_local0[CRM.keys.LOCATION_ID] = 0
	f2_local0[CRM.keys.MESSAGE_ID] = 0
	f2_local0[CRM.keys.MESSAGE_INDEX] = 0
	f2_local1.controller = f2_arg0
	return f2_local0, f2_local1
end

local f0_local9 = {
	store_item = f0_local2,
	battlepass_tier_gift = f0_local5
}
local f0_local10 = {
	store = f0_local1,
	goto_url = f0_local4,
	goto_franchise_store = f0_local3
}
LUI.WebViewManager.NavigateMenu = function ( f1_arg0, f1_arg1, f1_arg2, f1_arg3 )
	local f1_local0 = f0_local0( f1_arg1 )
	if f1_arg1 == LUI.WebViewManager.NavigateEnum.cdl_web then
		f1_local0 = "goto_url"
		f1_arg3 = Dvar.DHEEJCCJBH( "QMKTOPOPP" )
	end
	local f1_local1 = f0_local0( f1_local0 )
	local f1_local2 = f0_local0[f1_local0]
	local f1_local3 = f0_local0[f1_local0]
	local f1_local4 = Engine.IJEBHJIJF()
	local f1_local5 = f0_local0()
	local f1_local6, f1_local7 = f0_local0( f1_local4 )
	local f1_local8 = f1_arg0:GetFullScreenMenu()
	if f1_local0 == "cdl" then
		f1_arg0:OpenCdl()
		return 
	elseif f1_local8 == nil then
		return 
	elseif f1_local2 then
		f1_local2( f1_local6, f1_arg2 )
	end
	if f1_local3 then
		f1_local3( f1_local6, f1_arg3 )
	end
	if f1_local5 == nil then
		return 
	elseif f1_local1 == nil then
		return 
	end
	local f1_local9 = f1_local1( f1_local4, f1_local6 )
	if f1_local9 == nil then
		return 
	end
	local f1_local10 = f1_local9( f1_local8, f1_local7 )
	if f1_local10 ~= nil then
		f1_local5:SetupOnRestoreFocusOverride( f1_local10 )
		f1_arg0:RequestCloseFullScreen( true )
	elseif f1_arg1 == LUI.WebViewManager.NavigateEnum.goto_franchise_store then
		f1_arg0:RequestCloseFullScreen( true )
	end
end

