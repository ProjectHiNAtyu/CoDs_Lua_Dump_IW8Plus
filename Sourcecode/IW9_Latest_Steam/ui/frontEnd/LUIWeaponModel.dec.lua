-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
LUI.UIWeaponModel = LUI.Class( LUI.UIElement )
LUI.UIWeaponModel.init = function ( f10_arg0, f10_arg1 )
	LUI.UIWeaponModel.super.init( f10_arg0 )
	assert( f10_arg1 )
	assert( f10_arg1.controllerIndex )
	assert( f10_arg1.clientWeaponIndex )
	assert( f10_arg1.basePosition )
	f10_arg0._clientWeaponIndex = f10_arg1.clientWeaponIndex
	local f10_local0 = f10_arg1.dataCSVFile
	if not f10_local0 then
		f10_local0 = CSV.weaponOffsets.file
	end
	f10_arg0._dataCSVFile = f10_local0
	f10_local0 = {
		base2DPosition = f10_arg1.basePosition
	}
	f10_arg0._baseOffsets = f10_arg1.baseOffsets
	f10_arg0:SetupWeaponModel( f10_local0 )
	f10_arg0:SetWeaponIndex( f10_arg0._clientWeaponIndex )
end

LUI.UIWeaponModel.GetDebugOffsets = function ( f9_arg0, f9_arg1, f9_arg2, f9_arg3 )
	local f9_local0 = Dvar[0xEDCFC612B39E0C0]( 0x71F1567332DCCA8 )
	local f9_local1 = Dvar[0xEDCFC612B39E0C0]( 0x774613F8B3B55AB )
	local f9_local2 = Dvar[0xEDCFC612B39E0C0]( 0x4DCCE6EE05480CE )
	local f9_local3 = Dvar[0xEDCFC612B39E0C0]( 0xC836E6DD0FFD64D )
	local f9_local4 = Dvar[0xEDCFC612B39E0C0]( 0xF447F54B5E3C7E2 )
	local f9_local5 = Dvar[0xEDCFC612B39E0C0]( 0x5A83214D3BDC00F )
	if f9_local0 ~= f9_arg1 then
		f9_arg1 = f9_local0
	end
	if f9_local1 ~= f9_arg2 then
		f9_arg2 = f9_local1
	end
	if f9_local2 ~= f9_arg3 then
		f9_arg3 = f9_local2
	end
	return f9_arg1 + f9_local3, f9_arg2 + f9_local4, f9_arg3 + f9_local5
end

LUI.UIWeaponModel.GetDebugRotations = function ( f8_arg0, f8_arg1, f8_arg2, f8_arg3 )
	local f8_local0 = Dvar[0xEDCFC612B39E0C0]( 0xB3467C1D298866D )
	local f8_local1 = Dvar[0xEDCFC612B39E0C0]( 0xCC3BF6F84F16064 )
	local f8_local2 = Dvar[0xEDCFC612B39E0C0]( 0xE97BBCC3E9A7592 )
	if f8_local0 ~= f8_arg1 then
		f8_arg1 = f8_local0
	end
	if f8_local1 ~= f8_arg2 then
		f8_arg2 = f8_local1
	end
	if f8_local2 ~= f8_arg3 then
		f8_arg3 = f8_local2
	end
	return f8_arg1, f8_arg2, f8_arg3
end

LUI.UIWeaponModel.ApplyBaseOffsets = function ( f7_arg0, f7_arg1 )
	if f7_arg0._baseOffsets then
		local f7_local0 = f7_arg0._baseOffsets
		if f7_local0.xOffset then
			f7_arg1.xOffset = f7_arg1.xOffset + f7_local0.xOffset
		end
		if f7_local0.yOffset then
			f7_arg1.yOffset = f7_arg1.yOffset + f7_local0.yOffset
		end
		if f7_local0.zOffset then
			f7_arg1.zOffset = f7_arg1.zOffset + f7_local0.zOffset
		end
	end
end

LUI.UIWeaponModel.SetOffsetsAndRotations = function ( f5_arg0, f5_arg1 )
	assert( f5_arg0._clientWeaponIndex )
	local f5_local0 = f5_arg0._clientWeaponIndex
	f5_arg0._weaponModelName = f5_arg1
	local f5_local1 = 0
	local f5_local2 = 0
	local f5_local3 = WEAPON.GetBaseRefFromWeaponString( f5_arg0._weaponModelName )
	local f5_local4 = WEAPON.GetWeaponClass( f5_local3 )
	local f5_local5 = GL_HACK.IsDoomChainsawBlueprintFromRef( f5_arg1 )
	local f5_local6 = CONDITIONS.IsMobileOrMobileSim()
	local f5_local7
	if f5_local6 then
		f5_local7 = f5_local6
	else
		f5_local7 = LUI.FlowManager.IsMenuOnTop( LOADOUT.GetWeaponArmoryMenuRef() )
	end
	local f5_local8
	if not f5_local6 then
		f5_local8 = LUI.FlowManager.IsMenuOnTop( LOADOUT.GetWeaponPreviewMenuRef() )
	else
		f5_local8 = false
	end
	local f5_local9 = CONDITIONS.IsMenuInStack( GL_HACK.GetGunsmithMenu() )
	if f5_local3 == WEAPON.Baton then
		if f5_local9 or f5_local8 then
			f5_local1 = 0
		else
			f5_local1 = CLIENT_MODEL.batonRotationOffset
		end
		if f5_local7 then
			local f5_local10 = CLIENT_MODEL.mobileMeleePositionOffset
			if not f5_local10 then
				f5_local2 = f5_local10
			end
		end
		f5_local2 = 0
	elseif f5_local4 == WEAPON.MELEEClass2 or f5_local4 == WEAPON.MELEEClass then
		if f5_local5 then
			local f5_local10 = CLIENT_MODEL.chainsawRotationOffset
			if not f5_local10 then
				f5_local1 = f5_local10
			end
		end
		f5_local1 = CLIENT_MODEL.meleeRotationOffset
	end
	local f5_local10
	if f5_local7 then
		f5_local10 = CLIENT_MODEL.mobileWeaponArmoryRotationOffset
		if not f5_local10 then
		
		else
			local f5_local11 = FrontEndScene.GetWeaponModelOffset( f5_arg1, f5_arg0._dataCSVFile )
			if Engine[0x2DA54CF5D6B7F02]() and Dvar[0x9E5BE3B4BBA4E0E]( 0x207212EF5C79A3A ) then
				f5_local11.xOffset, f5_local11.yOffset, f5_local11.zOffset = f5_arg0:GetDebugOffsets( f5_local11.xOffset, f5_local11.yOffset, f5_local11.zOffset )
			end
			local f5_local12 = CONDITIONS.IsDMZGametype() and DMZ.GetEquippedInstanceWeaponTable( f5_local0 ) or WEAPON.GenerateWeaponTableFromWeaponString( f5_local3, f5_arg1 )
			local f5_local13 = f5_local12.lootID
			f5_arg0:ApplyBaseOffsets( f5_local11 )
			if LUI.FlowManager.IsUsingWeaponOriginOffset() then
				local f5_local14 = f5_arg0:Wait( 5, true )
				f5_local14.onComplete = function ()
					local f6_local0 = CONDITIONS.IsMobileOrMobileSim()
					local f6_local1 = CLIENT_MODEL.GetGunCaseModelSize( f5_arg0.weapon, f5_arg0, nil )
					local f6_local2 = Engine[0x929CB0A3C5047D]( FrontEndScene.ClientWeapons.GunTableSecondary )
					local f6_local3 = 0
					local f6_local4 = 0
					local f6_local5 = GL_HACK.GUNCASE_OFFSET
					if f5_arg0 == FrontEndScene.ClientWeapons.GunTableSecondary and not f6_local0 then
						if f6_local1 == CLIENT_MODEL.gunCaseSizes.SMALL_GUN_CASE then
							if f5_arg0 == WEAPON.pistolClass then
								f6_local4 = CLIENT_MODEL.pistolWeaponOffset
							elseif f5_arg0 == WEAPON.MELEEClass2 then
								f6_local4 = CLIENT_MODEL.knifeYOffset
							end
						elseif f6_local2.y > CLIENT_MODEL.maxSecondaryWeaponLength then
							f6_local4 = CLIENT_MODEL.secondaryWeaponOffset
						end
						local f6_local6 = WEAPON.GetWeaponDataForRef( f5_arg0 )
						if f6_local6 then
							local f6_local7 = f6_local6[0xD7ECD900878888]
							if not f6_local7 then
								f6_local3 = f6_local7
							else
								f6_local3 = 0
							end
						end
						f6_local3 = 0
					end
					if f5_arg0 == WEAPON.MELEEClass2 and f5_arg0 ~= FrontEndScene.ClientWeapons.Preview then
						local f6_local6 = Engine[0x756D55D24F7B53]( f5_arg0._weaponModelName )
						local f6_local7 = tonumber
						local f6_local8 = LUI.Split( f5_arg0._weaponModelName, "|" )
						f6_local7 = f6_local7( f6_local8[2] ) or 1
						if f6_local6[f6_local7] then
							local f6_local9 = f6_local6[f6_local7][0xBA118E102095483]
							if not f6_local9 then
								f6_local5 = f6_local9
							else
								f6_local5 = 0
							end
						end
						f6_local5 = 0
					end
					if f6_local0 then
						if f5_arg0 == WEAPON.MELEEClass then
							f5_arg0 = -f5_arg0
						end
						ClientWeapon[0x8B8A4E0355DF0C0]( f5_arg0._clientWeaponIndex, f5_arg0.xOffset + f6_local3, f5_arg0.yOffset + f6_local4 + f5_arg0, f5_arg0.zOffset + f6_local5 )
					else
						f5_arg0:SetWeaponOffset( f5_arg0.xOffset + f6_local3, f5_arg0.yOffset + f6_local4, f5_arg0.zOffset + f6_local5 )
					end
				end
				
			end
			if f5_local0 == FrontEndScene.ClientWeapons.Preview and LUI.FlowManager.IsMenuOnTop( LOADOUT.GetWeaponPreviewMenuRef() ) then
				f5_local11.xRotationCenter = WEAPON.GetCenterOfRotationOffset( Engine[0x45B054C920178E9](), f5_local0, f5_local3 )
				f5_local11.zRotationCenter = WEAPON.GetCenterOfRotationZOffset( f5_local3, f5_local11.zRotationCenter )
			end
			if not CONDITIONS.IsMobileItemPreviewSceneActive() then
				ClientWeapon[0xD45C6A2FD89FDDC]( f5_local0, f5_local11.xRotationCenter, f5_local11.yRotationCenter, f5_local11.zRotationCenter )
			end
			if Engine[0x2DA54CF5D6B7F02]() and Dvar[0x9E5BE3B4BBA4E0E]( 0x207212EF5C79A3A ) then
				f5_local11.pitch, f5_local11.yaw, f5_local11.roll = f5_arg0:GetDebugRotations( f5_local11.pitch, f5_local11.yaw, f5_local11.roll )
			end
			local f5_local14 = LUI.FlowManager.GetMenuStack()
			if LUI.FlowManager.IsMenuOnTop( STORE.GetStorePreviewMenuRef() ) and not f5_local14[#f5_local14].scopedData.gunscreenItem and f5_local4 ~= WEAPON.MELEEClass and f5_local4 ~= WEAPON.MELEEClass2 then
				f5_local11.yaw = f5_local11.yaw + STORE.YawWeaponOffset
				f5_local11.roll = f5_local11.roll + STORE.RollWeaponOffset
				ClientWeapon[0x2F28F9BE6EE7D2D]( f5_local0, f5_local11.pitch, f5_local11.yaw, f5_local11.roll )
			elseif f5_local4 == WEAPON.MELEEClass then
				ClientWeapon[0x2F28F9BE6EE7D2D]( f5_local0, f5_local11.pitch + f5_local10, f5_local11.yaw + f5_local1, f5_local11.roll )
				if CONDITIONS.IsMobileOrMobileSim() then
					f5_local11.yaw = f5_local11.yaw + f5_local1
					f5_local11.blockRoll = true
				end
			elseif f5_local4 == WEAPON.MELEEClass2 then
				ClientWeapon[0x2F28F9BE6EE7D2D]( f5_local0, f5_local11.pitch + f5_local1, f5_local11.yaw, f5_local11.roll )
				f5_local11.pitch = f5_local11.pitch + f5_local1
				f5_local11.blockRoll = true
			else
				ClientWeapon[0x2F28F9BE6EE7D2D]( f5_local0, f5_local11.pitch, f5_local11.yaw, f5_local11.roll - f5_local10 )
			end
			f5_arg0._currentOffsetData = f5_local11
		end
	end
	f5_local10 = 0
end

LUI.UIWeaponModel.GetCurrentOffsetsAndRotations = function ( f4_arg0 )
	return f4_arg0._currentOffsetData
end

LUI.UIWeaponModel.GetOffsetsAndRotations = function ( f3_arg0, f3_arg1 )
	assert( f3_arg0._clientWeaponIndex )
	local f3_local0 = f3_arg0._clientWeaponIndex
	local f3_local1 = FrontEndScene.GetWeaponModelOffset( f3_arg1, f3_arg0._dataCSVFile )
	if Engine[0x2DA54CF5D6B7F02]() and Dvar[0x9E5BE3B4BBA4E0E]( 0x207212EF5C79A3A ) then
		f3_local1.xOffset, f3_local1.yOffset, f3_local1.zOffset = f3_arg0:GetDebugOffsets( f3_local1.xOffset, f3_local1.yOffset, f3_local1.zOffset )
	end
	if Engine[0x2DA54CF5D6B7F02]() and Dvar[0x9E5BE3B4BBA4E0E]( 0x207212EF5C79A3A ) then
		f3_local1.pitch, f3_local1.yaw, f3_local1.roll = f3_arg0:GetDebugRotations( f3_local1.pitch, f3_local1.yaw, f3_local1.roll )
	end
	return f3_local1
end

LUI.UIWeaponModel.SetWeaponModel = function ( f2_arg0, f2_arg1 )
	assert( f2_arg0._clientWeaponIndex )
	local f2_local0 = f2_arg0._clientWeaponIndex
	FrontEndScene.SetWeaponModel( f2_local0, f2_arg1 )
	f2_arg0:SetOffsetsAndRotations( f2_arg1 )
	ClientWeapon[0x59B77D6F41ED417]( f2_local0, true )
	ClientWeapon[0x9ABB180A64F1EFC]( f2_local0, true )
end

LUI.UIWeaponModel.GetEntityNum = function ( f1_arg0 )
	assert( f1_arg0._clientWeaponIndex )
	return ClientWeapon[0x5DD69014A9C290]( f1_arg0._clientWeaponIndex )
end

LUI.UIWeaponModel.id = "UIWeaponModel"
