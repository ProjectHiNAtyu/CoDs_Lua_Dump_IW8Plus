-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
CP = CP or {}
CP.TeamMaxSize = 4
CP.CheckpointResetStartUTC = 1582826688
CP.CheckpointResetPeriodUTC = 305
CP.SortCPScoreboard = {
	BY_SCORE = 0,
	BY_CURRENCY = 1,
	BY_CLIENT_NUM = 2
}
CP.IntelCategories = {
	MYMODES = "MyModes",
	CWL = "Cwl",
	STANDARD = "Standard",
	ALTERNATE = "Alternate",
	LARGE = "Large"
}
CP.SPEC_OPS = "cp_survival"
CP.WAVE_SURVIVAL = "cp_wave_sv"
CP.CLASSIC_MISSIONS = "cp_specops"
CP.ZOMBIE = "zombie"
CP.REAPER_AMMO_MAX = 2
CP.SCOREBOARD_COLUMN_WIDTH = 108 * _1080p
CP.ClearWaveLoadout = function ( f45_arg0, f45_arg1 )
	if CONDITIONS.IsWaveGameType() then
		local f45_local0 = PlayerData[0x8B73907B55C4D71]( f45_arg0, LOADOUT.GetLoadoutStatsGroup() )
		f45_local0 = f45_local0.squadMembers.loadoutWaveMode
		f45_local0.loadoutPerks[0]:set( "specialty_null" )
		f45_local0.loadoutPerks[1]:set( "specialty_null" )
		f45_local0.loadoutPerks[2]:set( "specialty_null" )
		f45_local0.weaponSetups[0].weapon:set( "s4_pi_mike1911" )
		f45_local0.weaponSetups[1].weapon:set( "s4_pi_mike1911" )
		f45_local0.weaponSetups[2].weapon:set( "none" )
		f45_local0.weaponSetups[0].attachmentSetup[0].attachment:set( "none" )
		f45_local0.weaponSetups[0].attachmentSetup[1].attachment:set( "none" )
		f45_local0.weaponSetups[0].attachmentSetup[2].attachment:set( "none" )
		f45_local0.weaponSetups[0].attachmentSetup[3].attachment:set( "none" )
		f45_local0.weaponSetups[0].attachmentSetup[4].attachment:set( "none" )
		f45_local0.weaponSetups[1].attachmentSetup[0].attachment:set( "none" )
		f45_local0.weaponSetups[1].attachmentSetup[1].attachment:set( "none" )
		f45_local0.weaponSetups[1].attachmentSetup[2].attachment:set( "none" )
		f45_local0.weaponSetups[1].attachmentSetup[3].attachment:set( "none" )
		f45_local0.weaponSetups[1].attachmentSetup[4].attachment:set( "none" )
		local f45_local1 = PlayerData[0x8B73907B55C4D71]( f45_arg0, LOADOUT.GetLoadoutStatsGroup() )
		f45_local1.squadMembers.munitionWaveModeSetups[0].munition:set( "empty1" )
		f45_local1 = PlayerData[0x8B73907B55C4D71]( f45_arg0, LOADOUT.GetLoadoutStatsGroup() )
		f45_local1.squadMembers.munitionWaveModeSetups[1].munition:set( "empty2" )
		f45_local1 = PlayerData[0x8B73907B55C4D71]( f45_arg0, LOADOUT.GetLoadoutStatsGroup() )
		f45_local1.squadMembers.munitionWaveModeSetups[2].munition:set( "empty3" )
		if f45_arg1 == nil then
			f45_local1 = PlayerData[0x8B73907B55C4D71]( f45_arg0, LOADOUT.GetLoadoutStatsGroup() )
			f45_local1.squadMembers.currencyWaveMode:set( 0 )
			f45_local0.equipmentSetups[0].equipment:set( "equip_frag" )
			f45_local0.equipmentSetups[1].equipment:set( "equip_flash" )
		end
	end
end

CP.ClearEquipmentPrimary = function ( f44_arg0 )
	local f44_local0 = PlayerData[0x8B73907B55C4D71]( f44_arg0, LOADOUT.GetLoadoutStatsGroup() )
	f44_local0.squadMembers.loadoutWaveMode.equipmentSetups[0].equipment:set( "none" )
end

CP.ClearEquipmentSecondary = function ( f43_arg0 )
	local f43_local0 = PlayerData[0x8B73907B55C4D71]( f43_arg0, LOADOUT.GetLoadoutStatsGroup() )
	f43_local0.squadMembers.loadoutWaveMode.equipmentSetups[1].equipment:set( "none" )
end

CP.UpdateWeaponsFromScript = function ( f42_arg0 )
	local f42_local0 = PlayerData[0x8B73907B55C4D71]( f42_arg0, CoD.StatsGroup.Coop )
	f42_local0 = f42_local0.waveSurvivalWeapon[0]:get()
	local f42_local1 = PlayerData[0x8B73907B55C4D71]( f42_arg0, CoD.StatsGroup.Coop )
	f42_local1 = f42_local1.waveSurvivalWeapon[1]:get()
	local f42_local2 = PlayerData[0x8B73907B55C4D71]( f42_arg0, LOADOUT.GetLoadoutStatsGroup() )
	f42_local2 = f42_local2.squadMembers.loadoutWaveMode
	f42_local2.weaponSetups[0].weapon:set( f42_local0 )
	f42_local2.weaponSetups[1].weapon:set( f42_local1 )
end

CP.UpdateCurrencyFromScript = function ( f41_arg0 )
	local f41_local0 = PlayerData[0x8B73907B55C4D71]( f41_arg0, LOADOUT.GetLoadoutStatsGroup() )
	f41_local0.squadMembers.currencyWaveMode:set( CP.ScriptCurrencyGet( f41_arg0 ) )
end

CP.GetAttachmentSurvivalCost = function ( f40_arg0 )
	local f40_local0 = nil
	if f40_arg0 == "optic" then
		f40_local0 = 1000
	elseif f40_arg0 == "muzzle" then
		f40_local0 = 500
	elseif f40_arg0 == "undermount" then
		f40_local0 = 800
	elseif ATTACHMENT.IsPerkCategory( f40_arg0 ) then
		f40_local0 = 1000
	elseif f40_arg0 == "magazine" then
		f40_local0 = 1250
	elseif f40_arg0 == "extra" then
		f40_local0 = 600
	elseif f40_arg0 == "backpiece" then
		f40_local0 = 500
	elseif f40_arg0 == "unique" then
		f40_local0 = 500
	elseif f40_arg0 == "reargrip" then
		f40_local0 = 900
	elseif f40_arg0 == "trigger" then
		f40_local0 = 700
	elseif f40_arg0 == "guard" then
		f40_local0 = 850
	elseif f40_arg0 == "pump" then
		f40_local0 = 1100
	else
		f40_local0 = 1000
	end
	return f40_local0
end

CP.GetMapsDataSources = function ( f36_arg0, f36_arg1, f36_arg2 )
	local f36_local0 = Lobby.GetCurrentGameType()
	local f36_local1 = {}
	for f36_local2 = 0, Lobby[0xF14659C6AA6180F]() - 1, 1 do
		local f36_local5 = Lobby[0x7EF7E711A11389F]( f36_local2 )
		local f36_local6 = PRIVATE_MATCH.MapSupportsCustomGames( f36_local5 )
		if f36_local6 then
			f36_local6 = PRIVATE_MATCH.ShouldDisplayMap( f36_local2, f36_arg1 )
		end
		if f36_local6 then
			local f36_local7 = {
				name = Lobby[0x4318225D906F9F7]( f36_local2 ),
				ref = f36_local5,
				desc = Lobby[0x38322B77816C371]( f36_local2 ),
				image = Lobby[0x4EF906FD8F725FF]( f36_local2 ),
				isOwned = Engine[0xD885008709BA0A7]( Engine[0x4F1C6D8538B64A6]( f36_local5 ) )
			}
			local f36_local8 = Lobby.GetGameTypesTableForMapIndex( f36_local2 )
			if f36_local0 and f36_local8[f36_local0] then
				table.insert( f36_local1, f36_local7 )
			end
		end
	end
	table.sort( f36_local1, function ( f39_arg0, f39_arg1 )
		if f39_arg0.name ~= f39_arg1.name then
			return f39_arg0.name < f39_arg1.name
		else
			
		end
	end )
	if CONDITIONS.IsWeGameGovBanned() then
		f36_local1 = WeGame.WhitelistGameMaps( f36_local1 )
	end
	local f36_local2 = LUI.DataSourceFromList.new( #f36_local1 )
	f36_local2.MakeDataSourceAtIndex = function ( f38_arg0, f38_arg1 )
		local f38_local0 = f36_arg0 .. ".map." .. f38_arg1 + 1
		local f38_local1 = f36_arg0[f38_arg1 + 1]
		local f38_local2 = LUI.DataSourceInGlobalModel.new( f38_local0 .. ".isOwned" )
		f38_local2:SetValue( f36_arg0, f38_local1.isOwned )
		return {
			name = LUI.DataSourceInGlobalModel.new( f38_local0 .. ".name", f38_local1.name ),
			desc = LUI.DataSourceInGlobalModel.new( f38_local0 .. ".desc", f38_local1.desc ),
			image = LUI.DataSourceInGlobalModel.new( f38_local0 .. ".image", f38_local1.image ),
			disabled = LUI.DataSourceInGlobalModel.new( f38_local0 .. ".disabled", f38_local1.disabled ),
			isOwned = f38_local2,
			ref = f38_local1.ref,
			listIndex = f38_arg1
		}
	end
	
	f36_local2.GetDefaultFocusIndex = function ()
		local f37_local0 = Dvar[0x54084D7CA2317BB]( "#x36d16f02578d0ee10" )
		for f37_local1 = 0, f36_arg0:GetCountValue( f36_arg0 ) - 1, 1 do
			local f37_local4 = f36_arg0:GetDataSourceAtIndex( f37_local1 )
			if f37_local4.ref == f37_local0 then
				return {
					x = 0,
					y = f37_local1
				}
			end
		end
	end
	
	return f36_local2
end

CP.GetMapImage = function ( f35_arg0 )
	local f35_local0 = CP.GetAllMapImages( f35_arg0 )
	return f35_local0[1]
end

CP.GetAllMapImages = function ( f34_arg0 )
	local f34_local0 = {
		nil,
		"loading_mp_generic_bg"
	}
	local f34_local1 = StringTable[0x2DCF0973239E909]( CSV.cpMapTable.file, CSV.cpMapTable.cols.ref, f34_arg0, CSV.cpMapTable.cols.loadingImage )
	if f34_local1 and 0 < #f34_local1 then
		f34_local0 = split( f34_local1, ";" )
	end
	return f34_local0
end

CP.GetEnabledClassicMissionsTable = function ()
	local f33_local0 = Dvar[0x54084D7CA2317BB]( "#x3fe817abcde12fdb2" )
	local f33_local1 = {}
	if 0 < #f33_local0 then
		f33_local1 = LUI.KeyValueSplit( string.gsub( f33_local0, " ", "" ), "," )
	end
	return f33_local1
end

CP.GetClassicSpecOpsMissionInfo = function ( f32_arg0 )
	return CSV.ReadRow( CSV.specOpsMissionTable, StringTable[0x8073B436CDE1BF]( CSV.specOpsMissionTable.file, CSV.specOpsMissionTable.cols.map, f32_arg0 ) )
end

CP.GetBestScoreForMap = function ( f31_arg0, f31_arg1 )
	local f31_local0 = Dvar[0x22EAAB59AA27E9B]( "#x35d1b982003b02538" )
	if f31_local0 then
		return f31_local0
	elseif f31_arg0 and 0 < #f31_arg0 and f31_arg1 then
		local f31_local1 = PlayerData[0x8B73907B55C4D71]( f31_arg1, CoD.StatsGroup.Coop )
		f31_local1 = f31_local1.ClassicSOBestScore[f31_arg0]
		if f31_local1 then
			return f31_local1:get()
		end
	end
	return 0
end

CP.GetStarsEarnedForMap = function ( f30_arg0, f30_arg1 )
	local f30_local0 = Dvar[0x22EAAB59AA27E9B]( "#x373cb71b43f5f04b3" )
	if f30_local0 then
		return f30_local0
	elseif f30_arg0 and 0 < #f30_arg0 and f30_arg1 then
		local f30_local1 = PlayerData[0x8B73907B55C4D71]( f30_arg1, CoD.StatsGroup.Coop )
		f30_local1 = f30_local1.ClassicSOStarCount[f30_arg0]
		if f30_local1 then
			return f30_local1:get()
		end
	end
	return 0
end

CP.GetTotalStarsEarned = function ( f29_arg0 )
	local f29_local0 = 0
	local f29_local1 = 0
	for f29_local5, f29_local6 in pairs( CP.GetEnabledClassicMissionsTable() ) do
		f29_local0 = f29_local0 + CP.GetStarsEarnedForMap( f29_local5, f29_arg0 )
		f29_local1 = f29_local1 + 3
	end
	return f29_local0, f29_local1
end

CP.GetStarUnlocksTable = function ()
	local f28_local0 = {}
	local f28_local1 = StringTable[0xFD4E49A34DD43AE]( CSV.specOpsRewards.file )
	for f28_local2 = 0, f28_local1 - 1, 1 do
		local f28_local5 = CSV.ReadRow( CSV.specOpsRewards, f28_local2 )
		f28_local5.lootReward = Challenge.GetLootReward( f28_local5.rewardID )
		table.insert( f28_local0, f28_local5 )
	end
	return f28_local0
end

CP.GetPlaylistReward = function ( f27_arg0, f27_arg1 )
	local f27_local0 = nil
	if f27_arg0 and f27_arg1 then
		local f27_local1 = tonumber( StringTable[0x2DCF0973239E909]( CSV.cpRewardTable.file, CSV.cpRewardTable.cols.uniqueIdentifier + f27_arg1, tostring( f27_arg0 ), CSV.cpRewardTable.cols.rewardID ) )
		if f27_local1 and 0 < f27_local1 then
			f27_local0 = Challenge.GetLootReward( f27_local1 )
		end
	end
	return f27_local0
end

CP.GetNextReward = function ( f26_arg0 )
	local f26_local0 = CP.GetStarUnlocksTable()
	for f26_local1 = 1, #f26_local0, 1 do
		local f26_local4 = f26_local0[f26_local1]
		if f26_arg0 < tonumber( f26_local4.stars ) then
			return f26_local4
		end
	end
end

CP.IsRaidPlaylistUnlocked = function ( f25_arg0, f25_arg1 )
	local f25_local0 = true
	if f25_arg0 == 100 then
		local f25_local1 = 0
		local f25_local2 = PlayerData[0x8B73907B55C4D71]( f25_arg1, CoD.StatsGroup.Coop )
		f25_local0 = f25_local2.raid_complete[f25_local1]:get()
	end
	if f25_local0 == 0 then
		return false
	else
		return true
	end
end

CP.TimeTextFormat = function ( f24_arg0, f24_arg1 )
	local f24_local0 = math.floor( f24_arg0 / 3600 )
	if 0 < f24_local0 then
		local f24_local1 = math.floor( f24_arg0 / 60 - f24_local0 * 60 )
		return Engine[0xED84C33EC5F01EA]( "LUA_MENU_CP/STATS_TIME_PLAYED_HOURS", string.format( "%.2d", f24_local0 ), string.format( "%.2d", f24_local1 ), string.format( "%.2d", f24_arg0 - f24_local0 * 60 * 60 - f24_local1 * 60 ) )
	else
		local f24_local1 = math.floor( f24_arg0 / 60 )
		return Engine[0xED84C33EC5F01EA]( "LUA_MENU_CP/STATS_TIME_PLAYED_MINUTES", string.format( "%.2d", f24_local1 ), string.format( "%.2d", math.floor( f24_arg0 - f24_local1 * 60 ) ) )
	end
end

CP.PlayFrontendMusic = function ()
	if not Engine[0xCA085C21FCBD7CA]() then
		return 
	else
		local f23_local0 = Engine[0x45B054C920178E9]()
		assert( f23_local0 )
		local f23_local1 = CP.GetMusic( f23_local0 )
		assert( f23_local1 )
		Engine[0x8CEE785C0D63D7E]( f23_local1 )
	end
end

CP.StartEMPGlitch = function ( f22_arg0 )
	f22_arg0:SetGlitchAmount( 0 )
end

CP.StopEMPGlitch = function ( f21_arg0 )
	f21_arg0:SetGlitchAmount( 0 )
end

CP.InitGameTypeToSurvival = function ()
	MatchRules[0x9550565068844CB]( "gametype", CP.SPEC_OPS )
end

CP.RunDefaultConfig = function ( f19_arg0 )
	assert( Engine[0xCA085C21FCBD7CA](), "Running Aliens Config when not in aliens mode\n" )
	if Engine[0xCA085C21FCBD7CA]() then
		Engine[0x7C75E608EA39B5C]( CPConfig.default_aliens, f19_arg0 )
	end
end

CP.GetMusic = function ( f18_arg0 )
	return "damned"
end

CP.LobbyGetIntroVideo = function ()
	local f17_local0 = StringTable[0x2DCF0973239E909]( CSV.CPLevels.file, CSV.CPLevels.cols.ref, Dvar[0x54084D7CA2317BB]( "#x36d16f02578d0ee10" ), CSV.CPLevels.cols.introBink )
	if f17_local0 and 0 < #f17_local0 then
		return f17_local0
	else
		return nil
	end
end

CP.PlayIntroVideo = function ( f16_arg0, f16_arg1, f16_arg2 )
	local f16_local0 = {
		video = f16_arg1
	}
	LUI.FlowManager.RequestPopupMenu( nil, "CPVideoOverlayPopup", false, f16_arg0, false, {
		videoRef = f16_arg1,
		endEvent = f16_arg2
	} )
end

CP.VideoOverlayPop = function ()
	Engine[0x3DACD106DDC0D71]()
end

CP.GetMapImage = function ( f14_arg0 )
	local f14_local0 = CP.GetAllMapImages( f14_arg0 )
	return f14_local0[1]
end

CP.GetAllMapImages = function ( f13_arg0 )
	local f13_local0 = {
		nil,
		"loading_mp_generic_bg"
	}
	local f13_local1 = StringTable[0x2DCF0973239E909]( CSV.cpMapTable.file, CSV.cpMapTable.cols.ref, f13_arg0, CSV.cpMapTable.cols.loadingImage )
	if f13_local1 and 0 < #f13_local1 then
		f13_local0 = split( f13_local1, ";" )
	end
	return f13_local0
end

CP.GetMapImageFromMissionName = function ( f12_arg0 )
	local f12_local0 = "loading_mp_generic_bg"
	local f12_local1 = StringTable[0x2DCF0973239E909]( CSV.cpMapTable.file, CSV.cpMapTable.cols.cpMissionName, f12_arg0, CSV.cpMapTable.cols.loadingImage )
	if f12_local1 and 0 < #f12_local1 then
		local f12_local2 = split( f12_local1, ";" )
		f12_local0 = f12_local2[1]
	end
	return f12_local0
end

CP.CurrencySubtract = function ( f11_arg0, f11_arg1 )
	local f11_local0 = CP.CurrencyGet( f11_arg0 ) - f11_arg1
	local f11_local1 = PlayerData[0x8B73907B55C4D71]( f11_arg0, LOADOUT.GetLoadoutStatsGroup() )
	f11_local1.squadMembers.currencyWaveMode:set( f11_local0 )
end

CP.CurrencyGet = function ( f10_arg0 )
	return DataSources.alwaysLoaded.CP.loadOut.currencyWaveLua:GetValue( f10_arg0 )
end

CP.ScriptCurrencyGet = function ( f9_arg0 )
	return DataSources.inGame.CP.currentPlayerCash:GetValue( f9_arg0 )
end

CP.ScriptSalvageGet = function ( f8_arg0 )
	return DataSources.inGame.CP.currentPlayerSalvage:GetValue( f8_arg0 )
end

CP.ScriptSacrificialHeartGet = function ( f7_arg0 )
	return DataSources.inGame.CP.currentPlayerSacrificialHeart:GetValue( f7_arg0 )
end

CP.HasSeenCinematic = function ( f6_arg0, f6_arg1 )
	local f6_local0 = tonumber( StringTable[0x2DCF0973239E909]( CSV.cpCinematics.file, CSV.cpCinematics.cols.ref, f6_arg1, CSV.cpCinematics.cols.index ) )
	local f6_local1 = PlayerData[0x8B73907B55C4D71]( f6_arg0, CoD.StatsGroup.Coop )
	return f6_local1.has_seen_cinematic[f6_local0]:get()
end

CP.HasSeenIntro = function ( f5_arg0, f5_arg1 )
	local f5_local0 = PlayerData[0x8B73907B55C4D71]( f5_arg0, CoD.StatsGroup.Coop )
	return f5_local0.has_seen_cinematic[f5_arg1]:get()
end

CP.SetHasSeenCinematic = function ( f4_arg0, f4_arg1 )
	local f4_local0 = PlayerData[0x8B73907B55C4D71]( f4_arg0, CoD.StatsGroup.Coop )
	f4_local0.has_seen_cinematic[f4_arg1]:set( 1 )
end

CP.SetHasSeenIntroVideo = function ( f3_arg0, f3_arg1 )
	local f3_local0 = tonumber( StringTable[0x2DCF0973239E909]( CSV.cpCinematics.file, CSV.cpCinematics.cols.ref, f3_arg1, CSV.cpCinematics.cols.index ) )
	local f3_local1 = PlayerData[0x8B73907B55C4D71]( f3_arg0, CoD.StatsGroup.Coop )
	f3_local1.has_seen_cinematic[f3_local0]:set( 1 )
end

CP.CheckpointRefreshTimer = function ( f1_arg0, f1_arg1 )
	local f1_local0 = f1_arg0:Wait( 1000, true )
	local f1_local1 = PlayerData[0x8B73907B55C4D71]( f1_arg1, CoD.StatsGroup.Coop )
	f1_local1 = f1_local1.checkpointReached.week:get()
	f1_local0.onComplete = function ()
		return CP.CheckpointRefreshTimer( f1_arg0, f1_arg0 )
	end
	
	local f1_local2 = math.floor( (Engine[0xF16311E3FCA3DCF]() - CP.CheckpointResetStartUTC) / CP.CheckpointResetPeriodUTC )
	if f1_local1 < f1_local2 then
		local f1_local3 = PlayerData[0x8B73907B55C4D71]( f1_arg1, CoD.StatsGroup.Coop )
		f1_local3.checkpointReached.cp_raid_complex:set( 0 )
		f1_local3 = PlayerData[0x8B73907B55C4D71]( f1_arg1, CoD.StatsGroup.Coop )
		f1_local3.checkpointReached.cp_dntsk_raid:set( 0 )
		f1_local3 = PlayerData[0x8B73907B55C4D71]( f1_arg1, CoD.StatsGroup.Coop )
		f1_local3.checkpointReached.week:set( f1_local2 )
		f1_local1 = f1_local2
	end
end

