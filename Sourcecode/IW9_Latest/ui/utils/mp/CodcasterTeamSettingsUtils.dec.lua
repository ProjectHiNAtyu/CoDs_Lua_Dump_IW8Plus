-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
CodcasterTeamSettingsUtils = CodcasterTeamSettingsUtils or {}
CodcasterTeamSettingsUtils.LocalizeTeamNameStringsIfUnlocalized = function ( f29_arg0 )
	local f29_local0 = {
		Teams.allies,
		Teams.axis
	}
	local f29_local1 = {
		nil,
		"name",
		"acronym"
	}
	for f29_local10, f29_local11 in ipairs( f29_local0 ) do
		local f29_local12 = Engine[0xCA1EEE77E761DD8]( f29_local11 )
		for f29_local5, f29_local6 in ipairs( f29_local1 ) do
			local f29_local8 = "codcaster_team_" .. f29_local12 .. "_" .. f29_local6
			local f29_local9 = CODCASTER_SETTINGS.GetSettingValue( f29_arg0, f29_local8 )
			if CODCASTER.TEAM_NAMES_TO_LOCALIZE[f29_local9] then
				CODCASTER_SETTINGS.SetSettingValue( f29_arg0, f29_local8, Engine[0xED84C33EC5F01EA]( f29_local9 ), CODCASTER_SETTINGS.SETTINGS_CHANGE_ORIGIN.TEAM_IDENTITY_MENU )
			end
		end
	end
end

CodcasterTeamSettingsUtils.PrepareDataForSettingsMenu = function ( f28_arg0, f28_arg1, f28_arg2 )
	local f28_local0 = f28_arg1.teamId:GetValue( f28_arg0 )
	local f28_local1 = CODCASTER.GetOpposingTeam( f28_local0 )
	local f28_local2 = Engine[0xCA1EEE77E761DD8]( f28_local0 )
	local f28_local3 = Engine[0xCA1EEE77E761DD8]( f28_local1 )
	local f28_local4 = "codcaster_team_" .. f28_local2
	local f28_local5 = "codcaster_team_" .. f28_local3
	local f28_local6 = CODCASTER_SETTINGS.GetSettingValue( f28_arg0, f28_local4 .. "_icon" )
	local f28_local7 = CODCASTER_SETTINGS.GetSettingValue( f28_arg0, f28_local5 .. "_icon" )
	DataSources.frontEnd.codcaster.teamSettings.logos.selectedIndex:SetValue( f28_arg0, f28_local6 )
	DataSources.frontEnd.codcaster.teamSettings.logos.lockedIndex:SetValue( f28_arg0, f28_local7 )
	DataSources.frontEnd.codcaster.teamSettings.pointers.teamDataSource = f28_arg1
	DataSources.frontEnd.codcaster.teamSettings.pointers.otherTeamDataSource = f28_arg2
	EsportsDataSources.InitTeamSettingsTeamDataSources( f28_arg0, f28_arg1, f28_arg2, f28_local0 )
	local f28_local8 = CODCASTER_SETTINGS.GetSettingValue( f28_arg0, f28_local4 .. "_color1" )
	local f28_local9 = CODCASTER_SETTINGS.GetSettingValue( f28_arg0, f28_local4 .. "_color2" )
	local f28_local10 = CODCASTER_SETTINGS.GetSettingValue( f28_arg0, f28_local4 .. "_color3" )
	DataSources.frontEnd.codcaster.teamSettings.colorSelectors.color1.selectedColor:SetValue( f28_arg0, f28_local8 )
	DataSources.frontEnd.codcaster.teamSettings.colorSelectors.color2.selectedColor:SetValue( f28_arg0, f28_local9 )
	DataSources.frontEnd.codcaster.teamSettings.colorSelectors.color3.selectedColor:SetValue( f28_arg0, f28_local10 )
	local f28_local11 = DataSources.frontEnd.codcaster.teamSettings.uiTeamData
	local f28_local12 = "team"
	f28_local11 = f28_local11["team" .. f28_local0].editedColors
	DataSources.frontEnd.codcaster.teamSettings.colorSelectors.color1.editedColor = f28_local11.color1
	DataSources.frontEnd.codcaster.teamSettings.colorSelectors.color2.editedColor = f28_local11.color2
	DataSources.frontEnd.codcaster.teamSettings.colorSelectors.color3.editedColor = f28_local11.color3
	DataSources.frontEnd.codcaster.teamSettings.colorSelectors.color1.lockedColor = f28_arg2.colors.primary
	DataSources.frontEnd.codcaster.teamSettings.colorSelectors.color2.lockedColor = f28_arg1.colors.primary
	DataSources.frontEnd.codcaster.teamSettings.colorSelectors.color3.lockedColor = f28_arg1.colors.primary
	DataSources.frontEnd.codcaster.teamSettings.colorSelectors.color3.isDisabled = DataSources.frontEnd.codcaster.teamSettings.uiTeamData["team" .. f28_local0].isSubstituteDisabled
end

CodcasterTeamSettingsUtils.ResetAllSettings = function ( f27_arg0 )
	for f27_local3, f27_local4 in pairs( CODCASTER.TEAM_SETTINGS_DEFAULT_VALUES ) do
		CodcasterTeamSettingsUtils.ResetSetting( f27_arg0, f27_local3 )
	end
	BuiltInCodcaster[0xA8F030AC6F78E41]( f27_arg0 )
end

CodcasterTeamSettingsUtils.ResetSetting = function ( f26_arg0, f26_arg1, f26_arg2 )
	local f26_local0 = DataSources.frontEnd.codcaster.teamSettings.pointers.teamDataSource.isFirst:GetValue( f26_arg0 )
	local f26_local1
	if f26_local0 then
		f26_local1 = Teams.allies
		if not f26_local1 then
		
		else
			local f26_local2
			if f26_local0 then
				f26_local2 = "allies"
			else
				f26_local2 = "axis"
			end
			local f26_local3 = "codcaster_team_" .. f26_local2 .. "_" .. f26_arg1
			local f26_local4 = CODCASTER.TEAM_SETTINGS_DEFAULT_VALUES[f26_arg1]( f26_local1 )
			local f26_local5 = DataSources.frontEnd.codcaster.teamSettings.uiTeamData
			local f26_local6 = "team"
			if f26_arg1 == "color1" and f26_local5["team" .. f26_local1].isSubstituteDisabled:GetValue( f26_arg0 ) then
				CodcasterTeamSettingsUtils.ResetSetting( f26_arg0, "color3", true )
			end
			CODCASTER_SETTINGS.SetSettingValue( f26_arg0, f26_local3, f26_local4, CODCASTER_SETTINGS.SETTINGS_CHANGE_ORIGIN.TEAM_IDENTITY_MENU )
			if f26_arg2 then
				BuiltInCodcaster[0xA8F030AC6F78E41]( f26_arg0 )
			end
		end
	end
	f26_local1 = Teams.axis
end

CodcasterTeamSettingsUtils.SwapTeamSetting = function ( f25_arg0, f25_arg1 )
	local f25_local0 = CODCASTER_SETTINGS.GetSettingValue( f25_arg1, "codcaster_team_allies_" .. f25_arg0 )
	CODCASTER_SETTINGS.SetSettingValue( f25_arg1, "codcaster_team_allies_" .. f25_arg0, CODCASTER_SETTINGS.GetSettingValue( f25_arg1, "codcaster_team_axis_" .. f25_arg0 ), CODCASTER_SETTINGS.SETTINGS_CHANGE_ORIGIN.TEAM_IDENTITY_MENU )
	CODCASTER_SETTINGS.SetSettingValue( f25_arg1, "codcaster_team_axis_" .. f25_arg0, f25_local0, CODCASTER_SETTINGS.SETTINGS_CHANGE_ORIGIN.TEAM_IDENTITY_MENU )
end

CodcasterTeamSettingsUtils.SwapTeamsSettings = function ( f24_arg0 )
	for f24_local3, f24_local4 in pairs( CODCASTER.TEAM_SETTINGS_DEFAULT_VALUES ) do
		CodcasterTeamSettingsUtils.SwapTeamSetting( f24_local3, f24_arg0 )
	end
	BuiltInCodcaster[0xA8F030AC6F78E41]( f24_arg0 )
end

CodcasterTeamSettingsUtils.EditText = function ( f22_arg0, f22_arg1, f22_arg2, f22_arg3, f22_arg4, f22_arg5, f22_arg6 )
	if IsLanguageArabic() then
		LUI.FlowManager.RequestPopupMenu( nil, "CodcasterTeamNameArabicPopup", false, f22_arg1, false )
	else
		OSK[0xC1C15C14B75864C]( f22_arg1, f22_arg3, f22_arg2[f22_arg4]:GetValue( f22_arg1 ), f22_arg6, true, true, false, function ( f23_arg0, f23_arg1, f23_arg2 )
			if f23_arg1 and f23_arg1 ~= "" then
				local f23_local0 = f22_arg0.isFirst:GetValue( f23_arg0 )
				CODCASTER_SETTINGS.SetSettingValue( f23_arg0, "codcaster_team_" .. Engine[0xCA1EEE77E761DD8]( f22_arg0.teamId:GetValue( f23_arg0 ) ) .. f22_arg0, f23_arg1, CODCASTER_SETTINGS.SETTINGS_CHANGE_ORIGIN.TEAM_IDENTITY_MENU )
				f22_arg0[f22_arg0]:SetValue( f23_arg0, f23_arg1 )
			end
		end, Enum[0x1F1F125CD9CA94A][0x589A3C1CF1B1D38] )
	end
end

CodcasterTeamSettingsUtils.TeamIdentityOptionsToShow = {
	nil,
	"CodcasterOption_TeamIdentityCycling",
	"CodcasterOption_TeamIdentityTeam1",
	"CodcasterOption_TeamIdentityTeam2",
	"CodcasterOption_TeamIdentitySwap"
}
CodcasterTeamSettingsUtils.TeamSettingOptions = {
	SUBSTITUTE_COLOR = 4,
	NAME = 1,
	SECONDARY_COLOR = 5,
	ACRONYM = 2,
	PRIMARY_COLOR = 3
}
CodcasterTeamSettingsUtils.TeamSettingsOptionsToShow = {
	nil,
	"CodcasterOption_TeamSettingsName",
	"CodcasterOption_TeamSettingsAcronym",
	"CodcasterOption_TeamSettingPrimaryColor",
	"CodcasterOption_TeamSettingSubstituteColor",
	"CodcasterOption_TeamSettingSecondaryColor"
}
CodcasterTeamSettingsUtils.colorSettingsSelectionData = {
	ColorSelectionData = {
		PrimaryGrid = {
			customColorSettingName = "color1",
			teamSettingColorId = 3,
			swatches = SWATCHES[0x71B58D76D317FFC]
		},
		SubstituteGrid = {
			customColorSettingName = "color3",
			teamSettingColorId = 4,
			swatches = SWATCHES[0x4D5EE7CD2843B94]
		},
		SecondaryGrid = {
			customColorSettingName = "color2",
			teamSettingColorId = 5,
			swatches = SWATCHES[0xE097D16A2F47DF4]
		}
	}
}
CodcasterTeamSettingsUtils.SetUpTeamSettingsColorSelectionWidget = function ( f19_arg0, f19_arg1, f19_arg2 )
	f19_arg0.SetCurrentValue = function ( f21_arg0, f21_arg1, f21_arg2, f21_arg3 )
		f21_arg0.defaultValue = f21_arg2
		if f21_arg0:GetCurrentMenu() then
			f21_arg0:dispatchEventToCurrentMenu( {
				name = "color_picker_selected",
				colorRGB = f19_arg0.swatches["color" .. f19_arg0.swatchColorIndex],
				teamSettingColorId = f19_arg0.teamSettingColorId,
				customColorSettingName = f19_arg0.customColorSettingName
			} )
		end
		if f21_arg0.onRefresh then
			f21_arg0:onRefresh( f21_arg1, f21_arg2, f21_arg3 )
		end
	end
	
	f19_arg0.ResetFunction = function ( f20_arg0, f20_arg1 )
		f20_arg0:SetCurrentValue( f20_arg0._controllerIndex, f20_arg0.defaultValueGetter( f20_arg0._controllerIndex ) )
		f20_arg0:onReset( f20_arg0._controllerIndex )
	end
	
	f19_arg0.PreviewButton.swatches = f19_arg2.swatches
	f19_arg0.PreviewButton.teamSettingColorId = f19_arg2.teamSettingColorId
	f19_arg0.PreviewButton.customColorSettingName = f19_arg2.customColorSettingName
end

CodcasterTeamSettingsUtils.SetUpTeamSettingsPreviewButton = function ( f2_arg0, f2_arg1 )
	local f2_local0 = function ( f18_arg0, f18_arg1, f18_arg2 )
		f18_arg0._isColorPickerOpened = false
		f18_arg0:dispatchEventToCurrentMenu( {
			allowCloseMenu = true,
			name = "allow_close"
		} )
		local f18_local0 = LUI.FlowManager.GetScopedData( f18_arg0 )
		f18_local0._colorSelectionPreviousFocusedPosition = nil
		if f18_arg0.ColorPickerGrid then
			f18_arg0.ColorPickerGrid:closeTree()
			f18_arg0.ColorPickerGrid = nil
		end
		if f18_arg0.ClosingBackground then
			f18_arg0.ClosingBackground:closeTree()
			f18_arg0.ClosingBackground = nil
		end
	end
	
	local f2_local1 = function ( f17_arg0, f17_arg1, f17_arg2, f17_arg3 )
		f2_arg0( f17_arg0, f17_arg1, f17_arg2 )
		local f17_local0 = f17_arg0:getParent()
		f17_local0:processEvent( {
			name = "arrow_close"
		} )
		if not f17_arg2.mouse then
			local f17_local1 = f17_arg0:GetCurrentMenu()
			ACTIONS.GainFocus( f17_local1.OptionWindow, "buttonList", f17_arg1 )
		end
		if f17_arg0.onRefresh then
			f17_arg0:onRefresh( f17_arg1, f17_arg0.defaultValue, f17_arg3 )
		end
	end
	
	local f2_local2 = function ( f15_arg0, f15_arg1, f15_arg2, f15_arg3 )
		local ClosingBackground = MenuBuilder.BuildRegisteredType( "MouseButtonArea", {
			controllerIndex = f15_arg2
		} )
		ClosingBackground.id = "closingBackground"
		ClosingBackground:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
		ACTIONS.ScaleFullscreen( ClosingBackground )
		f15_arg1:addElement( ClosingBackground )
		f15_arg1.ClosingBackground = ClosingBackground
		
		f15_arg0.ClosingBackground = ClosingBackground
		ClosingBackground:registerEventHandler( "button_action", function ( element, event )
			if f15_arg0._isColorPickerOpened then
				f15_arg0( f15_arg0, f15_arg0, f15_arg0 )
			end
			return true
		end )
	end
	
	local f2_local3 = function ( f9_arg0, f9_arg1, f9_arg2 )
		local f9_local0 = function ( f11_arg0, f11_arg1 )
			f11_arg0._gridColorsData = {}
			local f11_local0 = 0
			for f11_local4 in pairs( f9_arg0.swatches ) do
				f11_local0 = f11_local0 + 1
				f11_arg0._gridColorsData[#f11_arg0._gridColorsData + 1] = {
					colorRGB = f9_arg0.swatches["color" .. f11_local0]
				}
			end
			f11_arg0.ColorsGrid:SetNumChildren( #f11_arg0._gridColorsData )
			f11_arg0.ColorsGrid:TouchMouseSetActiveToDefaultFocusMenuCreate( f11_arg1 )
			if f9_arg0.selectedColorIndex ~= nil then
				f11_arg0.ColorsGrid:SetDefaultFocus( f11_arg0.ColorsGrid:GetPositionForIndex( f9_arg0.selectedColorIndex - 1 ) )
			end
			f11_arg0.ColorsGrid:SetRefreshChild( function ( f12_arg0, f12_arg1, f12_arg2 )
				local f12_local0 = f11_arg0.ColorsGrid:GetContentIndex( f12_arg1, f12_arg2 )
				local f12_local1 = f11_arg0._gridColorsData[f12_local0 + 1]
				f12_arg0.row = f12_arg2
				f12_arg0.column = f12_arg1
				f12_arg0.index = f12_local0
				f12_arg0.Color:SetRGBFromTable( f12_local1.colorRGB )
				f12_arg0.colorData = f12_local1
				f12_arg0.teamSettingColorId = f11_arg0.teamSettingColorId
				f12_arg0.customColorSettingName = f11_arg0.customColorSettingName
				if f11_arg0.ColorsGrid._defaultFocus and f12_arg0.column == f11_arg0.ColorsGrid._defaultFocus.x and f12_arg0.row == f11_arg0.ColorsGrid._defaultFocus.y then
					f12_arg0:SetColorPip()
				end
				f12_arg0:registerEventHandler( "button_action", function ( element, event )
					f12_arg0.selectedColorIndex = element.index
					f12_arg0.ColorsGrid:SetDefaultFocus( f12_arg0.ColorsGrid:GetPositionForIndex( f12_arg0.selectedColorIndex + 1 ) )
					element:dispatchEventToCurrentMenu( {
						name = "color_picker_selected",
						colorRGB = element:GetButtonRGB(),
						teamSettingColorId = element.teamSettingColorId,
						customColorSettingName = element.customColorSettingName
					} )
					element:dispatchEventToCurrentMenu( {
						name = "closeColorPicker"
					} )
				end )
				f12_arg0:registerEventHandler( "button_over", function ( element, event )
					ACTIONS.AnimateSequence( element, "ButtonOver" )
				end )
			end )
		end
		
		local f9_local1 = function ( f10_arg0, f10_arg1 )
			f10_arg0:dispatchEventToCurrentMenu( {
				name = "color_picker_selected",
				teamSettingColorId = f9_arg0.teamSettingColorId,
				customColorSettingName = f9_arg0.customColorSettingName
			} )
			f10_arg0:dispatchEventToCurrentMenu( {
				name = "closeColorPicker"
			} )
		end
		
		f9_arg0._swatches = f2_arg0.swatches
		local f9_local2
		if DataSources.frontEnd.codcaster.teamSettings.pointers.teamDataSource.isFirst:GetValue( f9_arg1 ) then
			f9_local2 = Teams.allies
			if not f9_local2 then
			
			else
				f9_arg0.DefaultColorPreview:SetRGBFromInt( CODCASTER.TEAM_SETTINGS_DEFAULT_VALUES[f2_arg0.customColorSettingName]( f9_local2 ) )
				f9_local0( f9_arg0, f9_arg1 )
				f9_arg0.ResetToDefault = f9_local1
				f9_arg0.Set = f9_local1
			end
		end
		f9_local2 = Teams.axis
	end
	
	CodcasterTeamSettingsUtils.isSameColor = function ( f8_arg0, f8_arg1 )
		local f8_local0
		if math.floor( f8_arg0.r * 1000 ) ~= math.floor( f8_arg1.r * 1000 ) or math.floor( f8_arg0.g * 1000 ) ~= math.floor( f8_arg1.g * 1000 ) or math.floor( f8_arg0.b * 1000 ) ~= math.floor( f8_arg1.b * 1000 ) then
			f8_local0 = false
		else
			f8_local0 = true
		end
		return f8_local0
	end
	
	local f2_local4 = function ( f5_arg0, f5_arg1, f5_arg2 )
		local f5_local0 = f5_arg0:GetCurrentMenu()
		if not f5_arg0.ClosingBackground then
			f2_arg0( f5_arg0, f5_local0, f5_arg1, f5_arg2 )
		end
		local f5_local1 = 318
		local f5_local2 = 140
		local f5_local3 = 241
		local f5_local4 = 10
		local f5_local5, f5_local6, f5_local7, f5_local8 = f2_arg0._GetPreviewButtonLocalPosition( f5_arg0, f5_local0, f5_local2 )
		local ColorPickerGrid = MenuBuilder.BuildRegisteredType( "ColorPickerGrid" )
		ColorPickerGrid.id = "ColorPickerGrid"
		ColorPickerGrid.teamSettingColorId = f2_arg0.teamSettingColorId
		ColorPickerGrid.customColorSettingName = f2_arg0.customColorSettingName
		local f5_local10 = 0
		local f5_local11, f5_local12, f5_local13 = f2_arg0.ColorPreview:getCurrentRGBA()
		local f5_local14 = {
			r = f5_local11,
			g = f5_local12,
			b = f5_local13
		}
		for f5_local18 in pairs( f2_arg0.swatches ) do
			f5_local10 = f5_local10 + 1
			if CodcasterTeamSettingsUtils.isSameColor( f5_local14, f2_arg0.swatches["color" .. f5_local10] ) then
				ColorPickerGrid.selectedColorIndex = f5_local10
				break
			end
		end
		f2_arg0( ColorPickerGrid, f5_arg1, {
			controllerIndex = f5_arg1,
			colorIndexProfileSettingName = f5_arg0.colorIndexProfileSettingName,
			colorType = f5_arg0.colorType
		} )
		ColorPickerGrid:SetAlpha( 1 )
		ColorPickerGrid:SetVisibility( LUI.Visibility.Visible )
		ColorPickerGrid:SetAnchorsAndPosition( 0, 1, 0, 1, f5_local5 + f5_local3, f5_local5 + f5_local3 + f5_local1, f5_local7 - f5_local4, f5_local7 - f5_local4 + f5_local2 )
		f5_local0:addElement( ColorPickerGrid )
		f5_arg0.ColorPickerGrid = ColorPickerGrid
		
		ColorPickerGrid:registerEventHandler( "gamepad_button", function ( element, event )
			if event.button == "secondary" then
				f5_arg0( f5_arg0, f5_arg0, f5_arg0 )
				return true
			else
				
			end
		end )
		ColorPickerGrid:registerEventHandler( "closeColorPicker", function ( element, event )
			f5_arg0( f5_arg0, f5_arg0, f5_arg0 )
			return true
		end )
	end
	
	f2_arg0:registerEventHandler( "button_action", function ( element, event )
		if not element._isColorPickerOpened then
			f2_arg0._ShowColorPickerGrid( element, element._controllerIndex, event )
			return true
		else
			
		end
	end )
	f2_arg0:registerEventHandler( "remove_overlays", function ( element, event )
		if f2_arg0._isColorPickerOpened then
			f2_arg0( element, f2_arg0 )
		end
	end )
	f2_arg0._CreateColorPickerGrid = f2_local4
end

CodcasterTeamSettingsUtils.SetUpTeamSettingColorSelection = function ( f1_arg0, f1_arg1, f1_arg2 )
	CodcasterTeamSettingsUtils.SetUpTeamSettingsColorSelectionWidget( f1_arg0, f1_arg1, f1_arg2 )
	CodcasterTeamSettingsUtils.SetUpTeamSettingsPreviewButton( f1_arg0.PreviewButton, f1_arg1 )
end

