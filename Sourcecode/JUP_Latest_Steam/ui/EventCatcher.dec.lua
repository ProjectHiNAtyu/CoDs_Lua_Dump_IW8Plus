-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:02
module( ..., package.seeall )
local f0_local0 = hashset( {
	nil,
	"togglescores",
	"game_message",
	"obituary",
	"objectives_update",
	"objectives_ping",
	"target_markers_update",
	"playerstate_client_changed",
	"update_crm_data",
	"level_load",
	"prep_bootup",
	"bootup_hud",
	"key_bindings_update",
	"social_challenge_update",
	"send_toast_notification",
	"add_message_splash_manager",
	"add_bullet_hit_marker",
	"opening_quick_access_menu",
	"closing_quick_access_menu",
	"kbm_notification_prompt_answer",
	"br_squad_message",
	"callout_marker_pings_update",
	"input_context_changed",
	"bnet_online_status_set",
	"render_damage_indicators",
	"safe_zone_marker_update",
	"notification_event",
	"remove_menu_stack",
	"playagain_members",
	"update_faction_mission_timer",
	"complete_faction_mission_timer",
	"ping_update",
	"hide_armor",
	"input_locked",
	"update_lobby_count",
	"subtitle_add_entry",
	"prematch_countdown_can_show",
	"refresh_sent_party_invitations",
	"update_text_scaling",
	"audio_visualizer_update",
	"restore_playmenu_focus"
} )
function isDirectDispatchEventType( f15_arg0 )
	return f0_local0[f15_arg0]
end

local f0_local1 = hashset( {
	nil,
	0x6CB7298DA32C26C,
	0xB58AF5345F2C1C,
	0xF1F17FB3ED5E08B,
	0xF71D957B7961BCA,
	0x7C1042F7791C409,
	0x5564E1B4A11D758,
	0x6845423D89BE7A6
} )
function IsDirectDispatchEventRegistered( f14_arg0, f14_arg1 )
	return f14_arg0.direct_dispatch[f14_arg1] ~= nil
end

function isDirectDispatchEventTypeBlacklisted( f13_arg0 )
	if type( f13_arg0 ) == "string" then
		f13_arg0 = 0x0 .. f13_arg0
	end
	return f0_local0[f13_arg0]
end

function new()
	local f12_local0 = {}
	setmetatable( f12_local0, {
		__index = _M
	} )
	f12_local0.direct_dispatch = XHash.SetAutoXHashMetatable( {}, 0, XHash.AssertOnEventHandlerStringKey )
	f12_local0.omnvar_update = {}
	return f12_local0
end

function setupRoot( f11_arg0, f11_arg1 )
	f11_arg1:registerEventHandler( "omnvar_update", omnvarUpdateDispatcher )
end

function ShouldDirectDispatchAllEvents()
	return Dvar[0x9E5BE3B4BBA4E0E]( 0x8E880DE04A8243A ) == true
end

local f0_local2 = function ( f7_arg0, f7_arg1, f7_arg2 )
	if Engine[0x2DA54CF5D6B7F02]() then
		return function ()
			local f9_local0 = debug.getinfo( f7_arg0 )
			f9_local0 = f9_local0.source
			local f9_local1 = ":"
			local f9_local2 = debug.getinfo( f7_arg0 )
			return f9_local0 .. f9_local1 .. f9_local2.linedefined
		end
		
	else
		return function ()
			local f8_local0 = "EventCatcher:"
			local f8_local1
			if String.IsNilOrEmpty( f7_arg0 ) then
				f8_local1 = ""
			else
				f8_local1 = f7_arg0 .. ":"
			end
			return f8_local0 .. f8_local1 .. tostring( f7_arg0 )
		end
		
	end
end

function registerOmnvarHandler( f6_arg0, f6_arg1, f6_arg2, f6_arg3 )
	local f6_local0 = f6_arg0.omnvar_update
	local f6_local1 = f6_arg0.omnvar_update[f6_arg2]
	if not f6_local1 then
		f6_local1 = Table.CreateWeakKeyTable()
	end
	f6_local0[f6_arg2] = f6_local1
	f6_arg0.omnvar_update[f6_arg2][f6_arg1] = f6_arg3
end

function deregisterOmnvarHander( f5_arg0, f5_arg1, f5_arg2 )
	if f5_arg0.omnvar_update[f5_arg2] and f5_arg0.omnvar_update[f5_arg2][f5_arg1] then
		f5_arg0.omnvar_update[f5_arg2][f5_arg1] = nil
	end
end

function omnvarUpdateDispatcher( f4_arg0, f4_arg1 )
	local f4_local0 = f4_arg0.eventCatcher.omnvar_update[f4_arg1.omnvar]
	if f4_local0 then
		for f4_local4, f4_local5 in pairs( f4_local0 ) do
			if not f4_local4.__gccollected and not f4_local4:IsClosed() then
				Engine[0xD75F5E555D60E1]( f0_local0( "omnvar_" .. f4_arg1.omnvar, f4_local4.id, f4_local5 ) )
				f4_local5( f4_local4, f4_arg1 )
				Engine[0x4D47DEF7D5ED4B9]()
			end
		end
	end
	return true
end

function registerDirectDispatchHandler( f3_arg0, f3_arg1, f3_arg2, f3_arg3, f3_arg4 )
	local f3_local0 = f3_arg0.direct_dispatch[f3_arg3]
	if not f3_local0 then
		f3_arg1:registerEventHandler( f3_arg3, directDispatcher )
		f3_local0 = Table.CreateWeakKeyValueTable()
		f3_arg0.direct_dispatch[f3_arg3] = f3_local0
	end
	f3_local0[f3_arg2] = f3_arg4
end

function deregisterDirectDispatchHandler( f2_arg0, f2_arg1, f2_arg2, f2_arg3 )
	local f2_local0 = f2_arg0.direct_dispatch[f2_arg3]
	if f2_local0 then
		f2_local0[f2_arg2] = nil
	end
	if f2_local0 and Table.IsEmpty( f2_local0 ) then
		f2_arg0.direct_dispatch[f2_arg3] = nil
		f2_arg1:deregisterEventHandler( f2_arg3 )
	end
end

function directDispatcher( f1_arg0, f1_arg1 )
	local f1_local0 = f1_arg0.eventCatcher.direct_dispatch[f1_arg1.name]
	if f1_local0 and not f1_arg1.isDispatchToParent then
		for f1_local4, f1_local5 in pairs( f1_local0 ) do
			if not f1_local4.__gccollected and not f1_local4:IsClosed() then
				Engine[0xD75F5E555D60E1]( f0_local0( f1_arg1.name, f1_local4.id, f1_local5 ) )
				f1_local5( f1_local4, f1_arg1 )
				Engine[0x4D47DEF7D5ED4B9]()
			end
		end
	end
	return true
end

LockTable( _M )
