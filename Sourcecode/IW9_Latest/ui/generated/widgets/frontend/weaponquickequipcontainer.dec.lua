-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
module( ..., package.seeall )
require( "ui.generated.widgets.frontend.weapons.loadout.loadouttabbacker" )
require( "ui.generated.widgets.frontend.weapons.loadout.loadoutcustomizationbuttons" )
require( "ui.generated.widgets.frontend.weapons.loadout.loadoutbutton" )
require( "ui.generated.widgets.scrollbar.horizontalscrollbar" )
require( "ui.generated.widgets.frontend.mp.playmenu.menutab" )
require( "ui.generated.widgets.frontend.replacementweaponwidget" )
local f0_local0 = {
	LOADOUT_EDIT = 2,
	LOADOUT_SELECT = 1
}
local f0_local1 = {
	MP = {
		name = 0x6E40C37FD8C06B3
	}
}
local f0_local2 = function ( f16_arg0, f16_arg1, f16_arg2 )
	f16_arg0.LoadoutButtons.PrimaryWeapon.WeaponButton:registerEventHandler( "button_action", function ( element, event )
		LOOT.LootQuickEquip( f16_arg0, f16_arg0.lootType, f16_arg0.lootRef, f16_arg0.lootID, f16_arg0._currentSelectedGameMode, f16_arg0._currentLoadoutIndex )
		ACTIONS.LeaveMenu( f16_arg0 )
	end )
	f16_arg0.LoadoutButtons.SecondaryWeapon.WeaponButton:registerEventHandler( "button_action", function ( element, event )
		LOOT.LootQuickEquip( f16_arg0, f16_arg0.lootType, f16_arg0.lootRef, f16_arg0.lootID, f16_arg0._currentSelectedGameMode, f16_arg0._currentLoadoutIndex )
		ACTIONS.LeaveMenu( f16_arg0 )
	end )
end

local f0_local3 = function ( f11_arg0, f11_arg1, f11_arg2, f11_arg3, f11_arg4, f11_arg5 )
	local f11_local0 = f11_arg0.Loadouts
	local f11_local1 = f11_arg2
	local f11_local2 = f11_arg3[f11_arg4]
	f11_local1.playerData = f11_local2.loadout
	f11_local1.index = f11_local2.loadoutIndex
	f11_local1.isDefault = f11_arg5
	f11_local1:SetupButton( {
		removeTextBanner = true,
		removeEquipBanner = true,
		buttonSize = "LargeTall",
		imageSize = "Empty",
		buttonData = {}
	} )
	f11_local1:SetPrimaryPromptText( 0x7D9DC9E3291E103 )
	local f11_local3 = f11_local1
	local f11_local4 = f11_local1.SetHeaderText
	local f11_local5
	if f11_arg5 then
		f11_local5 = Engine[0xED84C33EC5F01EA]( f11_local1.defaultLoadout.name )
		if not f11_local5 then
		
		else
			f11_local4( f11_local3, f11_local5 )
			if not f11_local1._handlersAdded then
				f11_local1:addEventHandler( "button_over", function ( f13_arg0, f13_arg1 )
					f11_arg0._currentLoadoutIndex = f13_arg0.index
					f11_arg0.LoadoutButtons:SetupGridItems( f11_arg0, f11_arg0.index, f11_arg0.playerData, nil, f11_arg0, {
						disableBackgrounds = true,
						disableGunsmith = true
					} )
					local f13_local0 = PLAYER_DATA.IO( f11_arg0, f11_arg0._currentStatsGroup )
					f13_local0 = f13_local0.squadMembers.loadouts[f11_arg0._currentLoadoutIndex]
					if not f11_arg0.LoadoutButtons._eventsAdded then
						f11_arg0.LoadoutButtons.SecondaryWeapon.WeaponButton:addEventHandler( "button_over", function ()
							local f15_local0 = PLAYER_DATA.IO( f13_arg0, f13_arg0._currentStatsGroup )
							f13_arg0.PreviousWeapon:Setup( f13_arg0, WEAPON.GenerateWeaponTable( f15_local0.squadMembers.loadouts[f13_arg0._currentLoadoutIndex].weaponSetups[1] ) )
							f13_arg0.PreviousWeapon:SetAlpha( 1 )
							f13_arg0.CompareImage:SetAlpha( 1 )
						end )
						f11_arg0.LoadoutButtons.PrimaryWeapon.WeaponButton:addEventHandler( "button_over", function ()
							local f14_local0 = PLAYER_DATA.IO( f13_arg0, f13_arg0._currentStatsGroup )
							f13_arg0.PreviousWeapon:Setup( f13_arg0, WEAPON.GenerateWeaponTable( f14_local0.squadMembers.loadouts[f13_arg0._currentLoadoutIndex].weaponSetups[0] ) )
							f13_arg0.PreviousWeapon:SetAlpha( 1 )
							f13_arg0.CompareImage:SetAlpha( 1 )
						end )
						f11_arg0.LoadoutButtons._eventsAdded = true
					end
					if f11_arg0._isPrimary and not PERK.DoesPerkPackageContainOverkill( PERK.GetPerkPackageData( f11_arg0, f13_local0.equippedPerkPackageIndex:get() ) ) then
						f11_arg0.LoadoutButtons.SecondaryWeapon.WeaponButton:SetFocusable( false )
						f11_arg0.LoadoutButtons.SecondaryWeapon.WeaponButton.Button:SetFocusable( false )
						f11_arg0.LoadoutButtons.SecondaryWeapon:SetAlpha( 0.3 )
					else
						f11_arg0.LoadoutButtons.SecondaryWeapon.WeaponButton:SetFocusable( true )
						f11_arg0.LoadoutButtons.SecondaryWeapon.WeaponButton.Button:SetFocusable( true )
						f11_arg0.LoadoutButtons.SecondaryWeapon:SetAlpha( 1 )
					end
				end )
				f11_local1:addEventHandler( "button_action", function ( f12_arg0, f12_arg1 )
					if f11_arg0._isWeapon then
						f11_arg0.NewWeapon:SetAlpha( 1 )
					end
					f11_arg0._state = f11_arg0.LOADOUT_EDIT
					f11_arg0.LoadoutButtons:SetMouseFocusBlocker( false )
					f11_arg0.Loadouts:SetMouseFocusBlocker( true )
					f11_arg0.GameModeTabs:SetMouseFocusBlocker( true )
					f11_arg0.LoadoutButtons:processEvent( {
						name = "gain_focus",
						controller = f11_arg0
					} )
					f11_arg0.Loadouts:SetAlpha( 0 )
				end )
				f11_local1._handlersAdded = true
			end
		end
	end
	f11_local5 = f11_local2.loadout.name:get()
end

local f0_local4 = function ( f10_arg0, f10_arg1 )
	f10_arg0.LoadoutButtons.PrimaryWeapon.GunsmithButton:closeTree()
	f10_arg0.LoadoutButtons.PrimaryWeapon.GunsmithButton = nil
	f10_arg0.LoadoutButtons.SecondaryWeapon.GunsmithButton:closeTree()
	f10_arg0.LoadoutButtons.SecondaryWeapon.GunsmithButton = nil
	f10_arg0.LoadoutButtons.TacticalGridItem:SetFocusable( false )
	f10_arg0.LoadoutButtons.EquipmentGridItem:SetFocusable( false )
	f10_arg0.LoadoutButtons.PerkGridItem:SetFocusable( false )
	f10_arg0.LoadoutButtons.FieldUpgradeItem:SetFocusable( false )
	f10_arg0.LoadoutButtons.TacticalGridItem.Button:SetFocusable( false )
	f10_arg0.LoadoutButtons.EquipmentGridItem.Button:SetFocusable( false )
	f10_arg0.LoadoutButtons.PerkGridItem.Button:SetFocusable( false )
	f10_arg0.LoadoutButtons.FieldUpgradeItem.Button:SetFocusable( false )
end

local f0_local5 = function ( f5_arg0, f5_arg1, f5_arg2 )
	local f5_local0, f5_local1 = LOADOUT.GetValidLoadouts( f5_arg1 )
	if f5_arg2.lootType == LOOT.itemTypes.WEAPON then
		f5_arg0._isWeapon = true
		local f5_local2 = WEAPON.GenerateWeaponTableFromID( f5_arg1, f5_arg2.lootID )
		f5_local2.ref = f5_local2.weapon
		f5_arg0.NewWeapon:Setup( f5_arg1, f5_local2 )
		f5_arg0._isPrimary = WEAPON.GetSlotFromRef( f5_local2.weapon ) - 1 == WEAPON.PrimarySlot
	end
	f5_arg0.Loadouts.menu = f5_arg0
	f5_arg0._currentSelectedGameMode = "MP"
	f5_arg0.Loadouts:SetNumChildren( f5_local1 )
	f5_arg0.Loadouts:SetRefreshChild( function ( f9_arg0, f9_arg1, f9_arg2 )
		f9_arg0.grid = f9_arg0:getParent()
		local f9_local0, f9_local1 = LOADOUT.GetValidLoadouts( f5_arg0, f5_arg0._currentStatsGroup )
		f5_arg0( f9_arg0.grid.menu, f5_arg0, f9_arg0, f9_local0, f9_arg1, false )
	end )
	local f5_local2 = {}
	for f5_local6, f5_local7 in pairs( f0_local0 ) do
		table.insert( f5_local2, {
			name = Engine[0xED84C33EC5F01EA]( f5_local7.name ),
			focusFunction = function ( f8_arg0, f8_arg1, f8_arg2 )
				f5_arg0._currentSelectedGameMode = f5_arg0
				f5_arg0._currentStatsGroup = f5_arg0 and CoD.StatsGroup.WZRankedLoadouts or CoD.StatsGroup.RankedLoadouts
				local f8_local0, f8_local1 = LOADOUT.GetValidLoadouts( f8_arg1, f5_arg0._currentStatsGroup )
				f5_arg0.Loadouts:SetNumChildren( f8_local1 )
				f5_arg0.Loadouts:RefreshContent()
				f5_arg0.Loadouts:FocusFirstItem()
				Engine[0xC4146BA76D0F982]( SOUND_SETS.default.tabHighlight )
			end
		} )
	end
	f5_arg0.GameModeTabs:SetTabs( f5_local2 )
	f5_arg0.GameModeTabs:SetAlignment( LUI.Alignment.Center )
	f0_local0( f5_arg0, f5_arg1 )
	f0_local0( f5_arg0, f5_arg1, f5_arg2 )
	f5_arg0.LoadoutButtons:SetMouseFocusBlocker( true )
	f5_arg0:AddGamepadEventCallback( "button_secondary", function ( f7_arg0, f7_arg1 )
		if f7_arg0._state == f5_arg0.LOADOUT_EDIT then
			local f7_local0 = f7_arg1.controller or f5_arg0
			f7_arg0._state = f5_arg0.LOADOUT_SELECT
			f7_arg0.Loadouts:SetAlpha( 1 )
			f7_arg0.NewWeapon:SetAlpha( 0 )
			f7_arg0.PreviousWeapon:SetAlpha( 0 )
			f7_arg0.CompareImage:SetAlpha( 0 )
			f7_arg0.Loadouts:SetMouseFocusBlocker( false )
			f7_arg0.GameModeTabs:SetMouseFocusBlocker( false )
			f7_arg0.LoadoutButtons:SetMouseFocusBlocker( true )
			f7_arg0.LoadoutButtons.SecondaryWeapon.WeaponButton:LoseFocus( {
				controller = f7_local0
			} )
			f7_arg0.LoadoutButtons.PrimaryWeapon.WeaponButton:LoseFocus( {
				controller = f7_local0
			} )
			f7_arg0.LoadoutButtons.SecondaryWeapon.WeaponButton:RemoveActive( {
				controller = f7_local0
			} )
			f7_arg0.LoadoutButtons.PrimaryWeapon.WeaponButton:RemoveActive( {
				controller = f7_local0
			} )
			f7_arg0.Loadouts:processEvent( {
				name = "gain_focus",
				controller = f7_local0
			} )
			Engine[0xC4146BA76D0F982]( SOUND_SETS.default.back )
		else
			ACTIONS.LeaveMenu( f7_arg0 )
		end
	end )
	f5_arg0:addEventHandler( "gain_focus", function ( f6_arg0, f6_arg1 )
		f6_arg0.Loadouts:processEvent( {
			name = "gain_focus",
			controller = f5_arg0
		} )
		return true
	end )
end

function WeaponQuickEquipContainer( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "WeaponQuickEquipContainer"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local Backer = nil
	
	Backer = LUI.UIImage.new()
	Backer.id = "Backer"
	Backer:SetRGBFromInt( 0, 0 )
	Backer:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * -0.14, _1080p * 1919.86, _1080p * 0.35, _1080p * 1080.35 )
	self:addElement( Backer )
	self.Backer = Backer
	
	local f1_local3 = nil
	if CONDITIONS.InGame() then
		f1_local3 = MenuBuilder.BuildRegisteredType( "LoadoutTabBacker", {
			controllerIndex = f1_local1
		} )
		f1_local3.id = "LoadoutTabBacker"
		ACTIONS.ScaleStretchAnchorFullscreen( f1_local3 )
		f1_local3:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -531, 0 )
		self:addElement( f1_local3 )
		self.LoadoutTabBacker = f1_local3
	end
	local LoadoutButtons = nil
	
	LoadoutButtons = MenuBuilder.BuildRegisteredType( "LoadoutCustomizationButtons", {
		controllerIndex = f1_local1
	} )
	LoadoutButtons.id = "LoadoutButtons"
	LoadoutButtons:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 115.88, _1080p * 1859.88, _1080p * 723.53, _1080p * 927.53 )
	self:addElement( LoadoutButtons )
	self.LoadoutButtons = LoadoutButtons
	
	local Loadouts = nil
	
	Loadouts = LUI.UIGrid.new( {
		scrollingThresholdX = 0,
		maxVisibleRows = 1,
		alwaysShowGridCountArrows = true,
		buildArrowsLabel = true,
		scrollingThresholdY = 0,
		wrapX = false,
		maxVisibleColumns = 6,
		wrapY = false,
		controllerIndex = f1_local1,
		buildChild = function ()
			return MenuBuilder.BuildRegisteredType( "LoadoutButton", {
				controllerIndex = menu
			} )
		end,
		refreshChild = function ( f3_arg0, f3_arg1, f3_arg2 )
			
		end,
		primaryAxis = LUI.DIRECTION.horizontal,
		spacingX = _1080p * 16,
		spacingY = _1080p * 10,
		columnWidth = _1080p * 333,
		rowHeight = _1080p * 64,
		scrollType = Enum[0x92A69278394394][0xEDF5C0F5CCFACE1],
		verticalAlignment = LUI.Alignment.Bottom
	} )
	Loadouts.id = "Loadouts"
	Loadouts:setUseStencil( false )
	Loadouts:SetActiveOnMouseOverBehavior( f1_local1 )
	Loadouts:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, _1080p * -813, _1080p * 680, _1080p * -137, _1080p * -73 )
	self:addElement( Loadouts )
	self.Loadouts = Loadouts
	
	local f1_local6 = nil
	if CONDITIONS.IsGLGunsmithEnabled() and not CONDITIONS.IsCPMission() then
		f1_local6 = MenuBuilder.BuildRegisteredType( "HorizontalScrollbar", {
			controllerIndex = f1_local1
		} )
		f1_local6.id = "LoadoutsScrollbar"
		f1_local6:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, _1080p * -411.5, _1080p * 278.5, _1080p * -56, _1080p * -38 )
		self:addElement( f1_local6 )
		self.LoadoutsScrollbar = f1_local6
	end
	local GameModeTabs = nil
	
	GameModeTabs = LUI.TabManager.new( {
		spacing = 2,
		wrap = false,
		tabHeight = _1080p * 80,
		buildTab = function ()
			return MenuBuilder.BuildRegisteredType( "MenuTab", {
				controllerIndex = menu
			} )
		end,
		controllerIndex = f1_local1
	} )
	GameModeTabs.id = "GameModeTabs"
	GameModeTabs:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 662.88, _1080p * 893.88, _1080p * 532.04, _1080p * 604.04 )
	self:addElement( GameModeTabs )
	self.GameModeTabs = GameModeTabs
	
	local NewWeapon = nil
	
	NewWeapon = MenuBuilder.BuildRegisteredType( "ReplacementWeaponWidget", {
		controllerIndex = f1_local1
	} )
	NewWeapon.id = "NewWeapon"
	NewWeapon:SetAlpha( 0, 0 )
	NewWeapon:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1059.86, _1080p * 1809.86, _1080p * 132.04, _1080p * 532.04 )
	self:addElement( NewWeapon )
	self.NewWeapon = NewWeapon
	
	local PreviousWeapon = nil
	
	PreviousWeapon = MenuBuilder.BuildRegisteredType( "ReplacementWeaponWidget", {
		controllerIndex = f1_local1
	} )
	PreviousWeapon.id = "PreviousWeapon"
	PreviousWeapon:SetAlpha( 0, 0 )
	PreviousWeapon:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 28.38, _1080p * 778.38, _1080p * 132.04, _1080p * 532.04 )
	self:addElement( PreviousWeapon )
	self.PreviousWeapon = PreviousWeapon
	
	local CompareImage = nil
	
	CompareImage = LUI.UIImage.new()
	CompareImage.id = "CompareImage"
	CompareImage:SetAlpha( 0, 0 )
	CompareImage:setImage( RegisterMaterial( 0x81122B1C5DB63A6 ), 0 )
	CompareImage:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 876.5, _1080p * 1004.5, _1080p * 271.04, _1080p * 399.04 )
	self:addElement( CompareImage )
	self.CompareImage = CompareImage
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "WeaponQuickEquipContainer", WeaponQuickEquipContainer )
LockTable( _M )
