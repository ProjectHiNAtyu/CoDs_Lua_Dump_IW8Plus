-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
LUI.Scoreboard = LUI.Class( LUI.UIElement )
LUI.Scoreboard.init = function ( f19_arg0, f19_arg1, f19_arg2 )
	LUI.Scoreboard.super.init( f19_arg0, f19_arg1 )
	f19_arg0._controllerIndex = f19_arg1.controllerIndex
	if not f19_arg1.grid then
		local self = LUI.UIGrid.new( f19_arg2 )
		self.id = "ScoreboardGrid"
		self:setUseStencil( false )
		self:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
		f19_arg0._grid = self
		f19_arg0:addElement( self )
	else
		f19_arg0._grid = f19_arg1.grid
	end
	f19_arg0._numPlayers = 0
	local self
	if f19_arg2 then
		self = f19_arg2.maxVisibleRows
		if not self then
		
		else
			f19_arg0._maxVisiblePlayers = self
			f19_arg0._arrowIndicator = f19_arg1.arrowIndicator
			self = f19_arg1.direction
			if not self then
				self = LUI.DIRECTION.vertical
			end
			f19_arg0._direction = self
			f19_arg0._numPlayersFunc = f19_arg1.numPlayersFunction
			f19_arg0._maxVisiblePlayersFunc = f19_arg1.maxVisiblePlayersFunc
			f19_arg0._postRefreshFunc = f19_arg1.postRefreshFunction
			f19_arg0._refreshInterval = f19_arg1.refreshInterval or 1000
			if f19_arg1.scrollbar then
				self = LUI.UIScrollbar.new
				local f19_local1 = {
					direction = LUI.DIRECTION.vertical,
					eventListener = f19_arg1.scrollbar,
					startCap = f19_arg1.scrollbar.startCap,
					endCap = f19_arg1.scrollbar.endCap,
					sliderArea = f19_arg1.scrollbar.sliderArea
				}
				local f19_local2 = f19_arg1.scrollbar.sliderArea
				if f19_local2 then
					f19_local2 = f19_arg1.scrollbar.sliderArea.slider
				end
				f19_local1.slider = f19_local2
				f19_local2 = f19_arg1.scrollbar.sliderArea
				if f19_local2 then
					f19_local2 = f19_arg1.scrollbar.sliderArea.fixedSizeSlider
				end
				f19_local1.fixedSizeSlider = f19_local2
				f19_local1.mouseWheelTarget = f19_arg0._grid
				f19_arg0._scrollbar = self( f19_local1 )
				f19_arg0._grid:AddScrollbar( f19_arg0._scrollbar )
			end
			f19_arg0:SetNumberOfPlayersFunction( f19_arg0._numPlayersFunc )
			self = LUI.UITimer.new( {
				interval = f19_arg0._refreshInterval,
				event = {
					name = "refreshScores"
				}
			} )
			self.id = "TeamScoresTimer"
			f19_arg0:addElement( self )
			local f19_local3 = function ( f20_arg0, f20_arg1 )
				f20_arg0:RefreshGrid()
				f20_arg0:UpdateScrollIndicatorArrow( f20_arg0:GetCurrentNumberOfPlayers(), SCOREBOARD.GetMaxVisibleTeamSize( f19_arg0._controllerIndex ) )
				f20_arg0:UpdateTeamCount( f20_arg0:GetCurrentNumberOfPlayers( {
					ignoreScrollLimits = true
				} ) )
			end
			
			f19_arg0:registerEventHandler( "open_scoreboard", f19_local3 )
			f19_arg0:registerEventHandler( "refreshScores", f19_local3 )
		end
	end
	self = SCOREBOARD.maxVisibleTeamSizeLarge
end

LUI.Scoreboard.SetPostRefreshFunc = function ( f18_arg0, f18_arg1 )
	f18_arg0._postRefreshFunc = f18_arg1
end

LUI.Scoreboard.GetGrid = function ( f17_arg0 )
	return f17_arg0._grid
end

LUI.Scoreboard.GetTeamIndex = function ( f16_arg0 )
	return f16_arg0._teamIndex
end

LUI.Scoreboard.SetTeamIndex = function ( f15_arg0, f15_arg1 )
	f15_arg0._teamIndex = f15_arg1
end

LUI.Scoreboard.GetCurrentNumberOfPlayers = function ( f14_arg0, f14_arg1 )
	if not f14_arg0._teamIndex then
		return 0
	elseif SCOREBOARD.IsAARScoreboard() then
		f14_arg0._numPlayers = SCOREBOARD.GetCurrentNumberPlayersAAR( f14_arg0._controllerIndex, f14_arg0._teamIndex )
	elseif f14_arg0._numPlayersFunc then
		f14_arg0._numPlayers = f14_arg0:_numPlayersFunc( f14_arg1 )
	end
	return f14_arg0._numPlayers
end

LUI.Scoreboard.GetMaxVisiblePlayers = function ( f13_arg0, f13_arg1 )
	if f13_arg0._maxVisiblePlayersFunc then
		f13_arg0._maxVisiblePlayers = f13_arg0:_maxVisiblePlayersFunc( f13_arg1 )
	end
	return f13_arg0._maxVisiblePlayers
end

LUI.Scoreboard.SetNumberOfPlayersFunction = function ( f11_arg0, f11_arg1 )
	local f11_local0 = function ( f12_arg0 )
		return Game[0xC22F90682BB5BF5]( f12_arg0._teamIndex )
	end
	
	local f11_local1
	if not f11_arg1 then
		f11_local1 = f11_arg1
	else
		f11_local1 = f11_local0
	end
	f11_arg0._numPlayersFunc = f11_local1
end

LUI.Scoreboard.SetMaxVisiblePlayersFunction = function ( f10_arg0, f10_arg1 )
	f10_arg0._maxVisiblePlayersFunc = f10_arg1
end

LUI.Scoreboard.SetDefaultFocusFunction = function ( f9_arg0, f9_arg1 )
	f9_arg0._grid:SetDefaultFocus( f9_arg1 )
end

LUI.Scoreboard.SetSFX = function ( f8_arg0, f8_arg1 )
	local f8_local0 = f8_arg0:GetCurrentNumberOfPlayers()
	for f8_local1 = 0, f8_local0 - 1, 1 do
		local f8_local4 = f8_arg0:GetGridChild( f8_local1 )
		if f8_local4 and f8_local4.setGainFocusSFX then
			f8_local4:setGainFocusSFX( tostring( f8_arg1 ) )
		end
	end
end

LUI.Scoreboard.GetIndex = function ( f7_arg0 )
	local f7_local0 = f7_arg0:GetCurrentNumberOfPlayers()
	for f7_local1 = 0, f7_local0 - 1, 1 do
		local f7_local4 = f7_arg0:GetGridChild( f7_local1 )
		if f7_local4 and f7_local4:IsMyRow() then
			return f7_local1
		end
	end
end

LUI.Scoreboard.GetRelativeIndex = function ( f6_arg0 )
	local f6_local0 = f6_arg0:GetCurrentNumberOfPlayers()
	local f6_local1 = 0
	for f6_local2 = 0, f6_local0 - 1, 1 do
		local f6_local5 = f6_arg0:GetGridChild( f6_local2 )
		if f6_local5 then
			f6_local1 = f6_local1 + 1
			if f6_local5:IsMyRow() then
				return f6_local1
			end
		end
	end
end

LUI.Scoreboard.GetGridChild = function ( f5_arg0, f5_arg1 )
	if f5_arg0._direction == LUI.DIRECTION.vertical then
		return f5_arg0._grid:GetElementAtPosition( 0, f5_arg1 )
	else
		return f5_arg0._grid:GetElementAtPosition( f5_arg1, 0 )
	end
end

LUI.Scoreboard.UpdateIndicatorArrowAlignment = function ( f4_arg0 )
	local f4_local0 = f4_arg0._arrowIndicator
	if not f4_local0 then
		return 
	end
	local f4_local1, f4_local2 = f4_arg0._grid:GetRowBoundaries()
	if f4_local2 ~= nil and f4_arg0:GetCurrentNumberOfPlayers() - 1 <= f4_local2 then
		ACTIONS.AnimateSequence( f4_local0, "IndicatorUp" )
	else
		ACTIONS.AnimateSequence( f4_local0, "IndicatorDown" )
	end
end

LUI.Scoreboard.UpdateScrollIndicatorArrow = function ( f3_arg0, f3_arg1, f3_arg2 )
	local f3_local0 = f3_arg0._arrowIndicator
	if not f3_local0 then
		return 
	end
	f3_arg0:UpdateIndicatorArrowAlignment()
	if f3_arg2 < f3_arg1 then
		f3_local0:SetAlpha( 1 )
	else
		f3_local0:SetAlpha( 0 )
	end
end

LUI.Scoreboard.UpdateTeamCount = function ( f2_arg0, f2_arg1 )
	local f2_local0 = f2_arg0.teamCount
	if not f2_local0 then
		return 
	elseif BuiltInEsports[0x9894ED459E76619]() then
		f2_local0:SetVisible( false )
	else
		local f2_local1 = SCOREBOARD.GetMaxTeamSize( f2_arg0._controllerIndex )
		f2_local0:SetVisible( true )
		if CONDITIONS.IsInfectedGameType() then
			f2_local0:setText( Engine[0xED84C33EC5F01EA]( 0x2903EC61D1F2957, tostring( f2_arg1 ) ) )
		else
			f2_local0:setText( Engine[0xED84C33EC5F01EA]( 0xF8403BB2DC0C28D, tostring( f2_arg1 ), tostring( f2_local1 ) ) )
		end
	end
end

LUI.Scoreboard.RefreshGrid = function ( f1_arg0 )
	local f1_local0 = f1_arg0._grid
	local f1_local1 = f1_arg0:GetMaxVisiblePlayers()
	local f1_local2
	if f1_arg0._direction == LUI.DIRECTION.vertical then
		f1_local2 = f1_local0:GetMaxVisibleRows()
		if not f1_local2 then
		
		else
			if f1_local2 ~= f1_local1 then
				if f1_arg0._direction == LUI.DIRECTION.vertical then
					f1_local0:SetMaxVisibleRows( f1_local1 )
					f1_local0:SetMaxVisibleColumns( 1 )
				else
					f1_local0:SetMaxVisibleRows( 1 )
					f1_local0:SetMaxVisibleColumns( f1_local1 )
				end
			end
			local f1_local3 = f1_arg0:GetCurrentNumberOfPlayers()
			local f1_local4
			if f1_arg0._direction == LUI.DIRECTION.vertical then
				f1_local4 = f1_local0:GetNumRows()
				if not f1_local4 then
				
				else
					if f1_local4 ~= f1_local3 then
						if f1_arg0._direction == LUI.DIRECTION.vertical then
							f1_local0:SetNumRows( f1_local3 )
							f1_local0:SetNumColumns( 1 )
						else
							f1_local0:SetNumRows( 1 )
							f1_local0:SetNumColumns( f1_local3 )
						end
					end
					if Engine[0xCA085C21FCBD7CA]() then
						f1_local0:SetTargetRowToDefault()
					end
					f1_local0:RefreshContent()
					f1_local0.refreshOnScroll = true
					if f1_arg0._postRefreshFunc then
						f1_arg0._postRefreshFunc()
					end
				end
			end
			f1_local4 = f1_local0:GetNumColumns()
		end
	end
	f1_local2 = f1_local0:GetMaxVisibleColumns()
end

