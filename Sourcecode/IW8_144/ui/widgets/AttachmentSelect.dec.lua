-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 27-09-2025 22:41
module( ..., package.seeall )
local f0_local0 = function ( f33_arg0, f33_arg1 )
	if f33_arg0.ArrowUp then
		f33_arg0.Attachments:AddArrow( f33_arg0.ArrowUp )
	end
	if f33_arg0.ArrowDown then
		f33_arg0.Attachments:AddArrow( f33_arg0.ArrowDown )
	end
	if f33_arg0.ListCount then
		f33_arg0.Attachments:AddItemNumbers( f33_arg0.ListCount )
	end
end

local f0_local1 = function ( f32_arg0, f32_arg1, f32_arg2, f32_arg3 )
	local f32_local0 = {
		weapon = f32_arg1,
		attachments = {}
	}
	f32_local0.attachments[1] = f32_local0.attachments[attachSlot] or {}
	f32_local0.attachments[1].ref = ATTACHMENT.GetBaseRef( f32_arg2 )
	local f32_local1 = f32_local0.attachments[1]
	local f32_local2
	if not f32_arg3 then
		f32_local2 = f32_arg3
	else
		f32_local2 = ATTACHMENT.baseVariant
	end
	f32_local1.variantID = f32_local2
	for f32_local1 = 2, 5, 1 do
		f32_local0.attachments[f32_local1] = {}
		f32_local0.attachments[f32_local1].ref = "none"
		f32_local0.attachments[f32_local1].variantID = -1
	end
	return f32_local0
end

local f0_local2 = function ( f31_arg0, f31_arg1, f31_arg2, f31_arg3, f31_arg4 )
	local f31_local0 = LUI.DeepCopy( f31_arg0._weaponTable )
	if f31_arg2 then
		f31_local0.attachments[f31_arg2].ref = ATTACHMENT.none
		f31_local0.attachments[f31_arg2].variantID = ATTACHMENT.baseVariant
	end
	if not f31_arg1 then
		f31_arg1 = #f31_local0.attachments + 1
	end
	if f31_arg3 then
		f31_local0.attachments[f31_arg1] = f31_local0.attachments[f31_arg1] or {}
		f31_local0.attachments[f31_arg1].ref = ATTACHMENT.GetBaseRef( f31_arg3 )
		local f31_local1 = f31_local0.attachments[f31_arg1]
		local f31_local2
		if not f31_arg4 then
			f31_local2 = f31_arg4
		else
			f31_local2 = ATTACHMENT.baseVariant
		end
		f31_local1.variantID = f31_local2
	end
	return f31_local0
end

local f0_local3 = function ( f30_arg0, f30_arg1, f30_arg2 )
	if not Engine.DDJFBBJAIG() or not f30_arg0._weaponModel then
		return 
	else
		WEAPON.LoadAndSetModel( f30_arg1, f30_arg0._weaponModel, f30_arg0._currentTable, {
			forceOffsetsAndRotations = true
		} )
	end
end

local f0_local4 = function ( f28_arg0, f28_arg1, f28_arg2 )
	return function ()
		local f29_local0 = f28_arg0
		local f29_local1 = ATTACHMENT.perkCategory
		f29_local0 = REG7 and CSV.weaponOffsets.previewFile or CSV.weaponOffsets.attachmentFile
		FrontEndScene.HideWeaponModels()
		f28_arg0._weaponModel = WEAPON.GetWeaponModel( f28_arg0, FrontEndScene.ClientWeapons.Preview, CSV.weaponOffsets.attachmentFile )
		f28_arg0:addElement( f28_arg0._weaponModel )
		if f28_arg0._focusedAttachmentData then
			f29_local1 = f28_arg0._focusedAttachmentData.ref
		end
		f28_arg0( f28_arg0, f28_arg0, f28_arg0._focusedAttachmentData )
	end
	
end

local f0_local5 = function ( f27_arg0, f27_arg1 )
	f27_arg0._weaponTable = WEAPON.GenerateWeaponTable( f27_arg0._weaponPlayerData )
	local f27_local0 = f27_arg0._weaponTable.attachments[f27_arg1]
	if f27_local0 then
		f27_local0 = f27_arg0._weaponTable.attachments[f27_arg1].ref
	end
	f27_arg0._equippedAttach = f27_local0
	f27_local0 = f27_arg0._weaponTable.attachments[f27_arg1]
	if f27_local0 then
		f27_local0 = f27_arg0._weaponTable.attachments[f27_arg1].variantID
	end
	f27_arg0._equippedVariant = f27_local0
	f27_arg0.Attachments:RefreshContent()
	ATTACHMENT.SetupSlotDisplay( f27_arg0.DetailedEquippedSlots, {
		weaponTable = f27_arg0._weaponTable,
		currentCategory = f27_arg0._category
	} )
	local f27_local1 = f27_arg0
	f27_local0 = f27_arg0.processEvent
	local f27_local2 = {
		name = "update_showcase"
	}
	local f27_local3 = Engine.DDJFBBJAIG()
	local f27_local4 = f27_arg0.Attachments:GetVisibleChildInFocus()
	local f27_local5 = f27_local4.AttachmentButton:GetData()
	f27_local4 = f27_arg0.Attachments:GetVisibleChildInFocus()
	f27_local2.attachmentData = f27_local3 and f27_local5 or f27_local4:GetData()
	f27_local0( f27_local1, f27_local2 )
end

local f0_local6 = function ( f13_arg0, f13_arg1, f13_arg2 )
	assert( f13_arg0.MenuTitle )
	assert( f13_arg0.MenuTitle.MenuTitle )
	assert( f13_arg0.DetailedEquippedSlots )
	assert( f13_arg0.GunsmithDetails )
	assert( f13_arg0.bindButton )
	if not Engine.DDJFBBJAIG() then
		assert( f13_arg0.AttachmentsInGame )
		f13_arg0.Attachments = f13_arg0.AttachmentsInGame
	else
		assert( f13_arg0.AttachmentsFrontend )
		f13_arg0.Attachments = f13_arg0.AttachmentsFrontend
	end
	f0_local0( f13_arg0, f13_arg1 )
	local f13_local0 = ACTIONS.AnimateSequence
	local f13_local1 = f13_arg0
	local f13_local2
	if CONDITIONS.IsSplitscreen() then
		f13_local2 = "Splitscreen"
	else
		f13_local2 = "Regular"
	end
	f13_local0( f13_local1, f13_local2 )
	if Engine.BHICADFIHA() then
		if not f13_arg2.weaponSlot then
			DebugPrint( "WARNING: Missing \"weaponSlot\" option for AttachmentSelect menu. Only OK after a MyChanges." )
			f13_arg2.weaponSlot = 0
		end
		if not f13_arg2.loadoutIndex then
			DebugPrint( "WARNING: Missing \"loadoutIndex\" option for AttachmentSelect menu. Only OK after a MyChanges." )
			f13_arg2.loadoutIndex = 0
		end
		if not f13_arg2.category then
			DebugPrint( "WARNING: Missing \"category\" option for AttachmentSelect menu. Only OK after a MyChanges." )
			f13_arg2.category = "rail"
		end
		if not f13_arg2.attachments then
			DebugPrint( "WARNING: Missing \"attachSlot\" option for AttachmentSelect menu. Only OK after a MyChanges." )
			f13_arg2.attachments = CSV.ReadRow( CSV.attachments, 3 )
		end
	end
	assert( f13_arg2.weaponSlot )
	assert( f13_arg2.loadoutIndex )
	assert( f13_arg2.category )
	assert( f13_arg2.attachments )
	f13_arg0._category = f13_arg2.category
	f13_arg0.MenuTitle:SetTitle( Engine.CBBHFCGDIC( ATTACHMENT.GetAttachmentCategoryName( f13_arg2.category ) ) )
	local f13_local3 = PlayerData.BFFBGAJGD( f13_arg1, LOADOUT.GetLoadoutStatsGroup() )
	f13_local3 = f13_local3.squadMembers.loadouts[f13_arg2.loadoutIndex]
	if CONDITIONS.IsWaveGameType() then
		f13_local1 = PlayerData.BFFBGAJGD( f13_arg1, LOADOUT.GetLoadoutStatsGroup() )
		f13_local3 = f13_local1.squadMembers.loadoutWaveMode
	end
	f13_arg0._weaponPlayerData = f13_local3.weaponSetups[f13_arg2.weaponSlot]
	f13_arg0._weaponTable = WEAPON.GenerateWeaponTable( f13_arg0._weaponPlayerData )
	f13_local1 = f13_arg0._weaponTable.weapon
	if PROGRESSION.ShouldUnlockAll() then
		f13_arg0.GunsmithWeaponLevel:SetAlpha( 0 )
	else
		f13_arg0.GunsmithWeaponLevel:Setup( f13_arg1, f13_local1 )
	end
	if Engine.DDJFBBJAIG() and f13_arg2.category then
		f13_local2 = GUNSMITH.GetAttachmentCategoryScene( f13_local1, f13_arg0._weaponTable.variantID, f13_arg2.category )
		if f13_local2 then
			Engine.DHFCHIIJCA( f13_local2 )
		end
	end
	local f13_local4 = f13_arg2.attachSlot == nil
	local f13_local5 = ATTACHMENT.GetMaxAttachmentCount( f13_local1 )
	for f13_local9, f13_local10 in ddlpairs( f13_arg0._weaponPlayerData.attachmentSetup ) do
		if f13_local4 and f13_local9 < f13_local5 and f13_local10.attachment:get() == ATTACHMENT.none then
			f13_local2 = f13_local9 + 1
		end
	end
	f13_local6 = f13_arg0._weaponTable.attachments[f13_local2]
	if f13_local6 then
		f13_local6 = f13_arg0._weaponTable.attachments[f13_local2].ref
	end
	f13_arg0._equippedAttach = f13_local6
	f13_local6 = f13_arg0._weaponTable.attachments[f13_local2]
	if f13_local6 then
		f13_local6 = f13_arg0._weaponTable.attachments[f13_local2].variantID
	end
	f13_arg0._equippedVariant = f13_local6
	ATTACHMENT.SetupSlotDisplay( f13_arg0.DetailedEquippedSlots, {
		weaponTable = f13_arg0._weaponTable,
		currentCategory = f13_arg0._category
	} )
	f13_local6 = 0
	for f13_local10, f13_local11 in ipairs( f13_arg2.attachments ) do
		if f13_arg0._equippedAttach == f13_local11.baseRef then
			f13_local6 = f13_local10 - 1
		end
	end
	f13_local7 = function ()
		local f26_local0 = f13_arg0.attachments
		for f26_local1 = 1, #f26_local0, 1 do
			if 1 < #f26_local0[f26_local1].variants then
				return true
			end
		end
		return false
	end
	
	f13_local8 = function ()
		if f13_arg0._category ~= "optic" then
			return 
		elseif not LOOT.IsT9Item( {
			type = LOOT.itemTypes.WEAPON,
			ref = f13_arg0
		} ) then
			return 
		elseif f13_arg0._equippedAttach ~= "none" then
			return 
		else
			local f25_local0 = WEAPON.GetEquippedReticle( f13_arg0._weaponPlayerData )
			if f25_local0 == "none" then
				return 
			else
				WEAPON.SetEquippedReticle( f13_arg0._weaponPlayerData, f25_local0 )
			end
		end
	end
	
	if Engine.DDJFBBJAIG() and f13_local7() and not Onboarding.GunsmithCustoms.WasCompleted( f13_arg0, f13_arg1 ) then
		LUI.FlowManager.RequestPopupMenu( f13_arg0, "onboardingpopup", true, f13_arg1, false, ONBOARDING_DATA.GetOnboardingGunsmithCustomsData() )
		Onboarding.GunsmithCustoms.MarkCompleted( f13_arg0, f13_arg1 )
	end
	f13_local9 = function ()
		LUI.FlowManager.RequestAddMenu( "AttachmentAppearanceSelect", true, f13_arg0, false, {
			variants = f13_arg0._focusedAttachmentData.variants,
			weaponSlot = f13_arg0.weaponSlot,
			loadoutIndex = f13_arg0.loadoutIndex,
			attachSlot = f13_arg0 and f13_arg0 or f13_arg0._focusedAttachmentData.blockedCategorySlot,
			attachmentRef = f13_arg0._focusedAttachmentData.ref,
			blockedCategorySlot = f13_arg0._focusedAttachmentData.blockedCategorySlot,
			category = f13_arg0.category
		} )
	end
	
	f13_arg0.Attachments:SetNumChildren( 0 )
	f13_arg0.Attachments:SetRefreshChild( function ( f21_arg0, f21_arg1, f21_arg2 )
		local f21_local0 = f13_arg0.attachments[f13_arg0.Attachments:GetContentIndex( f21_arg1, f21_arg2 ) + 1]
		f21_arg0:Setup( f13_arg0, f21_local0, f21_local0.baseRef == f13_arg0._equippedAttach, f13_arg0._weaponTable, MLG.IsAttachmentRestricted( f21_local0.baseRef, f13_arg0 ), f13_arg0, f13_arg0 )
		f21_arg0:SetupContextualMenu( {
			title = Engine.CBBHFCGDIC( f21_local0.name )
		} )
		f21_arg0:AddContextualMenuAction( {
			id = "chooseAppearance",
			actionName = Engine.CBBHFCGDIC( "CAS/CHOOSE_APPEARANCE_NO_PROMPT" ),
			conditionFunction = function ()
				return GUNSMITH.IsGunsmithCustomsAvailable( f21_arg0, f21_arg0._focusedAttachmentData.unlocked, f21_arg0._focusedAttachmentData.variants, f21_arg0, f21_arg0.category )
			end,
			actionFunction = function ()
				f21_arg0()
			end
		} )
	end )
	f13_arg0.Attachments:SetNumChildren( #f13_arg2.attachments )
	f13_arg0.Attachments:SetDefaultFocus( f13_arg0.Attachments:GetPositionForIndex( f13_local6, {
		relativePosition = false
	} ) )
	f13_arg0.Attachments:RefreshContent()
	f13_local10 = {}
	if f13_arg0._weaponTable.lootID ~= LOOT.emptyID then
		f13_local10 = WEAPON.GetModificationAttachments( f13_arg1, f13_local1, f13_arg0._weaponTable.lootID )
	end
	f13_arg0:registerEventHandler( "update_showcase", function ( element, event )
		local f19_local0 = 1 < #event.attachmentData.variants
		local f19_local1 = event.attachmentData.baseRef == element._equippedAttach
		local f19_local2 = event.attachmentData.isClassified and ATTACHMENT.none or event.attachmentData.ref
		local f19_local3 = event.attachmentData.isClassified and ATTACHMENT.none or event.attachmentData.baseRef
		local f19_local4 = ATTACHMENT.baseVariant
		if f19_local1 then
			f19_local4 = element._equippedVariant
		elseif f13_arg0[f19_local3] then
			f19_local4 = f13_arg0[f19_local3]
		end
		local f19_local5
		if f19_local1 then
			f19_local5 = f13_arg0( element, f13_arg0._weaponTable.weapon, f19_local2, f19_local4 )
			if not f19_local5 then
			
			else
				element._currentTable = f13_arg0( element, f13_arg0, event.attachmentData.blockedCategorySlot, f19_local2, f19_local4 )
				local f19_local6 = f13_arg0.GunsmithDetails
				local f19_local7 = f19_local6
				f19_local6 = f19_local6.Setup
				local f19_local8 = f13_arg0
				local f19_local9 = event.attachmentData
				local f19_local10 = f19_local1
				local f19_local11 = element._weaponTable
				local f19_local12
				if f19_local1 and not f19_local5 then
					f19_local12 = f19_local5
				else
					f19_local12 = element._currentTable
				end
				f19_local6( f19_local7, f19_local8, f19_local9, f19_local10, f19_local11, f19_local12, f19_local0, event.attachmentData.blockedCategorySlot, f19_local4 )
				element._focusedAttachmentData = event.attachmentData
				f13_arg0( element, f13_arg0, event.attachmentData.ref )
				if f19_local1 then
					f13_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
						side = "left",
						priority = 2,
						replaceTop = true,
						button_ref = "button_primary",
						helper_text = Engine.CBBHFCGDIC( "LUA_MENU/DESELECT" )
					} )
				else
					f13_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
						side = "left",
						priority = 2,
						replaceTop = true,
						button_ref = "button_primary",
						helper_text = Engine.CBBHFCGDIC( "LUA_MENU/SELECT" )
					} )
				end
				if CONDITIONS.IsWaveGameType() then
					f19_local6 = tonumber( event.attachmentData.survivalCost )
					local f19_local13 = CP.CurrencyGet( f13_arg0 )
					f13_arg0.PurchaseWidget.CostValue:setText( Engine.CBBHFCGDIC( "COOP_GAME_PLAY/COST_SURVIVAL", tostring( f19_local6 ) ) )
					if f19_local6 <= f19_local13 then
						ACTIONS.AnimateSequence( f13_arg0.PurchaseWidget, "CanBuy" )
					else
						ACTIONS.AnimateSequence( f13_arg0.PurchaseWidget, "NoBuy" )
					end
					f13_arg0:registerOmnvarHandler( "cp_open_cac", function ( f20_arg0, f20_arg1 )
						if f20_arg1.value == -2 and CONDITIONS.IsWaveGameType() then
							LUI.FlowManager.RequestCloseAllMenus()
						end
					end )
				end
				return true
			end
		end
		f19_local5 = {}
	end )
	if LUI.IsLastInputMouseNavigation( f13_arg1 ) then
		f13_arg0:addEventHandler( "menu_create", function ( f18_arg0, f18_arg1 )
			f18_arg0:processEvent( {
				name = "update_showcase",
				attachmentData = f13_arg0.attachments[f13_arg0 + 1]
			} )
		end )
	end
	f13_arg0:registerEventHandler( "equip_attachment", function ( element, event )
		if CONDITIONS.IsWaveGameType() then
			local f17_local0 = CP.CurrencyGet( f13_arg0 )
			local f17_local1 = tonumber( event.attachmentData.survivalCost )
			if event.attachmentData.baseRef == element._equippedAttach then
				Engine.BJDBIAGIDA( "ui_select_purchase_deny" )
			elseif f17_local1 <= f17_local0 then
				if f13_arg0 ~= nil then
					f17_local0 = f17_local0 - f17_local1
					Engine.BJDBIAGIDA( "ui_select_purchase_confirm" )
					CP.CurrencySubtract( f13_arg0, f17_local1 )
					Engine.EBHIFJCGBH( "attachment_purchased", f17_local1 )
				end
			else
				Engine.BJDBIAGIDA( "ui_select_purchase_deny" )
			end
		end
		DYN_ATTACHMENT.UpdateLoadoutWeaponStreamedImages( element, f13_arg0, DYN_ATTACHMENT.StreamedImageAction.REMOVE )
		local f17_local0 = GUNSMITH.EquipAttachment( element, f13_arg0, event.attachmentData.baseRef, element._weaponPlayerData, {
			menusToLeave = {
				nil,
				"AttachmentSelect"
			},
			attachSlot = f13_arg0 and f13_arg0 or event.attachmentData.blockedCategorySlot,
			isNewAttachment = event.attachmentData.baseRef ~= element._equippedAttach,
			survivalCost = event.attachmentData.survivalCost
		} )
		if CONDITIONS.InGame() then
			Engine.EBHIFJCGBH( "equip_item_ingame", 1 )
		end
		DYN_ATTACHMENT.UpdateLoadoutWeaponStreamedImages( element, f13_arg0, DYN_ATTACHMENT.StreamedImageAction.ADD )
		if not f17_local0 then
			f13_arg0( element, f13_arg0 )
		end
		return true
	end )
	if Engine.DDJFBBJAIG() then
		ClientWeapon.BHDGACCFEF( FrontEndScene.ClientWeapons.Preview, false )
		f13_arg0._currentTable = f0_local0( f13_arg0, f13_local2 )
		MenuUtils.SetupSceneChangeCallback( f13_arg0, f0_local0( f13_arg0, f13_arg1, f13_local2, f13_arg2.category ) )
		f13_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			side = "left",
			button_ref = "button_r3",
			priority = 10,
			helper_text = Engine.CBBHFCGDIC( "CAS/PREVIEW_WEAPON" )
		} )
		f13_arg0.bindButton:addEventHandler( "button_right_stick", function ( f16_arg0, f16_arg1 )
			f13_arg0.weaponTable = f13_arg0._currentTable
			LUI.FlowManager.RequestAddMenu( "WeaponPreview", true, f13_arg0, false, f13_arg0, true )
			if f16_arg1.qualifier then
				Engine.BJDBIAGIDA( CoD.SFX.MouseClick )
			end
		end )
	end
	if CONDITIONS.InGame() and not CONDITIONS.IsThirdGameMode() then
		f13_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			clickable = true,
			priority = 5,
			ignoreTooltip = false,
			side = "left",
			kbmTooltipPromptOverload = "button_dismiss_pause_menu",
			button_ref = "button_start",
			helper_text = Engine.CBBHFCGDIC( "LUA_MENU/DISMISS_MENU" )
		} )
		f13_arg0.bindButton:addEventHandler( "button_start", function ( f15_arg0, f15_arg1 )
			LUI.FlowManager.RequestCloseAllMenus()
		end )
	end
	if CONDITIONS.UsingWZLoadouts() then
		f13_arg0.bindButton:addEventHandler( "button_secondary", function ( f14_arg0, f14_arg1 )
			f13_arg0()
		end )
		f13_arg0.WZWipSnipeBackgroundSceneOverlay:UpdateSnipeOverlay( {
			useGunsmithSetup = true,
			weaponRef = f13_local1
		} )
	end
	if f13_arg0.InGameMenuBackground then
		ACTIONS.ScaleFullscreen( f13_arg0.InGameMenuBackground )
	end
	ACTIONS.ScaleFullscreen( f13_arg0.Vignette )
	if f13_arg0.Gradient then
		ACTIONS.ScaleFullscreen( f13_arg0.Gradient )
	end
end

function AttachmentSelect( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "AttachmentSelect"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	self.HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	self.HelperBar.id = "HelperBar"
	self.HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
	self.HelperBar:setPriority( 10 )
	self:addElement( self.HelperBar )
	local f1_local2 = self
	local f1_local3 = nil
	if CONDITIONS.InGame( self ) then
		f1_local3 = MenuBuilder.BuildRegisteredType( "InGameMenuBackground", {
			controllerIndex = f1_local1
		} )
		f1_local3.id = "InGameMenuBackground"
		f1_local3:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
		self:addElement( f1_local3 )
		self.InGameMenuBackground = f1_local3
	end
	local f1_local4 = nil
	if CONDITIONS.UsingWZLoadouts() then
		f1_local4 = MenuBuilder.BuildRegisteredType( "WZSnipeBackgroundSceneOverlay", {
			controllerIndex = f1_local1
		} )
		f1_local4.id = "WZWipSnipeBackgroundSceneOverlay"
		f1_local4:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
		self:addElement( f1_local4 )
		self.WZWipSnipeBackgroundSceneOverlay = f1_local4
	end
	local Vignette = nil
	
	Vignette = LUI.UIImage.new()
	Vignette.id = "Vignette"
	Vignette:setImage( RegisterMaterial( "menu_vignette_corner" ), 0 )
	Vignette:SetAnchorsAndPosition( 0, 0, 0, 0, 0, _1080p * 770, 0, _1080p * 433 )
	self:addElement( Vignette )
	self.Vignette = Vignette
	
	local f1_local6 = nil
	if Engine.DDJFBBJAIG() then
		f1_local6 = LUI.UIImage.new()
		f1_local6.id = "Gradient"
		f1_local6:SetRGBFromInt( 0, 0 )
		f1_local6:SetAlpha( 0.5, 0 )
		f1_local6:setImage( RegisterMaterial( "widg_gradient_left_to_right" ), 0 )
		f1_local6:SetAnchorsAndPosition( 0, 0, 0, 0, 0, _1080p * -865, 0, 0 )
		self:addElement( f1_local6 )
		self.Gradient = f1_local6
	end
	local MenuTitle = nil
	
	MenuTitle = MenuBuilder.BuildRegisteredType( "MenuTitle", {
		controllerIndex = f1_local1
	} )
	MenuTitle.id = "MenuTitle"
	MenuTitle.MenuTitle:setText( "", 0 )
	MenuTitle.Line:SetLeft( 0, 0 )
	MenuTitle:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1020, 0, _1080p * 100 )
	self:addElement( MenuTitle )
	self.MenuTitle = MenuTitle
	
	local f1_local8 = nil
	if Engine.DDJFBBJAIG() then
		f1_local8 = LUI.UIGrid.new( {
			scrollingThresholdX = 1,
			buildArrowsLabel = false,
			maxVelocity = 5000,
			adjustSizeToContent = true,
			scrollingThresholdY = 1,
			wrapX = true,
			maxVisibleColumns = 1,
			maxVisibleRows = 10,
			wrapY = true,
			arrowsVerticalOffset = 0,
			forcePrimaryAxisScrolling = true,
			springCoefficient = 400,
			controllerIndex = f1_local1,
			buildChild = function ()
				return MenuBuilder.BuildRegisteredType( "AttachmentButtonGroup", {
					controllerIndex = menu
				} )
			end,
			refreshChild = function ( f11_arg0, f11_arg1, f11_arg2 )
				
			end,
			spacingX = _1080p * 4,
			spacingY = _1080p * 4,
			columnWidth = _1080p * 420,
			rowHeight = _1080p * 62,
			horizontalAlignment = LUI.Alignment.Left,
			verticalAlignment = LUI.Alignment.Top
		} )
		f1_local8.id = "AttachmentsFrontend"
		f1_local8:setUseStencil( true )
		f1_local8:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 117, _1080p * 609, _1080p * 178, _1080p * 834 )
		self:addElement( f1_local8 )
		self.AttachmentsFrontend = f1_local8
	end
	local f1_local9 = nil
	if not Engine.DDJFBBJAIG() then
		f1_local9 = LUI.UIGrid.new( {
			scrollingThresholdX = 1,
			buildArrowsLabel = false,
			maxVelocity = 5000,
			adjustSizeToContent = true,
			scrollingThresholdY = 1,
			wrapX = true,
			maxVisibleColumns = 1,
			wrapY = true,
			arrowsVerticalOffset = 0,
			forcePrimaryAxisScrolling = true,
			springCoefficient = 400,
			maxVisibleRows = SubtractForSplitscreen( 10, 5 ),
			controllerIndex = f1_local1,
			buildChild = function ()
				return MenuBuilder.BuildRegisteredType( "AttachmentButton", {
					controllerIndex = menu
				} )
			end,
			refreshChild = function ( f9_arg0, f9_arg1, f9_arg2 )
				
			end,
			spacingX = _1080p * 4,
			spacingY = _1080p * 4,
			columnWidth = _1080p * 420,
			rowHeight = _1080p * 62,
			horizontalAlignment = LUI.Alignment.Left,
			verticalAlignment = LUI.Alignment.Top
		} )
		f1_local9.id = "AttachmentsInGame"
		f1_local9:setUseStencil( true )
		f1_local9:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 117, _1080p * 537, _1080p * 178, _1080p * 964 )
		self:addElement( f1_local9 )
		self.AttachmentsInGame = f1_local9
	end
	local GunsmithDetails = nil
	
	GunsmithDetails = MenuBuilder.BuildRegisteredType( "GunsmithDetails", {
		controllerIndex = f1_local1
	} )
	GunsmithDetails.id = "GunsmithDetails"
	GunsmithDetails:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 560, _1080p * 1010, _1080p * 178, _1080p * 828 )
	self:addElement( GunsmithDetails )
	self.GunsmithDetails = GunsmithDetails
	
	local VerticalScrollbar = nil
	
	VerticalScrollbar = MenuBuilder.BuildRegisteredType( "VerticalScrollbar", {
		controllerIndex = f1_local1
	} )
	VerticalScrollbar.id = "VerticalScrollbar"
	VerticalScrollbar:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 108, _1080p * 178, _1080p * 834 )
	self:addElement( VerticalScrollbar )
	self.VerticalScrollbar = VerticalScrollbar
	
	local DetailedEquippedSlots = nil
	
	DetailedEquippedSlots = MenuBuilder.BuildRegisteredType( "GunsmithDetailedEquippedSlots", {
		controllerIndex = f1_local1
	} )
	DetailedEquippedSlots.id = "DetailedEquippedSlots"
	DetailedEquippedSlots:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 130, _1080p * 462, _1080p * 121, _1080p * 153 )
	self:addElement( DetailedEquippedSlots )
	self.DetailedEquippedSlots = DetailedEquippedSlots
	
	local f1_local13 = nil
	if CONDITIONS.InFrontend( self ) then
		f1_local13 = MenuBuilder.BuildRegisteredType( "LobbyMembersFooter", {
			controllerIndex = f1_local1
		} )
		f1_local13.id = "LobbyMembersFooter"
		f1_local13:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 150 )
		self:addElement( f1_local13 )
		self.LobbyMembersFooter = f1_local13
	end
	local f1_local14 = nil
	if CONDITIONS.InGame( self ) then
		f1_local14 = MenuBuilder.BuildRegisteredType( "InGameMenuTimerStatus", {
			controllerIndex = f1_local1
		} )
		f1_local14.id = "InGameMenuTimerStatus"
		f1_local14:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -140, _1080p * 260, _1080p * 54, _1080p * 104 )
		self:addElement( f1_local14 )
		self.InGameMenuTimerStatus = f1_local14
	end
	local GunsmithWeaponLevel = nil
	
	GunsmithWeaponLevel = MenuBuilder.BuildRegisteredType( "GunsmithWeaponLevel", {
		controllerIndex = f1_local1
	} )
	GunsmithWeaponLevel.id = "GunsmithWeaponLevel"
	GunsmithWeaponLevel:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -643, _1080p * -447, _1080p * 61, _1080p * 85 )
	self:addElement( GunsmithWeaponLevel )
	self.GunsmithWeaponLevel = GunsmithWeaponLevel
	
	local ArrowUp = nil
	
	ArrowUp = MenuBuilder.BuildRegisteredType( "NavigationArrow", {
		controllerIndex = f1_local1
	} )
	ArrowUp.id = "ArrowUp"
	ArrowUp:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -750, _1080p * -718, _1080p * 533, _1080p * 565 )
	self:addElement( ArrowUp )
	self.ArrowUp = ArrowUp
	
	local ArrowDown = nil
	
	ArrowDown = MenuBuilder.BuildRegisteredType( "NavigationArrow", {
		controllerIndex = f1_local1
	} )
	ArrowDown.id = "ArrowDown"
	ArrowDown.Arrow:SetZRotation( 180, 0 )
	ArrowDown:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -582, _1080p * -550, _1080p * 533, _1080p * 565 )
	self:addElement( ArrowDown )
	self.ArrowDown = ArrowDown
	
	local ListCount = nil
	
	ListCount = LUI.UIText.new()
	ListCount.id = "ListCount"
	ListCount:SetRGBFromTable( SWATCHES.text.primaryText, 0 )
	ListCount:setText( "", 0 )
	ListCount:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	ListCount:SetAlignment( LUI.Alignment.Center )
	ListCount:SetVerticalAlignment( LUI.Alignment.Center )
	ListCount:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -718, _1080p * -582, _1080p * 540, _1080p * 560 )
	self:addElement( ListCount )
	self.ListCount = ListCount
	
	local f1_local19 = nil
	if CONDITIONS.IsWaveGameType( self ) then
		f1_local19 = MenuBuilder.BuildRegisteredType( "WaveTimer", {
			controllerIndex = f1_local1
		} )
		f1_local19.id = "WaveTimer"
		f1_local19.ReinforcementsText:setText( Engine.CBBHFCGDIC( "COOP_GAME_PLAY/RESPAWN_COUNTDOWN" ), 0 )
		f1_local19:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1385, _1080p * 1670, _1080p * 240, _1080p * 374 )
		self:addElement( f1_local19 )
		self.WaveTimer = f1_local19
	end
	local f1_local20 = nil
	if CONDITIONS.IsWaveGameType( self ) then
		f1_local20 = MenuBuilder.BuildRegisteredType( "PurchaseWidget", {
			controllerIndex = f1_local1
		} )
		f1_local20.id = "PurchaseWidget"
		f1_local20:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 560, _1080p * 913, _1080p * 786, _1080p * 930 )
		self:addElement( f1_local20 )
		self.PurchaseWidget = f1_local20
	end
	local f1_local21 = nil
	if Engine.DDJFBBJAIG() then
		f1_local21 = MenuBuilder.BuildRegisteredType( "CDLRestrictionTag", {
			controllerIndex = f1_local1
		} )
		f1_local21.id = "CDLRestrictionTag"
		f1_local21:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1508, _1080p * 1824, _1080p * 170, _1080p * 200 )
		self:addElement( f1_local21 )
		self.CDLRestrictionTag = f1_local21
	end
	self._sequences.DefaultSequence = function ()
		
	end
	
	self._sequences.Blueprint = function ()
		
	end
	
	local f1_local22 = nil
	GunsmithDetails:RegisterAnimationSequence( "Splitscreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 597
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1020
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 178
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 828
		}
	} )
	VerticalScrollbar:RegisterAnimationSequence( "Splitscreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 503
		}
	} )
	ArrowUp:RegisterAnimationSequence( "Splitscreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 533
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 565
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -750
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -718
		}
	} )
	ArrowDown:RegisterAnimationSequence( "Splitscreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 533
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 565
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -582
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -550
		}
	} )
	ListCount:RegisterAnimationSequence( "Splitscreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 540
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 560
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -718
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -582
		}
	} )
	if CONDITIONS.IsWaveGameType( self ) then
		f1_local20:RegisterAnimationSequence( "Splitscreen", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Left,
				value = _1080p * 1359
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Top,
				value = _1080p * 374
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Right,
				value = _1080p * 1712
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Bottom,
				value = _1080p * 518
			}
		} )
	end
	self._sequences.Splitscreen = function ()
		menu:AnimateSequence( "Splitscreen" )
		menu:AnimateSequence( "Splitscreen" )
		menu:AnimateSequence( "Splitscreen" )
		menu:AnimateSequence( "Splitscreen" )
		menu:AnimateSequence( "Splitscreen" )
		if CONDITIONS.IsWaveGameType( menu ) then
			menu:AnimateSequence( "Splitscreen" )
		end
	end
	
	local f1_local23 = nil
	VerticalScrollbar:RegisterAnimationSequence( "Regular", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 834
		}
	} )
	ArrowUp:RegisterAnimationSequence( "Regular", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 848
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 880
		}
	} )
	ArrowDown:RegisterAnimationSequence( "Regular", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 848
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 880
		}
	} )
	ListCount:RegisterAnimationSequence( "Regular", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 855
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 875
		}
	} )
	self._sequences.Regular = function ()
		menu:AnimateSequence( "Regular" )
		menu:AnimateSequence( "Regular" )
		menu:AnimateSequence( "Regular" )
		menu:AnimateSequence( "Regular" )
	end
	
	local f1_local24 = nil
	GunsmithDetails:RegisterAnimationSequence( "Frontend", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 632
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1082
		}
	} )
	self._sequences.Frontend = function ()
		menu:AnimateSequence( "Frontend" )
	end
	
	local f1_local25 = nil
	GunsmithDetails:RegisterAnimationSequence( "InGame", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 560
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1010
		}
	} )
	self._sequences.InGame = function ()
		menu:AnimateSequence( "InGame" )
	end
	
	if Engine.DDJFBBJAIG() then
		local bindButton = LUI.UIScrollbar.new
		local f1_local27 = {
			direction = LUI.DIRECTION.vertical,
			eventListener = VerticalScrollbar,
			startCap = VerticalScrollbar.startCap,
			endCap = VerticalScrollbar.endCap,
			sliderArea = VerticalScrollbar.sliderArea
		}
		local f1_local28 = VerticalScrollbar.sliderArea
		if f1_local28 then
			f1_local28 = VerticalScrollbar.sliderArea.slider
		end
		f1_local27.slider = f1_local28
		f1_local28 = VerticalScrollbar.sliderArea
		if f1_local28 then
			f1_local28 = VerticalScrollbar.sliderArea.fixedSizeSlider
		end
		f1_local27.fixedSizeSlider = f1_local28
		f1_local8:AddScrollbar( bindButton( f1_local27 ) )
	end
	if not Engine.DDJFBBJAIG() then
		local bindButton = LUI.UIScrollbar.new
		local f1_local27 = {
			direction = LUI.DIRECTION.vertical,
			eventListener = VerticalScrollbar,
			startCap = VerticalScrollbar.startCap,
			endCap = VerticalScrollbar.endCap,
			sliderArea = VerticalScrollbar.sliderArea
		}
		local f1_local28 = VerticalScrollbar.sliderArea
		if f1_local28 then
			f1_local28 = VerticalScrollbar.sliderArea.slider
		end
		f1_local27.slider = f1_local28
		f1_local28 = VerticalScrollbar.sliderArea
		if f1_local28 then
			f1_local28 = VerticalScrollbar.sliderArea.fixedSizeSlider
		end
		f1_local27.fixedSizeSlider = f1_local28
		f1_local9:AddScrollbar( bindButton( f1_local27 ) )
	end
	self.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_secondary",
		helper_text = Engine.CBBHFCGDIC( "MENU/BACK" )
	} )
	self.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_primary",
		priority = 2,
		helper_text = Engine.CBBHFCGDIC( "CAS/SELECT" )
	} )
	
	local bindButton = LUI.UIBindButton.new()
	bindButton.id = "selfBindButton"
	self:addElement( bindButton )
	self.bindButton = bindButton
	
	self.bindButton:addEventHandler( "button_secondary", function ( f2_arg0, f2_arg1 )
		local f2_local0 = f2_arg1.controller or menu
		ACTIONS.LeaveMenu( menu )
	end )
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "AttachmentSelect", AttachmentSelect )
LockTable( _M )
