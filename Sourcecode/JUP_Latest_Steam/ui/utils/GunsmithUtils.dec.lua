-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
GUNSMITH = {
	lineDuration = 200,
	maxMods = 5,
	modSlotChars = 3,
	modSlotBaseID = 7000000,
	NUM_BLOCKED_CATEGORIES = 11,
	HIDDEN_SIBLINGS_STRING = "hiddensiblings",
	defaultTag = "j_gun",
	progressionTag = "tag_progression",
	CAMO_OFFSET = 3,
	CAMO_COMPLETION_CATEGORY = "completion",
	STORE_TAB_INDEX = 1,
	bucketItems = 5,
	DisplayedGunsmithStats = false
}
local f0_local0 = 2
local f0_local1 = 3
local f0_local2 = 4
GUNSMITH.NO_CUSTOM_TUNING_VALUE = 0
GUNSMITH.CAN_PRO_TUNE = 0
GUNSMITH.CLEAR_PRO_TUNING = 1
GUNSMITH.COMPLETIONIST_CAMO_TYPE = {
	ORION = 4,
	INVALID = 0,
	ELEMENT = 3,
	GOLD = 1,
	PLAT = 2
}
GUNSMITH.CAMO_MENU_STATE = {
	OUTBREAK = 2,
	PRESTIGE = 3,
	UNIQUE_CAMOS = 0,
	CATEGORIES = 1
}
GUNSMITH.COMPLETIONIST_CAMO_TYPE_COLOR = {
	[GUNSMITH.COMPLETIONIST_CAMO_TYPE.GOLD] = SWATCHES[0x5B14DE9B77E4451].Gold,
	[GUNSMITH.COMPLETIONIST_CAMO_TYPE.PLAT] = SWATCHES[0x5B14DE9B77E4451].Platinum,
	[GUNSMITH.COMPLETIONIST_CAMO_TYPE.ELEMENT] = SWATCHES[0x5B14DE9B77E4451].Element,
	[GUNSMITH.COMPLETIONIST_CAMO_TYPE.ORION] = SWATCHES[0x5B14DE9B77E4451].Orion
}
GUNSMITH.buttonState = {
	CONFLICT = 5,
	MODIFICATION_LOCKED = 3,
	SWAP = 6,
	EQUIPPED = 7,
	UNLOCKED = 4,
	CHALLENGE_LOCKED = 2,
	PROGRESSION_LOCKED = 1
}
GUNSMITH.modificationSteps = {
	NAME = 2,
	GUNSMITH = 1,
	WARNING = 3
}
GUNSMITH.typeNamePostFix = {
	attachment = "_attachment",
	camos = "_camos"
}
GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE = {
	BIG_SHOTGUN = 2,
	BIG_GUN = 1,
	SMALL_GUN = 3,
	NONE = 0
}
GUNSMITH.WEAPON_PART_COMPARE_STATE = {
	SWAP = 2,
	REMOVE = 1,
	BLOCK = 3,
	PRESERVED = 4,
	NONE = 0
}
GUNSMITH.AttachmentSetupType = {
	WEAPON_PART = 1,
	ATTACHMENT = 0
}
GUNSMITH[0x5BBD3303AAAC2C9] = {
	[0xA7CE19BAA54C278] = 0,
	[0x7F2A8FDB358E5E0] = 1,
	[0x862DF34652CF74E] = 2
}
GUNSMITH.AttachmentSetupTypeMap = {
	receiver = GUNSMITH.AttachmentSetupType.WEAPON_PART,
	none = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	frontpiece = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	backpiece = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	magazine = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	optic = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	muzzle = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	undermount = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	reargrip = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	trigger = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	gunperk = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	other = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	extra = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	extrapstl = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	unique = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	rail = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	bolt = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	loader = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	comb = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	guard = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	guardtwo = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	lever = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	guardthree = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	reargriptwo = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	boltaction = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	reargripthree = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	arms = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	bolts = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	wires = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	backpiecetwo = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	carryhandle = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	triggertwo = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	eventcategory = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	conversionkit = GUNSMITH.AttachmentSetupType.ATTACHMENT,
	slings = GUNSMITH.AttachmentSetupType.ATTACHMENT
}
GUNSMITH.AttachmentSetupDataMap = {
	[GUNSMITH.AttachmentSetupType.ATTACHMENT] = {
		maxIndex = 4,
		offset = 0,
		minIndex = 0
	},
	[GUNSMITH.AttachmentSetupType.WEAPON_PART] = {
		maxIndex = 5,
		offset = 5,
		minIndex = 5
	}
}
GUNSMITH.Tuning = {
	HANDLING = 5,
	RANGE = 1,
	ACCURACY = 2,
	DAMAGE = 6,
	FIRE_RATE = 7,
	RECOIL = 3,
	MOBILITY = 4
}
GUNSMITH.EquipIndicatorTable = {
	muzzle = {
		index = 1,
		categoryName = Engine[0xED84C33EC5F01EA]( 0xED37D6CB095DEC6 )
	},
	undermount = {
		index = 2,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x52DE5D73C0FEDC )
	},
	extra = {
		index = 3,
		categoryName = Engine[0xED84C33EC5F01EA]( 0xADC15AC66FC74CB )
	},
	gunperk = {
		index = 4,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x67B87DFB62C30B7 )
	},
	optic = {
		index = 5,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x1C54345DACD739C )
	},
	reargrip = {
		index = 6,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x8C0E1D5AB309D85 )
	},
	comb = {
		index = 7,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x83D2843AFEF49BA )
	},
	trigger = {
		index = 13,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x37E34173E8678C9 )
	},
	boltaction = {
		index = 14,
		categoryName = Engine[0xED84C33EC5F01EA]( 0xA93C0FC1190025A )
	},
	guardtwo = {
		index = 15,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x9FE152A4A1AF544 )
	},
	extrapstl = {
		index = 16,
		categoryName = Engine[0xED84C33EC5F01EA]( 0xADC15AC66FC74CB )
	},
	guardthree = {
		index = 18,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x9FE152A4A1AF544 )
	},
	reargriptwo = {
		index = 19,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x8C0E1D5AB309D85 )
	},
	frontpiece = {
		index = 8,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x5D0A6F90F7E614E )
	},
	magazine = {
		index = 9,
		categoryName = Engine[0xED84C33EC5F01EA]( 0xBB0E195863DD6F1 )
	},
	receiver = {
		index = 10,
		categoryName = Engine[0xED84C33EC5F01EA]( 0xB66D67A0D5C9E6A )
	},
	backpiece = {
		index = 11,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x332774AF370C770 )
	},
	guard = {
		index = 12,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x9FE152A4A1AF544 )
	},
	bolt = {
		index = 17,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x867224AAD752C20 )
	},
	conversionkit = {
		index = 16,
		categoryName = Engine[0xED84C33EC5F01EA]( 0x225AEDFB1A0A1B9 )
	}
}
GUNSMITH.ExcludedDefaultModifiersStringRef = {
	mod_magnification_12_5x = 0x37BD859F1007E13,
	mod_magnification_12x = 0x43D6242DA769CAF,
	mod_magnification_9_5x = 0xB304D555B00CE4B,
	mod_magnification_6_6 = 0x1FC4D60A5822973,
	mod_magnification_5_5x = 0xB489579ECE715DF,
	mod_magnification_9x = 0x2F8C7D53141DDF7,
	mod_magnification_6x = 0x2FCBDD53145B5D0,
	mod_magnification_8_4x = 0x9858D5033951803,
	mod_magnification_13x = 0x43A5C42DA745CA6,
	mod_magnification_toggle_13x = 0x6FC8F9579D14ACD,
	mod_magnification_3_7x = 0x3C0558A5ED5DA4F,
	mod_magnification_toggle_8_4x = 0xD125DC56EDBD9AE,
	mod_magnification_toggle_8_7x = 0xD0F67C56ED9B4D5,
	mod_magnification_toggle_11x = 0x7028B9579D5AFAF,
	mod_glint_xsml = 0x3CB5C21E932F11,
	mod_magnification_toggle_11_5x = 0x5EAF8A4EB138913,
	mod_glint_sml = 0xF070F735EE4BF4F,
	mod_hybrid_scope = 0xC722F53FFF78771,
	mod_magnification_3x = 0x30DCBD5315440CD,
	mod_scope_bulletdrop = 0xA1D68DAF62D090C,
	mod_glint_lrg = 0xABAAB72F9395B10,
	mod_magnification_11_5x = 0xA5B9E40A9C0E45C,
	mod_thermal_identification = 0x93B1187AB2802C6,
	mod_magnification_5x = 0x306BFD5314E0DBB,
	mod_sight_picture = 0x25C3CE123698E50,
	mod_scope_rangefinder = 0xA4D0422999EC0EA,
	mod_magnification_6_3x = 0x2064F60A58A815E,
	mod_magnification_7_5x = 0x85E916840E8D059,
	mod_magnification_level = 0x3994628945030CC,
	mod_magnification_11x = 0x4336042DA6E44C4,
	mod_magnification_8_7x = 0x97A8B50338B0D18,
	mod_magnification_toggle_8x = 0xA5B48A35C02D883,
	mod_magnification_4x = 0x302C9D5314A35E2,
	mod_nightvision = 0xCAA8940E0491146,
	mod_glint_xlrg = 0x8EAB1C21ACF306E,
	mod_magnification_toggle_12_5x = 0xCCABE8BA3D3EF5C,
	mod_magnification_3_4x = 0x3B5538A5ECBCF64,
	mod_glint_med = 0x31D7572F5351BFD,
	mod_magnification_10x = 0x4376642DA7237CD,
	mod_magnification_8x = 0x2F5C1D5313F9DEE,
	mod_magnification_4_3x = 0x5AB8B6EA3678D78,
	mod_magnification_7x = 0x2FFC3D53147F5D9,
	mod_magnification_4_8x = 0x5D18D6EA388601B
}
GUNSMITH.AttachmentTypeSFX = {
	receiver = SOUND_SETS.gunsmith.receiverSelect,
	frontpiece = SOUND_SETS.gunsmith.barrelSelect,
	backpiece = SOUND_SETS.gunsmith.stockSelect,
	magazine = SOUND_SETS.gunsmith.magazineSelect,
	optic = SOUND_SETS.gunsmith.opticSelect,
	muzzle = SOUND_SETS.gunsmith.muzzleSelect,
	undermount = SOUND_SETS.gunsmith.underBarrelSelect,
	reargrip = SOUND_SETS.gunsmith.gripSelect,
	comb = SOUND_SETS.gunsmith.gripSelect,
	extra = SOUND_SETS.gunsmith.laserSelect,
	gunperk = SOUND_SETS.gunsmith.ammoSelect,
	guard = SOUND_SETS.gunsmith.barrelSelect,
	conversionkit = SOUND_SETS.gunsmith.receiverSelect
}
GUNSMITH.NavigationDirections = {
	down = 0xC04126761BB7455,
	up = 0x8C43A07B566D980,
	left = 0x4B070ADA2041CB0,
	right = 0x6AAAA535714D805
}
GUNSMITH.BlueprintEditStatus = {
	ChangeProTunedAttachment = 2,
	EditTuning = 5,
	EditBlueprint = 6,
	AddNewAttachment = 1,
	ChangeNonProTunedAttachment = 3,
	EditTuningFirstTime = 4
}
GUNSMITH.BlockedWarningType = {
	Charm = 2,
	Gunscreen = 3,
	Stickers = 1
}
GUNSMITH.STICKER_PLACEMENT_STICKER_REFS = {
	[LOADOUT.STICKER_1_SLOT] = "iw9_placement_sticker_1",
	[LOADOUT.STICKER_2_SLOT] = "iw9_placement_sticker_2",
	[LOADOUT.STICKER_3_SLOT] = "iw9_placement_sticker_3"
}
GUNSMITH.ProgressionWeaponTreeTable = {}
GUNSMITH.GetCharmSelectMenuRef = function ()
	if CONDITIONS.IsMobileOrMobileSim() then
		return "MobileEquippableItemsSelectMenu"
	else
		return "CharmSelect"
	end
end

GUNSMITH.GetCamoCategorySelectMenuRef = function ()
	if CONDITIONS.IsMobileOrMobileSim() then
		return "MobileCamoCategorySelect"
	else
		return "CamoCategorySelect"
	end
end

GUNSMITH.GetCamoSelectMenuRef = function ()
	if CONDITIONS.IsMobileOrMobileSim() then
		return "MobileEquippableItemsSelectMenu"
	else
		return "CamoSelect"
	end
end

GUNSMITH.GetStickerSelectMenuRef = function ()
	if CONDITIONS.IsMobileOrMobileSim() then
		return "MobileEquippableItemsSelectMenu"
	else
		return "StickerSelect"
	end
end

GUNSMITH.GetVinylSelectMenuRef = function ()
	if CONDITIONS.IsMobileOrMobileSim() then
		return "MobileEquippableItemsSelectMenu"
	else
		return "VinylSelect"
	end
end

GUNSMITH.GetGunsmithTabFrameRef = function ()
	if CONDITIONS.IsMobileOrMobileSim() then
		return "MobileGunsmith"
	else
		return "Gunsmith"
	end
end

GUNSMITH.GetGunsmithCustomizeTabFrameRef = function ()
	if CONDITIONS.IsMobileOrMobileSim() then
		return "MobileGunsmithCustomize"
	else
		return "GunsmithCustomize"
	end
end

GUNSMITH.GetGunsmithProgressionTabFrameRef = function ()
	return "AttachmentProgressionMenu"
end

GUNSMITH.GetWeaponPreviewMenuRef = function ()
	if CONDITIONS.IsMobileOrMobileSim() then
		return "MobileWeaponPreview"
	else
		return "WeaponPreview"
	end
end

GUNSMITH.GetTuningMenuRef = function ()
	if CONDITIONS.IsMobileOrMobileSim() then
		return "MobileGunsmithTuningMenu"
	else
		return "GunsmithTuningMenu"
	end
end

GUNSMITH.GetAllButtonIndices = function ()
	if GUNSMITH.allButtonIndices then
		return GUNSMITH.allButtonIndices
	end
	GUNSMITH.GetGunsmithNavigationIndicesTable()
	local f265_local0 = GUNSMITH.allButtonIndices
	if not f265_local0 then
		f265_local0 = 0
	end
	return f265_local0
end

GUNSMITH.GetGunsmithMaxCategories = function ()
	if GUNSMITH.maxCategories then
		return GUNSMITH.maxCategories
	end
	GUNSMITH.GetGunsmithNavigationIndicesTable()
	local f264_local0 = GUNSMITH.maxCategories
	if not f264_local0 then
		f264_local0 = 0
	end
	return f264_local0
end

GUNSMITH.SetupWeaponDefaultAttachmentDataForEquippedAttachment = function ( f263_arg0, f263_arg1, f263_arg2, f263_arg3, f263_arg4, f263_arg5, f263_arg6, f263_arg7 )
	local f263_local0 = nil
	local f263_local1 = ATTACHMENT.GetDefaultAttachmentRefForSlotIndex( f263_arg2, f263_arg4, f263_arg5 )
	if not String.IsNilOrEmpty( f263_local1 ) then
		local f263_local2 = ATTACHMENT.GetAttachmentAdditionFullRefForSlotIndex( f263_arg2, f263_arg4, f263_arg5 )
		local f263_local3 = nil
		if f263_local2 then
			if string.gsub( f263_arg3, f263_local2, f263_local1 ) == f263_arg3 and f263_arg6 ~= ATTACHMENT.none then
				f263_local3 = string.gsub( f263_arg3, f263_arg6, f263_local1 )
			end
			f263_local0 = string.gsub( f263_arg3, f263_local2, f263_arg6 )
		else
			f263_local3 = string.gsub( f263_arg3, f263_arg6, f263_local1 )
			if f263_local3 == f263_arg3 then
				f263_local0 = string.gsub( f263_arg3, f263_local1, f263_arg6 )
			end
		end
		local f263_local4 = ClientWeapon[0xFE24333F9BC2CAB]( f263_arg1, f263_local3, f263_arg5 )
		f263_arg0.defaultAttachmentStats = f263_local4.tunedStats or f263_local4.unTunedStats
		f263_arg0.defaultModifierValues = ClientWeapon[0xA41C97AC6ADDC24]( f263_arg1, f263_local3, f263_arg5 )
	else
		f263_local0 = WEAPON.GetWeaponModelName( f263_arg7.weapon, f263_arg7, {
			showSWhiskeyMag = true,
			includeAttachments = true,
			keepAkimbo = true
		} )
	end
	f263_arg0.weaponStringWithNewAttachment = f263_local0
end

GUNSMITH.IsAllowedForDefaultModifierAdjustments = function ( f262_arg0 )
	return not LUI.IsItemInArray( GUNSMITH.ExcludedDefaultModifiersStringRef, f262_arg0 )
end

GUNSMITH.ApplyDefaultModifierAdjustments = function ( f261_arg0, f261_arg1 )
	if f261_arg0 then
		for f261_local8, f261_local9 in pairs( f261_arg1 ) do
			if not String.IsNilOrEmpty( f261_local9.name ) and GUNSMITH.IsAllowedForDefaultModifierAdjustments( f261_local9.name ) then
				for f261_local6, f261_local7 in pairs( f261_arg0 ) do
					if f261_local9.name == f261_local7.name then
						f261_local9.value = f261_local9.value - f261_local7.value
					end
				end
			end
		end
	end
end

GUNSMITH.GetDefaultModificationName = function ()
	local f260_local0 = StringTable[0xFD4E49A34DD43AE]( CSV.modificationDefaults.file )
	math.randomseed( Engine[0x6991337AE950F99]() )
	return StringTable[0x2077452C28AB2FC]( CSV.modificationDefaults.file, math.random( 0, f260_local0 - 1 ), CSV.modificationDefaults.cols.name )
end

GUNSMITH.GetAttachmentCategories = function ( f259_arg0, f259_arg1 )
	if GUNSMITH.IsDisabled( f259_arg0, f259_arg1 ) then
		return {}
	end
	local f259_local0 = WEAPON.GetClassBundleByWeaponClass( WEAPON.GetWeaponClass( f259_arg0 ) )
	local f259_local1 = {}
	local f259_local2
	if f259_local0 then
		f259_local2 = #f259_local0[0x3F3922AD742F2E9]
		if not f259_local2 then
		
		else
			for f259_local3 = 1, f259_local2, 1 do
				local f259_local6 = f259_local0[0x3F3922AD742F2E9][f259_local3] or {}
				if not String.IsNilOrEmpty( f259_local6[0xBD2E7FFB1224E91] ) then
					table.insert( f259_local1, string.lower( f259_local6[0xBD2E7FFB1224E91] ) )
				end
			end
			local f259_local3 = WEAPON.GetWeaponDataForRef( f259_arg0 )
			if f259_local3 then
				for f259_local4 = 1, #f259_local3[0x19652145F566787], 1 do
					local f259_local8 = f259_local3[0x19652145F566787][f259_local4] or {}
					if not String.IsNilOrEmpty( f259_local8[0xBD2E7FFB1224E91] ) then
						local f259_local9 = string.lower( f259_local8[0xBD2E7FFB1224E91] )
						for f259_local13, f259_local14 in ipairs( f259_local1 ) do
							if f259_local14 == f259_local9 then
								table.remove( f259_local1, f259_local13 )
							end
						end
					end
				end
			end
			return f259_local1
		end
	end
	f259_local2 = 0
end

GUNSMITH.IsAttachVariantCategoryBlacklisted = function ( f258_arg0, f258_arg1 )
	local f258_local0 = WEAPON.GetWeaponDataForRef( f258_arg0 )
	if f258_local0 then
		local f258_local1 = f258_local0[0xBDB53E3FCA21828]
		for f258_local2 = 1, #f258_local1, 1 do
			if f258_local1[f258_local2].category == f258_arg1 then
				return true
			end
		end
	end
	return false
end

GUNSMITH.GetBlockedCategoryWarning = function ( f257_arg0, f257_arg1 )
	local f257_local0 = ATTACHMENT.GetRef( f257_arg0.attachments[f257_arg1].ref, f257_arg0.weapon )
	local f257_local1 = ATTACHMENT.GetAttachmentCategoryName( ATTACHMENT.GetCategory( f257_local0 ) )
	local f257_local2 = Engine[0xED84C33EC5F01EA]
	local f257_local3 = 0xA40C8E247024F5E
	local f257_local4 = f257_local1
	return f257_local2( f257_local3, ATTACHMENT.GetName( f257_local0 ) )
end

GUNSMITH.GetBlockedCategoryButtonWarning = function ( f256_arg0, f256_arg1 )
	local f256_local0 = ATTACHMENT.GetAttachmentCategoryName( ATTACHMENT.GetCategory( f256_arg1 ) )
	local f256_local1 = Engine[0xED84C33EC5F01EA]
	local f256_local2 = 0xFA36F63F49F92E1
	return f256_local1( ATTACHMENT.GetName( f256_arg1 ) )
end

GUNSMITH.GetChallengeXPReward = function ( f255_arg0 )
	return StringTable[0x2DCF0973239E909]( CSV.gunsmithChallenges.GetFile(), CSV.gunsmithChallenges.cols.id, f255_arg0, CSV.gunsmithChallenges.cols.XPReward )
end

GUNSMITH.GetGunsmithNavigationIndicesTable = function ()
	if not PROJECT[0x5A05E13AC947C99][0x1A411218EB5D7F7] then
		PROJECT[0x5A05E13AC947C99][0x1A411218EB5D7F7] = {}
		local f254_local0 = Game[0x83E0D59EFF44E21]()
		local f254_local1 = Engine[0x6093D047200548]( 0xA7E31718134132D .. f254_local0[0x8A6A0353C74D272] )
		local f254_local2 = 0
		local f254_local3 = 0
		for f254_local7, f254_local8 in pairs( f254_local1 ) do
			if f254_local8[0x1B8168F46C5E399] then
				PROJECT[0x5A05E13AC947C99][0x1A411218EB5D7F7][f254_local7] = f254_local8
				f254_local2 = f254_local2 + 1
			end
			f254_local3 = f254_local3 + 1
		end
		GUNSMITH.allButtonIndices = f254_local3
		GUNSMITH.maxCategories = f254_local2
	end
	return PROJECT[0x5A05E13AC947C99][0x1A411218EB5D7F7]
end

GUNSMITH.GetAttachmentsAndBucketItems = function ( f253_arg0, f253_arg1, f253_arg2 )
	local f253_local0 = {}
	local f253_local1 = {}
	local f253_local2 = WEAPON.GetWeaponDataForRef( f253_arg1 )
	local f253_local3 = {}
	if not f253_local2 then
		return f253_local3
	end
	local f253_local4 = f253_local2[0x49DB2AF7D3296E4]
	if not f253_local4 then
		return f253_local3
	elseif not Engine[0x12586A3F4FB490E]() then
		local f253_local5 = CONDITIONS.AreRestrictionsActive( f253_arg0 )
	else
		local f253_local5 = false
	end
	local f253_local6 = WEAPON.GetModificationAttachments( f253_arg0, f253_arg1, f253_arg2 )
	for f253_local10, f253_local11 in ipairs( f253_local4 ) do
		local f253_local12 = 1
		local f253_local13 = f253_local11[0x1CBA5DD1F23977A] or {}
		local f253_local14 = f253_local13[f253_local12] or {}
		local f253_local15 = f253_local11[0x8DDC90A9D7C709D] and f253_local11[0x8DDC90A9D7C709D] or 0
		if f253_local14[0x28887F70BF5EBA] and 0 < #f253_local14[0x28887F70BF5EBA] then
			
		end
	end
	for f253_local10, f253_local11 in pairs( f253_local1 ) do
		for f253_local15, f253_local16 in pairs( f253_local11 ) do
			table.insert( f253_local0[f253_local10], f253_local16 )
		end
	end
	return f253_local0, f253_local3
end

GUNSMITH.IsDisabled = function ( f252_arg0, f252_arg1 )
	local f252_local0 = WEAPON.GetWeaponClass( f252_arg0 )
	local f252_local1 = false
	if f252_local0 and 0 < #f252_local0 then
		local f252_local2 = WEAPON.GetClassBundleByWeaponClass( f252_local0 )
		if f252_local2 then
			local f252_local3 = f252_local2[0xC00B707A9E7820C]
			if not f252_local3 then
				f252_local1 = f252_local3
			else
				f252_local1 = false
			end
		end
		f252_local1 = false
	end
	local f252_local2 = WEAPON.GetWeaponDataForRef( f252_arg0 )
	local f252_local3
	if f252_local2 then
		f252_local3 = f252_local2[0x4FDAECD20551368]
		if not f252_local3 then
		
		else
			local f252_local4 = false
			if f252_arg1 then
				local f252_local5 = Engine[0x879C2878DB98F92]( GL_HACK.GetWeaponMPRef( f252_arg0 ), f252_arg1 )
				if f252_local5 then
					local f252_local6 = f252_local5[0x4FDAECD20551368]
					if not f252_local6 then
						f252_local4 = f252_local6
					else
						f252_local4 = false
					end
				end
				f252_local4 = false
			end
			local f252_local7
			if f252_local1 then
				if not f252_local3 then
					f252_local7 = f252_local3
				else
					f252_local7 = f252_local4
				end
			else
				f252_local7 = true
			end
			return f252_local7
		end
	end
	f252_local3 = false
end

GUNSMITH.IsCustomizationDisabled = function ( f251_arg0 )
	local f251_local0 = WEAPON.GetWeaponDataForRef( f251_arg0 )
	local f251_local1
	if f251_local0 then
		f251_local1 = f251_local0
	else
		f251_local1 = f251_local0[0x4348964940172BE]
	end
	return f251_local1
end

GUNSMITH.CanEnterGunsmith = function ( f250_arg0, f250_arg1 )
	local f250_local0
	if GUNSMITH.IsDisabled( f250_arg0, f250_arg1 ) then
		f250_local0 = not GUNSMITH.IsCustomizationDisabled( f250_arg0 )
	else
		f250_local0 = true
	end
	return f250_local0
end

GUNSMITH.IsGunsmithCustomsAvailable = function ( f249_arg0, f249_arg1, f249_arg2, f249_arg3, f249_arg4, f249_arg5 )
	if not f249_arg2 then
		f249_arg2 = {}
	end
	local f249_local0
	if f249_arg1 then
		f249_local0 = f249_arg1
	else
		f249_local0 = 1 < #f249_arg2
	end
	local f249_local1 = GUNSMITH.IsAttachVariantCategoryBlacklisted( f249_arg3, f249_arg4 )
	local f249_local2 = ATTACHMENT.AreVariantsEnabled()
	if f249_local2 then
		if not f249_arg5 then
			if f249_local0 then
				f249_local2 = f249_local0
			elseif not f249_local1 then
				f249_local2 = Engine[0x12586A3F4FB490E]()
				if f249_local2 then
					f249_local2 = Engine[0x5EA7EB683287036]( f249_arg0 )
				end
			else
				f249_local2 = false
			end
		end
		f249_local2 = false
	end
	return f249_local2
end

GUNSMITH.AreMasterChallengesEnabled = function ( f248_arg0, f248_arg1 )
	if f248_arg0 == nil or f248_arg1 == nil then
		return false
	end
	local f248_local0 = Dvar[0x9E5BE3B4BBA4E0E]( 0x4D9E8158F4A4271 )
	local f248_local1 = WEAPON.IsGoldCamoUnlocked( f248_arg0, f248_arg1 )
	local f248_local2
	if f248_local0 and CONDITIONS.InFrontendPublic() and not f248_local1 then
		f248_local2 = f248_local1
	else
		f248_local2 = Dvar[0x9E5BE3B4BBA4E0E]( 0xED4A31155340345 )
	end
	return f248_local2
end

GUNSMITH.OnGunsmithMenuCloseEventHandler = function ( f247_arg0, f247_arg1 )
	if CONDITIONS.IsDMZMatch() and f247_arg0._equippedWeaponSlot ~= nil then
		local f247_local0 = DMZ.GetEquippedInstanceWeaponTable( f247_arg0._weaponSlot )
		if f247_local0.weapon == f247_arg0._weaponTable.weapon then
			DMZ.EquipWeaponToLoadoutFromInsurancePlayerDataSlot( f247_arg1.controller, f247_arg0._weaponSlot, f247_arg0._equippedWeaponSlot )
		end
	end
	if f247_arg0._forShowcase and f247_arg0._commitShowcaseChanges then
		Social[0x6B83DE97344CD52]( f247_arg1.controller )
	end
end

GUNSMITH.EquipAttachmentEventHandler = function ( f246_arg0, f246_arg1, f246_arg2 )
	if not f246_arg2 then
		f246_arg2 = {}
	end
	local f246_local0 = f246_arg2.parentMenu
	if not f246_local0 then
		f246_local0 = f246_arg0:getParent()
	end
	local f246_local1 = f246_arg2.isInAttachmentSelect
	local f246_local2 = f246_arg0._controllerIndex
	local f246_local3 = LUI.FlowManager.GetScopedData( f246_local0 )
	local f246_local4 = f246_arg2.attachSlot
	if f246_arg1 and f246_arg1.regetAttachSlotIfNil and not f246_local4 then
		f246_local4 = ATTACHMENT.GetAvailableAttachSlot( f246_local2, f246_local3.weaponSlot, f246_arg0._category )
	end
	if f246_local1 and f246_arg0._category == ATTACHMENT.receiverCategory then
		local f246_local5 = true
		local f246_local6 = WEAPON.GetWeaponRefByRec( f246_arg1.attachmentData.ref )
		if f246_local6 ~= f246_arg0._weaponTable.weapon then
			local f246_local7 = {}
			for f246_local8 = 1, #f246_arg0._weaponCompareTable, 1 do
				if f246_arg0._weaponCompareTable[f246_local8].compareState == GUNSMITH.WEAPON_PART_COMPARE_STATE.PRESERVED then
					table.insert( f246_local7, f246_arg0._weaponCompareTable[f246_local8].ref )
				end
			end
			if WEAPON.DoesWeaponHaveAnyTunedAttachment( f246_arg0._weaponTable ) then
				f246_local5 = false
				LUI.FlowManager.RequestPopupMenu( f246_local0, "SwapReceiverWithTunedAttachmentPopup", true, f246_arg1.controller, false, {
					element = f246_arg0,
					weaponRef = f246_local6,
					attachmentData = f246_arg1.attachmentData,
					preservedAttachmentTable = f246_local7
				} )
			elseif f246_local0 and f246_local0.SwapReceiverAttachment then
				f246_local0:SwapReceiverAttachment( f246_arg0, f246_local2, f246_local6, f246_arg1.attachmentData, f246_local7 )
			end
		end
		if f246_local5 then
			ACTIONS.LeaveMenu( f246_arg0 )
		end
		return 
	elseif CONDITIONS.IsWaveGameType() then
		local f246_local5 = CP.CurrencyGet( f246_local2 )
		local f246_local6 = tonumber( f246_arg1.attachmentData.survivalCost )
		if f246_arg1.attachmentData.ref == f246_arg0._equippedAttach then
			Engine[0xC4146BA76D0F982]( 0xC434AA96E20B199 )
		elseif f246_local6 <= f246_local5 then
			if f246_local4 ~= nil then
				f246_local5 = f246_local5 - f246_local6
				Engine[0xC4146BA76D0F982]( 0x7AA312B9A84F375 )
				CP.CurrencySubtract( f246_local2, f246_local6 )
				Engine[0x6055C55456F05DF]( "attachment_purchased", f246_local6 )
			end
		else
			Engine[0xC4146BA76D0F982]( 0xC434AA96E20B199 )
		end
	end
	DYN_ATTACHMENT.UpdateLoadoutWeaponStreamedImages( f246_arg0, f246_local2, DYN_ATTACHMENT.StreamedImageAction.REMOVE )
	local f246_local5 = f246_arg1.attachmentData.ref
	local f246_local6 = f246_local5 ~= f246_arg0._equippedAttach
	local f246_local7 = not CONDITIONS.IsMobileOrMobileSim()
	local f246_local8 = {
		LOADOUT.GetAttachmentSelectMenuRef()
	}
	local f246_local9
	if f246_local1 then
		f246_local9 = LOADOUT.GetAttachmentSelectMenuRef()
		if not f246_local9 then
		
		else
			local f246_local10 = false
			if not f246_local1 then
				f246_local10 = f246_arg1.attachmentData.variantID ~= (f246_arg0._equippedAttach and f246_arg0._equippedAttach.variantID or -1)
				table.insert( f246_local8, f246_local9 )
			end
			local f246_local11 = GUNSMITH.IsSwappingAttachmentRequired( f246_arg0._weaponPlayerData, f246_arg0._equippedAttach, f246_arg1.attachmentData )
			if f246_local6 or f246_local10 then
				local f246_local12 = LUI.FlowManager.GetScopedData( LOADOUT.GetGunsmithTabsMenuRef() )
				local f246_local13 = f246_local12.attachmentData[GL_HACK.GetWeaponMPRef( f246_arg0._weaponTable.weapon )].attachments
				local f246_local14 = GUNSMITH.EquipAttachment
				local f246_local15 = f246_arg0
				local f246_local16 = f246_local2
				local f246_local17 = f246_local5
				local f246_local18 = f246_arg0._weaponPlayerData
				local f246_local19 = {
					menusToLeave = f246_local8
				}
				local f246_local20
				if f246_local11 then
					f246_local20 = f246_arg1.attachmentData.blockedCategorySlot
					if not f246_local20 then
					
					else
						f246_local19.attachSlot = f246_local20
						f246_local19.isNewAttachment = f246_local6
						f246_local19.survivalCost = f246_arg1.attachmentData.survivalCost
						f246_local19.allAttachments = f246_local13
						f246_local19.isBlocked = f246_arg1.attachmentData.isBlocked
						if not f246_local1 then
							f246_local20 = f246_arg1.attachmentData.variantID
							if not f246_local20 then
							
							else
								f246_local19.variantID = f246_local20
								f246_local7 = f246_local14( f246_local15, f246_local16, f246_local17, f246_local18, f246_local19 )
								if not f246_local11 and f246_local4 and f246_arg1.substituteSiblingAttachmentsToEquip then
									for f246_local16, f246_local17 in ipairs( f246_arg1.substituteSiblingAttachmentsToEquip ) do
										GUNSMITH.EquipAttachment( f246_arg0, f246_local2, f246_local17.ref, f246_arg0._weaponPlayerData, {
											attachSlot = GUNSMITH.GetSelectedAttachIndexForCategory( f246_local17.category, f246_arg0._weaponTable ),
											survivalCost = f246_local17.survivalCost
										} )
									end
								end
								if CONDITIONS.InGame() then
									Engine[0x6055C55456F05DF]( "equip_item_ingame", 1 )
								end
								DYN_ATTACHMENT.UpdateLoadoutWeaponStreamedImages( f246_arg0, f246_local2, DYN_ATTACHMENT.StreamedImageAction.ADD )
							end
						end
						f246_local20 = nil
					end
				end
				f246_local20 = f246_local4
			elseif not CONDITIONS.IsMobileOrMobileSim() then
				LUI.FlowManager.RequestLeaveMenuByName( f246_local9 )
			end
			if not f246_local7 then
				local f246_local12 = LUI.FlowManager.GetScopedData( LOADOUT.GetAttachmentSelectMenuRef() )
				local f246_local22 = f246_local0.Attachments._targetPosition
				if f246_local22 then
					f246_local22 = f246_local0.Attachments._targetPosition.x
				end
				f246_local12.lastTargetPositionX = f246_local22
				if f246_local0 and f246_local0.RefreshMenu then
					f246_local0:RefreshMenu( f246_arg0, f246_local4 )
				end
			end
			return true
		end
	end
	f246_local9 = "AttachmentAppearanceSelect"
end

GUNSMITH.EquipAttachment = function ( f245_arg0, f245_arg1, f245_arg2, f245_arg3, f245_arg4 )
	local f245_local0 = f245_arg4.attachSlot
	local f245_local1 = f245_arg4.isSwappingAttachment
	if f245_local0 then
		local f245_local2 = f245_arg4.variantID
		local f245_local3 = ATTACHMENT.GetRefFromSetup( f245_arg3.attachmentSetup[f245_local0 - 1] )
		local f245_local4 = false
		local f245_local5 = f245_arg3.weapon:get()
		local f245_local6 = {
			weaponRef = f245_local5,
			attachmentRef = f245_local3
		}
		local f245_local7 = f245_arg3.attachmentSetup[f245_arg4.attachSlot - 1].variantID:get()
		if not f245_local7 then
			f245_local7 = ATTACHMENT.baseVariant
		end
		f245_local6.variantID = f245_local7
		f245_local7 = {
			weaponRef = f245_local5,
			attachmentRef = f245_arg2
		}
		local f245_local8 = f245_arg4.variantID
		if not f245_local8 then
			f245_local8 = ATTACHMENT.baseVariant
		end
		f245_local7.variantID = f245_local8
		LOOT.SendDlogLootEquipped( f245_arg1, LOOT.itemTypes.ATTACHMENT, f245_local6, f245_local7 )
		if f245_local3 == f245_arg2 and not f245_local2 then
			f245_arg2 = ATTACHMENT.none
			f245_local4 = true
		end
		if not f245_local2 then
			f245_local2 = ATTACHMENT.baseVariant
			if f245_arg3.lootItemID:get() ~= LOOT.emptyID then
				f245_local8 = WEAPON.GetModificationAttachments( f245_arg1, f245_local5, f245_arg3.lootItemID:get() )
				if f245_local8[f245_arg2] then
					f245_local2 = f245_local8[f245_arg2]
				end
			end
		end
		f245_local8 = true
		if CONDITIONS.IsPlayerDataWeaponSetupsValidationEnabled() then
			local f245_local9 = WEAPON.GenerateWeaponTable( f245_arg3 )
			f245_local9.attachments[f245_local0].ref = f245_arg2
			local f245_local10 = f245_local9.attachments[f245_local0]
			local f245_local11
			if not f245_local2 then
				f245_local11 = f245_local2
			else
				f245_local11 = ATTACHMENT.baseVariant
			end
			f245_local10.variantID = f245_local11
			f245_local10, f245_local11 = ATTACHMENT.IsAttachmentsTableValid( f245_arg1, f245_local9 )
			if not f245_local10 then
				METRICS.SendDLogWeaponSetupValidationResults( f245_arg1, f245_local11, LOADOUT.DLOG_VALIDATION_DENY_EQUIP_SUFFIX )
				if CONDITIONS.IsPlayerDataWeaponSetupsValidationResetWeaponEnabled() then
					f245_local8 = false
					f245_local4 = false
					LUI.FlowManager.RequestErrorPopup( f245_arg1, Engine[0xED84C33EC5F01EA]( 0xD09E09A43DE9B80 ), Engine[0xED84C33EC5F01EA]( 0xE0AC73017303D25 ) )
				end
			end
		end
		if f245_local8 then
			ATTACHMENT.SetPlayerDataRef( f245_arg3.attachmentSetup[f245_local0 - 1], f245_arg2 )
			f245_arg3.attachmentSetup[f245_local0 - 1].variantID:set( f245_local2 )
			f245_arg3.attachmentSetup[f245_local0 - 1].customTune[0]:set( GUNSMITH.NO_CUSTOM_TUNING_VALUE )
			f245_arg3.attachmentSetup[f245_local0 - 1].customTune[1]:set( GUNSMITH.NO_CUSTOM_TUNING_VALUE )
			GUNSMITH.TryClearProTuningInSetup( WEAPON.GenerateWeaponTable( f245_arg3 ), f245_arg3.attachmentSetup[f245_local0 - 1] )
			local f245_local10
			if ATTACHMENT.GetCategory( f245_local3 ) ~= ATTACHMENT.opticCategory and ATTACHMENT.GetCategory( f245_arg2 ) ~= ATTACHMENT.opticCategory then
				f245_local10 = false
			else
				f245_local10 = true
			end
			if f245_local10 then
				if not ATTACHMENT.SupportsCustomReticles( f245_arg2 ) or ATTACHMENT.GetOpticReticleCategory( f245_local3 ) ~= ATTACHMENT.GetOpticReticleCategory( f245_arg2 ) then
					WEAPON.SetEquippedReticle( f245_arg3, WEAPON.ReticleNoneValue )
				end
			end
		end
		if f245_arg4.menusToLeave and not f245_local4 then
			for f245_local12, f245_local13 in ipairs( f245_arg4.menusToLeave ) do
				LUI.FlowManager.RequestLeaveMenuByName( f245_local13 )
			end
			return true
		else
			return false
		end
	elseif f245_arg2 == ATTACHMENT.none then
		if f245_arg4.menusToLeave then
			for f245_local5, f245_local6 in ipairs( f245_arg4.menusToLeave ) do
				LUI.FlowManager.RequestLeaveMenuByName( f245_local6 )
			end
			return true
		else
			return false
		end
	else
		local f245_local2 = {
			attachToReplaceWith = f245_arg2,
			weaponPlayerData = f245_arg3,
			menusToLeave = f245_arg4.menusToLeave,
			variantID = f245_arg4.variantID,
			lootID = f245_arg4.lootID,
			survivalCost = f245_arg4.survivalCost,
			allAttachments = f245_arg4.allAttachments,
			isBlocked = f245_arg4.isBlocked
		}
		if CONDITIONS.IsMobileOrMobileSim() then
			LUI.FlowManager.RequestAddMenu( "MobileSwapAttachmentPopup", true, f245_arg1, false, f245_local2 )
		else
			LUI.FlowManager.RequestAddMenu( "SwapAttachmentPopup", true, f245_arg1, nil, f245_local2 )
		end
	end
end

GUNSMITH.GetAttachmentSceneOverride = function ( f244_arg0, f244_arg1, f244_arg2 )
	local f244_local0 = {
		{
			col = CSV.gunsmithSetup.cols.weapon,
			key = f244_arg0
		},
		{
			col = CSV.gunsmithSetup.cols.category,
			key = f244_arg2
		},
		{
			col = CSV.gunsmithSetup.cols.variantID,
			key = f244_arg1
		}
	}
	local f244_local1 = StringTable[0x412BDBFB84C120D]( CSV.gunsmithSetup.file, f244_local0, CSV.gunsmithSetup.cols.scene )
	if not f244_local1 or #f244_local1 == 0 then
		f244_local0[3] = {
			col = CSV.gunsmithSetup.cols.variantID,
			key = WEAPON.baseVariant
		}
		f244_local1 = StringTable[0x412BDBFB84C120D]( CSV.gunsmithSetup.file, f244_local0, CSV.gunsmithSetup.cols.scene )
	end
	return f244_local1
end

GUNSMITH.GetAttachmentCategoryScene = function ( f243_arg0, f243_arg1, f243_arg2 )
	local f243_local0 = WEAPON.GetWeaponClass( f243_arg0 )
	local f243_local1 = GUNSMITH.GetAttachmentSceneOverride( f243_arg0, f243_arg1, f243_arg2 )
	if f243_local1 and 0 < #f243_local1 then
		return f243_local1
	elseif f243_local0 == WEAPON.LAUNCHERClass then
		local f243_local2 = WEAPON.GetClassBundleByWeaponClass( f243_local0 )
		local f243_local3
		if f243_local2 then
			f243_local3 = f243_local2[0x8F5A9FD7BEC1DD5]
			if not f243_local3 then
			
			else
				return f243_local3
			end
		end
		f243_local3 = ""
	end
	local f243_local2 = ATTACHMENT.GetAttachmentCategoryBundleByRef( f243_arg2 )
	local f243_local3 = f243_local2[0x186445579815F5A]
	if f243_local0 == WEAPON.pistolClass then
		f243_local3 = f243_local2[0xE2B6B30B35495BC]
	elseif f243_local0 == WEAPON.LMGClass or f243_local0 == WEAPON.sniperClass then
		f243_local3 = f243_local2[0x5AAAC00C627BEE4]
	end
	return f243_local3
end

local f0_local3 = function ( f242_arg0, f242_arg1, f242_arg2 )
	local f242_local0 = {}
	for f242_local4, f242_local5 in pairs( f242_arg0 ) do
		if f242_local5.data["slot" .. f242_arg2] == "1" and not f242_arg1[f242_local4] then
			table.insert( f242_local0, f242_local5 )
		end
	end
	return f242_local0
end

local f0_local4 = function ( f241_arg0, f241_arg1 )
	local f241_local0 = {}
	local f241_local1 = 0
	local f241_local2 = "selectionPriority"
	for f241_local6, f241_local7 in ipairs( f241_arg0[f241_arg1.slotIndex] ) do
		if f241_arg1.cellIndex == 4 then
			if f241_arg1.cellIndex - 1 <= f241_local7.cellRequirement then
				table.insert( f241_local0, f241_local7 )
				f241_local1 = f241_local1 + f241_local7[f241_local2]
			end
		end
		if f241_local7.cellRequirement == f241_arg1.cellIndex then
			table.insert( f241_local0, f241_local7 )
			f241_local1 = f241_local1 + f241_local7[f241_local2]
		end
	end
	if #f241_local0 == 0 then
		return nil
	end
	f241_local3 = 0
	f241_local4 = math.floor( math.random() * 100 + 0.5 ) / 100 * f241_local1
	f241_local5 = 1
	for f241_local9, f241_local10 in ipairs( f241_local0 ) do
		if f241_local4 <= f241_local3 + f241_local10[f241_local2] then
			f241_local5 = f241_local9
			break
		end
		f241_local3 = f241_local3 + f241_local10[f241_local2]
	end
	for f241_local9, f241_local10 in ipairs( f241_arg0[f241_arg1.slotIndex] ) do
		if f241_local10.ref == f241_local0[f241_local5].ref then
			table.remove( f241_arg0[f241_arg1.slotIndex], f241_local9 )
			break
		end
	end
	return f241_local0[f241_local5]
end

GUNSMITH.GetVariantName = function ( f240_arg0, f240_arg1 )
	if f240_arg0 == 0 then
		return Engine[0xED84C33EC5F01EA]( 0x23ABF974ED0021F )
	else
		return WEAPON.GetLootWeaponName( WEAPON.GetBlueprintBaseRefbyID( f240_arg1 ), f240_arg1 )
	end
end

GUNSMITH.GetSelectedBlueprintAttachIndexForCategory = function ( f239_arg0, f239_arg1 )
	for f239_local4, f239_local5 in ipairs( f239_arg1.attachments ) do
		if not String.IsNilOrEmpty( f239_local5.ref ) and f239_local5.ref ~= ATTACHMENT.none then
			local f239_local3 = LUI.Split( f239_local5.ref, "|" )
			if not ATTACHMENT.IsDefaultAttachment( WEAPON.GetWeaponModelName( f239_arg1.weapon, f239_arg1, {
				includeAttachments = true
			} ), f239_local3[1] ) and ATTACHMENT.GetCategory( f239_local5.ref ) == f239_arg0 then
				return f239_local4
			end
		end
	end
end

GUNSMITH.GetSelectedAttachIndexForCategory = function ( f238_arg0, f238_arg1 )
	for f238_local3, f238_local4 in ipairs( f238_arg1.attachments ) do
		if ATTACHMENT.GetCategory( f238_local4.ref ) == f238_arg0 then
			return f238_local3
		end
	end
end

GUNSMITH.GetAttachmentAndIndexForCategory = function ( f237_arg0, f237_arg1 )
	for f237_local4, f237_local5 in ipairs( f237_arg1.attachments ) do
		local f237_local3 = f237_local5.category
		if not f237_local3 then
			f237_local3 = ATTACHMENT.GetCategory( f237_local5.ref )
		end
		if f237_local3 == f237_arg0 then
			return f237_local5, f237_local4
		end
	end
end

GUNSMITH.GetGunsmithMenu = function ()
	local f236_local0
	if Engine[0x12586A3F4FB490E]() then
		f236_local0 = "Gunsmith"
	else
		f236_local0 = "InGameGunsmith"
	end
	return f236_local0
end

GUNSMITH.OpenShowcaseGunsmith = function ( f235_arg0 )
	LUI.FlowManager.RequestAddMenu( LOADOUT.GetGunsmithTabsMenuRef(), true, f235_arg0, false, {
		loadoutIndex = 0,
		forShowcase = true,
		commitShowcaseChanges = true,
		weaponSlot = 0
	}, true )
end

GUNSMITH.OpenGunsmith = function ( f234_arg0, f234_arg1, f234_arg2, f234_arg3 )
	if not Dvar[0x9E5BE3B4BBA4E0E]( 0x4F74CEB67644978 ) then
		return 
	end
	local f234_local0 = {
		weaponSlot = f234_arg2,
		loadoutIndex = f234_arg1
	}
	if CONDITIONS.IsWaveGameType() then
		f234_arg3 = false
	end
	LUI.FlowManager.RequestAddMenu( LOADOUT.GetGunsmithTabsMenuRef(), true, f234_arg0, f234_arg3, f234_local0, true )
end

GUNSMITH.GetLineOffsets = function ( f233_arg0, f233_arg1, f233_arg2 )
	local f233_local0 = {
		{
			col = CSV.gunsmithSetup.cols.weapon,
			key = f233_arg0
		},
		{
			col = CSV.gunsmithSetup.cols.category,
			key = f233_arg2
		},
		{
			col = CSV.gunsmithSetup.cols.variantID,
			key = f233_arg1
		}
	}
	local f233_local1 = StringTable[0xF6B0CC3002991DB]( CSV.gunsmithSetup.file, f233_local0 )
	if not f233_local1 or f233_local1 == -1 then
		f233_local0[3] = {
			col = CSV.gunsmithSetup.cols.variantID,
			key = WEAPON.baseVariant
		}
		f233_local1 = StringTable[0xF6B0CC3002991DB]( CSV.gunsmithSetup.file, f233_local0 )
	end
	return StringTable[0x2077452C28AB2FC]( CSV.gunsmithSetup.file, f233_local1, CSV.gunsmithSetup.cols.lineOffsetX ), StringTable[0x2077452C28AB2FC]( CSV.gunsmithSetup.file, f233_local1, CSV.gunsmithSetup.cols.lineOffsetY ), StringTable[0x2077452C28AB2FC]( CSV.gunsmithSetup.file, f233_local1, CSV.gunsmithSetup.cols.lineOffsetZ )
end

GUNSMITH.GetDefaultLineOffsets = function ( f232_arg0 )
	local f232_local0 = ATTACHMENT.GetAttachmentCategoryBundleByRef( f232_arg0 )
	local f232_local1 = f232_local0[0xA29D9BBF9F6B315]
	local f232_local2 = f232_local0[0xA29D8BBF9F6B162]
	local f232_local3 = f232_local0[0xA29D7BBF9F6AFAF]
	if f232_local1 and 0 < #f232_local1 then
		local f232_local4 = tonumber( f232_local1 )
		if not f232_local4 then
			f232_local1 = f232_local4
		end
	end
	f232_local1 = 0
end

GUNSMITH.GetFinalLineOffsets = function ( f231_arg0, f231_arg1, f231_arg2 )
	local f231_local0, f231_local1, f231_local2 = GUNSMITH.GetDefaultLineOffsets( f231_arg2 )
	local f231_local3, f231_local4, f231_local5 = GUNSMITH.GetLineOffsets( f231_arg0, f231_arg1, f231_arg2 )
	if f231_local3 and 0 < #f231_local3 then
		local f231_local6 = tonumber( f231_local3 )
		if not f231_local6 then
			f231_local0 = f231_local6
		else
			
		end
	end
	if f231_local4 and 0 < #f231_local4 then
		local f231_local6 = tonumber( f231_local4 )
		if not f231_local6 then
			f231_local1 = f231_local6
		else
			
		end
	end
	if f231_local5 and 0 < #f231_local5 then
		local f231_local6 = tonumber( f231_local5 )
		if not f231_local6 then
			f231_local2 = f231_local6
		else
			
		end
	end
	if Dvar[0x9E5BE3B4BBA4E0E]( 0x207212EF5C79A3A ) then
		f231_local0 = Dvar[0xEDCFC612B39E0C0]( 0x6A261C4324491B7 )
		f231_local1 = Dvar[0xEDCFC612B39E0C0]( 0x914534761F93E4 )
		f231_local2 = Dvar[0xEDCFC612B39E0C0]( 0xF6E39204F9D9DD5 )
	end
	return f231_local0, f231_local1, f231_local2
end

GUNSMITH.GetOverrideLineBone = function ( f230_arg0, f230_arg1, f230_arg2 )
	local f230_local0 = {
		{
			col = CSV.gunsmithSetup.cols.weapon,
			key = f230_arg0
		},
		{
			col = CSV.gunsmithSetup.cols.category,
			key = f230_arg2
		},
		{
			col = CSV.gunsmithSetup.cols.variantID,
			key = f230_arg1
		}
	}
	local f230_local1 = StringTable[0x412BDBFB84C120D]( CSV.gunsmithSetup.file, f230_local0, CSV.gunsmithSetup.cols.overrideLineBone )
	if not f230_local1 or #f230_local1 == 0 then
		f230_local0[3] = {
			col = CSV.gunsmithSetup.cols.variantID,
			key = WEAPON.baseVariant
		}
		f230_local1 = StringTable[0x412BDBFB84C120D]( CSV.gunsmithSetup.file, f230_local0, CSV.gunsmithSetup.cols.overrideLineBone )
	end
	return f230_local1
end

GUNSMITH.GetLineBone = function ( f229_arg0, f229_arg1, f229_arg2 )
	local f229_local0 = GUNSMITH.GetOverrideLineBone( f229_arg0, f229_arg1, f229_arg2 )
	local f229_local1
	if f229_local0 and 0 < #f229_local0 and not f229_local0 then
		f229_local1 = f229_local0
	else
		f229_local1 = ATTACHMENT.GetAttachmentCategoryBone( f229_arg2 )
	end
	return f229_local1
end

GUNSMITH.CanMakeModification = function ( f228_arg0, f228_arg1 )
	local f228_local0 = GUNSMITH.AreAnyModSlotsUnlocked( f228_arg0, LOOT.GetItemID( f228_arg1 ) )
	local f228_local1 = Dvar[0x9E5BE3B4BBA4E0E]( 0x65DC343A69576B4 )
	if f228_local1 then
		f228_local1 = f228_local0
	end
	return f228_local1
end

GUNSMITH.CheckNewAttachmentAndCustomization = function ( f227_arg0, f227_arg1 )
	local f227_local0 = false
	local f227_local1 = false
	if f227_arg1 then
		local f227_local2 = f227_arg1.weapon:get()
		if f227_local2 ~= WEAPON.none then
			local f227_local3 = ATTACHMENT.GetEquippedOptic( f227_arg1 )
			f227_local0 = Loot[0x2370C5DAF88C3CD]( f227_arg0, f227_local2 .. GUNSMITH.typeNamePostFix.attachment )
			local f227_local4 = Loot[0x2370C5DAF88C3CD]( f227_arg0, f227_local2 .. GUNSMITH.typeNamePostFix.camos )
			local f227_local5 = WEAPON.SupportsOptics( f227_local2 )
			if f227_local5 then
				f227_local5 = GUNSMITH.CheckNewReticleForOptic( f227_arg0, f227_local3 )
			end
			local f227_local6 = WEAPON.SupportsCosmetics( f227_local2 )
			if f227_local6 then
				f227_local6 = LOOT.IsCategoryNew( f227_arg0, LOOT.itemTypes.CHARM )
			end
			local f227_local7
			if 0 < WEAPON.GetMaxStickerSlotsForWeapon( f227_local2 ) then
				f227_local7 = LOOT.IsCategoryNew( f227_arg0, LOOT.itemTypes.STICKER )
			else
				f227_local7 = false
			end
			if not f227_local4 then
				f227_local1 = f227_local4
			elseif not f227_local5 then
				f227_local1 = f227_local5
			elseif not f227_local6 then
				f227_local1 = f227_local6
			else
				f227_local1 = f227_local7
			end
		end
	end
	return f227_local0, f227_local1
end

GUNSMITH.CheckNewGunsmithByWeapon = function ( f226_arg0, f226_arg1 )
	local f226_local0, f226_local1 = GUNSMITH.CheckNewAttachmentAndCustomization( f226_arg0, f226_arg1 )
	local f226_local2
	if not f226_local0 then
		f226_local2 = f226_local0
	else
		f226_local2 = f226_local1
	end
	return f226_local2
end

GUNSMITH.CheckNewReticleForOptic = function ( f225_arg0, f225_arg1 )
	if ATTACHMENT.SupportsCustomReticles( f225_arg1 ) then
		local f225_local0 = ATTACHMENT.GetOpticReticleCategory( ATTACHMENT.GetOpticRef( f225_arg1 ) )
		local f225_local1 = Loot[0x3CB161A5685F7FF]( f225_arg0, LOOT.typeNames[LOOT.itemTypes.RETICLE] )
		for f225_local2 = 1, #f225_local1, 1 do
			if f225_local0 == WEAPON.GetReticleCategory( LOOT.GetItemRef( f225_local1[f225_local2] ) ) then
				return true
			end
		end
	end
	return false
end

GUNSMITH.SetupAttachPoint = function ( f224_arg0, f224_arg1, f224_arg2, f224_arg3, f224_arg4 )
	local f224_local0 = GUNSMITH.GetLineBone( f224_arg1, f224_arg2, f224_arg3 )
	if not String.IsNilOrEmpty( f224_arg4 ) then
		f224_local0 = f224_arg4
	end
	if not String.IsNilOrEmpty( f224_local0 ) then
		if not f224_arg0._attachPoint then
			f224_arg0._attachPoint = MenuBuilder.BuildRegisteredType( "GunsmithAttachmentPointer", {
				controllerIndex = Engine[0x45B054C920178E9]()
			} )
			f224_arg0:addElement( f224_arg0._attachPoint )
			f224_arg0._attachPoint:SetAlpha( 0 )
		end
		f224_arg0._attachPoint:SetupAnchoredElement( {
			perspectiveScalingEnabled = false,
			entityNum = ClientWeapon[0x5DD69014A9C290]( FrontEndScene.ClientWeapons.Preview ),
			entityTag = f224_local0
		} )
		local f224_local1, f224_local2, f224_local3 = GUNSMITH.GetFinalLineOffsets( f224_arg1, f224_arg2, f224_arg3 )
		f224_arg0._attachPoint:SetTagOffsets( f224_local1, f224_local2, f224_local3 )
		f224_arg0._attachPoint:SetVisible( true )
	elseif f224_arg0._attachPoint then
		f224_arg0._attachPoint:closeTree()
		f224_arg0._attachPoint = nil
	end
end

GUNSMITH.SetupAttachLine = function ( f223_arg0, f223_arg1, f223_arg2, f223_arg3, f223_arg4 )
	local f223_local0 = GUNSMITH.GetLineBone( f223_arg1, f223_arg2, f223_arg3 )
	if not String.IsNilOrEmpty( f223_arg4 ) then
		f223_local0 = f223_arg4
	end
	if not String.IsNilOrEmpty( f223_local0 ) then
		if not f223_arg0._attachLine then
			f223_arg0._attachLine = LUI.UILine.new()
			f223_arg0._attachLine:setPriority( -5 )
			f223_arg0._attachLine:SetAlpha( 0 )
			if not CONDITIONS.IsGLGunsmithEnabled() then
				f223_arg0._attachLine:SetThickness( 1 )
				f223_arg0._attachLine:SetVertexPosition( LUI.UILine.START, 0, 0, 220, 32 )
			end
			f223_arg0:addElement( f223_arg0._attachLine )
		end
		f223_arg0._attachLine:SetVertexEntity( LUI.UILine.END, ClientWeapon[0x5DD69014A9C290]( FrontEndScene.ClientWeapons.Preview ) )
		f223_arg0._attachLine:SetVertexEntityTag( LUI.UILine.END, f223_local0 )
		f223_arg0._attachLine:AttachVertexToWorldModel( LUI.UILine.END )
		local f223_local1, f223_local2, f223_local3 = GUNSMITH.GetFinalLineOffsets( f223_arg1, f223_arg2, f223_arg3 )
		f223_arg0._attachLine:SetVertexTagSpacePosition( LUI.UILine.END, f223_local1, f223_local2, f223_local3 )
	elseif f223_arg0._attachLine then
		f223_arg0._attachLine:closeTree()
		f223_arg0._attachLine = nil
	end
end

GUNSMITH.GetFrontendTagWorldPositionAndAxis = function ( f222_arg0, f222_arg1, f222_arg2, f222_arg3 )
	local f222_local0 = GUNSMITH.GetLineBone( f222_arg1, f222_arg2, f222_arg3 )
	if f222_local0 and 0 < #f222_local0 then
		return Engine[0xC3B7925CCAC9430]( f222_arg0, ClientWeapon[0x5DD69014A9C290]( FrontEndScene.ClientWeapons.Preview ), f222_local0 )
	else
		
	end
end

GUNSMITH.GetCustomModPath = function ( f221_arg0, f221_arg1 )
	return "blueprints." .. f221_arg0 .. ".weaponSetup." .. f221_arg1
end

GUNSMITH.IsModSlotInUse = function ( f220_arg0, f220_arg1, f220_arg2 )
	local f220_local0 = Gunsmith[0x74F8974028A5B02]( f220_arg0, GUNSMITH.GetCustomModPath( f220_arg1, f220_arg2 ) .. ".blueprintName" )
	if f220_local0 ~= nil then
		return 0 < #f220_local0
	else
		return false
	end
end

GUNSMITH.GetAllCustomMods = function ( f219_arg0, f219_arg1, f219_arg2 )
	if not f219_arg1 then
		f219_arg1 = {}
	end
	if not f219_arg2 then
		f219_arg2 = {}
	end
	for f219_local9, f219_local10 in pairs( WEAPON.GetWeapons() ) do
		if f219_local10 and f219_local10[0x6D696AD252F1CB1] then
			local f219_local3 = f219_local10[0x6D696AD252F1CB1]
			local f219_local4 = WEAPON.GetWeaponDataForRef( f219_local3 )
			if f219_local4 then
				local f219_local5 = f219_arg2.byWeapons
				if f219_local5 then
					f219_local5 = not f219_arg2.byWeapons[f219_local3]
				end
				if not f219_local5 and f219_local4[0x4FB3C98AEEAB347] and 0 <= f219_local4[0x4FB3C98AEEAB347] then
					for f219_local6 = 0, GUNSMITH.maxMods - 1, 1 do
						if GUNSMITH.IsModSlotInUse( f219_arg0, f219_local3, f219_local6 ) then
							table.insert( f219_arg1, GUNSMITH.GetCustomMod( f219_arg0, f219_local3, f219_local6 ) )
						end
					end
				end
			end
		end
	end
	return f219_arg1
end

GUNSMITH.GetCustomModsForWeapon = function ( f218_arg0, f218_arg1 )
	local f218_local0 = {}
	for f218_local1 = 0, GUNSMITH.maxMods - 1, 1 do
		if GUNSMITH.IsModSlotInUse( f218_arg0, f218_arg1, f218_local1 ) then
			table.insert( f218_local0, GUNSMITH.GetCustomMod( f218_arg0, f218_arg1, f218_local1 ) )
		end
	end
	return f218_local0
end

GUNSMITH.GetCustomMod = function ( f217_arg0, f217_arg1, f217_arg2 )
	local f217_local0 = GUNSMITH.GetCustomModPath( f217_arg1, f217_arg2 )
	local f217_local1 = {
		blueprintName = Gunsmith[0x74F8974028A5B02]( f217_arg0, f217_local0 .. ".blueprintName" ),
		weapon = Gunsmith[0x74F8974028A5B02]( f217_arg0, f217_local0 .. ".weapon" ),
		lootID = tonumber( Gunsmith[0x74F8974028A5B02]( f217_arg0, f217_local0 .. ".lootItemID" ) ),
		variantID = Gunsmith[0x74F8974028A5B02]( f217_arg0, f217_local0 .. ".variantID" ),
		camo = Gunsmith[0x74F8974028A5B02]( f217_arg0, f217_local0 .. ".camo" ),
		cosmeticAttachment = Gunsmith[0x74F8974028A5B02]( f217_arg0, f217_local0 .. ".cosmeticAttachment" ),
		reticle = Gunsmith[0x74F8974028A5B02]( f217_arg0, f217_local0 .. ".reticle" ),
		isBlueprintIntact = Gunsmith[0x74F8974028A5B02]( f217_arg0, f217_local0 .. ".blueprintTuned" ) ~= 0
	}
	local f217_local2 = f217_local0 .. ".attachmentSetup"
	f217_local1.attachments = {}
	for f217_local3 = 0, WEAPON.maxAttachmentsPerWeapon - 1, 1 do
		local f217_local6 = f217_local2 .. "." .. f217_local3
		local f217_local7 = {
			ref = Gunsmith[0x74F8974028A5B02]( f217_arg0, f217_local6 .. ".attachment" ),
			variantID = Gunsmith[0x74F8974028A5B02]( f217_arg0, f217_local6 .. ".variantID" ),
			hasBPTune = Gunsmith[0x74F8974028A5B02]( f217_arg0, f217_local6 .. ".hasBPTune" )
		}
		if ATTACHMENT.IsAttachmentNeitherReceiverNorNone( f217_local7.ref ) then
			local f217_local8 = ClientWeapon[0xEA43B74913590D5]( Gunsmith[0x74F8974028A5B02]( f217_arg0, f217_local6 .. ".customTune.0" ), Gunsmith[0x74F8974028A5B02]( f217_arg0, f217_local6 .. ".customTune.1" ) )
			if next( f217_local8 ) ~= nil then
				f217_local7.tuningData = {
					x = f217_local8.customX or 0,
					y = f217_local8.customY or 0
				}
			end
		end
		table.insert( f217_local1.attachments, f217_local7 )
	end
	local f217_local3 = f217_local0 .. ".sticker"
	f217_local1.stickers = {}
	for f217_local4 = 0, WEAPON.maxStickersPerWeapon - 1, 1 do
		table.insert( f217_local1.stickers, Gunsmith[0x74F8974028A5B02]( f217_arg0, f217_local3 .. "." .. f217_local4 ) )
	end
	f217_local1.isCustom = true
	f217_local1.displayOrder = WEAPON.GetDisplayOrder( f217_local1.weapon )
	f217_local1.modSlot = f217_arg2
	return f217_local1
end

GUNSMITH.GetFirstFreeCustomModSlot = function ( f216_arg0, f216_arg1, f216_arg2 )
	for f216_local0 = 0, GUNSMITH.maxMods - 1, 1 do
		if GUNSMITH.IsModSlotUnlocked( f216_arg0, f216_arg2, f216_local0 ) and #Gunsmith[0x74F8974028A5B02]( f216_arg0, GUNSMITH.GetCustomModPath( f216_arg1, f216_local0 ) .. ".blueprintName" ) == 0 then
			return f216_local0
		end
	end
	return false
end

GUNSMITH.GetSlotUnlockRank = function ( f215_arg0, f215_arg1, f215_arg2 )
	return 0
end

GUNSMITH.GetNextModUnlockRank = function ( f214_arg0, f214_arg1, f214_arg2 )
	local f214_local0 = GUNSMITH.CountModSlotsUnlocked( f214_arg0, f214_arg2 )
	if f214_local0 <= GUNSMITH.maxMods then
		return GUNSMITH.GetSlotUnlockRank( f214_arg1, f214_arg2, f214_local0 )
	else
		return nil
	end
end

GUNSMITH.CountAvailableCustomModSlots = function ( f213_arg0, f213_arg1, f213_arg2 )
	local f213_local0 = 0
	for f213_local1 = 0, GUNSMITH.maxMods - 1, 1 do
		if GUNSMITH.IsModSlotUnlocked( f213_arg0, f213_arg2, f213_local1 ) and #Gunsmith[0x74F8974028A5B02]( f213_arg0, GUNSMITH.GetCustomModPath( f213_arg1, f213_local1 ) .. ".blueprintName" ) == 0 then
			f213_local0 = f213_local0 + 1
		end
	end
	return f213_local0
end

GUNSMITH.SaveAsCustomMod = function ( f212_arg0, f212_arg1, f212_arg2, f212_arg3 )
	if CONDITIONS.IsPlayerDataWeaponSetupsValidationEnabled() then
		local f212_local0, f212_local1 = WEAPON.IsWeaponTableValid( f212_arg0, f212_arg1 )
		if not f212_local0 then
			METRICS.SendDLogWeaponSetupValidationResults( f212_arg0, f212_local1, LOADOUT.DLOG_VALIDATION_DENY_EQUIP_SUFFIX, CoD.StatsGroup.NonGame )
			if CONDITIONS.IsPlayerDataWeaponSetupsValidationResetWeaponEnabled() then
				LUI.FlowManager.RequestErrorPopup( controller, Engine[0xED84C33EC5F01EA]( 0xD09E09A43DE9B80 ), Engine[0xED84C33EC5F01EA]( 0xE0AC73017303D25 ) )
				return false
			end
		end
	end
	local f212_local0 = GUNSMITH.GetCustomModPath( f212_arg1.weapon, f212_arg2 )
	Gunsmith[0x458814B87A126EE]( f212_arg0, f212_local0 .. ".blueprintName", f212_arg1.blueprintName )
	Gunsmith[0x458814B87A126EE]( f212_arg0, f212_local0 .. ".weapon", f212_arg1.weapon )
	Gunsmith[0x458814B87A126EE]( f212_arg0, f212_local0 .. ".variantID", f212_arg1.variantID )
	Gunsmith[0x458814B87A126EE]( f212_arg0, f212_local0 .. ".camo", f212_arg1.camo )
	Gunsmith[0x458814B87A126EE]( f212_arg0, f212_local0 .. ".cosmeticAttachment", f212_arg1.cosmeticAttachment )
	Gunsmith[0x458814B87A126EE]( f212_arg0, f212_local0 .. ".reticle", f212_arg1.reticle )
	Gunsmith[0x458814B87A126EE]( f212_arg0, f212_local0 .. ".lootItemID", f212_arg1.lootID )
	Gunsmith[0x458814B87A126EE]( f212_arg0, f212_local0 .. ".blueprintTuned", f212_arg3.blueprintTuned:get() )
	local f212_local1 = f212_local0 .. ".attachmentSetup"
	for f212_local2 = 0, #f212_arg1.attachments - 1, 1 do
		local f212_local5 = f212_local1 .. "." .. f212_local2
		Gunsmith[0x458814B87A126EE]( f212_arg0, f212_local5 .. ".attachment", f212_arg1.attachments[f212_local2 + 1].ref )
		Gunsmith[0x458814B87A126EE]( f212_arg0, f212_local5 .. ".variantID", f212_arg1.attachments[f212_local2 + 1].variantID )
		local f212_local6 = Gunsmith[0x458814B87A126EE]
		local f212_local7 = f212_arg0
		local f212_local8 = f212_local5 .. ".hasBPTune"
		local f212_local9 = f212_arg1.attachments[f212_local2 + 1].hasBPTune
		if not f212_local9 then
			f212_local9 = GUNSMITH.CAN_PRO_TUNE
		end
		f212_local6( f212_local7, f212_local8, f212_local9 )
		if ATTACHMENT.IsAttachmentNeitherReceiverNorNone( f212_arg1.attachments[f212_local2 + 1].ref, f212_arg1.attachments[f212_local2 + 1].category ) then
			Gunsmith[0x458814B87A126EE]( f212_arg0, f212_local5 .. ".customTune.0", f212_arg3.attachmentSetup[f212_local2].customTune[0]:get() )
			Gunsmith[0x458814B87A126EE]( f212_arg0, f212_local5 .. ".customTune.1", f212_arg3.attachmentSetup[f212_local2].customTune[1]:get() )
		end
	end
	local f212_local2 = f212_local0 .. ".sticker"
	for f212_local3 = 0, #f212_arg1.stickers - 1, 1 do
		Gunsmith[0x458814B87A126EE]( f212_arg0, f212_local2 .. "." .. f212_local3, f212_arg1.stickers[f212_local3 + 1] )
	end
	Gunsmith[0x72A7A297BA6F63F]( f212_arg0 )
	return true
end

GUNSMITH.DeleteCustomMod = function ( f211_arg0, f211_arg1, f211_arg2 )
	local f211_local0 = GUNSMITH.GetCustomModPath( f211_arg1, f211_arg2 )
	local f211_local1 = Gunsmith[0x74F8974028A5B02]( f211_arg0, f211_local0 .. ".blueprintName" )
	Gunsmith[0x458814B87A126EE]( f211_arg0, f211_local0 .. ".blueprintName", "" )
	Gunsmith[0x458814B87A126EE]( f211_arg0, f211_local0 .. ".weapon", WEAPON.none )
	Gunsmith[0x458814B87A126EE]( f211_arg0, f211_local0 .. ".variantID", WEAPON.baseVariant )
	Gunsmith[0x458814B87A126EE]( f211_arg0, f211_local0 .. ".camo", WEAPON.CamoNoneValue )
	Gunsmith[0x458814B87A126EE]( f211_arg0, f211_local0 .. ".cosmeticAttachment", WEAPON.CharmNoneValue )
	Gunsmith[0x458814B87A126EE]( f211_arg0, f211_local0 .. ".reticle", WEAPON.ReticleNoneValue )
	Gunsmith[0x458814B87A126EE]( f211_arg0, f211_local0 .. ".lootItemID", LOOT.emptyID )
	Gunsmith[0x458814B87A126EE]( f211_arg0, f211_local0 .. ".blueprintTuned", 0 )
	local f211_local2 = f211_local0 .. ".attachmentSetup"
	for f211_local3 = 0, WEAPON.maxAttachmentsPerWeapon - 1, 1 do
		local f211_local6 = f211_local2 .. "." .. f211_local3
		Gunsmith[0x458814B87A126EE]( f211_arg0, f211_local6 .. ".attachment", ATTACHMENT.none )
		Gunsmith[0x458814B87A126EE]( f211_arg0, f211_local6 .. ".variantID", ATTACHMENT.baseVariant )
		Gunsmith[0x458814B87A126EE]( f211_arg0, f211_local6 .. ".hasBPTune", GUNSMITH.CAN_PRO_TUNE )
		Gunsmith[0x458814B87A126EE]( f211_arg0, f211_local6 .. ".customTune.0", GUNSMITH.NO_CUSTOM_TUNING_VALUE )
		Gunsmith[0x458814B87A126EE]( f211_arg0, f211_local6 .. ".customTune.1", GUNSMITH.NO_CUSTOM_TUNING_VALUE )
	end
	local f211_local3 = f211_local0 .. ".sticker"
	for f211_local4 = 0, WEAPON.maxStickersPerWeapon - 1, 1 do
		Gunsmith[0x458814B87A126EE]( f211_arg0, f211_local3 .. "." .. f211_local4, WEAPON.StickerNoneValue )
	end
	local f211_local4 = LOADOUT.GetLoadoutSquadMember( f211_arg0 )
	for f211_local11, f211_local12 in ddlpairs( f211_local4.loadouts ) do
		for f211_local8, f211_local9 in ddlpairs( f211_local12.weaponSetups ) do
			if f211_local9.blueprintName:get() == f211_local1 then
				f211_local9.blueprintName:set( "" )
			end
		end
	end
	Gunsmith[0x72A7A297BA6F63F]( f211_arg0 )
end

GUNSMITH.GetUsedAttachmentIndices = function ( f210_arg0, f210_arg1, f210_arg2 )
	local f210_local0 = GUNSMITH.GetAttachmentCategories( f210_arg0, f210_arg2 )
	local f210_local1 = ATTACHMENT.GetAttachmentCategoryButton( ATTACHMENT.receiverCategory )
	local f210_local2 = ATTACHMENT.GetAttachmentCategoryButton( ATTACHMENT.conversionkit )
	local f210_local3 = {}
	for f210_local11, f210_local12 in ipairs( f210_local0 ) do
		if f210_arg1[f210_local12] and 0 < #f210_arg1[f210_local12] then
			local f210_local7 = ATTACHMENT.GetAttachmentCategoryButton( f210_local12 )
			if f210_local3[f210_local7] then
				for f210_local8 = 1, GUNSMITH.GetAllButtonIndices(), 1 do
					if not f210_local3[f210_local8] and f210_local8 ~= f210_local2 and f210_local8 ~= f210_local1 then
						f210_local3[f210_local8] = f210_local12
					end
				end
			end
			f210_local3[f210_local7] = f210_local12
		end
	end
	return f210_local3
end

GUNSMITH.GetCustomModName = function ( f209_arg0 )
	if 0 < #f209_arg0 then
		return string.sub( f209_arg0, GUNSMITH.modSlotChars + 1 )
	else
		return ""
	end
end

GUNSMITH.GetCustomModSlot = function ( f208_arg0 )
	return tonumber( string.sub( f208_arg0, 1, GUNSMITH.modSlotChars ) )
end

GUNSMITH.AreCustomModsEqual = function ( f207_arg0, f207_arg1 )
	local f207_local0
	if f207_arg0.blueprintName ~= f207_arg1.blueprintName or f207_arg0.weapon ~= f207_arg1.weapon then
		f207_local0 = false
	else
		f207_local0 = true
	end
	return f207_local0
end

GUNSMITH.AreModsEqual = function ( f206_arg0, f206_arg1 )
	if f206_arg0 then
		if f206_arg1.isCustom or 0 < #f206_arg0.blueprintName then
			return GUNSMITH.AreCustomModsEqual( f206_arg0, f206_arg1 )
		else
			local f206_local0
			if f206_arg0.weapon ~= f206_arg1.weapon or f206_arg0.variantID ~= f206_arg1.variantID then
				f206_local0 = false
			else
				f206_local0 = true
			end
		end
		return f206_local0
	else
		return false
	end
end

GUNSMITH.GenerateModName = function ( f205_arg0, f205_arg1 )
	return string.format( "%03d", f205_arg1 ) .. f205_arg0
end

GUNSMITH.GetWeaponPreviewCameraType = function ( f204_arg0 )
	local f204_local0 = WEAPON.GetWeaponClass( f204_arg0 )
	local f204_local1 = GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.NONE
	local f204_local2
	if f204_local0 ~= WEAPON.ARClass and f204_local0 ~= WEAPON.LMGClass and f204_local0 ~= WEAPON.sniperClass and f204_local0 ~= WEAPON.SMGClass and f204_local0 ~= WEAPON.DMRClass and f204_local0 ~= WEAPON.battleClass and f204_local0 ~= WEAPON.LAUNCHERClass and f204_local0 ~= WEAPON.MELEEClass and f204_local0 ~= WEAPON.MELEEClass2 then
		f204_local2 = false
	else
		f204_local2 = true
	end
	if f204_local2 then
		f204_local1 = GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.BIG_GUN
	elseif f204_local0 == WEAPON.SHOTGUNClass then
		f204_local1 = GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.BIG_SHOTGUN
	elseif f204_local0 == WEAPON.pistolClass then
		f204_local1 = GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.SMALL_GUN
	end
	return f204_local1
end

GUNSMITH.GetWeaponAvailableCategoryPreviewTable = function ( f203_arg0 )
	local f203_local0 = GUNSMITH.GetWeaponPreviewCameraType( f203_arg0 )
	local f203_local1 = {}
	for f203_local5, f203_local6 in pairs( ATTACHMENT.GetAllAttachmentCategories() ) do
		if ATTACHMENT.IsCameraPreviewAvailable( f203_local6, f203_local0 ) then
			table.insert( f203_local1, f203_local5 )
		end
	end
	return f203_local1
end

GUNSMITH.IsAnyWeaponAvailableCategoryPreviewData = function ( f202_arg0 )
	local f202_local0 = GUNSMITH.GetWeaponPreviewCameraType( f202_arg0 )
	for f202_local4, f202_local5 in pairs( ATTACHMENT.GetAllAttachmentCategories() ) do
		if ATTACHMENT.IsCameraPreviewAvailable( f202_local5, f202_local0 ) then
			return true
		end
	end
	return false
end

GUNSMITH.IsRemoveAllAttachmentsEnabled = function ()
	if Engine[0xDD9D856EA1C159E]() or Engine[0x2DA54CF5D6B7F02]() then
		return true
	else
		return Dvar[0x9E5BE3B4BBA4E0E]( 0x54D200B29ECC996 )
	end
end

GUNSMITH.AllowSaveCustomWeapon = function ( f200_arg0 )
	if f200_arg0 or IsPrivateMatch() or CONDITIONS.IsPrivateMatchInMenuStack() or CONDITIONS.AreCDLRulesActive() or CONDITIONS.IsInOfflineMenus() then
		return false
	else
		return Dvar[0x9E5BE3B4BBA4E0E]( 0x83AF5CA6980D576 )
	end
end

GUNSMITH.GetModSlotLootID = function ( f199_arg0, f199_arg1 )
	return GUNSMITH.modSlotBaseID + f199_arg0 * 1000 + f199_arg1
end

GUNSMITH.IsModSlotUnlocked = function ( f198_arg0, f198_arg1, f198_arg2 )
	return GUNSMITH.AllowSaveCustomWeapon()
end

GUNSMITH.AreAnyModSlotsUnlocked = function ( f197_arg0, f197_arg1 )
	for f197_local0 = 0, GUNSMITH.maxMods - 1, 1 do
		if GUNSMITH.IsModSlotUnlocked( f197_arg0, f197_arg1, f197_local0 ) then
			return true
		end
	end
	return false
end

GUNSMITH.CountModSlotsUnlocked = function ( f196_arg0, f196_arg1 )
	local f196_local0 = 0
	for f196_local1 = 0, GUNSMITH.maxMods - 1, 1 do
		if GUNSMITH.IsModSlotUnlocked( f196_arg0, f196_arg1, f196_local1 ) then
			f196_local0 = f196_local0 + 1
		end
	end
	return f196_local0
end

GUNSMITH.GetGunsmithChallengeCamoCategory = function ( f195_arg0, f195_arg1, f195_arg2 )
	local f195_local0 = Challenge.GetLootID( f195_arg0, f195_arg1, f195_arg2 )
	if not String.IsNilOrEmpty( f195_local0 ) then
		local f195_local1 = split( f195_local0, "|" )
		local f195_local2 = tonumber( f195_local1[1] )
		if f195_local2 and LOOT.GetTypeForID( f195_local2 ) == LOOT.itemTypes.CAMO then
			local f195_local3 = WEAPON.GetCamoDataForRef( WEAPON.GetCamoRef( f195_local2 ) )
			return WEAPON.GetCamoCategory( f195_local3[0x9E9C01960F4C582] )
		end
	end
	return nil
end

GUNSMITH.GetGunsmithChallengeRelatedWeaponID = function ( f194_arg0, f194_arg1, f194_arg2 )
	local f194_local0 = Challenge.GetLootID( f194_arg0, f194_arg1, f194_arg2 )
	if not String.IsNilOrEmpty( f194_local0 ) then
		local f194_local1 = split( f194_local0, "|" )
		local f194_local2 = tonumber( f194_local1[1] )
		if f194_local2 and LOOT.GetTypeForID( f194_local2 ) == LOOT.itemTypes.CAMO then
			return LOOT.GetLootItemRelatedWeapon( f194_local2, LOOT.itemTypes.CAMO )
		end
	end
	return nil
end

GUNSMITH.GetGunsmithChallengeRelatedCamoInfo = function ( f193_arg0, f193_arg1, f193_arg2 )
	WEAPON.SetupWeaponCamoCategories()
	local f193_local0 = Challenge.GetLootID( f193_arg0, f193_arg1, f193_arg2 )
	if not String.IsNilOrEmpty( f193_local0 ) then
		local f193_local1 = split( f193_local0, "|" )
		local f193_local2 = tonumber( f193_local1[1] )
		if f193_local2 and LOOT.GetTypeForID( f193_local2 ) == LOOT.itemTypes.CAMO then
			local f193_local3 = WEAPON.GetCamoDataByID( f193_local2 )
			if f193_local3 then
				local f193_local4 = f193_local3[0x4BCADBA8E631B86] and Engine[0xED84C33EC5F01EA]( f193_local3[0x4BCADBA8E631B86] ) or ""
				local f193_local5 = f193_local3[0xAB612888528489A] and f193_local3[0xAB612888528489A] or ""
				local f193_local6 = SWATCHES[0x5B14DE9B77E4451].Yellow
				if PROJECT[0x5A05E13AC947C99][0x62DD8D6DEED5589][f193_local3[0xA86D464182EDEB5]][0x9E9C01960F4C582] == WEAPON.COMPLETIONIST_CAMO_REF then
					local f193_local7 = GUNSMITH.COMPLETIONIST_CAMO_TYPE_COLOR[GUNSMITH.GetCompletionistCamoTypeFromCamoRef( f193_local3[0x9E9C01960F4C582] )]
					if not f193_local7 then
						LUI.FlowManager.RequestDevErrorPopup( "ERROR", "CamoData.@ref contains incorrect data about the type of mastery" )
					else
						f193_local6 = f193_local7
					end
				end
				return {
					name = f193_local4,
					image = f193_local5,
					color = f193_local6
				}
			end
			LUI.FlowManager.RequestDevErrorPopup( "ERROR", "CamoData is not found for camoID " .. f193_local1[1] )
		end
	end
	return nil
end

GUNSMITH.IsWeaponPartsAttachment = function ( f192_arg0 )
	return GUNSMITH.AttachmentSetupTypeMap[f192_arg0] == GUNSMITH.AttachmentSetupType.WEAPON_PART
end

GUNSMITH.IsWeaponPartsAttachmentByRef = function ( f191_arg0 )
	return GUNSMITH.IsWeaponPartsAttachment( ATTACHMENT.GetCategory( f191_arg0 ) )
end

GUNSMITH.IsAttachmentSetupFull = function ( f190_arg0, f190_arg1 )
	local f190_local0 = GUNSMITH.AttachmentSetupTypeMap[f190_arg0]
	local f190_local1 = GUNSMITH.AttachmentSetupDataMap[f190_local0].minIndex
	local f190_local2 = GUNSMITH.AttachmentSetupDataMap[f190_local0].maxIndex
	for f190_local7, f190_local8 in ddlpairs( f190_arg1.attachmentSetup ) do
		if f190_local1 <= f190_local7 and f190_local7 <= f190_local2 then
			local f190_local6 = ATTACHMENT.GetRefFromSetup( f190_local8 )
			if f190_local6 == nil or f190_local6 == ATTACHMENT.none then
				return false
			end
		end
	end
	return true
end

GUNSMITH.GetAvailableAttachmentSetupIndex = function ( f189_arg0, f189_arg1 )
	local f189_local0 = nil
	local f189_local1 = GUNSMITH.AttachmentSetupTypeMap[f189_arg0]
	local f189_local2 = GUNSMITH.AttachmentSetupDataMap[f189_local1].minIndex
	local f189_local3 = GUNSMITH.AttachmentSetupDataMap[f189_local1].maxIndex
	for f189_local7, f189_local8 in ddlpairs( f189_arg1.attachmentSetup ) do
		if f189_local2 <= f189_local7 and f189_local7 <= f189_local3 and ATTACHMENT.GetRefFromSetup( f189_local8 ) == ATTACHMENT.none then
			f189_local0 = f189_local7 + 1
		end
	end
	return f189_local0
end

GUNSMITH.EquipBaseWeaponPartsAttachment = function ( f188_arg0, f188_arg1 )
	local f188_local0 = LUI.Split( WEAPON.GetWeaponModelNameFromPlayerData( f188_arg1.weapon:get(), f188_arg1, {
		includeAttachments = true,
		controllerIndex = f188_arg0
	} ), "+" )
	local f188_local1 = GUNSMITH.AttachmentSetupDataMap[GUNSMITH.AttachmentSetupType.WEAPON_PART].minIndex
	local f188_local2 = GUNSMITH.AttachmentSetupDataMap[GUNSMITH.AttachmentSetupType.WEAPON_PART].maxIndex
	for f188_local3 = 2, #f188_local0, 1 do
		local f188_local6 = f188_local0[f188_local3]
		if not String.IsNilOrEmpty( f188_local6 ) then
			local f188_local7 = ATTACHMENT.GetBaseRefForTunedAttachment( f188_local6 )
			local f188_local8 = LUI.Split( f188_local7, "|" )
			if 1 < #f188_local8 then
				local f188_local9 = Engine[0xFC084BF31D917C5]( f188_local0[1], f188_local8[1], tonumber( f188_local8[2] ) )
				if f188_local9 and f188_local9[0x6DB25C2B8532150] then
					local f188_local10 = ATTACHMENT.GetBundleByRef( f188_local9[0x6DB25C2B8532150] )
					if f188_local10 then
						if f188_local10 then
							local f188_local11 = f188_local10[0xBE72D7E1D0B16E5]
							if not f188_local11 then
								f188_local7 = f188_local11
							else
								f188_local7 = f188_local8[1]
							end
						end
						f188_local7 = f188_local8[1]
					end
				end
			end
			if GUNSMITH.IsWeaponPartsAttachment( ATTACHMENT.GetCategory( f188_local7 ) ) then
				local f188_local11 = ATTACHMENT.GetRefFromSetup( f188_arg1.attachmentSetup[f188_local1] )
				if f188_local11 ~= nil and f188_local11 == ATTACHMENT.none then
					ATTACHMENT.SetPlayerDataRef( f188_arg1.attachmentSetup[f188_local1], f188_local7 )
					f188_arg1.attachmentSetup[f188_local1].variantID:set( ATTACHMENT.baseVariant )
				end
				f188_local1 = f188_local1 + 1
			end
		end
	end
end

local f0_local5 = function ()
	return Dvar[0x9E5BE3B4BBA4E0E]( 0xF66BC1C56BC25C7 )
end

GUNSMITH.GetWeaponZOffset = function ( f186_arg0, f186_arg1, f186_arg2, f186_arg3 )
	local f186_local0 = 0
	local f186_local1 = 0
	local f186_local2 = 0
	local f186_local3 = 0
	local f186_local4, f186_local5, f186_local6, f186_local7 = nil
	local f186_local8 = false
	for f186_local12, f186_local13 in ipairs( f186_arg2 ) do
		local f186_local14 = f186_local13.ref
		local f186_local15 = ATTACHMENT.GetCategory( f186_local14 )
		if f186_local15 == ATTACHMENT.magazineCategory then
			f186_local4 = f186_local14
			f186_local8 = true
		end
		if f186_local15 == ATTACHMENT.undermountCategory then
			f186_local5 = f186_local14
			f186_local8 = true
		end
		if f186_local15 == ATTACHMENT.receiverCategory then
			f186_local6 = f186_local14
		end
		if f186_local15 == ATTACHMENT.conversionkit then
			f186_local7 = f186_local14
			f186_local8 = true
		end
	end
	if not f186_local8 and f186_arg3 then
		f186_local9 = f186_arg0._weaponModel._weaponModelName
		if f186_local9 == nil then
			f186_local9 = WEAPON.GetWeaponModelName( f186_arg0._weaponTable.weapon, f186_arg0._weaponTable, {
				includeAttachments = true
			} )
		end
		for f186_local14, f186_local15 in ipairs( GL_HACK.GetDefaultAttachmentData( f186_local9 ) ) do
			if string.match( f186_local15, "mag" ) or string.match( f186_local15, "drum" ) or string.match( f186_local15, "belt" ) then
				f186_local4 = f186_local15
			end
			if string.match( f186_local15, "rec" ) then
				f186_local6 = f186_local15
			end
		end
	end
	f186_local9 = Engine[0x6093D047200548]
	f186_local11 = 0xC2C9813BB16552F
	if not f186_local4 then
		f186_local12 = f186_local4
	else
		f186_local12 = ""
	end
	f186_local9 = f186_local9( f186_local11 .. f186_local12 )
	f186_local10 = Engine[0x6093D047200548]
	f186_local12 = 0xC2C9813BB16552F
	if not f186_local5 then
		f186_local13 = f186_local5
	else
		f186_local13 = ""
	end
	f186_local10 = f186_local10( f186_local12 .. f186_local13 )
	f186_local11 = Engine[0x6093D047200548]
	f186_local13 = 0xC2C9813BB16552F
	local f186_local14
	if not f186_local6 then
		f186_local14 = f186_local6
	else
		f186_local14 = ""
	end
	f186_local11 = f186_local11( f186_local13 .. f186_local14 )
	f186_local12 = Engine[0x6093D047200548]
	f186_local14 = 0xC2C9813BB16552F
	local f186_local15
	if not f186_local7 then
		f186_local15 = f186_local7
	else
		f186_local15 = ""
	end
	f186_local12 = f186_local12( f186_local14 .. f186_local15 )
	if f186_local9 then
		f186_local13 = f186_local9[0x271998548F2F402]
		if not f186_local13 then
			f186_local0 = f186_local13
		else
			
		end
	end
	if f186_local10 then
		f186_local13 = f186_local10[0x271998548F2F402]
		if not f186_local13 then
			f186_local1 = f186_local13
		else
			
		end
	end
	if f186_local11 then
		f186_local13 = f186_local11[0x271998548F2F402]
		if not f186_local13 then
			f186_local2 = f186_local13
		else
			
		end
	end
	if f186_local12 then
		f186_local13 = f186_local12[0x271998548F2F402]
		if not f186_local13 then
			f186_local3 = f186_local13
		else
			
		end
	end
	if f186_local3 ~= 0 then
		return f186_local3
	else
		return math.max( f186_local0, f186_local1, f186_local2 )
	end
end

GUNSMITH.UpdateAmmoModel = function ( f184_arg0, f184_arg1 )
	local f184_local0 = Engine[0x17AFF3F28020742]( f184_arg1, FrontEndScene.ClientWeapons.Preview )
	if f184_local0 and Enum[0x6E1A74C5AE70B51][0x40EE77908793B6D] ~= nil then
		STREAMING.RequestModels( f184_arg1, {
			requesterWidget = f184_arg0,
			modelType = STREAMING.ModelTypes.ClientModel,
			models = {
				f184_local0
			}
		} )
		MenuUtils.SetupXModelsLoadedCallback( f184_arg0, f184_arg1, {
			{
				name = f184_local0,
				type = Enum[0x6E1A74C5AE70B51][0x40EE77908793B6D]
			}
		}, function ()
			if f184_arg0() then
				CLIENT_MODEL.SetModel( CLIENT_MODEL.coreMPModels.AMMO_DISPLAY, f184_arg0 .. "_fe" )
			else
				CLIENT_MODEL.SetModel( CLIENT_MODEL.coreMPModels.AMMO_DISPLAY, f184_arg0 )
			end
		end )
	end
end

GUNSMITH.GetCategoryLockDetails = function ( f183_arg0, f183_arg1 )
	local f183_local0 = {}
	local f183_local1 = StringTable[0x8073B436CDE1BF]( CSV.attachmentCategoryLocks.file, CSV.attachmentCategoryLocks.cols.ref, f183_arg1 )
	if f183_local1 and 0 <= f183_local1 then
		local f183_local2 = CSV.ReadRow( CSV.attachmentCategoryLocks, f183_local1 )
		for f183_local3 = 1, GUNSMITH.NUM_BLOCKED_CATEGORIES, 1 do
			local f183_local6 = split( f183_local2["category" .. tostring( f183_local3 )], "|" )
			local f183_local7 = f183_local6[1]
			if not String.IsNilOrEmpty( f183_local7 ) then
				local f183_local8 = f183_local6[2]
				if not String.IsNilOrEmpty( f183_local8 ) then
					local f183_local9 = ATTACHMENT.GetIDByRef( f183_local8 )
					if f183_local9 then
						f183_local0[f183_local7] = {
							isLocked = not (CONDITIONS[0x2F9F94DF6F92292]() and Dvar[0x9E5BE3B4BBA4E0E]( 0xFB20D260CB501E6 ) or LOOT.IsUnlockedWithID( f183_arg0, f183_local9 )),
							unlockLevel = PROGRESSION.GetLootUnlockWeaponLevel( f183_arg1, f183_local9 ) + 1
						}
					end
				end
			end
		end
	end
	return f183_local0
end

GUNSMITH.EquipPreservedAttachment = function ( f182_arg0, f182_arg1, f182_arg2, f182_arg3, f182_arg4 )
	local f182_local0 = GUNSMITH.AttachmentSetupDataMap[GUNSMITH.AttachmentSetupType.WEAPON_PART].minIndex
	local f182_local1 = GUNSMITH.AttachmentSetupDataMap[GUNSMITH.AttachmentSetupType.WEAPON_PART].maxIndex
	local f182_local2 = GUNSMITH.AttachmentSetupDataMap[GUNSMITH.AttachmentSetupType.ATTACHMENT].minIndex
	local f182_local3 = GUNSMITH.AttachmentSetupDataMap[GUNSMITH.AttachmentSetupType.ATTACHMENT].maxIndex
	local f182_local4 = GUNSMITH.GetCategoryLockDetails( f182_arg0, f182_arg4 )
	local f182_local5 = {}
	for f182_local11, f182_local12 in pairs( f182_arg3 ) do
		local f182_local13 = ATTACHMENT.GetCategory( f182_local12 )
		local f182_local14 = GUNSMITH.IsWeaponPartsAttachment( f182_local13 )
		local f182_local15 = ATTACHMENT.GetBaseName( f182_local12, f182_local13, f182_arg2, f182_arg0 )
		local f182_local9
		if f182_local4 then
			f182_local9 = f182_local4
		else
			f182_local9 = f182_local4[f182_local13]
			if f182_local9 then
				f182_local9 = not f182_local4[f182_local13].isLocked
			end
		end
		if f182_local9 then
			if f182_local14 then
				local f182_local10 = f182_local0
				if ATTACHMENT.GetCategory( ATTACHMENT.GetRefFromSetup( f182_arg1.attachmentSetup[f182_local10] ), f182_arg2 ) ~= f182_local13 then
					
				else
					
				end
				if not LUI.StringIsNilOrEmpty( f182_local15 ) then
					table.insert( f182_local5, f182_local12 )
				else
					ATTACHMENT.SetPlayerDataRef( f182_arg1.attachmentSetup[f182_local10], f182_local12 )
					f182_arg1.attachmentSetup[f182_local10].variantID:set( ATTACHMENT.baseVariant )
					goto basicblock_18:
				end
			end
			if not LUI.StringIsNilOrEmpty( f182_local15 ) then
				table.insert( f182_local5, f182_local12 )
			else
				ATTACHMENT.SetPlayerDataRef( f182_arg1.attachmentSetup[f182_local11], f182_local12 )
				f182_arg1.attachmentSetup[f182_local11].variantID:set( ATTACHMENT.baseVariant )
			end
		end
	end
	return f182_local5
end

GUNSMITH.InitLoadoutBaseWeaponPartsAttachment = function ( f181_arg0 )
	local f181_local0 = LOADOUT.GetLoadoutSquadMember( f181_arg0 )
	for f181_local5, f181_local6 in ddlpairs( f181_local0.loadouts ) do
		for f181_local4 = 0, 1, 1 do
			GUNSMITH.EquipBaseWeaponPartsAttachment( f181_arg0, f181_local6.weaponSetups[f181_local4] )
		end
	end
end

GUNSMITH.GetAttachmentRefsByType = function ( f180_arg0, f180_arg1 )
	local f180_local0 = {}
	local f180_local1 = GUNSMITH.AttachmentSetupTypeMap[f180_arg0]
	local f180_local2 = GUNSMITH.AttachmentSetupDataMap[f180_local1].minIndex
	local f180_local3 = GUNSMITH.AttachmentSetupDataMap[f180_local1].maxIndex
	for f180_local7, f180_local8 in ddlpairs( f180_arg1.attachmentSetup ) do
		local f180_local9 = ATTACHMENT.GetRefFromSetup( f180_local8 )
		if f180_local2 <= f180_local7 and f180_local7 <= f180_local3 and f180_local9 ~= ATTACHMENT.none then
			table.insert( f180_local0, f180_local9 )
		end
	end
	return f180_local0
end

GUNSMITH.GetEquipCounts = function ( f179_arg0, f179_arg1, f179_arg2, f179_arg3 )
	local f179_local0 = 0
	local f179_local1 = 0
	local f179_local2 = 0
	local f179_local3 = 0
	if not f179_arg3 then
		f179_arg3 = {}
	end
	f179_arg3.includeAttachments = true
	f179_arg3.includeCamos = false
	f179_arg3.includeStickers = false
	local f179_local4 = WEAPON.GetWeaponModelName( f179_arg0, f179_arg1, f179_arg3 )
	local f179_local5 = split( f179_local4, "+" )
	local f179_local6 = GL_HACK.GetWeaponMPRef( f179_arg0 )
	for f179_local16, f179_local17 in ipairs( f179_arg2 ) do
		local f179_local10 = f179_local17.baseRef
		if not f179_local10 then
			f179_local10 = f179_local17.ref
			if not f179_local10 then
				f179_local10 = f179_local17
			end
		end
		local f179_local11 = ATTACHMENT.IsSelectableAttachment( f179_local10, f179_local6 )
		local f179_local12
		if f179_local10 ~= ATTACHMENT.none and not ATTACHMENT.IsDefaultAttachment( f179_local4, f179_local10 ) then
			f179_local12 = f179_local11
		else
			f179_local12 = false
		end
		if f179_local17.category == ATTACHMENT.conversionkit and f179_local11 and not f179_local12 then
			f179_local12 = not LUI.IsItemInArray( GL_HACK.GetDefaultAttachmentData( WEAPON.GetWeaponModelNameFromRef( f179_arg0 ) ), f179_local10 )
		end
		if f179_local12 then
			local f179_local13 = GUNSMITH.IsWeaponPartsAttachment( ATTACHMENT.GetCategory( f179_local10 ) )
			local f179_local14 = ATTACHMENT.IsAMP( f179_local10 )
			if not f179_local14 then
				f179_local14 = f179_local17.category == ATTACHMENT.conversionkit
			end
			if f179_local14 then
				local f179_local15 = f179_local3 + 1
				if not f179_local15 then
					f179_local3 = f179_local15
				else
					
				end
			end
			if f179_local13 then
				f179_local1 = f179_local1 + 1
			end
			f179_local0 = f179_local0 + 1
			if Restrictions.IsAttachmentRestricted( f179_local10, f179_arg0 ) then
				f179_local2 = f179_local2 + 1
			end
		end
	end
	return {
		attachmentCount = f179_local0,
		weaponPartCount = f179_local1,
		restrictedAttachmentCount = f179_local2,
		ampAttachments = f179_local3
	}
end

GUNSMITH.EnterFiringRange = function ( f178_arg0, f178_arg1, f178_arg2 )
	local f178_local0 = f178_arg2.weaponPlayerData
	local f178_local1 = f178_arg2.loadoutPlayerData
	local f178_local2 = f178_arg2.weaponSlot
	local f178_local3 = f178_arg2.qualifier
	local f178_local4 = {
		currentWeaponTable = WEAPON.GenerateWeaponTable( f178_local0 )
	}
	local f178_local5
	if f178_local2 == WEAPON.PrimarySlot then
		f178_local5 = WEAPON.SecondarySlot
		if not f178_local5 then
		
		else
			f178_local4.secondaryWeaponTable = WEAPON.GenerateWeaponTable( f178_local1.weaponSetups[f178_local5] )
			if 0 < tonumber( f178_local4.currentWeaponTable.variantID ) then
				f178_local4.currentWeaponTable.lootName = WEAPON.GetLootWeaponName( f178_local4.currentWeaponTable.weapon, f178_local4.currentWeaponTable.lootID )
			end
			if 0 < tonumber( f178_local4.secondaryWeaponTable.variantID ) then
				f178_local4.secondaryWeaponTable.lootName = WEAPON.GetLootWeaponName( f178_local4.secondaryWeaponTable.weapon, f178_local4.secondaryWeaponTable.lootID )
			end
			WEAPON.OpenFiringRange( f178_arg1, f178_local4 )
			if f178_local3 == "keyboard" or f178_local3 == "gamepad" then
				Engine[0xC4146BA76D0F982]( CoD.SFX.MouseClick )
			end
		end
	end
	f178_local5 = WEAPON.PrimarySlot
end

GUNSMITH.GetTableWithOnlyEquippedAttachment = function ( f177_arg0, f177_arg1 )
	local f177_local0 = {
		weapon = f177_arg0,
		attachments = {}
	}
	f177_local0.attachments[1] = {}
	f177_local0.attachments[1].ref = f177_arg1.ref
	local f177_local1 = f177_local0.attachments[1]
	local f177_local2 = f177_arg1.variantID
	if not f177_local2 then
		f177_local2 = ATTACHMENT.baseVariant
	end
	f177_local1.variantID = f177_local2
	f177_local0.attachments[1].hasBPTune = f177_arg1.hasBPTune
	f177_local0.attachments[1].tuningData = f177_arg1.tuningData
	for f177_local1 = 2, GUNSMITH.GetGunsmithMaxCategories(), 1 do
		f177_local0.attachments[f177_local1] = {}
		f177_local0.attachments[f177_local1].ref = "none"
		f177_local0.attachments[f177_local1].variantID = -1
	end
	return f177_local0
end

GUNSMITH.GetCurAttachmentRefByCategory = function ( f176_arg0, f176_arg1 )
	local f176_local0 = nil
	for f176_local4, f176_local5 in ipairs( f176_arg1.attachments ) do
		local f176_local6 = ATTACHMENT.GetRef( f176_local5.ref, f176_arg1.weapon )
		if ATTACHMENT.GetCategory( f176_local6 ) == f176_arg0 then
			f176_local0 = f176_local6
			break
		end
	end
	return f176_local0
end

GUNSMITH.GetWeaponsPlayerData = function ( f175_arg0, f175_arg1, f175_arg2 )
	local f175_local0 = LOADOUT.GetFrontendLoadoutWithShowcase( f175_arg0, f175_arg1, f175_arg2 )
	return f175_local0.weaponSetups
end

GUNSMITH.GetWeaponPlayerData = function ( f174_arg0, f174_arg1, f174_arg2, f174_arg3 )
	local f174_local0 = GUNSMITH.GetWeaponsPlayerData( f174_arg0, f174_arg1, f174_arg3 )
	return f174_local0[f174_arg2]
end

GUNSMITH.GetEquippedWeaponTable = function ( f173_arg0, f173_arg1, f173_arg2, f173_arg3 )
	return WEAPON.GenerateWeaponTable( GUNSMITH.GetWeaponPlayerData( f173_arg0, f173_arg1, f173_arg2, f173_arg3 ) )
end

GUNSMITH.GetEquippedWeaponRef = function ( f172_arg0, f172_arg1, f172_arg2 )
	local f172_local0 = GUNSMITH.GetEquippedWeaponTable( f172_arg0, f172_arg1, f172_arg2 )
	return f172_local0.weapon
end

GUNSMITH.GetCurrentEquippedWeaponData = function ( f171_arg0, f171_arg1 )
	if not f171_arg1 then
		f171_arg1 = WEAPON.PrimarySlot
	end
	return GUNSMITH.GetEquippedWeaponTable( f171_arg0, LOADOUT.GetLoadoutIndex( f171_arg0 ), f171_arg1 )
end

GUNSMITH.GetSortedModifiersValuesTables = function ( f168_arg0 )
	local f168_local0 = #f168_arg0
	local f168_local1 = {}
	local f168_local2 = {}
	for f168_local3 = 1, f168_local0, 1 do
		local f168_local6 = f168_arg0[f168_local3].name
		local f168_local7 = f168_arg0[f168_local3].value
		if 0.009 < f168_local7 then
			table.insert( f168_local1, {
				name = f168_local6,
				value = f168_local7
			} )
		end
		if f168_local7 < -0.009 then
			table.insert( f168_local2, {
				name = f168_local6,
				value = f168_local7
			} )
		end
	end
	table.sort( f168_local1, function ( f170_arg0, f170_arg1 )
		return f170_arg1.value < f170_arg0.value
	end )
	table.sort( f168_local2, function ( f169_arg0, f169_arg1 )
		return f169_arg0.value < f169_arg1.value
	end )
	return f168_local1, f168_local2
end

GUNSMITH.GetSortedModifiersValues = function ( f167_arg0 )
	local f167_local0, f167_local1 = GUNSMITH.GetSortedModifiersValuesTables( f167_arg0 )
	return {
		positiveModifiers = f167_local0,
		negativeModifiers = f167_local1
	}
end

GUNSMITH.GetWeaponDetails = function ( f166_arg0, f166_arg1, f166_arg2 )
	if not f166_arg2 then
		f166_arg2 = {}
	end
	local f166_local0 = WEAPON.GetAmmoData( f166_arg0, f166_arg1 )
	if f166_arg1 then
		if f166_arg1.lootID == LOOT.emptyID then
			f166_arg1.lootID = LOOT.GetItemID( f166_arg1.weapon )
		end
		f166_local0.baseName = WEAPON.GetName( f166_arg1.weapon )
		f166_local0.name = WEAPON.GetLootWeaponNameFromWeaponTable( f166_arg0, f166_arg1 )
	end
	f166_local0.isNameAlreadyLocalized = true
	if f166_arg2.showMods ~= false then
		local f166_local1 = GUNSMITH.GetEquipCounts( f166_arg1.weapon, f166_arg1, f166_arg1.attachments )
		f166_local0.modCount = f166_local1.attachmentCount
		f166_local0.maxModCount = GUNSMITH.maxMods
	end
	return f166_local0
end

GUNSMITH.GetBaseWeaponAttributesDetails = function ( f165_arg0, f165_arg1 )
	local f165_local0 = WEAPON.GetWeaponModelName
	local f165_local1 = f165_arg1.weapon
	local f165_local2 = f165_arg1
	local f165_local3 = {
		includeAttachments = true
	}
	local f165_local4 = f165_arg1.variantID
	if f165_local4 then
		if f165_arg1.variantID > WEAPON.baseVariant then
			f165_local4 = not f165_arg1.isCustom
		else
			f165_local4 = false
		end
	end
	f165_local3.includeBlueprintTune = f165_local4
	local f165_local5 = ClientWeapon[0x75228338D174290]( f165_arg0, f165_local0( f165_local1, f165_local2, f165_local3 ), false, true, true )
	f165_local2 = ClientWeapon[0x75228338D174290]( f165_arg0, WEAPON.GetWeaponModelNameFromRef( f165_arg1.weapon ), false, true, true )
	f165_local3 = nil
	if f165_local5 and f165_local2 then
		f165_local3 = {}
		for f165_local8, f165_local9 in pairs( f165_local5 ) do
			f165_local3[f165_local8] = {
				total = f165_local2[f165_local8],
				weapon = f165_local2[f165_local8],
				attachment = f165_local9 - f165_local2[f165_local8]
			}
		end
	end
	return f165_local3
end

GUNSMITH.GetBaseCompareWeaponAttributesDetails = function ( f164_arg0, f164_arg1, f164_arg2 )
	local f164_local0 = ClientWeapon[0x75228338D174290]( f164_arg0, WEAPON.GetWeaponModelName( f164_arg1.weapon, f164_arg1, {
		includeAttachments = true,
		includeBlueprintTune = true
	} ), false, true, true )
	local f164_local1 = ClientWeapon[0x75228338D174290]( f164_arg0, WEAPON.GetWeaponModelNameFromRef( f164_arg1.weapon ), false, true, false )
	local f164_local2 = nil
	if f164_local0 and f164_local1 then
		f164_local2 = {}
		for f164_local6, f164_local7 in pairs( f164_local0 ) do
			f164_local2[f164_local6] = {
				attachment = 0,
				total = f164_local7,
				weapon = f164_local1[f164_local6]
			}
		end
	end
	return f164_local2
end

GUNSMITH.GetCompareWeaponAttributesDetails = function ( f163_arg0, f163_arg1, f163_arg2, f163_arg3 )
	local f163_local0 = GUNSMITH.GetBaseCompareWeaponAttributesDetails( f163_arg0, f163_arg2, f163_arg3 )
	local f163_local1 = WEAPON.GetWeaponModelName
	local f163_local2 = f163_arg1.weapon
	local f163_local3 = f163_arg1
	local f163_local4 = {
		includeAttachments = true
	}
	local f163_local5
	if not f163_arg1.isBase then
		f163_local5 = not f163_arg1.isCustom
	else
		f163_local5 = false
	end
	f163_local4.includeBlueprintTune = f163_local5
	local f163_local6 = ClientWeapon[0x75228338D174290]( f163_arg0, f163_local1( f163_local2, f163_local3, f163_local4 ), false, true, true )
	for f163_local5, f163_local7 in pairs( f163_local0 ) do
		f163_local7.attachment = f163_local6[f163_local5] - f163_local7.total
	end
	return f163_local0
end

GUNSMITH.GetWeaponStatsDetails = function ( f162_arg0, f162_arg1, f162_arg2 )
	if not f162_arg2 then
		f162_arg2 = {}
	end
	local f162_local0 = f162_arg2.currentWeapon
	local f162_local1 = f162_arg2.curWeaponSetup
	local f162_local2 = f162_arg2.isSetup
	local f162_local3 = {}
	local f162_local4 = WEAPON.GetAmmoData( f162_arg0, f162_arg1 )
	f162_local3.ammoData = f162_local4
	local f162_local5 = nil
	if f162_local0 then
		f162_local3.comparedWeaponName = WEAPON.GetName( f162_local0.weapon )
		if f162_local2 then
			f162_local5 = GUNSMITH.GetBaseCompareWeaponAttributesDetails( f162_arg0, f162_local0, f162_local1 )
		else
			f162_local5 = GUNSMITH.GetCompareWeaponAttributesDetails( f162_arg0, f162_arg1, f162_local0, f162_local1 )
		end
	else
		f162_local5 = GUNSMITH.GetBaseWeaponAttributesDetails( f162_arg0, f162_arg1 )
	end
	f162_local3.weaponAttributes = f162_local5
	local f162_local6 = f162_arg1.lootID
	local f162_local7 = WEAPON.GenerateWeaponTableFromID( f162_arg0, f162_local6 )
	local f162_local8 = nil
	if f162_local7 then
		f162_local8 = WEAPON.GetDismembermentType( f162_local7 )
	end
	local f162_local9 = WEAPON.GetTracerType( f162_local6 )
	local f162_local10 = nil
	if f162_local8 or f162_local9 then
		f162_local10 = {
			dismemberment = f162_local8,
			tracer = f162_local9
		}
	end
	f162_local3.expanderData = {
		expanderType = CONDITIONS.IsMobileOrMobileSim() and MOBILEWIDGET.StatsExpandedAnims.WEAPON_EFFECTS or nil,
		lockExpander = f162_local10 == nil,
		isWeaponProgression = f162_arg2.isWeaponProgression or false,
		details = {
			isSetup = f162_local2,
			weapon = f162_arg1,
			ammo = f162_local4,
			currentWeapon = f162_local0,
			currentWeaponSetup = f162_local1,
			weaponAttributes = f162_local5,
			weaponEffectsAttributes = f162_local10
		}
	}
	local f162_local11 = GUNSMITH.GetBrandingMaterialNameFromWeaponTable( f162_local7 )
	local f162_local12
	if not f162_local11 then
		f162_local12 = f162_local11
	else
		f162_local12 = ""
	end
	f162_local3.brandingMaterialName = f162_local12
	return f162_local3
end

GUNSMITH.GetStatsExpanderWeaponDetails = function ( f161_arg0, f161_arg1 )
	local f161_local0 = f161_arg1.weaponTable
	local f161_local1 = nil
	if f161_arg1.addModifiers then
		f161_local1 = ATTACHMENT.GetModifiersValuesFromAttachementData( f161_arg0, f161_arg1.attachmentData, f161_local0, f161_arg1.currentAttachmentTable )
		if CONDITIONS.IsMobileOrMobileSim() then
			f161_local1 = GUNSMITH.GetSortedModifiersValues( f161_local1 )
		end
	end
	local f161_local2 = f161_arg1.ammoTable
	return {
		lootID = f161_local0.lootID,
		statsDetails = {
			ammoData = f161_local2,
			expanderData = {
				lockExpander = true,
				expanded = true,
				expanderType = MOBILEWIDGET.StatsExpandedAnims.MODIFIERS,
				ammoData = f161_local2,
				details = {
					weapon = f161_local0,
					ammo = f161_local2,
					weaponAttributes = f161_arg1.weaponAttributes,
					modifiersValues = f161_local1
				}
			}
		}
	}
end

GUNSMITH.GetStatsDetailsForWeaponAttributes = function ( f160_arg0, f160_arg1, f160_arg2 )
	return {
		ammoData = WEAPON.GetAmmoData( f160_arg0, f160_arg1 ),
		expanderData = {
			details = {
				weaponAttributes = f160_arg2
			}
		}
	}
end

GUNSMITH.GetAllWeaponsNeededToUnlock = function ( f159_arg0, f159_arg1 )
	local f159_local0
	if f159_arg1 then
		if f159_arg1.dataTable then
			f159_local0 = f159_arg1.dataTable
			if not f159_local0 then
			
			else
				local f159_local1 = GUNSMITH.GetProgressionUnlockWeaponAndLevel( f159_arg0 )
				if f159_local1 and tonumber( f159_local1.unlockLevel ) ~= -1 then
					table.insert( f159_local0, 1, f159_local1 )
					local f159_local2
					if f159_arg1 then
						f159_local2 = Table.ShallowCopy( f159_arg1 )
						if not f159_local2 then
						
						else
							f159_local2.dataTable = f159_local0
							return GUNSMITH.GetAllWeaponsNeededToUnlock( f159_local1.ref, f159_local2 )
						end
					end
					f159_local2 = {}
				else
					return f159_local0
				end
			end
		end
		f159_local0 = {}
		if not f159_local0 then
			f159_local0 = {}
		end
	else
		f159_local0 = {}
	end
	local f159_local1 = GUNSMITH.GetProgressionUnlockWeaponAndLevel( f159_arg0 )
	if f159_local1 and tonumber( f159_local1.unlockLevel ) ~= -1 then
		table.insert( f159_local0, 1, f159_local1 )
		local f159_local2
		if f159_arg1 then
			f159_local2 = Table.ShallowCopy( f159_arg1 )
			if not f159_local2 then
			
			else
				f159_local2.dataTable = f159_local0
				return GUNSMITH.GetAllWeaponsNeededToUnlock( f159_local1.ref, f159_local2 )
			end
		end
		f159_local2 = {}
	else
		return f159_local0
	end
end

GUNSMITH.GetWeaponArmoryDetails = function ( f158_arg0, f158_arg1, f158_arg2 )
	local f158_local0 = {
		type = Engine[0xED84C33EC5F01EA]( WEAPON.GetWeaponClassName( f158_arg1.weapon ) ),
		name = f158_arg1.header,
		isNameAlreadyLocalized = true
	}
	if not CONDITIONS.IsMobileOrMobileSim() then
		f158_local0.desc = f158_arg1.desc
		f158_local0.isDescAlreadyLocalized = true
	end
	f158_local0.lootID = f158_arg1.lootID
	local f158_local1
	if f158_arg1.variantID and 0 < f158_arg1.variantID then
		f158_local1 = false
	else
		f158_local1 = true
	end
	f158_local0.showDesc = f158_local1
	f158_local1 = nil
	if not (not f158_arg1.variantID or 0 >= f158_arg1.variantID) or f158_arg1.isCustom and GUNSMITH.AllowSaveCustomWeapon() then
		f158_local1 = WEAPON.GetName( f158_arg1.weapon )
	end
	f158_local0.baseName = f158_local1
	local f158_local2 = nil
	if f158_arg1.isBase then
		f158_local2 = GUNSMITH[0x5BBD3303AAAC2C9][0xA7CE19BAA54C278]
	elseif f158_arg1.isCustom and GUNSMITH.AllowSaveCustomWeapon() then
		f158_local2 = GUNSMITH[0x5BBD3303AAAC2C9][0x862DF34652CF74E]
	elseif f158_arg1.variantID and 0 < f158_arg1.variantID then
		f158_local2 = GUNSMITH[0x5BBD3303AAAC2C9][0x7F2A8FDB358E5E0]
	end
	f158_local0.weaponType = f158_local2
	f158_local0.tacticalBuild = WEAPON.GetWeaponBlueprintTacticalBuildDataByLootID( f158_arg0, f158_arg1.lootID )
	local f158_local3 = WEAPON.GenerateWeaponTableFromID( f158_arg0, f158_arg1.lootID )
	local f158_local4
	if f158_local3 then
		f158_local4 = ATTACHMENT.GetReceiverBlueprintFromWeaponTable( f158_local3 )
		if not f158_local4 then
		
		else
			local f158_local5
			if f158_local4 then
				f158_local5 = f158_local4
			else
				f158_local5 = f158_local4[0x2EAB902F6509817]
			end
			f158_local0.brandingMaterialName = GUNSMITH.GetBrandingMaterialName( f158_local5 )
			local f158_local6 = nil
			local f158_local7 = ""
			local f158_local8 = false
			local f158_local9 = false
			local f158_local10 = f158_arg1.isBase
			if not f158_local10 then
				f158_local10 = f158_arg1.isBase == nil
			end
			local f158_local11, f158_local12 = Challenge.GetWeaponChallengeTypeAndDataByLootID( f158_arg0, f158_arg1.lootID )
			if f158_local11 then
				if f158_local11 == Challenge.GetAEKindID( TrackedChallenges.Kind.WEEKLY ) then
					if f158_local12.id then
						local f158_local13 = tostring( f158_local12.id )
						if not f158_local13 then
							f158_local6 = f158_local13
						end
					end
					f158_local6 = nil
				elseif f158_local10 and (not f158_arg1.isUnlocked or f158_arg1.isBaseUnlocked == false) then
					f158_local6 = StringTable[0x2DCF0973239E909]( CSV.gunChallenges.GetFile(), CSV.gunChallenges.cols.loot, f158_arg1.lootID, CSV.gunChallenges.cols.id )
					local f158_local13 = PROGRESSION.GetUnlockWeaponAndLevelText( f158_arg1.weapon )
					local f158_local14 = GUNSMITH.GetAllWeaponsNeededToUnlock( f158_arg1.weapon )
					if not LUI.StringIsNilOrEmpty( f158_local6 ) then
						local f158_local15 = StringTable[0x2DCF0973239E909]( CSV.gunChallenges.GetFile(), CSV.gunChallenges.cols.loot, f158_arg1.lootID, CSV.gunChallenges.cols.challenge2Desc )
						if not LUI.StringIsNilOrEmpty( f158_local15 ) then
							if CONDITIONS.IsMobileOrMobileSim() then
								if f158_local15 == "CHALLENGE/GUN_UNLOCK_DMZ" then
									f158_local7 = Engine[0xED84C33EC5F01EA]( "LUA_MENU_MOBILE/UNLOCK_COD_MW2" )
								else
									f158_local7 = Engine[0xED84C33EC5F01EA]( f158_local15 )
								end
							elseif WEAPON.IsWeaponWithBattlePassChallenge( f158_arg1.lootID ) then
								if Challenge.IsChallengeActive( f158_arg0, f158_local6 ) then
									f158_local9 = true
									f158_local8 = true
								else
									f158_local7 = Engine[0xED84C33EC5F01EA]( f158_local15 )
								end
							else
								f158_local8 = true
							end
						else
							f158_local7 = Engine[0xED84C33EC5F01EA]( StringTable[0x2DCF0973239E909]( CSV.gunChallenges.GetFile(), CSV.gunChallenges.cols.loot, f158_arg1.lootID, CSV.gunChallenges.cols.desc ), tonumber( StringTable[0x2DCF0973239E909]( CSV.gunChallenges.GetFile(), CSV.gunChallenges.cols.id, f158_local6, CSV.gunChallenges.cols.amount ) ) )
						end
					elseif 1 < #f158_local14 then
						f158_local0.isDoubleWeaponLock = true
						f158_local0.weaponDataNeededToUnlock = f158_local14
					elseif not LUI.StringIsNilOrEmpty( f158_local13 ) then
						f158_local7 = f158_local13
					else
						f158_local7 = PROGRESSION.GetSpecialOrDefaultUnlockText( LOOT.itemTypes.WEAPON, f158_arg1.weapon )
					end
				end
			elseif f158_arg1.isAlreadyEquipped then
				f158_local7 = Engine[0xED84C33EC5F01EA]( 0xCB5133149EB6E5E, f158_arg1.weaponSlot and 0xEC8F813D58DEE57 or 0xCB74A303611CCB3 )
			end
			f158_local0.unlockCriteria = f158_local7
			f158_local0.isUnlocked = f158_arg1.isUnlocked
			f158_local0.challengeId = f158_local6
			f158_local0.isChallengeLocked = f158_local8
			f158_local0.dontUseSecondChallenge = f158_local9
			f158_local0.weaponCost = WEAPON.GetWeaponCost( f158_arg1.weapon, ATTACHMENT.GetAttachmentRefsFromAttachmentsData( f158_arg1.attachments ) )
			f158_local0.isContraband = f158_arg1.showContrabandWarning
			local f158_local15
			if f158_arg1.isUnlocked then
				f158_local15 = f158_arg1.isAlreadyEquipped
				if not f158_local15 then
					if f158_local10 then
						f158_local15 = f158_local10
					elseif f158_arg1.isBaseUnlocked ~= false then
						f158_local15 = false
					else
						f158_local15 = true
					end
				end
			else
				f158_local15 = true
			end
			local f158_local16 = CONDITIONS.IsMobileOrMobileSim() and f0_local0 or f0_local0
			local f158_local17
			if f158_local15 then
				f158_local17 = f0_local0
				if not f158_local17 then
				
				else
					f158_local0.showLocked = f158_local15
					f158_local0.descMaxLines = f158_local17
					f158_local0.numBlueprints = f158_arg1.numBlueprints
					f158_local0.savedMods = f158_arg1.savedMods
					f158_local0.weaponRef = f158_arg1.weapon
					f158_local0.statsDetails = GUNSMITH.GetWeaponStatsDetails( f158_arg0, f158_arg1, f158_arg2 )
					local f158_local18 = f158_arg1.variantID
					if f158_local18 then
						if 0 >= f158_arg1.variantID or f158_arg1.isBlueprintIntact == false then
							f158_local18 = false
						else
							f158_local18 = true
						end
					end
					f158_local0.isBlueprintIntact = f158_local18
					f158_local0.isBlueprintProtuned = GUNSMITH.DoesWeaponTableContainProtunedAttachment( f158_arg1 )
					if not f158_arg2 or not f158_arg2.hidePrimaryProject then
						f158_local0.primaryProject = LOOT.GetPrimaryProjectIconFromID( f158_arg1.lootID )
					end
					return f158_local0
				end
			end
			f158_local17 = f158_local16
		end
	end
	f158_local4 = nil
end

GUNSMITH.GetCurrentWeaponDetails = function ( f157_arg0, f157_arg1 )
	return GUNSMITH.GetWeaponDetails( f157_arg0, GUNSMITH.GetCurrentEquippedWeaponData( f157_arg0, f157_arg1 ) )
end

GUNSMITH.GetWeaponArmoryDetailsForRef = function ( f156_arg0, f156_arg1, f156_arg2, f156_arg3 )
	local f156_local0 = GUNSMITH.GetCurrentEquippedWeaponData( f156_arg0, f156_arg1 )
	local f156_local1, f156_local2 = nil
	if f156_local0.weapon == f156_arg2 then
		f156_local1 = f156_local0.weapon
		f156_local2 = f156_local0.lootID
	else
		f156_local1 = f156_arg2
		f156_local2 = WEAPON.GetBlueprintBaseID( f156_arg2 )
	end
	return GUNSMITH.GetWeaponArmoryDetails( f156_arg0, WEAPON.GetModificationDetails( f156_arg0, WEAPON.GetModification( f156_arg0, f156_local1, f156_local2 ) ), f156_arg3 )
end

GUNSMITH.SetupGunsmithMenu = function ( f155_arg0, f155_arg1, f155_arg2 )
	LOADOUT.SetLoadoutIndex( f155_arg1, f155_arg2.loadoutIndex )
	if not CONDITIONS.IsMobileOrMobileSim() then
		return 
	else
		f155_arg0.detailsDataSource = LUI.SetupDataSourceUpdate( f155_arg0, f155_arg1, "UpdateDetailsDataSources", "alwaysLoaded.menu.gunsmith.details", GUNSMITH.GetCurrentWeaponDetails( f155_arg1, f155_arg2.weaponSlot ), LOADOUT.FormatDetailsDataTable )
	end
end

GUNSMITH.SetupWeaponArmoryMenu = function ( f154_arg0, f154_arg1, f154_arg2 )
	LOADOUT.SetLoadoutIndex( f154_arg1, f154_arg2.loadoutIndex )
	if not CONDITIONS.IsMobileOrMobileSim() then
		return 
	else
		f154_arg0.detailsDataSource = LUI.SetupDataSourceUpdate( f154_arg0, f154_arg1, "UpdateDetailsDataSources", "alwaysLoaded.menu.armory.details", GUNSMITH.GetWeaponArmoryDetailsForRef( f154_arg1, f154_arg2.weaponSlot, f154_arg2.weaponRef ), LOADOUT.FormatDetailsDataTable )
	end
end

GUNSMITH.GetWeaponAttachmentDetails = function ( f153_arg0, f153_arg1 )
	local f153_local0 = WEAPON.GenerateWeaponTableFromRef( f153_arg1.weaponReference )
	return {
		isNameAlreadyLocalized = true,
		isDescAlreadyLocalized = true,
		type = Engine[0xED84C33EC5F01EA]( f153_arg1.categoryName or 0xEC05F4D03271416 ),
		name = f153_arg1.name and Engine[0xED84C33EC5F01EA]( f153_arg1.name ) or "",
		desc = f153_arg1.desc and Engine[0xED84C33EC5F01EA]( f153_arg1.desc ) or "",
		isUnlocked = f153_arg1.unlocked,
		unlockCriteria = PROGRESSION.GetUnlockAttachmentAndLevelText( f153_local0.weapon, f153_arg1.unlockLevel ),
		lootID = LOOT.GetItemID( f153_arg1.ref ),
		compareDetails = ATTACHMENT.GetAttachmentCompareDetails( f153_arg0, f153_arg1, f153_local0 )
	}
end

GUNSMITH.SetupWeaponProgressionMenu = function ( f152_arg0, f152_arg1, f152_arg2 )
	LOADOUT.SetLoadoutIndex( f152_arg1, f152_arg2.loadoutIndex )
	if not CONDITIONS.IsMobileOrMobileSim() then
		return 
	else
		f152_arg0.detailsDataSource = LUI.SetupDataSourceUpdate( f152_arg0, f152_arg1, "UpdateDetailsDataSources", "alwaysLoaded.menu.weaponProgression.details", GUNSMITH.GetWeaponArmoryDetailsForRef( f152_arg1, f152_arg2.weaponSlot, GUNSMITH.GetEquippedWeaponRef( f152_arg1, f152_arg2.loadoutIndex, f152_arg2.weaponSlot ), {
			isWeaponProgression = true
		} ), LOADOUT.FormatDetailsDataTable, {
			rootField = "detailsDataSource",
			listHandlersData = GUNSMITH.GetModifiersValuesDataSourcesListHandlersData()
		} )
	end
end

GUNSMITH.GetModifiersValuesDataSourcesListHandlersData = function ()
	local f149_local0 = function ( f150_arg0, f150_arg1 )
		return function ( f151_arg0, f151_arg1, f151_arg2 )
			local f151_local0 = f151_arg1 + 1
			local f151_local1 = f150_arg0[f151_local0]
			local f151_local2 = LUI.DataSourceInControllerModel.new
			local f151_local3 = f150_arg0 .. f151_local0
			local f151_local4 = f151_local2( f151_local3 .. ".name" )
			local f151_local5 = f151_local2( f151_local3 .. ".value" )
			f151_local4:SetValue( f151_arg2, f151_local1.name )
			f151_local5:SetValue( f151_arg2, f151_local1.value )
			return {
				name = f151_local4,
				value = f151_local5
			}
		end
		
	end
	
	return {
		positiveModifiers = {
			getFunction = f149_local0
		},
		negativeModifiers = {
			getFunction = f149_local0
		}
	}
end

GUNSMITH.SetupWeaponData = function ( f148_arg0, f148_arg1, f148_arg2, f148_arg3 )
	f148_arg0._loadoutPlayerData = LOADOUT.GetFrontendLoadoutWithShowcase( f148_arg1, LOADOUT.GetLoadoutIndex( f148_arg1 ), f148_arg3 )
	f148_arg0._weaponPlayerData = f148_arg0._loadoutPlayerData.weaponSetups[f148_arg2]
	f148_arg0._weaponTable = WEAPON.GenerateWeaponTable( f148_arg0._weaponPlayerData )
end

GUNSMITH.SetupWeaponModel = function ( f147_arg0, f147_arg1 )
	if CONDITIONS.IsGLGunsmithEnabled() then
		if f147_arg0._weaponModel == nil then
			f147_arg0._weaponModel = WEAPON.GetWeaponModel( f147_arg1, FrontEndScene.ClientWeapons.Preview )
		end
		WEAPON.LoadAndSetModel( f147_arg1, f147_arg0._weaponModel, f147_arg0._weaponTable )
	end
end

GUNSMITH.SetupWeaponAttributes = function ( f146_arg0, f146_arg1, f146_arg2 )
	local f146_local0 = ClientWeapon[0x75228338D174290]( f146_arg0, WEAPON.GetWeaponModelName( f146_arg1.weapon, f146_arg1, {
		includeAttachments = true,
		includeBlueprintTune = true
	} ), false, true, true )
	local f146_local1 = ClientWeapon[0x75228338D174290]( f146_arg0, Engine[0xD9887C00CF2B985]( GL_HACK.GetWeaponMPRef( f146_arg1.weapon ) ), false, true, false )
	local f146_local2 = {}
	if f146_local0 and f146_local1 then
		for f146_local6, f146_local7 in pairs( f146_local0 ) do
			f146_local2[f146_local6] = {
				total = f146_local1[f146_local6],
				weapon = f146_local1[f146_local6],
				attachment = f146_local7 - f146_local1[f146_local6]
			}
		end
	end
	return f146_local2
end

GUNSMITH.MobileOpenGunsmith = function ( f145_arg0, f145_arg1 )
	f145_arg0:dispatchEventToRoot( {
		name = "button_alt1",
		controller = f145_arg1
	} )
end

GUNSMITH.SetupDefaultFocus = function ( f144_arg0, f144_arg1 )
	f144_arg0:dispatchEventToParent( {
		unlockLevel = 0,
		name = "progression_button_over",
		isOverview = true,
		weaponRef = f144_arg1
	} )
	local f144_local0 = GUNSMITH.FindButtonForWeaponRef( f144_arg0, f144_arg1 )
	if f144_local0 then
		f144_local0:processEvent( {
			name = "gain_focus"
		} )
		return true
	else
		
	end
end

GUNSMITH.FindButtonForWeaponRef = function ( f143_arg0, f143_arg1 )
	if f143_arg0._firstButton and f143_arg0._firstButton.weaponRef == f143_arg1 then
		return f143_arg0._firstButton
	end
	for f143_local3, f143_local4 in ipairs( f143_arg0._upButtons ) do
		if f143_local4.weaponRef == f143_arg1 then
			return f143_local4
		end
	end
	for f143_local3, f143_local4 in ipairs( f143_arg0._downButtons ) do
		if f143_local4.weaponRef == f143_arg1 then
			return f143_local4
		end
	end
end

GUNSMITH.MobileOpenWeaponStatsPopup = function ( f142_arg0, f142_arg1, f142_arg2 )
	local f142_local0 = f142_arg0._loadoutPlayerData
	local f142_local1 = f142_arg0._weaponPlayerData
	local f142_local2 = f142_arg0._weaponTable
	if not f142_local2 then
		if not f142_local0 then
			f142_local0 = LOADOUT.GetFrontendLoadoutWithShowcase( f142_arg1, f142_arg0._loadoutIndex, f142_arg0._forShowcase )
		end
		if not f142_local1 then
			f142_local1 = f142_local0.weaponSetups[f142_arg0._weaponSlot]
		end
		f142_local2 = WEAPON.GenerateWeaponTable( f142_local1 )
	end
	local f142_local3 = f142_arg0._curAmmoDataTable
	if not f142_local3 then
		f142_local3 = WEAPON.GetAmmoData( f142_arg1, f142_local2 )
	end
	local f142_local4 = f142_arg0._weaponAttributes
	if not f142_local4 then
		f142_local4 = GUNSMITH.SetupWeaponAttributes( f142_arg1, f142_local2, f142_local1 )
	end
	local f142_local5 = {
		weaponTable = f142_local2,
		ammoTable = f142_local3,
		weaponAttributes = f142_local4
	}
	if f142_arg2 then
		f142_local5.addModifiers = true
		f142_local5.attachmentData = f142_arg0._focusedAttachmentData
		f142_local5.currentAttachmentTable = f142_arg0._isEquippedTable or f142_arg0._currentTable
	end
	LUI.FlowManager.RequestPopupMenu( nil, "MobileWeaponStatsPopup", false, f142_arg1, false, f142_local5, nil, true, true )
end

GUNSMITH.MobileGunsmithTuneAttachment = function ( f141_arg0, f141_arg1 )
	LUI.FlowManager.RequestAddMenu( GUNSMITH.GetTuningMenuRef(), true, f141_arg1, false, {
		weaponPlayerData = f141_arg0._weaponPlayerData,
		loadoutPlayerData = f141_arg0._loadoutPlayerData,
		weaponSlot = f141_arg0._weaponSlot,
		category = f141_arg0._category,
		weaponTable = f141_arg0._weaponTable,
		weaponModel = f141_arg0._weaponModel
	}, true )
end

GUNSMITH.RemoveAttachments = function ( f140_arg0 )
	LUI.FlowManager.RequestPopupMenu( nil, "remove_all_attachments_popup", true, f140_arg0.controller, false )
end

GUNSMITH.RemoveSelectedAttachment = function ( f139_arg0, f139_arg1 )
	LUI.FlowManager.RequestPopupMenu( nil, "remove_all_attachments_popup", true, f139_arg1.controller, false )
end

GUNSMITH.DoRemoveAttachmentAndEquipSubsAndResetButton = function ( f138_arg0, f138_arg1, f138_arg2, f138_arg3, f138_arg4, f138_arg5, f138_arg6 )
	GUNSMITH.EquipAttachment( f138_arg0, f138_arg2, ATTACHMENT.none, f138_arg3, {
		isNewAttachment = true,
		attachSlot = GUNSMITH.GetSelectedAttachIndexForCategory( f138_arg5, f138_arg4 )
	} )
	local f138_local0 = WEAPON.GenerateWeaponTable( f138_arg3 )
	if f138_arg0.ResetAttachmentDetailButton then
		f138_arg0:ResetAttachmentDetailButton()
		f138_arg1:ButtonOver( f138_arg0, f138_arg2 )
	end
	if f138_arg1.ClearTooltip then
		f138_arg1:ClearTooltip( f138_arg2 )
	end
	for f138_local4, f138_local5 in ipairs( f138_arg6 ) do
		GUNSMITH.EquipAttachment( self, f138_arg2, f138_local5.ref, f138_arg3, {
			attachSlot = GUNSMITH.GetSelectedAttachIndexForCategory( f138_local5.category, f138_local0 )
		} )
	end
	f138_local1 = WEAPON.GenerateWeaponTable( f138_arg3 )
	if CONDITIONS.InFrontend() then
		f138_local2 = WEAPON.GetWeaponModelName( f138_local1.weapon, f138_local1, {
			includeCamos = true,
			includeAttachments = true,
			includeStickers = true,
			controllerIndex = f138_arg2
		} )
		FrontEndScene.RequestWeaponViewModels( {
			f138_local2
		}, f138_arg2 )
		f138_local3 = f138_arg0._weaponModel
		if not f138_local3 then
			f138_local3 = WEAPON.GetWeaponModel( f138_arg2, FrontEndScene.ClientWeapons.Preview, WEAPON.OffsetFiles.AttachmentData )
		end
		f138_arg0._weaponModel = f138_local3
		WEAPON.SetModelIfLoaded( f138_arg2, f138_arg0._weaponModel, f138_local2 )
	end
	f138_arg0:dispatchEventToParent( {
		name = "attachment_count_update",
		weaponTable = f138_local1
	} )
	f138_arg0:dispatchEventToParent( {
		name = "update_attachments",
		weaponTable = f138_local1
	} )
end

GUNSMITH.RemoveAttachment = function ( f136_arg0, f136_arg1 )
	if not f136_arg0._weaponPlayerData then
		
	else
		
	end
	local f136_local0 = WEAPON.GenerateWeaponTable( f136_arg0._weaponPlayerData )
	local f136_local1 = WEAPON.GenerateWeaponTable( f136_arg0._weaponPlayerData )
	local f136_local2 = GUNSMITH.GetSelectedAttachIndexForCategory( f136_arg0._category, f136_local1 )
	local f136_local3 = ATTACHMENT.GetTableWithCurrentAttachment( f136_local1, f136_local2, nil, ATTACHMENT.none, nil )
	local f136_local4
	if f136_local2 then
		f136_local4 = ATTACHMENT.GetRefFromSetup( f136_arg0._weaponPlayerData.attachmentSetup[f136_local2 - 1] )
		if not f136_local4 then
		
		else
			local f136_local5 = LUI.FlowManager.GetScopedData( LOADOUT.GetGunsmithTabsMenuRef() )
			local f136_local6 = f136_local5.attachmentData[GL_HACK.GetWeaponMPRef( f136_local1.weapon )].attachments
			local f136_local7 = ATTACHMENT.GetBlockedEquippedAttachments( f136_arg0._controllerIndex, f136_local3, f136_local4, f136_local6 )
			local f136_local8 = {}
			for f136_local12, f136_local13 in pairs( GUNSMITH.FindSubstituteSiblingForEachAttachments( f136_arg0._controllerIndex, f136_local3, f136_local4, f136_local6, f136_local7 ) ) do
				local f136_local14 = LUI.IsItemInArray( f136_local7, f136_local12 )
				if 0 < f136_local14 then
					table.insert( f136_local8, f136_local13 )
					table.remove( f136_local7, f136_local14 )
				end
			end
			f136_local9 = f136_arg0.GunsmithButton and f136_arg0.GunsmithButton.DetailButton or f136_arg0
			if #f136_local7 == 0 then
				GUNSMITH.DoRemoveAttachmentAndEquipSubsAndResetButton( f136_arg0, f136_local9, f136_arg0._controllerIndex, f136_arg0._weaponPlayerData, f136_local0, f136_arg0._category, f136_local8 )
				f136_arg0:processEvent( {
					name = "removed_attachment"
				} )
			else
				LUI.FlowManager.RequestPopupMenu( nil, "PopupYesNo", false, nil, false, {
					title = Engine[0xED84C33EC5F01EA]( 0xF22B2F336C8A05C ),
					message = ATTACHMENT.AddListToBlockedMessage( Engine[0xED84C33EC5F01EA]( 0xF4F6E7738091702, #f136_local7, ATTACHMENT.GetName( f136_local4 ) ), f136_local7 ),
					yesLabel = Engine[0xED84C33EC5F01EA]( 0xF45C394F4B8A31F ),
					noLabel = Engine[0xED84C33EC5F01EA]( 0xDF4B921D6190715 ),
					yesAction = function ( f137_arg0, f137_arg1 )
						for f137_local4, f137_local5 in pairs( f136_arg0 ) do
							GUNSMITH.EquipAttachment( f136_arg0, f137_arg1, ATTACHMENT.none, f136_arg0._weaponPlayerData, {
								isNewAttachment = true,
								attachSlot = GUNSMITH.GetSelectedAttachIndexForCategory( f137_local5.category, f136_arg0 )
							} )
							local f137_local6 = f136_arg0:getParent()
							local f137_local3
							if f137_local6 then
								f137_local3 = f137_local6
							else
								f137_local3 = f137_local6.GetGunsmithButtonGroupForCategory
								if f137_local3 then
									f137_local3 = f137_local6:GetGunsmithButtonGroupForCategory( f137_local5.category )
								end
							end
							if f137_local3 then
								if f137_local3.ResetAttachmentDetailButton then
									f137_local3:ResetAttachmentDetailButton()
								end
								if f137_local3.ResetAMPDetailButton then
									f137_local3:ResetAMPDetailButton()
								end
							end
						end
						GUNSMITH.DoRemoveAttachmentAndEquipSubsAndResetButton( f136_arg0, f136_arg0, f137_arg1, f136_arg0._weaponPlayerData, f136_arg0, f136_arg0._category, f136_arg0 )
						f136_arg0:processEvent( {
							name = "removed_attachment"
						} )
					end
				}, nil, false, true )
			end
			return true
		end
	end
	f136_local4 = ATTACHMENT.none
end

GUNSMITH.TryEquipAttachment = function ( f129_arg0, f129_arg1, f129_arg2 )
	local f129_local0 = f129_arg1.attachmentData or f129_arg1.variantData
	local f129_local1 = f129_arg0._equippedAttach and f129_arg0._equippedAttach or ATTACHMENT.none
	local f129_local2 = f129_local0.ref
	if not f129_local2 then
		f129_local2 = ATTACHMENT.none
	end
	local f129_local3 = 0
	local f129_local4 = {}
	if f129_arg0._weaponTable.lootID ~= LOOT.emptyID then
		f129_local4 = WEAPON.GetModificationAttachments( f129_local3, f129_arg0._weaponTable.weapon, f129_arg0._weaponTable.lootID )
	end
	local f129_local5 = LUI.FlowManager.GetScopedData( LOADOUT.GetGunsmithTabsMenuRef() )
	local f129_local6 = f129_local5.attachmentData[GL_HACK.GetWeaponMPRef( f129_arg0._weaponTable.weapon )].attachments
	local f129_local7 = f129_local2 == f129_local1
	local f129_local8 = ATTACHMENT.baseVariant
	if f129_local7 then
		f129_local8 = f129_arg0._equippedVariant
	elseif f129_local4[f129_local2] then
		f129_local8 = f129_local4[f129_local2]
	end
	if f129_local0.variantID then
		f129_local8 = f129_local0.variantID
	end
	local f129_local9 = ATTACHMENT.GetTableWithCurrentAttachment
	local f129_local10 = f129_arg0._weaponTable
	local f129_local11 = f129_arg2
	local f129_local12
	if f129_local0 then
		f129_local12 = f129_local0
	else
		f129_local12 = f129_local0.blockedCategorySlot
	end
	local f129_local13, f129_local10, f129_local11 = GUNSMITH.CheckBlockedEquippedAttachmentLogic( f129_local3, f129_arg0._weaponTable, f129_arg0._equippedAttach, f129_local9( f129_local10, f129_local11, f129_local12, f129_local2, f129_local8 ), f129_local2, f129_arg0._category, f129_local0, f129_local6 )
	f129_local12 = function ( f135_arg0, f135_arg1 )
		if not f135_arg1 then
			f135_arg1 = {}
		end
		f135_arg0:dispatchEventToCurrentMenu( {
			name = "equip_attachment",
			attachmentData = f129_arg0,
			substituteSiblingAttachmentsToEquip = f129_arg0,
			regetAttachSlotIfNil = f135_arg1.regetAttachSlotIfNil
		} )
		for f135_local3, f135_local4 in ipairs( f129_arg0 ) do
			GUNSMITH.EquipAttachment( f135_arg0, f129_arg0, f135_local4.ref, f135_arg0._weaponPlayerData, {
				attachSlot = GUNSMITH.GetSelectedAttachIndexForCategory( f135_local4.category, f135_arg0._weaponTable ),
				survivalCost = f135_local4.survivalCost
			} )
		end
	end
	
	local f129_local14 = function ()
		local f133_local0
		if f129_arg0.ref ~= ATTACHMENT.none then
			f133_local0 = Engine[0xED84C33EC5F01EA]( 0xA6B88FD8F6E0ED1, #f129_arg0, ATTACHMENT.GetName( f129_arg0.ref ) )
			if not f133_local0 then
			
			else
				LUI.FlowManager.RequestPopupMenu( nil, "PopupYesNo", false, nil, false, {
					title = Engine[0xED84C33EC5F01EA]( 0xF22B2F336C8A05C ),
					message = ATTACHMENT.AddListToBlockedMessage( f133_local0, f129_arg0 ),
					yesLabel = Engine[0xED84C33EC5F01EA]( 0xCA07A93FADF9E95 ),
					noLabel = Engine[0xED84C33EC5F01EA]( 0xDF4B921D6190715 ),
					yesAction = function ( f134_arg0, f134_arg1 )
						ACTIONS.LeaveMenu( f134_arg0 )
						for f134_local3, f134_local4 in ipairs( f133_local0 ) do
							GUNSMITH.EquipAttachment( f133_local0, f134_arg1, ATTACHMENT.none, f133_local0._weaponPlayerData, {
								isNewAttachment = true,
								attachSlot = GUNSMITH.GetSelectedAttachIndexForCategory( f134_local4.category, f133_local0._weaponTable )
							} )
						end
						if f133_local0._comingFromBlueprintPopup then
							f133_local0._weaponPlayerData.blueprintTuned:set( 0 )
						end
						f133_local0._comingFromBlueprintPopup = false
						f133_local0( f133_local0, {
							regetAttachSlotIfNil = true
						} )
					end
				}, nil, false, true )
			end
		end
		f133_local0 = Engine[0xED84C33EC5F01EA]( 0xF4F6E7738091702, #f129_arg0, ATTACHMENT.GetName( f129_arg0._equippedAttach ) )
	end
	
	local f129_local15 = function ()
		if 0 < #f129_arg0 then
			local f131_local0 = GUNSMITH.IsWeaponSetupBlueprintIntact( f129_arg0._weaponPlayerData )
			if f131_local0 then
				GUNSMITH.SetupGunsmithBlueprintPopup( f129_arg0, f129_arg0, false, function ()
					f131_local0._comingFromBlueprintPopup = true
					f131_local0._weaponPlayerData.blueprintTuned:set( 1 )
					f131_local0()
				end )
			else
				f129_arg0()
			end
		else
			f129_arg0( f129_arg0 )
		end
	end
	
	if f129_local0.category == ATTACHMENT.receiverCategory then
		local f129_local16 = false
		local f129_local17 = WEAPON.GetWeaponModelName( f129_arg0._weaponTable.weapon, f129_arg0._weaponTable, {
			includeAttachments = true
		} )
		for f129_local18 = 1, #f129_arg0._weaponTable.attachments, 1 do
			local f129_local21 = ClientWeapon[0xFE24333F9BC2CAB]( f129_local3, f129_local17, Engine[0x603B6AC5797050A]( f129_local17, f129_arg0._weaponTable.attachments[f129_local18].ref ) )
			if f129_local21.tunedStats then
				f129_local16 = true
				break
			end
		end
		if f129_local16 then
			if not GUNSMITH.IsTuningUnlocked( WEAPON.GetWeaponRefByRec( f129_arg1.attachmentData.ref ), f129_local3 ) then
				LUI.FlowManager.RequestPopupMenu( nil, "PopupYesNo", false, nil, false, {
					title = Engine[0xED84C33EC5F01EA]( 0x73D2A4024411940 ),
					message = Engine[0xED84C33EC5F01EA]( 0x60092DE0936C08D ),
					yesLabel = Engine[0xED84C33EC5F01EA]( 0xCA07A93FADF9E95 ),
					noLabel = Engine[0xED84C33EC5F01EA]( 0xDF4B921D6190715 ),
					yesAction = function ( f130_arg0, f130_arg1 )
						ACTIONS.LeaveMenu( f130_arg0 )
						f129_arg0()
					end
				}, nil, false, true )
			end
			f129_local15()
		end
		f129_local15()
	else
		f129_local15()
	end
end

GUNSMITH.TryRemoveConversionKit = function ( f127_arg0, f127_arg1, f127_arg2, f127_arg3 )
	local f127_local0 = ATTACHMENT.GetAttachmentsRequiredForUnlockTable( f127_arg2, f127_arg3 ) or {}
	local f127_local1 = ATTACHMENT.GetCategory( f127_arg3 )
	if 0 < #f127_local0 then
		LUI.FlowManager.RequestPopupMenu( nil, "PopupYesNo", false, nil, false, {
			title = Engine[0xED84C33EC5F01EA]( 0xF22B2F336C8A05C ),
			message = ATTACHMENT.AddListToBlockedMessage( Engine[0xED84C33EC5F01EA]( 0xF4F6E7738091702, #f127_local0, ATTACHMENT.GetName( f127_arg3 ) ), f127_local0 ),
			yesLabel = Engine[0xED84C33EC5F01EA]( 0xCA07A93FADF9E95 ),
			noLabel = Engine[0xED84C33EC5F01EA]( 0xDF4B921D6190715 ),
			yesAction = function ( f128_arg0, f128_arg1 )
				for f128_local4, f128_local5 in ipairs( f127_arg0 ) do
					GUNSMITH.EquipAttachment( f128_arg0, f128_arg1, ATTACHMENT.none, f127_arg0._weaponPlayerData, {
						isNewAttachment = true,
						attachSlot = GUNSMITH.GetSelectedAttachIndexForCategory( f128_local5.category, f127_arg0 )
					} )
					local f128_local6 = f127_arg0:getParent()
					if f128_local6.GetGunsmithButtonGroupForCategory then
						local f128_local3 = f128_local6:GetGunsmithButtonGroupForCategory( f128_local5.category )
						if f128_local3 and f128_local3.ResetAttachmentDetailButton then
							f128_local3:ResetAttachmentDetailButton()
						end
					end
				end
				GUNSMITH.RemoveAttachment( f127_arg0, f127_arg0 )
				if f127_arg0.SetButtonState then
					f127_arg0:SetButtonState()
				end
			end
		}, nil, false, true )
		return false
	elseif f127_local1 == ATTACHMENT.conversionkit then
		GUNSMITH.RemoveAttachment( f127_arg0, f127_arg1 )
		if f127_arg0.SetButtonState then
			f127_arg0:SetButtonState()
		end
	end
	return true
end

GUNSMITH.IsWeaponSetupBlueprintProtuned = function ( f126_arg0 )
	if CONDITIONS.ShouldStoreShowProtuningFlags() then
		local f126_local0
		if not f126_arg0 or f126_arg0.blueprintTuned:get() ~= 1 then
			f126_local0 = false
		else
			f126_local0 = true
		end
		return f126_local0
	else
		return false
	end
end

GUNSMITH.TryRemoveAttachment = function ( f123_arg0, f123_arg1, f123_arg2, f123_arg3, f123_arg4 )
	if CONDITIONS.InFrontend() and not f123_arg4 and not f123_arg0._isInAttachmentSelect then
		local f123_local0 = f123_arg0:getParent()
		if f123_local0._lastFocusedButtonGroupElement ~= f123_arg0 then
			
		else
			
		end
	end
	if not f123_arg2 then
		f123_arg2 = f123_arg0._weaponPlayerData
	end
	if not f123_arg3 then
		f123_arg3 = f123_arg0._category
	end
	local f123_local0
	if f123_arg1 then
		f123_local0 = f123_arg1.controller
		if not f123_local0 then
		
		else
			local f123_local1 = WEAPON.GenerateWeaponTable( f123_arg2 )
			local f123_local2 = GUNSMITH.GetSelectedAttachIndexForCategory( f123_arg3, f123_local1 )
			local f123_local3
			if f123_local2 then
				f123_local3 = ATTACHMENT.GetRefFromSetup( f123_arg2.attachmentSetup[f123_local2 - 1] )
				if not f123_local3 then
				
				else
					if f123_local3 ~= ATTACHMENT.none and GUNSMITH.IsWeaponSetupBlueprintProtuned( f123_arg2 ) then
						GUNSMITH.SetupCallbackFuncForBlueprintEdit( f123_local0, f123_arg2, GUNSMITH.BlueprintEditStatus.EditBlueprint, function ()
							GUNSMITH.RemoveAttachment( f123_arg0, f123_arg0 )
							f123_arg0:dispatchEventToRoot( {
								name = "break_blueprint"
							} )
							return true
						end )
					elseif GUNSMITH.IsWeaponSetupBlueprintIntact( f123_arg2 ) then
						GUNSMITH.SetupGunsmithBlueprintPopup( f123_local0, f123_arg0, true, function ()
							GUNSMITH.TryRemoveAttachment( f123_arg0, f123_arg0 )
						end )
					elseif f123_arg3 == ATTACHMENT.conversionkit then
						if GUNSMITH.TryRemoveConversionKit( f123_arg0, f123_arg1, f123_local1, f123_local3 ) then
							return GUNSMITH.RemoveAttachment( f123_arg0, f123_arg1 )
						end
					else
						return GUNSMITH.RemoveAttachment( f123_arg0, f123_arg1 )
					end
				end
			end
			f123_local3 = ATTACHMENT.none
		end
	end
	f123_local0 = f123_arg0._controllerIndex
end

GUNSMITH.CreateContextualMenuForRemove = function ( f120_arg0, f120_arg1, f120_arg2 )
	f120_arg1:AddContextualMenuAction( {
		button = "button_alt1",
		actionName = Engine[0xED84C33EC5F01EA]( 0xF45C394F4B8A31F ),
		actionFunction = function ()
			GUNSMITH.TryRemoveAttachment( f120_arg0, nil, f120_arg0._weaponPlayerData, f120_arg0._category )
			if f120_arg0.SetButtonState then
				f120_arg0:SetButtonState()
			end
		end,
		conditionFunction = function ()
			return f120_arg0._isEquipped
		end,
		id = f120_arg2
	} )
end

GUNSMITH.UpdateRemovePrompt = function ( f119_arg0, f119_arg1, f119_arg2 )
	local f119_local0 = f119_arg1._controllerIndex
	if f119_arg0 then
		if not f119_arg2 and CONDITIONS.IsGamepad( f119_local0 ) and f119_arg1.GunsmithButton and f119_arg1.GunsmithButton.DetailButton._isEquipped or f119_arg1._isEquipped then
			f119_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
				side = "left",
				priority = 3,
				replaceTop = true,
				button_ref = "button_alt1",
				helper_text = Engine[0xED84C33EC5F01EA]( 0xF45C394F4B8A31F )
			} )
		else
			f119_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
				side = "left",
				button_ref = "button_alt1",
				helper_text = Engine[0xED84C33EC5F01EA]( 0xF45C394F4B8A31F )
			} )
		end
	end
	local f119_local1 = LUI.FlowManager.GetScopedData( f119_arg1 )
	local f119_local2 = f119_local1.selectedIndex
	if f119_local2 then
		f119_local2 = f119_local1.selectedIndex == f119_arg1._selectedIndex
	end
	if f119_local2 and GUNSMITH.IsGunsmithCustomsAvailable( f119_local0, f119_arg1._unlocked, f119_arg1._variants, f119_arg1._weapon, f119_arg1._category, f119_arg1._blocked ) then
		if CONDITIONS.IsGamepad( f119_local0 ) then
			f119_arg1.GunsmithCustomizePrompt:SetAlpha( 1 )
		end
	else
		f119_local1.appearanceOptions = nil
	end
	f119_local1.appearanceOptions = nil
end

GUNSMITH.MobileGetFilteredEquipIndicatorTable = function ( f118_arg0 )
	local f118_local0 = {}
	for f118_local4, f118_local5 in ipairs( f118_arg0 ) do
		if f118_local5.ref and ((f118_local5.compareState == GUNSMITH.WEAPON_PART_COMPARE_STATE.REMOVE) or f118_local5.compareState == GUNSMITH.WEAPON_PART_COMPARE_STATE.SWAP) then
			f118_local0[#f118_local0 + 1] = f118_local5
		end
	end
	return f118_local0
end

GUNSMITH.GetUsedCategories = function ( f117_arg0, f117_arg1, f117_arg2, f117_arg3 )
	local f117_local0 = {}
	for f117_local5, f117_local6 in ipairs( f117_arg1 ) do
		if f117_arg2[f117_local6] and (0 < #f117_arg2[f117_local6] or f117_arg3) then
			local f117_local4 = GUNSMITH.AreAllAttachmentsBlockedInCategory( f117_arg0, f117_arg2[f117_local6] )
			if not f117_local4.allBlocked or not f117_local4.blockedByOneCategory or f117_local4.blockedByCategory ~= ATTACHMENT.conversionkit or f117_local4.isBlockedByUnlocked then
				table.insert( f117_local0, f117_local6 )
			end
		end
	end
	return f117_local0
end

GUNSMITH.GetWeaponPlatformProgressionFile = function ( f116_arg0 )
	local f116_local0 = WEAPON.GetWeaponPlatformByWeaponRef( f116_arg0 )
	if WEAPON.IsWeaponPlatformValid( f116_local0 ) then
		return CSV.platformProgressionTable.GetFile( f116_local0 )
	else
		return nil
	end
end

local f0_local6 = function ( f115_arg0 )
	local f115_local0 = Engine[0x45B054C920178E9]()
	local f115_local1 = WEAPON.GetWeaponDataForRef( f115_arg0 )
	local f115_local2 = PROGRESSION.GetMaxWeaponLevel( f115_arg0 )
	local f115_local3
	if f115_local1 then
		f115_local3 = f115_local1
	else
		f115_local3 = f115_local1[0x49DB2AF7D3296E4]
	end
	if not f115_local3 then
		return false
	end
	for f115_local4 = 1, f115_local2, 1 do
		local f115_local7 = f115_local3[f115_local4 + 1]
		if f115_local7 then
			local f115_local8 = f115_local7[0x1CBA5DD1F23977A][1] or ""
			local f115_local9 = LOOT.GetTypeForID( f115_local8[0x28887F70BF5EBA] )
			if f115_local9 and f115_local9 ~= LOOT.itemTypes.INVALID then
				local f115_local10 = f115_local8[0x5CAC7B4B9895786]
				if not f115_local10 then
					f115_local10 = ATTACHMENT.GetRefByID( tonumber( f115_local8[0x28887F70BF5EBA] ) )
				end
				if not Table.IsNilOrEmpty( GL_HACK.GetAttachmentData( f115_local0, f115_local10 ) ) then
					return true
				end
			end
		end
	end
	return false
end

GUNSMITH.IsWeaponProgressionAvailable = function ( f114_arg0 )
	local f114_local0
	if not GUNSMITH.IsDisabled( f114_arg0 ) then
		f114_local0 = f0_local0( f114_arg0 )
	else
		f114_local0 = false
	end
	return f114_local0
end

GUNSMITH.SetupButtonNavigatioin = function ( f113_arg0, f113_arg1, f113_arg2 )
	if f113_arg0 ~= nil then
		f113_arg0.navigation = f113_arg1
		f113_arg0.index = f113_arg2
	end
end

GUNSMITH.UpdateButtonNavigation = function ( f112_arg0, f112_arg1, f112_arg2, f112_arg3 )
	if f112_arg0.TuneButton and f112_arg3 and f112_arg2 == "up" then
		f112_arg0.navigation[f112_arg2] = f112_arg0.TuneButton
		f112_arg0.TuneButton.navigation = f112_arg0.TuneButton.navigation or {}
		f112_arg0.TuneButton.navigation[f112_arg2] = f112_arg1
		f112_arg0.TuneButton.navigation.down = f112_arg0.GunsmithButton
	else
		f112_arg0.navigation[f112_arg2] = f112_arg1
	end
end

GUNSMITH.SetupSharedButton = function ( f111_arg0, f111_arg1, f111_arg2 )
	f111_arg0._controllerIndex = f111_arg1
	f111_arg0._category = f111_arg2.category
	f111_arg0._buttonIndex = f111_arg2.buttonIndex
	f111_arg0._isTunable = f111_arg2.isTunable
	local f111_local0 = f111_arg2.weaponTable
	f111_arg0._weaponRef = f111_local0.weapon
	f111_arg0._variantID = f111_local0.variantID
	f111_arg0._attachments = f111_arg2.attachments or {}
	f111_arg0._weaponTable = f111_local0
	f111_arg0._weaponPlayerData = f111_arg2.weaponPlayerData
	f111_arg0._forShowcase = f111_arg2.forShowcase
end

GUNSMITH.SetupCustomizationButton = function ( f110_arg0, f110_arg1, f110_arg2, f110_arg3, f110_arg4 )
	f110_arg0:SetEmpty( false )
	f110_arg0:SetNegative( false )
	if f110_arg3 then
		f110_arg0:SetEquipped( false )
		local f110_local0 = {
			removeTextBacker = true,
			hasEmptyState = true,
			buttonSize = "Small",
			imageSize = f110_arg4,
			primaryActionText = Engine[0xED84C33EC5F01EA]( 0x582A97E6B28D01C ),
			showCategoryStack = f110_arg1.isCategory,
			localizeSubHeader = f110_arg1.localizeSubHeader
		}
		if not CONDITIONS.IsMobileOrMobileSim() then
			f110_local0.buttonData = {
				image = 0xEF328481BC70E7D
			}
		end
		f110_arg0:SetupButton( f110_local0 )
		f110_arg0:SetNegative( true )
	else
		local f110_local0 = {
			removeTextBacker = true,
			hasEmptyState = true,
			buttonData = {
				image = f110_arg1.image,
				header = f110_arg1.name,
				subHeader = f110_arg1.subHeader
			},
			imageSize = f110_arg4,
			localizeHeader = f110_arg1.localizeHeader,
			localizeSubHeader = f110_arg1.localizeSubHeader,
			showCategoryStack = f110_arg1.isCategory,
			winTokenCost = f110_arg1.winTokenCost
		}
		if not CONDITIONS.IsMobileOrMobileSim() then
			local f110_local1
			if f110_arg2 then
				f110_local1 = Engine[0xED84C33EC5F01EA]( 0x3FDB70668AFDB5E )
				if not f110_local1 then
				
				else
					f110_local0.primaryActionText = f110_local1
				end
			end
			f110_local1 = Engine[0xED84C33EC5F01EA]( 0xCA07A93FADF9E95 )
		end
		f110_arg0:SetupButton( f110_local0 )
		f110_arg0:SetEquipped( f110_arg2 )
	end
end

GUNSMITH.FocusGunPart = function ( f109_arg0, f109_arg1, f109_arg2 )
	if f109_arg2 == "extra" then
		return 
	end
	local f109_local0 = ClientWeapon[0x5DD69014A9C290]( FrontEndScene.ClientWeapons.Preview )
	local f109_local1 = ""
	local f109_local2 = ""
	if f109_arg2 == ATTACHMENT.perkCategory or f109_arg2 == ATTACHMENT.boltCategory then
		f109_local1 = "ammo_display_origin"
		local f109_local3 = CLIENT_MODEL.GetClientModelIndex( CLIENT_MODEL.coreMPModels.AMMO_DISPLAY )
		if f109_local3 then
			local f109_local4 = ClientModel[0x9088CC2C1E6A1E9]( f109_local3, CLIENT_MODEL.coreMPModels.GUN_VISE_BASE.tagOrigin )
			local f109_local5 = ClientModel[0x7FE4C5AFE1F4377]( f109_local3, CLIENT_MODEL.defaultTags.INVALID )
			f109_local2 = "attach_zoom," .. f109_arg2 .. "," .. f109_local1 .. "," .. f109_local4.xPosition .. "," .. f109_local4.yPosition .. "," .. f109_local4.zPosition .. "," .. 0 .. "," .. f109_local5.yAngle .. "," .. f109_local5.zAngle
		end
	else
		f109_local1 = ATTACHMENT.GetAttachmentCategoryBone( f109_arg2 )
		local f109_local3 = Engine[0xC3B7925CCAC9430]( f109_arg1, f109_local0, f109_local1 )
		if not f109_arg2 then
			local f109_local4 = f109_arg0._weaponRef and f109_arg0._weaponRef or "none"
			local f109_local5
			if f109_local1 and not f109_local1 then
				f109_local5 = f109_local1
			else
				f109_local5 = "none"
			end
			local f109_local6
			if f109_arg2 and not f109_arg2 then
				f109_local6 = f109_arg2
			else
				f109_local6 = "none"
			end
			Engine[0x15D98DF5F61904B]( 0, "dlog_error_event", {
				code = 9,
				message = "Current preview weapon '" .. f109_local4 .. "' does not have a model tag name bone '" .. f109_local5 .. "' for part category '" .. f109_local6 .. "'."
			} )
			return 
		end
		f109_local2 = "attach_zoom," .. f109_arg2 .. "," .. f109_local1 .. "," .. f109_local3.xPosition .. "," .. f109_local3.yPosition .. "," .. f109_local3.zPosition .. "," .. f109_local3.xAngle .. "," .. f109_local3.yAngle .. "," .. f109_local3.zAngle
	end
	Engine[0x6055C55456F05DF]( f109_local2, 1 )
end

GUNSMITH.AddTouchCustomizationButtonEventHandlers = function ( f106_arg0, f106_arg1, f106_arg2, f106_arg3 )
	f106_arg1:addEventHandler( "button_action", function ( f108_arg0, f108_arg1 )
		f106_arg0( f106_arg0, f108_arg0 )
	end )
	local f106_local0 = function ( f107_arg0, f107_arg1 )
		f106_arg0( f106_arg0, f107_arg0 )
	end
	
	f106_arg1:addEventHandler( "button_over_active", f106_local0 )
	f106_arg1:addEventHandler( "button_active", f106_local0 )
	f106_arg1:addEventHandler( "button_over_disable_active", f106_local0 )
	f106_arg1:addEventHandler( "button_disable_active", f106_local0 )
end

GUNSMITH.IsTuningUnlocked = function ( f105_arg0, f105_arg1 )
	return LOOT.IsUnlockedWithID( f105_arg1, ATTACHMENT.GetIDByRef( f105_arg0 .. "_tuning" ) )
end

GUNSMITH.WasInWeaponPreviewScene = function ()
	return Dvar[0x9E5BE3B4BBA4E0E]( 0x8315885BC8A2DD ) == true
end

GUNSMITH.WasInGunsmithScene = function ()
	return Dvar[0x9E5BE3B4BBA4E0E]( 0xC3477D65BD1203F ) == true
end

GUNSMITH.SetAreInWeaponPreviewScene = function ( f102_arg0 )
	Dvar[0x8EA06EEDB58D872]( 0x8315885BC8A2DD, f102_arg0 )
end

GUNSMITH.SetAreInGunsmithScene = function ( f101_arg0 )
	Dvar[0x8EA06EEDB58D872]( 0xC3477D65BD1203F, f101_arg0 )
end

GUNSMITH.InitGunsmithWeaponOffsetDataSources = function ()
	if DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets == nil then
		DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets = {}
		DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData = LUI.DataSourceInGlobalModel.new( "frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData" )
		DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.xOffset = LUI.DataSourceInGlobalModel.new( "frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.xOffset" )
		DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.yOffset = LUI.DataSourceInGlobalModel.new( "frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.yOffset" )
		DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.zOffset = LUI.DataSourceInGlobalModel.new( "frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.zOffset" )
		DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.tagDataString = LUI.DataSourceInGlobalModel.new( "frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.tagDataString" )
	end
end

GUNSMITH.SetGunsmithWeaponOffset = function ( f99_arg0, f99_arg1 )
	GUNSMITH.InitGunsmithWeaponOffsetDataSources()
	if f99_arg1 == nil then
		f99_arg1 = 0
	end
	ClientWeapon[0x8B8A4E0355DF0C0]( FrontEndScene.ClientWeapons.Preview, DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.xOffset:GetValue( f99_arg0 ) or 0, DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.yOffset:GetValue( f99_arg0 ) or 0, (DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.zOffset:GetValue( f99_arg0 ) or 0) + f99_arg1 )
end

GUNSMITH.ResetGunsmithWeaponXYOffset = function ( f98_arg0 )
	ClientWeapon[0x8B8A4E0355DF0C0]( FrontEndScene.ClientWeapons.Preview, 0, 0, DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.zOffset:GetValue( f98_arg0 ) )
end

GUNSMITH.SetGunsmithCameraPosition = function ( f97_arg0 )
	GUNSMITH.InitGunsmithWeaponOffsetDataSources()
	local f97_local0 = DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.tagDataString:GetValue( f97_arg0 )
	if f97_local0 then
		Engine[0x6055C55456F05DF]( f97_local0, 1 )
	end
end

GUNSMITH.SetWeaponPreviewCameraPosition = function ( f96_arg0, f96_arg1, f96_arg2 )
	if not f96_arg1 then
		f96_arg1 = GUNSMITH.defaultTag
	end
	if not f96_arg2 then
		f96_arg2 = {}
	end
	local f96_local0 = Engine[0xC3B7925CCAC9430]( f96_arg0, ClientWeapon[0x5DD69014A9C290]( FrontEndScene.ClientWeapons.Preview ), f96_arg1 )
	local f96_local1 = {
		z = 0,
		x = 0,
		y = 0
	}
	if f96_arg2.category == ATTACHMENT.stickerCategory then
		if f96_arg2.weaponClass == WEAPON.SHOTGUNClass then
			f96_arg1 = "tag_sticker_shotgun"
		else
			f96_arg1 = "tag_sticker"
		end
	end
	if GL_HACK.IsDoomGunscreenOffsetRequired( f96_arg2.weaponTable ) then
		if CONDITIONS.IsMenuInStack( STORE.GetStorePreviewMenuRef() ) then
			f96_local1.x = GL_HACK.DOOM_GUN_SCREEN_OFFSET.X
			f96_local1.y = GL_HACK.DOOM_GUN_SCREEN_OFFSET.Y
			f96_local1.z = GL_HACK.DOOM_GUN_SCREEN_OFFSET.Z
		else
			f96_local1 = GL_HACK.GetDoomGunCameraOffsetForCategory( f96_arg2.category )
		end
	end
	if f96_arg2.weaponTable and GL_HACK.IsDoomChainsawBlueprintFromLootID( f96_arg2.weaponTable.lootID ) and f96_arg2.category == ATTACHMENT.camoCategory then
		f96_local1.x = GL_HACK.DOOM_CHAINSAW_CAMERA_OFFSETS.XOFFSET
		f96_local1.y = GL_HACK.DOOM_CHAINSAW_CAMERA_OFFSETS.YOFFSET
		f96_local1.z = GL_HACK.DOOM_CHAINSAW_CAMERA_OFFSETS.ZOFFSET
	end
	local f96_local2 = ClientWeapon[0x402AC1286E4952C]( FrontEndScene.ClientWeapons.Preview )
	local f96_local3 = {
		xPosition = f96_local0.xPosition - f96_local2.xOffset + f96_local1.x,
		yPosition = f96_local0.yPosition - f96_local2.yOffset + f96_local1.y,
		zPosition = f96_local0.zPosition - f96_local2.zOffset + f96_local1.z,
		xAngle = f96_local0.xAngle,
		yAngle = f96_local0.yAngle,
		zAngle = f96_local0.zAngle
	}
	if f96_arg2.weaponName and f96_arg2.weaponName == "jup_jp13_dm_svictork" and f96_arg1 == "tag_sticker" then
		f96_local3.zPosition = f96_local3.zPosition - 0.5
	end
	if f96_arg2.weaponName and f96_arg2.weaponName == "iw9_lm_slima" and f96_arg1 == "tag_sticker" then
		f96_local3.zPosition = f96_local3.zPosition - 1
	end
	if f96_arg2.weaponName and f96_arg2.weaponName == "jup_jp06_lm_pkilop" and f96_arg1 == "tag_sticker" then
		f96_local3.xPosition = f96_local3.xPosition - 5
		f96_local3.zPosition = f96_local3.zPosition - 2
	end
	Engine[0x6055C55456F05DF]( "weapon_preview,receiver," .. f96_arg1 .. "," .. f96_local3.xPosition .. "," .. f96_local3.yPosition .. "," .. f96_local3.zPosition .. "," .. f96_local3.xAngle .. "," .. f96_local3.yAngle .. "," .. f96_local3.zAngle .. "," .. (f96_arg2.weaponClass or "") .. "," .. (f96_arg2.weaponName or ""), 1 )
end

GUNSMITH.GetPlatformProgressionBaseWeapon = function ( f95_arg0 )
	local f95_local0 = GUNSMITH.GetWeaponPlatformProgressionFile( f95_arg0 )
	if f95_local0 then
		return StringTable[0x2077452C28AB2FC]( f95_local0, 0, CSV.platformProgressionTable.cols.ref )
	else
		return nil
	end
end

local f0_local7 = function ( f94_arg0, f94_arg1 )
	local f94_local0, f94_local1 = nil
	if tonumber( StringTable[0x2DCF0973239E909]( f94_arg0, CSV.platformProgressionTable.cols.ref, f94_arg1, CSV.platformProgressionTable.cols.unlockLevel ) ) < 0 then
		f94_local0 = StringTable[0x2DCF0973239E909]( f94_arg0, CSV.platformProgressionTable.cols.ref, f94_arg1, CSV.platformProgressionTable.cols.left )
		f94_local1 = StringTable[0x2DCF0973239E909]( f94_arg0, CSV.platformProgressionTable.cols.ref, f94_arg1, CSV.platformProgressionTable.cols.right )
	else
		f94_local0 = StringTable[0x2077452C28AB2FC]( f94_arg0, 0, CSV.platformProgressionTable.cols.left )
		f94_local1 = StringTable[0x2077452C28AB2FC]( f94_arg0, 0, CSV.platformProgressionTable.cols.right )
	end
	if String.IsNilOrEmpty( f94_local0 ) and String.IsNilOrEmpty( f94_local1 ) then
		return false
	else
		return true
	end
end

GUNSMITH.GetProgressionWeaponTreeTable = function ( f93_arg0 )
	local f93_local0 = GUNSMITH.GetWeaponPlatformProgressionFile( f93_arg0 )
	if String.IsNilOrEmpty( f93_local0 ) then
		return {}
	elseif f93_local0 and 0 < StringTable[0xFD4E49A34DD43AE]( f93_local0 ) then
		if GUNSMITH.ProgressionWeaponTreeTable[f93_local0] and GUNSMITH.DoesTreeContainWeapon( GUNSMITH.ProgressionWeaponTreeTable[f93_local0], f93_arg0 ) then
			return GUNSMITH.ProgressionWeaponTreeTable[f93_local0]
		elseif not f0_local0( f93_local0, f93_arg0 ) then
			GUNSMITH.ProgressionWeaponTreeTable[f93_local0] = GL_HACK.BuildTree( f93_local0, f93_arg0, tonumber( StringTable[0x2DCF0973239E909]( f93_local0, CSV.platformProgressionTable.cols.ref, f93_arg0, CSV.platformProgressionTable.cols.left ) ), tonumber( StringTable[0x2DCF0973239E909]( f93_local0, CSV.platformProgressionTable.cols.ref, f93_arg0, CSV.platformProgressionTable.cols.right ) ), StringTable[0x2DCF0973239E909]( f93_local0, CSV.platformProgressionTable.cols.ref, f93_arg0, CSV.platformProgressionTable.cols.unlockLevel ) )
			return GUNSMITH.ProgressionWeaponTreeTable[f93_local0]
		else
			GUNSMITH.ProgressionWeaponTreeTable[f93_local0] = GL_HACK.BuildTree( f93_local0, StringTable[0x2077452C28AB2FC]( f93_local0, 0, CSV.platformProgressionTable.cols.ref ), tonumber( StringTable[0x2077452C28AB2FC]( f93_local0, 0, CSV.platformProgressionTable.cols.left ) ), tonumber( StringTable[0x2077452C28AB2FC]( f93_local0, 0, CSV.platformProgressionTable.cols.right ) ), StringTable[0x2077452C28AB2FC]( f93_local0, 0, CSV.platformProgressionTable.cols.unlockLevel ) )
			return GUNSMITH.ProgressionWeaponTreeTable[f93_local0]
		end
	else
		return {}
	end
end

GUNSMITH.DoesTreeContainWeapon = function ( f92_arg0, f92_arg1 )
	local f92_local0 = {}
	local f92_local1 = nil
	table.insert( f92_local0, f92_arg0 )
	if 0 < #f92_local0 then
		
	else
		
	end
	return false
end

GUNSMITH.GetProgressionWeaponTable = function ( f90_arg0 )
	local f90_local0 = GUNSMITH.GetProgressionWeaponTreeTable( GUNSMITH.GetPlatformProgressionBaseWeapon( f90_arg0 ) )
	local f90_local1 = nil
	f90_local1 = function ( f91_arg0, f91_arg1 )
		if not f91_arg0 then
			return 
		else
			table.insert( f91_arg1, f91_arg0.ref )
			f90_arg0( f91_arg0.left, f91_arg1 )
			f90_arg0( f91_arg0.right, f91_arg1 )
		end
	end
	
	local f90_local2 = {}
	f90_local1( f90_local0, f90_local2 )
	return f90_local2
end

GUNSMITH.GetProgressionUnlockWeaponAndLevel = function ( f88_arg0 )
	local f88_local0 = GUNSMITH.GetProgressionWeaponTreeTable( GUNSMITH.GetPlatformProgressionBaseWeapon( f88_arg0 ) )
	local f88_local1 = nil
	local f88_local2 = function ( f89_arg0, f89_arg1 )
		if not f89_arg0 then
			return nil
		elseif f89_arg0.ref == f88_arg0 then
			return {
				ref = f89_arg1,
				unlockLevel = f89_arg0.unlockLevel
			}
		else
			local f89_local0 = f88_arg0( f89_arg0.left, f89_arg0.ref )
			if f89_local0 then
				return f89_local0
			else
				return f88_arg0( f89_arg0.right, f89_arg0.ref )
			end
		end
	end
	
	return f88_local2( f88_local0, f88_local0.ref )
end

GUNSMITH.InitOrGetHiddenSiblingAttachmentTable = function ( f87_arg0, f87_arg1 )
	f87_arg0[GUNSMITH.HIDDEN_SIBLINGS_STRING] = f87_arg0[GUNSMITH.HIDDEN_SIBLINGS_STRING] or {}
	f87_arg0[GUNSMITH.HIDDEN_SIBLINGS_STRING][f87_arg1] = f87_arg0[GUNSMITH.HIDDEN_SIBLINGS_STRING][f87_arg1] or {}
	return f87_arg0[GUNSMITH.HIDDEN_SIBLINGS_STRING][f87_arg1]
end

GUNSMITH.UnhideSiblingAttachmentsInCategory = function ( f86_arg0, f86_arg1 )
	local f86_local0 = GUNSMITH.InitOrGetHiddenSiblingAttachmentTable( f86_arg0, f86_arg1 )
	local f86_local1 = f86_arg0[f86_arg1]
	if f86_arg1 ~= ATTACHMENT.receiverCategory and f86_local1 then
		for f86_local2 = #f86_local0, 1, -1 do
			local f86_local5 = f86_local0[f86_local2]
			table.remove( f86_local0, f86_local2 )
			table.insert( f86_local1, f86_local5 )
		end
	end
end

GUNSMITH.FindSubstitubeSiblingForAttachment = function ( f85_arg0, f85_arg1, f85_arg2, f85_arg3, f85_arg4 )
	local f85_local0 = nil
	local f85_local1 = f85_arg4.ref
	local f85_local2 = f85_arg4.category
	local f85_local3 = ATTACHMENT.GetBaseName( f85_local1, f85_local2, f85_arg1.weapon, f85_arg0 )
	local f85_local4 = GUNSMITH.InitOrGetHiddenSiblingAttachmentTable( f85_arg3, f85_local2 )
	ATTACHMENT.SetBlockedAttachments( f85_arg0, f85_local4, f85_arg1, f85_arg2, f85_local2 )
	for f85_local8, f85_local9 in ipairs( f85_local4 ) do
		if not String.IsNilOrEmpty( f85_local9.baseName ) and f85_local9.baseName == f85_local3 and f85_local9.ref ~= f85_local1 and not f85_local9.isBlocked then
			f85_local0 = f85_local9
			break
		end
	end
	return f85_local0
end

GUNSMITH.FindSubstituteSiblingForEachAttachments = function ( f84_arg0, f84_arg1, f84_arg2, f84_arg3, f84_arg4 )
	local f84_local0 = {}
	for f84_local4, f84_local5 in pairs( f84_arg4 ) do
		f84_local0[f84_local5] = GUNSMITH.FindSubstitubeSiblingForAttachment( f84_arg0, f84_arg1, f84_arg2, f84_arg3, f84_local5 )
	end
	return f84_local0
end

GUNSMITH.HideSiblingAttachmentsInCategory = function ( f83_arg0, f83_arg1 )
	local f83_local0 = GUNSMITH.InitOrGetHiddenSiblingAttachmentTable( f83_arg0, f83_arg1 )
	local f83_local1 = f83_arg0[f83_arg1]
	if f83_arg1 ~= ATTACHMENT.receiverCategory and f83_local1 then
		local f83_local2 = {}
		local f83_local3 = {}
		for f83_local7, f83_local8 in ipairs( f83_local1 ) do
			if not String.IsNilOrEmpty( f83_local8.baseName ) then
				f83_local3[f83_local8.baseName] = f83_local3[f83_local8.baseName] or {}
				table.insert( f83_local2, f83_local7 )
				table.insert( f83_local3[f83_local8.baseName], f83_local7 )
			end
		end
		f83_local4 = {}
		for f83_local8, f83_local13 in pairs( f83_local3 ) do
			for f83_local9, f83_local10 in ipairs( f83_local13 ) do
				local f83_local12 = f83_local4[f83_local8] and f83_local1[f83_local4[f83_local8]] or nil
				if not f83_local12 or f83_local12.isBlocked and not f83_local1[f83_local10].isBlocked then
					f83_local4[f83_local8] = f83_local10
				end
			end
		end
		f83_local5 = {}
		for f83_local13, f83_local14 in pairs( f83_local4 ) do
			f83_local5[f83_local14] = true
		end
		for f83_local6 = #f83_local2, 1, -1 do
			f83_local14 = f83_local2[f83_local6]
			if not f83_local5[f83_local14] then
				local f83_local15 = f83_local1[f83_local14]
				table.remove( f83_local1, f83_local14 )
				table.insert( f83_local0, f83_local15 )
			end
		end
	end
end

GUNSMITH.UpdateBlockedAttachments = function ( f82_arg0, f82_arg1, f82_arg2, f82_arg3 )
	if f82_arg1 and f82_arg1.attachments and f82_arg2 and f82_arg3 then
		local f82_local0 = {}
		for f82_local4, f82_local5 in pairs( f82_arg1.attachments ) do
			if f82_arg2[f82_local5.category] then
				f82_local0[f82_local5.category] = f82_local5.ref
			end
		end
		for f82_local4, f82_local5 in pairs( f82_arg3 ) do
			local f82_local6 = f82_arg2[f82_local5]
			if f82_local5 ~= ATTACHMENT.receiverCategory and f82_local6 then
				GUNSMITH.UnhideSiblingAttachmentsInCategory( f82_arg2, f82_local5 )
				if 0 < ATTACHMENT.SetBlockedAttachments( f82_arg0, f82_local6, f82_arg1, f82_local0[f82_local5] and f82_local0[f82_local5] or ATTACHMENT.none, f82_local5 ) then
					GUNSMITH.HideSiblingAttachmentsInCategory( f82_arg2, f82_local5 )
				end
			end
		end
	end
end

GUNSMITH.AreAllAttachmentsBlockedInCategory = function ( f81_arg0, f81_arg1 )
	local f81_local0 = {
		blockedByOneCategory = true,
		blockedByCategory = nil,
		isBlockedByUnlocked = false,
		allBlocked = true
	}
	if f81_arg1 then
		f81_local0.blockedByCategory = f81_arg1[1].blockedByCategoryRef
		for f81_local5, f81_local6 in ipairs( f81_arg1 ) do
			if f81_local6.ref ~= ATTACHMENT.none and not f81_local6.isBlocked then
				f81_local0.allBlocked = false
				return f81_local0
			end
			local f81_local4 = f81_local0.blockedByOneCategory
			if f81_local4 then
				f81_local4 = f81_local0.blockedByCategory == f81_local6.blockedByCategoryRef
			end
			f81_local0.blockedByOneCategory = f81_local4
			f81_local0.blockedByCategory = f81_local6.blockedByCategoryRef
			if not f81_local0.isBlockedByUnlocked and LOOT.IsUnlocked( f81_arg0, LOOT.itemTypes.ATTACHMENT, f81_local6.blockedByRef ) then
				f81_local0.isBlockedByUnlocked = true
			end
		end
	end
	f81_local0.allBlocked = true
	return f81_local0
end

GUNSMITH.FilterRestrictedAttachments = function ( f80_arg0, f80_arg1, f80_arg2 )
	local f80_local0 = {}
	for f80_local11, f80_local12 in ipairs( f80_arg0 ) do
		local f80_local8 = true
		if f80_local12.attachmentsRequiredForUnlock and 0 < #f80_local12.attachmentsRequiredForUnlock then
			for f80_local9, f80_local10 in ipairs( f80_local12.attachmentsRequiredForUnlock ) do
				if ATTACHMENT.GetBundleByRef( f80_local10 ) ~= nil then
					local f80_local7 = ATTACHMENT.GetCategory( f80_local10 )
					if f80_local7 ~= ATTACHMENT.conversionkit and f80_local7 ~= ATTACHMENT.receiverCategory then
						f80_local8 = false
					end
				end
			end
		else
			f80_local8 = false
		end
		if f80_local12.ref == f80_arg2 then
			table.insert( f80_local0, f80_local12 )
		end
		if (not f80_local12.isBlocked or not f80_local8) and (not MatchRules[0x722F56788C744E9]( f80_local12.ref, f80_arg1 ) or f80_local12.ref == f80_arg2) then
			if CONDITIONS.AreRestrictionsActive() and f80_local12.category == ATTACHMENT.receiverCategory then
				local f80_local4 = WEAPON.GetWeaponRefByRec( f80_local12.ref )
				if not MatchRules[0x966A6F3A93A1200]( f80_local4 ) and not MatchRules[0xB0FA3D79A09CF96]( WEAPON.GetWeaponClass( f80_local4 ) ) then
					table.insert( f80_local0, f80_local12 )
				end
			end
			table.insert( f80_local0, f80_local12 )
		end
	end
	return f80_local0
end

GUNSMITH.CheckBlockedEquippedAttachmentLogic = function ( f79_arg0, f79_arg1, f79_arg2, f79_arg3, f79_arg4, f79_arg5, f79_arg6, f79_arg7 )
	local f79_local0 = ATTACHMENT.GetBlockedEquippedAttachments( f79_arg0, f79_arg3, f79_arg4, f79_arg7, f79_arg6 )
	local f79_local1 = {}
	local f79_local2 = {}
	local f79_local3 = LUI.ShallowCopy( f79_local0 )
	for f79_local4 = 1, #f79_local0, 1 do
		local f79_local7 = f79_arg7[f79_local0[f79_local4].category]
		local f79_local8 = ""
		if not Table.IsNilOrEmpty( f79_local7 ) then
			for f79_local12, f79_local13 in ipairs( f79_local7 ) do
				if f79_local13.ref == f79_local0[f79_local4].ref then
					f79_local8 = f79_local13.baseName
					break
				end
			end
		end
		if not LUI.StringIsNilOrEmpty( f79_local8 ) and not Table.IsNilOrEmpty( f79_local7 ) then
			ATTACHMENT.SetBlockedAttachments( f79_arg0, GUNSMITH.FilterRestrictedAttachments( f79_local7, f79_arg1.weaponRef, f79_arg6 ), f79_arg1, f79_arg2, f79_arg5, WEAPON.GenerateCopyOfWeaponTableWithReplacementAttachment( f79_arg1, f79_arg6 ) )
			if not CONDITIONS.IsJup() and not CONDITIONS[0x4A020C7B018B3BA]() then
				for f79_local14, f79_local15 in ipairs( f79_local7 ) do
					if f79_local15.baseName and f79_local15.baseName == f79_local8 and f79_local15.ref ~= f79_local0[f79_local4].ref and not f79_local15.isBlocked then
						table.insert( f79_local1, f79_local15 )
						table.remove( f79_local3, f79_local4 )
					end
				end
			end
		end
	end
	for f79_local17, f79_local7 in pairs( GUNSMITH.FindSubstituteSiblingForEachAttachments( f79_arg0, f79_arg3, f79_arg4, f79_arg7, f79_local3 ) ) do
		local f79_local8 = LUI.IsItemInArray( f79_local3, f79_local17 )
		if 0 < f79_local8 then
			table.insert( f79_local2, f79_local7 )
			table.remove( f79_local3, f79_local8 )
		end
	end
	if ATTACHMENT.GetCategory( f79_arg4 ) == ATTACHMENT.conversionkit and f79_arg6.ref == ATTACHMENT.none then
		for f79_local7, f79_local8 in ipairs( ATTACHMENT.GetAttachmentsRequiredForUnlockTable( f79_arg1, f79_arg4 ) ) do
			table.insert( f79_local3, f79_local8 )
		end
	end
	return LUI.ShallowCopy( f79_local3 ), f79_local1, f79_local2
end

GUNSMITH.GetBrandingMaterialName = function ( f78_arg0 )
	if not Dvar[0x9E5BE3B4BBA4E0E]( 0x9A091243132F258 ) then
		return ""
	else
		return StringTable[0x2DCF0973239E909]( CSV.weaponManufacturers.file, CSV.weaponManufacturers.cols.manufacturer, f78_arg0, CSV.weaponManufacturers.cols.Image )
	end
end

GUNSMITH.GetBrandingSmallMaterialName = function ( f77_arg0 )
	if not Dvar[0x9E5BE3B4BBA4E0E]( 0x9A091243132F258 ) then
		return ""
	else
		return StringTable[0x2DCF0973239E909]( CSV.weaponManufacturers.file, CSV.weaponManufacturers.cols.manufacturer, f77_arg0, CSV.weaponManufacturers.cols.smallImage )
	end
end

GUNSMITH.GetBrandingMaterialWidth = function ( f76_arg0 )
	if not Dvar[0x9E5BE3B4BBA4E0E]( 0x9A091243132F258 ) then
		return 0
	else
		return StringTable[0x2DCF0973239E909]( CSV.weaponManufacturers.file, CSV.weaponManufacturers.cols.manufacturer, f76_arg0, CSV.weaponManufacturers.cols.imageWidth )
	end
end

GUNSMITH.GetBrandingSmallMaterialWidth = function ( f75_arg0 )
	if not Dvar[0x9E5BE3B4BBA4E0E]( 0x9A091243132F258 ) then
		return 0
	else
		return StringTable[0x2DCF0973239E909]( CSV.weaponManufacturers.file, CSV.weaponManufacturers.cols.manufacturer, f75_arg0, CSV.weaponManufacturers.cols.smallImageWidth )
	end
end

GUNSMITH.GetBrandingMaterialNameFromWeaponTable = function ( f74_arg0 )
	local f74_local0
	if f74_arg0 then
		f74_local0 = ATTACHMENT.GetReceiverBlueprintFromWeaponTable( f74_arg0 )
		if not f74_local0 then
		
		else
			local f74_local1
			if f74_local0 then
				f74_local1 = f74_local0
			else
				f74_local1 = f74_local0[0x2EAB902F6509817]
			end
			return GUNSMITH.GetBrandingMaterialName( f74_local1 )
		end
	end
	f74_local0 = nil
end

GUNSMITH.GetBrandingImageWidthFromWeaponTable = function ( f73_arg0, f73_arg1 )
	if not f73_arg0._brandingOriginalImageHeight then
		local f73_local0, f73_local1 = f73_arg0:GetImageDimensions()
		f73_arg0._brandingOriginalImageHeight = f73_local1
	end
	local f73_local0 = ATTACHMENT.GetReceiverBlueprintFromWeaponTable( f73_arg1 )
	return GUNSMITH.GetBrandingMaterialWidth( f73_local0[0x2EAB902F6509817] ) * f73_arg0:getHeight() / f73_arg0._brandingOriginalImageHeight
end

GUNSMITH.UpdateWeaponStatsBranding = function ( f72_arg0, f72_arg1, f72_arg2, f72_arg3 )
	if f72_arg3 then
		DataSources.alwaysLoaded.weaponStats.showBranding:SetValue( f72_arg0, false )
		return 
	end
	local f72_local0 = GUNSMITH.GetBrandingMaterialNameFromWeaponTable( f72_arg2 )
	local f72_local1 = String.IsNilOrEmpty( f72_local0 )
	if not f72_local1 then
		DataSources.alwaysLoaded.weaponStats.brandingMaterial:SetValue( f72_arg0, f72_local0 )
		DataSources.alwaysLoaded.weaponStats.brandingWidth:SetValue( f72_arg0, GUNSMITH.GetBrandingImageWidthFromWeaponTable( f72_arg1, f72_arg2 ) )
	end
	DataSources.alwaysLoaded.weaponStats.showBranding:SetValue( f72_arg0, not f72_local1 )
end

GUNSMITH.SetupGunsmithBlueprintPopup = function ( f70_arg0, f70_arg1, f70_arg2, f70_arg3 )
	local f70_local0 = GUNSMITH.BlueprintEditStatus.EditBlueprint
	if GUNSMITH.DoesWeaponTableContainProtunedAttachment( f70_arg1._weaponTable ) then
		local f70_local1 = nil
		for f70_local2 = 1, #f70_arg1._weaponTable.attachments, 1 do
			if f70_arg1._weaponTable.attachments[f70_local2].ref == f70_arg1._equippedAttach then
				f70_local1 = f70_arg1._weaponTable.attachments[f70_local2]
				break
			end
		end
		local f70_local2 = GUNSMITH.IsAttachmentProtuned( f70_arg1._weaponTable, f70_local1 )
		if f70_arg2 and f70_arg1._equippedAttach == ATTACHMENT.none then
			f70_local0 = GUNSMITH.BlueprintEditStatus.AddNewAttachment
		elseif f70_local2 then
			f70_local0 = GUNSMITH.BlueprintEditStatus.ChangeProTunedAttachment
		elseif not f70_local2 then
			f70_local0 = GUNSMITH.BlueprintEditStatus.ChangeNonProTunedAttachment
		end
	end
	GUNSMITH.SetupCallbackFuncForBlueprintEdit( f70_arg0, f70_arg1._weaponPlayerData, f70_local0, function ()
		if f70_arg0._isInAttachmentSelect then
			local f71_local0 = LUI.FlowManager.GetScopedData( LOADOUT.GetAttachmentSelectMenuRef() )
			local f71_local1 = f70_arg0.Attachments._targetPosition
			local f71_local2
			if f71_local1 then
				f71_local2 = f71_local1
			else
				f71_local2 = f71_local1.x
			end
			f71_local0.lastTargetPositionX = f71_local2
		end
		f70_arg0()
	end )
end

GUNSMITH.IsWeaponSetupBlueprintIntact = function ( f69_arg0 )
	local f69_local0
	if not f69_arg0 or f69_arg0.blueprintTuned:get() == 0 then
		f69_local0 = false
	else
		f69_local0 = true
	end
	return f69_local0
end

GUNSMITH.GetForcedBlueprintAttachment = function ( f68_arg0, f68_arg1 )
	if PROJECT[0x5A05E13AC947C99][0x4C9174E5BA3C493] and PROJECT[0x5A05E13AC947C99][0x4C9174E5BA3C493][f68_arg0.weapon] then
		for f68_local8, f68_local9 in ipairs( PROJECT[0x5A05E13AC947C99][0x4C9174E5BA3C493][f68_arg0.weapon] ) do
			if f68_local9.variantData.variantID == f68_arg0.variantID then
				for f68_local6, f68_local7 in pairs( f68_local9.variantData.attachments ) do
					if ATTACHMENT.GetCategory( f68_local6 ) == f68_arg1 then
						return f68_local6
					end
				end
			end
		end
	end
	return nil
end

GUNSMITH.DoesWeaponSetupContainProtunedAttachment = function ( f67_arg0 )
	return GUNSMITH.DoesWeaponTableContainProtunedAttachment( WEAPON.GenerateWeaponTable( f67_arg0 ) )
end

GUNSMITH.DoesWeaponTableContainProtunedAttachment = function ( f66_arg0 )
	if f66_arg0 and not String.IsNilOrEmpty( f66_arg0.weapon ) and f66_arg0.variantID and f66_arg0.variantID > WEAPON.baseVariant and f66_arg0.attachments then
		local f66_local0 = GL_HACK.GetWeaponMPRef( f66_arg0.weapon )
		local f66_local1 = Engine[0x879C2878DB98F92]( f66_local0, f66_arg0.variantID )
		local f66_local2
		if f66_local1 then
			f66_local2 = f66_local1
		else
			f66_local2 = Engine[0x6CE34978E636774]( f66_local0, f66_local1[0xAE1E225E2DD2DF4]( f66_local1 ) )
		end
		if f66_local2 then
			local f66_local3 = WEAPON.GetWeaponModelName( f66_arg0.weapon, f66_arg0, {
				includeAttachments = true
			} )
			for f66_local7, f66_local8 in ipairs( f66_arg0.attachments ) do
				if GUNSMITH.IsAttachmentProtuned( f66_arg0, f66_local8, f66_local3, f66_local2 ) then
					return true
				end
			end
		end
	end
	return false
end

GUNSMITH.GetProtunedAttachmentMap = function ( f65_arg0 )
	local f65_local0 = {}
	local f65_local1 = 0
	if f65_arg0 and not String.IsNilOrEmpty( f65_arg0.weapon ) and f65_arg0.variantID and f65_arg0.variantID > WEAPON.baseVariant and f65_arg0.attachments then
		local f65_local2 = GL_HACK.GetWeaponMPRef( f65_arg0.weapon )
		local f65_local3 = Engine[0x879C2878DB98F92]( f65_local2, f65_arg0.variantID )
		local f65_local4
		if f65_local3 then
			f65_local4 = f65_local3
		else
			f65_local4 = Engine[0x6CE34978E636774]( f65_local2, f65_local3[0xAE1E225E2DD2DF4]( f65_local3 ) )
		end
		if f65_local4 then
			local f65_local5 = WEAPON.GetWeaponModelName( f65_arg0.weapon, f65_arg0, {
				includeAttachments = true
			} )
			for f65_local9, f65_local10 in ipairs( f65_arg0.attachments ) do
				if GUNSMITH.DoesAttachmentHaveProtuning( f65_arg0, f65_local10.ref, f65_local5, f65_local4 ) then
					f65_local0[f65_local10.ref] = f65_local10.hasBPTune ~= GUNSMITH.CLEAR_PRO_TUNING
					f65_local1 = f65_local1 + 1
				end
			end
		end
	end
	return f65_local0, f65_local1
end

GUNSMITH.DoesAttachmentHaveProtuning = function ( f64_arg0, f64_arg1, f64_arg2, f64_arg3 )
	if not f64_arg0 or not f64_arg1 then
		return false
	end
	local f64_local0 = GL_HACK.GetWeaponMPRef( f64_arg0.weapon )
	if not f64_arg3 then
		local f64_local1 = Engine[0x879C2878DB98F92]( f64_local0, f64_arg0.variantID )
		if f64_local1 then
			f64_arg3 = f64_local1
		else
			f64_arg3 = Engine[0x6CE34978E636774]( f64_local0, f64_local1[0xAE1E225E2DD2DF4]( f64_local1 ) )
		end
	end
	if f64_arg3 and f64_arg3[f64_arg1] then
		if String.IsNilOrEmpty( f64_arg2 ) or not f64_arg2 then
			f64_arg2 = WEAPON.GetWeaponModelName( f64_arg0.weapon, f64_arg0, {
				includeAttachments = true
			} )
		end
		local f64_local1 = Engine[0x603B6AC5797050A]( f64_arg2, f64_arg1 )
		if f64_local1 ~= Enum[0x540F63FFAF44174][0xBEA71FD0CCA2F6D] then
			return Engine[0x4AF1CF5FDA63B52]( f64_local0, f64_arg0.variantID, f64_local1 )
		end
	end
	return false
end

GUNSMITH.IsAttachmentProtuned = function ( f63_arg0, f63_arg1, f63_arg2, f63_arg3 )
	if f63_arg0 and f63_arg1 and f63_arg1.hasBPTune ~= GUNSMITH.CLEAR_PRO_TUNING then
		return GUNSMITH.DoesAttachmentHaveProtuning( f63_arg0, f63_arg1.ref, f63_arg2, f63_arg3 )
	else
		return false
	end
end

GUNSMITH.TryClearProTuningInSetup = function ( f62_arg0, f62_arg1, f62_arg2, f62_arg3, f62_arg4 )
	if GUNSMITH.DoesAttachmentHaveProtuning( f62_arg0, f62_arg1.attachment:get(), f62_arg3, f62_arg4 ) then
		f62_arg1.hasBPTune:set( GUNSMITH.CLEAR_PRO_TUNING )
	else
		f62_arg1.hasBPTune:set( GUNSMITH.CAN_PRO_TUNE )
	end
end

GUNSMITH.IsSwappingAttachmentRequired = function ( f61_arg0, f61_arg1, f61_arg2 )
	local f61_local0 = f61_arg2.category and f61_arg2.category or ATTACHMENT.GetCategory( f61_arg2.ref )
	local f61_local1 = GUNSMITH.IsAttachmentSetupFull( f61_local0, f61_arg0 )
	local f61_local2
	if f61_arg1 ~= nil and f61_local0 == ATTACHMENT.GetCategory( f61_arg1 ) then
		f61_local2 = false
	else
		f61_local2 = true
	end
	local f61_local3
	if f61_local1 then
		f61_local3 = f61_local1
	else
		f61_local3 = f61_local2
	end
	return f61_local3
end

GUNSMITH.GetBreakBlueprintConfirmPopupRef = function ()
	return "BreakBlueprintConfirmPopup"
end

GUNSMITH.SetupCallbackFuncForBlueprintEdit = function ( f57_arg0, f57_arg1, f57_arg2, f57_arg3 )
	local f57_local0, f57_local1 = nil
	if not CONDITIONS.IsTuningEnabled() then
		if f57_arg3 then
			f57_arg1.blueprintTuned:set( 0 )
			f57_arg3()
		end
	end
	if CONDITIONS.IsMobileOrMobileSim() then
		f57_local1 = {
			title = Engine[0xEB2A2834B76AEA4]( Engine[0xED84C33EC5F01EA]( 0xDC8F1B7E419BCCD ) ),
			message = Engine[0xED84C33EC5F01EA]( 0x1EA42D4543C75D6 ),
			typeOfPopup = PopupsUtils.typeOfPopup.POPUP_YESNO,
			yesAction = function ( f59_arg0 )
				ACTIONS.LeaveMenu( f59_arg0 )
				f57_arg0.blueprintTuned:set( 0 )
				f57_arg0()
			end,
			noAction = function ( f58_arg0 )
				ACTIONS.LeaveMenu( f58_arg0 )
			end
		}
		f57_local0 = "MobileGenericPopupWindow"
	else
		if f57_arg2 == nil then
			return 
		end
		f57_local1 = {
			weaponSetup = f57_arg1,
			blueprintEditingStatus = f57_arg2,
			callbackFunc = f57_arg3
		}
		f57_local0 = "BreakBlueprintConfirmPopup"
	end
	LUI.FlowManager.RequestPopupMenu( nil, f57_local0, true, f57_arg0, false, f57_local1 )
end

GUNSMITH.CreateCamoCategoryHeaderData = function ( f56_arg0, f56_arg1, f56_arg2, f56_arg3 )
	local f56_local0 = {
		localizeHeader = false,
		headerWidth = 0,
		displayCategorySize = true,
		localId = f56_arg0,
		categorySize = f56_arg1,
		countUnlocked = f56_arg2
	}
	local f56_local1
	if f56_arg3 then
		f56_local1 = 0xC932C5990538292
		if not f56_local1 then
		
		else
			f56_local0.categoryNameKey = f56_local1
			return f56_local0
		end
	end
	f56_local1 = 0x907417433A3FB47
end

GUNSMITH.CreateCamoCategoryData = function ( f55_arg0, f55_arg1, f55_arg2, f55_arg3, f55_arg4 )
	local f55_local0
	if 0 < #f55_arg1 then
		f55_local0 = f55_arg1[1][0xAB612888528489A]
		if not f55_local0 then
		
		else
			return {
				name = f55_arg3,
				image = f55_local0,
				unlockCount = f55_arg2,
				camos = f55_arg1,
				isWeaponMastery = f55_arg4
			}
		end
	end
	f55_local0 = nil
end

GUNSMITH.GetCamoCount = function ( f54_arg0, f54_arg1 )
	local f54_local0 = 0
	for f54_local4, f54_local5 in ipairs( f54_arg0 ) do
		f54_local0 = f54_local0 + #f54_arg1[f54_local5[0x9E9C01960F4C582]]
	end
	return f54_local0
end

GUNSMITH.GetMasteryCamoUnlockedCount = function ( f53_arg0, f53_arg1 )
	local f53_local0 = 0
	for f53_local4, f53_local5 in ipairs( f53_arg0 ) do
		if LOOT.IsUnlockedWithID( f53_arg1, tonumber( f53_local5[0x28887F70BF5EBA] ) ) then
			f53_local0 = f53_local0 + 1
		end
	end
	return f53_local0
end

GUNSMITH.GetAllCamoCategoriesData = function ( f52_arg0, f52_arg1, f52_arg2, f52_arg3 )
	local f52_local0 = {}
	local f52_local1 = GUNSMITH.GetCamoCount( f52_arg0, f52_arg1 )
	local f52_local2 = GUNSMITH.GetCamoCount( f52_arg2, f52_arg3 )
	for f52_local8, f52_local9 in ipairs( f52_arg0 ) do
		local f52_local10 = f52_local9[0x9E9C01960F4C582]
		local f52_local11 = f52_arg1[f52_local10]
		local f52_local12 = f52_arg3[f52_local10]
		local f52_local6
		if f52_local12 then
			f52_local6 = #f52_local12
			if not f52_local6 then
			
			else
				local f52_local7 = GUNSMITH.CreateCamoCategoryData( f52_local8, f52_local11, f52_local6, f52_local9[0x4BCADBA8E631B86], false )
				f52_local7.categoryHeader = GUNSMITH.CreateCamoCategoryHeaderData( f52_local8, f52_local1, f52_local2, false )
				table.insert( f52_local0, f52_local7 )
			end
		end
		f52_local6 = 0
	end
	return f52_local0
end

GUNSMITH.IsEventsCamoValid = function ( f51_arg0, f51_arg1 )
	local f51_local0 = SEASON.GetCurrentSeason()
	local f51_local1 = f51_arg1[0xA86D464182EDEB5] == "jup_camo_category_events"
	local f51_local2 = WEAPON.ShouldForceEventCamoToShow( f51_arg0, f51_arg1 )
	local f51_local3
	if not f51_local2 then
		f51_local3 = f51_local2
	else
		f51_local3 = LOOT.IsUnlockedWithID( f51_arg0, f51_arg1[0x28887F70BF5EBA] )
		if not f51_local3 then
			if f51_arg1[0x8DFD5E2759BA3F8] then
				if f51_arg1[0x8DFD5E2759BA3F8] == f51_local0 then
					f51_local3 = f51_local1
				else
					f51_local3 = false
				end
			else
				f51_local3 = true
			end
		end
	end
	return f51_local3
end

GUNSMITH.IsEventsCamoOfWeaponClass = function ( f50_arg0, f50_arg1, f50_arg2 )
	if String.BeginsWith( f50_arg1, f50_arg2[0x94259E0A6DAC8AB] ) or f50_arg2[0x94259E0A6DAC8AB] == "NONE" then
		return GUNSMITH.IsEventsCamoValid( f50_arg0, f50_arg2 )
	else
		
	end
end

GUNSMITH.GetWeaponClassCamos = function ( f49_arg0, f49_arg1, f49_arg2 )
	local f49_local0 = {}
	local f49_local1 = GUNSMITH.IsEventsCamoOfWeaponClass
	for f49_local5, f49_local6 in ipairs( f49_arg2 ) do
		if f49_local1( f49_arg0, f49_arg1, f49_local6 ) then
			table.insert( f49_local0, f49_local6 )
		end
	end
	return f49_local0
end

GUNSMITH.GetWeaponMasteryCamoCategoriesData = function ( f48_arg0, f48_arg1, f48_arg2, f48_arg3, f48_arg4 )
	local f48_local0 = GUNSMITH.GetMasteryCamoUnlockedCount( f48_arg2, f48_arg0 )
	local f48_local1 = GUNSMITH.GetMasteryCamoUnlockedCount( f48_arg3, f48_arg0 )
	local f48_local2 = f48_local0 + f48_local1
	local f48_local3 = 2
	local f48_local4 = #f48_arg2 + #f48_arg3
	local f48_local5, f48_local6, f48_local7 = nil
	for f48_local8 = 1, f48_local3, 1 do
		if f48_local8 == 1 then
			local f48_local11 = WEAPON.GetWeaponDataForRef( f48_arg4.weapon )
			f48_local6 = Engine[0xED84C33EC5F01EA]( 0x839C929D699AD2A, f48_local11[0x4BCADBA8E631B86] )
			f48_local5 = f48_arg2
			f48_local7 = f48_local0
		else
			f48_local6 = Engine[0xED84C33EC5F01EA]( 0xD0552B3B5B77423 )
			f48_local5 = f48_arg3
			f48_local7 = f48_local1
		end
		local f48_local12 = GUNSMITH.CreateCamoCategoryData( f48_local8, f48_local5, f48_local7, f48_local6, true )
		f48_local12.categoryHeader = GUNSMITH.CreateCamoCategoryHeaderData( f48_local8, f48_local4, f48_local2, true )
		f48_local12.localizeHeader = false
		table.insert( f48_arg1, f48_local8, f48_local12 )
	end
	return f48_arg1, f48_local3
end

GUNSMITH.IsCamoEquippedInCategory = function ( f47_arg0, f47_arg1 )
	for f47_local3, f47_local4 in ipairs( f47_arg1.camos ) do
		if f47_arg0 == f47_local4[0x9E9C01960F4C582] then
			return true
		end
	end
	return false
end

GUNSMITH.GetCamoCategoryDataFromId = function ( f46_arg0, f46_arg1 )
	local f46_local0 = 0
	for f46_local4, f46_local5 in pairs( f46_arg0 ) do
		if f46_arg1 <= f46_local0 + f46_local5 then
			return {
				categoryRef = f46_local4,
				localId = f46_arg1 - f46_local0
			}
		end
		f46_local0 = f46_local0 + f46_local5
	end
	return nil
end

GUNSMITH.SearchCamoData = function ( f45_arg0, f45_arg1 )
	for f45_local6, f45_local7 in pairs( f45_arg0 ) do
		for f45_local3, f45_local4 in ipairs( f45_local7 ) do
			if f45_local4[0x9E9C01960F4C582] == f45_arg1 then
				return f45_local4
			end
		end
	end
	return nil
end

GUNSMITH.SetupGunsmithTuningMenu = function ( f44_arg0, f44_arg1, f44_arg2 )
	WEAPON.SetWeaponSlot( f44_arg1, f44_arg2.weaponSlot )
end

GUNSMITH.GetCompletionistCamoTypeFromCamoRef = function ( f43_arg0 )
	local f43_local0 = String.Split( f43_arg0, "camo_comp_0" )
	local f43_local1 = f43_local0[#f43_local0]
	if f43_local1 then
		return tonumber( f43_local1 )
	else
		return GUNSMITH.COMPLETIONIST_CAMO_TYPE.INVALID
	end
end

GUNSMITH.GetIW9CompletionistCamoTypeFromCamoRef = function ( f42_arg0 )
	local f42_local0 = WEAPON.GetCamoDataForRef( f42_arg0 )
	return tonumber( f42_local0[0x9E9C01960F4C582]:sub( -1 ) )
end

GUNSMITH.SetupCamoButton = function ( f41_arg0, f41_arg1, f41_arg2, f41_arg3, f41_arg4 )
	if CONDITIONS.IsMobileOrMobileSim() then
		GUNSMITH.SetupCustomizationButton( f41_arg1, {
			image = f41_arg2
		}, f41_arg3, false, "ImageFull" )
	else
		f41_arg1:SetupButton( {
			imageSize = "ImageFull",
			removeText = true,
			buttonData = {
				image = f41_arg2
			}
		} )
		f41_arg1:SetEquipped( f41_arg3 )
	end
end

GUNSMITH.GetAltCamoChallenge = function ( f40_arg0, f40_arg1, f40_arg2, f40_arg3 )
	local f40_local0 = PROJECT[0x5A05E13AC947C99][0x62DD8D6DEED5589][f40_arg1[0xA86D464182EDEB5]]
	if not f40_local0 then
		return nil
	end
	local f40_local1 = nil
	local f40_local2 = CSV.gunsmithChallenges.GetFile()
	if f40_arg2 == GUNSMITH.COMPLETIONIST_CAMO_TYPE.GOLD then
		f40_local1 = StringTable[0x2DCF0973239E909]( f40_local2, CSV.gunsmithChallenges.cols.loot, f40_arg1[0x28887F70BF5EBA], CSV.gunsmithChallenges.cols.ref ) .. "_unlock"
	elseif f40_arg2 == GUNSMITH.COMPLETIONIST_CAMO_TYPE.PLAT then
		local f40_local3 = WEAPON.GetWeaponShortenedClassName( f40_arg3 )
		if not LUI.StringIsNilOrEmpty( f40_local3 ) then
			if f40_local0[0x9E9C01960F4C582] == WEAPON.OB_COMPLETIONIST_CAMO_REF then
				f40_local1 = "jup_camo_platinum_unlock_ob_iw9_" .. f40_local3
			else
				f40_local1 = "camo_platinum_" .. f40_local3 .. "_unlock"
			end
		end
	elseif f40_arg2 == GUNSMITH.COMPLETIONIST_CAMO_TYPE.ELEMENT then
		if f40_local0[0x9E9C01960F4C582] == WEAPON.OB_COMPLETIONIST_CAMO_REF then
			f40_local1 = "jup_camo_dama_unlock_ob_iw9"
		else
			f40_local1 = "camo_damascus_unlock"
		end
	end
	if not LUI.StringIsNilOrEmpty( f40_local1 ) then
		f40_local1 = Challenge.VerifyGunsmithCamoChallengeRef( f40_local1 )
		local f40_local3 = tonumber( StringTable[0x2DCF0973239E909]( f40_local2, CSV.gunsmithChallenges.cols.ref, f40_local1, CSV.gunsmithChallenges.cols.amount ) )
		local f40_local4 = StringTable[0x2DCF0973239E909]( f40_local2, CSV.gunsmithChallenges.cols.ref, f40_local1, CSV.gunsmithChallenges.cols.id )
		local f40_local5 = Challenge.GetChallengeProgress( f40_arg0, f40_local4 )
		if f40_local3 and f40_local5 then
			return {
				altChallengeDesc = StringTable[0x2DCF0973239E909]( f40_local2, CSV.gunsmithChallenges.cols.ref, f40_local1, CSV.gunsmithChallenges.cols.desc ),
				altChallengeAmount = f40_local3,
				altChallengeID = f40_local4,
				altCurrentProgress = f40_local5
			}
		end
	end
	return nil
end

GUNSMITH.GetCamoChallenges = function ( f39_arg0, f39_arg1, f39_arg2 )
	if not f39_arg2 then
		f39_arg2 = {}
	end
	local f39_local0 = f39_arg2.camoData
	if not f39_local0 then
		f39_local0 = WEAPON.GetCamoDataForRef( f39_arg1 )
	end
	local f39_local1 = f39_local0[0x28887F70BF5EBA]
	local f39_local2 = f39_local0[0x60F47DF1CFBB466] or f39_arg2.weaponRef
	local f39_local3 = CSV.gunsmithChallenges.GetFile()
	local f39_local4 = StringTable[0x2DCF0973239E909]( f39_local3, CSV.gunsmithChallenges.cols.loot, f39_local1, CSV.gunsmithChallenges.cols.id )
	local f39_local5 = StringTable[0x2DCF0973239E909]( f39_local3, CSV.gunsmithChallenges.cols.loot, f39_local1, CSV.gunsmithChallenges.cols.desc )
	local f39_local6 = tonumber( StringTable[0x2DCF0973239E909]( f39_local3, CSV.gunsmithChallenges.cols.loot, f39_local1, CSV.gunsmithChallenges.cols.amount ) )
	local f39_local7 = StringTable[0x2DCF0973239E909]( f39_local3, CSV.gunsmithChallenges.cols.loot, f39_local1, CSV.gunsmithChallenges.cols.ref )
	local f39_local8 = Challenge.GetChallengeProgress( f39_arg0, f39_local4 )
	if String.IsNilOrEmpty( f39_local4 ) and not String.IsNilOrEmpty( f39_local0[0x219AF8A809E34C7] ) and f39_local0[0xFEDB0236464433C] ~= nil then
		local f39_local9 = Challenge.GetAmount( f39_local0[0xFEDB0236464433C], Challenge.GetAEKindID( f39_local0[0x219AF8A809E34C7] ), f39_arg0 )
		f39_local4 = tostring( f39_local0[0xFEDB0236464433C] )
		f39_local5 = Challenge.GetDesc( f39_local0[0xFEDB0236464433C], Challenge.GetAEKindID( f39_local0[0x219AF8A809E34C7] ) )
		f39_local6 = tonumber( f39_local9 )
		f39_local7 = Challenge.GetRef( f39_local0[0xFEDB0236464433C], Challenge.GetAEKindID( f39_local0[0x219AF8A809E34C7] ) )
		f39_local8 = Challenge.GetChallengeProgress( f39_arg0, f39_local0[0xFEDB0236464433C] )
	end
	WEAPON.SetupWeaponCamoCategories()
	local f39_local9 = PROJECT[0x5A05E13AC947C99][0x62DD8D6DEED5589][f39_local0[0xA86D464182EDEB5]]
	local f39_local10 = f39_local9[0x9E9C01960F4C582] == WEAPON.CAMO_CATEGORY_EVENTS
	local f39_local11 = f39_local9[0x9E9C01960F4C582] == WEAPON.CAMO_CATEGORY_SPECIAL
	local f39_local12
	if f39_local9[0x9E9C01960F4C582] ~= WEAPON.COMPLETIONIST_CAMO_REF and f39_local9[0x9E9C01960F4C582] ~= WEAPON.COMPLETIONIST_CAMO_REF .. WEAPON.OUTBREAK_SUFFIX then
		f39_local12 = false
	else
		f39_local12 = true
	end
	local f39_local13 = GUNSMITH.GetCompletionistCamoTypeFromCamoRef( f39_local0[0x9E9C01960F4C582] )
	local f39_local14 = {
		challengeID = f39_local4
	}
	local f39_local15
	if not f39_local5 then
		f39_local15 = f39_local5
	else
		f39_local15 = ""
	end
	f39_local14.challengeDesc = f39_local15
	if not f39_local6 then
		f39_local15 = f39_local6
	else
		f39_local15 = 0
	end
	f39_local14.challengeAmount = f39_local15
	if not f39_local8 then
		f39_local15 = f39_local8
	else
		f39_local15 = 0
	end
	f39_local14.currentProgress = f39_local15
	f39_local14.isCompletionist = f39_local12
	f39_local14.isEvent = f39_local10
	f39_local14.challengeWeaponRef = f39_local2
	if not LUI.StringIsNilOrEmpty( f39_local7 ) and not f39_local11 and not f39_local12 and not f39_local10 then
		f39_local15 = f39_local7:find( "_camo" )
		if not f39_local15 then
			f39_local15 = f39_local7:find( "_mastery" )
		end
		if f39_local15 ~= nil then
			f39_local14.challengeWeaponRef = f39_local7:sub( 1, f39_local15 - 1 )
		else
			LUI.FlowManager.RequestDevErrorPopup( "ERROR", "Camo Challenge '" .. f39_local7 .. "' does not contain '_camo' or '_mastery' word in its name. Can't figure out which weapon it is linked to" )
			local f39_local16 = String.Split( f39_local7, "_" )
			f39_local14.challengeWeaponRef = f39_local16[1] .. "_" .. f39_local16[2] .. "_" .. f39_local16[3]
		end
	end
	if f39_local4 then
		f39_local14.isUnlocked = LOOT.IsUnlockedWithID( f39_arg0, tonumber( f39_local1 ) )
		if f39_local13 ~= GUNSMITH.COMPLETIONIST_CAMO_TYPE.PLAT and f39_local13 ~= GUNSMITH.COMPLETIONIST_CAMO_TYPE.ELEMENT then
			f39_local15 = false
		else
			f39_local15 = true
		end
		f39_local14.checkAltChallengeCompletion = f39_local15
		if f39_local12 then
			f39_local15 = GUNSMITH.GetAltCamoChallenge( f39_arg0, f39_local0, f39_local13, f39_local2 )
			if f39_local15 then
				f39_local14.altChallengeDesc = f39_local15.altChallengeDesc
				f39_local14.altChallengeAmount = f39_local15.altChallengeAmount
				f39_local14.altChallengeID = f39_local15.altChallengeID
				f39_local14.altCurrentProgress = f39_local15.altCurrentProgress
			end
			f39_local14.prevChallenges = PROGRESSION.GetPrevCamoRequiredChallenges( f39_arg0, f39_local2, f39_arg1 )
		end
	end
	return f39_local14
end

GUNSMITH.GetCamoUnlockCondition = function ( f38_arg0, f38_arg1, f38_arg2, f38_arg3 )
	local f38_local0 = f38_arg2.unlockDescData
	local f38_local1 = f38_arg2.unlockProgress
	local f38_local2 = f38_arg2.currentProgress
	local f38_local3 = f38_arg2.totalProgress
	local f38_local4 = f38_arg2.checkChallengeCompletion
	local f38_local5
	if not f38_arg1 then
		f38_local5 = f38_arg1
	else
		f38_local5 = f38_local3 <= f38_local2
	end
	if f38_local4 and f38_arg3 and not f38_local5 then
		f38_local5 = Challenge.IsChallengeComplete( f38_arg0, f38_arg3 )
	end
	return {
		isCompleted = f38_local5,
		unlockCriteria = Engine[0xED84C33EC5F01EA]( f38_local0.desc, f38_local0.param1, f38_local0.param2 ),
		unlockProgressionText = Engine[0xED84C33EC5F01EA]( 0xF3A654DF487E617, f38_local1.param1, f38_local1.param2 ),
		lootID = f38_arg3
	}
end

GUNSMITH.GetCamoChallengeUnlockWeaponLevel = function ( f37_arg0 )
	local f37_local0 = Challenge.GetGunsmithChallengeByID( f37_arg0 )
	if not String.IsNilOrEmpty( f37_local0.activatorRef ) then
		local f37_local1 = Challenge.GetGunsmithChallengeByRef( f37_local0.activatorRef )
		if f37_local1 then
			local f37_local2 = String.Split( f37_local0.ref, "_" )
			local f37_local3 = tonumber( f37_local2[#f37_local2] )
			if type( f37_local3 ) == "number" then
				local f37_local4 = String.Split( f37_local1.amount, "|" )
				if f37_local3 <= #f37_local4 then
					return tonumber( f37_local4[f37_local3] )
				end
			end
		end
	end
	return nil
end

GUNSMITH.SetupCamoUnlockConditions = function ( f36_arg0, f36_arg1 )
	local f36_local0 = f36_arg1.isUnlocked
	local f36_local1 = f36_arg1.isCompletionist
	local f36_local2 = f36_arg1.challengeWeaponRef
	local f36_local3 = Engine[0x7D3158A9539A355]( "^%" .. WEAPON.GetName( f36_local2 ) .. "^7" )
	local f36_local4 = {}
	if not f36_local1 and not f36_arg1.isEvent then
		local f36_local5 = PROGRESSION.GetChallengeUnlockWeaponLevel( f36_local2, tonumber( f36_arg1.challengeID ) )
		table.insert( f36_local4, GUNSMITH.GetCamoUnlockCondition( f36_arg0, f36_local0, {
			unlockDescData = {
				desc = 0x69616E058817D85,
				param1 = f36_local3,
				param2 = f36_local5 + 1
			},
			unlockProgress = {
				param1 = Engine[0x7D3158A9539A355]( "^%" .. PROGRESSION.GetWeaponDisplayLevel( f36_arg0, f36_local2 ) .. "^7" ),
				param2 = f36_local5 + 1
			},
			currentProgress = PROGRESSION.GetWeaponLevel( f36_arg0, f36_local2 ),
			totalProgress = f36_local5
		} ) )
	elseif f36_arg1.altChallengeAmount and f36_arg1.altCurrentProgress then
		table.insert( f36_local4, GUNSMITH.GetCamoUnlockCondition( f36_arg0, f36_local0, {
			unlockDescData = {
				desc = f36_arg1.altChallengeDesc,
				param1 = f36_arg1.altChallengeAmount,
				param2 = f36_local3
			},
			unlockProgress = {
				param1 = f36_arg1.altCurrentProgress,
				param2 = f36_arg1.altChallengeAmount
			},
			currentProgress = f36_arg1.altCurrentProgress,
			totalProgress = f36_arg1.altChallengeAmount,
			checkChallengeCompletion = f36_arg1.checkAltChallengeCompletion
		}, f36_arg1.altChallengeID ) )
	end
	if f36_arg1.challengeDesc and f36_arg1.challengeAmount and f36_arg1.currentProgress then
		table.insert( f36_local4, GUNSMITH.GetCamoUnlockCondition( f36_arg0, f36_local0, {
			unlockDescData = {
				desc = f36_arg1.challengeDesc,
				param1 = f36_arg1.challengeAmount,
				param2 = f36_local3
			},
			unlockProgress = {
				param1 = f36_arg1.currentProgress,
				param2 = f36_arg1.challengeAmount
			},
			currentProgress = f36_arg1.currentProgress,
			totalProgress = f36_arg1.challengeAmount
		}, f36_arg1.challengeID ) )
	end
	return f36_local4
end

GUNSMITH.GetCamoDetails = function ( f35_arg0, f35_arg1, f35_arg2 )
	local f35_local0 = WEAPON.GetCamoDataForRef( f35_arg1 )
	local f35_local1 = Engine[0xED84C33EC5F01EA]( 0x8DF8CB381C4A26D )
	if not f35_arg2.isUnlocked then
		local f35_local2 = GUNSMITH.SetupCamoUnlockConditions( f35_arg0, f35_arg2 )
	else
		local f35_local2 = false
	end
	if CONDITIONS.IsMobileOrMobileSim() then
		local f35_local3 = hashset( {
			nil,
			0xDB0F3CD04819AA3,
			0xDB0F2CD048198F0
		} )
		if f35_local3[f35_local0[0x4BCADBA8E631B86]] then
			local f35_local2 = {
				{
					unlockCriteria = f35_local1
				}
			}
		end
		return {
			name = f35_local0[0x4BCADBA8E631B86],
			isUnlocked = f35_arg2.isUnlocked,
			unlockConditions = f35_local2
		}
	else
		return {
			name = f35_local0[0x4BCADBA8E631B86],
			desc = f35_arg2.challengeDesc,
			totalProgress = f35_arg2.challengeAmount,
			currentProgress = f35_arg2.currentProgress,
			isUnlocked = f35_arg2.isUnlocked,
			id = f35_arg2.challengeID,
			altDesc = f35_arg2.altChallengeDesc,
			altTotalProgress = f35_arg2.altChallengeAmount,
			altCurrentProgress = f35_arg2.altCurrentProgress,
			altID = f35_arg2.altChallengeID,
			isCompletionist = f35_arg2.isCompletionist,
			checkAltChallengeCompletion = f35_arg2.checkAltChallengeCompletion,
			camoRef = f35_arg1,
			isEvent = f35_arg2.isEvent
		}
	end
end

GUNSMITH.IsCamoChallengeDisabled = function ( f34_arg0, f34_arg1, f34_arg2, f34_arg3, f34_arg4 )
	local f34_local0 = false
	local f34_local1 = StringTable[0x2DCF0973239E909]( CSV.gunsmithChallenges.GetFile(), CSV.gunsmithChallenges.cols.loot, f34_arg1, CSV.gunsmithChallenges.cols.id )
	local f34_local2 = StringTable[0x2DCF0973239E909]( CSV.gunsmithChallenges.GetFile(), CSV.gunsmithChallenges.cols.loot, f34_arg1, CSV.gunsmithChallenges.cols.ref )
	if f34_local1 then
		f34_local0 = not LOOT.IsUnlockedWithID( f34_arg0, tonumber( f34_arg1 ) )
		if f34_arg2 and f34_arg3 == GUNSMITH.COMPLETIONIST_CAMO_TYPE.ORION then
			local f34_local3 = PROGRESSION.ArePrerequisiteCamosUnlocked
			local f34_local4 = f34_arg0
			local f34_local5 = f34_arg4
			local f34_local6
			if f34_local2 then
				f34_local6 = f34_local2
			else
				f34_local6 = string.find( f34_local2, "_ob" ) ~= nil
			end
			if not f34_local3( f34_local4, f34_local5, f34_local6 ) then
				f34_local0 = true
			end
		end
	end
	return f34_local0
end

GUNSMITH.GetCamoChallengeProgression = function ( f33_arg0, f33_arg1 )
	if not f33_arg1.isUnlocked then
		local f33_local0 = f33_arg1.currentProgress
		local f33_local1 = f33_arg1.challengeAmount
		if f33_arg1.prevChallenges then
			for f33_local5, f33_local6 in pairs( f33_arg1.prevChallenges ) do
				local f33_local7 = Challenge.GetChallengeProgress( f33_arg0, f33_local6.id )
				local f33_local8 = tonumber( f33_local6.amount )
				if f33_local7 and f33_local8 and f33_local8 ~= f33_local7 then
					f33_local0 = f33_local0 + f33_local7
					f33_local1 = f33_local1 + f33_local8
				end
			end
		end
		if f33_local1 and 0 < f33_local1 then
			return 1 - LUI.clamp( f33_local0 / f33_local1, 0, 1 )
		end
	end
	return nil
end

GUNSMITH.GetCamoCustomizeButtonData = function ( f32_arg0 )
	local f32_local0 = WEAPON.GetEquippedCamo( f32_arg0 )
	local f32_local1 = f32_local0 ~= WEAPON.CamoNoneValue
	local f32_local2 = {
		name = Engine[0xED84C33EC5F01EA]( 0xD9A75EC0BF4DF4D )
	}
	local f32_local3
	if f32_local1 then
		f32_local3 = WEAPON.GetCamoImage( f32_local0 )
		if not f32_local3 then
		
		else
			f32_local2.image = f32_local3
			f32_local2.menuRef = GUNSMITH.GetCamoCategorySelectMenuRef()
			f32_local2.isEquipped = f32_local1
			return f32_local2
		end
	end
	f32_local3 = nil
end

GUNSMITH.GetCharmsCustomizeButtonData = function ( f31_arg0, f31_arg1 )
	local f31_local0 = {}
	local f31_local1 = false
	local f31_local2 = WEAPON.GetWeaponClass( f31_arg1 )
	local f31_local3 = WEAPON.SupportsCosmetics( f31_arg1 )
	local f31_local4
	if f31_local3 then
		f31_local4 = f31_local3
	else
		f31_local4 = CONDITIONS.IsGunscreensEnabled()
		if f31_local4 then
			f31_local4 = f31_local2 ~= WEAPON.pistolClass
		end
	end
	local f31_local5 = false
	local f31_local6 = false
	local f31_local7 = WEAPON.GetEquippedCharm( f31_arg0 )
	local f31_local8 = WEAPON.CharmNoneValue
	if f31_local7 ~= WEAPON.CharmNoneValue then
		if f31_local4 then
			f31_local1 = true
		end
		if WEAPON.GetGunscreenDataForRef( f31_local7 ) ~= WEAPON.CharmNoneValue then
			f31_local8 = f31_local7
			f31_local6 = true
		else
			f31_local5 = true
		end
	end
	if f31_local4 then
		local f31_local9 = {
			name = Engine[0xED84C33EC5F01EA]( 0x8017CED56890BFE )
		}
		local f31_local10
		if f31_local6 then
			f31_local10 = WEAPON.GetGunscreenImage( f31_local8 )
			if not f31_local10 then
			
			else
				f31_local9.image = f31_local10
				f31_local9.menuRef = GUNSMITH.GetCharmSelectMenuRef()
				f31_local9.isEquipped = f31_local6
				f31_local9.isBlocked = f31_local5
				f31_local9.options = {
					isGunscreen = true
				}
				table.insert( f31_local0, f31_local9 )
			end
		end
		f31_local10 = nil
	end
	if f31_local3 then
		local f31_local9 = {
			name = Engine[0xED84C33EC5F01EA]( 0xE0537CFFFC0CBE4 )
		}
		local f31_local10
		if f31_local5 then
			f31_local10 = WEAPON.GetCharmImage( f31_local7 )
			if not f31_local10 then
			
			else
				f31_local9.image = f31_local10
				f31_local9.menuRef = GUNSMITH.GetCharmSelectMenuRef()
				f31_local9.isEquipped = f31_local5
				f31_local9.isBlocked = f31_local6
				table.insert( f31_local0, f31_local9 )
			end
		end
		f31_local10 = nil
	end
	return f31_local0, f31_local1
end

GUNSMITH.GetVinylCustomizeStickerButtonData = function ( f30_arg0, f30_arg1 )
	local f30_local0 = nil
	local f30_local1 = LOADOUT.VINYL_1_SLOT
	local f30_local2 = false
	for f30_local3 = LOADOUT.VINYL_1_SLOT, LOADOUT.VINYL_2_SLOT, 1 do
		local f30_local6 = f30_arg0[f30_local3]
		f30_local2 = f30_local6 ~= WEAPON.StickerNoneValue
		if f30_local2 then
			local f30_local7 = WEAPON.GetStickerDataForRef( f30_local6 )
			f30_local0 = f30_local7[0xAB612888528489A]
			f30_local1 = f30_local3
			break
		end
	end
	if f30_local2 or 1 >= f30_arg1 then
		f30_local3 = false
	else
		local f30_local3 = true
	end
	return {
		name = Engine[0xED84C33EC5F01EA]( 0x1F2F71F2D31EC23 ),
		image = f30_local0,
		menuRef = GUNSMITH.GetStickerSelectMenuRef(),
		isEquipped = f30_local2,
		isBlocked = f30_local3,
		options = {
			slotIndex = f30_local1
		}
	}
end

GUNSMITH.GetStickersCustomizeButtonData = function ( f29_arg0, f29_arg1 )
	local f29_local0 = {}
	local f29_local1 = false
	local f29_local2 = WEAPON.GetEquippedStickers( f29_arg0 )
	local f29_local3 = WEAPON.GetMaxStickerSlotsForWeapon
	local f29_local4 = f29_arg1
	local f29_local5 = f29_arg0.lootItemID
	if f29_local5 then
		f29_local5 = f29_arg0.lootItemID:get()
	end
	f29_local3 = f29_local3( f29_local4, f29_local5 )
	local f29_local6 = 0
	for f29_local4 = LOADOUT.STICKER_1_SLOT, f29_local3, 1 do
		local f29_local8 = f29_local2[f29_local4]
		local f29_local9 = f29_local8 ~= WEAPON.StickerNoneValue
		local f29_local10
		if f29_local9 then
			f29_local10 = 1
		else
			f29_local10 = 0
		end
		f29_local6 = f29_local6 + f29_local10
		local f29_local11 = {
			name = Engine[0xED84C33EC5F01EA]( 0xA4EAA7D17AED157, f29_local4 - 2 )
		}
		local f29_local12
		if f29_local9 then
			f29_local12 = WEAPON.GetStickerImage( f29_local8 )
			if not f29_local12 then
			
			else
				f29_local11.image = f29_local12
				f29_local11.menuRef = GUNSMITH.GetStickerSelectMenuRef()
				f29_local11.isEquipped = f29_local9
				f29_local11.options = {
					slotIndex = f29_local4
				}
				table.insert( f29_local0, f29_local11 )
			end
		end
		f29_local12 = nil
	end
	if 0 < f29_local3 then
		f29_local4 = GUNSMITH.GetVinylCustomizeStickerButtonData( f29_local2, f29_local6 )
		f29_local1 = f29_local4.isBlocked
		for f29_local8, f29_local9 in ipairs( f29_local0 ) do
			local f29_local11
			if not f29_local9.isEquipped then
				f29_local11 = f29_local4.isEquipped
				if f29_local11 then
					if 0 >= f29_local6 then
						f29_local11 = false
					else
						f29_local11 = true
					end
				end
			else
				f29_local11 = false
			end
			f29_local9.isBlocked = f29_local11
			if f29_local9.isBlocked and not f29_local1 then
				f29_local1 = true
			end
		end
		table.insert( f29_local0, 1, f29_local4 )
	end
	return f29_local0, f29_local1
end

GUNSMITH.BuildStickerTable = function ( f28_arg0 )
	local f28_local0 = {}
	local f28_local1 = 0
	local f28_local2 = 0
	local f28_local3 = Game[0x83E0D59EFF44E21]()
	if not f28_local3[0x684D9EB944CD339] then
		return f28_local0
	end
	local f28_local4 = WEAPON.GetStickers( f28_arg0._controllerIndex )
	local f28_local5 = #f28_local4
	for f28_local6 = 1, f28_local5, 1 do
		local f28_local9 = f28_local4[f28_local6]
		if not f28_local9.hideInUI then
			table.insert( f28_local0, f28_local9 )
			if f28_local9.ref ~= WEAPON.StickerNoneValue then
				if f28_local9.isUnlocked then
					f28_local1 = f28_local1 + 1
					f28_local2 = f28_local2 + 1
				end
				if not f28_local9.isPremium then
					f28_local2 = f28_local2 + 1
				end
			end
		end
	end
	return f28_local0
end

GUNSMITH.BuildCharmTable = function ( f27_arg0 )
	local f27_local0 = {}
	table.insert( f27_local0, {
		name = 0x582A97E6B28D01C,
		isUnlocked = true,
		ref = WEAPON.CharmNoneValue
	} )
	local f27_local1 = 0
	local f27_local2 = 0
	local f27_local3 = f27_arg0._isGunscreen and WEAPON.GetGunscreens( f27_arg0._controllerIndex ) or WEAPON.GetCharms( f27_arg0._controllerIndex )
	if not f27_local3 then
		return f27_local0
	end
	local f27_local4 = #f27_local3
	for f27_local5 = 1, f27_local4, 1 do
		local f27_local8 = f27_local3[f27_local5]
		if f27_local8 and not f27_local8.hideInUI then
			table.insert( f27_local0, f27_local8 )
			if f27_local8.ref ~= WEAPON.CharmNoneValue then
				if f27_local8.isUnlocked then
					f27_local1 = f27_local1 + 1
					f27_local2 = f27_local2 + 1
				end
				if not f27_local8.isPremium then
					f27_local2 = f27_local2 + 1
				end
			end
		end
	end
	return f27_local0
end

GUNSMITH.GetCustomizeData = function ( f26_arg0 )
	local f26_local0 = {}
	local f26_local1 = {}
	local f26_local2 = f26_arg0.weapon:get()
	table.insert( f26_local0, GUNSMITH.GetCamoCustomizeButtonData( f26_arg0 ) )
	local f26_local3, f26_local4 = GUNSMITH.GetCharmsCustomizeButtonData( f26_arg0, f26_local2 )
	for f26_local8, f26_local9 in ipairs( f26_local3 ) do
		table.insert( f26_local0, f26_local9 )
	end
	if f26_local4 then
		table.insert( f26_local1, {
			text = Engine[0xED84C33EC5F01EA]( 0xEC3ED1DF8109CB8 )
		} )
	end
	f26_local5, f26_local6 = GUNSMITH.GetStickersCustomizeButtonData( f26_arg0, f26_local2 )
	for f26_local10, f26_local11 in ipairs( f26_local5 ) do
		table.insert( f26_local0, f26_local11 )
	end
	if f26_local6 then
		table.insert( f26_local1, {
			text = Engine[0xED84C33EC5F01EA]( 0x21EDA66313F8CFC )
		} )
	end
	return f26_local0, f26_local1
end

GUNSMITH.OpenWeaponPreviewMenu = function ( f25_arg0, f25_arg1, f25_arg2 )
	if not f25_arg2 then
		f25_arg2 = {}
	end
	f25_arg2.weaponTable = WEAPON.GenerateWeaponTable( f25_arg0 )
	f25_arg2.weaponPlayerData = f25_arg0
	if 0 < tonumber( f25_arg2.weaponTable.variantID ) then
		f25_arg2.weaponTable.lootName = WEAPON.GetLootWeaponName( f25_arg2.weaponTable.weapon, f25_arg2.weaponTable.lootID )
	end
	LUI.FlowManager.RequestAddMenu( GUNSMITH.GetWeaponPreviewMenuRef(), true, f25_arg1, false, f25_arg2, true )
	if f25_arg2.shouldPlaySound then
		Engine[0xC4146BA76D0F982]( CoD.SFX.MouseClick )
	end
end

GUNSMITH.ConvertProtuningPlayerData = function ( f24_arg0, f24_arg1 )
	local f24_local0, f24_local1 = LOADOUT.GetValidLoadouts( f24_arg0, f24_arg1 )
	for f24_local2 = 0, f24_local1 - 1, 1 do
		local f24_local5 = f24_local0[f24_local2].loadout
		for f24_local6 = 0, 1, 1 do
			local f24_local9 = f24_local5.weaponSetups[f24_local6]
			if f24_local9.blueprintTuned:get() ~= 0 then
				for f24_local10 = 0, #f24_local9.attachmentSetup - 1, 1 do
					f24_local9.attachmentSetup[f24_local10].hasBPTune:set( GUNSMITH.CAN_PRO_TUNE )
				end
			end
		end
	end
end

GUNSMITH.GetShowProsAndConsEnabled = function ( f23_arg0 )
	local f23_local0 = PLAYER_DATA.IO( f23_arg0, CoD.StatsGroup.NonGame )
	return f23_local0.isShowProsAndConsEnabled:get() == 1
end

GUNSMITH.SetShowProsAndConsEnabled = function ( f22_arg0, f22_arg1 )
	local f22_local0 = PLAYER_DATA.IO( f22_arg0, CoD.StatsGroup.NonGame )
	local f22_local1 = f22_local0.isShowProsAndConsEnabled
	local f22_local2 = f22_local1
	f22_local1 = f22_local1.set
	local f22_local3
	if f22_arg1 then
		f22_local3 = 1
	else
		f22_local3 = 0
	end
	f22_local1( f22_local2, f22_local3 )
	ACTIONS.UploadStats( nil, f22_arg0 )
end

GUNSMITH.UpdateNotFoundAttachments = function ( f20_arg0, f20_arg1 )
	local f20_local0 = GL_HACK.GetWeaponMPRef( f20_arg0 )
	local f20_local1 = false
	local f20_local2 = {}
	for f20_local6, f20_local7 in ipairs( f20_arg1 ) do
		if f20_local7.lootID and f20_local7.attachmentNotFound then
			f20_local2[f20_local6] = f20_local7
		end
	end
	if next( f20_local2 ) ~= nil then
		Engine[0x7ED2B33DE4D5BB8]( f20_local0, function ( f21_arg0 )
			local f21_local0 = f21_arg0.ref
			local f21_local1 = ATTACHMENT.GetIDByRef( f21_local0 )
			for f21_local5, f21_local6 in pairs( f20_arg0 ) do
				if f21_local6.lootID == f21_local1 then
					f21_local6.category = ATTACHMENT.GetCategory( f21_local0 )
					f21_local6.ref = f21_local0
					f21_local6.attachmentNotFound = nil
					f21_local6.lootID = nil
					f20_arg0[f21_local5] = nil
					break
				end
			end
			if next( f20_arg0 ) == nil then
				return false
			else
				
			end
		end )
	end
	return f20_arg1
end

GUNSMITH.SetupSaveWeaponPopup = function ( f15_arg0, f15_arg1, f15_arg2 )
	if not GUNSMITH.AllowSaveCustomWeapon( f15_arg2.forShowcase ) then
		
	else
		
	end
	f15_arg0._SaveWeaponPopup = f15_arg0:AddGamepadEventCallback( "button_left_trigger", function ( f18_arg0, f18_arg1 )
		local f18_local0 = f18_arg1.controller or f15_arg0
		local f18_local1 = f18_arg0._weaponPlayerData
		local f18_local2 = f18_arg0._weaponTable
		local f18_local3 = f18_local2.weapon
		local f18_local4 = GUNSMITH.maxMods
		local f18_local5 = f18_local4 - GUNSMITH.CountAvailableCustomModSlots( f18_local0, f18_local3, f18_local2.lootID )
		local f18_local6 = GUNSMITH.GetCustomModSlot( f18_local2.blueprintName )
		if not f18_local6 then
			f18_local6 = GUNSMITH.GetFirstFreeCustomModSlot( f18_local0, f18_local3, f18_local2.lootID )
		end
		local f18_local7 = GUNSMITH.GetCustomModSlot( f18_local2.blueprintName )
		local f18_local8 = Engine[0x29DFACECF20DE0E]( f18_local0 )
		local f18_local9 = false
		local f18_local10 = ""
		if f18_local6 == f18_local7 then
			f18_local10 = GUNSMITH.GetCustomModName( f18_local2.blueprintName )
			f18_local9 = true
		end
		local f18_local11 = {
			allowEmpty = false,
			verifyString = true,
			title = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x1F3FF546EEDC481, WEAPON.GetName( f18_local3 ) ) ),
			maxInputStringLength = LOADOUT.MAX_LOADOUT_NAME_CHARACTERS,
			description = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xDBEB0C43ECC2224, f18_local5, f18_local4 ) ),
			confirmButtonText = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x688D1D57B7905C5 ) ),
			defaultValue = f18_local10
		}
		local f18_local12 = CONDITIONS.IsUserSignedInDemonware( f18_local0 )
		if not f18_local12 then
			f18_local12 = Engine[0xDABAA414ED6AABD]( f18_local0 ) ~= CoD.StatsSource.OFFLINE
		end
		f18_local11.filterProfanity = f18_local12
		f18_local12 = Engine[0xEE6F69FEA944B13]()
		f18_local12 = f18_local12.flowManager:GetStackTop()
		f18_local11.expectedMenu = f18_local12.name
		f18_local11.textEditCompleteFunc = function ( f19_arg0, f19_arg1 )
			local f19_local0 = f19_arg0._controllerIndex or f19_arg1.controllerIndex
			local f19_local1 = WEAPON.GenerateWeaponTable( f18_arg0 )
			if not f19_arg1.cancelled then
				local f19_local2, f19_local3 = TEXT_EDIT.ValidateString( f19_local0, f19_arg1.text )
				if not String.IsNilOrEmpty( f18_arg0 ) then
					if f19_arg1.text == f18_arg0 then
						f18_arg0 = f18_arg0
					elseif f19_arg1.text ~= f18_arg0 and 0 <= f18_arg0 then
						f18_arg0 = GUNSMITH.GetFirstFreeCustomModSlot( f18_arg0, f18_arg0, f19_local1.lootID )
					else
						f19_local2 = false
						f19_local3 = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x9908B333647D894, WEAPON.GetName( f18_arg0 ) ) .. "\n" .. ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xDBEB0C43ECC2224, f18_arg0, f18_arg0 ) ) )
					end
				end
				local f19_local4 = f18_arg0.camo:get()
				if f19_local4 ~= f19_local1.camo or not WEAPON.IsCamoUnlocked( f18_arg0, f19_local4, f18_arg0 ) then
					WEAPON.ClearWeaponCamo( f18_arg0, f19_local1 )
					local f19_local5 = WEAPON.GetWeaponModel( f18_arg0, FrontEndScene.ClientWeapons.Preview )
					local f19_local6 = WEAPON.GetWeaponModelName( f19_local1.weapon, f19_local1, {
						includeCamos = true,
						includeAttachments = true,
						includeStickers = true,
						controllerIndex = f18_arg0
					} )
					FrontEndScene.RequestWeaponViewModels( {
						f19_local6
					}, f18_arg0 )
					WEAPON.SetModelIfLoaded( f18_arg0, f19_local5, f19_local6 )
					LUI.FlowManager.RequestErrorPopup( f19_local0, ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x2FFE8782D09E354 ) ), ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xF83A5D39E4FDD0 ) ) )
					return 
				elseif f19_local2 then
					local f19_local5 = ToUpperCase( f19_arg1.text )
					if f18_arg0 == 0 and f18_arg0 ~= f19_local5 then
						LUI.FlowManager.RequestErrorPopup( f18_arg0, ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xDBEB0C43ECC2224, f18_arg0, f18_arg0 ) ), ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x9908B333647D894, WEAPON.GetName( f18_arg0 ) ) ) )
						return 
					elseif f18_arg0 ~= Engine[0x29DFACECF20DE0E]( f18_arg0 ) then
						return 
					end
					f19_local1.blueprintName = GUNSMITH.GenerateModName( f19_local5, f18_arg0 )
					if not GUNSMITH.SaveAsCustomMod( f18_arg0, f19_local1, f18_arg0, f18_arg0 ) then
						return 
					end
					WEAPON.EquipModification( f18_arg0, f19_local1, f18_arg0, true )
					f18_arg0 = f19_local5
					LUI.ToastManager.CreateToast( f18_arg0, LUI.ToastManager.StandardEmphasisToast( f18_arg0, ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x938838286796E2A, WEAPON.GetName( f18_arg0 ) ) ), LUI.ToastManager.ToastNotificationType.Player ) )
					if f19_arg0.GunsmithWeaponDetails then
						f19_arg0.GunsmithWeaponDetails.BaseWeaponName:setText( WEAPON.GetName( f18_arg0 ) )
						local f19_local7 = f19_arg0.GunsmithWeaponDetails.BaseWeaponName
						f19_arg0.GunsmithWeaponDetails.WeaponName:setText( f19_local5 )
						local f19_local8 = f19_arg0.GunsmithWeaponDetails.WeaponName
					else
						local f19_local7 = LUI.FlowManager.GetMenuByName( f19_arg0._scoped.menuName )
						local f19_local8 = LUI.FlowManager.GetMenuByName( f19_local7.previousMenuName )
						f19_local8 = f19_local8.menu
						if f19_local8.activeTabWidget.GunsmithWeaponDetails then
							f19_local8.activeTabWidget.GunsmithWeaponDetails.WeaponName:setText( f19_local5 )
						end
					end
				else
					LUI.FlowManager.RequestErrorPopup( f19_local0, Engine[0xED84C33EC5F01EA]( 0x1CCA5C59ECE1EA6 ), f19_local3 )
				end
			end
		end
		
		if f18_arg1.qualifier == "gamepad" or f18_arg1.qualifier == "keyboard" then
			Engine[0xC4146BA76D0F982]( SOUND_SETS.default.action )
		end
		ACTIONS.OpenGenericEditBoxPopup( f18_arg0, f18_local0, f18_local11 )
	end )
	f15_arg0:addEventHandler( "attachment_count_update", function ( f17_arg0, f17_arg1 )
		f17_arg0._weaponTable = f17_arg1.weaponTable
	end )
	f15_arg0:addEventHandler( "update_attachments", function ( f16_arg0, f16_arg1 )
		f16_arg0._weaponTable = f16_arg1.weaponTable
	end )
end

GUNSMITH.AddHelperBarSaveWeaponButton = function ( f14_arg0, f14_arg1, f14_arg2 )
	if f14_arg0.HelperBar and GUNSMITH.AllowSaveCustomWeapon( f14_arg2 ) then
		f14_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			side = "left",
			priority = 0,
			replaceTop = true,
			button_ref = "button_left_trigger",
			helper_text = Engine[0xED84C33EC5F01EA]( 0x9ABCD1A3258EFA ),
			helper_definition = Engine[0xED84C33EC5F01EA]( 0xC2F34DEDB518C9E )
		} )
	end
end

GUNSMITH.SetupGunsmithScene = function ( f1_arg0, f1_arg1, f1_arg2 )
	local f1_local0 = function ( f13_arg0, f13_arg1 )
		return ClientModel[0x9088CC2C1E6A1E9]( CLIENT_MODEL.GetClientModelIndex( f13_arg0 ), f13_arg1 )
	end
	
	local f1_local1 = function ( f12_arg0, f12_arg1, f12_arg2, f12_arg3 )
		local f12_local0 = CLIENT_MODEL.GetClientModelIndex( f12_arg1 )
		local f12_local1 = ClientModel[0x7FE4C5AFE1F4377]( f12_local0, CLIENT_MODEL.defaultTags.INVALID )
		local f12_local2 = Engine[0xC3B7925CCAC9430]( f12_arg0, f12_arg2, f12_arg3 )
		f12_local1.yAngle = f12_local2.yAngle
		f12_local1.xAngle = f12_local2.xAngle
		ClientModel[0xEFA1738E096A743]( f12_local0, f12_local1 )
	end
	
	local f1_local2 = function ( f7_arg0, f7_arg1, f7_arg2 )
		local f7_local0 = {
			base = CLIENT_MODEL.coreMPModels.GUN_VISE_MAGWELL_BASE,
			insert = CLIENT_MODEL.coreMPModels.GUN_VISE_MAGWELL_INSERT
		}
		local f7_local1 = ClientWeapon[0x5DD69014A9C290]( FrontEndScene.ClientWeapons.Preview )
		ClientWeapon[0x8B8A4E0355DF0C0]( FrontEndScene.ClientWeapons.Preview, 0, 0, 0 )
		local f7_local2
		if f7_arg2 then
			f7_local2 = f7_arg0.GunsmithWeaponDetails:Wait( 5 )
			if not f7_local2 then
			
			else
				f7_local2.onComplete = function ()
					GUNSMITH.UpdateAmmoModel( f7_arg0, f7_arg0 )
					local f8_local0 = Engine[0xF3C157C48E60860]( f7_arg0, f7_arg0, "offset_vise_attach" )
					local f8_local1 = Engine[0xF3C157C48E60860]( f7_arg0, f7_arg0, WEAPON.SilencedFlashTag )
					local f8_local2 = Engine[0xF3C157C48E60860]( f7_arg0, f7_arg0, WEAPON.MuzzleFlashTag )
					local f8_local3
					if f8_local1 then
						f8_local3 = WEAPON.SilencedFlashTag
						if not f8_local3 then
							if f8_local2 then
								f8_local3 = WEAPON.MuzzleFlashTag
								if not f8_local3 then
								
								else
									local f8_local4 = Engine[0xC3B7925CCAC9430]( f7_arg0, f7_arg0, GUNSMITH.defaultTag )
									local f8_local5 = Engine[0xC3B7925CCAC9430]( f7_arg0, f7_arg0, f8_local3 )
									local f8_local6 = Engine[0xC3B7925CCAC9430]( f7_arg0, f7_arg0, WEAPON.RearTag )
									local f8_local7 = f7_arg0( CLIENT_MODEL.coreMPModels.GUN_VISE_BASE, CLIENT_MODEL.coreMPModels.GUN_VISE_BASE.tagOrigin )
									local f8_local8 = (f8_local5.xPosition + f8_local6.xPosition) / 2
									local f8_local9 = (f8_local5.yPosition + f8_local6.yPosition) / 2
									local f8_local10 = f8_local4.xPosition - f8_local8
									local f8_local11 = f8_local4.yPosition - f8_local9
									local f8_local12 = f8_local4.xPosition - f8_local7.xPosition + f8_local10
									local f8_local13 = f8_local4.yPosition - f8_local7.yPosition + f8_local11
									local f8_local14 = Engine[0xC3B7925CCAC9430]( f7_arg0, f7_arg0, "tag_mag_attach" )
									local f8_local15 = f7_arg0( f7_arg0.insert, f7_arg0.insert.tagGunAttach )
									local f8_local16 = f8_local15.zPosition - f8_local14.zPosition + GUNSMITH.GetWeaponZOffset( f7_arg0, f7_arg0, f7_arg0._weaponTable.attachments, true )
									DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.xOffset:SetValue( f7_arg0, f8_local12 )
									DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.yOffset:SetValue( f7_arg0, f8_local13 )
									DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.zOffset:SetValue( f7_arg0, f8_local16 )
									ClientWeapon[0x8B8A4E0355DF0C0]( FrontEndScene.ClientWeapons.Preview, f8_local12, f8_local13, f8_local16 )
									CLIENT_MODEL.HideModels( f7_arg0 )
									f7_arg0( f7_arg0, f7_arg0.insert, f7_arg0, "offset_vise_attach" )
									local f8_local17 = f7_arg0 and f7_arg0.GunsmithWeaponDetails:Wait( 5 ) or f7_arg0:Wait( 5 )
									f8_local17.onComplete = function ()
										local f9_local0 = ATTACHMENT.GetAttachmentCategoryBone( "receiver" )
										local f9_local1 = Engine[0xC3B7925CCAC9430]( f8_local0, f8_local0, f9_local0 )
										local f9_local2 = "attach_zoom," .. "receiver" .. "," .. f9_local0 .. "," .. f9_local1.xPosition .. "," .. f9_local1.yPosition .. "," .. f9_local1.zPosition .. "," .. f9_local1.xAngle .. "," .. f9_local1.yAngle .. "," .. f9_local1.zAngle
										Engine[0x6055C55456F05DF]( f9_local2, 1 )
										if f8_local0 then
											local f9_local3 = f8_local0.GunsmithWeaponDetails:Wait( 5 )
											f9_local3.onComplete = function ()
												GUNSMITH.SetGunsmithWeaponOffset( f9_local0 )
												GUNSMITH.SetGunsmithCameraPosition( f9_local0 )
											end
											
										end
										DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.tagDataString:SetValue( f8_local0, f9_local2 )
										local f9_local3 = f8_local0( f8_local0.insert, f8_local0.insert.tagOrigin )
										local f9_local4 = f8_local0( f8_local0.insert, f8_local0.insert.tagGunAttach )
										local f9_local5 = Engine[0xC3B7925CCAC9430]( f8_local0, f8_local0, "offset_vise_attach" )
										f9_local3.xPosition = f9_local5.xPosition - f9_local4.xPosition - f9_local3.xPosition
										f9_local3.yPosition = f9_local5.yPosition - f9_local4.yPosition - f9_local3.yPosition
										ClientModel[0x9C89C00DF9B85ED]( CLIENT_MODEL.GetClientModelIndex( f8_local0.insert ), f9_local3 )
										local f9_local6 = f8_local0 and f8_local0.GunsmithWeaponDetails:Wait( 5 ) or f8_local0:Wait( 5 )
										f9_local6.onComplete = function ()
											local f10_local0 = f9_local0( f9_local0.base, f9_local0.base.tagOrigin )
											f9_local0 = f9_local0( f9_local0.insert, f9_local0.insert.tagOrigin )
											f10_local0.xPosition = f9_local0.xPosition
											f10_local0.yPosition = f9_local0.yPosition
											ClientModel[0x9C89C00DF9B85ED]( CLIENT_MODEL.GetClientModelIndex( f9_local0.base ), f10_local0 )
										end
										
									end
									
								end
							end
							f8_local3 = WEAPON.FlashTag
						end
					else
						if f8_local2 then
							f8_local3 = WEAPON.MuzzleFlashTag
							if not f8_local3 then
							
							else
								local f8_local4 = Engine[0xC3B7925CCAC9430]( f7_arg0, f7_arg0, GUNSMITH.defaultTag )
								local f8_local5 = Engine[0xC3B7925CCAC9430]( f7_arg0, f7_arg0, f8_local3 )
								local f8_local6 = Engine[0xC3B7925CCAC9430]( f7_arg0, f7_arg0, WEAPON.RearTag )
								local f8_local7 = f7_arg0( CLIENT_MODEL.coreMPModels.GUN_VISE_BASE, CLIENT_MODEL.coreMPModels.GUN_VISE_BASE.tagOrigin )
								local f8_local8 = (f8_local5.xPosition + f8_local6.xPosition) / 2
								local f8_local9 = (f8_local5.yPosition + f8_local6.yPosition) / 2
								local f8_local10 = f8_local4.xPosition - f8_local8
								local f8_local11 = f8_local4.yPosition - f8_local9
								local f8_local12 = f8_local4.xPosition - f8_local7.xPosition + f8_local10
								local f8_local13 = f8_local4.yPosition - f8_local7.yPosition + f8_local11
								local f8_local14 = Engine[0xC3B7925CCAC9430]( f7_arg0, f7_arg0, "tag_mag_attach" )
								local f8_local15 = f7_arg0( f7_arg0.insert, f7_arg0.insert.tagGunAttach )
								local f8_local16 = f8_local15.zPosition - f8_local14.zPosition + GUNSMITH.GetWeaponZOffset( f7_arg0, f7_arg0, f7_arg0._weaponTable.attachments, true )
								DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.xOffset:SetValue( f7_arg0, f8_local12 )
								DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.yOffset:SetValue( f7_arg0, f8_local13 )
								DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.zOffset:SetValue( f7_arg0, f8_local16 )
								ClientWeapon[0x8B8A4E0355DF0C0]( FrontEndScene.ClientWeapons.Preview, f8_local12, f8_local13, f8_local16 )
								CLIENT_MODEL.HideModels( f7_arg0 )
								f7_arg0( f7_arg0, f7_arg0.insert, f7_arg0, "offset_vise_attach" )
								local f8_local17 = f7_arg0 and f7_arg0.GunsmithWeaponDetails:Wait( 5 ) or f7_arg0:Wait( 5 )
								f8_local17.onComplete = function ()
									local f9_local0 = ATTACHMENT.GetAttachmentCategoryBone( "receiver" )
									local f9_local1 = Engine[0xC3B7925CCAC9430]( f8_local0, f8_local0, f9_local0 )
									local f9_local2 = "attach_zoom," .. "receiver" .. "," .. f9_local0 .. "," .. f9_local1.xPosition .. "," .. f9_local1.yPosition .. "," .. f9_local1.zPosition .. "," .. f9_local1.xAngle .. "," .. f9_local1.yAngle .. "," .. f9_local1.zAngle
									Engine[0x6055C55456F05DF]( f9_local2, 1 )
									if f8_local0 then
										local f9_local3 = f8_local0.GunsmithWeaponDetails:Wait( 5 )
										f9_local3.onComplete = function ()
											GUNSMITH.SetGunsmithWeaponOffset( f9_local0 )
											GUNSMITH.SetGunsmithCameraPosition( f9_local0 )
										end
										
									end
									DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.tagDataString:SetValue( f8_local0, f9_local2 )
									local f9_local3 = f8_local0( f8_local0.insert, f8_local0.insert.tagOrigin )
									local f9_local4 = f8_local0( f8_local0.insert, f8_local0.insert.tagGunAttach )
									local f9_local5 = Engine[0xC3B7925CCAC9430]( f8_local0, f8_local0, "offset_vise_attach" )
									f9_local3.xPosition = f9_local5.xPosition - f9_local4.xPosition - f9_local3.xPosition
									f9_local3.yPosition = f9_local5.yPosition - f9_local4.yPosition - f9_local3.yPosition
									ClientModel[0x9C89C00DF9B85ED]( CLIENT_MODEL.GetClientModelIndex( f8_local0.insert ), f9_local3 )
									local f9_local6 = f8_local0 and f8_local0.GunsmithWeaponDetails:Wait( 5 ) or f8_local0:Wait( 5 )
									f9_local6.onComplete = function ()
										local f10_local0 = f9_local0( f9_local0.base, f9_local0.base.tagOrigin )
										f9_local0 = f9_local0( f9_local0.insert, f9_local0.insert.tagOrigin )
										f10_local0.xPosition = f9_local0.xPosition
										f10_local0.yPosition = f9_local0.yPosition
										ClientModel[0x9C89C00DF9B85ED]( CLIENT_MODEL.GetClientModelIndex( f9_local0.base ), f10_local0 )
									end
									
								end
								
							end
						end
						f8_local3 = WEAPON.FlashTag
					end
					local f8_local4 = Engine[0xC3B7925CCAC9430]( f7_arg0, f7_arg0, GUNSMITH.defaultTag )
					local f8_local5 = Engine[0xC3B7925CCAC9430]( f7_arg0, f7_arg0, f8_local3 )
					local f8_local6 = Engine[0xC3B7925CCAC9430]( f7_arg0, f7_arg0, WEAPON.RearTag )
					local f8_local7 = f7_arg0( CLIENT_MODEL.coreMPModels.GUN_VISE_BASE, CLIENT_MODEL.coreMPModels.GUN_VISE_BASE.tagOrigin )
					local f8_local8 = (f8_local5.xPosition + f8_local6.xPosition) / 2
					local f8_local9 = (f8_local5.yPosition + f8_local6.yPosition) / 2
					local f8_local10 = f8_local4.xPosition - f8_local8
					local f8_local11 = f8_local4.yPosition - f8_local9
					local f8_local12 = f8_local4.xPosition - f8_local7.xPosition + f8_local10
					local f8_local13 = f8_local4.yPosition - f8_local7.yPosition + f8_local11
					local f8_local14 = Engine[0xC3B7925CCAC9430]( f7_arg0, f7_arg0, "tag_mag_attach" )
					local f8_local15 = f7_arg0( f7_arg0.insert, f7_arg0.insert.tagGunAttach )
					local f8_local16 = f8_local15.zPosition - f8_local14.zPosition + GUNSMITH.GetWeaponZOffset( f7_arg0, f7_arg0, f7_arg0._weaponTable.attachments, true )
					DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.xOffset:SetValue( f7_arg0, f8_local12 )
					DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.yOffset:SetValue( f7_arg0, f8_local13 )
					DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.zOffset:SetValue( f7_arg0, f8_local16 )
					ClientWeapon[0x8B8A4E0355DF0C0]( FrontEndScene.ClientWeapons.Preview, f8_local12, f8_local13, f8_local16 )
					CLIENT_MODEL.HideModels( f7_arg0 )
					f7_arg0( f7_arg0, f7_arg0.insert, f7_arg0, "offset_vise_attach" )
					local f8_local17 = f7_arg0 and f7_arg0.GunsmithWeaponDetails:Wait( 5 ) or f7_arg0:Wait( 5 )
					f8_local17.onComplete = function ()
						local f9_local0 = ATTACHMENT.GetAttachmentCategoryBone( "receiver" )
						local f9_local1 = Engine[0xC3B7925CCAC9430]( f8_local0, f8_local0, f9_local0 )
						local f9_local2 = "attach_zoom," .. "receiver" .. "," .. f9_local0 .. "," .. f9_local1.xPosition .. "," .. f9_local1.yPosition .. "," .. f9_local1.zPosition .. "," .. f9_local1.xAngle .. "," .. f9_local1.yAngle .. "," .. f9_local1.zAngle
						Engine[0x6055C55456F05DF]( f9_local2, 1 )
						if f8_local0 then
							local f9_local3 = f8_local0.GunsmithWeaponDetails:Wait( 5 )
							f9_local3.onComplete = function ()
								GUNSMITH.SetGunsmithWeaponOffset( f9_local0 )
								GUNSMITH.SetGunsmithCameraPosition( f9_local0 )
							end
							
						end
						DataSources.frontEnd.MP.CAC.gunsmithWeaponOffsets.offsetsData.tagDataString:SetValue( f8_local0, f9_local2 )
						local f9_local3 = f8_local0( f8_local0.insert, f8_local0.insert.tagOrigin )
						local f9_local4 = f8_local0( f8_local0.insert, f8_local0.insert.tagGunAttach )
						local f9_local5 = Engine[0xC3B7925CCAC9430]( f8_local0, f8_local0, "offset_vise_attach" )
						f9_local3.xPosition = f9_local5.xPosition - f9_local4.xPosition - f9_local3.xPosition
						f9_local3.yPosition = f9_local5.yPosition - f9_local4.yPosition - f9_local3.yPosition
						ClientModel[0x9C89C00DF9B85ED]( CLIENT_MODEL.GetClientModelIndex( f8_local0.insert ), f9_local3 )
						local f9_local6 = f8_local0 and f8_local0.GunsmithWeaponDetails:Wait( 5 ) or f8_local0:Wait( 5 )
						f9_local6.onComplete = function ()
							local f10_local0 = f9_local0( f9_local0.base, f9_local0.base.tagOrigin )
							f9_local0 = f9_local0( f9_local0.insert, f9_local0.insert.tagOrigin )
							f10_local0.xPosition = f9_local0.xPosition
							f10_local0.yPosition = f9_local0.yPosition
							ClientModel[0x9C89C00DF9B85ED]( CLIENT_MODEL.GetClientModelIndex( f9_local0.base ), f10_local0 )
						end
						
					end
					
				end
				
			end
		end
		f7_local2 = f7_arg0:Wait( 5 )
	end
	
	local f1_local3 = function ( f5_arg0, f5_arg1 )
		f5_arg0:SubscribeToModel( f5_arg0._weaponPositionForceUpdateModel, function ( f6_arg0 )
			if DataModel[0x614D394F6F9A18D]( f6_arg0 ) then
				f5_arg0( f5_arg0, f5_arg0, true )
			end
		end, true )
	end
	
	local f1_local4 = function ( f4_arg0 )
		CLIENT_MODEL.SetAllModelsModifiable( f4_arg0 )
		CLIENT_MODEL.InitGunViseModels()
		CLIENT_MODEL.HideModels( {
			base = CLIENT_MODEL.coreMPModels.GUN_VISE_SUPPORT_BASE,
			insert = CLIENT_MODEL.coreMPModels.GUN_VISE_SUPPORT_INSERT
		} )
		CLIENT_MODEL.SetModel( CLIENT_MODEL.coreMPModels.MAG_DISPLAY, "tag_origin" )
	end
	
	local f1_local5 = function ( f2_arg0, f2_arg1 )
		if not f2_arg0.waitForTagDataTimer then
			f2_arg0.waitForTagDataTimer = LUI.UITimer.new( {
				interval = 50,
				event = "waitForTagData"
			} )
			f2_arg0:addElement( f2_arg0.waitForTagDataTimer )
		end
		local f2_local0 = ClientWeapon[0x5DD69014A9C290]( FrontEndScene.ClientWeapons.Preview )
		f2_arg0:registerEventHandler( "waitForTagData", function ( element, event )
			local f3_local0 = Engine[0xF3C157C48E60860]( f2_arg0, f2_arg0, WEAPON.SilencedFlashTag )
			local f3_local1 = Engine[0xF3C157C48E60860]( f2_arg0, f2_arg0, WEAPON.MuzzleFlashTag )
			local f3_local2
			if f3_local0 then
				f3_local2 = WEAPON.SilencedFlashTag
				if not f3_local2 then
					if f3_local1 then
						f3_local2 = WEAPON.MuzzleFlashTag
						if not f3_local2 then
						
						else
							local f3_local3 = Engine[0xC3B7925CCAC9430]( f2_arg0, f2_arg0, GUNSMITH.defaultTag )
							local f3_local4 = Engine[0xC3B7925CCAC9430]( f2_arg0, f2_arg0, f3_local2 )
							local f3_local5 = Engine[0xC3B7925CCAC9430]( f2_arg0, f2_arg0, WEAPON.RearTag )
							local f3_local6 = f2_arg0
							local f3_local7
							if f3_local3 then
								f3_local7 = f3_local3
							elseif f3_local4 then
								f3_local7 = f3_local4
							else
								f3_local7 = f3_local5
							end
							f3_local6.isTagDataAvailable = f3_local7
							if f2_arg0.isTagDataAvailable then
								f2_arg0( f2_arg0, f2_arg0 )
								if f2_arg0.waitForTagDataTimer then
									f2_arg0.waitForTagDataTimer:closeTree()
									f2_arg0.waitForTagDataTimer = nil
								end
							end
						end
					end
					f3_local2 = WEAPON.FlashTag
				end
			else
				if f3_local1 then
					f3_local2 = WEAPON.MuzzleFlashTag
					if not f3_local2 then
					
					else
						local f3_local3 = Engine[0xC3B7925CCAC9430]( f2_arg0, f2_arg0, GUNSMITH.defaultTag )
						local f3_local4 = Engine[0xC3B7925CCAC9430]( f2_arg0, f2_arg0, f3_local2 )
						local f3_local5 = Engine[0xC3B7925CCAC9430]( f2_arg0, f2_arg0, WEAPON.RearTag )
						local f3_local6 = f2_arg0
						local f3_local7
						if f3_local3 then
							f3_local7 = f3_local3
						elseif f3_local4 then
							f3_local7 = f3_local4
						else
							f3_local7 = f3_local5
						end
						f3_local6.isTagDataAvailable = f3_local7
						if f2_arg0.isTagDataAvailable then
							f2_arg0( f2_arg0, f2_arg0 )
							if f2_arg0.waitForTagDataTimer then
								f2_arg0.waitForTagDataTimer:closeTree()
								f2_arg0.waitForTagDataTimer = nil
							end
						end
					end
				end
				f3_local2 = WEAPON.FlashTag
			end
			local f3_local3 = Engine[0xC3B7925CCAC9430]( f2_arg0, f2_arg0, GUNSMITH.defaultTag )
			local f3_local4 = Engine[0xC3B7925CCAC9430]( f2_arg0, f2_arg0, f3_local2 )
			local f3_local5 = Engine[0xC3B7925CCAC9430]( f2_arg0, f2_arg0, WEAPON.RearTag )
			local f3_local6 = f2_arg0
			local f3_local7
			if f3_local3 then
				f3_local7 = f3_local3
			elseif f3_local4 then
				f3_local7 = f3_local4
			else
				f3_local7 = f3_local5
			end
			f3_local6.isTagDataAvailable = f3_local7
			if f2_arg0.isTagDataAvailable then
				f2_arg0( f2_arg0, f2_arg0 )
				if f2_arg0.waitForTagDataTimer then
					f2_arg0.waitForTagDataTimer:closeTree()
					f2_arg0.waitForTagDataTimer = nil
				end
			end
		end )
	end
	
	local f1_local6 = LUI.DataSourceFromOmnvar.new( "frontend_weapon_position_force_update" )
	f1_arg0._weaponPositionForceUpdateModel = f1_local6:GetModel( f1_arg1 )
	GUNSMITH.InitGunsmithWeaponOffsetDataSources()
	GUNSMITH.SetAreInGunsmithScene( true )
	f1_local4( f1_arg1 )
	f1_local5( f1_arg0, f1_arg1 )
	f1_local3( f1_arg0, f1_arg1 )
	WEAPON.SetGunsmithSceneForWeapon( WEAPON.GetWeaponClassWithAttachments( f1_arg2 ) )
end

