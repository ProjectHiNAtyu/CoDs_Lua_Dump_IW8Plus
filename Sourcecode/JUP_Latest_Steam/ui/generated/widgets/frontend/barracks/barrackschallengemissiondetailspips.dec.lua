-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
module( ..., package.seeall )
local f0_local0 = SWATCHES[0x4DF62CF810D16C2][0x28987457C9AC082]
local f0_local1 = SWATCHES[0x5E2F4190CE482DE][0x35F3A3E30C35450]
local f0_local2 = SWATCHES[0x1F5A9ABAC207F9D][0x90E33AF977686D4]
local f0_local3 = 0.5
local f0_local4 = SWATCHES[0x4DF62CF810D16C2][0xCC44970C8397929]
local f0_local5 = 1
local f0_local6 = function ( f6_arg0, f6_arg1 )
	for f6_local7, f6_local8 in ipairs( f6_arg0._pips ) do
		local f6_local9 = f6_local8.Pip
		if f6_local8._selected then
			f6_local8._selected = false
			if f6_local8.complete then
				f6_local9:SetRGB( f0_local0 )
				f6_local9:SetAlpha( f0_local0 )
			elseif f6_arg0._isActiveObjective and f6_local8.isActive then
				f6_local9:SetRGB( f0_local0 )
				f6_local9:SetAlpha( f0_local0 )
			else
				f6_local9:SetRGB( f0_local0 )
				f6_local9:SetAlpha( f0_local0 )
			end
			f6_local8.Lock:SetRGB( SWATCHES[0x4DF62CF810D16C2][0xCC44970C8397929] )
		end
		if f6_local7 == f6_arg1 then
			local f6_local3 = f6_arg0._isActiveObjective and f6_local8.isActive
			local f6_local4 = f6_local9
			local f6_local5 = f6_local9.SetRGB
			local f6_local6
			if f6_local3 then
				f6_local6 = f0_local0
				if not f6_local6 then
				
				else
					f6_local5( f6_local4, f6_local6 )
					f6_local9:SetAlpha( f0_local0 )
					f6_local8.Lock:SetRGB( SWATCHES[0xD21308BA745ADB3][0x9075F07B820DA7B] )
					f6_local8._selected = true
				end
			end
			f6_local6 = f0_local0
		end
	end
end

local f0_local7 = function ( f5_arg0, f5_arg1 )
	f5_arg0._isActiveObjective = f5_arg1
end

local f0_local8 = function ( f3_arg0, f3_arg1, f3_arg2, f3_arg3, f3_arg4 )
	for f3_local0 = 1, #f3_arg0._pips, 1 do
		f3_arg0._pips[f3_local0]:closeTree()
	end
	f3_arg0._pips = {}
	local f3_local0 = not f3_arg4
	local f3_local1 = f3_arg0._pipHeight / 2
	for f3_local2 = 1, f3_arg1, 1 do
		local self = LUI.UIButton.new()
		self.id = "Pip" .. f3_local2
		self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, f3_arg0._pipWidth, -f3_local1, f3_local1 )
		local f3_local6 = 6
		local f3_local7 = 6
		local f3_local8 = LUI.UIImage.new()
		f3_local8.id = "Pip" .. f3_local2 .. "Image"
		f3_local8:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -f3_local7, f3_local7, -f3_local7, f3_local7 )
		local f3_local9 = LUI.UIImage.new()
		f3_local9.id = "Lock"
		f3_local9:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -f3_local6, f3_local6, -f3_local6, f3_local6 )
		f3_local9:SetRGB( SWATCHES[0x4DF62CF810D16C2][0xCC44970C8397929] )
		f3_local9:setImage( RegisterMaterial( "icon_lock" ) )
		self:addElement( f3_local8 )
		self:addElement( f3_local9 )
		self.Pip = f3_local8
		self.Lock = f3_local9
		f3_arg0._pipContainer:addElement( self )
		self.complete = f3_local2 <= f3_arg2
		self.index = f3_local2
		local f3_local10 = self.Pip
		if self.complete then
			f3_local10:SetRGB( f0_local0 )
			f3_local10:SetAlpha( f0_local0 )
			self.Lock:SetAlpha( 0 )
		else
			if f3_local0 then
				f3_local0 = false
				self.isActive = true
			else
				self.isActive = false
			end
			if f3_arg0._isActiveObjective and self.isActive then
				f3_local10:SetRGB( f0_local0 )
				f3_local10:SetAlpha( f0_local0 )
			else
				f3_local10:SetRGB( f0_local0 )
				f3_local10:SetAlpha( f0_local0 )
			end
			if not self.isActive then
				self.Lock:SetAlpha( 0.9 )
			else
				self.Lock:SetAlpha( 0 )
			end
		end
		self:registerEventHandler( "leftmouseup", function ( self, event )
			local f4_local0 = self:getParent()
			f4_local0:dispatchEventToParent( {
				name = "mission_details_mouse_navigate",
				index = self.index
			} )
		end )
		table.insert( f3_arg0._pips, self )
	end
	if f3_arg3 and f3_arg3 == LUI.Alignment.Center then
		f3_arg0._pipContainer:SetLeft( -(f3_arg1 * (f3_arg0._pipWidth + f3_arg0._spacing) / 2) )
	end
end

local f0_local9 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.Setup = f0_local0
	f2_arg0.SetSelected = f0_local0
	f2_arg0.SetActive = f0_local0
	f2_arg0._isActiveObjective = false
	local f2_local0, f2_local1, f2_local2, f2_local3 = f2_arg0.Pip:getLocalRect()
	f2_arg0._pipContainer = LUI.UIHorizontalStackedLayout.new()
	f2_arg0._pipContainer.id = "PipContainer"
	f2_arg0._pipContainer:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
	f2_arg0._pipContainer:SetSpacing( 3 )
	f2_arg0:addElement( f2_arg0._pipContainer )
	f2_arg0._pipWidth = f2_local2 - f2_local0
	f2_arg0._pipHeight = f2_local3 - f2_local1
	f2_arg0._spacing = f2_arg0:GetSpacing()
	f2_arg0._pips = {}
	f2_arg0.Pip:closeTree()
	f2_arg0.Pip = nil
end

function BarracksChallengeMissionDetailsPips( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = MenuBuilder
	local f1_local2 = f1_local0.UIElement.new()
	f1_local2:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 15, 0, 5 )
	f1_local2.id = "BarracksChallengeMissionDetailsPips"
	local f1_local3
	if f1_arg1 then
		f1_local3 = f1_arg1
	else
		f1_local3 = f1_arg1.controllerIndex
	end
	f1_local3 = f1_local0.ValidateControllerIndex( f1_local2, f1_local3 )
	local f1_local4 = nil
	f1_local4 = f1_local0.UIImage.new()
	f1_local4[0x8B72E07B55C3AC0] = "Pip"
	f1_local4:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, 0, 15, -2.5, 2.5 )
	f1_local2:addElement( f1_local4 )
	f1_local2[0x7AF5C19565FDF26] = f1_local4
	f0_local0( f1_local2, f1_local3, f1_arg1 )
	return f1_local2
end

MenuBuilder.registerType( 0x5DADCCA1A655C15, BarracksChallengeMissionDetailsPips )
LockTable( _M )
