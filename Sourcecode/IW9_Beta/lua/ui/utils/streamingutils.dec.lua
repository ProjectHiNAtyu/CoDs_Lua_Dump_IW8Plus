-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
STREAMING = STREAMING or {}
STREAMING.ModelTypes = {
	WeaponWorld = 3,
	Body = 1,
	Count = 6,
	Head = 0,
	WeaponView = 4,
	ClientModel = 5,
	HandView = 2
}
STREAMING.Queues = {
	[STREAMING.ModelTypes.ClientModel] = {},
	[STREAMING.ModelTypes.Head] = {},
	[STREAMING.ModelTypes.Body] = {},
	[STREAMING.ModelTypes.HandView] = {},
	[STREAMING.ModelTypes.WeaponWorld] = {},
	[STREAMING.ModelTypes.WeaponView] = {}
}
STREAMING.QueueTypes = {
	Client = 1,
	Global = 0
}
STREAMING.GlobalPriority = 0
STREAMING.Priority = {
	High = 1,
	Low = 4294967295,
	General = 0
}
STREAMING.MenuSet = {}
STREAMING.ModelTypeAttributes = {
	[STREAMING.ModelTypes.Head] = {
		modelLimit = 48,
		queueType = STREAMING.QueueTypes.Global,
		RequestFunction = Streaming[0x18B8E5AB5004CAE],
		HasFunction = Streaming[0xB419364AFE8EA47]
	},
	[STREAMING.ModelTypes.Body] = {
		modelLimit = 48,
		queueType = STREAMING.QueueTypes.Global,
		RequestFunction = Streaming[0x2692B1B59144830],
		HasFunction = Streaming[0x7AC12FC69537581]
	},
	[STREAMING.ModelTypes.HandView] = {
		modelLimit = 20,
		queueType = STREAMING.QueueTypes.Client,
		RequestFunction = Streaming[0x7668EB1A3FE3FB4],
		HasFunction = Streaming[0x43A7A19BC7D53B9]
	},
	[STREAMING.ModelTypes.WeaponWorld] = {
		modelLimit = -64,
		queueType = STREAMING.QueueTypes.Global,
		RequestFunction = Streaming[0x4E036CF79BBA158],
		HasFunction = Streaming[0x1FCAC710627207]
	},
	[STREAMING.ModelTypes.WeaponView] = {
		modelLimit = 24,
		queueType = STREAMING.QueueTypes.Client,
		RequestFunction = Streaming[0x74B584089FA8531],
		HasFunction = Streaming[0xBE636A91711ED30]
	},
	[STREAMING.ModelTypes.ClientModel] = {
		modelLimit = 32,
		queueType = STREAMING.QueueTypes.Client,
		RequestFunction = Streaming[0xC6CF6514F4ACB1F],
		HasFunction = Streaming[0xDBA0813A4480D56]
	}
}
STREAMING.EnableStreaming = function ()
	if not Streaming[0x19E17A0E38F313A]() then
		Streaming[0xE493C1B436663F6]( true )
	end
end

STREAMING.Init = function ()
	STREAMING.EnableStreaming()
	for f8_local0 = 0, STREAMING.ModelTypes.Count - 1, 1 do
		STREAMING.ModelTypeAttributes[f8_local0].modelLimit = Streaming[0xFC6A290A59B360C]( f8_local0 )
		if STREAMING.ModelTypeAttributes[f8_local0].queueType == STREAMING.QueueTypes.Client then
			for f8_local3 = 0, Engine[0xB686A0A723E6442]() - 1, 1 do
				STREAMING.Queues[f8_local0][f8_local3] = {}
			end
		end
	end
end

local f0_local0 = function ( f7_arg0, f7_arg1, f7_arg2 )
	if 0 < #f7_arg0 then
		local f7_local0 = {}
		local f7_local1 = STREAMING.ModelTypeAttributes[f7_arg1]
		local f7_local2 = math.min( #f7_arg0, f7_local1.modelLimit )
		if Dvar[0x9E5BE3B4BBA4E0E]( 0x97DE89FC39603 ) then
			DebugPrint( "==================Debug Streaming in UpdateRequests(), StreamingUtils.lua ====================================================================================" )
			DebugPrint( "modelType: " .. tostring( f7_arg1 ) )
			if f7_arg2 then
				DebugPrint( "controllerIndex: " .. tostring( f7_arg2 ) )
			end
		end
		for f7_local3 = 1, f7_local2, 1 do
			local f7_local6 = f7_local2 - f7_local3 + 1
			table.insert( f7_local0, f7_arg0[f7_local6].model )
			if Dvar[0x9E5BE3B4BBA4E0E]( 0x97DE89FC39603 ) then
				local f7_local7 = f7_arg0[f7_local6]
				DebugPrint( tostring( f7_local3 ) .. ". priority: " .. tostring( f7_local7.priority ) .. "  menu:" .. tostring( f7_local7.menuName ) .. " model: " .. tostring( f7_local7.model ) )
			end
		end
		local f7_local3 = f7_local1.RequestFunction
		if f7_local1.queueType == STREAMING.QueueTypes.Global then
			f7_local3( f7_local0 )
		elseif f7_local1.queueType == STREAMING.QueueTypes.Client then
			f7_local3( f7_local0, f7_arg2 )
		end
	end
end

local f0_local1 = function ( f6_arg0, f6_arg1 )
	local f6_local0 = nil
	if STREAMING.ModelTypeAttributes[f6_arg0].queueType == STREAMING.QueueTypes.Global then
		if not STREAMING.Queues[f6_arg0] then
			STREAMING.Queues[f6_arg0] = {}
		end
		f6_local0 = STREAMING.Queues[f6_arg0]
	elseif STREAMING.ModelTypeAttributes[f6_arg0].queueType == STREAMING.QueueTypes.Client then
		if not STREAMING.Queues[f6_arg0][f6_arg1] then
			STREAMING.Queues[f6_arg0][f6_arg1] = {}
		end
		f6_local0 = STREAMING.Queues[f6_arg0][f6_arg1]
	end
	return f6_local0
end

local f0_local2 = function ( f5_arg0, f5_arg1 )
	for f5_local0 = 1, #f5_arg0, 1 do
		if f5_arg0[f5_local0].model == f5_arg1.model then
			table.remove( f5_arg0, f5_local0 )
			break
		end
	end
	local f5_local0 = 1
	for f5_local1 = 1, #f5_arg0, 1 do
		if f5_arg0[f5_local1].priority <= f5_arg1.priority then
			f5_local0 = f5_local1
			break
		end
	end
	table.insert( f5_arg0, f5_local0, f5_arg1 )
end

local f0_local3 = function ( f4_arg0, f4_arg1 )
	if f4_arg0[1] then
		
	else
		
	end
end

local f0_local4 = function ( f3_arg0 )
	for f3_local0 = 0, STREAMING.ModelTypes.Count - 1, 1 do
		if STREAMING.ModelTypeAttributes[f3_local0].queueType == STREAMING.QueueTypes.Global then
			local f3_local3 = STREAMING.Queues[f3_local0]
			f0_local0( STREAMING.Queues[f3_local0], f3_arg0 )
			f0_local0( f3_local3, f3_local0 )
		end
		if STREAMING.ModelTypeAttributes[f3_local0].queueType == STREAMING.QueueTypes.Client then
			for f3_local3 = 0, Engine[0xB686A0A723E6442]() - 1, 1 do
				if Engine[0x10A5732AB1DAE9F]( f3_local3 ) then
					local f3_local6 = STREAMING.Queues[f3_local0]
					f0_local0( STREAMING.Queues[f3_local0][f3_local3], f3_arg0 )
					f0_local0( f3_local6, f3_local0, f3_local3 )
				end
			end
		end
	end
end

STREAMING.RequestModels = function ( f1_arg0, f1_arg1 )
	assert( f1_arg1 )
	assert( f1_arg1.models )
	assert( f1_arg1.modelType )
	assert( f1_arg1.menuName )
	STREAMING.EnableStreaming()
	local f1_local0 = f1_arg1.menuName
	local f1_local1 = f1_arg1.modelType
	local f1_local2 = f1_arg1.models
	if not STREAMING.MenuSet[f1_local0] then
		STREAMING.MenuSet[f1_local0] = true
		STREAMING.GlobalPriority = STREAMING.GlobalPriority + 1
		LUI.FlowManager.RegisterStackPopBehaviour( f1_local0, function ()
			if STREAMING.MenuSet[f1_arg0] then
				f1_arg0( f1_arg0 )
				STREAMING.MenuSet[f1_arg0] = false
				STREAMING.GlobalPriority = STREAMING.GlobalPriority - 1
			end
		end )
	end
	local f1_local3 = f1_arg1.priority
	if not f1_local3 then
		f1_local3 = STREAMING.Priority.General
	end
	local f1_local4 = STREAMING.GlobalPriority + LUI.clamp( f1_local3, STREAMING.Priority.Low, STREAMING.Priority.High )
	local f1_local5 = f0_local0( f1_local1, f1_arg0 )
	for f1_local9, f1_local10 in ipairs( f1_local2 ) do
		if f1_local10 and 0 < #f1_local10 then
			f0_local0( f1_local5, {
				model = f1_local10,
				priority = f1_local4,
				menuName = f1_local0
			} )
		end
	end
	f0_local0( f1_local5, f1_local1, f1_arg0 )
end

