-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
module( ..., package.seeall )
local f0_local0 = 2.5
local f0_local1 = 2
local f0_local2 = 2.5
local f0_local3 = 204
local f0_local4 = 336
local f0_local5 = 16
local f0_local6 = 275
local f0_local7 = 150
local f0_local8 = 0
local f0_local9 = 0x91E7752F9EE6B5C
local f0_local10 = 0.32
local f0_local11 = {
	iw9_dm_mike24 = true,
	iw9_ar_akilo = true
}
local f0_local12 = function ( f10_arg0, f10_arg1, f10_arg2 )
	if not CONDITIONS.IsMobileOrMobileSim() then
		if f10_arg0._lastButtonActive and f10_arg1 ~= f10_arg0._lastButtonActive then
			f10_arg0._lastButtonActive:processEvent( {
				name = "lose_focus"
			} )
			f10_arg0._lastButtonActive:RemoveActive( f10_arg2 )
			if f10_arg0._lastButtonActive.Highlight then
				f10_arg0._lastButtonActive.Highlight:RemoveActive( f10_arg2 )
			end
		end
		f10_arg1:SetActive()
		if f10_arg1.Highlight then
			f10_arg1.Highlight:SetActive()
		end
		f10_arg0._lastButtonActive = f10_arg1
	end
end

local f0_local13 = function ( f5_arg0, f5_arg1, f5_arg2, f5_arg3, f5_arg4, f5_arg5, f5_arg6, f5_arg7, f5_arg8, f5_arg9, f5_arg10, f5_arg11 )
	local f5_local0 = GUNSMITH.GetPlatformProgressionBaseWeapon( f5_arg6 )
	local f5_local1 = not f5_arg7
	local f5_local2
	if f5_local1 then
		f5_local2 = f5_arg0._upButtons
		if not f5_local2 then
		
		else
			local f5_local3 = f5_arg0._firstButton and #f5_local2 + 1 or #f5_local2
			local f5_local4 = f5_arg1 * f0_local0
			local f5_local5 = f5_arg2 / (f0_local0[f5_local0] and f0_local0 or f0_local0) + (f0_local0[f5_local0] and f0_local0 or f0_local0)
			local f5_local6 = nil
			f5_local6 = MenuBuilder.BuildRegisteredType( "GunsmithProgressionOverviewButton", {
				controllerIndex = f5_arg0._controllerIndex,
				weaponRef = f5_arg6
			} )
			f5_local6.id = "GunsmithProgressionOverviewButton" .. #f5_local2 + 1
			f5_local6:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * f5_local4, _1080p * (f0_local0 + f5_local4), _1080p * f5_local5, _1080p * (f0_local0 + f5_local5) )
			f5_arg0:addElement( f5_local6 )
			local f5_local7 = WEAPON.GetName( f5_arg6 )
			if f5_arg8 then
				f5_local7 = Engine[0xED84C33EC5F01EA]( f0_local0 ) .. f5_local7
			end
			local f5_local8 = f5_arg4 + 1
			f5_local6:SetNameAndLevel( f5_local7, f5_local8 )
			f5_local6.Image:setImage( RegisterMaterial( WEAPON.GetProgressionImage( f5_arg6 ) ) )
			f5_local6.Class:setText( Engine[0xED84C33EC5F01EA]( WEAPON.GetWeaponClassName( f5_arg6 ) ) )
			f5_local6.Percent:setText( Engine[0xED84C33EC5F01EA]( 0x4348825FE0CF6E9, math.floor( f5_local8 / f5_arg5 ) * 100 ) )
			f5_local6._weaponRef = f5_arg6
			if f5_arg11.isLeftAvailable == nil then
				f5_local6.BottomLines:SetAlpha( 0 )
			end
			if f5_arg11.isRightAvailable == nil then
				f5_local6.TopLines:SetAlpha( 0 )
			end
			local f5_local9 = GUNSMITH.FindButtonForWeaponRef( f5_arg0, f5_arg11.parentWeaponRef )
			if f5_local9 and f5_arg10 then
				if not f5_arg8 then
					ACTIONS.AnimateSequence( f5_local9.TopLines, "Unlocked" )
					ACTIONS.AnimateSequence( f5_local9.BottomLines, "Unlocked" )
				else
					local f5_local10 = f5_arg10
					if f5_local1 then
						f5_local9.TopLines.UnlockLevel:setText( Engine[0xED84C33EC5F01EA]( 0xEE5996CF2B4FC93, f5_local10 ) )
					else
						f5_local9.BottomLines.UnlockLevel:setText( Engine[0xED84C33EC5F01EA]( 0xEE5996CF2B4FC93, f5_local10 ) )
					end
				end
			end
			f5_local6:addEventHandler( "button_over", function ( f9_arg0, f9_arg1 )
				f5_arg0._overviewWeaponRef = f9_arg0._weaponRef
				f5_arg0:dispatchEventToParent( {
					unlockLevel = 0,
					name = "progression_button_over",
					isOverview = true,
					weaponRef = f9_arg0._weaponRef
				} )
				f5_arg0:AddActiveOnCurrentButton( f9_arg0, f9_arg1 )
			end )
			f5_local6:addEventHandler( "button_over_disable", function ( f8_arg0, f8_arg1 )
				f5_arg0:dispatchEventToParent( {
					unlockLevel = 0,
					name = "progression_button_over",
					isOverview = true,
					weaponRef = f8_arg0._weaponRef
				} )
				f5_arg0:AddActiveOnCurrentButton( f8_arg0, f8_arg1 )
			end )
			f5_local6:addEventHandler( "button_action", function ( f7_arg0, f7_arg1 )
				f5_arg0:dispatchEventToParent( {
					menuType = 2,
					name = "progression_switch_menus",
					weaponRef = f7_arg0._weaponRef
				} )
			end )
			f5_local6:SetLocked( f5_arg8 )
			f5_local6.Pips:SetRefreshChild( function ( f6_arg0, f6_arg1, f6_arg2 )
				local f6_local0 = f5_arg0.Pips:GetContentIndex( f6_arg1, f6_arg2 )
				if f5_arg0[f6_local0 + 1].unlocked then
					if f6_local0 + 1 == #f5_arg0 then
						ACTIONS.AnimateSequence( f6_arg0, "FinalComplete" )
						ACTIONS.AnimateSequence( f5_arg0, "Complete" )
					else
						ACTIONS.AnimateSequence( f6_arg0, "Complete" )
					end
				end
			end )
			f5_local6.Pips:SetNumChildren( f5_arg3 )
			f5_local6:SetupHorizontalLine( f5_arg3 )
			if not f5_arg0._firstButton then
				f5_arg0._firstButton = f5_local6
				f5_local6:processEvent( {
					name = "gain_focus"
				} )
				if not CONDITIONS.IsMobileOrMobileSim() then
					f5_local6:SetActive()
					f5_arg0._lastButtonActive = f5_local6
				end
				f5_arg0._firstButtonIsUp = f5_local1
			else
				table.insert( f5_local2, f5_local6 )
			end
		end
	end
	f5_local2 = f5_arg0._downButtons
end

local f0_local14 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.CreateNewOverviewButton = f0_local0
	f2_arg0.AddActiveOnCurrentButton = f0_local0
	f2_arg0.SetupDefaultFocus = GUNSMITH.SetupDefaultFocus
	f2_arg0._controllerIndex = f2_arg1
	f2_arg0:SubscribeToInputTypeModel( f2_arg1, function ( f4_arg0, f4_arg1 )
		if not LUI.IsLastInputMouseNavigation( f4_arg1._controllerIndex ) and f4_arg1._lastButtonActive then
			f4_arg1._lastButtonActive:processEvent( {
				name = "gain_focus"
			} )
		end
	end )
	f2_arg0:addEventHandler( "gain_focus", function ( f3_arg0, f3_arg1 )
		if not String.IsNilOrEmpty( f3_arg1.targetWeaponRef ) then
			return f2_arg0:SetupDefaultFocus( f3_arg1.targetWeaponRef )
		else
			
		end
	end )
end

function GunsmithProgressionOverview( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "GunsmithProgressionOverview"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local WeaponMasterySubtitle = nil
	
	WeaponMasterySubtitle = LUI.UIStyledText.new()
	WeaponMasterySubtitle.id = "WeaponMasterySubtitle"
	WeaponMasterySubtitle:SetRGBFromTable( SWATCHES.IW9StyleGuide.styleGuideCool01, 0 )
	WeaponMasterySubtitle:SetAlpha( 0.2, 0 )
	WeaponMasterySubtitle:setText( Engine[0xED84C33EC5F01EA]( 0xA86A4906E9B9DB1 ), 0 )
	WeaponMasterySubtitle:setCaseStyle( LUI.CaseStyle.Uppercase )
	WeaponMasterySubtitle:SetFont( FONTS.GetFont( FONTS.SecondaryRegular.File ) )
	WeaponMasterySubtitle:SetFontSize( 20 * _PT )
	WeaponMasterySubtitle:SetMinFontSize( 20 * _PT )
	WeaponMasterySubtitle:SetWordWrap( false )
	WeaponMasterySubtitle:SetAlignment( LUI.Alignment.Right )
	WeaponMasterySubtitle:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -588, _1080p * -88, _1080p * 206.8, _1080p * 236.8 )
	self:addElement( WeaponMasterySubtitle )
	self.WeaponMasterySubtitle = WeaponMasterySubtitle
	
	local WeaponMasteryPercent = nil
	
	WeaponMasteryPercent = LUI.UIStyledText.new()
	WeaponMasteryPercent.id = "WeaponMasteryPercent"
	WeaponMasteryPercent:SetRGBFromTable( SWATCHES.IW9StyleGuide.styleGuideCool01, 0 )
	WeaponMasteryPercent:SetAlpha( 0.2, 0 )
	WeaponMasteryPercent:setText( "", 0 )
	WeaponMasteryPercent:SetFont( FONTS.GetFont( FONTS.PrimaryBlack.File ) )
	WeaponMasteryPercent:SetFontSize( 90 * _PT )
	WeaponMasteryPercent:SetMinFontSize( 90 * _PT )
	WeaponMasteryPercent:SetWordWrap( false )
	WeaponMasteryPercent:SetAlignment( LUI.Alignment.Right )
	WeaponMasteryPercent:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -588, _1080p * -88, _1080p * 108.8, _1080p * 198.8 )
	self:addElement( WeaponMasteryPercent )
	self.WeaponMasteryPercent = WeaponMasteryPercent
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "GunsmithProgressionOverview", GunsmithProgressionOverview )
LockTable( _M )
