-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
module( ..., package.seeall )
local f0_local0 = 3
local f0_local1 = function ( f11_arg0, f11_arg1, f11_arg2 )
	f11_arg0:CacheDimensions()
	f11_arg0.CurProgress:SetAnchorsAndPosition( 0, 1, 0, 1, 0, (f11_arg2 + 1) * f11_arg0._slotWidth, 0, f11_arg0._widgetHeight )
end

local f0_local2 = function ( f10_arg0, f10_arg1, f10_arg2 )
	f10_arg0:CacheDimensions()
	f10_arg0.CurRank:SetAnchorsAndPosition( 0, 1, 0, 1, f10_arg2 * f10_arg0._slotWidth, (f10_arg2 + 1) * f10_arg0._slotWidth, 0, f10_arg0._widgetHeight )
end

local f0_local3 = function ( f9_arg0, f9_arg1, f9_arg2 )
	f9_arg0:CacheDimensions()
	local f9_local0 = f9_arg0._slotWidth / 2
	local f9_local1 = f9_arg2 * f9_arg0._slotWidth + f9_local0 - f9_arg0._topHighlightWidth / 2
	local f9_local2 = 0 - f9_arg0._topHighlightHeight - f0_local0
	local f9_local3 = f9_arg2 * f9_arg0._slotWidth + f9_local0 - f9_arg0._bottomHighlightWidth / 2
	local f9_local4 = f9_arg0._widgetHeight + f0_local0
	f9_arg0.TopHighlight:SetAnchorsAndPosition( 0, 1, 0, 1, f9_local1, f9_local1 + f9_arg0._topHighlightWidth, f9_local2, f9_local2 + f9_arg0._topHighlightHeight )
	f9_arg0.BottomHighlight:SetAnchorsAndPosition( 0, 1, 0, 1, f9_local3, f9_local3 + f9_arg0._bottomHighlightWidth, f9_local4, f9_local4 + f9_arg0._bottomHighlightHeight )
	f9_arg0:SetBorderPosition()
	if f9_arg2 == 0 then
		f9_arg0.LeftCap:SetAlpha( 0.6 )
		f9_arg0.RightCap:SetAlpha( 0 )
	elseif f9_arg2 == f9_arg0.maxRank - 1 then
		f9_arg0.LeftCap:SetAlpha( 0 )
		f9_arg0.RightCap:SetAlpha( 0.6 )
	else
		f9_arg0.LeftCap:SetAlpha( 0 )
		f9_arg0.RightCap:SetAlpha( 0 )
	end
end

local f0_local4 = function ( f8_arg0 )
	local f8_local0 = f0_local0 + f8_arg0._topHighlightHeight
	local f8_local1 = f0_local0 + f8_arg0._bottomHighlightHeight
	local f8_local2 = f0_local0
	local f8_local3 = f0_local0 - 1
	local f8_local4 = f0_local0 + 2
	f8_arg0.Border:SetAnchorsAndPosition( 0, 0, 0, 0, -f8_local2, f8_local2, -f8_local0, f8_local1 )
	f8_arg0.LeftCap:SetAnchorsAndPosition( 0, 1, 0, 0, -f8_local3, -(f8_local3 + 1), -f8_local0, f8_local1 )
	f8_arg0.RightCap:SetAnchorsAndPosition( 1, 0, 0, 0, f8_local3, f8_local3 + 1, -f8_local0, f8_local1 )
	f8_arg0.HighlightCapMask:SetAnchorsAndPosition( 0, 0, 0, 0, -f8_local4, f8_local4, -f8_local0, f8_local1 )
end

local f0_local5 = function ( f7_arg0 )
	local f7_local0, f7_local1, f7_local2, f7_local3 = f7_arg0:getLocalRect()
	f7_arg0._widgetWidth = f7_local2 - f7_local0
	f7_arg0._widgetHeight = f7_local3 - f7_local1
	f7_arg0._slotWidth = f7_arg0._widgetWidth / f7_arg0.maxRank
	local f7_local4, f7_local5, f7_local6, f7_local7 = f7_arg0.TopHighlight:getLocalRect()
	f7_arg0._topHighlightWidth = f7_local6 - f7_local4
	f7_arg0._topHighlightHeight = f7_local7 - f7_local5
	local f7_local8, f7_local9, f7_local10, f7_local11 = f7_arg0.BottomHighlight:getLocalRect()
	f7_arg0._bottomHighlightWidth = f7_local10 - f7_local8
	f7_arg0._bottomHighlightHeight = f7_local11 - f7_local9
end

local f0_local6 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.maxRank = StringTable.BFHCAIIDA( CSV.progressionItems.GetFile() )
	f2_arg0.SetFocusedRankSlot = f0_local0
	f2_arg0.SetRankProgressionSlot = f0_local0
	f2_arg0.SetBorderHighlightPosition = f0_local0
	f2_arg0.SetBorderPosition = f0_local0
	f2_arg0.CacheDimensions = f0_local0
	f2_arg0.Mask:SetAlpha( 1 )
	f2_arg0.CurRank:SetMask( f2_arg0.Mask )
	f2_arg0.CurProgress:SetMask( f2_arg0.Mask )
	f2_arg0.BG:SetMask( f2_arg0.Mask )
	f2_arg0.HighlightCapMask:SetAlpha( 1 )
	f2_arg0.TopHighlight:SetMask( f2_arg0.HighlightCapMask )
	f2_arg0.BottomHighlight:SetMask( f2_arg0.HighlightCapMask )
	f2_arg0.EmptyFocusable:addEventHandler( "mouseenter", function ( f6_arg0, f6_arg1 )
		f6_arg0._mouseOver = true
	end )
	f2_arg0.EmptyFocusable:addEventHandler( "mouseleave", function ( f5_arg0, f5_arg1 )
		f5_arg0._mouseOver = false
	end )
	f2_arg0.EmptyFocusable:addEventHandler( "mousemove", function ( f4_arg0, f4_arg1 )
		if f4_arg0._mouseOver then
			local f4_local0, f4_local1 = LUI.WebViewManager.GetMousePositionByEvent( f2_arg0, f4_arg0, f4_arg1, false )
			f2_arg0._focusedSquare = math.floor( f4_local0 / f4_arg0:getWidth() / _1080p / 55 )
		end
	end )
	f2_arg0.EmptyFocusable:addEventHandler( "mouseup", function ( f3_arg0, f3_arg1 )
		if f2_arg0._focusedSquare then
			f2_arg0:dispatchEventToRoot( {
				name = "update_display",
				index = f2_arg0._focusedSquare,
				[1] = previousfocus
			} )
		end
	end )
end

function RankProgressionSlot( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1100 * _1080p, 0, 17 * _1080p )
	self.id = "RankProgressionSlot"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local BG = nil
	
	BG = LUI.UIImage.new()
	BG.id = "BG"
	BG:SetRGBFromTable( SWATCHES.WZGlobalSwatches.WZBackground, 0 )
	BG:SetAlpha( 0.7, 0 )
	BG:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1100, 0, _1080p * 17 )
	self:addElement( BG )
	self.BG = BG
	
	local CurProgress = nil
	
	CurProgress = LUI.UIImage.new()
	CurProgress.id = "CurProgress"
	CurProgress:SetRGBFromTable( SWATCHES.CH2.WZGenericButtonLine, 0 )
	CurProgress:SetAlpha( 0.75, 0 )
	CurProgress:SetAnchorsAndPosition( 0, 0, 0, 0, 0, _1080p * -712, 0, 0 )
	self:addElement( CurProgress )
	self.CurProgress = CurProgress
	
	local CurRank = nil
	
	CurRank = LUI.UIImage.new()
	CurRank.id = "CurRank"
	CurRank:SetRGBFromTable( SWATCHES.Tracer.yellow, 0 )
	CurRank:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 95, 0, _1080p * 17 )
	self:addElement( CurRank )
	self.CurRank = CurRank
	
	local Mask = nil
	
	Mask = LUI.UIImage.new()
	Mask.id = "Mask"
	Mask:SetAlpha( 0, 0 )
	Mask:setImage( RegisterMaterial( "progression_slots" ), 0 )
	self:addElement( Mask )
	self.Mask = Mask
	
	local Border = nil
	
	Border = LUI.UIImage.new()
	Border.id = "Border"
	Border:SetRGBFromTable( SWATCHES.WZGlobalSwatches.WZLineSeperator, 0 )
	Border:SetAlpha( 0.3, 0 )
	Border:setImage( RegisterMaterial( "ui_mp_wz_border_square" ), 0 )
	Border:Setup3SliceHorizontalImage( _1080p * 6, 0.3 )
	Border:SetAnchorsAndPosition( 0, 0, 0, 0, _1080p * -4, _1080p * 4, _1080p * -4, _1080p * 4 )
	self:addElement( Border )
	self.Border = Border
	
	local BottomHighlight = nil
	
	BottomHighlight = LUI.UIImage.new()
	BottomHighlight.id = "BottomHighlight"
	BottomHighlight:SetRGBFromTable( SWATCHES.Tracer.yellow, 0 )
	BottomHighlight:setImage( RegisterMaterial( "widg_gradient_center_out" ), 0 )
	BottomHighlight:Setup3SliceHorizontalImage( _1080p * 15, 0.1 )
	BottomHighlight:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 100, _1080p * 20, _1080p * 21 )
	self:addElement( BottomHighlight )
	self.BottomHighlight = BottomHighlight
	
	local TopHighlight = nil
	
	TopHighlight = LUI.UIImage.new()
	TopHighlight.id = "TopHighlight"
	TopHighlight:SetRGBFromTable( SWATCHES.Tracer.yellow, 0 )
	TopHighlight:setImage( RegisterMaterial( "widg_gradient_center_out" ), 0 )
	TopHighlight:Setup3SliceHorizontalImage( _1080p * 15, 0.1 )
	TopHighlight:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 100, _1080p * -4, _1080p * -3 )
	self:addElement( TopHighlight )
	self.TopHighlight = TopHighlight
	
	local HighlightCapMask = nil
	
	HighlightCapMask = LUI.UIImage.new()
	HighlightCapMask.id = "HighlightCapMask"
	HighlightCapMask:SetAlpha( 0, 0 )
	HighlightCapMask:setImage( RegisterMaterial( "ui_mp_wz_mask_horizontal_edges" ), 0 )
	HighlightCapMask:Setup9SliceImage( _1080p * 3, _1080p * 1, 0.5, 0.1 )
	HighlightCapMask:SetAnchorsAndPosition( 0, 0, 0, 0, _1080p * -5, _1080p * 5, _1080p * -4, _1080p * 4 )
	self:addElement( HighlightCapMask )
	self.HighlightCapMask = HighlightCapMask
	
	local LeftCap = nil
	
	LeftCap = LUI.UIImage.new()
	LeftCap.id = "LeftCap"
	LeftCap:SetRGBFromTable( SWATCHES.Tracer.yellow, 0 )
	LeftCap:SetAlpha( 0, 0 )
	LeftCap:SetAnchorsAndPosition( 0, 1, 0, 0, _1080p * -4, _1080p * -3, _1080p * -4, _1080p * 4 )
	self:addElement( LeftCap )
	self.LeftCap = LeftCap
	
	local RightCap = nil
	
	RightCap = LUI.UIImage.new()
	RightCap.id = "RightCap"
	RightCap:SetRGBFromTable( SWATCHES.Tracer.yellow, 0 )
	RightCap:SetAlpha( 0, 0 )
	RightCap:SetAnchorsAndPosition( 1, 0, 0, 0, _1080p * 3, _1080p * 4, _1080p * -4, _1080p * 4 )
	self:addElement( RightCap )
	self.RightCap = RightCap
	
	local EmptyFocusable = nil
	
	EmptyFocusable = MenuBuilder.BuildRegisteredType( "EmptyFocusable", {
		controllerIndex = f1_local1
	} )
	EmptyFocusable.id = "EmptyFocusable"
	EmptyFocusable:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
	self:addElement( EmptyFocusable )
	self.EmptyFocusable = EmptyFocusable
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "RankProgressionSlot", RankProgressionSlot )
LockTable( _M )
