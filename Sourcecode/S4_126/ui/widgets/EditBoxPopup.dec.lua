-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
module( ..., package.seeall )
require( "ui.widgets.PopupFrame" )
require( "ui.widgets.GenericButton" )
require( "ui.widgets.GenericEditBoxButton" )
local f0_local0 = function ( f12_arg0, f12_arg1 )
	local f12_local0 = f12_arg0:getParent()
	if not f12_local0.AcceptCallbackFunc( f12_arg0, f12_arg1 ) then
		LUI.FlowManager.RequestLeaveMenuByName( "EditBoxPopup", true )
	end
end

local f0_local1 = function ( f11_arg0, f11_arg1 )
	local f11_local0 = f11_arg0.GenericEditBox
	local f11_local1
	if not f11_arg1 then
		f11_local1 = f11_arg1
	else
		f11_local1 = f11_local0:GetText()
	end
	local f11_local2 = f11_local0._isError
	local f11_local3 = false
	local f11_local4 = false
	if not f11_arg0._isClearable then
		f11_local3 = f11_local0.Text.isDefault
		f11_local4 = #f11_local1 == 0
	end
	local f11_local5
	if not f11_local2 then
		f11_local5 = f11_local2
	elseif not f11_local3 then
		f11_local5 = f11_local3
	else
		f11_local5 = f11_local4
	end
	f11_arg0.AcceptButton:SetButtonDisabled( f11_local5 )
end

local f0_local2 = function ( f4_arg0, f4_arg1, f4_arg2 )
	f4_arg0.AcceptCallbackFunc = f4_arg2.acceptCallbackFunc
	f4_arg0.PopupFrame.Stripe.HeaderText:setText( f4_arg2.headerText )
	f4_arg0.AcceptButton:SetButtonDisabled( true )
	f4_arg0._isClearable = f4_arg2.isClearable
	f4_arg0.GenericEditBox:SetupGenericEditBoxButton( f4_arg0, {
		useAutoAlign = true,
		name = f4_arg2.name or f4_arg2.headerText,
		defaultValue = f4_arg2.hintText,
		maxInputStringLength = f4_arg2.maxLength,
		isAscii = f4_arg2.isAscii
	} )
	f4_arg0.GenericEditBox:SetIsTypingCallback( function ( f10_arg0, f10_arg1 )
		f4_arg0( f4_arg0, f10_arg1 )
	end )
	f4_arg0.GenericEditBox:SetTextEditCompleteCallback( function ( f9_arg0, f9_arg1 )
		f4_arg0( f4_arg0, f9_arg1.text )
		if f4_arg0._isClearable and f4_arg0.GenericEditBox.Text.isDefault then
			f4_arg0.GenericEditBox:SetText( "" )
		end
	end )
	if f4_arg0._isClearable then
		f4_arg0.GenericEditBox:SetTextEditButtonActionCallback( function ()
			f4_arg0( f4_arg0 )
		end )
	end
	f4_arg0.AcceptButton:addEventHandler( "button_action", function ( f7_arg0, f7_arg1 )
		f4_arg0( f7_arg0, f7_arg1.controller )
	end )
	f4_arg0.PopupFrame:InstantiatePopup( f4_arg1, f4_arg2 )
	f4_arg0:addEventHandler( "menu_create", function ( f5_arg0, f5_arg1 )
		local f5_local0 = f5_arg0:Wait( 1 )
		f5_local0.onComplete = function ()
			f5_arg0.GenericEditBox:GainFocus( {
				shouldPlayButtonSound = false,
				type = LUI.IsLastInputGamepad and FocusType.Gamepad or FocusType.MouseOver
			} )
			if not LUI.IsLastInputGamepad( f5_arg0.controller ) or not LUI.INPUT_TYPE.gamepad then
				local f6_local0 = LUI.IsLastInputKeyboardNavigation( f5_arg0.controller )
				local f6_local1 = LUI.INPUT_TYPE.keyboardNavigation
				local f6_local2 = LUI.INPUT_TYPE.keyboardMouse
			end
			local f6_local3 = f6_local0 and f6_local1 or f6_local2
			f5_arg0.GenericEditBox:processEvent( {
				name = "button_action",
				controller = f5_arg0.controller,
				mouse = f6_local3 == LUI.INPUT_TYPE.keyboardMouse,
				keyboard = f6_local3 == LUI.INPUT_TYPE.keyboardNavigation
			} )
		end
		
	end )
end

function EditBoxPopup( menu, controller )
	local self = LUI.UIVerticalNavigator.new()
	self.id = "EditBoxPopup"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	self.HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	self.HelperBar.id = "HelperBar"
	self.HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
	self.HelperBar:setPriority( 10 )
	self:addElement( self.HelperBar )
	local f1_local2 = self
	local PopupFrame = nil
	
	PopupFrame = MenuBuilder.BuildRegisteredType( "PopupFrame", {
		controllerIndex = f1_local1
	} )
	PopupFrame.id = "PopupFrame"
	ACTIONS.ScaleFullscreen( PopupFrame )
	PopupFrame.Stripe:SetTop( _1080p * -243, 0 )
	PopupFrame.Stripe:SetBottom( _1080p * 243, 0 )
	PopupFrame.Stripe.HeaderText:SetLeft( _1080p * -750, 0 )
	PopupFrame.Stripe.HeaderText:SetRight( _1080p * 750, 0 )
	PopupFrame.Stripe.HeaderText:SetAlignment( LUI.Alignment.Center )
	PopupFrame:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -960, _1080p * 960, _1080p * -540, _1080p * 540 )
	self:addElement( PopupFrame )
	self.PopupFrame = PopupFrame
	
	local AcceptButton = nil
	
	AcceptButton = MenuBuilder.BuildRegisteredType( "GenericButton", {
		controllerIndex = f1_local1
	} )
	AcceptButton.id = "AcceptButton"
	AcceptButton.Text:SetLeft( _1080p * 35, 0 )
	AcceptButton.Text:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( "LUA_MENU/CHURN_CONFIRM_TEXT_0" ) ), 0 )
	AcceptButton.Text:SetAlignment( LUI.Alignment.Center )
	AcceptButton:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, _1080p * 760, _1080p * 1160, _1080p * 63, _1080p * 119 )
	self:addElement( AcceptButton )
	self.AcceptButton = AcceptButton
	
	local CancelButton = nil
	
	CancelButton = MenuBuilder.BuildRegisteredType( "GenericButton", {
		controllerIndex = f1_local1
	} )
	CancelButton.id = "CancelButton"
	CancelButton.Text:SetLeft( _1080p * 35, 0 )
	CancelButton.Text:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( "MENU/CANCEL" ) ), 0 )
	CancelButton.Text:SetAlignment( LUI.Alignment.Center )
	CancelButton:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, _1080p * 760, _1080p * 1160, _1080p * 135, _1080p * 191 )
	self:addElement( CancelButton )
	self.CancelButton = CancelButton
	
	local GenericEditBox = nil
	
	GenericEditBox = MenuBuilder.BuildRegisteredType( "GenericEditBoxButton", {
		controllerIndex = f1_local1
	} )
	GenericEditBox.id = "GenericEditBox"
	GenericEditBox.Text:SetTop( _1080p * 11, 0 )
	GenericEditBox.Text:SetBottom( _1080p * -11, 0 )
	GenericEditBox.Text:setText( "", 0 )
	GenericEditBox.Text:SetAlignment( LUI.Alignment.Left )
	GenericEditBox:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, _1080p * 660, _1080p * 1260, _1080p * -86, _1080p * -38 )
	self:addElement( GenericEditBox )
	self.GenericEditBox = GenericEditBox
	
	CancelButton:addEventHandler( "button_action", function ( f3_arg0, f3_arg1 )
		local f3_local0 = f3_arg1.controller or menu
		ACTIONS.LeaveMenu( menu, true )
	end )
	self.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_secondary",
		helper_text = Engine[0xED84C33EC5F01EA]( "MENU/BACK" )
	} )
	if not self.bindButton then
		local f1_local7 = LUI.UIBindButton.new()
		f1_local7.id = "selfBindButton"
		self:addElement( f1_local7 )
		self.bindButton = f1_local7
	end
	self.bindButton:addEventHandler( "button_secondary", function ( f2_arg0, f2_arg1 )
		local f2_local0 = f2_arg1.controller or menu
		ACTIONS.LeaveMenu( menu, true )
	end )
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "EditBoxPopup", EditBoxPopup )
LockTable( _M )
