-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
LUI.CodcasterAnnouncementsManager = LUI.Class( LUI.UIElement )
local f0_local0 = function ( f10_arg0, f10_arg1, f10_arg2 )
	f10_arg0.id = "CodcasterAnnouncementsManager"
	f10_arg0.queuedAnnouncement = nil
	f10_arg0.displayedAnnouncement = nil
	f10_arg0.displayAvailable = true
	f10_arg0.ShowAnnouncementCallback = f10_arg1
	f10_arg0.HideAnnouncementCallback = f10_arg2
end

local f0_local1 = function ( f9_arg0, f9_arg1, f9_arg2, f9_arg3 )
	if f9_arg1 == -1 then
		return 
	end
	local f9_local0 = CodcasterAnnouncement.new( f9_arg1, f9_arg2, f9_arg3 )
	if f9_arg3 then
		f9_arg0.queuedAnnouncement = f9_local0
		return 
	elseif f9_local0.announcementID == -1 then
		error( "LUI Error: invalid codcaster announcement ID " .. f9_local0.announcementId .. " eventValue " .. f9_arg1 )
		return 
	elseif not f9_arg0.displayedAnnouncement then
		if not f9_arg0.queuedAnnouncement then
			f9_arg0.displayedAnnouncement = f9_local0
		elseif f9_local0.priority <= f9_arg0.queuedAnnouncement.priority then
			f9_arg0.displayedAnnouncement = f9_arg0.queuedAnnouncement
			f9_arg0.queuedAnnouncement = f9_local0
		else
			f9_arg0.displayedAnnouncement = f9_local0
			f9_arg0.queuedAnnouncement = nil
		end
	elseif not f9_arg0.queuedAnnouncement or f9_arg0.queuedAnnouncement.priority < f9_local0.priority then
		f9_arg0.queuedAnnouncement = f9_local0
	else
		return 
	end
	f9_local0 = nil
	if f9_arg0.displayAvailable then
		f9_arg0.displayAvailable = false
		f9_arg0:ShowAnnouncement( f9_arg0.displayedAnnouncement )
	end
end

local f0_local2 = function ( f8_arg0, f8_arg1, f8_arg2 )
	return DataModel[0x240BC8B7F2A32FC]( f8_arg1.omnvar, f8_arg2 )
end

local f0_local3 = function ( f3_arg0, f3_arg1 )
	f3_arg0.ShowAnnouncementCallback( f3_arg1 )
	if f3_arg1.lines == 2 then
		f3_arg0:QueueAnnouncement( f3_arg1.announcementID, f3_arg1.controllerIndex, true )
	end
	if f3_arg1.displayTime ~= 0 then
		local f3_local0 = f3_arg0:Wait( f3_arg1.displayTime )
		f3_local0.onComplete = function ()
			local f6_local0 = function ()
				f6_local0:UpdateAnnouncements()
			end
			
			if not f3_arg0.HideAnnouncementCallback( f6_local0, f3_arg0 ) then
				f6_local0()
			end
		end
		
	elseif f3_arg1.endEvent.omnvar then
		f3_arg0:SubscribeToModel( f0_local0( f3_arg0, f3_arg1.endEvent, f3_arg1.controllerIndex ), function ( f4_arg0 )
			if DataModel[0x614D394F6F9A18D]( f4_arg0 ) == f3_arg0.endEvent.value then
				local f4_local0 = function ()
					f4_arg0:UpdateAnnouncements()
					f4_arg0:UnsubscribeFromModel( f4_arg0 )
				end
				
				if not f3_arg0.HideAnnouncementCallback( f4_local0, f3_arg0 ) then
					f4_local0()
				end
			end
		end, false )
	end
end

local f0_local4 = function ( f2_arg0 )
	if f2_arg0.queuedAnnouncement ~= nil then
		f2_arg0.displayedAnnouncement = f2_arg0.queuedAnnouncement
		f2_arg0.queuedAnnouncement = nil
		f2_arg0:ShowAnnouncement( f2_arg0.displayedAnnouncement )
	else
		f2_arg0.displayAvailable = true
		f2_arg0.displayedAnnouncement = nil
	end
end

LUI.CodcasterAnnouncementsManager = function ()
	local self = LUI.UIElement.new()
	self.init = f0_local0
	self.QueueAnnouncement = f0_local0
	self.ShowAnnouncement = f0_local0
	self.UpdateAnnouncements = f0_local0
	return self
end

