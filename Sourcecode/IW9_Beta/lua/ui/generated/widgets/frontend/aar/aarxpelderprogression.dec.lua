-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
module( ..., package.seeall )
local f0_local0 = 1500
local f0_local1 = 500
local f0_local2 = function ( f17_arg0 )
	AAR.ClearAnimationTimer( f17_arg0 )
	if f17_arg0.XPCountDownTimer then
		f17_arg0:RemoveElement( f17_arg0.XPCountDownTimer )
		f17_arg0.XPCountDownTimer:closeTree()
		f17_arg0.XPCountDownTimer = nil
		f17_arg0:deregisterEventHandler( "AAR_ELDER_NUMBER_SCROLL" )
	end
end

local f0_local3 = function ( f16_arg0, f16_arg1, f16_arg2 )
	f16_arg0.beforeMatchXP = f16_arg1
	f16_arg0.afterMatchXP = f16_arg2
	f16_arg0.beforeMatchRank = PROGRESSION.GetElderRankByXP( f16_arg1 )
	f16_arg0.afterMatchRank = PROGRESSION.GetElderRankByXP( f16_arg2 )
	f16_arg0.workingXP = f16_arg0.beforeMatchXP
	f16_arg0.workingRank = f16_arg0.beforeMatchRank
	f16_arg0.workingXPToEarn = f16_arg0.afterMatchXP - f16_arg0.beforeMatchXP
	f16_arg0.maxAtStart = f16_arg0.beforeMatchRank == PROGRESSION.GetMaxElderRank()
	f16_arg0.grayGoToPercentage = 0
	local f16_local0 = 1
	if not f16_arg0.maxAtStart then
		local f16_local1 = PROGRESSION.GetSeasonRankMinXP( f16_arg0.beforeMatchRank )
		local f16_local2 = PROGRESSION.GetSeasonRankMinXP( f16_arg0.beforeMatchRank + 1 )
		f16_local0 = LUI.clamp( (f16_arg1 - f16_local1) / (f16_local2 - f16_local1), 0, 1 )
		if f16_arg2 <= f16_local2 then
			f16_arg0.grayGoToPercentage = (f16_arg2 - f16_local1) / (f16_local2 - f16_local1) - (f16_arg1 - f16_local1) / (f16_local2 - f16_local1)
		else
			f16_arg0.grayGoToPercentage = 1
		end
	end
	f16_arg0.GreenRadialProgress:SetProgress( f16_local0, 0 )
	f16_arg0.GrayRadialProgress:SetProgress( 0, 0 )
	f16_arg0.GrayRadialProgress:SetZRotation( f16_local0 * 360 * -1 )
	f16_arg0.RankNumberText:setText( tostring( f16_arg0.beforeMatchRank ) )
end

local f0_local4 = function ( f8_arg0 )
	AAR.StartAnimationTimer( f8_arg0, "AAR_ELDER_PROGRESSION_TIMER" )
	if 0 < f8_arg0.grayGoToPercentage then
		local f8_local0 = f8_arg0.grayGoToPercentage
		local f8_local1 = f8_arg0.workingXPToEarn
		AAR.AddAnimationWithTime( f8_arg0, function ( f15_arg0 )
			ACTIONS.AnimateSequence( f15_arg0, "SlamXPText" )
			f15_arg0.XPGainText:setText( Engine[0xED84C33EC5F01EA]( 0xBEA477913C3A328, tostring( f8_arg0 ) ) )
			f15_arg0.GrayRadialProgress:SetProgress( f8_arg0, f8_arg0 * f8_arg0 )
		end, 1000 )
	end
	if f8_arg0.workingXP < f8_arg0.afterMatchXP then
		
	else
		
	end
	AAR.AddAnimationWithTime( f8_arg0, function ( f9_arg0 )
		f9_arg0:ClearTimers()
		f9_arg0.ProgressionFinished = true
		f9_arg0:dispatchEventToCurrentMenu( {
			name = AAR.PARADE_PROGRESS_DONE
		} )
	end, 1500 )
end

function PostLoadFunc( f7_arg0, f7_arg1 )
	f7_arg0._controllerIndex = f7_arg1
	f7_arg0.ProgressionFinished = false
	f7_arg0.Setup = f0_local0
	f7_arg0.StartCelebration = f0_local0
	f7_arg0.ClearTimers = f0_local0
end

States = {
	[0xAD14C6E7156B923] = function ( f2_arg0, f2_arg1 )
		local f2_local0 = function ( f6_arg0, f6_arg1 )
			
		end
		
		f2_arg0.BackgroundCircle:RegisterAnimationSequence( "SlamRankUp", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			},
			{
				value = 1,
				duration = -58,
				property = TWEEN_PROPERTY.Alpha
			},
			{
				value = 0,
				duration = 1430,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		f2_arg0.XPGainText:RegisterAnimationSequence( "SlamRankUp", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		f2_arg0.RankUpdateText:RegisterAnimationSequence( "SlamRankUp", {
			{
				value = 5,
				duration = 0,
				property = TWEEN_PROPERTY.Scale
			},
			{
				value = 1,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			},
			{
				value = 2,
				duration = 60,
				property = TWEEN_PROPERTY.Scale
			}
		} )
		f2_arg0.RankImage:RegisterAnimationSequence( "SlamRankUp", {
			{
				value = 1,
				duration = 0,
				property = TWEEN_PROPERTY.Scale
			},
			{
				value = 0,
				duration = 60,
				property = TWEEN_PROPERTY.Scale
			}
		} )
		local f2_local1 = function ( f5_arg0, f5_arg1 )
			f5_arg0.BackgroundCircle:AnimateSequence( "SlamRankUp" )
			f5_arg0.XPGainText:AnimateSequence( "SlamRankUp" )
			f5_arg0.RankUpdateText:AnimateSequence( "SlamRankUp" )
			f5_arg0.RankImage:AnimateSequence( "SlamRankUp" )
		end
		
		f2_arg0.XPGainText:RegisterAnimationSequence( "SlamXPText", {
			{
				value = 5,
				duration = 0,
				property = TWEEN_PROPERTY.Scale
			},
			{
				value = 1,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			},
			{
				value = 2,
				duration = 160,
				property = TWEEN_PROPERTY.Scale
			}
		} )
		local f2_local2 = function ( f4_arg0, f4_arg1 )
			f4_arg0.XPGainText:AnimateSequence( "SlamXPText" )
		end
		
		f2_arg0.RankImage:RegisterAnimationSequence( "SlamRankUpWithoutText", {
			{
				value = 1,
				duration = 0,
				property = TWEEN_PROPERTY.Scale
			},
			{
				value = 0,
				duration = 60,
				property = TWEEN_PROPERTY.Scale
			}
		} )
		f2_arg0._sequences = {
			DefaultSequence = f2_local0,
			SlamRankUp = f2_local1,
			SlamXPText = f2_local2,
			SlamRankUpWithoutText = function ( f3_arg0, f3_arg1 )
				f3_arg0.RankImage:AnimateSequence( "SlamRankUpWithoutText" )
			end
		}
		f2_arg0._sequenceLengths = {
			SlamRankUp = 1500,
			SlamXPText = 160,
			DefaultSequence = 0,
			SlamRankUpWithoutText = 60
		}
	end
}
function AARXPElderProgression( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 1080 * _1080p )
	self.id = "AARXPElderProgression"
	self.__states = States
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local Background = nil
	
	Background = LUI.UIImage.new()
	Background.id = "Background"
	Background:SetRGBFromInt( 2301470, 0 )
	Background:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1920, 0, _1080p * 1080 )
	self:addElement( Background )
	self.Background = Background
	
	local BackgroundCircle = nil
	
	BackgroundCircle = LUI.UIImage.new()
	BackgroundCircle.id = "BackgroundCircle"
	BackgroundCircle:SetAlpha( 0, 0 )
	BackgroundCircle:setImage( RegisterMaterial( 0x7039A3BC8382658 ), 0 )
	BackgroundCircle:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 545, _1080p * 1375, _1080p * 100, _1080p * 930 )
	self:addElement( BackgroundCircle )
	self.BackgroundCircle = BackgroundCircle
	
	local GrayRadialProgress = nil
	
	GrayRadialProgress = MenuBuilder.BuildRegisteredType( "UIRadialProgressBar", {
		segmentMaterial = "global_progression_fill_segment",
		snapToMultiplesOfAngle = 0,
		maskMaterial = "global_progression_fill_mask",
		segmentCount = 2,
		controllerIndex = f1_local1
	} )
	GrayRadialProgress.id = "GrayRadialProgress"
	GrayRadialProgress:SetRGBFromInt( 4077885, 0 )
	GrayRadialProgress:SetProgress( 0 )
	GrayRadialProgress:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 545, _1080p * 1375, _1080p * 100, _1080p * 930 )
	self:addElement( GrayRadialProgress )
	self.GrayRadialProgress = GrayRadialProgress
	
	local GreenRadialProgress = nil
	
	GreenRadialProgress = MenuBuilder.BuildRegisteredType( "UIRadialProgressBar", {
		segmentMaterial = "global_progression_fill_segment",
		snapToMultiplesOfAngle = 0,
		maskMaterial = "global_progression_fill_mask",
		segmentCount = 2,
		controllerIndex = f1_local1
	} )
	GreenRadialProgress.id = "GreenRadialProgress"
	GreenRadialProgress:SetRGBFromInt( 766987, 0 )
	GreenRadialProgress:SetProgress( 0 )
	GreenRadialProgress:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 545, _1080p * 1375, _1080p * 100, _1080p * 930 )
	self:addElement( GreenRadialProgress )
	self.GreenRadialProgress = GreenRadialProgress
	
	local XPGainText = nil
	
	XPGainText = LUI.UIStyledText.new()
	XPGainText.id = "XPGainText"
	XPGainText:SetAlpha( 0, 0 )
	XPGainText:SetScale( 2, 0 )
	XPGainText:setText( "", 0 )
	XPGainText:SetFont( FONTS.GetFont( FONTS.PrimaryRegular.File ) )
	XPGainText:SetFontSize( 60 * _PT )
	XPGainText:SetMinFontSize( 60 * _PT )
	XPGainText:SetWordWrap( false )
	XPGainText:SetAlignment( LUI.Alignment.Center )
	XPGainText:SetVerticalAlignment( LUI.Alignment.Middle )
	XPGainText:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 860, _1080p * 1060, _1080p * 912.5, _1080p * 972.5 )
	self:addElement( XPGainText )
	self.XPGainText = XPGainText
	
	local RankUpdateText = nil
	
	RankUpdateText = LUI.UIStyledText.new()
	RankUpdateText.id = "RankUpdateText"
	RankUpdateText:SetAlpha( 0, 0 )
	RankUpdateText:SetScale( 2, 0 )
	RankUpdateText:setText( Engine[0xED84C33EC5F01EA]( 0xA53B6E588ABF7E7 ), 0 )
	RankUpdateText:SetFont( FONTS.GetFont( FONTS.PrimaryRegular.File ) )
	RankUpdateText:SetFontSize( 60 * _PT )
	RankUpdateText:SetMinFontSize( 60 * _PT )
	RankUpdateText:SetWordWrap( false )
	RankUpdateText:SetAlignment( LUI.Alignment.Center )
	RankUpdateText:SetVerticalAlignment( LUI.Alignment.Middle )
	RankUpdateText:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 860, _1080p * 1060, _1080p * 912.5, _1080p * 972.5 )
	self:addElement( RankUpdateText )
	self.RankUpdateText = RankUpdateText
	
	local GhostRankImage = nil
	
	GhostRankImage = LUI.UIImage.new()
	GhostRankImage.id = "GhostRankImage"
	GhostRankImage:SetAlpha( 0.2, 0 )
	GhostRankImage:setImage( RegisterMaterial( 0xF64468F5E7FCEFD ), 0 )
	GhostRankImage:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 610, _1080p * 1310, _1080p * 139, _1080p * 839 )
	self:addElement( GhostRankImage )
	self.GhostRankImage = GhostRankImage
	
	local RankImage = nil
	
	RankImage = LUI.UIImage.new()
	RankImage.id = "RankImage"
	RankImage:setImage( RegisterMaterial( 0xF64468F5E7FCEFD ), 0 )
	RankImage:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 726, _1080p * 1194, _1080p * 192.3, _1080p * 625.3 )
	self:addElement( RankImage )
	self.RankImage = RankImage
	
	local RankLabelText = nil
	
	RankLabelText = LUI.UIStyledText.new()
	RankLabelText.id = "RankLabelText"
	RankLabelText:setText( Engine[0xED84C33EC5F01EA]( 0x4F019A0EA12100E ), 0 )
	RankLabelText:SetFont( FONTS.GetFont( FONTS.PrimaryRegular.File ) )
	RankLabelText:SetFontSize( 28 * _PT )
	RankLabelText:SetMinFontSize( 28 * _PT )
	RankLabelText:SetWordWrap( false )
	RankLabelText:SetAlignment( LUI.Alignment.Center )
	RankLabelText:SetVerticalAlignment( LUI.Alignment.Middle )
	RankLabelText:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 935.5, _1080p * 990.5, _1080p * 644.36, _1080p * 672.36 )
	self:addElement( RankLabelText )
	self.RankLabelText = RankLabelText
	
	local RankNumberText = nil
	
	RankNumberText = LUI.UIStyledText.new()
	RankNumberText.id = "RankNumberText"
	RankNumberText:SetScale( 1, 0 )
	RankNumberText:setText( "01", 0 )
	RankNumberText:SetFont( FONTS.GetFont( FONTS.PrimaryRegular.File ) )
	RankNumberText:SetFontSize( 60 * _PT )
	RankNumberText:SetMinFontSize( 60 * _PT )
	RankNumberText:SetWordWrap( false )
	RankNumberText:SetAlignment( LUI.Alignment.Center )
	RankNumberText:SetVerticalAlignment( LUI.Alignment.Middle )
	RankNumberText:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 913, _1080p * 1013, _1080p * 704.22, _1080p * 764.22 )
	self:addElement( RankNumberText )
	self.RankNumberText = RankNumberText
	
	PostLoadFunc( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "AARXPElderProgression", AARXPElderProgression )
LockTable( _M )
