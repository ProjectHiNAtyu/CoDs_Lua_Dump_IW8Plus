-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
StoreLayoutUtils = StoreLayoutUtils or {}
StoreLayoutUtils.TRANSITION_DURATIONS = {
	TRANSITION_DURATION = 200,
	SNAP = 0
}
StoreLayoutUtils.CustomBundles = {
	MyBundles = {
		[0x725EE6B9383E87E] = true,
		name = Engine[0xED84C33EC5F01EA]( 0x769F50E03C14D30 ),
		onClickCallback = function ( f54_arg0 )
			LUI.FlowManager.RequestAddMenu( "MyBundleSelect", false, f54_arg0, false )
			Engine[0xC4146BA76D0F982]( SOUND_SETS.default.action )
		end
	},
	Search = {
		[0x725EE6B9383E87E] = true,
		name = Engine[0xED84C33EC5F01EA]( 0x5CC7EF8E79C3D89 ),
		onClickCallback = function ( f53_arg0 )
			
		end
	},
	Wishlist = {
		[0x725EE6B9383E87E] = true,
		name = Engine[0xED84C33EC5F01EA]( 0x25474FAA372B082 ),
		onClickCallback = function ( f52_arg0 )
			LUI.FlowManager.RequestAddMenu( "WishlistSelect", false, f52_arg0, false )
		end
	},
	Creator = {
		[0x725EE6B9383E87E] = true,
		name = Engine[0xED84C33EC5F01EA]( 0x513BA2FB1EDCEB7 ),
		onClickCallback = function ( f51_arg0 )
			
		end
	},
	BattlePass = {
		[0x725EE6B9383E87E] = true,
		name = Engine[0xED84C33EC5F01EA]( 0x513BA2FB1EDCEB7 ),
		onClickCallback = function ( f50_arg0 )
			LUI.FlowManager.RequestAddMenu( "BattlePassPurchasePopup", true, f50_arg0, false, {
				fromStore = true
			}, true )
		end
	},
	BlackCell = {
		[0x725EE6B9383E87E] = true,
		name = Engine[0xED84C33EC5F01EA]( 0x513BA2FB1EDCEB7 ),
		onClickCallback = function ( f49_arg0 )
			LUI.FlowManager.RequestAddMenu( "BattlePassPurchasePopup", true, f49_arg0, false, {
				fromStore = true
			}, true )
		end
	},
	CDL = {
		[0x725EE6B9383E87E] = true,
		name = Engine[0xED84C33EC5F01EA]( 0xEE5EB3CB49BDA94 ),
		onClickCallback = function ( f48_arg0 )
			LUI.FlowManager.RequestAddMenu( "StoreCDLMenu", false, f48_arg0, false )
		end
	},
	QR = {
		[0x725EE6B9383E87E] = true,
		name = Engine[0xED84C33EC5F01EA]( 0x3928F1ECE535E5F ),
		onClickCallback = function ( f47_arg0 )
			LUI.FlowManager.RequestAddMenu( "CodeConductMore", true, f47_arg0, nil, {
				configCODShop = true
			}, true )
		end
	}
}
StoreLayoutUtils.Row = {}
StoreLayoutUtils.Row.GetButtons = function ( f46_arg0 )
	return f46_arg0._buttons
end

StoreLayoutUtils.Row.AttachBaseFunctions = function ( f35_arg0, f35_arg1, f35_arg2 )
	f35_arg0.PopulateBundles = function ( f45_arg0, f45_arg1, f45_arg2, f45_arg3 )
		StoreLayoutUtils.Row.PopulateBundles( f45_arg0, f45_arg1, f45_arg0.AnchorLeft, f45_arg2, f45_arg3, f35_arg0 )
	end
	
	f35_arg0.GetButton = function ( f44_arg0, f44_arg1 )
		local f44_local0 = StoreLayoutUtils.Row.GetButtons( f44_arg0 )
		return f44_local0[f44_arg1]
	end
	
	f35_arg0.GetButtonForSkuID = function ( f43_arg0, f43_arg1 )
		local f43_local0 = #StoreLayoutUtils.Row.GetButtons( f43_arg0 )
		for f43_local1 = 1, f43_local0, 1 do
			local f43_local4 = f43_arg0:GetButton( f43_local1 )
			if STORE.Bundles.HasSKU( f43_local4:GetBundle(), f43_arg1 ) then
				return f43_local4
			end
		end
		return nil
	end
	
	f35_arg0.GainFocusClosestToWidget = function ( f42_arg0, f42_arg1 )
		local f42_local0, f42_local1 = f42_arg1:GetCenter()
		local f42_local2 = 100000
		local f42_local3 = 1
		for f42_local7, f42_local8 in ipairs( StoreLayoutUtils.Row.GetButtons( f42_arg0 ) ) do
			local f42_local9, f42_local10 = f42_local8:GetCenter()
			local f42_local11 = math.abs( f42_local9 - f42_local0 )
			if f42_local11 < f42_local2 then
				f42_local2 = f42_local11
				f42_local3 = f42_local7
			end
		end
		f42_local4 = f42_arg0:GetButton( f42_local3 )
		f42_local4:processEvent( {
			name = "gain_focus",
			controller = f35_arg0
		} )
		return f42_arg0:GetButton( f42_local3 )
	end
	
	f35_arg0.GainFocus = function ( f41_arg0, f41_arg1, f41_arg2 )
		local f41_local0
		if not f41_arg2 then
			f41_local0 = f41_arg2
		else
			f41_local0 = StoreLayoutUtils.TRANSITION_DURATIONS.TRANSITION_DURATION
		end
		local f41_local1 = #StoreLayoutUtils.Row.GetButtons( f41_arg0 )
		if f41_local1 < f41_arg1 then
			f41_arg1 = 1
		elseif f41_arg1 < 1 then
			f41_arg1 = f41_local1
		end
		local f41_local2 = f41_arg0:GetButton( f41_arg1 )
		f41_local2:processEvent( {
			name = "gain_focus",
			controller = f35_arg0
		} )
		StoreLayoutUtils.Row.AnimateAndGoToButtonIndex( f41_arg0, f35_arg0, f41_arg0._windowSize, f41_arg1, f41_local0 )
	end
	
	f35_arg0.LoseFocus = function ( f40_arg0, f40_arg1 )
		local f40_local0 = StoreLayoutUtils.Row.GetButtons( f40_arg0 )
		f40_local0[f40_arg1]:processEvent( {
			name = "lose_focus"
		} )
	end
	
	f35_arg0.LoseFocusRow = function ( f39_arg0, f39_arg1 )
		if f39_arg0.ToggleArrows then
			f39_arg0:ToggleArrows( false )
		end
		f39_arg0._isSelected = false
	end
	
	f35_arg0.GainFocusRow = function ( f38_arg0, f38_arg1 )
		if f38_arg0.ToggleArrows then
			f38_arg0:ToggleArrows( LUI.IsLastInputKeyboardMouse( f38_arg1 ) )
		end
		f38_arg0._isSelected = true
	end
	
	f35_arg0:addEventHandler( "lose_focus", function ( f37_arg0, f37_arg1 )
		return true
	end )
	f35_arg0.CanInterractWithButton = function ( f36_arg0, f36_arg1 )
		local f36_local0 = f36_arg0._windowSize
		local f36_local1 = f36_arg0._currentHeadIndex
		local f36_local2
		if not (f36_local1 + f36_local0 <= f36_arg1) and not (f36_arg1 < f36_local1) then
			f36_local2 = LUI.IsLastInputMouseNavigation( f35_arg0 )
			if not f36_local2 then
			
			else
				return f36_local2
			end
		end
		f36_local2 = not LUI.IsLastInputMouseNavigation( f35_arg0 )
	end
	
end

StoreLayoutUtils.Row.AnimateBundleButtons = function ( f34_arg0, f34_arg1, f34_arg2, f34_arg3 )
	local f34_local0 = f34_arg0[f34_arg2]:GetAnchorsAndPosition()
	local f34_local1 = f34_local0.right - f34_local0.left
	local f34_local2 = f34_local0.left
	local f34_local3 = f34_arg1:GetAnchorsAndPosition()
	f34_local2 = f34_local2 - f34_local3.left
	for f34_local6, f34_local7 in ipairs( f34_arg0 ) do
		local f34_local8 = f34_local7:GetAnchorsAndPosition()
		local f34_local9 = f34_local8.left
		local f34_local10 = f34_local8.left - f34_local2
		f34_local7:SetLeft( f34_local10, f34_arg3, LUI.EASING.inOutQuadratic )
		f34_local7:SetRight( f34_local10 + f34_local1, f34_arg3, LUI.EASING.inOutQuadratic )
	end
end

StoreLayoutUtils.Row.PopulateBundles = function ( f33_arg0, f33_arg1, f33_arg2, f33_arg3, f33_arg4, f33_arg5 )
	f33_arg0._buttons = {}
	f33_arg0._currentHeadIndex = 1
	local f33_local0 = f33_arg2:GetAnchorsAndPosition()
	f33_local0 = f33_local0.left
	for f33_local4, f33_local5 in ipairs( f33_arg4 ) do
		local f33_local6 = MenuBuilder.BuildRegisteredType( f33_arg5, {
			controllerIndex = f33_arg1
		} )
		f33_local6.id = f33_arg5 .. f33_local4
		f33_local6:SetupBundleButton( f33_arg1, f33_arg3, f33_local4, f33_local5 )
		f33_arg0:addElement( f33_local6 )
		local f33_local7 = f33_local6:GetAnchorsAndPosition()
		local f33_local8 = f33_local7.right - f33_local7.left
		f33_local6:SetLeft( f33_local0 )
		f33_local6:SetRight( f33_local0 + f33_local8 )
		f33_local0 = f33_local0 + f33_local8 + 16
		table.insert( f33_arg0._buttons, f33_local6 )
	end
	StoreLayoutUtils.Row.AnimateAndGoToButtonIndex( f33_arg0, f33_arg1, f33_arg0._windowSize, 1, StoreLayoutUtils.TRANSITION_DURATIONS.SNAP )
end

StoreLayoutUtils.Row.SetupArrowEvents = function ( f28_arg0, f28_arg1, f28_arg2, f28_arg3 )
	f28_arg0._windowSize = f28_arg3
	f28_arg0.ToggleArrows = function ( f32_arg0, f32_arg1 )
		local f32_local0 = #StoreLayoutUtils.Row.GetButtons( f32_arg0 )
		f32_arg0.Left:setActionDisabledSFX( nil )
		f32_arg0.Right:setActionDisabledSFX( nil )
		local f32_local1 = f32_arg0.Left
		local f32_local2 = f32_local1
		f32_local1 = f32_local1.SetButtonDisabled
		local f32_local3
		if f32_arg1 and f32_arg0._currentHeadIndex ~= 1 then
			f32_local3 = false
		else
			f32_local3 = true
		end
		f32_local1( f32_local2, f32_local3 )
		f32_local1 = f32_arg0.Left
		f32_local2 = f32_local1
		f32_local1 = f32_local1.SetVisible
		if f32_arg1 then
			f32_local3 = f32_arg1
		else
			f32_local3 = f32_arg0._currentHeadIndex ~= 1
		end
		f32_local1( f32_local2, f32_local3 )
		f32_local1 = f32_arg0.Left
		f32_local2 = f32_local1
		f32_local1 = f32_local1.SetHandleMouse
		if f32_arg1 then
			f32_local3 = f32_arg1
		else
			f32_local3 = f32_arg0._currentHeadIndex ~= 1
		end
		f32_local1( f32_local2, f32_local3 )
		f32_local1 = f32_arg0.Right
		f32_local2 = f32_local1
		f32_local1 = f32_local1.SetButtonDisabled
		if f32_arg1 and f32_local0 > f32_arg0._currentHeadIndex + f28_arg0 - 1 then
			f32_local3 = false
		else
			f32_local3 = true
		end
		f32_local1( f32_local2, f32_local3 )
		f32_local1 = f32_arg0.Right
		f32_local2 = f32_local1
		f32_local1 = f32_local1.SetVisible
		if f32_arg1 then
			f32_local3 = f32_arg1
		else
			f32_local3 = f32_arg0._currentHeadIndex + f28_arg0 - 1 < f32_local0
		end
		f32_local1( f32_local2, f32_local3 )
		f32_local1 = f32_arg0.Right
		f32_local2 = f32_local1
		f32_local1 = f32_local1.SetHandleMouse
		if f32_arg1 then
			f32_local3 = f32_arg1
		else
			f32_local3 = f32_arg0._currentHeadIndex + f28_arg0 - 1 < f32_local0
		end
		f32_local1( f32_local2, f32_local3 )
	end
	
	f28_arg0:addEventHandler( "update_input_type", function ( f31_arg0, f31_arg1 )
		if f31_arg0._isSelected then
			f31_arg0:ToggleArrows( LUI.IsLastInputKeyboardMouse( f31_arg1.controllerIndex ) )
		end
	end )
	f28_arg1:setPriority( 100 )
	f28_arg2:setPriority( 100 )
	f28_arg1:addEventHandler( "button_action", function ( f30_arg0, f30_arg1 )
		local f30_local0 = f30_arg0:getParent()
		StoreLayoutUtils.Row.AnimateAndGoToButtonIndex( f30_local0, f30_arg1.controller, f28_arg0, f30_local0._currentHeadIndex - f28_arg0, StoreLayoutUtils.TRANSITION_DURATIONS.TRANSITION_DURATION )
	end )
	f28_arg2:addEventHandler( "button_action", function ( f29_arg0, f29_arg1 )
		local f29_local0 = f29_arg0:getParent()
		StoreLayoutUtils.Row.AnimateAndGoToButtonIndex( f29_local0, f29_arg1.controller, f28_arg0, f29_local0._currentHeadIndex + f28_arg0, StoreLayoutUtils.TRANSITION_DURATIONS.TRANSITION_DURATION )
	end )
end

StoreLayoutUtils.Row.AnimateAndGoToButtonIndex = function ( f27_arg0, f27_arg1, f27_arg2, f27_arg3, f27_arg4 )
	local f27_local0 = StoreLayoutUtils.Row.GetButtons( f27_arg0 )
	local f27_local1 = math.floor( (f27_arg3 - 1) / f27_arg2 ) + 1
	local f27_local2 = f27_arg0._currentHeadIndex
	if f27_local1 == 1 then
		f27_arg0._currentHeadIndex = 1
	else
		f27_arg0._currentHeadIndex = (f27_local1 - 1) * f27_arg2 + 1
	end
	for f27_local10, f27_local11 in ipairs( f27_local0 ) do
		local f27_local6
		if math.min( f27_local2, f27_arg0._currentHeadIndex ) > f27_local10 or f27_local10 > math.max( f27_local2, f27_arg0._currentHeadIndex ) + f27_arg2 then
			f27_local6 = false
		else
			f27_local6 = true
		end
		local f27_local7 = f27_local11
		local f27_local8 = f27_local11.SetAlpha
		local f27_local9
		if f27_local6 then
			f27_local9 = 1
		else
			f27_local9 = 0
		end
		f27_local8( f27_local7, f27_local9 )
	end
	if f27_local2 ~= f27_arg0._currentHeadIndex then
		StoreLayoutUtils.Row.AnimateBundleButtons( f27_local0, f27_arg0.AnchorLeft, f27_arg0._currentHeadIndex, f27_arg4 )
	end
	f27_arg0:ToggleArrows( LUI.IsLastInputKeyboardMouse( f27_arg1 ) )
end

StoreLayoutUtils.Event = {}
StoreLayoutUtils.Event.RowFocusChanged = "store_row_focus_changed"
StoreLayoutUtils.Event.RowButtonFocusChanged = "store_row_button_focus_changed"
StoreLayoutUtils.Event.RowButtonWishlistClicked = "store_row_button_wishlist_clicked"
StoreLayoutUtils.Event.RefreshRowButtonLayout = "store_row_button_refresh_layout"
StoreLayoutUtils.Event.RowWheelChanged = "store_row_wheel_changed"
StoreLayoutUtils.Event.RowButtonClicked = "store_row_button_clicked"
StoreLayoutUtils.Event.RowButtonAltClicked = "store_row_button_alt_clicked"
StoreLayoutUtils.Event.PreviewBundleButtonFocusedKBM = "preview_bundle_button_focused_kbm"
local f0_local0 = {}
for f0_local4, f0_local5 in pairs( StoreLayoutUtils.Event ) do
	table.insert( f0_local0, f0_local5 )
end
EventCatcher.registerDirectDispatchEvents( f0_local0 )
StoreLayoutUtils.Button = {}
StoreLayoutUtils.Button.AttachBaseFunctions = function ( f17_arg0, f17_arg1 )
	f17_arg0.SetupBundleButton = StoreLayoutUtils.Button.SetupBundleButton
	f17_arg0.GetIndex = function ( f26_arg0 )
		return f26_arg0._buttonIndex
	end
	
	f17_arg0.GetRowIndex = function ( f25_arg0 )
		return f25_arg0._rowIndex
	end
	
	f17_arg0.GetBundle = function ( f24_arg0 )
		return f24_arg0._bundle
	end
	
	f17_arg0.SetupTacticalBuildIndicators = function ( f23_arg0, f23_arg1 )
		local f23_local0 = f17_arg0.TracerIcon
		if f23_local0 then
			f23_local0 = f17_arg0.TracerAnimation
			if f23_local0 then
				f23_local0 = f17_arg0.DismembermentIcon
			end
		end
		local f23_local1
		if f23_local0 then
			f23_local1 = f23_local0
		else
			f23_local1 = STORE.UI.GetFirstWeaponDisplayData( f17_arg0, f23_arg1 )
		end
		local f23_local2 = f17_arg0
		local self
		if f23_local1 then
			self = f23_local1
		else
			self = f23_local1.hasVaultCamo
		end
		f23_local2._hasVaultCamo = self
		f23_local2 = f17_arg0
		if f23_local1 then
			self = f23_local1
		else
			self = f23_local1.isGunscreenVO
		end
		f23_local2._hasGunscreenVO = self
		if f23_local1 ~= nil then
			f23_local2 = f23_local1.isProTuned
		else
			f23_local2 = false
		end
		if f23_local2 and not f17_arg0.ProTag then
			self = LUI.UIStyledText.new()
			self.id = "ProTag"
			self:SetRGBFromTable( SWATCHES.IW9StyleGuide.styleGuideWarm05, 0 )
			self:SetBlendMode( BLEND_MODE.multiply )
			self:setText( Engine[0xED84C33EC5F01EA]( 0x844F4DFB58429C3 ), 0 )
			self:SetFont( FONTS.GetFont( FONTS.PrimaryBold.File ) )
			self:SetFontSize( 18 * _PT )
			self:SetMinFontSize( 18 * _PT )
			self:SetWordWrap( false )
			self:SetTracking( 1 * _1080p, 0 )
			self:SetAlignment( LUI.Alignment.Right )
			self:SetVerticalAlignment( LUI.Alignment.Middle )
			self:SetBackingType( 1 )
			self:SetBackingWidget( "ProTunedEntryTag", f17_arg0 )
			self:SetBackingElementFitText( 1, _1080p * 40 )
			self:SetBackingIgnoreParentColor( true )
			self:SetBackingLeftPadding( 16 )
			self:SetBackingRightPadding( 10 )
			self:SetAnchorsAndPosition( 1, 0, 1, 0, _1080p * -58, _1080p * -18, _1080p * -63, _1080p * -45 )
			f17_arg0:addElement( self )
			f17_arg0.ProTag = self
		end
		if f23_local0 then
			if not f23_local1.hasTracerData then
				self = not f23_local1.hasDismembermentData
			else
				self = false
			end
		else
			self = true
		end
		local f23_local4
		if not f23_arg1[0x725EE6B9383E87E] then
			f23_local4 = STORE.UI.CanShowMediaGalleryLayout( f23_arg1 )
		else
			f23_local4 = false
		end
		if f23_local4 and self then
			ACTIONS.AnimateSequence( f17_arg0, "HideItemAmountAndTacticalBuildIndicators" )
			if f17_arg0.TracerAnimation then
				f17_arg0.TracerAnimation:closeTree()
				f17_arg0.TracerAnimation = nil
			end
			if f17_arg0.TracerIcon then
				f17_arg0.TracerIcon:closeTree()
				f17_arg0.TracerIcon = nil
			end
			if f17_arg0.DismembermentIcon then
				f17_arg0.DismembermentIcon:closeTree()
				f17_arg0.DismembermentIcon = nil
			end
			return f23_local2
		elseif f23_local4 then
			ACTIONS.AnimateSequence( f17_arg0, "HideItemAmount" )
		elseif self then
			ACTIONS.AnimateSequence( f17_arg0, "HideTacticalBuildIndicators" )
			if f17_arg0.TracerAnimation then
				f17_arg0.TracerAnimation:closeTree()
				f17_arg0.TracerAnimation = nil
			end
			if f17_arg0.TracerIcon then
				f17_arg0.TracerIcon:closeTree()
				f17_arg0.TracerIcon = nil
			end
			if f17_arg0.DismembermentIcon then
				f17_arg0.DismembermentIcon:closeTree()
				f17_arg0.DismembermentIcon = nil
			end
			return f23_local2
		end
		f17_arg0.TracerAnimation:SetVisible( f23_local1.hasTracerData )
		f17_arg0.TracerIcon:SetVisible( f23_local1.hasTracerData )
		f17_arg0.DismembermentIcon:SetVisible( f23_local1.hasDismembermentData )
		f17_arg0.TracerAnimation:setImage( f23_local1.tracerAnimation )
		f17_arg0.TracerIcon:setImage( f23_local1.tracerIcon )
		if f23_local1.tracerColor then
			f17_arg0.TracerIcon:SetRGBFromTable( f23_local1.tracerColor )
		end
		f17_arg0.DismembermentIcon:setImage( f23_local1.dismembermentIcon )
		if f23_local1.dismembermentColor then
			f17_arg0.DismembermentIcon:SetRGBFromTable( f23_local1.dismembermentColor )
		end
		if f23_local1.hasTracerData and f23_local1.hasDismembermentData then
			ACTIONS.AnimateSequence( f17_arg0, "RepositionToShowTracerAndDismemberment" )
		end
		return f23_local2
	end
	
	local f17_local0 = function ( f22_arg0 )
		if f22_arg0._isProTuned then
			if f22_arg0._hasDMZBonusEffect then
				LUI.UIElement.RefreshAnimation( f22_arg0, "OnFocusedDMZBonusEffectWithProTune" )
			elseif f22_arg0._hasReactiveEffect then
				LUI.UIElement.RefreshAnimation( f22_arg0, "OnFocusedReactiveWithProTune" )
			else
				LUI.UIElement.RefreshAnimation( f22_arg0, "HideOnFocusedBonusEffects" )
			end
		elseif f22_arg0._hasDMZBonusEffect then
			LUI.UIElement.RefreshAnimation( f22_arg0, "OnFocusedDMZBonusEffectWithNoProTune" )
		elseif f22_arg0._hasReactiveEffect then
			LUI.UIElement.RefreshAnimation( f22_arg0, "OnFocusedReactiveWithNoProTune" )
		else
			LUI.UIElement.RefreshAnimation( f22_arg0, "HideOnFocusedBonusEffects" )
		end
	end
	
	f17_arg0.GainFocusAnimationState = function ( f21_arg0 )
		f17_arg0( f21_arg0 )
		LUI.UIElement.RefreshAnimation( f21_arg0, "Focused" )
		f21_arg0:SetActive()
	end
	
	f17_arg0.LoseFocusAnimationState = function ( f20_arg0 )
		f17_arg0( f20_arg0 )
		LUI.UIElement.RefreshAnimation( f20_arg0, "Unfocused" )
		f20_arg0:RemoveActive( {
			controller = f17_arg0
		} )
	end
	
	f17_arg0.RefreshWishlistPrompt = function ( f18_arg0 )
		if not f18_arg0.WishlistPrompt then
			
		else
			
		end
		f18_arg0.WishlistPrompt:SetupPrompt( {
			buttonPrompt = ButtonMap.button_alt2,
			text = STORE.Wishlist.IsWishlisted( f17_arg0, f18_arg0._bundle ) and 0x4B70BE330CEB8A1 or 0x1A70A0BEF2D4D9D,
			action = function ( f19_arg0, f19_arg1 )
				f19_arg0:dispatchEventToRoot( {
					name = StoreLayoutUtils.Event.RowButtonWishlistClicked
				} )
			end
		} )
	end
	
end

StoreLayoutUtils.Button.PlayUniqueSFX = function ( f15_arg0 )
	if not f15_arg0 or f15_arg0[0x725EE6B9383E87E] then
		
	end
	if STORE.Bundles.GetScriptBundleID( f15_arg0 ) == "iw9_store_3023_the_throwback_pack_09_weapon_audio" then
		Engine[0xC4146BA76D0F982]( SOUND_SETS.uniqueBundleOverrides.classicMW2BtnFocusedKBM )
	elseif STORE.Bundles.GetScriptBundleID( f15_arg0 ) == "iw9_store_4017_classic_call_of_duty_music_pack" then
		CoD.MusicPack.Preview( CoD.MusicPack.GetIndexByLootID( 30575 ) )
	end
	WEAPON.PlayRandomGunscreenVO( STORE.Bundles.GetLootIdByFilter( f15_arg0, function ( f16_arg0 )
		return LOOT.GetTypeForID( f16_arg0 ) == LOOT.itemTypes.GUN_SCREEN
	end ), WEAPON.AliasVO.Audio_Preview )
end

StoreLayoutUtils.Button.SetupBundleButton = function ( f13_arg0, f13_arg1, f13_arg2, f13_arg3, f13_arg4 )
	f13_arg0._bundle = f13_arg4
	f13_arg0._buttonIndex = f13_arg3
	f13_arg0._rowIndex = f13_arg2
	f13_arg0._isProTuned = false
	f13_arg0._hasDMZBonusEffect = false
	f13_arg0._hasReactiveEffect = false
	f13_arg0._onClickCallback = function ()
		
	end
	
	if f13_arg4[0x725EE6B9383E87E] then
		f13_arg0._onClickCallback = f13_arg4.onClickCallback
	end
	if not f13_arg4[0x725EE6B9383E87E] then
		f13_arg0._isProTuned = f13_arg0:SetupTacticalBuildIndicators( f13_arg4 )
		f13_arg0._hasDMZBonusEffect = STORE.UI.HasDMZBonusEffect( f13_arg1, f13_arg4 )
		f13_arg0._hasReactiveEffect = STORE.UI.HasReactiveEffect( f13_arg1, f13_arg4 )
		f13_arg0.Background:setImage( RegisterMaterial( STORE.Bundles.GetBackgroundImage( f13_arg4 ) ) )
		f13_arg0:RefreshWishlistPrompt()
		if STORE.Bundles.IsFree( f13_arg1, f13_arg4 ) then
			ACTIONS.AnimateSequence( f13_arg0, "FreeTheme" )
		else
			if f13_arg0.TogographyOverlay then
				f13_arg0.TogographyOverlay:SetVisible( false )
			end
			if f13_arg0.FreeOverlay then
				f13_arg0.FreeOverlay:SetVisible( false )
			end
		end
		if f13_arg0.LocalizedTitle then
			f13_arg0.LocalizedTitle:setText( ToUpperCase( STORE.Bundles.GetName( f13_arg4 ) ) )
		end
		if f13_arg0.Description then
			f13_arg0.Description:setText( STORE.Bundles.GetDescription( f13_arg4 ) )
		end
		if f13_arg0.Price then
			f13_arg0.Price:UpdatePrice( f13_arg4 )
		end
		local BattleBuddyTag = STORE.Bundles.IsDiscounted( f13_arg4 )
		if not f13_arg0.DiscountPercentText and STORE.Bundles.IsDiscounted( f13_arg4 ) then
			local LimitedTimeCPTag = LUI.UIStyledText.new()
			LimitedTimeCPTag.id = "DiscountPercentText"
			LimitedTimeCPTag:SetRGBFromTable( SWATCHES.IW9StyleGuide.styleGuideCool05, 0 )
			LimitedTimeCPTag:setText( "30% OFF", 0 )
			LimitedTimeCPTag:setCaseStyle( LUI.CaseStyle.Uppercase )
			LimitedTimeCPTag:SetFont( FONTS.GetFont( FONTS.PrimaryBold.File ) )
			LimitedTimeCPTag:SetFontSize( 20 * _PT )
			LimitedTimeCPTag:SetMinFontSize( 20 * _PT )
			LimitedTimeCPTag:SetWordWrap( false )
			LimitedTimeCPTag:SetTracking( 1 * _1080p, 0 )
			LimitedTimeCPTag:SetAlignment( LUI.Alignment.Right )
			LimitedTimeCPTag:SetBackingType( 1 )
			LimitedTimeCPTag:SetBackingWidget( "StoreBundleDiscount", f13_arg1 )
			LimitedTimeCPTag:SetBackingElementFitText( 1, _1080p * 100 )
			LimitedTimeCPTag:SetBackingIgnoreParentColor( true )
			LimitedTimeCPTag:SetBackingLeftPadding( 10 )
			LimitedTimeCPTag:SetBackingRightPadding( 17 )
			LimitedTimeCPTag:SetBackingTopPadding( 8 )
			LimitedTimeCPTag:SetBackingBottomPadding( 1 )
			LimitedTimeCPTag:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -111, _1080p * -11, _1080p * 2, _1080p * 22 )
			f13_arg0:addElement( LimitedTimeCPTag )
			f13_arg0.DiscountPercentText = LimitedTimeCPTag
			
			if f13_arg0.BackgroundMask then
				f13_arg0.DiscountPercentText:SetMask( f13_arg0.BackgroundMask )
			end
			f13_arg0.DiscountPercentText:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x80B52A25515CD0B, STORE.Bundles.DiscountedPercentageString( f13_arg1, f13_arg4 ) ) ) )
		end
		if not f13_arg0.LimitedTimeCPTag and STORE.UI.IsBundleWithCPBonus( f13_arg0._bundle ) then
			local LimitedTimeCPTag = LUI.UIStyledText.new()
			LimitedTimeCPTag.id = "LimitedTimeCPTag"
			LimitedTimeCPTag:SetRGBFromTable( SWATCHES.IW9StyleGuide.styleGuideCool05, 0 )
			LimitedTimeCPTag:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xB9542493D8B1D2B ) ), 0 )
			LimitedTimeCPTag:SetFont( FONTS.GetFont( FONTS.PrimaryBold.File ) )
			LimitedTimeCPTag:SetFontSize( 20 * _PT )
			LimitedTimeCPTag:SetMinFontSize( 20 * _PT )
			LimitedTimeCPTag:SetWordWrap( false )
			LimitedTimeCPTag:SetTracking( 1 * _1080p, 0 )
			LimitedTimeCPTag:SetAlignment( LUI.Alignment.Left )
			LimitedTimeCPTag:SetBackingType( 2 )
			LimitedTimeCPTag._backingElement = LUI.UIImage.new()
			LimitedTimeCPTag._backingElement:SetRGBFromTable( SWATCHES.HUD.you, 0 )
			LimitedTimeCPTag._backingElement:setImage( RegisterMaterial( 0xE0BC872277FAF1B ), 0 )
			LimitedTimeCPTag._backingElement:Setup3SliceHorizontalImage( _1080p * 4, 0.3 )
			LimitedTimeCPTag._backingElement:SetAnchors( 0, 0, 0, 0 )
			LimitedTimeCPTag:SetRenderChildrenFirst( true )
			LimitedTimeCPTag:addElement( LimitedTimeCPTag._backingElement )
			LimitedTimeCPTag:SetBackingElementFitText( 1, _1080p * 40 )
			LimitedTimeCPTag:SetBackingIgnoreParentColor( true )
			LimitedTimeCPTag:SetBackingLeftPadding( 10 )
			LimitedTimeCPTag:SetBackingRightPadding( 10 )
			LimitedTimeCPTag:SetBackingTopPadding( 3 )
			LimitedTimeCPTag:SetBackingBottomPadding( 1 )
			LimitedTimeCPTag:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 20, _1080p * 60, _1080p * 10, _1080p * 30 )
			f13_arg0:addElement( LimitedTimeCPTag )
			f13_arg0.LimitedTimeCPTag = LimitedTimeCPTag
			
			f13_arg0.LimitedTimeCPTag:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xB9542493D8B1D2B ) ) )
		end
		if f13_arg0.PurchaseText then
			local LimitedTimeCPTag = STORE.Bundles.IsFree( f13_arg1, f13_arg4 ) and 0x46F7490BBDCE346 or 0xE83F9FFFB7C3B82
			if STORE.UI.IsJupiterGameBundle( f13_arg1, f13_arg4 ) then
				if CONDITIONS.IsConsoleGame() then
					local f13_local2 = 0xFDC050D13223E5E
					if not f13_local2 then
						LimitedTimeCPTag = f13_local2
					else
						LimitedTimeCPTag = 0xAC0EB159C26F39F
					end
				end
				LimitedTimeCPTag = 0xAC0EB159C26F39F
			end
			f13_arg0.PurchaseText:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( LimitedTimeCPTag ) ) )
		end
	end
	if not f13_arg0.StoreRowTagBonusEffectDMZ and f13_arg0._hasDMZBonusEffect then
		local BattleBuddyTag = MenuBuilder.BuildRegisteredType( "StoreRowTagBonusEffectDMZButton", {
			controllerIndex = f13_arg1
		} )
		BattleBuddyTag.id = "StoreRowTagBonusEffectDMZ"
		if f13_arg0._isProTuned then
			BattleBuddyTag:SetAnchorsAndPosition( 1, 0, 1, 0, _1080p * -100, _1080p * -12, _1080p * -98, _1080p * -66 )
		else
			BattleBuddyTag:SetAnchorsAndPosition( 1, 0, 1, 0, _1080p * -100, _1080p * -12, _1080p * -78, _1080p * -46 )
		end
		f13_arg0:addElement( BattleBuddyTag )
		f13_arg0.StoreRowTagBonusEffectDMZ = BattleBuddyTag
		
	elseif not f13_arg0.StoreRowTagBonusEffectGeneric and f13_arg0._hasReactiveEffect then
		local BattleBuddyTag = LUI.UIText.new()
		BattleBuddyTag.id = "StoreRowTagBonusEffectGeneric"
		BattleBuddyTag:SetRGBFromTable( SWATCHES.IW9StyleGuide.styleGuideCool01, 0 )
		BattleBuddyTag:SetAlpha( 0.72, 0 )
		BattleBuddyTag:SetBlendMode( BLEND_MODE.addWithAlpha )
		BattleBuddyTag:setText( Engine[0xED84C33EC5F01EA]( 0x22BF21B5C0D768C ), 0 )
		BattleBuddyTag:setCaseStyle( LUI.CaseStyle.Uppercase )
		BattleBuddyTag:SetFont( FONTS.GetFont( FONTS.SecondaryMedium.File ) )
		BattleBuddyTag:SetFontSize( 18 * _PT )
		BattleBuddyTag:SetMinFontSize( 18 * _PT )
		BattleBuddyTag:SetWordWrap( false )
		BattleBuddyTag:SetTracking( -0.4 * _1080p, 0 )
		BattleBuddyTag:SetAlignment( LUI.Alignment.Right )
		BattleBuddyTag:SetVerticalAlignment( LUI.Alignment.Middle )
		BattleBuddyTag:SetBackingType( 1 )
		BattleBuddyTag:SetBackingWidget( "StoreRowTagBonusEffectGenericBacker", f13_arg1 )
		BattleBuddyTag:SetBackingElementFitText( 1, _1080p * 160 )
		BattleBuddyTag:SetBackingIgnoreParentColor( true )
		BattleBuddyTag:SetBackingLeftPadding( 28 )
		BattleBuddyTag:SetBackingRightPadding( 6 )
		BattleBuddyTag:SetBackingTopPadding( 4 )
		if f13_arg0._isProTuned then
			BattleBuddyTag:SetAnchorsAndPosition( 1, 0, 1, 0, _1080p * -178, _1080p * -18, _1080p * -93, _1080p * -67 )
		else
			BattleBuddyTag:SetAnchorsAndPosition( 1, 0, 1, 0, _1080p * -178, _1080p * -18, _1080p * -73, _1080p * -47 )
		end
		f13_arg0:addElement( BattleBuddyTag )
		f13_arg0.StoreRowTagBonusEffectGeneric = BattleBuddyTag
		
	elseif not f13_arg0.UniversalWrapTag and f13_arg0._hasVaultCamo then
		local BattleBuddyTag = MenuBuilder.BuildRegisteredType( "UniversalWrapTag", {
			controllerIndex = f13_arg1
		} )
		BattleBuddyTag.id = "UniversalWrapTag"
		BattleBuddyTag:SetAnchorsAndPosition( 1, 0, 1, 0, _1080p * -168, _1080p * -18, _1080p * -96, _1080p * -68 )
		f13_arg0:addElement( BattleBuddyTag )
		f13_arg0.UniversalWrapTag = BattleBuddyTag
		
		f13_arg0.UniversalWrapTag:ButtonTagLayout()
	elseif not f13_arg0.BattleBuddyTag and f13_arg0._hasGunscreenVO then
		local BattleBuddyTag = MenuBuilder.BuildRegisteredType( "BattleBuddyTag", {
			controllerIndex = f13_arg1
		} )
		BattleBuddyTag.id = "BattleBuddyTag"
		BattleBuddyTag:SetAnchorsAndPosition( 1, 0, 1, 0, _1080p * -168, _1080p * -18, _1080p * -96, _1080p * -68 )
		f13_arg0:addElement( BattleBuddyTag )
		f13_arg0.BattleBuddyTag = BattleBuddyTag
		
		f13_arg0.BattleBuddyTag:ButtonTagLayout()
	end
end

StoreLayoutUtils.Button.SetupEvents = function ( f1_arg0, f1_arg1 )
	f1_arg0:addEventHandler( "gain_focus", function ( f12_arg0, f12_arg1 )
		local f12_local0 = f12_arg0:getParent()
		if not f12_local0:CanInterractWithButton( f12_arg0._buttonIndex ) then
			return 
		else
			StoreLayoutUtils.Button.PlayUniqueSFX( f12_arg0._bundle )
			f12_arg0:dispatchEventToRoot( {
				focused = true,
				name = StoreLayoutUtils.Event.RowButtonFocusChanged,
				rowIndex = f12_arg0._rowIndex,
				button = f12_arg0
			} )
		end
	end )
	f1_arg0:addEventHandler( "lose_focus", function ( f11_arg0, f11_arg1 )
		WEAPON.StopGunscreenVO()
		CoD.MusicPack.StopPreview()
		f11_arg0:dispatchEventToRoot( {
			focused = false,
			name = StoreLayoutUtils.Event.RowButtonFocusChanged,
			rowIndex = f11_arg0._rowIndex,
			button = f11_arg0
		} )
	end )
	if f1_arg0.PrimaryButton then
		f1_arg0.PrimaryButton:addEventHandler( "mouseup", function ( f10_arg0, f10_arg1 )
			local f10_local0 = f10_arg0:getParent()
			local f10_local1 = f10_local0:getParent()
			if not f10_local1:CanInterractWithButton( f10_local0._buttonIndex ) then
				return false
			elseif f10_local0._bundle[0x725EE6B9383E87E] then
				f10_local0._onClickCallback( f1_arg0 )
				return true
			else
				f10_local0:processEvent( {
					name = StoreLayoutUtils.Event.RowButtonClicked
				} )
				Engine[0xC4146BA76D0F982]( SOUND_SETS.storefront.viewBundle )
				return true
			end
		end )
	end
	if f1_arg0.SecondaryButton then
		f1_arg0.SecondaryButton:addEventHandler( "mouseup", function ( f9_arg0, f9_arg1 )
			local f9_local0 = f9_arg0:getParent()
			if f9_local0._bundle[0x725EE6B9383E87E] then
				return true
			else
				STORE.Popups.OpenPurchaseConfirmationPopup( f9_arg0, f1_arg0, f9_local0._bundle )
				Engine[0xC4146BA76D0F982]( SOUND_SETS.storefront.purchaseBundle )
				return true
			end
		end )
	end
	f1_arg0:registerEventHandler( "mouseup", function ( element, event )
		local f8_local0 = element:getParent()
		if not f8_local0:CanInterractWithButton( element._buttonIndex ) or element._lastState == "Unfocused" then
			return 
		elseif element._bundle[0x725EE6B9383E87E] then
			element._onClickCallback( event.controller )
			return 
		else
			element:processEvent( {
				name = StoreLayoutUtils.Event.RowButtonClicked
			} )
		end
	end )
	f1_arg0:registerEventHandler( StoreLayoutUtils.Event.RefreshRowButtonLayout, function ( element, event )
		if element._bundle[0x725EE6B9383E87E] then
			return 
		else
			f1_arg0:RefreshWishlistPrompt()
		end
	end )
	f1_arg0:registerEventHandler( StoreLayoutUtils.Event.RowButtonClicked, function ( element, event )
		if element._bundle[0x725EE6B9383E87E] then
			element._onClickCallback( event.controller or f1_arg0 )
			return 
		elseif CONDITIONS.IsSony() then
			InGameStore.ShowStoreIcon( false )
		end
		Engine[0xC4146BA76D0F982]( SOUND_SETS.storefront.viewBundle )
		STORE.OpenProductPreviewMenu( f1_arg0, element._bundle )
	end )
	f1_arg0:registerEventHandler( StoreLayoutUtils.Event.RowButtonAltClicked, function ( element, event )
		if element._bundle[0x725EE6B9383E87E] then
			return true
		else
			Engine[0xC4146BA76D0F982]( SOUND_SETS.storefront.purchaseBundle )
			STORE.Popups.OpenPurchaseConfirmationPopup( element, f1_arg0, element._bundle )
		end
	end )
	f1_arg0:registerEventHandler( "gamepad_button", function ( element, event )
		if not CONDITIONS.IsMouseWheelEvent( event ) then
			return 
		else
			element:dispatchEventToRoot( {
				name = StoreLayoutUtils.Event.RowWheelChanged,
				event = event,
				rowIndex = element._rowIndex
			} )
		end
	end )
	local f1_local0 = function ( f3_arg0, f3_arg1 )
		if not f3_arg0.ViewText then
			return 
		elseif LUI.IsKBMActiveInputMethodForPrompts( f3_arg1 ) then
			f3_arg0.ViewText:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x908817112D77DCC ) ) )
		else
			f3_arg0.ViewText:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x5685178F1B6C665 ) ) )
		end
	end
	
	local f1_local1 = function ( f2_arg0, f2_arg1 )
		if LUI.IsKBMActiveInputMethodForPrompts( f2_arg1.controllerIndex ) and f2_arg0._sequences and f2_arg0._sequences.KBM then
			ACTIONS.AnimateSequence( f2_arg0, "KBM" )
		elseif f2_arg0._sequences and f2_arg0._sequences.Gamepad then
			ACTIONS.AnimateSequence( f2_arg0, "Gamepad" )
		end
		f1_arg0( f2_arg0, f2_arg1.controllerIndex )
	end
	
	f1_arg0:addEventHandler( "update_input_type", f1_local1 )
	f1_local1( f1_arg0, {
		controllerIndex = f1_arg1
	} )
end

