-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:15
module( ..., package.seeall )
require( "ui.generated.widgets.frontend.social.socialmenulayoutnew" )
require( "ui.generated.widgets.frontend.groups.socialgroupssearchfiltertab" )
local f0_local0 = 8
local f0_local1 = 5
local f0_local2 = function ( f25_arg0 )
	f25_arg0.SocialHighlightDetails:SetVisible( false )
	f25_arg0.RankContainer:SetVisible( false )
	f25_arg0.PlayerStatus:SetVisible( false )
	if SOCIAL.CanUseOperatorsInBackground() then
		FrontEndScene.HideAllCharacters()
	end
	f25_arg0.SocialGroupIdentityWidget:SetVisible( true )
	f25_arg0.SocialGroupInfo:SetVisible( true )
end

local f0_local3 = function ( f24_arg0 )
	f24_arg0.SocialGroupIdentityWidget:SetVisible( false )
	f24_arg0.SocialGroupInfo:SetVisible( false )
end

local f0_local4 = function ( f23_arg0 )
	local f23_local0 = LUI.FlowManager.GetScopedData( f23_arg0 )
	local f23_local1 = f23_arg0.SocialMenu:GetPlayerGrid()
	local f23_local2 = f23_local0.currentDataProvider:GetLastAvailableItemIndex()
	f23_arg0.SocialMenu.SocialCardsGrid:SetVisible( true )
	if f23_local2 < f0_local0 and f23_arg0._firstGridUpdate then
		f23_arg0.SocialMenu.SocialCardsGrid:DisableSearching()
		f23_arg0.SocialMenu.SocialCardsGrid:DisableGridView()
		f23_arg0.SocialMenu:UpdateFilteringLabel()
		f23_arg0.SocialMenu:RemoveGamepadEventCallback( "button_right_trigger" )
	end
	f23_arg0._firstGridUpdate = false
	f23_local1:SetNumChildren( f23_local2 )
	f23_arg0.SocialMenu:UpdateNoFriends( f23_local2 )
	f23_local1:RefreshContent()
	f23_local1:processEvent( {
		name = "player_grid_refreshed",
		controllerIndex = f23_local0.controllerIndex
	} )
end

local f0_local5 = function ( f19_arg0, f19_arg1 )
	local f19_local0 = LUI.FlowManager.GetScopedData( f19_arg0 )
	f19_local0.currentSorting = DataSources.frontEnd.social.groupMembersActiveSort:GetValue( f19_arg1 )
	f19_arg0.SocialMenu:UpdateFilteringLabel( Engine[0xED84C33EC5F01EA]( 0x9ADAC0AA6B81B29, GROUPS.SocialGroupMemberSortingStrings[f19_local0.currentSorting] ) )
	local f19_local1 = function ()
		local f22_local0 = DataSources.frontEnd.social.groupMembersActiveSort:GetValue( f19_arg0 )
		if f19_arg0.currentSorting ~= f22_local0 then
			f19_arg0.currentSorting = f22_local0
			f19_arg0.SocialMenu:UpdateFilteringLabel( Engine[0xED84C33EC5F01EA]( 0x9ADAC0AA6B81B29, GROUPS.SocialGroupMemberSortingStrings[f22_local0] ) )
			local f22_local1 = f19_arg0.currentDataProvider:GetLastAvailableItemIndex()
			f19_arg0.currentDataProvider:ResetData()
			f19_arg0._playersGrid:SetNumChildren( 0 )
			f19_arg0._playersGrid:RefreshContent()
			f19_arg0.currentDataProvider:UpdateDataFiltering( f22_local1, f19_arg0 )
		end
	end
	
	f19_arg0.SocialMenu:AddGamepadEventCallback( "button_right_trigger", function ( f20_arg0, f20_arg1 )
		LUI.FlowManager.RequestPopupMenu( nil, "FlyInPopup", true, f19_arg0, false, {
			flyInRightNarrow = true,
			widget = MenuBuilder.BuildRegisteredType( "SocialGroupsSearchFilterTab", {
				screenTitle = Engine[0xED84C33EC5F01EA]( 0xA464B4CA82007FD ),
				sections = {
					{
						buttonList = GROUPS.SocialGroupMemberSortingStrings,
						dataSource = DataSources.frontEnd.social.groupMembersActiveSort
					}
				}
			} )
		} )
		local f20_local0 = LUI.FlowManager.GetMenuByName( "FlyInPopup" )
		f20_local0.menu:SetExitAnimationDoneCallback( function ( f21_arg0 )
			ACTIONS.LeaveMenu( f21_arg0 )
			MobileFlyInPopupUtils.ResetCurrentFlyInPopup()
			f20_arg0()
		end )
	end )
end

local f0_local6 = function ( f18_arg0 )
	local f18_local0 = LUI.FlowManager.GetScopedData( f18_arg0 )
	f18_arg0.SocialMenu.SocialCardsGrid._dataDisplayType = f18_local0.tabIdForFriendsService
	f18_arg0._playersGrid:SetRefreshChild( FRIENDS.GetRefreshPlayerChildFunc( f18_arg0.SocialMenu, f18_local0.tabIdForFriendsService ) )
	f0_local0( f18_arg0 )
	if f18_arg0.SocialMenu.SocialCardsGrid and f18_arg0.SocialMenu.SocialCardsGrid.SearchTextBox and f18_arg0.SocialMenu.SocialCardsGrid.SearchTextBox:isInFocus() then
		f18_arg0.SocialMenu:GainInitialFocus()
	end
end

local f0_local7 = function ( f17_arg0, f17_arg1, f17_arg2, f17_arg3, f17_arg4 )
	local f17_local0 = f17_arg4.options or f17_arg4
	local f17_local1 = GROUPS.GetGroupNumMembers( f17_arg1, f17_local0.groupId )
	if not f17_local1 then
		f17_local1 = f17_arg2.groupDetails.numGroupMembers
	end
	if f17_arg0._isDashboard then
		local f17_local2 = f17_arg3.SocialMenu.ActionBar:GetAllMembersButton()
		if f17_local2 then
			f17_local2:SetHeaderText( Engine[0xED84C33EC5F01EA]( 0x162FFC03D3A084A, f17_local1 ) )
		end
	else
		local f17_local2 = f17_arg3.SocialMenu.ActionBar:GetLeaveGroupButton()
		if f17_local2 then
			local f17_local3 = f17_local2
			local f17_local4 = f17_local2.SetHeaderText
			local f17_local5 = Engine[0xED84C33EC5F01EA]
			local f17_local6
			if f17_local1 == 1 then
				f17_local6 = 0xD61C7A890B6FAA0
				if not f17_local6 then
				
				else
					f17_local4( f17_local3, f17_local5( f17_local6 ) )
				end
			end
			f17_local6 = 0x43A32FCEE63A266
		end
		if f17_local0.genEventName and f17_local0.genEventName == GROUPS.GroupEvents.LUI_EVENT_PARAM_GROUP_MEMBERADDED then
			local f17_local4 = LUI.FlowManager.GetScopedData( f17_arg0 )
			f17_local4.currentDataProvider:UpdateDataFiltering( f0_local0, f0_local0 )
		end
	end
	GROUPS.UpdateGroupDetails( f17_arg1, f17_arg2.groupDetails )
end

local f0_local8 = function ( f16_arg0, f16_arg1 )
	if GROUPS.CommonDataProviders.KickHandleFunc( f16_arg1 ) then
		f0_local0( f16_arg0 )
	end
end

local f0_local9 = function ( f6_arg0, f6_arg1, f6_arg2 )
	f6_arg0._controllerIndex = f6_arg1
	f6_arg0._firstGridUpdate = true
	local f6_local0 = LUI.FlowManager.GetScopedData( f6_arg0 )
	local f6_local1 = f6_local0.playerData.groupId
	local f6_local2 = f6_arg2.tabId == FRIENDS.SocialGroupTabIDs.DASHBOARD
	f6_arg0._isDashboard = f6_local2
	local f6_local3 = 0x44B6929959A035B
	local f6_local4 = 0xE35B0C03948A004
	local f6_local5 = 0x9F1455447AE5938
	f6_local0.tabIdForFriendsService = FRIENDS.TabIDs.GROUP_PROFILE_MEMBERS
	local f6_local6 = GROUPS.CommonDataProviders:InstanceOfficers()
	f6_local0.currentDataProvider = f6_local6.provider
	if f6_local2 then
		f6_local3 = 0x44B6929959A035B
		f6_local4 = 0x366B468437184E7
		f6_local5 = 0x336C8263A6AB0A7
		f6_local0.tabIdForFriendsService = FRIENDS.TabIDs.GROUP_PROFILE_DASHBOARD
		f6_local6 = GROUPS.CommonDataProviders:InstanceMembers()
		f6_local0.currentDataProvider = f6_local6.provider
	end
	f6_local6 = MenuBuilder.BuildRegisteredType( "SocialGroupPageActionButtons", {
		groupDetails = f6_arg2.groupDetails,
		isDashboard = f6_local2,
		isLocalGroup = f6_arg2.isLocalGroup,
		isInvited = f6_arg2.isInvited
	} )
	f6_local6.id = "SocialGroupPageActionButtons"
	f6_arg0.SocialMenu:SetActionBar( f6_local6 )
	f6_arg0.SocialMenu.ActionBarContainer:registerEventHandler( "action_bar_focused", function ( element, event )
		f6_arg0( f6_arg0.SocialMenu )
	end )
	f6_arg0:registerEventHandler( GROUPS.GroupEvents.LUI_EVENT_GROUP_NOTIFICATION, function ( element, event )
		local f14_local0 = event.options
		if f6_arg0 == f14_local0.groupId and f14_local0.genEventName == GROUPS.GroupEvents.LUI_EVENT_PARAM_GROUP_MEMBERADDED then
			f6_arg0( f6_arg0, f6_arg0, f6_arg0, element, event )
		end
	end )
	f6_arg0:registerEventHandler( GROUPS.GroupEvents.LUI_EVENT_GROUP_REMOVED_MEMBER_XUID, function ( element, event )
		if f6_arg0 ~= event.groupId then
			return 
		else
			f6_arg0( f6_arg0, f6_arg0, f6_arg0, element, event )
			f6_arg0( f6_arg0, event.memberXuid )
		end
	end )
	f6_arg0.SocialMenu.SocialGroupIdentityWidget:UpdateGroupDetails( f6_arg2.groupDetails )
	f6_arg0.SocialMenu.SocialGroupIdentityWidget:SetVisible( true )
	f6_arg0.SocialMenu.SocialGroupInfo:UpdateGroupDetails( f6_arg2.groupDetails )
	f6_arg0.SocialMenu.SocialGroupInfo:SetVisible( true )
	f6_arg0.SocialMenu.OnPlayerCardGainFocus = f0_local0
	f6_arg0.SocialMenu:SetupEmptyGrid( f6_local3, false )
	f6_arg0.SocialMenu:SetCardGridHeaderStaticText( f6_local4 )
	f6_arg0.SocialMenu:SetCardGridHeaderDynamicText( f6_local5 )
	f6_arg0.SocialMenu:GainInitialFocus()
	f6_arg0.SocialMenu:SetSearchBoxCallback( function ( f11_arg0, f11_arg1 )
		local f11_local0 = "group_members_search_typing_delay"
		local f11_local1 = 500
		f6_arg0:RemoveEventTimer( f11_local0 )
		f6_arg0:CreateEventTimer( f11_local0, f11_local1, {
			immediate = false,
			callbackFunc = function ( f12_arg0, f12_arg1 )
				f12_arg0:RemoveEventTimer( f11_arg0 )
				local f12_local0 = LUI.FlowManager.GetScopedData( f11_arg0 )
				f12_local0._searchText = f11_arg0 and string.lower( f11_arg0 ) or nil
				f12_local0.currentDataProvider:UpdateDataFiltering( f11_arg0, f11_arg0 )
			end
		} )
	end )
	f6_arg0.SocialMenu:SetSearchBoxEditCompleteCallback()
	f6_arg0.SocialMenu:SetSearchBoxDefaultText( 0x3DEFDA1634DCD5D )
	f6_arg0.SocialMenu.SocialCardsGrid:SetVisible( false )
	f6_arg0.SocialMenu.SocialCardsGrid:SetSearchBoxNavigation()
	f6_arg0._playersGrid = f6_arg0.SocialMenu:GetPlayerGrid()
	f0_local0( f6_arg0, f6_arg1 )
	f6_arg0:registerEventHandler( "member_kicked_from_group_local_update", function ( element, event )
		f6_arg0( f6_arg0, event.xuid )
	end )
	f6_arg0:registerEventHandler( "member_role_change_local_update", function ( element, event )
		GROUPS.CommonDataProviders.RoleChangeHandleFunc( element, event )
		f6_arg0( f6_arg0 )
	end )
	f6_arg0:addEventHandler( "on_close", function ( f8_arg0, f8_arg1 )
		f6_arg0.currentDataProvider:ChangeOwner( nil )
	end )
	f6_local0._searchText = nil
	f6_local0._isRecentlyOnlineRequired = f6_local2
	f6_local0.currentDataProvider:ChangeOwner( f6_arg0 )
	f6_local0.currentDataProvider:SetErrorHandler( function ( f7_arg0, f7_arg1 )
		f6_arg0.currentDataProvider:UpdateDataFiltering( f6_arg0, f6_arg0 )
	end )
	f6_local0.currentDataProvider:UpdateDataFiltering( f0_local0, f0_local0 )
end

States = {
	[0xAD14C6E7156B923] = function ( f2_arg0, f2_arg1 )
		local f2_local0 = function ( f5_arg0, f5_arg1 )
			
		end
		
		f2_arg0.LoadingLbl:RegisterAnimationSequence( "Loading", {
			nil,
			nil,
			nil,
			0,
			[1] = TWEEN_PROPERTY.Visibility,
			[2] = LUI.Visibility.Visible
		} )
		local f2_local1 = function ( f4_arg0, f4_arg1 )
			f4_arg0.LoadingLbl:AnimateSequence( "Loading" )
		end
		
		f2_arg0.LoadingLbl:RegisterAnimationSequence( "LoadFinished", {
			nil,
			nil,
			nil,
			0,
			[1] = TWEEN_PROPERTY.Visibility,
			[2] = LUI.Visibility.Hidden
		} )
		f2_arg0._sequences = {
			DefaultSequence = f2_local0,
			Loading = f2_local1,
			LoadFinished = function ( f3_arg0, f3_arg1 )
				f3_arg0.LoadingLbl:AnimateSequence( "LoadFinished" )
			end
		}
		f2_arg0._sequenceLengths = {
			LoadFinished = 0,
			DefaultSequence = 0,
			Loading = 0
		}
	end
}
function SocialGroupProfileTab( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "SocialGroupProfileTab"
	self.__states = States
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local SocialMenu = nil
	
	SocialMenu = MenuBuilder.BuildRegisteredType( "SocialMenuLayoutNew", {
		controllerIndex = f1_local1,
		SocialCardsGridConfigOverride = {
			maxVisibleRows = SubtractForSplitscreen( 4, 6 )
		}
	} )
	SocialMenu.id = "SocialMenu"
	SocialMenu:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1920, 0, _1080p * 1080 )
	self:addElement( SocialMenu )
	self.SocialMenu = SocialMenu
	
	local LoadingLbl = nil
	
	LoadingLbl = LUI.UIStyledText.new()
	LoadingLbl.id = "LoadingLbl"
	LoadingLbl:SetVisible( false )
	LoadingLbl:setText( Engine[0xED84C33EC5F01EA]( 0xD8BECEE0C9A06EB ), 0 )
	LoadingLbl:setCaseStyle( LUI.CaseStyle.Uppercase )
	LoadingLbl:SetFont( FONTS.GetFont( FONTS.PrimaryBold.File ) )
	LoadingLbl:SetFontSize( 30 * _PT )
	LoadingLbl:SetMinFontSize( 30 * _PT )
	LoadingLbl:SetWordWrap( false )
	LoadingLbl:SetAlignment( LUI.Alignment.Center )
	LoadingLbl:SetVerticalAlignment( LUI.Alignment.Middle )
	LoadingLbl:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -573.47, _1080p * 539.53, _1080p * 320.79, _1080p * 381.79 )
	self:addElement( LoadingLbl )
	self.LoadingLbl = LoadingLbl
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "SocialGroupProfileTab", SocialGroupProfileTab )
LockTable( _M )
