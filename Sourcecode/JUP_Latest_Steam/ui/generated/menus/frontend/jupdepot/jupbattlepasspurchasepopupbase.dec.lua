-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:02
module( ..., package.seeall )
local f0_local0 = 4
local f0_local1 = "bp_blades_battlepass_jup"
local f0_local2 = "bp_blades_battlepass_bundle_jup"
local f0_local3 = "bp_blades_blackcell_one_blade_jup"
local f0_local4 = "bp_blades_blackcell_two_blades_jup"
local f0_local5 = "bp_blades_blackcell_three_blades_jup"
local f0_local6 = "bp_blades_vault_edition_jup"
local f0_local7 = "bp_blades_battlepass_previous_season_jup"
local f0_local8 = "bp_blades_battlepass_bundle_previous_season_jup"
local f0_local9 = "bp_blades_blackcell_one_blade_previous_season_jup"
local f0_local10 = "bp_blades_blackcell_two_blades_previous_season_jup"
local f0_local11 = "bp_blades_blackcell_three_blades_previous_season_jup"
if CONDITIONS.IsSony() then
	local f0_local12 = 25
else
	local f0_local12 = 20
end
local f0_local13 = function ()
	local f40_local0 = LUI.FlowManager.GetMenuByName( "JupBundlePurchasePopupContainer" )
	local f40_local1
	if f40_local0 then
		f40_local1 = f40_local0.menu
		if not f40_local1 then
		
		else
			return f40_local1
		end
	end
	f40_local1 = nil
end

local f0_local14 = function ( f39_arg0 )
	f39_arg0._showingPurchasePopup = false
	LUI.FlowManager.RequestLeaveMenuByName( "JupBundlePurchasePopupContainer", true )
	for f39_local3, f39_local4 in pairs( f39_arg0._purchaseData ) do
		if f39_local4.container then
			f39_local4.container:SetHandleMouseMove( true )
		end
	end
end

local f0_local15 = function ( f38_arg0 )
	local f38_local0 = nil
	local f38_local1 = f0_local0
	local f38_local2 = #f38_arg0._purchaseData
	if not f38_arg0._purchaseData or not f38_arg0._purchaseData[f38_arg0._currentFocusIndex] then
		return 
	end
	local f38_local3 = f38_arg0._purchaseData[f38_arg0._currentFocusIndex]
	local f38_local4 = f38_arg0._purchaseData[f38_arg0._currentFocusIndex].isFirstParty
	if f38_local4 then
		f38_local4 = f38_arg0._purchaseData[f38_arg0._currentFocusIndex].name == "blackcell"
	end
	if f38_arg0._seasonToUse < SEASON.GetCurrentSeason() then
		if f38_local4 then
			if f38_local2 == 1 then
				f38_local0 = f0_local0
			elseif f38_local2 == 2 then
				f38_local0 = f0_local0
			else
				f38_local0 = f0_local0
			end
		else
			f38_local0 = f38_local3.bink
		end
		f38_local1 = f0_local0
	elseif f38_local4 then
		if f38_local2 == 1 then
			f38_local0 = f0_local0
		elseif f38_local2 == 2 then
			f38_local0 = f0_local0
		else
			f38_local0 = f0_local0
		end
	else
		f38_local0 = f38_local3.bink
	end
	local f38_local5 = Engine[0xFCF332AA8AC9B0F]
	local f38_local6
	if not String.IsNilOrEmpty( f38_local0 ) and not f38_local0 then
		f38_local6 = f38_local0
	else
		f38_local6 = f38_local1
	end
	f38_local5( f38_local6, VideoPlaybackFlags.LOOP )
end

local f0_local16 = function ( f37_arg0, f37_arg1, f37_arg2 )
	if f37_arg0._purchaseData[f37_arg2] then
		ACTIONS.AnimateSequence( f37_arg0, 0x0 .. f37_arg0._purchaseData[f37_arg2].typePrefix .. "of" .. #f37_arg0._purchaseData )
	end
	if f37_arg2 ~= f37_arg0._currentFocusIndex then
		if f37_arg0._currentFocusIndex then
			local f37_local0 = Engine[0xC4146BA76D0F982]
			local f37_local1
			if 0 < f37_arg0._currentFocusIndex - f37_arg2 then
				f37_local1 = SOUND_SETS.battlePass.bpBladeLeft
				if not f37_local1 then
				
				else
					f37_local0( f37_local1 )
				end
			end
			f37_local1 = SOUND_SETS.battlePass.bpBladeRight
		end
		f37_arg0._currentFocusIndex = f37_arg2
		f0_local0( f37_arg0 )
		for f37_local0 = 1, #f37_arg0._purchaseData, 1 do
			local f37_local3 = f37_arg0._purchaseData[f37_local0].blade
			local f37_local4 = f37_local3
			f37_local3 = f37_local3.processEvent
			local f37_local5 = {}
			local f37_local6
			if f37_local0 == f37_arg0._currentFocusIndex then
				f37_local6 = "expand_blade"
			else
				f37_local6 = "collapse_blade"
			end
			f37_local5.name = f37_local6
			f37_local5.controllerIndex = f37_arg1
			f37_local3( f37_local4, f37_local5 )
		end
		if f37_arg0._purchaseData[f37_arg2].isFirstParty then
			f37_local0 = f37_arg0.CodPointsBannerLayout:GetWidget()
			f37_local0:Show( false )
		else
			local f37_local0 = f37_arg0.CodPointsBannerLayout:GetWidget()
			f37_local0:Show( true )
			f37_local0:SetMouseFocusBlocker( false )
		end
	end
end

local f0_local17 = function ( f36_arg0, f36_arg1 )
	local f36_local0 = f36_arg0._currentFocusIndex
	local f36_local1 = f36_arg0._currentFocusIndex
	if f36_local1 then
		if CONDITIONS.ButtonLeft( f36_arg0, f36_arg1 ) or CONDITIONS.IsMouseWheelEvent( f36_arg1 ) and CONDITIONS.ButtonUp( f36_arg0, f36_arg1 ) then
			if f36_local1 <= #f36_arg0._purchaseData and 1 < f36_local1 then
				f36_local1 = f36_local1 - 1
			end
		elseif (CONDITIONS.ButtonRight( f36_arg0, f36_arg1 ) or CONDITIONS.IsMouseWheelEvent( f36_arg1 ) and CONDITIONS.ButtonDown( f36_arg0, f36_arg1 )) and 1 <= f36_local1 and f36_local1 < #f36_arg0._purchaseData then
			f36_local1 = f36_local1 + 1
		end
		if f36_local0 ~= f36_local1 then
			f36_arg0:UpdateSelectedBlade( f36_arg1.controller, f36_local1 )
		end
	end
end

local f0_local18 = function ( f35_arg0 )
	BATTLEPASS.SendBattlePassLeaveMenuDlogEvent( f35_arg0 )
	if Engine[0x836C8AD984F14F6]() then
		InGameStore.ShowStoreIcon( false )
	end
	if f35_arg0._isFromAAR then
		BATTLEMAP.OpenBattleMap( f35_arg0._controllerIndex )
	end
	ACTIONS.LeaveMenu( f35_arg0 )
end

local f0_local19 = function ( f34_arg0, f34_arg1 )
	local f34_local0 = f0_local0()
	if f34_local0 then
		f34_local0:ProcessPurchaseSuccess()
	end
	local f34_local1 = DataSources.frontEnd.MP.commerce.premiumCurrency:GetValue( f34_arg0._controllerIndex ) or 0
	if f34_arg0._isOpenedFromStore then
		local f34_local2 = "store"
	else
		local f34_local2 = "battlpass menu"
	end
	local f34_local2
	if f34_arg0._isOpenedFromBundleUpsell then
		local f34_local3 = LUI.FlowManager.GetMenuNameAtIndex( -1 )
		if not f34_local3 then
			f34_local2 = f34_local3
		else
			f34_local2 = ""
		end
	end
	Engine[0x15D98DF5F61904B]( f34_arg0._controllerIndex, "dlog_event_bp_purchase", {
		tokens_spent = 0,
		tokens_earned = 0,
		last_bp_unlock = nil,
		last_ui_screen = nil,
		blackcell_player_b = STORE.UI.DoesPlayerOwnBlackCellBundleForSeason( f34_arg0._controllerIndex, f34_arg0._seasonToUse ),
		old_cp_balance = f34_arg0._oldCPBalance,
		new_cp_balance = f34_local1,
		purchase_source = f34_local2,
		cp_spent = f34_local1 - f34_arg0._oldCPBalance
	} )
	f0_local0( f34_arg0 )
	local f34_local3 = BATTLEMAP.GetBaseMenuScopedData()
	if f34_local3 then
		f34_local3.state = BATTLEMAP.BattlePassStates.PURCHASE_PASS
		f34_local3.isFromPurchase = true
		f34_local3.previousFocusedSectorIndex = 1
		if f34_arg1.bundle and f34_arg1.bundle[0xC57E42946F6E08C] == BATTLEMAP.GetBlackCellBundleGroup() then
			BATTLEPASS.BuildUnownedBlackCellLootIDs( f34_arg0._controllerIndex, true )
			f34_local3.state = BATTLEMAP.BattlePassStates.PURCHASE_BLACK_CELL
			f34_local3.previousFocusedSectorIndex = BATTLEMAP.BLACK_CELL + 1
			f34_local3.tokensPurchased = f34_arg0._firstPartyTokenAmount
		elseif f34_arg0._bundleSKUBeingPurchased then
			local f34_local4 = f34_arg0._bundleSKUBeingPurchased and BATTLEPASS.GetItemRefBySkuID( f34_arg0._bundleSKUBeingPurchased ) or nil
			if not String.IsNilOrEmpty( f34_local4 ) then
				local f34_local5
				if f34_local4 then
					f34_local5 = BATTLEPASS.GetItemType( f34_local4 )
					if not f34_local5 then
					
					elseif f34_local5 == BATTLEPASS.ITEM_TYPES.BUNDLE then
						f34_local3.tokensPurchased = f34_arg0._bundleTokenAmount
					end
				end
				f34_local5 = nil
			end
		end
	end
	if f34_arg0._isOpenedFromStore then
		BATTLEMAP.RestoreFocusToBattlePassTab( f34_arg0._controllerIndex )
		f0_local0( f34_arg0 )
	elseif f34_arg0._isOpenedFromBundleUpsell then
		BATTLEMAP.OpenBattleMap( f34_arg0._controllerIndex )
	else
		f0_local0( f34_arg0 )
	end
end

local f0_local20 = function ( f33_arg0, f33_arg1 )
	
end

local f0_local21 = function ( f31_arg0, f31_arg1 )
	local f31_local0 = f0_local0()
	if f31_local0 then
		if f31_arg1.transactionResult == f31_local0.BundlePurchasePopup.PURCHASE_STATUS.CANCELLING then
			f31_local0:ProcessPurchaseCancellation()
		else
			f31_local0:ProcessPurchaseFailure()
		end
	end
	local f31_local1 = f31_arg0:Wait( 3000 )
	f31_local1.onComplete = function ()
		f31_arg0( f31_arg0 )
	end
	
end

local f0_local22 = function ( f30_arg0 )
	f0_local0( f30_arg0 )
end

local f0_local23 = function ( f29_arg0, f29_arg1, f29_arg2 )
	BATTLEPASS.RegisterPurchaseCallbacks( f29_arg0, f29_arg1, {
		[BATTLEPASS.PurchaseCallbackKeys.SUCCESS] = f0_local0,
		[BATTLEPASS.PurchaseCallbackKeys.UPDATED] = f0_local0,
		[BATTLEPASS.PurchaseCallbackKeys.FAILURE] = f0_local0
	} )
	f29_arg0._bundleSKUBeingPurchased = f29_arg2[0x6B65B4278C6C417]
	BATTLEPASS.Purchase( f29_arg1, tonumber( f29_arg2[0x6B65B4278C6C417] ), 1, f29_arg0._seasonToUse, {
		categoryName = f29_arg0._storeCategoryName,
		categoryRowIndex = f29_arg0._storeCategoryRowIndex,
		categoryButtonIndex = f29_arg0._storeCategoryButtonIndex
	} )
end

local f0_local24 = function ( f28_arg0, f28_arg1, f28_arg2 )
	local f28_local0
	if tonumber( f28_arg2[0xB0EBE833626682B] ) ~= LOOT.CurrencyIDs.COD_POINTS or tonumber( f28_arg2[0x7384DAB3F540BAA] ) > Commerce[0xFCE51EA6B7B00CC]( f28_arg1, LOOT.CurrencyIDs.COD_POINTS ) then
		f28_local0 = false
	else
		f28_local0 = true
	end
	return f28_local0
end

local f0_local25 = function ( f27_arg0, f27_arg1, f27_arg2 )
	if not f0_local0( f27_arg0, f27_arg1, f27_arg2.data ) then
		STORE.EnterStore( f27_arg1, f27_arg0.id, f27_arg0.id, {
			showBalance = true,
			currencyID = LOOT.CurrencyIDs.COD_POINTS,
			currencyAmount = f27_arg2.data[0x7384DAB3F540BAA]
		}, "PurchaseCODPointsPopup", true )
	else
		f27_arg0._showingPurchasePopup = true
		for f27_local3, f27_local4 in pairs( f27_arg0._purchaseData ) do
			if f27_local4.container then
				f27_local4.container:SetHandleMouseMove( false )
			end
		end
		if not CONDITIONS.IsMenuInStack( "JupBundlePurchasePopupContainer" ) then
			f27_local0 = nil
			if f27_arg2.data[0xF4F13D3AC438B16] == BATTLEPASS.ITEM_TYPES.BUNDLE then
				f27_local0 = Engine[0xED84C33EC5F01EA]( 0x8A77C776CD02C3F, f27_arg0._seasonToUse )
			else
				f27_local0 = Engine[0xED84C33EC5F01EA]( 0x6F14D32D0B5B4D2, f27_arg0._seasonToUse )
			end
			LUI.FlowManager.RequestPopupMenu( nil, "JupBundlePurchasePopupContainer", true, f27_arg1, false, {
				bundleData = f27_arg2,
				bundleNameOverride = f27_local0,
				imageOverride = RegisterMaterial( "jup_battlepass_billboard_season_" .. string.format( "%02d", f27_arg0._seasonToUse ) )
			}, nil, false, true )
		end
	end
end

local f0_local26 = function ( f25_arg0, f25_arg1, f25_arg2 )
	if f25_arg2.isFPPurchase then
		if f25_arg0._disableBlackCellPurchaseButton then
			
		else
			
		end
		local f25_local0 = LUI.FlowManager.GetScopedData( f25_arg0 )
		if f25_local0 then
			f25_local0.startedFPFlow = true
			f25_local0.bundleData = f25_arg2.data
		end
		f25_arg0._showingPurchasePopup = true
		if not CONDITIONS.IsMenuInStack( "JupBundlePurchasePopupContainer" ) then
			LUI.FlowManager.RequestPopupMenu( nil, "JupBundlePurchasePopupContainer", true, f25_arg1, false, nil, nil, false, true )
			local f25_local1 = f0_local0()
			f25_local1.BundlePurchasePopup.BundleImage:setImage( RegisterMaterial( STORE.Bundles.GetTitleImage( f25_arg2.data ) ) )
			f25_local1.BundlePurchasePopup.BundleName:setText( f25_arg2.title )
			f25_local1.BundlePurchasePopup.BundlePrice:UpdatePrice( f25_arg2.data )
			f25_local1:SetAnimationSequence( 0xDD9D1ED490B9525 )
		end
		STORE.UI.PurchaseBundle( f25_arg1, f25_arg2.data, function ()
			f25_arg0:ClosePurchasePopup()
		end, {
			categoryName = f25_arg0._storeCategoryName,
			categoryRowIndex = f25_arg0._storeCategoryRowIndex,
			categoryButtonIndex = f25_arg0._storeCategoryButtonIndex
		} )
		if not f25_arg0._purchaseHandlerAdded then
			STORE.Events.AddPurchaseHandler( f25_arg0, f25_arg1, f0_local0, f0_local0, {
				ignoreReboot = true
			} )
			f25_arg0._purchaseHandlerAdded = true
		end
	else
		STORE.Events.RemovePurchaseHandler( f25_arg0 )
		f0_local0( f25_arg0, f25_arg1, f25_arg2 )
		f25_arg0._purchaseHandlerAdded = false
	end
end

local f0_local27 = function ( f24_arg0, f24_arg1 )
	local f24_local0 = 1
	local f24_local1 = false
	for f24_local5, f24_local6 in ipairs( f24_arg0._purchaseData ) do
		if f24_local6.typePrefix == BATTLEPASS.ITEM_TYPES.BUNDLE then
			f24_local1 = true
		end
	end
	for f24_local5, f24_local6 in ipairs( f24_arg0._purchaseData ) do
		if f24_local6.refFunction then
			if f24_local6.isFirstParty then
				f24_local6.blade:SetupBlade( f24_arg1, f24_arg0, f24_local6.refFunction( f24_arg0, f24_arg1 ), f24_local6.tokenAmount, f24_arg0._isSeasonRecap, f24_arg0._seasonToUse, f24_local1, f0_local0, f24_arg0._disableBlackCellPurchaseButton )
			elseif f24_local6.tokenAmount then
				f24_local6.blade:SetupBlade( f24_arg1, f24_arg0, f24_local6.refFunction(), f24_local6.tokenAmount, f24_arg0._isSeasonRecap, f24_arg0._seasonToUse, f0_local0 )
			else
				f24_local6.blade:SetupBlade( f24_arg1, f24_arg0, f24_local6.refFunction(), f24_arg0._isSeasonRecap, f24_arg0._seasonToUse, f0_local0 )
			end
		end
		f24_local6.blade.index = f24_local5
		f24_local6.blade:SetButtonDisabled( false )
		f24_local6.blade:SetVisible( true )
	end
end

local f0_local28 = function ( f23_arg0, f23_arg1 )
	return STORE.UI.GetJupiterVaultEditionBundle( f23_arg1 )
end

local f0_local29 = function ( f22_arg0, f22_arg1 )
	return STORE.UI.GetBlackCellBundleForSeason( f22_arg1, f22_arg0._seasonToUse )
end

local f0_local30 = function ( f14_arg0, f14_arg1 )
	f14_arg0.UpdateSelectedBlade = f0_local0
	f14_arg0.ProcessPurchase = f0_local0
	f14_arg0.PurchaseCancelled = f0_local0
	f14_arg0.FinalizePurchase = f0_local0
	f14_arg0._mouseOverIndex = 1
	f14_arg0._oldCPBalance = DataSources.frontEnd.MP.commerce.premiumCurrency:GetValue( f14_arg1 ) or 0
	f14_arg0:SetHandleMouse( true )
	local f14_local0 = BATTLEPASS.IsOwned( f14_arg1, f14_arg0._seasonToUse )
	f14_arg0._purchaseData = {}
	if not f14_local0 then
		local f14_local1 = table.insert
		local f14_local2 = f14_arg0._purchaseData
		local f14_local3 = 1
		local f14_local4 = {
			typePrefix = "Battlepass",
			name = "battlepass"
		}
		local f14_local5 = f14_arg0._seasonToUse
		local f14_local6 = SEASON.GetCurrentSeason()
		f14_local4.bink = REG15 and f0_local0 or f0_local0
		f14_local4.blade = f14_arg0.StandardBlade
		f14_local4.refFunction = BATTLEPASS.GetPurchaseRef
		f14_local4.container = f14_arg0.StandardBlade
		f14_local4.seasonToUse = f14_arg0._seasonToUse
		f14_local1( f14_local2, f14_local3, f14_local4 )
		if Dvar[0x9E5BE3B4BBA4E0E]( 0x39AB6410DA91795 ) then
			f14_local2 = BATTLEPASS.GetBattlepassIDBundleForRef( BATTLEPASS.GetPurchaseBundleRef() )
			f14_local3 = f14_arg0._seasonToUse
			f14_local4 = SEASON.GetCurrentSeason()
			f14_local3 = REG18 and f0_local0 or f0_local0
			f14_arg0._bundleTokenAmount = BATTLEPASS.GetBundleTokenAmount( f14_local2 )
			table.insert( f14_arg0._purchaseData, 1, {
				typePrefix = "Bundle",
				name = "bundle",
				bink = f14_local3,
				blade = f14_arg0.BundleBlade,
				refFunction = BATTLEPASS.GetPurchaseBundleRef,
				container = f14_arg0.BundleBlade,
				tokenAmount = f14_arg0._bundleTokenAmount,
				seasonToUse = f14_arg0._seasonToUse
			} )
		end
	end
	local f14_local1 = false
	local f14_local7 = STORE.UI.IsBlackCellBundleAvailable( f14_arg1, f14_arg0._seasonToUse )
	if f14_local7 then
		f14_local7 = not STORE.UI.DoesPlayerOwnBlackCellBundleForSeason( f14_arg1, f14_arg0._seasonToUse )
	end
	if f14_arg0.VaultBlade and f14_local1 then
		if f14_arg0.FirstPartyBlade then
			f14_arg0.FirstPartyBlade:closeTree()
			f14_arg0.FirstPartyBlade = nil
		end
		local f14_local2 = f0_local0( f14_arg0, f14_arg1 )
		f14_arg0._firstPartyTokenAmount = BATTLEPASS.GetStoreBundleTokenAmount( f14_local2 )
		table.insert( f14_arg0._purchaseData, 1, {
			name = "vault",
			isFirstParty = true,
			typePrefix = "FirstParty",
			bink = f0_local0,
			blade = f14_arg0.VaultBlade,
			refFunction = f0_local0,
			container = f14_arg0.FirstPartyBlade,
			tokenAmount = f14_arg0._firstPartyTokenAmount,
			seasonToUse = f14_arg0._seasonToUse
		} )
		f14_arg0._disableBlackCellPurchaseButton = not STORE.Bundles.IsAvailable( f14_arg1, f14_local2 )
	elseif f14_arg0.FirstPartyBlade and f14_local7 then
		if f14_arg0.VaultBlade then
			f14_arg0.VaultBlade:closeTree()
			f14_arg0.VaultBlade = nil
		end
		local f14_local2 = f0_local0( f14_arg0, f14_arg1 )
		f14_arg0._firstPartyTokenAmount = BATTLEPASS.GetStoreBundleTokenAmount( f14_local2 )
		table.insert( f14_arg0._purchaseData, 1, {
			typePrefix = "FirstParty",
			isFirstParty = true,
			name = "blackcell",
			blade = f14_arg0.FirstPartyBlade,
			refFunction = f0_local0,
			container = f14_arg0.FirstPartyBlade,
			tokenAmount = f14_arg0._firstPartyTokenAmount,
			seasonToUse = f14_arg0._seasonToUse
		} )
		f14_arg0._disableBlackCellPurchaseButton = not STORE.Bundles.IsAvailable( f14_arg1, f14_local2 )
	end
	if #f14_arg0._purchaseData == 1 and f14_arg0._purchaseData[1].name == "blackcell" then
		f14_arg0.SelectBpTitle:setText( Engine[0xED84C33EC5F01EA]( 0xEE803014F9F2CAC ), 0 )
	end
	if 0 < #f14_arg0._purchaseData then
		f0_local0( f14_arg0, f14_arg1 )
		f14_arg0:UpdateSelectedBlade( f14_arg1, 1 )
	end
	if f14_arg0._buttonToFocus then
		for f14_local5, f14_local6 in ipairs( f14_arg0._purchaseData ) do
			if f14_local6.name == f14_arg0._buttonToFocus then
				f14_arg0:UpdateSelectedBlade( f14_arg1, f14_local5 )
				break
			end
		end
		f14_arg0._buttonToFocus = nil
	end
	f14_arg0:AddGamepadEventCallback( "button_left", function ( f21_arg0, f21_arg1 )
		f14_arg0( f21_arg0, f21_arg1 )
	end )
	f14_arg0:AddGamepadEventCallback( "button_right", function ( f20_arg0, f20_arg1 )
		f14_arg0( f20_arg0, f20_arg1 )
	end )
	f14_arg0:AddGamepadEventCallback( "button_primary", function ( f19_arg0, f19_arg1 )
		if LUI.IsLastInputKeyboardMouse( f19_arg1.controller ) then
			local f19_local0 = f19_arg0._purchaseData[f19_arg0._currentFocusIndex].container
			if LUI.IsLastInputKeyboardNavigation( f19_arg1.controller ) or f19_local0:IsPositionInside( f19_arg1.x, f19_arg1.y ) then
				f19_local0._purchaseCallback( f19_arg0, f19_arg1.controller, f19_local0._bundleData )
				Engine[0xC4146BA76D0F982]( CoD.SFX.MouseClick )
				return true
			else
				local f19_local1 = f19_arg0._mouseOverIndex
				local f19_local2 = f19_arg0._currentFocusIndex
				Engine[0xC4146BA76D0F982]( REG9 and SOUND_SETS.battlePass.bpBladeLeft or SOUND_SETS.battlePass.bpBladeRight )
				f19_arg0:UpdateSelectedBlade( f19_arg1.controller, f19_arg0._mouseOverIndex )
				return true
			end
		else
			
		end
	end )
	f14_arg0:AddGamepadEventCallback( "button_down", function ( f18_arg0, f18_arg1 )
		f14_arg0( f18_arg0, f18_arg1 )
		return true
	end )
	f14_arg0:AddGamepadEventCallback( "button_up", function ( f17_arg0, f17_arg1 )
		f14_arg0( f17_arg0, f17_arg1 )
		return true
	end )
	if LUI.FlowManager.IsInStack( "JupBattlePassUpsellPopupMenu" ) then
		LUI.FlowManager.RequestLeaveMenuByName( "JupBattlePassUpsellPopupMenu" )
	end
	f14_arg0:registerEventHandler( "enable_purchase_button", function ( element, event )
		element._disableBlackCellPurchaseButton = not event.enableButton
	end )
	f14_arg0:registerEventHandler( BATTLEPASS.BP_PURCHASE_CONFIRM_POPUP_EVENT.NAME, function ( element, event )
		if event.action == BATTLEPASS.BP_PURCHASE_CONFIRM_POPUP_EVENT.ACTIONS.CONFIRM then
			if STORE.Bundles.IsFirstParty( event.bundleData.data ) then
				element:ProcessPurchase( event.controller, event.bundleData )
			else
				element:FinalizePurchase( event.controller, event.bundleData.data )
			end
		elseif event.action == BATTLEPASS.BP_PURCHASE_CONFIRM_POPUP_EVENT.ACTIONS.CANCEL then
			element:PurchaseCancelled()
		end
	end )
end

local f0_local31 = function ( f13_arg0 )
	local f13_local0
	if f13_arg0._storeStatus ~= BATTLEPASS.DATA_STATES.READY or f13_arg0._achievementEngineFenceStatus ~= BATTLEPASS.DATA_STATES.READY then
		f13_local0 = false
	else
		f13_local0 = true
	end
	return f13_local0
end

local f0_local32 = function ( f12_arg0 )
	local f12_local0
	if f12_arg0._storeStatus ~= BATTLEPASS.DATA_STATES.FAILURE and f12_arg0._achievementEngineFenceStatus ~= BATTLEPASS.DATA_STATES.FAILURE then
		f12_local0 = false
	else
		f12_local0 = true
	end
	return f12_local0
end

local f0_local33 = function ( f11_arg0, f11_arg1 )
	if f0_local0( f11_arg0 ) then
		ACTIONS.AnimateSequence( f11_arg0, 0xA81F3741FA4E9E0 )
		f0_local0( f11_arg0, f11_arg1 )
	elseif f0_local0( f11_arg0 ) then
		LUI.FlowManager.RequestErrorPopup( f11_arg1, Engine[0xED84C33EC5F01EA]( 0xD09E09A43DE9B80 ), Engine[0xED84C33EC5F01EA]( 0x2D1270EC2170BC1 ) )
		ACTIONS.LeaveMenu( f11_arg0 )
	end
end

local f0_local34 = function ( f8_arg0, f8_arg1 )
	f8_arg0._storeStatus = BATTLEPASS.DATA_STATES.WAITING
	STORE.Popups.AttachWaitForInitStore( f8_arg0, f8_arg1, {
		useCache = false,
		showEmptyStoreDialog = true,
		onFetchSuccess = function ( f10_arg0 )
			f10_arg0._storeStatus = BATTLEPASS.DATA_STATES.READY
			f8_arg0( f10_arg0, f8_arg0 )
		end,
		onFetchError = function ( f9_arg0, f9_arg1 )
			if Engine[0x836C8AD984F14F6]() then
				InGameStore.ShowEmptyStoreDialog( f8_arg0 )
			end
			f9_arg0._storeStatus = BATTLEPASS.DATA_STATES.FAILURE
			f8_arg0( f9_arg0, f8_arg0 )
		end
	} )
end

local f0_local35 = function ( f6_arg0, f6_arg1 )
	f6_arg0._achievementEngineFenceStatus = BATTLEPASS.DATA_STATES.WAITING
	LUI.DeferredFence.Attach( f6_arg0, f6_arg1, "ACHIEVEMENTENGINE", LUI.DeferredFence.Criticality.LOW, LUI.DeferredFence.BackOutMethod.NONE, function ( f7_arg0, f7_arg1 )
		if f7_arg0._achievementEngineFenceStatus ~= BATTLEPASS.DATA_STATES.WAITING or f7_arg1.fenceState ~= LUI.Fence.FenceObjectState.PASSING and f7_arg1.fenceState ~= LUI.Fence.FenceObjectState.FAILED then
			return 
		elseif f7_arg1.fenceState == LUI.Fence.FenceObjectState.PASSING then
			f7_arg0._achievementEngineFenceStatus = BATTLEPASS.DATA_STATES.READY
		else
			f7_arg0._achievementEngineFenceStatus = BATTLEPASS.DATA_STATES.FAILURE
		end
		f6_arg0( f7_arg0, f6_arg0 )
	end )
end

local f0_local36 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0._isOpenedFromStore = f3_arg2.fromStore
	f3_arg0._storeCategoryName = f3_arg2.categoryName
	f3_arg0._storeCategoryRowIndex = f3_arg2.categoryRowIndex
	f3_arg0._storeCategoryButtonIndex = f3_arg2.categoryButtonIndex
	f3_arg0._isOpenedFromMap = f3_arg2.fromMapPopup
	f3_arg0._isFromAAR = f3_arg2.isFromAAR
	local f3_local0 = f3_arg2.fromBundleUpsell
	if f3_local0 then
		f3_local0 = Dvar[0x9E5BE3B4BBA4E0E]( 0x56C85C777240B6E )
	end
	f3_arg0._isOpenedFromBundleUpsell = f3_local0
	f3_arg0._isSeasonRecap = f3_arg2.isSeasonRecap and f3_arg2.isSeasonRecap or false
	f3_arg0.FirstPartyBlade:SetVisible( false )
	f3_arg0.FirstPartyBlade:SetButtonDisabled( true )
	f3_arg0.BundleBlade:SetVisible( false )
	f3_arg0.BundleBlade:SetButtonDisabled( true )
	f3_arg0.StandardBlade:SetVisible( false )
	f3_arg0.StandardBlade:SetButtonDisabled( true )
	f3_local0 = f3_arg0.CodPointsBannerLayout:GetWidget()
	f3_local0:Show( false )
	f3_local0 = f3_arg2.seasonToUse
	if not f3_local0 then
		f3_local0 = SEASON.GetCurrentSeason()
	end
	f3_arg0._seasonToUse = f3_local0
	f3_local0 = URI.State
	local f3_local1
	if f3_local0 then
		f3_local1 = f3_local0
	else
		f3_local1 = f3_local0.request
		if f3_local1 then
			f3_local1 = f3_local0.request.query
			if f3_local1 then
				f3_local1 = f3_local0.request.query.buttontofocus
			end
		end
	end
	f3_arg0._buttonToFocus = f3_local1
	Engine[0x3DACD106DDC0D71]()
	f3_arg0._enterTime = CoD.GetUTC()
	f3_arg0._controllerIndex = f3_arg1
	f3_arg0.MenuTitle:SetTitle( " " )
	if f3_arg0.MenuTitle.DisableGlobalWidgets then
		f3_arg0.MenuTitle:DisableGlobalWidgets()
	end
	if f3_arg0._isSeasonRecap then
		ACTIONS.AnimateSequence( f3_arg0, "SeasonRecap" )
	end
	f3_arg0:AddGamepadEventCallback( "button_secondary", function ( f5_arg0, f5_arg1 )
		if f5_arg0._showingPurchasePopup then
			return 
		else
			f3_arg0( f5_arg0 )
		end
	end )
	f0_local0( f3_arg0, f3_arg1 )
	f0_local0( f3_arg0, f3_arg1 )
	f3_arg0:registerEventHandler( "menu_close", function ()
		Engine[0x3DACD106DDC0D71]()
		if CONDITIONS.IsSony() then
			InGameStore.ShowStoreIcon( false )
		end
	end )
end

local f0_local37 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PostLoadShared = f0_local0
end

function JupBattlePassPurchasePopupBase( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = f1_local0.UIVerticalNavigatorMenu.new()
	f1_local1.id = "JupBattlePassPurchasePopupBase"
	local f1_local2
	if f1_arg1 then
		f1_local2 = f1_arg1
	else
		f1_local2 = f1_arg1.controllerIndex
	end
	f1_local2 = f1_local0.ValidateControllerIndex( f1_local1, f1_local2 )
	local f1_local3 = f1_local1
	f0_local0( f1_local1, f1_local2, f1_arg1 )
	return f1_local1
end

MenuBuilder.registerType( 0x799C3FAE10AD373, JupBattlePassPurchasePopupBase )
LockTable( _M )
