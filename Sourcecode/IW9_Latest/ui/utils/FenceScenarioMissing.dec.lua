-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
module( ..., package.seeall )
FenceScenarioMissing = LUI.Class( LUI.Fence )
FenceScenarioMissing.init = function ( f20_arg0, f20_arg1 )
	assert( type( f20_arg1 ) == "xhash" )
	LUI.Fence.init( f20_arg0 )
	f20_arg0._scenarioGroup = f20_arg1
end

FenceScenarioMissing.Start = function ( f19_arg0 )
	assert( f19_arg0._scenarioGroup )
	if Engine[0xC8B174B6BF663C4]( f19_arg0._scenarioGroup ) or Engine[0x30DB4285F2AEF83]( f19_arg0._scenarioGroup ) then
		f19_arg0._state = LUI.Fence.STATE.pass
	else
		f19_arg0._state = LUI.Fence.STATE.block
	end
end

FenceScenarioMissing.Stop = function ( f18_arg0 )
	
end

FenceScenarioMissing.OnBackOut = function ( f17_arg0 )
	Engine[0x5BEA42EE45B1EE0]()
end

FenceScenarioMissing.PostFail = function ( f16_arg0 )
	if f16_arg0._state == LUI.Fence.STATE.fail and f16_arg0._errorMessage then
		LUI.FlowManager.RequestPopupMenu( nil, "PopupFenceGameModeError", false, nil, false, {
			message = f16_arg0._errorMessage
		}, nil, false, true )
	end
end

FenceScenarioMissing.UpdateState = function ( f15_arg0 )
	assert( f15_arg0._state ~= LUI.Fence.STATE.fail )
	if f15_arg0._state == LUI.Fence.STATE.block then
		local f15_local0 = ScenarioRequestStatus.PENDING
		if not f15_arg0._requested then
			f15_local0 = Engine[0xBDB15633C002D13]( Engine[0x45B054C920178E9](), f15_arg0._scenarioGroup )
			f15_arg0._requested = true
		else
			f15_local0 = Engine[0x315859396890DAD]( f15_arg0._scenarioGroup )
		end
		assert( f15_local0 ~= ScenarioRequestStatus.ERROR_UNKNOWN )
		if f15_local0 == ScenarioRequestStatus.DECLINED then
			f15_arg0._state = LUI.Fence.STATE.fail
		elseif f15_local0 == ScenarioRequestStatus.ACCEPTED then
			f15_arg0._state = LUI.Fence.STATE.pass
		elseif f15_local0 ~= ScenarioRequestStatus.PENDING then
			f15_arg0._state = LUI.Fence.STATE.fail
			f15_arg0._errorMessage = Engine[0xED84C33EC5F01EA]( 0x8401F2CF44B2A61 )
		end
	end
end

FenceScenarioMissingFail = LUI.Class( LUI.Fence )
FenceScenarioMissingFail.init = function ( f14_arg0, f14_arg1 )
	assert( type( f14_arg1 ) == "xhash" )
	LUI.Fence.init( f14_arg0 )
	f14_arg0._scenarioGroup = f14_arg1
end

FenceScenarioMissingFail.UpdateState = function ( f13_arg0 )
	if Engine[0xC8B174B6BF663C4]( f13_arg0._scenarioGroup ) then
		f13_arg0._state = LUI.Fence.STATE.pass
	else
		f13_arg0._state = LUI.Fence.STATE.fail
	end
end

FenceScenarioMissingFail.PostFail = function ( f12_arg0 )
	local f12_local0 = Engine[0x45B054C920178E9]()
	Engine[0x5DEE98AA6FB3C2]( f12_local0, CoD.LeavePartyMoveUI.YES, CoD.LeavePartyShowMessage.NO, "FenceScenarioMissing.PostFail" )
	FILE_MANAGEMENT.ShowPopupIfMissingDLC( f12_local0, f12_arg0._scenarioGroup )
end

FenceScenarioMissingSP = LUI.Class( FenceScenarioMissingFail )
FenceScenarioMissingSP.init = function ( f11_arg0 )
	FenceScenarioMissingSP.super.init( f11_arg0, CoD.Scenarios.SP22 )
end

LUI.Fence.Register( "scenarioMissingSP", FenceScenarioMissingSP )
FenceScenarioMissingMP = LUI.Class( FenceScenarioMissingFail )
FenceScenarioMissingMP.init = function ( f10_arg0 )
	FenceScenarioMissingMP.super.init( f10_arg0, CoD.Scenarios.MP22 )
end

LUI.Fence.Register( "scenarioMissingMP", FenceScenarioMissingMP )
FenceScenarioMissingCP = LUI.Class( FenceScenarioMissingFail )
FenceScenarioMissingCP.init = function ( f9_arg0 )
	FenceScenarioMissingCP.super.init( f9_arg0, CoD.Scenarios.CP22 )
end

LUI.Fence.Register( "scenarioMissingCP", FenceScenarioMissingCP )
FenceScenarioMissingBR = LUI.Class( FenceScenarioMissingFail )
FenceScenarioMissingBR.init = function ( f8_arg0 )
	FenceScenarioMissingBR.super.init( f8_arg0, CoD.Scenarios.WZ )
end

LUI.Fence.Register( "scenarioMissingBR", FenceScenarioMissingBR )
FenceScenarioMissingByPlaylist = LUI.Class( LUI.Fence )
FenceScenarioMissingByPlaylist.init = function ( f7_arg0, f7_arg1 )
	LUI.Fence.init( f7_arg0 )
	f7_arg0._GetCurrentPlaylist = f7_arg1
end

FenceScenarioMissingByPlaylist.UpdateState = function ( f6_arg0 )
	local f6_local0, f6_local1 = f6_arg0._GetCurrentPlaylist()
	f6_arg0._missingScenarioGroups = PlaylistUtils.GetMissingScenarioGroupsPlaylistOrCategory( f6_local1, f6_local0 )
	if next( f6_arg0._missingScenarioGroups ) == nil then
		f6_arg0._state = LUI.Fence.STATE.pass
	else
		f6_arg0._state = LUI.Fence.STATE.fail
	end
end

FenceScenarioMissingByPlaylist.PostFail = function ( f5_arg0 )
	local f5_local0 = Engine[0x45B054C920178E9]()
	if CONDITIONS.InPrivatePartyAndNotHost() then
		Engine[0x5DEE98AA6FB3C2]( f5_local0, CoD.LeavePartyMoveUI.YES, CoD.LeavePartyShowMessage.NO, "FenceScenarioMissingByPlaylist.PostFail" )
	end
	if f5_arg0._missingScenarioGroups and 0 < #f5_arg0._missingScenarioGroups then
		FILE_MANAGEMENT.ShowPopupIfMissingDLC( f5_local0, f5_arg0._missingScenarioGroups[1] )
	end
end

local f0_local0 = function ()
	local f4_local0 = Playlist[0x7B3B2B73B53EB34]()
	local f4_local1 = Playlist[0xD78924AD23DE66B]()
	if Playlist[0x29DC19B8CA68312]( f4_local1 ) then
		f4_local0 = PlaylistUtils.USE_FILTERED_PLAYLIST_ID
	end
	return f4_local0, f4_local1
end

FenceScenarioMissingCPPlaylist = LUI.Class( FenceScenarioMissingByPlaylist )
FenceScenarioMissingCPPlaylist.init = function ( f3_arg0 )
	FenceScenarioMissingCPPlaylist.super.init( f3_arg0, f0_local0 )
end

LUI.Fence.Register( "scenarioMissingCPPlaylist", FenceScenarioMissingCPPlaylist )
local f0_local1 = function ()
	if Engine[0x8FF0F1C5B20321E]() or Lobby[0xF1D2956B0C99DF6]() then
		local f2_local0 = Playlist[0x7B3B2B73B53EB34]()
		local f2_local1 = Playlist[0xD78924AD23DE66B]()
		if Playlist[0x29DC19B8CA68312]( f2_local1 ) then
			f2_local0 = PlaylistUtils.USE_FILTERED_PLAYLIST_ID
		end
		return f2_local0, f2_local1
	else
		return Lobby[0xB92DA1948EDB47D]( Lobby.PartyUIData.PLAYLIST_ID ), Lobby[0xB92DA1948EDB47D]( Lobby.PartyUIData.PLAYLIST_CATEGORY )
	end
end

FenceScenarioMissingMPPlaylist = LUI.Class( FenceScenarioMissingByPlaylist )
FenceScenarioMissingMPPlaylist.init = function ( f1_arg0 )
	FenceScenarioMissingMPPlaylist.super.init( f1_arg0, f0_local0 )
end

LUI.Fence.Register( "scenarioMissingMPPlaylist", FenceScenarioMissingMPPlaylist )
LockTable( _M )
