-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
module( ..., package.seeall )
local f0_local0 = function ( f11_arg0, f11_arg1 )
	if f11_arg1 <= 0 then
		f11_arg0._isActive = false
		f11_arg0.Timer:SetAlpha( 0 )
	else
		f11_arg0._isActive = true
		f11_arg0.Timer:SetAlpha( 1 )
		f11_arg0.Timer:setEndTime( f11_arg1 )
	end
end

local f0_local1 = function ( f10_arg0 )
	f10_arg0._isActive = false
	f10_arg0.Timer:SetAlpha( 0 )
	ACTIONS.AnimateSequence( f10_arg0, "DefaultSequence" )
end

local f0_local2 = function ( f9_arg0, f9_arg1 )
	f9_arg0._isBuyRound = f9_arg1
end

local f0_local3 = function ( f5_arg0, f5_arg1, f5_arg2 )
	f5_arg0._isActive = false
	f5_arg0._isBuyRound = false
	f5_arg0.Reset = f0_local0
	f5_arg0.SetEndTime = f0_local0
	f5_arg0.SetIsBuyRound = f0_local0
	f5_arg0.Timer:SetAlpha( 0 )
	f5_arg0.Timer:useLocalizedFormat()
	f5_arg0.Timer:SetCustomFormatType( LUI.UICountdown.CustomFormatType.TOURNAMENT )
	f5_arg0.Timer:setShowDecimalsAtTime( 10 )
	f5_arg0.Timer:setTimeToStart1SecEvents( 11000 )
	f5_arg0.Timer:addEventHandler( "time10sec", function ( f8_arg0, f8_arg1 )
		ACTIONS.AnimateSequence( f5_arg0, "Warning" )
	end )
	f5_arg0.Timer:addEventHandler( "timeReset", function ( f7_arg0, f7_arg1 )
		ACTIONS.AnimateSequence( f5_arg0, "DefaultSequence" )
	end )
	f5_arg0.Timer:registerEventHandler( "time1secElapsed", function ( element, event )
		if f5_arg0._isActive then
			local f6_local0 = event.timeValue / 1000
			if f6_local0 <= 10 then
				Engine[0xC4146BA76D0F982]( "ui_10sec_tick" )
				if f6_local0 <= 3 then
					Engine[0xC4146BA76D0F982]( "ui_10sec_tick_sweetener" )
				end
			end
			if 3 <= f6_local0 and f6_local0 < 4 and f5_arg0._isBuyRound then
				ACTIONS.AnimateSequence( f5_arg0, "BannerTick" )
			end
		end
	end )
end

function TournamentMatchTimer( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 228 * _1080p, 0, 74 * _1080p )
	self.id = "TournamentMatchTimer"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	self._sequenceLengths = self._sequenceLengths or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local Timer = nil
	
	Timer = MenuBuilder.BuildRegisteredType( "UICountdown", {
		controllerIndex = f1_local1
	} )
	Timer.id = "Timer"
	Timer:SetRGBFromTable( SWATCHES.HUD.vHUDDefault, 0 )
	Timer:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_MHeaderBold.font.File ) )
	Timer:SetFontSize( FONT_STYLES.fontStyle_MHeaderBold.size )
	Timer:SetMinFontSize( FONT_STYLES.fontStyle_MHeaderBold.minSize )
	Timer:SetWordWrap( false )
	Timer:SetAlignment( LUI.Alignment.Center )
	Timer:SetVerticalAlignment( LUI.Alignment.Center )
	Timer:SetSDFRenderingEnabled( true )
	Timer:setEndTime( 0 )
	Timer:SetAnchorsAndPosition( 0, 1, 0.5, 0.5, 0, _1080p * 228, _1080p * -37, _1080p * 37 )
	self:addElement( Timer )
	self.Timer = Timer
	
	local f1_local4 = nil
	Timer:RegisterAnimationSequence( "DefaultSequence", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.HUD.vHUDDefault
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Scale
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -37
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 37
		}
	} )
	self._sequences.DefaultSequence = function ()
		menu:AnimateSequence( "DefaultSequence" )
	end
	
	self._sequenceLengths.DefaultSequence = 0
	local f1_local5 = nil
	Timer:RegisterAnimationSequence( "Warning", {
		{
			value = 5.29462817E-315,
			duration = 200,
			property = TWEEN_PROPERTY.Scale,
			easing = LUI.EASING.outQuadratic
		},
		{
			duration = 200,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.highlight.vRedNegative,
			easing = LUI.EASING.outQuadratic
		},
		{
			duration = 200,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -25,
			easing = LUI.EASING.inQuadratic
		},
		{
			duration = 200,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 49,
			easing = LUI.EASING.outQuadratic
		}
	} )
	self._sequences.Warning = function ()
		menu:AnimateSequence( "Warning" )
	end
	
	self._sequenceLengths.Warning = 200
	local f1_local6 = nil
	Timer:RegisterAnimationSequence( "BannerTick", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -37
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 37
		},
		{
			value = 4.667261640415006E-62,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 2,
			duration = 0,
			property = TWEEN_PROPERTY.Scale
		},
		{
			duration = -28,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.highlight.vRedNegative,
			easing = LUI.EASING.outQuadratic
		},
		{
			duration = -28,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -25,
			easing = LUI.EASING.inQuadratic
		},
		{
			duration = -28,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 49,
			easing = LUI.EASING.outQuadratic
		},
		{
			value = 1,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 5.297218497E-315,
			duration = -28,
			property = TWEEN_PROPERTY.Scale,
			easing = LUI.EASING.outQuadratic
		},
		{
			value = 5.297218497E-315,
			duration = 800,
			property = TWEEN_PROPERTY.Scale
		},
		{
			value = 5.301103987E-315,
			duration = 10,
			property = TWEEN_PROPERTY.Scale
		},
		{
			value = -9.255967792281513E+61,
			duration = -38,
			property = TWEEN_PROPERTY.Scale
		}
	} )
	self._sequences.BannerTick = function ()
		menu:AnimateLoop( "BannerTick" )
	end
	
	self._sequenceLengths.BannerTick = 1000
	f0_local0( self, f1_local1, controller )
	ACTIONS.AnimateSequence( self, "DefaultSequence" )
	return self
end

MenuBuilder.registerType( "TournamentMatchTimer", TournamentMatchTimer )
LockTable( _M )
