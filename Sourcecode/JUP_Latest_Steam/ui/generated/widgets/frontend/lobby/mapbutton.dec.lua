-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:04
module( ..., package.seeall )
require( "ui.generated.widgets.buttons.buttonxlarge" )
local f0_local0 = function ( f8_arg0, f8_arg1, f8_arg2 )
	f8_arg0.ButtonLargeTall:setActionSFX( SOUND_SETS.default.action )
	f8_arg0.ButtonLargeTall:SetPrimaryPromptText( "LUA_MENU/SELECT" )
	f8_arg0.ButtonLargeTall:addEventHandler( "button_action", function ( f11_arg0, f11_arg1 )
		local f11_local0 = f8_arg0:GetDataSource()
		if not f11_local0.isOwned:GetValue( f8_arg0 ) then
			local f11_local1 = "vip"
			local f11_local2 = STORE.GoToStore
			local f11_local3 = f8_arg0
			local f11_local4 = f8_arg0:GetCurrentMenu()
			f11_local2( f11_local3, f11_local4.id, f8_arg0.id, f11_local1, false )
			return 
		end
		local f11_local1 = nil
		if CONDITIONS.IsCoreMultiplayer( f8_arg0 ) or CONDITIONS.IsThirdGameMode( f8_arg0 ) then
			f11_local1 = f11_local0.ref:GetValue( f8_arg0 )
		else
			f11_local1 = f11_local0.ref
		end
		local f11_local2 = LUI.FlowManager.GetScopedData( f8_arg0 )
		if f11_local2.isTournament and f11_local2.matchmakerSettings and f11_local2.roundIndex then
			f11_local2.matchmakerSettings.maps[f11_local2.roundIndex] = f11_local1
		else
			Dvar[0xE3CB005036E0C0F]( 0xF237DA69BB64EF6, f11_local1 )
			if CONDITIONS.IsCoreMultiplayer( f8_arg0 ) then
				Dvar[0xE3CB005036E0C0F]( 0x9E0625FBD5887CA, f11_local1 )
			end
			if f11_local0.isExtendedMode and f11_local0.isExtendedMode:GetValue( f8_arg0 ) then
				Dvar[0x2414681ECAB880F]( 0x4DF621525811B4A, 1 )
			else
				Dvar[0x2414681ECAB880F]( 0x4DF621525811B4A, 0 )
			end
			Engine[0xB81A5136C5503E4]( "xupdatepartystate" )
		end
		LUI.FlowManager.RequestLeaveMenu( f8_arg0, true, true )
	end )
	local f8_local0 = function ()
		local f10_local0 = f8_arg0:GetDataSource()
		f10_local0 = f10_local0.name:GetValue( f8_arg0 )
		local f10_local1 = f8_arg0:GetDataSource()
		f10_local1 = f10_local1.previewImage:GetValue( f8_arg0 )
		local f10_local2 = f8_arg0:GetDataSource()
		f10_local2 = f10_local2.ref:GetValue( f8_arg0 )
		if f10_local0 ~= nil and f10_local1 ~= nil then
			f8_arg0.ButtonLargeTall:SetupButton( {
				buttonSize = "XLarge",
				imageSize = "ImageFull",
				localizeHeader = false,
				buttonData = {
					header = f10_local0,
					image = f10_local1
				}
			} )
		end
		f8_arg0.ButtonLargeTall:SetEquipped( MapInfo.ActiveGetMapName( f8_arg0 ) == f10_local2 )
	end
	
	f8_arg0:SubscribeToModelThroughElement( f8_arg0, "name", f8_local0, true )
	f8_arg0:SubscribeToModelThroughElement( f8_arg0, "image", f8_local0, true )
	f8_arg0:registerEventHandler( "grid_anim", function ( element, event )
		element:SetAlpha( event.value )
	end )
end

States = {
	[0xAD14C6E7156B923] = function ( f3_arg0, f3_arg1 )
		f3_arg0[0xD35D735071BAF54]:RegisterAnimationSequence( 0xEF6C3AB55C07BEF, {
			nil,
			nil,
			0,
			0,
			[1] = TWEEN_PROPERTY.Alpha
		} )
		local f3_local0 = function ( f7_arg0, f7_arg1 )
			f7_arg0[0xD35D735071BAF54]:AnimateSequence( 0xEF6C3AB55C07BEF )
		end
		
		f3_arg0[0xD35D735071BAF54]:RegisterAnimationSequence( 0xE974FC7340BAAE5, {
			nil,
			nil,
			1,
			0,
			[1] = TWEEN_PROPERTY.Alpha
		} )
		local f3_local1 = function ( f6_arg0, f6_arg1 )
			f6_arg0[0xD35D735071BAF54]:AnimateSequence( 0xE974FC7340BAAE5 )
		end
		
		f3_arg0[0xD35D735071BAF54]:RegisterAnimationSequence( 0x55D0FA310C0C2C, {
			nil,
			nil,
			0,
			0,
			[1] = TWEEN_PROPERTY.Alpha
		} )
		local f3_local2 = function ( f5_arg0, f5_arg1 )
			f5_arg0[0xD35D735071BAF54]:AnimateSequence( 0x55D0FA310C0C2C )
		end
		
		f3_arg0[0xD35D735071BAF54]:RegisterAnimationSequence( 0xA247AFF3E98A799, {
			nil,
			nil,
			4294966808,
			0,
			nil,
			4294966834,
			0,
			nil,
			4294967283,
			0,
			nil,
			13,
			0,
			nil,
			1,
			0,
			nil,
			0,
			0,
			nil,
			5.29462817E-315,
			0,
			nil,
			5.29462817E-315,
			0,
			[1] = TWEEN_PROPERTY.Left,
			[4] = TWEEN_PROPERTY.Right,
			[7] = TWEEN_PROPERTY.Top,
			[10] = TWEEN_PROPERTY.Bottom,
			[13] = TWEEN_PROPERTY.Left_Anchor,
			[16] = TWEEN_PROPERTY.Right_Anchor,
			[19] = TWEEN_PROPERTY.Top_Anchor,
			[22] = TWEEN_PROPERTY.Bottom_Anchor
		} )
		f3_arg0[0x49D85F0EF1CEC84] = {
			[0xEF6C3AB55C07BEF] = f3_local0,
			[0xE974FC7340BAAE5] = f3_local1,
			[0x55D0FA310C0C2C] = f3_local2,
			[0xA247AFF3E98A799] = function ( f4_arg0, f4_arg1 )
				f4_arg0[0xD35D735071BAF54]:AnimateSequence( 0xA247AFF3E98A799 )
			end
		}
		f3_arg0[0xD97E59A206E4A54] = {
			[0xA247AFF3E98A799] = 0,
			[0xE974FC7340BAAE5] = 0,
			[0x55D0FA310C0C2C] = 0,
			[0xEF6C3AB55C07BEF] = 0
		}
	end
}
function MapButton( f1_arg0, f1_arg1 )
	local f1_local0 = ACTIONS
	local f1_local1 = LUI
	local f1_local2 = MenuBuilder
	local f1_local3 = TWEEN_PROPERTY
	local f1_local4 = f1_local1.UIElement.new()
	f1_local4:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 424, 0, 240 )
	f1_local4.id = "MapButton"
	f1_local4[0xBD5D934D3CD91E5] = States
	local f1_local5
	if f1_arg1 then
		f1_local5 = f1_arg1
	else
		f1_local5 = f1_arg1.controllerIndex
	end
	f1_local5 = f1_local1.ValidateControllerIndex( f1_local4, f1_local5 )
	local f1_local6 = nil
	f1_local6 = f1_local1.UIImage.new()
	f1_local6[0x8B72E07B55C3AC0] = "DownloadIcon"
	f1_local6:setImage( RegisterMaterial( 0x7FD78CF9025E668 ), 0 )
	f1_local6:SetAnchorsAndPosition( 1, 0, 0.5, 0.5, -80, -54, -13, 13 )
	f1_local4:addElement( f1_local6 )
	f1_local4[0xD35D735071BAF54] = f1_local6
	local f1_local7 = nil
	f1_local7 = f1_local2.BuildRegisteredType( 0x3B6F7ECC4733506, {
		controllerIndex = f1_local5
	} )
	f1_local7[0x8B72E07B55C3AC0] = "ButtonLargeTall"
	f1_local7:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 424, 4, 208 )
	f1_local4:addElement( f1_local7 )
	f1_local4[0x898A5F448DBA47] = f1_local7
	f1_local4:SubscribeToModelThroughElement( f1_local4, "isOwned", function ()
		local f2_local0 = f1_arg0:GetDataSource()
		if f2_local0.isOwned:GetValue( f1_arg0 ) ~= nil then
			f2_local0 = f1_arg0:GetDataSource()
			if f2_local0.isOwned:GetValue( f1_arg0 ) == true then
				f1_arg0:AnimateSequence( "HideDownloadIcon" )
			end
		end
		f2_local0 = f1_arg0:GetDataSource()
		if f2_local0.isOwned:GetValue( f1_arg0 ) ~= nil then
			f2_local0 = f1_arg0:GetDataSource()
			if f2_local0.isOwned:GetValue( f1_arg0 ) == false then
				f1_arg0:AnimateSequence( "ShowDownloadIcon" )
			end
		end
	end )
	f0_local0( f1_local4, f1_local5, f1_arg1 )
	f1_local0.AnimateSequence( f1_local4, 0xEF6C3AB55C07BEF )
	if CONDITIONS.IsArabic() then
		f1_local0.AnimateSequence( f1_local4, "isArabic" )
	end
	return f1_local4
end

MenuBuilder.registerType( 0xFD7882FC80FEB85, MapButton )
LockTable( _M )
