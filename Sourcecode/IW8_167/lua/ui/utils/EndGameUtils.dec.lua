-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
END_GAME = END_GAME or {}
local f0_local0 = function ( f27_arg0, f27_arg1 )
	LUI.FlowManager.RequestLeaveMenu( f27_arg0 )
end

local f0_local1 = function ( f26_arg0, f26_arg1 )
	f26_arg0:setText( f26_arg1.message_text )
	f26_arg0:dispatchEventToRoot( {
		name = "resize_popup"
	} )
end

local f0_local2 = function ( f25_arg0 )
	Engine.BHHDJIGHED( "xpartybackout" )
	Engine.BHHDJIGHED( "disconnect" )
end

local f0_local3 = function ( f24_arg0 )
	Engine.BHHDJIGHED( "xpartydisbandafterround" )
	Engine.BHHDJIGHED( "hostmigration_start_backout" )
end

local f0_local4 = function ( f23_arg0 )
	Engine.BHHDJIGHED( "xstopprivateparty" )
	Engine.BHHDJIGHED( "disconnect" )
end

local f0_local5 = function ( f22_arg0 )
	Engine.BHHDJIGHED( "xstopprivateparty" )
	Engine.BHHDJIGHED( "xpartydisbandafterround" )
	Engine.BHHDJIGHED( "hostmigration_start" )
end

END_GAME.StopServerAndLeave = function ( f21_arg0, f21_arg1 )
	if Dvar.IBEGCHEFE( "NLTTMLSQRQ" ) then
		Engine.EBHIFJCGBH( "end_game", 1 )
		Engine.DAGFFDGFII( "set NOOMQPMKTM 1" )
	else
		f0_local0( f21_arg0 )
	end
	LUI.FlowManager.RequestCloseAllMenus()
end

local f0_local6 = function ( f20_arg0, f20_arg1 )
	if CONDITIONS.IsWaveGameType() then
		CP.ClearWaveLoadout( Engine.IJEBHJIJF() )
	end
	local f20_local0 = Dvar.IBEGCHEFE( "LOQQOSNQKN" )
	if f20_local0 then
		f20_local0 = IsPrivateMatch()
		if f20_local0 then
			f20_local0 = CONDITIONS.IsMagmaGameMode()
			if f20_local0 then
				f20_local0 = CONDITIONS.InGame()
			end
		end
	end
	if f20_local0 then
		Dvar.DFIJDJFIFD( "NLOQPLMLKR", MP.WarzonePracticePopupStatus.RESTORE_BR_MAIN_MENU_FROM_WZ_PRIVATE )
	end
	END_GAME.StopServerAndLeave( f20_arg0 )
end

local f0_local7 = function ()
	if CONDITIONS.IsMagmaGameMode() and Dvar.CFHDGABACF( "NLOQPLMLKR" ) == 7 then
		Dvar.DFIJDJFIFD( "NLOQPLMLKR", 0 )
		local f19_local0 = CONDITIONS.IsBloodMoney()
		if not f19_local0 then
			f19_local0 = CONDITIONS.IsRiskGametype()
			if not f19_local0 then
				f19_local0 = CONDITIONS.IsWZRatRace()
			end
		end
		local f19_local1 = CONDITIONS.IsBRKingSlayer()
		local f19_local2 = CONDITIONS.IsRebirthGametype()
		if not f19_local2 then
			f19_local2 = CONDITIONS.IsRebirthSoloGametype()
			if not f19_local2 then
				f19_local2 = CONDITIONS.IsBRResurgenceTrialsGametype()
				if not f19_local2 then
					f19_local2 = CONDITIONS.IsBRResurgenceTrialsSoloGametype()
				end
			end
		end
		local f19_local3 = CONDITIONS.IsWZPayload()
		if f19_local1 then
			Dvar.DFIJDJFIFD( "NMPNSQNNRQ", AAR.MagmaSummaryState.BR_KING_SLAYER_SUMMARY_READY )
		elseif f19_local2 then
			Dvar.DFIJDJFIFD( "NMPNSQNNRQ", AAR.MagmaSummaryState.BR_REBIRTH_SUMMARY_READY )
		elseif f19_local0 then
			Dvar.DFIJDJFIFD( "NMPNSQNNRQ", AAR.MagmaSummaryState.BM_SUMMARY_READY )
		elseif f19_local3 then
			Dvar.DFIJDJFIFD( "NMPNSQNNRQ", AAR.MagmaSummaryState.BR_PAYLOAD_SUMMARY_READY )
		else
			Dvar.DFIJDJFIFD( "NMPNSQNNRQ", AAR.MagmaSummaryState.BR_PARADE_READY )
		end
	end
end

local f0_local8 = function ( f18_arg0, f18_arg1 )
	LUI.FlowManager.RequestLeaveMenu( f18_arg0 )
	Engine.EBIDFIDHIE( "onPlayerQuit" )
	if Dvar.IBEGCHEFE( "NLTTMLSQRQ" ) then
		f0_local0( f18_arg0 )
	else
		f0_local0( f18_arg0 )
	end
	f0_local0()
	LUI.FlowManager.RequestCloseAllMenus()
end

local f0_local9 = function ( f17_arg0, f17_arg1 )
	LUI.FlowManager.RequestLeaveMenu( f17_arg0 )
	Engine.EBIDFIDHIE( "onPlayerQuit" )
	if Dvar.IBEGCHEFE( "NLTTMLSQRQ" ) then
		f0_local0( f17_arg0 )
	else
		f0_local0( f17_arg0 )
	end
	f0_local0()
	LUI.FlowManager.RequestCloseAllMenus()
end

local f0_local10 = function ( f16_arg0 )
	local f16_local0 = Lobby.GFFECBCCF()
	if f16_local0 then
		f16_local0 = Lobby.BGIADHIHAG()
		if f16_local0 then
			f16_local0 = not Lobby.CECBCJDIAG()
		end
	end
	return f16_local0
end

local f0_local11 = function ( f15_arg0, f15_arg1, f15_arg2 )
	local f15_local0 = true
	if f15_arg2 and f15_arg2.popup == false then
		f15_local0 = false
	end
	if f0_local0( f15_arg0 ) and f15_local0 then
		LUI.FlowManager.RequestLeaveMenu( f15_arg0, true )
		LUI.FlowManager.RequestPopupMenu( f15_arg0, "PullPartyPopup", false )
	else
		Engine.EBIDFIDHIE( "onPlayerQuit" )
		if Dvar.IBEGCHEFE( "NLTTMLSQRQ" ) then
			f0_local0( f15_arg0 )
		else
			f0_local0( f15_arg0 )
		end
		if CONDITIONS.IsInGameBattlesMatch() then
			GAMEBATTLES.LeaveGameBattleMatchLobby( f15_arg1 )
		end
		if CONDITIONS.IsWaveGameType() then
			CP.ClearWaveLoadout( f15_arg1 )
		end
		f0_local0()
		LUI.FlowManager.RequestCloseAllMenus()
	end
end

END_GAME.LeaveGame = function ( f14_arg0 )
	f0_local0( f14_arg0, Engine.IJEBHJIJF(), {
		popup = false
	} )
end

local f0_local12 = function ()
	local self = LUI.UIElement.new()
	self.id = "end_game_id"
	self:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, -50, 0 )
	local f13_local1 = Engine.CBBHFCGDIC( "@LUA_MENU/END_GAME_DESC" )
	local f13_local2 = Engine.CBBHFCGDIC( "@LUA_MENU/LEAVE_GAME_TITLE" )
	if CONDITIONS.IsBRQuarryTutorialMap() then
		f13_local1 = Engine.CBBHFCGDIC( "@LUA_MENU/TUTORIAL_LEAVE" )
	end
	if Engine.EAIICIFIFA() and Game.BFEEGCHICA( Engine.IJEBHJIJF(), "zm_ui_is_solo" ) then
		f13_local1 = Engine.CBBHFCGDIC( "@CP_ZMB/LEAVE_GAME_DESC" )
		f13_local2 = Engine.CBBHFCGDIC( "@MENU/NOTICE" )
	end
	if CONDITIONS.IsMagmaGameMode() and IsPrivateMatch() then
		f13_local1 = Engine.CBBHFCGDIC( "@LUA_MENU/LEAVE_WZ_PRIVATE_MATCH" )
	end
	local f13_local3 = {
		popup_title = f13_local2,
		message_text = f13_local1,
		yes_action = f0_local0
	}
	if CONDITIONS.IsBRRevealMode() then
		f13_local3.blockBackground = true
	end
	local f13_local4 = MenuBuilder.BuildRegisteredType( "generic_yesno_popup", f13_local3 )
	f13_local4.id = "privateGame_options_list_id"
	self:addElement( f13_local4 )
	local f13_local5 = LUI.UIBindButton.new()
	f13_local5.id = "endBackToGameStartButton"
	f13_local5:registerEventHandler( "button_start", f0_local0 )
	self:addElement( f13_local5 )
	return self
end

local f0_local13 = function ()
	local f12_local0 = {}
	local f12_local1 = "PopupYesNo"
	f12_local0.title = Engine.CBBHFCGDIC( "LUA_MENU/LEAVE_GAME_TITLE" )
	f12_local0.message = Engine.CBBHFCGDIC( "LUA_MENU/LEAVE_GAME_DESC" )
	f12_local0.yesAction = f0_local0
	if Engine.EAIICIFIFA() then
		f12_local0.title = Engine.CBBHFCGDIC( "MENU/NOTICE" )
		f12_local0.message = Engine.CBBHFCGDIC( "CP_ZMB/LEAVE_GAME_DESC" )
	elseif CONDITIONS.IsMagmaGameMode() then
		f12_local0.message = Engine.CBBHFCGDIC( "MENU/QUIT_WARNING" )
		local f12_local2 = Lobby.GFFECBCCF()
		if f12_local2 then
			f12_local2 = not Lobby.CECBCJDIAG()
		end
		if f12_local2 then
			f12_local0.yesLabel = Engine.CBBHFCGDIC( "LUA_MENU/LEAVE_GAME_AND_PARTY" )
			f12_local0.message = Engine.CBBHFCGDIC( "LUA_MENU/YOU_ARE_PARTY_MEMBER" )
			if Lobby.BGIADHIHAG() then
				f12_local1 = "PopupYesNoCancel"
				f12_local0.message = Engine.CBBHFCGDIC( "LUA_MENU/YOU_ARE_PARTY_LEADER" )
				f12_local0.yesAction = f0_local0
				f12_local0.yesLabel = Engine.CBBHFCGDIC( "LUA_MENU/LEAVE_GAME_WITH_PARTY" )
				f12_local0.noAction = f0_local0
				f12_local0.noLabel = Engine.CBBHFCGDIC( "LUA_MENU/LEAVE_GAME_WITHOUT_PARTY" )
			end
		end
		if CONDITIONS.IsBRRevealMode() then
			f12_local0.blockBackground = true
		end
	elseif CONDITIONS.IsInGameBattlesMatch() then
		f12_local0.message = Engine.CBBHFCGDIC( "MLG_GAMEBATTLES/LEAVE_GAME_DESC" )
	elseif Tournament.BEAIBEGFFB() then
		Engine.BJDBIAGIDA( SOUND_SETS.prestige.prestigeCancel )
	end
	local f12_local2 = MenuBuilder.BuildRegisteredType( f12_local1, f12_local0 )
	f12_local2.id = "popup_leave_game"
	return f12_local2
end

local f0_local14 = function ( f11_arg0 )
	if Dvar.IBEGCHEFE( "NLTTMLSQRQ" ) then
		Engine.EBHIFJCGBH( "end_game", 1 )
		Engine.DAGFFDGFII( "set NOOMQPMKTM 1" )
	else
		f0_local0( f11_arg0 )
	end
end

local f0_local15 = function ()
	local f9_local0 = DataSources.inGame.MP.trialTriesRemaining:GetValue( Engine.IJEBHJIJF() )
	local f9_local1 = {
		title = Engine.CBBHFCGDIC( "LUA_MENU/LEAVE_GAME_TITLE" )
	}
	local f9_local2
	if 0 < f9_local0 and not CONDITIONS.IsInTrialEvent() then
		f9_local2 = Engine.CBBHFCGDIC( "LUA_MENU/LEAVE_TRIAL_DESC" )
		if not f9_local2 then
		
		else
			f9_local1.message = f9_local2
			f9_local1.yesAction = function ( f10_arg0, f10_arg1 )
				if not CONDITIONS.IsInTrialEvent() then
					Challenges.DFGEFGFCFC( f10_arg1, "end_trial", Dvar.CFHDGABACF( "MRNSMSRQMO" ) )
				end
				f9_local0( f10_arg0 )
			end
			
			f9_local2 = MenuBuilder.BuildRegisteredType( "PopupYesNo", f9_local1 )
			f9_local2.id = "popup_leave_trial"
			return f9_local2
		end
	end
	f9_local2 = ""
end

local f0_local16 = function ()
	local self = LUI.UIElement.new()
	self.id = "end_game_id"
	self:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, -50, 0 )
	local f8_local1 = MenuBuilder.BuildRegisteredType( "generic_yesno_popup", {
		popup_title = Engine.CBBHFCGDIC( "@LUA_MENU/LEAVE_GAME_TITLE" ),
		message_text = Engine.CBBHFCGDIC( "@LUA_MENU/END_GAME_WZ_DESC" ),
		yes_action = f0_local0
	} )
	f8_local1.id = "privateGame_options_list_id"
	self:addElement( f8_local1 )
	local f8_local2 = LUI.UIBindButton.new()
	f8_local2.id = "endBackToGameStartButton"
	f8_local2:registerEventHandler( "button_start", f0_local0 )
	self:addElement( f8_local2 )
	return self
end

local f0_local17 = function ( f7_arg0, f7_arg1 )
	Engine.BEFHEEBHIA()
	Engine.EBHIFJCGBH( "exit_squad_eliminated", BR.ExitGameCommandType.LEAVE_TUTORIAL )
end

local f0_local18 = function ()
	local self = LUI.UIElement.new()
	self.id = "end_game_id"
	self:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, -50, 0 )
	local f6_local1 = MenuBuilder.BuildRegisteredType( "generic_yesno_popup", {
		popup_title = Engine.CBBHFCGDIC( "@LUA_MENU/LEAVE_GAME_TITLE" ),
		yes_action = f0_local0
	} )
	f6_local1.id = "privateGame_options_list_id"
	self:addElement( f6_local1 )
	local f6_local2 = LUI.UIBindButton.new()
	f6_local2.id = "endBackToGameStartButton"
	f6_local2:registerEventHandler( "button_start", f0_local0 )
	self:addElement( f6_local2 )
	return self
end

local f0_local19 = function ( f5_arg0, f5_arg1 )
	local f5_local0 = MenuBuilder.BuildRegisteredType( "PopupMessageAndButtons", {
		title = Engine.CBBHFCGDIC( "LUA_MENU/LEAVE_GAME_TITLE" ),
		message = Engine.CBBHFCGDIC( "LUA_MENU/PULL_PARTY_DESC" ),
		defaultFocusIndex = 2,
		cancelClosesPopup = true,
		buttonsClosePopup = true,
		buttons = {
			{
				label = Engine.CBBHFCGDIC( "LUA_MENU/YES" ),
				action = f0_local0
			},
			{
				label = Engine.CBBHFCGDIC( "LUA_MENU/NO" ),
				action = f0_local0
			}
		}
	} )
	f5_local0.id = "PullPartyPopup"
	return f5_local0
end

local f0_local20 = function ()
	local self = LUI.UIElement.new()
	self.id = "popup_retry"
	self:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, -50, 0 )
	self._animationSets = {}
	self._sequences = {}
	local f1_local1 = MenuBuilder.BuildRegisteredType( "generic_yesno_popup", {
		popup_title = Engine.CBBHFCGDIC( "COOP_GAME_PLAY/VOTE_RETRY" ),
		message_text = Engine.CBBHFCGDIC( "COOP_GAME_PLAY/VOTE_DESC" ),
		defaultFocusIndex = 1,
		yes_action = function ( f4_arg0, f4_arg1 )
			Engine.EBHIFJCGBH( "retry_level", 1 )
		end,
		no_action = function ( f3_arg0, f3_arg1 )
			Engine.EBHIFJCGBH( "quit_level", 1 )
		end
	} )
	f1_local1.id = "publicGame_options_list_id"
	self:addElement( f1_local1 )
	local timerBG = nil
	
	timerBG = LUI.UIImage.new()
	timerBG.id = "timerBG"
	timerBG:SetRGBFromInt( 3355443, 0 )
	timerBG:SetAlpha( 0.6, 0 )
	timerBG:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 627, _1080p * 1292, _1080p * 414, _1080p * 438 )
	self:addElement( timerBG )
	self.timerBG = timerBG
	
	local time = nil
	
	time = LUI.UIText.new()
	time.id = "time"
	time:setText( "", 0 )
	time:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	time:SetAlignment( LUI.Alignment.Center )
	time:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, -50, 0 )
	self:addElement( time )
	self.time = time
	
	self.time:RegisterAnimationSequence( "DefaultSequence", {
		{
			value = "30",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 920
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1003
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 418
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 442
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Left_Anchor
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Right_Anchor
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Top_Anchor
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Bottom_Anchor
		},
		{
			value = "29",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "28",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "27",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "26",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "25",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "24",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "23",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "22",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "21",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "20",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "19",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "18",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "17",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "16",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "15",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "14",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "13",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "12",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "11",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "10",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "9",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "8",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "7",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "6",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "5",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "4",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "3",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "2",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "1",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		},
		{
			value = "0",
			duration = 1000,
			property = TWEEN_PROPERTY.Text
		}
	} )
	self._sequences.DefaultSequence = function ()
		self.time:AnimateSequence( "DefaultSequence" )
	end
	
	ACTIONS.AnimateSequence( self, "DefaultSequence" )
	return self
end

MenuBuilder.registerType( "popup_end_game", f0_local12 )
MenuBuilder.registerType( "popup_leave_game", f0_local13 )
MenuBuilder.registerType( "PullPartyPopup", f0_local19 )
MenuBuilder.registerType( "popup_retry", f0_local20 )
MenuBuilder.registerType( "popup_leave_trial", f0_local15 )
MenuBuilder.registerType( "popup_end_game_br_tut", f0_local16 )
MenuBuilder.registerType( "popup_end_game_br_quarry_tutorial", f0_local18 )
