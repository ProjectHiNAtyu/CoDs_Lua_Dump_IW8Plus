-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:49
module( ..., package.seeall )
local f0_local0 = function ( f21_arg0, f21_arg1, f21_arg2 )
	f21_arg0.WeaponLevelProgress:Setup( f21_arg1, f21_arg2.weapon )
	local f21_local0 = 1 < f21_arg2.weaponLevel
	local f21_local1 = f21_arg0.WeaponLevelProgress.Fill
	local f21_local2 = f21_local1
	f21_local1 = f21_local1.SetRGBFromTable
	local f21_local3
	if f21_local0 then
		f21_local3 = SWATCHES.IW9StyleGuide.styleGuideAccentMain
		if not f21_local3 then
		
		else
			f21_local1( f21_local2, f21_local3 )
			f21_local1 = f21_arg0.WeaponLevelProgress.Fill
			f21_local2 = f21_local1
			f21_local1 = f21_local1.SetAlpha
			if f21_local0 then
				f21_local3 = 0.7
			else
				f21_local3 = 0.6
			end
			f21_local1( f21_local2, f21_local3 )
			f21_local1 = f21_arg0.WeaponLevelProgress.Gradient
			f21_local2 = f21_local1
			f21_local1 = f21_local1.SetRGBFromTable
			if f21_local0 then
				f21_local3 = SWATCHES.IW9StyleGuide.styleGuideAccentDark
				if not f21_local3 then
				
				else
					f21_local1( f21_local2, f21_local3 )
				end
			end
			f21_local3 = SWATCHES.IW9StyleGuide.styleGuideCool04
		end
	end
	f21_local3 = SWATCHES.IW9StyleGuide.styleGuideCool02
end

local f0_local1 = function ( f20_arg0, f20_arg1, f20_arg2, f20_arg3 )
	local f20_local0 = WEAPON.GetBWImage( f20_arg2 )
	if f20_arg3 then
		local f20_local1 = WEAPON.GetVariantOverridenIcon( f20_arg3.weapon, f20_arg3.variantID )
		if f20_local1 and 0 < #f20_local1 then
			f20_local0 = f20_local1
		end
	end
	f20_arg0.WeaponIcon:setImage( RegisterMaterial( f20_local0 ) )
	if Engine[0x5B4AB50CF5D1DDD]( RegisterMaterial( f20_local0 ) ) == 1 then
		ACTIONS.AnimateSequence( f20_arg0, "Ratio1x1" )
	else
		ACTIONS.AnimateSequence( f20_arg0, "Ratio2x1" )
	end
end

MenuBuilder.registerType( "CustomWeaponModOptions", function ( f19_arg0, f19_arg1 )
	if not GUNSMITH.AllowSaveCustomWeapon() then
		return 
	end
	local f19_local0 = MenuBuilder.BuildRegisteredType( "SocialPopupGenericList", f19_arg1 )
	f19_local0.id = "CustomWeaponModOptions"
	f19_local0.MenuTitle:DisableGlobalWidgets()
	local self = LUI.UIVerticalList.new()
	self.id = "ButtonContainer"
	local f19_local2 = f19_arg1.buttonData
	local f19_local3 = 512
	local f19_local4 = 44
	local f19_local5 = 150
	local f19_local6 = 190
	local f19_local7 = 168
	local f19_local8 = 0
	self:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 0, _1080p * (f19_local3 + f19_local4 + f19_local4), _1080p * f19_local5, _1080p * 512 )
	local Description = nil
	
	Description = MenuBuilder.BuildRegisteredType( "ButtonDescriptionText", {
		controllerIndex = f19_arg1.controllerIndex
	} )
	Description.id = "Description"
	Description:setPriority( 10 )
	Description:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * f19_local4, _1080p * (f19_local3 + f19_local4), _1080p * (f19_local5 + f19_local7), _1080p * (f19_local6 + f19_local7) )
	f19_local0:addElement( Description )
	f19_local0.Description = Description
	
	f19_local0.MenuDescription:setText( f19_arg1.weaponName )
	f19_local0.MenuDescription:SetFont( FONTS.GetFont( FONTS.SecondaryRegular.File ) )
	f19_local0.MenuDescription:SetFontSize( 24 * _PT )
	f19_local0.MenuDescription:SetMinFontSize( 18 * _PT )
	for f19_local17, f19_local18 in ipairs( f19_local2 ) do
		local f19_local13 = true
		if f19_local18.visible then
			f19_local13 = f19_local18.visible( self, f19_arg1.controllerIndex, {
				f19_local8
			} )
		end
		if f19_local13 then
			local f19_local14 = 56 * f19_local8
			local f19_local15 = MenuBuilder.BuildRegisteredType( "MPMenuButton", {
				controllerIndex = f19_arg1.controllerIndex
			} )
			f19_local15.id = f19_local18.id
			f19_local15:SetRight( _1080p * f19_local3 )
			f19_local15.Text:setText( ToUpperCase( f19_local18.name ) )
			f19_local15.buttonDescription = ToUpperCase( f19_local18.buttonDescription )
			f19_local15:SetPromptHidden( f19_arg1.controllerIndex, false )
			f19_local15:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * f19_local4, _1080p * (f19_local3 + f19_local4), _1080p * f19_local5, _1080p * f19_local6 )
			self:addElement( f19_local15 )
			self[f19_local15.id] = f19_local15
			f19_local15:registerEventHandler( "button_action", f19_local18.action )
			local f19_local16 = LUI.UIImage.new()
			f19_local16.id = "Spacer"
			f19_local16:SetAlpha( 0 )
			f19_local16:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 16 )
			self:addElement( f19_local16 )
			self.Spacer = f19_local16
		end
		f19_local8 = f19_local8 + 1
	end
	if LUI.IsLastInputGamepad( f19_arg1.controllerIndex ) then
		f19_local10 = self[f19_local2[1].id]
		if f19_local10 then
			f19_local10:GainFocus( {
				controller = f19_arg1.controllerIndex,
				focusType = FocusType.MenuFlow
			} )
			f19_local0.Description:processEvent( {
				name = "update_button_description",
				onlyText = true,
				text = f19_local10.buttonDescription
			} )
		end
	end
	f19_local0:addElement( self )
	f19_local10 = MenuBuilder.BuildRegisteredType( "FlyInPopup", {
		flyInRight = true,
		controllerIndex = f19_arg1.controllerIndex,
		widget = f19_local0,
		buttonData = f19_local2
	} )
	f19_local10.id = "CustomModOptionsPopup"
	return f19_local10
end )
local f0_local2 = function ( f14_arg0, f14_arg1, f14_arg2 )
	if not GUNSMITH.AllowSaveCustomWeapon() then
		
	else
		
	end
	local f14_local0 = WEAPON.GetName( f14_arg2.weapon )
	local f14_local1 = f14_arg0:getParent()
	local f14_local2 = f14_local1:getParent()
	local f14_local3 = f14_local2:getParent()
	f14_local3 = f14_local3:getParent()
	local f14_local4 = {}
	local f14_local5 = {}
	local f14_local6 = ""
	f14_local5.label = "RENAME"
	f14_local5.action = function ( f17_arg0 )
		ACTIONS.OpenGenericEditBoxPopup( element, f14_arg0, {
			noDefaultTextOnCreate = true,
			allowEmpty = false,
			filterProfanity = true,
			verifyString = true,
			title = ToUpperCase( GUNSMITH.GetCustomModName( f14_arg0.blueprintName ) ),
			maxInputStringLength = LOADOUT.MAX_LOADOUT_NAME_CHARACTERS,
			confirmButtonText = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xCB0422B6463D4C7 ) ),
			textEditCompleteFunc = function ( f18_arg0, f18_arg1 )
				if not f18_arg1.cancelled then
					local f18_local0, f18_local1 = TEXT_EDIT.ValidateString( f17_arg0, f18_arg1.text )
					if f18_local0 and f17_arg0._weaponPlayerData then
						local f18_local2 = ToUpperCase( f18_arg1.text )
						local f18_local3 = GUNSMITH.GetCustomModSlot( f17_arg0.blueprintName )
						f17_arg0.blueprintName = GUNSMITH.GenerateModName( f18_local2, f18_local3 )
						f17_arg0.header = f18_local2
						if not GUNSMITH.SaveAsCustomMod( f17_arg0, f17_arg0, f18_local3, f17_arg0._weaponPlayerData ) then
							return 
						end
						local f18_local4 = f17_arg0:getParent()
						f18_local4 = f18_local4:getParent()
						f18_local4 = f18_local4.MenuDescription._scoped.menuDescription
						f17_arg0.InfoPanel.ItemName:setText( ToUpperCase( f18_local2 ) )
						local f18_local5 = f17_arg0._activeElement
						if not f18_local5 then
							f18_local5 = f17_arg0._childInFocus
						end
						f18_local5.ButtonLarge.Header:setText( ToUpperCase( f18_local2 ) )
						local f18_local6 = LUI.FlowManager.GetMenuByName( "CustomWeaponModOptions" )
						f18_local6.menu:processEvent( {
							name = "update_menu_description",
							data = ToUpperCase( f18_local2 )
						} )
					else
						LUI.FlowManager.RequestErrorPopup( f17_arg0, Engine[0xED84C33EC5F01EA]( 0x1CCA5C59ECE1EA6 ), f18_local1 )
					end
				end
			end
		} )
	end
	
	f14_local5.id = "RenameWeaponButton"
	f14_local5.name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xCB0422B6463D4C7 ) )
	f14_local5.buttonDescription = Engine[0xED84C33EC5F01EA]( 0xCCDDCFF78174F78 )
	table.insert( f14_local4, f14_local5 )
	local f14_local7 = {
		label = "DUPLICATE WEAPON"
	}
	local f14_local8 = false
	f14_local7.action = function ()
		local f16_local0 = GUNSMITH.maxMods
		local f16_local1 = GUNSMITH.CountAvailableCustomModSlots( f14_arg0, f14_arg0.weapon, f14_arg0.lootID )
		local f16_local2 = GUNSMITH.AreAnyModSlotsUnlocked( f14_arg0, f14_arg0.lootID )
		local f16_local3 = GUNSMITH.GetCustomModName( f14_arg0.blueprintName )
		if 0 < f16_local1 then
			local f16_local4 = GUNSMITH.GetFirstFreeCustomModSlot( f14_arg0, f14_arg0.weapon, f14_arg0.lootID )
			f14_arg0.blueprintName = GUNSMITH.GenerateModName( f16_local3, f16_local4 )
			if not GUNSMITH.SaveAsCustomMod( f14_arg0, f14_arg0, f16_local4, f14_arg0._weaponPlayerData ) then
				return 
			end
			f14_arg0 = true
		else
			local f16_local4 = f16_local0 - f16_local1
			local f16_local5 = ToUpperCase( WEAPON.GetLootWeaponName( f14_arg0.weapon, f14_arg0.lootID ) )
			LUI.FlowManager.RequestErrorPopup( f14_arg0, ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xDBEB0C43ECC2224, f16_local4, f16_local0 ) ), ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x9908B333647D894, WEAPON.GetName( f14_arg0.weapon ) ) ) )
		end
		if f14_arg0 then
			local f16_local4 = LUI.FlowManager.GetMenuByName( "CustomWeaponModOptions" )
			f16_local4.menu:exitAnimation()
			ACTIONS.LeaveMenu( f14_arg0 )
		end
	end
	
	f14_local7.id = "DuplicateWeaponButton"
	f14_local7.name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x523F28C0D7F27A8 ) )
	f14_local7.buttonDescription = Engine[0xED84C33EC5F01EA]( 0xD25BD7A75601E53 )
	table.insert( f14_local4, f14_local7 )
	table.insert( f14_local4, {
		label = "DELETE WEAPON",
		action = function ( f15_arg0 )
			GUNSMITH.DeleteCustomMod( f14_arg0, f14_arg0.weapon, GUNSMITH.GetCustomModSlot( f14_arg0.blueprintName ) )
			local f15_local0 = LUI.FlowManager.GetMenuByName( "CustomWeaponModOptions" )
			f15_local0.menu:exitAnimation()
			ACTIONS.LeaveMenu( f14_arg0 )
		end,
		id = "DeleteWeaponButton",
		name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xC190CD2327EF604 ) ),
		buttonDescription = Engine[0xED84C33EC5F01EA]( 0x21BA106535ADBB7 )
	} )
	LUI.FlowManager.RequestPopupMenu( nil, "CustomWeaponModOptions", true, f14_arg1, false, {
		menuDescription = nil,
		menuTitleRef = 0xCE67E962E90BBCC,
		controllerIndex = f14_arg1,
		buttonData = f14_local4,
		weaponName = ToUpperCase( GUNSMITH.GetCustomModName( f14_arg2.blueprintName ) )
	} )
end

local f0_local3 = function ( f9_arg0, f9_arg1, f9_arg2, f9_arg3, f9_arg4, f9_arg5, f9_arg6 )
	if not f9_arg6 then
		f9_arg6 = {}
	end
	local f9_local0 = WEAPON.IsContextualStoreEnabled()
	if f9_local0 then
		f9_local0 = LUI.FlowManager.GetScopedData( f9_arg0 )
		f9_local0 = f9_local0.isStoreTab
	end
	local f9_local1 = f9_arg6.isCategoryButton
	f9_arg2.isActiveArmory = WEAPON.IsActiveArmoryWeapon( f9_arg2.weapon )
	f9_arg0._weaponData = f9_arg2
	local f9_local2
	if f9_arg2 then
		f9_local2 = f9_arg2
	else
		f9_local2 = f9_arg2.lootID
	end
	f9_arg0._weaponLootID = f9_local2
	if f9_arg5 then
		f9_arg0._weaponPlayerData = f9_arg5
	end
	f9_local2 = CONDITIONS.IsMobileOrMobileSim()
	if f9_arg2.isCustom or not f9_arg2.isBase then
		local f9_local3 = 0
		if f9_arg2.attachments then
			for f9_local4 = 1, #f9_arg2.attachments, 1 do
				if f9_arg0._scoped and not ATTACHMENT.IsDefaultAttachment( GL_HACK.GetWeaponMPRef( CONDITIONS.IsMobileOrMobileSim() and f9_arg0._scoped.query.weaponRef or f9_arg0._weaponData.weapon ), f9_arg2.attachments[f9_local4].ref ) then
					f9_local3 = f9_local3 + 1
				end
			end
		end
		local f9_local4 = GUNSMITH.GetEquipCounts( f9_arg2.weapon, f9_arg2, f9_arg2.attachments, {
			isDefault = f9_arg2.isDefaultWeapon
		} )
		f9_arg0.AttachmentEquipPips:UpdatePips( f9_local4.attachmentCount, f9_local4.restrictedAttachmentCount )
		if f9_local2 then
			if f9_local1 then
				ACTIONS.AnimateSequence( f9_arg0, "IsBase" )
			elseif f9_arg2.isCustom then
				ACTIONS.AnimateSequence( f9_arg0, "IsCustomMod" )
			end
		else
			local f9_local5 = ACTIONS.AnimateSequence
			local f9_local7 = f9_arg0
			local f9_local8
			if f9_arg2.isCustom then
				f9_local8 = "IsCustomMod"
			else
				f9_local8 = "IsBlueprint"
			end
			f9_local5( f9_local7, f9_local8 )
		end
		if not f9_local2 then
			f9_arg0:AddNameBacker()
		end
	else
		if f9_arg2.weaponLevel then
			f0_local0( f9_arg0, f9_arg1, f9_arg2 )
		end
		f9_arg0.AttachmentEquipPips:UpdatePips( 0 )
		ACTIONS.AnimateSequence( f9_arg0, "IsBase" )
		if not f9_local2 then
			f9_arg0:HideNameBacker()
		end
	end
	f9_arg0.WeaponIcon:SetAlpha( 1 )
	if f9_arg0.RenderWeaponIcon then
		f9_arg0.RenderWeaponIcon:SetAlpha( 0 )
	end
	f0_local0( f9_arg0, 0, f9_arg2.weapon, f9_arg2 )
	if CONDITIONS.IsRenderWeaponIconEnabled() then
		local f9_local3 = f9_arg3 % (Enum[0xFA40E3832613058][0xD484B78F533F3C1] - 1)
		local f9_local4 = WEAPON.GetWeaponModelName( f9_arg2.weapon, f9_arg2, {
			includeStickers = false,
			includeCamos = false,
			includeAttachments = true
		} )
		local f9_local5 = CONDITIONS.IsLoadoutWeaponAttachmentHighlightEnabled() and WEAPON.GetAttachmentHighlights( f9_arg1, f9_local4 ) or {}
		if f9_local5 and 0 < #f9_local5 then
			WEAPON.UpdateWeaponRenderIcon( f9_arg0, f9_arg1, {
				streamInWeaponModel = true,
				renderIconWidget = f9_arg0.RenderWeaponIcon,
				baseIconWidget = f9_arg0.WeaponIcon,
				slot = f9_local3,
				weaponModelName = f9_local4,
				attachmentHighlights = f9_local5
			} )
		end
	end
	local f9_local3, f9_local4 = nil
	local f9_local5 = false
	local f9_local6 = nil
	if not f9_local2 then
		if f9_arg0._weaponData.isBlueprintIntact ~= false then
			f9_local4 = WEAPON.GetWeaponBlueprintTacticalBuildDataByLootID( f9_arg1, f9_arg0._weaponData.lootID )
		else
			f9_local4 = WEAPON.GetWeaponBlueprintTacticalBuildData( f9_arg0._weaponData )
		end
		if f9_arg2.isBlueprintIntact ~= nil then
			f9_local6 = f9_arg2.isBlueprintIntact
		else
			f9_local6 = WEAPON.IsLootProTuned( f9_arg1, f9_arg0._weaponData.lootID )
		end
		if f9_local6 then
			f9_local3 = WEAPON.TACTICAL_BUILD_COLOR
			f9_local5 = true
		elseif not f9_arg2.isBase then
			f9_local3 = WEAPON.BLUEPRINT_COLOR
		end
	end
	if f9_arg0.WeaponEffectIcons then
		local f9_local7 = nil
		if f9_arg0._weaponData.isBlueprintIntact ~= false then
			f9_local7 = f9_arg0._weaponData.lootID
		end
		f9_arg0:SetupWeaponEffectIndicators( f9_local7, f9_local4, f9_local6 )
	end
	local f9_local7 = {
		removeTextBacker = true,
		imageSize = "Empty",
		localizeHeader = false,
		localizeSubHeader = false,
		buttonData = f9_arg2,
		colorOverrides = {
			highlightEnable = f9_local3,
			highlightEnableEquipped = SWATCHES.IW9StyleGuide.styleGuideAlertEquipped01,
			defaultGradientColor = f9_local3
		},
		mobileHideFooter = f9_local1,
		showCategoryStack = f9_local1
	}
	local f9_local8
	if not f9_local1 then
		f9_local8 = not f9_arg2.isCustom
	else
		f9_local8 = false
	end
	f9_local7.mobileIsBlueprint = f9_local8
	if f9_arg2.isCustom and GUNSMITH.AllowSaveCustomWeapon() and not CONDITIONS.InGame() then
		f9_local7.doubleAction = {
			text = 0x371D314917B7829,
			prompt = 0x21E44BE45534168,
			callback = function ()
				f9_arg0( f9_arg0, f9_arg0, f9_arg0 )
			end
		}
	else
		f9_local7.doubleAction = nil
	end
	f9_arg0.ButtonLarge:SetupButton( f9_local7 )
	f9_local8 = not f9_arg2.isUnlocked
	local f9_local9
	if f9_local8 then
		f9_local9 = f9_local8
	elseif not f9_local0 then
		f9_local9 = not f9_arg2.isCustom
	else
		f9_local9 = false
	end
	f9_arg0:SetButtonDisabled( f9_local9 )
	f9_arg0.ButtonLarge:SetDisabled( f9_local9 )
	local f9_local10 = ACTIONS.AnimateSequence
	local f9_local11 = f9_arg0
	local f9_local12
	if f9_arg2.isRestricted then
		f9_local12 = "RestrictionOn"
	else
		f9_local12 = "RestrictionOff"
	end
	f9_local10( f9_local11, f9_local12 )
	f9_arg0.ButtonLarge:SetEquipped( f9_arg4 )
	f9_local10 = f9_arg0.ButtonLarge
	f9_local11 = f9_local10
	f9_local10 = f9_local10.SetPrimaryPromptText
	if f9_local0 then
		f9_local12 = 0xC5039C1061CBDE7
		if not f9_local12 then
		
		else
			f9_local10( f9_local11, f9_local12 )
			if not f9_local2 then
				if not f9_local5 and not f9_arg2.isBase then
					f9_arg0.ButtonLarge:SetGradientAlpha( 0.1, 0.08 )
				else
					f9_arg0.ButtonLarge:SetGradientAlpha( 0.2, 0.16 )
				end
			end
			if DMZ.IsLimitedInventoryEnabled() and CoD.IsDMZMatch() then
				if f9_arg2.isContraband then
					f9_arg0.Icon:SetRGBFromTable( SWATCHES.AAR.DeathsColor )
					f9_arg0.Icon:setImage( RegisterMaterial( "icon_mod" ) )
				else
					f9_arg0.Icon:SetRGBFromTable( SWATCHES.Global.keyColorMid )
					f9_arg0.Icon:setImage( RegisterMaterial( "icon_blueprint" ) )
				end
			end
			if f9_arg0.WeaponCooldown and f9_arg2.cooldown then
				f9_local10 = CoD.GetUTC()
				if f9_local10 < f9_arg2.cooldown then
					f9_arg0:SetButtonDisabled( true )
					f9_arg0.WeaponCooldown:SetAlpha( 1 )
					f9_arg0.WeaponCooldown.Timer:setEndTime( (f9_arg2.cooldown - f9_local10) * 1000 + Engine[0x6991337AE950F99]() )
					f9_arg0.WeaponCooldown.Timer:registerEventHandler( "timeout", function ()
						f9_arg0:SetButtonDisabled( false )
						f9_arg0.WeaponCooldown:SetAlpha( 0 )
					end )
				else
					f9_arg0:SetButtonDisabled( false )
					f9_arg0.WeaponCooldown:SetAlpha( 0 )
					f9_arg0.WeaponCooldown.Timer:deregisterEventHandler( "timeout" )
				end
			end
			if f9_arg0.CostLabel then
				f9_arg0.CostLabel:setText( LocalizeIntoString( WEAPON.GetWeaponCost( f9_arg2.weapon, ATTACHMENT.GetAttachmentRefsFromAttachmentsData( f9_arg2.attachments ) ), 0x757A21A4FFB96DF ) )
				if f9_arg4 then
					ACTIONS.AnimateSequence( f9_arg0, "IsEquipped" )
				end
			end
			f9_arg0:UpdateNewIcon( f9_arg1 )
			if LOADOUT.IsActiveArmoryEnabled( f9_arg1 ) then
				if WEAPON.IsActiveArmoryWeapon( f9_arg2.weapon ) then
					ACTIONS.AnimateSequence( f9_arg0, "FeaturedWeapon" )
					ACTIONS.AnimateSequence( f9_arg0.ActiveArmoryOverlay, "Glow" )
					ACTIONS.AnimateSequence( f9_arg0.ActiveArmoryTag, "Glow" )
				else
					ACTIONS.AnimateSequence( f9_arg0, "OffFeaturedWeapon" )
					ACTIONS.AnimateSequence( f9_arg0.ActiveArmoryOverlay, "NoGlow" )
					ACTIONS.AnimateSequence( f9_arg0.ActiveArmoryTag, "NoGlow" )
				end
				f9_arg0._isArmoryActiveWeapon = f9_arg2.isActiveArmory and f9_arg2.isActiveArmory or WEAPON.IsActiveArmoryWeapon( f9_arg2.weapon )
				f9_arg0._isLeavingActiveArmory = WEAPON.IsLeavingActiveArmory( f9_arg2.weapon )
				f9_arg0:addEventHandler( "button_over", function ( f11_arg0, f11_arg1 )
					f11_arg0:dispatchEventToParent( {
						name = "update_active_armory_promo_visibility",
						controller = f9_arg0,
						isActiveArmory = f11_arg0._isArmoryActiveWeapon,
						isLeavingActiveArmory = f11_arg0._isLeavingActiveArmory
					} )
				end )
				f9_arg0:addEventHandler( "button_over_disable", function ( f10_arg0, f10_arg1 )
					f10_arg0:dispatchEventToParent( {
						name = "update_active_armory_promo_visibility",
						controller = f9_arg0,
						isActiveArmory = f10_arg0._isArmoryActiveWeapon,
						isLeavingActiveArmory = f10_arg0._isLeavingActiveArmory
					} )
				end )
			end
		end
	end
	f9_local12 = 0xCA07A93FADF9E95
end

local f0_local4 = function ( f8_arg0 )
	return f8_arg0._weaponData
end

local f0_local5 = function ( f7_arg0, f7_arg1 )
	if f7_arg0.NewItemSmallIcon then
		local f7_local0 = WEAPON.IsContextualStoreEnabled()
		if f7_local0 then
			f7_local0 = LUI.FlowManager.GetScopedData( f7_arg0 )
			f7_local0 = f7_local0.isStoreTab
		end
		if f7_arg0._weaponLootID and not f7_arg0:IsDisabled() and not f7_local0 then
			if f7_arg0:isInFocus() then
				f7_arg0.NewItemSmallIcon:ClearBreadcrumbByID( f7_arg1, f7_arg0._weaponLootID )
			else
				f7_arg0.NewItemSmallIcon:UpdateBreadcrumbByID( f7_arg1, f7_arg0._weaponLootID )
			end
			if not CONDITIONS.IsMobileOrMobileSim() then
				local f7_local1 = LOOT.IsNew( f7_arg1, f7_arg0._weaponLootID )
				local f7_local2 = ACTIONS.AnimateSequence
				local f7_local3 = f7_arg0
				local f7_local4
				if f7_local1 then
					f7_local4 = "HasNewItemNotification"
				else
					f7_local4 = "DefaultRestrictionWarningPosition"
				end
				f7_local2( f7_local3, f7_local4 )
			end
		else
			f7_arg0.NewItemSmallIcon:UpdateAlpha( 0 )
		end
	end
end

local f0_local6 = function ( f5_arg0, f5_arg1, f5_arg2 )
	f5_arg0.Setup = f0_local0
	f5_arg0.UpdateNewIcon = f0_local0
	f5_arg0._weaponPlayerData = nil
	f5_arg0._weaponData = nil
	f5_arg0._weaponLootID = nil
	f5_arg0.GetWeaponData = f0_local0
	f5_arg0.SetupCustomWeaponMenu = f0_local0
	if CONDITIONS.InFrontend() then
		QUARTERMASTER.SetDirectPurchaseLogging( f5_arg1, false )
	end
	f5_arg0:addEventHandler( "button_action", function ( f6_arg0, f6_arg1 )
		if LUI.FlowManager.GetCurrentMenu( f6_arg0 ) then
			local f6_local0 = WEAPON.IsContextualStoreEnabled()
			if f6_local0 then
				f6_local0 = LUI.FlowManager.GetScopedData( f5_arg0 )
				f6_local0 = f6_local0.isStoreTab
			end
			if f6_local0 then
				QUARTERMASTER.SetDirectPurchaseLogging( f5_arg0, true )
				STORE.OpenProductPreviewMenu( f5_arg0, f5_arg0._weaponData.bundle )
				local f6_local1 = LUI.FlowManager.GetScopedData( f5_arg0 )
				f6_local1.isFromStoreButton = true
			else
				f6_arg0:dispatchEventToCurrentMenu( {
					name = "equip_weapon",
					controller = f5_arg0,
					weaponData = f5_arg0._weaponData
				} )
			end
		end
	end )
	if CONDITIONS.IsArabic() then
		ACTIONS.AnimateSequence( f5_arg0, "AR" )
	elseif IsLanguageJapanese() or IsLanguageChinese() then
		ACTIONS.AnimateSequence( f5_arg0, "JP" )
	end
end

local f0_local7 = function ( f4_arg0, f4_arg1, f4_arg2 )
	f4_arg0.PostLoadShared = f0_local0
end

function ArmoryButtonBase( menu, controller )
	local self = LUI.UIButton.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 336 * _1080p, 0, 204 * _1080p )
	self.id = "ArmoryButtonBase"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	self:addEventHandler( "button_over", function ( f3_arg0, f3_arg1 )
		local f3_local0 = f3_arg1.controller or menu
		ACTIONS.AnimateSequence( menu, "ButtonOver", menu )
	end )
	self:addEventHandler( "button_up", function ( f2_arg0, f2_arg1 )
		local f2_local0 = f2_arg1.controller or menu
		ACTIONS.AnimateSequence( menu, "ButtonUp", menu )
	end )
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "ArmoryButtonBase", ArmoryButtonBase )
LockTable( _M )
