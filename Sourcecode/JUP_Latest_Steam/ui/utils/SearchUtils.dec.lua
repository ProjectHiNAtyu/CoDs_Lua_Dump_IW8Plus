-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:02
SEARCH = {
	TRAILING_ACTION_GAMEPAD_CLEAR_ICON_NAME = "button_alt1",
	TRAILING_ACTION_GAMEPAD_SEARCH_ICON_NAME = "button_primary"
}
local f0_local0 = "jup_ui_keybind_icon"
local f0_local1 = function ( f20_arg0 )
	local f20_local0 = nil
	if f20_arg0.optionId then
		f20_local0 = Engine[0xED84C33EC5F01EA]( OPTIONS.GetSettingDataFieldFromId( f20_arg0.optionId, "name" ) ) .. (f20_arg0.advCategory and "\\^%" .. f20_arg0.advCategory .. "^7" or "")
	else
		local f20_local1
		if 1 < #f20_arg0.menu[0xE7843F98867B161] then
			f20_local1 = Engine[0xED84C33EC5F01EA]( f20_arg0.tab[0x4BCADBA8E631B86] ) .. "\\^%"
			if not f20_local1 then
			
			else
				f20_local0 = f20_local1 .. Engine[0xED84C33EC5F01EA]( f20_arg0.categoryName ) .. "^7"
			end
		end
		f20_local1 = "^%"
	end
	return f20_local0
end

local f0_local2 = function ( f19_arg0, f19_arg1, f19_arg2 )
	local f19_local0, f19_local1 = OPTIONS.GetSettingsTabsData( f19_arg1 )
	local f19_local2 = {}
	local f19_local3 = OPTIONS.GetOptionsPath( f19_local0 )
	for f19_local8, f19_local9 in pairs( f19_local3 ) do
		local f19_local10 = OPTIONS.GetAvailableSettingDataFromId( f19_local8, f19_arg1 )
		if f19_local10 and not f19_local10.hideInSearch then
			f19_local9.type = f19_local10[0x79439EF7BFA9C2D]
			local f19_local7 = Engine[0xED84C33EC5F01EA]( 0x499CE8C4775A89 )
			if f19_local10.name then
				if type( f19_local10.name ) == "function" then
					f19_local7 = f19_local10.name( f19_arg1 )
				elseif type( f19_local10.name ) == "xhash" then
					f19_local7 = Engine[0xED84C33EC5F01EA]( f19_local10.name )
				else
					f19_local7 = f19_local10.name
				end
			end
			if f19_local7 then
				f19_local2[f19_local10.id] = Engine[0xEB2A2834B76AEA4]( f19_local7 )
			end
		end
	end
	f19_local4 = LUI.Trim( Engine[0xEB2A2834B76AEA4]( f19_arg2 ) )
	f19_local5 = nil
	if 0 < #f19_local4 then
		f19_local5 = Engine[0x20059E0829C593E]( f19_local2, f19_local4, Dvar[0x22EAAB59AA27E9B]( 0x825A131D6DD7A7A ) )
	end
	f19_local6 = {}
	f19_local8 = {}
	if f19_local5 then
		if #f19_local5 == 1 and f19_local5[1].key then
			f19_local9 = OPTIONS.GetAvailableSettingDataFromId( f19_local5[1].key, f19_arg1 )
			if f19_local9 and f19_local9.relatedSettings then
				local f19_local10 = {}
				for f19_local22, f19_local23 in ipairs( f19_local9.relatedSettings ) do
					local f19_local13 = f19_local23[0x74B471E53422B84]
					if f19_local13 then
						f19_local13 = OPTIONS.GetAvailableSettingDataFromId( f19_local23[0x74B471E53422B84], f19_arg1 )
					end
					if f19_local13 and f19_local3[f19_local23[0x74B471E53422B84]] and f19_local3[f19_local23[0x74B471E53422B84]][1] then
						local f19_local14 = f19_local13.name
						if f19_local14 then
							f19_local14 = Engine[0xED84C33EC5F01EA]( f19_local13.name )
						end
						local f19_local15 = f19_local3[f19_local23[0x74B471E53422B84]][1]
						local f19_local16 = f19_local13[0x79439EF7BFA9C2D]
						local f19_local17 = f0_local0( f19_local15 )
						local f19_local18 = table.insert
						local f19_local19 = f19_local10
						local f19_local20 = {
							optionId = f19_local13.id,
							name = f19_local14,
							stringPath = f19_local17
						}
						local f19_local21
						if f19_local16 == OPTIONS.OptionType.KEYBINDING then
							f19_local21 = f0_local0
							if not f19_local21 then
							
							else
								f19_local20.icon = f19_local21
								f19_local20.path = f19_local15
								f19_local20.initialSearch = f19_arg2
								f19_local18( f19_local19, f19_local20 )
							end
						end
						f19_local21 = f19_local15.menu.icon
					end
				end
				f19_local8 = f19_local10
			end
		end
		for f19_local11, f19_local12 in ipairs( f19_local5 ) do
			local f19_local22 = 0xC3DF88F34CD8249 .. f19_local12.key
			local f19_local23 = f19_local3[f19_local22]
			if f19_local23 then
				f19_local23 = f19_local3[f19_local22].type
			end
			for f19_local16, f19_local17 in ipairs( f19_local3[f19_local22] ) do
				local f19_local18 = f0_local0( f19_local17 )
				local f19_local25 = table.insert
				local f19_local20 = f19_local6
				local f19_local21 = {
					optionId = f19_local22,
					name = f19_local12.name,
					stringPath = f19_local18
				}
				local f19_local24
				if f19_local23 == OPTIONS.OptionType.KEYBINDING then
					f19_local24 = f0_local0
					if not f19_local24 then
					
					else
						f19_local21.icon = f19_local24
						f19_local21.path = f19_local17
						f19_local21.initialSearch = f19_arg2
						f19_local25( f19_local20, f19_local21 )
					end
				end
				f19_local24 = f19_local17.menu.icon
			end
		end
	end
	return f19_local6, f19_local8
end

local f0_local3 = function ( f18_arg0, f18_arg1, f18_arg2 )
	local f18_local0 = {}
	local f18_local1 = {}
	if f18_arg2 and f18_arg2 ~= "" then
		f18_local0, f18_local1 = f0_local0( f18_arg0, f18_arg1, f18_arg2 )
	end
	if f18_arg0.UpdateSearchPanel then
		local f18_local2 = f18_arg0
		local f18_local3 = f18_arg0.UpdateSearchPanel
		local f18_local4
		if f18_arg2 == nil or f18_arg2 == "" then
			f18_local4 = false
		else
			f18_local4 = true
		end
		local f18_local5
		if not f18_local0 then
			f18_local5 = f18_local0
		else
			f18_local5 = {}
		end
		local f18_local6
		if not f18_local1 then
			f18_local6 = f18_local1
		else
			f18_local6 = {}
		end
		f18_local3( f18_local2, f18_local4, f18_local5, f18_local6 )
	end
end

SEARCH.SetupEditBox = function ( f14_arg0, f14_arg1, f14_arg2, f14_arg3 )
	local f14_local0 = {
		hasDefaultActionTrailing = false,
		useAutoAlign = true,
		isNeededNavigationToType = true,
		isNumericEmpty = false,
		icon = "icon_generic_search",
		alwaysSendTypingEvents = true,
		autoConfirmOnOutsideClick = true,
		isNumeric = false,
		isPassword = false,
		autoConfirmOnTab = true,
		allowEmptyString = true,
		gamepadIcon = "icon_generic_search",
		autoSelectAllOnActive = true,
		focusType = FocusType.MouseOver,
		defaultValue = Engine[0xED84C33EC5F01EA]( 0x3041BB7B9D30EB5 )
	}
	local f14_local1
	if f14_arg3 then
		f14_local1 = f14_arg3.autoSetActiveOnCreation
		if not f14_local1 then
		
		else
			f14_local0.autoSetActiveOnCreation = f14_local1
			f14_local0.textSelectionColor = {
				g = -9,
				a = 255,
				b = -9,
				r = -9
			}
			f14_local0.name = Engine[0xED84C33EC5F01EA]( 0x3041BB7B9D30EB5 )
			if f14_arg3 then
				f14_local1 = f14_arg3.disableClearText
				if not f14_local1 then
				
				else
					f14_local0.disableClearText = f14_local1
					f14_local0.trailingActionGamepadSearchIconName = CONDITIONS.IsConsoleGame() and SEARCH.TRAILING_ACTION_GAMEPAD_SEARCH_ICON_NAME or nil
					f14_arg1:SetupGenericEditBox( f14_arg2, f14_local0 )
					f14_local1 = f14_arg1:GetDefaultString()
					if 0 < #f14_local1 then
						local f14_local2 = f14_local1:sub( 2 )
						if not f14_local2 then
							f14_local1 = f14_local2
						end
					end
					f14_local1 = ""
				end
			end
			f14_local1 = false
		end
	end
	f14_local1 = false
end

local f0_local4 = function ( f11_arg0 )
	f11_arg0:addEventHandler( "button_over", function ( f13_arg0, f13_arg1 )
		if f13_arg0.stringPath then
			f13_arg0:dispatchEventToParent( {
				name = "update_path",
				path = f13_arg0.stringPath
			} )
		end
	end )
	f11_arg0:addEventHandler( "button_up", function ( f12_arg0, f12_arg1 )
		if f12_arg0.stringPath then
			f12_arg0:dispatchEventToParent( {
				name = "update_path"
			} )
		end
	end )
end

SEARCH.SetupSearchList = function ( f5_arg0, f5_arg1, f5_arg2 )
	f5_arg1:SetupList( {
		maxVisibleColumns = 1,
		maxVisibleRows = 15,
		spacingY = 15,
		alignment = LUI.Alignment.Top,
		activeBehaviorType = GRID_AND_LIST.ActiveBehaviorType.NONE
	}, f5_arg0.Scrollbar )
	f5_arg1:SetScrollbarKBMStyle( true )
	f5_arg1:RegisterWidgetType( "Header", function ()
		return MenuBuilder.BuildRegisteredType( "SearchCategory", {
			controllerIndex = f5_arg0
		} )
	end, function ( f9_arg0, f9_arg1, f9_arg2 )
		f9_arg0.Label:setText( f9_arg2.text )
		if f9_arg2.height then
			f9_arg0:setHeight( f9_arg2.height )
		end
	end )
	f5_arg1:RegisterWidgetType( "Button", function ()
		local f8_local0 = MenuBuilder.BuildRegisteredType( "GenericPanelButtonWithIcon", {
			controllerIndex = f5_arg0
		} )
		f5_arg0( f8_local0 )
		return f8_local0
	end, function ( f6_arg0, f6_arg1, f6_arg2 )
		local f6_local0 = f6_arg2.buttonData
		f6_arg0:SetText( f6_local0.name )
		f6_arg0:SetIcon( f6_local0.icon )
		f6_arg0.stringPath = f6_local0.stringPath
		if f6_arg2.height then
			f6_arg0:setHeight( f6_arg2.height )
		end
		f6_arg0:replaceEventHandler( "button_action", function ( f7_arg0, f7_arg1 )
			if CONDITIONS.IsSplitScreenMenuInUse() then
				return 
			elseif f6_arg0.ButtonAction then
				f6_arg0:ButtonAction( f6_arg0, f6_arg0, f6_arg0 )
			else
				OPTIONS.GoToSetting( f6_arg0, f7_arg1.controller, f6_arg0.path )
				local f7_local0 = "GlobalPanelOptionsSearch"
				if CONDITIONS.IsMenuInStack( f7_local0 ) then
					ACTIONS.LeaveMenuByName( f7_local0 )
				end
			end
			if f6_arg0.initialSearch then
				METRICS.OptionsSearchDLogRecording( f6_arg0, f6_arg0, f6_arg0.DynamicList )
			end
			return true
		end )
	end )
end

SEARCH.AddListWidget = function ( f4_arg0, f4_arg1, f4_arg2, f4_arg3 )
	f4_arg2.menu = f4_arg0
	f4_arg0.DynamicList:AddWidget( f4_arg1, {
		adjustContentToFit = true,
		refreshGrid = false,
		widgetOptions = f4_arg2,
		focusable = f4_arg3,
		height = f4_arg2.height
	} )
end

local f0_local5 = function ( f3_arg0, f3_arg1, f3_arg2, f3_arg3, f3_arg4 )
	if f3_arg2[0x5A2686A1843D38D] == 0x518F12AB3BE8C3 then
		if f3_arg2:IsTextEditActive() then
			f3_arg2:TextEditOff()
		end
		f3_arg2:processEvent( {
			name = "lose_focus"
		} )
		f3_arg2:RefreshCurrentAnimation()
		if LUI.IsGamepadActiveInputMethodForPrompts( f3_arg1 ) and f3_arg2:IsDefault() then
			f3_arg2:ResetEditBoxToDefault()
		end
	elseif f3_arg2[0x5A2686A1843D38D] == 0xE912B67EAB866DA then
		f3_arg2:processEvent( {
			name = "lose_focus"
		} )
		f3_arg0.listIndex = nil
	end
	if f3_arg3[0x5A2686A1843D38D] == 0x518F12AB3BE8C3 then
		f3_arg3:processEvent( {
			name = "gain_focus"
		} )
		if LUI.IsLastInputKeyboardMouse( f3_arg1 ) or not CONDITIONS.IsConsoleGame() and LUI.IsLastInputGamepad( f3_arg1 ) then
			f3_arg3:processEvent( {
				name = "button_action",
				controller = f3_arg1
			} )
		end
	elseif f3_arg3[0x5A2686A1843D38D] == 0xE912B67EAB866DA then
		f3_arg3:processEvent( {
			name = "gain_focus"
		} )
		local f3_local0 = f3_arg3.Grid:GetFirstFocusablePosition()
		if f3_arg4 or f3_local0 then
			local f3_local1 = f3_arg3
			local f3_local2 = f3_arg3.SetFocusedPosition
			local f3_local3 = {
				x = 0
			}
			local f3_local4
			if not f3_arg4 then
				f3_local4 = f3_arg4
			else
				f3_local4 = f3_local0.y
			end
			f3_local3.y = f3_local4
			f3_local2( f3_local1, f3_local3, false, true, true, false )
		end
	end
end

SEARCH.SetupEditBoxFocus = function ( f1_arg0, f1_arg1, f1_arg2 )
	f1_arg0:addEventHandler( "gamepad_button", function ( f2_arg0, f2_arg1 )
		local f2_local0 = f2_arg1.controller
		local f2_local1 = LUI.IsLastInputGamepad( f2_local0 )
		if f2_arg1.button == "down" and f2_arg1.down and 0 < f1_arg0:GetNumChildren() then
			if f1_arg0:IsTextEditActive() or f1_arg0:isInFocus() then
				f1_arg0( f1_arg0, f2_local0, f1_arg0, f1_arg0 )
				return true
			elseif f1_arg0:GetWidgetAtIndex( f1_arg0:GetNumChildren() - 1 ) then
				local f2_local2 = f1_arg0:GetWidgetAtIndex( f1_arg0:GetNumChildren() - 1 )
				if f2_local2:isInFocus() then
					f1_arg0( f1_arg0, f2_local0, f1_arg0, f1_arg0 )
					return true
				end
			end
		elseif f2_arg1.button == "up" and f2_arg1.down and 0 < f1_arg0:GetNumChildren() then
			if f1_arg0:IsTextEditActive() or f1_arg0:isInFocus() then
				f1_arg0( f1_arg0, f2_local0, f1_arg0, f1_arg0, f1_arg0:GetNumChildren() - 1 )
				return true
			end
			local f2_local2 = f1_arg0.Grid:GetFirstFocusablePosition()
			if f2_local2 then
				f2_local2 = f1_arg0:GetWidgetAtIndex( f2_local2.y )
			end
			if f2_local2 and f2_local2:isInFocus() then
				f1_arg0( f1_arg0, f2_local0, f1_arg0, f1_arg0 )
				return true
			end
		elseif f2_arg1.button == "primary" and Engine[0x575E9C5B9AAB6F4]() and f2_local1 and (f1_arg0.shouldFocus or f1_arg0:isInFocus()) then
			f1_arg0:processEvent( {
				name = "button_action",
				controller = f2_local0
			} )
			f1_arg0.shouldFocus = nil
			return true
		end
	end )
end

