-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
module( ..., package.seeall )
require( "ui.generated.widgets.genericbutton" )
local f0_local0 = function ( f18_arg0 )
	f18_arg0._areButtonsDisabled = true
	if f18_arg0.PlayAgainWithSquadButton then
		f18_arg0.PlayAgainWithSquadButton:SetButtonDisabled( true )
	end
	if f18_arg0.NoThanksButton then
		f18_arg0.NoThanksButton:SetButtonDisabled( true )
	end
end

local f0_local1 = function ( f17_arg0, f17_arg1 )
	if HUDUtils.isPlayAgainSquadButtonDisabled then
		ACTIONS.AnimateSequence( f17_arg0, "HideNoThanks" )
		f17_arg0.PlayAgainWithSquadButton:SetText( Engine[0xED84C33EC5F01EA]( 0x46471062094071A ) )
		f17_arg0.PlayAgainWithSquadButton:SetButtonDisabled( true )
		f17_arg0.PlayAgainWithSquadButton._isConfirmed = not f17_arg0.PlayAgainWithSquadButton._isConfirmed
	end
end

local f0_local2 = function ( f13_arg0, f13_arg1 )
	local f13_local0 = {}
	local f13_local1 = Lobby[0x6957722EF74F5D2]()
	local f13_local2 = DataSources.alwaysLoaded.privateParty.queuedMemberCount
	local f13_local3 = 0 < (f13_local2:GetValue( f13_arg1 ) or 0)
	f13_arg0:SubscribeToModel( f13_local2:GetModel( f13_arg1 ), function ()
		if 0 < (f13_arg0:GetValue( f13_arg0 ) or 0) and f13_arg0.PlayAgainWithSquadButton then
			f13_arg0.PlayAgainWithSquadButton:SetButtonDisabled( true )
		end
	end )
	if f13_arg0.PlayAgainWithSquadButton then
		if not HUDUtils.isPlayAgainSquadButtonDisabled and Lobby[0x63537242F1D48FF]() and Lobby[0x6957722EF74F5D2]() then
			table.insert( f13_local0, f13_arg0.PlayAgainWithSquadButton )
			f13_arg0.PlayAgainWithSquadButton:addEventHandler( "button_action", function ( f15_arg0, f15_arg1 )
				MP.PlayAgainWithSquadAction( f13_arg0, f13_arg0 )
			end )
		else
			ACTIONS.AnimateSequence( f13_arg0, "HideAll" )
		end
	end
	if f13_arg0.NoThanksButton then
		if not HUDUtils.isPlayAgainSquadButtonDisabled and Lobby[0x63537242F1D48FF]() and Lobby[0x6957722EF74F5D2]() then
			table.insert( f13_local0, f13_arg0.NoThanksButton )
			f13_arg0.NoThanksButton:addEventHandler( "button_action", function ( f14_arg0, f14_arg1 )
				ACTIONS.AnimateSequence( f13_arg0, "HideAll" )
			end )
		else
			ACTIONS.AnimateSequence( f13_arg0, "HideAll" )
		end
	end
	local f13_local4 = f13_local0[1]
	for f13_local8, f13_local9 in pairs( f13_local0 ) do
		local f13_local10 = f13_local9:GetAnchorsAndPosition()
		f13_local10 = f13_local10.top
		local f13_local11 = f13_local4:GetAnchorsAndPosition()
		if f13_local10 < f13_local11.top then
			f13_local4 = f13_local9
		end
	end
	if f13_local4 and LUI.IsLastInputGamepad( f13_arg1 ) then
		ACTIONS.GainFocusByElement( f13_local4, f13_arg1 )
	end
end

local f0_local3 = function ( menu, controller )
	menu.countDownTimer = LUI.UITimer.new( {
		event = "update_countdown_timer",
		interval = 1000,
		[1] = {
			controllerIndex = controller
		}
	} )
	menu.countDownTimer.id = "countDownTimer"
	menu:addElement( menu.countDownTimer )
	menu:addEventHandler( "update_countdown_timer", function ( f12_arg0, f12_arg1 )
		local f12_local0 = MP.GetRemainingEndgameTime( menu )
		if f12_local0 and 0 < #f12_local0 then
			if f12_arg0.PlayAgainWithSquadButton then
				f12_arg0.PlayAgainWithSquadButton.Text:setText( Engine[0xED84C33EC5F01EA]( 0xDF9913D4DBF7F03, f12_local0 ) )
			end
		elseif f12_arg0.PlayAgainWithSquadButton then
			f12_arg0.PlayAgainWithSquadButton.Text:setText( Engine[0xED84C33EC5F01EA]( 0x626BA51B6BB9A89 ) )
		end
	end )
end

local f0_local4 = function ( f10_arg0, f10_arg1, f10_arg2 )
	f10_arg0._endOfGame = f10_arg2.endOfGame
end

local f0_local5 = function ( f6_arg0, f6_arg1, f6_arg2 )
	f6_arg0._controllerIndex = f6_arg1
	local f6_local0 = Lobby[0x97580C42C59161F]()
	local f6_local1 = DataSources.inGame.player.squadIndex:GetValue( f6_arg1 ) or 0
	local f6_local2 = LUI.DataSourceInGlobalModel.new( "alwaysLoaded.privateParty.count" )
	if f6_local0 <= (f6_local2:GetValue( f6_arg1 ) or 1) or IsPrivateMatch() or not CONDITIONS.IsCoreMultiplayerNotBr() or not DataSources.inGame.MP.match.matchOver:GetValue( f6_arg1 ) then
		ACTIONS.AnimateSequence( f6_arg0, "HideAll" )
	else
		f0_local0( f6_arg0, f6_arg1 )
		f6_arg0.DisablePlayAgainAfterTimeout = f0_local0
		f6_arg0._areButtonsDisabled = false
		f6_arg0.checkPreLoadTimer = LUI.UITimer.new( {
			interval = 1000,
			event = "update_end_game_buttons"
		} )
		f6_arg0.checkPreLoadTimer.id = "checkPreLoadTimer"
		f6_arg0:addElement( f6_arg0.checkPreLoadTimer )
		f6_arg0:addEventHandler( "update_end_game_buttons", function ( f9_arg0, f9_arg1 )
			if f9_arg0.PlayAgainWithSquadButton then
				f6_arg0( f9_arg0, f6_arg0 )
			end
		end )
		f6_arg0:registerOmnvarHandler( "post_game_state", function ( f7_arg0 )
			if Game[0x28624DEF6F708C8]( f7_arg0._controllerIndex, "post_game_state" ) == PostGameState.PLAYAGAIN_WINDOW then
				local f7_local0 = f7_arg0:Wait( Dvar[0x22EAAB59AA27E9B]( 0x6AE6A9D61D4326A ) * 1000 )
				f7_local0.onComplete = function ()
					f7_arg0:DisablePlayAgainAfterTimeout()
				end
				
			end
		end )
	end
end

States = {
	[0xAD14C6E7156B923] = function ( f2_arg0, f2_arg1 )
		local f2_local0 = function ( f5_arg0, f5_arg1 )
			
		end
		
		f2_arg0.NoThanksButton:RegisterAnimationSequence( "HideAll", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		f2_arg0.PlayAgainWithSquadButton:RegisterAnimationSequence( "HideAll", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		local f2_local1 = function ( f4_arg0, f4_arg1 )
			f4_arg0.NoThanksButton:AnimateSequence( "HideAll" )
			f4_arg0.NoThanksButton:SetButtonDisabled( true )
			f4_arg0.PlayAgainWithSquadButton:AnimateSequence( "HideAll" )
			f4_arg0.PlayAgainWithSquadButton:SetButtonDisabled( true )
		end
		
		f2_arg0.NoThanksButton:RegisterAnimationSequence( "HideNoThanks", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		f2_arg0._sequences = {
			DefaultSequence = f2_local0,
			HideAll = f2_local1,
			HideNoThanks = function ( f3_arg0, f3_arg1 )
				f3_arg0.NoThanksButton:AnimateSequence( "HideNoThanks" )
				f3_arg0.NoThanksButton:SetButtonDisabled( true )
			end
		}
		f2_arg0._sequenceLengths = {
			DefaultSequence = 0,
			HideNoThanks = 0,
			HideAll = 0
		}
	end
}
function MPPlayAgainButtons( menu, controller )
	local self = LUI.UIVerticalList.new()
	self:SetVerticalAlignment( LUI.Alignment.Top )
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 360 * _1080p, 0, 90 * _1080p )
	self.id = "MPPlayAgainButtons"
	self.__states = States
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	f0_local0( self, f1_local1, controller )
	self:SetSpacing( 5 * _1080p )
	local PlayAgainWithSquadButton = nil
	
	PlayAgainWithSquadButton = MenuBuilder.BuildRegisteredType( "GenericButton", {
		controllerIndex = f1_local1
	} )
	PlayAgainWithSquadButton.id = "PlayAgainWithSquadButton"
	PlayAgainWithSquadButton.Text:SetRight( 0, 0 )
	PlayAgainWithSquadButton.Text:SetLeft( _1080p * 20, 0 )
	PlayAgainWithSquadButton.Text:SetTop( _1080p * 1, 0 )
	PlayAgainWithSquadButton.Text:setText( Engine[0xED84C33EC5F01EA]( 0x626BA51B6BB9A89 ), 0 )
	PlayAgainWithSquadButton.Text:SetWordWrap( true )
	PlayAgainWithSquadButton.Text:SetAlignment( LUI.Alignment.Left )
	PlayAgainWithSquadButton:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 40 )
	self:addElement( PlayAgainWithSquadButton )
	self.PlayAgainWithSquadButton = PlayAgainWithSquadButton
	
	local NoThanksButton = nil
	
	NoThanksButton = MenuBuilder.BuildRegisteredType( "GenericButton", {
		controllerIndex = f1_local1
	} )
	NoThanksButton.id = "NoThanksButton"
	NoThanksButton.Text:SetRight( 0, 0 )
	NoThanksButton.Text:SetLeft( _1080p * 20, 0 )
	NoThanksButton.Text:SetTop( _1080p * 1, 0 )
	NoThanksButton.Text:setText( Engine[0xED84C33EC5F01EA]( 0x48603A7C4C9F9F5 ), 0 )
	NoThanksButton.Text:SetWordWrap( true )
	NoThanksButton.Text:SetAlignment( LUI.Alignment.Left )
	NoThanksButton:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, _1080p * 45, _1080p * 85 )
	self:addElement( NoThanksButton )
	self.NoThanksButton = NoThanksButton
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "MPPlayAgainButtons", MPPlayAgainButtons )
LockTable( _M )
