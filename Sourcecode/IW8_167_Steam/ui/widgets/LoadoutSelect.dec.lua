-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 17-11-2025 01:22
module( ..., package.seeall )
if Engine.DDJFBBJAIG() then
	LUI.FlowManager.RegisterFenceGroup( "LoadoutSelect", {
		nil,
		"StatsGroup"
	} )
end
local f0_local0 = -0.8
local f0_local1 = 0.8
local f0_local2 = -0.8
local f0_local3 = 0.8
local f0_local4 = 3500
local f0_local5 = -0.3
local f0_local6 = 0.3
local f0_local7 = -0.3
local f0_local8 = 0.3
local f0_local9 = 4500
MenuBuilder.registerType( "LoadoutOptions", function ( f73_arg0, f73_arg1 )
	f73_arg1.widget = MenuBuilder.BuildRegisteredType( "LoadoutOptionsPopup", f73_arg1 )
	f73_arg1.flyInLeftNarrow = LAYOUT.GetTextWidth( f73_arg1.widget.MenuTitle.MenuTitle, f73_arg1.controllerIndex ) < 480 * _1080p
	local f73_local0 = MenuBuilder.BuildRegisteredType( "FlyInPopup", f73_arg1 )
	f73_local0.id = "LoadoutOptions"
	return f73_local0
end )
MenuBuilder.registerType( "BRLoadoutPurchaseConfirmPopup", function ( f72_arg0, f72_arg1 )
	local f72_local0 = MenuBuilder.BuildRegisteredType( "PopupYesNo", f72_arg1 )
	f72_local0.id = "BRLoadoutPurchaseConfirmPopup"
	return f72_local0
end )
if not Engine.DDJFBBJAIG() then
	if CONDITIONS.IsThirdGameMode( self ) then
		LUI.FlowManager.RequestSetStack( "LoadoutSelect", {
			{
				name = "CPPauseMenu"
			}
		} )
	elseif CONDITIONS.IsMagmaGameMode( self ) then
		LUI.FlowManager.RequestSetStack( "LoadoutSelect", {
			{
				name = "BrPauseMenu"
			}
		} )
	else
		LUI.FlowManager.RequestSetStack( "LoadoutSelect", {
			{
				name = "MPPauseMenu"
			}
		} )
	end
end
local f0_local10 = {
	loadoutEdit = 2,
	loadoutSelect = 1
}
local f0_local11 = {
	default = 1,
	mix = 2,
	custom = 0
}
local f0_local12 = function ( f71_arg0, f71_arg1, f71_arg2, f71_arg3 )
	for f71_local0 = 0, 1, 1 do
		local f71_local3 = f71_arg2[f71_arg3].weaponSetups[f71_local0]
		local f71_local4 = WEAPON.GetWeaponModelNameFromPlayerData( f71_local3.weapon:get(), f71_local3, {
			includeCamos = true,
			includeAttachments = true,
			includeStickers = true,
			controllerIndex = f71_arg1
		} )
		local f71_local5
		if f71_local0 == 0 then
			f71_local5 = f71_arg0.primaryWeaponModel
			if not f71_local5 then
			
			else
				WEAPON.SetModelIfLoaded( f71_arg1, f71_local5, f71_local4, {
					adjustSandbags = f71_local0 == 0,
					modelWeaponTable = WEAPON.GenerateWeaponTable( f71_local3 )
				} )
			end
		end
		f71_local5 = f71_arg0.secondaryWeaponModel
	end
	CLIENT_MODEL.UpdateModelsForLoadout( f71_arg0, f71_arg1, f71_arg3 )
	WEAPON.SetResetDynBones( {
		FrontEndScene.ClientWeapons.GunTablePrimary,
		FrontEndScene.ClientWeapons.GunTableSecondary
	} )
end

local f0_local13 = function ( f70_arg0 )
	local f70_local0 = LUI.FlowManager.GetScopedData( f70_arg0 )
	local f70_local1 = PlayerData.BFFBGAJGD( f70_local0.controllerIndex, LOADOUT.GetLoadoutStatsGroup() )
	f0_local0( f70_arg0, f70_local0.controllerIndex, f70_local1.squadMembers.loadouts, f70_local0.selectedLoadoutIndex )
	CLIENT_MODEL.SetAllModelsModifiable( f70_local0.controllerIndex )
end

local f0_local14 = function ( f69_arg0, f69_arg1, f69_arg2 )
	local f69_local0 = {}
	for f69_local1 = #f69_arg2 - 1, 0, -1 do
		local f69_local4 = f69_arg2[f69_local1]
		for f69_local5 = 0, #f69_local4.weaponSetups - 1, 1 do
			local f69_local8 = f69_local4.weaponSetups[f69_local5]
			local f69_local9 = WEAPON.GetWeaponModelNameFromPlayerData( f69_local8.weapon:get(), f69_local8, {
				includeCamos = true,
				includeAttachments = true,
				includeStickers = true,
				controllerIndex = f69_arg1
			} )
			if not LUI.IsItemInArray( f69_local0, f69_local9 ) then
				table.insert( f69_local0, f69_local9 )
			end
		end
	end
	table.insert( f69_local0, WATCH.GetFullModelName( WATCH.GetEquippedWatch( f69_arg1 ) ) )
	if 0 < #f69_local0 then
		FrontEndScene.RequestWeaponViewModels( f69_local0, f69_arg1 )
	end
end

local f0_local15 = function ( f68_arg0, f68_arg1, f68_arg2 )
	local f68_local0 = PlayerData.BFFBGAJGD( f68_arg1, LOADOUT.GetLoadoutStatsGroup() )
	f68_local0 = f68_local0.squadMembers.loadouts
	if Engine.DDJFBBJAIG() then
		Streaming.BDDBGGIC( true )
		f0_local0( f68_arg0, f68_arg1, f68_local0 )
	end
	DYN_ATTACHMENT.ReloadLoadoutWeaponStreamedImages( f68_arg0, f68_arg1 )
end

local f0_local16 = function ( f67_arg0, f67_arg1 )
	if Engine.DDJFBBJAIG() then
		f67_arg0.Loadouts:SetMouseFocusBlocker( not f67_arg1 )
	else
		f67_arg0.InGameLoadouts:SetMouseFocusBlocker( not f67_arg1 )
	end
end

local f0_local17 = function ( f66_arg0 )
	if Engine.DDJFBBJAIG() then
		f66_arg0.Loadouts:RefreshContent()
	else
		f66_arg0.InGameLoadouts:RefreshContent()
	end
end

local f0_local18 = {
	PREVIEW = "LoadoutPreview",
	EDIT = "LoadoutEdit"
}
local f0_local19 = function ( f65_arg0, f65_arg1, f65_arg2 )
	local f65_local0
	if f65_arg2 and f65_arg2.snap then
		f65_local0 = "Snap"
	else
		f65_local0 = ""
	end
	f65_arg1 = f65_arg1 .. f65_local0
	local f65_local1 = WZWIP.CheckForApplyPrependWZWipPrefix( f65_arg1 )
	for f65_local5, f65_local6 in pairs( f65_arg0.LOADOUT_BUTTONS ) do
		f65_local6._isInPreviewState = f65_arg1 == f0_local0.PREVIEW
		if f65_local6._sequences[f65_local1] then
			ACTIONS.AnimateSequence( f65_local6, f65_local1 )
		else
			ACTIONS.AnimateSequence( f65_local6, f65_arg1 )
		end
	end
end

local f0_local20 = function ( f64_arg0, f64_arg1, f64_arg2 )
	if f64_arg0.BundleUpsellButton then
		if Dvar.IBEGCHEFE( "LTSNLQNRKO" ) and Dvar.IBEGCHEFE( "NKRLMNTNRS" ) and f64_arg0._bundleVariants[f64_arg2] and not CONDITIONS.AreRestrictionsActive( f64_arg1 ) and f64_arg0._bundleVariants[f64_arg2][1] then
			f64_arg0.BundleUpsellButton:SetupUpsellButtonWithBundleID( f64_arg1, f64_arg0._bundleVariants[f64_arg2][1].bundleID )
		else
			f64_arg0.BundleUpsellButton:HideButton()
		end
	end
end

local f0_local21 = function ( f59_arg0, f59_arg1, f59_arg2, f59_arg3 )
	local f59_local0 = LUI.FlowManager.GetScopedData( f59_arg0 )
	if f59_local0.menuState == f0_local0.loadoutSelect then
		f59_local0.loadoutSessionStartTime = Engine.DCJHCAFIIA()
	end
	f59_local0.menuState = f0_local0.loadoutEdit
	f59_arg0:dispatchEventToChildren( {
		name = "menu_state_updated",
		menuState = f59_local0.menuState
	} )
	if f59_local0.openedFromScriptRequest then
		f59_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			side = "left",
			button_ref = "button_secondary",
			helper_text = Engine.CBBHFCGDIC( "MENU/BACK" )
		} )
	end
	if Engine.DDJFBBJAIG() then
		f59_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
			button_ref = "button_alt2"
		} )
		f59_arg0.KBMLoadoutOptionsPrompt:SetAlpha( 0 )
	end
	f0_local0( f59_arg0, "LoadoutEdit" )
	ACTIONS.AnimateSequence( f59_arg0, "LoadoutEdit" )
	local f59_local1 = function ( f63_arg0, f63_arg1 )
		if not CONDITIONS.IsMagmaGameMode() and not Onboarding.WeaponMasteryChallenges.WasCompleted( f63_arg0, f63_arg1 ) then
			LUI.FlowManager.RequestPopupMenu( f63_arg0, "onboardingpopup", true, f63_arg1, false, ONBOARDING_DATA.GetOnboardingWeaponMasteryChallengesData() )
			Onboarding.WeaponMasteryChallenges.MarkCompleted( f63_arg0, f63_arg1 )
		end
	end
	
	local f59_local2 = function ( f62_arg0, f62_arg1 )
		if CONDITIONS.IsWZWipFlowEnabled() and Dvar.IBEGCHEFE( "ui_ob_wz_show_weapon_mastery" ) and CONDITIONS.AreWZLoadoutsEnabled() and not Onboarding.WeaponCH2WZMasteryChallenges.WasCompleted( f62_arg0, f62_arg1 ) then
			LUI.FlowManager.RequestPopupMenu( f62_arg0, "onboardingpopup", true, f62_arg1, false, ONBOARDING_DATA.GetOnboardingCH2WZWeaponMasteryChallengesData() )
			Onboarding.WeaponCH2WZMasteryChallenges.MarkCompleted( f62_arg0, f62_arg1 )
		end
	end
	
	REG7.processEvent( Engine.DDJFBBJAIG() and f59_arg0.Loadouts or f59_arg0.InGameLoadouts, {
		name = "lose_focus",
		controller = f59_arg1
	} )
	if Engine.DDJFBBJAIG() then
		if CONDITIONS.IsBlueprintStoreEnabled() and not Onboarding.BlueprintStore.WasCompleted( self, f59_arg1 ) then
			local f59_local3 = nil
			if CONDITIONS.IsWZWipFlowEnabled() then
				f59_local3 = ONBOARDING_DATA.GetOnboardingCH2WZBlueprintStoreData()
			else
				f59_local3 = ONBOARDING_DATA.GetOnboardingBlueprintStoreData()
			end
			if CONDITIONS.IsWZWipFlowEnabled() then
				if not Onboarding.WeaponCH2WZMasteryChallenges.WasCompleted( self, f59_arg1 ) then
					f59_local3.confirmButton.action = function ( f61_arg0, f61_arg1 )
						ACTIONS.LeaveMenu( f61_arg0 )
						f59_arg0( self, f61_arg1 )
					end
					
				end
			elseif not Onboarding.WeaponMasteryChallenges.WasCompleted( self, f59_arg1 ) then
				f59_local3.confirmButton.action = function ( f60_arg0, f60_arg1 )
					ACTIONS.LeaveMenu( f60_arg0 )
					f59_arg0( self, f60_arg1 )
				end
				
			end
			LUI.FlowManager.RequestPopupMenu( self, "onboardingpopup", true, f59_arg1, false, f59_local3 )
			Onboarding.BlueprintStore.MarkCompleted( self, f59_arg1 )
		elseif CONDITIONS.IsWZWipFlowEnabled() then
			f59_local2( self, f59_arg1 )
		else
			f59_local1( self, f59_arg1 )
		end
	end
	f59_arg0.LoadoutSelectButtons:processEvent( {
		name = "gain_focus",
		controller = f59_arg1
	} )
	f0_local0( f59_arg0, false )
	f59_arg0.LoadoutSelectButtons:SetMouseHandling( true )
	f59_arg0.MenuTitle:SetTitle( f59_arg2.name:get() )
	if f59_arg0.InGameLoadoutTabs then
		f59_arg0.InGameLoadoutTabs:DisableAll()
	end
	if f59_arg0.BundleUpsellButton then
		f59_arg0:UpdateBundleUpsell( f59_arg1, f59_arg2.weaponSetups[WEAPON.PrimarySlot].weapon:get() )
	end
end

local f0_local22 = function ( f58_arg0, f58_arg1 )
	Engine.DHFCHIIJCA( "loadout_showcase" )
	local f58_local0 = LUI.FlowManager.GetScopedData( f58_arg0 )
	if f58_local0.menuState == f0_local0.loadoutEdit then
		METRICS.LoadoutSessionSendDLogEvent( f58_arg1, f58_local0.sessionID, f58_local0.loadoutSessionStartTime, f58_local0.selectedLoadoutIndex )
		LAYOUT.FadeInAspectRatioFadeFrame( f58_arg0, 300 )
	end
	f58_local0.menuState = f0_local0.loadoutSelect
	f58_arg0:dispatchEventToChildren( {
		name = "menu_state_updated",
		menuState = f58_local0.menuState
	} )
	f58_arg0.LoadoutSelectButtons:processEvent( {
		name = "lose_focus",
		controller = f58_arg1
	} )
	local f58_local1 = Engine.DDJFBBJAIG() and f58_arg0.Loadouts or f58_arg0.InGameLoadouts
	f0_local0( f58_arg0, true )
	f0_local0( f58_arg0 )
	f58_local1:processEvent( {
		name = "gain_focus",
		controller = f58_arg1
	} )
	if Engine.DDJFBBJAIG() then
		if LUI.IsLastInputGamepad( f58_arg1 ) then
			f58_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
				clickable = true,
				priority = 20,
				side = "left",
				gamepad_only = true,
				button_ref = "button_alt2",
				helper_text = Engine.CBBHFCGDIC( "LUA_MENU/LOADOUT_OPTIONS" )
			} )
		else
			f58_arg0.KBMLoadoutOptionsPrompt:SetAlpha( 1 )
		end
	end
	f0_local0( f58_arg0, "LoadoutPreview" )
	local f58_local2 = "LoadoutButtons"
	if not Engine.DDJFBBJAIG() then
		if f58_local0.openedForPlunderBox == true or CONDITIONS.IsBRLoadoutGameType( f58_arg1 ) then
			f58_local2 = "InGameLoadoutButtonsBr"
		else
			f58_local2 = "InGameLoadoutButtons"
		end
	end
	ACTIONS.AnimateSequence( f58_arg0, f58_local2 )
	f58_arg0.LoadoutSelectButtons:SetMouseHandling( false )
	if f58_arg0.InGameLoadoutTabs then
		f58_arg0.InGameLoadoutTabs:EnableAll()
	end
	if not Engine.DDJFBBJAIG() then
		f58_arg0.MenuTitle:SetTitle( Engine.CBBHFCGDIC( "LUA_MENU/CHOOSE_LOADOUT" ) )
	else
		f58_arg0.MenuTitle:SetTitle( Engine.CBBHFCGDIC( "LUA_MENU/EDIT_LOADOUTS" ) )
	end
	if f58_arg0.BundleUpsellButton then
		f58_arg0.BundleUpsellButton:HideButton()
	end
	if f58_arg0.MasterChallenges then
		f58_arg0.MasterChallenges:SetAlpha( 0 )
	end
end

local f0_local23 = function ( f57_arg0, f57_arg1, f57_arg2, f57_arg3 )
	local f57_local0 = false
	if f57_arg0.selectedLoadout and f57_arg0.selectedLoadout:GetValue( f57_arg1 ) then
		local f57_local1 = f57_arg0.selectedLoadout:GetValue( f57_arg1 )
		if not (not f57_arg3 or f57_local1 ~= f57_arg2 + LOADOUT.DEFAULT_LOADOUT_INDEX_START) or not f57_arg3 and f57_local1 == f57_arg2 then
			f57_local0 = true
		end
	end
	return f57_local0
end

local f0_local24 = function ( f53_arg0, f53_arg1, f53_arg2 )
	local f53_local0 = f53_arg2.Text
	if f53_local0 then
		f53_local0 = f53_arg2.Text:getText()
	end
	f53_arg2:SetupContextualMenu( {
		title = f53_local0
	} )
	f53_arg2:AddContextualMenuAction( {
		id = "renameLoadout",
		actionName = Engine.CBBHFCGDIC( "MENU/RENAME" ),
		actionFunction = function ()
			LOADOUT.RenameLoadout( f53_arg0, f53_arg0, f53_arg0.playerData, f53_arg0.index )
		end
	} )
	f53_arg2:AddContextualMenuAction( {
		id = "copyLoadout",
		actionName = Engine.CBBHFCGDIC( "LUA_MENU/COPY_LOADOUT" ),
		actionFunction = function ()
			LOADOUT.OpenLoadoutCopyPopup( f53_arg0, f53_arg0.index )
		end
	} )
	if IsOnlineMatch() then
		f53_arg2:AddContextualMenuAction( {
			id = "copyLoadout",
			actionName = Engine.CBBHFCGDIC( "LUA_MENU/SET_FAVORITE" ),
			actionFunction = function ()
				LOADOUT.SetFavoriteLoadout( f53_arg0, f53_arg0, f53_arg0.index )
			end
		} )
	end
end

local f0_local25 = function ( f52_arg0, f52_arg1 )
	for f52_local3, f52_local4 in ipairs( f52_arg0 ) do
		if f52_local4 and f52_local4 ~= "" and MLG.IsAttachmentRestricted( f52_local4, f52_arg1 ) then
			return true
		end
	end
	return false
end

local f0_local26 = function ( f51_arg0, f51_arg1, f51_arg2, f51_arg3 )
	ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.PrimaryWeaponCluster, "RestrictionOff" )
	ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.PrimaryWeaponCluster.AttachmentsButton, "RestrictionOff" )
	ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.PrimaryWeaponCluster, "RestrictionWarningOff" )
	ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.SecondaryWeaponCluster, "RestrictionOff" )
	ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.SecondaryWeaponCluster.AttachmentsButton, "RestrictionOff" )
	ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.SecondaryWeaponCluster, "RestrictionWarningOff" )
	ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOffPerk1" )
	ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOffPerk2" )
	ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOffPerk3" )
	ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOffPerk4" )
	ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOffPerk5" )
	ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOffPerk6" )
	ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.EquipmentGridItem, "RestrictionOff" )
	ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.TacticalGridItem, "RestrictionOff" )
	local f51_local0
	if f51_arg3 then
		f51_local0 = f51_arg3.weapons[1].ref
		if not f51_local0 then
		
		else
			if f51_local0 and f51_local0 ~= "" and MatchRules.CADFFHGJAE( f51_local0 ) then
				ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.PrimaryWeaponCluster, "RestrictionOn" )
			end
			local f51_local1
			if f51_arg3 then
				f51_local1 = f0_local0( f51_arg3.weapons[1].attachments, f51_local0 )
				if not f51_local1 then
				
				else
					if f51_local1 then
						ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.PrimaryWeaponCluster, "RestrictionWarningOn" )
						ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.PrimaryWeaponCluster.AttachmentsButton, "RestrictionOn" )
					end
					local f51_local2
					if f51_arg3 then
						f51_local2 = f51_arg3.weapons[2].ref
						if not f51_local2 then
						
						else
							if f51_local2 and f51_local2 ~= "" and MatchRules.CADFFHGJAE( f51_local2 ) then
								ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.SecondaryWeaponCluster, "RestrictionOn" )
							end
							local f51_local3
							if f51_arg3 then
								f51_local3 = f0_local0( f51_arg3.weapons[2].attachments, f51_local2 )
								if not f51_local3 then
								
								else
									if f51_local3 then
										ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.SecondaryWeaponCluster, "RestrictionWarningOn" )
										ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.SecondaryWeaponCluster.AttachmentsButton, "RestrictionOn" )
									end
									local f51_local4
									if f51_arg3 then
										f51_local4 = f51_arg3.perks[1]
										if not f51_local4 then
										
										else
											if f51_local4 and f51_local4 ~= "" and Restrictions.IsPerkRestricted( f51_local4 ) then
												ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOnPerk1" )
											end
											local f51_local5
											if f51_arg3 then
												f51_local5 = f51_arg3.perks[2]
												if not f51_local5 then
												
												else
													if f51_local5 and f51_local5 ~= "" and Restrictions.IsPerkRestricted( f51_local5 ) then
														ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOnPerk2" )
													end
													local f51_local6
													if f51_arg3 then
														f51_local6 = f51_arg3.perks[3]
														if not f51_local6 then
														
														else
															if f51_local6 and f51_local6 ~= "" and Restrictions.IsPerkRestricted( f51_local6 ) then
																ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOnPerk3" )
															end
															local f51_local7 = nil
															if f51_arg3 then
																f51_local7 = f51_arg3.extraPerks
															else
																f51_local7 = f51_arg2.extraPerks[0]
															end
															local f51_local8
															if f51_local7 then
																f51_local8 = f51_local7
															else
																f51_local8 = not Restrictions.ArePerksRestricted()
															end
															if f51_local8 then
																local f51_local9
																if f51_arg3 then
																	f51_local9 = f51_arg3.extraPerks[1]
																	if not f51_local9 then
																	
																	else
																		if f51_local9 and f51_local9 ~= "" and Restrictions.IsPerkRestricted( f51_local9 ) then
																			ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOnPerk4" )
																		end
																		local f51_local10
																		if f51_arg3 then
																			f51_local10 = f51_arg3.extraPerks[2]
																			if not f51_local10 then
																			
																			else
																				if f51_local10 and f51_local10 ~= "" and Restrictions.IsPerkRestricted( f51_local10 ) then
																					ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOnPerk5" )
																				end
																				local f51_local11
																				if f51_arg3 then
																					f51_local11 = f51_arg3.extraPerks[3]
																					if not f51_local11 then
																					
																					elseif f51_local11 and f51_local11 ~= "" and Restrictions.IsPerkRestricted( f51_local11 ) then
																						ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.PerkGridItem, "RestrictionOnPerk6" )
																					end
																				end
																				f51_local11 = f51_arg2.extraPerks[2]:get()
																			end
																		end
																		f51_local10 = f51_arg2.extraPerks[1]:get()
																	end
																end
																f51_local9 = f51_arg2.extraPerks[0]:get()
															end
															local f51_local9
															if f51_arg3 then
																f51_local9 = f51_arg3.lethal
																if not f51_local9 then
																
																else
																	if f51_local9 and f51_local9 ~= "" and MatchRules.BAJDCAAGCG( f51_local9 ) then
																		ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.EquipmentGridItem, "RestrictionOn" )
																	end
																	local f51_local10
																	if f51_arg3 then
																		f51_local10 = f51_arg3.tactical
																		if not f51_local10 then
																		
																		else
																			if f51_local10 and f51_local10 ~= "" and MatchRules.BAJDCAAGCG( f51_local10 ) then
																				ACTIONS.AnimateSequence( f51_arg0.LoadoutSelectButtons.TacticalGridItem, "RestrictionOn" )
																			end
																		end
																	end
																	f51_local10 = f51_arg2.equipmentSetups[1].equipment:get()
																end
															end
															f51_local9 = f51_arg2.equipmentSetups[0].equipment:get()
														end
													end
													f51_local6 = f51_arg2.loadoutPerks[2]:get()
												end
											end
											f51_local5 = f51_arg2.loadoutPerks[1]:get()
										end
									end
									f51_local4 = f51_arg2.loadoutPerks[0]:get()
								end
							end
							f51_local3 = LOADOUT.MATCHRULES.WeaponHasRestrictedAttachment( f51_arg2.weaponSetups[1].attachmentSetup, f51_local2 )
						end
					end
					f51_local2 = f51_arg2.weaponSetups[1].weapon:get()
				end
			end
			f51_local1 = LOADOUT.MATCHRULES.WeaponHasRestrictedAttachment( f51_arg2.weaponSetups[0].attachmentSetup, f51_local0 )
		end
	end
	f51_local0 = f51_arg2.weaponSetups[0].weapon:get()
end

local f0_local27 = function ( f50_arg0 )
	local f50_local0 = f50_arg0.weapons[1].ref
	if f50_local0 and f50_local0 ~= "" and MatchRules.CADFFHGJAE( f50_local0 ) then
		return true
	end
	for f50_local4, f50_local5 in ipairs( f50_arg0.weapons[1].attachments ) do
		if f50_local5 and f50_local5 ~= "" and MLG.IsAttachmentRestricted( f50_local5, f50_local0 ) then
			return true
		end
	end
	f50_local1 = f50_arg0.weapons[2].ref
	if f50_local1 and f50_local1 ~= "" and MatchRules.CADFFHGJAE( f50_local1 ) then
		return true
	end
	for f50_local5, f50_local6 in ipairs( f50_arg0.weapons[2].attachments ) do
		if f50_local6 and f50_local6 ~= "" and MLG.IsAttachmentRestricted( f50_local6, f50_local1 ) then
			return true
		end
	end
	f50_local2 = f50_arg0.lethal
	if f50_local2 and f50_local2 ~= "" and MatchRules.BAJDCAAGCG( f50_local2 ) then
		return true
	end
	f50_local3 = f50_arg0.tactical
	if f50_local3 and f50_local3 ~= "" and MatchRules.BAJDCAAGCG( f50_local3 ) then
		return true
	end
	for f50_local7, f50_local8 in ipairs( f50_arg0.perks ) do
		if f50_local8 and f50_local8 ~= "" and Restrictions.IsPerkRestricted( f50_local8 ) then
			return true
		end
	end
	if f50_arg0.extraPerks then
		for f50_local7, f50_local8 in ipairs( f50_arg0.extraPerks ) do
			if f50_local8 and f50_local8 ~= "" and Restrictions.IsPerkRestricted( f50_local8 ) then
				return true
			end
		end
	end
	return false
end

local f0_local28 = function ( f44_arg0, f44_arg1, f44_arg2, f44_arg3, f44_arg4, f44_arg5 )
	local f44_local0 = Engine.DDJFBBJAIG() and f44_arg0.Loadouts or f44_arg0.InGameLoadouts
	local f44_local1 = f44_arg2.LoadoutButton
	local f44_local2 = f44_arg3[f44_arg4]
	assert( f44_local1.Text )
	f44_local1.playerData = f44_local2
	f44_local1.index = f44_arg4
	if not Engine.DDJFBBJAIG() and f44_local0.state == f0_local0.mix and #f44_arg3 <= f44_arg4 then
		f44_local1.index = f44_arg4 - #f44_arg3
		f44_arg2:SetEditButtonEnabled( false )
	end
	f44_local1.isLoadout = true
	f44_local1.isDefault = f44_arg5
	local f44_local3 = false
	if f44_arg5 and f44_arg0.defaultLoadouts then
		f44_local3 = f0_local0( f44_arg0.defaultLoadouts[f44_local1.index + 1] )
	else
		f44_local3 = LOADOUT.MATCHRULES.LoadoutHasRestrictedItem( f44_local2 )
	end
	if f44_local3 then
		ACTIONS.AnimateSequence( f44_local1, "RestrictionOn" )
	else
		ACTIONS.AnimateSequence( f44_local1, "RestrictionOff" )
	end
	if CONDITIONS.InGame() then
		if not PROGRESSION.AreCustomLoadoutsUnlocked( f44_arg1 ) then
			f44_arg0.UnlockText:SetAlpha( 1 )
			if f44_arg4 == 3 and not PROGRESSION.IsUnlocked( f44_arg1, LOOT.itemTypes.FEATURE, "loadout_4" ) then
				f44_local1:SetButtonDisabled( true )
				f44_local1.buttonDescription = PROGRESSION.GetUnlockText( f44_arg1, LOOT.itemTypes.FEATURE, "loadout_4" )
			elseif f44_arg4 == 4 and not PROGRESSION.IsUnlocked( f44_arg1, LOOT.itemTypes.FEATURE, "loadout_5" ) then
				f44_local1:SetButtonDisabled( true )
				f44_local1.buttonDescription = PROGRESSION.GetUnlockText( f44_arg1, LOOT.itemTypes.FEATURE, "loadout_5" )
			else
				f44_local1.buttonDescription = ""
			end
		end
		if not f44_arg5 and not Engine.BGGJFFFAFG( f44_arg1 ) and not CONDITIONS.InGameAndBRLoadoutSelect( f44_arg1 ) then
			f44_local1:AddTooltipData( f44_arg1, {
				promptsData = {
					{
						button_ref = "button_start",
						keyprompt_text = LocalizeString( "[{ONFOOT_MP:changeclass" .. f44_arg4 + 1 .. "}]" ),
						helper_text = Engine.CBBHFCGDIC( "MENU/QUICK_SWITCH" )
					}
				}
			} )
		else
			f44_local1:RemoveToolTipData()
		end
	end
	if not Engine.DDJFBBJAIG() then
		if f0_local0( f44_arg0, f44_arg1, f44_local1.index, f44_local1.isDefault ) then
			f44_local1:SetSelected( f44_arg1, true )
		else
			f44_local1:SetSelected( f44_arg1, false )
		end
		f44_local1.defaultLoadout = f44_arg0.defaultLoadouts[f44_local1.index + 1]
		f44_arg2.EditButton.index = f44_arg4
		f44_arg2.EditButton.playerData = f44_local2
		if f44_local0.state == f0_local0.mix then
			local f44_local4 = f44_arg2
			local f44_local5 = f44_arg2.AddDividingLine
			local f44_local6
			if f44_arg5 or f44_arg4 + 1 ~= #f44_arg3 then
				f44_local6 = false
			else
				f44_local6 = true
			end
			local f44_local7 = f44_arg0.openedForPlunderBox
			if not f44_local7 then
				f44_local7 = CONDITIONS.IsBRLoadoutGameType( f44_arg1 )
			end
			f44_local5( f44_local4, f44_local6, f44_local7 )
		end
	end
	local f44_local5 = 0
	if CONDITIONS.InGameAndBRLoadoutSelect( f44_arg1 ) and not f44_local1:IsDisabled() then
		if f44_arg0.openedForPlunderBox == true then
			local f44_local4 = 0
			local f44_local6 = true
			if f44_arg5 then
				f44_local4 = tonumber( StringTable.DIFCHIGDFB( CSV.brKioskPurchases.file, CSV.brKioskPurchases.cols.type, "loadout_default", CSV.brKioskPurchases.cols.cost ) )
			else
				f44_local4 = tonumber( StringTable.DIFCHIGDFB( CSV.brKioskPurchases.file, CSV.brKioskPurchases.cols.type, "loadout_custom", CSV.brKioskPurchases.cols.cost ) )
			end
			local f44_local7 = DataSources.inGame.player.BRData.squadIndex:GetValue( f44_arg1 )
			if f44_local7 then
				if f44_local7 <= 1 then
					f44_local7 = ""
				end
			else
				f44_local7 = ""
			end
			local f44_local8 = DataSources.inGame.player.BRData["plunderAmount" .. f44_local7]:GetValue( f44_arg1 ) < f44_local4
			f44_local1:SetCost( f44_local4 * BRLOOT.PLUNDER_QUANTITY_SCALING_FACTOR, f44_local8 )
			if f44_local8 == false then
				f44_local1:SetButtonDisabled( false )
			end
		else
			f44_local1:DisableCost()
			f44_local1:SetButtonDisabled( false )
		end
	end
	local f44_local9 = f44_local1.Text
	local f44_local6 = f44_local9
	f44_local9 = f44_local9.setText
	local f44_local7
	if f44_arg5 then
		f44_local7 = Engine.CBBHFCGDIC( f44_local1.defaultLoadout.name )
		if not f44_local7 then
		
		else
			f44_local9( f44_local6, f44_local7 )
			if not f44_local1.handlersAdded then
				f44_local9 = function ( f49_arg0, f49_arg1 )
					if not Engine.DDJFBBJAIG() then
						if f44_arg0( f44_arg0, f44_arg0, f44_arg0.index, f44_arg0.isDefault ) then
							f44_arg0.LoadoutSelectButtons.EquippedWidget:UpdateVisibility( true )
							ACTIONS.AnimateSequence( f44_arg0.LoadoutSelectButtons.EquippedWidget, "TurnOn" )
						else
							f44_arg0.LoadoutSelectButtons.EquippedWidget:UpdateVisibility( false )
						end
					end
					f44_arg0.LoadoutSelectButtons:SetupGridItems( f44_arg0, f49_arg0.index, f49_arg0.playerData, f49_arg0.isDefault and f49_arg0.defaultLoadout )
					f44_arg0._focusedLoadoutIndex = f44_arg0.index
					if not Engine.DDJFBBJAIG() then
						if not f49_arg0.isDefault and f44_arg0.openedForPlunderBox ~= true and not CONDITIONS.IsBRLoadoutGameType( f44_arg0 ) and not (Dvar.IBEGCHEFE( "scr_br_disableLoadoutEdit" ) or false) then
							f44_arg0:SetEditButtonEnabled( true )
						end
					end
					if Engine.DDJFBBJAIG() then
						f44_arg0( f44_arg0, f44_arg0, f44_arg0, f49_arg0.index )
					end
					f44_arg0( f44_arg0, f44_arg0, f49_arg0.playerData, f49_arg0.isDefault and f49_arg0.defaultLoadout )
				end
				
				f44_local1.refreshDetailsGrid = f44_local9
				f44_local1:addEventHandler( "button_over", f44_local9 )
				f44_local1:addEventHandler( "button_over_disable", f44_local9 )
				f44_local1:addEventHandler( "tab_changed", f44_local9 )
				f44_local1:addEventHandler( "tab_changed", function ( f48_arg0, f48_arg1 )
					if f48_arg0.isDefault then
						f44_arg0:SetEditButtonEnabled( false )
					end
				end )
				local f44_local4 = function ( f47_arg0, f47_arg1 )
					local f47_local0 = LUI.FlowManager.GetScopedData( f44_arg0 )
					f47_local0.selectedLoadoutIndex = f47_arg0.index
					f44_arg0( f44_arg0, f44_arg0, f44_arg0, f47_arg0.index )
				end
				
				if not Engine.DDJFBBJAIG() then
					f44_local1:addEventHandler( "button_action", function ( f45_arg0, f45_arg1 )
						local f45_local0 = f45_arg0.index
						if f45_arg0.isDefault then
							f45_local0 = f45_local0 + LOADOUT.DEFAULT_LOADOUT_INDEX_START
						end
						f44_arg0.selectedLoadout:SetValue( f44_arg0, f45_local0 )
						if f44_arg0.openedForPlunderBox == true then
							LUI.FlowManager.RequestPopupMenu( f44_arg0, "BRLoadoutPurchaseConfirmPopup", true, f44_arg0, false, {
								defaultFocusIndex = 1,
								yesAction = function ()
									f45_arg0.selectedLoadout:SetValue( f45_arg0, f45_arg0 )
									Engine.EBHIFJCGBH( "br_loadout_purchase", f45_arg0 )
								end,
								message = Engine.CBBHFCGDIC( "MP_BR_INGAME/DO_YOU_WANT_TO_PURCHASE_N_FOR_N", f44_arg0.Text and f44_arg0.Text:getText() or "", f44_arg0 )
							} )
						else
							f44_arg0.selectedLoadout:SetValue( f44_arg0, f45_local0 )
							Engine.EBHIFJCGBH( "class_select", f45_local0 )
							if CONDITIONS.IsThirdGameMode( self ) and not f45_arg0.isDefault then
								local f45_local1 = PlayerData.BFFBGAJGD( f44_arg0, LOADOUT.GetLoadoutStatsGroup() )
								f45_local1.squadMembers.cpLoadoutSel:set( f45_local0 )
							end
							LUI.FlowManager.RequestCloseAllMenus()
							LUI.FlowManager.RequestResumeMovement()
						end
						local f45_local1 = LUI.FlowManager.GetScopedData( f44_arg0 )
						if f45_local1.cacSessionDlogOnGoing then
							METRICS.CacSessionEndSendDLogEvent( f44_arg0, f45_local1.sessionID, f45_local1.cacSessionStartTime, METRICS.CacExitReasons.PLAYER_SELECTED_LOADOUT )
							f45_local1.cacSessionDlogOnGoing = nil
						end
					end )
					f44_arg2.EditButton:addEventHandler( "button_action", f44_local4 )
				else
					f44_local1:addEventHandler( "button_action", f44_local4 )
				end
				f44_local1.handlersAdded = true
			end
			if Engine.DDJFBBJAIG() then
				if IsOnlineMatch() then
					assert( f44_arg2.Star )
					local f44_local9, f44_local4 = LOADOUT.GetFavoriteLoadoutIndex( f44_arg1 )
					if f44_arg4 == f44_local9 then
						f44_local6 = not f44_local4
					else
						f44_local6 = false
					end
					f44_local7 = f44_arg2.Star
					local f44_local8 = f44_local7
					f44_local7 = f44_local7.SetAlpha
					local f44_local10
					if f44_local6 then
						f44_local10 = 1
					else
						f44_local10 = 0
					end
					f44_local7( f44_local8, f44_local10 )
				end
				f0_local0( f44_arg0, f44_arg1, f44_local1 )
			end
			if CONDITIONS.IsBRLoadoutGameType( f44_arg1 ) and f44_arg2.LoadoutButton and f44_arg2.LoadoutButton.BRWarning then
				if f44_arg5 then
					f44_local9 = f44_local1.defaultLoadout.perks[1]
					if not f44_local9 then
					
					else
						local f44_local4
						if f44_arg5 then
							f44_local4 = f44_local1.defaultLoadout.perks[2]
							if not f44_local4 then
							
							else
								if f44_arg5 then
									f44_local6 = f44_local1.defaultLoadout.perks[3]
									if not f44_local6 then
									
									else
										f44_local7 = Cac.GetIsPerkDisabledForBR( f44_local9 )
										local f44_local11 = Cac.GetIsPerkDisabledForBR( f44_local4 )
										local f44_local8 = Cac.GetIsPerkDisabledForBR( f44_local6 )
										local f44_local10 = f44_arg2.LoadoutButton.BRWarning
										local f44_local12 = f44_local10
										f44_local10 = f44_local10.SetShowWarningIcon
										local f44_local13
										if not f44_local7 then
											f44_local13 = f44_local7
										elseif not f44_local11 then
											f44_local13 = f44_local11
										else
											f44_local13 = f44_local8
										end
										f44_local10( f44_local12, f44_local13 )
									end
								end
								f44_local6 = f44_local2.loadoutPerks[2]:get()
							end
						end
						f44_local4 = f44_local2.loadoutPerks[1]:get()
					end
				end
				f44_local9 = f44_local2.loadoutPerks[0]:get()
			end
		end
	end
	f44_local7 = f44_local2.name:get()
end

local f0_local29 = function ( f42_arg0, f42_arg1 )
	if Engine.DDJFBBJAIG() then
		FrontEndScene.SetExclusiveWeaponModels( {
			FrontEndScene.ClientWeapons.GunTablePrimary,
			FrontEndScene.ClientWeapons.GunTableSecondary,
			FrontEndScene.ClientWeapons.Watch
		} )
		Engine.DHFCHIIJCA( "loadout_showcase" )
		FrontEndScene.HideWeaponModels()
		local f42_local0 = MenuBuilder.BuildRegisteredType( "FrontendCameraMover", {
			enableSway = true,
			controllerIndex = f42_arg1
		} )
		f42_local0:SetLimits( f0_local0, f0_local0, f0_local0, f0_local0 )
		f42_local0:SetSwayValues( f0_local0, 0.06, 0.1 )
		f42_arg0.FrontendCameraMover = f42_local0
		f42_arg0:addElement( f42_local0 )
		f42_arg0.FrontendCameraMover:addEventHandler( "update_camera_limits", function ( f43_arg0, f43_arg1 )
			f43_arg0:SetLimits( f43_arg1.isZoomed and f42_arg0 or f42_arg0, f43_arg1.isZoomed and f42_arg0 or f42_arg0, f43_arg1.isZoomed and f42_arg0 or f42_arg0, f43_arg1.isZoomed and f42_arg0 or f42_arg0 )
			local f43_local0 = f43_arg1.isZoomed and f42_arg0 or f42_arg0
			f43_arg0:SetSwayValues( f42_arg0, 0.06, 0.1 )
		end )
		local f42_local1 = WATCH.GetEquippedWatch( f42_arg1 )
		local f42_local2 = WEAPON.GetWeaponModel( f42_arg1, FrontEndScene.ClientWeapons.Watch, CSV.weaponOffsets.watchFile )
		f42_arg0:addElement( f42_local2 )
		WATCH.SetWatchModelIfLoaded( f42_arg0, f42_arg1, f42_local2, f42_local1 )
	elseif f42_arg0.InGameLoadoutsMp then
		f42_arg0.InGameLoadouts = f42_arg0.InGameLoadoutsMp
	elseif f42_arg0.InGameLoadoutsBr then
		f42_arg0.InGameLoadouts = f42_arg0.InGameLoadoutsBr
	end
end

local f0_local30 = function ( f24_arg0, f24_arg1, f24_arg2 )
	f0_local0( f24_arg0, f24_arg1 )
	assert( f24_arg0.Loadouts or f24_arg0.InGameLoadouts )
	assert( f24_arg0.LoadoutSelectButtons )
	f24_arg0.UpdateBundleUpsell = f0_local0
	local f24_local0 = PlayerData.BFFBGAJGD( f24_arg1, LOADOUT.GetLoadoutStatsGroup() )
	f24_local0 = f24_local0.squadMembers.loadouts
	f24_arg0.bindButton = LUI.UIBindButton.new()
	f24_arg0:addElement( f24_arg0.bindButton )
	f24_arg0.LOADOUT_BUTTONS = {
		f24_arg0.LoadoutSelectButtons.PrimaryWeaponCluster.WeaponButton,
		f24_arg0.LoadoutSelectButtons.SecondaryWeaponCluster.WeaponButton,
		f24_arg0.LoadoutSelectButtons.EquipmentGridItem,
		f24_arg0.LoadoutSelectButtons.TacticalGridItem,
		f24_arg0.LoadoutSelectButtons.PerkGridItem
	}
	local f24_local1 = false
	if CONDITIONS.IsThirdGameMode() and not Engine.DDJFBBJAIG() and Game.BFEEGCHICA( f24_arg1, "cp_open_cac" ) == -1 then
		f24_local1 = true
	end
	local f24_local2 = false
	if not Engine.DDJFBBJAIG() and CONDITIONS.IsMagmaGameMode() and Game.BFEEGCHICA( f24_arg1, "ui_open_loadout_bag" ) then
		f24_local2 = true
	end
	if (f24_arg0.BundleUpsellButton or Dvar.IBEGCHEFE( "MRKSTPMLT" )) and Engine.DDJFBBJAIG() then
		f24_arg0._bundleVariants = WEAPON.GetPriorityVariants( f24_arg1, {
			excludeOwned = true,
			useBaseRefKeys = true
		} )
		f24_arg0._bundleVariants = WEAPON.GetAllVariantsInStore( f24_arg1, {
			excludeOwned = true,
			useBaseRefKeys = true,
			variantsTable = f24_arg0._bundleVariants
		} )
		local f24_local3 = LUI.FlowManager.GetScopedData( f24_arg0 )
		f24_local3.bundleVariants = f24_arg0._bundleVariants
	end
	if not f24_arg2.openedFromScriptRequest or f24_local1 then
		assert( f24_arg0.HelperBar )
		assert( f24_arg0.HelperBar.ButtonHelperText )
		f24_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			side = "left",
			button_ref = "button_secondary",
			priority = 0,
			helper_text = Engine.CBBHFCGDIC( "MENU/BACK" )
		} )
		f24_arg0.bindButton:addEventHandler( "button_secondary", function ( f41_arg0, f41_arg1 )
			local f41_local0 = LUI.FlowManager.GetScopedData( f24_arg0 )
			if f41_local0.menuState == f24_arg0.loadoutEdit then
				if not Engine.DDJFBBJAIG() then
					Engine.EBHIFJCGBH( "class_edit", f41_local0.selectedLoadoutIndex )
				end
				if f24_arg0.selectedLoadout ~= nil and f41_local0.selectedLoadoutIndex == f24_arg0.selectedLoadout:GetValue( f24_arg0 ) and not Engine.DDJFBBJAIG() then
					Engine.EBHIFJCGBH( "class_edit", f24_arg0.selectedLoadout:GetValue( f24_arg0 ) )
					f24_arg0( f24_arg0, f24_arg0 )
				else
					f24_arg0( f24_arg0, f24_arg0 )
				end
			else
				if f41_local0.cacSessionDlogOnGoing then
					METRICS.CacSessionEndSendDLogEvent( f24_arg0, f41_local0.sessionID, f41_local0.cacSessionStartTime, METRICS.CacExitReasons.PLAYER_EXIT )
					f41_local0.cacSessionDlogOnGoing = nil
				end
				if CONDITIONS.IsThirdGameMode() and not Engine.DDJFBBJAIG() then
					Engine.EBHIFJCGBH( "class_menu_closed", 1 )
					LUI.FlowManager.RequestCloseAllMenus()
					LUI.FlowManager.RequestResumeMovement()
				else
					ACTIONS.UploadStats( f24_arg0, f24_arg0 )
					ACTIONS.LeaveMenu( f24_arg0 )
				end
			end
		end )
		LAYOUT.SetupScalingBackgroundVignette( f24_arg0, {
			customAnimState = "ShowWeaponOverlay",
			customVignette = f24_arg0.WZVignette
		} )
		if not CONDITIONS.InGame() and CONDITIONS.IsWZWipFlowEnabled() then
			ACTIONS.AnimateSequence( f24_arg0, "WZWipSetup" )
		end
		if not Engine.DDJFBBJAIG() and not CONDITIONS.IsThirdGameMode() and f24_arg2.openedForPlunderBox ~= true then
			f24_arg0:addEventHandler( "menu_create", function ()
				f24_arg0:AddButtonHelperText( {
					clickable = true,
					priority = 2,
					side = "left",
					kbmTooltipPromptOverload = "button_dismiss_pause_menu",
					button_ref = "button_start",
					helper_text = Engine.CBBHFCGDIC( "LUA_MENU/DISMISS_MENU" )
				} )
			end )
			f24_arg0.bindButton:addEventHandler( "button_start", function ( f39_arg0, f39_arg1 )
				if Engine.CAADCDEEIA() then
					ACTIONS.ResumeGame( f39_arg0 )
				end
				local f39_local0 = LUI.FlowManager.GetScopedData( f24_arg0 )
				if f39_local0.cacSessionDlogOnGoing then
					METRICS.CacSessionEndSendDLogEvent( f24_arg0, f39_local0.sessionID, f39_local0.cacSessionStartTime, METRICS.CacExitReasons.PLAYER_EXIT )
					f39_local0.cacSessionDlogOnGoing = nil
				end
				LUI.FlowManager.RequestCloseAllMenus( f24_arg0.id, false, f39_arg1.controller )
				return true
			end )
			MenuUtils.AddDismissPauseMenuKBMHandler( f24_arg0 )
		end
	elseif f24_local2 then
		f24_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			side = "left",
			button_ref = "button_secondary",
			priority = 0,
			helper_text = Engine.CBBHFCGDIC( "MENU/BACK" )
		} )
		f24_arg0.bindButton:addEventHandler( "button_secondary", function ( f38_arg0, f38_arg1 )
			local f38_local0 = LUI.FlowManager.GetScopedData( f24_arg0 )
			if f38_local0.menuState == f24_arg0.loadoutEdit then
				if not Engine.DDJFBBJAIG() then
					Engine.EBHIFJCGBH( "class_edit", f38_local0.selectedLoadoutIndex )
					f24_arg0( f24_arg0, f24_arg0 )
				end
			else
				Engine.EBHIFJCGBH( "exit_loadout_bag", 1 )
				LUI.FlowManager.RequestCloseAllMenus()
				LUI.FlowManager.RequestResumeMovement()
			end
		end )
	else
		f24_arg0.isQuickAccessShortcutsDisabled = true
		f24_arg0.bindButton:addEventHandler( "button_secondary", function ( f37_arg0, f37_arg1 )
			local f37_local0 = LUI.FlowManager.GetScopedData( f24_arg0 )
			if f37_local0.menuState == f24_arg0.loadoutEdit then
				if not Engine.DDJFBBJAIG() then
					Engine.EBHIFJCGBH( "class_edit", f37_local0.selectedLoadoutIndex )
				end
				f24_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
					button_ref = "button_secondary"
				} )
				f24_arg0( f24_arg0, f24_arg0 )
			elseif CONDITIONS.IsBRLoadoutGameType( f24_arg0 ) and f37_local0.openedForPlunderBox ~= true then
				Engine.EBHIFJCGBH( "class_select", -1 )
				LUI.FlowManager.RequestCloseAllMenus()
				LUI.FlowManager.RequestResumeMovement()
			end
		end )
	end
	if CONDITIONS.InFrontendPublic() then
		f24_arg0:registerEventHandler( "update_weapon_master_summary", function ( element, event )
			if event.weaponRef and GUNSMITH.AreMasterChallengesEnabled( f24_arg0, event.weaponRef ) then
				f24_arg0.MasterChallenges:SetAlpha( 1 )
				f24_arg0.MasterChallenges:Setup( event.weaponRef )
				ACTIONS.AnimateSequence( f24_arg0, "ChallengesOn" )
			else
				f24_arg0.MasterChallenges:SetAlpha( 0 )
				ACTIONS.AnimateSequence( f24_arg0, "ChallengesOff" )
			end
		end )
	end
	if Engine.DDJFBBJAIG() then
		f24_arg0.bindButton:addEventHandler( "button_alt2", function ( f35_arg0, f35_arg1 )
			local f35_local0 = LUI.FlowManager.GetScopedData( f24_arg0 )
			if f35_local0.menuState == f24_arg0.loadoutEdit then
				return 
			else
				LUI.FlowManager.RequestPopupMenu( nil, "LoadoutOptions", true, f35_arg1.controller, false, {
					disableQuickAccessShortcuts = true,
					controllerIndex = f24_arg0,
					loadoutIndex = f24_arg0._focusedLoadoutIndex
				} )
			end
		end )
		f24_arg0:addEventHandler( "refresh_loadouts", function ( f34_arg0, f34_arg1 )
			f34_arg0.Loadouts:RefreshContent()
		end )
	end
	if not (not CONDITIONS.IsCoreMultiplayer( f24_arg0 ) or Engine.DDJFBBJAIG()) or CONDITIONS.IsThirdGameMode( f24_arg0 ) then
		f24_arg0.selectedLoadout = LUI.DataSourceInControllerModel.new( "cg.players.selectedLoadout" )
	end
	if not Engine.DDJFBBJAIG() then
		f24_arg0.defaultLoadouts = LOADOUT.GetDefaultLoadouts( f24_arg1 )
	end
	local f24_local3 = nil
	if f24_arg2.openedForPlunderBox == true then
		f24_local3 = LUI.FlowManager.GetScopedData( "brPlunderBox" )
		f24_arg0.openedForPlunderBox = true
		f24_local3.openedForPlunderBox = true
		f24_arg0.HelperBar:SetAlpha( 0 )
	else
		f24_local3 = LUI.FlowManager.GetScopedData( f24_arg0 )
	end
	if not f24_local3.sessionID then
		f24_local3.sessionID = Engine.DCJHCAFIIA()
	end
	if not f24_local3.cacSessionStartTime then
		f24_local3.cacSessionStartTime = Engine.DCJHCAFIIA()
	end
	if not f24_local3.cacSessionDlogOnGoing and not CONDITIONS.IsBRLoadoutGameType( f24_arg1 ) then
		METRICS.CacSessionStartSendDLogEvent( f24_arg1, f24_local3.sessionID )
		f24_local3.cacSessionDlogOnGoing = true
	end
	local f24_local4 = f24_local3.menuState
	if not f24_local4 then
		f24_local4 = f0_local0.loadoutSelect
	end
	f24_local3.menuState = f24_local4
	f24_arg0:dispatchEventToChildren( {
		name = "menu_state_updated",
		menuState = f24_local3.menuState
	} )
	f24_local4 = Engine.DDJFBBJAIG() and f24_arg0.Loadouts or f24_arg0.InGameLoadouts
	f24_local4:SetRefreshChild( function ( f33_arg0, f33_arg1, f33_arg2 )
		local f33_local0
		if f24_arg0.state ~= f24_arg0.default and (f24_arg0.state ~= f24_arg0.mix or #f24_arg0 > f33_arg2) then
			f33_local0 = false
		else
			f33_local0 = true
		end
		f24_arg0( f24_arg0, f24_arg0, f33_arg0, f24_arg0, f33_arg2, f33_local0 )
	end )
	f24_local4:SetDefaultFocus( function ()
		if f24_arg0 and CONDITIONS.ShouldFocusFirstItemInLoadoutDrop( f24_arg0 ) == true then
			return {
				x = 0,
				y = 0
			}
		elseif f24_arg0.selectedLoadoutIndex then
			return {
				x = 0,
				y = f24_arg0.selectedLoadoutIndex
			}
		elseif f24_arg0.selectedLoadout and f24_arg0.selectedLoadout:GetValue( f24_arg0 ) then
			local f32_local0 = f24_arg0.selectedLoadout:GetValue( f24_arg0 )
			if f32_local0 >= LOADOUT.DEFAULT_LOADOUT_INDEX_START then
				local f32_local1 = PROGRESSION.AreCustomLoadoutsUnlocked( f24_arg0 )
				f32_local0 = f32_local0 - LOADOUT.DEFAULT_LOADOUT_INDEX_START
				if f32_local1 and not Game.BFEEGCHICA( f24_arg0, "ui_only_default_loadouts" ) and not Dvar.IBEGCHEFE( "NTMRRKSKPQ" ) then
					f32_local0 = f32_local0 + #f24_arg0
				end
			end
			return {
				x = 0,
				y = f32_local0
			}
		else
			
		end
	end )
	if not Engine.DDJFBBJAIG() then
		local f24_local5 = PROGRESSION.AreCustomLoadoutsUnlocked( f24_arg1 )
		if Game.BFEEGCHICA( f24_arg1, "ui_only_default_loadouts" ) then
			f24_arg0.InGameLoadouts.state = f0_local0.default
			if CONDITIONS.IsSnipersOnlyClasses() then
				f24_arg0.InGameLoadouts:SetNumChildren( LOADOUT.SnipersOnlyClassCount )
			else
				f24_local4:SetNumChildren( LOADOUT.DefaultClassCount )
			end
			f24_local4:RefreshContent()
		elseif f24_local5 and Dvar.IBEGCHEFE( "NTMRRKSKPQ" ) then
			local primaryWeaponModel = f24_arg0.selectedLoadout:GetValue( f24_arg1 )
			local secondaryWeaponModel
			if primaryWeaponModel then
				secondaryWeaponModel = primaryWeaponModel
			else
				secondaryWeaponModel = primaryWeaponModel >= LOADOUT.DEFAULT_LOADOUT_INDEX_START
			end
			local f24_local8 = {}
			table.insert( f24_local8, {
				name = Engine.CBBHFCGDIC( "MP_INGAME_ONLY/LOADOUT_TAB_CUSTOM" ),
				focusFunction = function ( f31_arg0, f31_arg1 )
					f24_arg0.InGameLoadouts.state = f24_arg0.custom
					f24_arg0.InGameLoadouts:SetNumChildren( #f24_arg0 )
					f24_arg0.InGameLoadouts:RefreshContent()
					f24_arg0.InGameLoadouts:ProcessEventToChildInFocus( {
						name = "tab_changed"
					} )
					Engine.BJDBIAGIDA( SOUND_SETS.default.tabHighlight )
				end,
				hasDefaultFocus = not secondaryWeaponModel
			}, Engine.BJDBIAGIDA( SOUND_SETS.default.tabHighlight ) )
			local f24_local9 = table.insert
			local f24_local10 = f24_local8
			local f24_local11 = {
				name = Engine.CBBHFCGDIC( "MP_INGAME_ONLY/LOADOUT_TAB_DEFAULT" ),
				focusFunction = function ( f30_arg0, f30_arg1 )
					f24_arg0.InGameLoadouts.state = f24_arg0.default
					if CONDITIONS.IsSnipersOnlyClasses() then
						f24_arg0.InGameLoadouts:SetNumChildren( LOADOUT.SnipersOnlyClassCount )
					else
						f24_arg0.InGameLoadouts:SetNumChildren( LOADOUT.DefaultClassCount )
					end
					f24_arg0.InGameLoadouts:RefreshContent()
					f24_arg0.InGameLoadouts:ProcessEventToChildInFocus( {
						name = "tab_changed"
					} )
					Engine.BJDBIAGIDA( SOUND_SETS.default.tabHighlight )
				end
			}
			local f24_local12
			if primaryWeaponModel then
				f24_local12 = secondaryWeaponModel
			else
				f24_local12 = true
			end
			f24_local11.hasDefaultFocus = f24_local12
			f24_local9( f24_local10, f24_local11, Engine.BJDBIAGIDA( SOUND_SETS.default.tabHighlight ) )
			f24_arg0.tabsData = f24_local8
			f24_arg0.InGameLoadoutTabs:SetTabs( f24_local8 )
		else
			if f24_local5 then
				f24_arg0.InGameLoadouts.state = f0_local0.mix
				if CONDITIONS.IsSnipersOnlyClasses() then
					f24_local4:SetNumChildren( #f24_local0 + LOADOUT.SnipersOnlyClassCount )
				else
					f24_local4:SetNumChildren( #f24_local0 + LOADOUT.DefaultClassCount )
				end
			else
				f24_arg0.InGameLoadouts.state = f0_local0.default
				if CONDITIONS.IsSnipersOnlyClasses() then
					f24_local4:SetNumChildren( LOADOUT.SnipersOnlyClassCount )
				else
					f24_local4:SetNumChildren( LOADOUT.DefaultClassCount )
				end
			end
			f24_local4:RefreshContent()
		end
	else
		f24_local4:SetNumChildren( #f24_local0 )
		f24_local4:RefreshContent()
	end
	if CONDITIONS.InFrontend() or CONDITIONS.IsPrematch( f24_arg1 ) then
		LAYOUT.AddAspectRatioFadeFrame( f24_arg0, f24_arg1 )
	elseif CONDITIONS.InGame() then
		ACTIONS.ScaleFullscreen( f24_arg0.InGameMenuBackground )
		ACTIONS.ScaleFullscreen( f24_arg0.Vignette )
		ACTIONS.ScaleStretchAnchorFullscreen( f24_arg0.TabBacker )
		ACTIONS.ScaleFullscreen( f24_arg0.WZVignette )
	end
	f24_arg0.LoadoutSelectButtons:SetMouseHandling( false )
	local f24_local5 = f24_local3.selectedLoadoutIndex
	if not f24_local5 then
		f24_local5 = 1
	end
	f24_arg0.LoadoutSelectButtons:SetupGridItems( f24_arg1, f24_local5, f24_local0[f24_local5] )
	if f24_local3.menuState == f0_local0.loadoutEdit then
		if f24_local3.openedFromScriptRequest then
			f24_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
				side = "left",
				button_ref = "button_secondary",
				helper_text = Engine.CBBHFCGDIC( "MENU/BACK" )
			} )
		end
		if Engine.DDJFBBJAIG() then
			CLIENT_MODEL.UpdateModelsForLoadout( f24_arg0, f24_arg1, f24_local3.selectedLoadoutIndex )
		elseif f24_arg0.InGameLoadoutTabs then
			f24_arg0.InGameLoadoutTabs:DisableAll()
		end
		if Engine.DDJFBBJAIG() then
			f24_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
				button_ref = "button_alt2"
			} )
			f24_arg0.KBMLoadoutOptionsPrompt:SetAlpha( 0 )
		end
		ACTIONS.AnimateSequence( f24_arg0, "LoadoutEditSnap" )
		f24_arg0.MenuTitle:SetTitle( f24_local0[f24_local3.selectedLoadoutIndex].name:get() )
		if f24_arg0.LoadoutsScrollbar then
			f24_arg0.LoadoutsScrollbar:SetAlpha( 0 )
		end
		f24_arg0.LoadoutSelectButtons:SetMouseHandling( true )
		f0_local0( f24_arg0, false )
		f0_local0( f24_arg0, "LoadoutEdit" )
		if f24_arg0.BundleUpsellButton then
			f24_arg0.BundleUpsellButton:HideButton()
		end
	else
		if not Engine.DDJFBBJAIG() then
			f24_arg0.MenuTitle:SetTitle( Engine.CBBHFCGDIC( "LUA_MENU/CHOOSE_LOADOUT" ) )
		else
			f24_arg0.MenuTitle:SetTitle( Engine.CBBHFCGDIC( "LUA_MENU/EDIT_LOADOUTS" ) )
		end
		f0_local0( f24_arg0, "LoadoutPreview" )
	end
	if Engine.DDJFBBJAIG() then
		local primaryWeaponModel = f0_local0.loadoutSelect
		f24_arg0:addAndCallEventHandler( "update_input_type", function ( f29_arg0, f29_arg1 )
			local f29_local0 = LUI.FlowManager.GetScopedData( f29_arg0 )
			if f29_local0.menuState == f24_arg0 then
				if LUI.IsLastInputGamepad( f29_arg1.controllerIndex ) then
					f29_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
						clickable = true,
						priority = 20,
						side = "left",
						gamepad_only = true,
						button_ref = "button_alt2",
						helper_text = Engine.CBBHFCGDIC( "LUA_MENU/LOADOUT_OPTIONS" )
					} )
					f29_arg0.KBMLoadoutOptionsPrompt:SetAlpha( 0 )
				else
					f29_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
						button_ref = "button_alt2"
					} )
					f29_arg0.KBMLoadoutOptionsPrompt:SetAlpha( 1 )
				end
			end
		end, {
			controllerIndex = f24_arg1
		} )
	end
	if Engine.DDJFBBJAIG() then
		local primaryWeaponModel = WEAPON.GetWeaponModel( f24_arg1, FrontEndScene.ClientWeapons.GunTablePrimary )
		f24_arg0:addElement( primaryWeaponModel )
		f24_arg0.primaryWeaponModel = primaryWeaponModel
		
		local secondaryWeaponModel = WEAPON.GetWeaponModel( f24_arg1, FrontEndScene.ClientWeapons.GunTableSecondary )
		f24_arg0:addElement( secondaryWeaponModel )
		f24_arg0.secondaryWeaponModel = secondaryWeaponModel
		
		f24_arg0.LoadoutSelectButtons:SetupWeaponModelEvents( f24_arg1, {
			f24_arg0.primaryWeaponModel,
			f24_arg0.secondaryWeaponModel
		}, f24_local0 )
		if Engine.ECHCFGDDDF() then
			local f24_local8 = LUI.FlowManager.GetScopedData( f24_arg0 )
			f24_local8.controllerIndex = f24_arg1
			local f24_local9 = f24_local8.selectedLoadoutIndex
			if not f24_local9 then
				f24_local9 = 0
			end
			f24_local8.selectedLoadoutIndex = f24_local9
			MenuUtils.SetupSceneChangeCallbackWithMenuArg( f24_arg0, f0_local0 )
		end
		if f24_local3.menuState == f0_local0.loadoutEdit and f24_local3.selectedLoadoutIndex then
			f0_local0( f24_arg0, f24_arg1, f24_local0, f24_local3.selectedLoadoutIndex )
		end
	elseif f24_local3.menuState ~= f0_local0.loadoutEdit then
		if f24_local3.openedForPlunderBox == true or CONDITIONS.IsBRLoadoutGameType( f24_arg1 ) then
			ACTIONS.AnimateSequence( f24_arg0, "InGameLoadoutButtonsBr" )
		else
			ACTIONS.AnimateSequence( f24_arg0, "InGameLoadoutButtons" )
		end
	end
	f24_arg0:addEventHandler( "button_focused", function ( f28_arg0, f28_arg1 )
		if f28_arg1.button.isLoadout then
			local f28_local0 = f28_arg1.button:getParent()
			if f28_arg0.focusedButton and f28_arg0.focusedButton ~= f28_local0 then
				assert( f28_arg0.focusedButton )
				if not Engine.DDJFBBJAIG() then
					assert( f28_arg0.focusedButton.EditButton )
					f28_arg0.focusedButton:SetEditButtonEnabled( false )
				end
			end
			f28_arg0.focusedButton = f28_local0
		end
		return true
	end )
	f24_arg0:addEventHandler( "gain_focus", function ( f27_arg0, f27_arg1 )
		local f27_local0 = Engine.DDJFBBJAIG() and f27_arg0.Loadouts or f27_arg0.InGameLoadouts
		local f27_local1 = LUI.FlowManager.GetScopedData( f27_arg0 )
		local f27_local2 = false
		if f27_local1.menuState == f24_arg0.loadoutEdit then
			if f27_arg0.LoadoutSelectButtons then
				f27_arg0.LoadoutSelectButtons:processEvent( {
					name = "gain_focus",
					controller = f27_arg1.controller
				} )
				f27_local2 = true
			end
		else
			f27_local0:processEvent( {
				name = "gain_focus",
				controller = f27_arg1.controller
			} )
			f27_local2 = true
		end
		return f27_local2
	end )
	f0_local0( f24_arg0 )
	if LUI.IsLastInputKeyboardMouse( f24_arg1 ) and f24_local3.menuState == f0_local0.loadoutSelect then
		local primaryWeaponModel = f24_local4:GetBuiltChildren()
		if 0 < #primaryWeaponModel then
			if Engine.DDJFBBJAIG() then
				f24_arg0.focusedButton = primaryWeaponModel[1]
				primaryWeaponModel[1].LoadoutButton:refreshDetailsGrid( {
					name = "button_over"
				} )
			else
				local secondaryWeaponModel = primaryWeaponModel[1]
				for f24_local10, f24_local11 in ipairs( primaryWeaponModel ) do
					if f0_local0( f24_arg0, f24_arg1, f24_local11.LoadoutButton.index, f24_local11.LoadoutButton.isDefault ) then
						secondaryWeaponModel = f24_local11
					end
				end
				secondaryWeaponModel.LoadoutButton:refreshDetailsGrid( {
					name = "button_over"
				} )
				f24_arg0.focusedButton = secondaryWeaponModel
			end
		end
	end
	LUI.TextChat.SetupMenuForNoLine( f24_arg0 )
	if Engine.DDJFBBJAIG() then
		if CONDITIONS.IsThirdGameMode() then
			if not Onboarding.LoadoutCP.WasCompleted( f24_arg0, f24_arg1 ) then
				LUI.FlowManager.RequestPopupMenu( f24_arg0, "onboardingpopup", true, f24_arg1, false, ONBOARDING_DATA.GetOnboardingLoadoutData() )
				Onboarding.LoadoutCP.MarkCompleted( f24_arg0, f24_arg1 )
			end
		elseif MLG.IsCDLActive( f24_arg1 ) then
			if not Onboarding.CDL.WasCompleted( f24_arg0, f24_arg1 ) then
				LUI.FlowManager.RequestPopupMenu( f24_arg0, "onboardingpopup", true, f24_arg1, false, ONBOARDING_DATA.GetOnboardingCDLData() )
				Onboarding.CDL.MarkCompleted( f24_arg0, f24_arg1 )
			end
		elseif CONDITIONS.IsMagmaGameMode() then
			if not Onboarding.WZDropKit.WasCompleted( f24_arg0, f24_arg1 ) then
				if CONDITIONS.IsWZWipFlowEnabled() and CONDITIONS.AreWZLoadoutsEnabled() then
					LUI.FlowManager.RequestPopupMenu( f24_arg0, "onboardingpopup", true, f24_arg1, false, ONBOARDING_DATA.GetOnboardingWZEditLoadoutData() )
				else
					LUI.FlowManager.RequestPopupMenu( f24_arg0, "onboardingpopup", true, f24_arg1, false, ONBOARDING_DATA.GetOnboardingWZDropKitData() )
				end
				Onboarding.WZDropKit.MarkCompleted( f24_arg0, f24_arg1 )
			end
		elseif not Onboarding.Loadout.WasCompleted( f24_arg0, f24_arg1 ) then
			LUI.FlowManager.RequestPopupMenu( f24_arg0, "onboardingpopup", true, f24_arg1, false, ONBOARDING_DATA.GetOnboardingLoadoutData() )
			Onboarding.Loadout.MarkCompleted( f24_arg0, f24_arg1 )
		end
		f24_arg0:registerEventHandler( "update_bundle_upsell", function ( element, event )
			element:UpdateBundleUpsell( f24_arg0, event.weaponRef )
			return true
		end )
	end
	f24_arg0:registerEventHandler( "lui_game_start_notify", function ( element, event )
		local f25_local0 = LUI.FlowManager.GetScopedData( element )
		if f25_local0.cacSessionDlogOnGoing then
			METRICS.CacSessionEndSendDLogEvent( f24_arg0, f25_local0.sessionID, f25_local0.cacSessionStartTime, METRICS.CacExitReasons.GAME_START_INTERRUPT )
			f25_local0.cacSessionDlogOnGoing = nil
		end
	end )
	if LOADOUT.MATCHRULES.IsThereARestrictedLoadout( f24_arg1 ) or Restrictions.ArePerksRestricted() then
		ACTIONS.AnimateSequence( f24_arg0, "RestrictionWarningOn" )
	else
		ACTIONS.AnimateSequence( f24_arg0, "RestrictionWarningOff" )
	end
	if f24_arg0.BundleUpsellButton then
		f24_arg0.BundleUpsellButton:SetUpsellMenu( "LoadoutSelect" )
	end
	ACTIONS.ScaleStretchAnchorFullscreen( f24_arg0.TabBacker )
end

local f0_local31 = function ()
	local f23_local0 = LUI.FlowManager.GetScopedData( "LoadoutSelect" )
	if f23_local0.cacSessionDlogOnGoing then
		METRICS.CacSessionEndSendDLogEvent( f23_local0.controllerIndex, f23_local0.sessionID, f23_local0.cacSessionStartTime, METRICS.CacExitReasons.UNEXPECTED_CLOSE )
		f23_local0.cacSessionDlogOnGoing = nil
	end
end

function LoadoutSelect( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "LoadoutSelect"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	f0_local0( self, f1_local1, controller )
	self.HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	self.HelperBar.id = "HelperBar"
	self.HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
	self.HelperBar:setPriority( 10 )
	self:addElement( self.HelperBar )
	local f1_local2 = self
	local f1_local3 = nil
	if CONDITIONS.InGame() then
		f1_local3 = MenuBuilder.BuildRegisteredType( "InGameMenuBackground", {
			controllerIndex = f1_local1
		} )
		f1_local3.id = "InGameMenuBackground"
		f1_local3:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
		self:addElement( f1_local3 )
		self.InGameMenuBackground = f1_local3
	end
	local Vignette = nil
	
	Vignette = LUI.UIImage.new()
	Vignette.id = "Vignette"
	Vignette:SetRGBFromTable( SWATCHES.genericMenu.blackBackground, 0 )
	Vignette:SetAlpha( 0.5, 0 )
	Vignette:setImage( RegisterMaterial( "widg_gradient_left_to_right" ), 0 )
	Vignette:SetAnchorsAndPosition( 0, 0, 0, 0, _1080p * -185, _1080p * -1058, 0, 0 )
	self:addElement( Vignette )
	self.Vignette = Vignette
	
	local WZVignette = nil
	
	WZVignette = MenuBuilder.BuildRegisteredType( "WZAccentMenuOverlay", {
		controllerIndex = f1_local1
	} )
	WZVignette.id = "WZVignette"
	WZVignette:SetAnchorsAndPosition( 0, 1, 0, 0, 0, _1080p * 1920, 0, 0 )
	self:addElement( WZVignette )
	self.WZVignette = WZVignette
	
	local TabBacker = nil
	
	TabBacker = MenuBuilder.BuildRegisteredType( "TabBacker", {
		controllerIndex = f1_local1
	} )
	TabBacker.id = "TabBacker"
	TabBacker:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 160 )
	self:addElement( TabBacker )
	self.TabBacker = TabBacker
	
	local MenuTitle = nil
	
	MenuTitle = MenuBuilder.BuildRegisteredType( "MenuTitle", {
		controllerIndex = f1_local1
	} )
	MenuTitle.id = "MenuTitle"
	MenuTitle.MenuTitle:setText( ToUpperCase( Engine.CBBHFCGDIC( "LUA_MENU/CHOOSE_LOADOUT" ) ), 0 )
	MenuTitle.Line:SetLeft( 0, 0 )
	MenuTitle:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 562, 0, _1080p * 100 )
	self:addElement( MenuTitle )
	self.MenuTitle = MenuTitle
	
	local f1_local8 = nil
	if CONDITIONS.InFrontend() then
		f1_local8 = LUI.UIGrid.new( {
			scrollingThresholdX = 1,
			buildArrowsLabel = false,
			maxVelocity = 5000,
			adjustSizeToContent = true,
			scrollingThresholdY = 1,
			wrapX = true,
			maxVisibleColumns = 1,
			maxVisibleRows = 10,
			wrapY = true,
			arrowsVerticalOffset = 0,
			forcePrimaryAxisScrolling = true,
			springCoefficient = 400,
			controllerIndex = f1_local1,
			buildChild = function ()
				return MenuBuilder.BuildRegisteredType( "FrontendLoadoutButton", {
					controllerIndex = menu
				} )
			end,
			refreshChild = function ( f21_arg0, f21_arg1, f21_arg2 )
				
			end,
			spacingX = _1080p * 8,
			spacingY = _1080p * 8,
			columnWidth = _1080p * 370,
			rowHeight = _1080p * 60,
			horizontalAlignment = LUI.Alignment.Left,
			verticalAlignment = LUI.Alignment.Top
		} )
		f1_local8.id = "Loadouts"
		f1_local8:setUseStencil( false )
		f1_local8:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 475, _1080p * 170, _1080p * 503 )
		self:addElement( f1_local8 )
		self.Loadouts = f1_local8
	end
	local f1_local9 = nil
	if CONDITIONS.InGame() then
		f1_local9 = MenuBuilder.BuildRegisteredType( "ButtonDescriptionText", {
			controllerIndex = f1_local1
		} )
		f1_local9.id = "UnlockText"
		f1_local9.Description:SetRight( _1080p * 500, 0 )
		f1_local9:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 130, _1080p * 509, _1080p * 556, _1080p * 588 )
		self:addElement( f1_local9 )
		self.UnlockText = f1_local9
	end
	local f1_local10 = nil
	if CONDITIONS.InGameAndMPLoadoutSelect( f1_local1 ) then
		f1_local10 = LUI.UIGrid.new( {
			scrollingThresholdX = 0,
			buildArrowsLabel = false,
			maxVelocity = 5000,
			adjustSizeToContent = true,
			scrollingThresholdY = 1,
			wrapX = false,
			maxVisibleColumns = 1,
			wrapY = true,
			arrowsVerticalOffset = 0,
			forcePrimaryAxisScrolling = true,
			springCoefficient = 400,
			maxVisibleRows = SubtractForSplitscreen( 10, 5 ),
			controllerIndex = f1_local1,
			buildChild = function ()
				return MenuBuilder.BuildRegisteredType( "InGameLoadoutButton", {
					controllerIndex = menu
				} )
			end,
			refreshChild = function ( f19_arg0, f19_arg1, f19_arg2 )
				
			end,
			spacingX = _1080p * 8,
			spacingY = _1080p * 8,
			columnWidth = _1080p * 550,
			rowHeight = _1080p * 60,
			horizontalAlignment = LUI.Alignment.Left,
			verticalAlignment = LUI.Alignment.Top
		} )
		f1_local10.id = "InGameLoadoutsMp"
		f1_local10:setUseStencil( true )
		f1_local10:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 475, _1080p * 216, _1080p * 696 )
		self:addElement( f1_local10 )
		self.InGameLoadoutsMp = f1_local10
	end
	local f1_local11 = nil
	if CONDITIONS.InGameAndBRLoadoutSelect( f1_local1 ) then
		f1_local11 = LUI.UIGrid.new( {
			scrollingThresholdX = 0,
			buildArrowsLabel = false,
			maxVelocity = 5000,
			adjustSizeToContent = true,
			scrollingThresholdY = 1,
			wrapX = false,
			maxVisibleColumns = 1,
			wrapY = true,
			arrowsVerticalOffset = 0,
			forcePrimaryAxisScrolling = true,
			springCoefficient = 400,
			maxVisibleRows = SubtractForSplitscreen( 10, 5 ),
			controllerIndex = f1_local1,
			buildChild = function ()
				return MenuBuilder.BuildRegisteredType( "BRInGameLoadoutButton", {
					controllerIndex = menu
				} )
			end,
			refreshChild = function ( f17_arg0, f17_arg1, f17_arg2 )
				
			end,
			spacingX = _1080p * 8,
			spacingY = _1080p * 8,
			columnWidth = _1080p * 500,
			rowHeight = _1080p * 40,
			horizontalAlignment = LUI.Alignment.Left,
			verticalAlignment = LUI.Alignment.Top
		} )
		f1_local11.id = "InGameLoadoutsBr"
		f1_local11:setUseStencil( false )
		f1_local11:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 130, _1080p * 630, _1080p * 216, _1080p * 696 )
		self:addElement( f1_local11 )
		self.InGameLoadoutsBr = f1_local11
	end
	local LoadoutSelectButtons = nil
	
	LoadoutSelectButtons = MenuBuilder.BuildRegisteredType( "LoadoutSelectButtons", {
		controllerIndex = f1_local1
	} )
	LoadoutSelectButtons.id = "LoadoutSelectButtons"
	LoadoutSelectButtons:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 536, _1080p * 1686, _1080p * 170, _1080p * 976 )
	self:addElement( LoadoutSelectButtons )
	self.LoadoutSelectButtons = LoadoutSelectButtons
	
	local f1_local13 = nil
	if not Engine.DDJFBBJAIG() and CONDITIONS.AreInGameLoadoutTabsEnabled( self, f1_local1 ) then
		f1_local13 = LUI.TabManager.new( {
			spacing = 4,
			wrap = false,
			tabHeight = _1080p * 52,
			buildTab = function ()
				return MenuBuilder.BuildRegisteredType( "SubMenuTab", {
					controllerIndex = menu
				} )
			end,
			controllerIndex = f1_local1
		} )
		f1_local13.id = "InGameLoadoutTabs"
		f1_local13:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 545, _1080p * 108, _1080p * 160 )
		self:addElement( f1_local13 )
		self.InGameLoadoutTabs = f1_local13
	end
	local f1_local14 = nil
	if not Engine.DDJFBBJAIG() then
		f1_local14 = MenuBuilder.BuildRegisteredType( "InGameMenuTimerStatus", {
			controllerIndex = f1_local1
		} )
		f1_local14.id = "InGameMenuTimerStatus"
		f1_local14:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -200, _1080p * 200, _1080p * 54, _1080p * 104 )
		self:addElement( f1_local14 )
		self.InGameMenuTimerStatus = f1_local14
	end
	local ListNumber = nil
	
	ListNumber = LUI.UIStyledText.new()
	ListNumber.id = "ListNumber"
	ListNumber:SetRGBFromTable( SWATCHES.CAC.labelText, 0 )
	ListNumber:setText( "", 0 )
	ListNumber:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	ListNumber:SetAlignment( LUI.Alignment.Center )
	ListNumber:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 227, _1080p * 391, _1080p * 908, _1080p * 932 )
	self:addElement( ListNumber )
	self.ListNumber = ListNumber
	
	local f1_local16 = nil
	if CONDITIONS.InFrontendPublicMP() then
		f1_local16 = MenuBuilder.BuildRegisteredType( "MPPlayerDetails", {
			controllerIndex = f1_local1
		} )
		f1_local16.id = "MPPlayerDetails"
		f1_local16:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -596, _1080p * -96, _1080p * 54, _1080p * 114 )
		self:addElement( f1_local16 )
		self.MPPlayerDetails = f1_local16
	end
	local f1_local17 = nil
	if CONDITIONS.InFrontendPublic() then
		f1_local17 = MenuBuilder.BuildRegisteredType( "WeaponMasterSummary", {
			controllerIndex = f1_local1
		} )
		f1_local17.id = "MasterChallenges"
		f1_local17:SetAlpha( 0, 0 )
		f1_local17:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -672, _1080p * -96, _1080p * 216, _1080p * 396 )
		self:addElement( f1_local17 )
		self.MasterChallenges = f1_local17
	end
	local f1_local18 = nil
	if not Engine.DDJFBBJAIG() and not CONDITIONS.IsSplitscreen() then
		f1_local18 = MenuBuilder.BuildRegisteredType( "TalkersList", {
			controllerIndex = f1_local1
		} )
		f1_local18.id = "TalkersList"
		f1_local18:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -447, _1080p * -96, _1080p * 154, _1080p * 529 )
		self:addElement( f1_local18 )
		self.TalkersList = f1_local18
	end
	local f1_local19 = nil
	if CONDITIONS.InFrontend() then
		f1_local19 = MenuBuilder.BuildRegisteredType( "LobbyMembersFooter", {
			controllerIndex = f1_local1
		} )
		f1_local19.id = "LobbyMembersFooter"
		f1_local19:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 150 )
		self:addElement( f1_local19 )
		self.LobbyMembersFooter = f1_local19
	end
	local f1_local20 = nil
	if Engine.DDJFBBJAIG() then
		f1_local20 = LUI.UIStyledText.new()
		f1_local20.id = "KBMLoadoutOptionsPrompt"
		f1_local20:SetAlpha( 0, 0 )
		f1_local20:setText( Engine.CBBHFCGDIC( "LUA_MENU/LOADOUT_OPTIONS_PROMPT" ), 0 )
		f1_local20:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
		f1_local20:SetAlignment( LUI.Alignment.Left )
		f1_local20:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 545, _1080p * 1045, _1080p * 904, _1080p * 928 )
		self:addElement( f1_local20 )
		self.KBMLoadoutOptionsPrompt = f1_local20
	end
	local RestrictionLoadoutWarning = nil
	
	RestrictionLoadoutWarning = MenuBuilder.BuildRegisteredType( "RestrictionLoadoutWarning", {
		controllerIndex = f1_local1
	} )
	RestrictionLoadoutWarning.id = "RestrictionLoadoutWarning"
	RestrictionLoadoutWarning:SetAlpha( 0, 0 )
	RestrictionLoadoutWarning:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -180, _1080p * 180, _1080p * 114, _1080p * 144 )
	self:addElement( RestrictionLoadoutWarning )
	self.RestrictionLoadoutWarning = RestrictionLoadoutWarning
	
	local f1_local22 = nil
	if not Engine.DDJFBBJAIG() and CONDITIONS.IsSplitscreen() then
		f1_local22 = MenuBuilder.BuildRegisteredType( "VerticalMinimalScrollbar", {
			controllerIndex = f1_local1
		} )
		f1_local22.id = "LoadoutsScrollbar"
		f1_local22:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 107, _1080p * 170, _1080p * 502 )
		self:addElement( f1_local22 )
		self.LoadoutsScrollbar = f1_local22
	end
	local f1_local23 = nil
	if Engine.DDJFBBJAIG() then
		f1_local23 = MenuBuilder.BuildRegisteredType( "BundleUpsellButton", {
			controllerIndex = f1_local1
		} )
		f1_local23.id = "BundleUpsellButton"
		f1_local23:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -546, _1080p * -96, _1080p * 775, _1080p * 979 )
		self:addElement( f1_local23 )
		self.BundleUpsellButton = f1_local23
	end
	local f1_local24 = nil
	if Engine.DDJFBBJAIG() then
		f1_local24 = MenuBuilder.BuildRegisteredType( "CDLRestrictionTag", {
			controllerIndex = f1_local1
		} )
		f1_local24.id = "CDLRestrictionTag"
		f1_local24.CDLInfo:SetAlpha( 1, 0 )
		f1_local24:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1508, _1080p * 1824, _1080p * 170, _1080p * 200 )
		self:addElement( f1_local24 )
		self.CDLRestrictionTag = f1_local24
	end
	self._sequences.DefaultSequence = function ()
		
	end
	
	local f1_local25 = nil
	if CONDITIONS.InFrontend() then
		f1_local8:RegisterAnimationSequence( "LoadoutButtons", {
			{
				value = 1,
				duration = -28,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	LoadoutSelectButtons:RegisterAnimationSequence( "LoadoutButtons", {
		{
			duration = -28,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 534
		},
		{
			duration = -28,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1684
		}
	} )
	ListNumber:RegisterAnimationSequence( "LoadoutButtons", {
		{
			value = 1,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.LoadoutButtons = function ()
		if CONDITIONS.InFrontend() then
			menu:AnimateSequence( "LoadoutButtons" )
		end
		menu:AnimateSequence( "LoadoutButtons" )
		menu:AnimateSequence( "LoadoutButtons" )
	end
	
	local f1_local26 = nil
	if CONDITIONS.InFrontend() then
		f1_local8:RegisterAnimationSequence( "LoadoutEdit", {
			{
				value = 0,
				duration = -28,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	if CONDITIONS.InGameAndMPLoadoutSelect( f1_local1 ) then
		f1_local10:RegisterAnimationSequence( "LoadoutEdit", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	if CONDITIONS.InGameAndBRLoadoutSelect( f1_local1 ) then
		f1_local11:RegisterAnimationSequence( "LoadoutEdit", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	LoadoutSelectButtons:RegisterAnimationSequence( "LoadoutEdit", {
		{
			duration = -28,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 96
		},
		{
			duration = -28,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1246
		}
	} )
	if not Engine.DDJFBBJAIG() and CONDITIONS.AreInGameLoadoutTabsEnabled( self, f1_local1 ) then
		f1_local13:RegisterAnimationSequence( "LoadoutEdit", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	ListNumber:RegisterAnimationSequence( "LoadoutEdit", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	if not Engine.DDJFBBJAIG() and CONDITIONS.IsSplitscreen() then
		f1_local22:RegisterAnimationSequence( "LoadoutEdit", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	self._sequences.LoadoutEdit = function ()
		if CONDITIONS.InFrontend() then
			menu:AnimateSequence( "LoadoutEdit" )
		end
		if CONDITIONS.InGameAndMPLoadoutSelect( menu ) then
			menu:AnimateSequence( "LoadoutEdit" )
		end
		if CONDITIONS.InGameAndBRLoadoutSelect( menu ) then
			menu:AnimateSequence( "LoadoutEdit" )
		end
		menu:AnimateSequence( "LoadoutEdit" )
		if not Engine.DDJFBBJAIG() and CONDITIONS.AreInGameLoadoutTabsEnabled( menu, menu ) then
			menu:AnimateSequence( "LoadoutEdit" )
		end
		menu:AnimateSequence( "LoadoutEdit" )
		if not Engine.DDJFBBJAIG() and CONDITIONS.IsSplitscreen() then
			menu:AnimateSequence( "LoadoutEdit" )
		end
	end
	
	local f1_local27 = nil
	if CONDITIONS.InFrontend() then
		f1_local8:RegisterAnimationSequence( "LoadoutEditSnap", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	if CONDITIONS.InGameAndMPLoadoutSelect( f1_local1 ) then
		f1_local10:RegisterAnimationSequence( "LoadoutEditSnap", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	if CONDITIONS.InGameAndBRLoadoutSelect( f1_local1 ) then
		f1_local11:RegisterAnimationSequence( "LoadoutEditSnap", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	LoadoutSelectButtons:RegisterAnimationSequence( "LoadoutEditSnap", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 96
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1246
		}
	} )
	if not Engine.DDJFBBJAIG() and CONDITIONS.AreInGameLoadoutTabsEnabled( self, f1_local1 ) then
		f1_local13:RegisterAnimationSequence( "LoadoutEditSnap", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	ListNumber:RegisterAnimationSequence( "LoadoutEditSnap", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.LoadoutEditSnap = function ()
		if CONDITIONS.InFrontend() then
			menu:AnimateSequence( "LoadoutEditSnap" )
		end
		if CONDITIONS.InGameAndMPLoadoutSelect( menu ) then
			menu:AnimateSequence( "LoadoutEditSnap" )
		end
		if CONDITIONS.InGameAndBRLoadoutSelect( menu ) then
			menu:AnimateSequence( "LoadoutEditSnap" )
		end
		menu:AnimateSequence( "LoadoutEditSnap" )
		if not Engine.DDJFBBJAIG() and CONDITIONS.AreInGameLoadoutTabsEnabled( menu, menu ) then
			menu:AnimateSequence( "LoadoutEditSnap" )
		end
		menu:AnimateSequence( "LoadoutEditSnap" )
	end
	
	local f1_local28 = nil
	if CONDITIONS.InGameAndMPLoadoutSelect( f1_local1 ) then
		f1_local10:RegisterAnimationSequence( "InGameLoadoutButtons", {
			{
				value = 1,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	LoadoutSelectButtons:RegisterAnimationSequence( "InGameLoadoutButtons", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 680
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1824
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 216
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 1022
		}
	} )
	if not Engine.DDJFBBJAIG() and CONDITIONS.AreInGameLoadoutTabsEnabled( self, f1_local1 ) then
		f1_local13:RegisterAnimationSequence( "InGameLoadoutButtons", {
			{
				value = 1,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	ListNumber:RegisterAnimationSequence( "InGameLoadoutButtons", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	if not Engine.DDJFBBJAIG() and CONDITIONS.IsSplitscreen() then
		f1_local22:RegisterAnimationSequence( "InGameLoadoutButtons", {
			{
				value = 1,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	self._sequences.InGameLoadoutButtons = function ()
		if CONDITIONS.InGameAndMPLoadoutSelect( menu ) then
			menu:AnimateSequence( "InGameLoadoutButtons" )
		end
		menu:AnimateSequence( "InGameLoadoutButtons" )
		if not Engine.DDJFBBJAIG() and CONDITIONS.AreInGameLoadoutTabsEnabled( menu, menu ) then
			menu:AnimateSequence( "InGameLoadoutButtons" )
		end
		menu:AnimateSequence( "InGameLoadoutButtons" )
		if not Engine.DDJFBBJAIG() and CONDITIONS.IsSplitscreen() then
			menu:AnimateSequence( "InGameLoadoutButtons" )
		end
	end
	
	local f1_local29 = nil
	if CONDITIONS.InGameAndMPLoadoutSelect( f1_local1 ) then
		f1_local10:RegisterAnimationSequence( "Splitscreen", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Top,
				value = _1080p * 170
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Bottom,
				value = _1080p * 650
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Left,
				value = _1080p * 117
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Right,
				value = _1080p * 496
			}
		} )
	end
	LoadoutSelectButtons:RegisterAnimationSequence( "Splitscreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 1026
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 220
		}
	} )
	if not Engine.DDJFBBJAIG() then
		f1_local14:RegisterAnimationSequence( "Splitscreen", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Left,
				value = _1080p * 760
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Right,
				value = _1080p * 1160
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Top,
				value = _1080p * 34
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Bottom,
				value = _1080p * 84
			}
		} )
	end
	ListNumber:RegisterAnimationSequence( "Splitscreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 232
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 532
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 396
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 556
		}
	} )
	self._sequences.Splitscreen = function ()
		if CONDITIONS.InGameAndMPLoadoutSelect( menu ) then
			menu:AnimateSequence( "Splitscreen" )
		end
		menu:AnimateSequence( "Splitscreen" )
		if not Engine.DDJFBBJAIG() then
			menu:AnimateSequence( "Splitscreen" )
		end
		menu:AnimateSequence( "Splitscreen" )
	end
	
	local f1_local30 = nil
	if CONDITIONS.InGame() then
		f1_local3:RegisterAnimationSequence( "InGameLoadoutButtonsBr", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	Vignette:RegisterAnimationSequence( "InGameLoadoutButtonsBr", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	MenuTitle:RegisterAnimationSequence( "InGameLoadoutButtonsBr", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	if CONDITIONS.InGameAndBRLoadoutSelect( f1_local1 ) then
		f1_local11:RegisterAnimationSequence( "InGameLoadoutButtonsBr", {
			{
				value = 1,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	LoadoutSelectButtons:RegisterAnimationSequence( "InGameLoadoutButtonsBr", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 648
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1792
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 216
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 1022
		}
	} )
	if not Engine.DDJFBBJAIG() and CONDITIONS.AreInGameLoadoutTabsEnabled( self, f1_local1 ) then
		f1_local13:RegisterAnimationSequence( "InGameLoadoutButtonsBr", {
			{
				value = 1,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
	end
	ListNumber:RegisterAnimationSequence( "InGameLoadoutButtonsBr", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	if not Engine.DDJFBBJAIG() and not CONDITIONS.IsSplitscreen() then
		f1_local18:RegisterAnimationSequence( "InGameLoadoutButtonsBr", {} )
	end
	self._sequences.InGameLoadoutButtonsBr = function ()
		if CONDITIONS.InGame() then
			menu:AnimateSequence( "InGameLoadoutButtonsBr" )
		end
		menu:AnimateSequence( "InGameLoadoutButtonsBr" )
		menu:AnimateSequence( "InGameLoadoutButtonsBr" )
		if CONDITIONS.InGameAndBRLoadoutSelect( menu ) then
			menu:AnimateSequence( "InGameLoadoutButtonsBr" )
		end
		menu:AnimateSequence( "InGameLoadoutButtonsBr" )
		if not Engine.DDJFBBJAIG() and CONDITIONS.AreInGameLoadoutTabsEnabled( menu, menu ) then
			menu:AnimateSequence( "InGameLoadoutButtonsBr" )
		end
		menu:AnimateSequence( "InGameLoadoutButtonsBr" )
		if not Engine.DDJFBBJAIG() and not CONDITIONS.IsSplitscreen() then
			menu:AnimateSequence( "InGameLoadoutButtonsBr" )
		end
	end
	
	local f1_local31 = nil
	RestrictionLoadoutWarning:RegisterAnimationSequence( "RestrictionWarningOff", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.RestrictionWarningOff = function ()
		menu:AnimateSequence( "RestrictionWarningOff" )
	end
	
	local f1_local32 = nil
	RestrictionLoadoutWarning:RegisterAnimationSequence( "RestrictionWarningOn", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.RestrictionWarningOn = function ()
		menu:AnimateSequence( "RestrictionWarningOn" )
	end
	
	local f1_local33 = nil
	if Engine.DDJFBBJAIG() then
		f1_local24:RegisterAnimationSequence( "ChallengesOn", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Top,
				value = _1080p * 124
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Bottom,
				value = _1080p * 154
			}
		} )
	end
	self._sequences.ChallengesOn = function ()
		if Engine.DDJFBBJAIG() then
			menu:AnimateSequence( "ChallengesOn" )
		end
	end
	
	self._sequences.ChallengesOff = function ()
		
	end
	
	local f1_local34 = nil
	Vignette:RegisterAnimationSequence( "WZWipSetup", {
		{
			value = -2.353438279577766E-185,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	WZVignette:RegisterAnimationSequence( "WZWipSetup", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.WZWipSetup = function ()
		menu:AnimateSequence( "WZWipSetup" )
		menu:AnimateSequence( "WZWipSetup" )
	end
	
	if Engine.DDJFBBJAIG() then
		f1_local23:addEventHandler( "button_over", function ( f3_arg0, f3_arg1 )
			local f3_local0 = f3_arg1.controller or menu
			ACTIONS.AnimateSequenceByElement( menu, {
				elementPath = "self.BundleUpsellButton",
				sequenceName = "ButtonOver",
				elementName = "BundleUpsellButton"
			} )
		end )
		f1_local23:addEventHandler( "button_up", function ( f2_arg0, f2_arg1 )
			local f2_local0 = f2_arg1.controller or menu
			ACTIONS.AnimateSequenceByElement( menu, {
				elementPath = "self.BundleUpsellButton",
				sequenceName = "ButtonUp",
				elementName = "BundleUpsellButton"
			} )
		end )
	end
	if CONDITIONS.InGameAndMPLoadoutSelect( f1_local1 ) and CONDITIONS.IsSplitscreen() then
		local bindButton = LUI.UIScrollbar.new
		local f1_local36 = {
			direction = LUI.DIRECTION.vertical,
			eventListener = f1_local22,
			startCap = f1_local22.startCap,
			endCap = f1_local22.endCap,
			sliderArea = f1_local22.sliderArea
		}
		local f1_local37 = f1_local22.sliderArea
		if f1_local37 then
			f1_local37 = f1_local22.sliderArea.slider
		end
		f1_local36.slider = f1_local37
		f1_local37 = f1_local22.sliderArea
		if f1_local37 then
			f1_local37 = f1_local22.sliderArea.fixedSizeSlider
		end
		f1_local36.fixedSizeSlider = f1_local37
		f1_local10:AddScrollbar( bindButton( f1_local36 ) )
	end
	if CONDITIONS.InGameAndMPLoadoutSelect( f1_local1 ) then
		f1_local10:AddItemNumbers( ListNumber )
	end
	if CONDITIONS.InGameAndBRLoadoutSelect( f1_local1 ) then
		f1_local11:AddItemNumbers( ListNumber )
	end
	self.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_primary",
		priority = 1,
		helper_text = Engine.CBBHFCGDIC( "LUA_MENU/SELECT" )
	} )
	
	local bindButton = LUI.UIBindButton.new()
	bindButton.id = "selfBindButton"
	self:addElement( bindButton )
	self.bindButton = bindButton
	
	f0_local0( self, f1_local1, controller )
	if CONDITIONS.IsSplitscreen() then
		ACTIONS.AnimateSequence( self, "Splitscreen" )
	end
	return self
end

MenuBuilder.registerType( "LoadoutSelect", LoadoutSelect )
LUI.FlowManager.RegisterStackPopBehaviour( "LoadoutSelect", f0_local31 )
LockTable( _M )
