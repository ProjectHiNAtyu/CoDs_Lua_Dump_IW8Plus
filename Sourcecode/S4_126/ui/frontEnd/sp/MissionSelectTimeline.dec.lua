-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
module( ..., package.seeall )
require( "ui.frontEnd.sp.MissionSelectTimelineYearsScale" )
local f0_local0 = 240
local f0_local1 = f0_local0 / 12 / 30
local f0_local2 = 958
local f0_local3 = 1938
local f0_local4 = {
	nil,
	"LUA_MENU/JANUARY",
	"LUA_MENU/FEBRUARY",
	"LUA_MENU/MARCH",
	"LUA_MENU/APRIL",
	"LUA_MENU/MAY",
	"LUA_MENU/JUNE",
	"LUA_MENU/JULY",
	"LUA_MENU/AUGUST",
	"LUA_MENU/SEPTEMBER",
	"LUA_MENU/OCTOBER",
	"LUA_MENU/NOVEMBER",
	"LUA_MENU/DECEMBER"
}
local f0_local5 = function ( f7_arg0 )
	local f7_local0 = {}
	for f7_local4 in string.gmatch( f7_arg0, "[^%/]+" ) do
		f7_local0[#f7_local0 + 1] = tonumber( f7_local4 )
	end
	f7_local1 = f7_local0[1]
	f7_local2 = f7_local0[2]
	f7_local3 = f7_local0[3]
	assert( f7_local1 <= 31 )
	assert( f7_local2 <= 12 )
	return f7_local1, f7_local2, f7_local3
end

local f0_local6 = function ( f6_arg0, f6_arg1, f6_arg2 )
	if not f6_arg2 then
		ACTIONS.AnimateSequence( f6_arg0, "ChangeDate" )
	end
	if f6_arg1 ~= "" then
		local f6_local0, f6_local1, f6_local2 = f0_local0( f6_arg1 )
		local f6_local3 = f6_arg0.LevelDate
		local f6_local4 = f6_local3
		f6_local3 = f6_local3.setText
		local f6_local5 = Engine[0xED84C33EC5F01EA]( "LUA_MENU/DATE_EXT", Engine[0xED84C33EC5F01EA]( f0_local0[f6_local1] ), f6_local2 )
		local f6_local6
		if f6_arg2 then
			f6_local6 = 0
		else
			f6_local6 = 800
		end
		f6_local3( f6_local4, f6_local5, f6_local6 )
		f6_local3 = f6_arg0.YearsScale
		f6_local4 = f6_local3
		f6_local3 = f6_local3.SetLeft
		f6_local5 = _1080p * (f0_local0 - (f6_local2 - f0_local0) * f0_local0 - (f6_local1 - 1) * f0_local0 - f6_local0 * f0_local0)
		if f6_arg2 then
			f6_local6 = 0
		else
			f6_local6 = 800
		end
		f6_local3( f6_local4, f6_local5, f6_local6, LUI.EASING.inOutQuadratic )
	else
		f6_arg0.LevelDate:setText( "???" )
	end
end

local f0_local7 = function ( f5_arg0, f5_arg1, f5_arg2 )
	f5_arg0.SetDate = f0_local0
	f5_arg0.YearsScale:SetMask( f5_arg0.Mask )
end

function MissionSelectTimeline( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920 * _1080p, 0, 100 * _1080p )
	self.id = "MissionSelectTimeline"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	self._sequenceLengths = self._sequenceLengths or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local Mask = nil
	
	Mask = LUI.UIImage.new()
	Mask.id = "Mask"
	Mask:setImage( RegisterMaterial( "v_ui_icon_elmnt_tech_timeline_mask" ), 0 )
	Mask:SetAnchorsAndPosition( 0, 0, 0, 0, _1080p * 260, _1080p * -260, _1080p * 53, _1080p * -8 )
	self:addElement( Mask )
	self.Mask = Mask
	
	local YearsScale = nil
	
	YearsScale = MenuBuilder.BuildRegisteredType( "MissionSelectTimelineYearsScale", {
		controllerIndex = f1_local1
	} )
	YearsScale.id = "YearsScale"
	YearsScale:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 958, _1080p * 5998, _1080p * 43, _1080p * 83 )
	self:addElement( YearsScale )
	self.YearsScale = YearsScale
	
	local LevelDateNotch = nil
	
	LevelDateNotch = LUI.UIImage.new()
	LevelDateNotch.id = "LevelDateNotch"
	LevelDateNotch:SetRGBFromTable( SWATCHES.highlight.vYellowHighlight, 0 )
	LevelDateNotch:SetZRotation( 180, 0 )
	LevelDateNotch:setImage( RegisterMaterial( "v_ui_elmnt_tech_arrow_up" ), 0 )
	LevelDateNotch:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -10, _1080p * 6, _1080p * 23, _1080p * 91 )
	self:addElement( LevelDateNotch )
	self.LevelDateNotch = LevelDateNotch
	
	local LevelDate = nil
	
	LevelDate = LUI.UIStyledText.new()
	LevelDate.id = "LevelDate"
	LevelDate:SetRGBFromTable( SWATCHES.highlight.vYellowHighlight, 0 )
	LevelDate:setText( "", 0 )
	LevelDate:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_LHeader.font.File ) )
	LevelDate:SetFontSize( FONT_STYLES.fontStyle_LHeader.size )
	LevelDate:SetMinFontSize( FONT_STYLES.fontStyle_LHeader.minSize )
	LevelDate:SetTextShrinkingDisabled( true )
	LevelDate:SetWordWrap( false )
	LevelDate:SetAlignment( LUI.Alignment.Center )
	LevelDate:SetVerticalAlignment( LUI.Alignment.Center )
	LevelDate:SetMaxVisibleLines( 1 )
	LevelDate:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -250, _1080p * 250, _1080p * -16, _1080p * 45 )
	self:addElement( LevelDate )
	self.LevelDate = LevelDate
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	self._sequenceLengths.DefaultSequence = 0
	local f1_local7 = nil
	YearsScale:RegisterAnimationSequence( "ChangeDate", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 5.29462817E-315,
			duration = 300,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.inQuadratic
		},
		{
			value = 1,
			duration = 500,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.outQuadratic
		}
	} )
	LevelDateNotch:RegisterAnimationSequence( "ChangeDate", {
		{
			value = 4.6672616413205735E-62,
			duration = 300,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 500,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	LevelDate:RegisterAnimationSequence( "ChangeDate", {
		{
			value = 1,
			duration = 150,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 200,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -16,
			easing = LUI.EASING.outQuadratic
		},
		{
			duration = 200,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 45,
			easing = LUI.EASING.outQuadratic
		},
		{
			value = 0,
			duration = 50,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = 600,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 600,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -6
		},
		{
			duration = 600,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 55
		},
		{
			value = 1,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = -28,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -16,
			easing = LUI.EASING.outQuadratic
		},
		{
			duration = -28,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 45,
			easing = LUI.EASING.outQuadratic
		}
	} )
	self._sequences.ChangeDate = function ()
		menu:AnimateSequence( "ChangeDate" )
		menu:AnimateSequence( "ChangeDate" )
		menu:AnimateSequence( "ChangeDate" )
	end
	
	self._sequenceLengths.ChangeDate = 900
	local f1_local8 = nil
	YearsScale:RegisterAnimationSequence( "ChangeDate_backup", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 5.29462817E-315,
			duration = 300,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.inQuadratic
		},
		{
			value = 1,
			duration = 300,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.outQuadratic
		}
	} )
	LevelDateNotch:RegisterAnimationSequence( "ChangeDate_backup", {
		{
			value = 4.6672616413205735E-62,
			duration = 300,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 300,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	LevelDate:RegisterAnimationSequence( "ChangeDate_backup", {
		{
			value = 0,
			duration = 150,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.inQuadratic
		},
		{
			value = -2.353438979929347E-185,
			duration = 150,
			property = TWEEN_PROPERTY.Scale,
			easing = LUI.EASING.inQuadratic
		},
		{
			value = 0,
			duration = 150,
			property = TWEEN_PROPERTY.Top
		},
		{
			duration = 150,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 60
		},
		{
			value = 0,
			duration = 300,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 300,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -10
		},
		{
			duration = 300,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 50
		},
		{
			value = 0,
			duration = 300,
			property = TWEEN_PROPERTY.Scale
		},
		{
			value = 0,
			duration = 200,
			property = TWEEN_PROPERTY.Top,
			easing = LUI.EASING.inQuadratic
		},
		{
			duration = 200,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 61,
			easing = LUI.EASING.inQuadratic
		},
		{
			value = 1,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.inQuadratic
		},
		{
			value = 0,
			duration = 200,
			property = TWEEN_PROPERTY.Scale
		}
	} )
	self._sequences.ChangeDate_backup = function ()
		menu:AnimateSequence( "ChangeDate_backup" )
		menu:AnimateSequence( "ChangeDate_backup" )
		menu:AnimateSequence( "ChangeDate_backup" )
	end
	
	self._sequenceLengths.ChangeDate_backup = 650
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "MissionSelectTimeline", MissionSelectTimeline )
LockTable( _M )
