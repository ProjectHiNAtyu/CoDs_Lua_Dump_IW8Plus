-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
LUI.TextChat = LUI.Class( LUI.UIElement )
LUI.TextChat.LobbyChatTypes = {
	All = 4,
	FIRST = 1,
	DEFAULT = 1,
	COUNT = 3,
	Team = 3,
	Lobby = 1,
	Party = 2
}
LUI.TextChat.LobbyChatTitleFormats = {
	[Enum[0xEBC6725912C9693][0x241689C6BFC80DB]] = {
		preGame = 0xA19CE9B6C0DF711,
		ally = 0x85EB895FE2C0BD7,
		enemy = 0x17EE638A8CB577B
	},
	[Enum[0xEBC6725912C9693][0x7DBC6C7E698D90F]] = 0x7B8E91BD1DD0D05,
	[Enum[0xEBC6725912C9693][0xDDDB40E94530E30]] = 0xDA53D445C072AEA
}
LUI.TextChat.LobbyChatTextFormats = {
	[Enum[0xEBC6725912C9693][0x7DBC6C7E698D90F]] = 0x3F09141B80DA160,
	[Enum[0xEBC6725912C9693][0xDDDB40E94530E30]] = 0x9BF2090C2A01A6D
}
LUI.TextChat.LobbyChatColors = {
	[Enum[0xEBC6725912C9693][0x241689C6BFC80DB]] = SWATCHES.BattleNetChat.lobbyChat,
	[Enum[0xEBC6725912C9693][0x7DBC6C7E698D90F]] = SWATCHES.BattleNetChat.partyChat,
	[Enum[0xEBC6725912C9693][0xDDDB40E94530E30]] = SWATCHES.BattleNetChat.teamChat
}
LUI.TextChat.init = function ( f32_arg0, f32_arg1 )
	LUI.TextChat.super.init( f32_arg0 )
	f32_arg0.id = "TextChatLayer"
	assert( f32_arg1.controllerIndex )
	f32_arg0._controllerIndex = f32_arg1.controllerIndex
end

LUI.TextChat.InitLayer = function ( f31_arg0 )
	local f31_local0 = nil
	if not CONDITIONS.IsMobileTextChatEnabled() then
		f31_local0 = MenuBuilder.BuildRegisteredType( "TextChat", {
			controllerIndex = f31_arg0._controllerIndex
		} )
	else
		f31_local0 = MenuBuilder.BuildRegisteredType( "MGLTextChat", {
			controllerIndex = f31_arg0._controllerIndex
		} )
		f31_arg0:registerEventHandler( "chat_message_sent", TEXTCHAT.OnMessageSent )
		f31_arg0:registerEventHandler( "chat_message_received", TEXTCHAT.OnNewReceivedMessage )
		f31_arg0:registerEventHandler( "channel_fetch_state_changed", TEXTCHAT.OnChannelFetchStateChanged )
	end
	f31_local0.id = "chat"
	f31_local0:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
	f31_arg0.chat = f31_local0
	f31_local0._controllerIndex = f31_arg0._controllerIndex
	f31_local0._currentState = -1
	f31_local0._currentStyle = TEXTCHAT.IsInGameStyle() and TEXTCHAT.Styles.INGAME or TEXTCHAT.Styles.MENU
	if not CONDITIONS.IsMobileTextChatEnabled() then
		f31_arg0:addElement( f31_arg0.chat )
	end
end

LUI.TextChat.ClearLayer = function ( f30_arg0 )
	if f30_arg0.scoreboardModel then
		f30_arg0:UnsubscribeFromModel( f30_arg0.scoreboardModel )
		f30_arg0.scoreboardModel = nil
	end
	f30_arg0.chat:closeTree()
	f30_arg0.chat = nil
end

LUI.TextChat.GetLayer = function ()
	local f29_local0 = Engine[0xEE6F69FEA944B13]()
	return f29_local0.textChat
end

LUI.TextChat.GetChat = function ()
	local f28_local0 = LUI.TextChat.GetLayer()
	if f28_local0 then
		return f28_local0.chat
	else
		
	end
end

LUI.TextChat.GetSelector = function ()
	local f27_local0 = LUI.TextChat.GetLayer()
	if f27_local0 then
		return f27_local0.selector
	else
		
	end
end

LUI.TextChat.SetupMenuForNoChat = function ( f26_arg0 )
	f26_arg0.chatMinimizedDisplayState = TEXTCHAT.DisplayStates.NONE
end

LUI.TextChat.Frame = function ( f24_arg0 )
	if not f24_arg0.chat then
		
	else
		
	end
	local f24_local0 = false
	local f24_local1 = LUI.FlowManager.GetVisibleMenu()
	if not f24_local1 and Engine[0x12586A3F4FB490E]() then
		f24_local0 = true
	elseif f24_local1 then
		if not f24_local0 then
			f24_local0 = not TEXTCHAT.IsChatVisibleInMenu( f24_local1 )
		end
	else
		local f24_local2 = Engine[0xEE6F69FEA944B13]()
		assert( f24_local2 )
		local f24_local3 = f24_local2.hudManager
		if f24_local3 then
			if not f24_arg0.scoreboardModel and Engine[0x9258F49F515F97B]() and DataSources.inGame.HUD.isScoreboardOpen then
				f24_arg0.scoreboardModel = f24_arg0:SubscribeToModel( DataSources.inGame.HUD.isScoreboardOpen:GetModel( f24_arg0._controllerIndex ), function ( f25_arg0 )
					if DataModel[0x614D394F6F9A18D]( f25_arg0 ) then
						f24_arg0.chat._hiddenDueToOverlay = true
					else
						f24_arg0.chat._hiddenDueToOverlay = false
					end
				end, true )
			end
			if f24_local0 or not LUI.HudManager.ShouldBeVisible( f24_local3 ) then
				if LUI.HUD.IsChatAllowedInHUD() then
					f24_local0 = LUI.IsLastInputGamepad( f24_arg0._controllerIndex )
				else
					f24_local0 = true
				end
			else
				f24_local0 = false
			end
		end
	end
	if f24_arg0.chat.UpdateVisibilityState and (not TEXTCHAT.IsCurrentStateTyping( f24_arg0.chat ) or TEXTCHAT.IsCurrentStateNoInputs( f24_arg0.chat ) ~= f24_local0 or TEXTCHAT.ShouldChangeStyle( f24_arg0.chat )) then
		f24_arg0.chat:UpdateVisibilityState()
	end
	f24_arg0.chat.TextChatBody.TextChatEntriesList:CheckHideMessages()
	if not CONDITIONS.IsMobileOrMobileSim() and Lobby[0x63537242F1D48FF]() and not Dvar[0x9E5BE3B4BBA4E0E]( 0xB1FD3A1B7FBD56D ) then
		Dvar[0x8EA06EEDB58D872]( 0xB1FD3A1B7FBD56D, true )
		TEXTCHAT.DisplayIntroMessage( f24_arg0 )
	end
end

LUI.TextChat.ShouldBeVisible = function ( f23_arg0 )
	if not Dvar[0x9E5BE3B4BBA4E0E]( 0x4F6DECB7DC6092E ) then
		return false
	elseif Engine[0xFB1B6E36ABE59B8]() and LUI.IsLastInputGamepad( f23_arg0._controllerIndex ) and not Dvar[0x9E5BE3B4BBA4E0E]( 0x6D568A178558B1E ) then
		return false
	elseif Engine[0xB66CAA419F1D11A]( f23_arg0._controllerIndex ) then
		return false
	elseif IsCodcaster() or BuiltInEsports[0x9894ED459E76619]() then
		return false
	end
	local f23_local0 = true
	local f23_local1 = Engine[0xEE6F69FEA944B13]()
	if f23_local1 and f23_local1.flowManager then
		f23_local0 = not LUI.FlowManager.AreMainMenuFencedOut( f23_local1.flowManager )
	end
	if Engine[0x12586A3F4FB490E]() then
		local f23_local2 = Engine[0x45B054C920178E9]()
		if f23_local2 ~= f23_arg0._controllerIndex then
			f23_arg0._controllerIndex = f23_local2
		end
	elseif f23_arg0._controllerIndex ~= Engine[0x45B054C920178E9]() or CONDITIONS.IsMobileOrMobileSim() then
		return false
	end
	return f23_local0
end

LUI.TextChat.TrapsInput = function ( f22_arg0, f22_arg1 )
	if not f22_arg0.chat then
		return false
	end
	local f22_local0, f22_local1 = LUI.TextChat.InputsTrappedOrInteresting( f22_arg0, f22_arg1 )
	local f22_local2
	if not f22_local0 then
		f22_local2 = f22_local0
	else
		f22_local2 = f22_local1
	end
	return f22_local2
end

LUI.TextChat.InputsTrappedOrInteresting = function ( f21_arg0, f21_arg1 )
	if Engine[0x74423E76DECE3E4]() then
		return false, false
	end
	local f21_local0 = false
	local f21_local1 = false
	if TEXTCHAT.IsCurrentStateTyping( f21_arg0.chat ) then
		f21_local0 = true
	elseif not TEXTCHAT.IsCurrentStateNoInputs( f21_arg0.chat ) then
		if f21_arg0.chat._currentStyle ~= TEXTCHAT.Styles.INGAME then
			f21_local1 = f21_arg1.button == "select"
		end
		if LUI.IsLastInputKeyboardMouse( f21_arg1.controller ) and not f21_local1 then
			if f21_arg1.button ~= "open_chat" and f21_arg1.button ~= "open_match_chat" and f21_arg1.button ~= "open_team_chat" and f21_arg1.button ~= "open_party_chat" then
				f21_local1 = false
			else
				f21_local1 = true
			end
		end
	end
	return f21_local0, f21_local1
end

local f0_local0 = function ( f20_arg0, f20_arg1 )
	if TEXTCHAT.IsCurrentStateNoInputs( f20_arg0 ) or not LUI.IsLastInputGamepad( f20_arg1.controller ) then
		return false
	end
	local f20_local0 = TEXTCHAT.IsCurrentStateOpened( f20_arg0 )
	if not f20_local0 and f20_arg0._currentStyle == TEXTCHAT.Styles.INGAME then
		return false
	elseif TEXTCHAT.IsChatInactive( f20_arg0 ) and f20_local0 then
		if f20_arg1.button == "secondary" then
			TEXTCHAT.SetExpandedInactiveState( f20_arg0, false )
		else
			return true
		end
	end
	local f20_local1 = f20_local0
	if f20_arg1.button == "select" and not f20_local0 and f20_arg1.down then
		f20_local1 = TEXTCHAT.HandleSelectButton( f20_arg0, f20_arg1 )
	elseif f20_local0 and f20_arg1.down then
		if f20_arg1.button == "primary" and not Engine[0x575E9C5B9AAB6F4]() then
			f20_arg0.TextChatFooter.InputTextButton:openVirtualKeyboard( f20_arg1 )
		elseif f20_arg1.button == "secondary" or f20_arg1.button == "select" then
			f20_arg0.TextChatFooter.InputTextButton.TextEditOff()
			TEXTCHAT.SetTypingState( f20_arg0, false )
			Engine[0xC4146BA76D0F982]( SOUND_SETS.spMainMenu.detailClose )
		elseif f20_arg1.button == "shoulderr" then
			TEXTCHAT.SelectNextValidChannel( f20_arg0, true )
		elseif f20_arg1.button == "shoulderl" then
			TEXTCHAT.SelectPreviousValidChannel( f20_arg0, true )
		elseif f20_arg1.button == "rs_up" then
			f20_arg0.TextChatBody:processEvent( f20_arg1 )
		elseif f20_arg1.button == "rs_down" then
			f20_arg0.TextChatBody:processEvent( f20_arg1 )
		elseif f20_arg1.button == "up" then
			f20_arg0.TextChatBody:processEvent( f20_arg1 )
		elseif f20_arg1.button == "down" then
			f20_arg0.TextChatBody:processEvent( f20_arg1 )
		end
	end
	return f20_local1
end

local f0_local1 = function ( f19_arg0, f19_arg1 )
	if f19_arg1.button == "open_chat" or f19_arg1.button == "kp_enter" then
		ChatChannel[0xDE0B3EA8DDC5A8D]( f19_arg0._controllerIndex, f19_arg0._chatID )
		return LUI.TextChat.StartEditing( f19_arg1.controller )
	elseif f19_arg1.button == "open_match_chat" then
		if not TEXTCHAT.TryToChangeChannel( f19_arg0, Enum[0xEBC6725912C9693][0x241689C6BFC80DB] ) then
			
		else
			
		end
		return LUI.TextChat.StartEditing( f19_arg1.controller )
	elseif f19_arg1.button == "open_team_chat" then
		if not TEXTCHAT.TryToChangeChannel( f19_arg0, Enum[0xEBC6725912C9693][0xDDDB40E94530E30] ) then
			
		else
			
		end
		return LUI.TextChat.StartEditing( f19_arg1.controller )
	elseif f19_arg1.button == "open_party_chat" then
		if not TEXTCHAT.TryToChangeChannel( f19_arg0, Enum[0xEBC6725912C9693][0x7DBC6C7E698D90F] ) then
			
		else
			
		end
		return LUI.TextChat.StartEditing( f19_arg1.controller )
	elseif f19_arg1.button == "open_clan_chat" then
		if not TEXTCHAT.TryToChangeChannel( f19_arg0, Enum[0xEBC6725912C9693][0x3BC4679E96194E9] ) then
			
		else
			
		end
		return LUI.TextChat.StartEditing( f19_arg1.controller )
	elseif f19_arg1.button == "up" or f19_arg1.button == "down" then
		local f19_local0 = TEXTCHAT.IsCurrentStateOpened( f19_arg0 )
		if f19_local0 and f19_arg0.TextChatFooter.InputTextButton.TextChatAutocompleteListContainer and not f19_arg0.TextChatFooter.InputTextButton.TextChatAutocompleteListContainer:processEvent( f19_arg1 ) then
			f19_arg0.TextChatFooter.InputTextButton.TextChatAutocompleteListContainer:processEvent( {
				name = "gain_focus",
				controllerIndex = f19_arg1.controller
			} )
		end
		return f19_local0
	elseif f19_arg1.button == "secondary" and TEXTCHAT.IsCurrentExpandedInactive( f19_arg0 ) and TEXTCHAT.IsChatInactive( f19_arg0 ) then
		TEXTCHAT.SetExpandedInactiveState( f19_arg0, false )
		return true
	elseif not TEXTCHAT.IsInGameStyle() and TEXTCHAT.IsCurrentExpandedInactive( f19_arg0 ) and TEXTCHAT.IsChatInactive( f19_arg0 ) then
		return true
	else
		
	end
end

LUI.TextChat.processEvent = function ( f18_arg0, f18_arg1 )
	if f18_arg0.chat then
		if f18_arg1.name == "gamepad_button" then
			if f18_arg1.controller == f18_arg0._controllerIndex then
				if f18_arg1.qualifier == "gamepad" or f18_arg1.qualifier == "dpad" then
					return f0_local0( f18_arg0.chat, f18_arg1 )
				elseif f18_arg1.down and f18_arg1.qualifier == "keyboard" and not TEXTCHAT.IsCurrentStateNoInputs( f18_arg0.chat ) then
					return f0_local0( f18_arg0.chat, f18_arg1 )
				end
			elseif TEXTCHAT.IsCurrentStateOpened( f18_arg0.chat ) then
				return true
			end
		elseif f18_arg1.name == "pause" and TEXTCHAT.IsCurrentExpandedInactive( f18_arg0.chat ) then
			TEXTCHAT.SetExpandedInactiveState( f18_arg0.chat, false )
			return true
		else
			return LUI.TextChat.super.processEvent( f18_arg0, f18_arg1 )
		end
	else
		return false
	end
end

LUI.TextChat.ReceiveChatMessage = function ( f17_arg0, f17_arg1, f17_arg2, f17_arg3, f17_arg4 )
	if f17_arg1 == f17_arg2 then
		local f17_local0 = ChatChannel[0xA530A67A1FDBCEE]( f17_arg0._controllerIndex, f17_arg2 )
		if f17_local0 and f17_arg3 == f17_local0 then
			local f17_local1, f17_local2 = f17_arg4( f17_arg0 )
			if f17_local1 and f17_local2.canViewFromSender then
				local f17_local3 = LUI.TextChat.MakeMessageDataFromTable( f17_arg0, f17_local2 )
				LUI.TextChat.ApplyFormatAndColor( f17_arg0, f17_local3, f17_local3.chatType )
				if TEXTCHAT.IsTextChatOptionEnabled( f17_arg0._controllerIndex ) and CONDITIONS.IsTextChatEnabled( f17_arg0._controllerIndex ) then
					LUI.TextChat.AddTextEntry( f17_arg0, f17_local3 )
				end
				table.insert( f17_local2, f17_local3 )
				if not TEXTCHAT.IsCurrentStateOpened( f17_arg0 ) or f17_arg0.TextChatBody.TextChatEntriesList.MessagesGrid:IsLastItemFocused() then
					f17_arg0.TextChatBody.TextChatEntriesList:ScrollListToEnd()
				end
				return true
			end
		end
	end
	return false
end

LUI.TextChat.MakeMessageDataFromTable = function ( f16_arg0, f16_arg1 )
	if f16_arg1.playerID ~= nil then
		return f16_arg1
	end
	assert( f16_arg1.id )
	assert( f16_arg1.payload )
	assert( f16_arg1.timestamp )
	assert( f16_arg1.senderId )
	assert( f16_arg1.canViewFromSender )
	local f16_local0 = {
		id = f16_arg1.id,
		playerID = f16_arg1.senderId,
		message = f16_arg1.payload,
		timestamp = f16_arg1.timestamp,
		canViewFromSender = f16_arg1.canViewFromSender,
		type = f16_arg1.type
	}
	local f16_local1 = TEXTCHAT.PrivateChatChannels[f16_arg1.channelId]
	if f16_local1 then
		f16_local1 = TEXTCHAT.PrivateChatChannels[f16_arg1.channelId].name
	end
	f16_local0.gamertag = f16_local1
	f16_local0.chatType = f16_arg1.channelType
	f16_local0.isMyPlayer = f16_arg1.senderId == f16_arg0._ourID
	f16_local0.titleFormat = f16_arg1.titleFormat
	f16_local0.titleColor = f16_arg1.titleColor
	f16_local0.textFormat = f16_arg1.textFormat
	f16_local0.textColor = f16_arg1.textColor
	return f16_local0
end

LUI.TextChat.UpdatePlayerData = function ( f15_arg0, f15_arg1, f15_arg2 )
	f15_arg1.playerName = f15_arg2.crossplayName
	f15_arg1.emblemIndex = f15_arg2.emblemIndex
	f15_arg1.onlineStatus = f15_arg2.isOnline and BattleNetOnlineStatus.ONLINE or BattleNetOnlineStatus.APPEAR_OFFLINE
	f15_arg1.isBlocked = f15_arg2.isBlocked
	local f15_local0 = LUI.TextChat.LobbyChatTitleFormats
	local f15_local1 = Enum[0xEBC6725912C9693]
	f15_arg1.titleFormat = f15_local0[Enum[0xEBC6725912C9693][0x241689C6BFC80DB]].enemy
end

LUI.TextChat.AddNewPlayerData = function ( f14_arg0, f14_arg1, f14_arg2 )
	local f14_local0 = {}
	f14_arg0._allPlayersData[f14_arg2] = f14_local0
	LUI.TextChat.UpdatePlayerData( f14_arg0, f14_local0, f14_arg1 )
	return f14_local0
end

LUI.TextChat.GetPlayerData = function ( f13_arg0, f13_arg1 )
	local f13_local0 = f13_arg0._allPlayersData[f13_arg1]
	if not f13_local0 then
		f13_local0 = LUI.TextChat.AddNewPlayerData( f13_arg0, Social[0xE07FB349B55F12C]( f13_arg0._controllerIndex, f13_arg1 ), f13_arg1 )
	end
	return f13_local0
end

LUI.TextChat.GetMessageData = function ( f12_arg0, f12_arg1 )
	local f12_local0 = nil
	if f12_arg0._selectedChatFilter == LUI.TextChat.LobbyChatTypes.All then
		f12_local0 = f12_arg0._allMessages[f12_arg1]
	else
		f12_local0 = f12_arg0._allMessagesByType[f12_arg0._selectedChatFilter][f12_arg1]
	end
	return f12_local0
end

LUI.TextChat.ApplyFormatAndColor = function ( f10_arg0, f10_arg1, f10_arg2 )
	local f10_local0 = LUI.TextChat.LobbyChatTitleFormats[f10_arg2]
	if f10_arg1.chatType == Enum[0xEBC6725912C9693][0x7C61CC549527A1] then
		local f10_local1 = COLORBLIND_UTILS.GetCustomColorFromColorNameAndColorBlindType( f10_arg0._controllerIndex, COLORBLIND_UTILS.CUSTOM_COLORS.YOU )
		local f10_local2 = ""
		local f10_local3 = ""
		local f10_local4 = function ( f11_arg0 )
			return "[" .. f11_arg0 .. "] "
		end
		
		f10_arg1.titleColor = f10_local1
		f10_arg1.titleFormat = TEXTCHAT.ChatChannels[f10_arg1.chatType].titleFormat
		if f10_arg1.fullName and f10_arg1.fullName ~= "" then
			f10_local3 = " (" .. f10_arg1.fullName .. ")"
		end
		if f10_arg1.isMyPlayer and f10_arg1.gamertag then
			f10_local2 = Engine[0xED84C33EC5F01EA]( 0x57FE90A8E71B816 ) .. f10_local4( f10_arg1.gamertag .. f10_local3 )
		end
		f10_arg1.message = f10_local2 .. f10_arg1.message
	elseif f10_arg2 == Enum[0xEBC6725912C9693][0x241689C6BFC80DB] then
		if CONDITIONS.InGame() then
			local f10_local1 = LUI.TextChat.GetPlayerData( f10_arg0, f10_arg1.playerID )
			f10_arg1.titleFormat = f10_local1.titleFormat
		else
			f10_arg1.titleFormat = f10_local0.preGame
		end
	elseif f10_local0 then
		f10_arg1.titleFormat = f10_local0
	end
end

LUI.TextChat.FetchAllLobbyMessages = function ( f9_arg0, f9_arg1 )
	local f9_local0 = {}
	for f9_local1 = Enum[0xEBC6725912C9693][0x3BC4679E96194E9], Enum[0xEBC6725912C9693][0xBB8481C813E8268], 1 do
		if f9_arg0._lobbyChatIDs[f9_local1] then
			ChatChannel[0xDE0B3EA8DDC5A8D]( f9_arg0._controllerIndex, f9_arg0._lobbyChatIDs[f9_local1] )
			f9_local0[f9_local1] = ChatChannel[0xF6F1F4913ABA49F]()
		end
	end
	ChatChannel[0xDE0B3EA8DDC5A8D]( f9_arg0._controllerIndex, f9_arg0._chatID )
	return f9_local0
end

LUI.TextChat.SortLobbyMessages = function ( f7_arg0, f7_arg1 )
	local f7_local0 = {}
	for f7_local1 = Enum[0xEBC6725912C9693][0x3BC4679E96194E9], Enum[0xEBC6725912C9693][0xBB8481C813E8268], 1 do
		local f7_local4 = f7_arg1[f7_local1]
		if f7_local4 and 0 < #f7_local4 then
			local f7_local5 = {}
			for f7_local6 = 1, #f7_local4, 1 do
				local f7_local9 = LUI.TextChat.MakeMessageDataFromTable( f7_arg0, f7_local4[f7_local6] )
				LUI.TextChat.ApplyFormatAndColor( f7_arg0, f7_local9, f7_local1 )
				table.insert( f7_local0, f7_local9 )
				table.insert( f7_local5, f7_local9 )
			end
			local f7_local6 = f7_arg0._allMessagesByType[f7_local1]
			if f7_local6 then
				LUI.InsertElementsIntoTable( f7_local6, 1, f7_local5 )
			else
				f7_arg0._allMessagesByType[f7_local1] = f7_local5
			end
		end
	end
	table.sort( f7_local0, function ( f8_arg0, f8_arg1 )
		return f8_arg0.timestamp < f8_arg1.timestamp
	end )
	return f7_local0
end

LUI.TextChat.AddMultipleTextEntries = function ( f6_arg0, f6_arg1, f6_arg2 )
	assert( f6_arg1 )
	local f6_local0
	if f6_arg1 then
		f6_local0 = #f6_arg1
		if not f6_local0 then
		
		else
			if 0 < f6_local0 then
				local f6_local1 = {
					adjustContentToFit = true,
					widgetCount = f6_local0
				}
				local f6_local2 = {}
				for f6_local3 = 1, f6_local0, 1 do
					table.insert( f6_local2, LUI.TextChat.MakeMessageDataFromTable( f6_arg0, f6_arg1[f6_local3] ) )
				end
				if f6_arg2 then
					if f6_arg2.position then
						LUI.InsertElementsIntoTable( f6_arg0._allMessages, f6_arg2.position, f6_local2 )
						f6_local1.position = f6_arg2.position
					end
				else
					f6_arg0._allMessages = f6_local2
				end
				for f6_local3 = 1, #f6_arg0._allMessages, 1 do
					f6_local1.messageData = f6_arg0._allMessages[f6_local3]
					LUI.TextChat.ApplyFormatAndColor( f6_arg0, f6_local1.messageData, f6_local1.messageData.type )
					f6_arg0.TextChatBody.TextChatEntriesList.MessagesGrid:AddWidget( "TextChatEntry", {
						adjustContentToFit = true,
						widgetOptions = f6_local1
					} )
				end
			end
		end
	end
	f6_local0 = 0
end

LUI.TextChat.AddTextEntry = function ( f5_arg0, f5_arg1, f5_arg2 )
	assert( f5_arg1 )
	assert( f5_arg1.id )
	assert( f5_arg1.playerID )
	assert( f5_arg1.message )
	assert( f5_arg1.timestamp )
	assert( f5_arg1.isMyPlayer ~= nil )
	if f5_arg2 then
		if f5_arg2.position then
			table.insert( f5_arg0._allMessages, f5_arg2.position, f5_arg1 )
			widgetOptions.position = f5_arg2.position
		end
	else
		table.insert( f5_arg0._allMessages, f5_arg1 )
	end
	f5_arg0.TextChatBody.TextChatEntriesList.MessagesGrid:AddWidget( "TextChatEntry", {
		adjustContentToFit = true,
		widgetOptions = {
			messageData = f5_arg1
		}
	} )
end

LUI.TextChat.SetupLobbyChat = function ( f1_arg0 )
	f1_arg0._allMessagesByType = {}
	f1_arg0._lobbyChatIDs = {}
	f1_arg0._lobbyChatIDs[Enum[0xEBC6725912C9693][0x241689C6BFC80DB]] = ChatChannel[0x92B8CF8FA5B2B9]( f1_arg0._controllerIndex )
	f1_arg0._lobbyChatIDs[Enum[0xEBC6725912C9693][0x7DBC6C7E698D90F]] = ChatChannel[0xBAE6C9991A144BD]( f1_arg0._controllerIndex )
	for f1_local0 = Enum[0xEBC6725912C9693][0x3BC4679E96194E9], Enum[0xEBC6725912C9693][0xBB8481C813E8268], 1 do
		if f1_arg0._lobbyChatIDs[f1_local0] == TEXTCHAT.INVALID_CHAT_ID then
			f1_arg0._chatInactive = true
		end
	end
	TEXTCHAT.ChatChannels[Enum[0xEBC6725912C9693][0x241689C6BFC80DB]].id = f1_arg0._lobbyChatIDs[Enum[0xEBC6725912C9693][0x241689C6BFC80DB]]
	TEXTCHAT.ChatChannels[Enum[0xEBC6725912C9693][0x7DBC6C7E698D90F]].id = f1_arg0._lobbyChatIDs[Enum[0xEBC6725912C9693][0x7DBC6C7E698D90F]]
	f1_arg0._currentLobbyChatType = Enum[0xEBC6725912C9693][0x241689C6BFC80DB]
	f1_arg0._chatID = f1_arg0._lobbyChatIDs[f1_arg0._currentLobbyChatType]
	ChatChannel[0xDE0B3EA8DDC5A8D]( f1_arg0._controllerIndex, f1_arg0._chatID )
	if not CONDITIONS.IsMobileTextChatEnabled() then
		f1_arg0:SetChannelLabelByType( Enum[0xEBC6725912C9693][0x241689C6BFC80DB], nil )
	end
	LUI.TextChat.AddMultipleTextEntries( f1_arg0, LUI.TextChat.SortLobbyMessages( f1_arg0, LUI.TextChat.FetchAllLobbyMessages( f1_arg0 ) ) )
	f1_arg0:SetChannelLabelByType( f1_arg0._currentLobbyChatType, nil )
	f1_arg0:addEventHandler( "chat_message_received", function ( f3_arg0, f3_arg1 )
		return LUI.TextChat.ReceiveChatMessage( f3_arg0, f3_arg1.channelId, f3_arg1.channelId, f3_arg1.id, function ( f4_arg0 )
			local f4_local0 = f4_arg0._allMessagesByType[f3_arg0.channelType]
			if f4_local0 == nil then
				f4_local0 = {}
				f4_arg0._allMessagesByType[f3_arg0.channelType] = f4_local0
			end
			local f4_local1 = #f4_local0
			if f3_arg0.id ~= (0 and f4_local0[#f4_local0].id or TEXTCHAT.INVALID_MESSAGE_ID) then
				local f4_local2 = LUI.TextChat.MakeMessageDataFromTable( f4_arg0, f3_arg0 )
				f4_local2.startFadeTime = Engine[0x6991337AE950F99]() + TEXTCHAT.MessagesFadeOutTimeInMs
				LUI.TextChat.ApplyFormatAndColor( f4_arg0, f4_local2, f3_arg0.channelType )
				return true, f4_local2
			else
				return false
			end
		end
		 )
	end )
	f1_arg0:addEventHandler( "chat_message_sent", function ( f2_arg0, f2_arg1 )
		local f2_local0 = LUI.TextChat.MakeMessageDataFromTable( f2_arg0, f2_arg1 )
		LUI.TextChat.ApplyFormatAndColor( f2_arg0, f2_local0, f2_arg0._currentLobbyChatType )
		f2_local0.startFadeTime = Engine[0x6991337AE950F99]() + TEXTCHAT.MessagesFadeOutTimeInMs
		LUI.TextChat.AddTextEntry( f2_arg0, f2_local0 )
		if not f2_arg0._allMessagesByType[f2_arg0._currentLobbyChatType] then
			f2_arg0._allMessagesByType[f2_arg0._currentLobbyChatType] = {}
		end
		table.insert( f2_arg0._allMessagesByType[f2_arg0._currentLobbyChatType], f2_local0 )
		f2_arg0.TextChatBody.TextChatEntriesList:ScrollListToEnd()
		return true
	end )
end

