-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
module( ..., package.seeall )
local f0_local0 = {
	RESPECT = "mp/brtacmap_legend_respect_the_circle.csv",
	ATLANTIS_PAYLOAD = "mp/brtacmap_legend_atlantis_payload.csv",
	WW2VERSE = "mp/brtacmap_legend_ww2.csv",
	ATLANTIS_DMZ = "mp/brtacmap_legend_atlantis_dmz.csv",
	SANDBOX = "mp/brtacmap_legend_sandbox.csv",
	ATLANTIS_IRONTRIALS = "mp/brtacmap_legend_atlantis_iron_trials.csv",
	MODERNVERSE = "mp/brtacmap_legend.csv",
	ZOMBIES = "mp/brtacmap_legend_sandbox.csv",
	OLARIDE = "mp/brtacmap_legend_olaride.csv",
	ATLANTIS = "mp/brtacmap_legend_atlantis.csv",
	INCURSION = "mp/brtacmap_legend_invasion.csv",
	MENDOTA = "mp/brtacmap_legend_mendota.csv",
	CALDERAIRONTRIALS = "mp/brtacmap_legend_wz_island_iron_trials.csv",
	WW2_DMZ = "mp/brtacmap_legend_dmz_ww2.csv",
	PAYLOAD = "mp/brtacmap_legend_payload.csv",
	MODERN_DMZ = "mp/brtacmap_legend_dmz.csv",
	FTUI = "mp/brtacmap_legend_tut2.csv",
	DD_RESURGENCE = "mp/brtacmap_legend_dd_resurgence.csv",
	RAT_RACE = "mp/brtacmap_legend_rat_race.csv"
}
local f0_local1 = {
	TRAMWAY = "tramway",
	HOLIDAY = "holiday_tree",
	CURSED_CHEST = "cursedChest",
	ARMORY_TRADER = "armoryTrader",
	MOTOCYCLE = "motorcycle",
	REDEPLOY_BALLOON = "redeploy_balloon",
	PLUNDER_EXTRACTION = "plunderExtraction",
	ARMORY_KIOSK = "armoryKiosk",
	DROPBAG = "dropbag",
	BROKEN_ATM = "plunderDispatcher",
	PORTABLE_REDEPLOY_BALLOON = "portable_redeploy_balloon",
	FLASHPOINT = "flashpoint",
	CONTRACTS = "contracts"
}
local f0_local2 = {
	top = 1,
	middle = 2,
	bottom = 3,
	legend = 4294967295
}
local f0_local3 = false
local f0_local4 = {
	[f0_local2.legend] = {
		title = "MP_BR_INGAME/LEGEND",
		data = {},
		isFiltered = f0_local3
	},
	[f0_local2.top] = {
		title = "LUA_MENU_MP/CONTRACTS",
		farIcon = "ui_mp_br_mapmenu_distance_icon_tablet",
		enabledAnim = "EnableTopFilter",
		disabledAnim = "DisableTopFilter",
		data = {},
		isFiltered = f0_local3
	},
	[f0_local2.middle] = {
		title = "MP_BR_INGAME/POI",
		farIcon = "ui_mp_br_mapmenu_distance_icon_poi",
		enabledAnim = "EnableMidFilter",
		disabledAnim = "DisableMidFilter",
		data = {},
		isFiltered = f0_local3
	},
	[f0_local2.bottom] = {
		title = "MP_BR_INGAME/VEHICLES",
		farIcon = "ui_mp_br_mapmenu_distance_icon_vehicle",
		enabledAnim = "EnableBotFilter",
		disabledAnim = "DisableBotFilter",
		data = {},
		isFiltered = f0_local3
	}
}
local f0_local5 = 20
local f0_local6 = function ( f12_arg0, f12_arg1, f12_arg2 )
	assert( f12_arg1 )
	assert( f12_arg2 )
	for f12_local3, f12_local4 in pairs( f0_local0[f12_arg1].data ) do
		if f12_local4.id == f12_arg2 then
			table.remove( f0_local0[f12_arg1].data, f12_local3 )
			f12_arg0._totalLegendItems = f12_arg0._totalLegendItems - 1
			return 
		end
	end
end

local f0_local7 = function ( f10_arg0 )
	assert( f10_arg0.filterData )
	if f10_arg0.titleWidget and f10_arg0.filterData.title and f10_arg0.filterData.title ~= "" then
		f10_arg0.titleWidget:setText( ToUpperCase( Engine.CBBHFCGDIC( f10_arg0.filterData.title ) ) )
	end
	if f10_arg0.titleIconWidget and f10_arg0.filterData.farIcon and f10_arg0.filterData.farIcon ~= "" then
		f10_arg0.titleIconWidget:setImage( RegisterMaterial( f10_arg0.filterData.farIcon ) )
	end
	if f10_arg0.gridWidget and f10_arg0.filterData.data then
		f10_arg0.gridWidget:SetNumChildren( #f10_arg0.filterData.data, {
			shouldRemoveExcessChildren = true
		} )
		f10_arg0.gridWidget:SetRefreshChild( function ( f11_arg0, f11_arg1, f11_arg2 )
			local f11_local0 = f10_arg0.filterData.data[f11_arg2 + 1]
			if f11_local0.icon and f11_local0.icon ~= "" then
				f11_arg0.Icon:setImage( RegisterMaterial( f11_local0.icon ) )
			end
			if f11_local0.title and f11_local0.title ~= "" then
				f11_arg0.Title:setText( Engine.CBBHFCGDIC( f11_local0.title ) )
			end
		end )
		f10_arg0.gridWidget:RefreshContent()
	end
end

local f0_local8 = function ( f9_arg0, f9_arg1 )
	assert( f9_arg1 )
	f9_arg1:SetFilterBits( {
		filterPlayerPings = f0_local0[f0_local0.legend].isFiltered,
		filterMission = f0_local0[f0_local0.top].isFiltered,
		filterPoi = f0_local0[f0_local0.middle].isFiltered,
		filterVehicle = f0_local0[f0_local0.bottom].isFiltered
	} )
end

local f0_local9 = function ()
	if CONDITIONS.IsMapAtlantis() then
		if CONDITIONS.IsBloodMoney() or CONDITIONS.IsRiskGametype() or CONDITIONS.IsWZRatRace() then
			return f0_local0.ATLANTIS_DMZ
		elseif CONDITIONS.IsWZPayload() then
			return f0_local0.ATLANTIS_PAYLOAD
		elseif CONDITIONS.IsBRIronTrialsGametype() then
			return f0_local0.ATLANTIS_IRONTRIALS
		else
			return f0_local0.ATLANTIS
		end
	elseif CONDITIONS.IsMapDragonsDen() and (CONDITIONS.IsRebirthGametype() or CONDITIONS.IsRebirthSoloGametype()) then
		return f0_local0.DD_RESURGENCE
	elseif CONDITIONS.IsBRSandbox() then
		return f0_local0.SANDBOX
	elseif CONDITIONS.IsBRZombies() then
		return f0_local0.ZOMBIES
	elseif CONDITIONS.IsBloodMoney() or CONDITIONS.IsRiskGametype() or CONDITIONS.IsWZRatRace() then
		return CONDITIONS.IsWW2Verse() and f0_local0.WW2_DMZ or f0_local0.MODERN_DMZ
	elseif CONDITIONS.IsWZPayload() then
		return f0_local0.PAYLOAD
	elseif CONDITIONS.IsFTUI() then
		return f0_local0.FTUI
	elseif CONDITIONS.IsWZIncursion() then
		return f0_local0.INCURSION
	elseif CONDITIONS.IsRespectGametype() then
		return f0_local0.RESPECT
	elseif CONDITIONS.IsBRMendotaGameType() then
		return f0_local0.MENDOTA
	elseif CONDITIONS.IsBRIronTrialsGametype() and CONDITIONS.IsMapPacificIsland() then
		return f0_local0.CALDERAIRONTRIALS
	elseif CONDITIONS.IsOlarideGameType() then
		return f0_local0.OLARIDE
	else
		return CONDITIONS.IsWW2Verse() and f0_local0.WW2VERSE or f0_local0.MODERNVERSE
	end
end

local f0_local10 = function ( f7_arg0, f7_arg1 )
	local f7_local0 = Dvar.DHEEJCCJBH( "br_map_legend_filename" )
	local f7_local1
	if f7_local0 then
		f7_local1 = f7_local0
	else
		f7_local1 = 0 < #f7_local0
	end
	local f7_local2 = f0_local0()
	local f7_local3 = CSV.brTacMapLegend
	local f7_local4
	if f7_local1 and not f7_local0 then
		f7_local4 = f7_local0
	else
		f7_local4 = f7_local2
	end
	f7_local3.file = f7_local4
	assert( CSV.brTacMapLegend.file ~= "" )
	f7_local3 = StringTable.BFHCAIIDA( CSV.brTacMapLegend.file )
	f7_arg0._totalLegendItems = 0
	for f7_local4 = 0, f7_local3 - 1, 1 do
		local f7_local7 = CSV.ReadRow( CSV.brTacMapLegend, f7_local4 )
		assert( f7_local7.positionCategory ~= "" )
		assert( f7_local7.id ~= "" )
		local f7_local8 = false
		if CONDITIONS.IsFastTravelAvailable() == false and f7_local7.id == "hatch" then
			f7_local8 = true
		end
		if f7_local8 == false then
			local f7_local9 = f0_local0
			local f7_local10 = f0_local0
			f7_local9 = f7_local9[f0_local0[f7_local7.positionCategory]].data
			if f7_local7.hasDynamicData and f7_local7.hasDynamicData ~= "" then
				if f7_local7.id == f0_local0.CONTRACTS then
					for f7_local14, f7_local15 in ipairs( BRCONTRACTS.GetAvailableMissionIndexes( f7_arg1 ) ) do
						table.insert( f7_local9, {
							icon = StringTable.DIFCHIGDFB( CSV.BRMissions.file, CSV.BRMissions.cols.index, f7_local15, CSV.BRMissions.cols.mapKeyIcon ),
							title = StringTable.DIFCHIGDFB( CSV.BRMissions.file, CSV.BRMissions.cols.index, f7_local15, CSV.BRMissions.cols.mapKeyTitle ),
							id = f7_local7.id
						} )
						f7_arg0._totalLegendItems = f7_arg0._totalLegendItems + 1
					end
				end
			else
				table.insert( f7_local9, {
					icon = f7_local7.icon,
					title = f7_local7.title,
					id = f7_local7.id
				} )
				f7_arg0._totalLegendItems = f7_arg0._totalLegendItems + 1
			end
			if f7_local7.categoryIconOverride and f7_local7.categoryIconOverride ~= "" then
				f0_local0[f0_local0[f7_local7.positionCategory]].farIcon = f7_local7.categoryIconOverride
			end
			if f7_local7.categoryTitleOverride and f7_local7.categoryTitleOverride ~= "" then
				f0_local0[f0_local0[f7_local7.positionCategory]].title = f7_local7.categoryTitleOverride
			end
		end
	end
end

local f0_local11 = function ( f6_arg0 )
	if not CONDITIONS.AreBRPlunderSitesEnabled() then
		f0_local0( f6_arg0, f0_local0.middle, f0_local0.PLUNDER_EXTRACTION )
	end
	if not CONDITIONS.IsBRArmoryKioskEnabled() then
		f0_local0( f6_arg0, f0_local0.middle, f0_local0.ARMORY_KIOSK )
	end
	if not CONDITIONS.IsBRArmoryTraderEnabled() or CONDITIONS.IsMapPacificIsland() then
		f0_local0( f6_arg0, f0_local0.middle, f0_local0.ARMORY_TRADER )
	end
	if not CONDITIONS.IsHolidayHuntActive() then
		f0_local0( f6_arg0, f0_local0.middle, f0_local0.HOLIDAY )
	end
	if not CONDITIONS.IsBRDropBagEnabled() then
		f0_local0( f6_arg0, f0_local0.legend, f0_local0.DROPBAG )
	end
	if not CONDITIONS.IsTramwayEnabled() then
		f0_local0( f6_arg0, f0_local0.bottom, f0_local0.TRAMWAY )
	end
	if not CONDITIONS.IsSkyhookEnabled() then
		f0_local0( f6_arg0, f0_local0.bottom, f0_local0.REDEPLOY_BALLOON )
		f0_local0( f6_arg0, f0_local0.bottom, f0_local0.PORTABLE_REDEPLOY_BALLOON )
	end
	if not CONDITIONS.IsMotocycleEnabled() then
		f0_local0( f6_arg0, f0_local0.bottom, f0_local0.MOTOCYCLE )
	end
	if CONDITIONS.IsBrokenATMDisabled() then
		f0_local0( f6_arg0, f0_local0.middle, f0_local0.BROKEN_ATM )
	end
	if not CONDITIONS.IsFlashpointCompatibleGameMode() then
		f0_local0( f6_arg0, f0_local0.middle, f0_local0.FLASHPOINT )
	end
	if not CONDITIONS.IsCursedChestEventEnabled() then
		f0_local0( f6_arg0, f0_local0.middle, f0_local0.CURSED_CHEST )
	end
	f6_arg0.VertList:RemoveCategoryWidgetsIfDataEmpty( {
		categoryWidgetPrefix = "Legend",
		dataTable = f0_local0[f0_local0.legend].data
	} )
	f6_arg0.VertList:RemoveCategoryWidgetsIfDataEmpty( {
		categoryWidgetPrefix = "Top",
		dataTable = f0_local0[f0_local0.top].data
	} )
	f6_arg0.VertList:RemoveCategoryWidgetsIfDataEmpty( {
		categoryWidgetPrefix = "Mid",
		dataTable = f0_local0[f0_local0.middle].data
	} )
	f6_arg0.VertList:RemoveCategoryWidgetsIfDataEmpty( {
		categoryWidgetPrefix = "Bot",
		dataTable = f0_local0[f0_local0.bottom].data
	} )
end

local f0_local12 = function ( f5_arg0 )
	local f5_local0 = f5_arg0.VertList:getFirstChild()
	local f5_local1 = 0
	local f5_local2 = 0
	if f5_local0 then
		
	else
		
	end
	local f5_local3 = f5_arg0.VertList:GetSpacing() / _1080p * (f5_local2 - 1)
	local f5_local4 = f5_local1 + f5_local3
	local f5_local5 = 1 + f5_arg0.VertList:GetScale()
	if f5_local5 then
		f5_local4 = (f5_local1 + f5_local3) * f5_local5
	end
	f5_arg0.Background:SetBottom( f5_local4 )
end

local f0_local13 = function ( f4_arg0, f4_arg1, f4_arg2 )
	f0_local0( f4_arg0, f4_arg1 )
	f0_local0( f4_arg0 )
	f4_arg0.UpdateMinimapFilters = f0_local0
	f4_arg0.CONTRACTS_FILTER_LOOKUP_KEY = "top"
	f4_arg0.POI_FILTER_LOOKUP_KEY = "middle"
	f4_arg0.VEHICLES_FILTER_LOOKUP_KEY = "bottom"
	f0_local0( {
		titleWidget = f4_arg0.TitleLegend,
		gridWidget = f4_arg0.VertList.LegendGrid,
		filterData = f0_local0[f0_local0.legend]
	} )
	f0_local0( {
		titleWidget = f4_arg0.VertList.TopHeader.Title,
		titleIconWidget = f4_arg0.VertList.TopHeader.FarIcon,
		gridWidget = f4_arg0.VertList.TopGrid,
		filterData = f0_local0[f0_local0.top]
	} )
	f0_local0( {
		titleWidget = f4_arg0.VertList.MidHeader.Title,
		titleIconWidget = f4_arg0.VertList.MidHeader.FarIcon,
		gridWidget = f4_arg0.VertList.MidGrid,
		filterData = f0_local0[f0_local0.middle]
	} )
	f0_local0( {
		titleWidget = f4_arg0.VertList.BotHeader.Title,
		titleIconWidget = f4_arg0.VertList.BotHeader.FarIcon,
		gridWidget = f4_arg0.VertList.BotGrid,
		filterData = f0_local0[f0_local0.bottom]
	} )
	if f0_local0 < f4_arg0._totalLegendItems then
		ACTIONS.AnimateSequence( f4_arg0, "Small" )
	end
	if not Dvar.IBEGCHEFE( "ui_disable_tacmap_background_stretch" ) then
		f0_local0( f4_arg0 )
	end
end

function BRMenuMapKey( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 400 * _1080p, 0, 790 * _1080p )
	self.id = "BRMenuMapKey"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local Background = nil
	
	Background = LUI.UIImage.new()
	Background.id = "Background"
	Background:SetRGBFromTable( SWATCHES.WZGlobalSwatches.WZBackground, 0 )
	Background:SetAlpha( 0.5, 0 )
	Background:setImage( RegisterMaterial( "ui_mp_wz_bkg_challenge" ), 0 )
	Background:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 790 )
	self:addElement( Background )
	self.Background = Background
	
	local TitleLegend = nil
	
	TitleLegend = LUI.UIText.new()
	TitleLegend.id = "TitleLegend"
	TitleLegend:SetRGBFromTable( SWATCHES.WZGlobalSwatches.WZHighlight, 0 )
	TitleLegend:SetAlpha( 0, 0 )
	TitleLegend:setText( ToUpperCase( Engine.CBBHFCGDIC( "MP_BR_INGAME/LEGEND" ) ), 0 )
	TitleLegend:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	TitleLegend:SetAlignment( LUI.Alignment.Left )
	TitleLegend:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, _1080p * -41, _1080p * -11 )
	self:addElement( TitleLegend )
	self.TitleLegend = TitleLegend
	
	local DividerLegend = nil
	
	DividerLegend = LUI.UIImage.new()
	DividerLegend.id = "DividerLegend"
	DividerLegend:SetRGBFromTable( SWATCHES.WZGlobalSwatches.WZHighlight, 0 )
	DividerLegend:SetAlpha( 0, 0 )
	DividerLegend:setImage( RegisterMaterial( "widg_gradient_left_to_right" ), 0 )
	DividerLegend:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, _1080p * -11, _1080p * -9 )
	self:addElement( DividerLegend )
	self.DividerLegend = DividerLegend
	
	local VertList = nil
	
	VertList = MenuBuilder.BuildRegisteredType( "BRMenuMapKeyVertList", {
		controllerIndex = f1_local1
	} )
	VertList.id = "VertList"
	VertList:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, _1080p * 10, _1080p * 20 )
	self:addElement( VertList )
	self.VertList = VertList
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	local f1_local7 = nil
	VertList:RegisterAnimationSequence( "Small", {
		{
			value = 4.667263495018081E-62,
			duration = 0,
			property = TWEEN_PROPERTY.Scale
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -26
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -26
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -50
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * -40
		}
	} )
	self._sequences.Small = function ()
		menu:AnimateSequence( "Small" )
	end
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "BRMenuMapKey", BRMenuMapKey )
LockTable( _M )
