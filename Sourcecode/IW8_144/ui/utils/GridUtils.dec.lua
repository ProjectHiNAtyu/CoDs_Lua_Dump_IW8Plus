-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 27-09-2025 22:41
GRID = GRID or {}
local f0_local0 = 0.3
GRID.SkipScrollArrowGridColumn = function ( f9_arg0, f9_arg1 )
	local f9_local0 = f9_arg1.controller
	if f9_local0 ~= f9_arg0._controllerIndex or f9_arg0._isAnimating or f9_arg0.gridConfig.ignoreCondition then
		return 
	end
	local f9_local1 = nil
	if not f9_arg0._isAnimating and not f9_arg0.gridConfig.ignoreCondition then
		local f9_local2 = nil
		if f9_arg1.doNavigateLeft then
			if LUI.IsLastInputMouseNavigation( f9_local0 ) then
				local f9_local3 = f9_arg0.Grid:GetBuiltChildren()
				f9_local2 = (f9_local3[1]._column or 1) - f9_arg0.gridConfig.scrollStepsBack
			else
				f9_local2 = f9_arg0.Grid:GetFocusPositionIndex() - f9_arg0.gridConfig.numGridItemsShown
			end
		elseif LUI.IsLastInputMouseNavigation( f9_local0 ) then
			local f9_local3 = f9_arg0.Grid:GetBuiltChildren()
			f9_local2 = (f9_local3[1]._column or 1) + f9_arg0.gridConfig.numGridItemsShown + f9_arg0.gridConfig.scrollStepsForward
		else
			f9_local2 = f9_arg0.Grid:GetFocusPositionIndex() + f9_arg0.gridConfig.numGridItemsShown
		end
		f9_arg0.Grid:SetFocusedPosition( {
			y = 0,
			x = f9_local2
		}, false )
		if f9_arg0.gridConfig.bitsToSetOnScroll then
			assert( type( f9_arg0.gridConfig.bitsToSetOnScroll ) == "table", "This a table of booleans to set true when a scroll request is made." )
			for f9_local7, f9_local8 in pairs( f9_arg0.gridConfig.bitsToSetOnScroll ) do
				f9_local8 = true
			end
		end
	end
end

GRID.CheckDisableArrowNavigation = function ( f8_arg0, f8_arg1 )
	local f8_local0 = f8_arg0.Grid:GetNumColumns() - 1
	local f8_local1 = f8_arg0.gridConfig.gamepadUI ~= nil
	if f8_arg0.Grid:ShouldDisplayNumbersAndArrows() and not f8_arg0.Grid.disableArrowNavigation then
		if f8_arg1.x == 0 then
			f8_arg0.gridConfig.kbmUI.leftArrow:SetButtonDisabled( true )
			if f8_local1 then
				f8_arg0.gridConfig.gamepadUI.leftPrompt:SetAlpha( f0_local0 )
			end
		elseif f8_arg1.x == f8_local0 then
			f8_arg0.gridConfig.kbmUI.rightArrow:SetButtonDisabled( true )
			if f8_local1 then
				f8_arg0.gridConfig.gamepadUI.rightPrompt:SetAlpha( f0_local0 )
			end
		else
			if f8_arg0.gridConfig.kbmUI.leftArrow:IsDisabled() then
				f8_arg0.gridConfig.kbmUI.leftArrow:SetButtonDisabled( false )
				if f8_local1 then
					f8_arg0.gridConfig.gamepadUI.leftPrompt:SetAlpha( 1 )
				end
			end
			if f8_arg0.gridConfig.kbmUI.rightArrow:IsDisabled() then
				f8_arg0.gridConfig.kbmUI.rightArrow:SetButtonDisabled( false )
				if f8_local1 then
					f8_arg0.gridConfig.gamepadUI.rightPrompt:SetAlpha( 1 )
				end
			end
		end
	end
end

GRID.SetUpArrowScrolling = function ( f1_arg0, f1_arg1, f1_arg2 )
	local f1_local0 = assert
	local f1_local1
	if f1_arg2 then
		f1_local1 = f1_arg2
	else
		f1_local1 = type( f1_arg2 ) == "table"
	end
	f1_local0( f1_local1, "You must specfiy a table of config options to properly configure the scrolling grid" )
	assert( f1_arg2.kbmArrowUI.leftArrow, "Arrow Scrolling grid needs to have a left arrow for PC functionality" )
	assert( f1_arg2.kbmArrowUI.rightArrow, "Arrow Scrolling grid needs to have a right arrow for PC functionality" )
	f1_local0 = f1_arg2.scrollStepsForward and f1_arg2.scrollStepsForward or f1_arg0.Grid:GetMaxVisibleColumns() / 2
	local f1_local2 = f1_arg2.numGridItemsShown and f1_arg2.numGridItemsShown or f1_arg0.Grid:GetMaxVisibleColumns()
	f1_local1 = f1_arg2.scrollStepsBack and f1_arg2.scrollStepsBack or f1_local0
	local f1_local3 = f1_arg2.ignoreCondition
	local f1_local4 = f1_arg2.bitsToSetOnScroll
	f1_arg0.Grid:SetNewTargetOnFocusHandler( f1_arg0, GRID.CheckDisableArrowNavigation )
	if f1_arg2.doProcessItemClick then
		f1_arg0.Grid:SetGridItemClickHandler( {
			scope = f1_arg0,
			processDisabledClick = f1_arg2.doProcessDisabledItemClick
		} )
	end
	f1_arg0.bindButton = LUI.UIBindButton.new()
	f1_arg0.bindButton.id = "BindButton"
	f1_arg0:addElement( f1_arg0.bindButton )
	f1_arg0._controllerIndex = f1_arg1
	f1_arg0.Grid._showNumbersAndArrowsKBM = true
	f1_arg0.gridConfig = {
		onUpdateInputType = f1_arg2.onUpdateInputType,
		numGridItemsShown = f1_local2,
		scrollStepsForward = f1_local0,
		scrollStepsBack = f1_local1,
		ignoreCondition = f1_local3,
		bitsToSetOnScroll = f1_local4,
		kbmUI = f1_arg2.kbmArrowUI,
		gamepadUI = f1_arg2.gamePadArrowUI
	}
	if f1_arg2.bindButtonInput then
		assert( type( f1_arg2.bindButtonInput ) == "table", "bindButtonAltInput needs to be a table of event strings (keys) and handlers (values)." )
		for f1_local8, f1_local9 in pairs( f1_arg2.bindButtonInput ) do
			f1_arg0.bindButton:addEventHandler( f1_local8, function ( f7_arg0, f7_arg1 )
				if f1_arg0 then
					f1_arg0( f1_arg0, f7_arg1 )
				end
			end )
		end
	end
	if f1_arg0.Grid:ShouldDisplayNumbersAndArrows() then
		f1_arg0.gridConfig.kbmUI.leftArrow:addEventHandler( "button_action", function ( f6_arg0, f6_arg1 )
			f6_arg1.doNavigateLeft = true
			GRID.SkipScrollArrowGridColumn( f1_arg0, f6_arg1 )
		end )
		f1_arg0.gridConfig.kbmUI.rightArrow:addEventHandler( "button_action", function ( f5_arg0, f5_arg1 )
			GRID.SkipScrollArrowGridColumn( f1_arg0, f5_arg1 )
		end )
		if not LUI.IsLastInputKeyboardMouse( f1_arg1 ) and f1_arg0.gridConfig.gamepadUI then
			f1_arg0.bindButton:addEventHandler( "button_left_trigger", function ( f4_arg0, f4_arg1 )
				f4_arg1.doNavigateLeft = true
				GRID.SkipScrollArrowGridColumn( f1_arg0, f4_arg1 )
			end )
			f1_arg0.bindButton:addEventHandler( "button_right_trigger", function ( f3_arg0, f3_arg1 )
				GRID.SkipScrollArrowGridColumn( f1_arg0, f3_arg1 )
			end )
		end
	end
	f1_arg0:registerAndCallEventHandler( "update_input_type", function ( f2_arg0, f2_arg1 )
		local f2_local0 = f2_arg0.gridConfig.gamepadUI ~= nil
		local f2_local1
		if LUI.IsLastInputKeyboardMouse( f2_arg1.controllerIndex ) then
			f2_local1 = 1
		else
			f2_local1 = 0
		end
		local f2_local2
		if f2_local1 == 1 then
			f2_local2 = 0
		else
			f2_local2 = 1
		end
		if not f2_arg0._isAnimating then
			if f2_arg0.gridConfig.onUpdateInputType then
				f2_arg0.gridConfig:onUpdateInputType( true )
			end
			f2_arg0.Grid:GainFocus( f2_arg1 )
		end
		if f2_arg0.Grid:ShouldDisplayNumbersAndArrows() then
			for f2_local6, f2_local7 in pairs( f2_arg0.gridConfig.kbmUI ) do
				if f2_local0 then
					f2_local7:SetAlpha( f2_local1 )
				end
			end
			if f2_local0 then
				for f2_local6, f2_local7 in pairs( f2_arg0.gridConfig.gamepadUI ) do
					f2_local7:SetAlpha( f2_local2 )
				end
			end
		end
	end, {
		controllerIndex = f1_arg1
	} )
end

