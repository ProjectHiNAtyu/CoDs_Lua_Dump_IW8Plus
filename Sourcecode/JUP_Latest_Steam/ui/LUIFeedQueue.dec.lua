-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:02
LUI.UIFeedQueue = LUI.Class( LUI.UIElement )
LUI.UIFeedQueue.DefaultFeedExpireTime = 3000
LUI.UIFeedQueue.DefaultGridMaxVisibleRows = 4
LUI.UIFeedQueue.init = function ( f8_arg0, f8_arg1 )
	LUI.UIFeedQueue.super.init( f8_arg0, f8_arg1 )
	f8_arg0._feedQueue = {}
	f8_arg0._feedTimerQueue = {}
	f8_arg0._feedGrid = f8_arg1.feedGrid
	local f8_local0 = f8_arg1.feedExpireTime
	if not f8_local0 then
		f8_local0 = LUI.UIFeedQueue.DefaultFeedExpireTime
	end
	f8_arg0._feedExpireTime = f8_local0
	f8_arg0._controllerIndex = f8_arg1.controllerIndex
	f8_local0 = f8_arg1.maxVisibleRows
	if not f8_local0 then
		f8_local0 = LUI.UIFeedQueue.DefaultGridMaxVisibleRows
	end
	f8_arg0._maxVisibleRows = f8_local0
	f8_arg0._totalPoints = 0
	f8_arg0:registerEventHandler( "feed_queue_expire_check", function ( element, event )
		f8_arg0:RemoveExpiredFeed()
	end )
	f8_arg0:CleanFeedQueue()
end

LUI.UIFeedQueue.OnNewData = function ( f7_arg0, f7_arg1 )
	f7_arg1.insertTime = Engine[0x6991337AE950F99]()
	local f7_local0 = f7_arg1.expireTime
	if not f7_local0 then
		f7_local0 = f7_arg0._feedExpireTime + f7_arg1.insertTime
	end
	f7_arg1.expireTime = f7_local0
	f7_local0 = true
	f7_arg1.count = 1
	for f7_local4, f7_local5 in ipairs( f7_arg0._feedQueue ) do
		if f7_arg1.shouldCombine and f7_local5.id == f7_arg1.id then
			f7_local5.count = f7_local5.count + 1
			f7_local5.insertTime = f7_arg1.insertTime
			f7_local5.expireTime = f7_arg1.expireTime
			f7_local0 = false
			break
		end
	end
	if f7_local0 then
		table.insert( f7_arg0._feedQueue, 1, f7_arg1 )
	end
	f7_arg0:UpdateFeedQueueDatasource()
	if f7_local0 then
		self = f7_arg0._feedGrid:GetElementAtPosition( 0, 0 )
		self:processEvent( {
			name = "feed_inserted"
		} )
	end
	f7_arg0._totalPoints = f7_arg0._totalPoints + f7_arg1.point
	_DataSources[0x5EE2F82995715A1][0x6CFC1DD8B096D35][0xC0E2B51B2AE7DD1]:SetValue( f7_arg0._controllerIndex, f7_arg0._totalPoints )
	self = LUI.UITimer.new( {
		disposable = true,
		interval = f7_arg0._feedExpireTime,
		event = {
			name = "feed_queue_expire_check"
		}
	} )
	self.id = "expireTimer_" .. f7_arg1.insertTime
	f7_arg0:addElement( self )
end

LUI.UIFeedQueue.UpdateFeedQueueDatasource = function ( f6_arg0 )
	local f6_local0 = #f6_arg0._feedQueue
	local f6_local1 = _DataSources[0x5EE2F82995715A1][0x6CFC1DD8B096D35][0xDDCB5A0011F3289]
	for f6_local2 = 1, f6_local0, 1 do
		if f6_arg0._maxVisibleRows < f6_local2 then
			break
		elseif f6_local1[f6_local2][0xA04F4EF1995407E]:GetValue( f6_arg0._controllerIndex ) == "" then
			local f6_local5 = f6_arg0._feedGrid:GetElementAtPosition( 0, f6_local2 - 1 )
			f6_local5:processEvent( {
				name = "feed_reset"
			} )
		end
		f6_local1[f6_local2][0xA04F4EF1995407E]:SetValue( f6_arg0._controllerIndex, f6_arg0._feedQueue[f6_local2].text )
		f6_local1[f6_local2][0x1E5E28E4479A274]:SetValue( f6_arg0._controllerIndex, f6_arg0._feedQueue[f6_local2].count )
		f6_local1[f6_local2][0x3FEAB3544C345B1]:SetValue( f6_arg0._controllerIndex, tostring( f6_arg0._feedQueue[f6_local2].point * f6_arg0._feedQueue[f6_local2].count ) )
		f6_local1[f6_local2][0xC50AE30E8FE307C]:SetValue( f6_arg0._controllerIndex, f6_arg0._feedQueue[f6_local2].glowColor )
		f6_local1[f6_local2][0x43264C39E2DA558]:SetValue( f6_arg0._controllerIndex, f6_arg0._feedQueue[f6_local2].useGlow )
		f6_local1[f6_local2][0xBFF4CC56C2092F0]:SetValue( f6_arg0._controllerIndex, f6_arg0._feedQueue[f6_local2].icon )
		f6_local1[f6_local2][0xF1AE6D557327CFC]:SetValue( f6_arg0._controllerIndex, f6_arg0._feedQueue[f6_local2].useIcon )
	end
	for f6_local2 = f6_local0 + 1, f6_arg0._maxVisibleRows, 1 do
		f6_arg0:ResetFeedQueueDatasourceAtIndex( f6_local2 )
	end
end

LUI.UIFeedQueue.ResetFeedQueueDatasourceAtIndex = function ( f5_arg0, f5_arg1 )
	local f5_local0 = _DataSources[0x5EE2F82995715A1][0x6CFC1DD8B096D35][0xDDCB5A0011F3289]
	f5_local0[f5_arg1][0xA04F4EF1995407E]:SetValue( f5_arg0._controllerIndex, "" )
	f5_local0[f5_arg1][0x1E5E28E4479A274]:SetValue( f5_arg0._controllerIndex, 0 )
	f5_local0[f5_arg1][0x3FEAB3544C345B1]:SetValue( f5_arg0._controllerIndex, "" )
	f5_local0[f5_arg1][0xC50AE30E8FE307C]:SetValue( f5_arg0._controllerIndex, 0 )
	f5_local0[f5_arg1][0x43264C39E2DA558]:SetValue( f5_arg0._controllerIndex, false )
	f5_local0[f5_arg1][0xF1AE6D557327CFC]:SetValue( f5_arg0._controllerIndex, false )
	f5_local0[f5_arg1][0xBFF4CC56C2092F0]:SetValue( f5_arg0._controllerIndex, "white" )
end

LUI.UIFeedQueue.ResetFeedQueueDatasource = function ( f4_arg0 )
	for f4_local0 = 1, f4_arg0._maxVisibleRows, 1 do
		f4_arg0:ResetFeedQueueDatasourceAtIndex( f4_local0 )
	end
end

LUI.UIFeedQueue.CleanFeedQueue = function ( f3_arg0 )
	f3_arg0:ResetFeedQueueDatasource()
	f3_arg0._feedQueue = {}
	f3_arg0._totalPoints = 0
	_DataSources[0x5EE2F82995715A1][0x6CFC1DD8B096D35][0xC0E2B51B2AE7DD1]:SetValue( f3_arg0._controllerIndex, 0 )
end

LUI.UIFeedQueue.RemoveExpiredFeed = function ( f2_arg0 )
	local f2_local0 = Engine[0x6991337AE950F99]()
	for f2_local1 = #f2_arg0._feedQueue, 1, -1 do
		if f2_arg0._feedQueue[f2_local1].expireTime <= f2_local0 then
			if f2_local1 <= f2_arg0._maxVisibleRows then
				local f2_local4 = f2_arg0._feedGrid:GetElementAtPosition( 0, f2_local1 - 1 )
				f2_local4:processEvent( {
					name = "feed_expired"
				} )
			end
			table.remove( f2_arg0._feedQueue, f2_local1 )
		end
	end
	f2_arg0:UpdateFeedQueueDatasource()
end

LUI.UIFeedQueue.GetTotalPoints = function ( f1_arg0 )
	return f1_arg0._totalPoints
end

