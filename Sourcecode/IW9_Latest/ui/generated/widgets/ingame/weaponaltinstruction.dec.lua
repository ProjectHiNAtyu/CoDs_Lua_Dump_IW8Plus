-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
module( ..., package.seeall )
require( "ui.generated.widgets.ingame.altfiretypeicons" )
local f0_local0 = function ( f28_arg0 )
	f28_arg0._isAltUnderBarrel = WEAPON.IsAltUnderBarrel( f28_arg0._controllerIndex, nil )
end

local f0_local1 = function ( f27_arg0 )
	if CONDITIONS.IsCoreMultiplayer() and CONDITIONS.InGame() and CONDITIONS.IsSpectating( f27_arg0._controllerIndex ) then
		ACTIONS.AnimateSequence( f27_arg0, "ShowAltFireSpectating" )
	else
		local f27_local0 = ACTIONS.AnimateSequence
		local f27_local1 = f27_arg0
		local f27_local2
		if f27_arg0._isAltUnderBarrel then
			f27_local2 = "AltIsUnderbarrel"
		else
			f27_local2 = "AltFireType"
		end
		f27_local0( f27_local1, f27_local2 )
		ACTIONS.AnimateSequence( f27_arg0, "ShowAltFire" )
	end
end

local f0_local2 = function ( f26_arg0 )
	local f26_local0 = "PromptPosition0Digit"
	if f26_arg0._isAltUnderBarrel then
		local f26_local1 = DataSources.alwaysLoaded.player.currentWeapon.totalAltAmmoCount:GetValue( f26_arg0._controllerIndex )
		if 99 < f26_local1 then
			f26_local0 = "PromptPosition3Digit"
		elseif 9 < f26_local1 then
			f26_local0 = "PromptPosition2Digit"
		else
			f26_local0 = "PromptPosition1Digit"
		end
	end
	if f26_arg0._promptAnimation == f26_local0 then
		return 
	else
		f26_arg0._promptAnimation = f26_local0
		ACTIONS.AnimateSequence( f26_arg0, f26_local0 )
	end
end

local f0_local3 = function ( f25_arg0 )
	assert( f25_arg0.AltFireTypeIcons )
	assert( f25_arg0.AltFireTypePrompt )
	if WEAPON.ShouldShowAltFireTypes( f25_arg0._controllerIndex ) then
		f25_arg0.AltFireTypePrompt:setText( StripColorMarkers( Engine[0x7D3158A9539A355]( "[{+actionslot 3;toggleweapalt}]" ) ) )
		f25_arg0.AltFireTypeIcons:UpdateIcons()
		f0_local0( f25_arg0 )
		f0_local0( f25_arg0 )
		f0_local0( f25_arg0 )
	else
		ACTIONS.AnimateSequence( f25_arg0, "HideAll" )
	end
end

local f0_local4 = function ( f24_arg0 )
	if not f24_arg0._isAltUnderBarrel then
		return 
	else
		f0_local0( f24_arg0 )
	end
end

local f0_local5 = function ( f13_arg0, f13_arg1, f13_arg2 )
	f13_arg0.SetAltFirePromptToContent = SetAltFirePromptToContent
	f13_arg0.UpdateAltInstructions = f0_local0
	f13_arg0.SetAltModeToggleText = f0_local0
	f13_arg0._controllerIndex = f13_arg1
	local f13_local0 = function ()
		local f23_local0 = CONDITIONS.InGame()
		if f23_local0 then
			f23_local0 = CONDITIONS.IsSpectating( f13_arg0 )
		end
		if f23_local0 then
			ACTIONS.AnimateSequence( f13_arg0, "HideAll" )
		elseif WEAPON.ShouldShowAltFireTypes( f13_arg0._controllerIndex ) then
			f13_arg0:UpdateAltInstructions()
		end
	end
	
	if CONDITIONS.IsSplitscreen( f13_arg0 ) then
		
	else
		
	end
	f13_arg0:registerAndCallEventHandler( "key_bindings_update", function ( f22_arg0, f22_arg1 )
		f13_arg0( f22_arg0 )
	end )
	f13_arg0:registerOmnvarHandler( "ui_using_killstreak_remote", function ( f21_arg0, f21_arg1 )
		if f21_arg1.value == false then
			f13_arg0( f21_arg0 )
		end
	end )
	f13_arg0:registerOmnvarHandler( "ui_veh_vehicle", function ( f20_arg0, f20_arg1 )
		if f20_arg1.value == -1 then
			f13_arg0( f20_arg0 )
		end
	end )
	f13_arg0:SubscribeToModel( DataSources.alwaysLoaded.player.currentWeapon.hasAltMode:GetModel( f13_arg1 ), function ( f19_arg0 )
		f13_arg0( f13_arg0 )
	end )
	f13_arg0:SubscribeToModel( DataSources.alwaysLoaded.player.currentWeapon.inAltMode:GetModel( f13_arg1 ), function ( f18_arg0 )
		f13_arg0( f13_arg0 )
	end )
	f13_arg0:SubscribeToModel( DataSources.alwaysLoaded.player.currentWeapon.stockAmmoCount:GetModel( f13_arg1 ), function ( f17_arg0 )
		f13_arg0( f13_arg0 )
	end )
	f13_arg0:SubscribeToModel( DataSources.alwaysLoaded.player.currentWeapon.totalAltAmmoCount:GetModel( f13_arg1 ), function ( f16_arg0 )
		f13_arg0( f13_arg0 )
	end )
	f13_arg0:SubscribeToModel( DataSources.alwaysLoaded.player.currentWeapon.name:GetModel( f13_arg1 ), function ( f15_arg0 )
		f13_arg0( f13_arg0 )
	end )
	f13_arg0:SubscribeToModel( DataSources.alwaysLoaded.player.currentWeapon.inQuickDrawMode:GetModel( f13_arg1 ), function ( f14_arg0 )
		f13_arg0( f13_arg0 )
	end )
	if CONDITIONS.InGame() and Engine[0x9258F49F515F97B]() then
		f13_arg0:SubscribeToModel( DataSources.inGame.MP.spectating.isSpectating:GetModel( f13_arg1 ), f13_local0 )
	end
	if not CONDITIONS.ShouldHideButtonPrompts( f13_arg0 ) then
		f13_arg0:SubscribeToModel( DataSources.alwaysLoaded.player.currentWeapon.displayName:GetModel( f13_arg1 ), f13_local0 )
		if CONDITIONS.InGame() then
			f13_arg0:SubscribeToModel( DataSources.alwaysLoaded.player.currentWeapon.altModeDisplayName:GetModel( f13_arg1 ), f13_local0 )
		end
	end
end

States = {
	[0xAD14C6E7156B923] = function ( f2_arg0, f2_arg1 )
		local f2_local0 = function ( f12_arg0, f12_arg1 )
			
		end
		
		f2_arg0.AltFireTypeIcons:RegisterAnimationSequence( "ShowAltFire", {
			{
				value = 1,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		f2_arg0.AltFireTypePrompt:RegisterAnimationSequence( "ShowAltFire", {
			{
				value = 1,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		local f2_local1 = function ( f11_arg0, f11_arg1 )
			f11_arg0.AltFireTypeIcons:AnimateSequence( "ShowAltFire" )
			f11_arg0.AltFireTypePrompt:AnimateSequence( "ShowAltFire" )
		end
		
		f2_arg0.AltFireTypePrompt:RegisterAnimationSequence( "AltIsUnderbarrel", {
			{
				value = 1,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		local f2_local2 = function ( f10_arg0, f10_arg1 )
			f10_arg0.AltFireTypePrompt:AnimateSequence( "AltIsUnderbarrel" )
		end
		
		f2_arg0.AltFireTypeIcons:RegisterAnimationSequence( "HideAll", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		f2_arg0.AltFireTypePrompt:RegisterAnimationSequence( "HideAll", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		local f2_local3 = function ( f9_arg0, f9_arg1 )
			f9_arg0.AltFireTypeIcons:AnimateSequence( "HideAll" )
			f9_arg0.AltFireTypePrompt:AnimateSequence( "HideAll" )
		end
		
		f2_arg0.AltFireTypePrompt:RegisterAnimationSequence( "AltFireType", {
			{
				value = 1,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		local f2_local4 = function ( f8_arg0, f8_arg1 )
			f8_arg0.AltFireTypePrompt:AnimateSequence( "AltFireType" )
		end
		
		f2_arg0.AltFireTypePrompt:RegisterAnimationSequence( "PromptPosition1Digit", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Left,
				value = _1080p * -12
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Right,
				value = _1080p * 28
			}
		} )
		local f2_local5 = function ( f7_arg0, f7_arg1 )
			f7_arg0.AltFireTypePrompt:AnimateSequence( "PromptPosition1Digit" )
		end
		
		f2_arg0.AltFireTypePrompt:RegisterAnimationSequence( "PromptPosition2Digit", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Left,
				value = _1080p * -20
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Right,
				value = _1080p * 20
			}
		} )
		local f2_local6 = function ( f6_arg0, f6_arg1 )
			f6_arg0.AltFireTypePrompt:AnimateSequence( "PromptPosition2Digit" )
		end
		
		f2_arg0.AltFireTypePrompt:RegisterAnimationSequence( "PromptPosition3Digit", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Left,
				value = _1080p * -30
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Right,
				value = _1080p * 10
			}
		} )
		local f2_local7 = function ( f5_arg0, f5_arg1 )
			f5_arg0.AltFireTypePrompt:AnimateSequence( "PromptPosition3Digit" )
		end
		
		f2_arg0.AltFireTypePrompt:RegisterAnimationSequence( "PromptPosition0Digit", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Left,
				value = _1080p * 14
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Right,
				value = _1080p * 54
			}
		} )
		local f2_local8 = function ( f4_arg0, f4_arg1 )
			f4_arg0.AltFireTypePrompt:AnimateSequence( "PromptPosition0Digit" )
		end
		
		f2_arg0.AltFireTypeIcons:RegisterAnimationSequence( "ShowAltFireSpectating", {
			{
				value = 1,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		f2_arg0.AltFireTypePrompt:RegisterAnimationSequence( "ShowAltFireSpectating", {
			{
				value = 0,
				duration = 0,
				property = TWEEN_PROPERTY.Alpha
			}
		} )
		f2_arg0._sequences = {
			DefaultSequence = f2_local0,
			ShowAltFire = f2_local1,
			AltIsUnderbarrel = f2_local2,
			HideAll = f2_local3,
			AltFireType = f2_local4,
			PromptPosition1Digit = f2_local5,
			PromptPosition2Digit = f2_local6,
			PromptPosition3Digit = f2_local7,
			PromptPosition0Digit = f2_local8,
			ShowAltFireSpectating = function ( f3_arg0, f3_arg1 )
				f3_arg0.AltFireTypeIcons:AnimateSequence( "ShowAltFireSpectating" )
				f3_arg0.AltFireTypePrompt:AnimateSequence( "ShowAltFireSpectating" )
			end
		}
		f2_arg0._sequenceLengths = {
			ShowAltFireSpectating = 0,
			PromptPosition2Digit = 0,
			AltFireType = 0,
			AltIsUnderbarrel = 0,
			PromptPosition3Digit = 0,
			DefaultSequence = 0,
			PromptPosition0Digit = 0,
			PromptPosition1Digit = 0,
			ShowAltFire = 0,
			HideAll = 0
		}
	end
}
function WeaponAltInstruction( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 200 * _1080p, 0, 32 * _1080p )
	self.id = "WeaponAltInstruction"
	self.__states = States
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local AltFireTypeIcons = nil
	
	AltFireTypeIcons = MenuBuilder.BuildRegisteredType( "AltFireTypeIcons", {
		controllerIndex = f1_local1
	} )
	AltFireTypeIcons.id = "AltFireTypeIcons"
	AltFireTypeIcons:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 106, _1080p * 200, 0, _1080p * 32 )
	self:addElement( AltFireTypeIcons )
	self.AltFireTypeIcons = AltFireTypeIcons
	
	local AltFireTypePrompt = nil
	
	AltFireTypePrompt = LUI.UIStyledText.new()
	AltFireTypePrompt.id = "AltFireTypePrompt"
	AltFireTypePrompt:setText( "[{+activate}]", 0 )
	AltFireTypePrompt:SetFont( FONTS.GetFont( FONTS.PrimaryRegular.File ) )
	AltFireTypePrompt:SetFontSize( 18 * _PT )
	AltFireTypePrompt:SetMinFontSize( 18 * _PT )
	AltFireTypePrompt:SetWordWrap( false )
	AltFireTypePrompt:SetAlignment( LUI.Alignment.Center )
	AltFireTypePrompt:SetVerticalAlignment( LUI.Alignment.Middle )
	AltFireTypePrompt:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -20, _1080p * 20, _1080p * -8, _1080p * 10 )
	self:addElement( AltFireTypePrompt )
	self.AltFireTypePrompt = AltFireTypePrompt
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "WeaponAltInstruction", WeaponAltInstruction )
LockTable( _M )
