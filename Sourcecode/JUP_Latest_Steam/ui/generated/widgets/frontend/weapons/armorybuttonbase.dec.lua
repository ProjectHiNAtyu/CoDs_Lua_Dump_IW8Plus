-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
module( ..., package.seeall )
local f0_local0 = function ( f24_arg0, f24_arg1, f24_arg2 )
	f24_arg0.WeaponLevelProgress:Setup( f24_arg1, f24_arg2.weapon )
end

local f0_local1 = function ( f23_arg0, f23_arg1, f23_arg2, f23_arg3 )
	local f23_local0 = WEAPON.GetBWImage( f23_arg2 )
	if f23_arg3 then
		local f23_local1 = WEAPON.GetVariantOverridenIcon( f23_arg3.weapon, f23_arg3.variantID )
		if f23_local1 and 0 < #f23_local1 then
			f23_local0 = f23_local1
		end
	end
	f23_arg0.WeaponIcon:setImage( RegisterMaterial( f23_local0 ) )
	if Engine[0x5B4AB50CF5D1DDD]( RegisterMaterial( f23_local0 ) ) == 1 then
		ACTIONS.AnimateSequence( f23_arg0, "Ratio1x1" )
	else
		ACTIONS.AnimateSequence( f23_arg0, "Ratio2x1" )
	end
end

MenuBuilder.registerType( "CustomWeaponModOptions", function ( f21_arg0, f21_arg1 )
	if not GUNSMITH.AllowSaveCustomWeapon( f21_arg1.forShowcase ) then
		
	else
		
	end
	local f21_local0 = MenuBuilder.BuildRegisteredType( "SocialPopupGenericList", f21_arg1 )
	f21_local0.id = "CustomWeaponModOptions"
	f21_local0.MenuTitle:DisableGlobalWidgets()
	local self = LUI.UIVerticalList.new()
	self.id = "ButtonContainer"
	local f21_local2 = f21_arg1.buttonData
	local f21_local3 = 512
	local f21_local4 = 44
	local f21_local5 = 150
	local f21_local6 = 206
	local f21_local7 = 64
	local f21_local8 = 10
	local f21_local9 = 0
	self:SetAnchorsAndPosition( 0, 1, 0, 1, f21_local4, f21_local4 + f21_local3, f21_local5, f21_local5 + 100 )
	self:SetSpacing( f21_local8 )
	local Description = nil
	Description = MenuBuilder.BuildRegisteredType( "ButtonDescriptionText", {
		controllerIndex = f21_arg1.controllerIndex
	} )
	Description.id = "Description"
	Description:SetAnchorsAndPosition( 0, 1, 0, 1, 0, f21_local3, 0, f21_local7 )
	f21_local0.MenuDescription:SetLeft( f21_local4 )
	f21_local0.MenuDescription:setText( f21_arg1.weaponName )
	f21_local0.MenuDescription:SetFont( FONTS.GetFont( FONTS.BattleNetBold.File ) )
	f21_local0.MenuDescription:SetFontSize( 24 * _PT )
	f21_local0.MenuDescription:SetMinFontSize( 18 * _PT )
	for f21_local16, f21_local17 in ipairs( f21_local2 ) do
		local f21_local14 = true
		if f21_local17.visible then
			f21_local14 = f21_local17.visible( self, f21_arg1.controllerIndex, {
				f21_local9
			} )
		end
		if f21_local14 then
			local f21_local15 = MenuBuilder.BuildRegisteredType( "GenericOptionButton", {
				controllerIndex = f21_arg1.controllerIndex
			} )
			f21_local15.id = f21_local17.id
			f21_local15:SetRight( f21_local3 )
			f21_local15:SetText( f21_local17.name )
			f21_local15.buttonDescription = f21_local17.buttonDescription
			f21_local15:setHeight( 56 )
			self:addElement( f21_local15 )
			self[f21_local15.id] = f21_local15
			f21_local15:registerEventHandler( "button_action", f21_local17.action )
			f21_local15:addEventHandler( "gain_focus", function ( f22_arg0, f22_arg1 )
				f21_arg0:processEvent( {
					name = "update_button_description",
					onlyText = true,
					text = f22_arg0.buttonDescription
				} )
			end )
		end
		f21_local9 = f21_local9 + 1
	end
	self:addElement( Description )
	self.Description = Description
	
	if LUI.IsLastInputGamepad( f21_arg1.controllerIndex ) then
		f21_local11 = self[f21_local2[1].id]
		if f21_local11 then
			f21_local11:GainFocus( {
				controller = f21_arg1.controllerIndex,
				focusType = FocusType.MenuFlow
			} )
		end
	end
	f21_local0:addElement( self )
	f21_local11 = MenuBuilder.BuildRegisteredType( "FlyInPopup", {
		flyInRight = true,
		controllerIndex = f21_arg1.controllerIndex,
		widget = f21_local0,
		buttonData = f21_local2
	} )
	f21_local11.id = "CustomModOptionsPopup"
	return f21_local11
end )
local f0_local2 = function ( f16_arg0, f16_arg1, f16_arg2, f16_arg3 )
	if not GUNSMITH.AllowSaveCustomWeapon( f16_arg3 ) then
		
	else
		
	end
	local f16_local0 = WEAPON.GetName( f16_arg2.weapon )
	local f16_local1 = f16_arg0:getParent()
	local f16_local2 = f16_local1:getParent()
	local f16_local3 = f16_local2:getParent()
	f16_local3 = f16_local3:getParent()
	local f16_local4 = {}
	table.insert( f16_local4, {
		label = "RENAME",
		action = function ( f19_arg0 )
			ACTIONS.OpenGenericEditBoxPopup( element, f16_arg0, {
				noDefaultTextOnCreate = true,
				allowEmpty = false,
				filterProfanity = true,
				verifyString = true,
				title = ToUpperCase( GUNSMITH.GetCustomModName( f16_arg0.blueprintName ) ),
				maxInputStringLength = LOADOUT.MAX_LOADOUT_NAME_CHARACTERS,
				confirmButtonText = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xCB0422B6463D4C7 ) ),
				textEditCompleteFunc = function ( f20_arg0, f20_arg1 )
					if not f20_arg1.cancelled then
						local f20_local0, f20_local1 = TEXT_EDIT.ValidateString( f19_arg0, f20_arg1.text )
						if f20_local0 and f19_arg0._weaponPlayerData then
							local f20_local2 = ToUpperCase( f20_arg1.text )
							local f20_local3 = GUNSMITH.GetCustomModSlot( f19_arg0.blueprintName )
							f19_arg0.blueprintName = GUNSMITH.GenerateModName( f20_local2, f20_local3 )
							f19_arg0.header = f20_local2
							if not GUNSMITH.SaveAsCustomMod( f19_arg0, f19_arg0, f20_local3, f19_arg0._weaponPlayerData ) then
								return 
							end
							local f20_local4 = f19_arg0.InfoPanel.ItemName
							if not f20_local4 then
								f20_local4 = f19_arg0.InfoPanel.UnlockCriteriaWidget.ItemName
							end
							f20_local4:setText( ToUpperCase( f20_local2 ) )
							local f20_local5 = f19_arg0._activeElement
							if not f20_local5 then
								f20_local5 = f19_arg0._childInFocus
							end
							f20_local5.ButtonLarge.Header:setText( ToUpperCase( f20_local2 ) )
							local f20_local6 = LUI.FlowManager.GetMenuByName( "CustomWeaponModOptions" )
							if f20_local6 then
								f20_local6 = LUI.FlowManager.GetMenuByName( "CustomWeaponModOptions" )
								f20_local6 = f20_local6.menu
							end
							if f20_local6 then
								f20_local6:processEvent( {
									name = "update_menu_description",
									data = ToUpperCase( f20_local2 )
								} )
							end
						else
							LUI.FlowManager.RequestErrorPopup( f19_arg0, Engine[0xED84C33EC5F01EA]( 0x1CCA5C59ECE1EA6 ), f20_local1 )
						end
					end
				end
			} )
		end,
		id = "RenameWeaponButton",
		name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xCB0422B6463D4C7 ) ),
		buttonDescription = Engine[0xED84C33EC5F01EA]( 0xCCDDCFF78174F78 )
	} )
	local f16_local5 = {
		label = "DUPLICATE WEAPON"
	}
	local f16_local6 = false
	f16_local5.action = function ()
		local f18_local0 = GUNSMITH.maxMods
		local f18_local1 = GUNSMITH.CountAvailableCustomModSlots( f16_arg0, f16_arg0.weapon, f16_arg0.lootID )
		local f18_local2 = GUNSMITH.AreAnyModSlotsUnlocked( f16_arg0, f16_arg0.lootID )
		local f18_local3 = GUNSMITH.GetCustomModName( f16_arg0.blueprintName )
		if 0 < f18_local1 then
			local f18_local4 = GUNSMITH.GetFirstFreeCustomModSlot( f16_arg0, f16_arg0.weapon, f16_arg0.lootID )
			f16_arg0.blueprintName = GUNSMITH.GenerateModName( f18_local3, f18_local4 )
			if not GUNSMITH.SaveAsCustomMod( f16_arg0, f16_arg0, f18_local4, f16_arg0._weaponPlayerData ) then
				return 
			end
			f16_arg0 = true
		else
			local f18_local4 = f18_local0 - f18_local1
			local f18_local5 = ToUpperCase( WEAPON.GetLootWeaponName( f16_arg0.weapon, f16_arg0.lootID ) )
			LUI.FlowManager.RequestErrorPopup( f16_arg0, ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xDBEB0C43ECC2224, f18_local4, f18_local0 ) ), ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x9908B333647D894, WEAPON.GetName( f16_arg0.weapon ) ) ) )
		end
		if f16_arg0 then
			local f18_local4 = LUI.FlowManager.GetMenuByName( "CustomWeaponModOptions" )
			f18_local4.menu:exitAnimation()
			ACTIONS.LeaveMenu( f16_arg0 )
		end
	end
	
	f16_local5.id = "DuplicateWeaponButton"
	f16_local5.name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x523F28C0D7F27A8 ) )
	f16_local5.buttonDescription = Engine[0xED84C33EC5F01EA]( 0xD25BD7A75601E53 )
	table.insert( f16_local4, f16_local5 )
	table.insert( f16_local4, {
		label = "DELETE WEAPON",
		action = function ( f17_arg0 )
			GUNSMITH.DeleteCustomMod( f16_arg0, f16_arg0.weapon, GUNSMITH.GetCustomModSlot( f16_arg0.blueprintName ) )
			local f17_local0 = LUI.FlowManager.GetMenuByName( "CustomWeaponModOptions" )
			f17_local0.menu:exitAnimation()
			ACTIONS.LeaveMenu( f16_arg0 )
		end,
		id = "DeleteWeaponButton",
		name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xC190CD2327EF604 ) ),
		buttonDescription = Engine[0xED84C33EC5F01EA]( 0x21BA106535ADBB7 )
	} )
	LUI.FlowManager.RequestPopupMenu( nil, "CustomWeaponModOptions", true, f16_arg1, false, {
		menuDescription = nil,
		menuTitleRef = 0xCE67E962E90BBCC,
		controllerIndex = f16_arg1,
		buttonData = f16_local4,
		forShowcase = f16_arg3,
		weaponName = ToUpperCase( GUNSMITH.GetCustomModName( f16_arg2.blueprintName ) )
	} )
end

local f0_local3 = function ( f9_arg0, f9_arg1, f9_arg2, f9_arg3, f9_arg4, f9_arg5, f9_arg6, f9_arg7 )
	if not f9_arg7 then
		f9_arg7 = {}
	end
	local f9_local0 = f9_arg0._scoped
	if not f9_local0 then
		f9_local0 = LUI.FlowManager.GetScopedData( f9_arg0 )
	end
	f9_arg0._scoped = f9_local0
	f9_arg0._menu = f9_arg2
	f9_local0 = WEAPON.IsContextualStoreEnabled()
	if f9_local0 then
		f9_local0 = f9_arg0._scoped.isStoreTab
	end
	local f9_local1 = f9_arg7.isCategoryButton
	local f9_local2 = Challenge.IsWinChallengeItem( f9_arg1, f9_arg3.lootID )
	f9_arg0._weaponData = f9_arg3
	local f9_local3
	if f9_arg3 then
		f9_local3 = f9_arg3
	else
		f9_local3 = f9_arg3.lootID
	end
	f9_arg0._weaponLootID = f9_local3
	if f9_arg6 then
		f9_arg0._weaponPlayerData = f9_arg6
	end
	f9_local3 = CONDITIONS.IsMobileOrMobileSim()
	if f9_arg3.isCustom or not f9_arg3.isBase then
		local f9_local4 = 0
		if f9_arg3.attachments then
			local f9_local5 = f9_arg0._weaponData.weapon
			local f9_local6 = WEAPON.GenerateWeaponTableFromRef( f9_local5 )
			f9_local6.attachments = f9_arg3.attachments
			local f9_local7 = WEAPON.GetWeaponModelName( f9_local5, f9_local6, {
				includeAttachments = true
			} )
			for f9_local8 = 1, #f9_arg3.attachments, 1 do
				if f9_arg0._scoped and not ATTACHMENT.IsDefaultAttachment( f9_local7, f9_arg3.attachments[f9_local8].ref ) then
					f9_local4 = f9_local4 + 1
				end
			end
		end
		f9_arg0.AttachmentEquipPips:UpdatePipsWithAMP( GUNSMITH.GetEquipCounts( f9_arg3.weapon, f9_arg3, f9_arg3.attachments, {
			isDefault = f9_arg3.isDefaultWeapon
		} ), WEAPON.CanDisplayWeaponAttachments( f9_arg3 ) )
		if f9_local3 then
			if f9_local1 then
				ACTIONS.AnimateSequence( f9_arg0, "IsBase" )
			elseif f9_arg3.isCustom then
				ACTIONS.AnimateSequence( f9_arg0, "IsCustomMod" )
			end
		else
			local f9_local7 = ACTIONS.AnimateSequence
			local f9_local9 = f9_arg0
			local f9_local10
			if f9_arg3.isCustom then
				f9_local10 = "IsCustomMod"
			else
				f9_local10 = "IsBlueprint"
			end
			f9_local7( f9_local9, f9_local10 )
		end
		if not f9_local3 then
			f9_arg0:AddNameBacker()
		end
	else
		f9_arg3.header = WEAPON.GetName( f9_arg3.weapon )
		if f9_arg3.weaponLevel then
			f0_local0( f9_arg0, f9_arg1, f9_arg3 )
		end
		f9_arg0.AttachmentEquipPips:UpdatePips( 0 )
		ACTIONS.AnimateSequence( f9_arg0, "IsBase" )
		if not f9_local3 then
			f9_arg0:HideNameBacker()
		end
	end
	f9_arg0.WeaponIcon:SetAlpha( 1 )
	if f9_arg0.RenderWeaponIcon then
		f9_arg0.RenderWeaponIcon:SetAlpha( 0 )
	end
	f0_local0( f9_arg0, 0, f9_arg3.weapon, f9_arg3 )
	if CONDITIONS.IsRenderWeaponIconEnabled() then
		local f9_local4 = f9_arg4 % (Enum[0xFA40E3832613058][0xD484B78F533F3C1] - 1)
		local f9_local5 = WEAPON.GetWeaponModelName( f9_arg3.weapon, f9_arg3, {
			includeStickers = false,
			includeCamos = false,
			includeAttachments = true
		} )
		local f9_local6 = CONDITIONS.IsLoadoutWeaponAttachmentHighlightEnabled() and WEAPON.GetAttachmentHighlights( f9_arg1, f9_local5 ) or {}
		if f9_local6 and 0 < #f9_local6 then
			WEAPON.UpdateWeaponRenderIcon( f9_arg0, f9_arg1, {
				streamInWeaponModel = true,
				renderIconWidget = f9_arg0.RenderWeaponIcon,
				baseIconWidget = f9_arg0.WeaponIcon,
				slot = f9_local4,
				weaponModelName = f9_local5,
				attachmentHighlights = f9_local6
			} )
		end
	end
	local f9_local4, f9_local5 = nil
	if not f9_local3 then
		if f9_arg0._weaponData.isBlueprintIntact ~= false then
			f9_local5 = WEAPON.GetWeaponBlueprintTacticalBuildDataByLootID( f9_arg1, f9_arg0._weaponData.lootID )
		else
			f9_local5 = WEAPON.GetWeaponBlueprintTacticalBuildData( f9_arg0._weaponData )
		end
		if not f9_arg3.isBase then
			f9_local4 = WEAPON.BLUEPRINT_COLOR
		end
	end
	if f9_arg0.WeaponEffectIcons then
		local f9_local6 = nil
		if f9_arg0._weaponData.isBlueprintIntact ~= false then
			f9_local6 = f9_arg0._weaponData.lootID
		end
		f9_arg0:SetupWeaponEffectIndicators( f9_local6, f9_local5 )
	end
	if LOADOUT.IsActiveArmoryEnabled( f9_arg1 ) then
		local f9_local7 = WEAPON.IsRecommended( f9_arg3.weapon, SEASON.GetCurrentSeason() )
		if f9_local7 then
			ACTIONS.AnimateSequence( f9_arg0, "FeaturedWeapon" )
			ACTIONS.AnimateSequence( f9_arg0.ActiveArmoryOverlay, "Glow" )
			ACTIONS.AnimateSequence( f9_arg0.ActiveArmoryTag, "Glow" )
		else
			ACTIONS.AnimateSequence( f9_arg0, "OffFeaturedWeapon" )
			ACTIONS.AnimateSequence( f9_arg0.ActiveArmoryOverlay, "NoGlow" )
			ACTIONS.AnimateSequence( f9_arg0.ActiveArmoryTag, "NoGlow" )
		end
		f9_arg0._isArmoryActiveWeapon = f9_arg3.isActiveArmory and f9_arg3.isActiveArmory or f9_local7
		f9_arg0._isLeavingActiveArmory = WEAPON.IsLeavingActiveArmory( f9_arg3.weapon )
		f9_arg0:addEventHandler( "button_over", function ( f15_arg0, f15_arg1 )
			f15_arg0:dispatchEventToParent( {
				name = "update_active_armory_promo_visibility",
				controller = f9_arg0,
				isActiveArmory = f15_arg0._isArmoryActiveWeapon
			} )
		end )
		f9_arg0:addEventHandler( "button_over_disable", function ( f14_arg0, f14_arg1 )
			f14_arg0:dispatchEventToParent( {
				name = "update_active_armory_promo_visibility",
				controller = f9_arg0,
				isActiveArmory = f14_arg0._isArmoryActiveWeapon
			} )
		end )
	end
	local f9_local6 = {
		removeTextBacker = true,
		keepSubHeader = true,
		imageSize = "Empty",
		localizeHeader = false,
		localizeSubHeader = false,
		buttonData = f9_arg3,
		colorOverrides = {
			highlightEnable = f9_local4,
			highlightEnableEquipped = SWATCHES[0x5BEA88F32B92B6E][0x35F3A3E30C35450],
			defaultGradientColor = f9_local4
		},
		mobileHideFooter = f9_local1,
		showCategoryStack = f9_local1
	}
	if not f9_arg0._isArmoryActiveWeapon and f9_local2 then
		f9_local6.isWinChallengeItem = f9_local2
	else
		f9_local6.isWinChallengeItem = false
	end
	if f9_local2 then
		if not Challenge.IsWinChallengeComplete( f9_arg1, f9_local2.challengeID ) then
			local f9_local7, f9_local8 = Challenge.WinChallengeListFind( f9_arg1, f9_local2.challengeID )
			f9_arg0.WinChallengeItemTag:SetVisible( true )
			f9_arg0.WinChallengeItemTag:SetWinChallengeLabelType( f9_local8 )
			f9_arg0:AddGamepadEventCallback( "button_alt1", function ( f13_arg0, f13_arg1 )
				if not CONDITIONS.IsPerpetualInventoryEnabled() then
					return 
				end
				local f13_local0 = UNLOCK_CRITERIA.GetUnlockActionInfo( f9_arg0, f9_arg0.lootID )
				if f13_local0 ~= nil then
					f13_local0.UnlockAction( f9_arg0, f13_arg0, f9_arg0.lootID )
				end
				return true
			end, {
				requireFocus = true
			} )
		end
	else
		f9_arg0.WinChallengeItemTag:SetVisible( false )
	end
	local f9_local7 = GAMEMODE_SCRIPTBUNDLE_UTILS.IsBuyAndSellFlowEnabled()
	if f9_arg3.isCustom and GUNSMITH.AllowSaveCustomWeapon( f9_arg2._forShowcase ) and not CONDITIONS.InGame() then
		f9_local6.doubleAction = {
			text = 0x371D314917B7829,
			prompt = 0x21E44BE45534168,
			callback = function ()
				f9_arg0( f9_arg0, f9_arg0, f9_arg0, f9_arg0._forShowcase )
			end
		}
	else
		f9_local6.doubleAction = nil
	end
	f9_arg0.ButtonLarge:SetupButton( f9_local6 )
	local f9_local8
	if f9_arg3.isUnlocked then
		f9_local8 = f9_arg3.isAlreadyEquipped
	else
		f9_local8 = true
	end
	f9_arg0:SetButtonDisabled( f9_local8 )
	f9_arg0.ButtonLarge:SetDisabled( f9_local8 )
	local f9_local9 = Engine[0xED84C33EC5F01EA]( 0xCA07A93FADF9E95 )
	if CONDITIONS.IsPerpetualInventoryEnabled() and f9_local8 then
		local f9_local10 = UNLOCK_CRITERIA.GetUnlockActionInfo( f9_arg1, f9_arg3.lootID )
		if f9_local10 ~= nil and not f9_local2 then
			f9_arg0:replaceEventHandler( "button_action_disable", function ( f11_arg0, f11_arg1 )
				f9_arg0:UpdateLastFocusedButton()
				f9_arg0:UnlockAction( f11_arg0, f11_arg0._weaponLootID, {
					disableDeactivateAction = true
				} )
				return true
			end )
			MenuUtils.SetupWinChallengeButtonEvents( f9_arg1, f9_arg0[0x73308846C4818C0], f9_arg3.lootID, false, true )
			f9_arg0[0x73308846C4818C0][0x4AA903119F4FA7B]:KeepPrimaryPromptActiveIfLocked()
			f9_arg0[0x73308846C4818C0][0x4AA903119F4FA7B]:SetIsPromptShownForDisabled( true )
			f9_arg0[0x73308846C4818C0]:SetDisabledText( f9_local10.GetUnlockActionText( f9_arg1, {
				disableDeactivateAction = true
			} ) )
		elseif f9_arg3.isAlreadyEquipped and not f9_local0 then
			f9_arg0[0x73308846C4818C0]:SetDisabledText( Engine[0xED84C33EC5F01EA]( 0x95CEC0525612DAD, f9_arg3.weaponSlot and 0xEC8F813D58DEE57 or 0xCB74A303611CCB3 ) )
		else
			f9_local9 = Engine[0xED84C33EC5F01EA]( 0x8B93DC546B4878D )
			f9_arg0[0x73308846C4818C0]:SetDisabledText( Engine[0xED84C33EC5F01EA]( 0x8B93DC546B4878D ) )
		end
	end
	local f9_local10 = ACTIONS.AnimateSequence
	local f9_local11 = f9_arg0
	local f9_local12
	if f9_arg3.isRestricted then
		f9_local12 = "RestrictionOn"
	else
		f9_local12 = "RestrictionOff"
	end
	f9_local10( f9_local11, f9_local12 )
	f9_arg0.ButtonLarge:SetEquipped( f9_arg5 )
	if not f9_arg5 and not CONDITIONS.IsPerpetualInventoryEnabled() then
		if f9_local7 then
			f9_local9 = Engine[0xED84C33EC5F01EA]( 0x7031B327FA58FEC )
		elseif f9_local0 then
			f9_local9 = Engine[0xED84C33EC5F01EA]( 0x908817112D77DCC )
		end
	end
	f9_arg0.ButtonLarge:SetPrimaryPromptTextLocalized( f9_local9, false )
	if f9_local7 and not f9_arg5 then
		f9_local10 = EXGM_UTILS.GetItemPrice( f9_arg3.lootID )
		f9_arg0.ButtonLarge:SetSecondaryPromptText( Engine[0xED84C33EC5F01EA]( 0xB6868376C405B52, INVENTORY.GetCashDisplay( f9_local10 ) ) )
		if EXGM_UTILS.GetLocalPlayerBalance( f9_arg1 ) < f9_local10 then
			f9_arg0.ButtonLarge:SetPrimaryPromptText( 0x76DA35310261543, false )
		end
		if not f9_local3 then
			if not f9_arg3.isBase then
				f9_arg0.ButtonLarge:SetGradientAlpha( 0.1, 0.08 )
			else
				f9_arg0.ButtonLarge:SetGradientAlpha( 0.2, 0.16 )
			end
		end
	end
	if DMZ.IsLimitedInventoryEnabled() and CoD.IsDMZMatch() then
		if f9_arg3.isContraband then
			f9_arg0.Icon:SetRGB( SWATCHES[0x71CAB19053F30BF][0xE1DC665808D2BAD] )
			f9_arg0.Icon:setImage( RegisterMaterial( "icon_mod" ) )
		else
			f9_arg0.Icon:SetRGB( SWATCHES[0xFB43557B54149CE][0xF3C62CDF4E143D7] )
			f9_arg0.Icon:setImage( RegisterMaterial( "icon_blueprint" ) )
		end
	end
	if f9_arg0.WeaponCooldown and f9_arg3.cooldown then
		f9_local10 = CoD.GetUTC()
		if f9_local10 < f9_arg3.cooldown then
			f9_arg0:SetButtonDisabled( true )
			f9_arg0.WeaponCooldown:SetAlpha( 1 )
			f9_arg0.WeaponCooldown.Timer:setEndTime( (f9_arg3.cooldown - f9_local10) * 1000 + Engine[0x6991337AE950F99]() )
			f9_arg0.WeaponCooldown.Timer:registerEventHandler( "timeout", function ()
				f9_arg0:SetButtonDisabled( false )
				f9_arg0.WeaponCooldown:SetAlpha( 0 )
			end )
		else
			f9_arg0:SetButtonDisabled( false )
			f9_arg0.WeaponCooldown:SetAlpha( 0 )
			f9_arg0.WeaponCooldown.Timer:deregisterEventHandler( "timeout" )
		end
	end
	if f9_arg0.CostLabel then
		f9_arg0.CostLabel:setText( LocalizeIntoString( WEAPON.GetWeaponCost( f9_arg3.weapon, ATTACHMENT.GetAttachmentRefsFromAttachmentsData( f9_arg3.attachments ) ), 0x757A21A4FFB96DF ) )
		if f9_arg5 then
			ACTIONS.AnimateSequence( f9_arg0, "IsEquipped" )
		end
	end
	f9_arg0:UpdateNewIcon( f9_arg1 )
	MenuUtils.SetupItemButtonTags( f9_arg1, f9_arg0, f9_arg3.lootID )
end

local f0_local4 = function ( f8_arg0 )
	return f8_arg0._weaponData
end

local f0_local5 = function ( f7_arg0, f7_arg1 )
	if f7_arg0.NewItemSmallIcon then
		local f7_local0 = WEAPON.IsContextualStoreEnabled()
		if f7_local0 then
			f7_local0 = LUI.FlowManager.GetScopedData( f7_arg0 )
			f7_local0 = f7_local0.isStoreTab
		end
		if f7_arg0._weaponLootID and not f7_arg0:IsDisabled() and not f7_local0 then
			if f7_arg0:isInFocus() then
				f7_arg0.NewItemSmallIcon:ClearBreadcrumbByID( f7_arg1, f7_arg0._weaponLootID )
			else
				f7_arg0.NewItemSmallIcon:UpdateBreadcrumbByID( f7_arg1, f7_arg0._weaponLootID )
			end
			if not CONDITIONS.IsMobileOrMobileSim() then
				local f7_local1 = LOOT.IsNew( f7_arg1, f7_arg0._weaponLootID )
				local f7_local2 = ACTIONS.AnimateSequence
				local f7_local3 = f7_arg0
				local f7_local4
				if f7_local1 then
					f7_local4 = "HasNewItemNotification"
				else
					f7_local4 = "DefaultRestrictionWarningPosition"
				end
				f7_local2( f7_local3, f7_local4 )
			end
		else
			f7_arg0.NewItemSmallIcon:UpdateAlpha( 0 )
		end
	end
end

local f0_local6 = function ( f5_arg0, f5_arg1, f5_arg2 )
	f5_arg0.Setup = f0_local0
	f5_arg0.UpdateNewIcon = f0_local0
	f5_arg0._weaponPlayerData = nil
	f5_arg0._weaponData = nil
	f5_arg0._weaponLootID = nil
	f5_arg0.GetWeaponData = f0_local0
	f5_arg0.SetupCustomWeaponMenu = f0_local0
	f5_arg0:addEventHandler( "button_action", function ( f6_arg0, f6_arg1 )
		if not f6_arg0._weaponData.isUnlocked and CONDITIONS.IsPerpetualInventoryEnabled() then
			UNLOCK_CRITERIA.RedirectToUnlockSource( f5_arg0, f6_arg0, f6_arg0._weaponLootID )
			return true
		elseif LUI.FlowManager.GetCurrentMenu( f6_arg0 ) then
			local f6_local0 = WEAPON.IsContextualStoreEnabled()
			if f6_local0 then
				f6_local0 = LUI.FlowManager.GetScopedData( f5_arg0 )
				f6_local0 = f6_local0.isStoreTab
			end
			if f6_local0 and not LOOT.IsUnlockedWithID( f5_arg0, f6_arg0._weaponLootID ) then
				STORE.OpenProductPreviewMenu( f5_arg0, f5_arg0._weaponData.bundle )
				local f6_local1 = LUI.FlowManager.GetScopedData( f5_arg0 )
				f6_local1.isFromStoreButton = true
			else
				f6_arg0:dispatchEventToCurrentMenu( {
					name = "equip_weapon",
					controller = f5_arg0,
					weaponData = f5_arg0._weaponData
				} )
			end
		end
	end )
	if CONDITIONS.IsArabic() then
		ACTIONS.AnimateSequence( f5_arg0, "AR" )
	elseif IsLanguageJapanese() or IsLanguageChinese() then
		ACTIONS.AnimateSequence( f5_arg0, "JP" )
	end
end

local f0_local7 = function ( f4_arg0, f4_arg1, f4_arg2 )
	f4_arg0.PostLoadShared = f0_local0
end

function ArmoryButtonBase( f1_arg0, f1_arg1 )
	local f1_local0 = ACTIONS
	local f1_local1 = LUI
	local f1_local2 = f1_local1.UIButton.new()
	f1_local2:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 336, 0, 204 )
	f1_local2.id = "ArmoryButtonBase"
	local f1_local3
	if f1_arg1 then
		f1_local3 = f1_arg1
	else
		f1_local3 = f1_arg1.controllerIndex
	end
	f1_local3 = f1_local1.ValidateControllerIndex( f1_local2, f1_local3 )
	f1_local2:addEventHandler( 0x1573F49A6333A48, function ( f3_arg0, f3_arg1 )
		local f3_local0 = f3_arg1.controller or f1_arg0
		f1_arg0.AnimateSequence( f3_arg0, "ButtonOver" )
	end )
	f1_local2:addEventHandler( 0x872FD384B8E9347, function ( f2_arg0, f2_arg1 )
		local f2_local0 = f2_arg1.controller or f1_arg0
		f1_arg0.AnimateSequence( f2_arg0, "ButtonUp" )
	end )
	f0_local0( f1_local2, f1_local3, f1_arg1 )
	return f1_local2
end

MenuBuilder.registerType( 0x99DAB0FB246178A, ArmoryButtonBase )
LockTable( _M )
