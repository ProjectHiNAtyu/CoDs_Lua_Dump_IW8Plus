-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
DebugPrint( "Running main.lua" )
function OpenTitleScreen()
	if Engine[0x575E9C5B9AAB6F4]() then
		if DCache[0xEA6960AEA147A12]() then
			LUI.FlowManager.RequestPopupMenu( nil, "PopupYesNo", false, nil, false, {
				headerText = Engine[0xED84C33EC5F01EA]( "MENU/NOTICE" ),
				messageText = Engine[0xED84C33EC5F01EA]( "LUA_MENU/DCACHE_CLEAR_REQUEST" ),
				yesAction = function ()
					DCache[0xD38A06F227CF0D0]( 1 )
					Engine[0x34C623E28A1C5E7]( Engine[0xED84C33EC5F01EA]( "@LUA_MENU/DCACHE_RESTART" ) )
				end,
				noAction = function ()
					DCache[0xEE1C22A69B780CE]()
					Engine[0x34C623E28A1C5E7]( Engine[0xED84C33EC5F01EA]( "@LUA_MENU/DCACHE_RESTART" ) )
				end
			}, nil, false, true )
		else
			Engine[0x4B0C2D659AE39D3]( "Opening PC Main Menu", 0 )
			if Dvar[0x9E5BE3B4BBA4E0E]( "#x37622a6240a82efec" ) then
				LUI.FlowManager.RequestRestoreMenu( LUI.FlowManager.MainMenuOffline, nil, nil )
			else
				LUI.FlowManager.RequestRestoreMenu( LUI.FlowManager.MainMenu, nil, nil )
			end
		end
	else
		local f3_local0 = Dvar[0x54084D7CA2317BB]( "#x37bfb08efcf2f2177" )
		if Dvar[0x9E5BE3B4BBA4E0E]( "#x380f4ebae3239cf08" ) and f3_local0 and 0 < #f3_local0 then
			Engine[0x4B0C2D659AE39D3]( "Opening Main Menu for deep link", 0 )
			if Dvar[0x9E5BE3B4BBA4E0E]( "#x37622a6240a82efec" ) or CONDITIONS.IsLaunchChunk() then
				LUI.FlowManager.RequestRestoreMenu( "MainMenuOffline", false, nil )
			else
				LUI.FlowManager.RequestRestoreMenu( "MainMenu", false, nil )
			end
		else
			LUI.FlowManager.RequestRestoreMenu( "MainLockoutMenu", nil, nil )
		end
	end
end

function OpenInitialMenu()
	if Dvar[0x9E5BE3B4BBA4E0E]( "#x3f8a15f49c082a41c" ) then
		for f2_local0 = 0, Engine[0xB686A0A723E6442]() - 1, 1 do
			Engine[0x9694388D6DAC134]( "hasEverSeen_CODAccount", 0, f2_local0 )
			Engine[0x9694388D6DAC134]( "hasEverPlayed_MainMenu", 0, f2_local0 )
			Engine[0x9694388D6DAC134]( "acceptedEULA", 0, f2_local0 )
			Engine[0x9694388D6DAC134]( "acceptedEULA_B", 0, f2_local0 )
			Engine[0x9694388D6DAC134]( "hasEverPlayed_SP", 0, f2_local0 )
			Engine[0x9694388D6DAC134]( "hasEverPlayed_MP", 0, f2_local0 )
			Engine[0x9694388D6DAC134]( "hasEverPlayed_MLG", 0, f2_local0 )
		end
		Engine[0xB81A5136C5503E4]( "updategamerprofileall" )
		Dvar[0x8EA06EEDB58D872]( "#x3f8a15f49c082a41c", false )
	end
	if Engine[0x575E9C5B9AAB6F4]() then
		Dvar[0x8EA06EEDB58D872]( "#x34a9e48568387dea2", false )
		if Engine[0x12586A3F4FB490E]() then
			Dvar[0x8EA06EEDB58D872]( "#x39075528c931d95a9", true )
			MAIN_MENU.RegisterTitleUpdateAvailableEventHandler()
		else
			Dvar[0x8EA06EEDB58D872]( "#x39075528c931d95a9", false )
		end
	end
	local f2_local0 = Engine[0x5C96050629B5D19]()
	local f2_local1 = Engine[0x8E5B41A4B79E5D1]()
	local f2_local2
	if not Engine[0x9258F49F515F97B]() then
		f2_local2 = not Engine[0x74423E76DECE3E4]()
	else
		f2_local2 = false
	end
	if Dvar[0x9E5BE3B4BBA4E0E]( "#x350e1b55cd12b60bc" ) then
		LUI.FlowManager.RequestRestoreMenu( "LevelSelectMenu", nil, nil )
	elseif Engine[0x12586A3F4FB490E]() and f2_local2 then
		Dvar[0x8EA06EEDB58D872]( "#x39075528c931d95a9", false )
		if not f2_local0 or Engine[0xC6AD5341E93DFB3]() or Engine[0x9DD5167C6D720F1]() or not f2_local1 then
			if Engine[0xA2ED71B185EA50F]() then
				LUI.FlowManager.RequestRestoreMenu( "splash_screens", nil, nil )
			else
				OpenTitleScreen()
			end
		else
			if Engine[0x9DD5167C6D720F1]() then
				Engine[0x4B0C2D659AE39D3]( "Opening PC Main Menu", 0 )
			end
			LUI.FlowManager.RequestRestoreMenu( LUI.FlowManager.MainMenu, nil, Engine[0x45B054C920178E9]() )
		end
	elseif Engine[0x12586A3F4FB490E]() and Engine[0x9258F49F515F97B]() then
		local f2_local3 = Engine[0x45B054C920178E9]()
		if Engine[0x26F7462AEAB0A8F]() and Tournament[0x7E86050E6607699]() then
			LUI.FlowManager.RequestRestoreMenu( "ArenaTournament", nil, f2_local3 )
		elseif IsMlgGameBattlesMatch() then
			Engine[0xB81A5136C5503E4]( "xstopparty", f2_local3 )
			LUI.FlowManager.RequestRestoreMenu( "GameBattlesMatchLobby", nil, f2_local3 )
		elseif IsPublicMatch() and Engine[0xCBCF315DE9B8AC6]() then
			if Engine[0x220CB915CEFC1FE]() then
				LUI.FlowManager.RequestRestoreMenu( "BRPublicLobby", nil, f2_local3 )
			elseif Engine[0xCA085C21FCBD7CA]() then
				if Dvar[0x9E5BE3B4BBA4E0E]( "#x3a26f4bb7b753def0" ) == true then
					LUI.FlowManager.RequestRestoreMenu( "CPMainMenu", nil, f2_local3 )
				else
					LUI.FlowManager.RequestRestoreMenu( "CPPublicMatchMenu", nil, f2_local3 )
				end
			elseif Dvar[0x9E5BE3B4BBA4E0E]( "#x3aaa68a87d79fa0b6" ) == true then
				LUI.FlowManager.RequestRestoreMenu( "MPMainMenu", nil, f2_local3 )
			else
				LUI.FlowManager.RequestRestoreMenu( "MPPublicLobby", nil, f2_local3 )
			end
		elseif IsPrivateMatch() then
			if Engine[0xCA085C21FCBD7CA]() then
				LUI.FlowManager.RequestRestoreMenu( "CPPrivateMatchLobby", nil, f2_local3 )
			elseif Dvar[0x9E5BE3B4BBA4E0E]( "#x3ad78ae4b09274415" ) == true then
				local f2_local4
				if CONDITIONS.IsMagmaGameMode() then
					f2_local4 = "TrialsBR"
				else
					f2_local4 = "TrialsMP"
				end
				LUI.FlowManager.RequestRestoreMenu( f2_local4, nil, f2_local3 )
				Dvar[0x8EA06EEDB58D872]( "#x3ad78ae4b09274415", false )
			elseif Dvar[0x9E5BE3B4BBA4E0E]( "#x3555b3a407cdd47c1" ) then
				if CONDITIONS.IsMagmaGameMode() then
					local f2_local4 = Dvar[0x22EAAB59AA27E9B]( "#x3659ba0fd61ed48a" )
					local f2_local5 = Dvar[0x9E5BE3B4BBA4E0E]( "#x34c9af844ce94fda2" )
					if f2_local4 == MP.WarzonePracticePopupStatus.GO_TO_WARZONE_LOBBY or f2_local4 == MP.WarzonePracticePopupStatus.GO_TO_BLOODMONEY_LOBBY then
						local f2_local6 = PlaylistUtils.FindBRPostTutorialPlaylist( f2_local3, f2_local4 )
						if f2_local6 then
							if f2_local4 == MP.WarzonePracticePopupStatus.GO_TO_WARZONE_LOBBY then
								if Playlist[0x55D7805DA008136]( f2_local6.categoryIndex, f2_local6.playlistIndex ) then
									LUI.FlowManager.RequestAddMenu( "BRPublicLobby", false, f2_local3, false )
								end
							elseif not Onboarding.Plunder.WasCompleted( nil, f2_local3 ) then
								LUI.FlowManager.RequestAddMenu( "PayBackOnBoardingLobby", false, f2_local3, false, {
									categoryIndex = f2_local6.categoryIndex,
									playlistIndex = f2_local6.playlistIndex
								} )
							elseif Playlist[0x55D7805DA008136]( f2_local6.categoryIndex, f2_local6.playlistIndex ) then
								LUI.FlowManager.RequestAddMenu( "BRPublicLobby", false, f2_local3, false )
							end
						else
							LUI.FlowManager.RequestRestoreMenu( "BRMainMenu", nil, f2_local3 )
						end
					end
					Dvar[0x8EA06EEDB58D872]( "#x34c9af844ce94fda2", false )
					Dvar[0x2414681ECAB880F]( "#x3659ba0fd61ed48a", 0 )
				else
					Lobby.LeaveCustomGameLobby()
					CODCASTER.SetCodcastingEnabled( false )
					MLG.SetUsingMLGRules( false )
					Lobby[0xDA79B8D0B79405A]( false )
					LUI.FlowManager.RequestAddMenu( "MPMainMenu", false, f2_local3, false )
				end
			elseif Engine[0xBBCC05E38D2F93B]() then
				LUI.FlowManager.RequestAddMenu( "MPMainMenu", false, f2_local3, false )
			else
				LUI.FlowManager.RequestRestoreMenu( "PrivateMatchLobby", nil, f2_local3 )
			end
		elseif IsSystemLink() then
			if Engine[0x5F560D51BFEECB7]() then
				LUI.FlowManager.RequestRestoreMenu( LUI.FlowManager.MainMenu, nil, f2_local3 )
			elseif Engine[0xCBCF315DE9B8AC6]() then
				if Engine[0xCA085C21FCBD7CA]() then
					LUI.FlowManager.RequestRestoreMenu( "CPSystemLinkLobby", nil, f2_local3 )
				else
					LUI.FlowManager.RequestRestoreMenu( "MPSystemLinkLobby", nil, f2_local3 )
				end
			elseif Engine[0xCA085C21FCBD7CA]() then
				LUI.FlowManager.RequestRestoreMenu( "CPSystemLinkMenu", nil, f2_local3 )
			else
				LUI.FlowManager.RequestRestoreMenu( "MPSystemLinkMenu", nil, f2_local3 )
			end
		elseif IsOnlineMatch() then
			if Engine[0xCA085C21FCBD7CA]() then
				LUI.FlowManager.RequestRestoreMenu( "CPMainMenu", nil, f2_local3 )
			elseif CONDITIONS.IsMagmaGameMode() then
				LUI.FlowManager.RequestRestoreMenu( "BRMainMenu", nil, f2_local3 )
			else
				LUI.FlowManager.RequestRestoreMenu( "MPMainMenu", nil, f2_local3 )
			end
		else
			OpenTitleScreen()
		end
	elseif Engine[0x12586A3F4FB490E]() and Engine[0x74423E76DECE3E4]() then
		if not Engine[0x5F560D51BFEECB7]() then
			local f2_local3 = Engine[0x45B054C920178E9]()
			if Engine[0xBBF0609667DBEA]() then
				LUI.FlowManager.RequestRestoreMenu( "CampaignMenu", nil, f2_local3 )
			else
				LUI.FlowManager.RequestRestoreMenu( "CampaignMenuOffline", nil, f2_local3 )
			end
		end
	elseif Engine[0x74423E76DECE3E4]() and not Engine[0x12586A3F4FB490E]() and Dvar[0x9E5BE3B4BBA4E0E]( "#x360eab8be42222a57" ) then
		LUI.FlowManager.RequestRestoreMenu( "pre_game", nil, Engine[0x45B054C920178E9](), nil, nil, true )
	end
end

function Main()
	if Engine[0x7AE6126734FCDB]() then
		InitFrontEndDataSources()
	else
		UpdateAccessibilityColors()
		if Engine[0x12586A3F4FB490E]() then
			InitFrontEndDataSources()
			PersistentBackground.SetToDefault()
		end
		math.randomseed( Engine[0x6991337AE950F99]() )
		CoD.UpdateGameMode( Engine[0xCFB814FF4C67F87](), CoD.PlayMode.None )
		OpenInitialMenu()
	end
end

