-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
DYN_ATTACHMENT = DYN_ATTACHMENT or {}
DYN_ATTACHMENT.DynamicWidgetType = {
	LASER = 2,
	SCOPE = 6,
	BARREL = 9,
	STOCK = 7,
	MUZZLE = 0,
	RECEIVER = 5,
	MAGAZINE = 4,
	OTHER = 10,
	GUARD = 3,
	UNDERBARREL = 1,
	FIRETYPE = 8
}
DYN_ATTACHMENT.DynamicAnimationType = {
	SINGLE_ELEMENT = 0,
	MULTIPLE_ELEMENT = 1
}
DYN_ATTACHMENT.DynamicUnderBarrelType = {
	BIPOD = 2,
	LAUNCHER = 1,
	GRIP = 0,
	BAYONET = 3
}
DYN_ATTACHMENT.StreamedImageAction = {
	REMOVE = 2,
	ADD = 1,
	NONE = 0
}
DYN_ATTACHMENT.TypeCSVFile = {
	[DYN_ATTACHMENT.DynamicWidgetType.RECEIVER] = CSV.DynamicWeaponReceiverTable,
	[DYN_ATTACHMENT.DynamicWidgetType.MUZZLE] = CSV.DynamicWeaponMuzzleTable,
	[DYN_ATTACHMENT.DynamicWidgetType.UNDERBARREL] = CSV.DynamicWeaponUnderBarrelTable,
	[DYN_ATTACHMENT.DynamicWidgetType.LASER] = CSV.DynamicWeaponLaserTable,
	[DYN_ATTACHMENT.DynamicWidgetType.BARREL] = CSV.DynamicWeaponBarrelTable,
	[DYN_ATTACHMENT.DynamicWidgetType.GUARD] = CSV.DynamicWeaponGuardTable,
	[DYN_ATTACHMENT.DynamicWidgetType.MAGAZINE] = CSV.DynamicWeaponMagazineTable,
	[DYN_ATTACHMENT.DynamicWidgetType.SCOPE] = CSV.DynamicWeaponScopeTable,
	[DYN_ATTACHMENT.DynamicWidgetType.STOCK] = CSV.DynamicWeaponStockTable
}
DYN_ATTACHMENT.AnimationCache = {
	size = 0
}
DYN_ATTACHMENT.MAX_ANIMATION_CACHE_SIZE = 200
UNDERBARREL_LAUNCHER_SUFFIX = "GL"
UNDERBARREL_BIPOD_SUFFIX = "BI"
UNDERBARREL_BAYONET_SUFFIX = "BA"
DYN_ATTACHMENT.PISTOL_REF = "pi"
DYN_ATTACHMENT.MANDATORY_UPDATE_WEAPON_NAME = ""
DYN_ATTACHMENT.MAX_VISIBLE_ATTACHMENTS = 8
DYN_ATTACHMENT.STREAMER_NAME = "DYN_Streamer"
DYN_ATTACHMENT.ClearCache = function ( f36_arg0 )
	if not f36_arg0 then
		for f36_local3, f36_local4 in pairs( DYN_ATTACHMENT.AnimationCache ) do
			if f36_local3 ~= "size" then
				DYN_ATTACHMENT.AnimationCache[f36_local3] = nil
				DYN_ATTACHMENT.AnimationCache.size = DYN_ATTACHMENT.MAX_ANIMATION_CACHE_SIZE - 1
				DebugPrint( "\n ------ Dynamic Attachment Animation Cache Is Full." )
			end
		end
	else
		DYN_ATTACHMENT.AnimationCache = {
			size = 0
		}
	end
end

DYN_ATTACHMENT.SpecialWeaponUpdateFuncList = {
	{
		weaponName = "Regal Retribution",
		updateFunction = function ( f34_arg0 )
			if not CONDITIONS.InFrontend() then
				local f34_local0 = nil
				for f34_local1 = 1, #f34_arg0, 1 do
					if f34_arg0[f34_local1].type == DYN_ATTACHMENT.DynamicWidgetType.MAGAZINE then
						f34_local0 = f34_local1
					end
				end
				if f34_local0 then
					f34_arg0[f34_local0].variantID = 2
				end
			end
		end
	},
	{
		weaponName = DYN_ATTACHMENT.MANDATORY_UPDATE_WEAPON_NAME,
		updateFunction = function ( f35_arg0 )
			local f35_local0 = f35_arg0.barrelIndex
			local f35_local1 = f35_arg0.guardIndex
			local f35_local2 = false
			if f35_local0 and f35_local1 then
				local f35_local3 = f35_arg0[f35_local0].ref
				local f35_local4 = f35_arg0[f35_local1].ref
				if (f35_local3 == "barshort_charlie725" or f35_local3 == "barcust_charlie725") and (f35_local4 == "guardcust_charlie725" or f35_local4 == "guard_charlie725") then
					f35_local2 = true
				end
			end
			if f35_local2 then
				f35_arg0[f35_local1].icon = "icon_dyn_attachment_sh_charlie725_guard"
				f35_arg0[f35_local1].ref = "guard_charlie725"
				f35_arg0[f35_local1].variantID = 0
			end
		end
	}
}
DYN_ATTACHMENT.GetUnderBarrelType = function ( f33_arg0 )
	return tonumber( StringTable[0x2DCF0973239E909]( CSV.DynamicWeaponUnderBarrelSpecialTable.file, CSV.DynamicWeaponUnderBarrelSpecialTable.cols.ref, f33_arg0, CSV.DynamicWeaponUnderBarrelSpecialTable.cols.type ) )
end

DYN_ATTACHMENT.GetUnderBarrelSubTypeAnimationSeq = function ( f32_arg0, f32_arg1 )
	if f32_arg0 == DYN_ATTACHMENT.DynamicUnderBarrelType.LAUNCHER then
		f32_arg1 = f32_arg1 .. UNDERBARREL_LAUNCHER_SUFFIX
	elseif f32_arg0 == DYN_ATTACHMENT.DynamicUnderBarrelType.BIPOD then
		f32_arg1 = f32_arg1 .. UNDERBARREL_BIPOD_SUFFIX
	elseif f32_arg0 == DYN_ATTACHMENT.DynamicUnderBarrelType.BAYONET then
		f32_arg1 = f32_arg1 .. UNDERBARREL_BAYONET_SUFFIX
	end
	return f32_arg1
end

DYN_ATTACHMENT.UpdateAttachmentTable = function ( f31_arg0, f31_arg1, f31_arg2 )
	local f31_local0 = DYN_ATTACHMENT.DynamicUnderBarrelType.GRIP
	local f31_local1, f31_local2 = nil
	for f31_local3 = 1, #f31_arg1, 1 do
		local f31_local6 = f31_arg1[f31_local3]
		local f31_local7 = f31_local6.type
		if f31_local7 == DYN_ATTACHMENT.DynamicWidgetType.UNDERBARREL then
			f31_local0 = DYN_ATTACHMENT.GetUnderBarrelType( f31_local6.ref )
		elseif f31_local7 == DYN_ATTACHMENT.DynamicWidgetType.BARREL then
			f31_arg1.barrelIndex = f31_local3
		elseif f31_local7 == DYN_ATTACHMENT.DynamicWidgetType.GUARD then
			f31_arg1.guardIndex = f31_local3
		end
		if not f31_local7 or f31_local7 == DYN_ATTACHMENT.DynamicWidgetType.OTHER then
			local f31_local8 = f31_local6.ref
			if f31_local8 and StringTable[0x2DCF0973239E909]( CSV.MPAttachments.file, CSV.MPAttachments.cols.ref, f31_local8, CSV.MPAttachments.cols.category ) == "gunperk" then
				if not f31_local7 then
					f31_local6.type = DYN_ATTACHMENT.DynamicWidgetType.OTHER
				end
				f31_local6.isGunPerk = true
			end
		end
	end
	if f31_local1 then
		f31_arg1[f31_local1].animateSeq = DYN_ATTACHMENT.GetUnderBarrelSubTypeAnimationSeq( f31_local0, f31_arg1[f31_local1].animateSeq )
	end
	local f31_local3 = ""
	if not CONDITIONS.InFrontend() then
		if f31_arg2 then
			f31_local3 = DataSources.inGame.HUD.hints.interactiveObject.popup.string:GetValue( f31_arg0 )
		else
			f31_local3 = DataSources.alwaysLoaded.player.currentWeapon.displayName:GetValue( f31_arg0 )
		end
	end
	for f31_local4 = 1, #DYN_ATTACHMENT.SpecialWeaponUpdateFuncList, 1 do
		local f31_local7 = DYN_ATTACHMENT.SpecialWeaponUpdateFuncList[f31_local4]
		local f31_local8 = f31_local7.updateFunction
		if f31_local8 then
			if f31_local3 ~= f31_local7.weaponName and f31_local7.weaponName ~= DYN_ATTACHMENT.MANDATORY_UPDATE_WEAPON_NAME then
				f31_local8 = false
			else
				f31_local8 = true
			end
		end
		if f31_local8 then
			f31_local7.updateFunction( f31_arg1 )
		end
	end
end

DYN_ATTACHMENT.IsDynamicAttachmentIconsEnabled = function ()
	return Dvar[0x9E5BE3B4BBA4E0E]( 0x6CF061DC1B79755 )
end

DYN_ATTACHMENT.IsDynamicAttachmentIconOverriden = function ( f29_arg0 )
	local f29_local0
	if f29_arg0 then
		f29_local0 = f29_arg0
	else
		f29_local0 = 0 < #f29_arg0
	end
	return f29_local0
end

DYN_ATTACHMENT.IsAttachmentVariantIconEnable = function ()
	if CONDITIONS.IsCoreMultiplayer() then
		return true
	elseif CONDITIONS.IsThirdGameMode() then
		return Dvar[0x9E5BE3B4BBA4E0E]( 0xAC106D8F10931D1 )
	else
		
	end
end

DYN_ATTACHMENT.ShouldShowInteractiveWeaponIcon = function ( f27_arg0 )
	if CONDITIONS.InGame() then
		local f27_local0 = DataSources.inGame.HUD.hints.interactiveObject.popup.shouldShow:GetValue( f27_arg0 )
		local f27_local1 = DataSources.inGame.HUD.hints.interactiveObject.weapon.baseName:GetValue( f27_arg0 )
		local f27_local2
		if f27_local0 then
			f27_local2 = f27_local0
		elseif f27_local1 then
			f27_local2 = f27_local1
		elseif 0 >= #f27_local1 or f27_local1 == "none" then
			f27_local2 = false
		else
			f27_local2 = true
		end
		return f27_local2
	else
		return false
	end
end

DYN_ATTACHMENT.FormatDynamicAttachmentIcon = function ( f26_arg0 )
	if f26_arg0 == nil or #f26_arg0 == 0 then
		return ""
	else
		local f26_local0 = LUI.Split( f26_arg0, "/" )
		f26_local0 = LUI.Split( f26_local0[#f26_local0], "\\" )
		return string.gsub( f26_local0[#f26_local0], ".png", "" )
	end
end

DYN_ATTACHMENT.FormatDynamicAttachmentVariantIcon = function ( f25_arg0, f25_arg1, f25_arg2 )
	local f25_local0 = DYN_ATTACHMENT.FormatDynamicAttachmentIcon( f25_arg1 )
	if DYN_ATTACHMENT.IsAttachmentVariantIconEnable() and f25_arg0 and f25_arg2 and 0 < f25_arg2 then
		local f25_local1 = StringTable[0x2DCF0973239E909]( CSV.DynamicWeaponVariantIconMapTable.file, CSV.DynamicWeaponVariantIconMapTable.cols.ref, f25_arg0, f25_arg2 + CSV.DynamicWeaponVariantIconMapTable.cols.base )
		if f25_local1 and 0 < #f25_local1 then
			return f25_local1
		end
	end
	return f25_local0
end

DYN_ATTACHMENT.FormatDynamicAttachmentVariantAnimation = function ( f24_arg0, f24_arg1, f24_arg2 )
	if DYN_ATTACHMENT.IsAttachmentVariantIconEnable() and f24_arg0 and f24_arg2 and 0 < f24_arg2 then
		local f24_local0 = StringTable[0x2DCF0973239E909]( CSV.DynamicWeaponVariantIconMapTable.file, CSV.DynamicWeaponVariantIconMapTable.cols.ref, f24_arg0, f24_arg2 + CSV.DynamicWeaponVariantIconMapTable.cols.baseAnimation )
		if f24_local0 and 0 < #f24_local0 then
			return f24_local0
		end
	end
	return f24_arg1
end

DYN_ATTACHMENT.GetFireTypeIcon = function ( f23_arg0 )
	return ATTACHMENT.FireTypeIcon[f23_arg0]
end

DYN_ATTACHMENT.GetAltModeFireTypeStringRef = function ( f22_arg0 )
	return ATTACHMENT.AltModeFireTypeStringRef[f22_arg0]
end

DYN_ATTACHMENT.GetDynamicAttachmentType = function ( f21_arg0 )
	return StringTable[0x2DCF0973239E909]( CSV.DynamicWeaponAttachmentTable.file, CSV.DynamicWeaponAttachmentTable.cols.ref, f21_arg0, CSV.DynamicWeaponAttachmentTable.cols.type )
end

DYN_ATTACHMENT.GetDynamicAttachmentIcon = function ( f20_arg0 )
	return StringTable[0x2DCF0973239E909]( CSV.DynamicWeaponAttachmentTable.file, CSV.DynamicWeaponAttachmentTable.cols.ref, f20_arg0, CSV.DynamicWeaponAttachmentTable.cols.icon )
end

DYN_ATTACHMENT.GetDynamicAttachmentAnimationSeq = function ( f19_arg0 )
	return StringTable[0x2DCF0973239E909]( CSV.DynamicWeaponAttachmentTable.file, CSV.DynamicWeaponAttachmentTable.cols.ref, f19_arg0, CSV.DynamicWeaponAttachmentTable.cols.animateSeq )
end

DYN_ATTACHMENT.GetDynamicAttachmentDataByRef = function ( f18_arg0 )
	local f18_local0, f18_local1 = ATTACHMENT.GetRefAndVariantID( f18_arg0 )
	local f18_local2 = {
		ref = f18_local0,
		icon = DYN_ATTACHMENT.GetDynamicAttachmentIcon( f18_local0 ),
		type = tonumber( DYN_ATTACHMENT.GetDynamicAttachmentType( f18_local0 ) ),
		animateSeq = DYN_ATTACHMENT.GetDynamicAttachmentAnimationSeq( f18_local0 )
	}
	local f18_local3 = tonumber
	local f18_local4
	if f18_local1 and not f18_local1 then
		f18_local4 = f18_local1
	else
		f18_local4 = 0
	end
	f18_local2.variantID = f18_local3( f18_local4 )
	return f18_local2
end

DYN_ATTACHMENT.GetDynamicAttachmentsTable = function ( f17_arg0 )
	local f17_local0 = split( f17_arg0, "+" )
	local f17_local1 = {}
	for f17_local2 = 2, #f17_local0, 1 do
		table.insert( f17_local1, DYN_ATTACHMENT.GetDynamicAttachmentDataByRef( f17_local0[f17_local2] ) )
	end
	table.insert( f17_local1, {
		fireType = 0,
		type = DYN_ATTACHMENT.DynamicWidgetType.OTHER
	} )
	return f17_local1
end

DYN_ATTACHMENT.GetDynamicAttachmentsTableByRef = function ( f16_arg0, f16_arg1 )
	local f16_local0 = {}
	if f16_arg0 then
		for f16_local1 = 1, #f16_arg0, 1 do
			local f16_local4 = nil
			if f16_arg1 then
				f16_local4 = f16_arg0[f16_local1][f16_arg1]
			else
				f16_local4 = f16_arg0[f16_local1]
			end
			table.insert( f16_local0, DYN_ATTACHMENT.GetDynamicAttachmentDataByRef( f16_local4 ) )
		end
	end
	table.insert( f16_local0, {
		fireType = 0,
		type = DYN_ATTACHMENT.DynamicWidgetType.OTHER
	} )
	return f16_local0
end

DYN_ATTACHMENT.GetDynamicAttachmentAnimationTable = function ( f15_arg0 )
	assert( f15_arg0 )
	return DYN_ATTACHMENT.TypeCSVFile[f15_arg0]
end

DYN_ATTACHMENT.GetDynamicAttachmentAnimationType = function ( f14_arg0 )
	if f14_arg0 == DYN_ATTACHMENT.DynamicWidgetType.RECEIVER then
		return DYN_ATTACHMENT.DynamicAnimationType.MULTIPLE_ELEMENT
	elseif f14_arg0 == DYN_ATTACHMENT.DynamicWidgetType.BARREL then
		return DYN_ATTACHMENT.DynamicAnimationType.MULTIPLE_ELEMENT
	else
		return DYN_ATTACHMENT.DynamicAnimationType.SINGLE_ELEMENT
	end
end

DYN_ATTACHMENT.GetDynamicAttachmentAnimationData = function ( f13_arg0, f13_arg1, f13_arg2, f13_arg3 )
	local f13_local0 = nil
	if f13_arg3 then
		f13_local0 = CSV.DynamicWeaponAnimationTable
	else
		f13_local0 = DYN_ATTACHMENT.GetDynamicAttachmentAnimationTable( f13_arg0 )
	end
	if f13_local0 then
		if f13_arg3 or DYN_ATTACHMENT.GetDynamicAttachmentAnimationType( f13_arg0 ) == DYN_ATTACHMENT.DynamicAnimationType.SINGLE_ELEMENT then
			local f13_local1
			if f13_arg0 and not f13_arg0 then
				f13_local1 = f13_arg0
			else
				f13_local1 = ""
			end
			f13_local1 = f13_local1 .. f13_arg1
			if DYN_ATTACHMENT.AnimationCache[f13_local1] == nil then
				local f13_local2 = StringTable[0x8073B436CDE1BF]( f13_local0.file, f13_local0.cols.animateSeq, f13_arg1 )
				if f13_local2 == -1 then
					return nil
				end
				local f13_local3 = StringTable[0x2077452C28AB2FC]( f13_local0.file, f13_local2, f13_local0.cols.elementName )
				if f13_local3 == nil or #f13_local3 == 0 then
					return nil
				end
				local f13_local4 = {
					elementName = f13_local3,
					left = tonumber( StringTable[0x2077452C28AB2FC]( f13_local0.file, f13_local2, f13_local0.cols.left ) ),
					right = tonumber( StringTable[0x2077452C28AB2FC]( f13_local0.file, f13_local2, f13_local0.cols.right ) ),
					top = tonumber( StringTable[0x2077452C28AB2FC]( f13_local0.file, f13_local2, f13_local0.cols.top ) ),
					bottom = tonumber( StringTable[0x2077452C28AB2FC]( f13_local0.file, f13_local2, f13_local0.cols.bottom ) ),
					scale = tonumber( StringTable[0x2077452C28AB2FC]( f13_local0.file, f13_local2, f13_local0.cols.scale ) ) - 1,
					image = StringTable[0x2077452C28AB2FC]( f13_local0.file, f13_local2, f13_local0.cols.material )
				}
				if DYN_ATTACHMENT.AnimationCache.size == DYN_ATTACHMENT.MAX_ANIMATION_CACHE_SIZE then
					DYN_ATTACHMENT.ClearCache( false )
				end
				DYN_ATTACHMENT.AnimationCache.size = DYN_ATTACHMENT.AnimationCache.size + 1
				DYN_ATTACHMENT.AnimationCache[f13_local1] = f13_local4
				return f13_local4
			else
				return DYN_ATTACHMENT.AnimationCache[f13_local1]
			end
		else
			local f13_local1
			if f13_arg0 and not f13_arg0 then
				f13_local1 = f13_arg0
			else
				f13_local1 = ""
			end
		end
		f13_local1 = f13_local1 .. f13_arg1 .. f13_arg2
		if DYN_ATTACHMENT.AnimationCache[f13_local1] == nil then
			local f13_local2 = {
				{
					col = f13_local0.cols.animateSeq,
					key = f13_arg1
				},
				{
					col = f13_local0.cols.elementName,
					key = f13_arg2
				}
			}
			local f13_local3 = StringTable[0x412BDBFB84C120D]( f13_local0.file, f13_local2, f13_local0.cols.elementName )
			if f13_local3 == nil or #f13_local3 == 0 then
				return nil
			end
			local f13_local4 = {
				elementName = f13_local3,
				left = tonumber( StringTable[0x412BDBFB84C120D]( f13_local0.file, f13_local2, f13_local0.cols.left ) ),
				right = tonumber( StringTable[0x412BDBFB84C120D]( f13_local0.file, f13_local2, f13_local0.cols.right ) ),
				top = tonumber( StringTable[0x412BDBFB84C120D]( f13_local0.file, f13_local2, f13_local0.cols.top ) ),
				bottom = tonumber( StringTable[0x412BDBFB84C120D]( f13_local0.file, f13_local2, f13_local0.cols.bottom ) ),
				scale = tonumber( StringTable[0x412BDBFB84C120D]( f13_local0.file, f13_local2, f13_local0.cols.scale ) ) - 1,
				image = StringTable[0x412BDBFB84C120D]( f13_local0.file, f13_local2, f13_local0.cols.material )
			}
			if DYN_ATTACHMENT.AnimationCache.size == DYN_ATTACHMENT.MAX_ANIMATION_CACHE_SIZE then
				DYN_ATTACHMENT.ClearCache( false )
			end
			DYN_ATTACHMENT.AnimationCache.size = DYN_ATTACHMENT.AnimationCache.size + 1
			DYN_ATTACHMENT.AnimationCache[f13_local1] = f13_local4
			return f13_local4
		else
			return DYN_ATTACHMENT.AnimationCache[f13_local1]
		end
	else
		
	end
end

DYN_ATTACHMENT.GetDisplayedAttachmentRefTable = function ( f12_arg0 )
	local f12_local0 = {}
	for f12_local1 = 1, #f12_arg0, 1 do
		local f12_local4 = f12_arg0[f12_local1]
		if f12_local4 and 0 < #f12_local4 and ATTACHMENT.IsDisplayNameAvailable( f12_local4 ) then
			table.insert( f12_local0, f12_local4 )
		end
	end
	return f12_local0
end

DYN_ATTACHMENT.SetupWidgetStreamer = function ( f11_arg0, f11_arg1, f11_arg2 )
	if not DYN_ATTACHMENT.IsDynamicAttachmentIconsEnabled() then
		return 
	elseif not f11_arg0.streamer then
		f11_arg0.streamer = LUI.UIElement.new()
		f11_arg0.streamer.id = DYN_ATTACHMENT.STREAMER_NAME
		f11_arg0:addElement( f11_arg0.streamer )
	end
	f11_arg0.streamer:SetupImageTableStreamer( f11_arg1, f11_arg2 )
end

DYN_ATTACHMENT.SetupWeaponAttachmentStreamer = function ( f10_arg0, f10_arg1, f10_arg2 )
	if not DYN_ATTACHMENT.IsDynamicAttachmentIconsEnabled() then
		return 
	end
	local f10_local0 = {}
	for f10_local1 = 1, #f10_arg1, 1 do
		local f10_local4 = f10_arg1[f10_local1]
		if f10_local4.type then
			local f10_local5 = DYN_ATTACHMENT.FormatDynamicAttachmentVariantIcon( f10_local4.ref, f10_local4.icon )
			if DYN_ATTACHMENT.IsDynamicAttachmentIconOverriden( f10_local5 ) then
				table.insert( f10_local0, RegisterMaterial( f10_local5 ) )
			end
		end
	end
	DYN_ATTACHMENT.SetupWidgetStreamer( f10_arg0, f10_local0, f10_arg2 )
end

DYN_ATTACHMENT.SetupGunsmithAttachmentStreamer = function ( f9_arg0, f9_arg1, f9_arg2, f9_arg3 )
	if not DYN_ATTACHMENT.IsDynamicAttachmentIconsEnabled() then
		return 
	end
	local f9_local0 = {}
	for f9_local1 = 1, #f9_arg1, 1 do
		if f9_arg1[f9_local1][f9_arg2] and 0 < #f9_arg1[f9_local1][f9_arg2] then
			table.insert( f9_local0, RegisterMaterial( f9_arg1[f9_local1][f9_arg2] ) )
		end
	end
	DYN_ATTACHMENT.SetupWidgetStreamer( f9_arg0, f9_local0, f9_arg3 )
end

DYN_ATTACHMENT.ProcessLoadoutWeaponStreamedImages = function ( f8_arg0, f8_arg1, f8_arg2 )
	local f8_local0 = {}
	local f8_local1 = LOADOUT.GetLoadoutSquadMember( f8_arg1 )
	f8_local1 = f8_local1.loadouts
	for f8_local2 = 0, LOADOUT.GetMaxLoadoutCount() - 1, 1 do
		local f8_local5 = f8_local1[f8_local2]
		for f8_local6 = 0, #f8_local5.weaponSetups - 1, 1 do
			local f8_local9 = WEAPON.GenerateWeaponTable( f8_local5.weaponSetups[f8_local6] )
			local f8_local10 = DYN_ATTACHMENT.GetDynamicAttachmentsTable( WEAPON.GetWeaponModelName( f8_local9.weapon, f8_local9, {
				keepAkimbo = true,
				includeStickers = false,
				includeAttachments = true,
				includeCamos = false,
				useGuntableOverride = false
			} ) )
			for f8_local11 = 1, #f8_local10, 1 do
				local f8_local14 = f8_local10[f8_local11]
				if f8_local14.type then
					local f8_local15 = DYN_ATTACHMENT.FormatDynamicAttachmentVariantIcon( f8_local14.ref, f8_local14.icon )
					if DYN_ATTACHMENT.IsDynamicAttachmentIconOverriden( f8_local15 ) then
						table.insert( f8_local0, RegisterMaterial( f8_local15 ) )
					end
				end
			end
		end
	end
	local f8_local2 = LOADOUT.GetDefaultLoadouts( f8_arg1 )
	for f8_local3 = 1, #f8_local2, 1 do
		local f8_local6 = f8_local2[f8_local3]
		for f8_local7 = 1, #f8_local6.weapons, 1 do
			local f8_local9 = f8_local6.weapons[f8_local7]
			local f8_local10 = DYN_ATTACHMENT.GetDynamicAttachmentsTable( WEAPON.GetWeaponModelName( f8_local9.ref, f8_local9, {
				keepAkimbo = true,
				includeStickers = false,
				includeAttachments = true,
				isDefault = true,
				includeCamos = false,
				useGuntableOverride = false
			} ) )
			for f8_local11 = 1, #f8_local10, 1 do
				local f8_local14 = f8_local10[f8_local11]
				if f8_local14.type then
					local f8_local15 = DYN_ATTACHMENT.FormatDynamicAttachmentVariantIcon( f8_local14.ref, f8_local14.icon )
					if DYN_ATTACHMENT.IsDynamicAttachmentIconOverriden( f8_local15 ) then
						table.insert( f8_local0, RegisterMaterial( f8_local15 ) )
					end
				end
			end
		end
	end
	if f8_arg2 == DYN_ATTACHMENT.StreamedImageAction.ADD then
		Streaming[0x2D189901DAA9563]( f8_local0 )
	elseif f8_arg2 == DYN_ATTACHMENT.StreamedImageAction.REMOVE then
		Streaming[0x6FFD2DD54385156]( f8_local0 )
	end
end

DYN_ATTACHMENT.UpdateLoadoutWeaponStreamedImages = function ( f6_arg0, f6_arg1, f6_arg2 )
	if not DYN_ATTACHMENT.IsDynamicAttachmentIconsEnabled() then
		
	else
		
	end
	if f6_arg2 == DYN_ATTACHMENT.StreamedImageAction.ADD then
		if Engine[0x22090BA9DCF62DC]( f6_arg1 ) then
			if f6_arg0.clientConnectionTimer then
				f6_arg0:RemoveElement( f6_arg0.clientConnectionTimer )
				f6_arg0.clientConnectionTimer:closeTree()
				f6_arg0.clientConnectionTimer = nil
				f6_arg0.clientConnectionTime = nil
			end
			DYN_ATTACHMENT.ProcessLoadoutWeaponStreamedImages( f6_arg0, f6_arg1, f6_arg2 )
		elseif f6_arg0.clientConnectionTimer == nil then
			f6_arg0.clientConnectionTimer = LUI.UITimer.new( {
				event = "checkClientConnection",
				interval = 100
			} )
			f6_arg0.clientConnectionTimer.id = "clientConnectionTimer"
			f6_arg0:addElement( f6_arg0.clientConnectionTimer )
			f6_arg0.clientConnectionTime = 0
			f6_arg0:registerEventHandler( "checkClientConnection", function ( element, event )
				local f7_local0 = event.controller or f6_arg0
				local f7_local1 = Engine[0x22090BA9DCF62DC]( f7_local0 )
				f6_arg0.clientConnectionTime = f6_arg0.clientConnectionTime + 100
				if f7_local1 or 2000 < f6_arg0.clientConnectionTime then
					f6_arg0:RemoveElement( f6_arg0.clientConnectionTimer )
					f6_arg0.clientConnectionTimer:closeTree()
					f6_arg0.clientConnectionTimer = nil
					f6_arg0.clientConnectionTime = nil
					DYN_ATTACHMENT.ProcessLoadoutWeaponStreamedImages( element, f7_local0, f6_arg0 )
				end
			end )
		end
	else
		DYN_ATTACHMENT.ProcessLoadoutWeaponStreamedImages( element, f6_arg1, f6_arg2 )
	end
end

DYN_ATTACHMENT.ReloadLoadoutWeaponStreamedImages = function ( f5_arg0, f5_arg1 )
	DYN_ATTACHMENT.UpdateLoadoutWeaponStreamedImages( f5_arg0, f5_arg1, DYN_ATTACHMENT.StreamedImageAction.REMOVE )
	DYN_ATTACHMENT.UpdateLoadoutWeaponStreamedImages( f5_arg0, f5_arg1, DYN_ATTACHMENT.StreamedImageAction.ADD )
end

DYN_ATTACHMENT.PlayDynamicAttachmentAnimation = function ( f4_arg0, f4_arg1, f4_arg2, f4_arg3, f4_arg4 )
	local f4_local0 = DYN_ATTACHMENT.GetDynamicAttachmentAnimationData( f4_arg1, f4_arg2, f4_arg3, f4_arg4 )
	if f4_local0 then
		local f4_local1 = false
		local f4_local2
		if f4_arg3 and not f4_arg3 then
			f4_local2 = f4_arg3
		else
			f4_local2 = f4_local0.elementName
		end
		local f4_local3 = f4_local0.left
		local f4_local4 = f4_local0.right
		local f4_local5 = f4_local0.top
		local f4_local6 = f4_local0.bottom
		local f4_local7 = f4_local0.scale
		local f4_local8 = f4_local0.image
		if f4_arg0[f4_local2] then
			f4_arg0[f4_local2]:SetScale( f4_local7 )
			if f4_local3 and f4_local4 and f4_local5 and f4_local6 then
				f4_local1 = true
				f4_arg0[f4_local2]:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * f4_local3, _1080p * f4_local4, _1080p * f4_local5, _1080p * f4_local6 )
			end
			if f4_local8 and 0 < #f4_local8 then
				f4_local1 = true
				f4_arg0[f4_local2]:setImage( RegisterMaterial( f4_local8 ) )
			end
		end
		return f4_local1
	else
		
	end
end

DYN_ATTACHMENT.ApplyDynamicAttachmentData = function ( f3_arg0, f3_arg1, f3_arg2, f3_arg3 )
	assert( f3_arg1 )
	assert( f3_arg2 )
	local f3_local0 = false
	local f3_local1 = f3_arg3.animateSeq
	if f3_local1 and 0 < #f3_local1 then
		f3_local0 = DYN_ATTACHMENT.PlayDynamicAttachmentAnimation( f3_arg1, f3_arg3.type, DYN_ATTACHMENT.FormatDynamicAttachmentVariantAnimation( f3_arg3.ref, f3_local1, f3_arg3.variantID ) )
	end
	local f3_local2 = DYN_ATTACHMENT.FormatDynamicAttachmentVariantIcon( f3_arg3.ref, f3_arg3.icon, f3_arg3.variantID )
	if DYN_ATTACHMENT.IsDynamicAttachmentIconOverriden( f3_local2 ) then
		f3_local0 = true
		f3_arg2:setImage( RegisterMaterial( f3_local2 ) )
	end
	local f3_local3 = f3_arg1
	local f3_local4 = f3_arg1.SetAlpha
	local f3_local5
	if f3_local0 then
		f3_local5 = 1
	else
		f3_local5 = 0
	end
	f3_local4( f3_local3, f3_local5 )
	f3_local3 = f3_arg2
	f3_local4 = f3_arg2.SetAlpha
	if f3_local0 then
		f3_local5 = 1
	else
		f3_local5 = 0
	end
	f3_local4( f3_local3, f3_local5 )
end

DYN_ATTACHMENT.KillCamMergeAttachmentsByWeaponModel = function ( f2_arg0, f2_arg1 )
	if CONDITIONS.InGame() then
		local f2_local0 = {}
		for f2_local1 = 1, #f2_arg1, 1 do
			local f2_local4 = tonumber( DYN_ATTACHMENT.GetDynamicAttachmentType( f2_arg1[f2_local1] ) )
			if f2_local4 then
				f2_local0[f2_local4] = f2_local1
			end
		end
		local f2_local1 = LUI.Split( f2_arg0, "+" )
		for f2_local2 = 2, #f2_local1, 1 do
			local f2_local6 = LUI.Split( f2_local1[f2_local2], "|" )
			if not f2_local0[tonumber( DYN_ATTACHMENT.GetDynamicAttachmentType( f2_local6[1] ) )] then
				table.insert( f2_arg1, f2_local1[f2_local2] )
			end
		end
		return f2_arg1
	else
		
	end
end

DYN_ATTACHMENT.KillCamGetDynamicAttachmentRefTable = function ( f1_arg0, f1_arg1 )
	if CONDITIONS.InGame() then
		return LUI.Split( Game[0x28624DEF6F708C8]( f1_arg1, "ui_killcam_killedby_attachments_str" ), "+" )
	else
		
	end
end

