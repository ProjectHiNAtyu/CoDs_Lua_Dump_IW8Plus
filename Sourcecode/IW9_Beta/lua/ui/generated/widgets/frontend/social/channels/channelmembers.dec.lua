-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:01
module( ..., package.seeall )
require( "ui.generated.widgets.buttonhelperbar" )
require( "ui.generated.widgets.buttonpromptcontainerhorizontal" )
require( "ui.generated.widgets.scrollbar.verticalminimalscrollbar" )
require( "ui.generated.widgets.frontend.social.socialprofilecardsmallchannels" )
require( "ui.generated.widgets.globalpanelsubheader" )
require( "ui.generated.widgets.channelserviceunavailablewarning" )
local f0_local0 = 500
local f0_local1 = {
	INVITE = 2,
	UNMUTE_ALL = 4,
	MUTE_ALL = 3,
	NONE = 1
}
local f0_local2 = function ( f11_arg0 )
	f11_arg0._partyDetails = CHANNELS.GetChannelDetails( f11_arg0._controllerIndex, f11_arg0._channelID )
	f11_arg0._memberData = CHANNELS.GetChannelMembers( f11_arg0._channelID )
	local f11_local0 = f11_arg0.MemberList:GetNumChildren()
	local f11_local1 = #f11_arg0._memberData
	if f11_local0 ~= f11_local1 then
		f11_arg0.MemberList:SetNumChildren( f11_local1 )
	end
	f11_arg0.MemberList:RefreshContent()
	f11_arg0.ChannelMembersHeader:SetHeaderText( ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xE50110AF96713ED, f11_arg0._partyDetails.memberInVoiceCount ) ) )
	f11_arg0:UpdateHeaderPrompt()
end

local f0_local3 = function ( f10_arg0 )
	local f10_local0 = nil
	if f10_arg0._channelType == Enum[0x71816B8A6999EAF][0x6779FA46C0A2058] then
		if CHANNELS.IsMyVoiceParty( f10_arg0._controllerIndex, f10_arg0._channelID ) and 1 < #f10_arg0._memberData then
			if Social[0x97E2C97762054B6]( f10_arg0._controllerIndex, f10_arg0._channelID ) then
				f10_local0 = f0_local0.UNMUTE_ALL
			else
				f10_local0 = f0_local0.MUTE_ALL
			end
		else
			f10_local0 = f0_local0.NONE
		end
	elseif Social[0x8E58C8219747691]( f10_arg0._channelID ) == Enum[0xD29163528F727][0x5530F5090E836C5] then
		f10_local0 = f0_local0.NONE
	else
		f10_local0 = f0_local0.INVITE
	end
	if f10_arg0._secondaryActionPrompt ~= f10_local0 then
		f10_arg0._secondaryActionPrompt = f10_local0
		f10_arg0.ButtonHelperBar.ButtonHelperText:PopButtonPrompt( {
			button_ref = "button_alt2"
		} )
		if f10_arg0._secondaryActionPrompt == f0_local0.INVITE then
			f10_arg0.ChannelMembersHeader:SetPrompt( f10_arg0.ButtonHelperBar, 0x18E05E812D5E3F3 )
		elseif f10_arg0._secondaryActionPrompt == f0_local0.MUTE_ALL then
			f10_arg0.ChannelMembersHeader:SetPrompt( f10_arg0.ButtonHelperBar, 0x46FABA13E586EDA )
		elseif f10_arg0._secondaryActionPrompt == f0_local0.UNMUTE_ALL then
			f10_arg0.ChannelMembersHeader:SetPrompt( f10_arg0.ButtonHelperBar, 0x7D144975A6EEA95 )
		end
	end
end

local f0_local4 = function ( f8_arg0 )
	f8_arg0.MemberList:SetMask( f8_arg0.ImageMask )
	f8_arg0.MemberList:SetRefreshChild( function ( f9_arg0, f9_arg1, f9_arg2 )
		local f9_local0 = f8_arg0._memberData[f9_arg2 + 1]
		f9_arg0:SetupPlayerData( f9_local0 )
		f9_arg0:SetupChannelData( f9_local0 )
	end )
	f8_arg0.MemberList:SetNumChildren( #f8_arg0._memberData )
end

local f0_local5 = function ( f4_arg0, f4_arg1, f4_arg2 )
	f4_arg0.UpdateHeaderPrompt = f0_local0
	f4_arg0._controllerIndex = f4_arg1
	f4_arg0._secondaryActionPrompt = f0_local0.NONE
	local f4_local0 = CHANNELS.GetChannelScopedData()
	f4_arg0._channelID = f4_local0.selectedChannelID
	f4_arg0._channelType = f4_local0.selectedChannelType
	f4_arg0._partyDetails = CHANNELS.GetChannelDetails( f4_arg0._controllerIndex, f4_arg0._channelID )
	f4_arg0._memberData = CHANNELS.GetChannelMembers( f4_arg0._channelID )
	f4_arg0.ChannelServiceUnavailableWarning:SetCurrentChannelTabID( CHANNELS.TAB_ID.MEMBERS )
	f0_local0( f4_arg0 )
	if not LUI.IsLastInputMouseNavigation( f4_arg1 ) then
		ACTIONS.GainFocus( f4_arg0, "MemberList" )
	end
	f4_arg0:addEventHandler( "update_input_type", function ( f7_arg0, f7_arg1 )
		if LUI.IsLastInputGamepad( f7_arg1.controllerIndex ) then
			ACTIONS.GainFocus( f7_arg0, "MemberList" )
		end
	end )
	f4_arg0:AddGamepadEventCallback( "button_alt2", function ( f6_arg0, f6_arg1 )
		if not f4_arg0._channelID then
			return false
		elseif f4_arg0._secondaryActionPrompt == f4_arg0.INVITE then
			if f4_arg0._channelType == Enum[0x71816B8A6999EAF][0x5F503BE0C38AF61] then
				SOCIAL.OpenQuickInvitesPopup( f4_arg0, LUI.SocialQuickInvitesPopup.MenuIds.PARTY_INVITE, {} )
			elseif f4_arg0._channelType == Enum[0x71816B8A6999EAF][0xC0E29ADAA5D346F] then
				SOCIAL.OpenQuickInvitesPopup( f4_arg0, LUI.SocialQuickInvitesPopup.MenuIds.CHANNEL_INVITE, {
					channelID = f4_arg0._channelID,
					descParam = f4_arg0._partyDetails.partyName
				} )
			end
		elseif f4_arg0._secondaryActionPrompt == f4_arg0.MUTE_ALL then
			Social[0x4F9EEF9CB166118]( f4_arg0._controllerIndex, f4_arg0._channelID, true )
		elseif f4_arg0._secondaryActionPrompt == f4_arg0.UNMUTE_ALL then
			Social[0x4F9EEF9CB166118]( f4_arg0._controllerIndex, f4_arg0._channelID, false )
		end
	end )
	f4_arg0.ButtonHelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		priority = 0,
		gamepad_only = true,
		button_ref = "button_start",
		helper_text = Engine[0xED84C33EC5F01EA]( 0xF2F6A0A4A145692 ),
		container = f4_arg0.ButtonPromptContainer
	} )
	f4_arg0:CreateEventTimer( "memberRefreshTimer", f0_local0, {
		immediate = true,
		callbackFunc = function ( f5_arg0, f5_arg1 )
			f4_arg0( f5_arg0 )
			return true
		end
	} )
end

function ChannelMembers( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 620 * _1080p, 0, 1080 * _1080p )
	self.id = "ChannelMembers"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local BackgroundInset = nil
	
	BackgroundInset = LUI.UIImage.new()
	BackgroundInset.id = "BackgroundInset"
	BackgroundInset:SetRGBFromInt( 0, 0 )
	BackgroundInset:SetAlpha( 0.45, 0 )
	BackgroundInset:setImage( RegisterMaterial( 0x69E60085209E5A4 ), 0 )
	BackgroundInset:Setup9SliceImage( _1080p * 20, _1080p * 20, 0.3, 0.3 )
	BackgroundInset:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 18, _1080p * 601, _1080p * 236, _1080p * 939 )
	self:addElement( BackgroundInset )
	self.BackgroundInset = BackgroundInset
	
	local ButtonHelperBar = nil
	
	ButtonHelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	ButtonHelperBar.id = "ButtonHelperBar"
	ButtonHelperBar:SetAlpha( 0, 0 )
	ButtonHelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, _1080p * 22, _1080p * -22, _1080p * -82, _1080p * -22 )
	self:addElement( ButtonHelperBar )
	self.ButtonHelperBar = ButtonHelperBar
	
	local ButtonPromptContainer = nil
	ButtonPromptContainer = MenuBuilder.BuildRegisteredType( "ButtonPromptContainerHorizontal", {
		controllerIndex = f1_local1
	} )
	ButtonPromptContainer.id = "ButtonPromptContainer"
	if CONDITIONS.AlwaysFalse() then
		ButtonPromptContainer.Label:setText( "ButtonPrompt", 0 )
	end
	ButtonPromptContainer:SetAnchorsAndPosition( 0, 1, 1, 0, _1080p * 22, _1080p * 122, _1080p * -53, _1080p * -22 )
	self:addElement( ButtonPromptContainer )
	self.ButtonPromptContainer = ButtonPromptContainer
	
	local VerticalMinimalScrollbar = nil
	
	VerticalMinimalScrollbar = MenuBuilder.BuildRegisteredType( "VerticalMinimalScrollbar", {
		controllerIndex = f1_local1
	} )
	VerticalMinimalScrollbar.id = "VerticalMinimalScrollbar"
	VerticalMinimalScrollbar:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 601, _1080p * 606, _1080p * 258, _1080p * 911 )
	self:addElement( VerticalMinimalScrollbar )
	self.VerticalMinimalScrollbar = VerticalMinimalScrollbar
	
	local MemberList = nil
	
	MemberList = LUI.UIGrid.new( {
		maxVisibleColumns = 1,
		maxVisibleRows = 5,
		controllerIndex = f1_local1,
		buildChild = function ()
			return MenuBuilder.BuildRegisteredType( "SocialProfileCardSmallChannels", {
				controllerIndex = menu
			} )
		end,
		refreshChild = function ( f2_arg0, f2_arg1, f2_arg2 )
			
		end,
		spacingY = _1080p * 6,
		columnWidth = _1080p * 528,
		rowHeight = _1080p * 124
	} )
	MemberList.id = "MemberList"
	MemberList:SetMaxVisibleRows( 5 )
	MemberList:SetRowSpacing( 6 )
	MemberList:setUseStencil( true )
	MemberList:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -265, _1080p * 265, _1080p * 258, _1080p * 912 )
	self:addElement( MemberList )
	self.MemberList = MemberList
	
	local ImageMask = nil
	
	ImageMask = LUI.UIImage.new()
	ImageMask.id = "ImageMask"
	ImageMask:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 18, _1080p * 594, _1080p * 257, _1080p * 917 )
	self:addElement( ImageMask )
	self.ImageMask = ImageMask
	
	local ChannelMembersHeader = nil
	
	ChannelMembersHeader = MenuBuilder.BuildRegisteredType( "GlobalPanelSubHeader", {
		controllerIndex = f1_local1
	} )
	ChannelMembersHeader.id = "ChannelMembersHeader"
	ChannelMembersHeader.Text:setText( Engine[0xED84C33EC5F01EA]( 0xE50110AF96713ED ), 0 )
	ChannelMembersHeader:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 18, _1080p * 601, _1080p * 195, _1080p * 227 )
	self:addElement( ChannelMembersHeader )
	self.ChannelMembersHeader = ChannelMembersHeader
	
	local ChannelServiceUnavailableWarning = nil
	
	ChannelServiceUnavailableWarning = MenuBuilder.BuildRegisteredType( "ChannelServiceUnavailableWarning", {
		controllerIndex = f1_local1
	} )
	ChannelServiceUnavailableWarning.id = "ChannelServiceUnavailableWarning"
	ChannelServiceUnavailableWarning:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, _1080p * -310, _1080p * 310, _1080p * -914, _1080p * -80 )
	self:addElement( ChannelServiceUnavailableWarning )
	self.ChannelServiceUnavailableWarning = ChannelServiceUnavailableWarning
	
	local f1_local10 = LUI.UIScrollbar.new
	local f1_local11 = {
		direction = LUI.DIRECTION.vertical,
		eventListener = VerticalMinimalScrollbar,
		startCap = VerticalMinimalScrollbar.startCap,
		endCap = VerticalMinimalScrollbar.endCap,
		sliderArea = VerticalMinimalScrollbar.sliderArea
	}
	local f1_local12 = VerticalMinimalScrollbar.sliderArea
	if f1_local12 then
		f1_local12 = VerticalMinimalScrollbar.sliderArea.slider
	end
	f1_local11.slider = f1_local12
	f1_local12 = VerticalMinimalScrollbar.sliderArea
	if f1_local12 then
		f1_local12 = VerticalMinimalScrollbar.sliderArea.fixedSizeSlider
	end
	f1_local11.fixedSizeSlider = f1_local12
	MemberList:AddScrollbar( f1_local10( f1_local11 ) )
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "ChannelMembers", ChannelMembers )
LockTable( _M )
