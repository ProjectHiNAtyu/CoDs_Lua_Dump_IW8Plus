-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:52
module( ..., package.seeall )
local f0_local0 = function ( f12_arg0, f12_arg1 )
	local f12_local0 = 27
	if f12_arg0._currentItemType == BRLOOT.itemTypes.TRADER then
		if Game.BFEEGCHICA( f12_arg1, "ui_br_weapon_trader_trade_data1", f12_local0 ) == 1 then
			ACTIONS.AnimateSequence( f12_arg0, "ModHideAll" )
		elseif BRLOOT.ShouldShowLootCard( f12_arg1 ) and not CONDITIONS.IsPlayerAZombie( f12_arg1 ) and not f12_arg0._isHidden then
			ACTIONS.AnimateSequence( f12_arg0, "ModShowWeaponTrader" )
		end
	end
end

local f0_local1 = function ( f9_arg0, f9_arg1, f9_arg2 )
	assert( f9_arg2 )
	assert( f9_arg2.nativeLootDataTable )
	if f9_arg0.inADS then
		ACTIONS.AnimateSequence( f9_arg0, "ModHideAll" )
	end
	local f9_local0 = BRLOOT.GetLootDataForLookupKeys( {
		nameRef = f9_arg2.nativeLootDataTable.name,
		itemCategory = BRLOOT.itemCategories.ITEM
	} )
	if not f9_local0 then
		DebugPrint( "LootCard csv lookup failed for item named: " .. f9_arg2.nativeLootDataTable.name .. ", with itemCatgetory: " .. BRLOOT.itemCategories.ITEM )
	end
	local f9_local1 = LUI.Split( f9_local0.type, "_" )
	f9_local1 = f9_local1[1]
	local f9_local2 = BRLOOT.itemTypeData[f9_local1]
	local f9_local3 = "MP_BR_INGAME_TU_WZ325/ARMORY_TRADER_HOLD"
	if f9_local2 and f9_local2.uniqueInputString then
		f9_local3 = f9_local2.uniqueInputString
	end
	f9_arg0._currentItemType = f9_local1
	if f9_local1 == BRLOOT.itemTypes.TRADER then
		f9_arg0._isHidden = false
		f0_local0( f9_arg0, f9_arg1 )
		f9_arg0.WeaponTrader:CustomUpdate( f9_arg1 )
		f9_arg0:registerOmnvarHandler( "ui_br_weapon_trader_trade_data0", function ( f11_arg0, f11_arg1 )
			if f11_arg0._currentItemType == BRLOOT.itemTypes.TRADER then
				f11_arg0.WeaponTrader:CustomUpdate( f9_arg0 )
			end
		end )
		f9_arg0:registerOmnvarHandler( "ui_br_weapon_trader_trade_data1", function ( f10_arg0, f10_arg1 )
			f9_arg0( f10_arg0, f9_arg0 )
		end )
	end
	f9_arg0.InteractButton.Text:setText( Engine.CBBHFCGDIC( f9_local3 ) )
	if CONDITIONS.IsSpectating( f9_arg1 ) then
		ACTIONS.AnimateSequence( f9_arg0, "ModHideAll" )
	end
end

local f0_local2 = function ( f8_arg0 )
	ACTIONS.AnimateSequence( f8_arg0, "ModHideAll" )
	f8_arg0._isHidden = true
end

local f0_local3 = function ( f7_arg0, f7_arg1 )
	BRLOOT.UpdateLootCard( f7_arg0, f7_arg1, {
		CustomUpdate = f0_local0,
		CustomHideRoutine = f0_local0
	} )
end

local f0_local4 = function ( f6_arg0, f6_arg1 )
	f6_arg0.UpdateLootCard = f0_local0
	f6_arg0.HideCard = f0_local0
end

function BRInteractiveLootCardWeaponTrader( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 600 * _1080p, 0, 172 * _1080p )
	self.id = "BRInteractiveLootCardWeaponTrader"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local Background = nil
	
	Background = LUI.UIImage.new()
	Background.id = "Background"
	Background:SetRGBFromInt( 0, 0 )
	Background:SetAlpha( 0.7, 0 )
	Background:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 600, _1080p * 36, _1080p * 445 )
	self:addElement( Background )
	self.Background = Background
	
	local HeaderBg = nil
	
	HeaderBg = LUI.UIImage.new()
	HeaderBg.id = "HeaderBg"
	HeaderBg:SetRGBFromTable( SWATCHES.CH2.Ch2DarkGrey, 0 )
	HeaderBg:SetAlpha( 0.75, 0 )
	HeaderBg:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 600, _1080p * -2, _1080p * 36 )
	self:addElement( HeaderBg )
	self.HeaderBg = HeaderBg
	
	local InteractButton = nil
	
	InteractButton = MenuBuilder.BuildRegisteredType( "BRLootCardInteract", {
		controllerIndex = f1_local1
	} )
	InteractButton.id = "InteractButton"
	InteractButton:SetRGBFromTable( SWATCHES.HUD.HUDMain, 0 )
	InteractButton.Text:setText( Engine.CBBHFCGDIC( "GAME/HOLD" ), 0 )
	InteractButton:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 11, _1080p * 311, _1080p * 1, _1080p * 41 )
	self:addElement( InteractButton )
	self.InteractButton = InteractButton
	
	local Ping = nil
	
	Ping = MenuBuilder.BuildRegisteredType( "BRLootCardPing", {
		controllerIndex = f1_local1
	} )
	Ping.id = "Ping"
	Ping:SetRGBFromTable( SWATCHES.HUD.HUDMain, 0 )
	Ping:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 467, _1080p * 597, 0, _1080p * 40 )
	self:addElement( Ping )
	self.Ping = Ping
	
	local WeaponTrader = nil
	
	WeaponTrader = MenuBuilder.BuildRegisteredType( "BRLootCardWeaponTrader", {
		controllerIndex = f1_local1
	} )
	WeaponTrader.id = "WeaponTrader"
	WeaponTrader:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 600, _1080p * 36, _1080p * 386 )
	self:addElement( WeaponTrader )
	self.WeaponTrader = WeaponTrader
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	local f1_local8 = nil
	Background:RegisterAnimationSequence( "ModHideAll", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	HeaderBg:RegisterAnimationSequence( "ModHideAll", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	InteractButton:RegisterAnimationSequence( "ModHideAll", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	Ping:RegisterAnimationSequence( "ModHideAll", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	WeaponTrader:RegisterAnimationSequence( "ModHideAll", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ModHideAll = function ()
		menu:AnimateSequence( "ModHideAll" )
		menu:AnimateSequence( "ModHideAll" )
		menu:AnimateSequence( "ModHideAll" )
		menu:AnimateSequence( "ModHideAll" )
		menu:AnimateSequence( "ModHideAll" )
	end
	
	local f1_local9 = nil
	Background:RegisterAnimationSequence( "ModShowWeaponTrader", {
		{
			value = 1.9035983712402182E+185,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	HeaderBg:RegisterAnimationSequence( "ModShowWeaponTrader", {
		{
			value = 5.297218497E-315,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	InteractButton:RegisterAnimationSequence( "ModShowWeaponTrader", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	Ping:RegisterAnimationSequence( "ModShowWeaponTrader", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	WeaponTrader:RegisterAnimationSequence( "ModShowWeaponTrader", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ModShowWeaponTrader = function ()
		menu:AnimateSequence( "ModShowWeaponTrader" )
		menu:AnimateSequence( "ModShowWeaponTrader" )
		menu:AnimateSequence( "ModShowWeaponTrader" )
		menu:AnimateSequence( "ModShowWeaponTrader" )
		menu:AnimateSequence( "ModShowWeaponTrader" )
	end
	
	local f1_local10 = nil
	InteractButton:RegisterAnimationSequence( "ModHideButtonPrompts", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	Ping:RegisterAnimationSequence( "ModHideButtonPrompts", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ModHideButtonPrompts = function ()
		menu:AnimateSequence( "ModHideButtonPrompts" )
		menu:AnimateSequence( "ModHideButtonPrompts" )
	end
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "BRInteractiveLootCardWeaponTrader", BRInteractiveLootCardWeaponTrader )
LockTable( _M )
