-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
module( ..., package.seeall )
FenceJumpScareOptOut = LUI.Class( LUI.Fence )
FenceJumpScareOptOut.init = function ( f12_arg0 )
	LUI.Fence.init( f12_arg0 )
end

FenceJumpScareOptOut.Start = function ( f11_arg0 )
	
end

FenceJumpScareOptOut.Stop = function ( f10_arg0 )
	
end

FenceJumpScareOptOut.PostFail = function ( f9_arg0 )
	
end

FenceJumpScareOptOut.OnBackOut = function ( f8_arg0 )
	
end

FenceJumpScareOptOut.OpenPopup = function ( f7_arg0, f7_arg1 )
	LUI.FlowManager.RequestPopupMenu( nil, "DisableJumpscaresPopup", true, f7_arg1, false, nil, nil, true, true )
end

FenceJumpScareOptOut.UpdateState = function ( f6_arg0 )
	f6_arg0._state = LUI.Fence.STATE.pass
	local f6_local0 = false
	for f6_local1 = 0, Engine[0xB686A0A723E6442]() - 1, 1 do
		local f6_local4 = Engine[0x10A5732AB1DAE9F]( f6_local1 )
		local f6_local5
		if f6_local4 then
			f6_local5 = f6_local4
		else
			f6_local5 = Engine[0x757E77CA15D6B8F]( f6_local1 )
		end
		if f6_local4 and not f6_local5 then
			if CONDITIONS.ShouldShowDisableJumpscaresPopup( f6_local1 ) then
				f6_arg0._state = LUI.Fence.STATE.block
				if not f6_arg0._playerOptOut then
					f6_arg0:OpenPopup( f6_local1 )
					f6_arg0._playerOptOut = f6_local1
					break
				end
			elseif f6_local1 == f6_arg0._playerOptOut then
				f6_arg0._playerOptOut = nil
			end
		end
	end
	if f6_arg0._playerOptOut == nil and f6_arg0._state ~= LUI.Fence.STATE.block then
		f6_arg0._state = LUI.Fence.STATE.pass
	end
end

function DisableJumpscaresPopup( f1_arg0, f1_arg1 )
	local f1_local0 = function ( f5_arg0, f5_arg1 )
		Engine[0x9694388D6DAC134]( "jumpScareDisable", f5_arg1, f5_arg0 )
		Engine[0x9694388D6DAC134]( "hasSeenDisableJumpScaresPopup", true, f5_arg0 )
		Engine[0xB81A5136C5503E4]( "updategamerprofile" )
	end
	
	local f1_local1 = MenuBuilder.BuildRegisteredType( "PopupYesNo", {
		defaultFocusIndex = 1,
		cancelClosesPopup = false,
		noBackButton = true,
		message = Engine[0xED84C33EC5F01EA]( 0x62A3194D6D98A9A ),
		yesLabel = Engine[0xED84C33EC5F01EA]( 0x29CFF1B2FB81441 ),
		noLabel = Engine[0xED84C33EC5F01EA]( 0x5C021A8F6CC0045 ),
		controllerIndex = f1_arg1.controllerIndex,
		cancelAction = function ()
			
		end,
		yesAction = function ( f3_arg0, f3_arg1 )
			f1_arg0( f3_arg1, false )
		end,
		noAction = function ( f2_arg0, f2_arg1 )
			f1_arg0( f2_arg1, true )
		end
	} )
	f1_local1.id = "DisableJumpscaresPopup"
	return f1_local1
end

MenuBuilder.registerType( "DisableJumpscaresPopup", DisableJumpscaresPopup )
LUI.Fence.Register( "jumpscareOptOut", FenceJumpScareOptOut )
LockTable( _M )
