-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:04
MenuUtils = MenuUtils or {}
MenuUtils.MenusBlockingConnectionPopups = {
	nil,
	"popup_leave_game",
	"leave_public_mp_lobby",
	"leave_private_mp_lobby",
	nil,
	"splash_screens",
	[4] = CoD.PauseMenuName[CoD.PauseMenu.MP_PAUSE_MENU]
}
MenuUtils.FENCEDLCTIMER = 5000
local f0_local0 = 250
MenuUtils.AddDismissPauseMenuKBMHandler = function ( f107_arg0 )
	f107_arg0:addEventHandler( "gamepad_button", function ( f108_arg0, f108_arg1 )
		if f108_arg1.down and f108_arg1.button == "menu_dismiss" and not Engine[0x12586A3F4FB490E]() then
			if Engine[0x74423E76DECE3E4]() then
				ACTIONS.ResumeGame( f108_arg0 )
			end
			local f108_local0 = Engine[0xEE6F69FEA944B13]()
			f108_local0 = f108_local0.flowManager:GetStackTop()
			LUI.FlowManager.RequestCloseAllMenus( f108_local0.name, true, f108_arg1.controller )
			return true
		else
			return false
		end
	end )
end

MenuUtils.CanShowConnectionPopups = function ()
	local f106_local0 = true
	local f106_local1 = Engine[0xEE6F69FEA944B13]()
	f106_local1 = f106_local1.flowManager:GetStackTop()
	if f106_local1 then
		if f106_local1.buildData.isBlockingConnectionPopup then
			f106_local0 = false
		else
			for f106_local5, f106_local6 in ipairs( MenuUtils.MenusBlockingConnectionPopups ) do
				if f106_local6 == f106_local1.name then
					f106_local0 = false
					break
				end
			end
		end
	end
	return f106_local0
end

MenuUtils.Ordinals = {
	nil,
	0xBEF3D1720769F01,
	0x4E6F4171CF06399,
	0x9CCE91715F665B6,
	0x733EE1738F50E91,
	0xFEBE3173539588E,
	0x574B8172EC9859B,
	0xE116D172AF69B20,
	0xB3BBA174DC21035,
	0xC38F1747508A42,
	0x147A24D688FA21E,
	0x88EED4D6C4A11E1,
	0xF6C6C4D5E4B9E70,
	0x6CF774D621E1C2B,
	0xD40064D53C2F20A,
	0x4BE314D57AC6DDD,
	0xB2EB04D4951288C,
	0x5F7FB4D50073C07,
	0x625EA4D8F71D0E6,
	0xD6E354D932DF3A9,
	0x924564472D34C4D,
	0x1A52B446EE81D7A,
	0xA5DE0446B2DADB7,
	0xF93D544647653FC,
	0xCF4D24487708391
}
MenuUtils.MakeOrdinal = function ( f105_arg0 )
	return Engine[0xED84C33EC5F01EA]( MenuUtils.Ordinals[f105_arg0] )
end

MenuUtils.OrdinalText = {
	nil,
	0x73710B66909E4A,
	0xBC657A4FC8FCCB8,
	0x5085F3D8033024D,
	0xA827A6109355274
}
MenuUtils.OrdinalTextFem = {
	nil,
	0xFBD17B950703E5,
	0x92702C17B54165B,
	0x645C0CE45658406,
	0x8B54BB7C92EFEC7
}
MenuUtils.GetOrdinalPlacment = function ( f104_arg0 )
	local f104_local0 = ""
	if f104_arg0 % 100 == 11 or f104_arg0 % 100 == 12 or f104_arg0 % 100 == 13 then
		f104_local0 = 0xA827A6109355274
	else
		local f104_local1 = MenuUtils.OrdinalText[f104_arg0 % 10]
		if not f104_local1 then
			f104_local0 = f104_local1
		else
			f104_local0 = 0xA827A6109355274
		end
	end
	return Engine[0xED84C33EC5F01EA]( f104_local0, f104_arg0 )
end

MenuUtils.GetOrdinalNumber = function ( f103_arg0, f103_arg1 )
	local f103_local0
	if f103_arg1 then
		f103_local0 = MenuUtils.OrdinalTextFem
		if not f103_local0 then
		
		else
			local f103_local1 = f103_local0[f103_arg0]
			if not f103_local1 then
				f103_local1 = f103_local0[4]
			end
			return f103_local1
		end
	end
	f103_local0 = MenuUtils.OrdinalText
end

MenuUtils.SetupSceneChangeCallback = function ( f101_arg0, f101_arg1 )
	if f101_arg0._sceneTimer then
		f101_arg0._sceneTimer:closeTree()
		f101_arg0._sceneTimer = nil
	end
	f101_arg0._sceneTimer = LUI.UITimer.new( {
		interval = 50,
		event = "check_scene_transition"
	} )
	f101_arg0:addElement( f101_arg0._sceneTimer )
	local f101_local0 = 1
	f101_arg0:deregisterEventHandler( "check_scene_transition" )
	f101_arg0:registerEventHandler( "check_scene_transition", function ( element, event )
		if #Dvar[0x54084D7CA2317BB]( 0x8CC749B90DD2705 ) == 0 and Engine[0x283B38F2501D924]() then
			if element._sceneTimer then
				element._sceneTimer:closeTree()
				element._sceneTimer = nil
			end
			f101_arg0( element )
		end
		if CONDITIONS.IsMobileOrMobileSim() and f101_arg0 == 5 then
			Engine[0x6055C55456F05DF]( "pass_store_weapon_update", 1 )
			f101_arg0 = 0
		end
		f101_arg0 = f101_arg0 + 1
		return true
	end )
end

MenuUtils.SetupXModelsLoadedCallback = function ( f99_arg0, f99_arg1, f99_arg2, f99_arg3 )
	local f99_local0 = nil
	local f99_local1 = function ()
		if not Streaming[0x19E17A0E38F313A]() then
			return 
		elseif STREAMING.AreXModelsReadyToDisplay( f99_arg0, f99_arg0, f99_arg0 ) then
			f99_arg0()
		else
			local f100_local0 = f99_arg0:Wait( 100 )
			f100_local0.onComplete = f99_arg0
		end
	end
	
	f99_local1()
end

MenuUtils.WaitForEntitySystem = function ( menu, controller )
	menu._entitySystemTimer = LUI.UITimer.new( {
		interval = -28,
		event = "check_entity_system_allocated"
	} )
	menu:addElement( menu._entitySystemTimer )
	menu:registerEventHandler( "check_entity_system_allocated", function ( element, event )
		if Engine[0x283B38F2501D924]() and element._entitySystemTimer then
			element._entitySystemTimer:closeTree()
			element._entitySystemTimer = nil
			menu()
		end
		return true
	end )
end

MenuUtils.GetMainMenu = function ()
	if Engine[0xCA085C21FCBD7CA]() then
		return "CPMainMenu"
	elseif Engine[0xD151EC5B41223B5]() then
		if Engine[0x220CB915CEFC1FE]() then
			return "BRMainMenu"
		else
			return "MPMainMenu"
		end
	else
		return "MainMeu"
	end
end

MenuUtils.SortViaFunctions = function ( f95_arg0, f95_arg1 )
	for f95_local3, f95_local4 in ipairs( MenuUtils._options ) do
		local f95_local5 = f95_local4.sortFunc( f95_arg0, f95_arg1, f95_local4.sortFuncParams )
		if f95_local5 ~= nil then
			return f95_local5
		end
	end
	return false
end

MenuUtils.SortNoneValue = function ( f94_arg0, f94_arg1, f94_arg2 )
	if f94_arg0.ref ~= f94_arg2.noneValue and f94_arg1.ref == f94_arg2.noneValue then
		return false
	elseif f94_arg0.ref == f94_arg2.noneValue and f94_arg1.ref ~= f94_arg2.noneValue then
		return true
	else
		return nil
	end
end

MenuUtils.SortFavorites = function ( f93_arg0, f93_arg1, f93_arg2 )
	if f93_arg2.favoritesTable[f93_arg0.ref] ~= f93_arg2.favoritesTable[f93_arg1.ref] then
		local f93_local0 = f93_arg2.favoritesTable[f93_arg0.ref]
		if f93_local0 then
			f93_local0 = not f93_arg2.favoritesTable[f93_arg1.ref]
		end
		return f93_local0
	else
		return nil
	end
end

MenuUtils.SortNew = function ( f92_arg0, f92_arg1, f92_arg2 )
	local f92_local0 = Loot[0xB853FAE9166621]( f92_arg2.controllerIndex, f92_arg0.lootID )
	local f92_local1 = Loot[0xB853FAE9166621]( f92_arg2.controllerIndex, f92_arg1.lootID )
	if f92_local0 ~= f92_local1 then
		local f92_local2
		if f92_local0 then
			f92_local2 = f92_local0
		else
			f92_local2 = not f92_local1
		end
		return f92_local2
	else
		return nil
	end
end

MenuUtils.SortOriginProject = function ( f91_arg0, f91_arg1 )
	if f91_arg0.originProject ~= f91_arg1.originProject then
		return f91_arg1.originProject < f91_arg0.originProject
	else
		return nil
	end
end

MenuUtils.SortUnlocks = function ( f90_arg0, f90_arg1 )
	if f90_arg0.isUnlocked ~= f90_arg1.isUnlocked then
		local f90_local0 = f90_arg0.isUnlocked
		if f90_local0 then
			f90_local0 = not f90_arg1.isUnlocked
		end
		return f90_local0
	else
		return nil
	end
end

MenuUtils.SortUnlocksOrPurchasable = function ( f89_arg0, f89_arg1 )
	if f89_arg0.isUnlocked ~= f89_arg1.isUnlocked then
		local f89_local0 = f89_arg0.isUnlocked
		if f89_local0 then
			f89_local0 = not f89_arg1.isUnlocked
		end
		return f89_local0
	else
		return nil
	end
end

MenuUtils.SortSeasons = function ( f88_arg0, f88_arg1, f88_arg2 )
	if f88_arg0.season ~= f88_arg1.season then
		if f88_arg2.seasonsSortingType == LOOT.seasonsSortingOptions.OLD_FIRST then
			return f88_arg0.season < f88_arg1.season
		elseif f88_arg2.seasonsSortingType == LOOT.seasonsSortingOptions.RECENT_FIRST then
			return f88_arg1.season < f88_arg0.season
		end
	end
	return nil
end

MenuUtils.WaitUntilCondition = function ( f85_arg0, f85_arg1, f85_arg2, f85_arg3 )
	local f85_local0 = function ()
		local f87_local0
		if f85_arg0._totalWaitTime and f85_arg0 > f85_arg0._totalWaitTime then
			f87_local0 = false
		else
			f87_local0 = true
		end
		if f87_local0 then
			f85_arg0._totalWaitTime = f85_arg0
		else
			f85_arg0._totalWaitTime = f85_arg0._totalWaitTime + f85_arg0
		end
		if f85_arg0 <= f85_arg0._totalWaitTime then
			return true
		else
			return false
		end
	end
	
	local f85_local1 = f85_arg0:Wait( f0_local0, true )
	f85_local1.onComplete = function ( f86_arg0 )
		if not (not f85_arg0 or not f85_arg0()) or f85_arg0 and f85_arg0() then
			f85_arg0( f86_arg0 )
		else
			MenuUtils.WaitUntilCondition( f86_arg0, f85_arg0, f85_arg0, f85_arg0 )
		end
	end
	
end

MenuUtils.SortName = function ( f84_arg0, f84_arg1 )
	local f84_local0 = Engine[0xED84C33EC5F01EA]( f84_arg0.name )
	local f84_local1 = Engine[0xED84C33EC5F01EA]( f84_arg1.name )
	if f84_local0 ~= f84_local1 then
		return f84_local0 < f84_local1
	else
		return nil
	end
end

MenuUtils.SortNameLocalized = function ( f83_arg0, f83_arg1 )
	if f83_arg0.localizedName ~= f83_arg1.localizedName then
		return f83_arg0.localizedName < f83_arg1.localizedName
	else
		return nil
	end
end

MenuUtils.SortTableViaOptions = function ( f82_arg0, f82_arg1 )
	MenuUtils._options = f82_arg1
	table.sort( f82_arg0, MenuUtils.SortViaFunctions )
	MenuUtils._options = nil
end

MenuUtils.SetupSubMenuTab = function ( f51_arg0, f51_arg1, f51_arg2 )
	local f51_local0 = function ( f81_arg0, f81_arg1 )
		local f81_local0 = f81_arg0._isRestricted or false
		local f81_local1 = f81_arg0.NewItemSmallIcon
		local f81_local2 = f81_local1
		f81_local1 = f81_local1.UpdateAlpha
		local f81_local3
		if f81_arg1 and not f81_local0 then
			f81_local3 = 1
		else
			f81_local3 = 0
		end
		f81_local1( f81_local2, f81_local3 )
	end
	
	local f51_local1 = function ( f80_arg0, f80_arg1 )
		if not f80_arg0.Banner then
			local f80_local0 = nil
			f80_local0 = MenuBuilder.BuildRegisteredType( "BattlePassFreeBanner", {
				controllerIndex = f80_arg0._controllerIndex
			} )
			f80_local0.id = "Banner"
			f80_local0:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, 0, 24 )
			f80_local0:setPriority( -1 )
			f80_local0:SetAlpha( 1 )
			f80_arg0:addElement( f80_local0 )
			f80_arg0.Banner = f80_local0
		end
		f80_arg0.Banner:SetText( f80_arg1 )
	end
	
	local f51_local2 = nil
	f51_local2 = function ( f78_arg0, f78_arg1, f78_arg2 )
		if not f78_arg1 or #f78_arg1 <= 0 then
			
		end
		local f78_local0 = f78_arg0.Banner:Wait( f51_arg0, true )
		f78_local0.onComplete = function ()
			if LUI.FlowManager.IsMenuOnTop( f78_arg0 ) then
				f78_arg0()
			else
				f78_arg0( f78_arg0, f78_arg0, f78_arg0 )
			end
		end
		
	end
	
	local f51_local3 = function ( f75_arg0, f75_arg1 )
		f51_arg0( f75_arg0, Engine[0xED84C33EC5F01EA]( 0x1580AC0D78CF1C9 ) )
		f75_arg0.Banner.FreeText:SetTracking( 0, 0 )
		if f75_arg1 then
			f75_arg0.Banner:SetAlpha( 1 )
			ACTIONS.AnimateSequence( f75_arg0.Banner, "FreeBundleVariant" )
			if Dvar[0x9E5BE3B4BBA4E0E]( 0x21761462AFB421E ) then
				local f75_local0 = LUI.DataSourceInGlobalModel.new( "alwaysLoaded.storeTabFreeBundleVisibilitySeen" )
				if not f75_local0:GetValue( f75_arg0._controllerIndex ) then
					f75_arg0.Banner:SetAlpha( 0 )
					f75_arg0:addEventHandler( "menu_create", function ( f76_arg0, f76_arg1 )
						local f76_local0
						if f76_arg0:GetCurrentMenu() then
							f76_local0 = f76_arg0:GetCurrentMenu()
							f76_local0 = f76_local0.id
							if not f76_local0 then
							
							else
								f75_arg0( f75_arg0, f76_local0, function ()
									f76_arg0.Banner:SetAlpha( 1 )
									Engine[0xC4146BA76D0F982]( SOUND_SETS.mpMainMenu.freeBannerSplash )
									ACTIONS.AnimateSequence( f76_arg0.Banner, "Splash" )
									f76_arg0:SetValue( f76_arg0._controllerIndex, true )
								end )
							end
						end
						f76_local0 = ""
					end )
				end
				if not f75_arg0._isFreeItem then
					ACTIONS.AnimateSequence( f75_arg0, "FreeBundleTabUp" )
				end
				f75_arg0._isFreeItem = true
			end
		else
			f75_arg0.Banner:SetAlpha( 0 )
		end
	end
	
	local f51_local4 = function ( f73_arg0, f73_arg1 )
		f51_arg0( f73_arg0, "" )
		local f73_local0 = nil
		local f73_local1 = function ()
			local f74_local0, f74_local1, f74_local2 = STORE.GetCategoryTimeLeft( nil, f73_arg0 )
			if 0 < f74_local0 then
				f73_arg0.Banner:SetText( f74_local1, true )
				f73_arg0.Banner:SetAlpha( 1 )
				local f74_local3 = f73_arg0.Banner:Wait( 1000, true )
				f74_local3.onComplete = f73_arg0
				if f74_local0 < STORE.LimitedTimeWarningThreshold then
					ACTIONS.AnimateSequence( f73_arg0.Banner, "LimitedTimeWarningVariant" )
				else
					ACTIONS.AnimateSequence( f73_arg0.Banner, "LimitedTimeVariant" )
				end
			else
				f73_arg0.Banner:SetText( "" )
				f73_arg0.Banner:SetAlpha( 0 )
			end
		end
		
		f73_local1()
	end
	
	local f51_local5 = function ( f72_arg0 )
		f51_arg0( f72_arg0, Engine[0xED84C33EC5F01EA]( 0xAA9D4A70FC2AF79, SEASON.GetCurrentSeason() ) )
		ACTIONS.AnimateSequence( f72_arg0.Banner, "SeasonVariant" )
	end
	
	local f51_local6 = function ( f71_arg0 )
		f51_arg0( f71_arg0, Engine[0xED84C33EC5F01EA]( 0xBAFF02F27ED86CA ) )
		ACTIONS.AnimateSequence( f71_arg0.Banner, "Zeus" )
	end
	
	local f51_local7 = function ( f68_arg0, f68_arg1, f68_arg2 )
		if not f68_arg1 then
			
		else
			
		end
		local f68_local0 = f68_arg1 - CoD.GetUTC()
		local f68_local1 = 86400
		local f68_local2 = "promo_tab_timer"
		if f68_local0 <= 0 then
			
		else
			
		end
		f51_arg0( f68_arg0, "" )
		f68_arg0._promoTimer = LUI.UITimer.new( {
			interval = 1000,
			event = f68_local2
		} )
		f68_arg0._promoTimer.id = "PromoTabTimer"
		f68_arg0:addElement( f68_arg0._promoTimer )
		f68_arg0.Banner.Shine:SetAlpha( 0.5 )
		ACTIONS.AnimateSequence( f68_arg0.Banner, "GlintSlow" )
		local f68_local3 = function ()
			if f68_arg0 then
				local f70_local0
				if CONDITIONS.IsTierSaleEnabled() then
					f70_local0 = not BATTLEPASS.IsOwned( f68_arg0._controllerIndex )
				else
					f70_local0 = true
				end
				return f70_local0
			else
				local f70_local0
				if BATTLEPASS.IsTierSkipGiftActive( f68_arg0._controllerIndex ) then
					f70_local0 = BATTLEPASS.IsOwned( f68_arg0._controllerIndex )
				else
					f70_local0 = true
				end
			end
			return f70_local0
		end
		
		f68_arg0:addAndCallEventHandler( f68_local2, function ( f69_arg0, f69_arg1 )
			f68_arg0 = CoD.GetUTC()
			f68_arg0 = f68_arg0 - f68_arg0
			if f68_arg0 <= 0 or f68_arg0() then
				if f68_arg0._promoTimer then
					f68_arg0._promoTimer:closeTree()
					f68_arg0._promoTimer = nil
				end
				if f68_arg0._isBattlePassTab then
					ACTIONS.AnimateSequence( f68_arg0.Banner, "StopGlint" )
					f68_arg0:SetSeasonBanner()
				else
					f68_arg0.Banner:SetAlpha( 0 )
				end
			else
				f68_arg0.Banner:SetText( Engine[0xED84C33EC5F01EA]( f68_arg0 and 0xE80981DD5B16084 or 0xC9C1C5B452AACCD ) )
				ACTIONS.AnimateSequence( f68_arg0.Banner, "TabSizeSetup" )
				if f68_arg0 < f68_arg0 then
					ACTIONS.AnimateSequence( f68_arg0.Banner, "TierSaleVariant" )
				else
					ACTIONS.AnimateSequence( f68_arg0.Banner, "TierSaleVariantEndSoon" )
				end
			end
		end )
	end
	
	f51_arg0.IsRestricted = function ( f67_arg0, f67_arg1 )
		return Restrictions.AreAnyRestrictionInUse( f67_arg1 )
	end
	
	f51_arg0._isBattlePassTab = false
	f51_arg0._controllerIndex = f51_arg1
	f51_arg0.Setup = function ( f64_arg0, f64_arg1 )
		f64_arg0.TabText:setText( ToUpperCase( f64_arg1.name ) )
		if f64_arg1.hasRestrictionIcon then
			f64_arg0:addEventHandler( "menu_create", function ( f66_arg0, f66_arg1 )
				f64_arg0._isRestricted = f64_arg0:IsRestricted( f64_arg0 )
				if f64_arg0._isRestricted then
					ACTIONS.AnimateSequence( f66_arg0, "RestrictionOn" )
				else
					ACTIONS.AnimateSequence( f66_arg0, "RestrictionOff" )
				end
				if f64_arg0.hasNewItem then
					local f66_local0 = f64_arg0.NewItemSmallIcon
					local f66_local1 = f66_local0
					f66_local0 = f66_local0.UpdateAlpha
					local f66_local2
					if f64_arg0.hasNewItem and not f64_arg0._isRestricted then
						f66_local2 = 1
					else
						f66_local2 = 0
					end
					f66_local0( f66_local1, f66_local2 )
				end
			end )
			f64_arg0:registerEventHandler( "matchrules_updated", function ( element, event )
				if MLG.IsCDLActive( f64_arg0 ) then
					ACTIONS.AnimateSequence( element, "RestrictionOn" )
				else
					ACTIONS.AnimateSequence( element, "RestrictionOff" )
				end
			end )
		end
		if f64_arg1.isStoreTab then
			ACTIONS.AnimateSequence( f64_arg0.NewItemSmallIcon, "Store" )
		end
		if f64_arg1.isBattlePassTab then
			f64_arg0._isBattlePassTab = true
			ACTIONS.AnimateSequence( f64_arg0, "BattlePassTabUp" )
		end
		if f64_arg1.hasFreeItem then
			f64_arg0._isFreeItem = true
			f51_arg0( f64_arg0, f64_arg1.hasFreeItem )
		end
		if f64_arg1.isNew then
			f64_arg0:SetNewIndicator( f51_arg0 )
		end
		if f64_arg1.isStoreTab and not f64_arg0._isFreeItem and STORE.IsZeusOwned( f51_arg0 ) == false then
			f51_arg0( f64_arg0 )
		end
	end
	
	f51_arg0.Enable = function ( f63_arg0 )
		f63_arg0._disabled = false
		if CONDITIONS.IsWZWipFlowEnabled() then
			ACTIONS.AnimateSequence( f63_arg0, "WZWipUnFocused" )
		else
			ACTIONS.AnimateSequence( f63_arg0, "UnFocused" )
		end
	end
	
	f51_arg0.Disable = function ( f62_arg0, f62_arg1 )
		f62_arg0._disabled = true
		local f62_local0 = ACTIONS.AnimateSequence
		local f62_local1 = f62_arg0
		local f62_local2
		if f62_arg1 then
			f62_local2 = "ComingSoon"
		else
			f62_local2 = "Disabled"
		end
		f62_local0( f62_local1, f62_local2 )
	end
	
	f51_arg0.IsEnabled = function ( f61_arg0 )
		return not f61_arg0._disabled
	end
	
	f51_arg0.SetBreadcrumb = f51_local0
	f51_arg0.SetFreeBanner = f51_local3
	f51_arg0.SetLimitedTimeBanner = f51_local4
	f51_arg0.SetSeasonBanner = f51_local5
	f51_arg0.SetPromoBanner = f51_local7
	f51_arg0:registerEventHandler( "focus_tab", function ( element, event )
		if event.index == element.index then
			if event.playSound then
				if CONDITIONS.IsWZWipFlowEnabled() then
					element._sequences:WZWipWZFocused()
				elseif CONDITIONS.IsMagmaGameMode() then
					element._sequences:WZFocused()
				else
					element._sequences:Focused()
				end
			elseif CONDITIONS.IsWZWipFlowEnabled() then
				element._sequences:WZWipWZFocusedNoSound()
			elseif CONDITIONS.IsMagmaGameMode() then
				element._sequences:WZFocusedNoSound()
			else
				element._sequences:FocusedNoSound()
			end
			element.focused = true
		elseif element.focused then
			if CONDITIONS.IsWZWipFlowEnabled() then
				element._sequences:WZWipUnFocused()
			else
				element._sequences:UnFocused()
			end
			element.focused = false
		end
		if element._isBattlePassTab then
			if element.focused then
				ACTIONS.AnimateSequence( element, "BattlePassTabOver" )
			else
				ACTIONS.AnimateSequence( element, "BattlePassTabUp" )
			end
		end
		if element._isFreeItem then
			if element.focused then
				ACTIONS.AnimateSequence( element, "FreeBundleTabOver" )
			else
				ACTIONS.AnimateSequence( element, "FreeBundleTabUp" )
			end
		end
		element.TabText:SetParentHasFocus( element.focused )
	end )
	f51_arg0:registerEventHandler( LUI.TabManager.TAB_SWITCH_EVENT, function ( element, event )
		if event.index == f51_arg0.index then
			f51_arg0:dispatchEventToCurrentMenu( event )
		end
		return true
	end )
	f51_arg0:SetHandleMouse( true )
	f51_arg0:SetDirectionalInputEnabled( false )
	f51_arg0.m_requireFocusType = FocusType.MouseOver
	if Dvar[0x9E5BE3B4BBA4E0E]( 0xD7862EAA83B3B27 ) then
		f51_arg0:addEventHandler( "touchbegin", function ( f58_arg0, f58_arg1 )
			if f58_arg1.inside and not f58_arg0._disabled then
				f58_arg0:playSound( "menu_open" )
				if f58_arg0:GetCurrentMenu() then
					f58_arg0:dispatchEventToCurrentMenu( {
						name = "tab_mouse_select",
						index = f58_arg0.index
					} )
				else
					f58_arg0:dispatchEventToRoot( {
						name = "tab_mouse_select",
						index = f58_arg0.index
					} )
				end
				if CONDITIONS.IsWZWipFlowEnabled() then
					f58_arg0._sequences:WZWipWZHighlighted()
				elseif CONDITIONS.IsMagmaGameMode() then
					f58_arg0._sequences:WZHighlighted()
				else
					f58_arg0._sequences:Highlighted()
				end
				if f58_arg0._isBattlePassTab then
					ACTIONS.AnimateSequence( f58_arg0, "BattlePassTabOver" )
				end
				if f58_arg0._isFreeItem then
					ACTIONS.AnimateSequence( f58_arg0, "FreeBundleTabOver" )
				end
			end
		end )
	elseif Engine[0x5EE05AD994388B6]() then
		f51_arg0:registerEventHandler( "mouseenter", function ( element, event )
			Engine[0xC4146BA76D0F982]( CoD.SFX.MouseOver )
			if not element.focused then
				if not element._disabled then
					if CONDITIONS.IsWZWipFlowEnabled() then
						element._sequences:WZWipWZHighlighted()
					elseif CONDITIONS.IsMagmaGameMode() then
						element._sequences:WZHighlighted()
					else
						element._sequences:Highlighted()
					end
				elseif CONDITIONS.IsWZWipFlowEnabled() then
					element._sequences:WZWipWZFocused()
				elseif CONDITIONS.IsMagmaGameMode() then
					element._sequences:WZFocused()
				else
					element._sequences:Focused()
				end
			elseif CONDITIONS.IsWZWipFlowEnabled() then
				element._sequences:WZWipWZHighlighted()
			elseif CONDITIONS.IsMagmaGameMode() then
				element._sequences:WZHighlighted()
			else
				element._sequences:Highlighted()
			end
			if element._isBattlePassTab then
				ACTIONS.AnimateSequence( element, "BattlePassTabOver" )
			end
			if element._isFreeItem then
				ACTIONS.AnimateSequence( element, "FreeBundleTabOver" )
			end
		end )
		f51_arg0:registerEventHandler( "mouseleave", function ( element, event )
			if element.focused and not element._disabled then
				if CONDITIONS.IsWZWipFlowEnabled() then
					element._sequences:WZWipWZFocusedNoSound()
				elseif CONDITIONS.IsMagmaGameMode() then
					element._sequences:WZFocusedNoSound()
				else
					element._sequences:FocusedNoSound()
				end
			else
				if CONDITIONS.IsWZWipFlowEnabled() then
					element._sequences:WZWipUnFocused()
				else
					element._sequences:UnFocused()
				end
				if element._disabled then
					element._sequences:Disabled()
				end
			end
			if element._isBattlePassTab then
				if element.focused then
					ACTIONS.AnimateSequence( element, "BattlePassTabOver" )
				else
					ACTIONS.AnimateSequence( element, "BattlePassTabUp" )
				end
			end
			if element._isFreeItem then
				if element.focused then
					ACTIONS.AnimateSequence( element, "FreeBundleTabOver" )
				else
					ACTIONS.AnimateSequence( element, "FreeBundleTabUp" )
				end
			end
		end )
		f51_arg0:registerEventHandler( "leftmousedown", function ( element, event )
			
		end )
		f51_arg0:registerEventHandler( "leftmouseup", function ( element, event )
			if event.inside and not element._disabled then
				element:playSound( "menu_open" )
				element:dispatchEventToParent( {
					name = "tab_mouse_select",
					index = element.index
				} )
				if CONDITIONS.IsWZWipFlowEnabled() then
					element._sequences:WZWipWZHighlighted()
				elseif CONDITIONS.IsMagmaGameMode() then
					element._sequences:WZHighlighted()
				else
					element._sequences:Highlighted()
				end
				if element._isBattlePassTab then
					ACTIONS.AnimateSequence( element, "BattlePassTabOver" )
				end
				if element._isFreeItem then
					ACTIONS.AnimateSequence( element, "FreeBundleTabOver" )
				end
			end
		end )
	end
	f51_arg0:registerEventHandler( "tab_disable_blur", function ( element, event )
		ACTIONS.AnimateSequence( element, "NoBlur" )
	end )
	f51_arg0:SubscribeToModelThroughElement( f51_arg0, "disabled", function ( f52_arg0 )
		if DataModel[0x614D394F6F9A18D]( f52_arg0 ) then
			f51_arg0:Disable()
		end
	end )
	if IsLanguageArabic() then
		ACTIONS.AnimateSequence( f51_arg0, "AR" )
	elseif IsLanguageKorean() or IsLanguageChinese() then
		ACTIONS.AnimateSequence( f51_arg0, "KORZH" )
	elseif IsLanguageGerman() then
		ACTIONS.AnimateSequence( f51_arg0, "DE" )
	elseif IsLanguageRussian() then
		ACTIONS.AnimateSequence( f51_arg0, "RU" )
	elseif IsLanguageJapanese() then
		ACTIONS.AnimateSequence( f51_arg0, "JP" )
		f51_arg0.TabText:SetMaxVisibleLines( 1 )
	end
end

MenuUtils.GetContextualMenuGlobalBounds = function ( f50_arg0 )
	local f50_local0, f50_local1, f50_local2, f50_local3 = f50_arg0:getCurrentGlobalRect()
	if f50_arg0._contextualMenuBounds then
		local f50_local4 = f50_arg0._contextualMenuBounds
		return Lerp( f50_local4.leftAnchor, f50_local0, f50_local2 ) + f50_local4.left, Lerp( f50_local4.topAnchor, f50_local1, f50_local3 ) + f50_local4.top, Lerp( f50_local4.rightAnchor, f50_local2, f50_local0 ) + f50_local4.right, Lerp( f50_local4.bottomAnchor, f50_local3, f50_local1 ) + f50_local4.bottom
	else
		return f50_local0, f50_local1, f50_local2, f50_local3
	end
end

MenuUtils.HideBackButton = function ( f49_arg0 )
	f49_arg0.BackButtonArrow:Hide()
end

MenuUtils.ShowBackButton = function ( f48_arg0, f48_arg1 )
	f48_arg0.BackButtonArrow:Show( f48_arg1 )
end

MenuUtils.SetupBackButton = function ( f47_arg0, f47_arg1, f47_arg2, f47_arg3 )
	if not f47_arg0.BackButtonArrow then
		local f47_local0 = "HeaderBackArrowLarge"
		local f47_local1 = 16
		local f47_local2 = 48
		local f47_local3 = 48
		local f47_local4 = 54
		local f47_local5
		if f47_arg3 then
			f47_local5 = f47_arg3.widgetName
			if not f47_local5 then
			
			else
				local f47_local6
				if f47_arg3 then
					f47_local6 = f47_arg3.horizontalOffset
					if not f47_local6 then
					
					else
						local f47_local7
						if f47_arg3 then
							f47_local7 = f47_arg3.verticalOffset
							if not f47_local7 then
							
							else
								local f47_local8
								if f47_arg3 then
									f47_local8 = f47_arg3.width
									if not f47_local8 then
									
									else
										local f47_local9
										if f47_arg3 then
											f47_local9 = f47_arg3.height
											if not f47_local9 then
											
											else
												local BackButtonArrow = nil
												
												BackButtonArrow = MenuBuilder.BuildRegisteredType( f47_local5, {
													controllerIndex = f47_arg1
												} )
												BackButtonArrow.id = "BackButtonArrow"
												BackButtonArrow:SetAnchorsAndPosition( f47_arg2.leftAnchor, f47_arg2.rightAnchor, f47_arg2.topAnchor, f47_arg2.bottomAnchor, f47_arg2.left - f47_local6 + f47_local8, f47_arg2.left - f47_local6, f47_local7 - f47_local9 / 2, f47_local7 + f47_local9 / 2 )
												f47_arg0:addElement( BackButtonArrow )
												f47_arg0.BackButtonArrow = BackButtonArrow
												
											end
										end
										f47_local9 = f47_local4
									end
								end
								f47_local8 = f47_local3
							end
						end
						f47_local7 = f47_local2
					end
				end
				f47_local6 = f47_local1
			end
		end
		f47_local5 = f47_local0
	else
		MenuUtils.ShowBackButton( f47_arg0, f47_arg1 )
	end
end

MenuUtils.SetupSideArrows = function ( f44_arg0, f44_arg1, f44_arg2, f44_arg3 )
	if not f44_arg3 then
		f44_arg3 = {}
	end
	local f44_local0 = f44_arg0.SideArrows
	if f44_arg2 then
		f44_arg1:SetSnapOnScrollBarMouseDrag( true )
	end
	f44_arg1:addEventHandler( "gamepad_button", function ( f46_arg0, f46_arg1 )
		if CONDITIONS.IsMouseWheelEvent( f46_arg1 ) and f46_arg1.down then
			return f44_arg0.SideArrows:ExternalScroll( f46_arg1 )
		else
			
		end
	end )
	f44_local0:SetupSideButtons( f44_arg1, f44_arg3 )
	f44_local0:UpdateSideButtons()
	f44_arg1._onNewTargetFocusPosition = function ( f45_arg0, f45_arg1 )
		f44_arg0:AddScrollWatch()
	end
	
	if f44_arg3.mouseArea then
		f44_arg1:SetMouseScrollArea( f44_arg3.mouseArea )
	end
end

MenuUtils.SetupActiveStateOnNonListButtons = function ( f38_arg0, f38_arg1, f38_arg2 )
	local f38_local0 = f38_arg2.buttonList
	local f38_local1
	if f38_arg2.addGridListActiveBehavior == nil then
		f38_local1 = true
	else
		f38_local1 = f38_arg2.addGridListActiveBehavior
	end
	local f38_local2 = f38_arg2.defaultFocusButton or nil
	f38_arg0.buttonMap = {}
	if f38_local1 and f38_arg0.SetActiveParentBehaviorGridAndList then
		f38_arg0:SetActiveParentBehaviorGridAndList( f38_arg1 )
	end
	f38_arg0._currentFocusedButton = nil
	for f38_local6, f38_local7 in pairs( f38_local0 ) do
		if not f38_local7._handleChildFocus then
			f38_local7._handleChildFocus = true
		end
		f38_local7:addEventHandler( "gain_focus", function ( f43_arg0, f43_arg1 )
			if f38_arg0._currentFocusedButton ~= f43_arg0 and LUI.IsLastInputMouseNavigation( f38_arg0 ) then
				MenuUtils.RemoveCurrentActiveButton( f38_arg0, f43_arg1.controller or f38_arg0, true )
				f38_arg0._currentFocusedButton = f43_arg0
				if f43_arg0.SetActive then
					f43_arg0:SetActive()
				end
				f43_arg0:processEvent( {
					name = "parent_active"
				} )
			end
		end )
		f38_arg0.buttonMap[f38_local7.id] = f38_local7
	end
	if f38_local2 ~= nil then
		f38_arg0:addEventHandler( "menu_create", function ( f42_arg0, f42_arg1 )
			if LUI.IsLastInputMouseNavigation( f42_arg1.controller or f38_arg0 ) then
				f38_arg0:processEvent( {
					name = "gain_focus"
				} )
			end
		end )
		f38_arg0:addEventHandler( "tab_create", function ( f41_arg0, f41_arg1 )
			if LUI.IsLastInputMouseNavigation( f41_arg1.controller or f38_arg0 ) then
				f38_arg0:processEvent( {
					name = "gain_focus",
					focusType = FocusType.MouseOver
				} )
			end
		end )
		f38_arg0:addEventHandler( "restore_focus", function ( f40_arg0, f40_arg1 )
			if f40_arg1.id and LUI.IsLastInputMouseNavigation( f40_arg1.controller or f38_arg0 ) and f40_arg1.id ~= f38_arg0.id then
				local f40_local0 = f40_arg0.buttonMap[f40_arg1.id]
				if f40_local0 then
					f38_arg0:processEvent( {
						name = "lose_focus"
					} )
					f40_local0:processEvent( {
						name = "gain_focus"
					} )
				end
				return true
			else
				
			end
		end )
	end
	f38_arg0:SubscribeToInputTypeModel( f38_arg1, function ( f39_arg0, f39_arg1 )
		local f39_local0 = f39_arg1._controllerIndex or f38_arg0
		if not CONDITIONS.IsMouseNavigation( f39_local0 ) then
			MenuUtils.RemoveCurrentActiveButton( f39_arg1, f39_local0, true )
		end
	end )
end

MenuUtils.RemoveCurrentActiveButton = function ( f37_arg0, f37_arg1, f37_arg2 )
	if f37_arg0._currentFocusedButton ~= nil then
		if f37_arg0._currentFocusedButton.RemoveActive then
			f37_arg0._currentFocusedButton:RemoveActive( {
				controller = f37_arg1
			} )
		end
		if LUI.IsLastInputMouseNavigation( f37_arg1 ) then
			f37_arg0._currentFocusedButton:processEvent( {
				name = "lose_focus"
			} )
		end
		f37_arg0._currentFocusedButton:processEvent( {
			name = "remove_parent_active",
			controller = f37_arg1
		} )
		if f37_arg2 then
			f37_arg0._currentFocusedButton = nil
		end
	end
end

MenuUtils.GetSortPromptText = function ( f36_arg0, f36_arg1, f36_arg2 )
	local f36_local0 = 0x0
	if f36_arg0.seasonsSortingType == LOOT.seasonsSortingOptions.RECENT_FIRST then
		f36_local0 = Engine[0xED84C33EC5F01EA]( "LUA_MENU/PROMPT_TWO_PARTS", f36_local0, Engine[0xED84C33EC5F01EA]( 0x18D641B5CB4FE00 ) )
	elseif f36_arg0.seasonsSortingType == LOOT.seasonsSortingOptions.OLD_FIRST then
		f36_local0 = Engine[0xED84C33EC5F01EA]( "LUA_MENU/PROMPT_TWO_PARTS", f36_local0, Engine[0xED84C33EC5F01EA]( 0x93F9C1B60CB9C83 ) )
	end
	if f36_local0 ~= 0x0 then
		f36_local0 = Engine[0xED84C33EC5F01EA]( 0xA9C7FDBA2ECD498, f36_local0 )
	else
		f36_local0 = Engine[0xED84C33EC5F01EA]( 0xC000A1B2EFA72A3, "[", Engine[0xED84C33EC5F01EA]( 0xFF806753942C879 ), "]" )
	end
	local f36_local1 = Engine[0xED84C33EC5F01EA]( 0xFFD50D7035EEA91, Engine[0x7D3158A9539A355]( f36_local0 ) )
	if f36_arg2 then
		f36_local1 = Engine[0xED84C33EC5F01EA]( 0x2BB55DAA4C3D2D5, Engine[0xED84C33EC5F01EA]( f36_arg2 ), Engine[0xED84C33EC5F01EA]( 0x5F5C4F0B9956D2B, Engine[0x7D3158A9539A355]( f36_local0 ) ) )
	end
	if f36_arg1 then
		f36_local1 = Engine[0xED84C33EC5F01EA]( 0x5F5C4F0B9956D2B, Engine[0x7D3158A9539A355]( f36_local0 ) )
	end
	return f36_local1
end

MenuUtils.CheckAndRunCodeOfConductFirstMatch = function ( f35_arg0, f35_arg1 )
	local f35_local0 = Dvar[0x9E5BE3B4BBA4E0E]( 0x39AAC1F9A77505 )
	if not f35_local0 then
		f35_local0 = Engine[0x7B17D94988FD5D0]( "CodeOfConductAccepted", f35_arg0 )
	end
	if not f35_local0 then
		LUI.FlowManager.RequestPopupMenu( self, "codeconduct", true, f35_arg0, false, {
			acceptedCallback = f35_arg1
		} )
	else
		f35_arg1()
	end
end

MenuUtils.SetBackgroundImage = function ( f34_arg0 )
	if CONDITIONS.IsDvarBoolEnabled( 0xAE6C56A170FCB66 ) then
		Engine[0x98F76EE292E1FA4]( RegisterMaterial( f34_arg0 ) )
	end
end

MenuUtils.RemoveSFXFromScrollbarSliderKBM = function ( f32_arg0 )
	local f32_local0 = function ( f33_arg0 )
		local f33_local0 = f33_arg0:getParent()
		if f33_local0 and f33_local0.gainFocusSFX then
			f33_arg0:setGainFocusSFX( nil, {
				clearChildrenSFX = true
			} )
		end
	end
	
	f32_arg0:addEventHandler( "menu_create", f32_local0 )
	f32_arg0:addEventHandler( "tab_create", f32_local0 )
end

local f0_local1 = function ( f31_arg0 )
	if f31_arg0._uniqueItemID then
		f31_arg0._uniqueItemID = f31_arg0._uniqueItemID + 1
	else
		f31_arg0._uniqueItemID = 1
	end
end

MenuUtils.LerpReactiveSlots = function ( f26_arg0, f26_arg1, f26_arg2, f26_arg3, f26_arg4, f26_arg5 )
	if f26_arg0.transitionDuration == 0 then
		
	else
		
	end
	f0_local0( f26_arg0 )
	local f26_local0 = f26_arg0._uniqueItemID
	local f26_local1 = false
	local f26_local2 = nil
	local f26_local3 = function ( f27_arg0, f27_arg1, f27_arg2, f27_arg3, f27_arg4, f27_arg5 )
		LUI.Blend( f27_arg0, f27_arg0.transitionDuration, 5, function ( f30_arg0 )
			local f30_local0 = LUI.Lerp( f27_arg0, f27_arg0, Engine[0x47397F97D556255]( f30_arg0, LUI.EASING.linear ) )
			local f30_local1 = false
			if f30_arg0 == 0 then
				f30_local1 = true
			elseif not f27_arg0 and 0.5 <= f30_arg0 then
				f30_local1 = true
				f27_arg0 = true
			end
			for f30_local5, f30_local6 in ipairs( f27_arg0 ) do
				f27_arg0[0x58C8D2B61AB0A48]( f27_arg0, f30_local6, f30_local0, f30_local1 )
			end
			if f27_arg0 ~= f27_arg0._uniqueItemID then
				return true
			else
				
			end
		end, function ( f28_arg0 )
			if not f28_arg0 and f27_arg0 == f27_arg0._uniqueItemID then
				local f28_local0 = f27_arg0:Wait( f27_arg0 )
				f28_local0.onComplete = function ( f29_arg0 )
					if f28_arg0 == f28_arg0._uniqueItemID then
						f28_arg0( f29_arg0, f28_arg0, f28_arg0, f28_arg0, f28_arg0, f28_arg0 )
					end
				end
				
			end
		end )
	end
	
	f26_local3( f26_arg0, f26_arg1, f26_arg2, f26_arg3, f26_arg4, f26_arg5 )
end

MenuUtils.BackToGlobalPanel = function ( f25_arg0, f25_arg1, f25_arg2, f25_arg3 )
	if not f25_arg3 and not f25_arg0.isBoot and not CONDITIONS.IsMenuInStack( "FiringRangeMenu" ) then
		if GLOBAL_PANEL.IsOpen() then
			GLOBAL_PANEL.FocusTab( f25_arg1, f25_arg2 )
		else
			GLOBAL_PANEL.OpenGlobalPanel( f25_arg0, f25_arg1, f25_arg2, {
				immediate = true
			} )
		end
		local f25_local0 = LUI.FlowManager.GetMenuByName( GLOBAL_PANEL.MENU_NAME )
		if f25_local0 and f25_local0.menu.GlobalPanel.activeTabWidget then
			local f25_local1 = f25_local0.menu.GlobalPanel.activeTabWidget
			if f25_local1.id == "GlobalPanelOptions" then
				GLOBAL_PANEL.SetButtonGridFocus( f25_local1.DynamicList, f25_arg0.menuIndex - 1 )
			elseif f25_local1.id == "GlobalPanelPlayer" then
				GLOBAL_PANEL.SetButtonGridFocus( f25_local1.ActionsGrid, f25_arg0.menuIndex - 1 )
			end
		end
	end
end

MenuUtils.GetPreviousMenu = function ()
	local f24_local0 = Engine[0xEE6F69FEA944B13]()
	local f24_local1
	if f24_local0 then
		f24_local1 = f24_local0
	else
		f24_local1 = f24_local0.flowManager
	end
	local f24_local2
	if f24_local1 then
		f24_local2 = f24_local1
	else
		f24_local2 = f24_local1:GetStackTop()
	end
	local f24_local3
	if f24_local2 then
		f24_local3 = f24_local2
	else
		f24_local3 = f24_local2.previousMenuName
	end
	if f24_local3 then
		local f24_local4 = LUI.FlowManager.GetMenuByName( f24_local3 )
		local f24_local5
		if f24_local4 then
			f24_local5 = f24_local4
		else
			f24_local5 = f24_local4.menu
		end
		return f24_local5
	else
		
	end
end

MenuUtils.GetPreviousMenuName = function ()
	local f23_local0 = Engine[0xEE6F69FEA944B13]()
	local f23_local1
	if f23_local0 then
		f23_local1 = f23_local0
	else
		f23_local1 = f23_local0.flowManager
	end
	local f23_local2
	if f23_local1 then
		f23_local2 = f23_local1
	else
		f23_local2 = f23_local1:GetStackTop()
	end
	local f23_local3
	if f23_local2 then
		f23_local3 = f23_local2
	else
		f23_local3 = f23_local2.previousMenuName
	end
	return f23_local3
end

MenuUtils.GetLastClosedMenuName = function ()
	local f22_local0 = Engine[0xEE6F69FEA944B13]()
	local f22_local1
	if f22_local0 then
		f22_local1 = f22_local0
	else
		f22_local1 = f22_local0.flowManager
	end
	local f22_local2
	if f22_local1 then
		f22_local2 = f22_local1
	else
		f22_local2 = f22_local1:GetStackTop()
	end
	local f22_local3
	if f22_local2 then
		f22_local3 = f22_local2
	else
		f22_local3 = f22_local2.lastClosedMenuName
	end
	return f22_local3
end

MenuUtils.CustomizeGetCurrentGridIndex = function ( f21_arg0 )
	local f21_local0 = f21_arg0:GetCurrentActiveIndex()
	if not (CONDITIONS.IsMobileOrMobileSim() or LUI.IsLastInputMouseNavigation( f21_arg0._controllerIndex )) or f21_local0 == -1 then
		f21_local0 = f21_arg0:GetFocusPositionIndex()
	end
	if f21_local0 then
		return f21_local0 + 1
	else
		return nil
	end
end

MenuUtils.CustomizeUpdateGrid = function ( f20_arg0, f20_arg1, f20_arg2 )
	f20_arg0:RemoveFocusFromChild()
	f20_arg0:SetNumChildren( f20_arg1 )
	f20_arg0:RefreshContent()
	if f20_arg2 and 0 < f20_arg1 then
		f20_arg2:SetAlpha( 0 )
	end
end

MenuUtils.CustomizeRestoreFocusFunction = function ( f18_arg0, f18_arg1, f18_arg2 )
	if f18_arg0._isComingFromFilterMenu and LUI.IsLastInputGamepad( f18_arg1 ) then
		local f18_local0 = function ()
			for f19_local3, f19_local4 in ipairs( f18_arg0._lootTable ) do
				if f19_local4.lootID == f18_arg0._currentSelectedLootID then
					return f19_local3 - 1
				end
			end
			return 0
		end
		
		f18_arg2:SetFocusedPosition( f18_arg2:GetPositionForIndex( f18_local0() ), true, nil, nil, nil )
		f18_arg0._isComingFromFilterMenu = false
		return true
	else
		
	end
end

MenuUtils.CustomizeFilterTable = function ( f16_arg0, f16_arg1, f16_arg2 )
	f16_arg0._lootTable = {}
	local f16_local0 = nil
	if f16_arg2 == LOOT.itemTypes.PLAYERCARD then
		local f16_local1 = Challenge.GetCallingCardMasterChallenges( f16_arg1 )
		local f16_local2 = CallingCardUtils.GetAllPlayerCards( f16_arg1 )
		local f16_local3 = {}
		local f16_local4 = {}
		for f16_local8, f16_local9 in ipairs( f16_local1 ) do
			table.insert( f16_local3, String.Split( f16_local9.loot, "|" ) )
		end
		for f16_local8, f16_local9 in ipairs( f16_local2 ) do
			local f16_local10 = false
			for f16_local14, f16_local15 in ipairs( f16_local3 ) do
				for f16_local11, f16_local12 in ipairs( f16_local15 ) do
					if f16_local9.lootID == tonumber( f16_local12 ) then
						f16_local10 = true
					end
				end
			end
			if not f16_local10 then
				table.insert( f16_local4, f16_local9 )
			end
		end
		f16_local0 = f16_local4
	elseif f16_arg2 == LOOT.itemTypes.EMBLEM then
		f16_local0 = EmblemEditorUtils.GetAllEmblems()
	end
	if not f16_arg0._allLootTable then
		f16_arg0._allLootTable = f16_local0
	end
	local f16_local1 = 0
	local f16_local2 = 0
	for f16_local6, f16_local7 in ipairs( f16_arg0._allLootTable ) do
		f16_local7.isUnlocked = LOOT.IsUnlocked( f16_arg1, f16_arg2, f16_local7.ref )
		if not f16_local7.hideInUI then
			if f16_local7.isUnlocked then
				f16_local1 = f16_local1 + 1
				f16_local2 = f16_local2 + 1
			end
			if not f16_local7.isPremium then
				f16_local2 = f16_local2 + 1
			end
		end
	end
	if f16_arg0.ItemsCollected then
		f16_arg0.ItemsCollected:setText( Engine[0xED84C33EC5F01EA]( 0x48D718D82BA33FF, f16_local1, f16_local2 ) )
	end
	if f16_arg0.UnlockCount then
		f16_arg0.UnlockCount:UpdateCount( f16_local1, f16_local2, true )
	end
	for f16_local6, f16_local7 in ipairs( f16_arg0._allLootTable ) do
		local f16_local8
		if f16_arg2 == LOOT.itemTypes.EMBLEM then
			f16_local8 = f16_local7.__emblemBundle[0x28887F70BF5EBA]
			if not f16_local8 then
			
			elseif (f16_local7.isUnlocked or f16_arg0.lockedSortingType == LOOT.lockedSortingOptions.SHOW) and not f16_local7.hideInUI and GL_HACK.IsLootUseableOnCurrentPlatform( f16_arg1, f16_local8, true ) then
				local f16_local9
				if f16_arg2 == LOOT.itemTypes.PLAYERCARD then
					f16_local9 = CONDITIONS.IsMobileOrMobileSim()
				else
					f16_local9 = false
				end
				local f16_local10
				if f16_local9 then
					f16_local10 = f16_local9
				else
					f16_local10 = f16_arg0._equippedPlayerCardIndex == f16_local7.index
				end
				local f16_local19
				if f16_local9 then
					f16_local19 = f16_local9
				else
					f16_local19 = Table.FindItemIndexInArray( f16_arg0._equippedShowcaseCardIndexes, f16_local7.index )
				end
				if not f16_local9 or not f16_local10 and not f16_local19 then
					table.insert( f16_arg0._lootTable, f16_local7 )
				end
			end
		end
		f16_local8 = f16_local7.__playerCardBundle[0x28887F70BF5EBA]
	end
	if CONDITIONS.IsMobileOrMobileSim() or f16_arg2 ~= LOOT.itemTypes.EMBLEM then
		table.sort( f16_arg0._lootTable, function ( f17_arg0, f17_arg1 )
			if f16_arg0._favoriteLoots and f16_arg0._favoriteLoots[f17_arg0.ref] ~= f16_arg0._favoriteLoots[f17_arg1.ref] then
				local f17_local0 = f16_arg0._favoriteLoots[f17_arg0.ref]
				if f17_local0 then
					f17_local0 = not f16_arg0._favoriteLoots[f17_arg1.ref]
				end
				return f17_local0
			end
			local f17_local0, f17_local1 = LOOT.GetDefaultSorting( f16_arg0, f17_arg0, f17_arg1 )
			if f17_local1 then
				return f17_local0
			elseif CONDITIONS.IsMobileOrMobileSim() then
				if f17_arg0.season ~= f17_arg1.season and f16_arg0.seasonsSortingType ~= LOOT.seasonsSortingOptions.NONE then
					if f16_arg0.seasonsSortingType == LOOT.seasonsSortingOptions.OLD_FIRST then
						return f17_arg0.season < f17_arg1.season
					elseif f16_arg0.seasonsSortingType == LOOT.seasonsSortingOptions.RECENT_FIRST then
						return f17_arg1.season < f17_arg0.season
					end
				end
				local f17_local2 = f16_arg0.raritySortingType
				local f17_local3 = LOOT.raritySortingOptions
				local f17_local4 = f17_arg0.availableProjects
				local f17_local5 = f17_arg1.availableProjects
				local f17_local6 = f17_arg0.rarity
				local f17_local7 = f17_arg1.rarity
				if f17_local2 ~= f17_local3.NONE then
					if f17_local4 ~= f17_local5 then
						local f17_local8
						if f17_local4 ~= "MGL" or f17_local5 == "MGL" then
							f17_local8 = false
						else
							f17_local8 = true
						end
						return f17_local8
					elseif f17_local6 ~= f17_local7 then
						if f17_local2 == f17_local3.LOW_FIRST then
							return f17_local6 < f17_local7
						elseif f17_local2 == f17_local3.HIGH_FIRST then
							return f17_local7 < f17_local6
						end
					end
				end
			end
			local f17_local2 = Engine[0xED84C33EC5F01EA]( f17_arg0.name )
			local f17_local3 = Engine[0xED84C33EC5F01EA]( f17_arg1.name )
			if f17_local2 ~= f17_local3 then
				if f16_arg0.alphabetSortingType and f16_arg0.alphabetSortingType == LOOT.alphabetSortingOptions.Z_FIRST then
					return f17_local3 < f17_local2
				end
				return f17_local2 < f17_local3
			end
			return false
		end )
	end
	if f16_arg0.FavoriteAndSort then
		f16_arg0.FavoriteAndSort:Update( f16_arg1, f16_arg0 )
	end
end

MenuUtils.CustomizeSortingPopupEventHandler = function ( f14_arg0, f14_arg1, f14_arg2, f14_arg3, f14_arg4, f14_arg5 )
	if LUI.IsLastInputGamepad( f14_arg2.controller ) then
		local f14_local0 = MenuUtils.CustomizeGetCurrentGridIndex( f14_arg3 )
		if f14_local0 then
			f14_arg0._currentSelectedLootID = f14_arg0._lootTable[f14_local0].lootID
		end
	end
	local f14_local0 = MenuBuilder.BuildRegisteredType( "CustomizeSortingPopup", {
		controllerIndex = f14_arg1,
		menu = f14_arg0,
		type = f14_arg4
	} )
	LUI.FlowManager.RequestPopupMenu( nil, "FlyInPopup", true, f14_arg1, false, {
		flyInLeftNarrow = true,
		widget = f14_local0
	} )
	f14_local0:addEventHandler( "menu_close", function ( f15_arg0, f15_arg1 )
		f14_arg0._isComingFromFilterMenu = true
		MenuUtils.CustomizeFilterTable( f14_arg0, f14_arg0 )
		MenuUtils.CustomizeUpdateGrid( f14_arg0, #f14_arg0._lootTable, f14_arg0 )
	end )
	return f14_local0
end

local f0_local2 = function ( f13_arg0, f13_arg1, f13_arg2, f13_arg3, f13_arg4 )
	if f13_arg2 and f13_arg3 and f13_arg2 < f13_arg3 and not DataSources.inGame.MP.isLastStand:GetValue( f13_arg1 ) and not DataSources.inGame.player.playerStatus.isDowned:GetValue( f13_arg1 ) and not DataSources.inGame.MP.spectating.isSpectating:GetValue( f13_arg1 ) then
		f13_arg4( f13_arg0 )
	end
end

MenuUtils.SubscribeToHealthAndArmorChanges = function ( f10_arg0, f10_arg1, f10_arg2 )
	if CONDITIONS.InFrontend() then
		
	else
		
	end
	local f10_local0 = DataSources.inGame.player.health:GetModel( f10_arg1 )
	local f10_local1 = DataSources.inGame.player.armorHealthRatio:GetModel( f10_arg1 )
	f10_arg0._prevHealth = DataModel[0x614D394F6F9A18D]( f10_local0 )
	f10_arg0._prevArmor = DataModel[0x614D394F6F9A18D]( f10_local1 )
	f10_arg0:SubscribeToModel( f10_local0, function ( f12_arg0, f12_arg1 )
		local f12_local0 = DataModel[0x614D394F6F9A18D]( f12_arg0 )
		f10_arg0( f12_arg1, f10_arg0, f12_local0, f12_arg1._prevHealth, f10_arg0 )
		f12_arg1._prevHealth = f12_local0
	end )
	f10_arg0:SubscribeToModel( f10_local1, function ( f11_arg0, f11_arg1 )
		local f11_local0 = DataModel[0x614D394F6F9A18D]( f11_arg0 )
		f10_arg0( f11_arg1, f10_arg0, f11_local0, f11_arg1._prevArmor, f10_arg0 )
		f11_arg1._prevArmor = f11_local0
	end )
end

MenuUtils.SetupItemButtonTags = function ( f9_arg0, f9_arg1, f9_arg2 )
	if not f9_arg2 or CONDITIONS.InGame() then
		return 
	elseif f9_arg1.Overlay ~= nil then
		f9_arg1.Overlay:closeTree()
	end
	local f9_local0 = STORE.Bundles.IsItemAvailableInBundle( f9_arg0, f9_arg2 )
	if not f9_local0 then
		f9_local0 = STORE.Bundles.IsLimitedTimeItem( f9_arg0, f9_arg2 )
		if not f9_local0 then
			f9_local0 = STORE.Bundles.IsExpiredItem( f9_arg0, f9_arg2 )
			if not f9_local0 then
				f9_local0 = STORE.Bundles.IsUpcomingItem( f9_arg0, f9_arg2 )
			end
		end
	end
	if CONDITIONS.IsFrontendInventoryButtonEnabled() and f9_local0 then
		f9_arg1.Overlay = MenuBuilder.BuildRegisteredType( "FrontendInventoryButtonOverlay", {
			lootID = f9_arg2
		} )
		f9_arg1.Overlay:UpdateTagAlignment()
		f9_arg1:addElement( f9_arg1.Overlay )
		f9_arg1.Overlay:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
	end
end

MenuUtils.SetupWinChallengeButtonEvents = function ( f7_arg0, f7_arg1, f7_arg2, f7_arg3, f7_arg4 )
	local f7_local0 = UNLOCK_CRITERIA.CollectUnlockData( f7_arg0, f7_arg2 )
	local f7_local1 = f7_local0.winChallenge
	if f7_local1 then
		f7_local1 = f7_local0.winChallenge.challengeID
	end
	if not f7_local1 then
		
	else
		
	end
	local f7_local2 = tonumber( f7_local1 )
	local f7_local3 = Challenge.IsChallengeInWinChallengeList( f7_arg0, f7_local1 ) and Challenge.State.IN_PROGRESS or Challenge.State.INACTIVE
	f7_arg1:registerEventHandler( "win_challenge_button_update", function ( element, event )
		if event.winChallengeID ~= f7_arg0 then
			return false
		end
		local f8_local0 = Challenge.GetActivationTextByState( f7_arg0, event.state, f7_arg0 )
		if f7_arg0 then
			f7_arg0:SetSecondaryPromptText( f8_local0 )
		else
			f7_arg0:SetDisabledText( f8_local0 )
			if f7_arg0.SetPrimaryPromptTextLocalized then
				f7_arg0:SetPrimaryPromptTextLocalized( f8_local0 )
			elseif f7_arg0.UpdateActionText then
				f7_arg0:UpdateActionText()
			end
		end
		return true
	end )
	f7_arg1:processEvent( {
		name = "win_challenge_button_update",
		winChallengeID = f7_local2,
		state = f7_local3
	} )
end

MenuUtils.RemoveWinChallengeButtonEvents = function ( f6_arg0, f6_arg1, f6_arg2, f6_arg3 )
	if f6_arg3 then
		f6_arg1:SetSecondaryPromptText( f6_arg2 )
	else
		f6_arg1:SetDisabledText( f6_arg2 )
		if f6_arg1.SetPrimaryPromptTextLocalized then
			f6_arg1:SetPrimaryPromptTextLocalized( f6_arg2 )
		elseif f6_arg1.UpdateActionText then
			f6_arg1:UpdateActionText()
		end
	end
	f6_arg1:deregisterEventHandler( "win_challenge_button_update" )
end

MenuUtils.MakeActionWhenRematchOptInEnables = function ( f4_arg0, f4_arg1, f4_arg2, f4_arg3, f4_arg4 )
	local f4_local0 = f4_arg3
	f4_arg0:CreateEventTimer( "countDownTimer", f4_arg2, {
		immediate = false,
		callbackFunc = function ( f5_arg0, f5_arg1 )
			f4_arg0 = f4_arg0 - f4_arg0
			if f4_arg0 <= 0 then
				f4_arg0.countDownTimer:closeTree()
				f4_arg0.countDownTimer = nil
			end
			if CONDITIONS.IsCoreMultiplayerNotBr() and Engine[0xD43D6B8DE2F4600]() then
				f4_arg0( f4_arg0, f4_arg0 )
				f4_arg0.countDownTimer:closeTree()
				f4_arg0.countDownTimer = nil
			end
		end
	} )
end

MenuUtils.SetMenuTitle = function ( f3_arg0, f3_arg1, f3_arg2, f3_arg3 )
	f3_arg0:SetTitle( Engine[0xED84C33EC5F01EA]( f3_arg2 ) )
	if f3_arg3 then
		f3_arg0:SetupBackButton( f3_arg1 )
	end
end

MenuUtils.AddTooltipToNonButtonElement = function ( f1_arg0, f1_arg1, f1_arg2 )
	local f1_local0 = f1_arg2
	local f1_local1 = "Button" .. f1_arg1.id
	if not f1_arg1[f1_local1] then
		local self = LUI.UIButton.new()
		self.id = f1_local1
		self.m_requireFocusType = FocusType.MouseOver
		self:setPriority( 100 )
		self:AddTooltipData( f1_arg0, {
			isMouseOnly = true,
			tooltipDescription = f1_local0
		} )
		f1_arg1:addElement( self )
		self:addEventHandler( "remove_focus_from_non_button_tooltips", function ( f2_arg0, f2_arg1 )
			if f2_arg0:isInFocus() then
				f2_arg0:processEvent( {
					name = "lose_focus",
					controller = f2_arg1.controller
				} )
			end
		end )
	end
end

