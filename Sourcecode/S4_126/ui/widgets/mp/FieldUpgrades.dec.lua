-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
module( ..., package.seeall )
require( "ui.widgets.FieldUpgradesButton" )
require( "ui.widgets.MPPlayerDetails" )
require( "ui.widgets.FieldUpgradesEquipped" )
require( "ui.widgets.MenuTitle" )
require( "ui.widgets.LobbyMembersFooter" )
require( "ui.inGame.InGameMenuTimerStatus" )
require( "ui.widgets.mp.LabeledIcon" )
require( "ui.widgets.CDLRestricted" )
require( "ui.widgets.UnlockCriteria" )
require( "ui.widgets.EquippedWidget" )
require( "ui.widgets.mp.FieldUpgradesRechargeRateContainer" )
require( "ui.widgets.NewItemNotification" )
require( "ui.frontEnd.GenericUnlockChallenge" )
local f0_local0 = _1080p * 32
local f0_local1 = _1080p * 8
if Engine[0x12586A3F4FB490E]() then
	LUI.FlowManager.RegisterFenceGroup( "FieldUpgrades", {
		nil,
		"StatsGroup"
	} )
end
local f0_local2 = 200 + 100
local f0_local3 = 64
local f0_local4 = function ( f70_arg0, f70_arg1 )
	for f70_local3, f70_local4 in pairs( f70_arg0.upgrades ) do
		if f70_local4.ref == f70_arg1 then
			return f70_local4.isActive
		end
	end
	return false
end

local f0_local5 = function ( f69_arg0, f69_arg1 )
	local f69_local0 = false
	local f69_local1 = false
	for f69_local5, f69_local6 in ipairs( f69_arg0.upgrades ) do
		if f69_arg1 == f69_local6.ref then
			f69_local0 = true
			if f69_local6.isActive then
				f69_local1 = true
				break
			end
		end
	end
	return f69_local0, f69_local1
end

local f0_local6 = function ( f68_arg0, f68_arg1, f68_arg2 )
	for f68_local3, f68_local4 in ipairs( f68_arg0.upgrades ) do
		if f68_arg1 == f68_local4.ref then
			f68_local4.isActive = f68_arg2
			break
		end
	end
end

local f0_local7 = function ( f67_arg0 )
	if not f67_arg0.upgrades[SUPER.Slot.LEFT].isActive then
		return SUPER.Slot.LEFT
	elseif not f67_arg0.upgrades[SUPER.Slot.RIGHT].isActive then
		return SUPER.Slot.RIGHT
	else
		
	end
end

local f0_local8 = function ( f66_arg0, f66_arg1, f66_arg2 )
	f66_arg0.EquippedWidget:SetVisible( f66_arg2 )
	local f66_local0 = f66_arg0.EquippedSlot
	local f66_local1 = f66_local0
	f66_local0 = f66_local0.SetVisibility
	if f66_arg2 then
		local f66_local2 = f66_arg0.proMode
		local f66_local3 = SUPER.ProMode.ENABLED
		local f66_local4 = LUI.Visibility.Visible
	end
	f66_local0( f66_local1, REG11 and f66_local4 or LUI.Visibility.Hidden )
	if f66_arg2 then
		ACTIONS.AnimateSequence( f66_arg0.EquippedWidget, "TurnOn" )
		f66_local0 = ""
		local f66_local5 = f66_arg0._currentRef
		if f66_local5 == f66_arg0.upgrades[SUPER.Slot.LEFT].ref then
			f66_local0 = Engine[0xED84C33EC5F01EA]( "LUA_MENU/FIELD_UPGRADE_INSTRUCTION", Engine[0xED84C33EC5F01EA]( "LUA_MENU/PAD_LEFT_SHOULDER_BUTTON" ) )
		elseif f66_local5 == f66_arg0.upgrades[SUPER.Slot.RIGHT].ref then
			f66_local0 = Engine[0xED84C33EC5F01EA]( "LUA_MENU/FIELD_UPGRADE_INSTRUCTION", Engine[0xED84C33EC5F01EA]( "LUA_MENU/PAD_RIGHT_SHOULDER_BUTTON" ) )
		end
		if LUI.IsLastInputGamepad( f66_arg1 ) then
			f66_arg0.EquippedSlot:setText( f66_local0 )
		end
	end
end

local f0_local9 = function ( f65_arg0, f65_arg1, f65_arg2 )
	local f65_local0 = SUPER.IsWorkInProgress( f65_arg2 )
	local f65_local1 = CONDITIONS.EnableWorkInProgressItems()
	local f65_local2 = LOOT.GetItemID( LOOT.itemTypes.SUPER, f65_arg2 )
	local f65_local3 = LOOT.IsItemBanned( f65_local2 )
	local f65_local4 = PROGRESSION.IsUnlocked( f65_arg1, LOOT.itemTypes.SUPER, f65_arg2 )
	if f65_local4 then
		if f65_local0 and f65_local1 then
			f65_local4 = f65_local1
		else
			f65_local4 = not f65_local3
		end
	end
	local f65_local5, f65_local6 = LOOT.GetUnlockTypeAndString( LOOT.itemTypes.SUPER, f65_arg2, true )
	local f65_local7
	if f65_local4 or f65_local5 ~= LOOT.unlockTypes.CHALLENGE and f65_local5 ~= LOOT.unlockTypes.CHALLENGE_OR_BUNDLE then
		f65_local7 = false
	else
		f65_local7 = true
	end
	local f65_local8 = ""
	if not f65_local4 then
		if not (not f65_local0 or f65_local1) or f65_local3 then
			f65_local8 = Engine[0xED84C33EC5F01EA]( "LUA_MENU/WORK_IN_PROGRESS" )
		elseif f65_local7 then
			local f65_local9 = PlayerCustomizationUtils.GetUnlockData( f65_arg1, f65_local2, LOOT.GetUnlockableItems( f65_arg1, LOOT.itemTypes.SUPER ), f65_arg0._challengeData, nil )
			local f65_local10 = Challenge.GetChallengeItemDisplayDataForTier( f65_local9.challengeData, f65_local9.challengeData.activeTier )
			f65_arg0.GenericUnlockChallenge:SetTitlePreLocalized( "" )
			f65_arg0.GenericUnlockChallenge:SetupChallenge( f65_local10 )
		else
			f65_local8 = PROGRESSION.GetUnlockText( f65_arg1, LOOT.itemTypes.SUPER, f65_arg2 )
		end
	end
	if f65_local4 then
		ACTIONS.AnimateSequence( f65_arg0, "HideWorkInProgress" )
	else
		f65_arg0.UnlockCriteria.UnlockDesc:setText( f65_local8 )
		ACTIONS.AnimateSequence( f65_arg0, "ShowWorkInProgress" )
	end
	local f65_local11 = f65_arg0.UnlockCriteria
	local f65_local10 = f65_local11
	f65_local11 = f65_local11.SetVisible
	local f65_local12
	if not f65_local4 then
		f65_local12 = not f65_local7
	else
		f65_local12 = false
	end
	f65_local11( f65_local10, f65_local12 )
	f65_arg0.GenericUnlockChallenge:SetVisible( f65_local7 )
end

local f0_local10 = function ( f64_arg0 )
	if CONDITIONS.FieldUpgradeProAllowed() then
		f64_arg0.UpgradesEquipped:Update( {
			proMode = f64_arg0.proMode,
			upgrades = f64_arg0.upgrades
		} )
	end
end

local f0_local11 = function ( f63_arg0, f63_arg1 )
	local f63_local0 = f63_arg0._currentRef
	local f63_local1 = Engine[0xED84C33EC5F01EA]( "LUA_MENU/SELECT" )
	if f0_local0( f63_arg0, f63_local0 ) then
		f63_local1 = Engine[0xED84C33EC5F01EA]( "LUA_MENU/DESELECT" )
	end
	f63_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_primary",
		priority = 2,
		helper_text = f63_local1
	} )
end

local f0_local12 = function ( f62_arg0, f62_arg1, f62_arg2 )
	local f62_local0 = ONBOARDING_DATA.GetOnboardingProFieldUpgradeData()
	local f62_local1
	if f62_arg2 then
		f62_local1 = 0
	else
		f62_local1 = f62_local0.waitTime
	end
	f62_local0.waitTime = f62_local1
	LUI.FlowManager.RequestPopupMenu( f62_arg0, "onboardingfeaturepopup", true, f62_arg1, false, f62_local0 )
end

local f0_local13 = function ( f61_arg0, f61_arg1 )
	return LOOT.IsNew( f61_arg0._controllerIndex, LOOT.GetItemID( LOOT.itemTypes.SUPER, f61_arg1 ) )
end

local f0_local14 = function ( f60_arg0, f60_arg1 )
	for f60_local3, f60_local4 in ipairs( f60_arg0._allRefs ) do
		if f0_local0( f60_arg0, f60_local4 ) or f60_arg1 and f60_arg1[f60_local4] then
			return true
		end
	end
	return false
end

local f0_local15 = function ( f59_arg0 )
	local f59_local0 = nil
	if CONDITIONS.IsGetMockNewItemsEnabled() then
		f59_local0 = {}
		for f59_local4, f59_local5 in ipairs( f59_arg0._allRefs ) do
			if f59_local4 % 2 == 0 and f59_local5 ~= f59_arg0.upgrades[SUPER.Slot.LEFT].ref and f59_local5 ~= f59_arg0.upgrades[SUPER.Slot.RIGHT].ref then
				f59_local0[f59_local5] = true
			end
		end
	end
	return f59_local0
end

local f0_local16 = function ( f55_arg0, f55_arg1 )
	return function ( f56_arg0, f56_arg1, f56_arg2 )
		f56_arg0.ref = f55_arg0._allRefs[f55_arg0.Grid:GetContentIndex( f56_arg1, f56_arg2 ) + 1]
		f56_arg0.blockConfirmSound = true
		f56_arg0.MenuButtonOver = function ( f58_arg0, f58_arg1 )
			f56_arg0._currentRef = f58_arg0.ref
			f56_arg0:ButtonOver( f56_arg0._controllerIndex )
		end
		
		f56_arg0.MenuButtonAction = function ( f57_arg0, f57_arg1 )
			f56_arg0:ButtonAction( f56_arg0._controllerIndex )
		end
		
		local f56_local0 = LOOT.GetItemID( LOOT.itemTypes.SUPER, f56_arg0.ref )
		local f56_local1 = SUPER.IsWorkInProgress( f56_arg0.ref )
		local f56_local2 = CONDITIONS.EnableWorkInProgressItems()
		local f56_local3 = MatchRules[0xFB2C9897F2DED4D]( f56_arg0.ref )
		if f56_local3 then
			f56_local3 = not CONDITIONS.IsMagmaGameMode()
		end
		local f56_local4 = LOOT.IsItemBanned( f56_local0 )
		local f56_local5 = PROGRESSION.IsUnlocked( f55_arg0._controllerIndex, LOOT.itemTypes.SUPER, f56_arg0.ref )
		if f56_local5 then
			if f56_local1 and f56_local2 then
				f56_local5 = f56_local2
			else
				f56_local5 = not f56_local4
			end
		end
		f56_arg0:RefreshData( SUPER.GetImage( f56_arg0.ref ), f56_local5, f55_arg0( f55_arg0, f56_arg0.ref ), f56_local3, f56_arg0.ref )
		if f55_arg0 then
			f56_arg0:SetNewItemNotificationVisible( f55_arg0[f56_arg0.ref] or false )
		end
	end
	
end

local f0_local17 = function ( f51_arg0 )
	f51_arg0.Grid:SetRefreshChild( f0_local0( f51_arg0, f0_local0( f51_arg0 ) ) )
	local f51_local0 = function ()
		for f54_local3, f54_local4 in ipairs( f51_arg0._allRefs ) do
			if f54_local4 == f51_arg0.upgrades[SUPER.Slot.LEFT].ref then
				return f54_local3 - 1
			end
		end
		return 0
	end
	
	f51_local0 = f51_local0()
	if LUI.HasHideableItemsLogic( f51_arg0.Grid, f51_arg0._controllerIndex ) then
		LUI.RemoveHideableItemsLogic( f51_arg0.Grid, f51_arg0._controllerIndex )
	end
	local f51_local1 = LUI.AddHideableItemsLogicToGrid
	local f51_local2 = f51_arg0.Grid
	local f51_local3 = f51_arg0._controllerIndex
	local f51_local4 = {
		animated = true,
		items = f51_arg0._allRefs,
		IsHideableItem = function ( f53_arg0 )
			local f53_local0
			if not f51_arg0( f51_arg0, f53_arg0 ) then
				if f51_arg0 then
					f53_local0 = not f51_arg0[f53_arg0]
				else
					f53_local0 = true
				end
			else
				f53_local0 = false
			end
			return f53_local0
		end,
		hidden = NewUnlockIndicatorUtils.InNewItemsMode( f51_arg0._controllerIndex )
	}
	local f51_local5
	if not f51_local0 then
		f51_local5 = f51_local0
	else
		f51_local5 = 0
	end
	f51_local4.defaultFocusIndex = f51_local5
	f51_local1( f51_local2, f51_local3, f51_local4 )
	f51_arg0.Grid:registerEventHandler( "toggle_new_items_mode", function ( element, event )
		element:SetItemsHidden( event.enabled, event.controllerIndex, event.instantly )
		return true
	end )
	f51_arg0.Grid:RefreshContent()
end

local f0_local18 = function ( f50_arg0 )
	f0_local0( f50_arg0 )
	f0_local0( f50_arg0 )
	local f50_local0 = f50_arg0._currentRef
	f0_local0( f50_arg0, f50_arg0._controllerIndex, f50_local0 )
	f0_local0( f50_arg0, f50_arg0._controllerIndex, f0_local0( f50_arg0, f50_local0 ) )
	f50_arg0.Grid:RefreshContent()
	if Engine[0x12586A3F4FB490E]() and not Onboarding.FieldUpgrade.WasCompleted( f50_arg0, f50_arg0._controllerIndex ) then
		LUI.FlowManager.RequestPopupMenu( f50_arg0, "onboardingpopup", true, f50_arg0._controllerIndex, false, ONBOARDING_DATA.GetOnboardingFieldUpgradeData() )
		Onboarding.FieldUpgrade.MarkCompleted( f50_arg0, f50_arg0._controllerIndex )
	end
end

local f0_local19 = function ( f49_arg0, f49_arg1, f49_arg2, f49_arg3, f49_arg4, f49_arg5 )
	local f49_local0 = {
		displayTime = 2000,
		icon = f49_arg2,
		header = f49_arg3
	}
	local f49_local1
	if f49_arg4 then
		f49_local1 = Engine[0xED84C33EC5F01EA]( f49_arg4 )
		if not f49_local1 then
		
		else
			f49_local0.description = f49_local1
			f49_local0.type = LUI.ToastManager.NotificationType.FieldUpgradeMenu
			f49_local0.controllerIndex = f49_arg1
			f49_arg0:dispatchEventToRoot( {
				name = "send_toast_notification",
				immediate = true,
				options = f49_local0
			} )
			if f49_arg5 then
				Engine[0xC4146BA76D0F982]( f49_arg5 )
			end
		end
	end
	f49_local1 = nil
end

local f0_local20 = function ( f46_arg0, f46_arg1 )
	local f46_local0 = f46_arg0._currentRef
	local f46_local1, f46_local2 = f0_local0( f46_arg0, f46_local0 )
	local f46_local3 = function ( f48_arg0 )
		f46_arg0.upgrades[f48_arg0].ref = f46_arg0
		f46_arg0.upgrades[f48_arg0].isActive = true
		f46_arg0( f46_arg0, f46_arg0, SUPER.GetImage( f46_arg0 ), Engine[0xED84C33EC5F01EA]( "LUA_MENU/FIELD_UPGRADE_EQUIPPED" ), SUPER.GetName( f46_arg0 ), SUPER.GetEquipSound( f46_arg0 ) )
	end
	
	local f46_local4 = LOOT.IsItemBanned( LOOT.GetItemID( LOOT.itemTypes.SUPER, f46_local0 ) )
	if f46_local1 then
		if f46_local2 then
			f0_local0( f46_arg0, f46_local0, false )
			Engine[0xC4146BA76D0F982]( CoD.SFX.UnselectKillstreak )
		elseif not f46_local4 then
			f0_local0( f46_arg0, f46_local0, true )
			f0_local0( f46_arg0, f46_arg1, SUPER.GetImage( f46_local0 ), Engine[0xED84C33EC5F01EA]( "LUA_MENU/FIELD_UPGRADE_EQUIPPED" ), SUPER.GetName( f46_local0 ), SUPER.GetEquipSound( f46_local0 ) )
		end
	elseif not f46_local4 then
		if f46_arg0.proMode == SUPER.ProMode.DISABLED then
			f46_local3( SUPER.Slot.LEFT )
		elseif f46_arg0.proMode == SUPER.ProMode.ENABLED then
			local f46_local5 = f0_local0( f46_arg0 )
			if f46_local5 then
				f46_local3( f46_local5 )
			else
				LUI.FlowManager.RequestPopupMenu( nil, "FieldUpgradesReplacePopup", true, f46_arg1, false, {
					refLeft = f46_arg0.upgrades[SUPER.Slot.LEFT].ref,
					refRight = f46_arg0.upgrades[SUPER.Slot.RIGHT].ref,
					refSelection = f46_local0,
					replaceSlot = function ( f47_arg0 )
						f46_arg0( f47_arg0 )
					end
				}, nil, true, false )
			end
		end
	end
	if CONDITIONS.InGame() then
		Engine[0x6055C55456F05DF]( "equip_item_ingame", 1 )
	end
	f0_local0( f46_arg0 )
end

local f0_local21 = function ( f45_arg0 )
	local f45_local0 = LAYOUT.GetTextHeight( f45_arg0.FieldUpgradeDescription )
	local f45_local1 = f45_arg0.FieldUpgradeDescription:GetCurrentAnchorsAndPositions()
	f45_local1 = f45_local1.top + f45_local0 + f0_local0
	f45_arg0.FieldUpgradesRechargeRateContainer:SetTop( f45_local1 )
	f45_arg0.FieldUpgradesRechargeRateContainer:SetBottom( f45_local1 + f0_local0 )
end

local f0_local22 = function ( f44_arg0, f44_arg1 )
	assert( f44_arg0.FieldUpgradesRechargeRateContainer )
	f44_arg0.FieldUpgradesRechargeRateContainer.RechargeRate:setText( SUPER.GetRechargeLabel( f44_arg1 ) )
	f44_arg0.FieldUpgradesRechargeRateContainer.RechargeRate:SetRGBFromTable( SUPER.GetRechargeColor( f44_arg1 ) )
	f44_arg0.FieldUpgradesRechargeRateContainer:UpdateRechargeRatePosition()
end

local f0_local23 = function ( f41_arg0, f41_arg1 )
	local f41_local0 = f41_arg0._currentRef
	f41_arg0.FieldUpgradeName:setText( ToUpperCase(), Engine[0xED84C33EC5F01EA]( SUPER.GetName( f41_local0 ) ) )
	f41_arg0.FieldUpgradeDescription:setText( Cac.GetSuperDesc( f41_local0 ) )
	local f41_local1 = LAYOUT.GetTextHeight( f41_arg0.FieldUpgradeDescription )
	f0_local0( f41_arg0 )
	local f41_local2 = f41_arg0.FieldUpgradesRechargeRateContainer:GetCurrentAnchorsAndPositions()
	f41_local2 = f41_local2.bottom + f0_local0
	f41_arg0.EquippedWidget:SetTop( f41_local2 )
	f41_arg0.EquippedWidget:SetBottom( f41_local2 + f0_local0 )
	local f41_local3 = f41_arg0.EquippedWidget:GetCurrentAnchorsAndPositions()
	f41_local3 = f41_local3.bottom + f0_local0
	f41_arg0.UnlockCriteria:SetTop( f41_local3 )
	f41_arg0.UnlockCriteria:SetBottom( f41_local3 + f0_local0 )
	f0_local0( f41_arg0, f41_local0 )
	local f41_local4 = LOOT.IsNew( f41_arg1, LOOT.GetItemID( LOOT.itemTypes.SUPER, f41_local0 ) )
	local f41_local5, f41_local6 = f0_local0( f41_arg0, f41_local0 )
	if MLG.IsCDLActive( f41_arg1 ) and MatchRules[0xFB2C9897F2DED4D]( f41_local0 ) then
		f41_arg0.CDLRestricted:SetVisibility( LUI.Visibility.Visible )
	else
		f41_arg0.CDLRestricted:SetVisibility( LUI.Visibility.Hidden )
	end
	local f41_local7 = f41_arg0.NewItemNotification
	local f41_local8 = f41_local7
	f41_local7 = f41_local7.SetVisible
	local f41_local9
	if f41_local4 then
		f41_local9 = f41_local4
	else
		f41_local9 = not f41_local5
	end
	f41_local7( f41_local8, f41_local9 )
	if f41_local0 == "super_tac_insert" then
		ACTIONS.AnimateSequence( f41_arg0, "ShowInfoMessage" )
		if IsLanguageArabic() then
			f41_local7 = f41_arg0.UnlockCriteria:GetCurrentAnchorsAndPositions()
			f41_local7 = f41_local7.bottom + _1080p * 2
			f41_arg0.InfoMessage:SetTop( f41_local7 )
			f41_arg0.InfoMessage:SetBottom( f41_local7 + _1080p * 32 )
		end
	else
		ACTIONS.AnimateSequence( f41_arg0, "HideInfoMessage" )
		if IsLanguageSimplifiedChinese() then
			ACTIONS.AnimateSequence( f41_arg0, "ZHS" )
		end
	end
	if Engine[0x12586A3F4FB490E]() then
		assert( f41_arg0.FadeCover )
		f41_local7 = f0_local0
		if f41_arg0._prevImage then
			local f41_local10 = f41_arg0.FadeCover
			f41_local9 = f41_local10
			f41_local10 = f41_local10.SetAlpha
			local f41_local11 = 1
			local f41_local12
			if f41_arg0._changingImage then
				f41_local12 = 10
			else
				f41_local12 = f0_local0
			end
			f41_local10( f41_local9, f41_local11, f41_local12, LUI.EASING.inQuadratic )
		else
			f41_arg0.FadeCover:SetAlpha( 0 )
			f41_arg0.Showcase:SetAlpha( 0 )
			f41_local7 = 0
		end
		local f41_local10 = f41_arg0.FadeCover:Wait( f41_local7, true )
		f41_local10.onComplete = function ()
			assert( f41_arg0.Showcase )
			f41_arg0.Showcase:setImage( RegisterMaterial( Cac.GetSuperFullImage( f41_arg0 ) ) )
			f41_arg0.Showcase:SetScale( f41_arg0.Showcase.aspectRatioScaleAdjust or 0, 0 )
			f41_arg0.Showcase:SetScale( (f41_arg0.Showcase.aspectRatioScaleAdjust or 0) + 0.015, 2500, LUI.EASING.outQuadratic )
			if not f41_arg0._prevImage then
				f41_arg0.Showcase:SetAlpha( 1, 500, LUI.EASING.inQuadratic )
			end
			f41_arg0._prevImage = Cac.GetSuperFullImage( f41_arg0 )
			local f42_local0 = f41_arg0.FadeCover:Wait( f41_arg0, true )
			f42_local0.onComplete = function ()
				f42_local0.FadeCover:SetAlpha( 0, f42_local0, LUI.EASING.outQuadratic )
				f42_local0._changingImage = false
			end
			
		end
		
		f41_arg0._changingImage = true
	end
	f0_local0( f41_arg0 )
end

local f0_local24 = function ( f39_arg0, f39_arg1 )
	f39_arg0.Grid:SetMaxVisibleColumns( math.min( #f39_arg0._allRefs, f39_arg0._defaultMaxVisibleColumns ) )
	f39_arg0.Grid:SetNumChildren( 0 )
	f39_arg0:addEventHandler( "menu_create", function ()
		f39_arg0( f39_arg0 )
	end )
end

local f0_local25 = function ( f36_arg0, f36_arg1 )
	local f36_local0 = function ()
		f36_arg0.upgrades[SUPER.Slot.LEFT].isActive = false
		f36_arg0.upgrades[SUPER.Slot.RIGHT].isActive = false
		f36_arg0( f36_arg0 )
	end
	
	local f36_local1 = Engine[0xED84C33EC5F01EA]( "LUA_MENU/DESELECT_ALL" )
	if f36_arg1 then
		f36_arg0.bindButton:registerEventHandler( "button_alt1", function ( element, event )
			f36_arg0()
			if event.qualifier then
				Engine[0xC4146BA76D0F982]( CoD.SFX.MouseClick )
			end
		end )
	else
		f36_arg0.bindButton:registerEventHandler( "button_alt1", nil )
		f36_local1 = ""
	end
	f36_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_alt1",
		priority = 3,
		helper_text = f36_local1
	} )
end

local f0_local26 = function ( f35_arg0 )
	local f35_local0 = f35_arg0.upgrades[SUPER.Slot.LEFT]
	f35_arg0.upgrades[SUPER.Slot.LEFT] = f35_arg0.upgrades[SUPER.Slot.RIGHT]
	f35_arg0.upgrades[SUPER.Slot.RIGHT] = f35_local0
end

local f0_local27 = function ( f33_arg0, f33_arg1 )
	local f33_local0 = "button_right_trigger"
	local f33_local1 = Engine[0xED84C33EC5F01EA]( "LUA_MENU/SWAP" )
	if f33_arg1 then
		f33_arg0.bindButton:registerEventHandler( f33_local0, function ( element, event )
			if event.qualifier then
				Engine[0xC4146BA76D0F982]( CoD.SFX.MouseClick )
			end
			f33_arg0( f33_arg0 )
			f33_arg0( f33_arg0 )
		end )
	else
		f33_arg0.bindButton:registerEventHandler( f33_local0, nil )
		f33_local1 = ""
	end
	if CONDITIONS.FieldUpgradeProAllowed() then
		f33_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			helper_text = f33_local1,
			button_ref = f33_local0,
			container = f33_arg0.UpgradesEquipped:GetSwapContainer()
		} )
	end
end

local f0_local28 = function ( f31_arg0, f31_arg1 )
	local f31_local0 = Engine[0xED84C33EC5F01EA]( "LUA_MENU/PRO_HELP" )
	local f31_local1 = "button_alt2"
	if f31_arg1 and CONDITIONS.InFrontend() then
		f31_arg0.bindButton:registerEventHandler( f31_local1, function ( element, event )
			f31_arg0( element, element._controllerIndex, true )
			if event.qualifier then
				Engine[0xC4146BA76D0F982]( CoD.SFX.MouseClick )
			end
		end )
	else
		f31_arg0.bindButton:registerEventHandler( f31_local1, nil )
		f31_local0 = ""
	end
	f31_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		priority = 4,
		helper_text = f31_local0,
		button_ref = f31_local1
	} )
end

local f0_local29 = function ( f30_arg0, f30_arg1 )
	local f30_local0 = Engine[0xED84C33EC5F01EA]( "LUA_MENU/FIELD_UPGRADE_PRO_LOCKED", f30_arg0._proModeUnlockText )
	if f30_arg0._proModeAvailable then
		ACTIONS.AnimateSequence( f30_arg0.UpgradesEquipped, "ProAvailable" )
		if f30_arg0.proMode == SUPER.ProMode.ENABLED then
			f30_local0 = Engine[0xED84C33EC5F01EA]( "LUA_MENU/FIELD_UPGRADE_PRO_DEACTIVATE" )
		else
			f30_local0 = Engine[0xED84C33EC5F01EA]( "LUA_MENU/FIELD_UPGRADE_PRO_ACTIVATE" )
		end
		f30_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			button_ref = "button_left_trigger",
			helper_text = f30_local0,
			container = f30_arg0.UpgradesEquipped:GetProModeContainer()
		} )
	elseif CONDITIONS.FieldUpgradeProAllowed() then
		if MLG.IsCDLActive( f30_arg1 ) then
			ACTIONS.AnimateSequence( f30_arg0.UpgradesEquipped, "ProHidden" )
		else
			ACTIONS.AnimateSequence( f30_arg0.UpgradesEquipped, "ProUnavailable" )
		end
	end
end

local f0_local30 = function ( f29_arg0, f29_arg1 )
	if not f29_arg0._proModeAvailable then
		return false
	end
	local f29_local0 = false
	if f29_arg0.proMode == SUPER.ProMode.ENABLED then
		f29_arg0.proMode = SUPER.ProMode.DISABLED
	elseif f29_arg0.proMode == SUPER.ProMode.DISABLED then
		f29_arg0.proMode = SUPER.ProMode.ENABLED
		f29_local0 = true
		f0_local0( f29_arg0, f29_arg1, PROGRESSION.GetPlayerRankIcon( f29_arg1 ), Engine[0xED84C33EC5F01EA]( "LUA_MENU/FIELD_UPGRADE_PRO_ACTIVATED" ) )
	end
	f0_local0( f29_arg0, f29_local0 )
	f0_local0( f29_arg0, f29_local0 )
	f0_local0( f29_arg0, f29_local0 )
	f0_local0( f29_arg0, f29_arg1 )
	if f29_arg0.upgrades[SUPER.Slot.LEFT].ref == Cac.superNoneValue then
		f0_local0( f29_arg0 )
	end
	f29_arg0.upgrades[SUPER.Slot.RIGHT].ref = Cac.superNoneValue
	f29_arg0.upgrades[SUPER.Slot.RIGHT].isActive = false
	return true
end

local f0_local31 = function ( f28_arg0, f28_arg1 )
	local f28_local0 = PROGRESSION.GetPlayerRank( f28_arg1 )
	local f28_local1 = f28_arg0.upgrades[SUPER.Slot.RIGHT].ref ~= Cac.superNoneValue
	local f28_local2 = false
	f28_arg0.proMode = SUPER.ProMode.DISABLED
	if not CONDITIONS.FieldUpgradeProAllowed() or MLG.IsCDLActive( f28_arg1 ) then
		f28_arg0._proModeAvailable = false
		f28_arg0._proModeUnlockText = ""
	else
		local f28_local3 = PROGRESSION.IsUnlocked( f28_arg1, LOOT.itemTypes.FEATURE, LOOT.fieldUpgradeProRef )
		if not f28_local3 then
			f28_local3 = CONDITIONS.IsDevelopmentBuild()
		end
		f28_arg0._proModeAvailable = f28_local3
		f28_arg0._proModeUnlockText = PROGRESSION.GetUnlockText( f28_arg1, LOOT.itemTypes.FEATURE, LOOT.fieldUpgradeProRef )
	end
	if f28_arg0._proModeAvailable then
		if f28_local1 then
			f28_arg0.proMode = SUPER.ProMode.ENABLED
			f28_local2 = true
		end
	else
		f28_arg0.upgrades[SUPER.Slot.RIGHT].ref = Cac.superNoneValue
	end
	f0_local0( f28_arg0, f28_local2 )
	f0_local0( f28_arg0, f28_local2 )
	f0_local0( f28_arg0, f28_local2 )
	f0_local0( f28_arg0, f28_arg1 )
end

local f0_local32 = function ( f27_arg0, f27_arg1 )
	if f27_arg0.upgrades[SUPER.Slot.LEFT].ref == Cac.superNoneValue then
		f0_local0( f27_arg0 )
	end
	assert( f27_arg0.upgrades[SUPER.Slot.LEFT].ref ~= Cac.superNoneValue )
	f27_arg0._playerData.fieldUpgrades[0]:set( f27_arg0.upgrades[SUPER.Slot.LEFT].ref )
	f27_arg0._playerData.fieldUpgrades[1]:set( f27_arg0.upgrades[SUPER.Slot.RIGHT].ref )
	ACTIONS.UploadStats( f27_arg0, f27_arg1 )
	local f27_local0 = LUI.DataSourceInControllerModel.new( "cg.players.selectedLoadout" )
	if not Engine[0x12586A3F4FB490E]() and f27_local0:GetValue( f27_arg1 ) then
		Engine[0x6055C55456F05DF]( "class_edit", f27_local0:GetValue( f27_arg1 ) )
	end
end

local f0_local33 = function ( f26_arg0, f26_arg1, f26_arg2 )
	if f26_arg0._challengeData then
		return 
	end
	for f26_local6, f26_local7 in ipairs( f26_arg2 ) do
		local f26_local8 = SUPER.IsWorkInProgress( f26_local7 )
		local f26_local9 = CONDITIONS.EnableWorkInProgressItems()
		local f26_local10 = LOOT.IsItemBanned( LOOT.GetItemID( LOOT.itemTypes.SUPER, f26_local7 ) )
		local f26_local3 = PROGRESSION.IsUnlocked( f26_arg1, LOOT.itemTypes.SUPER, f26_local7 )
		if f26_local3 then
			if f26_local8 and f26_local9 then
				f26_local3 = f26_local9
			else
				f26_local3 = not f26_local10
			end
		end
		if not f26_local3 then
			local f26_local4, f26_local5 = LOOT.GetUnlockTypeAndString( LOOT.itemTypes.SUPER, f26_local7, true )
			if f26_local4 == LOOT.unlockTypes.CHALLENGE or f26_local4 == LOOT.unlockTypes.CHALLENGE_OR_BUNDLE then
				f26_arg0._challengeData = PlayerCustomizationUtils.GetChallengesAndLootMapData( f26_arg1 )
				return 
			end
		end
	end
end

local f0_local34 = function ( f15_arg0, f15_arg1, f15_arg2 )
	f15_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( "LUA_MENU/FIELD_UPGRADES" ) )
	f15_arg0.ButtonAction = f0_local0
	f15_arg0.ButtonOver = f0_local0
	f15_arg0._allRefs = SUPER.GetAllRefs()
	f15_arg0._currentRef = f15_arg0._allRefs[1]
	f15_arg0._controllerIndex = f15_arg1
	f15_arg0._defaultMaxVisibleColumns = f15_arg0.Grid:GetMaxVisibleColumns()
	local f15_local0 = PlayerData[0x8B73907B55C4D71]( f15_arg1, LOADOUT.GetLoadoutStatsGroup() )
	f15_arg0._playerData = f15_local0.squadMembers
	f15_arg0._upgradeSelectionComplete = true
	f15_arg0._prevImage = nil
	f15_arg0.upgrades = {
		[SUPER.Slot.LEFT] = {
			isActive = true,
			ref = f15_arg0._playerData.fieldUpgrades[0]:get()
		},
		[SUPER.Slot.RIGHT] = {
			isActive = true,
			ref = f15_arg0._playerData.fieldUpgrades[1]:get()
		}
	}
	f15_arg0.EquippedWidget:InitializeText( Engine[0xED84C33EC5F01EA]( "LUA_MENU/EQUIPPED" ) )
	f15_arg0.FieldUpgradeDescription:SetNotifyOnStyledTextRender( true )
	f15_arg0.FieldUpgradeDescription:addEventHandler( "styled_text_rendered", function ( f25_arg0, f25_arg1 )
		f15_arg0( f15_arg0 )
	end )
	f0_local0( f15_arg0, f15_arg1, f15_arg0._allRefs )
	f0_local0( f15_arg0, f15_arg1 )
	f0_local0( f15_arg0, f15_arg1 )
	f0_local0( f15_arg0 )
	f15_arg0:addAndCallEventHandler( "update_input_type", function ( f24_arg0, f24_arg1 )
		if not LUI.IsLastInputGamepad( f24_arg1.controllerIndex ) then
			f24_arg0.EquippedSlot:setText( "" )
		end
	end, {
		controllerIndex = f15_arg1
	} )
	f15_arg0:addEventHandler( "menu_close", function ( f23_arg0, f23_arg1 )
		f15_arg0( f15_arg0, f15_arg0 )
	end )
	if Engine[0x12586A3F4FB490E]() then
		if Engine[0x575E9C5B9AAB6F4]() then
			assert( f15_arg0.Showcase )
			LAYOUT.AddHandlerAspectRatioScaleAdjustment( f15_arg0, f15_arg0.Showcase, LAYOUT.AspectRatioImageScalePct.STANDARD )
		end
	else
		ACTIONS.ScaleFullscreen( f15_arg0.BackgroundGradient )
	end
	if not Engine[0x12586A3F4FB490E]() then
		f15_arg0:addEventHandler( "menu_create", function ()
			f15_arg0:AddButtonHelperText( {
				clickable = true,
				priority = 5,
				side = "left",
				kbmTooltipPromptOverload = "button_dismiss_pause_menu",
				button_ref = "button_start",
				helper_text = Engine[0xED84C33EC5F01EA]( "LUA_MENU/DISMISS_MENU" )
			} )
		end )
		f15_arg0.bindButton:addEventHandler( "button_start", function ( f21_arg0, f21_arg1 )
			LUI.FlowManager.RequestCloseAllMenus( f15_arg0.id, false, f21_arg1.controller, true )
			return true
		end )
		MenuUtils.AddDismissPauseMenuKBMHandler( f15_arg0 )
	end
	f15_arg0.bindButton:addEventHandler( "button_left_trigger", function ( f20_arg0, f20_arg1 )
		if f15_arg0( f15_arg0, f15_arg0 ) then
			if f20_arg1.qualifier then
				Engine[0xC4146BA76D0F982]( CoD.SFX.MouseClick )
			end
			f15_arg0( f15_arg0 )
		end
	end )
	if LUI.IsLastInputKeyboardMouse( f15_arg1 ) then
		f15_arg0.Grid:GainFocus()
	end
	if IsLanguageArabic() then
		ACTIONS.AnimateSequence( f15_arg0, "AR" )
	elseif IsLanguageJapanese() then
		ACTIONS.AnimateSequence( f15_arg0, "JP" )
	end
	if Engine[0x12586A3F4FB490E]() then
		local f15_local1 = function ( f19_arg0, f19_arg1 )
			
		end
		
		if not Onboarding.FieldUpgrade.WasCompleted( f15_arg0, f15_arg1 ) then
			local f15_local2 = ONBOARDING_DATA.GetOnboardingFieldUpgradeData()
			if f15_arg0._proModeAvailable then
				f15_local2.confirmButton.action = function ( f18_arg0, f18_arg1 )
					ACTIONS.LeaveMenu( f18_arg0 )
					f15_arg0( f18_arg0, f18_arg1 )
				end
				
			end
			LUI.FlowManager.RequestPopupMenu( f15_arg0, "onboardingpopup", true, f15_arg1, false, f15_local2 )
			Onboarding.FieldUpgrade.MarkCompleted( f15_arg0, f15_arg0._controllerIndex )
		elseif f15_arg0._proModeAvailable then
			f15_local1( f15_arg0, f15_arg1 )
		end
	end
	if not IsLanguageArabic() then
		f15_arg0.NewItemNotification:SetupLeftAlignment()
	end
	f15_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
		blockConfirmSound = true,
		button_ref = "button_secondary",
		side = "left",
		helper_text = Engine[0xED84C33EC5F01EA]( "MENU/BACK" )
	} )
	f15_arg0.bindButton:addEventHandler( "button_secondary", function ( f17_arg0, f17_arg1 )
		local f17_local0 = f17_arg1.controller or f15_arg0
		if CONDITIONS.InNewItemsMode( f17_local0 ) then
			ACTIONS.TurnOffNewItemsMode( f15_arg0, f17_local0 )
		else
			ACTIONS.LeaveMenu( f15_arg0 )
		end
	end )
	if f0_local0( f15_arg0, f0_local0( f15_arg0 ) ) then
		NewUnlockIndicatorUtils.PushButtonPrompt( f15_arg0.HelperBar )
		NewUnlockIndicatorUtils.SetupButtonHandler( f15_arg0, f15_arg0.bindButton, f15_arg1, function ( f16_arg0, f16_arg1 )
			ACTIONS.ToggleNewItemsMode( f16_arg0, f16_arg1 )
		end )
	end
	f15_arg0.Grid:MouseSetActiveToDefaultFocusMenuCreate( f15_arg1 )
	SEQUENCEPRESETS.RegisterAnimation( f15_arg0, LUI.Transition.TransTo, "InDepthForward", 0 )
	SEQUENCEPRESETS.RegisterAnimation( f15_arg0, LUI.Transition.TransBackFrom, "OutDepthBack", 0 )
	if Engine[0xFB1B6E36ABE59B8]() then
		ACTIONS.AnimateSequence( f15_arg0, "SafeAreaAdjustment" )
	end
end

function FieldUpgrades( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "FieldUpgrades"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	self._sequenceLengths = self._sequenceLengths or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	self.HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	self.HelperBar.id = "HelperBar"
	self.HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
	self.HelperBar:setPriority( 10 )
	self:addElement( self.HelperBar )
	local f1_local2 = self
	local f1_local3 = nil
	if Engine[0x12586A3F4FB490E]() then
		f1_local3 = LUI.UIImage.new()
		f1_local3.id = "Showcase"
		if Engine[0x575E9C5B9AAB6F4]() then
			LAYOUT.AddHandlerAspectRatioScaleAdjustment( self, f1_local3, LAYOUT.AspectRatioImageScalePct.STANDARD )
		end
		f1_local3:setImage( RegisterMaterial( "frontend_field_upgrade_support_box" ), 0 )
		f1_local3:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -960, _1080p * 960, _1080p * -540, _1080p * 540 )
		self:addElement( f1_local3 )
		self.Showcase = f1_local3
	end
	local f1_local4 = nil
	if CONDITIONS.InGame() then
		f1_local4 = LUI.UIImage.new()
		f1_local4.id = "BackgroundGradient"
		if Engine[0x575E9C5B9AAB6F4]() then
			LAYOUT.AddHandlerAspectRatioScaleAdjustment( self, f1_local4, LAYOUT.AspectRatioImageScalePct.STANDARD )
		end
		f1_local4:SetRGBFromInt( 0, 0 )
		f1_local4:SetAlpha( 0.5, 0 )
		f1_local4:setImage( RegisterMaterial( "widg_gradient_left_to_right" ), 0 )
		f1_local4:SetAnchorsAndPosition( 0, 1, 0, 0, 0, _1080p * 1322, 0, 0 )
		self:addElement( f1_local4 )
		self.BackgroundGradient = f1_local4
	end
	local f1_local5 = nil
	if Engine[0x12586A3F4FB490E]() then
		f1_local5 = LUI.UIImage.new()
		f1_local5.id = "FadeCover"
		if Engine[0x575E9C5B9AAB6F4]() then
			LAYOUT.AddHandlerAspectRatioScaleAdjustment( self, f1_local5, LAYOUT.AspectRatioImageScalePct.STANDARD )
		end
		f1_local5:SetRGBFromInt( 0, 0 )
		f1_local5:SetAlpha( 0, 0 )
		self:addElement( f1_local5 )
		self.FadeCover = f1_local5
	end
	local Darken = nil
	
	Darken = LUI.UIImage.new()
	Darken.id = "Darken"
	ACTIONS.ScaleFullscreen( Darken )
	Darken:SetVisibility( LUI.Visibility.Hidden )
	Darken:SetRGBFromTable( SWATCHES.genericMenu.blackBackground, 0 )
	Darken:SetAlpha( 0.5, 0 )
	Darken:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 896, _1080p * 1024, _1080p * 476, _1080p * 604 )
	self:addElement( Darken )
	self.Darken = Darken
	
	local Grid = nil
	
	Grid = LUI.UIGrid.new( {
		scrollingThresholdX = 0,
		maxVisibleColumns = 19,
		maxVisibleRows = 1,
		adjustSizeToContent = true,
		forcePrimaryAxisScrolling = true,
		controllerIndex = f1_local1,
		buildChild = function ()
			return MenuBuilder.BuildRegisteredType( "FieldUpgradesButton", {
				controllerIndex = menu
			} )
		end,
		refreshChild = function ( f13_arg0, f13_arg1, f13_arg2 )
			
		end,
		spacingX = _1080p * 6,
		spacingY = _1080p * 6,
		columnWidth = _1080p * 84,
		rowHeight = _1080p * 124
	} )
	Grid.id = "Grid"
	Grid:SetMaxVisibleColumns( 19 )
	Grid:SetRowSpacing( 6 )
	Grid:setUseStencil( false )
	Grid:SetActiveOnMouseOverBehavior( f1_local1 )
	Grid:SetScrollThresholdX( 0 )
	Grid:SetAnchorsAndPosition( 0, 0, 1, 0, _1080p * 96, _1080p * -132, _1080p * -221, _1080p * -101 )
	self:addElement( Grid )
	self.Grid = Grid
	
	local EquippedSlot = nil
	
	EquippedSlot = LUI.UIText.new()
	EquippedSlot.id = "EquippedSlot"
	EquippedSlot:SetRGBFromTable( SWATCHES.text.buttonTextDefault, 0 )
	EquippedSlot:SetAlpha( 0.75, 0 )
	EquippedSlot:SetHorizontalPivot( LUI.HorizontalPivot.Left )
	EquippedSlot:setText( "", 0 )
	EquippedSlot:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_SSubHeader.font.File ) )
	EquippedSlot:SetFontSize( FONT_STYLES.fontStyle_SSubHeader.size )
	EquippedSlot:SetMinFontSize( FONT_STYLES.fontStyle_SSubHeader.minSize )
	EquippedSlot:SetWordWrap( true )
	EquippedSlot:SetAlignment( LUI.Alignment.Left )
	EquippedSlot:SetVerticalAlignment( LUI.Alignment.Center )
	EquippedSlot:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 468, _1080p * 776, _1080p * 808 )
	self:addElement( EquippedSlot )
	self.EquippedSlot = EquippedSlot
	
	local f1_local9 = nil
	if CONDITIONS.InFrontendPublicMP() then
		f1_local9 = MenuBuilder.BuildRegisteredType( "MPPlayerDetails", {
			controllerIndex = f1_local1
		} )
		f1_local9.id = "MPPlayerDetails"
		f1_local9:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -596, _1080p * -96, _1080p * 54, _1080p * 114 )
		self:addElement( f1_local9 )
		self.MPPlayerDetails = f1_local9
	end
	local f1_local10 = nil
	if CONDITIONS.FieldUpgradeProAllowed() then
		f1_local10 = MenuBuilder.BuildRegisteredType( "FieldUpgradesEquipped", {
			controllerIndex = f1_local1
		} )
		f1_local10.id = "UpgradesEquipped"
		f1_local10:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -475, _1080p * -269, _1080p * 612, _1080p * 772 )
		self:addElement( f1_local10 )
		self.UpgradesEquipped = f1_local10
	end
	local MenuTitle = nil
	
	MenuTitle = MenuBuilder.BuildRegisteredType( "MenuTitle", {
		controllerIndex = f1_local1
	} )
	MenuTitle.id = "MenuTitle"
	MenuTitle.MenuTitle:SetAlpha( 0.15, 0 )
	MenuTitle.MenuTitle:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU/FIELD_UPGRADES" ), 0 )
	MenuTitle.Line:SetLeft( 0, 0 )
	MenuTitle:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 1024, 0, _1080p * 100 )
	self:addElement( MenuTitle )
	self.MenuTitle = MenuTitle
	
	local f1_local12 = nil
	if CONDITIONS.InFrontend() then
		f1_local12 = MenuBuilder.BuildRegisteredType( "LobbyMembersFooter", {
			controllerIndex = f1_local1
		} )
		f1_local12.id = "LobbyMembersFooter"
		f1_local12:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 150 )
		self:addElement( f1_local12 )
		self.LobbyMembersFooter = f1_local12
	end
	local f1_local13 = nil
	if CONDITIONS.InGame() then
		f1_local13 = MenuBuilder.BuildRegisteredType( "InGameMenuTimerStatus", {
			controllerIndex = f1_local1
		} )
		f1_local13.id = "InGameMenuTimerStatus"
		f1_local13:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 820, _1080p * 1220, _1080p * 54, _1080p * 104 )
		self:addElement( f1_local13 )
		self.InGameMenuTimerStatus = f1_local13
	end
	local InfoMessage = nil
	
	InfoMessage = MenuBuilder.BuildRegisteredType( "LabeledIcon", {
		controllerIndex = f1_local1
	} )
	InfoMessage.id = "InfoMessage"
	InfoMessage:SetHorizontalPivot( LUI.HorizontalPivot.Left )
	InfoMessage.Text:setText( Engine[0xED84C33EC5F01EA]( "LUA_MENU/TACTICAL_INSERTION_DISCLAIMER" ), 0 )
	InfoMessage.Icon:setImage( RegisterMaterial( "v_ui_icon_info_alert_01" ), 0 )
	InfoMessage:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 88, _1080p * 840, _1080p * 697, _1080p * 729 )
	self:addElement( InfoMessage )
	self.InfoMessage = InfoMessage
	
	local CDLRestricted = nil
	
	CDLRestricted = MenuBuilder.BuildRegisteredType( "CDLRestricted", {
		controllerIndex = f1_local1
	} )
	CDLRestricted.id = "CDLRestricted"
	CDLRestricted:SetRGBFromTable( SWATCHES.text.buttonTextDefault, 0 )
	CDLRestricted:SetHorizontalPivot( LUI.HorizontalPivot.Left )
	CDLRestricted:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 88, _1080p * 460, _1080p * 734, _1080p * 766 )
	self:addElement( CDLRestricted )
	self.CDLRestricted = CDLRestricted
	
	local UnlockCriteria = nil
	
	UnlockCriteria = MenuBuilder.BuildRegisteredType( "UnlockCriteria", {
		controllerIndex = f1_local1
	} )
	UnlockCriteria.id = "UnlockCriteria"
	UnlockCriteria:SetHorizontalPivot( LUI.HorizontalPivot.Left )
	UnlockCriteria.UnlockDesc:SetRGBFromTable( SWATCHES.text.buttonTextDefault, 0 )
	UnlockCriteria.UnlockDesc:setText( "LOCKED", 0 )
	UnlockCriteria.UnlockDesc:SetAlignment( LUI.Alignment.Left )
	UnlockCriteria:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 88, _1080p * 430, _1080p * 697, _1080p * 729 )
	self:addElement( UnlockCriteria )
	self.UnlockCriteria = UnlockCriteria
	
	local EquippedWidget = nil
	
	EquippedWidget = MenuBuilder.BuildRegisteredType( "EquippedWidget", {
		controllerIndex = f1_local1
	} )
	EquippedWidget.id = "EquippedWidget"
	EquippedWidget:SetHorizontalPivot( LUI.HorizontalPivot.Left )
	EquippedWidget:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 88, _1080p * 248, _1080p * 664, _1080p * 696 )
	self:addElement( EquippedWidget )
	self.EquippedWidget = EquippedWidget
	
	local FieldUpgradesRechargeRateContainer = nil
	
	FieldUpgradesRechargeRateContainer = MenuBuilder.BuildRegisteredType( "FieldUpgradesRechargeRateContainer", {
		controllerIndex = f1_local1
	} )
	FieldUpgradesRechargeRateContainer.id = "FieldUpgradesRechargeRateContainer"
	FieldUpgradesRechargeRateContainer:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 840, _1080p * 618, _1080p * 650 )
	self:addElement( FieldUpgradesRechargeRateContainer )
	self.FieldUpgradesRechargeRateContainer = FieldUpgradesRechargeRateContainer
	
	local FieldUpgradeDescription = nil
	
	FieldUpgradeDescription = LUI.UIStyledText.new()
	FieldUpgradeDescription.id = "FieldUpgradeDescription"
	FieldUpgradeDescription:SetRGBFromTable( SWATCHES.text.buttonTextDefault, 0 )
	FieldUpgradeDescription:SetAlpha( 0.75, 0 )
	FieldUpgradeDescription:SetUseForceOpacityMode( true )
	FieldUpgradeDescription:SetHorizontalPivot( LUI.HorizontalPivot.Left )
	FieldUpgradeDescription:setText( "", 0 )
	FieldUpgradeDescription:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_LBodyText.font.File ) )
	FieldUpgradeDescription:SetFontSize( FONT_STYLES.fontStyle_LBodyText.size )
	FieldUpgradeDescription:SetMinFontSize( FONT_STYLES.fontStyle_LBodyText.minSize )
	FieldUpgradeDescription:SetWordWrap( true )
	FieldUpgradeDescription:SetTracking( FONT_STYLES.fontStyle_LBodyText.tracking * _1080p, 0 )
	FieldUpgradeDescription:SetLeading( FONT_STYLES.fontStyle_LBodyText.leading * _1080p, 0 )
	FieldUpgradeDescription:SetAlignment( LUI.Alignment.Left )
	FieldUpgradeDescription:SetOptOutRightToLeftAlignmentFlip( true )
	FieldUpgradeDescription:SetMaxVisibleLines( 4 )
	FieldUpgradeDescription:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 840, _1080p * 551, _1080p * 634 )
	self:addElement( FieldUpgradeDescription )
	self.FieldUpgradeDescription = FieldUpgradeDescription
	
	local FieldUpgradeName = nil
	
	FieldUpgradeName = LUI.UIText.new()
	FieldUpgradeName.id = "FieldUpgradeName"
	FieldUpgradeName:SetRGBFromTable( SWATCHES.text.buttonTextDefault, 0 )
	FieldUpgradeName:SetUseForceOpacityMode( true )
	FieldUpgradeName:SetHorizontalPivot( LUI.HorizontalPivot.Left )
	FieldUpgradeName:setText( "", 0 )
	FieldUpgradeName:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_XLHeaderBold.font.File ) )
	FieldUpgradeName:SetFontSize( FONT_STYLES.fontStyle_XLHeaderBold.size )
	FieldUpgradeName:SetMinFontSize( FONT_STYLES.fontStyle_XLHeaderBold.minSize )
	FieldUpgradeName:SetWordWrap( true )
	FieldUpgradeName:SetAlignment( LUI.Alignment.Left )
	FieldUpgradeName:SetOptOutRightToLeftAlignmentFlip( true )
	FieldUpgradeName:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 840, _1080p * 473, _1080p * 547 )
	self:addElement( FieldUpgradeName )
	self.FieldUpgradeName = FieldUpgradeName
	
	local NewItemNotification = nil
	
	NewItemNotification = MenuBuilder.BuildRegisteredType( "NewItemNotification", {
		controllerIndex = f1_local1
	} )
	NewItemNotification.id = "NewItemNotification"
	NewItemNotification:SetHorizontalPivot( LUI.HorizontalPivot.Left )
	NewItemNotification:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 174, _1080p * 438, _1080p * 468 )
	self:addElement( NewItemNotification )
	self.NewItemNotification = NewItemNotification
	
	local GenericUnlockChallenge = nil
	
	GenericUnlockChallenge = MenuBuilder.BuildRegisteredType( "GenericUnlockChallenge", {
		controllerIndex = f1_local1
	} )
	GenericUnlockChallenge.id = "GenericUnlockChallenge"
	GenericUnlockChallenge.Title:setText( "", 0 )
	GenericUnlockChallenge:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 566, _1080p * 656, _1080p * 752 )
	self:addElement( GenericUnlockChallenge )
	self.GenericUnlockChallenge = GenericUnlockChallenge
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	self._sequenceLengths.DefaultSequence = 0
	local f1_local23 = nil
	EquippedSlot:RegisterAnimationSequence( "Splitscreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 347
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 365
		}
	} )
	if CONDITIONS.FieldUpgradeProAllowed() then
		f1_local10:RegisterAnimationSequence( "Splitscreen", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Top,
				value = _1080p * 247
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Bottom,
				value = _1080p * 327
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Left,
				value = _1080p * 1512
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Right,
				value = _1080p * 1682
			}
		} )
	end
	if CONDITIONS.InGame() then
		f1_local13:RegisterAnimationSequence( "Splitscreen", {
			{
				duration = 0,
				property = TWEEN_PROPERTY.Left,
				value = _1080p * 760
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Right,
				value = _1080p * 1160
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Top,
				value = _1080p * 34
			},
			{
				duration = 0,
				property = TWEEN_PROPERTY.Bottom,
				value = _1080p * 84
			}
		} )
	end
	UnlockCriteria:RegisterAnimationSequence( "Splitscreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 340
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 372
		}
	} )
	EquippedWidget:RegisterAnimationSequence( "Splitscreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 387
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 417
		}
	} )
	FieldUpgradesRechargeRateContainer:RegisterAnimationSequence( "Splitscreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 274
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 298
		}
	} )
	FieldUpgradeDescription:RegisterAnimationSequence( "Splitscreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 208
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 228
		}
	} )
	FieldUpgradeName:RegisterAnimationSequence( "Splitscreen", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 154
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 204
		}
	} )
	self._sequences.Splitscreen = function ()
		menu:AnimateSequence( "Splitscreen" )
		if CONDITIONS.FieldUpgradeProAllowed() then
			menu:AnimateSequence( "Splitscreen" )
		end
		if CONDITIONS.InGame() then
			menu:AnimateSequence( "Splitscreen" )
		end
		menu:AnimateSequence( "Splitscreen" )
		menu:AnimateSequence( "Splitscreen" )
		menu:AnimateSequence( "Splitscreen" )
		menu:AnimateSequence( "Splitscreen" )
		menu:AnimateSequence( "Splitscreen" )
	end
	
	self._sequenceLengths.Splitscreen = 0
	local f1_local24 = nil
	InfoMessage:RegisterAnimationSequence( "AR", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 468
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 841
		}
	} )
	UnlockCriteria:RegisterAnimationSequence( "AR", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 499
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 841
		}
	} )
	EquippedWidget:RegisterAnimationSequence( "AR", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 681
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 841
		}
	} )
	f1_local24 = {}
	f1_local24 = {}
	self._sequences.AR = function ()
		menu:AnimateSequence( "AR" )
		menu:AnimateSequence( "AR" )
		menu:AnimateSequence( "AR" )
		menu:SetOptOutRightToLeftAlignmentFlip( false )
		menu:SetOptOutRightToLeftAlignmentFlip( false )
	end
	
	self._sequenceLengths.AR = 0
	local f1_local25 = nil
	InfoMessage:RegisterAnimationSequence( "ShowInfoMessage", {
		{
			value = 1,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.outQuadratic
		},
		{
			duration = -28,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 697,
			easing = LUI.EASING.outQuadratic
		},
		{
			duration = -28,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 729,
			easing = LUI.EASING.outQuadratic
		}
	} )
	CDLRestricted:RegisterAnimationSequence( "ShowInfoMessage", {
		{
			duration = -28,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 771,
			easing = LUI.EASING.outQuadratic
		},
		{
			duration = -28,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 803,
			easing = LUI.EASING.outQuadratic
		}
	} )
	self._sequences.ShowInfoMessage = function ()
		menu:AnimateSequence( "ShowInfoMessage" )
		menu:AnimateSequence( "ShowInfoMessage" )
	end
	
	self._sequenceLengths.ShowInfoMessage = 100
	local f1_local26 = nil
	InfoMessage:RegisterAnimationSequence( "HideInfoMessage", {
		{
			value = 0,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.outQuadratic
		},
		{
			duration = -28,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 669,
			easing = LUI.EASING.outQuadratic
		},
		{
			duration = -28,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 701,
			easing = LUI.EASING.outQuadratic
		}
	} )
	self._sequences.HideInfoMessage = function ()
		menu:AnimateSequence( "HideInfoMessage" )
	end
	
	self._sequenceLengths.HideInfoMessage = 100
	self._sequences.ShowProPerkWarning = function ()
		
	end
	
	self._sequenceLengths.ShowProPerkWarning = 0
	local f1_local27 = nil
	FieldUpgradeDescription:RegisterAnimationSequence( "JP", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 540
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 618
		}
	} )
	FieldUpgradeName:RegisterAnimationSequence( "JP", {
		{
			value = -2.3534389802718172E-185,
			duration = 0,
			property = TWEEN_PROPERTY.Scale
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 1025
		}
	} )
	self._sequences.JP = function ()
		menu:AnimateSequence( "JP" )
		menu:AnimateSequence( "JP" )
	end
	
	self._sequenceLengths.JP = 0
	local f1_local28 = nil
	Grid:RegisterAnimationSequence( "SafeAreaAdjustment", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -246
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * -126
		}
	} )
	self._sequences.SafeAreaAdjustment = function ()
		menu:AnimateSequence( "SafeAreaAdjustment" )
	end
	
	self._sequenceLengths.SafeAreaAdjustment = 0
	local f1_local29 = nil
	InfoMessage:RegisterAnimationSequence( "ZHS", {
		{
			value = 0,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.outCubic
		},
		{
			duration = -28,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 660
		},
		{
			duration = -28,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 692
		}
	} )
	UnlockCriteria:RegisterAnimationSequence( "ZHS", {
		{
			duration = -28,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 687,
			easing = LUI.EASING.outCubic
		},
		{
			duration = -28,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 719,
			easing = LUI.EASING.outCubic
		}
	} )
	EquippedWidget:RegisterAnimationSequence( "ZHS", {
		{
			duration = -28,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 687,
			easing = LUI.EASING.outCubic
		},
		{
			duration = -28,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 719,
			easing = LUI.EASING.outCubic
		}
	} )
	self._sequences.ZHS = function ()
		menu:AnimateSequence( "ZHS" )
		menu:AnimateSequence( "ZHS" )
		menu:AnimateSequence( "ZHS" )
	end
	
	self._sequenceLengths.ZHS = 100
	local f1_local30 = nil
	UnlockCriteria:RegisterAnimationSequence( "ShowWorkInProgress", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Visibility,
			value = LUI.Visibility.Visible
		},
		{
			value = 1,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.outQuadratic
		}
	} )
	self._sequences.ShowWorkInProgress = function ()
		menu:AnimateSequence( "ShowWorkInProgress" )
	end
	
	self._sequenceLengths.ShowWorkInProgress = 100
	local f1_local31 = nil
	UnlockCriteria:RegisterAnimationSequence( "HideWorkInProgress", {
		{
			value = 0,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha,
			easing = LUI.EASING.outQuadratic
		},
		{
			duration = -28,
			property = TWEEN_PROPERTY.Visibility,
			value = LUI.Visibility.Hidden
		}
	} )
	self._sequences.HideWorkInProgress = function ()
		menu:AnimateSequence( "HideWorkInProgress" )
	end
	
	self._sequenceLengths.HideWorkInProgress = 100
	self.HelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		button_ref = "button_secondary",
		helper_text = Engine[0xED84C33EC5F01EA]( "LUA_MENU/BACK" )
	} )
	if not self.bindButton then
		local f1_local32 = LUI.UIBindButton.new()
		f1_local32.id = "selfBindButton"
		self:addElement( f1_local32 )
		self.bindButton = f1_local32
	end
	f0_local0( self, f1_local1, controller )
	if CONDITIONS.IsSplitscreen() then
		ACTIONS.AnimateSequence( self, "Splitscreen", controller )
	end
	return self
end

MenuBuilder.registerType( "FieldUpgrades", FieldUpgrades )
LockTable( _M )
