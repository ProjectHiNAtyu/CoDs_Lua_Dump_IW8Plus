-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
module( ..., package.seeall )
require( "ui.inGame.InteractiveObjectIcon" )
require( "ui.inGame.InteractiveObjectPopupButton" )
local f0_local0 = 500
local f0_local1 = 500
local f0_local2 = 10
local f0_local3 = 100
local f0_local4 = 200
local f0_local5 = 5
local f0_local6 = 40
local f0_local7 = FONTS.GetFont( FONTS.MainRegular.File )
local f0_local8 = 24 * _1080p * 0.5
local f0_local9 = 20 * _1080p
local f0_local10 = "hud_interaction_prompt_center_standard"
local f0_local11 = function ( f28_arg0, f28_arg1, f28_arg2 )
	f28_arg0._currentState = "VisibleIcon"
	local f28_local0 = f28_arg0.ProgressButton
	local f28_local1 = f28_arg0.MessageText
	f28_local1:setText( f28_arg1 )
	local f28_local2 = LAYOUT.GetTextWidth( f28_arg0.MessageText )
	local f28_local3 = f0_local0 + f0_local0
	local f28_local4 = (f28_local2 + f28_local3) * 0.5
	local f28_local5 = -f28_local4 + f28_local3
	f28_local1:SetLeft( f28_local5 )
	f28_local1:SetRight( f28_local4 )
	local f28_local6 = -f28_local4
	local f28_local7 = -f28_local4 + f0_local0
	f28_arg0.InteractiveObjectIcon:SetAlpha( 1 )
	f28_arg0.MantleHint:SetAlpha( 0 )
	f28_local0:SetAlpha( 1 )
	if IsLanguageArabic() then
		f28_local1:SetLeft( -f28_local5 )
		f28_local1:SetRight( -f28_local4 )
		f28_local0:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, f28_local4 - f0_local0, f28_local4, -f0_local0, f0_local0 )
		f28_arg0.AmmoName:SetLeft( -f28_local5 )
		f28_arg0.AmmoName:SetRight( -f28_local5 - 10 * _1080p )
	else
		f28_local0:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, f28_local6, f28_local7, -f0_local0, f0_local0 )
		f28_arg0.AmmoName:SetLeft( f28_local5 )
		f28_arg0.AmmoName:SetRight( f28_local5 + 200 * _1080p )
	end
	f28_arg0.SizePromptPositionToContent( f28_local0, f28_arg2 )
	f28_local1:SetAlpha( 1 )
	f28_local1:SetAlignment( LUI.Alignment.Center )
	if WEAPON.IsCurrentBulletWeapon( f28_arg2, true ) then
		f28_arg0.AmmoName:SetAlpha( 1 )
	else
		f28_arg0.AmmoName:SetAlpha( 0 )
	end
	ACTIONS.AnimateSequence( f28_arg0.ProgressButton, "Visible" )
end

local f0_local12 = function ( f27_arg0, f27_arg1, f27_arg2, f27_arg3, f27_arg4, f27_arg5, f27_arg6, f27_arg7, f27_arg8, f27_arg9, f27_arg10, f27_arg11, f27_arg12 )
	if f27_arg0._currentState then
		return 
	end
	local f27_local0 = not Engine[0x6938F45868B1BBC]( f27_arg1 )
	local f27_local1 = DataModel[0x614D394F6F9A18D]( f27_arg2 )
	local f27_local2 = DataModel[0x614D394F6F9A18D]( f27_arg5 )
	local f27_local3 = DataModel[0x614D394F6F9A18D]( f27_arg10 )
	local f27_local4 = DataModel[0x614D394F6F9A18D]( f27_arg11 )
	local f27_local5 = DataModel[0x614D394F6F9A18D]( f27_arg4 )
	local f27_local6 = DataModel[0x614D394F6F9A18D]( f27_arg8 )
	local f27_local7 = DataModel[0x614D394F6F9A18D]( f27_arg9 )
	local f27_local8 = DataModel[0x614D394F6F9A18D]( f27_arg12 )
	if CONDITIONS.IsSingleplayer() and not f27_local2 then
		f27_local2 = Game[0x28624DEF6F708C8]( f27_arg1, "ui_force_mantle_hint" )
	end
	if not f27_local5 then
		f27_arg0.MessageText:setText( "" )
	end
	if Game[0x28624DEF6F708C8]( f27_arg1, "ui_graverobber" ) and f27_local7 then
		f27_local5 = Engine[0xED84C33EC5F01EA]( "LUA_MENU/SCRAP_GUN" )
	end
	local f27_local9 = Engine[0x6938F45868B1BBC]( f27_arg1 )
	local f27_local10
	if not CONDITIONS.IsMultiplayer() then
		if not f27_local3 then
			f27_local10 = f27_local3
		else
			f27_local10 = f27_local4
		end
	else
		f27_local10 = false
	end
	if f27_local2 or f27_local10 or f27_local6 == 1 or f27_local6 == 2 or f27_local1 and f27_local5 ~= "" then
		local f27_local11 = DataModel[0x614D394F6F9A18D]( f27_arg6 )
		local f27_local12 = CONDITIONS.IsMultiplayer()
		if f27_local12 then
			f27_local12 = f27_local11 == f0_local0
		end
		if f27_local11 ~= nil and not f27_local12 then
			f27_arg0.InteractiveObjectIcon:UpdateImage( f27_arg1, f27_local11 )
		end
		local f27_local13 = DataModel[0x614D394F6F9A18D]( f27_arg3 ) and not f27_local12
		local f27_local14 = false
		if CONDITIONS.IsMagmaGameMode( f27_arg0 ) then
			f27_local14 = BRLOOT.ShouldShowLootCard( f27_arg1 )
		end
		if f27_local2 and f27_local13 == false then
			f27_arg0._currentState = "VisibleMantle"
			f27_arg0.MantleHint:setText( Engine[0xED84C33EC5F01EA]( "PLATFORM/MANTLE" ) )
			f27_arg0.MantleHint:SetAlpha( 1 )
			f27_arg0.MessageText:SetAlpha( 0 )
			f27_arg0.InteractiveObjectIcon:SetAlpha( 0 )
			f27_arg0.ProgressButton:SetAlpha( 0 )
			f27_arg0.AmmoName:SetAlpha( 0 )
		elseif f27_local3 and f27_local13 == false then
			f27_arg0._currentState = "VisibleDeployParachute"
			local f27_local15 = Engine[0xED84C33EC5F01EA]( "MP/DEPLOY_PARACHUTE_SHARED_HINT" )
			if not f27_local9 and not Engine[0xBFC4C69C7DCDEB0]( f27_arg1 ) then
				f27_local15 = Engine[0xED84C33EC5F01EA]( "MP/DEPLOY_PARACHUTE_NOT_SHARED_HINT" )
			end
			f27_arg0.MantleHint:setText( f27_local15 )
			f27_arg0.MantleHint:SetAlpha( 1 )
			f27_arg0.MessageText:SetAlpha( 0 )
			f27_arg0.InteractiveObjectIcon:SetAlpha( 0 )
			f27_arg0.ProgressButton:SetAlpha( 0 )
			f27_arg0.AmmoName:SetAlpha( 0 )
			if CONDITIONS.IsBRGameType() then
				DataSources.inGame.player.BRData.isMantleHintTheDeployParachuteHint:SetValue( f27_arg1, true )
			end
		elseif f27_local4 and f27_local13 == false then
			if CONDITIONS.IsBRGameType() then
				DataSources.inGame.player.BRData.isMantleHintTheDeployParachuteHint:SetValue( f27_arg1, false )
			end
			ACTIONS.AnimateSequence( f27_arg0, "HideHintBG" )
			f27_arg0._currentState = "VisibleCutParachute"
			local f27_local15 = Engine[0xED84C33EC5F01EA]( "MP/PARACHUTING_CONTROL_SHARED_HINTS" )
			local f27_local16 = Engine[0xA619075A9D9984A]( f27_arg1 )
			local f27_local17 = Engine[0xD1DA5739BC8DCA9]( f27_arg1 )
			if not f27_local9 then
				if not f27_local16 and not f27_local17 then
					f27_local15 = Engine[0xED84C33EC5F01EA]( "MP/PARACHUTING_CONTROL_NOT_SHARED_HINTS" )
				elseif not f27_local16 then
					f27_local15 = Engine[0xED84C33EC5F01EA]( "MP/PARACHUTING_CONTROL_FREELOOK_SHARED_HINTS" )
				elseif not f27_local17 then
					f27_local15 = Engine[0xED84C33EC5F01EA]( "MP/PARACHUTING_CONTROL_CUT_SHARED_HINTS" )
				end
			end
			f27_arg0.MantleHint:setText( f27_local15 )
			f27_arg0.MantleHint:SetAlpha( 1 )
			f27_arg0.MessageText:SetAlpha( 0 )
			f27_arg0.InteractiveObjectIcon:SetAlpha( 0 )
			f27_arg0.ProgressButton:SetAlpha( 0 )
			f27_arg0.AmmoName:SetAlpha( 0 )
		elseif (f27_local6 == 1 or f27_local6 == 2) and f27_local13 == false then
			f27_arg0._currentState = "VisibleTurret"
			f27_arg0.MantleHint:setText( Engine[0xED84C33EC5F01EA]( "KILLSTREAKS_HINTS/SENTRY_GUN_PLACE" ) )
			f27_arg0.MantleHint:SetAlpha( 1 )
			f27_arg0.MessageText:SetAlpha( 0 )
			f27_arg0.InteractiveObjectIcon:SetAlpha( 0 )
			f27_arg0.ProgressButton:SetAlpha( 0 )
			f27_arg0.AmmoName:SetAlpha( 0 )
		elseif f27_local13 and not f27_local14 then
			f0_local0( f27_arg0, f27_local5, f27_arg1 )
		elseif not f27_local14 then
			f27_arg0._currentState = "VisibleNoIcon"
			f27_arg0.MessageText:setText( f27_local5 )
			local f27_local15 = LAYOUT.GetTextWidth( f27_arg0.MessageText )
			local f27_local16 = f0_local0 + f0_local0
			local f27_local17 = f27_local15 + f27_local16
			local f27_local18 = f27_local17 * 0.5
			f27_arg0.InteractiveObjectIcon:SetAlpha( 0 )
			f27_arg0.MantleHint:SetAlpha( 0 )
			if IsLanguageArabic() then
				local f27_local19 = 25 * _1080p
				local f27_local20 = -f27_local17 + f27_local16
				local f27_local21 = f27_local16
				f27_arg0.MessageText:SetLeft( f27_local20 + f27_local19 )
				f27_arg0.MessageText:SetRight( f27_local21 + f27_local19 )
				f27_arg0.ProgressButton:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, f27_local18 - f0_local0, f27_local18, -f0_local0, f0_local0 )
			else
				local f27_local19 = -f27_local18
				local f27_local20 = -f27_local18 + f0_local0
				f27_arg0.MessageText:SetLeft( -f27_local18 + f27_local16 )
				f27_arg0.MessageText:SetRight( f27_local18 )
				f27_arg0.ProgressButton:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, f27_local19, f27_local20, -f0_local0, f0_local0 )
			end
			f27_arg0.SizePromptPositionToContent( f27_arg0.ProgressButton, f27_arg1 )
			if IsLanguageChinese() then
				ACTIONS.AnimateSequence( f27_arg0, "ZHS" )
			elseif IsLanguageJapanese() then
				ACTIONS.AnimateSequence( f27_arg0, "JP" )
			elseif IsLanguageArabic() then
				ACTIONS.AnimateSequence( f27_arg0, "AR" )
			end
			f27_arg0.AmmoName:SetAlpha( 0 )
			f27_arg0.ProgressButton:SetAlpha( 1 )
			f27_arg0.MessageText:SetAlpha( 1 )
			f27_arg0.MessageText:SetAlignment( LUI.Alignment.Center )
			ACTIONS.AnimateSequence( f27_arg0.ProgressButton, "Visible" )
		end
		local f27_local15 = f27_arg0.ProgressButton.InteractiveObjectButtonIcon:GetDataSource()
		f27_local15 = f27_local15.icon:GetValue( f27_arg1 )
		local f27_local16 = nil
		if f27_local15 ~= nil then
			f27_local16 = Engine[0x5B4AB50CF5D1DDD]( RegisterMaterial( f27_local15 ) )
		end
		if f27_local15 == nil or f27_local16 == nil or f27_local16 <= 1 then
			if f27_local0 then
				ACTIONS.AnimateSequence( f27_arg0.ProgressButton, "KeyboardOn" )
			else
				ACTIONS.AnimateSequence( f27_arg0.ProgressButton, "KeyboardOff" )
			end
		end
		f27_arg0.HandleHoldAnimation()
		f27_arg0._currentState = nil
		f27_arg0:SetAlpha( 1 )
	else
		if f27_arg0._widgetInitialized then
			f27_arg0:SetAlpha( 0, 100 )
		else
			f27_arg0:SetAlpha( 0 )
		end
		f27_arg0.progressStarted = false
	end
	if f27_local8 then
		f27_arg0.ProgressButton:SetAlpha( 0 )
	end
	f27_arg0._widgetInitialized = true
end

local f0_local13 = function ( f26_arg0, f26_arg1 )
	local f26_local0 = f26_arg0:GetCurrentAnchorsAndPositions()
	local f26_local1 = nil
	if Engine[0x6938F45868B1BBC]( f26_arg1 ) then
		f26_local1 = f26_arg0.InteractiveObjectButtonIcon:GetCurrentAnchorsAndPositions()
	else
		f26_local1 = f26_arg0.KBMProgress:GetCurrentAnchorsAndPositions()
	end
	f26_arg0:SetAnchorsAndPosition( f26_local0.leftAnchor, f26_local0.rightAnchor, f26_local0.topAnchor, f26_local0.bottomAnchor, f26_local0.right - f26_local1.right - f26_local1.left, f26_local0.right, f26_local0.top, f26_local0.bottom )
end

local f0_local14 = function ( f25_arg0, f25_arg1, f25_arg2, f25_arg3 )
	if f25_arg2 and 0 < f25_arg3 then
		f25_arg0._requiresHolding = true
		ACTIONS.AnimateSequence( f25_arg0.ProgressButton.InteractiveObjectButtonIcon, "Hold" )
		f25_arg0.ProgressButton.KBMProgress:SetHoldAnimation()
	elseif f25_arg1 then
		if f25_arg0._requiresHolding ~= f25_arg1 then
			f25_arg0._requiresHolding = true
			ACTIONS.AnimateSequence( f25_arg0.ProgressButton.InteractiveObjectButtonIcon, "Hold" )
			f25_arg0.ProgressButton.KBMProgress:SetHoldAnimation()
		end
	else
		f25_arg0._requiresHolding = false
		ACTIONS.AnimateSequence( f25_arg0.ProgressButton.InteractiveObjectButtonIcon, "DontHold" )
		f25_arg0.ProgressButton.KBMProgress:SetPressAnimation()
	end
end

local f0_local15 = function ( f10_arg0, f10_arg1, f10_arg2 )
	assert( f10_arg0.MessageText and f10_arg0.MantleHint, "WARNING: Message specific elements are missing..." )
	assert( f10_arg0.InteractiveObjectIcon.GeneralIcon )
	assert( f10_arg0.ProgressButton )
	assert( f10_arg0.ProgressButton.ProgressBar )
	assert( f10_arg0.ProgressButton.KBMProgress )
	f10_arg0._previouslyProgressing = 0
	f10_arg0.SizePromptPositionToContent = f0_local0
	f10_arg0.HandleHoldAnimation = f0_local0
	local f10_local0 = DataSources.inGame.HUD.hints.interactiveObject.popup.shouldShow:GetModel( f10_arg1 )
	local f10_local1 = DataSources.inGame.HUD.hints.interactiveObject.popup.shouldShowIcon:GetModel( f10_arg1 )
	local f10_local2 = DataSources.inGame.HUD.hints.interactiveObject.popup.string:GetModel( f10_arg1 )
	local f10_local3 = DataSources.inGame.HUD.hints.canMantle:GetModel( f10_arg1 )
	local f10_local4 = DataSources.inGame.HUD.hints.canDeployParachute:GetModel( f10_arg1 )
	local f10_local5 = DataSources.inGame.HUD.hints.canCutParachute:GetModel( f10_arg1 )
	local f10_local6 = DataSources.inGame.HUD.hints.interactiveObject.popup.material:GetModel( f10_arg1 )
	local f10_local7 = DataSources.inGame.HUD.hints.interactiveObject.button.requiresHolding:GetModel( f10_arg1 )
	local f10_local8 = DataSources.inGame.HUD.hints.interactiveObject.button.isBulletWeapon:GetModel( f10_arg1 )
	local f10_local9 = DataSources.inGame.HUD.hints.placeTurret:GetModel( f10_arg1 )
	local f10_local10 = DataSources.inGame.player.useReloadProfile:GetModel( f10_arg1 )
	local f10_local11 = DataSources.inGame.HUD.hints.interactiveObject.popup.hideButton:GetModel( f10_arg1 )
	local f10_local12 = DataSources.inGame.player.holdKBMEnabled:GetModel( f10_arg1 )
	local f10_local13 = DataSources.inGame.HUD.hints.interactiveObject.progress.duration:GetModel( f10_arg1 )
	local f10_local14 = DataSources.inGame.player.freeLookParachuteInputSharedKBMEnabled:GetModel( f10_arg1 )
	local f10_local15 = DataSources.inGame.player.cutParachuteInputSharedKBMEnabled:GetModel( f10_arg1 )
	local f10_local16 = DataSources.inGame.player.openParachuteInputSharedKBMEnabled:GetModel( f10_arg1 )
	f10_arg0.ProgressButton.KBMProgress:SetProgress( 0 )
	f10_arg0.HandleHoldAnimation = function ()
		f10_arg0( f10_arg0, DataModel[0x614D394F6F9A18D]( f10_arg0 ), DataModel[0x614D394F6F9A18D]( f10_arg0 ), DataModel[0x614D394F6F9A18D]( f10_arg0 ) or -1 )
	end
	
	f10_arg0:SubscribeToModel( f10_local12, f10_arg0.HandleHoldAnimation )
	f10_arg0:SubscribeToModel( f10_local13, f10_arg0.HandleHoldAnimation )
	f10_arg0:registerEventHandler( "empty_menu_stack", function ( element, event )
		element:HandleHoldAnimation()
	end )
	f10_arg0.Update = function ()
		f10_arg0( f10_arg0, f10_arg0, f10_arg0, f10_arg0, f10_arg0, f10_arg0, f10_arg0, f10_arg0, f10_arg0, f10_arg0, f10_arg0, f10_arg0, f10_arg0 )
	end
	
	f10_arg0:SubscribeToModel( f10_local0, f10_arg0.Update, true )
	f10_arg0:SubscribeToModel( f10_local2, f10_arg0.Update, true )
	f10_arg0:SubscribeToModel( f10_local3, f10_arg0.Update )
	f10_arg0:SubscribeToModel( f10_local4, f10_arg0.Update )
	f10_arg0:SubscribeToModel( f10_local5, f10_arg0.Update )
	f10_arg0:SubscribeToModel( f10_local9, f10_arg0.Update )
	f10_arg0:SubscribeToModel( f10_local11, f10_arg0.Update )
	f10_arg0:SubscribeToModel( f10_local14, f10_arg0.Update )
	f10_arg0:SubscribeToModel( f10_local15, f10_arg0.Update )
	f10_arg0:SubscribeToModel( f10_local16, f10_arg0.Update )
	if CONDITIONS.IsSingleplayer() then
		f10_arg0:SubscribeToModel( DataSources.inGame.SP.forceMantleHint:GetModel( f10_arg1 ), f10_arg0.Update )
	end
	if CONDITIONS.IsBRGameType( f10_arg0 ) then
		DataSources.inGame.player.BRData.isMantleHintTheDeployParachuteHint:SetValue( f10_arg1, false )
		local f10_local17 = false
		local f10_local18 = false
		local f10_local19 = DataSources.inGame.player.BRData.skydiveList:GetDataSourceAtIndex( 0, f10_arg1 )
		local f10_local20 = {}
		local f10_local21 = 8
		local f10_local22 = 0
		for f10_local23 = 0, f10_local21, 1 do
			f10_local20[f10_local23] = 0
		end
		local f10_local23 = 8000
		local f10_local24 = 6000
		local f10_local25 = 3000
		local f10_local26 = function ( f20_arg0, f20_arg1 )
			local f20_local0 = {
				AlphaMin = 0,
				AlphaMax = 4.667261642226141E-62,
				UpdateDelta = 10
			}
			local f20_local1 = "update_blink_tick_" .. f20_arg1.id
			f20_arg1.updateBlinkTimer = LUI.UITimer.new( {
				interval = f20_local0.UpdateDelta,
				event = f20_local1
			} )
			f20_arg1.blinkTimeElapsed = 0
			f20_arg0:registerEventHandler( f20_local1, function ( element, event )
				f20_arg0.blinkTimeElapsed = f20_arg0.blinkTimeElapsed + f20_arg0.UpdateDelta / 1000 * f20_arg0
				if f20_arg0 == false and f20_arg0.updateBlinkTimer then
					f20_arg0:SetAlpha( 0 )
					element:RemoveElement( f20_arg0.updateBlinkTimer )
					return true
				elseif f20_arg0 and f20_arg0.updateBlinkTimer then
					f20_arg0:SetAlpha( f20_arg0.AlphaMax )
					return true
				elseif not f20_arg0.updateBlinkTimer then
					return true
				else
					f20_arg0:SetAlpha( (math.sin( f20_arg0.blinkTimeElapsed ) * 0.5 + 0.5) * (f20_arg0.AlphaMax - f20_arg0.AlphaMin) + f20_arg0.AlphaMin )
					return true
				end
			end )
			f20_arg0:addElement( f20_arg1.updateBlinkTimer )
		end
		
		local f10_local27 = function ( f19_arg0, f19_arg1 )
			local f19_local0 = Dvar[0x22EAAB59AA27E9B]( "#x3e8ea6ad7693b06b5" ) or f10_arg0
			local f19_local1 = Dvar[0x22EAAB59AA27E9B]( "#x3bc4bdce399aa8f1b" ) or f10_arg0
			local f19_local2 = Dvar[0x22EAAB59AA27E9B]( "#x3560fc8fec3dc232e" ) or f10_arg0
			if f19_arg1 <= f19_arg0 + f19_local0 and f19_arg0 + f19_local1 < f19_arg1 then
				f10_arg0 = 10
			elseif f19_arg1 <= f19_arg0 + f19_local1 and f19_arg0 + f19_local2 < f19_arg1 then
				f10_arg0 = 30
			else
				f10_arg0 = 60
			end
		end
		
		local f10_local28 = function ()
			local f18_local0 = DataSources.inGame.player.BRData.AltimeterState:GetValue( f10_arg0 )
			if f18_local0 and f18_local0 ~= 0 then
				local f18_local1 = DataSources.inGame.player.BRData.autoDeployHeight:GetValue( f10_arg0 ) or 0
				local f18_local2 = Game[0x28624DEF6F708C8]( f10_arg0, "ui_br_altimeter_sea_height" )
				local f18_local3 = Game[0x28624DEF6F708C8]( f10_arg0, "ui_br_altimeter_c130_height" ) - f18_local2
				f10_arg0[f10_arg0] = f18_local1
				f10_arg0 = (f10_arg0 + 1) % f10_arg0
				local f18_local4 = 0
				for f18_local5 = 0, f10_arg0, 1 do
					f18_local4 = f18_local4 + f10_arg0[f18_local5]
				end
				local f18_local5 = math.floor( f18_local4 / f10_arg0 + 0.5 ) - f18_local2
				local f18_local7 = (f10_arg0.altitude:GetValue( f10_arg0 ) or 0) * f18_local3
				local f18_local8 = DataSources.inGame.player.BRData.isMantleHintTheDeployParachuteHint:GetValue( f10_arg0 )
				local f18_local9 = Dvar[0x22EAAB59AA27E9B]( "#x3e8ea6ad7693b06b5" ) or f10_arg0
				local f18_local10 = Dvar[0x22EAAB59AA27E9B]( "#x3bc4bdce399aa8f1b" ) or f10_arg0
				local f18_local11 = Dvar[0x22EAAB59AA27E9B]( "#x3560fc8fec3dc232e" ) or f10_arg0
				if f18_local7 ~= nil and f18_local8 ~= nil and f18_local7 <= f18_local5 + f18_local9 and f18_local5 < f18_local7 and f18_local8 == true then
					f10_arg0( f18_local5, f18_local7 )
					if f10_arg0 == false then
						f10_arg0 = true
						f10_arg0:addElement( f10_arg0.HintBG.updateBlinkTimer )
					end
				elseif f18_local7 ~= nil and f18_local7 <= f18_local5 and f18_local8 ~= nil and f18_local8 == true then
					if f10_arg0 == false then
						f10_arg0 = true
						f10_arg0:addElement( f10_arg0.HintBG.updateBlinkTimer )
					end
					f10_arg0 = true
				end
				f10_arg0 = false
				f10_arg0 = false
			else
				DataSources.inGame.player.BRData.isMantleHintTheDeployParachuteHint:SetValue( f10_arg0, false )
				f10_arg0 = false
				f10_arg0 = false
			end
		end
		
		f10_local26( f10_arg0, f10_arg0.HintBG )
		if DataSources.inGame.player.BRData.autoDeployHeight ~= nil then
			f10_arg0:SubscribeToModel( DataSources.inGame.player.BRData.autoDeployHeight:GetModel( f10_arg1 ), f10_local28 )
		end
		f10_arg0:SubscribeToModel( DataSources.inGame.player.BRData.AltimeterState:GetModel( f10_arg1 ), f10_local28 )
		f10_arg0:SubscribeToModel( DataSources.inGame.player.BRData.isMantleHintTheDeployParachuteHint:GetModel( f10_arg1 ), f10_local28 )
		f10_arg0:SubscribeToModel( f10_local19.altitude:GetModel( f10_arg1 ), f10_local28 )
	end
	local f10_local17 = DataSources.inGame.HUD.hints.interactiveObject.button.targetEntity:GetModel( f10_arg1 )
	local f10_local18 = DataSources.inGame.HUD.hints.interactiveObject.progress:GetModel( f10_arg1 )
	local f10_local19 = DataSources.inGame.HUD.hints.interactiveObject.progress.hideBar:GetModel( f10_arg1 )
	local f10_local20 = DataSources.inGame.HUD.hints.interactiveObject.progress.entity:GetModel( f10_arg1 )
	local f10_local21 = LUI.DataSourceInControllerModel.new( "cg.HUD.hints.interactiveObject.interactionComplete" )
	local f10_local22 = f10_local21:GetModel( f10_arg1 )
	DataModel[0x83C9B5DE1D9371]( f10_local22, false )
	local f10_local23 = function ()
		local f16_local0 = DataSources.inGame.player.useReloadProfile:GetValue( f10_arg0 ) or -1
		local f16_local1 = DataModel[0x614D394F6F9A18D]( f10_arg0 ) or -1
		if not Engine[0x6938F45868B1BBC]( f10_arg0 ) or f16_local0 == 0 or 250 < f16_local1 then
			if DataModel[0x614D394F6F9A18D]( f10_arg0 ) and HUDUtils.IsPromptAttachedToTargetEntity( f10_arg0, f10_arg0 ) then
				DataModel[0x83C9B5DE1D9371]( f10_arg0, false )
				if f10_arg0._currentState then
					
				else
					
				end
				if DataModel[0x614D394F6F9A18D]( f10_arg0 ) or f16_local1 == 0 then
					f10_arg0:Update()
				else
					f10_arg0._currentState = "Completed"
					if Engine[0x6938F45868B1BBC]( f10_arg0 ) then
						ACTIONS.AnimateSequence( f10_arg0.ProgressButton, "Completed" )
						local f16_local2 = f10_arg0:Wait( f10_arg0 )
						f16_local2.onComplete = function ()
							f16_local0._currentState = nil
							f16_local0:Update()
						end
						
					else
						f10_arg0._currentState = nil
						f10_arg0:Update()
					end
				end
			else
				local f16_local3 = DataModel[0x614D394F6F9A18D]( f10_arg0 )
				if DataModel[0x614D394F6F9A18D]( f10_arg0 ) == GameScriptConstants.EntityNumNone then
					f10_arg0.ProgressButton.KBMProgress:SetProgress( 0 )
				end
			end
		end
	end
	
	f10_arg0:SubscribeToModel( f10_local22, f10_local23 )
	f10_arg0:SubscribeToModel( f10_local20, f10_local23 )
	f10_arg0:SubscribeToModel( f10_local18, f10_local23 )
	f10_arg0:SubscribeToModel( f10_local10, f10_local23 )
	local f10_local24 = f10_arg0.ProgressButton.ProgressBar
	local f10_local25 = f10_arg0.ProgressButton.KBMProgress
	local f10_local26 = function ()
		if f10_arg0._currentState then
			
		else
			
		end
		local f14_local0 = DataModel[0x614D394F6F9A18D]( f10_arg0 )
		local f14_local1 = DataModel[0x614D394F6F9A18D]( f10_arg0 ) or -1
		local f14_local2 = DataModel[0x614D394F6F9A18D]( f10_arg0 )
		local f14_local3 = DataModel[0x614D394F6F9A18D]( f10_arg0 )
		if f14_local0 or f14_local1 == 0 then
			f10_arg0:Update()
		else
			if (f14_local2 == 1 or f14_local2 == 2) and f14_local3 == false then
				f10_arg0.MantleHint:setText( Engine[0xED84C33EC5F01EA]( "KILLSTREAKS_HINTS/SENTRY_GUN_PLACE" ) )
			end
			if DataModel[0x614D394F6F9A18D]( f10_arg0 ) ~= GameScriptConstants.EntityNumNone and (not Engine[0x6938F45868B1BBC]( f10_arg0 ) or (DataSources.inGame.player.useReloadProfile:GetValue( f10_arg0 ) or -1) == 0 or 250 < f14_local1) then
				local f14_local4 = DataModel[0x614D394F6F9A18D]( f10_arg0 )
				if f14_local4 == 1 then
					f14_local4 = 0
					f10_arg0.progressStarted = false
				elseif 0 < f14_local4 then
					f10_arg0.progressStarted = true
					f10_arg0._requiresHolding = false
				end
				if Engine[0x6938F45868B1BBC]( f10_arg0 ) then
					f10_arg0:SetProgress( f14_local4 )
					f10_arg0:SetAlpha( 1 )
				else
					f10_arg0:SetProgress( f14_local4 )
				end
			else
				f10_arg0:SetProgress( 0 )
				f10_arg0:SetProgress( 0 )
				f10_arg0:SetAlpha( 0 )
				if DataModel[0x614D394F6F9A18D]( f10_arg0 ) then
					f10_arg0.progressStarted = false
				end
				if f10_arg0.progressStarted then
					f10_arg0.progressStarted = false
					f10_arg0._currentState = "NotCompleted"
					ACTIONS.AnimateSequence( f10_arg0.ProgressButton, "NotCompleted" )
					local f14_local5 = f10_arg0:Wait( f10_arg0 )
					f14_local5.onComplete = function ()
						f14_local0._currentState = nil
						f14_local0:Update()
					end
					
				end
			end
		end
	end
	
	f10_arg0:SubscribeToModel( f10_local17, f10_local26 )
	f10_arg0:SubscribeToModel( f10_local20, f10_local26 )
	f10_arg0:SubscribeToModel( f10_local18, f10_local26 )
	f10_arg0:SubscribeToModel( f10_local10, f10_local26 )
	f10_arg0:SubscribeToModel( DataSources.inGame.HUD.hints.interactiveObject.weapon.ammoName:GetModel( f10_arg1 ), function ()
		local f13_local0 = f10_arg0:GetValue( f10_arg0 )
		if f13_local0 and 0 < #f13_local0 and not LUI.Contains( f13_local0, "frag" ) then
			f10_arg0.AmmoName:setText( Engine[0xED84C33EC5F01EA]( f13_local0 ) )
		end
	end )
	f10_arg0.ProgressButton.KBMProgress.KeyString.onDirectiveInvalidated = function ( f12_arg0 )
		f10_arg0.ProgressButton.KBMProgress:DirectiveInvalidated( f12_arg0 )
		f10_arg0.HandleHoldAnimation()
		f10_arg0.SizePromptPositionToContent( f10_arg0.ProgressButton, f10_arg0 )
	end
	
	f10_arg0:registerOmnvarHandler( "ui_securing_progress", function ( f11_arg0, f11_arg1 )
		local f11_local0 = f11_arg1.value
		if f11_arg0._previouslyProgressing < f11_local0 then
			if f11_arg0._showingProgress ~= true then
				f11_arg0.ProgressButton:SetAlpha( 1 )
				f11_arg0.MessageText:SetAlpha( 1 )
				f11_arg0.MessageText:SetAlignment( LUI.Alignment.Center )
				ACTIONS.AnimateSequence( f11_arg0.ProgressButton, "Visible" )
			end
			f11_arg0._showingProgress = true
		else
			f11_arg0._showingProgress = false
		end
		f11_arg0._previouslyProgressing = f11_local0
	end )
	if IsLanguageChinese() then
		ACTIONS.AnimateSequence( f10_arg0, "ZHS" )
	elseif IsLanguageJapanese() then
		ACTIONS.AnimateSequence( f10_arg0, "JP" )
	elseif IsLanguageArabic() then
		ACTIONS.AnimateSequence( f10_arg0, "AR" )
	end
end

function InteractiveObjectPopup( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 600 * _1080p, 0, 32 * _1080p )
	self.id = "InteractiveObjectPopup"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	self._sequenceLengths = self._sequenceLengths or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local HintBG = nil
	
	HintBG = LUI.UIImage.new()
	HintBG.id = "HintBG"
	HintBG:SetRGBFromTable( SWATCHES.HUD.warning, 0 )
	HintBG:SetAlpha( 0, 0 )
	HintBG:SetPixelGridEnabled( true )
	HintBG:SetPixelGridContrast( 0.5, 0 )
	HintBG:SetPixelGridBlockWidth( 2, 0 )
	HintBG:SetPixelGridBlockHeight( 2, 0 )
	HintBG:SetPixelGridGutterWidth( 1, 0 )
	HintBG:SetPixelGridGutterHeight( 1, 0 )
	HintBG:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * 600, _1080p * -10, _1080p * 42 )
	self:addElement( HintBG )
	self.HintBG = HintBG
	
	local MessageText = nil
	
	MessageText = LUI.UIStyledText.new()
	MessageText.id = "MessageText"
	MessageText:SetRGBFromTable( SWATCHES.HUD.vHUDDefault, 0 )
	MessageText:setText( "", 0 )
	MessageText:setCaseStyle( LUI.CaseStyle.Uppercase )
	MessageText:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_MHeaderBold.font.File ) )
	MessageText:SetFontSize( FONT_STYLES.fontStyle_MHeaderBold.size )
	MessageText:SetMinFontSize( FONT_STYLES.fontStyle_MHeaderBold.minSize )
	MessageText:SetWordWrap( false )
	MessageText:SetLeading( -2 * _1080p, 0 )
	MessageText:SetAlignment( LUI.Alignment.Left )
	MessageText:SetVerticalAlignment( LUI.Alignment.Center )
	MessageText:SetOptOutRightToLeftAlignmentFlip( true )
	MessageText:SetOutlineMinDistance( -0.1, 0 )
	MessageText:SetOutlineMaxDistance( 0.03, 0 )
	MessageText:SetOutlineRGBFromTable( SWATCHES.HUD.vHUDMediumDarkOutline, 0 )
	MessageText:SetDecodeUseSystemTime( false )
	MessageText:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -242, _1080p * 258, _1080p * -16, _1080p * 16 )
	self:addElement( MessageText )
	self.MessageText = MessageText
	
	local MantleHint = nil
	
	MantleHint = LUI.UIStyledText.new()
	MantleHint.id = "MantleHint"
	MantleHint:SetRGBFromTable( SWATCHES.HUD.vHUDDefault, 0 )
	MantleHint:setText( Engine[0xED84C33EC5F01EA]( "PLATFORM/MANTLE" ), 0 )
	MantleHint:setCaseStyle( LUI.CaseStyle.Uppercase )
	MantleHint:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_SHeaderBold.font.File ) )
	MantleHint:SetFontSize( FONT_STYLES.fontStyle_SHeaderBold.size )
	MantleHint:SetMinFontSize( FONT_STYLES.fontStyle_SHeaderBold.minSize )
	MantleHint:SetWordWrap( false )
	MantleHint:SetLeading( -2 * _1080p, 0 )
	MantleHint:SetAlignment( LUI.Alignment.Center )
	MantleHint:SetVerticalAlignment( LUI.Alignment.Center )
	MantleHint:SetTintFontIcons( true )
	MantleHint:SetOutlineMinDistance( -0.1, 0 )
	MantleHint:SetOutlineMaxDistance( 0.03, 0 )
	MantleHint:SetOutlineRGBFromTable( SWATCHES.HUD.vHUDMediumDarkOutline, 0 )
	MantleHint:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -300, _1080p * 300, _1080p * -16, _1080p * 16 )
	self:addElement( MantleHint )
	self.MantleHint = MantleHint
	
	local InteractiveObjectIcon = nil
	
	InteractiveObjectIcon = MenuBuilder.BuildRegisteredType( "InteractiveObjectIcon", {
		controllerIndex = f1_local1
	} )
	InteractiveObjectIcon.id = "InteractiveObjectIcon"
	InteractiveObjectIcon:SetScale( -0.1, 0 )
	InteractiveObjectIcon:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -140, _1080p * 116, _1080p * 20, _1080p * 148 )
	self:addElement( InteractiveObjectIcon )
	self.InteractiveObjectIcon = InteractiveObjectIcon
	
	local ProgressButton = nil
	
	ProgressButton = MenuBuilder.BuildRegisteredType( "InteractiveObjectPopupButton", {
		controllerIndex = f1_local1
	} )
	ProgressButton.id = "ProgressButton"
	ProgressButton:SetAlpha( 0, 0 )
	ProgressButton:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -127, _1080p * -87, _1080p * -20, _1080p * 20 )
	self:addElement( ProgressButton )
	self.ProgressButton = ProgressButton
	
	local AmmoName = nil
	
	AmmoName = LUI.UIStyledText.new()
	AmmoName.id = "AmmoName"
	AmmoName:SetRGBFromTable( SWATCHES.HUD.overcharged, 0 )
	AmmoName:setText( "AmmoName", 0 )
	AmmoName:SetFont( FONTS.GetFont( FONT_STYLES.fontStyle_MSubHeaderBold.font.File ) )
	AmmoName:SetFontSize( FONT_STYLES.fontStyle_MSubHeaderBold.size )
	AmmoName:SetMinFontSize( FONT_STYLES.fontStyle_MSubHeaderBold.minSize )
	AmmoName:SetWordWrap( false )
	AmmoName:SetLeading( -2 * _1080p, 0 )
	AmmoName:SetAlignment( LUI.Alignment.Left )
	AmmoName:SetVerticalAlignment( LUI.Alignment.Center )
	AmmoName:SetOptOutRightToLeftAlignmentFlip( true )
	AmmoName:SetShadowRGBFromTable( SWATCHES.HUD.vHUDShadow, 0 )
	AmmoName:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -242, _1080p * 258, _1080p * 16, _1080p * 40 )
	self:addElement( AmmoName )
	self.AmmoName = AmmoName
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	self._sequenceLengths.DefaultSequence = 0
	local f1_local9 = nil
	HintBG:RegisterAnimationSequence( "ShowHintBG", {
		{
			value = -9.255965339091385E+61,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ShowHintBG = function ()
		menu:AnimateSequence( "ShowHintBG" )
	end
	
	self._sequenceLengths.ShowHintBG = 0
	local f1_local10 = nil
	HintBG:RegisterAnimationSequence( "HideHintBG", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.HideHintBG = function ()
		menu:AnimateSequence( "HideHintBG" )
	end
	
	self._sequenceLengths.HideHintBG = 0
	local f1_local11 = nil
	HintBG:RegisterAnimationSequence( "ShowHintWarning", {
		{
			value = -2.3534382785503553E-185,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 4.6672616413205735E-62,
			duration = 780,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = -2.3534382785503553E-185,
			duration = 620,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ShowHintWarning = function ()
		menu:AnimateLoop( "ShowHintWarning" )
	end
	
	self._sequenceLengths.ShowHintWarning = 1400
	local f1_local12 = nil
	HintBG:RegisterAnimationSequence( "ShowHintWarning1", {
		{
			value = -2.3534382785503553E-185,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 5.29462817E-315,
			duration = 400,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = -2.3534382785503553E-185,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ShowHintWarning1 = function ()
		menu:AnimateLoop( "ShowHintWarning1" )
	end
	
	self._sequenceLengths.ShowHintWarning1 = 600
	local f1_local13 = nil
	HintBG:RegisterAnimationSequence( "ShowHintWarning2", {
		{
			value = 5.297218497E-315,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 4.6672616413205735E-62,
			duration = 150,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 5.297218497E-315,
			duration = -18,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ShowHintWarning2 = function ()
		menu:AnimateLoop( "ShowHintWarning2" )
	end
	
	self._sequenceLengths.ShowHintWarning2 = 260
	local f1_local14 = nil
	HintBG:RegisterAnimationSequence( "ZHS", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -20
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 32
		}
	} )
	MessageText:RegisterAnimationSequence( "ZHS", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -26
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 6
		}
	} )
	MantleHint:RegisterAnimationSequence( "ZHS", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -26
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 6
		}
	} )
	InteractiveObjectIcon:RegisterAnimationSequence( "ZHS", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 10
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 138
		}
	} )
	ProgressButton:RegisterAnimationSequence( "ZHS", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -30
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 10
		}
	} )
	AmmoName:RegisterAnimationSequence( "ZHS", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 6
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 30
		}
	} )
	self._sequences.ZHS = function ()
		menu:AnimateSequence( "ZHS" )
		menu:AnimateSequence( "ZHS" )
		menu:AnimateSequence( "ZHS" )
		menu:AnimateSequence( "ZHS" )
		menu:AnimateSequence( "ZHS" )
		menu:AnimateSequence( "ZHS" )
	end
	
	self._sequenceLengths.ZHS = 0
	local f1_local15 = nil
	ProgressButton:RegisterAnimationSequence( "AR", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 62
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 102
		}
	} )
	AmmoName:RegisterAnimationSequence( "AR", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Text_Style_Horizontal_Alignment,
			value = LUI.Alignment.Right
		}
	} )
	self._sequences.AR = function ()
		menu:AnimateSequence( "AR" )
		menu:AnimateSequence( "AR" )
	end
	
	self._sequenceLengths.AR = 0
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "InteractiveObjectPopup", InteractiveObjectPopup )
LockTable( _M )
