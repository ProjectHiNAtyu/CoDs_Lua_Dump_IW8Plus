-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
module( ..., package.seeall )
require( "ui.generated.widgets.frontend.playlistdetailsmodegrid" )
require( "ui.generated.widgets.frontend.playlistdetailsmapgrid" )
require( "ui.generated.widgets.frontend.mp.playmenu.menutab" )
require( "ui.generated.widgets.frontend.playlistdetailstaglabel" )
require( "ui.generated.widgets.frontend.menutitle" )
local f0_local0 = 23
local f0_local1 = 24
local f0_local2 = 10
local f0_local3 = function ( f14_arg0 )
	local f14_local0 = f14_arg0._playlistDataSource.name:GetValue( f14_arg0._controllerIndex )
	local f14_local1 = f14_arg0._playlistDataSource.desc:GetValue( f14_arg0._controllerIndex )
	f14_arg0.MenuTitle:SetTitle( f14_local0 )
	f14_arg0.MenuTitle:DisableDecorativeElements()
	f14_arg0.MenuTitle.MenuTitle:SetFontSize( 24 )
	if f14_local1 then
		f14_arg0.MenuDescription:setText( f14_local1 )
	else
		f14_arg0.MenuDescription:SetVisible( false )
	end
end

local f0_local4 = function ( f13_arg0, f13_arg1, f13_arg2 )
	local f13_local0 = String.Split( string.lower( f13_arg1 ), "|" )
	local f13_local1 = "#"
	local f13_local2 = false
	local f13_local3 = 1
	local f13_local4 = #f13_local0
	if f13_local0[1] == f13_local1 then
		f13_local2 = true
		f13_local3 = 2
	end
	for f13_local5 = f13_local3, #f13_local0, 1 do
		local f13_local8 = f13_local0[f13_local5]
		local f13_local9
		if f13_local2 then
			f13_local9 = f13_local0[f13_local5]
			if not f13_local9 then
			
			else
				local f13_local10 = PLAY_MENU.PLAYLIST_TAG_STYLES.NONE
				if not f13_local2 then
					local f13_local11 = String.Split( f13_local9, "*" )
					local f13_local12 = f13_local11[1]
					local f13_local13 = PLAY_MENU.GetTagBundleData( f13_local12 )
					if f13_local13 then
						local f13_local14 = Engine[0xED84C33EC5F01EA]( f13_local13[0xA04F4EF1995407E] )
						f13_local10 = f13_local13[0xF7282ADBC7013F6]
						if 1 < #f13_local11 then
							f13_local13 = PLAY_MENU.GetTagBundleData( f13_local12 )
							local f13_local15 = PLAY_MENU.PLAYLIST_TAG_TYPE_DATA[PLAY_MENU.PLAYLIST_TAG_TYPES[f13_local13[0x79439EF7BFA9C2D]]]
							if PLAY_MENU.IsTagType( f13_local13, PLAY_MENU.PLAYLIST_TAG_TYPES.PLAYER_SIZE ) then
								local f13_local16 = 2
								local f13_local17 = 4
								if #f13_local11 == f13_local16 then
									f13_local14 = Engine[0xED84C33EC5F01EA]( f13_local13[0xA04F4EF1995407E], f13_local11[f13_local16] )
									f13_local10 = f13_local13[0xF7282ADBC7013F6]
								elseif #f13_local11 == f13_local17 then
									local f13_local18 = PLAY_MENU.GetTagBundleData( f13_local15.squadAndTeamSizeTag )
									f13_local14 = Engine[0xED84C33EC5F01EA]( f13_local18[0xA04F4EF1995407E], f13_local11[f13_local16], f13_local11[f13_local17] )
									f13_local10 = f13_local18[0xF7282ADBC7013F6]
								end
							elseif PLAY_MENU.IsTagType( f13_local13, PLAY_MENU.PLAYLIST_TAG_TYPES.MAP_SIZE ) then
								local f13_local16 = 2
								local f13_local17 = 3
								if #f13_local11 == f13_local16 then
									f13_local14 = Engine[0xED84C33EC5F01EA]( f13_local13[0xA04F4EF1995407E], f13_local15[f13_local11[2]] )
									f13_local10 = f13_local13[0xF7282ADBC7013F6]
								elseif #f13_local11 == f13_local17 then
									local f13_local18 = PLAY_MENU.GetTagBundleData( f13_local15.mapSizeRangeTag )
									f13_local14 = Engine[0xED84C33EC5F01EA]( f13_local18[0xA04F4EF1995407E], f13_local15[f13_local11[f13_local16]], f13_local15[f13_local11[f13_local17]] )
									f13_local10 = f13_local18[0xF7282ADBC7013F6]
								end
							elseif f13_local13[0x40BCEC52D0082A6] then
								local f13_local18 = f13_local15[f13_local11[2]]
								if not LUI.StringIsNilOrEmpty( f13_local18 ) then
									f13_local14 = Engine[0xED84C33EC5F01EA]( f13_local13[0x40BCEC52D0082A6], f13_local18 )
								end
							end
						end
						table.insert( f13_arg2, {
							tagText = f13_local14,
							tagStyle = f13_local10
						} )
					end
				end
			end
		end
		f13_local9 = f13_local8
	end
	return f13_arg2
end

local f0_local5 = function ( f12_arg0 )
	local f12_local0 = {}
	local f12_local1 = 0x795012AF6BAE173
	local f12_local2 = ""
	local f12_local3 = f12_arg0._playlistDataSource.numRounds:GetValue( f12_arg0._controllerIndex )
	if f12_local3 and 0 < f12_local3 then
		table.insert( f12_local0, {
			tagText = Engine[0xED84C33EC5F01EA]( 0x9AC3544168D743C, tostring( f12_local3 ) )
		} )
		f12_local1 = 0xA4E6323D0DDA311
	else
		local f12_local4 = f12_arg0._playlistDataSource.scoreLimit:GetValue( f12_arg0._controllerIndex )
		if f12_local4 ~= nil and 0 < f12_local4 then
			table.insert( f12_local0, {
				tagText = Engine[0xED84C33EC5F01EA]( 0x6E43CE3D6CF6D8A, tostring( f12_local4 ) )
			} )
		end
	end
	local f12_local4 = f12_arg0._playlistDataSource.timeLimit:GetValue( f12_arg0._controllerIndex )
	local f12_local5 = 0
	if f12_local4 and 0 < f12_local4 then
		f12_local5 = f12_local4 / 60
		if 1 < f12_local5 then
			f12_local2 = Engine[0xED84C33EC5F01EA]( 0xF6CA6E43C3B946A, f12_local5 )
		elseif f12_local5 == 1 then
			f12_local2 = Engine[0xED84C33EC5F01EA]( 0x30F1085ABAF5031, f12_local5 )
		elseif 0 < f12_local5 and f12_local5 < 1 then
			f12_local2 = Engine[0xED84C33EC5F01EA]( 0x5B832D4B77827DA, f12_local4 )
		end
		table.insert( f12_local0, {
			tagText = Engine[0xED84C33EC5F01EA]( f12_local1, Engine[0x7D3158A9539A355]( f12_local2 ) )
		} )
	end
	local f12_local6 = f12_arg0._playlistDataSource.tags:GetValue( f12_arg0._controllerIndex )
	if not String.IsNilOrEmpty( f12_local6 ) then
		f12_local0 = f0_local0( f12_arg0, f12_local6, f12_local0 )
	end
	f12_arg0._labels = f12_local0
	f12_arg0.TagsGrid:SetNumChildren( #f12_arg0._labels )
	if #f12_arg0._labels <= 1 then
		f12_arg0.TagsGrid:SetFirstLinePadding( 55 )
	end
end

local f0_local6 = function ( f9_arg0 )
	local f9_local0 = f9_arg0._playlistDataSource.categoryIndex:GetValue( f9_arg0._controllerIndex )
	local f9_local1 = f9_arg0._playlistDataSource.playlistIndex:GetValue( f9_arg0._controllerIndex )
	f9_arg0.PlaylistDetailsMapGrid:SetupGrid( Table.RemoveDuplicates( Playlist[0x7F9E7147F790D6A]( f9_local1, f9_local0, true ) ) )
	local f9_local2 = {}
	local f9_local3 = {}
	for f9_local7, f9_local8 in ipairs( Playlist[0xD93AFC74CFE7CE0]( f9_local0, f9_local1, true ) ) do
		if not f9_local2[f9_local8.gametypeAssetName] then
			f9_local2[f9_local8.gametypeAssetName] = true
			table.insert( f9_local3, {
				key = f9_local8.internalName,
				bundle = f9_local8.gametypeAssetName
			} )
		end
	end
	f9_arg0.PlaylistDetailsModeGrid:SetupGrid( f9_local3 )
	f9_arg0.Tabs:SetTabs( {
		{
			hasDefaultFocus = true,
			name = Engine[0xED84C33EC5F01EA]( "LUA_MENU/MAPS_CAPS" ),
			focusFunction = function ( f11_arg0, f11_arg1, f11_arg2 )
				f9_arg0.PlaylistDetailsMapGrid:SetVisible( true )
				f9_arg0.PlaylistDetailsMapGrid:GainFocus( {
					controller = f11_arg1
				} )
				f9_arg0.PlaylistDetailsModeGrid:SetVisible( false )
				Engine[0xC4146BA76D0F982]( 0x71745AE6F150D2 )
			end
		},
		{
			name = Engine[0xED84C33EC5F01EA]( "JUP_LUA_MENU/GAME_MODES" ),
			focusFunction = function ( f10_arg0, f10_arg1, f10_arg2 )
				f9_arg0.PlaylistDetailsModeGrid:SetVisible( true )
				f9_arg0.PlaylistDetailsModeGrid:GainFocus( {
					controller = f10_arg1
				} )
				f9_arg0.PlaylistDetailsMapGrid:SetVisible( false )
				Engine[0xC4146BA76D0F982]( 0x71745AE6F150D2 )
			end
		}
	} )
	f9_arg0.Tabs:SetAlignment( LUI.Alignment.Center )
	if CONDITIONS[0x2DA54CF5D6B7F02]() then
		f9_local5 = f9_arg0.PlaylistDetailsMapGrid:GetMissingMaps()
		f9_local6 = f9_arg0.PlaylistDetailsModeGrid:GetMissingModes()
		if 0 < #f9_local5 or 0 < #f9_local6 then
			f9_local7 = "Error: Missing MapInfo or GameType Scriptbundles"
			f9_local8 = ""
			if 0 < #f9_local5 then
				f9_local8 = f9_local8 .. "Maps: "
				for f9_local12, f9_local13 in ipairs( f9_local5 ) do
					f9_local8 = f9_local8 .. f9_local13 .. ", "
				end
			end
			if 0 < #f9_local6 then
				if 0 < #f9_local5 then
					f9_local8 = f9_local8 .. "\n"
				end
				f9_local8 = f9_local8 .. "Modes: "
				for f9_local12, f9_local13 in ipairs( f9_local6 ) do
					f9_local8 = f9_local8 .. f9_local13 .. ", "
				end
			end
			LUI.FlowManager.RequestDevErrorPopup( f9_local7, f9_local8 )
		end
	end
end

local f0_local7 = function ( f6_arg0, f6_arg1, f6_arg2 )
	f6_arg0._controllerIndex = f6_arg2.controllerIndex
	f6_arg0._parentMenu = f6_arg2.parentMenu
	f6_arg0._playlistDataSource = f6_arg2.playlistDataSource
	f6_arg0._labels = {}
	f0_local0( f6_arg0 )
	f0_local0( f6_arg0 )
	f0_local0( f6_arg0 )
	f6_arg0.TagsGrid:SetRefreshChild( function ( f8_arg0, f8_arg1, f8_arg2 )
		f8_arg0:SetupTag( f6_arg0._labels[f6_arg0.TagsGrid:GetContentIndex( f8_arg1, f8_arg2, {
			relativePosition = false
		} ) + 1] )
	end )
	local f6_local0 = 0
	local f6_local1 = LAYOUT.GetTextHeight( f6_arg0.MenuDescription )
	local f6_local2 = f6_arg0.MenuDescription:GetAnchorsAndPosition()
	f6_local0 = f6_local1 + f6_local2.top + f0_local0
	local f6_local3, f6_local4 = f6_arg0.TagsGrid:GetContentSize()
	f6_local4 = f6_local4 + f0_local0
	f6_arg0.TagsGrid:SetTop( f6_local0 )
	f6_arg0.TagsGrid:SetBottom( f6_local0 + f6_local4 )
	f6_local0 = f6_local0 + f6_local4 + f0_local0
	local f6_local5 = f6_local0 + LAYOUT.GetElementHeight( f6_arg0.Tabs )
	f6_arg0.Tabs:SetTop( f6_local0 + f0_local0 )
	f6_arg0.Tabs:SetBottom( f6_local5 )
	local f6_local6 = LAYOUT.GetElementHeight( f6_arg0.GridBackground )
	local f6_local7 = LAYOUT.GetElementHeight( f6_arg0 ) - LAYOUT.GetElementHeight( f6_arg0.BottomStrip ) - f0_local0
	f6_arg0.GridBackground:SetTop( f6_local0 )
	f6_arg0.GridBackground:SetBottom( f6_local7 )
	f6_local0 = f6_local5 + f0_local0
	f6_arg0.PlaylistDetailsModeGrid:SetTop( f6_local0 )
	f6_arg0.PlaylistDetailsModeGrid:SetBottom( f6_local7 )
	f6_arg0.PlaylistDetailsMapGrid:SetTop( f6_local0 )
	f6_arg0.PlaylistDetailsMapGrid:SetBottom( f6_local7 )
	f6_arg0:registerEventHandler( "flyin_sequence_complete", function ( element, event )
		if CONDITIONS.AreFrontendTipsEnabled() and not Onboarding.WasCompleted( f6_arg0, Onboarding.tutorials.PLAYLIST_DETAILS_FLYOUT ) then
			TIP.CreateTips( Onboarding.Tips.FIRST_TIME_BOOT_PLAYLIST_DETAILS_FLYOUT_2( f6_arg0, f6_arg0, f6_arg0 ) )
			return true
		else
			
		end
	end )
end

function PlaylistDetailsPopup( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = MenuBuilder
	local f1_local2 = f1_local0.UIElement.new()
	f1_local2:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 620, 0, 1080 )
	f1_local2.id = "PlaylistDetailsPopup"
	local f1_local3
	if f1_arg1 then
		f1_local3 = f1_arg1
	else
		f1_local3 = f1_arg1.controllerIndex
	end
	f1_local3 = f1_local0.ValidateControllerIndex( f1_local2, f1_local3 )
	f1_local2:SetSpacing( 20 )
	local f1_local4 = nil
	f1_local4 = f1_local0.UIImage.new()
	f1_local4[0x8B72E07B55C3AC0] = "Background"
	f1_local4:SetRGB( 2434342, 0 )
	f1_local2:addElement( f1_local4 )
	f1_local2[0xD4176E7CA246EDD] = f1_local4
	local f1_local5 = nil
	f1_local5 = f1_local0.UIImage.new()
	f1_local5[0x8B72E07B55C3AC0] = "TopStrip"
	f1_local5:SetAlpha( 0.05, 0 )
	f1_local5:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, 85 )
	f1_local2:addElement( f1_local5 )
	f1_local2[0xD00410135915EF2] = f1_local5
	local f1_local6 = nil
	f1_local6 = f1_local0.UIImage.new()
	f1_local6[0x8B72E07B55C3AC0] = "BottomStrip"
	f1_local6:SetRGB( 0, 0 )
	f1_local6:SetAlpha( 0.2, 0 )
	f1_local6:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, -82, 0 )
	f1_local2:addElement( f1_local6 )
	f1_local2[0x5A83C1E1CF70904] = f1_local6
	local f1_local7 = nil
	f1_local7 = f1_local0.UIImage.new()
	f1_local7[0x8B72E07B55C3AC0] = "LeftStrip"
	f1_local7:SetRGB( 3421231, 0 )
	f1_local7:SetAnchorsAndPosition( 0, 1, 0, 0, 0, 1, 0, 0 )
	f1_local2:addElement( f1_local7 )
	f1_local2[0xB589D1870F15896] = f1_local7
	local f1_local8 = nil
	f1_local8 = f1_local0.UIImage.new()
	f1_local8[0x8B72E07B55C3AC0] = "RightStrip"
	f1_local8:SetRGB( 3421231, 0 )
	f1_local8:SetAnchorsAndPosition( 1, 0, 0, 0, -1, 0, 0, 0 )
	f1_local2:addElement( f1_local8 )
	f1_local2[0x36E068EE4E0B691] = f1_local8
	local f1_local9 = nil
	f1_local9 = f1_local0.UIImage.new()
	f1_local9[0x8B72E07B55C3AC0] = "GridBackground"
	f1_local9:SetRGB( 1052945, 0 )
	f1_local9:SetAlpha( 0.5, 0 )
	f1_local9:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, -256.5, 256.5, 309.6, 956.6 )
	f1_local2:addElement( f1_local9 )
	f1_local2[0x4833541AD6031F1] = f1_local9
	local f1_local10 = nil
	if CONDITIONS.IsJup() then
		f1_local10 = f1_local1.BuildRegisteredType( 0x83853444D4BB734, {
			controllerIndex = f1_local3
		} )
		f1_local10[0x8B72E07B55C3AC0] = "PlaylistDetailsModeGrid"
		f1_local10:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, -235, 235, 368, 928 )
		f1_local2:addElement( f1_local10 )
		f1_local2[0x83853444D4BB734] = f1_local10
	end
	local f1_local11 = nil
	if CONDITIONS.IsJup() then
		f1_local11 = f1_local1.BuildRegisteredType( 0xED035CE405203BF, {
			controllerIndex = f1_local3
		} )
		f1_local11[0x8B72E07B55C3AC0] = "PlaylistDetailsMapGrid"
		f1_local11:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, -230, 240, 368, 928 )
		f1_local2:addElement( f1_local11 )
		f1_local2[0xED035CE405203BF] = f1_local11
	end
	local f1_local12 = nil
	if CONDITIONS.IsJup() then
		f1_local12 = f1_local0.TabManager.new( {
			tabHeight = 32,
			spacing = 4,
			wrap = true,
			buildTab = function ()
				return f1_arg0.BuildRegisteredType( 0x1248403C7BAAA89, {
					controllerIndex = f1_arg0
				} )
			end,
			controllerIndex = f1_local3
		} )
		f1_local12[0x8B72E07B55C3AC0] = "Tabs"
		f1_local12:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, -242.5, 242.5, 319, 351 )
		f1_local12:SubscribeToModel( DataSources.alwaysLoaded.themes[0x1FCB6A4979FA718]:GetModel( f1_local3 ), function ()
			local f4_local0 = DataSources.alwaysLoaded.themes[0x1FCB6A4979FA718]:GetValue( f1_arg0 )
			if f4_local0 ~= nil then
				f1_arg0:SetTabSpacing( f4_local0 )
			end
		end )
		f1_local2:addElement( f1_local12 )
		f1_local2[0x92753EF0779B5CD] = f1_local12
	end
	local f1_local13 = nil
	f1_local13 = f1_local0.UIGrid.new( {
		maxVisibleRows = 4,
		maxVisibleColumns = 3,
		spacingX = 15,
		spacingY = 12,
		rowHeight = 28,
		columnWidth = 160,
		controllerIndex = f1_local3,
		buildChild = function ()
			return f1_arg0.BuildRegisteredType( 0x46096135C3776F1, {
				controllerIndex = f1_arg0
			} )
		end,
		refreshChild = function ( f2_arg0, f2_arg1, f2_arg2 )
			
		end,
		scrollType = Enum[0x92A69278394394][0x20D1032BAFC0C12],
		sideArrowsOptions = {
			sideArrowsCreated = false
		}
	} )
	f1_local13[0x8B72E07B55C3AC0] = "TagsGrid"
	f1_local13:SetFirstLinePadding( 5 )
	f1_local13:setUseStencil( false )
	f1_local13:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, -239.5, 242.5, 201.5, 276.5 )
	f1_local2:addElement( f1_local13 )
	f1_local2[0xC040C259F134210] = f1_local13
	local f1_local14 = nil
	f1_local14 = f1_local0.UIStyledText.new()
	f1_local14[0x8B72E07B55C3AC0] = "MenuDescription"
	f1_local14:SetRGB( SWATCHES[0x2B125210C0B2BB1][0xF5C0139BA6F896C], 0 )
	f1_local14:SetAlpha( 0.5, 0 )
	f1_local14:setText( "", 0 )
	f1_local14:SetFont( FONTS.GetFont( FONTS.SecondaryRegular.File ) )
	f1_local14:SetFontSize( 18 * _PT )
	f1_local14:SetMinFontSize( 18 * _PT )
	f1_local14:SetWordWrap( true )
	f1_local14:SetAlignment( f1_local0.Alignment.Left )
	f1_local14:SetSDFRenderingEnabled( true )
	f1_local14:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, -256.5, 256.5, 117, 199 )
	f1_local2:addElement( f1_local14 )
	f1_local2[0xE996750351EA47C] = f1_local14
	local f1_local15 = nil
	f1_local15 = f1_local1.BuildRegisteredType( 0x93CC4E91B38D10C, {
		controllerIndex = f1_local3
	} )
	f1_local15[0x8B72E07B55C3AC0] = "MenuTitle"
	f1_local15[0x93CC4E91B38D10C]:SetAlpha( 0.5, 0 )
	f1_local15[0x93CC4E91B38D10C]:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xB81325BA15D0C76 ) ), 0 )
	f1_local15[0x93CC4E91B38D10C]:SetFont( FONTS.GetFont( FONTS.SecondaryLight.File ) )
	f1_local15:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1020, -5, 85 )
	f1_local2:addElement( f1_local15 )
	f1_local2[0x93CC4E91B38D10C] = f1_local15
	f0_local0( f1_local2, f1_local3, f1_arg1 )
	return f1_local2
end

MenuBuilder.registerType( 0x2B10C0F893C23C3, PlaylistDetailsPopup )
LockTable( _M )
