-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
module( ..., package.seeall )
local f0_local0 = function ( f9_arg0, f9_arg1, f9_arg2 )
	assert( f9_arg0.BombTimer )
	assert( f9_arg0.ObjectiveText )
	assert( f9_arg0.ObjectiveProgress )
	assert( f9_arg0.DefendText )
	f9_arg0.ObjectiveProgress:SetProgressBar()
	ACTIONS.AnimateSequence( f9_arg0, "NotPlanted" )
	local f9_local0 = DataSources.inGame.HUD.bombCarrier
	local f9_local1 = DataSources.inGame.HUD.bombModeTimerTeam
	local f9_local2 = function ()
		local f12_local0 = Game.DHEDEIHGF( Game.DBACJGFHDD( f9_arg0 ) )
		local f12_local1 = f9_arg0:GetValue( f9_arg0 )
		if f12_local1 == f12_local0 or (f12_local0 == Teams.spectator or f12_local0 == Teams.follower) and f12_local1 == Teams.allies then
			f9_arg0.DefendText:setText( Engine.CBBHFCGDIC( "MPUI/DEFEND" ), 0 )
			ACTIONS.AnimateSequence( f9_arg0.ObjectiveProgress, "Friendly" )
		else
			f9_arg0.DefendText:setText( Engine.CBBHFCGDIC( "MPUI/DEFUSE" ), 0 )
			ACTIONS.AnimateSequence( f9_arg0.ObjectiveProgress, "Enemy" )
		end
	end
	
	local f9_local3 = function ()
		local f11_local0 = f9_arg0:GetValue( f9_arg0 )
		local f11_local1 = f9_arg0:GetValue( f9_arg0 )
		local f11_local2 = Game.DHEDEIHGF( Game.DBACJGFHDD( f9_arg0 ) )
		if f11_local0 and f11_local0 ~= -1 then
			f9_arg0.ObjectiveProgress:SetProgressBar()
			ACTIONS.AnimateSequence( f9_arg0, "NotPlanted" )
			f9_arg0.ObjectiveText:SetRGBFromTable( SWATCHES.HUD.objectiveBacking, 0 )
		elseif f11_local1 == -1 then
			f9_arg0.ObjectiveProgress:SetProgressBar()
			ACTIONS.AnimateSequence( f9_arg0, "NotPlanted" )
			f9_arg0.ObjectiveText:SetRGBFromTable( SWATCHES.HUD.objectiveBacking, 0 )
		elseif 0 < f11_local1 then
			local f11_local3 = DataSources.inGame.HUD.bombPlantedA:GetValue( f9_arg0 )
			local f11_local4 = DataSources.inGame.HUD.bombPlantedB:GetValue( f9_arg0 )
			local f11_local5 = nil
			if f11_local3 then
				f9_arg0.ObjectiveText:setText( "A" )
				f11_local5 = DataSources.inGame.HUD.bombModeTimerAEnd
			elseif f11_local4 then
				f9_arg0.ObjectiveText:setText( "B" )
				f11_local5 = DataSources.inGame.HUD.bombModeTimerBEnd
			end
			ACTIONS.AnimateSequence( f9_arg0, "Planted" )
			f9_arg0.ObjectiveText:SetRGBFromTable( SWATCHES.HUD.HUDMain, 0 )
			if f11_local5 ~= nil then
				local f11_local6 = f11_local5:GetValue( f9_arg0 )
				f9_arg0.ObjectiveProgress:SetProgressBar( 1, f11_local6 - Game.CAIAFFIDE() )
				f9_arg0.BombTimer:setEndTime( f11_local6 )
			end
		end
		f9_arg0()
	end
	
	f9_arg0:SubscribeToModel( f9_local1:GetModel( f9_arg1 ), f9_local3, true )
	f9_arg0:SubscribeToModel( f9_local0:GetModel( f9_arg1 ), f9_local3, true )
	f9_arg0:SubscribeToModel( DataSources.inGame.currentPlayerStateClientNum:GetModel( f9_arg1 ), f9_local3 )
	f9_arg0:registerEventHandler( "empty_menu_stack", f9_local2 )
	f9_arg0:SubscribeToModel( DataSources.inGame.HUD.searchDestroyBombCarrying:GetModel( f9_arg1 ), function ( f10_arg0 )
		local f10_local0 = DataModel.JJEHAEBDF( f10_arg0 )
		if f10_local0 ~= nil and f10_local0 == true then
			ACTIONS.AnimateSequence( f9_arg0, "Show" )
			f9_arg0.ObjectiveProgress:SetProgressBar()
			ACTIONS.AnimateSequence( f9_arg0, "NotPlanted" )
		else
			ACTIONS.AnimateSequence( f9_arg0, "Hide" )
		end
	end )
	if IsLanguageArabic() then
		ACTIONS.AnimateSequence( f9_arg0, "AR" )
		f9_arg0.DefendText:SetOptOutRightToLeftAlignmentFlip( true )
		f9_arg0.DefendText:SetAlignment( LUI.Alignment.Left )
	end
	if IsLanguageJapanese() then
		ACTIONS.AnimateSequence( f9_arg0, "JP" )
	end
end

function BombCarrierIcon( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 64 * _1080p, 0, 64 * _1080p )
	self.id = "BombCarrierIcon"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local ObjectiveProgress = nil
	
	ObjectiveProgress = MenuBuilder.BuildRegisteredType( "MatchStatusObjectiveProgress", {
		controllerIndex = f1_local1
	} )
	ObjectiveProgress.id = "ObjectiveProgress"
	ObjectiveProgress:SetScale( -0.25, 0 )
	ObjectiveProgress:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -40, _1080p * 40, _1080p * -40, _1080p * 40 )
	self:addElement( ObjectiveProgress )
	self.ObjectiveProgress = ObjectiveProgress
	
	local ObjectiveText = nil
	
	ObjectiveText = LUI.UIStyledText.new()
	ObjectiveText.id = "ObjectiveText"
	ObjectiveText:SetRGBFromTable( SWATCHES.HUD.objectiveBacking, 0 )
	ObjectiveText:SetScale( -0.25, 0 )
	ObjectiveText:setText( "A", 0 )
	ObjectiveText:SetFont( FONTS.GetFont( FONTS.MainBold.File ) )
	ObjectiveText:SetWordWrap( false )
	ObjectiveText:SetAlignment( LUI.Alignment.Center )
	ObjectiveText:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -30, _1080p * 30, _1080p * -35, _1080p * 35 )
	self:addElement( ObjectiveText )
	self.ObjectiveText = ObjectiveText
	
	local Icon = nil
	
	Icon = LUI.UIImage.new()
	Icon.id = "Icon"
	Icon:SetRGBFromTable( SWATCHES.HUD.HUDMain, 0 )
	Icon:SetScale( -0.25, 0 )
	Icon:setImage( RegisterMaterial( "hud_objective_bomb" ), 0 )
	Icon:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -24, _1080p * 24, _1080p * -24, _1080p * 24 )
	self:addElement( Icon )
	self.Icon = Icon
	
	local BombTimer = nil
	
	BombTimer = MenuBuilder.BuildRegisteredType( "UICountdown", {
		controllerIndex = f1_local1
	} )
	BombTimer.id = "BombTimer"
	BombTimer:SetRGBFromTable( SWATCHES.HUD.HUDMain, 0 )
	BombTimer:SetFont( FONTS.GetFont( FONTS.MainBold.File ) )
	BombTimer:SetAlignment( LUI.Alignment.Left )
	BombTimer:setEndTime( 0 )
	BombTimer:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, _1080p * 7, _1080p * 104, 0, _1080p * 24 )
	self:addElement( BombTimer )
	self.BombTimer = BombTimer
	
	local DefendText = nil
	
	DefendText = LUI.UIStyledText.new()
	DefendText.id = "DefendText"
	DefendText:SetRGBFromTable( SWATCHES.HUD.HUDMain, 0 )
	DefendText:setText( Engine.CBBHFCGDIC( "MPUI/DEFEND" ), 0 )
	DefendText:SetFont( FONTS.GetFont( FONTS.MainBold.File ) )
	DefendText:SetWordWrap( false )
	DefendText:SetAlignment( LUI.Alignment.Right )
	DefendText:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, _1080p * -100, 0, 0, _1080p * 24 )
	self:addElement( DefendText )
	self.DefendText = DefendText
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	local f1_local8 = nil
	Icon:RegisterAnimationSequence( "Show", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.Show = function ()
		menu:AnimateSequence( "Show" )
	end
	
	local f1_local9 = nil
	Icon:RegisterAnimationSequence( "Hide", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.Hide = function ()
		menu:AnimateSequence( "Hide" )
	end
	
	local f1_local10 = nil
	ObjectiveProgress:RegisterAnimationSequence( "NotPlanted", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	ObjectiveText:RegisterAnimationSequence( "NotPlanted", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	BombTimer:RegisterAnimationSequence( "NotPlanted", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	DefendText:RegisterAnimationSequence( "NotPlanted", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.NotPlanted = function ()
		menu:AnimateSequence( "NotPlanted" )
		menu:AnimateSequence( "NotPlanted" )
		menu:AnimateSequence( "NotPlanted" )
		menu:AnimateSequence( "NotPlanted" )
	end
	
	local f1_local11 = nil
	ObjectiveProgress:RegisterAnimationSequence( "Planted", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	ObjectiveText:RegisterAnimationSequence( "Planted", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	Icon:RegisterAnimationSequence( "Planted", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	BombTimer:RegisterAnimationSequence( "Planted", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	DefendText:RegisterAnimationSequence( "Planted", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.Planted = function ()
		menu:AnimateSequence( "Planted" )
		menu:AnimateSequence( "Planted" )
		menu:AnimateSequence( "Planted" )
		menu:AnimateSequence( "Planted" )
		menu:AnimateSequence( "Planted" )
	end
	
	local f1_local12 = nil
	BombTimer:RegisterAnimationSequence( "AR", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -102
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -5
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Top
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 30
		}
	} )
	DefendText:RegisterAnimationSequence( "AR", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Left
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 100
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Top
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 30
		}
	} )
	self._sequences.AR = function ()
		menu:AnimateSequence( "AR" )
		menu:AnimateSequence( "AR" )
	end
	
	local f1_local13 = nil
	ObjectiveText:RegisterAnimationSequence( "JP", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -25
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 25
		}
	} )
	self._sequences.JP = function ()
		menu:AnimateSequence( "JP" )
	end
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "BombCarrierIcon", BombCarrierIcon )
LockTable( _M )
