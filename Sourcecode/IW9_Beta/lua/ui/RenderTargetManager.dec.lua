-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
RenderTargetManager = RenderTargetManager or {}
RenderTargetManager.RenderToTextureAlias = {
	nil,
	"$rtt_watchlcd",
	"$rtt_tablet",
	"$rtt_cyberEmp",
	"$rtt_reserved5",
	"$rtt_reserved4",
	"$rtt_reserved3",
	"$rtt_reserved2",
	"$rtt_reserved1"
}
RenderTargetManager.RenderToTextureSlot = {
	Slot00 = RenderTargetManager.RenderToTextureAlias[1],
	Slot01 = RenderTargetManager.RenderToTextureAlias[2],
	Slot02 = RenderTargetManager.RenderToTextureAlias[3],
	Slot03 = RenderTargetManager.RenderToTextureAlias[4],
	Slot04 = RenderTargetManager.RenderToTextureAlias[5],
	Slot05 = RenderTargetManager.RenderToTextureAlias[6],
	Slot06 = RenderTargetManager.RenderToTextureAlias[7],
	Slot07 = RenderTargetManager.RenderToTextureAlias[8]
}
RenderTargetManager.RTTSlots = {}
RenderTargetManager.LogRenderTargetDump = function ()
	local f9_local0 = ""
	for f9_local1 = 1, #RenderTargetManager.RenderToTextureAlias, 1 do
		local f9_local4 = RenderTargetManager.RenderToTextureAlias[f9_local1]
		local f9_local5 = RenderTargetManager.RTTSlots[f9_local4]
		local f9_local6
		if f9_local5 == nil then
			f9_local6 = "EMPTY"
		else
			f9_local6 = f9_local5.widget.id
		end
		f9_local0 = f9_local0 .. "[" .. f9_local4 .. "]" .. "[" .. f9_local6 .. "]\n"
	end
	DebugPrintLogFileOnly( "[RenderTargetDebug] LogRenderTargetDump - \n" .. f9_local0 )
end

RenderTargetManager.SetupRenderTarget = function ( f7_arg0, f7_arg1, f7_arg2, f7_arg3, f7_arg4, f7_arg5, f7_arg6, f7_arg7, f7_arg8, f7_arg9, f7_arg10 )
	DebugPrintLogFileOnly( "[RenderTargetDebug] SetupRenderTarget - widget(" .. f7_arg0.id .. ") | rttName(" .. f7_arg1 .. ")" )
	local f7_local0 = RenderTargetManager.RTTSlots[f7_arg1]
	if not f7_arg10 then
		f7_arg10 = 0
	end
	if f7_local0 ~= nil and f7_local0.priority <= f7_arg10 then
		f7_local0.widget:SetAlpha( 0 )
		RenderTargetManager.ReleaseRenderTarget( f7_local0.widget, f7_arg1, f7_local0.controllerIndex )
	elseif f7_local0 and f7_arg10 < f7_local0.priority then
		local f7_local1 = false
	end
	f7_arg0:SetVisibility( LUI.Visibility.Hidden )
	local f7_local1 = f7_arg0:Wait( 1 )
	f7_local1.onComplete = function ()
		DebugPrintLogFileOnly( "[RenderTargetDebug] SetupRenderTarget - widget(" .. tostring( f7_arg0.id ) .. ") | rttName(" .. f7_arg0 .. ") COMPLETE" )
		f7_arg0:SetupRenderTarget( f7_arg0, f7_arg0, f7_arg0, f7_arg0, f7_arg0, f7_arg0, f7_arg0, f7_arg0, f7_arg0 )
		RenderTargetManager.RTTSlots[f7_arg0] = {
			widget = f7_arg0,
			controllerIndex = f7_arg0,
			priority = f7_arg0
		}
		f7_arg0:SetVisibility( LUI.Visibility.Visible )
		if f7_arg0 ~= RenderTargetManager.RenderToTextureSlot.Slot01 and f7_arg0 ~= RenderTargetManager.RenderToTextureSlot.Slot02 then
			f7_arg0:ActivateDirtyCheck( false )
		end
		RenderTargetManager.LogRenderTargetDump()
	end
	
	return true
end

RenderTargetManager.ReleaseRenderTarget = function ( f6_arg0, f6_arg1, f6_arg2 )
	DebugPrintLogFileOnly( "[RenderTargetDebug] ReleaseRenderTarget - widget(" .. tostring( f6_arg0.id ) .. ") | rttName(" .. f6_arg1 .. ")" )
	local f6_local0 = RenderTargetManager.RTTSlots[f6_arg1]
	if not f6_local0 then
		return 
	else
		f6_local0.widget:ReleaseRenderTarget( f6_arg2 )
		RenderTargetManager.RTTSlots[f6_arg1] = nil
		RenderTargetManager.LogRenderTargetDump()
	end
end

RenderTargetManager.RttDebug_SpawnRtt = function ( f5_arg0, f5_arg1 )
	local f5_local0 = {
		nil,
		0x4FA25E30DCC51DD,
		0x4E31027F6346C3B,
		0x91B71AF9DD99126,
		0x22E8D3201AA0FAC,
		0x75CB2612E806D2A,
		0x5B9B2C02327E161,
		0x276217BBCCC5324,
		0xD6243C6D01478AB
	}
	if f5_arg0.rttElements[f5_arg1] == nil then
		local f5_local1 = RenderTargetManager.RenderToTextureAlias[f5_arg1]
		local f5_local2 = 768
		local f5_local3 = 384
		DebugPrint( "RttDebug: Spawn rtt(" .. tostring( f5_arg1 ) .. "):" .. f5_local1 .. " using image " .. f5_local0[f5_arg1] )
		local self = LUI.UIElement.new()
		self.id = f5_local1
		self:SetupRenderTarget( f5_local1, f5_local2, f5_local3, 1 )
		local Image = nil
		
		Image = LUI.UIImage.new()
		Image.id = f5_local0[f5_arg1]
		Image:setImage( RegisterMaterial( f5_local0[f5_arg1] ), 0 )
		Image:SetAnchorsAndPosition( 0, 1, 0, 1, 0, _1080p * f5_local2, 0, _1080p * f5_local3 )
		self:addElement( Image )
		self.Image = Image
		
		f5_arg0:addElement( self )
		f5_arg0.rttElements[f5_arg1] = self
	end
end

RenderTargetManager.RttDebug_RemoveRtt = function ( f4_arg0, f4_arg1 )
	if f4_arg0.rttElements[f4_arg1] ~= nil then
		DebugPrint( "RttDebug: Remove rtt(" .. tostring( f4_arg1 ) .. "):" .. f4_arg0.rttElements[f4_arg1].id )
		f4_arg0.rttElements[f4_arg1]:ReleaseRenderTarget()
		f4_arg0.rttElements[f4_arg1]:closeTree()
		f4_arg0.rttElements[f4_arg1] = nil
	end
end

RenderTargetManager.RttDebugListener = function ( f3_arg0 )
	local f3_local0 = Dvar[0x22EAAB59AA27E9B]( 0x7E2B8E952AC2951 )
	if 0 < f3_local0 then
		RenderTargetManager.RttDebug_SpawnRtt( f3_arg0, f3_local0 )
	elseif f3_local0 < 0 then
		RenderTargetManager.RttDebug_RemoveRtt( f3_arg0, -f3_local0 )
	end
end

RenderTargetManager.InitRttDebug = function ( f1_arg0 )
	local self = LUI.UITimer.new( {
		event = "rtt_debug_timer",
		interval = -28,
		disposable = false
	} )
	f1_arg0.rttDebugTimer = self
	f1_arg0:addElement( self )
	f1_arg0.rttElements = {}
	f1_arg0:registerEventHandler( "rtt_debug_timer", function ( element, event )
		RenderTargetManager.RttDebugListener( element )
	end )
end

