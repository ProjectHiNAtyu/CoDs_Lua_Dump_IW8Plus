-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 02-09-2025 10:42
module( ..., package.seeall )
local f0_local0 = 4
local f0_local1 = function ( f35_arg0 )
	local f35_local0 = f35_arg0._currentMessageIndexDatasource:GetValue( f35_arg0._controllerIndex ) or 0
	return f35_arg0._menuMessageData[f35_local0 + 1], f35_local0
end

local f0_local2 = function ( f34_arg0 )
	local f34_local0
	if CONDITIONS.IsCRMEnabled() and #f34_arg0._menuMessageData ~= 0 then
		f34_local0 = false
	else
		f34_local0 = true
	end
	return f34_local0
end

local f0_local3 = function ( f33_arg0 )
	if f33_arg0.timer then
		f33_arg0.timer:closeTree()
		f33_arg0.timer = nil
	end
	if 0 < #f33_arg0._patchNoteData then
		f33_arg0:SetMinimized( true )
		f33_arg0.MessageText:setText( Engine.CBBHFCGDIC( "LUA_MENU_MP/VIEW_PATCH_NOTES" ) )
	else
		f33_arg0:SetAlpha( 0 )
	end
	f33_arg0.CRMListGrid:SetNumChildren( 0 )
	f33_arg0.CRMListGrid:RefreshContent()
end

local f0_local4 = function ( f30_arg0 )
	if f30_arg0:ShouldHideCRM() then
		f30_arg0:HideCRM()
	else
		if not f30_arg0.timer then
			f30_arg0.timer = LUI.UITimer.new( {
				interval = CRM.viewTime,
				event = {
					name = "scroll_crm",
					controllerIndex = f30_arg0._controllerIndex
				}
			} )
			f30_arg0:addElement( f30_arg0.timer )
		end
		f30_arg0:SetMinimized( false )
		f30_arg0:SetAlpha( 1 )
		f30_arg0.CRMListGrid:SetRefreshChild( function ( f31_arg0, f31_arg1, f31_arg2 )
			local f31_local0 = f30_arg0._menuMessageData[f31_arg1 + 1]
			ACTIONS.AnimateSequence( f31_arg0, "DefaultSequence" )
			f31_arg0:SetLayoutType( f31_local0[CRM.keys.LAYOUT_TYPE] )
			if f31_local0[CRM.keys.LAYOUT_TYPE] == 1 then
				f31_arg0.Title:SetAlpha( 0 )
				f31_arg0.Vignette:SetAlpha( 0 )
			elseif f31_local0[CRM.keys.LAYOUT_TYPE] == 3 then
				ACTIONS.AnimateSequence( f31_arg0, "BLM" )
				f31_arg0.Title:SetAlpha( 1 )
				f31_arg0.Title:setText( ToUpperCase( Engine.CBBHFCGDIC( "MENU/BLM_VERTICAL" ) ) )
			else
				f31_arg0.Title:SetAlpha( 1 )
				f31_arg0.Vignette:SetAlpha( 0.75 )
				f31_arg0.Title:setText( f31_local0[CRM.keys.TITLE] )
				if f31_local0[CRM.keys.LAYOUT_TYPE] == 2 then
					ACTIONS.AnimateSequence( f31_arg0, "BundleVer" )
				end
			end
			local f31_local1 = function ()
				local f32_local0 = f31_arg0[CRM.keys.IMAGE]
				if f32_local0 and 0 < #f32_local0 then
					f31_arg0.Background:setImage( RegisterMaterial( f32_local0 ) )
					f31_arg0.Background:SetAlpha( 1 )
				else
					f31_arg0.Background:SetAlpha( 0 )
				end
			end
			
			if f31_local0[CRM.keys.LAYOUT_TYPE] == 2 then
				local f31_local2 = f31_local0[CRM.keys.STORE_ITEM]
				if f31_local2 then
					local f31_local3 = StringTable.DIFCHIGDFB( CSV.bundleIDs.file, CSV.bundleIDs.cols.id, f31_local2, CSV.bundleIDs.cols.image )
					if f31_local3 and 0 < #f31_local3 then
						f31_arg0.Background:setImage( RegisterMaterial( f31_local3 ) )
						f31_arg0.Background:SetAlpha( 1 )
					else
						f31_local1()
					end
					if f30_arg0._promotedItems[tostring( f31_local2 )] then
						ACTIONS.AnimateSequence( f31_arg0, "ShowHotItem" )
					end
				else
					f31_local1()
				end
			else
				f31_local1()
			end
			if f31_local0[CRM.keys.LAYOUT_TYPE] ~= 3 then
				ACTIONS.AnimateSequence( f31_arg0, "ButtonIdle" )
			end
		end )
		f30_arg0.CRMListGrid:SetNumChildren( #f30_arg0._menuMessageData )
		f30_arg0.CRMListGrid:RefreshContent()
		for f30_local3, f30_local4 in ipairs( f30_arg0.CRMListGrid:GetBuiltChildren() ) do
			f30_local4:SetFocusable( false )
			f30_local4.m_requireFocusType = FocusType.MouseOver
		end
		f30_local0 = f30_arg0._currentMessageIndexDatasource:GetValue( f30_arg0._controllerIndex ) or 0
		if f30_arg0.CRMListGrid:GetNumChildren() < f30_local0 then
			f30_local0 = 0
			f30_arg0._currentMessageIndexDatasource:SetValue( f30_arg0._controllerIndex, 0 )
		end
		f30_arg0.Pips:Resize( #f30_arg0._menuMessageData )
		f30_arg0.Pips:UpdateChildren( f30_local0, 0 )
		f30_arg0.CRMListGrid:SetPosition( {
			y = 0,
			x = f30_local0
		}, true )
		f30_arg0.CRMListGrid:SetTargetColumn( f30_local0, false, true )
		f30_arg0.MinimizedCount:setText( Engine.CBBHFCGDIC( "LUA_MENU/X_OF_Y", f30_local0 + 1, #f30_arg0._menuMessageData ) )
		f30_arg0:UpdateActionPrompt( f30_arg0:GetCurrentMessageData() )
	end
end

local f0_local5 = function ( f29_arg0, f29_arg1 )
	if f29_arg1 == nil then
		ACTIONS.AnimateSequence( f29_arg0, "HideButton" )
		return 
	elseif (not f29_arg1[CRM.keys.ACTION_TITLE] or f29_arg1[CRM.keys.ACTION_TITLE] == "") and (not f29_arg1[CRM.keys.CONTENT_LONG] or f29_arg1[CRM.keys.CONTENT_LONG] == "") then
		ACTIONS.AnimateSequence( f29_arg0, "HideButton" )
	end
	if f29_arg0._isMinimized then
		f29_arg0.MessageText:setText( f29_arg1[CRM.keys.TITLE] )
	else
		f29_arg0.MessageText:setText( f29_arg1[CRM.keys.CONTENT_SHORT] )
	end
end

local f0_local6 = function ( f28_arg0, f28_arg1 )
	local f28_local0 = 16 * _1080p + (LUI.IsLastInputKeyboardMouse( f28_arg0._controllerIndex ) and 10 * _1080p or 0)
	local f28_local1 = f28_arg0.CRMListGrid:GetNumChildren()
	local f28_local2
	if f28_arg1 and f28_local1 > f0_local0 then
		f28_local2 = false
	else
		f28_local2 = true
	end
	local f28_local3 = f28_arg0.Pips
	local f28_local4 = f28_local3
	f28_local3 = f28_local3.SetAlpha
	local f28_local5
	if f28_local2 then
		f28_local5 = 1
	else
		f28_local5 = 0
	end
	f28_local3( f28_local4, f28_local5 )
	f28_local3 = f28_arg0.MinimizedCount
	f28_local4 = f28_local3
	f28_local3 = f28_local3.SetAlpha
	if not f28_local2 then
		f28_local5 = 1
	else
		f28_local5 = 0
	end
	f28_local3( f28_local4, f28_local5 )
	f28_local3 = 0
	local f28_local6 = 430 * _1080p
	f28_local4 = LUI.IsLastInputKeyboardMouse( f28_arg0._controllerIndex ) and 10 * _1080p or -10 * _1080p
	f28_local5 = LAYOUT.GetTextWidth( f28_arg0.ActionPrompt )
	if f28_arg1 then
		f28_arg0.Pips:SetAlignment( LUI.Alignment.Right )
		f28_arg0.Pips:SetAnchorsAndPosition( 0, 1, 1, 0, _1080p * 13, _1080p * 105, _1080p * -42, _1080p * -38 )
		if f28_local2 then
			f28_local3 = f28_local1 * (LAYOUT.GetElementHeight( f28_arg0.Pips ) + f28_local0 / 2)
			local f28_local7 = f28_arg0.Pips:GetCurrentAnchorsAndPositions()
			f28_arg0.Pips:SetRight( f28_local6 - f28_local5 - f28_local4 )
		else
			f28_local3 = LAYOUT.GetTextWidth( f28_arg0.MinimizedCount ) + f28_local0
			local f28_local7 = f28_arg0.MinimizedCount:GetCurrentAnchorsAndPositions()
			f28_arg0.MinimizedCount:SetRight( -(f28_local5 + f28_local4) )
		end
	else
		f28_arg0.Pips:SetAlignment( LUI.Alignment.Left )
		f28_arg0.Pips:SetAnchorsAndPosition( 0, 1, 1, 0, _1080p * 13, _1080p * 105, _1080p * -71, _1080p * -67 )
		f28_local3 = f28_local3 + f28_local0 / 2
	end
	f28_arg0.MessageText:SetRight( f28_local6 - f28_local5 - f28_local3, 100 )
end

local f0_local7 = function ( f27_arg0, f27_arg1 )
	if f27_arg0._isMinimized ~= f27_arg1 then
		f27_arg0._isMinimized = f27_arg1
		local f27_local0
		if f27_arg1 then
			f27_local0 = "Minimize"
		else
			f27_local0 = "Maximize"
		end
		ACTIONS.AnimateSequence( f27_arg0, f27_local0 )
		f27_arg0:UpdateMinimizedPips( f27_arg1 )
		if 0 < f27_arg0.CRMListGrid:GetNumChildren() then
			local f27_local1 = f27_arg0:GetCurrentMessageData()
			local f27_local2
			if f27_local1 then
				if f27_arg1 then
					f27_local2 = f27_local1[CRM.keys.TITLE]
					if not f27_local2 then
					
					else
						f27_arg0.MessageText:setText( f27_local2 )
					end
				end
				f27_local2 = f27_local1[CRM.keys.CONTENT_SHORT]
				if not f27_local2 then
					f27_local2 = ""
				end
			else
				f27_local2 = ""
			end
			f27_arg0.MessageText:setText( f27_local2 )
		end
	end
end

local f0_local8 = function ( f26_arg0, f26_arg1 )
	if f26_arg1.controller ~= Engine.IJEBHJIJF() then
		ACTIONS.AnimateSequence( f26_arg0, "SplitScreenWarningFlash" )
		return 
	elseif 0 < #f26_arg0._menuMessageData or 0 < #f26_arg0._patchNoteData then
		CRM.OpenCRMWindow( LUI.FlowManager.GetCurrentMenu( f26_arg0 ), false )
	end
end

local f0_local9 = function ( f15_arg0, f15_arg1, f15_arg2 )
	assert( f15_arg0.CRMListGrid )
	assert( f15_arg0.Pips )
	f15_arg1 = Engine.IJEBHJIJF()
	f15_arg0._controllerIndex = f15_arg1
	f15_arg0._currentMessageIndexDatasource = LUI.DataSourceInGlobalModel.new( "frontEnd.CRM.currentMessageIndex" )
	f15_arg0:setPriority( 10 )
	f15_arg0.CRMListGrid:SetMask( f15_arg0.Mask )
	f15_arg0.GetCurrentMessageData = f0_local0
	f15_arg0.UpdateActionPrompt = f0_local0
	f15_arg0.HideCRM = f0_local0
	f15_arg0.ShouldHideCRM = f0_local0
	f15_arg0.SetMinimized = f0_local0
	f15_arg0.CRMInteraction = f0_local0
	f15_arg0.UpdateMinimizedPips = f0_local0
	f15_arg0._menuMessageData = CRM.GetMenuMessageData()
	f15_arg0._patchNoteData = CRM.GetPatchNoteMessageData()
	f15_arg0._promotedItems = STORE.ParsePromotedItems( f15_arg1 )
	f15_arg0:addAndCallEventHandler( "update_input_type", function ( f25_arg0, f25_arg1 )
		if LUI.IsLastInputKeyboardMouse( f25_arg1.controllerIndex ) then
			f25_arg0.ActionPrompt:setText( "" )
		else
			f25_arg0.ActionPrompt:setText( Engine.CBBHFCGDIC( "LUA_MENU/OPEN_CRM_POPUP" ) )
			ACTIONS.AnimateSequence( f25_arg0, "MouseUnfocused" )
		end
		f25_arg0:UpdateMinimizedPips( f25_arg0._isMinimized )
	end, {
		controllerIndex = f15_arg1
	} )
	local f15_local0 = function ()
		if 1 < Engine.JEDFGECDJ() then
			f15_arg0.SplitScreenWarning:SetAlpha( 1 )
		else
			f15_arg0.SplitScreenWarning:SetAlpha( 0 )
		end
	end
	
	local f15_local1 = LUI.DataSourceInGlobalModel.new( "alwaysLoaded.privateParty.count" )
	f15_arg0:SubscribeToModel( f15_local1:GetModel( f15_arg1 ), f15_local0, true )
	f0_local0( f15_arg0 )
	f15_arg0:addEventHandler( "update_crm_data", function ( f23_arg0, f23_arg1 )
		f15_arg0( f23_arg0 )
		return true
	end )
	f15_arg0:addEventHandler( "scroll_crm", function ( f22_arg0, f22_arg1 )
		local f22_local0 = LUI.FlowManager.GetVisibleMenu()
		f22_local0 = f22_local0.id
		local f22_local1 = f15_arg0.CRMListGrid:GetNumChildren()
		if f22_local0 ~= "CRMContainer" and f22_local0 ~= "CRMPatchNoteInfo" and 1 < f22_local1 then
			local f22_local2 = f15_arg0._currentMessageIndexDatasource:GetValue( f15_arg0._controllerIndex ) or 0
			local f22_local3
			if f22_local1 - 1 < f22_local2 + 1 then
				f22_local3 = 0
			else
				f22_local3 = f22_local2 + 1
			end
			f15_arg0._currentMessageIndexDatasource:SetValue( f15_arg0, f22_local3 )
			local f22_local4 = f15_arg0( f22_arg0 )
			if f22_local4 == nil then
				return 
			end
			f22_arg0.CRMListGrid:SetPosition( {
				y = 0,
				x = f22_local3
			}, true )
			f22_arg0.CRMListGrid:SetTargetColumn( f22_local3, false, false )
			f22_arg0.Pips:UpdateChildren( f22_local3, 0 )
			f22_arg0.MinimizedCount:setText( Engine.CBBHFCGDIC( "LUA_MENU/X_OF_Y", f22_local3 + 1, f22_local1 ) )
			f22_arg0:UpdateActionPrompt( f22_local4 )
		end
	end )
	f15_arg0.messageTimer = LUI.UITimer.new( {
		interval = Dvar.CFHDGABACF( "LPRTSKKKLL" ) * 1000,
		event = {
			name = "send_queued_CRM_message",
			controllerIndex = f15_arg1
		}
	} )
	f15_arg0:addElement( f15_arg0.messageTimer )
	f15_arg0.messageTimer:addEventHandler( "send_queued_CRM_message", function ( f21_arg0, f21_arg1 )
		CRM.SendQueuedMessages()
	end )
	local f15_local2 = LUI.UIBindButton.new()
	f15_local2.id = "selfBindButton"
	f15_arg0:addElement( f15_local2 )
	f15_local2:addEventHandler( "button_right_trigger", function ( f20_arg0, f20_arg1 )
		if f20_arg1.qualifier == "gamepad" then
			f15_arg0( f15_arg0, f20_arg1 )
		end
	end )
	f15_arg0.MouseTrigger:SetHandleMouse( true )
	f15_arg0.MouseTrigger:registerEventHandler( "mouseenter", function ( element, event )
		if not f15_arg0._isMinimized then
			ACTIONS.AnimateSequence( f15_arg0, "MouseFocusedMaximized" )
			Engine.BJDBIAGIDA( SOUND_SETS.default.gainFocus )
		elseif 0 < #f15_arg0._patchNoteData then
			ACTIONS.AnimateSequence( f15_arg0, "MouseFocusedMinimized" )
			Engine.BJDBIAGIDA( SOUND_SETS.default.gainFocus )
		end
	end )
	f15_arg0.MouseTrigger:registerEventHandler( "mouseleave", function ( element, event )
		ACTIONS.AnimateSequence( f15_arg0, "MouseUnfocused" )
	end )
	f15_arg0.MouseTrigger:registerEventHandler( "leftmousedown", function ( element, event )
		
	end )
	f15_arg0.MouseTrigger:registerEventHandler( "leftmouseup", function ( element, event )
		if event.inside then
			f15_arg0( f15_arg0, event )
		end
	end )
end

function CRMMain( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 432 * _1080p, 0, 275 * _1080p )
	self.id = "CRMMain"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local MessageBG = nil
	
	MessageBG = LUI.UIImage.new()
	MessageBG.id = "MessageBG"
	MessageBG:SetRGBFromTable( SWATCHES.Reticles.Black, 0 )
	MessageBG:SetAlpha( 0.5, 0 )
	MessageBG:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -55, _1080p * -27 )
	self:addElement( MessageBG )
	self.MessageBG = MessageBG
	
	local ActionPrompt = nil
	
	ActionPrompt = LUI.UIText.new()
	ActionPrompt.id = "ActionPrompt"
	ActionPrompt:setText( Engine.CBBHFCGDIC( "LUA_MENU/OPEN_CRM_POPUP" ), 0 )
	ActionPrompt:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	ActionPrompt:SetWordWrap( false )
	ActionPrompt:SetAlignment( LUI.Alignment.Right )
	ActionPrompt:SetAnchorsAndPosition( 1, 0, 1, 0, _1080p * -134, _1080p * -7, _1080p * -50, _1080p * -30 )
	self:addElement( ActionPrompt )
	self.ActionPrompt = ActionPrompt
	
	local MessageText = nil
	
	MessageText = LUI.UIStyledText.new()
	MessageText.id = "MessageText"
	MessageText:SetRGBFromTable( SWATCHES.HUD.HUDMain, 0 )
	MessageText:setText( Engine.CBBHFCGDIC( "MENU/NEW" ), 0 )
	MessageText:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	MessageText:SetWordWrap( false )
	MessageText:SetAlignment( LUI.Alignment.Left )
	MessageText:SetOptOutRightToLeftAlignmentFlip( true )
	MessageText:SetAutoScrollStyle( LUI.UIStyledText.AutoScrollStyle.ScrollH )
	MessageText:SetStartupDelay( 2000 )
	MessageText:SetLineHoldTime( 400 )
	MessageText:SetAnimMoveTime( 2000 )
	MessageText:SetAnimMoveSpeed( 150 )
	MessageText:SetEndDelay( 2000 )
	MessageText:SetCrossfadeTime( 1000 )
	MessageText:SetFadeInTime( 300 )
	MessageText:SetFadeOutTime( 300 )
	MessageText:SetMaxVisibleLines( 1 )
	MessageText:SetAnchorsAndPosition( 0, 1, 1, 0, _1080p * 9, _1080p * 224, _1080p * -52, _1080p * -30 )
	self:addElement( MessageText )
	self.MessageText = MessageText
	
	local MinimizedCount = nil
	
	MinimizedCount = LUI.UIText.new()
	MinimizedCount.id = "MinimizedCount"
	MinimizedCount:SetRGBFromTable( SWATCHES.Global.keyColor, 0 )
	MinimizedCount:setText( Engine.CBBHFCGDIC( "LUA_MENU/X_OF_Y" ), 0 )
	MinimizedCount:SetFont( FONTS.GetFont( FONTS.StreakRegular.File ) )
	MinimizedCount:SetWordWrap( false )
	MinimizedCount:SetAlignment( LUI.Alignment.Right )
	MinimizedCount:SetAnchorsAndPosition( 1, 0, 1, 0, _1080p * -185, _1080p * -143, _1080p * -49, _1080p * -31 )
	self:addElement( MinimizedCount )
	self.MinimizedCount = MinimizedCount
	
	local CRMListGrid = nil
	
	CRMListGrid = LUI.UIGrid.new( {
		scrollingThresholdX = 1,
		maxVisibleRows = 1,
		maxVelocity = 5000,
		adjustSizeToContent = false,
		scrollingThresholdY = 1,
		wrapX = true,
		maxVisibleColumns = 1,
		wrapY = false,
		arrowsVerticalOffset = 0,
		buildArrowsLabel = false,
		springCoefficient = 400,
		controllerIndex = f1_local1,
		buildChild = function ()
			return MenuBuilder.BuildRegisteredType( "CRMListItem", {
				controllerIndex = menu
			} )
		end,
		refreshChild = function ( f13_arg0, f13_arg1, f13_arg2 )
			
		end,
		primaryAxis = LUI.DIRECTION.vertical,
		spacingX = _1080p * 0,
		spacingY = _1080p * 0,
		columnWidth = _1080p * 432,
		rowHeight = _1080p * 240,
		horizontalAlignment = LUI.Alignment.Left,
		verticalAlignment = LUI.Alignment.Top
	} )
	CRMListGrid.id = "CRMListGrid"
	CRMListGrid:setUseStencil( false )
	CRMListGrid:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, _1080p * -216, _1080p * 216, _1080p * -285, _1080p * -45 )
	self:addElement( CRMListGrid )
	self.CRMListGrid = CRMListGrid
	
	local Backer = nil
	
	Backer = LUI.UIImage.new()
	Backer.id = "Backer"
	Backer:SetRGBFromInt( 0, 0 )
	Backer:SetAlpha( 0.3, 0 )
	Backer:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -83, _1080p * -54 )
	self:addElement( Backer )
	self.Backer = Backer
	
	local Pips = nil
	
	Pips = LUI.Pips.new( {
		spacing = _1080p * 8,
		direction = LUI.DIRECTION.horizontal,
		alignment = LUI.Alignment.Left,
		buildPip = function ()
			return MenuBuilder.BuildRegisteredType( "Pip", {
				controllerIndex = menu
			} )
		end,
		controllerIndex = f1_local1
	} )
	Pips.id = "Pips"
	Pips:SetAnchorsAndPosition( 0, 1, 1, 0, _1080p * 13, _1080p * 105, _1080p * -71, _1080p * -67 )
	self:addElement( Pips )
	self.Pips = Pips
	
	local SplitScreenWarning = nil
	
	SplitScreenWarning = LUI.UIText.new()
	SplitScreenWarning.id = "SplitScreenWarning"
	SplitScreenWarning:SetRGBFromTable( SWATCHES.genericButton.description, 0 )
	SplitScreenWarning:SetAlpha( 0, 0 )
	SplitScreenWarning:setText( Engine.CBBHFCGDIC( "LUA_MENU/CRM_SPLITSCREEN_WARNING" ), 0 )
	SplitScreenWarning:SetFont( FONTS.GetFont( FONTS.MainRegular.File ) )
	SplitScreenWarning:SetWordWrap( false )
	SplitScreenWarning:SetAlignment( LUI.Alignment.Right )
	SplitScreenWarning:SetAnchorsAndPosition( 1, 0, 1, 0, _1080p * -134, _1080p * -7, _1080p * -299, _1080p * -279 )
	self:addElement( SplitScreenWarning )
	self.SplitScreenWarning = SplitScreenWarning
	
	local Mask = nil
	
	Mask = LUI.UIImage.new()
	Mask.id = "Mask"
	Mask:setImage( RegisterMaterial( "wdg_large_mask" ), 0 )
	Mask:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, _1080p * 215, _1080p * -215, _1080p * -274, _1080p * -39 )
	self:addElement( Mask )
	self.Mask = Mask
	
	local MouseTrigger = nil
	
	MouseTrigger = LUI.UIImage.new()
	MouseTrigger.id = "MouseTrigger"
	MouseTrigger:SetAlpha( 0, 0 )
	MouseTrigger:SetAnchorsAndPosition( 0.5, 0.5, 0, 0, _1080p * -215, _1080p * 215, 0, _1080p * -27 )
	self:addElement( MouseTrigger )
	self.MouseTrigger = MouseTrigger
	
	local HighlightBottom = nil
	
	HighlightBottom = MenuBuilder.BuildRegisteredType( "ButtonHighlightBar", {
		controllerIndex = f1_local1
	} )
	HighlightBottom.id = "HighlightBottom"
	HighlightBottom:SetAlpha( 0, 0 )
	HighlightBottom:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -54, _1080p * -52 )
	self:addElement( HighlightBottom )
	self.HighlightBottom = HighlightBottom
	
	local HighlightTop = nil
	
	HighlightTop = MenuBuilder.BuildRegisteredType( "ButtonHighlightBar", {
		controllerIndex = f1_local1
	} )
	HighlightTop.id = "HighlightTop"
	HighlightTop:SetAlpha( 0, 0 )
	HighlightTop:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -275, _1080p * -273 )
	self:addElement( HighlightTop )
	self.HighlightTop = HighlightTop
	
	local ButtonGlow = nil
	
	ButtonGlow = LUI.UIImage.new()
	ButtonGlow.id = "ButtonGlow"
	ButtonGlow:SetRGBFromTable( SWATCHES.genericButton.backgroundFocus, 0 )
	ButtonGlow:SetAlpha( 0, 0 )
	ButtonGlow:setImage( RegisterMaterial( "button_glow" ), 0 )
	ButtonGlow:Setup9SliceImage( _1080p * 12, _1080p * 12, 0.25, 0.25 )
	ButtonGlow:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * -8, _1080p * 440, _1080p * 214, _1080p * 255 )
	self:addElement( ButtonGlow )
	self.ButtonGlow = ButtonGlow
	
	local f1_local16 = nil
	MinimizedCount:RegisterAnimationSequence( "DefaultSequence", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.DefaultSequence = function ()
		menu:AnimateSequence( "DefaultSequence" )
	end
	
	local f1_local17 = nil
	MinimizedCount:RegisterAnimationSequence( "Minimize", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -426
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * -143
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -48
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * -30
		}
	} )
	Backer:RegisterAnimationSequence( "Minimize", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	Pips:RegisterAnimationSequence( "Minimize", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	SplitScreenWarning:RegisterAnimationSequence( "Minimize", {
		{
			duration = 200,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -79
		},
		{
			duration = 200,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * -59
		}
	} )
	Mask:RegisterAnimationSequence( "Minimize", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -42
		}
	} )
	MouseTrigger:RegisterAnimationSequence( "Minimize", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 253
		},
		{
			duration = 200,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 220
		}
	} )
	self._sequences.Minimize = function ()
		menu:AnimateSequence( "Minimize" )
		menu:AnimateSequence( "Minimize" )
		menu:AnimateSequence( "Minimize" )
		menu:AnimateSequence( "Minimize" )
		menu:AnimateSequence( "Minimize" )
		menu:AnimateSequence( "Minimize" )
	end
	
	local f1_local18 = nil
	ActionPrompt:RegisterAnimationSequence( "Opening", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	MessageText:RegisterAnimationSequence( "Opening", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	Pips:RegisterAnimationSequence( "Opening", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	Mask:RegisterAnimationSequence( "Opening", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -42
		},
		{
			duration = 400,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -275
		}
	} )
	self._sequences.Opening = function ()
		menu:AnimateSequence( "Opening" )
		menu:AnimateSequence( "Opening" )
		menu:AnimateSequence( "Opening" )
		menu:AnimateSequence( "Opening" )
	end
	
	local f1_local19 = nil
	ActionPrompt:RegisterAnimationSequence( "MouseFocusedMaximized", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.genericButton.textFocus
		}
	} )
	MessageText:RegisterAnimationSequence( "MouseFocusedMaximized", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.genericButton.textFocus
		}
	} )
	HighlightBottom:RegisterAnimationSequence( "MouseFocusedMaximized", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	HighlightTop:RegisterAnimationSequence( "MouseFocusedMaximized", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.MouseFocusedMaximized = function ()
		menu:AnimateSequence( "MouseFocusedMaximized" )
		menu:AnimateSequence( "MouseFocusedMaximized" )
		menu:AnimateSequence( "MouseFocusedMaximized" )
		menu:AnimateSequence( "MouseFocusedMaximized" )
	end
	
	local f1_local20 = nil
	ActionPrompt:RegisterAnimationSequence( "MouseUnfocused", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.HUD.HUDMain
		}
	} )
	MessageText:RegisterAnimationSequence( "MouseUnfocused", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.HUD.HUDMain
		}
	} )
	HighlightBottom:RegisterAnimationSequence( "MouseUnfocused", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	HighlightTop:RegisterAnimationSequence( "MouseUnfocused", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	ButtonGlow:RegisterAnimationSequence( "MouseUnfocused", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.MouseUnfocused = function ()
		menu:AnimateSequence( "MouseUnfocused" )
		menu:AnimateSequence( "MouseUnfocused" )
		menu:AnimateSequence( "MouseUnfocused" )
		menu:AnimateSequence( "MouseUnfocused" )
		menu:AnimateSequence( "MouseUnfocused" )
	end
	
	local f1_local21 = nil
	ActionPrompt:RegisterAnimationSequence( "HideButton", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.HideButton = function ()
		menu:AnimateSequence( "HideButton" )
	end
	
	local f1_local22 = nil
	ActionPrompt:RegisterAnimationSequence( "ShowButton", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ShowButton = function ()
		menu:AnimateSequence( "ShowButton" )
	end
	
	local f1_local23 = nil
	Backer:RegisterAnimationSequence( "Maximize", {
		{
			value = 4.6672616413205735E-62,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	Pips:RegisterAnimationSequence( "Maximize", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 200,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	SplitScreenWarning:RegisterAnimationSequence( "Maximize", {
		{
			duration = 200,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -299
		},
		{
			duration = 200,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * -279
		}
	} )
	Mask:RegisterAnimationSequence( "Maximize", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -274
		}
	} )
	MouseTrigger:RegisterAnimationSequence( "Maximize", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Top
		}
	} )
	self._sequences.Maximize = function ()
		menu:AnimateSequence( "Maximize" )
		menu:AnimateSequence( "Maximize" )
		menu:AnimateSequence( "Maximize" )
		menu:AnimateSequence( "Maximize" )
		menu:AnimateSequence( "Maximize" )
	end
	
	local f1_local24 = nil
	SplitScreenWarning:RegisterAnimationSequence( "SplitScreenWarningFlash", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.SplitScreenWarningFlash = function ()
		menu:AnimateSequence( "SplitScreenWarningFlash" )
	end
	
	local f1_local25 = nil
	MessageBG:RegisterAnimationSequence( "MouseFocusedMinimized", {
		{
			value = 5.29462817E-315,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	MessageText:RegisterAnimationSequence( "MouseFocusedMinimized", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.RGB,
			value = SWATCHES.genericButton.textFocus
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	ButtonGlow:RegisterAnimationSequence( "MouseFocusedMinimized", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 439
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 212
		}
	} )
	self._sequences.MouseFocusedMinimized = function ()
		menu:AnimateSequence( "MouseFocusedMinimized" )
		menu:AnimateSequence( "MouseFocusedMinimized" )
		menu:AnimateSequence( "MouseFocusedMinimized" )
	end
	
	CRMListGrid:AddScrollbar( Pips )
	f0_local0( self, f1_local1, controller )
	ACTIONS.AnimateSequence( self, "DefaultSequence" )
	ACTIONS.AnimateSequence( self, "Opening" )
	return self
end

MenuBuilder.registerType( "CRMMain", CRMMain )
LockTable( _M )
