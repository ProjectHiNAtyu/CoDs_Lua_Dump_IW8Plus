-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:02
SPSharedUtils = SPSharedUtils or {}
SPSharedUtils.SPDifficultySelectMenu = "SPDifficultySelectMenu"
SPSharedUtils.GetCampaignMenuName = function ()
	if CONDITIONS.IsMenuInStack( "MainMenuOffline" ) then
		return "CampaignMenuOffline"
	else
		return "CampaignMenu"
	end
end

SPSharedUtils.MissionState = {
	LOCKED = "locked",
	IN_PROGRESS = "incomplete",
	COMPLETE = "complete"
}
SPSharedUtils.Difficulties = {
	HARDENED = 3,
	REALISM = 5,
	REGULAR = 2,
	VETERAN = 4,
	RECRUIT = 1
}
SPSharedUtils.DifficultyNames = {
	nil,
	0xC3E9A0B2A23FA94,
	0x30560AD95C37C92,
	0xF76108AF62105E9,
	0x4FC854B1E29DD2D,
	0x6E8D386E81B4635
}
SPSharedUtils.DifficultyDescriptions = {
	nil,
	0xC43E7A33EBA365C,
	0xE836ED656C39042,
	0x16D7095FE23DBE3,
	0xB5CF632C2C57B97,
	0x189CD75DAEC931F
}
SPSharedUtils.DifficultyImages = {
	nil,
	"icon_difficulty_recruit",
	"icon_difficulty_regular",
	"icon_difficulty_hardened",
	"icon_difficulty_veteran",
	"icon_difficulty_realism"
}
SPSharedUtils.DifficultyImagesSmall = {
	nil,
	"icon_difficulty_recruit_sm",
	"icon_difficulty_regular_sm",
	"icon_difficulty_hardened_sm",
	"icon_difficulty_veteran_sm",
	"icon_difficulty_realism_sm"
}
SPSharedUtils.KEYPAD_OMNVAR_STATE = {
	On = 1,
	Off = 0,
	Fail = 3,
	Success = 2
}
SPSharedUtils.CampaignWorldMapWest = "sp_map_campaign_world_map_west"
SPSharedUtils.CampaignWorldMapEast = "sp_map_campaign_world_map_east"
SPSharedUtils.CampaignMapSuperRegions = {
	EAST = "East",
	WEST = "West"
}
SPSharedUtils.DefaultCampaignMapRegion = "mexico"
SPSharedUtils.CampaignMapRegions = {
	NETHERLANDS = "netherlands",
	CHICAGO = "chicago",
	MEXICO = "mexico",
	SPAIN = "spain",
	URZIKSTAN = "urzikstan",
	GULF = "gulf",
	REPUBLIC = "republic"
}
SPSharedUtils.CampaignMapNodeRegion = {
	NORTH_AMERICA = "north_america",
	EUROPE = "europe",
	MIDDLE_EAST = "middle_east",
	MEXICO = "mexico"
}
SPSharedUtils.CampaignMapRegionData = {
	[SPSharedUtils.CampaignMapRegions.MEXICO] = {
		ZOOM_MAP_IMAGE = 0x63236275692AE2,
		MAP_POSITION_ANIM = "Mexico",
		IS_ZOOM_MAP = true,
		REGION_NAME = SPSharedUtils.CampaignMapRegions.MEXICO,
		SUPER_REGION = SPSharedUtils.CampaignMapSuperRegions.WEST,
		NODE_REGION = SPSharedUtils.CampaignMapNodeRegion.MEXICO,
		ZOOM_MAP_TITLE = Engine[0xED84C33EC5F01EA]( 0x5FE23F30714665D )
	},
	[SPSharedUtils.CampaignMapRegions.GULF] = {
		MAP_POSITION_ANIM = "Gulf",
		REGION_NAME = SPSharedUtils.CampaignMapRegions.GULF,
		SUPER_REGION = SPSharedUtils.CampaignMapSuperRegions.WEST,
		NODE_REGION = SPSharedUtils.CampaignMapNodeRegion.NORTH_AMERICA
	},
	[SPSharedUtils.CampaignMapRegions.CHICAGO] = {
		MAP_POSITION_ANIM = "Chicago",
		REGION_NAME = SPSharedUtils.CampaignMapRegions.CHICAGO,
		SUPER_REGION = SPSharedUtils.CampaignMapSuperRegions.WEST,
		NODE_REGION = SPSharedUtils.CampaignMapNodeRegion.NORTH_AMERICA
	},
	[SPSharedUtils.CampaignMapRegions.NETHERLANDS] = {
		MAP_POSITION_ANIM = "Netherlands",
		REGION_NAME = SPSharedUtils.CampaignMapRegions.NETHERLANDS,
		SUPER_REGION = SPSharedUtils.CampaignMapSuperRegions.EAST,
		NODE_REGION = SPSharedUtils.CampaignMapNodeRegion.EUROPE
	},
	[SPSharedUtils.CampaignMapRegions.SPAIN] = {
		MAP_POSITION_ANIM = "Spain",
		REGION_NAME = SPSharedUtils.CampaignMapRegions.SPAIN,
		SUPER_REGION = SPSharedUtils.CampaignMapSuperRegions.EAST,
		NODE_REGION = SPSharedUtils.CampaignMapNodeRegion.EUROPE
	},
	[SPSharedUtils.CampaignMapRegions.URZIKSTAN] = {
		SUPER_REGION_POS_ELEMENT = "UrzikstanFocus",
		MAP_POSITION_ANIM = "MiddleEast",
		IS_ZOOM_MAP = true,
		ZOOM_MAP_IMAGE = 0x6B3D82A0DBEEC8A,
		REGION_NAME = SPSharedUtils.CampaignMapRegions.URZIKSTAN,
		SUPER_REGION = SPSharedUtils.CampaignMapSuperRegions.EAST,
		NODE_REGION = SPSharedUtils.CampaignMapNodeRegion.MIDDLE_EAST,
		ZOOM_MAP_TITLE = Engine[0xED84C33EC5F01EA]( 0xB13E6056053E21D )
	},
	[SPSharedUtils.CampaignMapRegions.REPUBLIC] = {
		SUPER_REGION_POS_ELEMENT = "UrzikstanFocus",
		MAP_POSITION_ANIM = "MiddleEast",
		IS_ZOOM_MAP = true,
		ZOOM_MAP_IMAGE = 0x32D6878172DE3B5,
		REGION_NAME = SPSharedUtils.CampaignMapRegions.REPUBLIC,
		SUPER_REGION = SPSharedUtils.CampaignMapSuperRegions.EAST,
		NODE_REGION = SPSharedUtils.CampaignMapNodeRegion.MIDDLE_EAST,
		ZOOM_MAP_TITLE = Engine[0xED84C33EC5F01EA]( 0xA34F5E5869BD17A )
	}
}
SPSharedUtils.CachedDungeonRewardLoot = {}
SPSharedUtils.SetDifficulty = function ( f61_arg0, f61_arg1 )
	if 0 < f61_arg1 and f61_arg1 <= Table.CountKeys( SPSharedUtils.Difficulties ) and SPSharedUtils.IsSPGametype() then
		Dvar[0x2414681ECAB880F]( 0x46C8A551FF66D53, f61_arg1 - 1 )
		if CONDITIONS.InFrontend() then
			Engine[0xB81A5136C5503E4]( "profile_difficultySave " .. f61_arg1 - 1 )
			if f61_arg0 ~= nil then
				local f61_local0 = PLAYER_DATA.IO( f61_arg0, CoD.ProgressionBlob.Gold, CoD.PlayMode.SP )
				f61_local0.spData.currentGameskill:set( f61_arg1 )
			end
			Engine[0x7C75E608EA39B5C]( "updategamerprofile" )
		end
	end
end

SPSharedUtils.GetCurrentDifficultyIndex = function ()
	if SPSharedUtils.IsSPGametype() then
		return Dvar[0x22EAAB59AA27E9B]( 0x46C8A551FF66D53 ) + 1
	else
		
	end
end

SPSharedUtils.GetCurrentDifficulty = function ()
	return Engine[0xED84C33EC5F01EA]( SPSharedUtils.DifficultyNames[SPSharedUtils.GetCurrentDifficultyIndex()] )
end

SPSharedUtils.SetRealismHUDCallback = function ( f57_arg0, f57_arg1, f57_arg2 )
	local f57_local0 = LUI.DataSourceFromOmnvar.new( "ui_realism_hud" )
	if f57_arg2 then
		f57_arg0.realismHUDSubscription = f57_arg0:SubscribeToModel( f57_local0:GetModel( f57_arg1 ), function ( f58_arg0 )
			f57_arg0( DataModel[0x614D394F6F9A18D]( f58_arg0 ) )
		end )
	elseif f57_arg0.realismHUDSubscription then
		f57_arg0:UnsubscribeFromModel( f57_arg0.realismHUDSubscription )
		f57_arg0.realismHUDSubscription = nil
	end
end

SPSharedUtils.GetUnpackedKeypadData = function ( f56_arg0 )
	local f56_local0, f56_local1 = nil
	local f56_local2 = {}
	local f56_local3 = DataSources.inGame.HUD.overlay.keypadPackedData:GetValue( f56_arg0 )
	f56_local2.state = CoD.ExtractBitsFromBitPositionInValue( f56_local3, 2, 1 )
	f56_local2.codeLength = CoD.ExtractBitsFromBitPositionInValue( f56_local3, 4, 3 )
	return f56_local2
end

SPSharedUtils.OpenCampaignLoadingPopup = function ( f55_arg0, f55_arg1 )
	LUI.FlowManager.RequestPopupMenu( nil, "CampaignLoadingScreen", true, f55_arg0, false, f55_arg1 )
end

SPSharedUtils.OpenResumeOrRestartPopup = function ( f54_arg0, f54_arg1, f54_arg2 )
	LUI.FlowManager.RequestPopupMenu( f54_arg0, "ResumeOrRestartPopup", false, f54_arg1, false, {
		controllerIndex = f54_arg1,
		mapName = f54_arg2
	} )
end

SPSharedUtils.StartMap = function ( f51_arg0, f51_arg1, f51_arg2, f51_arg3 )
	Engine[0x74EBB8771B4D075]()
	Dvar[0xE3CB005036E0C0F]( 0xCB00B8C1F5FF522, "" )
	if not String.IsNilOrEmpty( f51_arg1 ) then
		SPSharedUtils.OpenCampaignLoadingPopup( f51_arg0, {
			conditionFunc = function ()
				return SPSharedUtils.IsReadyToLoadCampaignMap()
			end,
			onLoadCompleteFunc = function ()
				local f52_local0 = SPSharedUtils.IsMapCP( f51_arg0 )
				SPSharedUtils.SetupForLoadingCampaignMissions()
				if f51_arg0 == true then
					Dvar[0x8EA06EEDB58D872]( 0x14E40D42354B411, true )
				else
					Dvar[0x8EA06EEDB58D872]( 0x14E40D42354B411, false )
				end
				if f52_local0 then
					Dvar[0x8EA06EEDB58D872]( 0x4B2CCC04FDC8D, f51_arg0 or false )
					LUI.FlowManager.SetGameModeKey( Enum[0xAC7E3CE067D9A9F][0x8A23E07B549F9E6] )
					GameModesUtils.StartGameMode( Enum[0xAC7E3CE067D9A9F][0x8A23E07B549F9E6] )
					Engine[0x7C75E608EA39B5C]( "map " .. f51_arg0 )
				else
					Engine[0x7C75E608EA39B5C]( "spmap " .. f51_arg0 )
				end
				local f52_local1
				if f52_local0 then
					f52_local1 = f52_local0
				else
					f52_local1 = f51_arg0
				end
				if not f52_local1 then
					local f52_local2 = MapInfo.GetLoadingMovieName( f51_arg0 )
					if not LUI.StringIsNilOrEmpty( f52_local2 ) then
						Engine[0x433043D1F47DE58]( BitwiseOperators.bnot( 2 ) )
						Engine[0xFCF332AA8AC9B0F]( f52_local2, VideoPlaybackFlags.PLAY_THROUGH_SHUTDOWN + VideoPlaybackFlags.FILLER_AFTER_FINISH )
					else
						
					end
				end
			end
		} )
	else
		
	end
end

local f0_local0 = function ( f50_arg0 )
	local f50_local0 = SPSharedUtils.GetCurrentMission( f50_arg0 )
	if SPSharedUtils.IsMapCP( f50_local0 ) then
		SPSharedUtils.StartMap( f50_arg0, f50_local0, true )
	else
		Engine[0x7C75E608EA39B5C]( "profile_difficultyLoad" )
		Engine[0x7C75E608EA39B5C]( "loadgame_continue" )
		Engine[0x7C75E608EA39B5C]( "updategamerprofile" )
	end
	Engine[0x433043D1F47DE58]()
	Engine[0xFCF332AA8AC9B0F]( "default", VideoPlaybackFlags.LOOP + VideoPlaybackFlags.PLAY_THROUGH_SHUTDOWN )
end

SPSharedUtils.CanResumeGame = function ( f49_arg0 )
	if SPSharedUtils.IsMapCP( SPSharedUtils.GetCurrentMission( f49_arg0 ) ) then
		return true
	else
		return Engine[0xC436AD5B92B0408]( f49_arg0 )
	end
end

SPSharedUtils.ResumeRequiresRestart = function ( f48_arg0 )
	if SPSharedUtils.IsMapCP( SPSharedUtils.GetCurrentMission( f48_arg0 ) ) then
		return false
	else
		return Engine[0x2488F105C00BC65]( f48_arg0 )
	end
end

SPSharedUtils.ResumeMission = function ( f45_arg0, f45_arg1 )
	if SPSharedUtils.CanResumeGame( f45_arg1 ) then
		Engine[0x74EBB8771B4D075]()
		Dvar[0xE3CB005036E0C0F]( 0xCB00B8C1F5FF522, "" )
		SPSharedUtils.OpenCampaignLoadingPopup( f45_arg1, {
			conditionFunc = function ()
				return SPSharedUtils.IsReadyToLoadCampaignMap()
			end,
			onLoadCompleteFunc = function ()
				f45_arg0( f45_arg0 )
			end
		} )
	end
end

SPSharedUtils.GetCampaignMapRegionData = function ( f44_arg0 )
	local f44_local0 = SPSharedUtils.CampaignMapRegionData[f44_arg0]
	if not f44_local0 then
		LUI.FlowManager.RequestDevErrorPopup( "SPSharedUtils.lua", f44_arg0 .. " not found in SPSharedUtils.CampaignMapRegionData, defaulting to " .. SPSharedUtils.DefaultCampaignMapRegion )
		f44_local0 = SPSharedUtils.CampaignMapRegionData[SPSharedUtils.DefaultCampaignMapRegion]
	end
	return f44_local0
end

SPSharedUtils.GetFirstMap = function ()
	local f43_local0 = ""
	if 0 < Lobby[0xF14659C6AA6180F]() then
		f43_local0 = MapInfo.BundleGetName( Game[0x16A8B517C8280EA]( 0 ) )
	else
		
	end
	return f43_local0
end

SPSharedUtils.GetCurrentMission = function ( f42_arg0 )
	local f42_local0 = PLAYER_DATA.IO( f42_arg0, CoD.ProgressionBlob.Gold, CoD.PlayMode.SP )
	return f42_local0.spData.currentMission:get()
end

SPSharedUtils.IsMapIndexCP = function ( f41_arg0 )
	local f41_local0 = false
	if f41_arg0 and 0 < Lobby[0xF14659C6AA6180F]() then
		f41_local0 = MapInfo.BundleIsNontraditionalMission( Game[0x16A8B517C8280EA]( f41_arg0 ) )
	end
	return f41_local0
end

SPSharedUtils.IsMapCP = function ( f40_arg0 )
	return SPSharedUtils.IsMapIndexCP( Game[0x6406A9ED460225D]( f40_arg0 ) )
end

SPSharedUtils.GetLevelName = function ( f39_arg0 )
	return Engine[0xED84C33EC5F01EA]( StringTable[0x2DCF0973239E909]( MapInfo.spLevels.GetFile(), MapInfo.spLevels.cols.ref, f39_arg0, MapInfo.spLevels.cols.string ) )
end

SPSharedUtils.GetLevelImage = function ( f38_arg0 )
	return StringTable[0x2DCF0973239E909]( MapInfo.spLevels.GetFile(), MapInfo.spLevels.cols.ref, f38_arg0, MapInfo.spLevels.cols.image )
end

SPSharedUtils.IsLevelInFileSystem = function ( f37_arg0 )
	if Dvar[0x9E5BE3B4BBA4E0E]( 0xAB906B864429B12 ) then
		return Engine[0x16276045DCB1E41]( f37_arg0 )
	else
		return true
	end
end

SPSharedUtils.IsReadyToLoadCampaignMap = function ()
	return Engine[0xB47EFEF093F744D]()
end

SPSharedUtils.IsShaderPreloadingComplete = function ()
	if Engine[0x575E9C5B9AAB6F4]() then
		local f35_local0
		if ShaderUpload[0x235D0443F9C8321]() then
			f35_local0 = not ShaderUpload[0x11014FCF5F64C7B]()
		else
			f35_local0 = true
		end
		return f35_local0
	else
		return true
	end
end

SPSharedUtils.GetHighestDifficultyForLevel = function ( f34_arg0, f34_arg1 )
	local f34_local0 = SPSharedUtils.DifficultyNames[Engine[0xB336EC20F262777]( Game[0x6406A9ED460225D]( f34_arg0 ), f34_arg1 )]
	if f34_local0 and f34_local0 ~= "" then
		return f34_local0
	else
		return ""
	end
end

SPSharedUtils.GetHighestCollateralRankForLevel = function ( f33_arg0, f33_arg1 )
	local f33_local0 = PLAYER_DATA.IO( f33_arg1, CoD.ProgressionBlob.Gold, CoD.PlayMode.SP )
	f33_local0 = f33_local0.spData.civiliansKilledGradeBest
	local f33_local1 = f33_local0[f33_arg0]
	if f33_local1 then
		f33_local1 = f33_local0[f33_arg0]:get()
	end
	local f33_local2 = {
		nil,
		0x888F33A68E737F1,
		0x888F13A68E7348B,
		0x888F63A68E73D0A,
		0x888F73A68E73EBD,
		0x888F43A68E739A4
	}
	if f33_local1 and 0 <= f33_local1 and f33_local1 < #f33_local2 then
		return f33_local2[f33_local1 + 1]
	else
		return ""
	end
end

SPSharedUtils.GetMissionStateForLevel = function ( f32_arg0, f32_arg1 )
	local f32_local0 = PLAYER_DATA.IO( f32_arg1, CoD.ProgressionBlob.Gold, CoD.PlayMode.SP )
	f32_local0 = f32_local0.spData.missionStateData
	local f32_local1 = f32_local0[f32_arg0]
	if f32_local1 then
		f32_local1 = f32_local0[f32_arg0]:get()
	end
	return f32_local1
end

SPSharedUtils.IsMissionComplete = function ( f31_arg0, f31_arg1 )
	return SPSharedUtils.GetMissionStateForLevel( f31_arg0, f31_arg1 ) == SPSharedUtils.MissionState.COMPLETE
end

SPSharedUtils.IsFirstPlaythrough = function ( f30_arg0 )
	return SPSharedUtils.GetMissionStateForLevel( SPSharedUtils.GetFirstMap(), f30_arg0 ) == SPSharedUtils.MissionState.LOCKED
end

SPSharedUtils.GetMPRewardForCampaignMission = function ( f29_arg0, f29_arg1 )
	local f29_local0 = GAMEMODE_SCRIPTBUNDLE_UTILS.GetCampaignMPRewardsTable()
	local f29_local1 = {}
	if f29_local0 then
		for f29_local5, f29_local6 in ipairs( f29_local0 ) do
			if f29_local6[0xA52B5700033C38A] == f29_arg0 then
				table.insert( f29_local1, f29_local6 )
			end
		end
	end
	return f29_local1
end

SPSharedUtils.GetDungeonRewards = function ( f28_arg0, f28_arg1 )
	if not CONDITIONS.IsThirdGameMode() and f28_arg0 and not Table.IsNilOrEmpty( SPSharedUtils.CachedDungeonRewardLoot[f28_arg0] ) then
		return SPSharedUtils.CachedDungeonRewardLoot[f28_arg0]
	end
	local f28_local0 = {}
	local f28_local1 = {}
	local f28_local2 = PLAYER_DATA.IO( f28_arg1, CoD.ProgressionBlob.Gold, CoD.PlayMode.SP )
	for f28_local6, f28_local7 in ipairs( f28_local2.sandboxInventoryData[f28_arg0].SboxItems ) do
		local f28_local8 = f28_local7.itemID:get()
		if f28_local8 ~= 0 then
			f28_local1[f28_local8] = {
				isUnlocked = f28_local7.unlockState:get() == 1,
				isNewUnlock = f28_local7.isNewUnlock:get() == 1,
				itemType = LOOT.GetTypeForID( f28_local8 ),
				itemRef = LOOT.GetItemRef( f28_local8 ),
				itemID = f28_local8
			}
		end
	end
	for f28_local7, f28_local8 in ipairs( MapInfo.GetDungeonRewards( f28_arg0 ) ) do
		if not f28_local8[0x3D8BD2B211DB6CC] then
			local f28_local9 = nil
			local f28_local10 = false
			local f28_local11 = false
			local f28_local12 = f28_local8[0x55F116BF695C8F6]
			local f28_local13 = f28_local8[0x636F88BF5D83896]
			if not String.IsNilOrEmpty( f28_local8[0xCEB9BEC80D423D4] ) then
				f28_local9 = LOOT.GetItemIDFromRef( f28_local8[0xCEB9BEC80D423D4] )
			elseif not String.IsNilOrEmpty( f28_local8[0x931D28F37519E57] ) then
				f28_local9 = LOOT.GetItemIDFromRef( f28_local8[0x931D28F37519E57] )
			elseif not String.IsNilOrEmpty( f28_local8[0x9E1B40F90E6005C] ) then
				f28_local9 = LOOT.GetItemIDFromRef( f28_local8[0x9E1B40F90E6005C] )
				f28_local11 = true
			elseif not String.IsNilOrEmpty( f28_local8[0xD708B40E957634] ) then
				local f28_local14 = ""
				if string.sub( f28_local8[0xD708B40E957634], string.len( f28_local8[0xD708B40E957634] ) - 2 ) == "_cp" then
					f28_local14 = WEAPON.StripSuffix( f28_local8[0xD708B40E957634], "_cp" )
				else
					f28_local14 = WEAPON.StripSuffix( f28_local8[0xD708B40E957634], "_mp" )
				end
				local f28_local15 = SUPER.GetBundleByRef( f28_local14 )
				f28_local9 = LOOT.GetItemIDFromRef( f28_local14 )
				f28_local10 = true
			end
			if f28_local9 ~= 0 then
				local f28_local14 = f28_local1[f28_local9]
				if f28_local14 then
					table.insert( f28_local0, {
						isUnlocked = f28_local14.isUnlocked,
						isNewUnlock = f28_local14.isNewUnlock,
						isSuper = f28_local10,
						isBlueprint = f28_local11,
						itemType = f28_local14.itemType,
						itemRef = f28_local14.itemRef,
						itemID = f28_local14.itemID,
						itemName = f28_local14.itemName,
						itemDisplayName = f28_local12,
						itemIcon = f28_local13
					} )
				else
					table.insert( f28_local0, {
						isUnlocked = false,
						isNewUnlock = true,
						isSuper = f28_local10,
						isBlueprint = f28_local11,
						itemType = LOOT.GetTypeForID( f28_local9 ),
						itemRef = LOOT.GetItemRef( f28_local9 ),
						itemID = f28_local9,
						itemDisplayName = f28_local12,
						itemIcon = f28_local13
					} )
				end
			end
		end
	end
	SPSharedUtils.CachedDungeonRewardLoot[f28_arg0] = f28_local0
	return SPSharedUtils.CachedDungeonRewardLoot[f28_arg0]
end

SPSharedUtils.GetDungeonRewardCounts = function ( f27_arg0, f27_arg1 )
	local f27_local0 = 0
	local f27_local1 = 0
	local f27_local2 = 0
	local f27_local3 = 0
	for f27_local8, f27_local9 in ipairs( SPSharedUtils.GetDungeonRewards( f27_arg0, f27_arg1 ) ) do
		if LOOT.GetTypeForID( f27_local9.itemID ) == LOOT.itemTypes.PERK then
			local f27_local7
			if f27_local9.isUnlocked then
				f27_local7 = 1
			else
				f27_local7 = 0
			end
			f27_local2 = f27_local2 + f27_local7
			f27_local3 = f27_local3 + 1
		end
		local f27_local7
		if f27_local9.isUnlocked then
			f27_local7 = 1
		else
			f27_local7 = 0
		end
		f27_local0 = f27_local0 + f27_local7
		f27_local1 = f27_local1 + 1
	end
	return f27_local0, f27_local1, f27_local2, f27_local3
end

SPSharedUtils.SetupForLoadingCampaignMissions = function ()
	if CONDITIONS.IsJup() then
		Dvar[0x8EA06EEDB58D872]( 0x85EF1ED1D39D3A3, true )
		Dvar[0x8EA06EEDB58D872]( 0x4CCAAF76E4E0BA8, true )
		Dvar[0x8EA06EEDB58D872]( 0x62400405F9F3C0B, false )
		local f26_local0 = Dvar[0x2414681ECAB880F]
		local f26_local1 = 0xCF4B1062ABB0F5
		local f26_local2
		if Dvar[0x9E5BE3B4BBA4E0E]( 0x217E1CFA60CFFFC ) then
			f26_local2 = 1
		else
			f26_local2 = 0
		end
		f26_local0( f26_local1, f26_local2 )
		Dvar[0x8EA06EEDB58D872]( 0x217E1CFA60CFFFC, false )
	end
end

SPSharedUtils.OpenAntiCheatWarningPopup = function ( f25_arg0 )
	local f25_local0 = 0
	local f25_local1 = Lobby[0xF14659C6AA6180F]() - 1
	for f25_local2 = 0, f25_local1, 1 do
		if SPSharedUtils.GetMissionStateForLevel( MapInfo.BundleGetName( Game[0x16A8B517C8280EA]( f25_local2 ) ), f25_arg0 ) == SPSharedUtils.MissionState.LOCKED then
			break
		end
		f25_local0 = f25_local2
	end
	local f25_local3 = MapInfo.BundleGetUnlocalizedDisplayName( Game[0x16A8B517C8280EA]( f25_local0 ) )
	if not Dvar[0x9E5BE3B4BBA4E0E]( 0x244E1B9C23A167C ) then
		Engine[0xBD88E4AB0091920]( PauseReason.SAVE_DATA_ERROR )
		LUI.FlowManager.RequestPopupMenu( nil, "campaign_mode_anticheat_warning_popup", true, f25_arg0, false, {
			lastUnlockedMission = f25_local3
		} )
	end
end

SPSharedUtils.UnlockAllMissions = function ()
	if CONDITIONS[0x2DA54CF5D6B7F02]() then
		return true
	else
		return SPSharedUtils.IsMissionCheatEnabled()
	end
end

SPSharedUtils.IsMissionCheatEnabled = function ()
	return Dvar[0x9E5BE3B4BBA4E0E]( 0x8B8E25BB75B206D )
end

SPSharedUtils.IsRealismDifficultyUnlocked = function ( f22_arg0 )
	local f22_local0 = SPSharedUtils.UnlockAllMissions()
	local f22_local1 = SPSharedUtils.AreAllMissionsCompleted( f22_arg0 )
	if not f22_local1 then
		f22_local1 = f22_local0
	end
	return f22_local1
end

SPSharedUtils.GetAllMissionRefs = function ( f21_arg0 )
	local f21_local0 = ""
	local f21_local1 = Lobby[0xF14659C6AA6180F]() - 1
	local f21_local2 = {}
	for f21_local3 = 0, f21_local1, 1 do
		table.insert( f21_local2, MapInfo.BundleGetName( Game[0x16A8B517C8280EA]( f21_local3 ) ) )
	end
	return f21_local2
end

SPSharedUtils.IsCinematicsMenuUnlocked = function ( f20_arg0 )
	if CONDITIONS.IsFirstTimeUserTest() then
		return false
	elseif SPSharedUtils.UnlockAllMissions() then
		return true
	end
	local f20_local0 = Game[0x83E0D59EFF44E21]()
	local f20_local1 = Engine[0x6093D047200548]( f20_local0[0xB58417A0FA991CF] )
	for f20_local5, f20_local6 in ipairs( f20_local1[0xB58417A0FA991CF] ) do
		local f20_local7 = Engine[0x6093D047200548]( f20_local6[0xBB93BEE689A4D0E] )
		if SPSharedUtils.GetMissionStateForLevel( f20_local7[0x8E1652E8174F2D], f20_arg0 ) == SPSharedUtils.MissionState.COMPLETE then
			return true
		end
	end
	return false
end

SPSharedUtils.IsResumeGameAvailable = function ( f19_arg0 )
	local f19_local0 = SPSharedUtils.GetCurrentMission( f19_arg0 )
	local f19_local1
	if String.IsNilOrEmpty( f19_local0 ) or f19_local0 == "none" then
		f19_local1 = false
	else
		f19_local1 = true
	end
	return f19_local1
end

SPSharedUtils.AreAllMissionsCompleted = function ( f18_arg0 )
	local f18_local0 = SPSharedUtils.GetAllMissionRefs( f18_arg0 )
	local f18_local1 = 0
	for f18_local5, f18_local6 in pairs( f18_local0 ) do
		if SPSharedUtils.GetMissionStateForLevel( f18_local6, f18_arg0 ) == SPSharedUtils.MissionState.COMPLETE then
			f18_local1 = f18_local1 + 1
		end
	end
	return f18_local1 == #f18_local0
end

SPSharedUtils.QuitToFrontend = function ()
	Dvar[0x8EA06EEDB58D872]( 0x60D23F49860F21, true )
	Engine[0x7C75E608EA39B5C]( "disconnect" )
	PreGame.EndDuckAudio()
	Engine[0x433043D1F47DE58]()
end

SPSharedUtils.OpenSPExitPopup = function ( f12_arg0 )
	local f12_local0 = {
		defaultFocusIndex = 0,
		title = Engine[0xED84C33EC5F01EA]( 0xE6240831CCA64A4 ),
		message = Engine[0xED84C33EC5F01EA]( 0x9B3090B2F1932ED ),
		controllerIndex = f12_arg0,
		buttons = {
			{
				label = Engine[0xED84C33EC5F01EA]( 0xBD72839AC663B35 ),
				action = function ( f15_arg0, f15_arg1 )
					CROSS_LAUNCH.AttemptCrossLaunch( f15_arg1, CROSS_LAUNCH.GAME_IDS.CODHQ, CROSS_LAUNCH.NONE_DEEPLINK, {
						failCallback = function ()
							if Engine[0xBBF0609667DBEA]() then
								LUI.FlowManager.RequestAutomaticNavigation( PartyUIRoot.MAIN_MENU )
							else
								LUI.FlowManager.RequestRestoreMenu( "MainMenuOffline", nil, f15_arg0, true )
							end
						end
					} )
				end
			},
			{
				label = Engine[0xED84C33EC5F01EA]( 0x78C2C5FE58603AC ),
				action = function ( f14_arg0, f14_arg1 )
					
				end
			}
		}
	}
	if Engine[0x575E9C5B9AAB6F4]() then
		table.insert( f12_local0.buttons, {
			label = Engine[0xED84C33EC5F01EA]( 0x4E76830223A336F ),
			action = function ( f13_arg0, f13_arg1 )
				Engine[0xDEE6107B26F8BB6]()
			end
		} )
	end
	LUI.FlowManager.RequestPopupMenu( nil, "PopupMessageAndButtons", true, f12_arg0, false, f12_local0 )
end

SPSharedUtils.GetSPEarlyAccessGameID = function ()
	return Dvar[0x54084D7CA2317BB]( 0x685D1523BDF1506 )
end

SPSharedUtils.IsInSPExecutable = function ()
	return Engine[0x2F1BE26DE878DAF]()
end

SPSharedUtils.IsSPGametype = function ()
	local f9_local0 = CONDITIONS.IsSingleplayer()
	if not f9_local0 then
		f9_local0 = CONDITIONS.IsDungeonsGameType()
	end
	return f9_local0
end

SPSharedUtils.ShouldAlwaysAutoNavigateToSPMenu = function ()
	local f8_local0 = Engine[0x2F1BE26DE878DAF]()
	if f8_local0 then
		f8_local0 = Dvar[0x9E5BE3B4BBA4E0E]( 0x33A64EA363B23A2 )
	end
	return f8_local0
end

SPSharedUtils.AutoNavigateToSPMenu = function ()
	if Engine[0xF2C01B35A08736B]() then
		LUI.FlowManager.RequestAutomaticNavigation( PartyUIRoot.SP_MAIN_MENU )
	else
		LUI.FlowManager.RequestAutomaticNavigation( PartyUIRoot.SP_MAIN_MENU_OFFLINE )
	end
end

SPSharedUtils.OpenDifficultySelectMenu = function ( f4_arg0, f4_arg1, f4_arg2 )
	local f4_local0 = {}
	for f4_local6, f4_local7 in ipairs( SPSharedUtils.DifficultyNames ) do
		if f4_local6 > SPSharedUtils.Difficulties.VETERAN then
			
		else
			
		end
		local f4_local4 = Engine[0xED84C33EC5F01EA]( f4_local7 )
		local f4_local5 = Engine[0xED84C33EC5F01EA]( SPSharedUtils.DifficultyDescriptions[f4_local6] )
		table.insert( f4_local0, {
			label = f4_local4,
			action = function ( f6_arg0, f6_arg1 )
				SPSharedUtils.SetDifficulty( f4_arg0, f4_arg0 )
				if CONDITIONS.InFrontend() then
					SPSharedUtils.StartMap( f4_arg0, f4_arg0, false, f4_arg0 )
				else
					ACTIONS.CloseAllMenus( f6_arg0 )
				end
			end,
			buttonOver = function ( f5_arg0, f5_arg1, f5_arg2 )
				f5_arg0._popup.Message:setText( Engine[0xED84C33EC5F01EA]( 0x1CD1E825D753521, ToUpperCase( f4_arg0 ), f4_arg0 ) )
			end
		} )
	end
	f4_local1 = SPSharedUtils.GetCurrentDifficultyIndex()
	LUI.FlowManager.RequestPopupMenu( nil, "PopupMessageAndButtons", false, f4_arg0, false, {
		messageContainerHeight = 20,
		title = Engine[0xED84C33EC5F01EA]( 0x3A7AB5EF2145D99 ),
		message = Engine[0xED84C33EC5F01EA]( 0x1CD1E825D753521, ToUpperCase( Engine[0xED84C33EC5F01EA]( SPSharedUtils.DifficultyNames[f4_local1] ) ), Engine[0xED84C33EC5F01EA]( SPSharedUtils.DifficultyDescriptions[f4_local1] ) ),
		buttons = f4_local0,
		defaultFocusIndex = f4_local1
	}, nil, true )
end

SPSharedUtils.GetSPProgressionTransferPopupOptions = function ( f1_arg0 )
	return {
		defaultFocusIndex = 0,
		noBackButton = true,
		buttonsClosePopup = true,
		cancelClosesPopup = false,
		title = Engine[0xED84C33EC5F01EA]( 0x6AAA71F38DD1552 ),
		message = Engine[0xED84C33EC5F01EA]( 0x90F93D788477C3E ),
		controllerIndex = f1_arg0,
		buttons = {
			{
				label = Engine[0xED84C33EC5F01EA]( 0x3C47C1D4B212B1D ),
				action = function ( f3_arg0, f3_arg1 )
					Engine[0xBF432D422FFC0A4]( f3_arg1 )
				end
				
			},
			{
				label = Engine[0xED84C33EC5F01EA]( 0x2A24AC659E90609 ),
				action = function ( f2_arg0, f2_arg1 )
					Engine[0xADAB7907F77ABD7]( f2_arg1 )
				end
				
			}
		}
	}
end

