-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
module( ..., package.seeall )
function PostLoadFunc( f7_arg0, f7_arg1 )
	f7_arg0:SubscribeToModel( DataSources.inGame.HUD.grenadeCookPercent:GetModel( f7_arg1 ), function ()
		local f8_local0 = f7_arg0:GetValue( f7_arg0 )
		if f8_local0 ~= nil then
			local f8_local1 = LUI.Round( f8_local0, 2 )
			if f8_local1 == 0.01 or f8_local1 == 0.25 or f8_local1 == 0.5 or f8_local1 == 0.75 then
				ACTIONS.AnimateSequence( f7_arg0, "Pulse" )
			end
		end
	end )
end

function GrenadePulse( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 32 * _1080p, 0, 32 * _1080p )
	self.id = "GrenadePulse"
	self._animationSets = {}
	self._sequences = {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local Cross2 = nil
	
	Cross2 = LUI.UIImage.new()
	Cross2.id = "Cross2"
	Cross2:SetAlpha( 0.85, 0 )
	Cross2:setImage( RegisterMaterial( "hud_icon_cross_half_vertical" ), 0 )
	Cross2:Setup9SliceImage( _1080p * 20, _1080p * 20, 0.3, 0.3 )
	Cross2:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -32, _1080p * 32, _1080p * -32, _1080p * 32 )
	self:addElement( Cross2 )
	self.Cross2 = Cross2
	
	local Cross1 = nil
	
	Cross1 = LUI.UIImage.new()
	Cross1.id = "Cross1"
	Cross1:SetAlpha( 0.85, 0 )
	Cross1:setImage( RegisterMaterial( "hud_icon_cross_half" ), 0 )
	Cross1:Setup9SliceImage( _1080p * 20, _1080p * 20, 0.3, 0.3 )
	Cross1:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -32, _1080p * 32, _1080p * -32, _1080p * 32 )
	self:addElement( Cross1 )
	self.Cross1 = Cross1
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	Cross2:RegisterAnimationSequence( "Pulse", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -35
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 35
		},
		{
			duration = -18,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -46,
			easing = LUI.EASING.outCubic
		},
		{
			duration = -18,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 46,
			easing = LUI.EASING.outCubic
		},
		{
			duration = 740,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * -35,
			easing = LUI.EASING.inCubic
		},
		{
			duration = 740,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 35,
			easing = LUI.EASING.inCubic
		}
	} )
	Cross1:RegisterAnimationSequence( "Pulse", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -35
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 35
		},
		{
			duration = -18,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -46
		},
		{
			duration = -18,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 46
		},
		{
			duration = 740,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -35,
			easing = LUI.EASING.inCubic
		},
		{
			duration = 740,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 35,
			easing = LUI.EASING.inCubic
		}
	} )
	self._sequences.Pulse = function ()
		menu:AnimateSequence( "Pulse" )
		menu:AnimateSequence( "Pulse" )
	end
	
	Cross2:RegisterAnimationSequence( "Show", {
		{
			value = 4.667261642678925E-62,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	Cross1:RegisterAnimationSequence( "Show", {
		{
			value = 4.667261642678925E-62,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.Show = function ()
		menu:AnimateSequence( "Show" )
		menu:AnimateSequence( "Show" )
	end
	
	Cross2:RegisterAnimationSequence( "Hide", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	Cross1:RegisterAnimationSequence( "Hide", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.Hide = function ()
		menu:AnimateSequence( "Hide" )
		menu:AnimateSequence( "Hide" )
	end
	
	self:SubscribeToModel( DataSources.inGame.HUD.grenadeCookPercent:GetModel( f1_local1 ), function ()
		if DataSources.inGame.HUD.grenadeCookPercent:GetValue( menu ) ~= nil and DataSources.inGame.HUD.grenadeCookPercent:GetValue( menu ) <= 0 then
			ACTIONS.AnimateSequence( menu, "Hide" )
		end
		if DataSources.inGame.HUD.grenadeCookPercent:GetValue( menu ) ~= nil and 0 < DataSources.inGame.HUD.grenadeCookPercent:GetValue( menu ) then
			ACTIONS.AnimateSequence( menu, "Show" )
		end
	end )
	PostLoadFunc( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "GrenadePulse", GrenadePulse )
LockTable( _M )
