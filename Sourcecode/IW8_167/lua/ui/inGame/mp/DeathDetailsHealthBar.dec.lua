-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
module( ..., package.seeall )
local f0_local0 = function ( f2_arg0, f2_arg1, f2_arg2 )
	local f2_local0 = LUI.DataSourceFromOmnvar.new( "ui_death_details_enemy_health" )
	f2_arg0:SubscribeToModel( f2_local0:GetModel( f2_arg1 ), function ()
		f2_arg0.MainFill:SetRightAnchor( 1 - f2_arg0:GetValue( f2_arg0 ), 0 )
	end )
	local f2_local1 = LUI.DataSourceInControllerModel.new( "cg.player.health" )
	local f2_local2 = LUI.DataSourceInControllerModel.new( "cg.player.maxHealth" )
	f2_arg0:SubscribeToModel( f2_local1:GetModel( f2_arg1 ), function ()
		local f3_local0 = f2_arg0:GetValue( f2_arg0 )
		if not f3_local0 then
			return 
		else
			local f3_local1 = f2_arg0:GetValue( f2_arg0 )
			if not f3_local1 or f3_local1 < 1 then
				return 
			else
				f2_arg0.CurrentHealthFill:SetRightAnchor( 1 - f3_local0 / f3_local1, 0 )
			end
		end
	end )
end

function DeathDetailsHealthBar( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 218 * _1080p, 0, 12 * _1080p )
	self.id = "DeathDetailsHealthBar"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local CurrentHealthFill = nil
	
	CurrentHealthFill = LUI.UIImage.new()
	CurrentHealthFill.id = "CurrentHealthFill"
	CurrentHealthFill:SetRGBFromTable( SWATCHES.HUD.enemyTeam, 0 )
	CurrentHealthFill:SetAlpha( 0.4, 0 )
	self:addElement( CurrentHealthFill )
	self.CurrentHealthFill = CurrentHealthFill
	
	local MainFill = nil
	
	MainFill = LUI.UIImage.new()
	MainFill.id = "MainFill"
	MainFill:SetRGBFromTable( SWATCHES.HUD.enemyTeam, 0 )
	self:addElement( MainFill )
	self.MainFill = MainFill
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "DeathDetailsHealthBar", DeathDetailsHealthBar )
LockTable( _M )
