-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
module( ..., package.seeall )
local f0_local0 = 7000
local f0_local1 = 4
local f0_local2 = {
	{
		name = "Visible",
		animationsFunction = CODCASTER.GetShowAnimations,
		visibilityEnum = LUI.Visibility.Visible,
		condition = function ( f28_arg0, f28_arg1, f28_arg2 )
			return CODCASTER.IsHUDVisible( f28_arg1 )
		end
	},
	{
		name = "Hidden",
		visibilityLast = true,
		animationsFunction = CODCASTER.GetHideAnimations,
		visibilityEnum = LUI.Visibility.Hidden,
		condition = function ( f27_arg0, f27_arg1, f27_arg2 )
			return true
		end
	}
}
local f0_local3 = function ( f26_arg0 )
	f26_arg0.headerInformationRefreshTimer = LUI.UITimer.new( {
		event = "refreshCodcasterHeaderInformation",
		interval = f0_local0
	} )
	f26_arg0.headerInformationRefreshTimer.id = "CodcasterHeaderInformationRefreshTimer"
	f26_arg0:addElement( f26_arg0.headerInformationRefreshTimer )
end

local f0_local4 = function ( f25_arg0 )
	if f25_arg0.headerInformationRefreshTimer then
		f25_arg0.headerInformationRefreshTimer:closeTree()
		f25_arg0.headerInformationRefreshTimer = nil
	end
end

local f0_local5 = function ( f23_arg0, f23_arg1 )
	return function ()
		f23_arg0.AnnouncementsBG:SetRGBFromInt( f23_arg0.defaultBGColor )
		f23_arg0.AnnouncementsText:setText( f23_arg0.headerInformation )
		f23_arg0.AnnouncementsText:SetRGBFromInt( f23_arg0.defaultTextColor )
		f23_arg0.headerInformationCanBeUpdated = true
		f23_arg0:InitHeaderInformationRefreshTimer()
		f23_arg0()
	end
	
end

local f0_local6 = function ( f22_arg0, f22_arg1 )
	local f22_local0
	if f22_arg0.announcementID ~= f0_local0 or f22_arg0.lines ~= f22_arg1 then
		f22_local0 = false
	else
		f22_local0 = true
	end
	return f22_local0
end

local f0_local7 = function ( f20_arg0 )
	return function ( f21_arg0, f21_arg1 )
		local f21_local0
		if f20_arg0.IsNewHardpointAnnouncement( f21_arg1, 2 ) then
			f21_local0 = "HideAnnouncementText"
		else
			f21_local0 = "HideAnnouncement"
		end
		ACTIONS.AnimateSequence( f20_arg0, f21_local0, {
			onComplete = f20_arg0( f20_arg0, f21_arg0 )
		} )
		return true
	end
	
end

local f0_local8 = function ( f18_arg0 )
	return function ( f19_arg0 )
		if not CODCASTER_SETTINGS.GetSettingValue( f19_arg0.controllerIndex, "codcaster_announcements" ) then
			return 
		end
		local f19_local0 = f19_arg0.controllerIndex
		f18_arg0.headerInformationCanBeUpdated = false
		f18_arg0:CloseHeaderInformationRefreshTimer()
		if 0 < f19_arg0.teamId then
			local f19_local1 = CODCASTER.GetTeamDataSource( f19_arg0.teamId )
			local f19_local2 = f19_local1.colors.substitute:GetValue( f19_local0 )
			f18_arg0.AnnouncementsBG:SetRGBFromInt( f19_local2 )
			f18_arg0.AnnouncementsText:SetRGBFromInt( GetIntForColor( COLORS_UTILS.GetBlackWhiteContrastFromInt( f19_local2 ) ) )
		else
			f18_arg0.AnnouncementsBG:SetRGBFromInt( f18_arg0._neutralAnnouncementBGColor )
			f18_arg0.AnnouncementsText:SetRGBFromInt( f18_arg0.defaultTextColor )
		end
		f18_arg0.AnnouncementsText:setText( f19_arg0.stringToDisplay )
		local f19_local1
		if f18_arg0.IsNewHardpointAnnouncement( f19_arg0, 1 ) then
			f19_local1 = "ShowAnnouncementText"
		else
			f19_local1 = "ShowAnnouncement"
		end
		ACTIONS.AnimateSequence( f18_arg0, f19_local1 )
	end
	
end

local f0_local9 = function ( f16_arg0 )
	return function ( f17_arg0, f17_arg1 )
		if not CODCASTER_SETTINGS.GetSettingValue( f16_arg0, "codcaster_announcements" ) then
			return 
		else
			f17_arg0.codCasterAnnouncementsManager:QueueAnnouncement( f17_arg1.value, f16_arg0 )
		end
	end
	
end

local f0_local10 = function ( f15_arg0 )
	local f15_local0 = #f15_arg0.headerInformationList
	local f15_local1
	if f15_local0 <= f15_arg0.lastHeaderInformationShownIndex then
		f15_local1 = 1
	else
		f15_local1 = f15_arg0.lastHeaderInformationShownIndex + 1
	end
	f15_arg0.headerInformation = f15_arg0.headerInformationList[f15_local1]
	f15_arg0.lastHeaderInformationShownIndex = f15_local1
	if f15_arg0.headerInformationCanBeUpdated and 1 < f15_local0 then
		f15_arg0.AnnouncementsText:setText( f15_arg0.headerInformation )
		ACTIONS.AnimateSequence( f15_arg0, "ShowHeaderInformation" )
	end
end

local f0_local11 = function ( f13_arg0, f13_arg1, f13_arg2 )
	f13_arg0.InitHeaderInformationRefreshTimer = f0_local0
	f13_arg0.CloseHeaderInformationRefreshTimer = f0_local0
	f13_arg0.IsNewHardpointAnnouncement = f0_local0
	CODCASTER.SetupVisualStateHandler( f13_arg0, f13_arg1, f0_local0, {
		events = {
			"codcaster_announcements" .. CODCASTER.EVENT_TYPES.SETTING_CHANGED,
			"codcaster_hidelayer" .. CODCASTER.EVENT_TYPES.SETTING_CHANGED,
			"codcaster_dataview" .. CODCASTER.EVENT_TYPES.SETTING_CHANGED
		}
	} )
	f13_arg0.headerInformationCanBeUpdated = true
	f13_arg0.lastHeaderInformationShownIndex = 0
	local f13_local0 = DataSources.inGame.MP.match.gameMode:GetValue( f13_arg1 )
	local f13_local1 = DataSources.inGame.MP.codcaster.matchInfo.seriesTextString:GetValue( f13_arg1 )
	f13_arg0.headerInformationList = {
		f13_local0
	}
	if f13_local1 ~= "" then
		table.insert( f13_arg0.headerInformationList, f13_local1 )
	end
	f13_arg0.headerInformation = f13_arg0.headerInformationList[1]
	f13_arg0:InitHeaderInformationRefreshTimer()
	f13_arg0:registerEventHandler( "refreshCodcasterHeaderInformation", function ( element, event )
		f13_arg0( element )
	end )
	f13_arg0.announcementQueueStart = nil
	f13_arg0.announcementLastPriority = -1
	local f13_local2, f13_local3, f13_local4, f13_local5 = f13_arg0.AnnouncementsBG:getCurrentRGBA()
	f13_arg0._neutralAnnouncementBGColor = GetIntForColor( COLORS.codcasterBlack )
	f13_arg0.defaultBGColor = GetIntForColor( {
		r = f13_local2,
		g = f13_local3,
		b = f13_local4
	} )
	f13_arg0.defaultTextColor = GetIntForColor( COLORS.white )
	f13_arg0.AnnouncementsText:setText( f13_arg0.headerInformation or "" )
	f13_arg0:registerOmnvarHandler( "ui_mlg_announcement", f0_local0( f13_arg1 ) )
	f13_arg0.codCasterAnnouncementsManager = LUI.CodcasterAnnouncementsManager()
	f13_arg0.codCasterAnnouncementsManager:init( f0_local0( f13_arg0 ), f0_local0( f13_arg0 ) )
	f13_arg0:addElement( f13_arg0.codCasterAnnouncementsManager )
end

function CodcasterScoreHeaderAnnouncements( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 474 * _1080p, 0, 40 * _1080p )
	self.id = "CodcasterScoreHeaderAnnouncements"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	self._sequenceLengths = self._sequenceLengths or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local AnnouncementsBG = nil
	
	AnnouncementsBG = LUI.UIImage.new()
	AnnouncementsBG.id = "AnnouncementsBG"
	AnnouncementsBG:SetRGBFromInt( 3355968, 0 )
	AnnouncementsBG:SetAlpha( 0.9, 0 )
	AnnouncementsBG:Setup3SliceHorizontalImage( _1080p * 30, 0.2800005 )
	AnnouncementsBG:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -237, _1080p * 237, _1080p * -20, _1080p * 20 )
	self:addElement( AnnouncementsBG )
	self.AnnouncementsBG = AnnouncementsBG
	
	local AnnouncementsText = nil
	
	AnnouncementsText = LUI.UIStyledText.new()
	AnnouncementsText.id = "AnnouncementsText"
	AnnouncementsText:setText( "", 0 )
	AnnouncementsText:setCaseStyle( LUI.CaseStyle.Uppercase )
	AnnouncementsText:SetFont( FONTS.GetFont( FONTS.Abolition.File ) )
	AnnouncementsText:SetFontSize( 32 * _PT )
	AnnouncementsText:SetMinFontSize( 32 * _PT )
	AnnouncementsText:SetWordWrap( false )
	AnnouncementsText:SetLeading( -2 * _1080p, 0 )
	AnnouncementsText:SetAlignment( LUI.Alignment.Center )
	AnnouncementsText:SetVerticalAlignment( LUI.Alignment.Center )
	AnnouncementsText:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -230, _1080p * 230, _1080p * -20, _1080p * 20 )
	self:addElement( AnnouncementsText )
	self.AnnouncementsText = AnnouncementsText
	
	local f1_local5 = nil
	AnnouncementsBG:RegisterAnimationSequence( "DefaultSequence", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 237
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -237
		},
		{
			value = -9.255965340288647E+61,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	AnnouncementsText:RegisterAnimationSequence( "DefaultSequence", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.DefaultSequence = function ()
		menu:AnimateSequence( "DefaultSequence" )
		menu:AnimateSequence( "DefaultSequence" )
	end
	
	self._sequenceLengths.DefaultSequence = 0
	local f1_local6 = nil
	AnnouncementsBG:RegisterAnimationSequence( "ShowAnnouncement", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Left
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Right
		},
		{
			value = -9.255965340288647E+61,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 60,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -68
		},
		{
			duration = 60,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 68
		},
		{
			value = 1,
			duration = 60,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 150,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -237
		},
		{
			duration = 150,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 237
		},
		{
			value = 1,
			duration = 150,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	AnnouncementsText:RegisterAnimationSequence( "ShowAnnouncement", {
		{
			value = 0,
			duration = -58,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 10,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 60,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = 10,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = 60,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 10,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ShowAnnouncement = function ()
		menu:AnimateSequence( "ShowAnnouncement" )
		menu:AnimateSequence( "ShowAnnouncement" )
	end
	
	self._sequenceLengths.ShowAnnouncement = 220
	local f1_local7 = nil
	AnnouncementsBG:RegisterAnimationSequence( "HideAnnouncement", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -237
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 237
		},
		{
			value = -9.255965340288647E+61,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = -9.255965340288647E+61,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = 200,
			property = TWEEN_PROPERTY.Right
		},
		{
			value = 0,
			duration = 200,
			property = TWEEN_PROPERTY.Left
		},
		{
			value = 0,
			duration = -28,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.HideAnnouncement = function ()
		menu:AnimateSequence( "HideAnnouncement" )
	end
	
	self._sequenceLengths.HideAnnouncement = 200
	local f1_local8 = nil
	AnnouncementsBG:RegisterAnimationSequence( "Intro", {
		{
			value = -9.255965340288647E+61,
			duration = 500,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	AnnouncementsText:RegisterAnimationSequence( "Intro", {
		{
			value = 1,
			duration = 500,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.Intro = function ()
		menu:AnimateSequence( "Intro" )
		menu:AnimateSequence( "Intro" )
	end
	
	self._sequenceLengths.Intro = 500
	local f1_local9 = nil
	AnnouncementsBG:RegisterAnimationSequence( "Hide", {
		{
			value = 0,
			duration = 500,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	AnnouncementsText:RegisterAnimationSequence( "Hide", {
		{
			value = 0,
			duration = 500,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.Hide = function ()
		menu:AnimateSequence( "Hide" )
		menu:AnimateSequence( "Hide" )
	end
	
	self._sequenceLengths.Hide = 500
	local f1_local10 = nil
	AnnouncementsBG:RegisterAnimationSequence( "Show", {
		{
			value = -9.255965340288647E+61,
			duration = 500,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	AnnouncementsText:RegisterAnimationSequence( "Show", {
		{
			value = 1,
			duration = 500,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.Show = function ()
		menu:AnimateSequence( "Show" )
		menu:AnimateSequence( "Show" )
	end
	
	self._sequenceLengths.Show = 500
	local f1_local11 = nil
	AnnouncementsBG:RegisterAnimationSequence( "HideNoAnim", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	AnnouncementsText:RegisterAnimationSequence( "HideNoAnim", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.HideNoAnim = function ()
		menu:AnimateSequence( "HideNoAnim" )
		menu:AnimateSequence( "HideNoAnim" )
	end
	
	self._sequenceLengths.HideNoAnim = 0
	local f1_local12 = nil
	AnnouncementsBG:RegisterAnimationSequence( "ShowNoAnim", {
		{
			value = -9.255965340288647E+61,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	AnnouncementsText:RegisterAnimationSequence( "ShowNoAnim", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ShowNoAnim = function ()
		menu:AnimateSequence( "ShowNoAnim" )
		menu:AnimateSequence( "ShowNoAnim" )
	end
	
	self._sequenceLengths.ShowNoAnim = 0
	local f1_local13 = nil
	AnnouncementsText:RegisterAnimationSequence( "ShowAnnouncementText", {
		{
			value = 0,
			duration = -58,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 10,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 60,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = 10,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = 60,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 10,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ShowAnnouncementText = function ()
		menu:AnimateSequence( "ShowAnnouncementText" )
	end
	
	self._sequenceLengths.ShowAnnouncementText = 220
	local f1_local14 = nil
	AnnouncementsText:RegisterAnimationSequence( "HideAnnouncementText", {
		{
			value = 0,
			duration = -58,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.HideAnnouncementText = function ()
		menu:AnimateSequence( "HideAnnouncementText" )
	end
	
	self._sequenceLengths.HideAnnouncementText = 70
	local f1_local15 = nil
	AnnouncementsText:RegisterAnimationSequence( "ShowHeaderInformation", {
		{
			value = 0,
			duration = -58,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 10,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 60,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = 10,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 0,
			duration = 60,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 10,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ShowHeaderInformation = function ()
		menu:AnimateSequence( "ShowHeaderInformation" )
	end
	
	self._sequenceLengths.ShowHeaderInformation = 220
	if not CODCASTER_CONDITIONS.IsCDLClient() then
		ACTIONS.SetFontLeading( self.AnnouncementsText, -3 )
		ACTIONS.SetFont( self.AnnouncementsText, FONTS.BattleNetCondensed )
		ACTIONS.SetFontSize( self.AnnouncementsText, 30 )
		ACTIONS.SetFontMinSize( self.AnnouncementsText, 16 )
	end
	f0_local0( self, f1_local1, controller )
	ACTIONS.AnimateSequence( self, "DefaultSequence" )
	return self
end

MenuBuilder.registerType( "CodcasterScoreHeaderAnnouncements", CodcasterScoreHeaderAnnouncements )
LockTable( _M )
