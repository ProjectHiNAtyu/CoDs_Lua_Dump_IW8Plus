-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:49
module( ..., package.seeall )
local f0_local0 = 1
local f0_local1 = 2
local f0_local2 = function ( f8_arg0 )
	if f8_arg0._unlocked then
		ACTIONS.AnimateSequence( f8_arg0, "Focus" )
	else
		ACTIONS.AnimateSequence( f8_arg0, "LockedFocus" )
	end
	if not (not f8_arg0._focusSFX or not Engine[0x1F61B16806D3CA2]( f8_arg0._focusSFX )) or LUI.IsLastInputMouseNavigation( f8_arg0._controllerIndex ) then
		return 
	elseif not CONDITIONS.IsMobileOrMobileSim() then
		f8_arg0._focusSFX = Engine[0xC4146BA76D0F982]( SOUND_SETS.default.gainFocus )
	end
end

local f0_local3 = function ( f7_arg0 )
	if f7_arg0._unlocked then
		ACTIONS.AnimateSequence( f7_arg0, "Unfocus" )
	else
		ACTIONS.AnimateSequence( f7_arg0, "LockedUnfocus" )
	end
end

local f0_local4 = function ( f6_arg0, f6_arg1 )
	if not CONDITIONS.IsGamepadEnabled() then
		f6_arg0:SetHandleMouse( f6_arg1 )
	end
end

local f0_local5 = function ( f5_arg0, f5_arg1, f5_arg2 )
	f5_arg0._unlocked = f5_arg2.rank <= f5_arg2.currentRank
	f5_arg0.rank = f5_arg2.rank
	f5_arg0.rankIndex = f5_arg2.rankIndex
	local f5_local0 = f5_arg2.rank > PROGRESSION.GetMaxRank()
	if 0 <= f5_arg0.rank and f5_arg0.rank <= PROGRESSION.GetPlayerLifeTimeMaxRank() then
		f5_arg0.rewardPackage = AAR.GetRankupUnlockPackage( f5_arg1, f5_arg0.rank )
		f5_arg0.RankLabel:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x55935E8D49F35E5, PROGRESSION.GetRankDisplay( f5_arg0.rank ) ) ) )
		if f5_arg0.rank and f5_arg0.rank > PROGRESSION.GetMaxRank() then
			f5_arg0.PrestigeLabel:SetAlpha( 1 )
			f5_arg0.PrestigeLabel:setText( ToUpperCase(), Engine[0xED84C33EC5F01EA]( StringTable[0x2DCF0973239E909]( CSV.MPRank.file, CSV.MPRank.cols.index, f5_arg0.rank, CSV.MPRank.cols.name ) ) )
		else
			f5_arg0.PrestigeLabel:SetAlpha( 0 )
		end
		f5_arg0.RankImage:setImage( RegisterMaterial( PROGRESSION.GetRankBigIcon( f5_arg0.rank ) ) )
		if f5_arg0.rewardPackage[f0_local0] then
			f5_arg0.RewardLeft:setImage( RegisterMaterial( f5_arg0.rewardPackage[f0_local0].icon ) )
		end
		if f5_local0 then
			if f5_arg0.RewardLeft then
				f5_arg0.RewardLeft:SetVisible( false )
			end
			if f5_arg0.RewardRight then
				f5_arg0.RewardRight:SetVisible( false )
			end
			if f5_arg0.Brackets then
				f5_arg0.Brackets:SetVisible( false )
			end
		else
			if f5_arg0.RewardLeft then
				f5_arg0.RewardLeft:SetVisible( true )
			end
			if f5_arg0.RewardRight then
				f5_arg0.RewardRight:SetVisible( true )
			end
			if f5_arg0.Brackets then
				f5_arg0.Brackets:SetVisible( true )
			end
			if 1 < #f5_arg0.rewardPackage then
				local f5_local1 = f5_arg0.rewardPackage[f0_local0].icon
				f5_arg0.RewardRight:setImage( RegisterMaterial( f5_local1 ) )
				if LAYOUT.GetMaterialAspectRatio( f5_local1 ) == 1 then
					ACTIONS.AnimateSequence( f5_arg0, "TwoRewards1x1" )
				else
					ACTIONS.AnimateSequence( f5_arg0, "TwoRewards2x1" )
				end
				f5_arg0.Brackets:SetVisible( f5_arg0.rewardPackage[f0_local0].lootType == LOOT.itemTypes.OPERATOR )
			else
				ACTIONS.AnimateSequence( f5_arg0, "OneReward" )
			end
		end
		if f5_arg0._unlocked then
			ACTIONS.AnimateSequence( f5_arg0, "Unlocked" )
			f5_arg0:setActionSFX( SOUND_SETS.default.action )
		else
			ACTIONS.AnimateSequence( f5_arg0, "Locked" )
			f5_arg0:setActionSFX( SOUND_SETS.default.disableAction )
		end
	end
	f0_local0( f5_arg0 )
end

local f0_local6 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0.GainFocusTile = f0_local0
	f3_arg0.LoseFocusTile = f0_local0
	f3_arg0.SetMouseEnabledIfUsingKBM = f0_local0
	f3_arg0.SetupProgressionUnlockTile = f0_local0
	if f3_arg2.rank then
		f3_arg0:SetupProgressionUnlockTile( f3_arg1, {
			rank = f3_arg2.rank,
			rankIndex = f3_arg2.rankIndex,
			currentRank = f3_arg2.currentRank
		} )
	end
	f3_arg0:registerEventHandler( "mouseenter", function ( element, event )
		local f4_local0 = element:getParent()
		f4_local0:processEvent( {
			name = "tile_gained_focus",
			tile = element
		} )
	end )
end

local f0_local7 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0._controllerIndex = f2_arg1
	f2_arg0.PostLoadShared = f0_local0
end

function ProgressionUnlockTileBase( menu, controller )
	local self = LUI.UIButton.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 283 * _1080p, 0, 440 * _1080p )
	self.id = "ProgressionUnlockTileBase"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f0_local0( self, LUI.ValidateControllerIndex( self, f1_local1 ), controller )
	return self
end

MenuBuilder.registerType( "ProgressionUnlockTileBase", ProgressionUnlockTileBase )
LockTable( _M )
