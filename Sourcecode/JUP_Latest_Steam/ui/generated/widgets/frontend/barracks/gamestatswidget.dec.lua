-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
module( ..., package.seeall )
require( "ui.generated.widgets.frontend.barracks.gamestatbar" )
require( "ui.generated.widgets.frontend.barracks.averageindicatorleft" )
local f0_local0 = 2
local f0_local1 = function ( f3_arg0, f3_arg1 )
	local f3_local0 = 0
	local f3_local1 = -1
	for f3_local5, f3_local6 in ipairs( f3_arg1 ) do
		f3_local0 = f3_local0 + tonumber( f3_local6 )
		if f3_local1 < f3_local6 then
			f3_local1 = f3_local6
		end
	end
	f3_local2 = RECORDS.GetNumberOfPlayerMatches( f3_arg0._controllerIndex )
	if 5 <= f3_local2 then
		f3_local2 = 5
	end
	f3_local3 = f3_local0 / f3_local2
	f3_arg0.AverageIndicatorLeft.AvgText:setText( string.format( "%.2f", f3_local3 ) )
	if 0 < f3_local3 then
		f3_local4 = (f3_local1 - f3_local3) / f3_local1 * f3_arg0.height
		f3_arg0.AverageTracker:SetTop( f3_local4 + f0_local0 / 2 )
		f3_arg0.AverageTracker:SetBottom( f3_local4 - f0_local0 / 2 )
		f3_arg0.AverageIndicatorLeft:SetTop( f3_local4 - f3_arg0._indicatorHeight / 2 )
		f3_arg0.AverageIndicatorLeft:SetBottom( f3_local4 + f3_arg0._indicatorHeight / 2 )
	else
		f3_arg0.AverageTracker:SetVisible( false )
		f3_arg0.AverageIndicatorLeft:SetVisible( false )
	end
	for f3_local7, f3_local8 in ipairs( f3_arg0._Bars ) do
		local f3_local9 = tonumber( f3_arg1[f3_local7] )
		f3_local8.Label:setText( Engine[0x7D3158A9539A355]( string.format( "%.2f", f3_local9 ) ) )
		if f3_local9 <= 0 then
			f3_local8:SetTop( f3_arg0.height - f3_arg0.backerHeight )
		else
			f3_local8:SetTop( math.min( f3_arg0.height - f3_arg0.backerHeight, (f3_local1 - f3_local9) / f3_local1 * f3_arg0.height ) )
		end
	end
end

local f0_local2 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.UpdateGameStatBars = f0_local0
	f2_arg0._controllerIndex = f2_arg1
	local f2_local0, f2_local1, f2_local2, f2_local3 = f2_arg0:getLocalRect()
	local f2_local4, f2_local5, f2_local6, f2_local7 = f2_arg0.AverageIndicatorLeft:getLocalRect()
	local f2_local8, f2_local9, f2_local10, f2_local11 = f2_arg0.LastMatchBar.Backer:getLocalRect()
	f2_arg0.backerHeight = f2_local11 - f2_local9
	f2_arg0.height = f2_local3 - f2_local1
	f2_arg0._indicatorHeight = f2_local7 - f2_local5
	f2_arg0._Bars = {
		f2_arg0.LastMatchBar,
		f2_arg0.Match2Bar,
		f2_arg0.Match3Bar,
		f2_arg0.Match4Bar,
		f2_arg0.Match5Bar
	}
end

function GameStatsWidget( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = MenuBuilder
	local f1_local2 = f1_local0.UIElement.new()
	f1_local2:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1210, 0, 300 )
	f1_local2.id = "GameStatsWidget"
	local f1_local3
	if f1_arg1 then
		f1_local3 = f1_arg1
	else
		f1_local3 = f1_arg1.controllerIndex
	end
	f1_local3 = f1_local0.ValidateControllerIndex( f1_local2, f1_local3 )
	local f1_local4 = nil
	f1_local4 = f1_local0.UIImage.new()
	f1_local4[0x8B72E07B55C3AC0] = "Background"
	f1_local4:SetRGB( SWATCHES[0x5E2F4190CE482DE][0x9FD0B1F5B853795], 0 )
	f1_local4:SetAlpha( 0.4, 0 )
	f1_local4:SetPixelGridEnabled( true )
	f1_local4:SetPixelGridContrast( 0.5, 0 )
	f1_local4:SetPixelGridBlockWidth( 2, 0 )
	f1_local4:SetPixelGridBlockHeight( 2, 0 )
	f1_local4:SetPixelGridGutterWidth( 1, 0 )
	f1_local4:SetPixelGridGutterHeight( 1, 0 )
	f1_local2:addElement( f1_local4 )
	f1_local2[0xD4176E7CA246EDD] = f1_local4
	local f1_local5 = nil
	f1_local5 = f1_local0.UIText.new()
	f1_local5[0x8B72E07B55C3AC0] = "AvgLabel"
	f1_local5:SetRGB( SWATCHES[0x1F5A9ABAC207F9D][0x800A3F1B47556E], 0 )
	f1_local5:setText( Engine[0xED84C33EC5F01EA]( 0x854B231C6299E85 ), 0 )
	f1_local5:SetFont( FONTS.GetFont( FONTS.PrimaryRegular.File ) )
	f1_local5:SetFontSize( 28 * _PT )
	f1_local5:SetMinFontSize( 18 * _PT )
	f1_local5:SetWordWrap( true )
	f1_local5:SetAlignment( f1_local0.Alignment.Center )
	f1_local5:SetOptOutRightToLeftAlignmentFlip( true )
	f1_local5:SetAnchorsAndPosition( 1, 0, 1, 0, -180, -45, 5, 33 )
	f1_local2:addElement( f1_local5 )
	f1_local2[0x301C2074520A663] = f1_local5
	local f1_local6 = nil
	f1_local6 = f1_local1.BuildRegisteredType( 0x9960D61D6440C82, {
		controllerIndex = f1_local3
	} )
	f1_local6[0x8B72E07B55C3AC0] = "LastMatchBar"
	f1_local6[0x4915F7DD8A9771C]:setText( Engine[0xED84C33EC5F01EA]( 0x49F977224A95E5D ), 0 )
	f1_local6:SetAnchorsAndPosition( 0, 1, 0, 1, 845, 965, 0, 300 )
	f1_local2:addElement( f1_local6 )
	f1_local2[0x5A519F012CFA33] = f1_local6
	local f1_local7 = nil
	f1_local7 = f1_local1.BuildRegisteredType( 0x9960D61D6440C82, {
		controllerIndex = f1_local3
	} )
	f1_local7[0x8B72E07B55C3AC0] = "Match2Bar"
	f1_local7[0x4915F7DD8A9771C]:setText( LocalizeIntoString( "2", 0x1BB4904C17728CF, "" ), 0 )
	f1_local7:SetAnchorsAndPosition( 0, 1, 0, 1, 645, 765, 0, 300 )
	f1_local2:addElement( f1_local7 )
	f1_local2[0x221EBB9B6EC71D9] = f1_local7
	local f1_local8 = nil
	f1_local8 = f1_local1.BuildRegisteredType( 0x9960D61D6440C82, {
		controllerIndex = f1_local3
	} )
	f1_local8[0x8B72E07B55C3AC0] = "Match3Bar"
	f1_local8[0x4915F7DD8A9771C]:setText( LocalizeIntoString( "3", 0x1BB4904C17728CF, "" ), 0 )
	f1_local8:SetAnchorsAndPosition( 0, 1, 0, 1, 445, 565, 0, 300 )
	f1_local2:addElement( f1_local8 )
	f1_local2[0x79D5BC0C1A6ADE0] = f1_local8
	local f1_local9 = nil
	f1_local9 = f1_local1.BuildRegisteredType( 0x9960D61D6440C82, {
		controllerIndex = f1_local3
	} )
	f1_local9[0x8B72E07B55C3AC0] = "Match4Bar"
	f1_local9[0x4915F7DD8A9771C]:setText( LocalizeIntoString( "4", 0x1BB4904C17728CF, "" ), 0 )
	f1_local9:SetAnchorsAndPosition( 0, 1, 0, 1, 245, 365, 0, 300 )
	f1_local2:addElement( f1_local9 )
	f1_local2[0x7B463A7BF0BAB3F] = f1_local9
	local f1_local10 = nil
	f1_local10 = f1_local1.BuildRegisteredType( 0x9960D61D6440C82, {
		controllerIndex = f1_local3
	} )
	f1_local10[0x8B72E07B55C3AC0] = "Match5Bar"
	f1_local10[0x4915F7DD8A9771C]:setText( LocalizeIntoString( "5", 0x1BB4904C17728CF, "" ), 0 )
	f1_local10:SetAnchorsAndPosition( 0, 1, 0, 1, 45, 165, 0, 300 )
	f1_local2:addElement( f1_local10 )
	f1_local2[0xE3C13AEED69C096] = f1_local10
	local f1_local11 = nil
	f1_local11 = f1_local0.UIImage.new()
	f1_local11[0x8B72E07B55C3AC0] = "AverageTracker"
	f1_local11:SetRGB( SWATCHES[0x71CAB19053F30BF][0xE0C4EC1AFC10593], 0 )
	f1_local11:SetAlpha( 0.6, 0 )
	f1_local11:SetAnchorsAndPosition( 0, 1, 0, 1, 4, 1076, 149, 151 )
	f1_local2:addElement( f1_local11 )
	f1_local2[0x62DBA9422C34664] = f1_local11
	local f1_local12 = nil
	f1_local12 = f1_local1.BuildRegisteredType( 0x2896BE25F8FAC94, {
		controllerIndex = f1_local3
	} )
	f1_local12[0x8B72E07B55C3AC0] = "AverageIndicatorLeft"
	f1_local12:SetAnchorsAndPosition( 1, 0, 0, 1, -180, -45, 132, 168 )
	f1_local2:addElement( f1_local12 )
	f1_local2[0x2896BE25F8FAC94] = f1_local12
	f0_local0( f1_local2, f1_local3, f1_arg1 )
	return f1_local2
end

MenuBuilder.registerType( 0x8127E5B56E12D86, GameStatsWidget )
LockTable( _M )
