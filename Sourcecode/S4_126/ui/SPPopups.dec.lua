-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:42
module( ..., package.seeall )
CoD.PrintModuleLoad( _NAME )
local f0_local0 = function ( f37_arg0, f37_arg1 )
	local f37_local0 = function ()
		Engine[0x7C75E608EA39B5C]( "profile_difficultyLoad" )
		Engine[0x7C75E608EA39B5C]( "loadgame_continue" )
		Engine[0x7C75E608EA39B5C]( "updategamerprofile" )
	end
	
	if Engine[0xC436AD5B92B0408]( f37_arg1 ) then
		LUI.FlowManager.RequestLeaveMenu( f37_arg0 )
		LUI.FlowManager.RequestPopupMenu( nil, "FakeLoadingScreenOverlayPopup", true, 0, false, {
			onLoadCompleteFunc = f37_local0
		} )
	end
end

local f0_local1 = function ( f35_arg0, f35_arg1, f35_arg2 )
	local f35_local0 = function ()
		Engine[0x7C75E608EA39B5C]( "spmap " .. f35_arg0 )
	end
	
	local f35_local1 = MenuBuilder.BuildRegisteredType( "SPPauseDifficultyFlyin", {
		controllerIndex = f35_arg1
	} )
	f35_local1:SetMap( f35_arg2 )
	LUI.FlowManager.RequestPopupMenu( nil, "FlyInPopup", true, f35_arg1, false, {
		widget = f35_local1
	} )
end

local f0_local2 = function ( f34_arg0, f34_arg1 )
	Dvar[0x8EA06EEDB58D872]( "#x3e628a523d0bfee6f", true )
	Engine[0x7C75E608EA39B5C]( "disconnect" )
	PreGame.EndDuckAudio()
	Engine[0x433043D1F47DE58]()
	LUI.FlowManager.RequestLeaveMenu( f34_arg0 )
	LUI.FlowManager.RequestLeaveMenuByName( "SPPauseMenu" )
end

local f0_local3 = function ( f32_arg0, f32_arg1 )
	local f32_local0 = f32_arg0:Wait( Dvar[0x22EAAB59AA27E9B]( "#x37ef62db37cfe68c3" ) )
	f32_local0.onComplete = function ()
		f32_arg0:closeTree()
	end
	
end

local f0_local4 = function ()
	Dvar[0x8EA06EEDB58D872]( "#x3e628a523d0bfee6f", true )
	Engine[0xFAF6652413F4C6C]( PauseReason.KEY_INPUT )
	LUI.FlowManager.RequestCloseAllMenus()
	if 0 < Dvar[0x22EAAB59AA27E9B]( "#x37ef62db37cfe68c3" ) then
		local f31_local0 = Engine[0xEE6F69FEA944B13]()
		local self = LUI.UIImage.new()
		self:SetRGBFromInt( 0 )
		self.id = "blackQuad"
		f31_local0:addElement( self )
		self:addEventHandler( "post_restart", f0_local0 )
	end
end

local f0_local5 = function ()
	Engine[0x7C75E608EA39B5C]( "stopControllerRumble" )
	Engine[0x6055C55456F05DF]( "restartMission", 1 )
	f0_local0()
	PreGame.EndDuckAudio()
	Engine[0x433043D1F47DE58]()
end

local f0_local6 = function ()
	Engine[0x7C75E608EA39B5C]( "stopControllerRumble" )
	Engine[0x6055C55456F05DF]( "lastCheckpoint", 1 )
	f0_local0()
	PreGame.EndDuckAudio()
	Engine[0x433043D1F47DE58]()
end

function QuitGamePopup( f28_arg0, f28_arg1 )
	local f28_local0 = MenuBuilder.BuildRegisteredType( "PopupYesNo", {
		headerText = Engine[0xED84C33EC5F01EA]( "MENU/QUIT_WARNING" ),
		messageText = Engine[0xED84C33EC5F01EA]( "MENU/SAVEQUIT_TEXT" ),
		yesLabel = Engine[0xED84C33EC5F01EA]( "LUA_MENU/YES" ),
		controllerIndex = f28_arg1.controllerIndex,
		yesAction = f0_local0,
		noLabel = Engine[0xED84C33EC5F01EA]( "LUA_MENU/NO" )
	} )
	f28_local0.id = "QuitGamePopup"
	LAYOUT.ToggleFadeFrameDisabledForCurrentMenu( f28_local0, false )
	return f28_local0
end

function RestartMissionPopup( f27_arg0, f27_arg1 )
	local f27_local0 = MenuBuilder.BuildRegisteredType( "PopupYesNo", {
		headerText = Engine[0xED84C33EC5F01EA]( "MENU/RESTART_MISSION" ),
		messageText = Engine[0xED84C33EC5F01EA]( "MENU/RESTART_TEXT" ),
		yesLabel = Engine[0xED84C33EC5F01EA]( "LUA_MENU/YES" ),
		controllerIndex = f27_arg1.controllerIndex,
		yesAction = f0_local0,
		noLabel = Engine[0xED84C33EC5F01EA]( "LUA_MENU/NO" )
	} )
	f27_local0.id = "RestartMissionPopup"
	LAYOUT.ToggleFadeFrameDisabledForCurrentMenu( f27_local0, false )
	return f27_local0
end

function CheckpointPopup( f26_arg0, f26_arg1 )
	local f26_local0 = MenuBuilder.BuildRegisteredType( "PopupYesNo", {
		headerText = Engine[0xED84C33EC5F01EA]( "MENU/LAST_CHECKPOINT" ),
		messageText = Engine[0xED84C33EC5F01EA]( "MENU_SP/LAST_CHECKPOINT_CONFIRMATION" ),
		yesLabel = Engine[0xED84C33EC5F01EA]( "LUA_MENU/YES" ),
		controllerIndex = f26_arg1.controllerIndex,
		yesAction = f0_local0,
		noLabel = Engine[0xED84C33EC5F01EA]( "LUA_MENU/NO" )
	} )
	f26_local0.id = "CheckpointPopup"
	LAYOUT.ToggleFadeFrameDisabledForCurrentMenu( f26_local0, false )
	return f26_local0
end

function ResumeGamePopup( f25_arg0, f25_arg1 )
	local f25_local0 = Engine[0x2488F105C00BC65]( f25_arg1.controllerIndex )
	local f25_local1 = {
		showBG = true,
		headerText = Engine[0xED84C33EC5F01EA]( "MENU/RESUMEGAME" )
	}
	local f25_local2
	if f25_local0 then
		f25_local2 = Engine[0xED84C33EC5F01EA]( "MENU/RESUMEGAME_MESSAGE_RESTART" )
		if not f25_local2 then
		
		else
			f25_local1.messageText = f25_local2
			f25_local1.controllerIndex = f25_arg1.controllerIndex
			f25_local1.yesAction = f0_local0
			return MenuBuilder.BuildRegisteredType( "PopupYesNo", f25_local1 )
		end
	end
	f25_local2 = Engine[0xED84C33EC5F01EA]( "MENU/RESUMEGAME_MESSAGE_Q" )
end

function ResumeOrRestartPopup( f22_arg0, f22_arg1 )
	if f22_arg1 then
		local f22_local0 = f22_arg1
	else
		local f22_local0 = f22_arg1.mapName
	end
	local f22_local1 = Engine[0x2488F105C00BC65]( f22_arg1.controllerIndex )
	if not f22_local1 then
		f22_local1 = not Engine[0xC436AD5B92B0408]( f22_arg1.controllerIndex )
	end
	local f22_local2 = {
		defaultFocusIndex = 1,
		showBG = true,
		headerText = Engine[0xED84C33EC5F01EA]( "MENU/RESUME_LEVEL" )
	}
	local f22_local3
	if f22_local1 then
		f22_local3 = Engine[0xED84C33EC5F01EA]( "MENU/RESUMEGAME_MESSAGE_RESTART" )
		if not f22_local3 then
		
		else
			f22_local2.messageText = f22_local3
			f22_local2.controllerIndex = f22_arg1.controllerIndex
			f22_local2.buttons = {
				{
					label = Engine[0xED84C33EC5F01EA]( "MENU/RESUME" ),
					disabled = f22_local1,
					action = f0_local0
				},
				{
					label = Engine[0xED84C33EC5F01EA]( "MENU/RESTART" ),
					action = function ( f24_arg0, f24_arg1 )
						f22_arg0( f24_arg0, f24_arg1, f22_arg0 )
					end
				}
			}
			f22_local2.shouldPlayButtonSound = f22_arg1.shouldPlayButtonSound
			f22_local3 = MenuBuilder.BuildRegisteredType( "MessagePopup", f22_local2 )
			f22_local3.id = "ResumeOrRestartPopup"
			if f22_local1 then
				f22_local3:addEventHandler( "update_save_game_available_complete", function ( f23_arg0, f23_arg1 )
					local f23_local0 = f22_arg0:GetButtonAtIndex( 0 )
					f23_local0:SetButtonDisabled( false )
				end )
			end
			return f22_local3
		end
	end
	f22_local3 = Engine[0xED84C33EC5F01EA]( "MENU/RESUME_LEVEL_MESSAGE_Q", f22_arg1.levelName or "" )
end

function OverwriteSaveWarningPopup( f20_arg0, f20_arg1 )
	assert( f20_arg1 )
	local f20_local0 = MenuBuilder.BuildRegisteredType( "PopupYesNo", {
		showBG = true,
		headerText = Engine[0xED84C33EC5F01EA]( "MENU/START_MISSION" ),
		messageText = Engine[0xED84C33EC5F01EA]( "MENU/WARNING_CHECKPOINT_RESET" ),
		controllerIndex = f20_arg1.controllerIndex,
		actionParams = {
			mapName = f20_arg1.mapName
		},
		yesAction = function ( f21_arg0, f21_arg1, f21_arg2 )
			local f21_local0 = MenuBuilder.BuildRegisteredType( "SPPauseDifficultyFlyin", {
				controllerIndex = f21_arg1
			} )
			f21_local0:SetMap( f21_arg2.mapName )
			LUI.FlowManager.RequestPopupMenu( nil, "FlyInPopup", true, f21_arg1, false, {
				widget = f21_local0
			} )
		end
	} )
	f20_local0.id = "OverwriteSaveWarningPopup"
	return f20_local0
end

function OpenFirstLevel( f19_arg0, f19_arg1 )
	LUI.FlowManager.RequestLeaveMenu( f19_arg0 )
	local f19_local0 = SPSharedUtils.GetFirstLevel()
	local f19_local1 = MenuBuilder.BuildRegisteredType( "SPPauseDifficultyFlyin", {
		controllerIndex = f19_arg1
	} )
	f19_local1:SetMap( f19_local0 )
	local f19_local2 = Engine[0xEE6F69FEA944B13]()
	local f19_local3 = LUI.FlowManager.GetTopMostOpenMenuInfo( f19_local2.flowManager )
	LUI.FlowManager.RequestPopupMenu( nil, "FlyInPopup", true, f19_arg1, false, {
		widget = f19_local1
	}, nil, nil, nil, nil, f19_local3.isPopup )
end

function overwrite_warning_menu()
	local f18_local0 = MenuBuilder.BuildRegisteredType( "PopupYesNo", {
		headerText = Engine[0xED84C33EC5F01EA]( "MENU/NEWGAME" ),
		messageText = Engine[0xED84C33EC5F01EA]( "MENU/WARNING_CHECKPOINT_RESET" ),
		controllerIndex = Engine[0x45B054C920178E9](),
		yeslabel = Engine[0xED84C33EC5F01EA]( "MENU/YES_CAPS" ),
		yesAction = OpenFirstLevel,
		noLabel = Engine[0xED84C33EC5F01EA]( "MENU/NO_CAPS" ),
		noAction = MenuBuilder.helpers.LeaveMenu(),
		showBG = true
	} )
	f18_local0.id = "OverwriteWarningPopup"
	return f18_local0
end

function popmenu_autosave_warning()
	local f17_local0 = MenuBuilder.BuildRegisteredType( "PopupConfirm", {
		headerText = Engine[0xED84C33EC5F01EA]( "MENU/NOTICE" ),
		messageText = Engine[0xED84C33EC5F01EA]( "PLATFORM/WARNING_AUTOSAVE" ),
		controllerIndex = Engine[0x45B054C920178E9](),
		label = Engine[0xED84C33EC5F01EA]( "MENU/CONTINUE" ),
		action = OpenFirstLevel,
		showBG = true
	} )
	f17_local0.id = "AutosaveWarningPopup"
	return f17_local0
end

function FakeLoadingScreenOverlayPopup( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "video_root_id"
	local f13_local1 = LUI.Cinematic.new()
	f13_local1.id = "bink"
	self:addElement( f13_local1 )
	self:registerEventHandler( "menu_create", function ( self, event )
		Engine[0xCFD2C5E2E3C4014]()
		Engine[0xFCF332AA8AC9B0F]( "default", VideoPlaybackFlags.LOOP )
		self.HelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
			controllerIndex = menu.controllerIndex
		} )
		self.HelperBar.id = "HelperBar"
		self.HelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, _1080p * -85, 0 )
		self.HelperBar:setPriority( 0 )
		self:addElement( self.HelperBar )
		
		local bindButton = LUI.UIBindButton.new()
		bindButton.id = "selfBindButton"
		self:addElement( bindButton )
		self.bindButton = bindButton
		
	end )
	local f13_local2 = 2000
	local f13_local3 = 12000
	local f13_local4 = LUI.UITimer.new( {
		event = "fastfiles_loaded_poll",
		interval = f13_local2
	} )
	f13_local4.id = "timer"
	self:addElement( f13_local4 )
	local f13_local5 = false
	local f13_local6 = false
	local f13_local7 = 0
	self:registerEventHandler( "fastfiles_loaded_poll", function ( self, event )
		if Engine[0xB47EFEF093F744D]() and not menu then
			menu = true
			if menu.onLoadCompleteFunc then
				menu.onLoadCompleteFunc()
			end
			menu:closeTree()
			menu = nil
		elseif not menu then
			menu = menu + menu
			if menu < menu then
				menu = true
				self.HelperBar.ButtonHelperText:PushButtonPrompt( {
					side = "left",
					button_ref = "button_secondary",
					helper_text = Engine[0xED84C33EC5F01EA]( "LUA_MENU/BACK" )
				} )
				self.bindButton:registerEventHandler( "button_secondary", function ( self, event )
					ACTIONS.LeaveMenu()
				end )
			end
		end
	end )
	self:processEvent( {
		name = "fastfiles_loaded_poll"
	} )
	LUI.TextChat.SetupMenuForNoChat( self )
	return self
end

function FakeLoadingScreenOverlayPop()
	Engine[0x3DACD106DDC0D71]()
end

function popup_warn_sp_progress_not_online()
	Engine[0xBD88E4AB0091920]( PauseReason.SAVE_DATA_ERROR )
	local f10_local0 = MenuBuilder.BuildRegisteredType( "PopupConfirm", {
		headerText = Engine[0xED84C33EC5F01EA]( "MENU/SP_NO_ONLINE_PROGRESS" ),
		controllerIndex = Engine[0x45B054C920178E9](),
		action = function ( f11_arg0 )
			Engine[0xFAF6652413F4C6C]( PauseReason.SAVE_DATA_ERROR )
			LUI.FlowManager.RequestLeaveMenu( f11_arg0 )
		end,
		noBackButton = true,
		showBG = true
	} )
	f10_local0.id = "OfflineSPWarningPopup"
	return f10_local0
end

function campaign_mode_anticheat_warning_popup( f7_arg0, f7_arg1 )
	local f7_local0 = f7_arg1.lastUnlockedMission
	local f7_local1 = function ()
		Engine[0xFAF6652413F4C6C]( PauseReason.SAVE_DATA_ERROR )
	end
	
	local f7_local2 = MenuBuilder.BuildRegisteredType( "MessagePopup", {
		defaultFocusIndex = 1,
		showBG = true,
		buttonsClosePopup = true,
		width = 600,
		headerText = Engine[0xED84C33EC5F01EA]( "MENU_SP/ANTI_CHEAT_WARNING_TITLE" ),
		controllerIndex = Engine[0x45B054C920178E9](),
		messageText = Engine[0xED84C33EC5F01EA]( "MENU_SP/ANTI_CHEAT_WARNING_MESSAGE", f7_local0 ),
		cancelAction = f7_local1,
		buttons = {
			{
				label = Engine[0xED84C33EC5F01EA]( "MENU_SP/ANTI_CHEAT_WARNING_QUIT" ),
				action = function ( f8_arg0, f8_arg1 )
					Dvar[0x8EA06EEDB58D872]( "#x3e628a523d0bfee6f", true )
					Engine[0x7C75E608EA39B5C]( "disconnect" )
					PreGame.EndDuckAudio()
					Engine[0x433043D1F47DE58]()
				end
			},
			{
				label = Engine[0xED84C33EC5F01EA]( "MENU_SP/ANTI_CHEAT_WARNING_CONTINUE" ),
				action = f7_local1
			}
		}
	} )
	f7_local2.id = "SPAnticheatWarningPopup"
	return f7_local2
end

function ChoosePlanePitchMidway( f4_arg0, f4_arg1 )
	local f4_local0 = MenuBuilder.BuildRegisteredType( "MessagePopup", {
		buttonsClosePopup = true,
		headerText = Engine[0xED84C33EC5F01EA]( "LUA_MENU/TOGGLE_PITCH_INVERSION" ),
		messageText = Engine[0xED84C33EC5F01EA]( "SP_MIDWAY/CHOOSE_PITCH_MESSAGE" ),
		controllerIndex = f4_arg1.controllerIndex,
		buttons = {
			{
				label = Engine[0xED84C33EC5F01EA]( "SP_MIDWAY/INVERTED_CONTROLS" ),
				action = function ( f6_arg0, f6_arg1 )
					Dvar[0x8EA06EEDB58D872]( "#x35569589a8258d1d6", true )
					Engine[0xFAF6652413F4C6C]( PauseReason.KEY_INPUT )
				end
			},
			{
				label = Engine[0xED84C33EC5F01EA]( "SP_MIDWAY/STANDARD_CONTROLS" ),
				action = function ( f5_arg0, f5_arg1 )
					Dvar[0x8EA06EEDB58D872]( "#x35569589a8258d1d6", false )
					Engine[0xFAF6652413F4C6C]( PauseReason.KEY_INPUT )
				end
			}
		}
	} )
	f4_local0.id = "SPChoosePlanePitchMidwayPopup"
	return f4_local0
end

function InvertPlanePitchMidway( f1_arg0, f1_arg1 )
	local f1_local0 = MenuBuilder.BuildRegisteredType( "MessagePopup", {
		buttonsClosePopup = true,
		headerText = Engine[0xED84C33EC5F01EA]( "LUA_MENU/TOGGLE_PITCH_INVERSION" ),
		messageText = Engine[0xED84C33EC5F01EA]( "SP_MIDWAY/INVERT_PITCH_MESSAGE" ),
		controllerIndex = f1_arg1.controllerIndex,
		buttons = {
			{
				label = Engine[0xED84C33EC5F01EA]( "LUA_MENU/YES" ),
				action = function ( f3_arg0, f3_arg1 )
					Dvar[0x8EA06EEDB58D872]( "#x35569589a8258d1d6", not Dvar[0x9E5BE3B4BBA4E0E]( "#x35569589a8258d1d6" ) )
					Engine[0xFAF6652413F4C6C]( PauseReason.KEY_INPUT )
				end
			},
			{
				label = Engine[0xED84C33EC5F01EA]( "LUA_MENU/NO" ),
				action = function ( f2_arg0, f2_arg1 )
					Engine[0xFAF6652413F4C6C]( PauseReason.KEY_INPUT )
				end
			}
		}
	} )
	f1_local0.id = "SPInvertPlanePitchMidwayPopup"
	return f1_local0
end

MenuBuilder.registerType( "QuitGamePopup", QuitGamePopup )
MenuBuilder.registerType( "OverwriteSaveWarningPopup", OverwriteSaveWarningPopup )
MenuBuilder.registerType( "ResumeOrRestartPopup", ResumeOrRestartPopup )
MenuBuilder.registerType( "RestartMissionPopup", RestartMissionPopup )
MenuBuilder.registerType( "ResumeGamePopup", ResumeGamePopup )
MenuBuilder.registerType( "CheckpointPopup", CheckpointPopup )
MenuBuilder.registerType( "OverwriteWarningPopup", overwrite_warning_menu )
MenuBuilder.registerType( "AutosaveWarningPopup", popmenu_autosave_warning )
MenuBuilder.registerType( "FakeLoadingScreenOverlayPopup", FakeLoadingScreenOverlayPopup )
MenuBuilder.registerType( "OfflineSPWarningPopup", popup_warn_sp_progress_not_online )
MenuBuilder.registerType( "SPAnticheatWarningPopup", campaign_mode_anticheat_warning_popup )
MenuBuilder.registerType( "SPInvertPlanePitchMidwayPopup", InvertPlanePitchMidway )
MenuBuilder.registerType( "SPChoosePlanePitchMidwayPopup", ChoosePlanePitchMidway )
LUI.FlowManager.RegisterStackPopBehaviour( "FakeLoadingScreenOverlayPopup", FakeLoadingScreenOverlayPop )
LockTable( _M )
