-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
CodcasterVisualStates = CodcasterVisualStates or {}
CodcasterVisualStates.SOURCE_TYPES = {
	DATASOURCE = "datasource",
	EVENT = "event"
}
CodcasterVisualStates.AnimateSequenceIncludingChildren = function ( f19_arg0, f19_arg1, f19_arg2 )
	local f19_local0 = 1
	if f19_arg2.onComplete then
		local f19_local1 = 0
		f19_arg2.onComplete = function ()
			f19_arg0 = f19_arg0 + 1
			if f19_arg0 <= f19_arg0 then
				f19_arg0()
			end
		end
		
	end
	if f19_arg2.animateChildren and f19_arg0:getFirstChild() then
		
	else
		
	end
	ACTIONS.AnimateSequence( f19_arg0, f19_arg1, f19_arg2 )
end

local f0_local0 = function ( f18_arg0, f18_arg1, f18_arg2 )
	for f18_local3, f18_local4 in ipairs( f18_arg0._visualStates ) do
		if f18_local4.condition( f18_arg0, f18_arg1, f18_arg2 ) == true then
			return f18_local4
		end
	end
	return nil
end

local f0_local1 = function ( f15_arg0, f15_arg1, f15_arg2, f15_arg3 )
	local f15_local0 = {}
	LUI.AppendToKeyTable( f15_local0, f15_arg3 )
	local f15_local1 = f15_arg2.preState
	if f15_local1 then
		f15_local1( f15_arg0, f15_arg1, f15_local0 )
	end
	local f15_local2 = f0_local0( f15_arg0, f15_arg1, f15_local0 )
	if f15_local2 then
		local f15_local3 = f15_local2.name
		local f15_local4 = f15_local2.refresh
		local f15_local5 = f15_local3 ~= f15_arg0._currentVisualState
		if f15_local5 or f15_local4 then
			local f15_local6 = {}
			f15_local0.isRefresh = not f15_local5
			f15_arg0._currentVisualStateReference = f15_local6
			f15_arg0._currentVisualState = f15_local3
			local f15_local7 = f15_local2.animateChildren
			if f15_local2.animate then
				CodcasterVisualStates.AnimateSequenceIncludingChildren( f15_arg0, f15_local2.stateAnimation or f15_local3, {
					animateChildren = f15_local7
				} )
			end
			if f15_local2.handle and f15_arg2.onState then
				f15_arg2.onState( f15_arg0, f15_arg1, f15_local0 )
			end
			local f15_local8 = f15_local2.stateHandler
			if f15_local8 then
				f15_local8( f15_arg0, f15_arg1, f15_local0 )
			end
			local f15_local9 = nil
			local f15_local10 = f15_local2.visibilityEnum
			local f15_local11 = f15_local2.postAnimationsHandler
			if f15_local10 or f15_local11 then
				f15_local9 = function ( f17_arg0, f17_arg1, f17_arg2, f17_arg3 )
					if f17_arg3.stateReference ~= f17_arg0._currentVisualStateReference then
						return 
					elseif f17_arg3.canChangeVisibility then
						local f17_local0 = f17_arg3.visibilityEnum
						if f17_local0 then
							f17_arg0:SetVisibility( f17_local0 )
						end
					end
					if f17_arg3.canHandlePostAnimations then
						local f17_local0 = f17_arg3.postAnimationsHandler
						if f17_local0 then
							f17_local0( f17_arg0, f17_arg1, f17_arg2 )
						end
					end
				end
				
			end
			local f15_local12 = f15_local2.visibilityLast
			local f15_local13
			if not f15_local5 then
				f15_local13 = f15_local5
			elseif f15_local4 then
				f15_local13 = f15_local4
			else
				f15_local13 = f15_local2.refreshAnimations
			end
			local f15_local14 = nil
			if f15_local13 then
				local f15_local15 = f15_local2.animationsFunction
				if f15_local15 then
					local f15_local16 = f15_local15( f15_arg0, f15_arg1, f15_arg3 )
					if not f15_local16 then
						f15_local14 = f15_local16
					end
				end
				f15_local14 = f15_local2.animations
			end
			if f15_local9 and (not f15_local12 or not f15_local14) then
				f15_local9( f15_arg0, f15_arg1, f15_arg3, {
					stateReference = f15_local6,
					visibilityEnum = f15_local10,
					canChangeVisibility = not f15_local12,
					postAnimationsHandler = f15_local11,
					canHandlePostAnimations = not f15_local14
				} )
			end
		end
		local f15_local6 = f15_arg2.postState
		if f15_local6 then
			f15_local6( f15_arg0, f15_arg1, f15_local0 )
		end
	end
end

local f0_local2 = function ( f14_arg0, f14_arg1, f14_arg2, f14_arg3 )
	for f14_local0 = #f14_arg3, 1, -1 do
		local f14_local3 = f14_arg3[f14_local0].createCondition
		if f14_local3 and not f14_local3( f14_arg0, f14_arg1, f14_arg2 ) then
			table.remove( f14_arg3, f14_local0 )
		end
	end
end

CodcasterVisualStates.SetupHandler = function ( f11_arg0, f11_arg1, f11_arg2, f11_arg3, f11_arg4, f11_arg5 )
	assert( not f11_arg0._visualStates, "Only a single visual state handler can be setup per element." )
	if not f11_arg4 then
		f11_arg4 = {}
	end
	if not f11_arg5 then
		f11_arg5 = {}
	end
	local f11_local0 = f11_arg3.dataSources
	local f11_local1 = {
		dataSources = f11_local0
	}
	if f11_arg5.checkCreate then
		f0_local0( f11_arg0, f11_arg1, f11_local1, f11_arg2 )
	end
	f11_arg0._visualStates = f11_arg2
	local f11_local2 = function ( f12_arg0 )
		return function ()
			local f13_local0 = f12_arg0[1]
			local f13_local1 = f12_arg0[2]
			local f13_local2 = f12_arg0[3]
			local f13_local3 = f12_arg0[4]
			local f13_local4 = {}
			...
			CoDLuaDecompiler.Decompiler.IR.Instruction.SetTableMultres
			f13_local3.handlerParameters = f13_local4
			f12_arg0( f13_local0, f13_local1, f13_local2, f13_local3 )
		end
		
	end
	
	if f11_local0 then
		f11_arg0._visualStatesDataSources = f11_local0
		for f11_local6, f11_local7 in pairs( f11_local0 ) do
			local f11_local8 = {
				sourceName = f11_local7._modelPath or f11_local7._omnvarName,
				sourceType = CodcasterVisualStates.SOURCE_TYPES.DATASOURCE
			}
			LUI.AppendToKeyTable( f11_local8, f11_local1 )
			f11_arg0:SubscribeToModel( f11_local7:GetModel( f11_arg1 ), f11_local2( {
				f11_arg0,
				f11_arg1,
				f11_arg4,
				f11_local8
			} ) )
		end
	end
	local f11_local3 = f11_arg3.events
	if f11_local3 then
		for f11_local7, f11_local8 in pairs( f11_local3 ) do
			local f11_local9 = {
				sourceName = f11_local8,
				sourceType = CodcasterVisualStates.SOURCE_TYPES.EVENT
			}
			LUI.AppendToKeyTable( f11_local9, f11_local1 )
			f11_arg0:addAndCallEventHandler( f11_local8, f11_local2( {
				f11_arg0,
				f11_arg1,
				f11_arg4,
				f11_local9
			} ) )
		end
	end
end

CodcasterVisualStates.GetCurrentVisualState = function ( f10_arg0 )
	return f10_arg0._currentVisualState
end

CodcasterVisualStates.GetEventFromVisualStateOptions = function ( f9_arg0 )
	return f9_arg0.handlerParameters[2]
end

CodcasterVisualStates.NotifyParentDestroyReady = function ( f8_arg0, f8_arg1 )
	local f8_local0 = f8_arg0:getParent()
	if f8_local0 then
		f8_local0:processEventNoDispatch( {
			name = CODCASTER.EVENTS.CHILD_DESTROY_READY,
			childId = f8_arg0.id,
			notifyData = f8_arg1
		} )
	end
end

CodcasterVisualStates.GetChildDestroyReadyNotify = function ( f7_arg0 )
	if f7_arg0.sourceName == CODCASTER.EVENTS.CHILD_DESTROY_READY then
		return CodcasterVisualStates.GetEventFromVisualStateOptions( f7_arg0 )
	else
		return {}
	end
end

CodcasterVisualStates.SetupNameplatesVisualStates = function ( f4_arg0, f4_arg1 )
	CodcasterVisualStates.SetupHandler( f4_arg0, f4_arg1, {
		{
			name = "Visible",
			visibilityEnum = LUI.Visibility.Visible,
			condition = function ( f6_arg0, f6_arg1, f6_arg2 )
				local f6_local0 = EsportsConditions.IsHUDVisible( f6_arg1 )
				local f6_local1 = CODCASTER_SETTINGS.GetSettingValue( f6_arg1, "codcaster_nameplates" )
				local f6_local2
				if f6_local0 then
					f6_local2 = f6_local0
				else
					f6_local2 = f6_local1
				end
				return f6_local2
			end
		},
		{
			name = "Hidden",
			visibilityEnum = LUI.Visibility.Hidden,
			condition = function ( f5_arg0, f5_arg1, f5_arg2 )
				return true
			end
		}
	}, {
		events = {
			"codcaster_hidelayer" .. CODCASTER.EVENT_TYPES.SETTING_CHANGED,
			"codcaster_nameplates" .. CODCASTER.EVENT_TYPES.SETTING_CHANGED
		}
	} )
end

CodcasterVisualStates.SetupObjectivesVisualStates = function ( f1_arg0, f1_arg1 )
	CodcasterVisualStates.SetupHandler( f1_arg0, f1_arg1, {
		{
			name = "Visible",
			visibilityEnum = LUI.Visibility.Visible,
			condition = function ( f3_arg0, f3_arg1, f3_arg2 )
				local f3_local0 = EsportsConditions.IsHUDVisible( f3_arg1 )
				local f3_local1 = CODCASTER_SETTINGS.GetSettingValue( f3_arg1, "codcaster_waypoint_markers" )
				local f3_local2
				if f3_local1 then
					f3_local2 = f3_local1
				else
					f3_local2 = f3_local0
				end
				return f3_local2
			end
		},
		{
			name = "Hidden",
			visibilityEnum = LUI.Visibility.Hidden,
			condition = function ( f2_arg0, f2_arg1, f2_arg2 )
				return true
			end
		}
	}, {
		events = {
			"codcaster_hidelayer" .. CODCASTER.EVENT_TYPES.SETTING_CHANGED,
			"codcaster_waypoint_markers" .. CODCASTER.EVENT_TYPES.SETTING_CHANGED
		}
	} )
end

