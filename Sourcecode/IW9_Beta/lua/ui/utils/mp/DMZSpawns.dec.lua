-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
DMZSPAWNS = DMZSPAWNS or {}
DMZSPAWNS.MIN_DIST_FROM_OTHER_SPAWNS = 1000
DMZSPAWNS.MAX_QUADS = 4
DMZSPAWNS.DEBUG_QUAD_TEXT = {
	"North West",
	"North East",
	"South West",
	"South East",
	"None"
}
local f0_local0 = function ( f9_arg0, f9_arg1 )
	local f9_local0 = LUI.ShallowCopy( f9_arg0 )
	local f9_local1 = f9_arg1
	local f9_local2 = #f9_arg0 + 1
	for f9_local3 = 0, #f9_arg0, 1 do
		f9_local1 = (f9_local1 * 29 + 19) % 65535
		local f9_local6 = f9_local1 % f9_local2
		local f9_local7 = f9_local0[f9_local3]
		f9_local0[f9_local3] = f9_local0[f9_local6]
		f9_local0[f9_local6] = f9_local7
	end
	return f9_local0, f9_local1
end

local f0_local1 = function ( f8_arg0, f8_arg1 )
	local f8_local0 = {}
	local f8_local1 = 0
	local f8_local2 = f8_arg1
	for f8_local3 = 0, DMZSPAWNS.MAX_QUADS - 1, 1 do
		if f8_arg0[f8_local3] ~= nil then
			f8_local0[f8_local1] = {}
			f8_local0[f8_local1], f8_local2 = f0_local0( f8_arg0[f8_local3], f8_local2 )
			f8_local1 = f8_local1 + 1
		end
	end
	return f8_local0
end

local f0_local2 = function ()
	return {
		saba_airport = Dvar[0x22EAAB59AA27E9B]( 0xA24DCC79DB73B42 ),
		saba_caves = Dvar[0x22EAAB59AA27E9B]( 0x61204F6D7F2DE2B ),
		saba_exhume = Dvar[0x22EAAB59AA27E9B]( 0x17F2A3E5B3BE083 ),
		saba_fort = Dvar[0x22EAAB59AA27E9B]( 0x76D6EDC3B973A5A ),
		saba_hydro = Dvar[0x22EAAB59AA27E9B]( 0x7D075D837C409DB ),
		saba_oilfield = Dvar[0x22EAAB59AA27E9B]( 0x6095CAB91FE08D7 ),
		saba_observatory = Dvar[0x22EAAB59AA27E9B]( 0x8952BF769D19CA1 ),
		saba_wartorn = Dvar[0x22EAAB59AA27E9B]( 0xF8E3ECF7F5C5756 ),
		saba_marshland = Dvar[0x22EAAB59AA27E9B]( 0xBCC24802E86CC7F ),
		saba_oldtwn = Dvar[0x22EAAB59AA27E9B]( 0x770A46C3F38A07D ),
		saba_mtntwn = Dvar[0x22EAAB59AA27E9B]( 0x17DA1D393BEE005 ),
		saba_moderncity = Dvar[0x22EAAB59AA27E9B]( 0x94C0064150BB3BF ),
		saba_fishtown = Dvar[0x22EAAB59AA27E9B]( 0xAFA04062808B6D5 ),
		saba_suburbs_01 = Dvar[0x22EAAB59AA27E9B]( 0x576F2F246803B43 ),
		saba_suburbs_02 = Dvar[0x22EAAB59AA27E9B]( 0x576F3F246803D76 ),
		saba_suburbs_03 = Dvar[0x22EAAB59AA27E9B]( 0x576F4F246803FA9 ),
		saba_suburbs_10 = Dvar[0x22EAAB59AA27E9B]( 0x57AF7F246843C19 ),
		saba_suburbs_11 = Dvar[0x22EAAB59AA27E9B]( 0x57AF6F2468439E6 ),
		saba_suburbs_12 = Dvar[0x22EAAB59AA27E9B]( 0x57AF5F2468437B3 ),
		saba_suburbs_13 = Dvar[0x22EAAB59AA27E9B]( 0x57AF4F246843580 ),
		saba_suburbs_14 = Dvar[0x22EAAB59AA27E9B]( 0x57AFBF2468444E5 ),
		dmz_spawnOuterEdge = Dvar[0x22EAAB59AA27E9B]( "scr_dmz_spawnOuterEdge" ),
		[0] = Dvar[0x22EAAB59AA27E9B]( "scr_dmz_spawnDisableNW" ) or 0,
		[1] = Dvar[0x22EAAB59AA27E9B]( "scr_dmz_spawnDisableNE" ) or 0,
		[2] = Dvar[0x22EAAB59AA27E9B]( "scr_dmz_spawnDisableSW" ) or 0,
		[3] = Dvar[0x22EAAB59AA27E9B]( "scr_dmz_spawnDisableSE" ) or 0
	}
end

local f0_local3 = function ( f6_arg0 )
	DebugPrint( "--------Start Spawn Point Debug------------" )
	for f6_local0 = 0, #f6_arg0, 1 do
		DebugPrint( "Quad: " .. f6_local0 )
		DebugPrint( "----------------------------------" )
		for f6_local3 = 0, #f6_arg0[f6_local0], 1 do
			DebugPrint( "Point " .. f6_local3 .. ": " .. "( " .. f6_arg0[f6_local0][f6_local3].origin.x .. ", " .. f6_arg0[f6_local0][f6_local3].origin.y .. ", " .. f6_arg0[f6_local0][f6_local3].origin.z .. " )" )
		end
		DebugPrint( "----------------------------------" )
	end
	DebugPrint( "--------End Spawn Point Debug------------" )
end

local f0_local4 = function ( f5_arg0, f5_arg1, f5_arg2, f5_arg3, f5_arg4, f5_arg5 )
	DebugPrint( "--------Start Chosen Spawn Debug------------" )
	DebugPrint( "Chosen Spawn ID: " .. f5_arg0.id )
	DebugPrint( "Chosen Spawn Origin: " .. "( " .. f5_arg0.origin.x .. ", " .. f5_arg0.origin.y .. ", " .. f5_arg0.origin.z .. " )" )
	DebugPrint( "Player Team: " .. f5_arg1.team )
	DebugPrint( "Player Member Index: " .. f5_arg1.memberIndex )
	DebugPrint( "Seed Used / Lobby ID: " .. f5_arg2 )
	DebugPrint( "Spawn Set: " .. f5_arg3 )
	DebugPrint( "Player Data Index: " .. f5_arg5 )
	if f5_arg3 == "Fallback Spawn Chosen" then
		DebugPrint( "Spawn Quadrant: " .. DMZSPAWNS.DEBUG_QUAD_TEXT[4] )
	else
		DebugPrint( "Spawn Quadrant: " .. DMZSPAWNS.DEBUG_QUAD_TEXT[f5_arg4] )
	end
	DebugPrint( "--------End Chosen Spawn Debug------------" )
end

local f0_local5 = function ( f4_arg0 )
	DebugPrint( "--------Start Lobby Client Info Debug------------" )
	DebugPrint( "Squad: " .. f4_arg0.squad )
	DebugPrint( "Team: " .. f4_arg0.team )
	DebugPrint( "Member Index: " .. f4_arg0.memberIndex )
	DebugPrint( "--------End Lobby Client Info Debug------------" )
end

local f0_local6 = function ( f3_arg0, f3_arg1 )
	local f3_local0 = f3_arg1:GetValue( f3_arg0.controllerIndex )
	if f3_local0 == nil then
		f3_local0 = 0
	else
		
	end
	local f3_local1 = LUI.DataSourceFromList.new( f3_arg1 )
	f3_local1.MakeDataSourceAtIndex = Lobby.GetLobbyMemberDataSourceAtIndex( f3_arg0.modelPath )
	local f3_local2 = {}
	local f3_local3 = 0
	if f3_local0 == 1 then
		local f3_local4 = f3_local1:MakeDataSourceAtIndex( 0, f3_arg0.controllerIndex )
		local f3_local5 = f3_local4.squad:GetValue( 0 ) or "nil"
		local f3_local6 = f3_local4.team:GetValue( 0 ) or "nil"
		local f3_local7 = f3_local4.memberIndex:GetValue( 0 ) or "nil"
		f3_local3 = math.random( 0, 3 )
		f3_local2 = {
			squad = f3_local5,
			team = f3_local6,
			memberIndex = f3_local7
		}
	else
		for f3_local4 = 0, f3_local0 - 1, 1 do
			local f3_local8 = f3_local1:MakeDataSourceAtIndex( f3_local4, f3_arg0.controllerIndex )
			if (f3_local8.isMyPlayer:GetValue( f3_local4 ) or "nil") == true then
				f3_local2 = {
					squad = f3_local8.squad:GetValue( f3_local4 ) or "nil",
					team = f3_local8.team:GetValue( f3_local4 ) or "nil",
					memberIndex = f3_local8.memberIndex:GetValue( f3_local4 ) or "nil"
				}
			end
		end
		for f3_local4 = 0, f3_local0 - 1, 1 do
			local f3_local8 = f3_local1:MakeDataSourceAtIndex( f3_local4, f3_arg0.controllerIndex )
			if (f3_local8.memberIndex:GetValue( f3_local4 ) or "nil") < f3_local2.memberIndex then
				f3_local3 = f3_local3 + 1
			end
		end
	end
	return f3_local2, f3_local3
end

DMZSPAWNS.DMZParseSpawnCSV = function ( f2_arg0 )
	local f2_local0 = StringTable[0xFD4E49A34DD43AE]( CSV.dmzSpawnPoints.file )
	assert( 0 < f2_local0 )
	local f2_local1 = f0_local0()
	local f2_local2 = {}
	local f2_local3 = {}
	if 0 < f2_local0 then
		local f2_local4 = {}
		local f2_local5 = {}
		for f2_local6 = 0, f2_local0 - 1, 1 do
			local f2_local9 = CSV.ReadRow( CSV.dmzSpawnPoints, f2_local6 )
			f2_local9.origin = LUI.Split( f2_local9.origin, "," )
			f2_local9.origin = {
				x = tonumber( f2_local9.origin[1] ),
				y = tonumber( f2_local9.origin[2] ),
				z = tonumber( f2_local9.origin[3] )
			}
			f2_local9.angle = LUI.Split( f2_local9.angle, "," )
			f2_local9.angle = {
				x = tonumber( f2_local9.angle[1] ),
				y = tonumber( f2_local9.angle[2] ),
				z = tonumber( f2_local9.angle[3] )
			}
			local f2_local10 = 0
			local f2_local11 = false
			local f2_local12 = false
			if string.sub( f2_local9.script_noteworthy, 1, -2 ) == "dmz_squadSpawnPoint_GLOuterEdge" and f2_local1.dmz_spawnOuterEdge ~= 1 then
				f2_local11 = true
			elseif f2_local1.dmz_spawnOuterEdge == 1 and string.sub( f2_local9.script_noteworthy, 1, -2 ) ~= "dmz_squadSpawnPoint_GLOuterEdge" then
				f2_local11 = true
			elseif f2_local1.dmz_spawnOuterEdge == 1 and string.sub( f2_local9.script_noteworthy, 1, -2 ) == "dmz_squadSpawnPoint_GLOuterEdge" then
				local f2_local13
				if f2_local9.origin.x < 0 then
					f2_local13 = -1
				else
					f2_local13 = 0
				end
				local f2_local14
				if f2_local9.origin.y < 0 then
					f2_local14 = 3
				else
					f2_local14 = 1
				end
				f2_local10 = f2_local13 + f2_local14
				if f2_local1[f2_local10] ~= 0 then
					f2_local11 = true
				end
				if f2_local9.script_noteworthy == "dmz_squadSpawnPoint_GLOuterEdge2" then
					f2_local12 = true
				end
			elseif (f2_local1[f2_local9.poi] == nil or f2_local1[f2_local9.poi] == 0) and string.sub( f2_local9.script_noteworthy, 1, -2 ) ~= "dmz_squadSpawnPoint_GLOuterEdge" then
				f2_local11 = true
			end
			if f2_local9.poi == "None" then
				f2_local9.poi = ""
			end
			if f2_local11 == false then
				if f2_local12 == false then
					if f2_local2[f2_local10] == nil then
						f2_local2[f2_local10] = {}
					end
					if f2_local4[f2_local10] == nil then
						f2_local4[f2_local10] = 0
					end
					f2_local2[f2_local10][f2_local4[f2_local10]] = {
						dist = 0,
						poi = f2_local9.poi,
						origin = f2_local9.origin,
						angle = f2_local9.angle,
						target_name = f2_local9.target_name,
						target = f2_local9.target,
						script_noteworthy = f2_local9.script_noteworthy,
						spawn_flags = f2_local9.spawn_flags,
						id = f2_local9.id
					}
					f2_local4[f2_local10] = f2_local4[f2_local10] + 1
				end
				if f2_local3[f2_local10] == nil then
					f2_local3[f2_local10] = {}
				end
				if f2_local5[f2_local10] == nil then
					f2_local5[f2_local10] = 0
				end
				f2_local3[f2_local10][f2_local5[f2_local10]] = {
					dist = 0,
					poi = f2_local9.poi,
					origin = f2_local9.origin,
					angle = f2_local9.angle,
					target_name = f2_local9.target_name,
					target = f2_local9.target,
					script_noteworthy = f2_local9.script_noteworthy,
					spawn_flags = f2_local9.spawn_flags,
					id = f2_local9.id
				}
				f2_local5[f2_local10] = f2_local5[f2_local10] + 1
			end
		end
	end
	f2_arg0.parent._startPoints = f2_local2
	f2_arg0.parent._startPointsSecondary = f2_local3
end

DMZSPAWNS.DMZSetSpawnPoints = function ( f1_arg0, f1_arg1 )
	local f1_local0, f1_local1 = f0_local0( f1_arg0, f1_arg1 )
	local f1_local2 = nil
	if Dvar[0x22EAAB59AA27E9B]( 0xA0BA5FF5AAC162D ) ~= nil then
		f1_local2 = Dvar[0x22EAAB59AA27E9B]( 0xA0BA5FF5AAC162D )
	else
		f1_local2 = BitwiseOperators.band( Lobby[0x12FE027CBF76CC2]( f1_arg0.controllerIndex ), 65535 )
	end
	local f1_local3 = f0_local0( f1_arg0.parent._startPoints, f1_local2 )
	local f1_local4 = f0_local0( f1_arg0.parent._startPointsSecondary, f1_local2 )
	if Engine[0x2DA54CF5D6B7F02]() or Engine[0xDD9D856EA1C159E]() then
		f0_local0( f1_local0 )
	end
	local f1_local5 = ""
	local f1_local6 = nil
	local f1_local7 = f1_local0.team
	local f1_local8 = #f1_local3 + 1
	local f1_local9 = math.floor( f1_local7 / f1_local8 )
	local f1_local10 = f1_local7 % f1_local8
	if f1_local3[f1_local10] ~= nil then
		f1_local6 = f1_local3[f1_local10][f1_local9]
		f1_local5 = "Primary Spawn Chosen"
	end
	if f1_local6 == nil and f1_local4[f1_local10] ~= nil then
		local f1_local11 = f1_local7
		if f1_local3[f1_local10] ~= nil then
			f1_local11 = f1_local9 - #f1_local3[f1_local10] + 1
		end
		f1_local6 = f1_local4[f1_local10][f1_local11]
		f1_local5 = "Secondary Spawn Chosen"
	end
	if f1_local6 == nil then
		f1_local6 = {
			id = 0,
			origin = {
				z = 20000,
				x = 0,
				y = 0
			}
		}
	end
	if Engine[0x2DA54CF5D6B7F02]() or Engine[0xDD9D856EA1C159E]() then
		f0_local0( f1_local6, f1_local0, f1_local2, f1_local5, f1_local10, f1_local1 )
	end
	Engine[0x69F5A94E6B3E31F]( {
		f1_local6.origin.x,
		f1_local6.origin.y,
		f1_local6.origin.z
	} )
end

