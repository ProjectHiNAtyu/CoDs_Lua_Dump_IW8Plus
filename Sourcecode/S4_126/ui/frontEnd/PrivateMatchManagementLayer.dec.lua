-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
LUI.PrivateMatchManagementLayer = LUI.Class( LUI.UIElement )
local f0_local0 = {
	GameModes = 1,
	GameSetup = 1,
	SocialMenu = 0
}
local f0_local1 = "PrivateMatchLobby"
local f0_local2 = "SystemLinkLobby"
local f0_local3 = "PrivateMatchLobbyPlayMenu"
local f0_local4 = function ( f61_arg0, f61_arg1 )
	for f61_local3, f61_local4 in pairs( f61_arg0 ) do
		if f61_arg1 == f61_local4 then
			return f61_local3, f61_local4
		end
	end
	return nil
end

local f0_local5 = function ( f60_arg0, f60_arg1, f60_arg2 )
	local f60_local0 = LUI.DeepCopy( f60_arg1 )
	if f60_arg2 then
		f60_local0[f60_arg2] = nil
	end
	for f60_local4, f60_local5 in pairs( f60_local0 ) do
		if f60_arg0 == f60_local5 then
			return true
		end
	end
	return false
end

local f0_local6 = function ( f59_arg0, f59_arg1 )
	for f59_local3, f59_local4 in ipairs( f59_arg1 ) do
		if f59_local4 == f59_arg0 then
			return f59_local3
		end
	end
	return 1
end

local f0_local7 = function ()
	local f58_local0 = Lobby[0x8864FF7F80A2610]()
	if not f58_local0 then
		assert( false, "Failed to retrieve player data." )
	end
	local f58_local1
	if not f58_local0 then
		f58_local1 = f58_local0
	else
		f58_local1 = {}
	end
	return f58_local1
end

local f0_local8 = function ( f57_arg0 )
	for f57_local3, f57_local4 in ipairs( f0_local0() ) do
		if f57_local4.isMyPlayer then
			Lobby[0x71EB040CB4339B2]( f57_local4.memberIndex, Teams.free, 0 )
		else
			Lobby[0x741180A5EFF7FE0]( f57_local4.memberIndex, Teams.free, 0 )
		end
	end
end

local f0_local9 = function ( f56_arg0, f56_arg1 )
	local f56_local0
	if not f56_arg1 then
		f56_local0 = f56_arg1
	else
		f56_local0 = Lobby[0x8864FF7F80A2610]()
	end
	for f56_local4, f56_local5 in ipairs( f56_local0 ) do
		if f56_arg0 == f56_local5.xuid then
			return f56_local5.memberIndex
		end
	end
	return nil
end

local f0_local10 = function ( f55_arg0, f55_arg1 )
	local f55_local0
	if not f55_arg1 then
		f55_local0 = f55_arg1
	else
		f55_local0 = Lobby[0x8864FF7F80A2610]()
	end
	for f55_local4, f55_local5 in ipairs( f55_local0 ) do
		if f55_arg0 == f55_local5.xuid then
			return f55_local5
		end
	end
	return nil
end

local f0_local11 = function ( f54_arg0, f54_arg1 )
	local f54_local0
	if not f54_arg1 then
		f54_local0 = f54_arg1
	else
		f54_local0 = Lobby[0x8864FF7F80A2610]()
	end
	for f54_local4, f54_local5 in ipairs( f54_local0 ) do
		if f54_arg0 == f54_local5.xuid then
			return f54_local5.isMyPlayer
		end
	end
	return nil
end

local f0_local12 = function ( f53_arg0, f53_arg1 )
	local f53_local0 = Lobby.GetAcceptableTeams()
	local f53_local1 = {}
	for f53_local2 = 1, #f53_local0, 1 do
		table.insert( f53_local1, f53_local2, {} )
	end
	local f53_local2 = f0_local0()
	for f53_local6, f53_local7 in ipairs( f53_local2 ) do
		local f53_local8 = f53_local7.desiredTeam
		if (not f53_arg1 or f53_arg1 ~= f53_local7.xuid) and f53_local8 and f53_local8 > Teams.free then
			f53_local1[f0_local0( f53_local8, f53_local0 )][f53_local7.xuid] = f53_local7.teamMemberIndex + 1
		end
	end
	return f53_local1, f53_local0, f53_local2
end

local f0_local13 = function ( f52_arg0, f52_arg1 )
	for f52_local3, f52_local4 in pairs( f52_arg1 ) do
		if f52_local4 == f52_arg0 then
			return true
		end
	end
	return false
end

local f0_local14 = function ()
	local f51_local0 = MP_COMMON.IsMatchRulesCodcastingEnabled( false )
	CODCASTER.SetCodcastingEnabled( f51_local0 )
	Lobby[0x2AC4DDCF8B7CCCA]( f51_local0 )
end

local f0_local15 = function ( f50_arg0, f50_arg1 )
	local f50_local0
	if not f50_arg1 then
		f50_local0 = f50_arg1
	else
		f50_local0 = f0_local0()
	end
	if Lobby.IsSplitScreenEnabled() then
		local f50_local1 = Engine[0x29DFACECF20DE0E]( f50_arg0 )
		for f50_local5, f50_local6 in ipairs( f50_local0 ) do
			if f50_local6.xuid == f50_local1 then
				return f50_local6
			end
		end
	else
		for f50_local4, f50_local5 in ipairs( f50_local0 ) do
			if f50_local5.isMyPlayer then
				return f50_local5
			end
		end
	end
	assert( false, "Local Player not found!" )
	return nil
end

local f0_local16 = function ( f49_arg0, f49_arg1 )
	if f49_arg0.LobbyMembers then
		f49_arg0.LobbyMembers:processEvent( f49_arg1 )
	end
end

local f0_local17 = function ( f48_arg0 )
	return f48_arg0._isHost
end

local f0_local18 = function ( f47_arg0 )
	return f47_arg0._teamSize
end

local f0_local19 = function ( f46_arg0, f46_arg1 )
	local f46_local0 = assert
	local f46_local1
	if f46_arg1 then
		f46_local1 = f46_arg1
	else
		f46_local1 = 0 < #f46_arg1
	end
	f46_local0( f46_local1 )
	local f46_local0, f46_local2 = nil
	f46_local1 = false
	for f46_local6, f46_local7 in ipairs( f46_arg0.currentTeamsLayout ) do
		if f46_local7[f46_arg1] then
			f46_local0 = f46_local6
			f46_local2 = f46_local7[f46_arg1]
			f46_local7[f46_arg1] = nil
			f46_local1 = true
		end
		if f46_local1 then
			break
		end
	end
	if f46_local1 and not CONDITIONS.IsArenaEvoGameType() and not MLG[0x2149D8306558592]() then
		f46_local3, f46_local4, f46_local5 = f0_local0( f46_arg0 )
		if f46_local3[f46_local0] then
			f46_local6 = CountTableKeys( f46_local3[f46_local0] ) + 1
			f46_local7 = 0
			for f46_local8 = 1, f46_local6, 1 do
				local f46_local11, f46_local12 = f0_local0( f46_local3[f46_local0], f46_local8 )
				if f46_local11 and f46_local12 then
					if 1 < f46_local12 - f46_local7 then
						local f46_local13 = f0_local0( f46_local11, f46_local5 )
						local f46_local14 = f46_local7 + 1
						f46_arg0.currentTeamsLayout[f46_local0][f46_local11] = f46_local14
						if f0_local0( f46_local11, f46_local5 ) then
							Lobby[0x71EB040CB4339B2]( f46_local13, f46_local4[f46_local0], f46_local14 - 1 )
						else
							Lobby[0x741180A5EFF7FE0]( f46_local13, f46_local4[f46_local0], f46_local14 - 1 )
						end
					end
					f46_local7 = f46_local7 + 1
				end
			end
		end
	end
end

local f0_local20 = function ( f45_arg0, f45_arg1 )
	local f45_local0 = false
	local f45_local1 = f0_local0()
	for f45_local14, f45_local15 in ipairs( f45_arg0.currentTeamsLayout ) do
		for f45_local9, f45_local10 in pairs( f45_local15 ) do
			local f45_local5 = false
			for f45_local6, f45_local7 in ipairs( f45_local1 ) do
				if f45_local9 == f45_local7.xuid then
					f45_local5 = true
					break
				end
			end
			if not f45_local5 then
				f0_local0( f45_arg0, f45_local9 )
				f45_local0 = true
			end
		end
	end
	return f45_local0
end

local f0_local21 = function ( f44_arg0 )
	local f44_local0, f44_local1, f44_local2 = f0_local0( f44_arg0 )
	for f44_local23, f44_local24 in ipairs( f44_local2 ) do
		local f44_local25 = f44_local24.desiredTeam
		if f44_local25 and f44_local25 > Teams.free and (not MLG[0x9894ED459E76619]() or f44_local25 ~= Teams.spectator) then
			local f44_local6 = f0_local0( f44_local25, f44_local1 )
			local f44_local7 = f44_local1[f44_local6]
			local f44_local8 = Teams.spectator
			if (REG33 and Dvar[0x22EAAB59AA27E9B]( "#x3db5d3184a15d696d" ) - 1 or f44_arg0._teamSize) < f44_local24.teamMemberIndex + 1 then
				for f44_local8 = 1, #f44_local1, 1 do
					local f44_local11 = false
					for f44_local12 = 1, f44_arg0._teamSize, 1 do
						if not f0_local0( f44_local12, f44_local0[f44_local8] ) then
							local f44_local15 = f44_local1[f44_local8]
							if f44_local24.isMyPlayer then
							
							else
								Lobby[0x741180A5EFF7FE0]( f44_local24.memberIndex, f44_local15, f44_local12 - 1 )
							end
							Lobby[0x71EB040CB4339B2]( f44_local24.memberIndex, f44_local15, f44_local12 - 1 )
						end
					end
					if f44_local11 then
						
					end
				end
			end
			if f0_local0( f44_local24.teamMemberIndex + 1, f44_local0[f44_local6], f44_local24.xuid ) then
				f44_local8 = true
				for f44_local10 = f44_local24.teamMemberIndex + 1 + 1, f44_arg0._teamSize, 1 do
					if not f0_local0( f44_local10, f44_local0[f44_local6] ) then
						if f44_local24.isMyPlayer then
						
						else
							Lobby[0x741180A5EFF7FE0]( f44_local24.memberIndex, f44_local25, f44_local10 - 1 )
						end
						Lobby[0x71EB040CB4339B2]( f44_local24.memberIndex, f44_local25, f44_local10 - 1 )
					end
				end
				if f44_local8 then
					local f44_local10, f44_local16 = nil
					local f44_local11 = #f44_local1
					local f44_local12 = f0_local0( f44_local24.desiredTeam, f44_local1 )
					for f44_local13 = f44_local12 + 1, f44_local12 + f44_local11, 1 do
						local f44_local18
						if f44_local11 < f44_local13 then
							f44_local18 = f44_local13 - f44_local11
							if not f44_local18 then
							
							else
								for f44_local19 = 1, f44_arg0._teamSize, 1 do
									if not f0_local0( f44_local19, f44_local0[f44_local18] ) then
										local f44_local22 = f44_local1[f44_local18]
										if f44_local24.isMyPlayer then
											Lobby[0x71EB040CB4339B2]( f44_local24.memberIndex, f44_local22, f44_local19 - 1 )
										else
											Lobby[0x741180A5EFF7FE0]( f44_local24.memberIndex, f44_local22, f44_local19 - 1 )
										end
										f44_local0[f44_local18][f44_local24.xuid] = f44_local19
									end
								end
							end
						end
						f44_local18 = f44_local13
					end
				end
			end
		end
	end
end

local f0_local22 = function ( f43_arg0 )
	if not f43_arg0._isHost then
		return 
	end
	local f43_local0, f43_local1, f43_local2 = f0_local0( f43_arg0 )
	for f43_local14, f43_local15 in ipairs( f43_local2 ) do
		local f43_local16 = f43_local15.desiredTeam
		if f43_local15.status == PRIVATE_MATCH.PartyStatus.PRESENT and f43_local16 and f43_local16 == Teams.free then
			for f43_local6 = 1, #f43_local1, 1 do
				local f43_local9 = false
				for f43_local10 = 1, f43_arg0._teamSize, 1 do
					if not f0_local0( f43_local10, f43_local0[f43_local6] ) then
						f43_local9 = true
						f43_local0[f43_local6][f43_local15.xuid] = f43_local10
						local f43_local13 = f43_local1[f43_local6]
						if f43_local15.isMyPlayer then
							Lobby[0x71EB040CB4339B2]( f43_local15.memberIndex, f43_local13, f43_local10 - 1 )
							break
						end
						Lobby[0x741180A5EFF7FE0]( f43_local15.memberIndex, f43_local13, f43_local10 - 1 )
					end
				end
				if f43_local9 then
					
				end
			end
		end
	end
end

local f0_local23 = function ( f42_arg0, f42_arg1 )
	if LUI.FlowManager.GetVisibleMenu() then
		local f42_local0 = f0_local0
		local f42_local1 = LUI.FlowManager.GetVisibleMenu()
		if f42_local0[f42_local1.id] then
			return 
		end
		f42_local0 = Lobby.GetAcceptableTeams()
		for f42_local7, f42_local8 in ipairs( f42_arg1 ) do
			if f42_local8.isBot then
				local f42_local4 = nil
				local f42_local5 = f0_local0( f42_local8.desiredTeam, f42_local0 )
				if CONDITIONS.IsArenaEvoGameType() and f42_arg0.LobbyMembers.id == "TournamentLobby" then
					local f42_local6 = f42_arg0.LobbyMembers.LobbyMembers:GetEntry( f42_local5 )
					f42_local4 = f42_local6:GetPlayerCard( f42_local8.teamMemberIndex + 1 )
				elseif f42_arg0.LobbyMembers.id == "PrivateMatchLobbyTiles" then
					local f42_local6 = f42_arg0.LobbyMembers.Lists[f42_local8.desiredTeam]:GetBuiltChildren()
					f42_local4 = f42_local6[f42_local8.teamMemberIndex + 1]
				end
				if f42_local4 and f42_local4.botDifficulty ~= f42_local8.difficulty then
					return true
				end
			end
		end
		return false
	end
	return 
end

local f0_local24 = function ( f41_arg0, f41_arg1 )
	if f41_arg0._isHost then
		f0_local0( f41_arg0 )
		f0_local0( f41_arg0 )
	end
	local f41_local0 = f0_local0( f41_arg0, f41_arg1 )
	local f41_local1, f41_local2, f41_local3 = f0_local0( f41_arg0 )
	for f41_local14, f41_local15 in ipairs( f41_local3 ) do
		local f41_local16 = f41_local15.desiredTeam
		if f41_local16 and f41_local16 > Teams.free then
			local f41_local7 = false
			local f41_local8 = f0_local0( f41_local16, f41_local2 )
			for f41_local12, f41_local13 in ipairs( f41_arg0.currentTeamsLayout ) do
				if f41_local13[f41_local15.xuid] then
					f41_local7 = true
					if f41_local8 ~= f41_local12 then
						f0_local0( f41_arg0, f41_local15.xuid )
						f41_local0 = true
						break
					end
					if f41_local7 then
						break
					end
				end
			end
			for f41_local12, f41_local13 in ipairs( f41_arg0.currentTeamsLayout ) do
				if f41_local8 == f41_local12 and f41_local15.status == PRIVATE_MATCH.PartyStatus.PRESENT then
					if not f41_local0 then
					
					else
						f41_local13[f41_local15.xuid] = f41_local15.teamMemberIndex + 1
						break
					end
					if f41_local13[f41_local15.xuid] and f41_local15.teamMemberIndex + 1 == f41_local13[f41_local15.xuid] then
						f41_local0 = false
					end
					f41_local0 = true
				end
			end
			if not f41_local7 then
				f41_local0 = true
			end
		end
	end
	if f0_local0( f41_arg0, f41_local3 ) then
		f41_local0 = true
	end
	if f41_local0 or f41_arg0.forceUpdate then
		f0_local0( f41_arg0, {
			name = "team_update_required",
			controllerIndex = f41_arg1
		} )
	end
end

local f0_local25 = function ( f40_arg0, f40_arg1 )
	if not f40_arg0._isHost then
		return 
	end
	local f40_local0 = f0_local0( f40_arg1 )
	if f40_local0.desiredTeam > Teams.free then
		return 
	end
	local f40_local1, f40_local2 = f0_local0( f40_arg0 )
	for f40_local3 = 1, #f40_local2, 1 do
		local f40_local6 = false
		for f40_local7 = 1, f40_arg0._teamSize, 1 do
			if not f0_local0( f40_local7, f40_local1[f40_local3] ) then
				Lobby[0x71EB040CB4339B2]( f40_local0.memberIndex, f40_local2[f40_local3], f40_local7 - 1 )
				f40_local6 = true
				break
			end
		end
		if f40_local6 then
			
		end
	end
end

local f0_local26 = function ( f39_arg0, f39_arg1 )
	if not f39_arg0._isHost and Lobby[0xBDD2F5FFDAA5FCF]() then
		PRIVATE_MATCH.RequestToastNotification( f39_arg0, f39_arg1, Engine[0xED84C33EC5F01EA]( "MENU/TEAM_CHANGE_FAILED" ), {
			description = Engine[0xED84C33EC5F01EA]( "MENU/HOST_MANAGING_MSG" )
		} )
		return 
	end
	local f39_local0 = f0_local0( f39_arg1 )
	local f39_local1, f39_local2 = f0_local0( f39_arg0, f39_local0.xuid )
	local f39_local3, f39_local4 = nil
	local f39_local5 = #f39_local2
	local f39_local6 = f0_local0( f39_local0.desiredTeam, f39_local2 )
	for f39_local7 = f39_local6 + 1, f39_local6 + f39_local5, 1 do
		local f39_local10
		if f39_local5 < f39_local7 then
			f39_local10 = f39_local7 - f39_local5
			if not f39_local10 then
			
			else
				local f39_local11 = f39_local2[f39_local10]
				local f39_local12 = Teams.spectator
				f39_local11 = REG23 and Dvar[0x22EAAB59AA27E9B]( "#x3db5d3184a15d696d" ) - 1 or f39_arg0._teamSize
				for f39_local12 = 1, f39_local11, 1 do
					if not f0_local0( f39_local12, f39_local1[f39_local10] ) then
						f39_local3 = f39_local2[f39_local10]
						f39_local4 = f39_local12
						break
					end
				end
				if f39_local3 then
					
				end
			end
		end
		f39_local10 = f39_local7
	end
	if not f39_local3 then
		PRIVATE_MATCH.RequestToastNotification( f39_arg0, f39_arg1, Engine[0xED84C33EC5F01EA]( "MENU/TEAM_CHANGE_FAILED" ), {
			description = Engine[0xED84C33EC5F01EA]( "LUA_MENU/TEAMS_FULL_MESSAGE" )
		} )
		return 
	else
		Lobby[0x71EB040CB4339B2]( f39_local0.memberIndex, f39_local3, f39_local4 - 1 )
		f0_local0( f39_arg0, f39_arg1 )
	end
end

local f0_local27 = function ( f37_arg0, f37_arg1 )
	local f37_local0 = function ( f38_arg0, f38_arg1, f38_arg2 )
		local f38_local0 = Lobby.GetAcceptableTeams()
		local f38_local1 = f38_local0[f38_arg2.x]
		if f38_arg0.isPlayer then
			Lobby[0x71EB040CB4339B2]( f38_arg1, f38_local1, f38_arg2.y - 1 )
		else
			Lobby[0x741180A5EFF7FE0]( f38_arg1, f38_local1, f38_arg2.y - 1 )
		end
	end
	
	local f37_local1 = f37_arg0._clientToSwap and f37_arg0._clientToSwap.coordinates or nil
	local f37_local2 = f37_arg0._currentfocusedClient.coordinates
	if f37_arg0._currentfocusedClient.lobbyPlayerState == ARENA_EVO.PlayerCardState.Player or f37_arg0._currentfocusedClient.lobbyPlayerState == ARENA_EVO.PlayerCardState.Bot and not f37_arg1 then
		local f37_local3 = f0_local0( f37_arg0._currentfocusedClient.xuid )
		local f37_local4 = f0_local0( f37_arg0._clientToSwap.xuid )
		if f37_local4 and f37_local3 then
			f37_local0( f37_arg0._clientToSwap, f37_local4, f37_local2 )
			f37_local0( f37_arg0._currentfocusedClient, f37_local3, f37_local1 )
		end
	elseif f37_arg0._currentfocusedClient.lobbyPlayerState == ARENA_EVO.PlayerCardState.Empty then
		if f37_arg0._clientToSwap then
			local f37_local3 = f0_local0( f37_arg0._clientToSwap.xuid )
			if f37_local3 then
				f37_local0( f37_arg0._clientToSwap, f37_local3, f37_local2 )
			end
		else
			local f37_local3 = Lobby.GetAcceptableTeams()
			PRIVATE_MATCH.AddBot( f37_local3[f37_local2.x], 1, MatchRules[0x3A9F1F51625857F]( Lobby.MatchRulesClasses.CommonOption, Lobby.MatchRulesMembers.BotDefaultDifficulty ), f37_local2.y - 1 )
		end
	elseif f37_arg1 then
		PRIVATE_MATCH.RemoveBot( f37_local2.x, f0_local0( f37_arg0._currentfocusedClient.xuid ) )
		if f37_arg0._clientToSwap then
			local f37_local4 = f0_local0( f37_arg0._clientToSwap.xuid )
			if f37_local4 then
				f37_local0( f37_arg0._clientToSwap, f37_local4, f37_local2 )
			end
		end
	end
	f0_local0( f37_arg0, f37_arg0._controllerIndex )
end

local f0_local28 = function ( f36_arg0, f36_arg1 )
	local f36_local0 = f0_local0( f36_arg1 )
	local f36_local1, f36_local2 = f0_local0( f36_arg0, f36_local0.xuid )
	local f36_local3 = f0_local0( Teams.spectator, f36_local2 )
	if not f36_local2[f36_local3] == Teams.spectator then
		return false
	end
	for f36_local4 = 1, f36_arg0._teamSize, 1 do
		if not f0_local0( f36_local4, f36_local1[f36_local3], f36_local0.xuid ) then
			Lobby[0x71EB040CB4339B2]( f36_local0.memberIndex, Teams.spectator, f36_local4 - 1 )
			return true
		end
	end
	return false
end

local f0_local29 = function ( f35_arg0 )
	if f35_arg0._currentfocusedClient then
		f35_arg0._currentfocusedClient:HidePlayerManagement()
	end
end

local f0_local30 = function ( f34_arg0, f34_arg1 )
	f34_arg0._isManagementMode = f34_arg1
	f34_arg0._clientToSwap = nil
	if not f34_arg1 then
		f0_local0( f34_arg0 )
	elseif LUI.IsLastInputGamepad( f34_arg0._controllerIndex ) then
		f0_local0( f34_arg0, {
			name = "gain_focus",
			focusType = FocusType.Gamepad,
			controller = f34_arg0._controllerIndex
		} )
	end
	f34_arg0.LobbyMembers.LobbyMembersHeader:ToggleChangeTeamPrompt( not f34_arg1 )
	Lobby[0xC3FCFFD90E9E41D]( f34_arg1 )
end

local f0_local31 = function ( f21_arg0, f21_arg1 )
	local f21_local0 = function ( f33_arg0 )
		local f33_local0 = f33_arg0:GetCurrentPlayerManagementOptions( f21_arg0 )
		if f33_local0 then
			f21_arg0:ShowPlayerManagement( f33_arg0._controllerIndex, f33_local0 )
		end
	end
	
	local f21_local1 = nil
	local f21_local2 = f21_arg1.lobbyPlayerState
	if f21_local2 == ARENA_EVO.PlayerCardState.Player then
		f21_local1 = {}
		if f21_arg0._isHost and (f21_arg0._isManagementMode or CODCASTER_CONDITIONS.IsCDLClientLobbyEnabled()) then
			if not f21_arg0._clientToSwap then
				f21_local1.inputs = {
					button_primary = {
						buttonText = "MENU/MOVE",
						callback = function ()
							f21_arg0._clientToSwap = f21_arg0
							f21_arg0( f21_arg0 )
						end
					}
				}
			else
				local f21_local3 = f21_arg0._clientToSwap.gamerTag == f21_arg1.gamerTag
				local f21_local4
				if not f21_local3 then
					f21_local4 = f21_arg0._clientToSwap.gamerTag
					if not f21_local4 then
					
					else
						f21_local1.gamerTag = f21_local4
						f21_local4 = {}
						local f21_local5 = {}
						local f21_local6
						if f21_local3 then
							f21_local6 = "MENU/CANCEL_MOVE"
						else
							f21_local6 = "LUA_MENU/SWAP"
						end
						f21_local5.buttonText = f21_local6
						f21_local5.callback = function ()
							if f21_arg0 then
								f21_arg0._clientToSwap = nil
							else
								f21_arg0( f21_arg0 )
								f21_arg0._clientToSwap = nil
							end
							f21_arg0( f21_arg0 )
						end
						
						f21_local4.button_primary = f21_local5
						f21_local1.inputs = f21_local4
					end
				end
				f21_local4 = nil
			end
			if not f21_arg1.isPlayer and f21_arg0._isHost then
				f21_local1.inputs.button_alt1 = {
					buttonText = "LUA_MENU/KICK",
					callback = function ()
						local f30_local0 = Friends[0x7E6685E08C0BB92]( f21_arg0.xuid )
						if Lobby[0x7E39F37FBC8EFC4]( f30_local0 ) then
							LUI.FlowManager.RequestPopupMenu( nil, "LobbyMemberKickPopup", true, f21_arg0._controllerIndex, false, {
								xuid = f30_local0,
								controllerIndex = f21_arg0._controllerIndex
							} )
						end
					end
				}
			end
		elseif not f21_arg1.isPlayer then
			f21_local1.inputs = {
				button_primary = {
					hideForKBM = true,
					buttonText = "LUA_MENU/VIEW",
					callback = function ()
						local f29_local0 = Lobby.GetLocalPlayerDataSource( f21_arg0._controllerIndex, f21_arg0.xuid )
						local f29_local1 = Social[0xDC3B811A6]( f21_arg0._controllerIndex, Friends[0x7E6685E08C0BB92]( f21_arg0.xuid ) )
						f29_local1.fullName = f29_local0.fullName:GetValue( f21_arg0._controllerIndex )
						f29_local1.inputType = LUI.INPUT_TYPE.keyboardMouse
						if f29_local0.usingGamepad:GetValue( f21_arg0._controllerIndex ) then
							f29_local1.inputType = LUI.INPUT_TYPE.gamepad
						end
						f29_local1.onlineStatus = BattleNetOnlineStatus.ONLINE
						f29_local1.playerDetailActionType = FRIENDS.PlayerDetailActionType.LOBBY_MEMBER
						LUI.FlowManager.RequestAddMenu( "PlayerDetailMenu", true, f21_arg0._controllerIndex, false, f29_local1 )
					end
				}
			}
		end
	elseif f21_arg0._isHost and f21_local2 == ARENA_EVO.PlayerCardState.Bot then
		f21_local1 = {
			inputs = {}
		}
		if f21_arg0._isManagementMode then
			if f21_arg0._clientToSwap then
				f21_local1.gamerTag = f21_arg0._clientToSwap.gamerTag
				f21_local1.inputs = {}
				local f21_local3 = Lobby.GetAcceptableTeams()
				if f21_local3[f21_arg0._clientToSwap.coordinates.x] ~= Teams.spectator then
					f21_local1.inputs.button_primary = {
						buttonText = "LUA_MENU/SWAP",
						callback = function ()
							f21_arg0( f21_arg0 )
							f21_arg0._clientToSwap = nil
							f21_arg0( f21_arg0 )
						end
					}
				end
				f21_local1.inputs.button_alt1 = {
					buttonText = "LUA_MENU/REPLACE",
					callback = function ()
						f21_arg0( f21_arg0, true )
						f21_arg0._clientToSwap = nil
						f21_arg0( f21_arg0 )
					end
				}
			else
				f21_local1.inputs.button_primary = {
					buttonText = "LUA_MENU/CHANGE_DIFFICULTY",
					callback = function ()
						local f26_local0 = f21_arg0.botDifficulty + 1
						if f26_local0 > Lobby.BotDifficulties.Veteran then
							local f26_local1 = Lobby.BotDifficulties.Recruit
							if not f26_local1 then
								f26_local0 = f26_local1
							else
								
							end
						end
						Lobby[0xB5E1F3541F7198B]( f21_arg0( f21_arg0.xuid ), f26_local0 )
						f21_arg0:UpdateBotDifficulty( f26_local0 )
					end
				}
			end
		end
		if not f21_arg0._clientToSwap then
			f21_local1.inputs.button_alt1 = {
				buttonText = "LUA_MENU/REMOVE_BOT",
				callback = function ()
					f21_arg0( f21_arg0, true )
					f21_arg0( f21_arg0 )
				end
			}
		end
	elseif f21_arg0._isHost then
		f21_local1 = {}
		if f21_arg0._clientToSwap then
			local f21_local3 = CONDITIONS.IsArenaEvoGameType()
			if not f21_local3 then
				f21_local3 = f21_arg0._clientToSwap.coordinates.x ~= f21_arg1.coordinates.x
			end
			if f21_local3 then
				f21_local1.gamerTag = f21_arg0._clientToSwap.gamerTag
				f21_local1.inputs = {
					button_primary = {
						buttonText = "LUA_MENU_MP/CONFIRM",
						callback = function ()
							f21_arg0( f21_arg0 )
							f21_arg0._clientToSwap = nil
							f21_arg0( f21_arg0 )
						end
					}
				}
			end
		elseif CONDITIONS.IsArenaEvoGameType() then
			f21_local1.inputs = {
				button_primary = {
					buttonText = "LUA_MENU/INVITE_PLAYERS",
					callback = function ()
						LUI.FlowManager.RequestPopupMenu( nil, "InvitePlayersOverlay", true, f21_arg0._controllerIndex, false, nil, nil, false, false )
					end
				}
			}
		else
			local f21_local3 = Dvar[0x22EAAB59AA27E9B]( "#x3db5d3184a15d696d" )
			local f21_local4 = LUI.DataSourceInGlobalModel.new( "alwaysLoaded.activeParty.members.memberCount" )
			local f21_local5 = f21_local4:GetValue( f21_arg0._controllerIndex )
			local f21_local6 = Lobby.GetAcceptableTeams()
			if f21_local5 ~= nil and f21_local5 < f21_local3 and f21_local6[f21_arg1.coordinates.x] ~= Teams.spectator then
				f21_local1.inputs = {
					button_primary = {
						buttonText = "LUA_MENU/ADD_BOT",
						callback = function ()
							f21_arg0( f21_arg0 )
							f21_arg0( f21_arg0 )
						end
					}
				}
			end
		end
	end
	if f21_local1 then
		f21_arg0._currentfocusedClient = f21_arg1
		return f21_local1
	else
		return nil
	end
end

local f0_local32 = function ( f20_arg0 )
	if not f20_arg0._isHost then
		return 
	end
	local f20_local0 = MatchRules[0x3A9F1F51625857F]( Lobby.MatchRulesClasses.CommonOption, Lobby.MatchRulesMembers.BotAutoFill )
	local f20_local1, f20_local2 = Lobby[0xE282396C3A4C54B]()
	local f20_local3 = LUI.DataSourceInGlobalModel.new( "frontEnd.lobby.isMatchmaking" )
	local f20_local4 = CONDITIONS.PrivateDsAllowed( f20_arg0 )
	if f20_local4 then
		f20_local4 = f20_local3:GetValue( f20_arg0._controllerIndex )
	end
	if f20_local0 and (f20_local4 or f20_local1 == Lobby.PartyState.STARTING_SOON or f20_local1 == Lobby.PartyState.STARTING) then
		if CountTableKeys( f20_arg0._autoFilledBots ) == 0 then
			local f20_local5, f20_local6 = f0_local0( f20_arg0 )
			local f20_local7 = #f20_local6
			for f20_local8 = 1, f20_local7, 1 do
				if f20_local6[f20_local8] ~= Teams.spectator then
					for f20_local11 = 1, f20_arg0._teamSize, 1 do
						if not f0_local0( f20_local11, f20_local5[f20_local8] ) then
							f20_local5[f20_local8]["autofillBot_" .. f20_local11] = f20_local11
							PRIVATE_MATCH.AddBot( f20_local6[f20_local8], 1, MatchRules[0x3A9F1F51625857F]( Lobby.MatchRulesClasses.CommonOption, Lobby.MatchRulesMembers.BotDefaultDifficulty ), f20_local11 - 1 )
						end
					end
				end
			end
			for f20_local11, f20_local12 in ipairs( f0_local0() ) do
				if f20_local12.isBot then
					local f20_local13 = false
					local f20_local15 = f0_local0( f20_local12.desiredTeam, f20_local6 )
					for f20_local19, f20_local20 in pairs( f20_local5[f20_local15] ) do
						if f20_local19 == "autofillBot_" .. f20_local12.teamMemberIndex + 1 then
							f20_arg0._autoFilledBots[f20_local12.xuid] = {
								teamIndex = f20_local15
							}
						end
					end
				end
			end
		end
	elseif f20_arg0._autoFilledBots and 0 < CountTableKeys( f20_arg0._autoFilledBots ) then
		local f20_local5, f20_local6, f20_local7 = f0_local0( f20_arg0 )
		for f20_local14, f20_local11 in ipairs( f20_local7 ) do
			if f20_local11.isBot and f20_arg0._autoFilledBots[f20_local11.xuid] then
				PRIVATE_MATCH.RemoveBot( f20_local6[f20_arg0._autoFilledBots[f20_local11.xuid].teamIndex], f20_local11.memberIndex )
				f20_arg0._autoFilledBots[f20_local11.xuid] = nil
			end
		end
	end
end

local f0_local33 = function ( f19_arg0, f19_arg1 )
	local f19_local0 = LUI.DataSourceInGlobalModel.new( "alwaysLoaded.activeParty.members.memberCount" )
	local f19_local1 = f19_local0:GetValue( f19_arg1 )
	if f19_arg0._isHost and f19_local1 and 0 < f19_local1 and CONDITIONS.IsArenaEvoGameType() and f19_local1 > ARENA_EVO.MAX_LOBBY_SIZE[2] then
		MatchRules[0x9550565068844CB]( Lobby.MatchRulesClasses.CommonOption, Lobby.MatchRulesMembers.TeamSize, 3 )
	end
	if CONDITIONS.IsCoreMultiplayer() then
		f0_local0()
	end
	if CONDITIONS.IsArenaEvoGameType() then
		f19_arg0._teamSize = MatchRules[0x3A9F1F51625857F]( Lobby.MatchRulesClasses.CommonOption, Lobby.MatchRulesMembers.TeamSize )
	else
		local f19_local2 = Dvar[0x22EAAB59AA27E9B]( "#x3db5d3184a15d696d" )
		assert( 0 < f19_local2 )
		f19_arg0._teamSize = CONDITIONS.IsTeamBasedGameType() and f19_local2 / 2 or f19_local2
	end
	local f19_local2 = Lobby.GetAcceptableTeams()
	f19_arg0.currentTeamsLayout = {}
	for f19_local3 = 1, #f19_local2, 1 do
		table.insert( f19_arg0.currentTeamsLayout, f19_local3, {} )
	end
	f19_arg0._gameMode = Dvar[0x54084D7CA2317BB]( "#x3a30c33efc8281eb1" )
end

local f0_local34 = function ( f18_arg0 )
	local f18_local0, f18_local1, f18_local2 = f0_local0( f18_arg0 )
	for f18_local6, f18_local7 in ipairs( f18_local2 ) do
		if f18_local7.isBot then
			PRIVATE_MATCH.RemoveBot( f18_local7.desiredTeam, f18_local7.memberIndex )
		end
	end
end

local f0_local35 = function ( f17_arg0 )
	local f17_local0 = Lobby.GetCurrentGameType()
	if not f17_arg0._gameType then
		f17_arg0._gameType = f17_local0
		return false
	elseif f17_arg0._gameType ~= f17_local0 then
		local f17_local1 = f17_arg0._gameType or f17_local0
		local f17_local2 = f17_local0 == "arena_evo"
		if f17_local2 then
			f0_local0( f17_arg0 )
		end
		local f17_local3
		if f17_local1 ~= "arena_evo" then
			f17_local3 = f17_local2
		else
			f17_local3 = true
		end
		if not f17_local3 then
			f17_local3 = StringTable[0x2DCF0973239E909]( CSV.gameTypesTable.file, CSV.gameTypesTable.cols.ref, f17_local1, CSV.gameTypesTable.cols.teamBased ) ~= StringTable[0x2DCF0973239E909]( CSV.gameTypesTable.file, CSV.gameTypesTable.cols.ref, f17_local0, CSV.gameTypesTable.cols.teamBased )
		end
		if not f17_local3 then
			f17_local3 = StringTable[0x2DCF0973239E909]( CSV.gameTypesTable.file, CSV.gameTypesTable.cols.ref, f17_local1, CSV.gameTypesTable.cols.MLG ) ~= StringTable[0x2DCF0973239E909]( CSV.gameTypesTable.file, CSV.gameTypesTable.cols.ref, f17_local0, CSV.gameTypesTable.cols.MLG )
			if f17_local3 then
				local f17_local4 = false
				for f17_local8, f17_local9 in ipairs( f0_local0() ) do
					if f17_local9.desiredTeam == Teams.spectator then
						f17_local4 = true
						break
					end
				end
				if not f17_local4 then
					f17_local3 = false
				end
			end
		end
		f17_arg0._gameType = f17_local0
		return f17_local3
	else
		return false
	end
end

local f0_local36 = function ( f13_arg0, f13_arg1 )
	local f13_local0 = LUI.DataSourceInGlobalModel.new( "alwaysLoaded.activeParty.members.memberCount" )
	if f13_arg0._isHost then
		f13_arg0:SubscribeToModel( f13_local0:GetModel( f13_arg1 ), function ()
			if not f13_arg0.PartyIsValid() then
				return 
			end
			local f16_local0 = f13_arg0:GetValue( f13_arg0 )
			if f16_local0 and 0 < f16_local0 then
				f13_arg0( f13_arg0, f13_arg0._controllerIndex )
			end
		end )
	end
	f13_arg0:SubscribeToModel( f13_local0:GetModel( f13_arg1 ), function ()
		if not f13_arg0.PartyIsValid() then
			return 
		end
		local f15_local0 = f13_arg0:GetValue( f13_arg0 )
		if f15_local0 ~= nil then
			f13_arg0( f13_arg0, {
				name = "lobbyMemberCountChanged",
				memberCount = f15_local0
			} )
		end
		if f13_arg0( f13_arg0, f13_arg0 ) then
			f13_arg0( f13_arg0, {
				name = "team_update_required",
				controllerIndex = f13_arg0
			} )
		end
	end )
	if not f13_arg0.LobbyTimer then
		local self = LUI.UITimer.new( {
			interval = 250,
			event = "check_team_updates"
		} )
		self.id = "lobbyTimer"
		f13_arg0:addElement( self )
		f13_arg0.LobbyTimer = self
	end
	f13_arg0:registerEventHandler( "check_team_updates", function ( element, event )
		if not f13_arg0.PartyIsValid() then
			return 
		end
		local f14_local0 = Dvar[0x54084D7CA2317BB]( "#x3a30c33efc8281eb1" )
		if f13_arg0( element ) then
			if f13_arg0._isHost and not MLG[0x9894ED459E76619]() then
				f13_arg0( element )
			end
			f13_arg0( element, element._controllerIndex )
			if not f13_arg0._teamSize then
				return 
			elseif f13_arg0._isHost then
				f13_arg0( element, element._controllerIndex )
			end
			local f14_local1 = CONDITIONS.IsTeamBasedGameType()
			local f14_local2 = f13_arg0.LobbyMembers.LobbyMembersHeader
			local f14_local3 = f14_local2
			f14_local2 = f14_local2.ToggleChangeTeamPrompt
			local f14_local4
			if f14_local1 then
				f14_local4 = f14_local1
			else
				f14_local4 = not f13_arg0._isManagementMode
			end
			f14_local2( f14_local3, f14_local4 )
		end
		f13_arg0( element )
		f13_arg0( element, element._controllerIndex )
		if not Lobby.IsSplitScreenEnabled() then
			local f14_local1 = f13_arg0( f13_arg0 )
			local f14_local2 = f14_local1.desiredTeam == Teams.spectator
			if f13_arg0._localIsCodcaster ~= f14_local2 then
				LobbyMember[0x22F89D07E40D9F8]( f14_local2, f13_arg0 )
				f13_arg0._localIsCodcaster = f14_local2
			end
		end
		return true
	end )
end

local f0_local37 = function ( f12_arg0, f12_arg1 )
	local f12_local0 = LUI.DataSourceInGlobalModel.new( "alwaysLoaded.activeParty.members.memberCount" )
	f12_arg0:UnsubscribeFromAllModels()
	f12_arg0:RemoveDataLinks()
	f12_arg0:registerEventHandler( "check_team_updates", nil )
end

local f0_local38 = function ( f11_arg0 )
	local f11_local0 = LUI.FlowManager.GetVisibleMenu()
	local f11_local1 = false
	if f11_local0.id == f0_local0 or f11_local0.id == f0_local0 then
		f11_local1 = f11_local0:GetCurrentTab() == f0_local0
	end
	return f11_local1
end

LUI.PrivateMatchManagementLayer.SetUpLobby = function ( f8_arg0, f8_arg1, f8_arg2, f8_arg3 )
	f8_arg0._controllerIndex = f8_arg1
	f8_arg0._privateMatchLobby = f8_arg2
	local f8_local0 = LUI.DataSourceInGlobalModel.new( "frontEnd.lobby.areWeGameHost" )
	f8_arg0._isHost = f8_local0:GetValue( f8_arg1 )
	f0_local0( f8_arg0 )
	f8_arg0._autoFilledBots = {}
	if not (not MLG[0x9894ED459E76619]() or Dvar[0x9E5BE3B4BBA4E0E]( "#x3558d59af70ec8e78" )) or Dvar[0x9E5BE3B4BBA4E0E]( "#x39737d81e9f94e312" ) then
		f0_local0( f8_arg0, f8_arg1 )
	end
	if f8_arg0._isHost then
		f0_local0( f8_arg0, f8_arg1 )
		f0_local0( f8_arg0 )
		f0_local0( f8_arg0 )
	end
	f8_arg0.PartyIsValid = function ()
		local f10_local0, f10_local1 = Lobby[0xE282396C3A4C54B]()
		if f10_local1.inParty ~= nil and f10_local1.inParty == false then
			return false
		else
			return true
		end
	end
	
	
	local BindButton = LUI.UIBindButton.new()
	BindButton.id = "bindButton"
	f8_arg0:addElement( BindButton )
	f8_arg0.BindButton = BindButton
	
	f8_arg0.BindButton:registerEventHandler( "button_right_trigger", function ( element, event )
		if not f8_arg0( f8_arg0 ) then
			return 
		end
		local f9_local0 = event.controller
		assert( f9_local0 )
		local f9_local1 = LUI.DataSourceInGlobalModel.new( "frontEnd.lobby.isGameStartRequested" )
		local f9_local2 = LUI.DataSourceInGlobalModel.new( "frontEnd.lobby.isMatchmaking" )
		local f9_local3 = CONDITIONS.PrivateDsAllowed( f8_arg0 )
		if f9_local3 then
			f9_local3 = f9_local2:GetValue( f9_local0 )
		end
		local f9_local4 = f9_local1:GetValue( f9_local0 )
		local f9_local5
		if not f9_local4 then
			f9_local5 = f9_local4
		else
			f9_local5 = f9_local3
		end
		if f9_local5 or not f8_arg0.PartyIsValid() or not CONDITIONS.IsTeamBasedGameType() then
			return 
		elseif (not (not MLG[0x9894ED459E76619]() or Dvar[0x9E5BE3B4BBA4E0E]( "#x3558d59af70ec8e78" )) or Dvar[0x9E5BE3B4BBA4E0E]( "#x39737d81e9f94e312" )) and f8_arg0( f8_arg0, f9_local0 ) then
			return true
		elseif not f8_arg0._isManagementMode then
			f8_arg0( f8_arg0, f9_local0 )
			return true
		end
	end )
	if f8_arg2.LobbyMembers then
		f8_arg2.LobbyMembers:closeTree()
		f8_arg2.LobbyMembers = nil
		f8_arg0.LobbyMembers = nil
	end
	if f8_arg3 == PRIVATE_MATCH.PrivateMatchStates.ChampionHill then
		local f8_local2 = MenuBuilder.BuildRegisteredType( "TournamentLobby", {
			controllerIndex = f8_arg1
		} )
		f8_local2:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * 240, _1080p * 860, _1080p * 192, _1080p * 992 )
		f8_arg0.LobbyMembers = f8_local2
		f8_arg2:addElement( f8_arg0.LobbyMembers )
	elseif f8_arg3 == PRIVATE_MATCH.PrivateMatchStates.Core and not f8_arg2.LobbyMembers then
		local f8_local2
		if CODCASTER_CONDITIONS.IsCDLClientLobbyEnabled() then
			f8_local2 = "Esports"
		else
			f8_local2 = ""
		end
		local f8_local3 = MenuBuilder.BuildRegisteredType( f8_local2 .. "PrivateMatchLobbyTiles", {
			controllerIndex = f8_arg1
		} )
		f8_local3.id = "LobbyMembers"
		f8_local3:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * 240, _1080p * 860, _1080p * 192, _1080p * 992 )
		f8_arg2:addElement( f8_local3 )
		f8_arg0.LobbyMembers = f8_local3
	end
	f0_local0( f8_arg0, f8_arg1 )
	f8_arg0.activeAndInitialised = true
	return f8_arg0.LobbyMembers
end

LUI.PrivateMatchManagementLayer.CloseLobby = function ( f7_arg0, f7_arg1 )
	f7_arg0.LobbyMembers = nil
	f7_arg0.activeAndInitialised = false
	f7_arg0.BindButton:closeTree()
	f0_local0( f7_arg0, f7_arg1 )
end

LUI.PrivateMatchManagementLayer.init = function ( f6_arg0, f6_arg1 )
	LUI.PrivateMatchManagementLayer.super.init( f6_arg0 )
	f6_arg0.id = "PrivateMatchManagementLayer"
	f6_arg0:SetupSafeArea()
	f6_arg0.IsHost = f0_local0
	f6_arg0.GetTeamSize = f0_local0
	f6_arg0.GetPlayerData = f0_local0
	f6_arg0.GetEntryByValue = f0_local0
	f6_arg0.GetAllPlayersData = f0_local0
	f6_arg0.GetAvailableSlots = f0_local0
	f6_arg0.ToggleManagementMode = f0_local0
	f6_arg0.GetNormalisedTeamIndex = f0_local0
	f6_arg0.GetCurrentPlayerManagementOptions = f0_local0
	f6_arg0.DisablePreviousManagementHighlight = f0_local0
end

LUI.PrivateMatchManagementLayer.InitLayer = function ( f5_arg0 )
	
end

LUI.PrivateMatchManagementLayer.ShouldBeVisible = function ( f4_arg0 )
	return true
end

LUI.PrivateMatchManagementLayer.ClearLayer = function ( f3_arg0, f3_arg1 )
	
end

LUI.PrivateMatchManagementLayer.TrapsInput = function ( f2_arg0, f2_arg1 )
	local f2_local0 = Engine[0x12586A3F4FB490E]()
	if f2_local0 then
		f2_local0 = IsPrivateMatch()
	end
	return f2_local0
end

LUI.PrivateMatchManagementLayer.GetInstance = function ()
	local f1_local0 = Engine[0xEE6F69FEA944B13]()
	assert( f1_local0 )
	return f1_local0.privateMatchManagementLayer
end

