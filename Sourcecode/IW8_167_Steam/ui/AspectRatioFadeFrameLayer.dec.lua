-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 17-11-2025 01:21
LUI.AspectRatioFadeFrameLayer = LUI.Class( LUI.UIElement )
LUI.AspectRatioFadeFrameLayer.DEFAULT_FADESCREEN_PERCENTAGE = 1.1
local f0_local0 = function ( f10_arg0 )
	local f10_local0 = Engine.DBFFAEEFGJ()
	local f10_local1 = assert
	local f10_local2
	if f10_local0 then
		f10_local2 = f10_local0
	else
		f10_local2 = f10_local0.flowManager
	end
	f10_local1( f10_local2 )
	if f10_arg0:getParent() then
		
	else
		
	end
	return false
end

LUI.AspectRatioFadeFrameLayer.init = function ( f8_arg0, f8_arg1 )
	LUI.UIElement.init( f8_arg0 )
	f8_arg0.id = "AspectRatioFadeFrameLayer"
	local f8_local0
	if not f8_arg1 then
		f8_local0 = f8_arg1
	else
		f8_local0 = Engine.IJEBHJIJF()
	end
	f8_arg0._controllerIndex = f8_local0
	f8_arg0:addEventHandler( "onVideoChange", function ( f9_arg0, f9_arg1 )
		if CoD.AspectRatioCompare() == LUI.COMPARE.higher and LUI.AspectRatioFadeFrameLayer.ShouldBeVisible( f9_arg0 ) then
			local f9_local0 = f9_arg0:GetCurrentScreenFadePercent()
			if f9_arg0.aspectRatioFade then
				f9_arg0.aspectRatioFade:setCustomScreenPercent( f9_local0 )
			else
				f9_arg0.aspectRatioFade = MenuBuilder.BuildRegisteredType( "AspectRatioFadeFrame", {
					controllerIndex = f9_arg0._controllerIndex,
					customScreenPercent = f9_local0
				} )
				f9_arg0:addElement( f9_arg0.aspectRatioFade )
			end
		elseif f9_arg0.aspectRatioFade then
			f9_arg0.aspectRatioFade:closeTree()
			f9_arg0.aspectRatioFade = nil
		end
	end )
	f8_arg0:processEvent( "onVideoChange" )
end

LUI.AspectRatioFadeFrameLayer.Setup = function ( f7_arg0, f7_arg1 )
	local f7_local0 = LUI.AspectRatioFadeFrameLayer.GetInstance( f7_arg0, controllerIndex )
	if f7_local0 == nil then
		return 
	elseif not f7_local0.menu then
		f7_local0.menu = f7_arg0
	elseif not f7_arg0:isDescendentOf( f7_local0.menu ) then
		if f0_local0( f7_local0.menu ) then
			f7_local0.popup = f7_arg0
		else
			f7_local0.menu = f7_arg0
			f7_local0.popup = nil
		end
	end
	if f7_local0.aspectRatioFade then
		f7_local0.aspectRatioFade:setCustomScreenPercent( f7_local0:GetCurrentScreenFadePercent() )
	end
end

LUI.AspectRatioFadeFrameLayer.OpenAspectRatioFadeFrame = function ( f6_arg0, f6_arg1, f6_arg2 )
	if LUI.AspectRatioFadeFrameLayer.GetInstance( f6_arg0, controllerIndex ) == nil then
		return 
	else
		local f6_local0
		if not f6_arg1 then
			f6_local0 = f6_arg1
		else
			f6_local0 = f6_arg0
		end
	end
	local f6_local1
	if not f6_arg2 then
		f6_local1 = f6_arg2
	else
		f6_local1 = LUI.AspectRatioFadeFrameLayer.DEFAULT_FADESCREEN_PERCENTAGE
	end
	f6_local0.aspectRatioFadeFrameCustomScreenPercent = f6_local1
	if f6_local0:getParent() then
		LUI.AspectRatioFadeFrameLayer.Setup( f6_local0 )
	else
		f6_local0:addEventHandler( "menu_create", LUI.AspectRatioFadeFrameLayer.Setup )
	end
end

LUI.AspectRatioFadeFrameLayer.GetInstance = function ( f5_arg0, f5_arg1 )
	if Engine.HDGDBCJFG() then
		return 
	end
	local f5_local0 = nil
	if f5_arg1 ~= nil then
		f5_local0 = LUI.UIRoot.GetRootForControllerIndex( f5_arg1 )
	else
		f5_local0 = Engine.DBFFAEEFGJ()
	end
	assert( f5_local0 )
	local f5_local1 = f5_local0.fadeFrameLayer
	assert( f5_local1 )
	return f5_local1
end

LUI.AspectRatioFadeFrameLayer.ShouldBeVisible = function ( f4_arg0 )
	if f4_arg0.popup and f0_local0( f4_arg0.popup ) then
		return true
	elseif f4_arg0.menu then
		if f4_arg0.popup then
			f4_arg0.popup = nil
			if f4_arg0.aspectRatioFade then
				f4_arg0.aspectRatioFade:setCustomScreenPercent( f4_arg0.menu.aspectRatioFadeFrameCustomScreenPercent )
			end
		end
		return f0_local0( f4_arg0.menu )
	else
		return false
	end
end

LUI.AspectRatioFadeFrameLayer.GetCurrentScreenFadePercent = function ( f3_arg0 )
	local f3_local0 = f3_arg0.popup or f3_arg0.menu
	local f3_local1
	if f3_local0 then
		f3_local1 = f3_local0.aspectRatioFadeFrameCustomScreenPercent
		if not f3_local1 then
		
		else
			return f3_local1
		end
	end
	f3_local1 = LUI.AspectRatioFadeFrameLayer.DEFAULT_FADESCREEN_PERCENTAGE
end

LUI.AspectRatioFadeFrameLayer.InitLayer = function ( f2_arg0 )
	if CoD.AspectRatioCompare() == LUI.COMPARE.higher then
		if not f2_arg0.aspectRatioFade then
			f2_arg0.aspectRatioFade = MenuBuilder.BuildRegisteredType( "AspectRatioFadeFrame", {
				controllerIndex = f2_arg0._controllerIndex,
				customScreenPercent = f2_arg0:GetCurrentScreenFadePercent()
			} )
			f2_arg0:addElement( f2_arg0.aspectRatioFade )
		end
		f2_arg0.aspectRatioFade:SetAlpha( 1 )
	end
end

LUI.AspectRatioFadeFrameLayer.ClearLayer = function ( f1_arg0, f1_arg1 )
	if f1_arg0.aspectRatioFade then
		f1_arg0.aspectRatioFade:SetAlpha( 0 )
	end
end

