-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 27-09-2025 22:41
module( ..., package.seeall )
local f0_local0 = function ( f15_arg0 )
	local f15_local0 = {}
	if not Engine.DDJFBBJAIG() and CONDITIONS.InKillCam( f15_arg0 ) then
		local f15_local1 = LUI.DataSourceFromOmnvar.new( "ui_killcam_killedby_id" )
		local f15_local2 = f15_local1:GetValue( f15_arg0 )
		f15_local0._rank = Game.BAJEAFFCGG( f15_local2 )
		f15_local0._rankPct = 0
		f15_local0._rankIcon = Game.HGEFIIJID( f15_local2 )
	else
		local f15_local1 = PROGRESSION.GetPlayerProgressionData( {
			_controllerIndex = f15_arg0
		} )
		f15_local0._rank = f15_local1._rank + 1
		f15_local0._rankPct = f15_local1._rankPercentage
		f15_local0._rankIcon = f15_local1._rankIcon
	end
	return f15_local0
end

local f0_local1 = function ( f14_arg0 )
	f14_arg0.RankIcon:setImage( RegisterMaterial( f14_arg0._rankIcon ) )
	f14_arg0.RankProgress:SetImmediateProgress( LUI.clamp( tonumber( f14_arg0._rankPct ), 0, 1 ) )
	if f14_arg0._rankStringLen == 1 then
		ACTIONS.AnimateSequence( f14_arg0, "OneDigit" )
	elseif f14_arg0._rankStringLen == 2 then
		ACTIONS.AnimateSequence( f14_arg0, "TwoDigits" )
	elseif f14_arg0._rankStringLen == 3 then
		ACTIONS.AnimateSequence( f14_arg0, "ThreeDigits" )
	else
		ACTIONS.AnimateSequence( f14_arg0, "FourDigits" )
	end
	f14_arg0.GridLayoutRankDigits:RefreshContent()
end

local f0_local2 = function ( f13_arg0, f13_arg1 )
	local f13_local0 = f0_local0( f13_arg1 )
	if f13_arg0._rank ~= f13_local0._rank or f13_arg0._rankPct ~= f13_local0._rankPct then
		f13_arg0._rank = f13_local0._rank
		f13_arg0._rankPct = f13_local0._rankPct
		f13_arg0._rankIcon = f13_local0._rankIcon
		f13_arg0._rankString = tostring( f13_arg0._rank )
		f13_arg0._rankStringLen = string.len( f13_arg0._rankString )
		f0_local0( f13_arg0 )
	end
end

local f0_local3 = function ( f9_arg0, f9_arg1, f9_arg2 )
	assert( f9_arg0.RankProgress )
	assert( f9_arg0.RankIcon )
	local f9_local0 = {
		digit = SWATCHES.splashNotifications.Green,
		base = SWATCHES.Reticles.BrightGreen
	}
	f9_arg0.GridLayoutRankDigits:SetNumChildren( 4 )
	f9_arg0.GridLayoutRankDigits:SetRefreshChild( function ( f12_arg0, f12_arg1, f12_arg2 )
		if f12_arg0 ~= nil then
			f12_arg0:Setup( "glow" )
			local f12_local0 = nil
			if f12_arg1 < f9_arg0._rankStringLen then
				f12_local0 = tonumber( string.sub( f9_arg0._rankString, f12_arg1 + 1, f12_arg1 + 1 ) )
			end
			f12_arg0:SetGlowDigit( f12_local0, nil, f9_arg0 )
		end
	end )
	f0_local0( f9_arg0, f9_arg1 )
	f9_arg0._updateTimer = LUI.UITimer.new( {
		event = "watch_rank_check",
		interval = 15000
	} )
	f9_arg0:addElement( f9_arg0._updateTimer )
	f9_arg0:registerEventHandler( "watch_rank_check", function ( element )
		f9_arg0( element, f9_arg0 )
	end )
	f9_arg0:addEventHandler( "player_ranked_up", function ( f10_arg0 )
		f9_arg0( f10_arg0, f9_arg0 )
		Engine.BJDBIAGIDA( "watch_rank_up" )
	end )
end

function WatchRankHolo( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 512 * _1080p, 0, 512 * _1080p )
	self.id = "WatchRankHolo"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local RankProgress = nil
	
	RankProgress = MenuBuilder.BuildRegisteredType( "GenericProgressBar", {
		controllerIndex = f1_local1
	} )
	RankProgress.id = "RankProgress"
	RankProgress:SetRGBFromTable( SWATCHES.Tracer.green, 0 )
	RankProgress.DialogueBackground:SetAlpha( 1, 0 )
	RankProgress.Fill:SetRGBFromTable( SWATCHES.Tracer.green, 0 )
	RankProgress.Frame:SetRGBFromTable( SWATCHES.Tracer.green, 0 )
	RankProgress.Cap:SetRGBFromTable( SWATCHES.Tracer.green, 0 )
	RankProgress:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -64, _1080p * 64, _1080p * 334, _1080p * 308 )
	self:addElement( RankProgress )
	self.RankProgress = RankProgress
	
	local RankIcon = nil
	
	RankIcon = LUI.UIImage.new()
	RankIcon.id = "RankIcon"
	RankIcon:SetRGBFromInt( 65280, 0 )
	RankIcon:SetAlpha( 0.5, 0 )
	RankIcon:setImage( RegisterMaterial( "icon_t9_rank_35" ), 0 )
	RankIcon:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, _1080p * -64, _1080p * 64, _1080p * -76, _1080p * 52 )
	self:addElement( RankIcon )
	self.RankIcon = RankIcon
	
	local GridLayoutRankDigits = nil
	
	GridLayoutRankDigits = LUI.UIGrid.new( {
		scrollingThresholdX = 1,
		buildArrowsLabel = false,
		maxVelocity = 5000,
		adjustSizeToContent = false,
		scrollingThresholdY = 1,
		wrapX = true,
		maxVisibleColumns = 4,
		maxVisibleRows = 1,
		wrapY = true,
		arrowsVerticalOffset = 0,
		springCoefficient = 400,
		controllerIndex = f1_local1,
		buildChild = function ()
			return MenuBuilder.BuildRegisteredType( "WatchDigit", {
				controllerIndex = menu
			} )
		end,
		refreshChild = function ( f7_arg0, f7_arg1, f7_arg2 )
			
		end,
		spacingX = _1080p * 2,
		spacingY = _1080p * 2,
		columnWidth = _1080p * 128,
		rowHeight = _1080p * 128,
		horizontalAlignment = LUI.Alignment.Left,
		verticalAlignment = LUI.Alignment.Top
	} )
	GridLayoutRankDigits.id = "GridLayoutRankDigits"
	GridLayoutRankDigits:SetScale( -0.75, 0 )
	GridLayoutRankDigits:setUseStencil( true )
	GridLayoutRankDigits:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * -4, _1080p * 516, _1080p * 291, _1080p * 419 )
	self:addElement( GridLayoutRankDigits )
	self.GridLayoutRankDigits = GridLayoutRankDigits
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	local f1_local6 = nil
	GridLayoutRankDigits:RegisterAnimationSequence( "OneDigit", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 44
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 564
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 291
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 419
		}
	} )
	self._sequences.OneDigit = function ()
		menu:AnimateSequence( "OneDigit" )
	end
	
	local f1_local7 = nil
	GridLayoutRankDigits:RegisterAnimationSequence( "TwoDigits", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 25
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 545
		}
	} )
	self._sequences.TwoDigits = function ()
		menu:AnimateSequence( "TwoDigits" )
	end
	
	local f1_local8 = nil
	GridLayoutRankDigits:RegisterAnimationSequence( "ThreeDigits", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 11
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 291
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 531
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 419
		}
	} )
	self._sequences.ThreeDigits = function ()
		menu:AnimateSequence( "ThreeDigits" )
	end
	
	local f1_local9 = nil
	RankIcon:RegisterAnimationSequence( "FourDigits", {
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	GridLayoutRankDigits:RegisterAnimationSequence( "FourDigits", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * -4
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 290
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 516
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 418
		}
	} )
	self._sequences.FourDigits = function ()
		menu:AnimateSequence( "FourDigits" )
		menu:AnimateSequence( "FourDigits" )
	end
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "WatchRankHolo", WatchRankHolo )
LockTable( _M )
