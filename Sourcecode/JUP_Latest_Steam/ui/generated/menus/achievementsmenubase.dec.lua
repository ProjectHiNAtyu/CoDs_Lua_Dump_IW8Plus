-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
module( ..., package.seeall )
local f0_local0 = 3
local f0_local1 = {
	INCOMPLETED_ACHIEVEMENTS = 2,
	ALL_ACHIEVEMENTS = 0,
	COMPLETED_ACHIEVEMENTS = 1
}
local f0_local2 = {
	[f0_local1.ALL_ACHIEVEMENTS] = Engine[0xED84C33EC5F01EA]( 0x58A859785224AF ),
	[f0_local1.COMPLETED_ACHIEVEMENTS] = Engine[0xED84C33EC5F01EA]( 0x60160BEB8236C0D ),
	[f0_local1.INCOMPLETED_ACHIEVEMENTS] = Engine[0xED84C33EC5F01EA]( 0xFEEA86F8EA337BE )
}
local f0_local3 = {
	nil,
	0x6CDCE5DCE97CF01,
	0x17A1396942DFF12,
	0x1FE3F79F45C9CB1,
	0x91FAED52D992E46,
	0x96839C04DF62F00
}
local f0_local4 = function ( f19_arg0 )
	local f19_local0 = LUI.AchievementsManager.GetAchievements( f19_arg0._controllerIndex, true )
	local f19_local1 = 0
	local f19_local2 = 0
	for f19_local6, f19_local7 in pairs( f19_local0 ) do
		if f19_local7.isCompleted then
			f19_local1 = f19_local1 + f19_local7.score
		end
		f19_local2 = f19_local2 + f19_local7.score
	end
	f19_arg0._maximumScore = f19_local2
	return LUI.Round( f19_local1 / f19_local2, 2 )
end

local f0_local5 = function ( f18_arg0, f18_arg1 )
	return f18_arg0._achievements[f18_arg1 + 1]
end

local f0_local6 = function ( f17_arg0 )
	if f17_arg0._filterState == f0_local0.COMPLETED_ACHIEVEMENTS then
		f17_arg0._areAchievementsCompleted = true
		f17_arg0._areAchievementsIncomplete = false
	elseif f17_arg0._filterState == f0_local0.INCOMPLETED_ACHIEVEMENTS then
		f17_arg0._areAchievementsCompleted = false
		f17_arg0._areAchievementsIncomplete = true
	else
		f17_arg0._areAchievementsCompleted = true
		f17_arg0._areAchievementsIncomplete = true
	end
end

local f0_local7 = function ( f16_arg0 )
	if f16_arg0._filterState == f0_local0.ALL_ACHIEVEMENTS then
		f16_arg0._filterState = f0_local0.COMPLETED_ACHIEVEMENTS
	elseif f16_arg0._filterState == f0_local0.COMPLETED_ACHIEVEMENTS then
		f16_arg0._filterState = f0_local0.INCOMPLETED_ACHIEVEMENTS
	else
		f16_arg0._filterState = f0_local0.ALL_ACHIEVEMENTS
	end
end

local f0_local8 = function ( f15_arg0 )
	return f0_local0[f15_arg0._filterState]
end

local f0_local9 = function ( f14_arg0 )
	f14_arg0._achievements = LUI.AchievementsManager.GetAchievements( f14_arg0._controllerIndex, true )
	f14_arg0.AchievementsList:SetNumChildren( #f14_arg0._achievements )
	f14_arg0.AchievementsList:RefreshContent()
	f14_arg0.TotalScore:SetScore( f0_local0( f14_arg0 ) )
end

local f0_local10 = function ( f13_arg0, f13_arg1, f13_arg2, f13_arg3 )
	local f13_local0
	if f13_arg2 then
		f13_local0 = f13_arg2
	elseif f13_arg3 then
		f13_local0 = f13_arg3
	else
		f13_local0 = 0 < f13_arg3
	end
	if f13_local0 then
		f13_arg0:AddTooltipData( f13_arg1, {
			tooltipDescription = Engine[0xED84C33EC5F01EA]( 0x6BB036CA4CFCE4D, LUI.Round( f13_arg2 / f13_arg3 * 100, 0 ) )
		} )
	end
end

local f0_local11 = function ( f9_arg0 )
	return function ( f10_arg0, f10_arg1, f10_arg2 )
		local f10_local0 = f9_arg0.AchievementsList:GetContentIndex( f10_arg1, f10_arg2 )
		local f10_local1 = f9_arg0._achievements[f10_local0 + 1]
		f10_arg0.Name:setText( f10_local1.name )
		f10_arg0.Description:setText( f10_local1.description )
		f10_arg0.GameMode:setText( Engine[0xED84C33EC5F01EA]( f9_arg0[f10_local1.gameMode + 1] ) )
		if f10_local1.image then
			f10_arg0.Image:setImage( RegisterMaterial( f10_local1.image ) )
		end
		f9_arg0( f10_arg0, f9_arg0._controllerIndex, f10_local1.score, f9_arg0._maximumScore )
		f10_arg0.isCompleted = f10_local1.isCompleted
		f10_arg0:UpdateAnimationState()
		if f10_local1.isCompleted then
			ACTIONS.AnimateSequence( f10_arg0, "Completed" )
		else
			ACTIONS.AnimateSequence( f10_arg0, "Idle" )
		end
		if Engine[0x2DA54CF5D6B7F02]() then
			if not f10_arg0._currentIndex then
				f10_arg0:addEventHandler( "leftmousedown", function ( f12_arg0, f12_arg1 )
					local f12_local0 = f10_arg0( f10_arg0, f12_arg0._currentIndex )
					Engine[0xB81A5136C5503E4]( "achievements_giveAchievement " .. tostring( f12_local0.nameId ) )
					f10_arg0( f10_arg0 )
					return true
				end )
				f10_arg0:addEventHandler( "rightmousedown", function ( f11_arg0, f11_arg1 )
					local f11_local0 = f10_arg0( f10_arg0, f11_arg0._currentIndex )
					Engine[0xB81A5136C5503E4]( "achievements_clearAchievements" )
					f10_arg0( f10_arg0 )
					return true
				end )
			end
			f10_arg0._currentIndex = f10_local0
		end
	end
	
end

local f0_local12 = function ( f8_arg0 )
	local f8_local0 = LUI.AchievementsManager.GetAchievements( f8_arg0._controllerIndex, true )
	f8_arg0._achievements = {}
	local f8_local1 = 0
	f8_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
		button_ref = "button_r3"
	} )
	f0_local0( f8_arg0 )
	for f8_local5, f8_local6 in ipairs( f8_local0 ) do
		if f8_arg0._areAchievementsCompleted and f8_local6.isCompleted then
			table.insert( f8_arg0._achievements, f8_local6 )
			f8_local1 = f8_local1 + 1
		end
		if f8_arg0._areAchievementsIncomplete and not f8_local6.isCompleted then
			table.insert( f8_arg0._achievements, f8_local6 )
		end
	end
	if f8_local1 >= 1 or f8_arg0._filterState == f0_local0.INCOMPLETED_ACHIEVEMENTS then
		f8_local2 = false
	else
		f8_local2 = true
	end
	if f8_local2 or f8_local1 == #f8_local0 then
		f8_arg0._achievements = f8_local0
		f8_arg0._filterState = f0_local0.ALL_ACHIEVEMENTS
	else
		f8_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			side = "left",
			priority = 1,
			ignoreTooltipPrompt = true,
			button_ref = "button_right_trigger",
			helper_text = Engine[0xED84C33EC5F01EA]( 0xB2CC3512F4EC81A, f0_local0( f8_arg0 ) ),
			container = f8_arg0.PromptsContainer,
			containerAlignment = LUI.Alignment.Left
		} )
	end
	f8_arg0.AchievementsList:SetNumChildren( #f8_arg0._achievements )
	f8_arg0.AchievementsList:SetRefreshChild( f0_local0( f8_arg0 ) )
	f8_arg0.TotalScore:SetScore( f0_local0( f8_arg0 ) )
end

local f0_local13 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0._controllerIndex = f3_arg1
	f3_arg0._filterState = f0_local0.ALL_ACHIEVEMENTS
	f3_arg0._showLogoAndTitle = true
	f0_local0( f3_arg0 )
	f3_arg0:SubscribeToInputTypeModel( f3_arg1, function ( f7_arg0, f7_arg1 )
		local f7_local0 = f7_arg1._controllerIndex
		if not CONDITIONS.IsMouseNavigation( f7_local0 ) and f7_arg1.AchievementsList then
			f7_arg1.AchievementsList:processEvent( {
				name = "gain_focus",
				controller = f7_local0
			} )
		end
	end )
	f3_arg0.AchievementsList:SetScrollSpeed( f0_local0 )
	if CONDITIONS.IsSteamGame() then
		f3_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			side = "left",
			priority = 2,
			ignoreTooltipPrompt = true,
			button_ref = "button_alt2",
			helper_text = Engine[0xED84C33EC5F01EA]( 0x5525E92DE955852 ),
			container = f3_arg0.PromptsContainer,
			containerAlignment = LUI.Alignment.Left
		} )
	end
	f3_arg0:AddGamepadEventCallback( "button_secondary", function ( f6_arg0, f6_arg1 )
		ACTIONS.LeaveMenu( f6_arg0 )
	end )
	f3_arg0:AddGamepadEventCallback( "button_right_trigger", function ( f5_arg0, f5_arg1 )
		Engine[0xC4146BA76D0F982]( CoD.SFX.MouseClick )
		f3_arg0( f5_arg0 )
		f3_arg0( f5_arg0 )
	end )
	f3_arg0:AddGamepadEventCallback( "button_alt2", function ( f4_arg0, f4_arg1 )
		if CONDITIONS.IsSteamGame() then
			Engine[0x9BA4C31F5D63821]()
		end
	end )
end

local f0_local14 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PostLoadShared = f0_local0
end

function AchievementsMenuBase( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = MenuBuilder
	local f1_local2 = f1_local0.UIMenu.new()
	f1_local2.id = "AchievementsMenuBase"
	local f1_local3
	if f1_arg1 then
		f1_local3 = f1_arg1
	else
		f1_local3 = f1_arg1.controllerIndex
	end
	f1_local3 = f1_local0.ValidateControllerIndex( f1_local2, f1_local3 )
	local f1_local4 = f1_local2
	local f1_local5 = nil
	f1_local5 = f1_local0.UIImage.new()
	f1_local5[0x8B72E07B55C3AC0] = "Background"
	ACTIONS.ScaleFullscreen( f1_local5 )
	f1_local5:SetRGB( SWATCHES[0x31408192FB5B5C6][0xD4176E7CA246EDD], 0 )
	f1_local5:SetAlpha( 0.85, 0 )
	f1_local5:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1920, 0, 1080 )
	f1_local2:addElement( f1_local5 )
	f1_local2[0xD4176E7CA246EDD] = f1_local5
	f0_local0( f1_local2, f1_local3, f1_arg1 )
	return f1_local2
end

MenuBuilder.registerType( 0x829B62873D782CB, AchievementsMenuBase )
LockTable( _M )
