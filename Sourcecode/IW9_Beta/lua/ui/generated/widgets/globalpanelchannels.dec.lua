-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
module( ..., package.seeall )
require( "ui.generated.widgets.dynamiclist" )
require( "ui.generated.widgets.scrollbar.verticalminimalscrollbar" )
require( "ui.generated.widgets.buttonhelperbar" )
require( "ui.generated.widgets.buttonpromptcontainerhorizontal" )
require( "ui.generated.widgets.globalpanelsubheader" )
require( "ui.generated.widgets.channelserviceunavailablewarning" )
local f0_local0 = "button_r3"
local f0_local1 = "button_mute_microphone"
local f0_local2 = "button_alt2"
local f0_local3 = 1000
local f0_local4 = 500
local f0_local5 = function ( f14_arg0, f14_arg1, f14_arg2, f14_arg3 )
	f14_arg0.DynamicList:AddWidget( f14_arg1, {
		adjustContentToFit = true,
		refreshGrid = false,
		widgetOptions = f14_arg2,
		focusable = f14_arg3
	} )
end

local f0_local6 = function ( f13_arg0 )
	local f13_local0 = Social[0xC57868DE2B09F52]( f13_arg0._controllerIndex )
	local f13_local1 = ChatChannel[0xD208983B645FC0E]( f13_arg0._controllerIndex, 0, 0, Enum[0xEBC6725912C9693][0x7C61CC549527A1] )
	f13_arg0._customChannelIDs = {}
	f13_arg0._whisperIDs = {}
	f13_arg0._numSocialChannels = 0
	for f13_local5, f13_local6 in ipairs( f13_local0 ) do
		assert( CHANNELS.IsValidPartyID( f13_local6 ) )
		if Social[0x18C8869C97BE161]( f13_local6 ) == Enum[0x71816B8A6999EAF][0xC0E29ADAA5D346F] and f13_arg0._numSocialChannels < CHANNELS.MAX_SOCIAL_CHANNELS then
			table.insert( f13_arg0._customChannelIDs, f13_local6 )
			f13_arg0._numSocialChannels = f13_arg0._numSocialChannels + 1
		end
	end
	if CONDITIONS.IsChannelsTextChatEnabled( f13_arg0._controllerIndex ) and CONDITIONS.WhispersEnabled( f13_arg0._controllerIndex ) then
		for f13_local5, f13_local6 in ipairs( f13_local1 ) do
			table.insert( f13_arg0._whisperIDs, f13_local6.id )
		end
	end
	if f13_local0 then
		f13_local2 = #f13_local0
		if not f13_local2 then
		
		else
			if f13_local1 then
				f13_local3 = #f13_local1
				if not f13_local3 then
				
				else
					if f13_local2 + f13_local3 ~= f13_arg0._numChannels + f13_arg0._numWhispers then
						f13_arg0._numChannels = f13_local2
						f13_arg0._numWhispers = f13_local3
						f13_arg0:UpdateChannelsList()
					end
				end
			end
			f13_local3 = 0
		end
	end
	f13_local2 = 0
end

local f0_local7 = function ( f12_arg0 )
	f12_arg0.DynamicList:RemoveAllWidgets( false )
	f0_local0( f12_arg0, "Header", {
		text = Engine[0xED84C33EC5F01EA]( 0xFE047514255CB3E )
	}, false )
	f0_local0( f12_arg0, "ChannelButton", {
		channelID = Social[0x446FFD0DEAD15E3](),
		defaultChannelType = Enum[0x71816B8A6999EAF][0x5F503BE0C38AF61]
	} )
	f0_local0( f12_arg0, "ChannelButton", {
		channelID = Social[0xB9C5B51E48C7B30](),
		defaultChannelType = Enum[0x71816B8A6999EAF][0x6779FA46C0A2058]
	} )
	f0_local0( f12_arg0, "Header", {
		text = Engine[0xED84C33EC5F01EA]( 0x60599B261ED1F6A, f12_arg0._numSocialChannels, CHANNELS.MAX_SOCIAL_CHANNELS )
	}, false )
	for f12_local3, f12_local4 in ipairs( f12_arg0._customChannelIDs ) do
		f0_local0( f12_arg0, "ChannelButton", {
			channelID = f12_local4
		} )
	end
	if 0 < #f12_arg0._whisperIDs then
		f0_local0( f12_arg0, "Header", {
			text = Engine[0xED84C33EC5F01EA]( 0x28ABA65BCDB4F64 )
		}, false )
		for f12_local3, f12_local4 in ipairs( f12_arg0._whisperIDs ) do
			f0_local0( f12_arg0, "WhisperButton", {
				chatID = f12_local4
			} )
		end
	end
	f12_arg0.DynamicList:RefreshGrid()
end

local f0_local8 = function ( f11_arg0 )
	if Social[0xF12FC4AFD7A2A6D]( f11_arg0._controllerIndex ) ~= CHANNELS.INVALID_PARTY_ID then
		local f11_local0 = Social[0xB74F196EE36B11]( f11_arg0._controllerIndex )
		if f11_arg0._isMicEnabled ~= f11_local0 or not f11_arg0._selfMutePromptEnabled then
			f11_arg0._selfMutePromptEnabled = true
			f11_arg0._isMicEnabled = f11_local0
			f11_arg0.ButtonHelperBar.ButtonHelperText:PopButtonPrompt( {
				button_ref = f0_local0
			} )
			f11_arg0.ButtonHelperBar.ButtonHelperText:PopButtonPrompt( {
				button_ref = f0_local0
			} )
			local f11_local1 = {
				side = "right",
				priority = 0,
				ignoreTooltipPrompt = true,
				helper_text = f11_arg0._isMicEnabled and Engine[0xED84C33EC5F01EA]( 0x5D0BE6F381D1BC1 ) or Engine[0xED84C33EC5F01EA]( 0x6BD2099AA9CEE20 ),
				container = f11_arg0.SelfMutePromptContainer
			}
			local f11_local2 = LUI.ShallowCopy( f11_local1 )
			f11_local2.button_ref = f0_local0
			f11_local2.gamepad_only = true
			f11_arg0.ButtonHelperBar.ButtonHelperText:PushButtonPrompt( f11_local2 )
			local f11_local3 = LUI.ShallowCopy( f11_local1 )
			f11_local3.button_ref = f0_local0
			f11_local3.kbm_only = true
			f11_arg0.ButtonHelperBar.ButtonHelperText:PushButtonPrompt( f11_local3 )
		end
	elseif f11_arg0._selfMutePromptEnabled then
		f11_arg0.ButtonHelperBar.ButtonHelperText:PopButtonPrompt( {
			button_ref = f0_local0
		} )
		f11_arg0.ButtonHelperBar.ButtonHelperText:PopButtonPrompt( {
			button_ref = f0_local0
		} )
		f11_arg0._selfMutePromptEnabled = false
	end
end

local f0_local9 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.UpdateChannelsList = f0_local0
	f2_arg0.UpdateMicButtonPrompt = f0_local0
	f2_arg0._controllerIndex = f2_arg1
	f2_arg0._isMicEnabled = Social[0xB74F196EE36B11]( f2_arg1 )
	f2_arg0._numChannels = 0
	f2_arg0._numWhispers = 0
	f2_arg0.DynamicList:SetupList( {
		maxVisibleColumns = 1,
		maxVisibleRows = 10,
		wrapY = false,
		spacingY = 10,
		alignment = LUI.Alignment.Top
	}, f2_arg0.VerticalMinimalScrollbar )
	f2_arg0.DynamicList:SetHandleActiveState( f2_arg0 )
	f2_arg0.DynamicList:RegisterWidgetType( "Header", function ( f10_arg0, f10_arg1 )
		local f10_local0 = MenuBuilder.BuildRegisteredType( "GlobalPanelSubHeader", {
			controllerIndex = f2_arg0
		} )
		f10_local0:SetHeaderText( f10_arg1.text )
		ACTIONS.AnimateSequence( f10_local0, "SubHeader" )
		return f10_local0
	end )
	f2_arg0.DynamicList:RegisterWidgetType( "ChannelButton", function ( f9_arg0, f9_arg1 )
		local f9_local0 = MenuBuilder.BuildRegisteredType( "ChannelButton", {
			controllerIndex = f2_arg0
		} )
		f9_local0:SetChannelID( f9_arg1.channelID, f9_arg1.defaultChannelType )
		return f9_local0
	end )
	f2_arg0.DynamicList:RegisterWidgetType( "WhisperButton", function ( f8_arg0, f8_arg1 )
		local f8_local0 = MenuBuilder.BuildRegisteredType( "WhisperButton", {
			controllerIndex = f2_arg0
		} )
		f8_local0:SetChatID( f8_arg1.chatID )
		return f8_local0
	end )
	f2_arg0:CreateEventTimer( "channelsRefreshTimer", f0_local0, {
		immediate = true,
		callbackFunc = function ( f7_arg0, f7_arg1 )
			f2_arg0( f7_arg0 )
			return true
		end
	} )
	f2_arg0:CreateEventTimer( "micStatusRefreshTimer", f0_local0, {
		immediate = true,
		callbackFunc = function ( f6_arg0, f6_arg1 )
			f2_arg0( f6_arg0 )
			return true
		end
	} )
	PARTY.AddPartyEventHandlers( f2_arg0, {
		[PARTY.PartyEvents.SOCIAL_PARTY_CREATED] = function ( f5_arg0, f5_arg1 )
			PARTY.CreateChannelCallback( f5_arg0, f2_arg0, f5_arg1 )
		end
	} )
	f2_arg0:AddGamepadEventCallback( "button_right_stick", function ( f4_arg0, f4_arg1 )
		Social[0x7FD640B7D8FD15E]( f2_arg0._controllerIndex )
		f2_arg0:UpdateMicButtonPrompt()
	end )
	if CHANNELS.CanCreateSocialChannels( f2_arg0._controllerIndex ) then
		f2_arg0.ChannelsHeader:SetPrompt( f2_arg0.ButtonHelperBar, 0x2754E38288269E3 )
		f2_arg0:AddGamepadEventCallback( f0_local0, function ( f3_arg0, f3_arg1 )
			Social[0xCEF8E2462994D06]( f2_arg0._controllerIndex )
		end )
	end
	f2_arg0.ButtonHelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		priority = 0,
		gamepad_only = true,
		button_ref = "button_start",
		helper_text = Engine[0xED84C33EC5F01EA]( 0xF2F6A0A4A145692 ),
		container = f2_arg0.ButtonPromptContainer
	} )
end

function GlobalPanelChannels( menu, controller )
	local self = LUI.UIVerticalNavigator.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 620 * _1080p, 0, 1080 * _1080p )
	self.id = "GlobalPanelChannels"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local Background = nil
	
	Background = LUI.UIImage.new()
	Background.id = "Background"
	Background:SetRGBFromInt( 0, 0 )
	Background:SetAlpha( 0.45, 0 )
	Background:setImage( RegisterMaterial( 0x69E60085209E5A4 ), 0 )
	Background:Setup9SliceImage( _1080p * 20, _1080p * 20, 0.3, 0.3 )
	Background:SetAnchorsAndPosition( 0, 0, 0, 1, _1080p * 22, _1080p * -22, _1080p * 142, _1080p * 968 )
	self:addElement( Background )
	self.Background = Background
	
	local DynamicList = nil
	
	DynamicList = MenuBuilder.BuildRegisteredType( "DynamicList", {
		controllerIndex = f1_local1
	} )
	DynamicList.id = "DynamicList"
	DynamicList:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -264, _1080p * 264, _1080p * 152, _1080p * 958 )
	self:addElement( DynamicList )
	self.DynamicList = DynamicList
	
	local VerticalMinimalScrollbar = nil
	
	VerticalMinimalScrollbar = MenuBuilder.BuildRegisteredType( "VerticalMinimalScrollbar", {
		controllerIndex = f1_local1
	} )
	VerticalMinimalScrollbar.id = "VerticalMinimalScrollbar"
	VerticalMinimalScrollbar:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * 280, _1080p * 291, _1080p * 152, _1080p * 958 )
	self:addElement( VerticalMinimalScrollbar )
	self.VerticalMinimalScrollbar = VerticalMinimalScrollbar
	
	local ButtonHelperBar = nil
	
	ButtonHelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	ButtonHelperBar.id = "ButtonHelperBar"
	ButtonHelperBar:SetAlpha( 0, 0 )
	ButtonHelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, _1080p * 22, _1080p * -22, _1080p * -82, _1080p * -22 )
	self:addElement( ButtonHelperBar )
	self.ButtonHelperBar = ButtonHelperBar
	
	local ButtonPromptContainer = nil
	ButtonPromptContainer = MenuBuilder.BuildRegisteredType( "ButtonPromptContainerHorizontal", {
		controllerIndex = f1_local1
	} )
	ButtonPromptContainer.id = "ButtonPromptContainer"
	if CONDITIONS.AlwaysFalse() then
		ButtonPromptContainer.Label:setText( "ButtonPrompt", 0 )
	end
	ButtonPromptContainer:SetAnchorsAndPosition( 0, 1, 1, 0, _1080p * 22, _1080p * 122, _1080p * -53, _1080p * -22 )
	self:addElement( ButtonPromptContainer )
	self.ButtonPromptContainer = ButtonPromptContainer
	
	local SelfMutePromptContainer = nil
	SelfMutePromptContainer = MenuBuilder.BuildRegisteredType( "ButtonPromptContainerHorizontal", {
		controllerIndex = f1_local1
	} )
	SelfMutePromptContainer.id = "SelfMutePromptContainer"
	if CONDITIONS.AlwaysFalse() then
		SelfMutePromptContainer.Label:setText( "ButtonPrompt", 0 )
	end
	SelfMutePromptContainer:SetAnchorsAndPosition( 1, 0, 1, 0, _1080p * -165, _1080p * -65, _1080p * -52, _1080p * -22 )
	self:addElement( SelfMutePromptContainer )
	self.SelfMutePromptContainer = SelfMutePromptContainer
	
	local ChannelsHeader = nil
	
	ChannelsHeader = MenuBuilder.BuildRegisteredType( "GlobalPanelSubHeader", {
		controllerIndex = f1_local1
	} )
	ChannelsHeader.id = "ChannelsHeader"
	ChannelsHeader.Text:setText( Engine[0xED84C33EC5F01EA]( 0xF96EE50CBEFCD07 ), 0 )
	ChannelsHeader:SetAnchorsAndPosition( 0, 0, 0, 1, _1080p * 22, _1080p * -22, _1080p * 106, _1080p * 138 )
	self:addElement( ChannelsHeader )
	self.ChannelsHeader = ChannelsHeader
	
	local ChannelServiceUnavailableWarning = nil
	
	ChannelServiceUnavailableWarning = MenuBuilder.BuildRegisteredType( "ChannelServiceUnavailableWarning", {
		controllerIndex = f1_local1
	} )
	ChannelServiceUnavailableWarning.id = "ChannelServiceUnavailableWarning"
	ChannelServiceUnavailableWarning:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, _1080p * -310, _1080p * 310, _1080p * -984, _1080p * -80 )
	self:addElement( ChannelServiceUnavailableWarning )
	self.ChannelServiceUnavailableWarning = ChannelServiceUnavailableWarning
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "GlobalPanelChannels", GlobalPanelChannels )
LockTable( _M )
