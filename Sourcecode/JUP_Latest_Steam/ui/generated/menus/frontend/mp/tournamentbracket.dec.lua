-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
module( ..., package.seeall )
require( "ui.generated.widgets.genericbutton" )
require( "ui.generated.widgets.frontend.lobby.lobbymembers" )
require( "ui.generated.widgets.frontend.menutitle" )
require( "ui.generated.widgets.frontend.mp.mpplayerdetails" )
LUI.FlowManager.RegisterFenceGroup( "TournamentBracket", {
	nil,
	"tournament"
} )
LUI.FlowManager.RequestSetStack( "TournamentBracket", {
	{
		name = "MainLockoutMenu"
	},
	{
		name = "MainMenu"
	},
	{
		name = "MPMainMenu"
	}
} )
local f0_local0 = "frontEnd.mp.tournamentbracket"
local f0_local1 = function ()
	WipeGlobalModelsAtPath( f0_local0 )
end

function LeaveTournament( f8_arg0, f8_arg1 )
	local f8_local0 = {
		title = Engine[0xED84C33EC5F01EA]( 0x1CCA5C59ECE1EA6 )
	}
	local f8_local1 = Tournament[0x43F20AA8E089BF8]()
	if f8_local1 ~= MP.TournamentParticipationStatus.ELIMINATED and f8_local1 ~= MP.TournamentParticipationStatus.VICTORIOUS then
		Engine[0xC4146BA76D0F982]( SOUND_SETS.prestige.prestigeCancel )
	end
	if Lobby[0x63537242F1D48FF]() and not Lobby[0x6957722EF74F5D2]() then
		f8_local0.message = Engine[0xED84C33EC5F01EA]( 0x3770EE4D0EBEC14 )
	else
		f8_local0.message = Engine[0xED84C33EC5F01EA]( 0x3704312575A17C7 )
	end
	f8_local0.yesAction = function ( f10_arg0, f10_arg1 )
		Tournament[0xF8B2F41CC5CF158]()
		Engine[0x5DEE98AA6FB3C2]( f10_arg1, CoD.LeavePartyMoveUI.YES, CoD.LeavePartyShowMessage.NO, "TournamentBracket LeaveTournament" )
		LUI.FlowManager.RequestLeaveMenu( f8_arg0.TournamentBracket, true, true )
	end
	
	f8_local0.noAction = function ()
		
	end
	
	local f8_local2 = MenuBuilder.BuildRegisteredType( "PopupYesNo", f8_local0 )
	f8_local2.id = "LeaveTournament"
	return f8_local2
end

MenuBuilder.registerType( "LeaveTournament", LeaveTournament )
function UpdateBracket( f7_arg0 )
	local f7_local0 = Tournament[0xBC16030F3F31FF4]()
	for f7_local1 = 1, f7_local0 + 1, 1 do
		local f7_local4 = 2 * 2 ^ (f7_local0 - f7_local1)
		for f7_local5 = 1, f7_local4, 1 do
			local f7_local8 = f7_local1 - 1
			local f7_local9 = (f7_local5 - 1) / 2
			local f7_local10 = (f7_local5 - 1) % 2
			local f7_local11 = Tournament[0x10ED0BFB4EB6AFE]( f7_local8, f7_local9, f7_local10 )
			if 0 <= f7_local11 then
				local f7_local12 = Engine[0xED84C33EC5F01EA]( Tournament[0xB85D61851DF0085]( f7_local11 ) ) .. ":" .. Tournament[0xECEE048BFFCC94E]( f7_local8, f7_local9, f7_local10 )
				if f7_local11 == Tournament[0xC54AB658C88AAB1]() then
					f7_local12 = "->" .. f7_local12
				end
				f7_arg0.bracketList.roundList[f7_local1].teamButton[f7_local5].Text:setText( f7_local12, 0 )
			else
				f7_arg0.bracketList.roundList[f7_local1].teamButton[f7_local5].Text:setText( "" )
			end
			if Tournament[0x1DDEE0C61545CC2]( f7_local8, f7_local9 ) then
				f7_arg0.bracketList.roundList[f7_local1].teamButton[f7_local5].Text:SetRGB( COLORS.HighlightBlue )
			else
				f7_arg0.bracketList.roundList[f7_local1].teamButton[f7_local5].Text:SetRGB( COLORS.white )
			end
		end
	end
	local f7_local1 = Tournament[0x43F20AA8E089BF8]()
	if f7_local1 == 0 then
		f7_arg0.ReadyButton.Text:setText( "NOT PARTICIPATING" )
	elseif f7_local1 == 1 then
		if Tournament[0xCE7845EC09BA110]() then
			f7_arg0.ReadyButton.Text:setText( "READY UP (READY)" )
		else
			f7_arg0.ReadyButton.Text:setText( "READY UP (NOT READY)" )
		end
	elseif f7_local1 == 2 then
		f7_arg0.ReadyButton.Text:setText( "ELIMINATED" )
	elseif f7_local1 == 3 then
		f7_arg0.ReadyButton.Text:setText( "VICTORIOUS" )
	end
end

local f0_local2 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0:SetAlpha( 0, 0 )
	f2_arg0:SetAlpha( 1, 400, LUI.EASING.outQuadratic )
	f2_arg0.menuModelPath = f0_local0
	local f2_local0 = 35
	
	local bracketList = LUI.UIHorizontalList.new()
	bracketList:SetAnchorsAndPosition( 0, 1, 0, 1, 100, 200, 600, 700 )
	bracketList:SetAlignment( LUI.Alignment.Left )
	bracketList:SetSpacing( f2_local0 )
	bracketList.id = "bracketList"
	bracketList:SetNoWrap( true )
	f2_arg0:addElement( bracketList )
	f2_arg0.bracketList = bracketList
	
	local f2_local2 = Tournament[0xBC16030F3F31FF4]()
	bracketList.roundList = {}
	for f2_local3 = 1, f2_local2 + 1, 1 do
		local f2_local6 = 40
		local f2_local7 = f2_local6 + 40
		local f2_local8 = LUI.UIVerticalList.new( {
			verticalAlignment = LUI.Alignment.Middle
		} )
		f2_local8:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 250, 0, 40 )
		f2_local8:SetSpacing( f2_local7 * 2 ^ (f2_local3 - 1) - f2_local6 )
		f2_local8.id = "roundList" .. f2_local3
		f2_local8:SetNoWrap( true )
		bracketList:addElement( f2_local8 )
		bracketList.roundList[f2_local3] = f2_local8
		local f2_local9 = 2 * 2 ^ (f2_local2 - f2_local3)
		f2_local8.teamButton = {}
		for f2_local10 = 1, f2_local9, 1 do
			local f2_local13 = MenuBuilder.BuildRegisteredType( "GenericButton", {
				controllerIndex = f2_arg1
			} )
			f2_local13:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 250, 0, f2_local6 )
			f2_local13.id = "teamButton" .. f2_local3 .. "-" .. f2_local10
			f2_local13.roundIndex = f2_local3 - 1
			f2_local13.matchIndex = (f2_local10 - 1) / 2
			f2_local13.Text:SetAlignment( LUI.Alignment.Left )
			f2_local13:addEventHandler( "button_action", function ( f6_arg0 )
				Tournament[0x92A47F581B2CF0B]( f6_arg0.roundIndex, f6_arg0.matchIndex )
			end )
			f2_local8:addElement( f2_local13 )
			f2_local8.teamButton[f2_local10] = f2_local13
		end
	end
	f2_arg0.ReadyButton:addEventHandler( "button_action", function ( f5_arg0 )
		if Tournament[0xCE7845EC09BA110]() then
			Tournament[0x4BA9CB370A7D174]( 0 )
		else
			Tournament[0x4BA9CB370A7D174]( 1 )
		end
	end )
	f2_arg0:AddGamepadEventCallback( "button_secondary", function ( f4_arg0, f4_arg1 )
		local f4_local0 = f4_arg1.controller or f2_arg0
		if not Lobby.AreWePrivatePartyHost() then
			LUI.FlowManager.RequestPopupMenu( nil, "LeaveTournament", true, f4_local0, false, {
				TournamentBracket = f4_arg0
			} )
		else
			Tournament[0xF8B2F41CC5CF158]()
			ACTIONS.LeaveMenu( f4_arg0 )
		end
		return true
	end )
	if not Lobby[0x63537242F1D48FF]() then
		Social[0x4CFFBE37F5E69BB]( f2_arg1, "Opened TournamentBracket" )
	end
	f2_arg0.ReadyButton.navigation = {}
	f2_arg0.ReadyButton.navigation.down = f2_arg0.bracketList
	f2_arg0.ReadyButton.navigation.left = f2_arg0.LobbyMembers
	f2_arg0.ReadyButton.navigation.right = f2_arg0.LobbyMembers
	f2_arg0.bracketList.navigation = {}
	f2_arg0.bracketList.navigation.up = f2_arg0.ReadyButton
	f2_arg0.bracketList.navigation.left = f2_arg0.LobbyMembers
	f2_arg0.bracketList.navigation.right = f2_arg0.LobbyMembers
	f2_arg0.LobbyMembers.navigation = {}
	f2_arg0.LobbyMembers.navigation.left = f2_arg0.ReadyButton
	f2_arg0.LobbyMembers.navigation.right = f2_arg0.ReadyButton
	local f2_local3 = LUI.UITimer.new( {
		interval = 1000,
		event = {
			name = "refreshBracket"
		}
	} )
	f2_local3.id = "RefreshBracketTimer"
	f2_arg0:addElement( f2_local3 )
	f2_arg0:registerEventHandler( "refreshBracket", function ( element, event )
		UpdateBracket( element )
	end )
	f2_arg0:processEvent( {
		name = "refreshBracket"
	} )
end

function TournamentBracket( f1_arg0, f1_arg1 )
	local f1_local0 = CONDITIONS
	local f1_local1 = LUI
	local f1_local2 = MenuBuilder
	local f1_local3 = f1_local1.UIHorizontalNavigatorMenu.new()
	f1_local3.id = "TournamentBracket"
	local f1_local4
	if f1_arg1 then
		f1_local4 = f1_arg1
	else
		f1_local4 = f1_arg1.controllerIndex
	end
	f1_local4 = f1_local1.ValidateControllerIndex( f1_local3, f1_local4 )
	f1_local3[0x4C364FC7CAA3C92] = f1_local2.BuildRegisteredType( 0x8608EBDC1924A2E, {
		controllerIndex = f1_local4
	} )
	f1_local3[0x4C364FC7CAA3C92][0x8B72E07B55C3AC0] = "HelperBar"
	if f1_local0.IsMobileOrMobileSim() then
		f1_local3[0x4C364FC7CAA3C92]:SetAnchorsAndPosition( 1, 0, 0, 0, -120, 0, 0, 0 )
	else
		f1_local3[0x4C364FC7CAA3C92]:SetAnchorsAndPosition( 0, 0, 1, 0, 0, 0, -115, -30 )
	end
	f1_local3[0x4C364FC7CAA3C92]:setPriority( 10 )
	f1_local3:addElement( f1_local3[0x4C364FC7CAA3C92] )
	local f1_local5 = f1_local3
	local f1_local6 = nil
	f1_local6 = f1_local2.BuildRegisteredType( 0x4DF62CF810D16C2, {
		controllerIndex = f1_local4
	} )
	f1_local6[0x8B72E07B55C3AC0] = "ReadyButton"
	f1_local6[0xA04F4EF1995407E]:SetRight( 0, 0 )
	f1_local6[0xA04F4EF1995407E]:SetLeft( 20, 0 )
	f1_local6[0xA04F4EF1995407E]:setText( ToUpperCase( "READY" ), 0 )
	f1_local6:SetAnchorsAndPosition( 0, 1, 0, 1, 130, 550, 185, 223 )
	f1_local3:addElement( f1_local6 )
	f1_local3[0x1ABFFF9C6D2FB50] = f1_local6
	local f1_local7 = nil
	f1_local7 = f1_local2.BuildRegisteredType( 0xEEA1171F1474D66, {
		controllerIndex = f1_local4
	} )
	f1_local7[0x8B72E07B55C3AC0] = "LobbyMembers"
	f1_local7:SetAnchorsAndPosition( 1, 0, 0, 1, -589, -96, 215, 859 )
	f1_local3:addElement( f1_local7 )
	f1_local3[0xEEA1171F1474D66] = f1_local7
	local f1_local8 = nil
	f1_local8 = f1_local2.BuildRegisteredType( 0x93CC4E91B38D10C, {
		controllerIndex = f1_local4
	} )
	f1_local8[0x8B72E07B55C3AC0] = "MenuTitle"
	f1_local8[0x93CC4E91B38D10C]:setText( ToUpperCase( "Tournament Bracket" ), 0 )
	f1_local8:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 1020, 0, 100 )
	f1_local3:addElement( f1_local8 )
	f1_local3[0x93CC4E91B38D10C] = f1_local8
	local f1_local9 = nil
	f1_local9 = f1_local2.BuildRegisteredType( 0x5C96B43760A8F03, {
		controllerIndex = f1_local4
	} )
	f1_local9[0x8B72E07B55C3AC0] = "FrontendCameraMover"
	f1_local9:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -300, 200, -400, 400 )
	f1_local3:addElement( f1_local9 )
	f1_local3[0x5C96B43760A8F03] = f1_local9
	local f1_local10 = nil
	if f1_local0.InFrontendPublicMP() then
		f1_local10 = f1_local2.BuildRegisteredType( 0xEAD4CA5B0C7D2DD, {
			controllerIndex = f1_local4
		} )
		f1_local10[0x8B72E07B55C3AC0] = "MPPlayerDetails"
		f1_local10:SetAnchorsAndPosition( 0, 1, 0, 1, 1404, 1824, 54, 114 )
		f1_local3:addElement( f1_local10 )
		f1_local3[0xEAD4CA5B0C7D2DD] = f1_local10
	end
	f1_local3[0x4C364FC7CAA3C92][0x21BFF04AEB34132]:PushButtonPrompt( {
		side = "left",
		button_ref = "button_secondary",
		priority = 1,
		helper_text = Engine[0xED84C33EC5F01EA]( 0xC6D515BE207B9A5 )
	} )
	f1_local3[0x4C364FC7CAA3C92][0x21BFF04AEB34132]:PushButtonPrompt( {
		side = "left",
		button_ref = "button_primary",
		priority = 2,
		helper_text = Engine[0xED84C33EC5F01EA]( 0x7D9DC9E3291E103 )
	} )
	f0_local0( f1_local3, f1_local4, f1_arg1 )
	return f1_local3
end

MenuBuilder.registerType( 0x6B2C21EB3785D8A, TournamentBracket )
LUI.FlowManager.RegisterStackPopBehaviour( 0x6B2C21EB3785D8A, f0_local1 )
LockTable( _M )
