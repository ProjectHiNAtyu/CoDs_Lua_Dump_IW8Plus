-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
module( ..., package.seeall )
local f0_local0 = function ( f42_arg0, f42_arg1 )
	if LOOT.HideLootBreadcrumbsCondition() then
		return 
	end
	local f42_local0 = f42_arg0.Tabs:GetTabAtIndex( f42_arg1 )
	if not f42_local0:IsEnabled() then
		return 
	end
	local f42_local1 = WEAPON.GetNewWeaponIDsByClass( f42_arg0._controllerIndex, f42_arg0.tabsData[f42_arg1].classRef )
	if f42_local0.NewItemSmallIcon then
		local f42_local2 = f42_local0.NewItemSmallIcon
		local f42_local3 = f42_local2
		f42_local2 = f42_local2.UpdateAlpha
		local f42_local4
		if 0 < #f42_local1 and not f42_arg0._isRestricted then
			f42_local4 = 1
		else
			f42_local4 = 0
		end
		f42_local2( f42_local3, f42_local4, 0 )
	end
end

local f0_local1 = function ( f41_arg0, f41_arg1, f41_arg2 )
	local f41_local0 = {}
	table.insert( f41_local0, f41_arg0._otherSelectedModel )
	table.insert( f41_local0, f41_arg0._equippedWatchModel )
	local f41_local1 = LUI.FlowManager.GetScopedData( f41_arg0 )
	local f41_local2 = nil
	for f41_local3 = f41_arg2 - 1, f41_arg2 + 1, 1 do
		local f41_local6
		if #f41_arg0.currentWeapons < f41_local3 then
			f41_local6 = 1
		elseif f41_local3 == 0 then
			f41_local6 = #f41_arg0.currentWeapons
		end
		local f41_local7 = WEAPON.GetWeaponModelNameFromRef( f41_arg0.currentWeapons[f41_local6].ref )
		if not LUI.IsItemInArray( f41_local0, f41_local7 ) then
			if f41_local6 == f41_arg2 then
				f41_local2 = f41_local7
			else
				table.insert( f41_local0, f41_local7 )
			end
		end
	end
	if f41_local2 then
		table.insert( f41_local0, f41_local2 )
	end
	if 0 < #f41_local0 then
		FrontEndScene.RequestWeaponViewModels( f41_local0, f41_arg1 )
	end
end

local f0_local2 = function ( f40_arg0, f40_arg1 )
	for f40_local3, f40_local4 in ipairs( f40_arg0:GetBuiltChildren() ) do
		f40_local4:SetHandleMouse( f40_arg1 )
	end
end

local f0_local3 = function ( f39_arg0, f39_arg1, f39_arg2 )
	local f39_local0 = {}
	for f39_local1 = f39_arg2 - 1, f39_arg2 + 1, 1 do
		if 1 <= f39_local1 and f39_local1 <= #f39_arg0.tabsData and f39_local1 ~= f39_arg2 then
			local f39_local4 = WEAPON.GetWeaponModelNameFromRef( f39_arg0.tabsData[f39_local1].weaponData[1].ref )
			if not LUI.IsItemInArray( f39_local0, f39_local4 ) then
				table.insert( f39_local0, f39_local4 )
			end
		end
	end
	if not LUI.IsItemInArray( f39_local0, f39_arg0._otherSelectedModel ) then
		table.insert( f39_local0, f39_arg0._otherSelectedModel )
		table.insert( f39_local0, f39_arg0._equippedWatchModel )
	end
	if 0 < #f39_local0 then
		FrontEndScene.RequestWeaponViewModels( f39_local0, f39_arg1 )
	end
end

local f0_local4 = function ( f38_arg0, f38_arg1, f38_arg2, f38_arg3 )
	if f38_arg2.isBlueprint then
		return WEAPON.GetWeaponModelName( f38_arg2.weaponData.ref, f38_arg2.weaponData.blueprint, {
			includeAttachments = true,
			controllerIndex = f38_arg1
		} )
	else
		return WEAPON.GetWeaponModelNameFromRef( f38_arg2.weaponData.ref )
	end
end

local f0_local5 = function ( f35_arg0, f35_arg1, f35_arg2, f35_arg3, f35_arg4, f35_arg5 )
	local f35_local0 = f0_local0( f35_arg0, f35_arg1, f35_arg2, f35_arg5.weaponSetups[f35_arg4] )
	if f35_arg0._currentWeaponModel then
		local f35_local1 = function ()
			f35_arg0._currentWeaponModel = f35_arg0._nextWeaponModel
			f35_arg0._nextWeaponModel = nil
			f35_arg0:SetWeaponModel( f35_arg0._currentWeaponModel )
			if f35_arg0.hidden then
				f35_arg0:SetAnchorsAndPosition( 0, 0, 0, 1, -302, 779, 290, 740, 0 )
				f35_arg0.hidden = false
			end
		end
		
		f35_arg0._nextWeaponModel = f35_local0
		if Streaming[0xBE636A91711ED30]( {
			f35_arg0._nextWeaponModel
		}, f35_arg1 ) then
			f35_local1()
		else
			local f35_local2 = nil
			local f35_local3 = function ()
				if f35_arg0._nextWeaponModel then
					if Streaming[0xBE636A91711ED30]( {
						f35_arg0._nextWeaponModel
					}, f35_arg0 ) then
						f35_arg0()
					else
						local f36_local0 = f35_arg0:Wait( 100, true )
						f36_local0.onComplete = f35_arg0
						f35_arg0:SetAnchorsAndPosition( 0, 0, 0, 1, -302, 779, 1500, 1500, 0 )
						f35_arg0.hidden = true
					end
				end
			end
			
			f35_local3()
		end
	end
	f35_arg3:SetWeaponModel( f35_local0 )
	f35_arg0._currentWeaponModel = f35_local0
	f35_arg0._nextWeaponModel = nil
end

local f0_local6 = function ( f34_arg0, f34_arg1 )
	local f34_local0 = -0.6
	local f34_local1 = 0.6
	local f34_local2 = -0.6
	local f34_local3 = 0.6
	local f34_local4 = 3500
	local f34_local5 = ""
	local f34_local6 = WEAPON.GetWeaponClass( f34_arg1 )
	if f34_arg0.weaponSlot == WEAPON.PrimarySlot then
		f34_local5 = "loadout_showcase_p"
	else
		f34_local5 = WEAPON.GetGunTableSecondPositionScene( f34_arg1 )
		if f34_local5 == "loadout_showcase_s" then
			local f34_local7 = -0.3
			local f34_local8 = 0.3
			local f34_local9 = -0.3
			f34_local3 = 0.3
			f34_local2 = f34_local9
			f34_local1 = f34_local8
			f34_local0 = f34_local7
			f34_local4 = 4500
		end
	end
	if f34_arg0._currentCamera ~= f34_local5 then
		f34_arg0._currentCamera = f34_local5
		Engine[0x685AE31DEDA30A4]( f34_arg0._currentCamera )
	end
	f34_arg0.FrontendCameraMover:SetLimits( f34_local0, f34_local1, f34_local2, f34_local3 )
	f34_arg0.FrontendCameraMover:SetSwayValues( f34_local4, 0.06, 0.1 )
end

local f0_local7 = function ( f33_arg0 )
	local f33_local0
	if f33_arg0 then
		f33_local0 = f33_arg0
	else
		if not f33_arg0.disabled then
			f33_local0 = f33_arg0.weaponData.isUnlocked
			if f33_local0 then
				if f33_arg0.weaponData.isGunsmithDisabled == "1" then
					f33_local0 = false
				else
					f33_local0 = true
				end
			else
				return f33_local0
			end
		end
		f33_local0 = false
	end
	return f33_local0
end

local f0_local8 = function ( f31_arg0, f31_arg1, f31_arg2, f31_arg3, f31_arg4 )
	return function ( f32_arg0, f32_arg1 )
		if CONDITIONS.InFrontend() then
			f31_arg0( f31_arg0, f31_arg0.weaponData.ref )
		end
		local f32_local0 = f31_arg0.weaponData.isUnlocked
		f31_arg0.InfoPanel.ItemName:setText( ToUpperCase( f31_arg0.weaponName ) )
		f31_arg0.InfoPanel:SetEquipped( f31_arg0._isSelected )
		local f32_local1 = LOOT.GetItemID( f31_arg0.weaponData.ref )
		local f32_local2 = false
		if not LOOT.HideLootBreadcrumbsCondition() then
			f32_local2 = Loot[0xB853FAE9166621]( f31_arg0, f32_local1 )
		end
		local f32_local3 = CONDITIONS.AreRestrictionsActive( f31_arg0 )
		if f32_local3 then
			f32_local3 = Restrictions.IsWeaponRestricted( f31_arg0.weaponData.ref )
		end
		local f32_local4 = {
			newDesc = f31_arg0.desc,
			isUnlocked = f32_local0,
			isNew = f32_local2,
			isRestricted = f32_local3
		}
		if not f32_local0 then
			local f32_local5 = WEAPON.GetChallengeUnlockRow( f32_local1 )
			if f32_local5 and 0 <= f32_local5 then
				local f32_local6 = CSV.ReadRow( CSV.gunChallenges, f32_local5 )
				f32_local4.challengeInfo = {
					lootID = f32_local1,
					challengeID = f32_local6.id,
					progress = WEAPON.GetChallengeUnlockProgress( f31_arg0, f32_local6.id )
				}
			else
				f32_local4.unlockText = f31_arg0.weaponData.unlockCriteria
				f32_local4.unlockRank = PROGRESSION.GetUnlockRank( f32_local1 )
			end
		end
		if f31_arg0.isAlreadyEquipped then
			f32_local4.isUnlocked = false
			if CONDITIONS.IsDMZMatch() then
				f32_local4.unlockText = Engine[0xED84C33EC5F01EA]( 0xD9F97FC28F4649F, f31_arg0.weaponSlot and 0xEC8F813D58DEE57 or 0xCB74A303611CCB3 )
			else
				f32_local4.unlockText = Engine[0xED84C33EC5F01EA]( 0xCB5133149EB6E5E, f31_arg0.weaponSlot and 0xEC8F813D58DEE57 or 0xCB74A303611CCB3 )
				f32_local4.isOverkill = true
			end
		end
		f31_arg0.InfoPanel:UpdateDescription( f32_local4 )
		if f31_arg0.HelperBar and CONDITIONS.InFrontend() then
			local f32_local5 = f31_arg0( f31_arg0 )
			f31_arg0.HelperBar.ButtonHelperText:PopButtonPrompt( {
				button_ref = "button_alt2"
			} )
			if f32_local5 then
				f31_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
					clickable = true,
					priority = 2,
					side = "left",
					ignoreTooltipPrompt = true,
					button_ref = "button_alt2",
					helper_text = Engine[0xED84C33EC5F01EA]( 0x8F98D3C2C8516E ),
					container = f31_arg0.ButtonPromptContainer
				} )
			end
		end
		if f31_arg0.isBlueprint then
			local f32_local5 = f31_arg0.weaponData.blueprint
			if f32_local5 then
				f31_arg0.WeaponAttributes:Setup( f32_local5, f31_arg0 )
			end
		else
			f31_arg0.WeaponAttributes:Setup( {
				weapon = f31_arg0.weaponData.ref
			}, f31_arg0 )
		end
		f31_arg0.currentSelection = {
			weapon = f31_arg0.weaponData.ref,
			blueprint = f31_arg0.weaponData.blueprint
		}
		if CONDITIONS.InFrontend() then
			f31_arg0( f31_arg0, f31_arg0, f31_arg0.gridIndex, f31_arg0 )
			f31_arg0( f31_arg0, f31_arg0, f31_arg0, f31_arg0.weaponModel, f31_arg0.weaponSlot, f31_arg0 )
		end
		local f32_local5 = LUI.FlowManager.GetScopedData( f31_arg0 )
		f32_local5.previousFocusedButton = f31_arg0
		if f31_arg0._isSelected then
			f31_arg0.InfoPanel.NewItemNotification:SetAlpha( 0 )
		else
			f31_arg0.InfoPanel.NewItemNotification:UpdateBreadcrumbByID( f31_arg0, f32_local1 )
		end
		f31_arg0.ComparisonString:setText( Engine[0xED84C33EC5F01EA]( 0x1DCE94FB0D85D3E, WEAPON.GetName( f31_arg0.equippedWeapon ) ) )
		if f31_arg0.BundleUpsellButton and Dvar[0x9E5BE3B4BBA4E0E]( 0x62400405F9F3C0B ) and Dvar[0x9E5BE3B4BBA4E0E]( 0xA051309A7F18047 ) and not CONDITIONS.AreRestrictionsActive( f31_arg0 ) then
			f31_arg0.BundleUpsellButton:SetupUpsellButtonWithLootID( f31_arg0, f32_local1 )
		end
		if f31_arg0.MasterChallenges then
			if GUNSMITH.AreMasterChallengesEnabled( f31_arg0, f31_arg0.weaponData.ref ) then
				f31_arg0.MasterChallenges:SetAlpha( 1 )
				f31_arg0.MasterChallenges:Setup( f31_arg0.weaponData.ref )
			else
				f31_arg0.MasterChallenges:SetAlpha( 0 )
			end
		end
	end
	
end

local f0_local9 = function ( f30_arg0, f30_arg1, f30_arg2 )
	if f30_arg2.equippedWeapon ~= f30_arg0.weaponData.ref then
		f30_arg2:dispatchEventToRoot( {
			name = "send_toast_notification",
			immediate = true,
			options = {
				iconScale = 4.667263495923649E-62,
				displayTime = 3000,
				icon = "cac_equip_fill",
				iconColor = SWATCHES[0x1F5A9ABAC207F9D][0x5412D050D9404DA],
				header = Engine[0xED84C33EC5F01EA]( 0xE1DD4086AE4AD11 ),
				description = f30_arg0.weaponName,
				type = LUI.ToastManager.NotificationType.WeaponEquipped,
				controllerIndex = f30_arg1
			}
		} )
	end
	if f30_arg0.isBlueprint then
		WEAPON.EquipModification( f30_arg2._loadoutPlayerData.weaponSetups[f30_arg2.weaponSlot], f30_arg0.weaponData.blueprint, f30_arg1 )
	else
		WEAPON.EquipBaseWeapon( f30_arg2._loadoutPlayerData.weaponSetups[f30_arg2.weaponSlot], f30_arg0.weaponData.ref )
		GUNSMITH.EquipBaseWeaponPartsAttachment( f30_arg1, f30_arg2._loadoutPlayerData.weaponSetups[f30_arg2.weaponSlot] )
	end
end

local f0_local10 = function ( f29_arg0, f29_arg1, f29_arg2 )
	f0_local0( f29_arg2, f29_arg1, f29_arg0, f29_arg0._loadoutPlayerData )
	GUNSMITH.OpenGunsmith( f29_arg1, f29_arg0.loadoutIndex, f29_arg0.weaponSlot, true )
end

local f0_local11 = function ( f28_arg0, f28_arg1, f28_arg2 )
	local f28_local0
	if not f28_arg2 then
		f28_local0 = f28_arg2
	else
		f28_local0 = {}
	end
	f28_local0.weaponTable = WEAPON.GenerateWeaponTableFromRef( f28_arg0.currentSelection.weapon )
	LUI.FlowManager.RequestAddMenu( "WeaponPreview", true, f28_arg1, nil, f28_local0, true )
end

local f0_local12 = function ( f24_arg0, f24_arg1, f24_arg2 )
	f24_arg1:AddContextualMenuAction( {
		button = "button_alt2",
		id = "equipAndGunsmith",
		actionName = Engine[0xED84C33EC5F01EA]( 0x8F98D3C2C8516E ),
		actionFunction = function ()
			f24_arg0( f24_arg0, f24_arg0, f24_arg0 )
		end,
		conditionFunction = function ()
			return f24_arg0( f24_arg0 )
		end
	} )
	if CONDITIONS.InFrontend( self ) and CONDITIONS.IsWeaponPreviewEnabled() then
		f24_arg1:AddContextualMenuAction( {
			id = "previewWeapon",
			button = "button_r3",
			actionName = Engine[0xED84C33EC5F01EA]( 0xCBEAF62674E5E75 ),
			actionFunction = function ()
				f24_arg0( f24_arg0, f24_arg0, nil )
			end
		} )
	end
end

local f0_local13 = function ( f19_arg0, f19_arg1, f19_arg2, f19_arg3, f19_arg4, f19_arg5 )
	local f19_local0 = 1 - f19_arg0.weaponSlot
	local f19_local1 = f19_arg5.weaponSetups[f19_arg0.weaponSlot]
	local f19_local2 = f19_arg5.weaponSetups[f19_local0]
	local f19_local3 = f19_local1.weapon:get()
	local f19_local4 = f19_local2.weapon:get()
	local f19_local5 = f19_arg2.WeaponButton
	f19_arg3.unlockRow = 0
	f19_local5.weaponData = f19_arg3
	f19_local5.lootID = LOOT.GetItemID( f19_arg3.ref )
	f19_local5.isNew = f19_local5.NewItemNotification:UpdateBreadcrumbByID( f19_arg1, f19_local5.lootID )
	f19_local5.gridIndex = f19_arg4
	f19_local5.desc = WEAPON.GetDesc( f19_local5.weaponData.ref )
	f19_local5.className = WEAPON.GetWeaponClassName( f19_local5.weaponData.ref )
	local f19_local6 = f19_arg0.blueprintsByWeapon[f19_arg3.ref]
	f19_local5.numBlueprints = f19_arg0.blueprintsByWeapon[f19_arg3.ref] and #f19_arg0.blueprintsByWeapon[f19_arg3.ref] or 0
	local f19_local7 = f19_arg2
	local f19_local8 = f19_arg2.SetBlueprintActive
	local f19_local9 = f19_arg3.ref
	local f19_local10
	if f19_local6 then
		f19_local10 = f19_local6
	else
		f19_local10 = CONDITIONS.AreWeaponVariantsEnabled( f19_arg1 )
	end
	f19_local8( f19_local7, f19_local9, f19_local10, f19_local5.numBlueprints - 1 )
	f19_local8 = f19_local4 == f19_arg3.ref
	local f19_local11
	if f19_local3 ~= f19_arg3.ref then
		f19_local11 = f19_local8
	else
		f19_local11 = true
	end
	f19_local10 = f19_local5
	f19_local7 = f19_local5.SetButtonDisabled
	local f19_local12
	if f19_arg3.isUnlocked then
		f19_local12 = f19_local8
	else
		f19_local12 = true
	end
	f19_local7( f19_local10, f19_local12 )
	if f19_arg2.BlueprintButton then
		f19_arg2.BlueprintButton:SetButtonDisabled( f19_local8 )
	end
	f19_local5.isAlreadyEquipped = f19_local8
	f19_local5:SetSelected( f19_local11 )
	if f19_arg2.BlueprintButton then
		f19_arg2.BlueprintButton.weaponData = f19_arg3
	end
	f19_local7 = WEAPON.GetNewArmoryIDsByWeapon( f19_arg1, f19_local5.weaponData.ref )
	if f19_local7 and f19_arg2.BlueprintButton and f19_arg2.BlueprintButton.NewItemSmallIcon then
		f19_local9 = f19_arg2.BlueprintButton.NewItemSmallIcon
		f19_local12 = f19_local9
		f19_local9 = f19_local9.UpdateAlpha
		local f19_local13
		if 0 < #f19_local7 then
			f19_local13 = 1
		else
			f19_local13 = 0
		end
		f19_local9( f19_local12, f19_local13, 0 )
	end
	f19_local9 = ""
	if f19_local11 then
		if f19_local3 == f19_arg3.ref then
			f19_local9 = GUNSMITH.GetCustomModName( f19_local1.blueprintName:get() )
			f19_local5.weaponData.blueprint = WEAPON.GenerateWeaponTable( f19_local1 )
		elseif f19_local4 == f19_arg3.ref then
			f19_local9 = GUNSMITH.GetCustomModName( f19_local2.blueprintName:get() )
			f19_local5.weaponData.blueprint = WEAPON.GenerateWeaponTable( f19_local2 )
		end
	end
	f19_local5.isBlueprint = 0 < #f19_local9
	if f19_local5.isBlueprint then
		f19_local5.weaponName = Engine[0xED84C33EC5F01EA]( 0x5E8B9CB71F0B7E, f19_arg3.name, Engine[0x7D3158A9539A355]( f19_local9 ) )
	else
		f19_local5.weaponName = WEAPON.GetName( f19_arg3.ref )
	end
	f19_local5.Text:setText( f19_local5.weaponName )
	f19_local5.ClassName:setText( CONDITIONS.IsGLGunsmithEnabled() and GL_HACK.GetWeaponPlatformName( f19_local5.weaponData.ref ) or WEAPON.GetSubClass( f19_arg3.ref ) )
	f19_local5.WeaponIcon:setImage( RegisterMaterial( WEAPON.GetBWImage( f19_local5.weaponData.ref ) ) )
	if f19_local5.WeaponLevelBar then
		f19_local5.WeaponLevelBar:Setup( f19_arg1, f19_local5.weaponData.ref )
	end
	f19_local5.WeaponLevel:setText( Engine[0xED84C33EC5F01EA]( 0xA158CE9478CBBC1, PROGRESSION.GetWeaponDisplayLevel( f19_arg1, f19_local5.weaponData.ref ) ) )
	f0_local0( f19_arg0, f19_local5, f19_arg1 )
	if not f19_local5.handlersAdded then
		f19_local5:addEventHandler( "button_over", f0_local0( f19_arg0, f19_local5, f19_arg1, f19_arg5, f19_local3 ) )
		f19_local5:addEventHandler( "tab_changed", f0_local0( f19_arg0, f19_local5, f19_arg1, f19_arg5, f19_local3 ) )
		f19_local5:addEventHandler( "button_over_disable", f0_local0( f19_arg0, f19_local5, f19_arg1, f19_arg5, f19_local3 ) )
		f19_local5:addEventHandler( "lose_focus", function ( f23_arg0 )
			if f19_arg0.isNew then
				f19_arg0.NewItemNotification:ClearBreadcrumbByID( f19_arg0, f23_arg0.lootID )
				f19_arg0:UpdateTabBreadcrumb( f19_arg0._currentTabIndex )
			end
			if f19_arg0.isNew and f19_arg0._currentTabIndex ~= f19_arg0._lastTabIndex then
				f19_arg0:UpdateTabBreadcrumb( f19_arg0._lastTabIndex )
				f19_arg0._lastTabIndex = f19_arg0._currentTabIndex
			end
		end )
		f19_local5:addEventHandler( "button_action", function ( f22_arg0 )
			DYN_ATTACHMENT.UpdateLoadoutWeaponStreamedImages( f22_arg0, f19_arg0, DYN_ATTACHMENT.StreamedImageAction.REMOVE )
			f19_arg0( f22_arg0, f19_arg0, f19_arg0, f19_arg0 )
			if CONDITIONS.InGame() then
				Engine[0x6055C55456F05DF]( "equip_item_ingame", 1 )
			end
			DYN_ATTACHMENT.UpdateLoadoutWeaponStreamedImages( f22_arg0, f19_arg0, DYN_ATTACHMENT.StreamedImageAction.ADD )
			LUI.FlowManager.RequestLeaveMenu( f19_arg0, true )
		end )
		f19_local5.handlersAdded = true
		if f19_arg2.BlueprintButton then
			f19_arg2.BlueprintButton:addEventHandler( "button_over", f0_local0( f19_arg0, f19_local5, f19_arg1, f19_arg5, f19_local3 ) )
			f19_arg2.BlueprintButton:addEventHandler( "button_action", function ( f21_arg0 )
				LUI.FlowManager.RequestAddMenu( "WeaponLocker", true, f19_arg0, false, {
					selectingForWeapon = true,
					weaponSlot = f19_arg0.weaponSlot,
					loadoutIndex = f19_arg0.loadoutIndex,
					weaponRef = f21_arg0.weaponData.ref,
					hideTabs = true
				} )
			end )
		end
		if f19_arg2.BlueprintStoreButton then
			f19_arg2.BlueprintStoreButton:addEventHandler( "button_over", f0_local0( f19_arg0, f19_local5, f19_arg1, f19_arg5, f19_local3 ) )
			f19_arg2.BlueprintStoreButton:addEventHandler( "button_action", function ( f20_arg0, f20_arg1 )
				LUI.FlowManager.RequestAddMenu( "WeaponLocker", true, f20_arg1.controller, false, {
					blueprintStore = true,
					weaponRef = f19_arg0.weaponData.ref,
					weaponSlot = f19_arg0.weaponSlot
				}, true )
			end )
		end
	end
	if CONDITIONS.AreRestrictionsActiveAndBlueprintsBlocked( self, f19_arg1 ) then
		if f19_arg2.BlueprintButton then
			f19_arg2.BlueprintButton:SetButtonDisabled( true )
			f19_arg2.BlueprintButton:SetMouseFocusBlocker( true )
			f19_arg2.BlueprintButton:SetAlpha( 0 )
		end
		if f19_arg2.BlueprintStoreButton then
			f19_arg2.BlueprintStoreButton:SetButtonDisabled( true )
			f19_arg2.BlueprintStoreButton:SetMouseFocusBlocker( true )
			f19_arg2.BlueprintStoreButton:SetAlpha( 0 )
		end
		f19_arg0._isRestricted = f19_arg3.isRestricted
		if f19_arg0._isRestricted then
			ACTIONS.AnimateSequence( f19_local5, "ShowRestriction" )
			f19_local5:SetButtonDisabled( true )
		else
			ACTIONS.AnimateSequence( f19_local5, "HideRestriction" )
			f19_local5:SetButtonDisabled( false )
		end
	end
	if f19_arg2.WeaponButton and f19_arg2.WeaponButton.WeaponCooldown then
		f19_arg2.WeaponButton:SetupWeaponCooldown( f19_arg0.blueprintsByWeapon[f19_arg3.ref] )
	end
	return f19_local5
end

local f0_local14 = function ( f18_arg0, f18_arg1, f18_arg2, f18_arg3, f18_arg4 )
	local f18_local0 = f18_arg0.WeaponsGrid:GetFocusPositionIndex()
	f18_arg0.currentWeapons = f18_arg4
	f18_arg0.WeaponsGrid._shouldFocus = false
	f18_arg0.WeaponsGrid:SetNumChildren( #f18_arg4 )
	f18_arg0.WeaponsGrid:RefreshContent()
	local f18_local1 = 0
	for f18_local5, f18_local6 in ipairs( f18_arg4 ) do
		if f18_arg0.equippedWeapon == f18_local6.ref then
			f18_local1 = f18_local5 - 1
			break
		end
	end
	f18_local2 = f18_arg0.WeaponsGrid:GetPositionForIndex( f18_local1, {
		relativePosition = false
	} )
	if f18_local0 ~= f18_local1 then
		f18_arg0.WeaponsGrid:SetDefaultFocus( f18_local2 )
		f18_arg0.WeaponsGrid:SetFocusedPosition( f18_local2, true, false )
		f18_arg0.WeaponsGrid:TouchMouseSetActiveToDefaultFocus( f18_arg1 )
		if LUI.IsLastInputKeyboardMouse( f18_arg1 ) then
			f18_arg0.WeaponsGrid._childInFocus = f18_arg0.WeaponsGrid:GetElementAtPosition( 0, f18_local1 )
			if f18_arg0.WeaponsGrid:IsUsingActiveOnMouseOverBehavior() then
				f18_arg0.WeaponsGrid:TryRequestActiveOnChildFocus( f18_arg0.WeaponsGrid._childInFocus )
			end
		end
	end
	if LUI.IsLastInputGamepad( f18_arg1 ) then
		f18_arg0.WeaponsGrid:SetFocusedPosition( f18_local2, true, false )
	end
	if CONDITIONS.InFrontend() then
		f0_local0( f18_arg0, f18_arg1, f18_arg2, f18_arg3 )
	end
	f18_local3 = f18_arg0.WeaponsGrid:GetActiveElement()
	if f18_local3 then
		f18_local3:processEvent( {
			name = "tab_changed"
		} )
	end
	if f18_local0 == f18_local1 then
		f18_local4 = CoD.SFX.MouseOver
		if f18_local3 and f18_local3.WeaponButton and f18_local3.WeaponButton.gainFocusSFX then
			if LUI.IsLastInputGamepad( f18_arg1 ) then
				f18_local4 = f18_local3.WeaponButton.gainFocusGamepadSFX
			elseif LUI.IsLastInputKeyboardMouse( f18_arg1 ) then
				f18_local4 = f18_local3.WeaponButton.gainFocusSFX
			end
		end
		Engine[0xC4146BA76D0F982]( f18_local4 )
		if f18_local3 and not f18_local3.WeaponButton.disabled then
			ACTIONS.AnimateSequence( f18_local3.WeaponButton, "ProgressBarOver" )
		end
	end
end

local f0_local15 = function ( f13_arg0, f13_arg1, f13_arg2 )
	f13_arg0:AddGamepadEventCallback( "button_secondary", function ( f17_arg0, f17_arg1 )
		ACTIONS.LeaveMenu( f17_arg0 )
	end )
	f13_arg0:AddGamepadEventCallback( "button_alt2", function ( f16_arg0, f16_arg1 )
		local f16_local0 = LUI.FlowManager.GetScopedData( f16_arg0 )
		local f16_local1 = f16_local0.previousFocusedButton
		local f16_local2 = f16_arg1.controller or f13_arg0
		if f13_arg0( f16_local1 ) then
			f13_arg0( f16_arg0, f16_local2, f16_local1 )
		end
	end )
	if CONDITIONS.InFrontend( f13_arg0 ) and CONDITIONS.IsWeaponPreviewEnabled() then
		f13_arg0:SubscribeToInputTypeModel( f13_arg1, function ( f15_arg0, f15_arg1 )
			local f15_local0 = f15_arg1._controllerIndex
			f15_arg1.HelperBar.ButtonHelperText:PopButtonPrompt( {
				button_ref = "button_r3"
			} )
			if CONDITIONS.IsGamepad( f15_local0 ) then
				f15_arg1.HelperBar.ButtonHelperText:PushButtonPrompt( {
					clickable = true,
					priority = 3,
					side = "left",
					button_ref = "button_r3",
					helper_text = Engine[0xED84C33EC5F01EA]( 0xCBEAF62674E5E75 ),
					helper_definition = Engine[0xED84C33EC5F01EA]( 0xF2D581450245105 )
				} )
			else
				f15_arg1.HelperBar.ButtonHelperText:PushButtonPrompt( {
					clickable = true,
					priority = 3,
					side = "left",
					ignoreTooltipPrompt = true,
					button_ref = "button_r3",
					helper_text = Engine[0xED84C33EC5F01EA]( 0xCBEAF62674E5E75 ),
					container = f15_arg1.ButtonPromptContainer
				} )
			end
		end )
		f13_arg0:AddGamepadEventCallback( "button_right_stick", function ( f14_arg0, f14_arg1 )
			f13_arg0( f14_arg0, f14_arg1.controller or f14_arg0._controllerIndex, f13_arg0 )
		end )
	end
end

local f0_local16 = function ( f12_arg0, f12_arg1 )
	if CONDITIONS.InFrontend() then
		FrontEndScene.SetExclusiveWeaponModels( {
			FrontEndScene.ClientWeapons.GunTablePrimary,
			FrontEndScene.ClientWeapons.GunTableSecondary,
			FrontEndScene.ClientWeapons.Watch
		} )
		local f12_local0 = MenuBuilder.BuildRegisteredType( "FrontendCameraMover", {
			enableSway = true,
			controllerIndex = f12_arg1
		} )
		f12_local0:SetSwayValues( 2000, 0.1, 0.1 )
		f12_arg0.FrontendCameraMover = f12_local0
		f12_arg0:addElement( f12_local0 )
	end
end

local f0_local17 = function ( f11_arg0, f11_arg1 )
	if IsLanguageChinese() then
		ACTIONS.AnimateSequence( f11_arg0, "CHT" )
	end
	if CONDITIONS.InFrontend() then
		ACTIONS.AnimateSequence( f11_arg0, "Frontend" )
	elseif CONDITIONS.IsSplitscreen( f11_arg0 ) and CONDITIONS.InGame( f11_arg0 ) then
		ACTIONS.AnimateSequence( f11_arg0, "SplitScreen" )
	else
		ACTIONS.AnimateSequence( f11_arg0, "InGame" )
	end
end

local f0_local18 = function ( f10_arg0 )
	if Engine[0x2DA54CF5D6B7F02]() then
		if not f10_arg0.loadoutIndex then
			f10_arg0.loadoutIndex = 0
		end
		if not f10_arg0.weaponSlot then
			f10_arg0.weaponSlot = 0
		end
	end
end

local f0_local19 = function ( f9_arg0, f9_arg1, f9_arg2 )
	if CONDITIONS.InFrontend() then
		f0_local0( f9_arg0, f9_arg0.equippedWeapon )
		
		local weaponModel = WEAPON.GetWeaponModel( f9_arg1, f9_arg2.weaponSlot )
		f9_arg0:addElement( weaponModel )
		f9_arg0.weaponModel = weaponModel
		
		ClientWeapon[0x59B77D6F41ED417]( FrontEndScene.ClientWeapons.GunTablePrimary, false )
		ClientWeapon[0x59B77D6F41ED417]( FrontEndScene.ClientWeapons.GunTableSecondary, false )
		local f9_local1 = f9_arg0._loadoutPlayerData.weaponSetups[1 - f9_arg0.weaponSlot]
		f9_arg0._otherSelectedModel = WEAPON.GetWeaponModelNameFromPlayerData( f9_local1.weapon:get(), f9_local1, {
			includeCamos = true,
			includeAttachments = true,
			includeStickers = true,
			controllerIndex = f9_arg1
		} )
	end
end

local f0_local20 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0.loadoutIndex = f3_arg2.loadoutIndex
	f3_arg0.weaponSlot = f3_arg2.weaponSlot
	local f3_local0 = LOADOUT.GetFrontendLoadoutWithShowcase( f3_arg1, f3_arg2.loadoutIndex, f3_arg2.forShowcase )
	f3_arg0._loadoutPlayerData = f3_local0
	f3_arg0.equippedWeapon = f3_local0.weaponSetups[f3_arg0.weaponSlot].weapon:get()
	if CONDITIONS.InFrontend() then
		f0_local0( f3_arg0, f3_arg1 )
	end
	f3_arg0._controllerIndex = f3_arg1
	f3_arg0.UpdateTabBreadcrumb = f0_local0
	f0_local0( f3_arg0, f3_arg1 )
	f0_local0( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0.InfoPanel:SetupPanel( f3_arg0.InfoPanel:GetAnchorsAndPosition() )
	f0_local0( f3_arg2 )
	local f3_local1 = 0x80F8A4A7F7F35B1
	if f3_arg2.forShowcase then
		f3_local1 = 0xBE320A843F5CC38
	elseif f3_arg2.weaponSlot == WEAPON.PrimarySlot then
		f3_local1 = 0xA08603E720CE45D
	end
	f3_arg0.MenuTitle:SetTitle( Engine[0xED84C33EC5F01EA]( f3_local1 ) )
	f0_local0( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0.blueprintsByWeapon = WEAPON.GetModificationsByWeapon( f3_arg1, {} )
	local f3_local2 = PERK.GetPerkPackageData( f3_arg1, f3_arg0._loadoutPlayerData.equippedPerkPackageIndex:get() )
	local f3_local3 = PERK.DoesPerkPackageContainOverkill( f3_local2 )
	local f3_local4
	if f3_arg0.weaponSlot == WEAPON.SecondarySlot then
		f3_local4 = f3_local3
	else
		f3_local4 = false
	end
	local f3_local5 = PERK.DoesPerkPackageContainUnderkill( f3_local2 )
	local f3_local6
	if f3_arg0.weaponSlot == WEAPON.PrimarySlot then
		f3_local6 = f3_local5
	else
		f3_local6 = false
	end
	if not f3_local4 or not WEAPON.PrimarySlot then
		local f3_local7 = f3_arg0.weaponSlot
	end
	if f3_local6 then
		local f3_local7 = 1
	end
	local f3_local8 = CONDITIONS.InGame()
	local f3_local9 = {}
	local f3_local10 = {}
	local f3_local11 = {}
	for f3_local23, f3_local24 in pairs( WEAPON.GetWeapons() ) do
		if f3_local24[0x6D696AD252F1CB1] then
			local f3_local15 = f3_local24[0x6D696AD252F1CB1]
			local f3_local16 = Engine[0x6093D047200548]( "weapondata:" .. f3_local24[0x6D696AD252F1CB1] )
			local f3_local17 = {
				isRestricted = false,
				isUnlocked = true,
				unlockCriteria = nil,
				ref = f3_local15,
				name = f3_local16[0x4BCADBA8E631B86],
				desc = f3_local16[0x5EAEF67427CA780],
				class = f3_local16[0x11655952FCBAB9F],
				category = f3_local16[0xBD2E7FFB1224E91],
				menuClass = f3_local16[0x56143152458180A],
				displayOrder = f3_local16[0x4FB3C98AEEAB347]
			}
			local f3_local18
			if not DMZ.IsLimitedInventoryEnabled() then
				f3_local18 = f3_local17.displayOrder
				if f3_local18 then
					if 0 > f3_local17.displayOrder then
						f3_local18 = false
					else
						f3_local18 = true
					end
				end
			else
				f3_local18 = false
			end
			local f3_local19 = DMZ.IsLimitedInventoryEnabled()
			if f3_local19 then
				f3_local19 = f3_arg0.blueprintsByWeapon[f3_local15]
			end
			if f3_local18 or f3_local19 then
				local f3_local20 = Restrictions.IsWeaponRestricted( f3_local15 )
				if not f3_local8 or not f3_local20 then
					if not f3_local10[f3_local17.menuClass] then
						f3_local10[f3_local17.menuClass] = {}
					end
					f3_local17.isUnlocked = PROGRESSION.IsUnlocked( f3_arg1, LOOT.itemTypes.WEAPON, f3_local15 )
					local f3_local21
					if f3_local17.isUnlocked or f3_local17.hiddenWhenLocked ~= "1" then
						f3_local21 = false
					else
						f3_local21 = true
					end
					if not f3_local17.isUnlocked then
						local f3_local22 = f3_local9[LOOT.GetItemID( f3_local15 )]
						if f3_local22 then
							f3_local17.unlockCriteria = Engine[0xED84C33EC5F01EA]( 0x86929D0FF4B6624, f3_local22 )
						else
							f3_local17.unlockCriteria = PROGRESSION.GetUnlockText( LOOT.itemTypes.WEAPON, f3_local15 )
						end
					end
					if not f3_local21 then
						f3_local17.isRestricted = f3_local20
						if f3_local20 then
							if not f3_local11[f3_local17.menuClass] then
								f3_local11[f3_local17.menuClass] = {}
							end
							table.insert( f3_local11[f3_local17.menuClass], f3_local17 )
						end
						table.insert( f3_local10[f3_local17.menuClass], f3_local17 )
					end
				end
			end
		end
	end
	for f3_local23, f3_local24 in pairs( f3_local10 ) do
		table.sort( f3_local24, function ( f8_arg0, f8_arg1 )
			return tonumber( f8_arg0.displayOrder ) < tonumber( f8_arg1.displayOrder )
		end )
	end
	for f3_local23, f3_local24 in pairs( f3_local11 ) do
		table.sort( f3_local24, function ( f7_arg0, f7_arg1 )
			return tonumber( f7_arg0.displayOrder ) < tonumber( f7_arg1.displayOrder )
		end )
	end
	for f3_local23, f3_local24 in pairs( f3_local11 ) do
		for f3_local18, f3_local19 in pairs( f3_local24 ) do
			table.insert( f3_local10[f3_local23], f3_local19 )
		end
	end
	f3_arg0.WeaponsGrid:SetRefreshChild( function ( f6_arg0, f6_arg1, f6_arg2 )
		f3_arg0( f3_arg0, f3_arg0, f6_arg0, f3_arg0.currentWeapons[f6_arg2 + 1], f6_arg2 + 1, f3_arg0 )
	end )
	f3_local12 = WEAPON.GetWeaponClassesBundle()
	f3_local13 = {}
	for f3_local14 = 1, #f3_local12, 1 do
		if f3_local12[f3_local14][0x8B6F2336E5960E5] ~= nil then
			local f3_local16 = Engine[0x6093D047200548]( 0x31E89190F5116C0 .. f3_local12[f3_local14][0x8B6F2336E5960E5] )
			local f3_local17 = {
				showInMenus = f3_local16[0xCAAC3893B4B0135],
				slot = f3_local16[0x4F2871862458025],
				ref = f3_local16[0xD49626C84A5882C],
				pluralName = f3_local16[0xAF7FB76CC61B6B8]
			}
			local f3_local18
			if not f3_arg0._forShowcase then
				f3_local18 = WEAPON.AllClassesAllowed()
				if not f3_local18 then
				
				else
					if f3_local17.showInMenus and f3_local18 and f3_local10[f3_local17.ref] then
						if not f3_local8 or not Restrictions.IsWeaponClassRestricted( f3_local17.ref ) then
							local f3_local20 = {
								classRef = f3_local17.ref,
								name = Engine[0xED84C33EC5F01EA]( f3_local17.pluralName ),
								focusFunction = function ( f5_arg0, f5_arg1, f5_arg2 )
									f3_arg0._lastTabIndex = f3_arg0._currentTabIndex
									f3_arg0._currentTabIndex = f5_arg2 + 1
									if not f3_arg0._lastTabIndex then
										f3_arg0._lastTabIndex = f3_arg0._currentTabIndex
									end
									f3_arg0( f3_arg0, f5_arg1, f3_arg0, f3_arg0, f3_arg0[f3_arg0.ref] )
								end,
								weaponData = f3_local10[f3_local17.ref]
							}
							if f3_local17.ref == WEAPON.GetWeaponClass( f3_arg0.equippedWeapon ) then
								f3_local20.hasDefaultFocus = true
							end
							table.insert( f3_local13, f3_local20 )
						end
					end
				end
			end
			f3_local18 = f3_local17.slot == f3_local7 + 1
		end
	end
	f3_arg0.tabsData = f3_local13
	f3_arg0.Tabs:SetTabs( f3_local13 )
	f3_arg0.Tabs:SetAlignment( LUI.Alignment.Left )
	for f3_local14 = 1, #f3_local13, 1 do
		f3_arg0:UpdateTabBreadcrumb( f3_local14 )
	end
	if CONDITIONS.InGame() and not CONDITIONS.IsThirdGameMode() then
		f3_arg0.HelperBar.ButtonHelperText:PushButtonPrompt( {
			clickable = true,
			priority = 5,
			ignoreTooltip = false,
			side = "left",
			kbmTooltipPromptOverload = "button_dismiss_pause_menu",
			button_ref = "button_start",
			helper_text = Engine[0xED84C33EC5F01EA]( 0xEF0F75B0AB08E35 )
		} )
		f3_arg0:AddGamepadEventCallback( "button_start", function ( f4_arg0, f4_arg1 )
			LUI.FlowManager.RequestCloseAllMenus()
		end )
	end
end

local f0_local21 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PostLoadShared = f0_local0
end

function WeaponSelectBase( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = f1_local0.UIMenu.new()
	f1_local1.id = "WeaponSelectBase"
	local f1_local2
	if f1_arg1 then
		f1_local2 = f1_arg1
	else
		f1_local2 = f1_arg1.controllerIndex
	end
	f1_local2 = f1_local0.ValidateControllerIndex( f1_local1, f1_local2 )
	local f1_local3 = f1_local1
	f0_local0( f1_local1, f1_local2, f1_arg1 )
	return f1_local1
end

MenuBuilder.registerType( 0x47FD6021CE5F284, WeaponSelectBase )
LockTable( _M )
