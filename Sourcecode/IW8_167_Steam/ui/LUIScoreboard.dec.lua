-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 17-11-2025 01:22
LUI.Scoreboard = LUI.Class( LUI.UIElement )
LUI.Scoreboard.init = function ( f17_arg0, f17_arg1, f17_arg2 )
	LUI.Scoreboard.super.init( f17_arg0, f17_arg1 )
	assert( f17_arg1 )
	f17_arg0._controllerIndex = f17_arg1.controllerIndex
	if not f17_arg1.grid then
		local self = LUI.UIGrid.new( f17_arg2 )
		self.id = "ScoreboardGrid"
		self:setUseStencil( false )
		self:SetAnchorsAndPosition( 0, 0, 0, 0, 0, 0, 0, 0 )
		f17_arg0._grid = self
		f17_arg0:addElement( self )
	else
		f17_arg0._grid = f17_arg1.grid
	end
	f17_arg0._numPlayers = 0
	f17_arg0._arrowIndicator = f17_arg1.arrowIndicator
	local self = f17_arg1.direction
	if not self then
		self = LUI.DIRECTION.vertical
	end
	f17_arg0._direction = self
	f17_arg0._numPlayersFunc = f17_arg1.numPlayersFunction
	f17_arg0._postRefreshFunc = f17_arg1.postRefreshFunction
	f17_arg0._refreshInterval = f17_arg1.refreshInterval or 1000
	if f17_arg1.scrollbar then
		self = LUI.UIScrollbar.new
		local f17_local1 = {
			direction = LUI.DIRECTION.vertical,
			eventListener = f17_arg1.scrollbar,
			startCap = f17_arg1.scrollbar.startCap,
			endCap = f17_arg1.scrollbar.endCap,
			sliderArea = f17_arg1.scrollbar.sliderArea
		}
		local f17_local2 = f17_arg1.scrollbar.sliderArea
		if f17_local2 then
			f17_local2 = f17_arg1.scrollbar.sliderArea.slider
		end
		f17_local1.slider = f17_local2
		f17_local2 = f17_arg1.scrollbar.sliderArea
		if f17_local2 then
			f17_local2 = f17_arg1.scrollbar.sliderArea.fixedSizeSlider
		end
		f17_local1.fixedSizeSlider = f17_local2
		f17_local1.mouseWheelTarget = f17_arg0._grid
		f17_arg0._scrollbar = self( f17_local1 )
		f17_arg0._grid:AddScrollbar( f17_arg0._scrollbar )
	end
	f17_arg0:SetNumberOfPlayersFunction( f17_arg0._numPlayersFunc )
	self = LUI.UITimer.new( {
		interval = f17_arg0._refreshInterval,
		event = {
			name = "refreshScores"
		}
	} )
	self.id = "TeamScoresTimer"
	f17_arg0:addElement( self )
	local f17_local3 = function ( f18_arg0, f18_arg1 )
		f18_arg0:RefreshGrid()
		f18_arg0:UpdateScrollIndicatorArrow( f18_arg0:GetCurrentNumberOfPlayers(), SCOREBOARD.maxVisibleTeamSize )
		f18_arg0:UpdateTeamCount( f18_arg0:GetCurrentNumberOfPlayers( {
			returnFriendTeamRealNum = true
		} ) )
	end
	
	f17_arg0:registerEventHandler( "open_scoreboard", f17_local3 )
	f17_arg0:registerEventHandler( "refreshScores", f17_local3 )
end

LUI.Scoreboard.SetPostRefreshFunc = function ( f16_arg0, f16_arg1 )
	f16_arg0._postRefreshFunc = f16_arg1
end

LUI.Scoreboard.GetGrid = function ( f15_arg0 )
	return f15_arg0._grid
end

LUI.Scoreboard.GetTeamIndex = function ( f14_arg0 )
	return f14_arg0._teamIndex
end

LUI.Scoreboard.SetTeamIndex = function ( f13_arg0, f13_arg1 )
	f13_arg0._teamIndex = f13_arg1
end

LUI.Scoreboard.GetCurrentNumberOfPlayers = function ( f12_arg0, f12_arg1 )
	if not f12_arg0._teamIndex then
		return 0
	elseif f12_arg0._numPlayersFunc and not Engine.DDJFBBJAIG() then
		f12_arg0._numPlayers = f12_arg0:_numPlayersFunc( f12_arg1 )
	elseif Engine.DDJFBBJAIG() then
		f12_arg0._numPlayers = SCOREBOARD.GetCurrentNumberPlayersAAR( f12_arg0._controllerIndex, f12_arg0._teamIndex )
	end
	return f12_arg0._numPlayers
end

LUI.Scoreboard.SetNumberOfPlayersFunction = function ( f10_arg0, f10_arg1 )
	local f10_local0 = function ( f11_arg0 )
		return Game.DJABDGEIID( f11_arg0._teamIndex )
	end
	
	local f10_local1
	if not f10_arg1 then
		f10_local1 = f10_arg1
	else
		f10_local1 = f10_local0
	end
	f10_arg0._numPlayersFunc = f10_local1
end

LUI.Scoreboard.SetDefaultFocusFunction = function ( f9_arg0, f9_arg1 )
	assert( type( f9_arg1 ) == "function" )
	f9_arg0._grid:SetDefaultFocus( f9_arg1 )
end

LUI.Scoreboard.SetSFX = function ( f8_arg0, f8_arg1 )
	local f8_local0 = f8_arg0:GetCurrentNumberOfPlayers()
	for f8_local1 = 0, f8_local0 - 1, 1 do
		local f8_local4 = f8_arg0:GetGridChild( f8_local1 )
		if f8_local4 and f8_local4.setGainFocusSFX then
			f8_local4:setGainFocusSFX( tostring( f8_arg1 ) )
		end
	end
end

LUI.Scoreboard.GetIndex = function ( f7_arg0 )
	local f7_local0 = f7_arg0:GetCurrentNumberOfPlayers()
	for f7_local1 = 0, f7_local0 - 1, 1 do
		local f7_local4 = f7_arg0:GetGridChild( f7_local1 )
		if f7_local4 and f7_local4:IsMyRow() then
			return f7_local1
		end
	end
end

LUI.Scoreboard.GetRelativeIndex = function ( f6_arg0 )
	local f6_local0 = f6_arg0:GetCurrentNumberOfPlayers()
	local f6_local1 = 0
	for f6_local2 = 0, f6_local0 - 1, 1 do
		local f6_local5 = f6_arg0:GetGridChild( f6_local2 )
		if f6_local5 then
			f6_local1 = f6_local1 + 1
			if f6_local5:IsMyRow() then
				return f6_local1
			end
		end
	end
end

LUI.Scoreboard.GetGridChild = function ( f5_arg0, f5_arg1 )
	if f5_arg0._direction == LUI.DIRECTION.vertical then
		return f5_arg0._grid:GetElementAtPosition( 0, f5_arg1 )
	else
		return f5_arg0._grid:GetElementAtPosition( f5_arg1, 0 )
	end
end

LUI.Scoreboard.UpdateIndicatorArrowAlignment = function ( f4_arg0 )
	local f4_local0 = f4_arg0._arrowIndicator
	if not f4_local0 then
		return 
	end
	local f4_local1, f4_local2 = f4_arg0._grid:GetRowBoundaries()
	if f4_local2 ~= nil and f4_arg0:GetCurrentNumberOfPlayers() - 1 <= f4_local2 then
		ACTIONS.AnimateSequence( f4_local0, "IndicatorUp" )
	else
		ACTIONS.AnimateSequence( f4_local0, "IndicatorDown" )
	end
end

LUI.Scoreboard.UpdateScrollIndicatorArrow = function ( f3_arg0, f3_arg1, f3_arg2 )
	local f3_local0 = f3_arg0._arrowIndicator
	if not f3_local0 then
		return 
	end
	f3_arg0:UpdateIndicatorArrowAlignment()
	if f3_arg2 < f3_arg1 then
		f3_local0:SetAlpha( 1 )
	else
		f3_local0:SetAlpha( 0 )
	end
end

LUI.Scoreboard.UpdateTeamCount = function ( f2_arg0, f2_arg1 )
	local f2_local0 = f2_arg0.teamCount
	if not f2_local0 then
		return 
	end
	local f2_local1 = LUI.DataSourceInGlobalModel.new( "frontEnd.lobby.maxClientCount" )
	local f2_local2 = f2_local1:GetValue( controllerIndex )
	if Dvar.DHEEJCCJBH( "MOLPOSLOMO" ) ~= "infect" or not f2_local2 then
		f2_local2 = f2_local2 / 2
	end
	if MLG.DBIBHEAEGD() then
		f2_local0:SetAlpha( 0 )
	else
		f2_local0:SetAlpha( 1 )
		f2_local0:setText( Engine.CBBHFCGDIC( "LUA_MENU/X_OF_Y", tostring( f2_arg1 ), tostring( f2_local2 ) ) )
	end
end

LUI.Scoreboard.RefreshGrid = function ( f1_arg0 )
	local f1_local0 = f1_arg0._grid
	local f1_local1 = f1_arg0:GetCurrentNumberOfPlayers()
	local f1_local2
	if f1_arg0._direction == LUI.DIRECTION.vertical then
		f1_local2 = f1_local0:GetNumRows()
		if not f1_local2 then
		
		else
			if f1_local2 ~= f1_local1 then
				if f1_arg0._direction == LUI.DIRECTION.vertical then
					f1_local0:SetNumRows( f1_local1 )
					f1_local0:SetNumColumns( 1 )
				else
					f1_local0:SetNumRows( 1 )
					f1_local0:SetNumColumns( f1_local1 )
				end
			end
			if Engine.EAIICIFIFA() then
				f1_local0:SetTargetRowToDefault()
			end
			f1_local0:RefreshContent()
			f1_local0.refreshOnScroll = true
			if f1_arg0._postRefreshFunc then
				f1_arg0._postRefreshFunc()
			end
		end
	end
	f1_local2 = f1_local0:GetNumColumns()
end

