-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:03
module( ..., package.seeall )
local f0_local0 = {
	{
		gameMode = PROGRESSION.GameModeToCode[LOOT.GameModeFilterString.MP],
		tagText = Engine[0xED84C33EC5F01EA]( 0x6E40C37FD8C06B3 )
	},
	{
		gameMode = PROGRESSION.GameModeToCode[LOOT.GameModeFilterString.OB],
		tagText = Engine[0xED84C33EC5F01EA]( 0x51C75135B8DBEF8 )
	},
	{
		gameMode = PROGRESSION.GameModeToCode[LOOT.GameModeFilterString.BR],
		tagText = Engine[0xED84C33EC5F01EA]( 0x76E3E9F44757187 )
	}
}
local f0_local1 = 40
local f0_local2 = function ( f13_arg0, f13_arg1, f13_arg2 )
	if LUI.IsKBMActiveInputMethodForPrompts( f13_arg0._controllerIndex ) then
		f13_arg0.ActionPrompt:setText( Engine[0x39B9674771038]( f13_arg0._controllerIndex, f13_arg1 ) )
	else
		f13_arg0.ActionPrompt:setText( Engine[0xED84C33EC5F01EA]( f13_arg2 ) )
	end
end

local f0_local3 = function ( f12_arg0 )
	local f12_local0 = f12_arg0:getParent()
	if not f12_local0 or f12_arg0._rewardsPackage.unlockRank ~= f12_local0._currentTileFocused.rank then
		return 
	elseif f12_arg0._rewardsPackage.lootType == LOOT.itemTypes.PLAYERCARD then
		LUI.FlowManager.RequestAddMenu( "CallingCardSelect", true, f12_arg0._controllerIndex, false, nil, true )
	elseif f12_arg0._rewardsPackage.lootID and f12_arg0._rewardsPackage.lootType == LOOT.itemTypes.WEAPON then
		LUI.FlowManager.RequestAddMenu( GUNSMITH.GetGunsmithProgressionTabFrameRef(), true, f12_arg0._controllerIndex, false, {
			weaponRef = f12_arg0._rewardsPackage.weaponRef
		}, true )
	end
	return true
end

local f0_local4 = function ( f7_arg0, f7_arg1 )
	if f7_arg1 then
		f7_arg0:registerEventHandler( "gamepad_button", function ( element, event )
			if (CONDITIONS.ButtonAltTwo( element, event ) or CONDITIONS.IsMenuAction2( event )) and element.ActionText:IsVisible() then
				return f7_arg0( element )
			else
				
			end
		end )
		if f7_arg0.ActionPrompt then
			f0_local0( f7_arg0, "+menu_action2", 0xE9002FD7087F9F3 )
			f7_arg0:SubscribeToInputTypeModel( f7_arg0._controllerIndex, function ( f10_arg0, f10_arg1 )
				f7_arg0( f10_arg1, "+menu_action2", 0xE9002FD7087F9F3 )
			end )
		end
	else
		f7_arg0:registerEventHandler( "gamepad_button", function ( element, event )
			if (CONDITIONS.ButtonSelect( element, event ) or event.key == "TAB") and element.ActionText:IsVisible() then
				return f7_arg0( element )
			else
				
			end
		end )
		if f7_arg0.ActionPrompt then
			f0_local0( f7_arg0, "+togglescores", 0x6E9F3C1573E2790 )
			f7_arg0:SubscribeToInputTypeModel( f7_arg0._controllerIndex, function ( f8_arg0, f8_arg1 )
				f7_arg0( f7_arg0, "+togglescores", 0x6E9F3C1573E2790 )
			end )
		end
	end
end

local f0_local5 = function ( f6_arg0, f6_arg1, f6_arg2, f6_arg3 )
	if f6_arg0.ActionText then
		if f6_arg1 ~= "" and f6_arg2 then
			f0_local0( f6_arg0, f6_arg3 )
			f6_arg0.ActionText:setText( f6_arg1 )
			ACTIONS.AnimateSequence( f6_arg0, "ShowAction" )
		else
			ACTIONS.AnimateSequence( f6_arg0, "HideAction" )
		end
	end
end

local f0_local6 = function ( f4_arg0, f4_arg1, f4_arg2, f4_arg3, f4_arg4, f4_arg5, f4_arg6 )
	f4_arg0._rewardsPackage = f4_arg1
	f4_arg0.UnlockImage:setImage( RegisterMaterial( f4_arg1.bigIcon or f4_arg1.icon ) )
	f4_arg0.ItemHeader:setText( ToUpperCase( f4_arg1.name ) )
	if CONDITIONS.IsJup() or CONDITIONS[0x4A020C7B018B3BA]() then
		f4_arg0.ProgressionUnlockDescriptionSubheader:Setup( f4_arg1 )
		f4_arg0.ItemSubHeader:SetVisible( false )
	elseif f4_arg0.ProgressionUnlockDescriptionSubheader then
		f4_arg0.ItemSubHeader:setText( ToUpperCase( f4_arg1.lootTypeName ) )
		f4_arg0.ProgressionUnlockDescriptionSubheader:SetVisible( false )
	end
	if f4_arg0.ItemDescription then
		f4_arg0.ItemDescription:setText( f4_arg1.desc )
	end
	if f4_arg3 then
		local f4_local0 = f4_arg0:Wait( 50 )
		f4_local0.onComplete = function ( f5_arg0 )
			local f5_local0, f5_local1 = f5_arg0.ItemSubHeader._backingElement:getRect()
			local f5_local2 = f5_local1
			local f5_local3, f5_local4 = f5_arg0.ItemSubHeader2:getRect()
			f5_arg0.ItemSubHeader2:SetAnchorsAndPosition( 0, 1, 0, 1, f5_local2, f5_local2 + f5_local4 - f5_local3, 1, 35 )
			ACTIONS.AnimateSequence( f5_arg0, "ShowBattlepassRewards" )
		end
		
	else
		ACTIONS.AnimateSequence( f4_arg0, "HideBattlepassRewards" )
	end
	if f4_arg2 then
		ACTIONS.AnimateSequence( f4_arg0, "Unlocked" )
	else
		ACTIONS.AnimateSequence( f4_arg0, "Locked" )
	end
	local f4_local0 = ""
	if f4_arg1.lootType == LOOT.itemTypes.WEAPON then
		if LAYOUT.GetMaterialAspectRatio( f4_arg1.icon ) == 1 then
			ACTIONS.AnimateSequence( f4_arg0, "ConfigWeapon1x1" )
		else
			ACTIONS.AnimateSequence( f4_arg0, "ConfigWeapon2x1" )
		end
		local f4_local1 = WEAPON.GetBlueprintBaseRefbyID( f4_arg1.lootID )
		if f4_local1 and GUNSMITH.IsWeaponProgressionAvailable( f4_local1 ) then
			f4_arg0._rewardsPackage.weaponRef = f4_local1
			f4_local0 = Engine[0xED84C33EC5F01EA]( 0x77A25C5FE26163E )
		end
	elseif f4_arg1.lootType == LOOT.itemTypes.PLAYERCARD then
		if f4_arg0.MasteryCard and f4_arg1.challengeDesc then
			ACTIONS.AnimateSequence( f4_arg0, "ConfigChallengeProgress" )
			f4_arg0.MasteryCard:SetupData( f4_arg1.challengeDesc )
			f4_local0 = Engine[0xED84C33EC5F01EA]( 0x721D8889988C50C )
		else
			ACTIONS.AnimateSequence( f4_arg0, "ConfigPlayercard2x1" )
		end
	elseif f4_arg1.lootType == LOOT.itemTypes.OPERATOR then
		ACTIONS.AnimateSequence( f4_arg0, "ConfigOperator" )
	else
		ACTIONS.AnimateSequence( f4_arg0, "ConfigDefault" )
	end
	if 2 < f4_arg4 then
		ACTIONS.AnimateSequence( f4_arg0, "ThreePreview" )
	else
		ACTIONS.AnimateSequence( f4_arg0, "DefaultPreview" )
	end
	f0_local0( f4_arg0, f4_local0, f4_arg2, f4_arg6 )
	if not f4_arg0[0x9622736BAEC185E] then
		return 
	end
	local f4_local2 = {}
	for f4_local5, f4_local6 in ipairs( f0_local0 ) do
		if BitwiseOperators.band( f4_arg1.availableGameModes, f4_local6.gameMode ) ~= 0 then
			table.insert( f4_local2, f4_local6.tagText )
		end
	end
	f4_local1 = f4_arg0[0x9622736BAEC185E]
	f4_arg0._tagWidgets = f4_local1:getAllChildren()
	if 0 < #f4_arg0._tagWidgets then
		for f4_local3 = 1, #f4_arg0._tagWidgets, 1 do
			f4_local1:RemoveElement( f4_arg0._tagWidgets[f4_local3] )
			f4_arg0._tagWidgets[f4_local3]:closeTree()
			f4_arg0._tagWidgets[f4_local3] = nil
		end
	end
	if #f4_local2 < 1 then
		return 
	end
	for f4_local6, f4_local7 in ipairs( f4_local2 ) do
		local f4_local8 = MenuBuilder.BuildRegisteredType( "PlayMenuTag", {
			controllerIndex = f4_arg5
		} )
		f4_local8.id = "PlayMenuTag" .. f4_local6
		f4_local1:addElement( f4_local8 )
		f4_arg0._tagWidgets[f4_local6] = f4_local8
		f4_local8:SetTagText( f4_local7, false, f0_local0 )
		ACTIONS.AnimateSequence( f4_arg0._tagWidgets[f4_local6], "AppearanceDefault" )
	end
end

local f0_local7 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0.SetupDescription = f0_local0
end

local f0_local8 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PostLoadShared = f0_local0
	f2_arg0._controllerIndex = f2_arg1
end

function ProgressionUnlockDescriptionBase( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = f1_local0.UIElement.new()
	f1_local1:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 820, 0, 290 )
	f1_local1.id = "ProgressionUnlockDescriptionBase"
	local f1_local2
	if f1_arg1 then
		f1_local2 = f1_arg1
	else
		f1_local2 = f1_arg1.controllerIndex
	end
	f0_local0( f1_local1, f1_local0.ValidateControllerIndex( f1_local1, f1_local2 ), f1_arg1 )
	return f1_local1
end

MenuBuilder.registerType( 0xF5A2264A2DB2973, ProgressionUnlockDescriptionBase )
LockTable( _M )
