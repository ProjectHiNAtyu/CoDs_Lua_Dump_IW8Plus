-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-10-2025 14:16
module( ..., package.seeall )
local f0_local0 = 203 * _1080p
local f0_local1 = 130 * _1080p
local f0_local2 = function ( f20_arg0, f20_arg1, f20_arg2, f20_arg3 )
	local f20_local0 = WEAPON.GetBWImage( f20_arg2 )
	if f20_arg3 then
		local f20_local1 = WEAPON.GetVariantOverridenIcon( f20_arg3.weapon, f20_arg3.variantID )
		if f20_local1 and 0 < #f20_local1 then
			f20_local0 = f20_local1
		end
	end
	f20_arg0.WeaponIcon:setImage( RegisterMaterial( f20_local0 ) )
	if f20_arg0.RenderWeaponIcon then
		f20_arg0.RenderWeaponIcon:setImage( RegisterMaterial( f20_local0 ) )
	end
	if Engine[0x5B4AB50CF5D1DDD]( RegisterMaterial( f20_local0 ) ) == 1 then
		ACTIONS.AnimateSequence( f20_arg0, "Ratio1x1" )
	else
		ACTIONS.AnimateSequence( f20_arg0, "Ratio2x1" )
	end
end

local f0_local3 = function ( f19_arg0 )
	if f19_arg0.Attachments == nil or not WEAPON.CanDisplayWeaponAttachments( f19_arg0._weaponTable ) then
		return 
	end
	f19_arg0.Attachments:closeChildren()
	local f19_local0 = false
	local f19_local1 = f19_arg0._isDefault and f19_arg0._defaultLoadoutWeapon.attachments or ATTACHMENT.GetTableFromWeaponSetup( f19_arg0._weaponSetup )
	for f19_local2 = 1, #f19_local1, 1 do
		if f19_local1[f19_local2] ~= ATTACHMENT.none and ATTACHMENT.GetCategory( f19_local1[f19_local2] ) ~= "receiver" then
			local f19_local5 = 32
			if f19_local0 then
				local f19_local6 = 36
				local f19_local7 = 16
				local self = LUI.UIImage.new()
				self:setImage( RegisterMaterial( "icon_plus" ) )
				self:SetAnchorsAndPosition( 0.5, 0.5, 0.5, 0.5, -(f19_local7 / 2) * _1080p, f19_local7 / 2 * _1080p, -(f19_local7 / 2) * _1080p, f19_local7 / 2 * _1080p )
				local f19_local9 = LUI.UIElement.new()
				f19_local9:SetAnchorsAndPosition( 0, 1, 0, 1, 0, f19_local6 * _1080p, 0, f19_local5 * _1080p )
				f19_local9:addElement( self )
				f19_arg0.Attachments:addElement( f19_local9 )
			end
			local f19_local6 = RegisterMaterial( ATTACHMENT.GetImage( f19_local1[f19_local2] ) )
			local f19_local7 = LUI.UIImage.new()
			f19_local7:setImage( f19_local6 )
			f19_local7:SetAnchorsAndPosition( 0, 1, 0, 1, 0, f19_local5 * _1080p, 0, f19_local5 * _1080p )
			f19_arg0.Attachments:addElement( f19_local7 )
			f19_local0 = true
		end
	end
	f19_arg0.Attachments:SetAlpha( 1 )
end

local f0_local4 = function ( f18_arg0 )
	f0_local0( f18_arg0 )
end

local f0_local5 = function ( f17_arg0 )
	if f17_arg0.Attachments then
		f17_arg0.Attachments:SetAlpha( 0 )
	end
end

local f0_local6 = function ( f16_arg0, f16_arg1 )
	local f16_local0 = f16_arg0._defaultLoadoutWeapon and f16_arg0._defaultLoadoutWeapon.ref or f16_arg0._weaponSetup.weapon:get()
	local f16_local1
	if f16_arg0._defaultLoadoutWeapon then
		f16_local1 = ""
	else
		f16_local1 = GUNSMITH.GetCustomModName( f16_arg0._weaponSetup.blueprintName:get() )
	end
	local f16_local2 = ""
	if 0 < #f16_local1 then
		f16_arg0._isBlueprint = true
		f16_arg0.BlueprintIcon:setImage( RegisterMaterial( "icon_loadout_armory_sub_saved" ) )
		f16_local2 = f16_local1
	elseif f16_arg0._proTuned then
		f16_arg0._isBlueprint = true
		f16_arg0.BlueprintIcon:setImage( RegisterMaterial( "icon_loadout_armory_sub_blueprint_pro_tuned" ) )
		f16_local2 = WEAPON.GetLootWeaponName( f16_local0, f16_arg0._weaponSetup.lootItemID:get() )
	elseif f16_arg0._weaponSetup and f16_arg0._weaponSetup.variantID:get() ~= WEAPON.baseVariant and not f16_arg0._defaultLoadoutWeapon then
		f16_arg0._isBlueprint = GUNSMITH.IsWeaponSetupBlueprintIntact( f16_arg0._weaponSetup )
		f16_arg0.BlueprintIcon:setImage( RegisterMaterial( "icon_blueprint" ) )
		f16_local2 = WEAPON.GetLootWeaponNameFromWeaponTable( f16_arg1, f16_arg0._weaponTable )
	else
		f16_arg0._isBlueprint = false
		local f16_local3 = ""
		if f16_arg0._weaponSetup then
			for f16_local4 = 1, #f16_arg0._weaponTable.attachments, 1 do
				local f16_local7 = f16_arg0._weaponTable.attachments[f16_local4]
				if f16_local7.ref and 0 < #f16_local7.ref and ATTACHMENT.IsDisplayNameAvailable( f16_local7.ref ) then
					if f16_local3 == "" then
						f16_local3 = ATTACHMENT.GetName( f16_local7.ref )
					else
						f16_local3 = f16_local3 .. " " .. ATTACHMENT.GetName( f16_local7.ref )
					end
				end
			end
		end
		f16_local2 = WEAPON.GetName( f16_local0 ) .. " " .. f16_local3
	end
	f16_arg0.BlueprintIcon:SetVisibility( f16_arg0._isBlueprint and LUI.Visibility.Visible or LUI.Visibility.Hidden )
	return f16_local2
end

local f0_local7 = function ( f15_arg0, f15_arg1 )
	if f15_arg0.RarityIndicator then
		f15_arg0.RarityIndicator:SetupProductAvailability( LOOT.GetProductAvailability( f15_arg1 ) )
	end
end

local f0_local8 = function ( f6_arg0, f6_arg1, f6_arg2, f6_arg3, f6_arg4, f6_arg5 )
	f6_arg0._weaponIndex = f6_arg2
	f6_arg0._weaponSetup = f6_arg3
	f6_arg0._defaultLoadoutWeapon = f6_arg4
	local f6_local0
	if f6_arg5 then
		f6_local0 = f6_arg5
	else
		f6_local0 = f6_arg5.forShowcase
	end
	f6_arg0._forShowcase = f6_local0
	if f6_arg2 == WEAPON.PrimarySlot or f6_arg2 == WEAPON.SecondarySlot then
		ATTACHMENT.ValidateAttachmentsForWeaponSetup( f6_arg3 )
	end
	if f6_arg4 then
		f6_arg4.weapon = f6_arg4.ref
	end
	f6_local0 = f6_arg4
	f6_arg0._isDefault = f6_local0
	local f6_local1
	if f6_local0 and not f6_arg4 then
		f6_local1 = f6_arg4
	else
		f6_local1 = WEAPON.GenerateWeaponTable( f6_arg3 )
	end
	f6_arg0._weaponTable = f6_local1
	f6_local1 = PROGRESSION.GetWeaponDisplayLevel( f6_arg1, f6_arg0._weaponTable.weapon )
	local f6_local2 = PROGRESSION.GetMaxWeaponDisplayLevel( f6_arg0._weaponTable.weapon )
	f6_arg0.WeaponLevelProgress:Setup( f6_arg1, f6_arg0._weaponTable.weapon )
	f6_arg0.WeaponLevelProgress.Fill:SetRGBFromTable( SWATCHES.IW9StyleGuide.styleGuideAccentMain )
	f6_arg0.WeaponLevelProgress.Fill:SetAlpha( 0.7 )
	f6_arg0.WeaponLevelProgress.Gradient:SetRGBFromTable( SWATCHES.IW9StyleGuide.styleGuideAccentDark )
	local f6_local3 = {
		subHeader = Engine[0xED84C33EC5F01EA]( 0x4A671D1E2689A57, f6_local1, f6_local2 )
	}
	local f6_local4
	if f6_arg4 then
		f6_local4 = f6_arg4.ref
		if not f6_local4 then
		
		else
			f6_arg0.selectedWeapon = f6_local4
			f6_arg0.WeaponIcon:SetAlpha( 1 )
			f6_arg0.WeaponIcon:SetVisibility( LUI.Visibility.Visible )
			if f6_arg0.RenderWeaponIcon then
				f6_arg0.RenderWeaponIcon:SetVisibility( LUI.Visibility.Hidden )
				if f6_arg0.Attachments then
					f6_arg0.Attachments:SetAlpha( 0 )
				end
			end
			f0_local0( f6_arg0, f6_arg1, f6_arg0.selectedWeapon, f6_arg0._weaponTable )
			if not WEAPON.IsWeaponNoneValue( f6_arg0.selectedWeapon ) then
				if CONDITIONS.IsRenderWeaponIconEnabled() then
					if f6_arg0.DynamicWeaponIcon ~= nil then
						f6_arg0.DynamicWeaponIcon:SetAlpha( 0 )
					end
					f6_local4 = WEAPON.GetFrontendLoadoutWeaponSlot( f6_arg2, f6_arg2 )
					local f6_local5 = WEAPON.GetWeaponModelName( f6_arg0._weaponTable.weapon, f6_arg0._weaponTable, {
						includeStickers = false,
						includeAttachments = true,
						includeCamos = false,
						isDefault = f6_local0,
						controllerIndex = f6_arg1
					} )
					local f6_local6 = CONDITIONS.IsLoadoutWeaponAttachmentHighlightEnabled() and WEAPON.GetAttachmentHighlights( f6_arg1, f6_local5 ) or {}
					if not Table.IsEmpty( f6_local6 ) then
						WEAPON.UpdateWeaponRenderIcon( f6_arg0, f6_arg1, {
							useElementVisibility = true,
							renderIconWidget = f6_arg0.RenderWeaponIcon,
							baseIconWidget = f6_arg0.WeaponIcon,
							slot = f6_local4,
							weaponModelName = f6_local5,
							attachmentHighlights = f6_local6,
							successCallback = f0_local0,
							failureCallback = f0_local0
						} )
					end
				else
					if f6_arg0.DynamicWeaponIcon then
						f6_local4 = WEAPON.IsBulletWeapon( WEAPON.GetWeaponClass( f6_arg0.selectedWeapon ) )
					end
					if not f6_local0 and f6_arg3 == nil then
						f6_local4 = false
					end
					if f6_local4 then
						local f6_local6 = DYN_ATTACHMENT.GetDynamicAttachmentsTable( WEAPON.GetWeaponModelName( f6_arg0.selectedWeapon, f6_arg0._weaponTable, {
							includeStickers = true,
							includeAttachments = true,
							keepAkimbo = true,
							includeCamos = true,
							showSWhiskeyMag = true,
							isDefault = f6_local0,
							controllerIndex = f6_arg1
						} ) )
						if f6_arg0.DynamicWeaponIcon ~= nil then
							f6_arg0.DynamicWeaponIcon:PerformUpdate( f6_arg1, {
								isInteractive = false,
								attachmentsData = f6_local6,
								weaponRef = f6_arg0.selectedWeapon
							} )
							f6_arg0.DynamicWeaponIcon:SetAlpha( 1 )
						end
						f6_arg0.WeaponIcon:SetVisibility( LUI.Visibility.Hidden )
					elseif f6_arg0.DynamicWeaponIcon then
						f6_arg0.DynamicWeaponIcon:SetAlpha( 0 )
					end
				end
				if f6_arg0.BaseWeaponName then
					if f6_arg0.selectedWeapon == WEAPON.RiotShieldRef then
						f6_arg0.BaseWeaponName:SetRight( f0_local0 )
					else
						f6_arg0.BaseWeaponName:SetRight( f0_local0 )
					end
				end
			else
				if not WEAPON.IsWeaponFists( f6_arg0.selectedWeapon ) then
					f6_arg0.WeaponIcon:SetVisibility( LUI.Visibility.Hidden )
				end
				f6_local3.subHeader = ""
				if CONDITIONS.IsDMZMatch() then
					f6_arg0.WeaponIcon:setImage( RegisterMaterial( BRLOOT.DEFAULT_IW_EMPTY_TEXTURE ) )
				end
			end
			if not CONDITIONS.IsMobileOrMobileSim() and f6_arg0.WeaponEffectIcons then
				f6_local4 = WEAPON.GetWeaponBlueprintTacticalBuildData( f6_arg0._weaponTable )
				local f6_local5, f6_local6 = nil
				if GUNSMITH.IsWeaponSetupBlueprintIntact( f6_arg3 ) then
					f6_local5 = f6_arg0._weaponTable.lootID
					f6_local6 = GUNSMITH.DoesWeaponTableContainProtunedAttachment( f6_arg0._weaponTable )
				end
				f6_arg0:SetupWeaponEffectIndicators( f6_local5, f6_local4, f6_local6 )
			end
			f6_local3.header = f0_local0( f6_arg0, f6_arg1 )
			f6_local4 = {
				removeTextBacker = true,
				loadoutEditGradientFocusStyle = true,
				removeEquipBanner = true,
				localizeHeader = false,
				imageSize = "Image2x1",
				localizeSubHeader = false,
				buttonData = f6_local3,
				primaryActionText = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x1ED143947CE721B ) )
			}
			if f6_arg5.gunsmithButton then
				local f6_local5 = nil
				if CONDITIONS.IsMobileOrMobileSim() then
					f6_local5 = GUNSMITH.MobileIsDisabledForWeaponRef( f6_arg0._weaponTable.weapon, f6_arg0._weaponTable.variantID )
				else
					local f6_local6 = GUNSMITH.IsDisabled( f6_arg0._weaponTable.weapon, f6_arg0._weaponTable.variantID )
					if f6_local6 then
						f6_local5 = f6_local6
					else
						f6_local5 = not CONDITIONS.InFrontend()
					end
				end
				if not Dvar[0x9E5BE3B4BBA4E0E]( 0x4F74CEB67644978 ) or f6_local5 then
					f6_arg5.gunsmithButton:SetButtonDisabled( true )
					f6_arg5.gunsmithButton:RemoveToolTipData()
				else
					f6_arg5.gunsmithButton:SetButtonDisabled( false )
					f6_arg5.gunsmithButton:AddTooltipData( f6_arg1, {
						promptsData = {
							{
								kbmTooltipPromptOverload = "menu_action8",
								button_ref = "button_alt1",
								helper_text = Engine[0xED84C33EC5F01EA]( 0x1D42ED4C675E0D8 )
							}
						}
					} )
					if not f6_arg5.gunsmithButton.eventHandlersAdded then
						f6_arg5.gunsmithButton:registerEventHandler( "button_action", function ( element, event )
							if f6_arg0 and f6_arg0.forShowcase then
								return GUNSMITH.OpenShowcaseGunsmith( f6_arg0 )
							end
							local f14_local0 = LUI.FlowManager.GetScopedData( element )
							if CONDITIONS.IsMobileOrMobileSim() then
								f14_local0.selectedWeaponSlot = f6_arg0
							end
							local f14_local1 = f14_local0.selectedWeaponSlot or f6_arg0
							if CONDITIONS.IsMobileOrMobileSim() then
								return GUNSMITH.MobileOpenGunsmith( f6_arg0, f14_local0.selectedLoadoutIndex, f14_local1 )
							end
							return GUNSMITH.OpenGunsmith( f6_arg0, f14_local0.selectedLoadoutIndex, f14_local1 )
						end )
						f6_arg5.gunsmithButton.eventHandlersAdded = true
					end
				end
			end
			f6_arg0.WeaponSlot:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( WEAPON.GetWeaponClassName( f6_arg0._weaponTable.weapon ) ) ) )
			f6_arg0.Button:SetupButton( f6_local4 )
			if f6_arg0.WeaponLevelProgress then
				local f6_local6 = LAYOUT.GetTextWidth( f6_arg0.Button.SubHeader, f6_arg1 )
				local f6_local7 = 8 * _1080p
				local f6_local8 = f6_arg0.WeaponLevelProgress
				local f6_local9 = f6_local8
				f6_local8 = f6_local8.SetLeft
				local f6_local10 = f6_arg0.Button.SubHeader:GetAnchorsAndPosition()
				f6_local8( f6_local9, f6_local10.left + f6_local6 + f6_local7 )
			end
			if f6_local0 then
				f6_arg0._isRestricted = false
			else
				local f6_local6 = MatchRules[0x966A6F3A93A1200]( f6_arg0.selectedWeapon )
				if not f6_local6 then
					f6_local6 = MatchRules[0xB0FA3D79A09CF96]( WEAPON.GetWeaponClass( f6_arg0.selectedWeapon ) )
					if not f6_local6 then
						f6_local6 = LOADOUT.MATCHRULES.WeaponHasRestrictedAttachment( f6_arg3.attachmentSetup, f6_arg0.selectedWeapon )
					end
				end
				f6_arg0._isRestricted = f6_local6
			end
			local f6_local6 = ACTIONS.AnimateSequence
			local f6_local8 = f6_arg0
			local f6_local11
			if f6_arg0._isRestricted then
				f6_local11 = "RestrictionOn"
			else
				f6_local11 = "RestrictionOff"
			end
			f6_local6( f6_local8, f6_local11 )
			f6_arg0.BlueprintIcon:SetVisibility( f6_arg0._isBlueprint and LUI.Visibility.Visible or LUI.Visibility.Hidden )
			if f6_arg0.IconBacker then
				f6_arg0.IconBacker:SetVisibility( f6_arg0._isBlueprint and LUI.Visibility.Visible or LUI.Visibility.Hidden )
			end
			if f6_arg0.BaseWeaponName then
				if f6_arg0._weaponTable and f6_arg0._weaponTable.variantID and f6_arg0._weaponTable.variantID > WEAPON.baseVariant then
					f6_arg0.BaseWeaponName:setText( WEAPON.GetName( f6_arg0._defaultLoadoutWeapon and f6_arg0._defaultLoadoutWeapon.ref or f6_arg0._weaponSetup.weapon:get() ) )
					f6_arg0.BaseWeaponName:SetVisible( true )
				else
					f6_arg0.BaseWeaponName:SetVisible( false )
				end
			end
			if f6_arg0.AttachmentEquipPips then
				if WEAPON.CanDisplayWeaponAttachments( f6_arg0._weaponTable ) then
					f6_local6 = GUNSMITH.GetEquipCounts( f6_arg0._weaponTable.weapon, f6_arg0._weaponTable, f6_arg0._weaponTable.attachments, {
						isDefault = f6_local0
					} )
					if CONDITIONS.IsMobileOrMobileSim() then
						f6_arg0.AttachmentEquipPips:UpdatePips( f6_local6.attachmentCount + f6_local6.afterMarketPartCount, f6_local6.afterMarketPartCount )
					else
						f6_arg0.AttachmentEquipPips:UpdatePips( f6_local6.attachmentCount, f6_local6.restrictedAttachmentCount )
					end
					f6_arg0.AttachmentEquipPips:SetVisible( true )
				else
					f6_arg0.AttachmentEquipPips:SetVisible( false )
				end
			end
			if not f6_arg0._forShowcase and CoD.IsDMZMatch() and DMZ.IsLimitedInventoryEnabled() then
				f6_local6 = #DMZ.GetInventoryItemsOfType( f6_arg1, LOOT.itemTypes.WEAPON ) <= 0
				f6_arg0:SetButtonDisabled( f6_local6 )
				f6_arg0.Button:SetButtonDisabled( f6_local6 )
			end
			if Dvar[0x9E5BE3B4BBA4E0E]( 0x721F4950DF33C2F ) and f6_arg3 then
				f6_arg0:registerEventHandler( "gamepad_button", function ( element, event )
					if event.button == "start" and element:isInFocus() then
						WEAPON.EquipModification( f6_arg0, WEAPON.GetRandomVariant( f6_arg0, f6_arg0 ), f6_arg0 )
					end
				end )
			end
			if Engine[0x12586A3F4FB490E]() and CoD.IsDMZMatch() and not f6_arg0._forShowcase then
				f6_arg0._weapon = f6_arg3.weapon:get()
				f6_arg0:AddGamepadEventCallback( "button_alt1", function ( f12_arg0, f12_arg1 )
					local f12_local0 = f12_arg1.controller or f6_arg0
					if f12_arg0:isInFocus() and f6_arg0.weapon:get() ~= "iw9_me_fists" then
						f6_arg0.weapon:set( "iw9_me_fists" )
						WEAPON.WipeWeaponSetup( f6_arg0 )
						f12_arg0:SetupButton( f12_local0, f6_arg0, f6_arg0 )
						local f12_local1 = LOADOUT.GetLoadoutSquadMember( f12_local0 )
						f12_local1 = f12_local1.loadouts[0]
						assert( f12_local1, "Loadout player data is nil at path squadMembers.loadouts" )
						local f12_local2 = f12_local1.weaponSetups[f6_arg0]
						ClientWeapon[0xA3A4ADD436F6EB0]( f6_arg0, WEAPON.GetWeaponModelNameFromPlayerData( f12_local2.weapon:get(), f12_local2, {
							includeCamos = false,
							includeAttachments = false,
							includeStickers = false,
							controllerIndex = f12_local0
						} ) )
						f12_arg0.Clear:SetAlpha( 0 )
					end
				end )
			end
			if LOADOUT.IsActiveArmoryEnabled( f6_arg1 ) then
				if WEAPON.IsActiveArmoryWeapon( f6_arg0._weaponTable.weapon ) then
					ACTIONS.AnimateSequence( f6_arg0, "FeaturedWeapon" )
					ACTIONS.AnimateSequence( f6_arg0.ActiveArmoryTag, "Glow" )
					ACTIONS.AnimateSequence( f6_arg0.ActiveArmoryOverlay, "Glow" )
				else
					ACTIONS.AnimateSequence( f6_arg0, "OffFeaturedWeapon" )
					ACTIONS.AnimateSequence( f6_arg0.ActiveArmoryTag, "NoGlow" )
					ACTIONS.AnimateSequence( f6_arg0.ActiveArmoryOverlay, "NoGlow" )
				end
				f6_arg0._isArmoryActiveWeapon = WEAPON.IsActiveArmoryWeapon( f6_arg0._weaponTable.weapon )
				f6_arg0._isLeavingActiveArmory = WEAPON.IsLeavingActiveArmory( f6_arg0._weaponTable.weapon )
				if not f6_arg0._activeArmoryEventHandlersAdded then
					f6_arg0:addEventHandler( "button_over", function ( f11_arg0, f11_arg1 )
						f11_arg0:dispatchEventToParent( {
							name = "update_active_armory_promo_visibility",
							controller = f11_arg1.controller,
							isActiveArmory = f11_arg0._isArmoryActiveWeapon,
							isLeavingActiveArmory = f11_arg0._isLeavingActiveArmory
						} )
						f11_arg0.ActiveArmoryTag:PlayExpandIfPossible()
					end )
					f6_arg0:addEventHandler( "button_over_disable", function ( f10_arg0, f10_arg1 )
						f10_arg0:dispatchEventToParent( {
							name = "update_active_armory_promo_visibility",
							controller = f10_arg1.controller,
							isActiveArmory = f10_arg0._isArmoryActiveWeapon,
							isLeavingActiveArmory = f10_arg0._isLeavingActiveArmory
						} )
						f10_arg0.ActiveArmoryTag:PlayExpandIfPossible()
					end )
					f6_arg0:addEventHandler( "button_up", function ( f9_arg0, f9_arg1 )
						f9_arg0.ActiveArmoryTag:PlayShrinkIfPossible()
					end )
					f6_arg0:addEventHandler( "button_disable", function ( f8_arg0, f8_arg1 )
						f8_arg0.ActiveArmoryTag:PlayShrinkIfPossible()
					end )
					f6_arg0:registerAndCallEventHandler( "menu_state_updated", function ( f7_arg0, f7_arg1 )
						local f7_local0 = f7_arg1.menuState
						if not f7_local0 then
							f7_local0 = LOADOUT.GetCurrentMenuState( f7_arg0 )
						end
						if f7_local0 == LOADOUT.MENU_STATE.loadoutSelect then
							f7_arg0.ActiveArmoryOverlay:SetVisible( false )
							f7_arg0:dispatchEventToParent( {
								name = "update_active_armory_promo_visibility",
								isActiveArmory = false,
								controller = f7_arg1.controller
							} )
						elseif f7_arg0._isArmoryActiveWeapon then
							f7_arg0.ActiveArmoryOverlay:SetVisible( true )
						end
					end )
					f6_arg0._activeArmoryEventHandlersAdded = true
				end
			end
			f0_local0( f6_arg0, f6_arg0._weaponTable.lootID )
		end
	end
	f6_local4 = f6_arg3.weapon:get()
end

local f0_local9 = function ( f3_arg0, f3_arg1, f3_arg2 )
	f3_arg0.SetupButton = f0_local0
	f3_arg0.GetWeaponName = f0_local0
	f3_arg0._weapon = nil
	f3_arg0._isBlueprint = false
	f3_arg0:addEventHandler( "button_over", function ( f5_arg0, f5_arg1 )
		ACTIONS.AnimateSequence( f3_arg0, "ButtonOver" )
		if f3_arg0.Clear then
			local f5_local0 = f3_arg0.Clear
			local f5_local1 = f5_local0
			f5_local0 = f5_local0.SetAlpha
			local f5_local2
			if f3_arg0._weapon ~= "iw9_me_fists" then
				f5_local2 = 1
			else
				f5_local2 = 0
			end
			f5_local0( f5_local1, f5_local2 )
		end
	end )
	f3_arg0:addEventHandler( "button_up", function ( f4_arg0, f4_arg1 )
		ACTIONS.AnimateSequence( f3_arg0, "ButtonUp" )
		if f3_arg0.Clear then
			f3_arg0.Clear:SetAlpha( 0 )
		end
	end )
	if not CONDITIONS.IsMobileOrMobileSim() then
		f3_arg0:setActionSFX( SOUND_SETS.loadout.weaponEdit )
	end
end

local f0_local10 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0.PostLoadShared = f0_local0
end

function LoadoutItemWeaponButtonBase( menu, controller )
	local self = LUI.UIButton.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 336 * _1080p, 0, 204 * _1080p )
	self.id = "LoadoutItemWeaponButtonBase"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f0_local0( self, LUI.ValidateControllerIndex( self, f1_local1 ), controller )
	return self
end

MenuBuilder.registerType( "LoadoutItemWeaponButtonBase", LoadoutItemWeaponButtonBase )
LockTable( _M )
