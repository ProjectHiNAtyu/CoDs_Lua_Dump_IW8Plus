-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 02-09-2025 10:42
CRM = CRM or {}
CRM.DebugMessageContent = {
	action_title = "Redeem!",
	message_index = 0,
	item = "400092",
	action = "redeem",
	content_long = "Your Free Reward Pack includes:\n\n-\tTHREE 1 hour 2XP Tokens\n-\tTHREE 1 hour 2WXP Tokens\n-\tTWO Battle Pass Tier Skips \n\n",
	image = "mw_featured_2xp_2wxp_2xtiers_generic",
	action_location = "store_item",
	popup_image = "mw_motd_2xp_2wxp_2xtiers_generic",
	title = "Claim Free Reward Pack",
	layout_type = 0,
	checksum = "134612161",
	content_short = "Tier Skips will activate instantly, and your 2XP Tokens will be ready to use!",
	location_id = 6,
	message_id = "941"
}
CRM.DebugNGLiveEvent = {
	image = "blade_live_event_2xp_backing_ng",
	content_long = "NG Debug - Long",
	content_short = "NG Debug - Short"
}
CRM.DebugMWLiveEvent = {
	image = "blade_live_event_2xp_backing_mw",
	content_long = "MW Debug - Long",
	content_short = "MW Debug - Short"
}
CRM.DebugWZLiveEvent = {
	image = "blade_live_event_2xp_backing_wz",
	content_long = "WZ Debug - Long: This extra copy will force a scroll",
	content_short = "WZ Debug - Short: This extra copy will force a scroll"
}
CRM.DebugBPLiveEvent = {
	image = "blade_live_event_2xp_backing_bp",
	content_long = "MW Debug - Long",
	content_short = "MW Debug - Short"
}
CRM.DebugFreeTrialLiveEvent = {
	image = "blade_live_event_mp_free_trial_backing",
	content_long = "MW Debug - Long",
	content_short = "MW Debug - Short"
}
CRM.locations = {
	MP_MOTD = 1,
	CP_MOTD = 11,
	CS_NOTIFICATIONS = 10,
	MW_LIVE_EVENT = 22,
	BR_MOTD = 6,
	WZ_LIVE_EVENT = 23,
	CP_MSGS = 12,
	NG_LIVE_EVENT = 24,
	BR_MSGS = 7,
	MP_MSGS = 2,
	STORE = 12,
	UNUSABLE = 0,
	PATCH_NOTES = 8,
	ENFORCEMENT_NOTIFICATIONS = 9
}
CRM.keys = {
	MESSAGE_INDEX = "message_index",
	ACTION_LOCATION = "action_location",
	STORE_ITEM = "item",
	LOCATION_ID = "location_id",
	IMAGE = "image",
	POPUP_IMAGE = "popup_image",
	FORCE_VIEW_TIME = "force_view_time",
	CHECKSUM = "checksum",
	TITLE = "title",
	END_DATE = "end_date",
	CONTENT_LONG = "content_long",
	CONTENT_SHORT = "content_short",
	MESSAGE_ID = "message_id",
	START_DATE = "start_date",
	ACTION = "action",
	LAYOUT_TYPE = "layout_type",
	ACTION_TITLE = "action_title"
}
CRM.viewTime = 10000
CRM.CSMessagesMax = 2
CRM.LayoutRegisteredTypes = {
	"CRMLayoutDefault",
	"CRMLayoutFullImage",
	"CRMLayoutBundle",
	"CRMLayoutDefault"
}
CRM.MessageQueue = {}
CRM.QueueMessage = function ( f77_arg0, f77_arg1 )
	table.insert( CRM.MessageQueue, {
		message = f77_arg0,
		controllerIndex = f77_arg1
	} )
end

CRM.SendQueuedMessages = function ()
	if 0 < #CRM.MessageQueue then
		
	else
		
	end
end

CRM.IsLocationMOTD = function ( f75_arg0 )
	local f75_local0
	if f75_arg0 ~= CRM.locations.MP_MOTD and f75_arg0 ~= CRM.locations.CP_MOTD and f75_arg0 ~= CRM.locations.BR_MOTD then
		f75_local0 = false
	else
		f75_local0 = true
	end
	return f75_local0
end

CRM.GetCurrentModeMOTDLocation = function ()
	if CONDITIONS.IsMagmaGameMode() then
		return CRM.locations.BR_MOTD
	elseif CONDITIONS.IsThirdGameMode() then
		return CRM.locations.CP_MOTD
	else
		return CRM.locations.MP_MOTD
	end
end

CRM.GetCurrentModeMOTDChecksumData = function ( f73_arg0 )
	local f73_local0 = PlayerData.BFFBGAJGD( f73_arg0, CoD.StatsGroup.NonGame )
	if CONDITIONS.IsMagmaGameMode() then
		return f73_local0.brMotdChecksum
	elseif CONDITIONS.IsThirdGameMode() then
		return f73_local0.cpMotdChecksum
	else
		return f73_local0.mpMotdChecksum
	end
end

CRM.TryForceOpenCRMWindow = function ( f72_arg0, f72_arg1, f72_arg2 )
	local f72_local0 = Engine.IJEBHJIJF()
	if Lobby.GFFECBCCF() and not Lobby.BGIADHIHAG() then
		return false
	elseif not Engine.CCGJCIECBJ( f72_local0 ) then
		return false
	elseif not f72_arg2 then
		f72_arg2 = 0
	end
	local f72_local1 = CRM.GetMessageData( f72_local0, f72_arg1, f72_arg2 )
	if f72_local1 then
		if CRM.IsLocationMOTD( f72_arg1 ) then
			local f72_local2 = PlayerData.BFFBGAJGD( f72_local0, CoD.StatsGroup.NonGame )
			local f72_local3 = CRM.GetCurrentModeMOTDChecksumData( f72_local0 )
			if not f72_local3 then
				return false
			end
			local f72_local4 = Dvar.IBEGCHEFE( "STRONQSLO" )
			local f72_local5 = tonumber( f72_local1[CRM.keys.CHECKSUM] )
			if f72_local5 == tonumber( f72_local3:get() ) and not f72_local4 then
				return false
			else
				local f72_local6
				if f72_local1[CRM.keys.ACTION] ~= "goto_ingame" or f72_local1[CRM.keys.ACTION_LOCATION] ~= "store_item" then
					f72_local6 = false
				else
					f72_local6 = true
				end
			end
			if f72_local6 then
				local f72_local7, f72_local8 = STORE.GetIndexForBundle( f72_local1[CRM.keys.STORE_ITEM], f72_local0 )
				local f72_local9
				if f72_local7 then
					f72_local9 = f72_local7
				else
					f72_local9 = f72_local8
				end
				if not f72_local9 then
					return false
				end
			end
			f72_local3:set( f72_local5 )
			CRM.OpenCRMWindow( f72_arg0, true )
			return true
		elseif f72_arg1 == CRM.locations.ENFORCEMENT_NOTIFICATIONS or f72_arg1 == CRM.locations.CS_NOTIFICATIONS then
			local f72_local2 = CRM.GetMessageViewCountDatasource( f72_local1, f72_local0 )
			if 0 < (f72_local2:GetValue( f72_local0 ) or 0) then
				return false
			else
				CRM.OpenCRMWindow( f72_arg0, true, f72_local1 )
				return true
			end
		end
	end
end

CRM.OpenCRMWindow = function ( f71_arg0, f71_arg1, f71_arg2 )
	LUI.FlowManager.RequestPopupMenu( self, "CRMContainer", true, Engine.IJEBHJIJF(), false, {
		sourceMenu = f71_arg0,
		forceOpen = f71_arg1,
		messageData = f71_arg2
	} )
end

CRM.GetMessageViewCountDatasource = function ( f70_arg0, f70_arg1 )
	return LUI.DataSourceInGlobalModel.new( "alwaysLoaded.CRM.views." .. (f70_arg0[CRM.keys.CHECKSUM] or "1") )
end

CRM.ViewMessage = function ( f69_arg0, f69_arg1 )
	local f69_local0 = CRM.GetMessageViewCountDatasource( f69_arg0, f69_arg1 )
	local f69_local1 = f69_local0:GetValue( f69_arg1 ) or 0
	CRM.QueueMessage( "markCRMMessageRead " .. f69_arg0.location_id .. " " .. f69_arg0.message_index, f69_arg1 )
	f69_local0:SetValue( f69_arg1, f69_local1 + 1 )
end

CRM.GetPatchNoteMessageData = function ()
	local f67_local0 = function ( f68_arg0 )
		local f68_local0 = {}
		for f68_local4 in string.gmatch( f68_arg0, "{%*section%*}(.-){/%*section%*}" ) do
			f68_local0[#f68_local0 + 1] = f68_local4
		end
		f68_local1 = {}
		for f68_local2 = 1, #f68_local0, 1 do
			table.insert( f68_local1, {
				title = string.match( f68_local0[f68_local2], "{%*title%*}(.-){/%*title%*}" ) or "",
				body = string.match( f68_local0[f68_local2], "{%*body%*}(.-){/%*body%*}" ) or ""
			} )
		end
		return f68_local1
	end
	
	local f67_local1 = Engine.IJEBHJIJF()
	local f67_local2 = {}
	local f67_local3 = CRM.locations.PATCH_NOTES
	local f67_local4 = Dvar.CFHDGABACF( "NNNSQLQO" )
	for f67_local5 = 0, Engine.CIJDCFGGHD( f67_local1, f67_local3 ), 1 do
		if #f67_local2 == f67_local4 then
			break
		end
		local f67_local8 = CRM.GetMessageData( f67_local1, f67_local3, f67_local5 )
		if f67_local8 then
			f67_local8[CRM.keys.CONTENT_LONG] = f67_local0( f67_local8[CRM.keys.CONTENT_LONG] )
			f67_local2[#f67_local2 + 1] = f67_local8
		end
	end
	return f67_local2
end

CRM.GetMessageContent = function ( f66_arg0, f66_arg1, f66_arg2 )
	if Dvar.IBEGCHEFE( "OMLPQNOPPL" ) then
		if CRM.IsLocationMOTD( f66_arg1 ) and f66_arg2 == 0 then
			return CRM.DebugMessageContent
		elseif f66_arg1 == CRM.locations.NG_LIVE_EVENT and f66_arg2 == 0 then
			return CRM.DebugNGLiveEvent
		elseif f66_arg1 == CRM.locations.MW_LIVE_EVENT and f66_arg2 == 0 then
			return CRM.DebugMWLiveEvent
		elseif f66_arg1 == CRM.locations.WZ_LIVE_EVENT and f66_arg2 == 0 then
			return CRM.DebugWZLiveEvent
		else
			return false
		end
	else
		local f66_local0 = Engine.CEGFGEGBEH( f66_arg0, f66_arg1, f66_arg2 )
		if f66_local0 then
			return f66_local0.message
		else
			return false
		end
	end
end

CRM.GetMenuMessageData = function ()
	local f64_local0 = Engine.IJEBHJIJF()
	local f64_local1, f64_local2 = nil
	if Engine.ECHCFGDDDF() then
		if CONDITIONS.IsMagmaGameMode() then
			f64_local1 = CRM.locations.BR_MOTD
			f64_local2 = CRM.locations.BR_MSGS
		else
			f64_local1 = CRM.locations.MP_MOTD
			f64_local2 = CRM.locations.MP_MSGS
		end
	else
		f64_local1 = CRM.locations.CP_MOTD
		f64_local2 = CRM.locations.CP_MSGS
	end
	local f64_local3 = STORE.GetCategoryData( f64_local0 )
	local f64_local4 = function ( f65_arg0 )
		local f65_local0
		if f65_arg0[CRM.keys.ACTION] ~= "goto_ingame" or f65_arg0[CRM.keys.ACTION_LOCATION] ~= "store_item" then
			f65_local0 = false
		else
			f65_local0 = true
		end
		if f65_local0 then
			local f65_local1, f65_local2 = STORE.GetIndexForBundle( f65_arg0[CRM.keys.STORE_ITEM], f64_local0, f64_local0 )
			local f65_local3
			if f65_local1 then
				f65_local3 = f65_local1
			else
				f65_local3 = f65_local2
			end
			if not f65_local3 then
				return false
			end
		end
		return true
	end
	
	local f64_local5 = {}
	local f64_local6 = CRM.GetMessageData( f64_local0, f64_local1, 0 )
	if f64_local6 and f64_local4( f64_local6 ) then
		f64_local6.index = #f64_local5
		table.insert( f64_local5, f64_local6 )
	end
	local f64_local7 = Dvar.CFHDGABACF( "NSKOMKOSLO" )
	for f64_local8 = 0, Engine.CIJDCFGGHD( f64_local0, f64_local2 ), 1 do
		if #f64_local5 == f64_local7 then
			break
		end
		local f64_local11 = CRM.GetMessageData( f64_local0, f64_local2, f64_local8 )
		if f64_local11 and f64_local4( f64_local11 ) then
			f64_local11.index = #f64_local5
			table.insert( f64_local5, f64_local11 )
		end
	end
	return f64_local5
end

CRM.GetMessageData = function ( f63_arg0, f63_arg1, f63_arg2 )
	local f63_local0 = CRM.GetMessageContent( f63_arg0, f63_arg1, f63_arg2 )
	if not f63_local0 then
		return nil
	end
	f63_local0[CRM.keys.LOCATION_ID] = f63_arg1
	if not f63_local0[CRM.keys.LAYOUT_TYPE] then
		f63_local0[CRM.keys.LAYOUT_TYPE] = 0
	else
		f63_local0[CRM.keys.LAYOUT_TYPE] = tonumber( f63_local0[CRM.keys.LAYOUT_TYPE] )
	end
	if not f63_local0[CRM.keys.TITLE] or f63_local0[CRM.keys.TITLE] == "" then
		f63_local0[CRM.keys.TITLE] = Engine.CBBHFCGDIC( "LUA_MENU/MOTD_CAPS" )
	else
		f63_local0[CRM.keys.TITLE] = f63_local0[CRM.keys.TITLE]
	end
	if not f63_local0[CRM.keys.CONTENT_SHORT] then
		f63_local0[CRM.keys.CONTENT_SHORT] = ""
	else
		f63_local0[CRM.keys.CONTENT_SHORT] = f63_local0[CRM.keys.CONTENT_SHORT]
	end
	if not f63_local0[CRM.keys.CONTENT_LONG] then
		f63_local0[CRM.keys.CONTENT_LONG] = ""
	else
		f63_local0[CRM.keys.CONTENT_LONG] = f63_local0[CRM.keys.CONTENT_LONG]
	end
	if not f63_local0[CRM.keys.POPUP_IMAGE] then
		f63_local0[CRM.keys.POPUP_IMAGE] = f63_local0[CRM.keys.POPUP_IMAGE] or "mw_keyart"
	end
	if not f63_local0[CRM.keys.IMAGE] then
		f63_local0[CRM.keys.IMAGE] = f63_local0[CRM.keys.IMAGE] or "mw_keyart_small"
	end
	if f63_arg1 == CRM.locations.ENFORCEMENT_NOTIFICATIONS or f63_arg1 == CRM.locations.CS_NOTIFICATIONS then
		if not f63_local0[CRM.keys.FORCE_VIEW_TIME] then
			f63_local0[CRM.keys.FORCE_VIEW_TIME] = 5
		end
		f63_local0[CRM.keys.ACTION_TITLE] = nil
		f63_local0[CRM.keys.ACTION] = nil
	end
	if f63_local0[CRM.keys.ACTION] and 0 < #f63_local0[CRM.keys.ACTION] then
		if not f63_local0[CRM.keys.ACTION_TITLE] or f63_local0[CRM.keys.ACTION_TITLE] == "" then
			f63_local0[CRM.keys.ACTION_TITLE] = Engine.CBBHFCGDIC( "LUA_MENU/SELECT" )
		end
		local f63_local1 = CRM.actionFunctions[f63_local0[CRM.keys.ACTION]]
		if f63_local1 ~= nil then
			f63_local0.actionFunction = f63_local1( f63_arg0, f63_local0 )
		end
	end
	return f63_local0
end

CRM.OpenCRMWindows = function ( f61_arg0 )
	f61_arg0:saveState()
	f61_arg0.nextLocation = CRM.locations.ENFORCEMENT_NOTIFICATIONS
	local f61_local0 = nil
	f61_local0 = function ()
		if f61_arg0.nextLocation then
			local f62_local0 = CRM.TryForceOpenCRMWindow( f61_arg0, f61_arg0.nextLocation, f61_arg0.nextMessageIndex )
			if f61_arg0.nextLocation == CRM.locations.ENFORCEMENT_NOTIFICATIONS then
				f61_arg0.nextLocation = CRM.locations.CS_NOTIFICATIONS
				f61_arg0.nextMessageIndex = 0
			elseif f61_arg0.nextLocation == CRM.locations.CS_NOTIFICATIONS then
				if f61_arg0.nextMessageIndex + 1 == CRM.CSMessagesMax then
					f61_arg0.nextLocation = CRM.GetCurrentModeMOTDLocation()
					f61_arg0.nextMessageIndex = 0
				else
					f61_arg0.nextMessageIndex = f61_arg0.nextMessageIndex + 1
				end
			elseif CRM.IsLocationMOTD( f61_arg0.nextLocation ) then
				f61_arg0.nextLocation = nil
			end
			if not f62_local0 then
				f61_arg0()
			end
		end
	end
	
	f61_local0()
	f61_arg0:addEventHandler( "restore_focus", f61_local0 )
end

CRM.SetupBackButtonHandler = function ( f56_arg0, f56_arg1, f56_arg2, f56_arg3, f56_arg4 )
	if not f56_arg0.bindButton then
		local self = LUI.UIBindButton.new()
		self.id = "bindButton"
		f56_arg0:addElement( self )
		f56_arg0.bindButton = self
	end
	local self = function ()
		local f59_local0 = f56_arg0.bindButton
		local f59_local1 = f59_local0
		f59_local0 = f59_local0.addEventHandler
		f59_local0( f59_local1, "button_secondary", function ( f60_arg0, f60_arg1 )
			f59_local0._lastButtonPressed = "button_secondary"
			ACTIONS.LeaveMenu( f59_local0 )
		end )
	end
	
	if f56_arg2[CRM.keys.FORCE_VIEW_TIME] and f56_arg3 then
		local f56_local1 = tonumber( f56_arg2[CRM.keys.FORCE_VIEW_TIME] ) * 1000
		local f56_local2 = MenuBuilder.BuildRegisteredType( "UICountdown", {
			controllerIndex = f56_arg1
		} )
		f56_local2.id = "CountdownElement"
		f56_local2:SetFont( FONTS.GetFont( FONTS.MainLight.File ) )
		f56_local2:SetAlignment( LUI.Alignment.Right )
		f56_local2:setEndTime( Engine.BFBIDEGDFB() + f56_local1 )
		f56_local2:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 96, _1080p * 296, _1080p * 931, _1080p * 979 )
		f56_arg0:addElement( f56_local2 )
		local f56_local3 = f56_arg0:Wait( f56_local1 )
		f56_local3.onComplete = function ()
			f56_arg0:closeTree()
			f56_arg0 = nil
			f56_arg0:AddButtonHelperText( {
				clickable = true,
				priority = 4294967286,
				side = "left",
				button_ref = "button_secondary",
				helper_text = Engine.CBBHFCGDIC( "MENU/BACK" )
			} )
			f56_arg0()
		end
		
	end
	f56_arg0:addEventHandler( "menu_create", function ( f57_arg0, f57_arg1 )
		f56_arg0:AddButtonHelperText( {
			clickable = true,
			priority = 4294967286,
			side = "left",
			button_ref = "button_secondary",
			helper_text = Engine.CBBHFCGDIC( "MENU/CLOSE" )
		} )
	end )
	self()
end

CRM.UpdateCRMData = function ( f55_arg0, f55_arg1, f55_arg2, f55_arg3, f55_arg4 )
	local f55_local0 = "markCRMMessageRead " .. f55_arg2 .. " " .. f55_arg3
	if f55_arg4 then
		CRM.QueueMessage( f55_local0, f55_arg1 )
	else
		Engine.EBIDFIDHIE( f55_local0, f55_arg1 )
	end
	f55_arg0:dispatchEventToRoot( {
		name = "update_crm_data",
		controllerIndex = f55_arg1
	} )
end

CRM.QueueReadMessage = function ( f54_arg0, f54_arg1, f54_arg2, f54_arg3 )
	CRM.QueueMessage( "markCRMMessageRead " .. f54_arg2 .. " " .. f54_arg3, f54_arg1 )
end

local f0_local0 = function ( f52_arg0, f52_arg1 )
	return function ( f53_arg0, f53_arg1 )
		Engine.EBIDFIDHIE( string.format( "clickCRMMessageAction %d %d %s %s", f52_arg0[CRM.keys.LOCATION_ID], f52_arg0[CRM.keys.MESSAGE_ID], "goto_franchise_store", storeItem ), f52_arg0 )
		CRM.QueueReadMessage( f53_arg0, f52_arg0, f52_arg0[CRM.keys.LOCATION_ID], f52_arg0[CRM.keys.MESSAGE_INDEX] )
		local f53_local0 = f52_arg0[CRM.keys.STORE_ITEM]
		local f53_local1 = STORE.GoToStore
		local f53_local2 = f52_arg0
		local f53_local3 = f53_arg0:GetCurrentMenu()
		f53_local1( f53_local2, f53_local3.id, f53_arg0.id, f53_local0 )
	end
	
end

local f0_local1 = function ( f49_arg0, f49_arg1 )
	if PROGRESSION.AreCustomLoadoutsUnlocked( f49_arg0 ) then
		return function ( f50_arg0, f50_arg1 )
			Engine.EBIDFIDHIE( string.format( "clickCRMMessageAction %d %d %s %s", f49_arg0[CRM.keys.LOCATION_ID], f49_arg0[CRM.keys.MESSAGE_ID], "goto_ingame", "loadouts" ), f49_arg0 )
			CRM.QueueReadMessage( f50_arg0, f49_arg0, f49_arg0[CRM.keys.LOCATION_ID], f49_arg0[CRM.keys.MESSAGE_INDEX] )
			return {
				tabToFocus = "MPWeaponMenu",
				buttonToFocus = "EditLoadoutButton",
				openMenuFunction = function ()
					LUI.FlowManager.RequestAddMenu( "LoadoutSelect", true, f50_arg0 )
				end
				
			}
		end
		
	else
		
	end
end

local f0_local2 = function ( f46_arg0, f46_arg1 )
	if 0 < #WEAPON.GetModifications( f46_arg0 ) or LUI.WebViewManager.MotdEnabled() then
		return function ( f47_arg0, f47_arg1 )
			Engine.EBIDFIDHIE( string.format( "clickCRMMessageAction %d %d %s %s", f46_arg0[CRM.keys.LOCATION_ID], f46_arg0[CRM.keys.MESSAGE_ID], "goto_ingame", "armory" ), f46_arg0 )
			CRM.QueueReadMessage( f47_arg0, f46_arg0, f46_arg0[CRM.keys.LOCATION_ID], f46_arg0[CRM.keys.MESSAGE_INDEX] )
			return {
				tabToFocus = "MPWeaponMenu",
				buttonToFocus = "WeaponLockerButton",
				openMenuFunction = function ()
					LUI.FlowManager.RequestAddMenu( "WeaponLocker", true, f47_arg0 )
				end
				
			}
		end
		
	else
		
	end
end

local f0_local3 = function ( f43_arg0, f43_arg1 )
	if DataSources.frontEnd.lobby.isSolo:GetValue( f43_arg0 ) then
		return function ( f44_arg0, f44_arg1 )
			Engine.EBIDFIDHIE( string.format( "clickCRMMessageAction %d %d %s %s", f43_arg0[CRM.keys.LOCATION_ID], f43_arg0[CRM.keys.MESSAGE_ID], "goto_ingame", "trials" ), f43_arg0 )
			CRM.QueueReadMessage( f44_arg0, f43_arg0, f43_arg0[CRM.keys.LOCATION_ID], f43_arg0[CRM.keys.MESSAGE_INDEX] )
			return {
				tabToFocus = "MPPlayMenu",
				buttonToFocus = "TrialsButton",
				openMenuFunction = function ()
					TRIALS.OpenTrialsMenu( f44_arg0, f44_arg0 )
				end
				
			}
		end
		
	else
		
	end
end

local f0_local4 = function ( f38_arg0, f38_arg1 )
	local f38_local0 = DataSources.frontEnd.lobby.isSolo:GetValue( f38_arg0 )
	local f38_local1 = function ( f41_arg0 )
		Engine.EBIDFIDHIE( string.format( "clickCRMMessageAction %d %d %s %s", f38_arg0[CRM.keys.LOCATION_ID], f38_arg0[CRM.keys.MESSAGE_ID], "goto_ingame", "tournaments" ), f38_arg0 )
		CRM.QueueReadMessage( self, f38_arg0, f38_arg0[CRM.keys.LOCATION_ID], f38_arg0[CRM.keys.MESSAGE_INDEX] )
		return {
			buttonToFocus = "TournamentButton",
			tabToFocus = f41_arg0,
			openMenuFunction = function ()
				TOURNAMENT.OpenTournamentSignUp( f41_arg0 )
			end
			
		}
	end
	
	if Engine.HEEFCICJE() then
		if TOURNAMENT.IsF2PTournamentAllowed( self ) and f38_local0 then
			return function ( f40_arg0, f40_arg1 )
				return f38_arg0( "BRPlayMenu" )
			end
			
		end
	elseif CONDITIONS.IsTournamentModeAllowed( self ) and f38_local0 then
		return function ( f39_arg0, f39_arg1 )
			return f38_arg0( "MPPlayMenu" )
		end
		
	end
end

local f0_local5 = function ( f36_arg0, f36_arg1 )
	if not CONDITIONS.IsWeGameGovBanned() then
		return function ( f37_arg0, f37_arg1 )
			Engine.EBIDFIDHIE( string.format( "clickCRMMessageAction %d %d %s %s", f36_arg0[CRM.keys.LOCATION_ID], f36_arg0[CRM.keys.MESSAGE_ID], "goto_ingame", "barracks" ), f36_arg0 )
			CRM.QueueReadMessage( f37_arg0, f36_arg0, f36_arg0[CRM.keys.LOCATION_ID], f36_arg0[CRM.keys.MESSAGE_INDEX] )
			return {
				tabToFocus = "MPBarracksMenu"
			}
		end
		
	else
		
	end
end

local f0_local6 = function ( f32_arg0, f32_arg1 )
	if not CONDITIONS.IsWeGameGovBanned() and not Engine.DBAEJAHFGJ( f32_arg0 ) then
		return function ( f33_arg0, f33_arg1 )
			Engine.EBIDFIDHIE( string.format( "clickCRMMessageAction %d %d %s %s", f32_arg0[CRM.keys.LOCATION_ID], f32_arg0[CRM.keys.MESSAGE_ID], "goto_ingame", "missions" ), f32_arg0 )
			CRM.QueueReadMessage( f33_arg0, f32_arg0, f32_arg0[CRM.keys.LOCATION_ID], f32_arg0[CRM.keys.MESSAGE_INDEX] )
			if CONDITIONS.IsChallengeTabEnabled() then
				return {
					tabToFocus = "ChallengeMenu",
					buttonToFocus = "MissionsButton",
					openMenuFunction = function ()
						LUI.FlowManager.RequestAddMenu( "ChallengeMenuMissions", true, f33_arg0 )
					end
					
				}
			else
				return {
					tabToFocus = "MPBarracksMenu",
					buttonToFocus = "ChallengesButton",
					openMenuFunction = function ()
						LUI.FlowManager.RequestAddMenu( "BarracksChallenges", true, f33_arg0 )
					end
					
				}
			end
		end
		
	else
		
	end
end

local f0_local7 = function ( f30_arg0, f30_arg1 )
	return function ( f31_arg0, f31_arg1 )
		Engine.EBIDFIDHIE( string.format( "clickCRMMessageAction %d %d %s %s", f30_arg0[CRM.keys.LOCATION_ID], f30_arg0[CRM.keys.MESSAGE_ID], "goto_ingame", "social" ), f30_arg0 )
		CRM.QueueReadMessage( f31_arg0, f30_arg0, f30_arg0[CRM.keys.LOCATION_ID], f30_arg0[CRM.keys.MESSAGE_INDEX] )
		if LUI.WebViewManager.MotdEnabled() then
			local f31_local0 = LUI.WebViewManager.Instance()
			f31_local0:RequestCloseFullScreen( true )
		else
			ACTIONS.LeaveMenu( f31_arg0 )
		end
		FRIENDS.OpenFriendsList( f30_arg0 )
	end
	
end

local f0_local8 = function ( f28_arg0, f28_arg1 )
	if CONDITIONS.IsStoreAllowed() and STORE.GetCategoryIndex( f28_arg0, f28_arg1[CRM.keys.STORE_ITEM] ) ~= nil then
		return function ( f29_arg0, f29_arg1 )
			Engine.EBIDFIDHIE( string.format( "clickCRMMessageAction %d %d %s %s", f28_arg0[CRM.keys.LOCATION_ID], f28_arg0[CRM.keys.MESSAGE_ID], "goto_ingame", "store" ), f28_arg0 )
			CRM.QueueReadMessage( f29_arg0, f28_arg0, f28_arg0[CRM.keys.LOCATION_ID], f28_arg0[CRM.keys.MESSAGE_INDEX] )
			return {
				tabToFocus = "MPStoreMenu",
				buttonToFocus = f28_arg0
			}
		end
		
	else
		
	end
end

local f0_local9 = function ( f26_arg0, f26_arg1 )
	if CONDITIONS.IsStoreAllowed() then
		return function ( f27_arg0, f27_arg1 )
			Engine.EBIDFIDHIE( string.format( "clickCRMMessageAction %d %d %s %s", f26_arg0[CRM.keys.LOCATION_ID], f26_arg0[CRM.keys.MESSAGE_INDEX], "goto_ingame", "Store" ), f26_arg0 )
			CRM.QueueReadMessage( f27_arg0, f26_arg0, f26_arg0[CRM.keys.LOCATION_ID], f26_arg0[CRM.keys.MESSAGE_INDEX] )
			return {
				triggerButtonAction = true,
				tabToFocus = "MPStoreMenu",
				bundleToFocus = f26_arg0[CRM.keys.STORE_ITEM]
			}
		end
		
	else
		
	end
end

local f0_local10 = function ( f24_arg0, f24_arg1 )
	if CONDITIONS.IsBattlePassEnabled() then
		return function ( f25_arg0, f25_arg1 )
			Engine.EBIDFIDHIE( string.format( "clickCRMMessageAction %d %d %s %s", f24_arg0[CRM.keys.LOCATION_ID], f24_arg0[CRM.keys.MESSAGE_ID], "goto_ingame", "battlepass" ), f24_arg0 )
			CRM.QueueReadMessage( f25_arg0, f24_arg0, f24_arg0[CRM.keys.LOCATION_ID], f24_arg0[CRM.keys.MESSAGE_INDEX] )
			return {
				tabToFocus = "BattlePassMenu"
			}
		end
		
	else
		
	end
end

local f0_local11 = function ( f22_arg0, f22_arg1 )
	return function ( f23_arg0, f23_arg1 )
		Engine.EBIDFIDHIE( string.format( "clickCRMMessageAction %d %d %s %s", f22_arg0[CRM.keys.LOCATION_ID], f22_arg0[CRM.keys.MESSAGE_ID], "goto_ingame", "operators" ), f22_arg0 )
		CRM.QueueReadMessage( f23_arg0, f22_arg0, f22_arg0[CRM.keys.LOCATION_ID], f22_arg0[CRM.keys.MESSAGE_INDEX] )
		local f23_local0 = "MPOperatorMenu"
		if CONDITIONS.IsWZWipOperatorFlowEnabled() then
			f23_local0 = "WZOperatorSelect"
		end
		return {
			tabToFocus = f23_local0
		}
	end
	
end

local f0_local12 = function ( f20_arg0, f20_arg1 )
	if BATTLEPASS.IsOwned( f20_arg0 ) then
		local f20_local0 = LUI.FlowManager.GetScopedData( "MainMenu" )
		f20_local0.returnToMainMenu = true
		local f20_local1 = f0_local0
		local f20_local2 = f20_arg0
		local f20_local3 = f20_arg1
		return 
	else
		local f20_local0 = f0_local0( f20_arg0, f20_arg1 )
		return function ( f21_arg0, f21_arg1 )
			local f21_local0 = LUI.FlowManager.GetScopedData( "MainMenu" )
			f21_local0.crmPurchaseBattlePass = true
			return f20_arg0( f21_arg0, f21_arg1 )
		end
		
	end
end

local f0_local13 = function ( f19_arg0, f19_arg1 )
	assert( f19_arg1[CRM.keys.ACTION_LOCATION] )
	local f19_local0 = CRM.LocationFunctions[f19_arg1[CRM.keys.ACTION_LOCATION]]
	if f19_arg1[CRM.keys.ACTION_LOCATION] == "franchise_store" and f19_arg1[CRM.keys.STORE_ITEM] then
		f19_local0 = CRM.LocationFunctions.franchise_store_item
	end
	if f19_local0 ~= nil then
		return f19_local0( f19_arg0, f19_arg1 )
	else
		
	end
end

local f0_local14 = function ( f17_arg0, f17_arg1 )
	assert( f17_arg1[CRM.keys.ACTION_LOCATION] )
	local f17_local0 = f17_arg1[CRM.keys.ACTION_LOCATION]
	if f17_local0 and 0 < #f17_local0 then
		return function ( f18_arg0, f18_arg1 )
			Engine.BHECIAHGC( f18_arg1.controller, WebBrowserType.FULLSCREEN, f17_arg0 )
			Engine.EBIDFIDHIE( string.format( "clickCRMMessageAction %d %d %s %s", f17_arg0[CRM.keys.LOCATION_ID], f17_arg0[CRM.keys.MESSAGE_ID], "goto_url", f17_arg0 ), f18_arg1.controller )
			CRM.QueueReadMessage( f18_arg0, f18_arg1.controller, f17_arg0[CRM.keys.LOCATION_ID], f17_arg0[CRM.keys.MESSAGE_INDEX] )
			CRM.UpdateCRMData( f18_arg0, f18_arg1.controller, f17_arg0[CRM.keys.LOCATION_ID], f17_arg0[CRM.keys.MESSAGE_ID] )
		end
		
	else
		
	end
end

MenuBuilder.registerType( "RegistrationFailedPopup", function ()
	local f16_local0 = MenuBuilder.BuildRegisteredType( "PopupOK", {
		message = Engine.CBBHFCGDIC( "LUA_MENU_MP/REGISTRATION_FAILED" )
	} )
	f16_local0.id = "RegistrationFailedPopup"
	return f16_local0
end )
MenuBuilder.registerType( "RegisteringEmailPopup", function ( f13_arg0, f13_arg1 )
	local f13_local0 = MenuBuilder.BuildRegisteredType( "FenceDialogPopup", {
		message = Engine.CBBHFCGDIC( "LUA_MENU_MP/REGISTERING_EMAIL" ),
		controllerIndex = f13_arg1.controllerIndex
	} )
	f13_local0.id = "RegisteringEmailPopup"
	f13_local0:addEventHandler( "registration_success", function ( f15_arg0, f15_arg1 )
		Engine.EBIDFIDHIE( string.format( "clickCRMMessageAction %d %d %s %s", f13_arg0.locationIndex, f13_arg0.messageID, "register", "registration_success" ), f13_arg0.controllerIndex )
		CRM.UpdateCRMData( f15_arg0, f13_arg0.controllerIndex, f13_arg0.locationIndex, f13_arg0.messageIndex, false )
		LUI.FlowManager.RequestLeaveMenu( f15_arg0 )
	end )
	f13_local0:addEventHandler( "registration_error", function ( f14_arg0, f14_arg1 )
		Engine.EBIDFIDHIE( string.format( "clickCRMMessageAction %d %d %s %s", f13_arg0.locationIndex, f13_arg0.messageID, "register", "registration_error" ), f13_arg0.controllerIndex )
		LUI.FlowManager.RequestLeaveMenu( f14_arg0 )
		LUI.FlowManager.RequestPopupMenu( f14_arg0, "RegistrationFailedPopup", true, f13_arg0.controllerIndex, false )
	end )
	return f13_local0
end )
local f0_local15 = function ( f10_arg0, f10_arg1 )
	return function ( f11_arg0, f11_arg1 )
		OSK.CBJGJDGFC( f10_arg0, Engine.CBBHFCGDIC( "LUA_MENU_MP/REGISTER_EMAIL" ), "", 128, false, false, false, function ( f12_arg0, f12_arg1, f12_arg2 )
			if f12_arg1 then
				LUI.FlowManager.RequestPopupMenu( f11_arg0, "RegisteringEmailPopup", true, f12_arg0, false, {
					messageID = f11_arg0[CRM.keys.MESSAGE_ID],
					messageIndex = f11_arg0[CRM.keys.MESSAGE_INDEX],
					locationIndex = f11_arg0[CRM.keys.LOCATION_ID]
				} )
				Engine.CHDJJHJGHH( f12_arg0, f12_arg1 )
			end
		end )
	end
	
end

local f0_local16 = function ( menu, controller )
	local self = LUI.UIElement.new()
	self:addEventHandler( "menu_create", function ( f9_arg0, f9_arg1 )
		local f9_local0 = menu( menu.controllerIndex, {
			content_long = "KentRocks"
		} )
		f9_local0( f9_arg0 )
		LUI.FlowManager.RequestLeaveMenu( f9_arg0 )
	end )
	return self
end

if Engine.BHICADFIHA() then
	MenuBuilder.registerType( "RegisterTestPopup", f0_local16 )
end
MenuBuilder.registerType( "RedeemCRMMessagePopup", function ( f5_arg0, f5_arg1 )
	local f5_local0 = {
		message = Engine.CBBHFCGDIC( "LUA_MENU_MP/REDEEM_CRM_CODE" ),
		controllerIndex = f5_arg1.controllerIndex
	}
	local f5_local1 = false
	local f5_local2 = MenuBuilder.BuildRegisteredType( "FenceDialogPopup", f5_local0 )
	f5_local2.id = "RedeemCRMMessagePopup"
	f5_local2:addEventHandler( "redemption_success", function ( f7_arg0, f7_arg1 )
		LUI.FlowManager.RequestLeaveMenu( f7_arg0 )
		Engine.EBIDFIDHIE( string.format( "clickCRMMessageAction %d %d %s %s", f5_arg0.locationIndex, f5_arg0.messageID, "redeem", "redemption_success" ), f5_arg0.controllerIndex )
		CRM.UpdateCRMData( f7_arg0, f5_arg0.controllerIndex, f5_arg0.locationIndex, f5_arg0.messageIndex, f5_arg0 )
		LUI.FlowManager.RequestPopupMenu( f7_arg0, "code_redemption_success", true, f5_arg0.controllerIndex )
	end )
	f5_local2:addEventHandler( "redemption_failed", function ( f6_arg0, f6_arg1 )
		LUI.FlowManager.RequestLeaveMenu( f6_arg0 )
		if f6_arg1.errorAlreadyRedeemed then
			Engine.EBIDFIDHIE( string.format( "clickCRMMessageAction %d %d %s %s", f5_arg0.locationIndex, f5_arg0.messageID, "redeem", "redemption_failed_already_redeemed" ), f5_arg0.controllerIndex )
			CRM.UpdateCRMData( f6_arg0, f5_arg0.controllerIndex, f5_arg0.locationIndex, f5_arg0.messageIndex, f5_arg0 )
			LUI.FlowManager.RequestPopupMenu( f6_arg0, "code_already_redeemed_popup", true, f5_arg0.controllerIndex )
		elseif f6_arg1.errorCodeExpired then
			Engine.EBIDFIDHIE( string.format( "clickCRMMessageAction %d %d %s %s", f5_arg0.locationIndex, f5_arg0.messageID, "redeem", "redemption_failed_code_expired" ), f5_arg0.controllerIndex )
			CRM.UpdateCRMData( f6_arg0, f5_arg0.controllerIndex, f5_arg0.locationIndex, f5_arg0.messageIndex, f5_arg0 )
			LUI.FlowManager.RequestPopupMenu( f6_arg0, "code_expired_popup", true, f5_arg0.controllerIndex )
		else
			Engine.EBIDFIDHIE( string.format( "clickCRMMessageAction %d %d %s %s", f5_arg0.locationIndex, f5_arg0.messageID, "redeem", "redemption_failed" ), f5_arg0.controllerIndex )
			LUI.FlowManager.RequestPopupMenu( f6_arg0, "code_redemption_failed_popup", true, f5_arg0.controllerIndex )
		end
	end )
	return f5_local2
end )
local f0_local17 = function ( f3_arg0, f3_arg1 )
	return function ( f4_arg0, f4_arg1 )
		if LUI.WebViewManager.MotdEnabled() then
			local f4_local0 = LUI.WebViewManager.Instance()
			f4_local0:RequestCloseFullScreen( true )
		else
			LUI.FlowManager.RequestLeaveMenu( f4_arg0 )
		end
		LUI.FlowManager.RequestPopupMenu( f4_arg0, "RedeemCRMMessagePopup", true, f3_arg0, false, {
			messageID = f3_arg0[CRM.keys.MESSAGE_ID],
			messageIndex = f3_arg0[CRM.keys.MESSAGE_INDEX],
			locationIndex = f3_arg0[CRM.keys.LOCATION_ID]
		} )
		Engine.BCEHEAHAHI( f3_arg0, f3_arg0[CRM.keys.LOCATION_ID], f3_arg0[CRM.keys.MESSAGE_INDEX] )
	end
	
end

CRM.InitPopupWindow = function ( f1_arg0, f1_arg1, f1_arg2 )
	assert( f1_arg1 )
	assert( f1_arg2.locationIndex )
	assert( f1_arg2.messageIndex )
	assert( f1_arg2.layoutType )
	local f1_local0 = Engine.IJEBHJIJF()
	local f1_local1 = MenuBuilder.BuildRegisteredType( CRM.LayoutRegisteredTypes[f1_arg2.layoutType], {
		controllerIndex = f1_local0
	} )
	if f1_arg2 then
		f1_local1.CRMLastMessageIndex = f1_arg2.messageIndex
		f1_local1.CRMLastLocationIndex = f1_arg2.locationIndex
		f1_local1.CRMForceOpen = f1_arg2.forceOpen
	end
	if not f1_arg1.action or f1_arg1.action ~= "redeem" or not f1_arg2.forceOpen then
		CRM.SetupBackButtonHandler( f1_local1, f1_local0, f1_arg1, f1_arg2.forceOpen, f1_arg0 )
	end
	f1_local1:SetupContent( f1_local0, f1_arg1 )
	f1_local1:addEventHandler( "menu_close", function ( f2_arg0, f2_arg1 )
		if not f1_arg0.action or f1_arg0.action ~= "redeem" then
			CRM.UpdateCRMData( f2_arg0, f1_arg0, f1_arg0.CRMLastLocationIndex, f1_arg0.CRMLastMessageIndex, true )
		end
	end )
	return f1_local1
end

CRM.actionFunctions = {
	goto_ingame = f0_local13,
	goto_franchise_store = f0_local0,
	goto_url = f0_local14,
	register = f0_local15,
	redeem = f0_local17,
	battlepass_tier_gift = f0_local12
}
CRM.LocationFunctions = {
	store = f0_local8,
	store_item = f0_local9,
	social = f0_local7,
	loadouts = f0_local1,
	armory = f0_local2,
	trials = f0_local3,
	tournaments = f0_local4,
	barracks = f0_local5,
	missions = f0_local6,
	battlepass = f0_local10,
	operators = f0_local11
}
