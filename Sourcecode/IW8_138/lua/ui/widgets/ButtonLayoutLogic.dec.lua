-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 02-09-2025 10:42
local f0_local0 = "options.buttonLayout"
local f0_local1 = GetIntForColor( SWATCHES.layouts.oldLayout )
local f0_local2 = GetIntForColor( SWATCHES.layouts.newLayout )
local f0_local3 = {}
local f0_local4 = function ( f14_arg0, f14_arg1 )
	local f14_local0 = Engine.CAADCDEEIA()
	local f14_local1 = f14_arg0.name
	local f14_local2
	if f14_local0 then
		f14_local2 = f14_arg0.leftTriggerSP
		if not f14_local2 then
		
		else
			local f14_local3
			if f14_local0 then
				f14_local3 = f14_arg0.leftShoulderSP
				if not f14_local3 then
				
				else
					local f14_local4
					if f14_local0 then
						f14_local4 = f14_arg0.rightTriggerSP
						if not f14_local4 then
						
						else
							local f14_local5
							if f14_local0 then
								f14_local5 = f14_arg0.rightShoulderSP
								if not f14_local5 then
								
								else
									local f14_local6 = f14_arg0.cfg
									if f14_arg1 then
										local f14_local7 = f14_local2
										f14_local2 = f14_local3
										f14_local3 = f14_local7
										f14_local7 = f14_local4
										f14_local4 = f14_local5
										f14_local5 = f14_local7
										f14_local1 = f14_local1 .. "_alt"
										f14_local6 = f14_local6 .. "_alt"
									end
									return {
										cfg = f14_local6,
										layoutName = f14_local1,
										leftTrigger = f14_local2,
										leftShoulder = f14_local3,
										rightTrigger = f14_local4,
										rightShoulder = f14_local5
									}
								end
							end
							f14_local5 = f14_arg0.rightShoulder
						end
					end
					f14_local4 = f14_arg0.rightTrigger
				end
			end
			f14_local3 = f14_arg0.leftShoulder
		end
	end
	f14_local2 = f14_arg0.leftTrigger
end

local f0_local5 = function ( f13_arg0, f13_arg1 )
	assert( 0 < #f13_arg0 )
	for f13_local3, f13_local4 in ipairs( f13_arg0 ) do
		if f13_arg1 == f13_local4 then
			return f13_local3
		end
	end
	assert( false, "Entry not found" )
end

local f0_local6 = function ( f12_arg0, f12_arg1, f12_arg2 )
	local f12_local0 = #f0_local0 - 1
	local f12_local1 = OPTIONS.GetCurrentCSVButtonLayouts( f12_arg0.isBR )
	for f12_local2 = 0, f12_local0, 1 do
		local f12_local5 = CSV.ReadRow( f12_local1, f12_local2 )
		local f12_local6 = f0_local0[f12_local2 + 1]
		local f12_local7 = f0_local0( f12_local5, f12_arg2 )
		f12_local6.ref:SetValue( f12_arg1, f12_local7.cfg )
		f12_local6.name:SetValue( f12_arg1, Engine.CBBHFCGDIC( f12_local7.layoutName ) )
		f12_local6.leftTrigger:SetValue( f12_arg1, Engine.CBBHFCGDIC( f12_local7.leftTrigger ) )
		f12_local6.rightTrigger:SetValue( f12_arg1, Engine.CBBHFCGDIC( f12_local7.rightTrigger ) )
		f12_local6.leftShoulder:SetValue( f12_arg1, Engine.CBBHFCGDIC( f12_local7.leftShoulder ) )
		f12_local6.rightShoulder:SetValue( f12_arg1, Engine.CBBHFCGDIC( f12_local7.rightShoulder ) )
	end
end

LUI.AddButtonLayoutLogic = function ( f1_arg0, f1_arg1, f1_arg2 )
	f0_local0 = {}
	WipeControllerModelsAtPath( f0_local0 )
	local f1_local0 = StringTable.DIFCHIGDFB( CSV.stickLayouts.file, CSV.stickLayouts.cols.cfg, Engine.BECCFCBIAA( "gpadSticksConfig", f1_arg1 ), CSV.stickLayouts.cols.swapStickButtons ) == "1"
	local f1_local1, f1_local2, f1_local3, f1_local4 = nil
	f1_arg0.isBR = f1_arg2.isBR
	if f1_arg0.isBR then
		f1_local1 = Engine.BECCFCBIAA( "gpadBRButtonsConfig", f1_arg1 )
		f1_local2 = CSV.brButtonLayouts
		f1_local3 = OPTIONS.brButtonLayoutStrings
		f1_local4 = OPTIONS.GetBRButtonLayoutLabels
	else
		f1_local1 = Engine.BECCFCBIAA( "gpadButtonsConfig", f1_arg1 )
		f1_local2 = CSV.buttonLayouts
		f1_local3 = OPTIONS.buttonLayoutStrings
		f1_local4 = OPTIONS.GetButtonLayoutLabels
	end
	local f1_local5 = string.match( f1_local1, "_alt$" ) ~= nil
	local f1_local6 = function ( f9_arg0, f9_arg1 )
		local f9_local0 = CSV.ReadRow( f1_arg0, f9_arg0 )
		local f9_local1 = CSV.ReadRow( f1_arg0, 0 )
		local f9_local2 = f1_arg0 .. "." .. f9_arg0
		local f9_local3 = Engine.CAADCDEEIA()
		local f9_local4 = Engine.EAIICIFIFA()
		local f9_local5 = f9_local0.select
		if f9_local3 then
			f9_local5 = f9_local0.selectSP
		elseif f9_local4 then
			f9_local5 = f9_local0.selectCP
		end
		local f9_local6 = f9_local0.leftStick
		local f9_local7 = f9_local0.rightStick
		if f1_arg0 then
			f9_local6 = f9_local0.rightStick
			f9_local7 = f9_local0.leftStick
		end
		local f9_local8 = f1_arg0( f9_local0, f1_arg0 )
		local f9_local9 = f1_arg0
		local f9_local10 = f1_arg0
		local f9_local11 = function ( f10_arg0 )
			return function ()
				local f11_local0 = LUI.FlowManager.GetVisibleMenu()
				if f11_local0 and (f11_local0.id == "ButtonLayout" or f11_local0.id == "BRButtonLayout") then
					return nil
				else
					local f11_local1 = f10_arg0 and f10_arg0 .. "SP" or f10_arg0
					local f11_local2 = f10_arg0( f10_arg0, f10_arg0 )
					if f10_arg0[f11_local1] == f11_local2[f10_arg0] then
						return f10_arg0
					else
						return f10_arg0
					end
				end
			end
			
		end
		
		local f9_local12 = LUI.DataSourceInControllerModel.new( f9_local2 .. ".leftTrigger", Engine.CBBHFCGDIC( f9_local8.leftTrigger ) )
		local f9_local13 = LUI.DataSourceInControllerModel.new( f9_local2 .. ".leftShoulder", Engine.CBBHFCGDIC( f9_local8.leftShoulder ) )
		local f9_local14 = LUI.DataSourceInControllerModel.new( f9_local2 .. ".rightTrigger", Engine.CBBHFCGDIC( f9_local8.rightTrigger ) )
		local f9_local15 = LUI.DataSourceInControllerModel.new( f9_local2 .. ".rightShoulder", Engine.CBBHFCGDIC( f9_local8.rightShoulder ) )
		local f9_local16 = {
			ref = LUI.DataSourceInControllerModel.new( f9_local2 .. ".ref", f9_local8.cfg ),
			name = LUI.DataSourceInControllerModel.new( f9_local2 .. ".name", Engine.CBBHFCGDIC( f9_local8.layoutName ) ),
			leftStick = LUI.DataSourceInControllerModel.new( f9_local2 .. ".leftStick", Engine.CBBHFCGDIC( f9_local6 ) )
		}
		local f9_local17 = LUI.DataSourceInControllerModel.new
		local f9_local18 = f9_local2 .. ".leftStickColor"
		local f9_local19
		if f9_local1.leftStick == f9_local0.leftStick and not f9_local9 then
			f9_local19 = f9_local9
		else
			f9_local19 = f9_local10
		end
		f9_local16.leftStickColor = f9_local17( f9_local18, f9_local19 )
		f9_local16.rightStick = LUI.DataSourceInControllerModel.new( f9_local2 .. ".rightStick", Engine.CBBHFCGDIC( f9_local7 ) )
		f9_local17 = LUI.DataSourceInControllerModel.new
		f9_local18 = f9_local2 .. ".rightStickColor"
		if f9_local1.rightStick == f9_local0.rightStick and not f9_local9 then
			f9_local19 = f9_local9
		else
			f9_local19 = f9_local10
		end
		f9_local16.rightStickColor = f9_local17( f9_local18, f9_local19 )
		f9_local16.leftTrigger = f9_local12
		f9_local16.leftTriggerColor = f9_local12:Filter( "leftTriggerColor", f9_local11( "leftTrigger" ) )
		f9_local16.rightTrigger = f9_local14
		f9_local16.rightTriggerColor = f9_local14:Filter( "rightTriggerColor", f9_local11( "rightTrigger" ) )
		f9_local16.leftShoulder = f9_local13
		f9_local16.leftShoulderColor = f9_local13:Filter( "leftShoulderColor", f9_local11( "leftShoulder" ) )
		f9_local16.rightShoulder = f9_local15
		f9_local16.rightShoulderColor = f9_local15:Filter( "rightShoulderColor", f9_local11( "rightShoulder" ) )
		f9_local16.primary = LUI.DataSourceInControllerModel.new( f9_local2 .. ".primary", Engine.CBBHFCGDIC( f9_local0.primary ) )
		f9_local17 = LUI.DataSourceInControllerModel.new
		f9_local18 = f9_local2 .. ".primaryColor"
		if f9_local1.primary == f9_local0.primary and not f9_local9 then
			f9_local19 = f9_local9
		else
			f9_local19 = f9_local10
		end
		f9_local16.primaryColor = f9_local17( f9_local18, f9_local19 )
		f9_local16.secondary = LUI.DataSourceInControllerModel.new( f9_local2 .. ".secondary", Engine.CBBHFCGDIC( f9_local0.secondary ) )
		f9_local17 = LUI.DataSourceInControllerModel.new
		f9_local18 = f9_local2 .. ".secondaryColor"
		if f9_local1.secondary == f9_local0.secondary and not f9_local9 then
			f9_local19 = f9_local9
		else
			f9_local19 = f9_local10
		end
		f9_local16.secondaryColor = f9_local17( f9_local18, f9_local19 )
		f9_local16.altOne = LUI.DataSourceInControllerModel.new( f9_local2 .. ".altOne", Engine.CBBHFCGDIC( f9_local0.altOne ) )
		f9_local17 = LUI.DataSourceInControllerModel.new
		f9_local18 = f9_local2 .. ".altOneColor"
		if f9_local1.altOne == f9_local0.altOne and not f9_local9 then
			f9_local19 = f9_local9
		else
			f9_local19 = f9_local10
		end
		f9_local16.altOneColor = f9_local17( f9_local18, f9_local19 )
		f9_local16.altTwo = LUI.DataSourceInControllerModel.new( f9_local2 .. ".altTwo", Engine.CBBHFCGDIC( f9_local0.altTwo ) )
		f9_local17 = LUI.DataSourceInControllerModel.new
		f9_local18 = f9_local2 .. ".altTwoColor"
		if f9_local1.altTwo == f9_local0.altTwo and not f9_local9 then
			f9_local19 = f9_local9
		else
			f9_local19 = f9_local10
		end
		f9_local16.altTwoColor = f9_local17( f9_local18, f9_local19 )
		f9_local16.dPad = LUI.DataSourceInControllerModel.new( f9_local2 .. ".dPad", Engine.CBBHFCGDIC( f9_local0.dPad ) )
		f9_local17 = LUI.DataSourceInControllerModel.new
		f9_local18 = f9_local2 .. ".dPadColor"
		if f9_local1.dPad == f9_local0.dPad and not f9_local9 then
			f9_local19 = f9_local9
		else
			f9_local19 = f9_local10
		end
		f9_local16.dPadColor = f9_local17( f9_local18, f9_local19 )
		f9_local16.dPadUp = LUI.DataSourceInControllerModel.new( f9_local2 .. ".dPadUp", Engine.CBBHFCGDIC( f9_local0.dPadUp ) )
		f9_local17 = LUI.DataSourceInControllerModel.new
		f9_local18 = f9_local2 .. ".dPadUpColor"
		if f9_local1.dPadUp == f9_local0.dPadUp and not f9_local9 then
			f9_local19 = f9_local9
		else
			f9_local19 = f9_local10
		end
		f9_local16.dPadUpColor = f9_local17( f9_local18, f9_local19 )
		f9_local16.dPadRight = LUI.DataSourceInControllerModel.new( f9_local2 .. ".dPadRight", Engine.CBBHFCGDIC( f9_local0.dPadRight ) )
		f9_local17 = LUI.DataSourceInControllerModel.new
		f9_local18 = f9_local2 .. ".dPadRightColor"
		if f9_local1.dPadRight == f9_local0.dPadRight and not f9_local9 then
			f9_local19 = f9_local9
		else
			f9_local19 = f9_local10
		end
		f9_local16.dPadRightColor = f9_local17( f9_local18, f9_local19 )
		f9_local16.dPadDown = LUI.DataSourceInControllerModel.new( f9_local2 .. ".dPadDown", Engine.CBBHFCGDIC( f9_local0.dPadDown ) )
		f9_local17 = LUI.DataSourceInControllerModel.new
		f9_local18 = f9_local2 .. ".dPadDownColor"
		if f9_local1.dPadDown == f9_local0.dPadDown and not f9_local9 then
			f9_local19 = f9_local9
		else
			f9_local19 = f9_local10
		end
		f9_local16.dPadDownColor = f9_local17( f9_local18, f9_local19 )
		f9_local16.dPadLeft = LUI.DataSourceInControllerModel.new( f9_local2 .. ".dPadLeft", Engine.CBBHFCGDIC( f9_local0.dPadLeft ) )
		f9_local17 = LUI.DataSourceInControllerModel.new
		f9_local18 = f9_local2 .. ".dPadLeftColor"
		if f9_local1.dPadLeft == f9_local0.dPadLeft and not f9_local9 then
			f9_local19 = f9_local9
		else
			f9_local19 = f9_local10
		end
		f9_local16.dPadLeftColor = f9_local17( f9_local18, f9_local19 )
		f9_local17 = LUI.DataSourceInControllerModel.new
		f9_local18 = f9_local2 .. ".start"
		if f9_local4 then
			f9_local19 = Engine.CBBHFCGDIC( f9_local0.startCP )
			if not f9_local19 then
			
			else
				f9_local16.start = f9_local17( f9_local18, f9_local19 )
				f9_local17 = LUI.DataSourceInControllerModel.new
				f9_local18 = f9_local2 .. ".startColor"
				if f9_local1.start == f9_local0.start and not f9_local9 then
					f9_local19 = f9_local9
				else
					f9_local19 = f9_local10
				end
				f9_local16.startColor = f9_local17( f9_local18, f9_local19 )
				f9_local16.select = LUI.DataSourceInControllerModel.new( f9_local2 .. ".select", Engine.CBBHFCGDIC( f9_local5 ) )
				f9_local17 = LUI.DataSourceInControllerModel.new
				f9_local18 = f9_local2 .. ".selectColor"
				if f9_local1.select == f9_local0.select and not f9_local9 then
					f9_local19 = f9_local9
				else
					f9_local19 = f9_local10
				end
				f9_local16.selectColor = f9_local17( f9_local18, f9_local19 )
				return f9_local16
			end
		end
		f9_local19 = Engine.CBBHFCGDIC( f9_local0.start )
	end
	
	local f1_local7 = function ( f8_arg0, f8_arg1 )
		local f8_local0 = f1_arg0[f8_arg0]
		f1_arg0:SetDataSource( f8_local0, f8_arg1 )
		Engine.CBCIHEGADA( f8_local0.ref:GetValue( f8_arg1 ), f8_arg1, f1_arg0.isBR )
	end
	
	local f1_local8 = function ( f7_arg0, f7_arg1 )
		f1_arg0:SetDataSource( f1_arg0[f7_arg0], f7_arg1 )
	end
	
	local f1_local9 = nil
	local f1_local10 = #f1_local4() - 1
	for f1_local11 = 0, f1_local10, 1 do
		table.insert( f0_local0, f1_local6( f1_local11, f1_arg1 ) )
	end
	if string.match( f1_local1, "_alt$" ) then
		f1_local1 = string.gsub( f1_local1, "_alt", "" )
	end
	local f1_local11 = f1_local3[f1_local1]
	if f1_local11 ~= nil and f1_local11 ~= "" then
		f1_arg0:SetDataSource( f0_local0[f0_local0( f1_local4(), Engine.CBBHFCGDIC( f1_local11 ) )], f1_arg1 )
	end
	f1_arg0:SetAlpha( 0 )
	f1_arg0:registerEventHandler( "buttonLayout_over", function ( element, event )
		f1_arg0:SetAlpha( 1 )
	end )
	f1_arg0:registerEventHandler( "buttonLayout_up", function ( element, event )
		f1_arg0:SetAlpha( 0 )
	end )
	f1_arg0:registerEventHandler( "buttonLayout_updated", function ( element, event )
		f1_arg0( event.index, event.controller )
	end )
	f1_arg0:registerEventHandler( "buttonLayout_updatedVisual", function ( element, event )
		f1_arg0( event.index, event.controller )
	end )
	f1_arg0:registerEventHandler( "buttonLayout_triggerUpdate", function ( element, event )
		f1_arg0 = f1_arg0
		if event.resetFlip then
			f1_arg0 = false
		end
		f1_arg0( f1_arg0, f1_arg0, f1_arg0 )
	end )
end

