-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:49
module( ..., package.seeall )
require( "ui.generated.widgets.dynamiclist" )
require( "ui.generated.widgets.buttonhelperbar" )
require( "ui.generated.widgets.buttonpromptcontainerhorizontal" )
require( "ui.generated.widgets.genericeditbox" )
require( "ui.generated.widgets.globalpanelsubheader" )
require( "ui.generated.widgets.scrollbar.verticalminimalscrollbar" )
local f0_local0 = ButtonMap.button_alt2
local f0_local1 = "button_alt2"
local f0_local2 = 45 * _1080p
local f0_local3 = 35 * _1080p
local f0_local4 = 56 * _1080p
local f0_local5 = 40 * _1080p
local f0_local6 = function ( f15_arg0, f15_arg1, f15_arg2, f15_arg3 )
	if f15_arg0.isSearch or f15_arg0.isSearch ~= f15_arg1 then
		if f15_arg1 and f15_arg0.isSearch ~= f15_arg1 then
			local f15_local0 = f15_arg0.DynamicList:GetAnchorsAndPosition()
			f15_arg0.DynamicList:SetBottom( f15_local0.bottom - f0_local0, 0 )
			f15_arg0.Scrollbar:SetBottom( f15_local0.bottom - f0_local0, 0 )
			f15_arg0.DynamicList._elementPool._pool = {}
		elseif f15_arg1 == false and f15_arg0.isSearch and f15_arg0.isSearch ~= f15_arg1 then
			local f15_local0 = f15_arg0.DynamicList:GetAnchorsAndPosition()
			f15_arg0.DynamicList:SetBottom( f15_local0.bottom + f0_local0, 0 )
			f15_arg0.Scrollbar:SetBottom( f15_local0.bottom + f0_local0, 0 )
			f15_arg0.DynamicList._elementPool._pool = {}
			if f15_arg0.Path:GetVisibility() ~= LUI.Visibility.Hidden then
				f15_arg0.Path:SetVisibility( LUI.Visibility.Hidden )
			end
		end
		f15_arg0.isSearch = f15_arg1
		f15_arg0.DynamicList:RemoveAllWidgets( true )
		if f15_arg0.isSearch then
			SEARCH.AddListWidget( f15_arg0, "Header", {
				text = Engine[0xED84C33EC5F01EA]( 0x57395A17562E874 ),
				height = f0_local0
			}, false )
		end
		local f15_local0 = ipairs
		local f15_local1
		if f15_arg1 and not f15_arg2 then
			f15_local1 = f15_arg2
		else
			f15_local1 = f15_arg0._panelButtons
		end
		for f15_local8, f15_local9 in f15_local0( f15_local1 ) do
			if f15_arg0._panelButtons and f15_local9.isHeader then
				SEARCH.AddListWidget( f15_arg0, "Header", {
					text = f15_local9.name,
					height = f0_local0
				}, false )
			end
			local f15_local3 = SEARCH.AddListWidget
			local f15_local4 = f15_arg0
			local f15_local5 = "Button"
			local f15_local6 = {
				buttonData = f15_local9
			}
			local f15_local7
			if f15_arg1 then
				f15_local7 = f0_local0
				if not f15_local7 then
				
				else
					f15_local6.height = f15_local7
					f15_local3( f15_local4, f15_local5, f15_local6 )
				end
			end
			f15_local7 = f0_local0
		end
		if f15_arg0.isSearch and f15_arg3 and 0 < #f15_arg3 then
			SEARCH.AddListWidget( f15_arg0, "Header", {
				text = Engine[0xED84C33EC5F01EA]( 0x69F8E9A6C59962C ),
				height = f0_local0
			}, false )
			for f15_local8, f15_local9 in ipairs( f15_arg3 ) do
				SEARCH.AddListWidget( f15_arg0, "Button", {
					buttonData = f15_local9,
					height = f0_local0
				} )
			end
		end
		f15_arg0.DynamicList:RefreshGrid()
	end
end

local f0_local7 = function ( f14_arg0, f14_arg1, f14_arg2, f14_arg3 )
	if f14_arg2 then
		if not (not f14_arg1 or 0 >= #f14_arg1) or f14_arg3 then
			f14_arg0.OptionsHeader.MenuPrompt:SetVisible( false )
		else
			f14_arg0.OptionsHeader.MenuPrompt:SetVisible( true )
		end
	else
		f14_arg0.OptionsHeader.MenuPrompt:SetVisible( true )
	end
end

local f0_local8 = function ( f12_arg0, f12_arg1, f12_arg2, f12_arg3 )
	GLOBAL_PANEL.HandleMenuChange( f12_arg1, function ( f13_arg0, f13_arg1 )
		if f13_arg1.isPatchNotes then
			local f13_local0 = LUI.WebViewManager.Instance()
			f13_local0:OpenPatchNote()
		elseif f13_arg1.isSearch then
			OPTIONS.GoToSetting( f13_arg1.buttonData, f13_arg0, f13_arg1.buttonData.path )
		else
			OPTIONS.ButtonAction( f13_arg0, f13_arg1.buttonData, f13_arg1.index )
		end
	end, {
		isPatchNotes = f12_arg2.id == "patch_notes",
		isSearch = f12_arg0.isSearch,
		buttonData = f12_arg2,
		index = f12_arg3
	} )
end

local f0_local9 = function ( f2_arg0, f2_arg1, f2_arg2 )
	f2_arg0._controllerIndex = f2_arg1
	f2_arg0.isSearch = nil
	f2_arg0.ButtonAction = f0_local0
	f2_arg0._panelButtons, f2_arg0.mapData = OPTIONS.GetSettingsTabsData( f2_arg1 )
	if LUI.WebViewManager.PatchNoteEnabled() and CONDITIONS.InFrontend() then
		table.insert( f2_arg0._panelButtons, #f2_arg0._panelButtons, {
			id = "more_header",
			isHeader = true,
			name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0x47399967890F857 ) )
		} )
		table.insert( f2_arg0._panelButtons, #f2_arg0._panelButtons, {
			id = "patch_notes",
			icon = "icon_section_patch_notes",
			name = ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xC04677754961C15 ) )
		} )
	end
	f2_arg0.UpdateSearchPanel = f0_local0
	f2_arg0.UpdatePromptVisibility = f0_local0
	local f2_local0 = function ()
		f2_arg0:UpdateSearchPanel( false, nil, nil )
		f2_arg0.SearchBox:SetTextEditActive( true )
	end
	
	f2_arg0:AddGamepadEventCallback( "button_alt2", function ( f10_arg0, f10_arg1 )
		f10_arg0:UpdateSearchPanel( false, nil, nil )
	end )
	SEARCH.SetupEditBox( f2_arg0, f2_arg0.SearchBox, f2_arg1, {
		trailingCallback = f2_local0
	} )
	SEARCH.SetupEditBoxFocus( f2_arg0, f2_arg0.SearchBox, f2_arg0.DynamicList )
	f2_arg0.SearchBox:processEvent( {
		name = "menu_create"
	} )
	f2_arg0.SearchBox:SetText( Engine[0xED84C33EC5F01EA]( 0x3041BB7B9D30EB5 ) )
	f2_arg0.SearchBox:AddTooltipData( f2_arg1, {
		tooltipDescription = Engine[0xED84C33EC5F01EA]( 0x73F5876ED4273DF ),
		orientation = LUI.ORIENTATION.down
	} )
	SEARCH.SetupSearchList( f2_arg0, f2_arg0.DynamicList, f2_arg1 )
	f2_arg0:UpdateSearchPanel( false, nil, nil )
	f2_arg0.OptionsHeader:SetMenuPrompt( Engine[0xED84C33EC5F01EA]( 0x270F6246BCB0845 ), function ()
		if CONDITIONS.IsSplitScreenMenuInUse() then
			return 
		elseif Engine[0x12586A3F4FB490E]() and GLOBAL_PANEL.IsOpen() then
			GLOBAL_PANEL.CloseGlobalPanelNow()
		end
		LUI.FlowManager.RequestAddMenu( "BootAccessibilitySetting", true, f2_arg0, false )
	end, f0_local0, true )
	f2_arg0.ButtonHelperBar.ButtonHelperText:PushButtonPrompt( {
		side = "left",
		priority = 0,
		gamepad_only = true,
		button_ref = "button_start",
		helper_text = Engine[0xED84C33EC5F01EA]( 0xF2F6A0A4A145692 ),
		container = f2_arg0.ButtonPromptContainer
	} )
	if CONDITIONS.IsSplitscreen() then
		f2_arg0.DynamicList:SetAnchorsAndPosition( 0.5, 0.5, 0, 0, _1080p * -256, _1080p * 256, _1080p * 260, _1080p * -118 )
		f2_arg0.Scrollbar:SetAnchorsAndPosition( 0.5, 0.5, 0, 0, _1080p * 294, _1080p * 310, _1080p * 260, _1080p * -150 )
		f2_arg0.Path:SetAnchorsAndPosition( 0.5, 0.5, 1, 0, _1080p * -210, _1080p * 256, _1080p * -156, _1080p * -132 )
		f2_arg0:SubscribeToModel( DataSources.inGame.numberOfSplitScreenPlayersInMenus:GetModel(), function ( f8_arg0 )
			if CONDITIONS.IsSplitScreenMenuInUse() then
				f2_arg0.OptionsHeader:TogglePrompt( false )
			else
				f2_arg0.OptionsHeader:SetMenuPrompt( Engine[0xED84C33EC5F01EA]( 0x270F6246BCB0845 ), f2_arg0, f2_arg0, true )
			end
		end )
	else
		f2_arg0.DynamicList:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -256, _1080p * 256, _1080p * 258, _1080p * 961 )
		f2_arg0.Scrollbar:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * 294, _1080p * 310, _1080p * 258, _1080p * 930 )
		f2_arg0.Path:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -210, _1080p * 256, _1080p * 924, _1080p * 948 )
	end
	f2_arg0:registerEventHandler( "update_path", function ( element, event )
		if element.Path then
			if event.path and event.path ~= "" then
				element.Path:setText( event.path )
				if element.Path:GetVisibility() ~= LUI.Visibility.Visible then
					element.Path:SetVisibility( LUI.Visibility.Visible )
				end
			elseif element.Path:GetVisibility() ~= LUI.Visibility.Hidden then
				element.Path:SetVisibility( LUI.Visibility.Hidden )
			end
		end
	end )
	local f2_local1 = f2_arg0:Wait( 1 )
	f2_local1.onComplete = function ()
		f2_arg0.DynamicList.Grid:UpdateScrolling()
		f2_arg0.Scrollbar:SetAlpha( 1, 0 )
	end
	
	f2_arg0.SearchBox:addEventHandler( "lose_focus", function ( f5_arg0, f5_arg1 )
		if LUI.IsLastInputGamepad( f2_arg0 ) and f2_arg0.DynamicList:GetNumChildren() <= 1 then
			f2_arg0:UpdateSearchPanel( false, nil, nil )
		end
		f2_arg0:UpdatePromptVisibility( nil, LUI.IsLastInputGamepad( f2_arg0._controllerIndex ), false )
	end )
	f2_arg0.SearchBox:addEventHandler( "gain_focus", function ( f4_arg0, f4_arg1 )
		if not f4_arg0.Text.isDefault then
			f2_arg0:UpdatePromptVisibility( nil, LUI.IsLastInputGamepad( f2_arg0._controllerIndex ), true )
		end
	end )
	f2_arg0.SearchBox:SetTextEditButtonActionCallback( function ( f3_arg0, f3_arg1 )
		f2_arg0:UpdatePromptVisibility( nil, LUI.IsLastInputGamepad( f2_arg0._controllerIndex ), true )
	end )
end

function GlobalPanelOptions( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 620 * _1080p, 0, 1080 * _1080p )
	self.id = "GlobalPanelOptions"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local Background = nil
	
	Background = LUI.UIImage.new()
	Background.id = "Background"
	Background:SetRGBFromInt( 0, 0 )
	Background:SetAlpha( 0.4, 0 )
	Background:Setup9SliceImage( _1080p * 20, _1080p * 20, 0.3, 0.3 )
	Background:SetAnchorsAndPosition( 0.5, 0.5, 0, 0, _1080p * -309, _1080p * 309, _1080p * 106, 0 )
	self:addElement( Background )
	self.Background = Background
	
	local SubheaderBacker = nil
	
	SubheaderBacker = LUI.UIImage.new()
	SubheaderBacker.id = "SubheaderBacker"
	SubheaderBacker:SetRGBFromTable( SWATCHES.IW9StyleGuide.styleGuideCool05, 0 )
	SubheaderBacker:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1.45, _1080p * 619.45, _1080p * 106, _1080p * 146 )
	self:addElement( SubheaderBacker )
	self.SubheaderBacker = SubheaderBacker
	
	local SubHeaderBackerDividerLine = nil
	
	SubHeaderBackerDividerLine = LUI.UIImage.new()
	SubHeaderBackerDividerLine.id = "SubHeaderBackerDividerLine"
	SubHeaderBackerDividerLine:SetRGBFromTable( SWATCHES.IW9StyleGuide.styleGuideCool01, 0 )
	SubHeaderBackerDividerLine:SetAlpha( 0.15, 0 )
	SubHeaderBackerDividerLine:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 1, _1080p * 619, _1080p * 146, _1080p * 147 )
	self:addElement( SubHeaderBackerDividerLine )
	self.SubHeaderBackerDividerLine = SubHeaderBackerDividerLine
	
	local DynamicList = nil
	
	DynamicList = MenuBuilder.BuildRegisteredType( "DynamicList", {
		controllerIndex = f1_local1
	} )
	DynamicList.id = "DynamicList"
	DynamicList:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -256, _1080p * 256, _1080p * 258, _1080p * 961 )
	self:addElement( DynamicList )
	self.DynamicList = DynamicList
	
	local Path = nil
	
	Path = LUI.UIStyledText.new()
	Path.id = "Path"
	Path:SetVisible( false )
	Path:SetRGBFromTable( SWATCHES.IW9StyleGuide.styleGuideCool02, 0 )
	Path:setText( ToUpperCase( "" ), 0 )
	Path:SetFont( FONTS.GetFont( FONTS.PrimaryRegular.File ) )
	Path:SetFontSize( 18 * _PT )
	Path:SetMinFontSize( 28 * _PT )
	Path:SetWordWrap( false )
	Path:SetAlignment( LUI.Alignment.Right )
	Path:SetAutoScroll( AUTOSCROLL.enabled )
	Path:SetAutoScrollStyle( LUI.UIStyledText.AutoScrollStyle.ScrollH )
	Path:SetStartupDelay( 1000 )
	Path:SetLineHoldTime( 400 )
	Path:SetAnimMoveTime( 150 )
	Path:SetAnimMoveSpeed( 50 )
	Path:SetEndDelay( 1000 )
	Path:SetCrossfadeTime( 400 )
	Path:SetFadeInTime( 300 )
	Path:SetFadeOutTime( 300 )
	Path:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -210, _1080p * 256, _1080p * 924, _1080p * 948 )
	self:addElement( Path )
	self.Path = Path
	
	local ButtonHelperBar = nil
	
	ButtonHelperBar = MenuBuilder.BuildRegisteredType( "ButtonHelperBar", {
		controllerIndex = f1_local1
	} )
	ButtonHelperBar.id = "ButtonHelperBar"
	ButtonHelperBar:SetAlpha( 0, 0 )
	ButtonHelperBar:SetAnchorsAndPosition( 0, 0, 1, 0, _1080p * 22, _1080p * -22, _1080p * -82, _1080p * -22 )
	self:addElement( ButtonHelperBar )
	self.ButtonHelperBar = ButtonHelperBar
	
	local ButtonPromptContainer = nil
	ButtonPromptContainer = MenuBuilder.BuildRegisteredType( "ButtonPromptContainerHorizontal", {
		controllerIndex = f1_local1
	} )
	ButtonPromptContainer.id = "ButtonPromptContainer"
	if CONDITIONS.AlwaysFalse() then
		ButtonPromptContainer.Label:setText( "ButtonPrompt", 0 )
	end
	ButtonPromptContainer:SetAnchorsAndPosition( 0, 1, 1, 0, _1080p * 22, _1080p * 122, _1080p * -53, _1080p * -22 )
	self:addElement( ButtonPromptContainer )
	self.ButtonPromptContainer = ButtonPromptContainer
	
	local SearchBox = nil
	
	SearchBox = MenuBuilder.BuildRegisteredType( "GenericEditBox", {
		controllerIndex = f1_local1
	} )
	SearchBox.id = "SearchBox"
	SearchBox.Text:SetLeft( _1080p * 51, 0 )
	SearchBox.Text:setText( Engine[0xED84C33EC5F01EA]( 0x3041BB7B9D30EB5 ), 0 )
	SearchBox:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -258, _1080p * 258, _1080p * 187, _1080p * 242 )
	self:addElement( SearchBox )
	self.SearchBox = SearchBox
	
	local OptionsHeader = nil
	
	OptionsHeader = MenuBuilder.BuildRegisteredType( "GlobalPanelSubHeader", {
		controllerIndex = f1_local1
	} )
	OptionsHeader.id = "OptionsHeader"
	OptionsHeader.Text:setText( Engine[0xED84C33EC5F01EA]( 0xDE7B3C94B0B0F67 ), 0 )
	OptionsHeader:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * -256, _1080p * 256, _1080p * 111, _1080p * 143 )
	self:addElement( OptionsHeader )
	self.OptionsHeader = OptionsHeader
	
	local Scrollbar = nil
	
	Scrollbar = MenuBuilder.BuildRegisteredType( "VerticalMinimalScrollbar", {
		controllerIndex = f1_local1
	} )
	Scrollbar.id = "Scrollbar"
	Scrollbar:SetAlpha( 0, 0 )
	Scrollbar:SetAnchorsAndPosition( 0.5, 0.5, 0, 1, _1080p * 294, _1080p * 310, _1080p * 257.5, _1080p * 930.5 )
	self:addElement( Scrollbar )
	self.Scrollbar = Scrollbar
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "GlobalPanelOptions", GlobalPanelOptions )
LockTable( _M )
