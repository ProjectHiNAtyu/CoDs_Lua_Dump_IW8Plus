-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
MLG = MLG or {}
MLG.GetRulesVersionNumber = function ()
	local f20_local0 = MatchRules.BIJEDCBCBH( "mlgVersion" )
	if f20_local0 == nil or f20_local0 == "" then
		f20_local0 = "0.0.0"
	end
	return Engine.JCBDICCAH( f20_local0 )
end

MLG.IsFeatureAvailable = function ()
	local f19_local0 = Dvar.IBEGCHEFE( "LPSPMQSNPQ" )
	if not f19_local0 then
		local f19_local1 = IsPrivateMatch
		if f19_local1 then
			f19_local0 = f19_local1
		else
			f19_local0 = IsPrivateMatch()
		end
	end
	if not f19_local0 then
		f19_local0 = Dvar.IBEGCHEFE( "MTMMPLSRNL" )
	end
	if f19_local0 then
		f19_local0 = not Engine.EAIICIFIFA()
	end
	if f19_local0 then
		f19_local0 = Dvar.IBEGCHEFE( "LTSMQMMQRK" )
	end
	return f19_local0
end

MLG.CanIAdjustMLGSettings = function ()
	if not MLG.IsFeatureAvailable() then
		return false
	end
	local f18_local0 = Dvar.IBEGCHEFE( "LPSPMQSNPQ" )
	if not f18_local0 then
		f18_local0 = Lobby.DFFFFJHCEH()
	end
	return f18_local0
end

MLG.AreMLGRulesEnabled = function ()
	if not MLG.IsFeatureAvailable() then
		return false
	end
	local f17_local0 = Dvar.IBEGCHEFE( "LPSPMQSNPQ" )
	if Dvar.IBEGCHEFE( "LOMTKQTRTM" ) == nil then
		Engine.EBIDFIDHIE( "set LOMTKQTRTM 0" )
	end
	return Lobby.DFHGBJJAGC()
end

MLG.SetUsingMLGRules = function ( f16_arg0 )
	Dvar.DHEGHJJJHI( "LOMTKQTRTM", f16_arg0 )
	Lobby.CIIBDIGFFC( f16_arg0 )
	if (1 < Engine.JEDFGECDJ()) or CoD.IsUsingAspectRatio( 1.3333333333333333 ) then
		for f16_local0 = 0, Engine.DCJGJDDEHE() - 1, 1 do
			LobbyMember.BABJJDBHCH( false, f16_local0 )
		end
	end
end

MLG.ToggleMLGRules = function ( f15_arg0 )
	if MLG.CanIAdjustMLGSettings() then
		if not MLG.AreMLGRulesEnabled() then
			if StringTable.DIFCHIGDFB( CSV.gameTypesTable.file, CSV.gameTypesTable.cols.ref, Dvar.DHEEJCCJBH( "MOLPOSLOMO" ), CSV.gameTypesTable.cols.MLG ) == "1" and MatchRules.DHIADABBII() then
				MLG.SetUsingMLGRules( true )
				MatchRules.BIHEJBBCDH()
			elseif not Engine.CBBGBGBFJF( f15_arg0 ) then
				LUI.FlowManager.RequestPopupMenu( self, "mlg_error_no_rules_available_offline", false, f15_arg0, false )
			else
				LUI.FlowManager.RequestPopupMenu( self, "mlg_error_no_rules_available", false, f15_arg0, false )
			end
		else
			MLG.SetUsingMLGRules( false )
			MatchRules.BCECADEHDA()
		end
	end
end

MLG.Refresh = function ( f14_arg0 )
	local f14_local0 = MLG.AreMLGRulesEnabled()
	f14_arg0.properties = f14_arg0.properties or {}
	if f14_arg0.properties.cacheMLGenabled ~= f14_local0 then
		local f14_local1 = "mlg_"
		local f14_local2
		if f14_local0 then
			f14_local2 = "enabled"
		else
			f14_local2 = "disabled"
		end
		f14_arg0:dispatchEventToRoot( {
			immediate = true,
			name = f14_local1 .. f14_local2
		} )
		MLG.SetButtonHelper( f14_arg0, f14_local0 )
		f14_arg0.properties.cacheMLGenabled = f14_local0
	end
end

MLG.SetButtonHelper = function ( f13_arg0, f13_arg1 )
	local f13_local0 = ""
	if MLG.CanIAdjustMLGSettings() then
		if f13_arg1 then
			f13_local0 = Engine.CBBHFCGDIC( "PATCH_MENU/DISABLE_MLG_RULES" )
		else
			f13_local0 = Engine.CBBHFCGDIC( "PATCH_MENU/ENABLE_MLG_RULES" )
		end
	end
	f13_arg0:processEvent( {
		clickable = true,
		side = "right",
		name = "add_button_helper_text",
		button_ref = "button_start",
		helper_text = f13_local0
	} )
end

MLG.Toggle = function ( f12_arg0, f12_arg1 )
	if MLG.CanIAdjustMLGSettings() then
		MLG.ToggleMLGRules( f12_arg1.controller )
	end
	MLG.Refresh( f12_arg0 )
end

MLG.Hide = function ( f11_arg0 )
	f11_arg0:processEvent( {
		name = "mlg_disabled"
	} )
	f11_arg0:processEvent( {
		button_ref = "button_start",
		name = "add_button_helper_text",
		helper_text = nil,
		side = "right"
	} )
end

MLG.ShoutcasterProfileVarValue = function ( f10_arg0, f10_arg1 )
	local f10_local0 = MLG.DCCIBJGEAG( f10_arg0 )
	if f10_local0 ~= nil and f10_local0[f10_arg1] ~= nil then
		return f10_local0[f10_arg1]:get()
	else
		return nil
	end
end

MLG.ShoutcasterProfileVarBool = function ( f9_arg0, f9_arg1 )
	return MLG.ShoutcasterProfileVarValue( f9_arg0, f9_arg1 ) == 1
end

MLG.SetShoutcasterProfileVarValue = function ( f8_arg0, f8_arg1, f8_arg2 )
	local f8_local0 = MLG.DCCIBJGEAG( f8_arg0 )
	if f8_local0 ~= nil and f8_local0[f8_arg1] ~= nil then
		f8_local0[f8_arg1]:set( f8_arg2 )
	end
	Engine.EBIDFIDHIE( "updategamerprofile" )
end

MLG.ShoutcasterProfileVarDefaultValue = function ( f7_arg0, f7_arg1 )
	local f7_local0 = MLG.DCJHAJAHAH()
	if f7_local0 ~= nil and f7_local0[f7_arg1] ~= nil then
		return f7_local0[f7_arg1].defaultValue
	else
		return nil
	end
end

Outlines = {
	friendly = 1,
	all = 0,
	enemy = 2,
	none = 3
}
MLG.GetXrayModeByShoutcasterValue = function ( f6_arg0 )
	local f6_local0 = Outlines.none
	if f6_arg0 == 0 then
		f6_local0 = Outlines.friendly
	elseif f6_arg0 == 1 then
		f6_local0 = Outlines.enemy
	elseif f6_arg0 == 2 then
		f6_local0 = Outlines.all
	end
	return f6_local0
end

MLG.IsCDLActive = function ( f5_arg0 )
	if not Dvar.IBEGCHEFE( "MMTOPPQOON" ) then
		return false
	elseif CONDITIONS.IsMagmaGameMode() then
		return false
	elseif CONDITIONS.IsThirdGameMode() then
		return false
	elseif not Engine.DDJFBBJAIG() and Dvar.IBEGCHEFE( "NTLNTTNNLQ" ) then
		return false
	elseif CONDITIONS.IsInGameBattlesMatch() then
		return MLG.AreMLGRulesEnabled()
	elseif MatchRules.EAIEFBHGJ() then
		return MatchRules.BIJEDCBCBH( "cwlRulesEnabled" )
	else
		
	end
end

MLG.IsHost = function ()
	local f4_local0 = Lobby.BBDICGHE()
	local f4_local1
	if f4_local0 then
		f4_local1 = Lobby.DFFFFJHCEH()
		if not f4_local1 then
			if not f4_local0 then
				f4_local1 = Lobby.BGIADHIHAG()
			else
				f4_local1 = false
			end
		end
	elseif not f4_local0 then
		f4_local1 = Lobby.BGIADHIHAG()
	else
		f4_local1 = false
	end
	return f4_local1
end

MLG.ArbitrarilySetCDLRuleset = function ( f3_arg0, f3_arg1 )
	if MLG.IsHost() then
		if MP.GetLastQuickplayFilter( f3_arg0 ) == MP.PLAYLIST_FILTER_MODE.CDLRules and (not Lobby.GFFECBCCF() or Lobby.BGIADHIHAG()) then
			MatchRules.DJEIAJCAD()
			MLG.SetUsingMLGRules( true )
		else
			MLG.ResetMatchRulesData()
		end
	elseif not f3_arg1 then
		if Lobby.DFHGBJJAGC() then
			MatchRules.DJEIAJCAD()
		else
			MLG.ResetMatchRulesData()
		end
	end
end

MLG.ResetMatchRulesData = function ()
	if MatchRules.EAIEFBHGJ() and MatchRules.BIJEDCBCBH( "cwlRulesEnabled" ) then
		MatchRules.BCECADEHDA()
		MLG.SetUsingMLGRules( false )
	end
end

MLG.IsAttachmentRestricted = function ( f1_arg0, f1_arg1 )
	return MatchRules.EBCADBGDHB( f1_arg0, f1_arg1 )
end

