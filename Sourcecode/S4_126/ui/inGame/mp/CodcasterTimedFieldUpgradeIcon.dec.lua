-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 04-10-2025 21:43
module( ..., package.seeall )
local f0_local0 = GetIntForColor( COLORS.white )
local f0_local1 = {
	{
		name = "Activated",
		animate = true,
		condition = function ( f15_arg0, f15_arg1, f15_arg2 )
			local f15_local0 = f15_arg2.dataSources.fieldUpgradeActive:GetValue( f15_arg1 )
			local f15_local1
			if not f15_arg0._isDead then
				f15_local1 = f15_local0
			else
				f15_local1 = false
			end
			return f15_local1
		end
	},
	{
		refresh = true,
		name = "Show",
		animationsFunction = function ( f14_arg0, f14_arg1, f14_arg2 )
			if f14_arg0._lastState == "Hide" then
				return {
					nil,
					"Show"
				}
			else
				return {
					nil,
					"ShowNoAnim"
				}
			end
		end,
		condition = function ( f13_arg0, f13_arg1, f13_arg2 )
			local f13_local0 = f13_arg2.dataSources
			local f13_local1 = f13_local0.id:GetValue( f13_arg1 )
			local f13_local2 = f13_local0.fieldUpgradeRef:GetValue( f13_arg1 )
			local f13_local3 = f13_local0.fieldUpgradeProgress:GetValue( f13_arg1 )
			local f13_local4
			if f13_local1 == CODCASTER.NOTIFICATION_TYPE.FIELDUPGRADE_USED then
				f13_local4 = CODCASTER.TIMED_FIELD_UPGRADES[f13_local2]
			else
				f13_local4 = false
			end
			if not (f13_arg0._fieldUpgradeProgress ~= 0 or f13_local1 ~= CODCASTER.NOTIFICATION_TYPE.FIELDUPGRADE_ENDED) or f13_arg0._isDead then
				return false
			else
				local f13_local5
				if 0 < f13_local3 and f13_local3 < 1 then
					f13_local5 = f13_local4
				else
					f13_local5 = false
				end
			end
			return f13_local5
		end,
		postAnimationsHandler = function ( f12_arg0, f12_arg1, f12_arg2 )
			local f12_local0
			if f12_arg2.dataSources.isSpectated:GetValue( f12_arg1 ) then
				f12_local0 = f12_arg0._contrastedColor
				if not f12_local0 then
				
				else
					f12_arg0.TimedFieldUpgradeIcon:SetRGBFromInt( f12_local0 )
				end
			end
			f12_local0 = f0_local0
		end
	},
	{
		name = "Hide",
		animate = true,
		condition = function ( f11_arg0, f11_arg1, f11_arg2 )
			return true
		end
	}
}
local f0_local2 = function ( f10_arg0, f10_arg1, f10_arg2 )
	local f10_local0 = CODCASTER.GetTeamDataSource( f10_arg1.teamId:GetValue( f10_arg2 ) )
	f10_local0 = f10_local0.colors
	local f10_local1 = f10_local0.primary:GetValue( f10_arg2 )
	if f10_local1 == GetIntForColor( COLORS.black ) then
		f10_local1 = f10_local0.secondary:GetValue( f10_arg2 )
	end
	f10_arg0._contrastedColor = GetIntForColor( COLORS_UTILS.GetBlackWhiteContrastFromInt( f10_local1 ) )
end

local f0_local3 = function ( f8_arg0, f8_arg1, f8_arg2 )
	if f8_arg1 and not f8_arg0._isVisualStateSetup then
		f8_arg0:PrepareContrastedColor( f8_arg1, f8_arg2 )
		CODCASTER.SetupVisualStateHandler( f8_arg0, f8_arg2, f0_local0, {
			dataSources = {
				id = f8_arg1.notificationData.id,
				fieldUpgradeRef = f8_arg1.equipments.fieldUpgrade.ref,
				fieldUpgradeProgress = f8_arg1.equipments.fieldUpgrade.progress,
				isDead = f8_arg1.stats.isDead,
				isSpectated = f8_arg1.isSpectated,
				fieldUpgradeActive = f8_arg1.equipments.fieldUpgrade.isActive
			}
		}, {
			preState = function ( f9_arg0, f9_arg1, f9_arg2 )
				f9_arg0._lastState = CODCASTER.GetCurrentVisualState( f9_arg0 )
				f9_arg0._isDead = f9_arg2.dataSources.isDead:GetValue( f9_arg1 )
			end
		} )
		f8_arg0._isVisualStateSetup = true
	end
	LUI.UIElement.SetDataSource( f8_arg0, f8_arg1, f8_arg2 )
end

local f0_local4 = function ( f7_arg0, f7_arg1, f7_arg2 )
	if Engine[0x12586A3F4FB490E]() then
		f7_arg0:closeTree()
		return 
	else
		f7_arg0.SetDataSource = f0_local0
		f7_arg0.PrepareContrastedColor = f0_local0
	end
end

function CodcasterTimedFieldUpgradeIcon( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 130 * _1080p, 0, 100 * _1080p )
	self.id = "CodcasterTimedFieldUpgradeIcon"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	self._sequenceLengths = self._sequenceLengths or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	local f1_local2 = self
	local TimedFieldUpgradeIcon = nil
	
	TimedFieldUpgradeIcon = LUI.UIImage.new()
	TimedFieldUpgradeIcon.id = "TimedFieldUpgradeIcon"
	TimedFieldUpgradeIcon:SetAlpha( 0, 0 )
	TimedFieldUpgradeIcon:setImage( RegisterMaterial( "v_esports_ui_icon_codcaster_dead_silence" ), 0 )
	TimedFieldUpgradeIcon:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 39, _1080p * 91, _1080p * 49, _1080p * 101 )
	self:addElement( TimedFieldUpgradeIcon )
	self.TimedFieldUpgradeIcon = TimedFieldUpgradeIcon
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	self._sequenceLengths.DefaultSequence = 0
	local f1_local4 = nil
	TimedFieldUpgradeIcon:RegisterAnimationSequence( "Show", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 4270,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 39
		},
		{
			duration = 4270,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 91
		},
		{
			duration = 4270,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 49
		},
		{
			duration = 4270,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 101
		},
		{
			value = 0,
			duration = 4150,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = -8,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			duration = 230,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 100
		},
		{
			duration = 230,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 70
		},
		{
			duration = 230,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 130
		},
		{
			duration = 230,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 100
		}
	} )
	self._sequences.Show = function ()
		menu:AnimateSequence( "Show" )
	end
	
	self._sequenceLengths.Show = 4500
	local f1_local5 = nil
	TimedFieldUpgradeIcon:RegisterAnimationSequence( "Hide", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 89
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 91
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 125
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 127
		},
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.Hide = function ()
		menu:AnimateSequence( "Hide" )
	end
	
	self._sequenceLengths.Hide = 0
	local f1_local6 = nil
	TimedFieldUpgradeIcon:RegisterAnimationSequence( "ShowNoAnim", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 100
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 70
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 130
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 100
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.ShowNoAnim = function ()
		menu:AnimateSequence( "ShowNoAnim" )
	end
	
	self._sequenceLengths.ShowNoAnim = 0
	local f1_local7 = nil
	TimedFieldUpgradeIcon:RegisterAnimationSequence( "Activated", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Left,
			value = _1080p * 100
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Top,
			value = _1080p * 70
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Right,
			value = _1080p * 130
		},
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 100
		},
		{
			value = 1,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1.9035983712402182E+185,
			duration = 500,
			property = TWEEN_PROPERTY.Alpha
		},
		{
			value = 1,
			duration = 500,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.Activated = function ()
		menu:AnimateLoop( "Activated" )
	end
	
	self._sequenceLengths.Activated = 1000
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "CodcasterTimedFieldUpgradeIcon", CodcasterTimedFieldUpgradeIcon )
LockTable( _M )
