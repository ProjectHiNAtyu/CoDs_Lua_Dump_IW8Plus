-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 30-11-2025 17:04
module( ..., package.seeall )
require( "ui.generated.widgets.genericprogressbar" )
local f0_local0 = 3
local f0_local1 = 10
local f0_local2 = function ( f6_arg0 )
	local f6_local0
	if SCOREBOARD.ShowThreeTeams() then
		f6_local0 = 160
	else
		f6_local0 = 240
	end
	return f6_local0
end

local f0_local3 = function ( f5_arg0 )
	local f5_local0
	if SCOREBOARD.ShowThreeTeams() then
		f5_local0 = 10
	else
		f5_local0 = 6
	end
	return f5_local0
end

local f0_local4 = function ( f4_arg0, f4_arg1, f4_arg2 )
	if f4_arg2 == nil then
		if CONDITIONS.InGame() then
			if MatchRules[0x1A6D0B2E15DF8CF]() then
				f4_arg2 = MatchRules[0x3A9F1F51625857F]( Lobby.MatchRulesClasses.CommonOption, Lobby.MatchRulesMembers.WinLimit )
			else
				f4_arg2 = Dvar[0x22EAAB59AA27E9B]( 0x98C82B5A26DC973 .. SCOREBOARD.GetGameType( f4_arg0._controllerIndex ) .. "_winlimit" )
			end
			if f4_arg2 == nil then
				LUI.FlowManager.RequestDevErrorPopup( "TeamBaseProgress.lua", "scr_" .. gameMode .. "_winlimit has not been set. Defaulting to 0" )
				f4_arg2 = 0
			end
		else
			return 
		end
	end
	if f0_local0 < f4_arg2 then
		f4_arg0.RoundCount:setText( Engine[0xED84C33EC5F01EA]( 0x74821ADAF79FD0F, f4_arg1, f4_arg2 ) )
		ACTIONS.AnimateSequence( f4_arg0:getParent(), "UsingRoundText" )
	else
		local f4_local0 = math.floor( f0_local0( f4_arg0._controllerIndex ) / f4_arg2 ) - f0_local0
		local f4_local1 = {}
		f4_arg0.ProgressRounds:removeAllChildren()
		if SCOREBOARD.ShowThreeTeams() then
			f4_arg0.ProgressRounds:SetAlignment( LUI.Alignment.Right )
		end
		for f4_local2 = 1, f4_arg2, 1 do
			local self = LUI.UIImage.new()
			self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, f0_local0, 0, f0_local0( f4_arg0._controllerIndex ) )
			self:SetAlpha( 0 )
			f4_arg0.ProgressRounds:addElement( self )
			f4_local1[f4_local2] = LUI.UIImage.new()
			f4_local1[f4_local2].id = "Pip" .. f4_local2
			f4_local1[f4_local2]:SetAnchorsAndPosition( 0, 1, 0, 1, 0, f4_local0, 0, f0_local0( f4_arg0._controllerIndex ) )
			if f4_arg1 < f4_local2 then
				f4_local1[f4_local2]:SetAlpha( 0.2 )
			else
				f4_local1[f4_local2]:SetAlpha( 1 )
			end
			f4_arg0.ProgressRounds:addElement( f4_local1[f4_local2] )
		end
	end
end

local f0_local5 = function ( f3_arg0 )
	f3_arg0.ProgressBar[0x5811622F70F03AF]:SetRGB( SWATCHES[0x2B125210C0B2BB1][0x85BDB34EB15445F], 0 )
end

local f0_local6 = function ( f2_arg0, f2_arg1, f2_arg2 )
	if MP.IsRoundBasedGameType( SCOREBOARD.GetGameType( f2_arg1 ) ) or not SCOREBOARD.IsUsingMatchProgress( f2_arg1 ) then
		f2_arg0.ProgressBar:SetAlpha( 0 )
		f2_arg0.RoundCount:SetAlpha( 1 )
	else
		f2_arg0.RoundCount:SetAlpha( 0 )
	end
	f2_arg0._controllerIndex = f2_arg1
	f2_arg0.SetProgressRounds = f0_local0
	if CONDITIONS.IsSpookyUI() then
		f0_local0( f2_arg0 )
	end
end

function TeamBaseProgress( f1_arg0, f1_arg1 )
	local f1_local0 = LUI
	local f1_local1 = MenuBuilder
	local f1_local2 = f1_local0.UIElement.new()
	f1_local2:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 240, 0, 88 )
	f1_local2.id = "TeamBaseProgress"
	local f1_local3
	if f1_arg1 then
		f1_local3 = f1_arg1
	else
		f1_local3 = f1_arg1.controllerIndex
	end
	f1_local3 = f1_local0.ValidateControllerIndex( f1_local2, f1_local3 )
	local f1_local4 = nil
	f1_local4 = f1_local1.BuildRegisteredType( 0x6071BC5E4DD3F7A, {
		controllerIndex = f1_local3
	} )
	f1_local4[0x8B72E07B55C3AC0] = "ProgressBar"
	f1_local4[0x5811622F70F03AF]:SetRGB( SWATCHES[0x38699D93415CEDA][0x1FC0DDFDB6E238C], 0 )
	f1_local4[0x5811622F70F03AF]:SetAlpha( 0.4, 0 )
	f1_local4[0xAD01878F02A7608]:SetRGB( 16777215, 0 )
	f1_local4[0x8D4335628B35226]:SetAlpha( 0, 0 )
	f1_local4[0x5E303190CE49C5B]:SetAlpha( 0, 0 )
	f1_local4:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, 6 )
	f1_local2:addElement( f1_local4 )
	f1_local2[0x1B657F2A152DBDF] = f1_local4
	local f1_local5 = nil
	f1_local5 = f1_local0.UIHorizontalList.new( {
		controller = f1_local3,
		direction = f1_local0.DIRECTION.horizontal,
		horizontalAlignment = f1_local0.Alignment.Left
	} )
	f1_local5[0x8B72E07B55C3AC0] = "ProgressRounds"
	f1_local5:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, 6 )
	f1_local2:addElement( f1_local5 )
	f1_local2[0x1206E86058E73B7] = f1_local5
	local f1_local6 = nil
	f1_local6 = f1_local0.UIStyledText.new()
	f1_local6[0x8B72E07B55C3AC0] = "RoundCount"
	f1_local6:setText( "", 0 )
	f1_local6:setCaseStyle( f1_local0.CaseStyle.Uppercase )
	f1_local6:SetFont( FONTS.GetFont( FONTS.SecondaryRegular.File ) )
	f1_local6:SetFontSize( 34 * _PT )
	f1_local6:SetMinFontSize( 20 * _PT )
	f1_local6:SetWordWrap( true )
	f1_local6:SetAlignment( f1_local0.Alignment.Left )
	f1_local6:SetOptOutRightToLeftAlignmentFlip( true )
	f1_local6:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, -16, 24 )
	f1_local2:addElement( f1_local6 )
	f1_local2[0xC043878A90AAC0A] = f1_local6
	f0_local0( f1_local2, f1_local3, f1_arg1 )
	return f1_local2
end

MenuBuilder.registerType( 0x7A80BFCF2D37692, TeamBaseProgress )
LockTable( _M )
