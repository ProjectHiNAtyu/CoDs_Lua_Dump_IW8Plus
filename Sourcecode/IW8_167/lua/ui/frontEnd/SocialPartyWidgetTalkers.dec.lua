-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 13-07-2025 21:51
module( ..., package.seeall )
local f0_local0 = "partyWidgetTalkers_enableAI"
local f0_local1 = 3000
local f0_local2 = 3000
local f0_local3 = function ( f17_arg0 )
	local f17_local0 = {
		{
			gamertag = "Garrett",
			isTalking = false,
			xuidString = "x1"
		},
		{
			gamertag = "Raz",
			isTalking = false,
			xuidString = "x2"
		},
		{
			gamertag = "Cody",
			isTalking = false,
			xuidString = "x3"
		},
		{
			gamertag = "Aleks",
			isTalking = false,
			xuidString = "x4"
		},
		{
			gamertag = "Jim",
			isTalking = false,
			xuidString = "x5"
		},
		{
			gamertag = "Kyle",
			isTalking = false,
			xuidString = "x6"
		},
		{
			gamertag = "[WWWWW]WWWWWWWWWWWWWWWW",
			isTalking = false,
			xuidString = "x7"
		}
	}
	local f17_local1, f17_local2 = nil
	f17_local2 = function ( f20_arg0 )
		f20_arg0.isTalking = false
		if f20_arg0.quietTime <= 0 then
			f17_arg0( f20_arg0 )
		else
			local f20_local0 = f20_arg0.element:Wait( f20_arg0.quietTime )
			f20_local0.onComplete = function ()
				f20_arg0( f20_arg0 )
			end
			
		end
	end
	
	f17_local1 = function ( f18_arg0 )
		f18_arg0.isTalking = true
		if f18_arg0.talkTime <= 0 then
			f17_arg0( f18_arg0 )
		else
			local f18_local0 = f18_arg0.element:Wait( f18_arg0.talkTime )
			f18_local0.onComplete = function ()
				f18_arg0( f18_arg0 )
			end
			
		end
	end
	
	for f17_local6, f17_local7 in ipairs( f17_local0 ) do
		f17_local7.element = LUI.UIElement.new()
		f17_local7.element.id = "AITalker_" .. f17_local6
		f17_arg0:addElement( f17_local7.element )
		if not f17_local7.talkTime then
			f17_local7.talkTime = math.random( 0, f0_local0 )
		end
		if not f17_local7.quietTime then
			f17_local7.quietTime = math.random( 0, f0_local0 )
		end
		f17_local1( f17_local7 )
	end
	return f17_local0
end

local f0_local4 = 250
local f0_local5 = 1000
local f0_local6 = function ( f16_arg0 )
	local f16_local0 = f16_arg0._replaceIndex + 1
	if #f16_arg0._talkers < f16_local0 then
		f16_local0 = 1
	end
	f16_arg0._replaceIndex = f16_local0
end

local f0_local7 = function ( f15_arg0 )
	local f15_local0 = f15_arg0._talkerQueue:Pop()
	if f15_local0 then
		
	else
		
	end
	return f15_local0
end

local f0_local8 = function ( f14_arg0, f14_arg1 )
	local f14_local0 = f14_arg0._talkers[f14_arg0._replaceIndex]
	f14_arg0._visibleTalkers[f14_local0.xuidString] = false
	f14_local0.xuidString = f14_arg1.xuidString
	f14_local0.gamertag = f14_arg1.gamertag
	f14_arg0._visibleTalkers[f14_arg1.xuidString] = true
	f0_local0( f14_arg0 )
end

local f0_local9 = function ( f13_arg0, f13_arg1 )
	for f13_local3, f13_local4 in ipairs( f13_arg0._talkers ) do
		if not f13_local4.xuidString then
			f13_local4.xuidString = f13_arg1.xuidString
			f13_local4.gamertag = f13_arg1.gamertag
			f13_arg0._visibleTalkers[f13_local4.xuidString] = true
			f13_arg0._numVisibleTalkers = f13_arg0._numVisibleTalkers + 1
			return 
		end
	end
end

local f0_local10 = function ( f12_arg0, f12_arg1 )
	f12_arg0._visibleTalkers[f12_arg0._talkers[f12_arg1].xuidString] = false
	f12_arg0._numVisibleTalkers = f12_arg0._numVisibleTalkers - 1
	for f12_local0 = f12_arg1, #f12_arg0._talkers, 1 do
		local f12_local3 = f12_arg0._talkers[f12_local0]
		if f12_local0 < #f12_arg0._talkers then
			f12_local3.xuidString = f12_arg0._talkers[f12_local0 + 1].xuidString
			f12_local3.gamertag = f12_arg0._talkers[f12_local0 + 1].gamertag
		else
			f12_local3.xuidString = nil
			f12_local3.gamertag = nil
		end
	end
	if 1 < f12_arg0._replaceIndex then
		f12_arg0._replaceIndex = f12_arg0._replaceIndex - 1
	end
end

local f0_local11 = function ( f11_arg0 )
	for f11_local3, f11_local4 in ipairs( f11_arg0._talkers ) do
		if f11_local4.xuidString and not f11_arg0._activeTalkers[f11_local4.xuidString] then
			f0_local0( f11_arg0, f11_local3 )
		end
	end
end

local f0_local12 = function ( f10_arg0 )
	f0_local0( f10_arg0 )
	local f10_local0 = f0_local0( f10_arg0 )
	if f10_local0 then
		if f10_arg0._numVisibleTalkers == #f10_arg0._talkers then
			f0_local0( f10_arg0, f10_local0 )
		else
			f0_local0( f10_arg0, f10_local0 )
		end
	end
	local f10_local1 = 0
	local f10_local2 = 0
	for f10_local7, f10_local8 in pairs( f10_arg0._talkers ) do
		if f10_local8.gamertag then
			f10_local8:setText( Engine.CBBHFCGDIC( "LUA_MENU/TALKER_X", Engine.JCBDICCAH( f10_local8.gamertag ) ) )
			f10_local8:SetAlpha( 1 )
			f10_local1 = f10_local1 + 1
			local f10_local6 = LAYOUT.GetTextWidth( f10_local8 )
			if f10_local2 < f10_local6 then
				f10_local2 = f10_local6
			end
		end
		f10_local8:setText( "" )
		f10_local8:SetAlpha( 0 )
	end
	f10_arg0.Background:SetLeft( -f10_local2 - 5 * _1080p )
	ACTIONS.AnimateSequence( f10_arg0, "TalkerX" .. f10_local1 )
end

local f0_local13 = nil
f0_local13 = function ( f8_arg0 )
	local f8_local0 = f8_arg0:Wait( math.random( f0_local0, f0_local0 ) )
	f8_local0.onComplete = function ()
		return f8_arg0( f8_arg0 )
	end
	
	local f8_local1 = nil
	if Engine.BHICADFIHA() and Dvar.IBEGCHEFE( f0_local0 ) == true then
		f8_local1 = f8_arg0._aiTalkers
	else
		f8_local1 = Friends.BJDEIGDDCD()
	end
	f8_arg0._activeTalkers = {}
	for f8_local5, f8_local6 in ipairs( f8_local1 ) do
		if f8_local6.isTalking then
			f8_arg0._activeTalkers[f8_local6.xuidString] = f8_local6
			if not f8_arg0._queuedTalkers[f8_local6.xuidString] then
				f8_arg0._queuedTalkers[f8_local6.xuidString] = true
				f8_arg0._talkerQueue:Push( f8_local6 )
			end
		end
	end
	f0_local0( f8_arg0 )
end

local f0_local14 = function ( f7_arg0, f7_arg1, f7_arg2 )
	f7_arg0._replaceIndex = 1
	f7_arg0._numVisibleTalkers = 0
	f7_arg0._visibleTalkers = {}
	f7_arg0._queuedTalkers = {}
	f7_arg0._talkerQueue = LUI.CreateQueue()
	if Engine.BHICADFIHA() and Dvar.IBEGCHEFE( f0_local0 ) == true then
		f7_arg0._aiTalkers = f0_local0( f7_arg0 )
	end
	f7_arg0._talkers = {
		f7_arg0.Talker1,
		f7_arg0.Talker2,
		f7_arg0.Talker3
	}
	for f7_local3, f7_local4 in ipairs( f7_arg0._talkers ) do
		f7_local4:setText( "" )
		f7_local4:SetAlpha( 0 )
	end
	f0_local0( f7_arg0 )
end

function SocialPartyWidgetTalkers( menu, controller )
	local self = LUI.UIElement.new()
	self:SetAnchorsAndPosition( 0, 1, 0, 1, 0, 360 * _1080p, 0, 63 * _1080p )
	self.id = "SocialPartyWidgetTalkers"
	self._animationSets = self._animationSets or {}
	self._sequences = self._sequences or {}
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	if not f1_local1 and not Engine.DDJFBBJAIG() then
		f1_local1 = self:getRootController()
	end
	assert( f1_local1 )
	local f1_local2 = self
	local Background = nil
	
	Background = LUI.UIImage.new()
	Background.id = "Background"
	Background:SetRGBFromTable( SWATCHES.genericMenu.blackBackground, 0 )
	Background:SetAlpha( 0.5, 0 )
	Background:setImage( RegisterMaterial( "widg_gradient_right_to_left" ), 0 )
	Background:SetAnchorsAndPosition( 1, 0, 0, 1, _1080p * -360, _1080p * 5, 0, _1080p * 63 )
	self:addElement( Background )
	self.Background = Background
	
	local Talker1 = nil
	
	Talker1 = LUI.UIStyledText.new()
	Talker1.id = "Talker1"
	Talker1:SetRGBFromTable( SWATCHES.HUD.normal, 0 )
	Talker1:setText( "O>{WWWWW}WWWWWWWWWWWWWWWW", 0 )
	Talker1:SetFont( FONTS.GetFont( FONTS.BattleNetRegular.File ) )
	Talker1:SetAlignment( LUI.Alignment.Right )
	Talker1:SetVerticalAlignment( LUI.Alignment.Center )
	Talker1:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, 0, _1080p * 18 )
	self:addElement( Talker1 )
	self.Talker1 = Talker1
	
	local Talker2 = nil
	
	Talker2 = LUI.UIStyledText.new()
	Talker2.id = "Talker2"
	Talker2:SetRGBFromTable( SWATCHES.HUD.normal, 0 )
	Talker2:setText( "O>{WWWWW}WWWWWWWWWWWWWWWW", 0 )
	Talker2:SetFont( FONTS.GetFont( FONTS.BattleNetRegular.File ) )
	Talker2:SetAlignment( LUI.Alignment.Right )
	Talker2:SetVerticalAlignment( LUI.Alignment.Center )
	Talker2:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, _1080p * 21, _1080p * 39 )
	self:addElement( Talker2 )
	self.Talker2 = Talker2
	
	local Talker3 = nil
	
	Talker3 = LUI.UIStyledText.new()
	Talker3.id = "Talker3"
	Talker3:SetRGBFromTable( SWATCHES.HUD.normal, 0 )
	Talker3:setText( "O>{WWWWW}WWWWWWWWWWWWWWWW", 0 )
	Talker3:SetFont( FONTS.GetFont( FONTS.BattleNetRegular.File ) )
	Talker3:SetAlignment( LUI.Alignment.Right )
	Talker3:SetVerticalAlignment( LUI.Alignment.Center )
	Talker3:SetAnchorsAndPosition( 0, 0, 0, 1, 0, 0, _1080p * 42, _1080p * 60 )
	self:addElement( Talker3 )
	self.Talker3 = Talker3
	
	self._sequences.DefaultSequence = function ()
		
	end
	
	Background:RegisterAnimationSequence( "TalkerX1", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 21
		},
		{
			value = 5.29462817E-315,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.TalkerX1 = function ()
		menu:AnimateSequence( "TalkerX1" )
	end
	
	Background:RegisterAnimationSequence( "TalkerX2", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 42
		},
		{
			value = 5.29462817E-315,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.TalkerX2 = function ()
		menu:AnimateSequence( "TalkerX2" )
	end
	
	Background:RegisterAnimationSequence( "TalkerX3", {
		{
			duration = 0,
			property = TWEEN_PROPERTY.Bottom,
			value = _1080p * 63
		},
		{
			value = 5.29462817E-315,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.TalkerX3 = function ()
		menu:AnimateSequence( "TalkerX3" )
	end
	
	Background:RegisterAnimationSequence( "TalkerX0", {
		{
			value = 0,
			duration = 0,
			property = TWEEN_PROPERTY.Alpha
		}
	} )
	self._sequences.TalkerX0 = function ()
		menu:AnimateSequence( "TalkerX0" )
	end
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "SocialPartyWidgetTalkers", SocialPartyWidgetTalkers )
LockTable( _M )
