-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 12-11-2025 23:02
GUNSMITH = {
	maxCategories = 10,
	lineDuration = 200,
	maxMods = 5,
	modSlotChars = 3,
	modSlotBaseID = 7000000,
	NUM_BLOCKED_CATEGORIES = 8,
	bucketItems = 5,
	buttonState = {
		CONFLICT = 5,
		MODIFICATION_LOCKED = 3,
		SWAP = 6,
		EQUIPPED = 7,
		UNLOCKED = 4,
		CHALLENGE_LOCKED = 2,
		PROGRESSION_LOCKED = 1
	},
	modificationSteps = {
		NAME = 2,
		GUNSMITH = 1,
		WARNING = 3
	},
	typeNamePostFix = {
		attachment = "_attachment",
		camos = "_camos"
	},
	WEAPON_PREVIEW_CAMERA_TYPE = {
		BIG_SHOTGUN = 2,
		BIG_GUN = 1,
		SMALL_GUN = 3,
		NONE = 0
	},
	WEAPON_PART_COMPARE_STATE = {
		SWAP = 2,
		REMOVE = 1,
		BLOCK = 3,
		PRESERVED = 4,
		NONE = 0
	},
	AttachmentSetupType = {
		WEAPON_PART = 1,
		ATTACHMENT = 0
	},
	AttachmentSetupTypeMap = {
		receiver = GUNSMITH.AttachmentSetupType.WEAPON_PART,
		frontpiece = GUNSMITH.AttachmentSetupType.ATTACHMENT,
		backpiece = GUNSMITH.AttachmentSetupType.ATTACHMENT,
		magazine = GUNSMITH.AttachmentSetupType.ATTACHMENT,
		optic = GUNSMITH.AttachmentSetupType.ATTACHMENT,
		muzzle = GUNSMITH.AttachmentSetupType.ATTACHMENT,
		undermount = GUNSMITH.AttachmentSetupType.ATTACHMENT,
		reargrip = GUNSMITH.AttachmentSetupType.ATTACHMENT,
		trigger = GUNSMITH.AttachmentSetupType.ATTACHMENT,
		gunperk = GUNSMITH.AttachmentSetupType.ATTACHMENT,
		other = GUNSMITH.AttachmentSetupType.ATTACHMENT,
		extra = GUNSMITH.AttachmentSetupType.ATTACHMENT,
		extrapstl = GUNSMITH.AttachmentSetupType.ATTACHMENT,
		unique = GUNSMITH.AttachmentSetupType.ATTACHMENT
	},
	AttachmentSetupDataMap = {
		[GUNSMITH.AttachmentSetupType.ATTACHMENT] = {
			maxIndex = 4,
			offset = 0,
			minIndex = 0
		},
		[GUNSMITH.AttachmentSetupType.WEAPON_PART] = {
			maxIndex = 5,
			offset = 5,
			minIndex = 5
		}
	},
	Tuning = {
		HANDLING = 5,
		RANGE = 1,
		ACCURACY = 2,
		DAMAGE = 6,
		FIRE_RATE = 7,
		RECOIL = 3,
		MOBILITY = 4
	},
	GetCharmSelectMenuRef = function ()
		if CONDITIONS.IsMobileOrMobileSim() then
			return "MobileCharmSelect"
		else
			return "CharmSelect"
		end
	end,
	GetCamoCategorySelectMenuRef = function ()
		if CONDITIONS.IsMobileOrMobileSim() then
			return "MobileCamoCategorySelect"
		else
			return "CamoCategorySelect"
		end
	end,
	GetCamoSelectMenuRef = function ()
		if CONDITIONS.IsMobileOrMobileSim() then
			return "MobileCamoSelect"
		else
			return "CamoSelect"
		end
	end,
	GetStickerLocationSelectMenuRef = function ()
		if CONDITIONS.IsMobileOrMobileSim() then
			return "MobileStickerLocationSelect"
		else
			return "StickerLocationSelect"
		end
	end,
	GetStickerSelectMenuRef = function ()
		if CONDITIONS.IsMobileOrMobileSim() then
			return "MobileStickerSelect"
		else
			return "StickerSelect"
		end
	end,
	GetVinylSelectMenuRef = function ()
		if CONDITIONS.IsMobileOrMobileSim() then
			return "VinylSelect"
		else
			return "VinylSelect"
		end
	end,
	GetGunsmithTabFrameRef = function ()
		if CONDITIONS.IsMobileOrMobileSim() then
			return "MobileGunsmith"
		else
			return "Gunsmith"
		end
	end,
	GetGunsmithCustomizeTabFrameRef = function ()
		if CONDITIONS.IsMobileOrMobileSim() then
			return "MobileGunsmithCustomize"
		else
			return "GunsmithCustomize"
		end
	end,
	GetWeaponPreviewMenuRef = function ()
		if CONDITIONS.IsMobileOrMobileSim() then
			return "MobileWeaponPreview"
		else
			return "WeaponPreview"
		end
	end,
	GetReticleSelectMenuRef = function ()
		if CONDITIONS.IsMobileOrMobileSim() then
			return "MobileReticleSelect"
		else
			return "ReticleSelect"
		end
	end,
	GetDefaultModificationName = function ()
		local f76_local0 = StringTable[0xFD4E49A34DD43AE]( CSV.modificationDefaults.file )
		math.randomseed( Engine[0x6991337AE950F99]() )
		return StringTable[0x2077452C28AB2FC]( CSV.modificationDefaults.file, math.random( 0, f76_local0 - 1 ), CSV.modificationDefaults.cols.name )
	end,
	GetAttachmentCategories = function ( f75_arg0 )
		local f75_local0 = WEAPON.GetClassBundleByWeaponClass( WEAPON.GetWeaponClass( f75_arg0 ) )
		local f75_local1 = {}
		for f75_local2 = 1, #f75_local0[0x3F3922AD742F2E9], 1 do
			local f75_local5 = f75_local0[0x3F3922AD742F2E9][f75_local2] or ""
			table.insert( f75_local1, string.lower( f75_local5[0xBD2E7FFB1224E91] ) )
		end
		local f75_local2 = WEAPON.GetWeaponDataForRef( f75_arg0 )
		if f75_local2 then
			for f75_local3 = 1, #f75_local2[0x19652145F566787], 1 do
				local f75_local7 = f75_local2[0x19652145F566787][f75_local3] or ""
				local f75_local8 = string.lower( f75_local7[0xBD2E7FFB1224E91] )
				for f75_local12, f75_local13 in ipairs( f75_local1 ) do
					if f75_local13 == f75_local8 then
						table.remove( f75_local1, f75_local12 )
					end
				end
			end
		end
		return f75_local1
	end,
	IsAttachVariantCategoryBlacklisted = function ( f74_arg0, f74_arg1 )
		local f74_local0 = WEAPON.GetWeaponDataForRef( f74_arg0 )
		if f74_local0 then
			local f74_local1 = f74_local0[0xBDB53E3FCA21828]
			for f74_local2 = 1, #f74_local1, 1 do
				if f74_local1[f74_local2].category == f74_arg1 then
					return true
				end
			end
		end
		return false
	end,
	GetBlockedCategories = function ( f73_arg0 )
		local f73_local0 = {}
		for f73_local4, f73_local5 in ipairs( f73_arg0.attachments ) do
			local f73_local6 = ATTACHMENT.GetRef( f73_local5.ref, f73_arg0.weapon )
			local f73_local7 = ATTACHMENT.GetBlockedCategory( f73_local6 )
			if not String.IsNilOrEmpty( f73_local7 ) then
				f73_local0[f73_local7] = f73_local6
			end
		end
		return f73_local0
	end,
	GetBlockedCategoryWarning = function ( f72_arg0, f72_arg1 )
		local f72_local0 = ATTACHMENT.GetRef( f72_arg0.attachments[f72_arg1].ref, f72_arg0.weapon )
		local f72_local1 = ATTACHMENT.GetAttachmentCategoryName( ATTACHMENT.GetCategory( f72_local0 ) )
		local f72_local2 = Engine[0xED84C33EC5F01EA]
		local f72_local3 = 0xA40C8E247024F5E
		local f72_local4 = f72_local1
		return f72_local2( f72_local3, ATTACHMENT.GetName( f72_local0 ) )
	end,
	GetBlockedCategoryButtonWarning = function ( f71_arg0, f71_arg1 )
		local f71_local0 = ATTACHMENT.GetAttachmentCategoryName( ATTACHMENT.GetCategory( f71_arg1 ) )
		local f71_local1 = Engine[0xED84C33EC5F01EA]
		local f71_local2 = 0xFA36F63F49F92E1
		return f71_local1( ATTACHMENT.GetName( f71_arg1 ) )
	end,
	GetChallengeXPReward = function ( f70_arg0 )
		return StringTable[0x2DCF0973239E909]( CSV.gunsmithChallenges.file, CSV.gunsmithChallenges.cols.id, f70_arg0, CSV.gunsmithChallenges.cols.XPReward )
	end,
	GetAttachmentsAndBucketItems = function ( f69_arg0, f69_arg1, f69_arg2 )
		local f69_local0 = {}
		local f69_local1 = {}
		local f69_local2 = WEAPON.GetWeaponDataForRef( f69_arg1 )
		local f69_local3 = {}
		if not f69_local2 then
			return f69_local3
		end
		local f69_local4 = f69_local2[0x49DB2AF7D3296E4]
		if not f69_local4 then
			return f69_local3
		elseif not Engine[0x12586A3F4FB490E]() then
			local f69_local5 = CONDITIONS.AreRestrictionsActive( f69_arg0 )
		else
			local f69_local5 = false
		end
		local f69_local6 = WEAPON.GetModificationAttachments( f69_arg0, f69_arg1, f69_arg2 )
		for f69_local10, f69_local11 in ipairs( f69_local4 ) do
			local f69_local12 = 1
			local f69_local13 = f69_local11[0x1CBA5DD1F23977A] or {}
			local f69_local14 = f69_local13[f69_local12] or {}
			local f69_local15 = f69_local11[0x8DDC90A9D7C709D] and f69_local11[0x8DDC90A9D7C709D] or 0
			if f69_local14[0x28887F70BF5EBA] and 0 < #f69_local14[0x28887F70BF5EBA] then
				
			end
		end
		for f69_local10, f69_local11 in pairs( f69_local1 ) do
			for f69_local15, f69_local16 in pairs( f69_local11 ) do
				table.insert( f69_local0[f69_local10], f69_local16 )
			end
		end
		return f69_local0, f69_local3
	end,
	IsDisabled = function ( f68_arg0 )
		local f68_local0 = WEAPON.GetWeaponClass( f68_arg0 )
		local f68_local1 = false
		if f68_local0 and 0 < #f68_local0 then
			local f68_local2 = WEAPON.GetClassBundleByWeaponClass( f68_local0 )
			if f68_local2 then
				local f68_local3 = f68_local2[0xC00B707A9E7820C]
				if not f68_local3 then
					f68_local1 = f68_local3
				else
					f68_local1 = false
				end
			end
			f68_local1 = false
		end
		local f68_local2 = WEAPON.GetWeaponDataForRef( f68_arg0 )
		local f68_local3
		if f68_local2 then
			f68_local3 = f68_local2
		else
			f68_local3 = f68_local2[0x4FDAECD20551368]
		end
		local f68_local4
		if f68_local1 then
			f68_local4 = f68_local3
		else
			f68_local4 = true
		end
		return f68_local4
	end,
	IsCustomizationDisabled = function ( f67_arg0 )
		local f67_local0 = WEAPON.GetWeaponDataForRef( f67_arg0 )
		local f67_local1
		if f67_local0 then
			f67_local1 = f67_local0
		else
			f67_local1 = f67_local0[0x4348964940172BE]
		end
		local f67_local2
		if not f67_local1 then
			f67_local2 = f67_local1
		else
			f67_local2 = CoD.IsDMZMatch()
		end
		return f67_local2
	end,
	IsGunsmithCustomsAvailable = function ( f66_arg0, f66_arg1, f66_arg2, f66_arg3, f66_arg4 )
		if not f66_arg2 then
			f66_arg2 = {}
		end
		local f66_local0
		if f66_arg1 then
			f66_local0 = f66_arg1
		else
			f66_local0 = 1 < #f66_arg2
		end
		local f66_local1 = GUNSMITH.IsAttachVariantCategoryBlacklisted( f66_arg3, f66_arg4 )
		local f66_local2 = ATTACHMENT.AreVariantsEnabled()
		if f66_local2 then
			if f66_local0 then
				f66_local2 = f66_local0
			elseif not f66_local1 then
				f66_local2 = Engine[0x12586A3F4FB490E]()
				if f66_local2 then
					f66_local2 = Engine[0x5EA7EB683287036]( f66_arg0 )
				end
			else
				f66_local2 = false
			end
		end
		return f66_local2
	end,
	AreMasterChallengesEnabled = function ( f65_arg0, f65_arg1 )
		if f65_arg0 == nil or f65_arg1 == nil then
			return false
		end
		local f65_local0 = Dvar[0x9E5BE3B4BBA4E0E]( 0x4D9E8158F4A4271 )
		local f65_local1 = WEAPON.IsGoldCamoUnlocked( f65_arg0, f65_arg1 )
		local f65_local2
		if f65_local0 and CONDITIONS.InFrontendPublic() and not f65_local1 then
			f65_local2 = f65_local1
		else
			f65_local2 = Dvar[0x9E5BE3B4BBA4E0E]( 0xED4A31155340345 )
		end
		return f65_local2
	end,
	EquipAttachment = function ( f64_arg0, f64_arg1, f64_arg2, f64_arg3, f64_arg4 )
		local f64_local0 = f64_arg4.attachSlot
		local f64_local1 = f64_arg4.isSwappingAttachment
		if f64_local0 then
			local f64_local2 = ATTACHMENT.GetRefFromSetup( f64_arg3.attachmentSetup[f64_local0 - 1] )
			local f64_local3 = false
			local f64_local4 = f64_arg3.weapon:get()
			if f64_local2 == f64_arg2 and not f64_arg4.variantID then
				ATTACHMENT.SetPlayerDataRef( f64_arg3.attachmentSetup[f64_local0 - 1], ATTACHMENT.none )
				f64_arg2 = ATTACHMENT.none
				f64_local3 = true
			else
				ATTACHMENT.SetPlayerDataRef( f64_arg3.attachmentSetup[f64_local0 - 1], f64_arg2 )
			end
			if f64_arg4.variantID then
				f64_arg3.attachmentSetup[f64_local0 - 1].variantID:set( tonumber( f64_arg4.variantID ) )
			else
				local f64_local5 = ATTACHMENT.baseVariant
				if f64_arg3.lootItemID:get() ~= LOOT.emptyID then
					local f64_local6 = WEAPON.GetModificationAttachments( f64_arg1, f64_local4, f64_arg3.lootItemID:get() )
					if f64_local6[f64_arg2] then
						f64_local5 = f64_local6[f64_arg2]
					end
				end
				f64_arg3.attachmentSetup[f64_local0 - 1].variantID:set( f64_local5 )
			end
			f64_arg3.attachmentSetup[f64_local0 - 1].customTune[0]:set( 0 )
			f64_arg3.attachmentSetup[f64_local0 - 1].customTune[1]:set( 0 )
			local f64_local5 = ATTACHMENT.GetBlockedCategorySlot( f64_arg2, WEAPON.GenerateWeaponTable( f64_arg3 ) )
			if f64_local5 then
				ATTACHMENT.SetPlayerDataRef( f64_arg3.attachmentSetup[f64_local5 - 1], ATTACHMENT.none )
				f64_arg3.attachmentSetup[f64_local5 - 1].variantID:set( ATTACHMENT.baseVariant )
			end
			local f64_local6
			if ATTACHMENT.GetCategory( f64_local2 ) ~= ATTACHMENT.opticCategory and ATTACHMENT.GetCategory( f64_arg2 ) ~= ATTACHMENT.opticCategory then
				f64_local6 = false
			else
				f64_local6 = true
			end
			if f64_local6 then
				if not ATTACHMENT.SupportsCustomReticles( f64_arg2 ) or ATTACHMENT.GetOpticReticleCategory( f64_local2 ) ~= ATTACHMENT.GetOpticReticleCategory( f64_arg2 ) then
					WEAPON.SetEquippedReticle( f64_arg3, WEAPON.ReticleNoneValue )
				end
			end
			if f64_arg4.menusToLeave and not f64_local3 then
				for f64_local10, f64_local11 in ipairs( f64_arg4.menusToLeave ) do
					LUI.FlowManager.RequestLeaveMenuByName( f64_local11 )
				end
				return true
			else
				return false
			end
		elseif f64_arg2 == ATTACHMENT.none then
			if f64_arg4.menusToLeave then
				for f64_local5, f64_local6 in ipairs( f64_arg4.menusToLeave ) do
					LUI.FlowManager.RequestLeaveMenuByName( f64_local6 )
				end
				return true
			else
				return false
			end
		else
			local f64_local2 = {
				attachToReplaceWith = f64_arg2,
				weaponPlayerData = f64_arg3,
				menusToLeave = f64_arg4.menusToLeave,
				variantID = f64_arg4.variantID,
				lootID = f64_arg4.lootID,
				survivalCost = f64_arg4.survivalCost
			}
			if CONDITIONS.IsMobileOrMobileSim() then
				LUI.FlowManager.RequestPopupMenu( nil, "MobileSwapAttachmentPopup", true, f64_arg1, false, f64_local2 )
			else
				LUI.FlowManager.RequestAddMenu( "SwapAttachmentPopup", true, f64_arg1, nil, f64_local2 )
			end
		end
	end,
	GetAttachmentSceneOverride = function ( f63_arg0, f63_arg1, f63_arg2 )
		local f63_local0 = {
			{
				col = CSV.gunsmithSetup.cols.weapon,
				key = f63_arg0
			},
			{
				col = CSV.gunsmithSetup.cols.category,
				key = f63_arg2
			},
			{
				col = CSV.gunsmithSetup.cols.variantID,
				key = f63_arg1
			}
		}
		local f63_local1 = StringTable[0x412BDBFB84C120D]( CSV.gunsmithSetup.file, f63_local0, CSV.gunsmithSetup.cols.scene )
		if not f63_local1 or #f63_local1 == 0 then
			f63_local0[3] = {
				col = CSV.gunsmithSetup.cols.variantID,
				key = WEAPON.baseVariant
			}
			f63_local1 = StringTable[0x412BDBFB84C120D]( CSV.gunsmithSetup.file, f63_local0, CSV.gunsmithSetup.cols.scene )
		end
		return f63_local1
	end,
	GetAttachmentCategoryScene = function ( f62_arg0, f62_arg1, f62_arg2 )
		local f62_local0 = WEAPON.GetWeaponClass( f62_arg0 )
		local f62_local1 = GUNSMITH.GetAttachmentSceneOverride( f62_arg0, f62_arg1, f62_arg2 )
		if f62_local1 and 0 < #f62_local1 then
			return f62_local1
		elseif f62_local0 == WEAPON.LAUNCHERClass then
			local f62_local2 = WEAPON.GetClassBundleByWeaponClass( f62_local0 )
			local f62_local3
			if f62_local2 then
				f62_local3 = f62_local2[0x8F5A9FD7BEC1DD5]
				if not f62_local3 then
				
				else
					return f62_local3
				end
			end
			f62_local3 = ""
		end
		local f62_local2 = CSV.attachmentCategories.cols.categoryScene
		if f62_local0 == WEAPON.pistolClass then
			f62_local2 = CSV.attachmentCategories.cols.smallCategoryScene
		elseif f62_local0 == WEAPON.LMGClass or f62_local0 == WEAPON.sniperClass then
			f62_local2 = CSV.attachmentCategories.cols.largeCategoryScene
		end
		return StringTable[0x2DCF0973239E909]( CSV.attachmentCategories.file, CSV.attachmentCategories.cols.ref, f62_arg2, f62_local2 )
	end
}
local f0_local0 = function ( f61_arg0, f61_arg1, f61_arg2 )
	local f61_local0 = {}
	for f61_local4, f61_local5 in pairs( f61_arg0 ) do
		if f61_local5.data["slot" .. f61_arg2] == "1" and not f61_arg1[f61_local4] then
			table.insert( f61_local0, f61_local5 )
		end
	end
	return f61_local0
end

local f0_local1 = function ( f60_arg0, f60_arg1 )
	local f60_local0 = {}
	local f60_local1 = 0
	local f60_local2 = "selectionPriority"
	for f60_local6, f60_local7 in ipairs( f60_arg0[f60_arg1.slotIndex] ) do
		if f60_arg1.cellIndex == 4 then
			if f60_arg1.cellIndex - 1 <= f60_local7.cellRequirement then
				table.insert( f60_local0, f60_local7 )
				f60_local1 = f60_local1 + f60_local7[f60_local2]
			end
		end
		if f60_local7.cellRequirement == f60_arg1.cellIndex then
			table.insert( f60_local0, f60_local7 )
			f60_local1 = f60_local1 + f60_local7[f60_local2]
		end
	end
	if #f60_local0 == 0 then
		return nil
	end
	f60_local3 = 0
	f60_local4 = math.floor( math.random() * 100 + 0.5 ) / 100 * f60_local1
	f60_local5 = 1
	for f60_local9, f60_local10 in ipairs( f60_local0 ) do
		if f60_local4 <= f60_local3 + f60_local10[f60_local2] then
			f60_local5 = f60_local9
			break
		end
		f60_local3 = f60_local3 + f60_local10[f60_local2]
	end
	for f60_local9, f60_local10 in ipairs( f60_arg0[f60_arg1.slotIndex] ) do
		if f60_local10.ref == f60_local0[f60_local5].ref then
			table.remove( f60_arg0[f60_arg1.slotIndex], f60_local9 )
			break
		end
	end
	return f60_local0[f60_local5]
end

GUNSMITH.GetVariantName = function ( f59_arg0, f59_arg1 )
	if f59_arg0 == 0 then
		return Engine[0xED84C33EC5F01EA]( 0x23ABF974ED0021F )
	else
		return WEAPON.GetLootWeaponName( WEAPON.GetVariantBaseRef( f59_arg1 ), f59_arg1 )
	end
end

GUNSMITH.GetSelectedBlueprintAttachIndexForCategory = function ( f58_arg0, f58_arg1 )
	for f58_local4, f58_local5 in ipairs( f58_arg1.attachments ) do
		if not String.IsNilOrEmpty( f58_local5.ref ) and f58_local5.ref ~= ATTACHMENT.none then
			local f58_local3 = LUI.Split( f58_local5.ref, "|" )
			if not ATTACHMENT.IsDefaultAttachment( WEAPON.GetWeaponModelName( f58_arg1.weapon, f58_arg1, {
				includeAttachments = true
			} ), f58_local3[1] ) and ATTACHMENT.GetCategory( f58_local5.ref ) == f58_arg0 then
				return f58_local4
			end
		end
	end
end

GUNSMITH.GetSelectedAttachIndexForCategory = function ( f57_arg0, f57_arg1 )
	for f57_local3, f57_local4 in ipairs( f57_arg1.attachments ) do
		if ATTACHMENT.GetCategory( f57_local4.ref ) == f57_arg0 then
			return f57_local3
		end
	end
end

GUNSMITH.GetAttachmentAndIndexForCategory = function ( f56_arg0, f56_arg1 )
	for f56_local3, f56_local4 in ipairs( f56_arg1.attachments ) do
		if f56_local4.category == f56_arg0 then
			return f56_local4, f56_local3
		end
	end
end

GUNSMITH.GetGunsmithMenu = function ()
	local f55_local0
	if Engine[0x12586A3F4FB490E]() then
		f55_local0 = "Gunsmith"
	else
		f55_local0 = "InGameGunsmith"
	end
	return f55_local0
end

GUNSMITH.OpenGunsmith = function ( f54_arg0, f54_arg1, f54_arg2, f54_arg3 )
	if not Dvar[0x9E5BE3B4BBA4E0E]( 0x4F74CEB67644978 ) then
		return 
	end
	local f54_local0 = LOADOUT.GetLoadoutSquadMember( f54_arg0 )
	f54_local0 = f54_local0.loadouts
	local f54_local1 = f54_local0[f54_arg1].loadoutPerks[0]:get()
	local f54_local2 = f54_local0[f54_arg1].loadoutPerks[1]:get()
	local f54_local3 = f54_local0[f54_arg1].loadoutPerks[2]:get()
	if not PERK.IsPerkOverkill( f54_local1 ) and not PERK.IsPerkOverkill( f54_local2 ) then
		local f54_local4 = PERK.IsPerkOverkill( f54_local3 )
	end
	local f54_local5 = {
		weaponSlot = f54_arg2,
		loadoutIndex = f54_arg1
	}
	local f54_local6 = f54_local0[f54_arg1].weaponSetups[f54_arg2]
	if CONDITIONS.IsWaveGameType then
		f54_arg3 = false
	end
	LUI.FlowManager.RequestAddMenu( LOADOUT.GetGunsmithTabsMenuRef(), true, f54_arg0, f54_arg3, f54_local5, true )
end

GUNSMITH.GetLineOffsets = function ( f53_arg0, f53_arg1, f53_arg2 )
	local f53_local0 = {
		{
			col = CSV.gunsmithSetup.cols.weapon,
			key = f53_arg0
		},
		{
			col = CSV.gunsmithSetup.cols.category,
			key = f53_arg2
		},
		{
			col = CSV.gunsmithSetup.cols.variantID,
			key = f53_arg1
		}
	}
	local f53_local1 = StringTable[0xF6B0CC3002991DB]( CSV.gunsmithSetup.file, f53_local0 )
	if not f53_local1 or f53_local1 == -1 then
		f53_local0[3] = {
			col = CSV.gunsmithSetup.cols.variantID,
			key = WEAPON.baseVariant
		}
		f53_local1 = StringTable[0xF6B0CC3002991DB]( CSV.gunsmithSetup.file, f53_local0 )
	end
	return StringTable[0x2077452C28AB2FC]( CSV.gunsmithSetup.file, f53_local1, CSV.gunsmithSetup.cols.lineOffsetX ), StringTable[0x2077452C28AB2FC]( CSV.gunsmithSetup.file, f53_local1, CSV.gunsmithSetup.cols.lineOffsetY ), StringTable[0x2077452C28AB2FC]( CSV.gunsmithSetup.file, f53_local1, CSV.gunsmithSetup.cols.lineOffsetZ )
end

GUNSMITH.GetDefaultLineOffsets = function ( f52_arg0 )
	local f52_local0 = StringTable[0x8073B436CDE1BF]( CSV.attachmentCategories.file, CSV.attachmentCategories.cols.ref, f52_arg0 )
	local f52_local1 = StringTable[0x2077452C28AB2FC]( CSV.attachmentCategories.file, f52_local0, CSV.attachmentCategories.cols.defaultLineOffsetX )
	local f52_local2 = StringTable[0x2077452C28AB2FC]( CSV.attachmentCategories.file, f52_local0, CSV.attachmentCategories.cols.defaultLineOffsetY )
	local f52_local3 = StringTable[0x2077452C28AB2FC]( CSV.attachmentCategories.file, f52_local0, CSV.attachmentCategories.cols.defaultLineOffsetZ )
	if f52_local1 and 0 < #f52_local1 then
		local f52_local4 = tonumber( f52_local1 )
		if not f52_local4 then
			f52_local1 = f52_local4
		end
	end
	f52_local1 = 0
end

GUNSMITH.GetFinalLineOffsets = function ( f51_arg0, f51_arg1, f51_arg2 )
	local f51_local0, f51_local1, f51_local2 = GUNSMITH.GetDefaultLineOffsets( f51_arg2 )
	local f51_local3, f51_local4, f51_local5 = GUNSMITH.GetLineOffsets( f51_arg0, f51_arg1, f51_arg2 )
	if f51_local3 and 0 < #f51_local3 then
		local f51_local6 = tonumber( f51_local3 )
		if not f51_local6 then
			f51_local0 = f51_local6
		else
			
		end
	end
	if f51_local4 and 0 < #f51_local4 then
		local f51_local6 = tonumber( f51_local4 )
		if not f51_local6 then
			f51_local1 = f51_local6
		else
			
		end
	end
	if f51_local5 and 0 < #f51_local5 then
		local f51_local6 = tonumber( f51_local5 )
		if not f51_local6 then
			f51_local2 = f51_local6
		else
			
		end
	end
	if Dvar[0x9E5BE3B4BBA4E0E]( 0x207212EF5C79A3A ) then
		f51_local0 = Dvar[0xEDCFC612B39E0C0]( 0x6A261C4324491B7 )
		f51_local1 = Dvar[0xEDCFC612B39E0C0]( 0x914534761F93E4 )
		f51_local2 = Dvar[0xEDCFC612B39E0C0]( 0xF6E39204F9D9DD5 )
	end
	return f51_local0, f51_local1, f51_local2
end

GUNSMITH.GetOverrideLineBone = function ( f50_arg0, f50_arg1, f50_arg2 )
	local f50_local0 = {
		{
			col = CSV.gunsmithSetup.cols.weapon,
			key = f50_arg0
		},
		{
			col = CSV.gunsmithSetup.cols.category,
			key = f50_arg2
		},
		{
			col = CSV.gunsmithSetup.cols.variantID,
			key = f50_arg1
		}
	}
	local f50_local1 = StringTable[0x412BDBFB84C120D]( CSV.gunsmithSetup.file, f50_local0, CSV.gunsmithSetup.cols.overrideLineBone )
	if not f50_local1 or #f50_local1 == 0 then
		f50_local0[3] = {
			col = CSV.gunsmithSetup.cols.variantID,
			key = WEAPON.baseVariant
		}
		f50_local1 = StringTable[0x412BDBFB84C120D]( CSV.gunsmithSetup.file, f50_local0, CSV.gunsmithSetup.cols.overrideLineBone )
	end
	return f50_local1
end

GUNSMITH.GetLineBone = function ( f49_arg0, f49_arg1, f49_arg2 )
	local f49_local0 = GUNSMITH.GetOverrideLineBone( f49_arg0, f49_arg1, f49_arg2 )
	local f49_local1
	if f49_local0 and 0 < #f49_local0 and not f49_local0 then
		f49_local1 = f49_local0
	else
		f49_local1 = StringTable[0x2DCF0973239E909]( CSV.attachmentCategories.file, CSV.attachmentCategories.cols.ref, f49_arg2, CSV.attachmentCategories.cols.bone )
	end
	return f49_local1
end

GUNSMITH.CanMakeModification = function ( f48_arg0, f48_arg1 )
	local f48_local0 = GUNSMITH.AreAnyModSlotsUnlocked( f48_arg0, LOOT.GetItemID( LOOT.itemTypes.WEAPON, f48_arg1 ) )
	local f48_local1 = Dvar[0x9E5BE3B4BBA4E0E]( 0x65DC343A69576B4 )
	if f48_local1 then
		f48_local1 = f48_local0
	end
	return f48_local1
end

GUNSMITH.CheckNewAttachmentAndCustomization = function ( f47_arg0, f47_arg1 )
	local f47_local0 = false
	local f47_local1 = false
	if f47_arg1 then
		local f47_local2 = f47_arg1.weapon:get()
		local f47_local3 = ATTACHMENT.GetEquippedOptic( f47_arg1 )
		f47_local0 = Loot[0x2370C5DAF88C3CD]( f47_arg0, f47_local2 .. GUNSMITH.typeNamePostFix.attachment )
		local f47_local4 = Loot[0x2370C5DAF88C3CD]( f47_arg0, f47_local2 .. GUNSMITH.typeNamePostFix.camos )
		local f47_local5 = WEAPON.SupportsOptics( f47_local2 )
		if f47_local5 then
			f47_local5 = GUNSMITH.CheckNewReticleForOptic( f47_arg0, f47_local3 )
		end
		local f47_local6 = WEAPON.SupportsCosmetics( f47_local2 )
		if f47_local6 then
			f47_local6 = LOOT.IsCategoryNew( f47_arg0, LOOT.itemTypes.CHARM )
		end
		local f47_local7
		if 0 < WEAPON.GetMaxStickerSlotsForWeapon( f47_local2 ) then
			f47_local7 = LOOT.IsCategoryNew( f47_arg0, LOOT.itemTypes.STICKER )
		else
			f47_local7 = false
		end
		if not f47_local4 then
			f47_local1 = f47_local4
		elseif not f47_local5 then
			f47_local1 = f47_local5
		elseif not f47_local6 then
			f47_local1 = f47_local6
		else
			f47_local1 = f47_local7
		end
	end
	return f47_local0, f47_local1
end

GUNSMITH.CheckNewGunsmithByWeapon = function ( f46_arg0, f46_arg1 )
	local f46_local0, f46_local1 = GUNSMITH.CheckNewAttachmentAndCustomization( f46_arg0, f46_arg1 )
	local f46_local2
	if not f46_local0 then
		f46_local2 = f46_local0
	else
		f46_local2 = f46_local1
	end
	return f46_local2
end

GUNSMITH.CheckNewReticleForOptic = function ( f45_arg0, f45_arg1 )
	if ATTACHMENT.SupportsCustomReticles( f45_arg1 ) then
		local f45_local0 = ATTACHMENT.GetOpticReticleCategory( ATTACHMENT.GetOpticRef( f45_arg1 ) )
		local f45_local1 = Loot[0x3CB161A5685F7FF]( f45_arg0, LOOT.typeNames[LOOT.itemTypes.RETICLE] )
		for f45_local2 = 1, #f45_local1, 1 do
			if f45_local0 == WEAPON.GetReticleCategory( LOOT.GetItemRef( LOOT.itemTypes.RETICLE, f45_local1[f45_local2] ) ) then
				return true
			end
		end
	end
	return false
end

GUNSMITH.SetupAttachPoint = function ( f44_arg0, f44_arg1, f44_arg2, f44_arg3, f44_arg4 )
	local f44_local0 = GUNSMITH.GetLineBone( f44_arg1, f44_arg2, f44_arg3 )
	if not String.IsNilOrEmpty( f44_arg4 ) then
		f44_local0 = f44_arg4
	end
	if not String.IsNilOrEmpty( f44_local0 ) then
		if not f44_arg0._attachPoint then
			f44_arg0._attachPoint = MenuBuilder.BuildRegisteredType( "GunsmithAttachmentPointer", {
				controllerIndex = Engine[0x45B054C920178E9]()
			} )
			f44_arg0:addElement( f44_arg0._attachPoint )
			f44_arg0._attachPoint:SetAlpha( 0 )
		end
		f44_arg0._attachPoint:SetupAnchoredElement( {
			perspectiveScalingEnabled = false,
			entityNum = ClientWeapon[0x5DD69014A9C290]( FrontEndScene.ClientWeapons.Preview ),
			entityTag = f44_local0
		} )
		local f44_local1, f44_local2, f44_local3 = GUNSMITH.GetFinalLineOffsets( f44_arg1, f44_arg2, f44_arg3 )
		f44_arg0._attachPoint:SetTagOffsets( f44_local1, f44_local2, f44_local3 )
		f44_arg0._attachPoint:SetVisible( GL_HACK.ShowAttachmentPointers() )
	elseif f44_arg0._attachPoint then
		f44_arg0._attachPoint:closeTree()
		f44_arg0._attachPoint = nil
	end
end

GUNSMITH.SetupAttachLine = function ( f43_arg0, f43_arg1, f43_arg2, f43_arg3, f43_arg4 )
	local f43_local0 = GUNSMITH.GetLineBone( f43_arg1, f43_arg2, f43_arg3 )
	if not String.IsNilOrEmpty( f43_arg4 ) then
		f43_local0 = f43_arg4
	end
	if not String.IsNilOrEmpty( f43_local0 ) then
		if not f43_arg0._attachLine then
			f43_arg0._attachLine = LUI.UILine.new()
			f43_arg0._attachLine:setPriority( -5 )
			f43_arg0._attachLine:SetAlpha( 0 )
			if not CONDITIONS.IsGLGunsmithEnabled() then
				f43_arg0._attachLine:SetThickness( 1 * _1080p )
				f43_arg0._attachLine:SetVertexPosition( LUI.UILine.START, 0, 0, 220 * _1080p, 32 * _1080p )
			end
			f43_arg0:addElement( f43_arg0._attachLine )
		end
		f43_arg0._attachLine:SetVertexEntity( LUI.UILine.END, ClientWeapon[0x5DD69014A9C290]( FrontEndScene.ClientWeapons.Preview ) )
		f43_arg0._attachLine:SetVertexEntityTag( LUI.UILine.END, f43_local0 )
		f43_arg0._attachLine:AttachVertexToWorldModel( LUI.UILine.END )
		local f43_local1, f43_local2, f43_local3 = GUNSMITH.GetFinalLineOffsets( f43_arg1, f43_arg2, f43_arg3 )
		f43_arg0._attachLine:SetVertexTagSpacePosition( LUI.UILine.END, f43_local1, f43_local2, f43_local3 )
	elseif f43_arg0._attachLine then
		f43_arg0._attachLine:closeTree()
		f43_arg0._attachLine = nil
	end
end

GUNSMITH.GetFrontendTagWorldPositionAndAxis = function ( f42_arg0, f42_arg1, f42_arg2, f42_arg3 )
	local f42_local0 = GUNSMITH.GetLineBone( f42_arg1, f42_arg2, f42_arg3 )
	if f42_local0 and 0 < #f42_local0 then
		return Engine[0xC3B7925CCAC9430]( f42_arg0, ClientWeapon[0x5DD69014A9C290]( FrontEndScene.ClientWeapons.Preview ), f42_local0 )
	else
		
	end
end

GUNSMITH.GetCustomModPath = function ( f41_arg0, f41_arg1 )
	return "blueprints." .. f41_arg0 .. ".weaponSetup." .. f41_arg1
end

GUNSMITH.IsModSlotInUse = function ( f40_arg0, f40_arg1, f40_arg2 )
	local f40_local0 = Gunsmith[0x74F8974028A5B02]( f40_arg0, GUNSMITH.GetCustomModPath( f40_arg1, f40_arg2 ) .. ".blueprintName" )
	if f40_local0 ~= nil then
		return 0 < #f40_local0
	else
		return false
	end
end

GUNSMITH.GetAllCustomMods = function ( f39_arg0, f39_arg1, f39_arg2 )
	if not f39_arg1 then
		f39_arg1 = {}
	end
	if not f39_arg2 then
		f39_arg2 = {}
	end
	for f39_local9, f39_local10 in ipairs( WEAPON.GetWeapons() ) do
		if f39_local10 and f39_local10[0x6D696AD252F1CB1] then
			local f39_local3 = f39_local10[0x9E9C01960F4C582]
			local f39_local4 = Engine[0x6093D047200548]( "weapondata:" .. f39_local10[0x6D696AD252F1CB1] )
			if f39_local4 then
				local f39_local5 = f39_arg2.byWeapons
				if f39_local5 then
					f39_local5 = not f39_arg2.byWeapons[f39_local3]
				end
				if not f39_local5 and f39_local4[0x4FB3C98AEEAB347] and 0 <= f39_local4[0x4FB3C98AEEAB347] then
					for f39_local6 = 0, GUNSMITH.maxMods - 1, 1 do
						if GUNSMITH.IsModSlotInUse( f39_arg0, f39_local3, f39_local6 ) then
							table.insert( f39_arg1, GUNSMITH.GetCustomMod( f39_arg0, f39_local3, f39_local6 ) )
						end
					end
				end
			end
		end
	end
	return f39_arg1
end

GUNSMITH.GetCustomModsForWeapon = function ( f38_arg0, f38_arg1 )
	local f38_local0 = {}
	for f38_local1 = 0, GUNSMITH.maxMods - 1, 1 do
		if GUNSMITH.IsModSlotInUse( f38_arg0, f38_arg1, f38_local1 ) then
			table.insert( f38_local0, GUNSMITH.GetCustomMod( f38_arg0, f38_arg1, f38_local1 ) )
		end
	end
	return f38_local0
end

GUNSMITH.GetCustomMod = function ( f37_arg0, f37_arg1, f37_arg2 )
	local f37_local0 = GUNSMITH.GetCustomModPath( f37_arg1, f37_arg2 )
	local f37_local1 = {
		blueprintName = Gunsmith[0x74F8974028A5B02]( f37_arg0, f37_local0 .. ".blueprintName" ),
		weapon = Gunsmith[0x74F8974028A5B02]( f37_arg0, f37_local0 .. ".weapon" ),
		lootID = tonumber( Gunsmith[0x74F8974028A5B02]( f37_arg0, f37_local0 .. ".lootItemID" ) ),
		variantID = tonumber( Gunsmith[0x74F8974028A5B02]( f37_arg0, f37_local0 .. ".variantID" ) ),
		camo = Gunsmith[0x74F8974028A5B02]( f37_arg0, f37_local0 .. ".camo" ),
		cosmeticAttachment = Gunsmith[0x74F8974028A5B02]( f37_arg0, f37_local0 .. ".cosmeticAttachment" ),
		reticle = Gunsmith[0x74F8974028A5B02]( f37_arg0, f37_local0 .. ".reticle" )
	}
	local f37_local2 = f37_local0 .. ".attachmentSetup"
	f37_local1.attachments = {}
	for f37_local3 = 0, WEAPON.maxAttachmentsPerWeapon - 1, 1 do
		local f37_local6 = f37_local2 .. "." .. f37_local3
		table.insert( f37_local1.attachments, {
			ref = Gunsmith[0x74F8974028A5B02]( f37_arg0, f37_local6 .. ".attachment" ),
			variantID = Gunsmith[0x74F8974028A5B02]( f37_arg0, f37_local6 .. ".variantID" )
		} )
	end
	local f37_local3 = f37_local0 .. ".sticker"
	f37_local1.stickers = {}
	for f37_local4 = 0, WEAPON.maxStickersPerWeapon - 1, 1 do
		table.insert( f37_local1.stickers, Gunsmith[0x74F8974028A5B02]( f37_arg0, f37_local3 .. "." .. f37_local4 ) )
	end
	f37_local1.isCustom = true
	f37_local1.displayOrder = WEAPON.GetDisplayOrder( f37_local1.weapon )
	return f37_local1
end

GUNSMITH.GetFirstFreeCustomModSlot = function ( f36_arg0, f36_arg1, f36_arg2 )
	for f36_local0 = 0, GUNSMITH.maxMods - 1, 1 do
		if GUNSMITH.IsModSlotUnlocked( f36_arg0, f36_arg2, f36_local0 ) and #Gunsmith[0x74F8974028A5B02]( f36_arg0, GUNSMITH.GetCustomModPath( f36_arg1, f36_local0 ) .. ".blueprintName" ) == 0 then
			return f36_local0
		end
	end
	return false
end

GUNSMITH.GetSlotUnlockRank = function ( f35_arg0, f35_arg1, f35_arg2 )
	return 0
end

GUNSMITH.GetNextModUnlockRank = function ( f34_arg0, f34_arg1, f34_arg2 )
	local f34_local0 = GUNSMITH.CountModSlotsUnlocked( f34_arg0, f34_arg2 )
	if f34_local0 <= GUNSMITH.maxMods then
		return GUNSMITH.GetSlotUnlockRank( f34_arg1, f34_arg2, f34_local0 )
	else
		return nil
	end
end

GUNSMITH.CountAvailableCustomModSlots = function ( f33_arg0, f33_arg1, f33_arg2 )
	local f33_local0 = 0
	for f33_local1 = 0, GUNSMITH.maxMods - 1, 1 do
		if GUNSMITH.IsModSlotUnlocked( f33_arg0, f33_arg2, f33_local1 ) and #Gunsmith[0x74F8974028A5B02]( f33_arg0, GUNSMITH.GetCustomModPath( f33_arg1, f33_local1 ) .. ".blueprintName" ) == 0 then
			f33_local0 = f33_local0 + 1
		end
	end
	return f33_local0
end

GUNSMITH.SaveAsCustomMod = function ( f32_arg0, f32_arg1, f32_arg2 )
	assert( f32_arg2 )
	assert( type( f32_arg2 ) == "number" )
	local f32_local0 = assert
	local f32_local1
	if 0 > f32_arg2 or f32_arg2 > GUNSMITH.maxMods - 1 then
		f32_local1 = false
	else
		f32_local1 = true
	end
	f32_local0( f32_local1 )
	f32_local0 = GUNSMITH.GetCustomModPath( f32_arg1.weapon, f32_arg2 )
	Gunsmith[0x458814B87A126EE]( f32_arg0, f32_local0 .. ".blueprintName", f32_arg1.blueprintName )
	Gunsmith[0x458814B87A126EE]( f32_arg0, f32_local0 .. ".weapon", f32_arg1.weapon )
	Gunsmith[0x458814B87A126EE]( f32_arg0, f32_local0 .. ".variantID", f32_arg1.variantID )
	Gunsmith[0x458814B87A126EE]( f32_arg0, f32_local0 .. ".camo", f32_arg1.camo )
	Gunsmith[0x458814B87A126EE]( f32_arg0, f32_local0 .. ".cosmeticAttachment", f32_arg1.cosmeticAttachment )
	Gunsmith[0x458814B87A126EE]( f32_arg0, f32_local0 .. ".reticle", f32_arg1.reticle )
	Gunsmith[0x458814B87A126EE]( f32_arg0, f32_local0 .. ".lootItemID", f32_arg1.lootID )
	local f32_local2 = f32_local0 .. ".attachmentSetup"
	for f32_local1 = 0, #f32_arg1.attachments - 1, 1 do
		local f32_local5 = f32_local2 .. "." .. f32_local1
		Gunsmith[0x458814B87A126EE]( f32_arg0, f32_local5 .. ".attachment", f32_arg1.attachments[f32_local1 + 1].ref )
		Gunsmith[0x458814B87A126EE]( f32_arg0, f32_local5 .. ".variantID", f32_arg1.attachments[f32_local1 + 1].variantID )
	end
	f32_local1 = f32_local0 .. ".sticker"
	for f32_local3 = 0, #f32_arg1.stickers - 1, 1 do
		Gunsmith[0x458814B87A126EE]( f32_arg0, f32_local1 .. "." .. f32_local3, f32_arg1.stickers[f32_local3 + 1] )
	end
	Gunsmith[0x72A7A297BA6F63F]( f32_arg0 )
end

GUNSMITH.DeleteCustomMod = function ( f31_arg0, f31_arg1, f31_arg2 )
	local f31_local0 = GUNSMITH.GetCustomModPath( f31_arg1, f31_arg2 )
	local f31_local1 = Gunsmith[0x74F8974028A5B02]( f31_arg0, f31_local0 .. ".blueprintName" )
	Gunsmith[0x458814B87A126EE]( f31_arg0, f31_local0 .. ".blueprintName", "" )
	Gunsmith[0x458814B87A126EE]( f31_arg0, f31_local0 .. ".weapon", WEAPON.none )
	Gunsmith[0x458814B87A126EE]( f31_arg0, f31_local0 .. ".variantID", WEAPON.baseVariant )
	Gunsmith[0x458814B87A126EE]( f31_arg0, f31_local0 .. ".camo", WEAPON.CamoNoneValue )
	Gunsmith[0x458814B87A126EE]( f31_arg0, f31_local0 .. ".cosmeticAttachment", WEAPON.CharmNoneValue )
	Gunsmith[0x458814B87A126EE]( f31_arg0, f31_local0 .. ".reticle", WEAPON.ReticleNoneValue )
	Gunsmith[0x458814B87A126EE]( f31_arg0, f31_local0 .. ".lootItemID", LOOT.emptyID )
	local f31_local2 = f31_local0 .. ".attachmentSetup"
	for f31_local3 = 0, WEAPON.maxAttachmentsPerWeapon - 1, 1 do
		local f31_local6 = f31_local2 .. "." .. f31_local3
		Gunsmith[0x458814B87A126EE]( f31_arg0, f31_local6 .. ".attachment", ATTACHMENT.none )
		Gunsmith[0x458814B87A126EE]( f31_arg0, f31_local6 .. ".variantID", ATTACHMENT.baseVariant )
	end
	local f31_local3 = f31_local0 .. ".sticker"
	for f31_local4 = 0, WEAPON.maxStickersPerWeapon - 1, 1 do
		Gunsmith[0x458814B87A126EE]( f31_arg0, f31_local3 .. "." .. f31_local4, WEAPON.StickerNoneValue )
	end
	local f31_local4 = LOADOUT.GetLoadoutSquadMember( f31_arg0 )
	for f31_local11, f31_local12 in ddlpairs( f31_local4.loadouts ) do
		for f31_local8, f31_local9 in ddlpairs( f31_local12.weaponSetups ) do
			if f31_local9.blueprintName:get() == f31_local1 then
				f31_local9.blueprintName:set( "" )
			end
		end
	end
	Gunsmith[0x72A7A297BA6F63F]( f31_arg0 )
end

GUNSMITH.GetUsedAttachmentIndices = function ( f30_arg0, f30_arg1 )
	local f30_local0 = GUNSMITH.GetAttachmentCategories( f30_arg0 )
	local f30_local1 = {}
	for f30_local9, f30_local10 in ipairs( f30_local0 ) do
		if f30_arg1[f30_local10] and 0 < #f30_arg1[f30_local10] then
			local f30_local5 = ATTACHMENT.GetAttachmentCategoryButton( f30_local10 )
			assert( f30_local5, "Gunsmith button index for " .. f30_local10 .. " is invalid." )
			if f30_local1[f30_local5] then
				DebugPrint( "Tried to use button index " .. f30_local5 .. " for category " .. f30_local10 .. " but it was already in use. Attempting to use first unused index." )
				for f30_local6 = 1, GUNSMITH.maxCategories, 1 do
					if not f30_local1[f30_local6] then
						f30_local1[f30_local6] = f30_local10
					end
				end
			end
			f30_local1[f30_local5] = f30_local10
		end
	end
	return f30_local1
end

GUNSMITH.GetCustomModName = function ( f29_arg0 )
	if 0 < #f29_arg0 then
		return string.sub( f29_arg0, GUNSMITH.modSlotChars + 1 )
	else
		return ""
	end
end

GUNSMITH.GetCustomModSlot = function ( f28_arg0 )
	return tonumber( string.sub( f28_arg0, 1, GUNSMITH.modSlotChars ) )
end

GUNSMITH.AreCustomModsEqual = function ( f27_arg0, f27_arg1 )
	local f27_local0
	if f27_arg0.blueprintName ~= f27_arg1.blueprintName or f27_arg0.weapon ~= f27_arg1.weapon then
		f27_local0 = false
	else
		f27_local0 = true
	end
	return f27_local0
end

GUNSMITH.GenerateModName = function ( f26_arg0, f26_arg1 )
	return string.format( "%03d", f26_arg1 ) .. f26_arg0
end

GUNSMITH.GetWeaponPreviewCameraType = function ( f25_arg0 )
	local f25_local0 = WEAPON.GetWeaponClass( f25_arg0 )
	local f25_local1 = GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.NONE
	if f25_local0 == WEAPON.ARClass or f25_local0 == WEAPON.LMGClass or f25_local0 == WEAPON.sniperClass or f25_local0 == WEAPON.SMGClass or f25_local0 == WEAPON.DMRClass then
		f25_local1 = GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.BIG_GUN
	elseif f25_local0 == WEAPON.SHOTGUNClass then
		f25_local1 = GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.BIG_SHOTGUN
	elseif f25_local0 == WEAPON.pistolClass then
		f25_local1 = GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.SMALL_GUN
	end
	return f25_local1
end

GUNSMITH.GetWeaponAvailableCategoryPreviewTable = function ( f24_arg0 )
	local f24_local0 = GUNSMITH.GetWeaponPreviewCameraType( f24_arg0 )
	local f24_local1 = StringTable[0xFD4E49A34DD43AE]( CSV.attachmentCategories.file )
	local f24_local2 = {}
	local f24_local3 = false
	for f24_local4 = 0, f24_local1 - 1, 1 do
		f24_local3 = nil
		if f24_local0 == GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.BIG_GUN then
			f24_local3 = StringTable[0x2077452C28AB2FC]( CSV.attachmentCategories.file, f24_local4, CSV.attachmentCategories.cols.enableBigGunPreviewCamera )
		elseif f24_local0 == GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.BIG_SHOTGUN then
			f24_local3 = StringTable[0x2077452C28AB2FC]( CSV.attachmentCategories.file, f24_local4, CSV.attachmentCategories.cols.enableBigShotgunPreviewCamera )
		elseif f24_local0 == GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.SMALL_GUN then
			f24_local3 = StringTable[0x2077452C28AB2FC]( CSV.attachmentCategories.file, f24_local4, CSV.attachmentCategories.cols.enableSmallGunPreviewCamera )
		end
		if tonumber( f24_local3 ) == 1 then
			table.insert( f24_local2, StringTable[0x2077452C28AB2FC]( CSV.attachmentCategories.file, f24_local4, CSV.attachmentCategories.cols.ref ) )
		end
	end
	return f24_local2
end

GUNSMITH.IsAnyWeaponAvailableCategoryPreviewData = function ( f23_arg0 )
	local f23_local0 = GUNSMITH.GetWeaponPreviewCameraType( f23_arg0 )
	local f23_local1 = StringTable[0xFD4E49A34DD43AE]( CSV.attachmentCategories.file )
	local f23_local2 = {}
	local f23_local3 = nil
	for f23_local4 = 0, f23_local1 - 1, 1 do
		f23_local3 = nil
		if f23_local0 == GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.BIG_GUN then
			f23_local3 = StringTable[0x2077452C28AB2FC]( CSV.attachmentCategories.file, f23_local4, CSV.attachmentCategories.cols.enableBigGunPreviewCamera )
		elseif f23_local0 == GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.BIG_SHOTGUN then
			f23_local3 = StringTable[0x2077452C28AB2FC]( CSV.attachmentCategories.file, f23_local4, CSV.attachmentCategories.cols.enableBigShotgunPreviewCamera )
		elseif f23_local0 == GUNSMITH.WEAPON_PREVIEW_CAMERA_TYPE.SMALL_GUN then
			f23_local3 = StringTable[0x2077452C28AB2FC]( CSV.attachmentCategories.file, f23_local4, CSV.attachmentCategories.cols.enableSmallGunPreviewCamera )
		end
		if tonumber( f23_local3 ) == 1 then
			return true
		end
	end
	return false
end

GUNSMITH.GetModSlotLootID = function ( f22_arg0, f22_arg1 )
	return GUNSMITH.modSlotBaseID + f22_arg0 * 1000 + f22_arg1
end

GUNSMITH.IsModSlotUnlocked = function ( f21_arg0, f21_arg1, f21_arg2 )
	return LOOT.IsUnlockedWithID( f21_arg0, GUNSMITH.GetModSlotLootID( f21_arg1, f21_arg2 ) )
end

GUNSMITH.AreAnyModSlotsUnlocked = function ( f20_arg0, f20_arg1 )
	for f20_local0 = 0, GUNSMITH.maxMods - 1, 1 do
		if GUNSMITH.IsModSlotUnlocked( f20_arg0, f20_arg1, f20_local0 ) then
			return true
		end
	end
	return false
end

GUNSMITH.CountModSlotsUnlocked = function ( f19_arg0, f19_arg1 )
	local f19_local0 = 0
	for f19_local1 = 0, GUNSMITH.maxMods - 1, 1 do
		if GUNSMITH.IsModSlotUnlocked( f19_arg0, f19_arg1, f19_local1 ) then
			f19_local0 = f19_local0 + 1
		end
	end
	return f19_local0
end

GUNSMITH.GetGunsmithChallengeCamoCategory = function ( f18_arg0, f18_arg1, f18_arg2 )
	local f18_local0 = Challenge.GetLootID( f18_arg0, f18_arg1, f18_arg2 )
	if f18_local0 and 0 < #f18_local0 then
		local f18_local1 = split( f18_local0, "|" )
		local f18_local2 = tonumber( f18_local1[1] )
		if f18_local2 and f18_local2 >= LOOT.CamoIDsMin and f18_local2 <= LOOT.CamoIDsMax then
			local f18_local3 = WEAPON.GetCamoDataForRef( WEAPON.GetCamoRef( f18_local2 ) )
			return WEAPON.GetCamoCategory( f18_local3[0x9E9C01960F4C582] )
		end
	end
	return nil
end

GUNSMITH.GetGunsmithChallengeRelatedWeaponID = function ( f17_arg0, f17_arg1, f17_arg2 )
	local f17_local0 = Challenge.GetLootID( f17_arg0, f17_arg1, f17_arg2 )
	if f17_local0 and 0 < #f17_local0 then
		local f17_local1 = split( f17_local0, "|" )
		local f17_local2 = tonumber( f17_local1[1] )
		if f17_local2 and f17_local2 >= LOOT.CamoIDsMin and f17_local2 <= LOOT.CamoIDsMax then
			return LOOT.GetLootItemRelatedWeapon( f17_local2, LOOT.itemTypes.CAMO )
		end
	end
	return nil
end

GUNSMITH.IsWeaponPartsAttachment = function ( f16_arg0 )
	return GUNSMITH.AttachmentSetupTypeMap[f16_arg0] == GUNSMITH.AttachmentSetupType.WEAPON_PART
end

GUNSMITH.IsWeaponPartsAttachmentByRef = function ( f15_arg0 )
	return GUNSMITH.IsWeaponPartsAttachment( ATTACHMENT.GetCategory( f15_arg0 ) )
end

GUNSMITH.IsAttachmentSetupFull = function ( f14_arg0, f14_arg1 )
	local f14_local0 = GUNSMITH.AttachmentSetupTypeMap[f14_arg0]
	local f14_local1 = GUNSMITH.AttachmentSetupDataMap[f14_local0].minIndex
	local f14_local2 = GUNSMITH.AttachmentSetupDataMap[f14_local0].maxIndex
	for f14_local7, f14_local8 in ddlpairs( f14_arg1.attachmentSetup ) do
		if f14_local1 <= f14_local7 and f14_local7 <= f14_local2 then
			local f14_local6 = ATTACHMENT.GetRefFromSetup( f14_local8 )
			if f14_local6 == nil or f14_local6 == ATTACHMENT.none then
				return false
			end
		end
	end
	return true
end

GUNSMITH.GetAvailableAttachmentSetupIndex = function ( f13_arg0, f13_arg1 )
	local f13_local0 = nil
	local f13_local1 = GUNSMITH.AttachmentSetupTypeMap[f13_arg0]
	local f13_local2 = GUNSMITH.AttachmentSetupDataMap[f13_local1].minIndex
	local f13_local3 = GUNSMITH.AttachmentSetupDataMap[f13_local1].maxIndex
	for f13_local7, f13_local8 in ddlpairs( f13_arg1.attachmentSetup ) do
		if f13_local2 <= f13_local7 and f13_local7 <= f13_local3 and ATTACHMENT.GetRefFromSetup( f13_local8 ) == ATTACHMENT.none then
			f13_local0 = f13_local7 + 1
		end
	end
	return f13_local0
end

GUNSMITH.EquipBaseWeaponPartsAttachment = function ( f12_arg0, f12_arg1 )
	local f12_local0 = WEAPON.GetWeaponModelNameFromPlayerData( f12_arg1.weapon:get(), f12_arg1, {
		includeAttachments = true,
		controllerIndex = f12_arg0
	} )
	local f12_local1 = LUI.Split( f12_local0, "+" )
	local f12_local2 = GUNSMITH.AttachmentSetupDataMap[GUNSMITH.AttachmentSetupType.WEAPON_PART].minIndex
	local f12_local3 = GUNSMITH.AttachmentSetupDataMap[GUNSMITH.AttachmentSetupType.WEAPON_PART].maxIndex
	for f12_local4 = 2, #f12_local1, 1 do
		local f12_local7 = f12_local1[f12_local4]
		if f12_local7 and 0 < #f12_local7 then
			local f12_local8 = LUI.Split( f12_local7, "|" )
			if 1 < #f12_local8 then
				f12_local7 = tostring( Engine[0xFC084BF31D917C5]( f12_local1[1], f12_local8[1], tonumber( f12_local8[2] ) ) )
			end
			if GUNSMITH.IsWeaponPartsAttachment( ATTACHMENT.GetCategory( f12_local7 ) ) then
				assert( f12_local2 <= f12_local3, "Trying to equip attachment" .. tostring( f12_local7 ) .. " in attachment setup slot" .. tostring( f12_local2 ) .. " which is out of range. The weapon model name is " .. f12_local0 )
				local f12_local9 = ATTACHMENT.GetRefFromSetup( f12_arg1.attachmentSetup[f12_local2] )
				if f12_local9 ~= nil and f12_local9 == ATTACHMENT.none then
					ATTACHMENT.SetPlayerDataRef( f12_arg1.attachmentSetup[f12_local2], f12_local7 )
					f12_arg1.attachmentSetup[f12_local2].variantID:set( ATTACHMENT.baseVariant )
				end
				f12_local2 = f12_local2 + 1
			end
		end
	end
end

GUNSMITH.UpdateAmmoModel = function ( f11_arg0, f11_arg1, f11_arg2 )
	local f11_local0 = Engine[0x17AFF3F28020742]( f11_arg1, FrontEndScene.ClientWeapons.Preview )
	if f11_local0 then
		CLIENT_MODEL.SetModel( CLIENT_MODEL.coreMPModels.AMMO_DISPLAY, f11_local0 )
		local f11_local1 = ClientModel[0x9088CC2C1E6A1E9]( f11_arg2, CLIENT_MODEL.coreMPModels.AMMO_DISPLAY.tagOrigin )
		f11_local1.zPosition = f11_local1.zPosition + GL_HACK.GetAmmoOffset( f11_local0 )
		ClientModel[0x9C89C00DF9B85ED]( f11_arg2, f11_local1 )
	end
end

GUNSMITH.GetCategoryLockDetails = function ( f10_arg0, f10_arg1 )
	local f10_local0 = {}
	local f10_local1 = StringTable[0x8073B436CDE1BF]( CSV.attachmentCategoryLocks.file, CSV.attachmentCategoryLocks.cols.ref, f10_arg1 )
	if f10_local1 and 0 <= f10_local1 then
		local f10_local2 = CSV.ReadRow( CSV.attachmentCategoryLocks, f10_local1 )
		for f10_local3 = 1, GUNSMITH.NUM_BLOCKED_CATEGORIES, 1 do
			local f10_local6 = split( f10_local2["category" .. tostring( f10_local3 )], "|" )
			local f10_local7 = f10_local6[1]
			if not String.IsNilOrEmpty( f10_local7 ) then
				local f10_local8 = f10_local6[2]
				if not String.IsNilOrEmpty( f10_local8 ) then
					local f10_local9 = ATTACHMENT.GetIDByRef( f10_local8 )
					f10_local0[f10_local7] = {
						isLocked = not LOOT.IsUnlockedWithID( f10_arg0, f10_local9 ),
						unlockLevel = PROGRESSION.GetLootUnlockWeaponLevel( f10_arg1, f10_local9 ) + 1
					}
				end
			end
		end
	end
	return f10_local0
end

GUNSMITH.EquipPreservedAttachment = function ( f9_arg0, f9_arg1, f9_arg2, f9_arg3, f9_arg4 )
	local f9_local0 = assert
	local f9_local1
	if f9_arg3 then
		f9_local1 = f9_arg3
	else
		f9_local1 = type( f9_arg3 ) == "table"
	end
	f9_local0( f9_local1 )
	f9_local0 = GUNSMITH.AttachmentSetupDataMap[GUNSMITH.AttachmentSetupType.WEAPON_PART].minIndex
	local f9_local2 = GUNSMITH.AttachmentSetupDataMap[GUNSMITH.AttachmentSetupType.WEAPON_PART].maxIndex
	f9_local1 = GUNSMITH.AttachmentSetupDataMap[GUNSMITH.AttachmentSetupType.ATTACHMENT].minIndex
	local f9_local3 = GUNSMITH.AttachmentSetupDataMap[GUNSMITH.AttachmentSetupType.ATTACHMENT].maxIndex
	local f9_local4 = GUNSMITH.GetCategoryLockDetails( f9_arg0, f9_arg4 )
	for f9_local5 = 1, #f9_arg3, 1 do
		local f9_local8 = f9_arg3[f9_local5]
		local f9_local9 = ATTACHMENT.GetCategory( f9_local8 )
		local f9_local10 = GUNSMITH.IsWeaponPartsAttachment( f9_local9 )
		local f9_local11
		if f9_local4 then
			f9_local11 = f9_local4
		else
			f9_local11 = f9_local4[f9_local9]
			if f9_local11 then
				f9_local11 = not f9_local4[f9_local9].isLocked
			end
		end
		if f9_local11 then
			if f9_local10 then
				local f9_local12 = f9_local0
				if ATTACHMENT.GetCategory( ATTACHMENT.GetRefFromSetup( f9_arg1.attachmentSetup[f9_local12] ), f9_arg2 ) ~= f9_local9 then
					
				else
					
				end
				ATTACHMENT.SetPlayerDataRef( f9_arg1.attachmentSetup[f9_local12], f9_local8 )
				f9_arg1.attachmentSetup[f9_local12].variantID:set( ATTACHMENT.baseVariant )
			end
			assert( f9_local1 <= f9_local3, " EquipPreservedAttachment: regular presverted attachment is out of range in attachment setup." )
			ATTACHMENT.SetPlayerDataRef( f9_arg1.attachmentSetup[f9_local1], f9_local8 )
			f9_arg1.attachmentSetup[f9_local1].variantID:set( ATTACHMENT.baseVariant )
			f9_local1 = f9_local1 + 1
		end
	end
end

GUNSMITH.InitLoadoutBaseWeaponPartsAttachment = function ( f8_arg0 )
	local f8_local0 = LOADOUT.GetLoadoutSquadMember( f8_arg0 )
	for f8_local5, f8_local6 in ddlpairs( f8_local0.loadouts ) do
		for f8_local4 = 0, 1, 1 do
			GUNSMITH.EquipBaseWeaponPartsAttachment( f8_arg0, f8_local6.weaponSetups[f8_local4] )
		end
	end
end

GUNSMITH.GetAttachmentRefsByType = function ( f7_arg0, f7_arg1 )
	local f7_local0 = {}
	local f7_local1 = GUNSMITH.AttachmentSetupTypeMap[f7_arg0]
	local f7_local2 = GUNSMITH.AttachmentSetupDataMap[f7_local1].minIndex
	local f7_local3 = GUNSMITH.AttachmentSetupDataMap[f7_local1].maxIndex
	for f7_local7, f7_local8 in ddlpairs( f7_arg1.attachmentSetup ) do
		local f7_local9 = ATTACHMENT.GetRefFromSetup( f7_local8 )
		if f7_local2 <= f7_local7 and f7_local7 <= f7_local3 and f7_local9 ~= ATTACHMENT.none then
			table.insert( f7_local0, f7_local9 )
		end
	end
	return f7_local0
end

GUNSMITH.GetEquipCounts = function ( f6_arg0, f6_arg1, f6_arg2, f6_arg3 )
	local f6_local0 = 0
	local f6_local1 = 0
	if not f6_arg3 then
		f6_arg3 = {}
	end
	f6_arg3.includeAttachments = true
	f6_arg3.includeCamos = false
	f6_arg3.includeStickers = false
	local f6_local2 = split( WEAPON.GetWeaponModelName( f6_arg0, f6_arg1, f6_arg3 ), "+" )
	local f6_local3 = f6_arg3.isDefault
	for f6_local8, f6_local9 in ipairs( f6_arg2 ) do
		local f6_local7
		if f6_local3 and not f6_local9 then
			f6_local7 = f6_local9
		else
			f6_local7 = f6_local9.ref
		end
		if f6_local7 ~= ATTACHMENT.none then
			if GUNSMITH.IsWeaponPartsAttachment( ATTACHMENT.GetCategory( f6_local7 ) ) then
				f6_local1 = f6_local1 + 1
			else
				f6_local0 = f6_local0 + 1
			end
		end
	end
	return {
		attachmentCount = f6_local0,
		weaponPartCount = f6_local1
	}
end

GUNSMITH.EnterFiringRange = function ( f5_arg0, f5_arg1, f5_arg2 )
	local f5_local0 = f5_arg2.weaponPlayerData
	local f5_local1 = f5_arg2.loadoutPlayerData
	local f5_local2 = f5_arg2.weaponSlot
	local f5_local3 = f5_arg2.qualifier
	local f5_local4 = {
		currentWeaponTable = WEAPON.GenerateWeaponTable( f5_local0 )
	}
	local f5_local5
	if f5_local2 == 1 then
		f5_local5 = 2
	else
		f5_local5 = 1
	end
	f5_local4.secondaryWeaponTable = WEAPON.GenerateWeaponTable( f5_local1.weaponSetups[f5_local5] )
	if 0 < tonumber( f5_local4.currentWeaponTable.variantID ) then
		f5_local4.currentWeaponTable.lootName = WEAPON.GetLootWeaponName( f5_local4.currentWeaponTable.weapon, f5_local4.currentWeaponTable.lootID )
	end
	if 0 < tonumber( f5_local4.secondaryWeaponTable.variantID ) then
		f5_local4.secondaryWeaponTable.lootName = WEAPON.GetLootWeaponName( f5_local4.secondaryWeaponTable.weapon, f5_local4.secondaryWeaponTable.lootID )
	end
	LUI.FlowManager.RequestAddMenu( "FiringRangeMenu", true, f5_arg1, false, f5_local4, true )
	if f5_local3 == "keyboard" or f5_local3 == "gamepad" then
		Engine[0xC4146BA76D0F982]( CoD.SFX.MouseClick )
	end
end

GUNSMITH.GetTableWithOnlyEquippedAttachment = function ( f4_arg0, f4_arg1 )
	local f4_local0 = {
		weapon = f4_arg0,
		attachments = {}
	}
	f4_local0.attachments[1] = {}
	f4_local0.attachments[1].ref = f4_arg1.ref
	local f4_local1 = f4_local0.attachments[1]
	local f4_local2 = f4_arg1.variantID
	if not f4_local2 then
		f4_local2 = ATTACHMENT.baseVariant
	end
	f4_local1.variantID = f4_local2
	f4_local0.attachments[1].tuningData = f4_arg1.tuningData
	for f4_local1 = 2, GUNSMITH.maxCategories, 1 do
		f4_local0.attachments[f4_local1] = {}
		f4_local0.attachments[f4_local1].ref = "none"
		f4_local0.attachments[f4_local1].variantID = -1
	end
	return f4_local0
end

GUNSMITH.GetCurAttachmentRefByCategory = function ( f3_arg0, f3_arg1 )
	local f3_local0 = nil
	for f3_local4, f3_local5 in ipairs( f3_arg1.attachments ) do
		local f3_local6 = ATTACHMENT.GetRef( f3_local5.ref, f3_arg1.weapon )
		if ATTACHMENT.GetCategory( f3_local6 ) == f3_arg0 then
			f3_local0 = f3_local6
			break
		end
	end
	return f3_local0
end

GUNSMITH.MobileOpenGunsmith = function ( f2_arg0, f2_arg1 )
	local f2_local0 = LUI.FlowManager.GetScopedData( f2_arg0 )
	GUNSMITH.OpenGunsmith( f2_arg1, f2_local0.selectedLoadoutIndex, f2_arg0._weaponIndex )
end

GUNSMITH.GetUsedCategories = function ( f1_arg0, f1_arg1 )
	local f1_local0 = {}
	for f1_local4, f1_local5 in ipairs( f1_arg0 ) do
		if f1_arg1[f1_local5] and 0 < #f1_arg1[f1_local5] then
			table.insert( f1_local0, f1_local5 )
		end
	end
	return f1_local0
end

