-- Generated by CoDLuaDecompiler
-- Version: 2.4.2
-- Date: 21-11-2025 08:48
module( ..., package.seeall )
require( "ui.generated.widgets.centeredtextbutton" )
require( "ui.generated.widgets.loadingspinner" )
local f0_local0 = function ( f8_arg0, f8_arg1, f8_arg2 )
	if not f8_arg2 then
		return 
	elseif f8_arg2.isJoiningWithCode then
		return 
	end
	Dvar[0x8EA06EEDB58D872]( 0x85EF1ED1D39D3A3, true )
	if f8_arg2.isWarzonePrivateMatch and CONDITIONS.IsWarzonePrivateMatchLobbyEnabled() then
		Game[0x631AB43BA10119]( "br" )
		PRIVATE_MATCH.SetupPrivateMatchGameType( Enum[0x3085A67688502CD][0x7C26AC6414E926F] )
	end
end

local f0_local1 = function ( f2_arg0, f2_arg1, f2_arg2 )
	local f2_local0 = nil
	if f2_arg2 and f2_arg2.isWarzonePrivateMatch then
		local f2_local1 = DataSources.frontEnd.lobby.lobbyJoinCode
		if not f2_arg2.isJoiningWithCode then
			MP_COMMON.StartPrivateMatchLobbyDsRequired( "big" )
		end
		f2_arg0._matchmakingSubscription = f2_arg0:SubscribeToModel( DataSources.frontEnd.lobby.isMatchmakingActive:GetModel( f2_arg1 ), function ()
			if not f2_arg0:GetValue( f2_arg0 ) then
				local f7_local0 = {
					title = Engine[0xED84C33EC5F01EA]( 0xD09E09A43DE9B80 ),
					message = Engine[0xED84C33EC5F01EA]( 0x8F9F8C5D0E5537A )
				}
				f2_arg0:UnsubscribeFromModel( f2_arg0._matchmakingSubscription )
				Lobby.LeaveCustomGameLobby()
				LUI.FlowManager.RequestLeaveMenu( f2_arg0, true, true )
				LUI.FlowManager.RequestPopupMenu( nil, "PopupOK", true, f2_arg0._controllerIndex, false, f7_local0, nil, false, true )
			end
		end, true )
		f2_arg0._lobbyJoinCodeSubscription = f2_arg0:SubscribeToModel( f2_local1:GetModel( f2_arg1 ), function ()
			local f6_local0 = f2_arg0:GetValue( f2_arg0 )
			if f6_local0 and f6_local0 ~= "" then
				if not f2_arg0.isJoiningWithCode then
					Lobby[0xE990C5BCA894ECC]( true )
					local f6_local1 = DataSources.frontEnd.lobby.privateRecipe:GetValue( f2_arg0 )
					MatchRules[0xE859FDA0484D3DE]( f6_local1 )
					MatchRules[0x9550565068844CB]( Lobby.MatchRulesMembers.RecipeName, f6_local1 )
				end
				f2_arg0:UnsubscribeFromModel( f2_arg0._lobbyJoinCodeSubscription )
				LUI.FlowManager.RequestAddMenu( "WarzonePrivateMatchLobbyChangeRoleMenu", true, f2_arg0, true, nil, true )
			end
		end )
		f2_arg0.CancelButton:addEventHandler( "button_action", function ( f5_arg0, f5_arg1 )
			Lobby.LeaveCustomGameLobby()
			MatchRules[0xE859FDA0484D3DE]()
			LUI.FlowManager.RequestLeaveMenu( f2_arg0, true, true )
			return true
		end )
	end
	local f2_local1 = DataSources.frontEnd.lobby.isMatchmakingActive
	MP_COMMON.StartPrivateMatchLobbyDsRequired( "mp" )
	f2_arg0._matchmakingSubscription = f2_arg0:SubscribeToModel( f2_local1:GetModel( f2_arg1 ), function ()
		local f3_local0 = f2_arg0:GetValue( f2_arg0 )
		if f3_local0 then
			f2_arg0:UnsubscribeFromModel( f2_arg0._matchmakingSubscription )
			LUI.FlowManager.RequestLeaveMenuByName( "CustomGameWaitMenu", true, false )
			Lobby.TryNavigateToLobby( function ()
				Lobby.OpenPrivateMatchLobby( {
					controller = f3_local0
				} )
			end, f2_arg0 )
		end
	end )
end

function CustomGameWaitMenu( menu, controller )
	local self = LUI.UIElement.new()
	self.id = "CustomGameWaitMenu"
	local f1_local1
	if controller then
		f1_local1 = controller
	else
		f1_local1 = controller.controllerIndex
	end
	f1_local1 = LUI.ValidateControllerIndex( self, f1_local1 )
	f0_local0( self, f1_local1, controller )
	local f1_local2 = self
	local Background = nil
	
	Background = LUI.UIImage.new()
	Background.id = "Background"
	ACTIONS.AspectRatioScaleAdjustment( self, Background, LAYOUT.AspectRatioImageScalePct.FADEFRAME_STANDARD )
	Background:setImage( RegisterMaterial( 0xE69A8944D26DBEF ), 0 )
	self:addElement( Background )
	self.Background = Background
	
	local CancelButton = nil
	
	CancelButton = MenuBuilder.BuildRegisteredType( "CenteredTextButton", {
		controllerIndex = f1_local1
	} )
	CancelButton.id = "CancelButton"
	CancelButton.Backer:SetRGBFromTable( SWATCHES.IW9StyleGuide.styleGuideCool04, 0 )
	CancelButton.Label:setText( ToUpperCase( Engine[0xED84C33EC5F01EA]( 0xDF4B921D6190715 ) ), 0 )
	CancelButton.ButtonPrompt:setText( "[{ui_primary}]", 0 )
	CancelButton:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 760, _1080p * 1160, _1080p * 900, _1080p * 950 )
	self:addElement( CancelButton )
	self.CancelButton = CancelButton
	
	local WaitingTextBox = nil
	
	WaitingTextBox = LUI.UIText.new()
	WaitingTextBox.id = "WaitingTextBox"
	WaitingTextBox:setText( Engine[0xED84C33EC5F01EA]( 0x36073ED6E6C732C ), 0 )
	WaitingTextBox:SetFont( FONTS.GetFont( FONTS.PrimaryRegular.File ) )
	WaitingTextBox:SetFontSize( 28 * _PT )
	WaitingTextBox:SetMinFontSize( 18 * _PT )
	WaitingTextBox:SetWordWrap( false )
	WaitingTextBox:SetAlignment( LUI.Alignment.Center )
	WaitingTextBox:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 760, _1080p * 1160, _1080p * 620.03, _1080p * 687.03 )
	self:addElement( WaitingTextBox )
	self.WaitingTextBox = WaitingTextBox
	
	local LoadingSpinner = nil
	
	LoadingSpinner = MenuBuilder.BuildRegisteredType( "LoadingSpinner", {
		controllerIndex = f1_local1
	} )
	LoadingSpinner.id = "LoadingSpinner"
	LoadingSpinner:SetAnchorsAndPosition( 0, 1, 0, 1, _1080p * 780, _1080p * 1140, _1080p * 685.03, _1080p * 733.03 )
	self:addElement( LoadingSpinner )
	self.LoadingSpinner = LoadingSpinner
	
	f0_local0( self, f1_local1, controller )
	return self
end

MenuBuilder.registerType( "CustomGameWaitMenu", CustomGameWaitMenu )
LockTable( _M )
